{"home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.simple_painter.Painter.__init__": [[5, 7], ["None"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "self", ".", "viapoint", "=", "(", "0.5", ",", "0.5", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.simple_painter.Painter.draw": [[8, 21], ["matplotlib.xlim", "matplotlib.ylim", "matplotlib.scatter", "matplotlib.plot", "matplotlib.text", "matplotlib.scatter", "matplotlib.pause", "matplotlib.clf", "len", "str"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.plot"], ["", "def", "draw", "(", "self", ",", "x", ",", "y", ",", "t", ")", ":", "\n", "        ", "n_dims", "=", "len", "(", "x", ")", "-", "1", "\n", "plt", ".", "xlim", "(", "0.0", ",", "1.0", ")", "\n", "plt", ".", "ylim", "(", "0.0", ",", "1.0", ")", "\n", "plt", ".", "scatter", "(", "x", "[", "0", ":", "n_dims", "]", ",", "y", "[", "0", ":", "n_dims", "]", ",", "c", "=", "'b'", ")", "\n", "plt", ".", "plot", "(", "x", ",", "y", ",", "'g'", ")", "\n", "plt", ".", "text", "(", "-", "0.8", ",", "-", "0.8", ",", "str", "(", "t", "*", "10", ")", "+", "\"ms\"", ",", "fontsize", "=", "17", ")", "\n", "plt", ".", "scatter", "(", "[", "0.5", "]", ",", "[", "0.5", "]", ",", "c", "=", "'r'", ")", "\n", "# plt.draw()", "\n", "plt", ".", "pause", "(", ".0001", ")", "\n", "plt", ".", "clf", "(", ")", "\n", "\n", "return", "self", ".", "viapoint", "\n", "", "", ""]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.main.main": [[14, 54], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.parse_args", "learn.run"], "function", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.run"], ["def", "main", "(", ")", ":", "\n", "    ", "parser", "=", "argparse", ".", "ArgumentParser", "(", ")", "\n", "\n", "# Parameter setting", "\n", "parser", ".", "add_argument", "(", "'--outdir'", ",", "type", "=", "str", ",", "default", "=", "'mds_out'", ",", "\n", "help", "=", "'output directory'", ")", "\n", "parser", ".", "add_argument", "(", "'--agent'", ",", "type", "=", "str", ",", "default", "=", "'PI2'", ",", "\n", "help", "=", "'PI2, REPS, GMDS, MDS or AMDS'", ")", "\n", "parser", ".", "add_argument", "(", "'--r-normalize'", ",", "action", "=", "'store_true'", ",", "\n", "help", "=", "'normalize or not accumulated reward'", ")", "\n", "parser", ".", "add_argument", "(", "'--r-gain'", ",", "type", "=", "float", ",", "\n", "help", "=", "'the gain of accumulated reward'", ")", "\n", "parser", ".", "add_argument", "(", "'--env'", ",", "type", "=", "str", ",", "\n", "default", "=", "'Arm'", ",", "help", "=", "'Arm or Point'", ")", "\n", "parser", ".", "add_argument", "(", "'--n-updates'", ",", "type", "=", "int", ",", "default", "=", "50", ",", "\n", "help", "=", "'the number of updates'", ")", "\n", "parser", ".", "add_argument", "(", "'--annealing'", ",", "action", "=", "'store_true'", ",", "\n", "help", "=", "'disable simulated annealing'", ")", "\n", "parser", ".", "add_argument", "(", "'--std'", ",", "type", "=", "float", ",", "default", "=", "10.0", ",", "\n", "help", "=", "'the standard deviation of exploration noise'", ")", "\n", "parser", ".", "add_argument", "(", "'--n-dims'", ",", "type", "=", "int", ",", "help", "=", "'the number of dimensions'", ")", "\n", "parser", ".", "add_argument", "(", "'--n-bfs'", ",", "type", "=", "int", ",", "\n", "help", "=", "'the number of basis functions'", ")", "\n", "parser", ".", "add_argument", "(", "'--n-reps'", ",", "type", "=", "int", ",", "default", "=", "10", ",", "\n", "help", "=", "'the number of rollouts'", ")", "\n", "parser", ".", "add_argument", "(", "'--duration'", ",", "type", "=", "float", ",", "\n", "help", "=", "'execution time [s], if task has dynamics'", ")", "\n", "parser", ".", "add_argument", "(", "'--dt'", ",", "type", "=", "float", ",", "\n", "help", "=", "'actual time [s] per 1 time step'", ")", "\n", "parser", ".", "add_argument", "(", "'--render'", ",", "action", "=", "'store_true'", ",", "\n", "help", "=", "'realtime rendering or not'", ")", "\n", "parser", ".", "add_argument", "(", "'--plot'", ",", "action", "=", "'append'", ",", "\n", "help", "=", "'set data directories to plot'", ")", "\n", "parser", ".", "add_argument", "(", "'--plotdir'", ",", "action", "=", "'append'", ",", "\n", "help", "=", "'set data PARENTS directory to plot'", ")", "\n", "parser", ".", "add_argument", "(", "'--no-fig'", ",", "action", "=", "'store_true'", ")", "\n", "parser", ".", "add_argument", "(", "'--seed'", ",", "type", "=", "int", ",", "help", "=", "'fix random seed for debug'", ")", "\n", "\n", "args", "=", "parser", ".", "parse_args", "(", ")", "\n", "run", "(", "args", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.TestPI2.test_update": [[303, 322], ["agents.pi2.PI2", "numpy.array", "numpy.array", "agents.pi2.PI2.update", "range"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.amds.AMDS.update"], ["    ", "def", "test_update", "(", "self", ")", ":", "\n", "        ", "n_dims", "=", "2", "\n", "dmps", "=", "[", "[", "]", "for", "_", "in", "range", "(", "n_dims", ")", "]", "\n", "agent", "=", "PI2", "(", "\n", "dmps", "=", "dmps", ",", "\n", "n_updates", "=", "10", ",", "\n", "n_reps", "=", "3", ",", "\n", "n_dims", "=", "n_dims", ",", "\n", "n_bfs", "=", "4", ",", "\n", "n", "=", "5", ",", "\n", "times", "=", "1.0", ",", "\n", "r_gain", "=", "10", "**", "8", ",", "\n", "r_normalize", "=", "False", ")", "\n", "\n", "r", "=", "np", ".", "array", "(", "[", "[", "0", ",", "10", ",", "20", ",", "10", ",", "20", "]", ",", "[", "50", ",", "10", ",", "10", ",", "10", ",", "10", "]", ",", "\n", "[", "10", ",", "40", ",", "30", ",", "10", ",", "10", "]", "]", ")", "\n", "action", "=", "np", ".", "array", "(", "[", "[", "0", ",", "1", ",", "2", ",", "3", ",", "4", "]", ",", "[", "5", ",", "6", ",", "7", ",", "8", ",", "9", "]", ",", "\n", "[", "10", ",", "11", ",", "12", ",", "13", ",", "14", "]", "]", ")", "\n", "agent", ".", "update", "(", "r", ",", "action", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.TestGMDS.test_update": [[325, 343], ["agents.gmds.GMDS", "numpy.array", "agents.gmds.GMDS.update", "range"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.amds.AMDS.update"], ["    ", "def", "test_update", "(", "self", ")", ":", "\n", "        ", "n_dims", "=", "2", "\n", "dmps", "=", "[", "[", "]", "for", "_", "in", "range", "(", "n_dims", ")", "]", "\n", "agent", "=", "GMDS", "(", "\n", "dmps", "=", "dmps", ",", "\n", "n_updates", "=", "10", ",", "\n", "n_reps", "=", "3", ",", "\n", "n_dims", "=", "n_dims", ",", "\n", "n_bfs", "=", "4", ",", "\n", "n", "=", "5", ",", "\n", "times", "=", "1.0", ",", "\n", "r_gain", "=", "10", "**", "8", ",", "\n", "r_normalize", "=", "False", ")", "\n", "\n", "r", "=", "np", ".", "array", "(", "[", "[", "0", ",", "1", ",", "2", ",", "3", ",", "4", "]", ",", "[", "5", ",", "6", ",", "7", ",", "8", ",", "9", "]", ",", "[", "10", ",", "11", ",", "12", ",", "13", ",", "14", "]", "]", ")", "\n", "action", "=", "[", "[", "[", "0", ",", "1", ",", "2", ",", "3", "]", ",", "[", "4", ",", "5", ",", "6", ",", "7", "]", "]", ",", "[", "[", "0", ",", "1", ",", "2", ",", "3", "]", ",", "[", "4", ",", "5", ",", "6", ",", "7", "]", "]", ",", "\n", "[", "[", "0", ",", "1", ",", "2", ",", "3", "]", ",", "[", "4", ",", "5", ",", "6", ",", "7", "]", "]", "]", "\n", "agent", ".", "update", "(", "r", ",", "action", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.TestMDS.test_update": [[346, 371], ["agents.mds.MDS", "numpy.array", "numpy.array", "agents.mds.MDS.update", "range"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.amds.AMDS.update"], ["    ", "def", "test_update", "(", "self", ")", ":", "\n", "        ", "n_dims", "=", "2", "\n", "n_bfs", "=", "4", "\n", "n_reps", "=", "3", "\n", "dmps", "=", "[", "[", "]", "for", "_", "in", "range", "(", "n_dims", ")", "]", "\n", "agent", "=", "MDS", "(", "\n", "dmps", "=", "dmps", ",", "\n", "n_updates", "=", "10", ",", "\n", "n_reps", "=", "n_reps", ",", "\n", "n_dims", "=", "n_dims", ",", "\n", "n_bfs", "=", "n_bfs", ",", "\n", "n", "=", "5", ",", "\n", "times", "=", "1.0", ",", "\n", "r_gain", "=", "10", "**", "(", "-", "8", ")", ",", "\n", "r_normalize", "=", "False", ")", "\n", "\n", "# theta = np.zeros((n_reps, n_dims, n_bfs))", "\n", "# epsilon = np.random.randn(n_reps, n_dims, n_bfs)", "\n", "# action = theta+epsilon", "\n", "# r = np.array([[0,1,2,3,4],[5,6,7,8,9],[10,11,12,13,14]])", "\n", "r", "=", "np", ".", "array", "(", "[", "[", "10", ",", "11", ",", "12", ",", "13", ",", "14", "]", ",", "[", "5", ",", "6", ",", "7", ",", "8", ",", "9", "]", ",", "[", "0", ",", "1", ",", "2", ",", "3", ",", "4", "]", "]", ")", "\n", "action", "=", "np", ".", "array", "(", "[", "[", "[", "0", ",", "1", ",", "2", ",", "3", "]", ",", "[", "4", ",", "5", ",", "6", ",", "7", "]", "]", ",", "[", "[", "8", ",", "9", ",", "10", ",", "11", "]", ",", "\n", "[", "12", ",", "13", ",", "14", ",", "15", "]", "]", ",", "\n", "[", "[", "16", ",", "17", ",", "18", ",", "19", "]", ",", "[", "20", ",", "21", ",", "22", ",", "23", "]", "]", "]", ")", "\n", "agent", ".", "update", "(", "r", ",", "action", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.TestMDSKDE.test_update": [[374, 398], ["agents.mds.MDSKDE", "numpy.array", "numpy.array", "agents.mds.MDSKDE.update", "range"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.amds.AMDS.update"], ["    ", "def", "test_update", "(", "self", ")", ":", "\n", "        ", "n_dims", "=", "2", "\n", "n_bfs", "=", "4", "\n", "n_reps", "=", "3", "\n", "dmps", "=", "[", "[", "]", "for", "_", "in", "range", "(", "n_dims", ")", "]", "\n", "agent", "=", "MDSKDE", "(", "\n", "dmps", "=", "dmps", ",", "\n", "n_updates", "=", "10", ",", "\n", "n_reps", "=", "n_reps", ",", "\n", "n_dims", "=", "n_dims", ",", "\n", "n_bfs", "=", "n_bfs", ",", "\n", "n", "=", "5", ",", "\n", "times", "=", "1.0", ",", "\n", "r_gain", "=", "10", "**", "(", "-", "8", ")", ",", "\n", "r_normalize", "=", "False", ")", "\n", "# theta = np.zeros((n_reps, n_dims, n_bfs))", "\n", "# epsilon = np.random.randn(n_reps, n_dims, n_bfs)", "\n", "# action = theta + epsilon", "\n", "# r = np.array([[0, 1, 2, 3, 4], [5, 6, 7, 8, 9], [10, 11, 12, 13, 14]])", "\n", "r", "=", "np", ".", "array", "(", "[", "[", "10", ",", "11", ",", "12", ",", "13", ",", "14", "]", ",", "[", "5", ",", "6", ",", "7", ",", "8", ",", "9", "]", ",", "[", "0", ",", "1", ",", "2", ",", "3", ",", "4", "]", "]", ")", "\n", "action", "=", "np", ".", "array", "(", "[", "[", "[", "0", ",", "1", ",", "2", ",", "3", "]", ",", "[", "4", ",", "5", ",", "6", ",", "7", "]", "]", ",", "[", "[", "8", ",", "9", ",", "10", ",", "11", "]", ",", "\n", "[", "12", ",", "13", ",", "14", ",", "15", "]", "]", ",", "\n", "[", "[", "16", ",", "17", ",", "18", ",", "19", "]", ",", "[", "20", ",", "21", ",", "22", ",", "23", "]", "]", "]", ")", "\n", "agent", ".", "update", "(", "r", ",", "action", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.TestMDSKDE.test_act_and_train": [[399, 434], ["int", "env.Point.Point", "agents.mds.MDSKDE", "range", "env.Point.Point.reset", "agents.mds.MDSKDE.act_and_train", "dmp.DMP", "dmps[].reset", "dmps[].set_goal", "dmps[].minimize_jerk", "range"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.reset", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.act_and_train", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.reset", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.set_goal", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.minimize_jerk"], ["", "def", "test_act_and_train", "(", "self", ")", ":", "\n", "        ", "n_updates", "=", "10", "\n", "n_dims", "=", "2", "\n", "n_bfs", "=", "4", "\n", "n_reps", "=", "3", "\n", "duration", "=", "0.5", "\n", "dt", "=", "0.01", "\n", "dmps", "=", "[", "[", "]", "for", "_", "in", "range", "(", "n_dims", ")", "]", "\n", "\n", "n_times", "=", "int", "(", "duration", "/", "dt", ")", "\n", "\n", "env", "=", "Point", "(", "dmps", ",", "n_dims", ",", "n_bfs", ",", "n_times", ",", "duration", ",", "dt", ")", "\n", "\n", "agent", "=", "MDSKDE", "(", "\n", "dmps", "=", "dmps", ",", "\n", "n_updates", "=", "n_updates", ",", "\n", "n_reps", "=", "n_reps", ",", "\n", "n_dims", "=", "n_dims", ",", "\n", "n_bfs", "=", "n_bfs", ",", "\n", "n", "=", "5", ",", "\n", "times", "=", "1.0", ",", "\n", "r_gain", "=", "10", "**", "(", "-", "8", ")", ",", "\n", "r_normalize", "=", "False", ")", "\n", "\n", "for", "i", "in", "range", "(", "n_dims", ")", ":", "\n", "            ", "dmps", "[", "i", "]", "=", "DMP", "(", "n_bfs", ",", "duration", ",", "0.5", ",", "dt", ",", "True", ")", "\n", "dmps", "[", "i", "]", ".", "reset", "(", ")", "\n", "dmps", "[", "i", "]", ".", "set_goal", "(", "env", ".", "gxi", "[", "i", "]", ")", "\n", "agent", ".", "theta", "[", "i", "]", "=", "dmps", "[", "i", "]", ".", "minimize_jerk", "(", ")", "\n", "\n", "", "reward", "=", "0", "\n", "obs", "=", "env", ".", "reset", "(", ")", "\n", "t", "=", "0", "\n", "k", "=", "0", "\n", "agent", ".", "act_and_train", "(", "obs", ",", "reward", ",", "t", ",", "k", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.run": [[24, 201], ["chainerrl.experiments.prepare_output_dir.prepare_output_dir", "agents.util.Debug.set_outdir", "agents.util.Debug.set_n_updates", "int", "numpy.random.seed", "agents.pi2.PI2", "range", "learn.learn", "learn.plot", "glob.glob", "args.plot.extend", "eval", "agents.gmds.GMDS", "dmp.DMP", "dmps[].reset", "dmps[].set_goal", "dmps[].minimize_jerk", "range", "agents.mds.MDS", "os.path.normpath", "agents.amds.AMDS", "agents.mds.MDSKDE", "agents.reps.REPS", "agents.areps.AREPS"], "function", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.Debug.set_outdir", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.Debug.set_n_updates", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.learn", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.plot", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.reset", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.set_goal", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.minimize_jerk"], ["def", "run", "(", "args", ")", ":", "\n", "    ", "if", "args", ".", "seed", "is", "not", "None", ":", "\n", "        ", "np", ".", "random", ".", "seed", "(", "args", ".", "seed", ")", "\n", "\n", "# Set default parameter depend on environment", "\n", "", "if", "args", ".", "n_dims", "is", "None", ":", "\n", "        ", "if", "args", ".", "env", "==", "'Point'", "or", "args", ".", "env", "==", "'Arm'", ":", "\n", "            ", "args", ".", "n_dims", "=", "2", "\n", "", "elif", "args", ".", "env", "==", "'OneDof'", "or", "args", ".", "env", "==", "'Quadratic'", ":", "\n", "            ", "args", ".", "n_dims", "=", "1", "\n", "", "else", ":", "\n", "            ", "raise", "NotImplementedError", "\n", "\n", "", "", "if", "args", ".", "n_bfs", "is", "None", ":", "\n", "        ", "if", "args", ".", "env", "==", "'Point'", "or", "args", ".", "env", "==", "'Arm'", "or", "args", ".", "env", "==", "'OneDof'", ":", "\n", "            ", "args", ".", "n_bfs", "=", "10", "\n", "", "elif", "args", ".", "env", "==", "'Quadratic'", ":", "\n", "            ", "args", ".", "n_bfs", "=", "1", "\n", "", "else", ":", "\n", "            ", "raise", "NotImplementedError", "\n", "\n", "", "", "if", "args", ".", "dt", "is", "None", ":", "\n", "        ", "if", "args", ".", "env", "==", "'Point'", "or", "args", ".", "env", "==", "'Arm'", "or", "args", ".", "env", "==", "'OneDof'", ":", "\n", "            ", "args", ".", "dt", "=", "0.01", "\n", "", "elif", "args", ".", "env", "==", "'Quadratic'", ":", "\n", "            ", "args", ".", "dt", "=", "1.0", "\n", "", "else", ":", "\n", "            ", "raise", "NotImplementedError", "\n", "\n", "", "", "if", "args", ".", "duration", "is", "None", ":", "\n", "        ", "if", "args", ".", "env", "==", "'Point'", "or", "args", ".", "env", "==", "'Arm'", "or", "args", ".", "env", "==", "'OneDof'", ":", "\n", "            ", "args", ".", "duration", "=", "0.5", "\n", "", "elif", "args", ".", "env", "==", "'Quadratic'", ":", "\n", "            ", "args", ".", "duration", "=", "2.0", "\n", "", "else", ":", "\n", "            ", "raise", "NotImplementedError", "\n", "\n", "# Set default parameter depend on agent", "\n", "", "", "if", "args", ".", "r_gain", "is", "None", ":", "\n", "        ", "if", "args", ".", "r_normalize", ":", "\n", "            ", "if", "args", ".", "agent", "==", "'PI2'", ":", "\n", "                ", "args", ".", "r_gain", "=", "10", "\n", "", "elif", "args", ".", "agent", "==", "'MDS'", ":", "\n", "                ", "args", ".", "r_gain", "=", "10", "# 1.0/100000.0", "\n", "", "elif", "args", ".", "agent", "==", "'GMDS'", ":", "\n", "                ", "args", ".", "r_gain", "=", "10", "\n", "", "elif", "args", ".", "agent", "==", "'AMDS'", ":", "\n", "                ", "args", ".", "r_gain", "=", "10", "# 1.0/100000.0", "\n", "", "elif", "args", ".", "agent", "==", "'MDSKDE'", ":", "\n", "                ", "args", ".", "r_gain", "=", "10", "# 1.0/100000.0", "\n", "", "elif", "args", ".", "agent", "==", "'REPS'", ":", "\n", "                ", "args", ".", "r_gain", "=", "10", "\n", "", "elif", "args", ".", "agent", "==", "'AREPS'", ":", "\n", "                ", "args", ".", "r_gain", "=", "10", "\n", "", "else", ":", "\n", "                ", "raise", "NotImplementedError", "\n", "", "", "else", ":", "\n", "            ", "if", "args", ".", "agent", "==", "'PI2'", ":", "\n", "                ", "args", ".", "r_gain", "=", "10", "**", "8", "\n", "", "elif", "args", ".", "agent", "==", "'MDS'", ":", "\n", "                ", "args", ".", "r_gain", "=", "10", "**", "8", "\n", "", "elif", "args", ".", "agent", "==", "'GMDS'", ":", "\n", "                ", "args", ".", "r_gain", "=", "10", "**", "8", "\n", "", "elif", "args", ".", "agent", "==", "'AMDS'", ":", "\n", "                ", "args", ".", "r_gain", "=", "10", "**", "8", "\n", "", "elif", "args", ".", "agent", "==", "'MDSKDE'", ":", "\n", "                ", "args", ".", "r_gain", "=", "10", "**", "8", "\n", "", "elif", "args", ".", "agent", "==", "'REPS'", ":", "\n", "                ", "args", ".", "r_gain", "=", "10", "**", "8", "\n", "", "elif", "args", ".", "agent", "==", "'AREPS'", ":", "\n", "                ", "args", ".", "r_gain", "=", "10", "**", "8", "\n", "", "else", ":", "\n", "                ", "raise", "NotImplementedError", "\n", "", "", "", "if", "args", ".", "std", "is", "None", ":", "\n", "        ", "if", "args", ".", "agent", "==", "'PI2'", ":", "\n", "            ", "args", ".", "std", "=", "10", "\n", "", "elif", "args", ".", "agent", "==", "'MDS'", ":", "\n", "            ", "args", ".", "std", "=", "10", "\n", "", "elif", "args", ".", "agent", "==", "'GMDS'", ":", "\n", "            ", "args", ".", "std", "=", "10", "\n", "", "elif", "args", ".", "agent", "==", "'AMDS'", ":", "\n", "            ", "args", ".", "std", "=", "10", "\n", "", "elif", "args", ".", "agent", "==", "'MDSKDE'", ":", "\n", "            ", "args", ".", "std", "=", "1", "\n", "", "elif", "args", ".", "agent", "==", "'REPS'", ":", "\n", "            ", "args", ".", "std", "=", "10", "\n", "", "elif", "args", ".", "agent", "==", "'AREPS'", ":", "\n", "            ", "args", ".", "std", "=", "10", "\n", "", "else", ":", "\n", "            ", "raise", "NotImplementedError", "\n", "\n", "", "", "if", "args", ".", "plotdir", "is", "not", "None", ":", "\n", "        ", "if", "not", "args", ".", "plot", ":", "\n", "            ", "args", ".", "plot", "=", "[", "]", "\n", "", "for", "d", "in", "args", ".", "plotdir", ":", "\n", "            ", "directory", "=", "glob", ".", "glob", "(", "'{}/*'", ".", "format", "(", "os", ".", "path", ".", "normpath", "(", "d", ")", ")", ")", "\n", "args", ".", "plot", ".", "extend", "(", "directory", ")", "\n", "\n", "# Check parameter", "\n", "", "", "if", "args", ".", "env", "==", "'Point'", ":", "\n", "        ", "assert", "2", "==", "args", ".", "n_dims", ",", "'Number Error: n_dims of Point task arrow only 2 dimension'", "\n", "", "elif", "args", ".", "env", "==", "'OneDof'", ":", "\n", "        ", "assert", "1", "==", "args", ".", "n_dims", ",", "'Number Error: n_dims of OneDof task arrow only 1 dimension'", "\n", "", "if", "args", ".", "env", "==", "'Quadratic'", ":", "\n", "        ", "assert", "1", "==", "args", ".", "n_bfs", ",", "'Number Error: args.n_bfs of Quadratic task arrow only 1 dimension'", "\n", "assert", "2", "==", "args", ".", "duration", ",", "'Number Error: duration of Quadratic task arrow only 2 [s]'", "\n", "assert", "1", "==", "args", ".", "dt", ",", "'Number Error: dt of Quadratic task arrow only 1 [s]'", "\n", "\n", "", "args", ".", "outdir", "=", "prepare_output_dir", "(", "args", ",", "args", ".", "outdir", ",", "argv", "=", "sys", ".", "argv", ")", "\n", "Debug", ".", "set_outdir", "(", "args", ".", "outdir", ")", "\n", "Debug", ".", "set_n_updates", "(", "args", ".", "n_updates", ")", "\n", "\n", "# not use DMP", "\n", "if", "args", ".", "env", "==", "'Quadratic'", ":", "\n", "        ", "dmps", "=", "None", "\n", "# use DMP", "\n", "", "else", ":", "\n", "        ", "dmps", "=", "[", "[", "]", "for", "_", "in", "range", "(", "args", ".", "n_dims", ")", "]", "\n", "\n", "", "n_times", "=", "int", "(", "args", ".", "duration", "/", "args", ".", "dt", ")", "\n", "\n", "# set environment", "\n", "if", "args", ".", "env", "==", "'Arm'", "or", "args", ".", "env", "==", "'Point'", ":", "\n", "        ", "env", "=", "eval", "(", "args", ".", "env", ")", "(", "dmps", ",", "args", ".", "n_dims", ",", "args", ".", "n_bfs", ",", "n_times", ",", "\n", "args", ".", "duration", ",", "args", ".", "dt", ")", "\n", "# elif args.env == 'Quadratic':", "\n", "#     env = eval(args.env)(args.n_dims)", "\n", "", "else", ":", "\n", "# TODO", "\n", "        ", "raise", "NotImplementedError", "\n", "\n", "# set agent", "\n", "", "if", "args", ".", "agent", "==", "'PI2'", ":", "\n", "        ", "agent", "=", "PI2", "(", "dmps", ",", "args", ".", "n_updates", ",", "args", ".", "n_reps", ",", "args", ".", "n_dims", ",", "args", ".", "n_bfs", ",", "\n", "n_times", ",", "args", ".", "r_gain", ",", "args", ".", "r_normalize", ")", "\n", "", "elif", "args", ".", "agent", "==", "'GMDS'", ":", "\n", "        ", "agent", "=", "GMDS", "(", "dmps", ",", "args", ".", "n_updates", ",", "args", ".", "n_reps", ",", "args", ".", "n_dims", ",", "\n", "args", ".", "n_bfs", ",", "n_times", ",", "args", ".", "r_gain", ",", "\n", "args", ".", "r_normalize", ")", "\n", "", "elif", "args", ".", "agent", "==", "'MDS'", ":", "\n", "        ", "agent", "=", "MDS", "(", "args", ".", "n_updates", ",", "args", ".", "n_reps", ",", "args", ".", "n_dims", ",", "args", ".", "n_bfs", ",", "\n", "n_times", ",", "args", ".", "r_gain", ",", "args", ".", "r_normalize", ")", "\n", "", "elif", "args", ".", "agent", "==", "'AMDS'", ":", "\n", "        ", "agent", "=", "AMDS", "(", "dmps", ",", "args", ".", "n_updates", ",", "args", ".", "n_reps", ",", "args", ".", "n_dims", ",", "\n", "args", ".", "n_bfs", ",", "n_times", ",", "args", ".", "r_gain", ",", "\n", "args", ".", "r_normalize", ")", "\n", "", "elif", "args", ".", "agent", "==", "'MDSKDE'", ":", "\n", "        ", "agent", "=", "MDSKDE", "(", "args", ".", "n_updates", ",", "args", ".", "n_reps", ",", "args", ".", "n_dims", ",", "args", ".", "n_bfs", ",", "\n", "n_times", ",", "args", ".", "r_gain", ",", "args", ".", "r_normalize", ")", "\n", "", "elif", "args", ".", "agent", "==", "'REPS'", ":", "\n", "        ", "agent", "=", "REPS", "(", "dmps", ",", "args", ".", "n_updates", ",", "args", ".", "n_reps", ",", "args", ".", "n_dims", ",", "\n", "args", ".", "n_bfs", ",", "n_times", ",", "args", ".", "r_gain", ",", "\n", "args", ".", "r_normalize", ")", "\n", "", "elif", "args", ".", "agent", "==", "'AREPS'", ":", "\n", "        ", "agent", "=", "AREPS", "(", "dmps", ",", "args", ".", "n_updates", ",", "args", ".", "n_reps", ",", "args", ".", "n_dims", ",", "\n", "args", ".", "n_bfs", ",", "n_times", ",", "args", ".", "r_gain", ",", "\n", "args", ".", "r_normalize", ")", "\n", "", "else", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "\n", "# Set dmp", "\n", "", "if", "args", ".", "env", "==", "'Point'", "or", "args", ".", "env", "==", "'Arm'", ":", "\n", "        ", "for", "i", "in", "range", "(", "args", ".", "n_dims", ")", ":", "\n", "            ", "dmps", "[", "i", "]", "=", "DMP", "(", "args", ".", "n_bfs", ",", "args", ".", "duration", ",", "0.5", ",", "args", ".", "dt", ",", "True", ")", "\n", "dmps", "[", "i", "]", ".", "reset", "(", ")", "\n", "dmps", "[", "i", "]", ".", "set_goal", "(", "env", ".", "gxi", "[", "i", "]", ")", "\n", "agent", ".", "theta", "[", "i", "]", "=", "dmps", "[", "i", "]", ".", "minimize_jerk", "(", ")", "\n", "\n", "", "", "if", "args", ".", "plot", "is", "None", ":", "\n", "        ", "learn", "(", "args", ",", "agent", ",", "env", ",", "n_times", ")", "\n", "", "else", ":", "\n", "        ", "plot", "(", "args", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.learn": [[203, 269], ["range", "range", "numpy.savetxt", "numpy.savetxt", "numpy.savetxt", "numpy.savetxt", "range", "env.reset", "range", "print", "reward_list.append", "agent.save", "len", "env.set_plot_data", "ee_xs.append", "ee_ys.append", "matplotlib.figure", "util.plot_cost", "matplotlib.savefig", "matplotlib.savefig", "env.reset", "range", "agent.act", "env.step", "env.set_plot_data", "range", "util.plot_animation", "numpy.max", "agent.act_and_train", "env.step", "env.render", "str", "len", "str"], "function", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.reset", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.util.Saver.save", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Point.set_plot_data", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.util.plot_cost", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.reset", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.act", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.step", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Point.set_plot_data", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.DebugAnimation.plot_animation", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.act_and_train", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.step", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Point.render"], ["", "", "def", "learn", "(", "args", ",", "agent", ",", "env", ",", "n_times", ")", ":", "\n", "    ", "reward_list", "=", "[", "]", "\n", "# Update", "\n", "for", "step", "in", "range", "(", "args", ".", "n_updates", ")", ":", "\n", "# Simulated annealing", "\n", "        ", "if", "args", ".", "annealing", ":", "\n", "            ", "agent", ".", "std_eps", "=", "args", ".", "std", "*", "np", ".", "max", "(", "(", "0.1", ",", "(", "args", ".", "n_updates", "-", "step", ")", "/", "args", ".", "n_updates", ")", ")", "\n", "", "else", ":", "\n", "            ", "agent", ".", "std_eps", "=", "args", ".", "std", "\n", "# Roll-outs to update parameter", "\n", "", "for", "k", "in", "range", "(", "args", ".", "n_reps", ")", ":", "\n", "            ", "accumulated_reward", "=", "0", "\n", "reward", "=", "0", "\n", "obs", "=", "env", ".", "reset", "(", ")", "\n", "# Real-time", "\n", "for", "t", "in", "range", "(", "n_times", ")", ":", "\n", "                ", "action", "=", "agent", ".", "act_and_train", "(", "obs", ",", "reward", ",", "t", ",", "k", ")", "\n", "obs", ",", "reward", "=", "env", ".", "step", "(", "action", ",", "t", ")", "\n", "accumulated_reward", "+=", "reward", "\n", "\n", "# A noise-less roll-out to evaluate parameter", "\n", "", "", "accumulated_reward", "=", "0", "\n", "obs", "=", "env", ".", "reset", "(", ")", "\n", "# Time", "\n", "for", "t", "in", "range", "(", "n_times", ")", ":", "\n", "            ", "action", "=", "agent", ".", "act", "(", "obs", ",", "t", ")", "\n", "obs", ",", "reward", "=", "env", ".", "step", "(", "action", ",", "t", ")", "\n", "accumulated_reward", "+=", "reward", "\n", "ee_x", ",", "ee_y", "=", "env", ".", "set_plot_data", "(", "t", "-", "1", ")", "\n", "if", "args", ".", "render", ":", "\n", "                ", "env", ".", "render", "(", "ee_x", ",", "ee_y", ",", "t", "-", "1", ")", "\n", "\n", "", "", "print", "(", "\"step \"", "+", "str", "(", "step", "+", "1", ")", "+", "\"\\t\"", "+", "str", "(", "accumulated_reward", ")", ")", "\n", "reward_list", ".", "append", "(", "accumulated_reward", ")", "\n", "agent", ".", "save", "(", "args", ".", "outdir", ")", "\n", "", "ee_xs", "=", "[", "]", "\n", "ee_ys", "=", "[", "]", "\n", "for", "t", "in", "range", "(", "len", "(", "env", ".", "xi", ")", ")", ":", "\n", "        ", "ee_x", ",", "ee_y", "=", "env", ".", "set_plot_data", "(", "t", ")", "\n", "ee_xs", ".", "append", "(", "ee_x", ")", "\n", "ee_ys", ".", "append", "(", "ee_y", ")", "\n", "\n", "", "rollouts", "=", "[", "args", ".", "n_reps", "*", "(", "n", "+", "1", ")", "for", "n", "in", "range", "(", "len", "(", "reward_list", ")", ")", "]", "\n", "np", ".", "savetxt", "(", "\n", "'{}/cost.csv'", ".", "format", "(", "args", ".", "outdir", ")", ",", "\n", "reward_list", ",", "\n", "fmt", "=", "\"%.0f\"", ",", "\n", "delimiter", "=", "','", ")", "\n", "np", ".", "savetxt", "(", "\n", "'{}/rollout.csv'", ".", "format", "(", "args", ".", "outdir", ")", ",", "\n", "rollouts", ",", "\n", "fmt", "=", "\"%.0f\"", ",", "\n", "delimiter", "=", "','", ")", "\n", "np", ".", "savetxt", "(", "\n", "'{}/x.csv'", ".", "format", "(", "args", ".", "outdir", ")", ",", "ee_xs", ",", "fmt", "=", "\"%.5f\"", ",", "delimiter", "=", "','", ")", "\n", "np", ".", "savetxt", "(", "\n", "'{}/y.csv'", ".", "format", "(", "args", ".", "outdir", ")", ",", "ee_ys", ",", "fmt", "=", "\"%.5f\"", ",", "delimiter", "=", "','", ")", "\n", "if", "not", "args", ".", "no_fig", ":", "\n", "        ", "plt", ".", "figure", "(", ")", "\n", "plot_cost", "(", "reward_list", ",", "rollouts", ")", "\n", "plt", ".", "savefig", "(", "'{}/cost.pdf'", ".", "format", "(", "args", ".", "outdir", ")", ")", "\n", "plt", ".", "savefig", "(", "'{}/cost.png'", ".", "format", "(", "args", ".", "outdir", ")", ")", "\n", "\n", "if", "args", ".", "env", "!=", "'Quadratic'", ":", "\n", "            ", "plot_animation", "(", "args", ".", "outdir", ",", "ee_xs", ",", "ee_ys", ",", "env", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.plot": [[271, 300], ["matplotlib.figure", "matplotlib.savefig", "matplotlib.savefig", "os.path.normpath", "json.load", "numpy.loadtxt", "numpy.loadtxt", "numpy.loadtxt", "numpy.loadtxt", "util.plot_cost", "open"], "function", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.util.Saver.load", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.util.plot_cost"], ["", "", "", "def", "plot", "(", "args", ")", ":", "\n", "    ", "plt", ".", "figure", "(", ")", "\n", "for", "f", "in", "args", ".", "plot", ":", "\n", "        ", "f", "=", "os", ".", "path", ".", "normpath", "(", "f", ")", "\n", "args_info", "=", "json", ".", "load", "(", "open", "(", "'{}/args.txt'", ".", "format", "(", "f", ")", ",", "'r'", ")", ")", "\n", "agent", "=", "args_info", "[", "'agent'", "]", "\n", "if", "agent", "==", "'PI2'", ":", "\n", "            ", "plot_color", "=", "\"orange\"", "\n", "", "elif", "agent", "==", "'GMDS'", ":", "\n", "            ", "plot_color", "=", "\"green\"", "\n", "", "elif", "agent", "==", "'MDS'", ":", "\n", "            ", "plot_color", "=", "\"darkblue\"", "\n", "", "elif", "agent", "==", "'AMDS'", ":", "\n", "            ", "plot_color", "=", "\"crimson\"", "\n", "", "elif", "agent", "==", "'MDSKDE'", ":", "\n", "            ", "plot_color", "=", "\"purple\"", "\n", "", "elif", "agent", "==", "'REPS'", ":", "\n", "            ", "plot_color", "=", "\"blue\"", "\n", "", "elif", "agent", "==", "'AREPS'", ":", "\n", "            ", "plot_color", "=", "\"pink\"", "\n", "", "else", ":", "\n", "            ", "raise", "NotImplementedError", "\n", "", "reward_list", "=", "np", ".", "loadtxt", "(", "'{}/cost.csv'", ".", "format", "(", "f", ")", ",", "delimiter", "=", "','", ")", "\n", "rollouts", "=", "np", ".", "loadtxt", "(", "'{}/rollout.csv'", ".", "format", "(", "f", ")", ",", "delimiter", "=", "','", ")", "\n", "ee_xs", "=", "np", ".", "loadtxt", "(", "'{}/x.csv'", ".", "format", "(", "f", ")", ",", "delimiter", "=", "','", ")", "\n", "ee_ys", "=", "np", ".", "loadtxt", "(", "'{}/y.csv'", ".", "format", "(", "f", ")", ",", "delimiter", "=", "','", ")", "\n", "plot_cost", "(", "reward_list", ",", "rollouts", ",", "plot_color", ",", "'{}'", ".", "format", "(", "agent", ")", ")", "\n", "", "plt", ".", "savefig", "(", "'{}/cost.pdf'", ".", "format", "(", "args", ".", "outdir", ")", ")", "\n", "plt", ".", "savefig", "(", "'{}/cost.png'", ".", "format", "(", "args", ".", "outdir", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.RBF.__init__": [[6, 27], ["numpy.linspace", "numpy.exp", "numpy.exp", "numpy.diff", "len"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "n_bfs", ",", "duration", ",", "\n", "second_order", ",", "alpha_x", ",", "alpha_z", ")", ":", "\n", "        ", "self", ".", "n_bfs", "=", "n_bfs", "\n", "self", ".", "second_order", "=", "second_order", "\n", "t", "=", "np", ".", "linspace", "(", "0", ",", "duration", ",", "n_bfs", "+", "1", ")", "\n", "if", "self", ".", "second_order", ":", "\n", "# 2nd canonical system", "\n", "# d^2x/dt^2 + alpha*dx/dt + 0.25*alpha^2*x = 0,", "\n", "# x(0) = 1, dx/dt(0) = 0", "\n", "# => x(t) = (1+alpha/2*t)*exp(-alpha/2*t)", "\n", "            ", "center", "=", "(", "1", "+", "alpha_z", "/", "2.0", "*", "t", ")", "*", "np", ".", "exp", "(", "-", "alpha_z", "/", "2.0", "*", "t", ")", "\n", "", "else", ":", "\n", "# 1st canonical system", "\n", "# dx/dt + alpha*x = 0, x(0) = 1", "\n", "# => x(t) = exp(-alpha*t)", "\n", "            ", "center", "=", "np", ".", "exp", "(", "-", "alpha_x", "*", "t", ")", "\n", "\n", "", "center_diff", "=", "(", "np", ".", "diff", "(", "center", ")", "*", "0.55", ")", "**", "2", "\n", "self", ".", "center", "=", "center", "[", "0", ":", "len", "(", "center", ")", "-", "1", "]", "\n", "self", ".", "width", "=", "1", "/", "center_diff", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.RBF.kernel": [[28, 31], ["numpy.exp", "numpy.ones"], "methods", ["None"], ["", "def", "kernel", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "np", ".", "exp", "(", "-", "0.5", "*", "self", ".", "width", "*", "\n", "(", "(", "x", "*", "np", ".", "ones", "(", "self", ".", "n_bfs", ")", "-", "self", ".", "center", ")", "**", "2", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.WLR.weight": [[35, 40], ["numpy.sum", "numpy.ones_like", "numpy.ones_like", "numpy.sum"], "methods", ["None"], ["    ", "def", "weight", "(", "self", ",", "state", ",", "target", ",", "kernel", ")", ":", "\n", "        ", "sks", "=", "state", "**", "2", "*", "np", ".", "ones_like", "(", "kernel", ")", "*", "kernel", "\n", "stk", "=", "state", "*", "target", "*", "np", ".", "ones_like", "(", "kernel", ")", "*", "kernel", "\n", "weight", "=", "np", ".", "sum", "(", "stk", ",", "0", ")", "/", "(", "np", ".", "sum", "(", "sks", ",", "0", ")", "+", "1.e-10", ")", "\n", "return", "weight", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.__init__": [[44, 74], ["dmp.RBF", "dmp.WLR"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "n_bfs", ",", "duration", ",", "tau", ",", "dt", ",", "second_order", ")", ":", "\n", "        ", "self", ".", "n_bfs", "=", "n_bfs", "\n", "self", ".", "duration", "=", "duration", "\n", "self", ".", "tau", "=", "duration", "/", "tau", "\n", "self", ".", "dt", "=", "dt", "\n", "self", ".", "second_order", "=", "second_order", "\n", "\n", "# Initialize the time constants", "\n", "self", ".", "alpha_z", "=", "25", "\n", "self", ".", "beta_z", "=", "self", ".", "alpha_z", "/", "4.0", "\n", "self", ".", "alpha_g", "=", "self", ".", "alpha_z", "/", "2.0", "\n", "self", ".", "alpha_x", "=", "self", ".", "alpha_z", "/", "3.0", "\n", "self", ".", "alpha_v", "=", "self", ".", "alpha_z", "\n", "self", ".", "beta_v", "=", "self", ".", "beta_z", "\n", "# Initialize the state variables", "\n", "self", ".", "z", "=", "0", "\n", "self", ".", "y", "=", "0", "\n", "self", ".", "x", "=", "0", "\n", "self", ".", "v", "=", "0", "\n", "# Initialize the current goal state", "\n", "self", ".", "g", "=", "0", "\n", "# Initialize the terminate goal state", "\n", "self", ".", "goal", "=", "0", "\n", "# Initialize the current start state of the primitive", "\n", "self", ".", "y0", "=", "0", "\n", "# Initialize radial basis function class", "\n", "self", ".", "rbf", "=", "RBF", "(", "n_bfs", ",", "duration", ",", "self", ".", "second_order", ",", "\n", "self", ".", "alpha_x", ",", "self", ".", "alpha_z", ")", "\n", "# Initialize weighted linear regression class", "\n", "self", ".", "wlr", "=", "WLR", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.set_goal": [[75, 82], ["None"], "methods", ["None"], ["", "def", "set_goal", "(", "self", ",", "goal", ",", "update", "=", "True", ")", ":", "\n", "        ", "self", ".", "goal", "=", "goal", "\n", "if", "not", "self", ".", "second_order", ":", "\n", "            ", "self", ".", "g", "=", "self", ".", "goal", "\n", "", "if", "update", ":", "\n", "            ", "self", ".", "x", "=", "1", "\n", "self", ".", "y0", "=", "self", ".", "y", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.reset": [[83, 93], ["None"], "methods", ["None"], ["", "", "def", "reset", "(", "self", ",", "start", "=", "0", ")", ":", "\n", "        ", "y", "=", "start", "\n", "self", ".", "z", "=", "0", "\n", "self", ".", "y", "=", "y", "\n", "self", ".", "x", "=", "0", "\n", "self", ".", "v", "=", "0", "\n", "self", ".", "goal", "=", "y", "\n", "self", ".", "g", "=", "y", "\n", "self", ".", "y0", "=", "y", "\n", "self", ".", "s", "=", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.update_vx": [[94, 104], ["None"], "methods", ["None"], ["", "def", "update_vx", "(", "self", ",", "v", ",", "x", ",", "cc", "=", "0", ")", ":", "\n", "        ", "if", "self", ".", "second_order", ":", "\n", "            ", "vd", "=", "(", "self", ".", "alpha_v", "*", "(", "self", ".", "beta_v", "*", "(", "-", "x", ")", "-", "v", ")", "+", "cc", ")", "*", "self", ".", "tau", "\n", "xd", "=", "v", "*", "self", ".", "tau", "\n", "", "else", ":", "\n", "            ", "vd", "=", "0", "\n", "xd", "=", "self", ".", "alpha_x", "*", "(", "-", "x", ")", "*", "self", ".", "tau", "\n", "", "v", "+=", "vd", "*", "self", ".", "dt", "\n", "x", "+=", "xd", "*", "self", ".", "dt", "\n", "return", "v", ",", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.update_zy": [[105, 114], ["numpy.sum"], "methods", ["None"], ["", "def", "update_zy", "(", "self", ",", "theta", ",", "z", ",", "y", ",", "g", ",", "diff_goal", ",", "\n", "basis", ",", "ct", "=", "0", ")", ":", "\n", "        ", "zd", "=", "(", "(", "self", ".", "alpha_z", "*", "(", "self", ".", "beta_z", "*", "(", "g", "-", "y", ")", "-", "z", ")", ")", "\n", "+", "np", ".", "sum", "(", "basis", "*", "theta", ")", "*", "diff_goal", "+", "ct", ")", "*", "self", ".", "tau", "\n", "yd", "=", "z", "*", "self", ".", "tau", "\n", "ydd", "=", "zd", "*", "self", ".", "tau", "\n", "z", "+=", "zd", "*", "self", ".", "dt", "\n", "y", "+=", "yd", "*", "self", ".", "dt", "\n", "return", "z", ",", "y", ",", "yd", ",", "ydd", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.update_g": [[115, 119], ["None"], "methods", ["None"], ["", "def", "update_g", "(", "self", ",", "g", ",", "goal", ")", ":", "\n", "        ", "gd", "=", "self", ".", "alpha_g", "*", "(", "goal", "-", "g", ")", "\n", "g", "+=", "gd", "*", "self", ".", "dt", "\n", "return", "g", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.run": [[120, 135], ["dmp.DMP.rbf.kernel", "dmp.DMP.update_vx", "dmp.DMP.update_zy", "dmp.DMP.update_g", "numpy.sum", "numpy.sum"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.RBF.kernel", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.update_vx", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.update_zy", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.update_g"], ["", "def", "run", "(", "self", ",", "theta", ",", "ct", "=", "0", ",", "cc", "=", "0", ")", ":", "\n", "        ", "psi", "=", "self", ".", "rbf", ".", "kernel", "(", "self", ".", "x", ")", "\n", "\n", "if", "self", ".", "second_order", ":", "\n", "            ", "basis", "=", "self", ".", "v", "*", "psi", "/", "np", ".", "sum", "(", "psi", "+", "1.e-10", ")", "\n", "", "else", ":", "\n", "            ", "basis", "=", "self", ".", "x", "*", "psi", "/", "np", ".", "sum", "(", "psi", "+", "1.e-10", ")", "\n", "\n", "", "self", ".", "v", ",", "self", ".", "x", "=", "self", ".", "update_vx", "(", "self", ".", "v", ",", "self", ".", "x", ",", "cc", ")", "\n", "self", ".", "z", ",", "self", ".", "y", ",", "yd", ",", "ydd", "=", "self", ".", "update_zy", "(", "theta", ",", "self", ".", "z", ",", "\n", "self", ".", "y", ",", "self", ".", "g", ",", "\n", "self", ".", "goal", "-", "self", ".", "y0", ",", "basis", ")", "\n", "self", ".", "g", "=", "self", ".", "update_g", "(", "self", ".", "g", ",", "self", ".", "goal", ")", "\n", "self", ".", "psi", "=", "psi", "\n", "return", "self", ".", "y", ",", "yd", ",", "ydd", ",", "basis", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.minimize_jerk_step": [[136, 164], ["None"], "methods", ["None"], ["", "def", "minimize_jerk_step", "(", "self", ",", "x", ",", "xd", ",", "xdd", ",", "tau", ")", ":", "\n", "        ", "if", "tau", "<", "self", ".", "dt", ":", "\n", "            ", "return", "x", ",", "xd", ",", "xdd", "\n", "", "dist", "=", "self", ".", "goal", "-", "x", "\n", "a1", "=", "0", "\n", "a0", "=", "xdd", "*", "tau", "**", "2", "\n", "v1", "=", "0", "\n", "v0", "=", "xd", "*", "tau", "\n", "\n", "t1", "=", "self", ".", "dt", "\n", "t2", "=", "self", ".", "dt", "**", "2", "\n", "t3", "=", "self", ".", "dt", "**", "3", "\n", "t4", "=", "self", ".", "dt", "**", "4", "\n", "t5", "=", "self", ".", "dt", "**", "5", "\n", "\n", "c1", "=", "(", "6.0", "*", "dist", "+", "(", "a1", "-", "a0", ")", "/", "2.0", "-", "3.0", "*", "(", "v0", "-", "v1", ")", ")", "/", "tau", "**", "5", "\n", "c2", "=", "(", "-", "15.0", "*", "dist", "+", "\n", "(", "3.0", "*", "a0", "-", "2.0", "*", "a1", ")", "/", "2.0", "+", "8.0", "*", "v0", "+", "7.0", "*", "v1", ")", "/", "tau", "**", "4", "\n", "c3", "=", "(", "10.0", "*", "dist", "+", "(", "a1", "-", "3.0", "*", "a0", ")", "/", "2.0", "-", "6.0", "*", "v0", "-", "4", "*", "v1", ")", "/", "tau", "**", "3", "\n", "c4", "=", "xdd", "/", "2.0", "\n", "c5", "=", "xd", "\n", "c6", "=", "x", "\n", "\n", "x", "=", "c1", "*", "t5", "+", "c2", "*", "t4", "+", "c3", "*", "t3", "+", "c4", "*", "t2", "+", "c5", "*", "t1", "+", "c6", "\n", "xd", "=", "5.0", "*", "c1", "*", "t4", "+", "4.0", "*", "c2", "*", "t3", "+", "3.0", "*", "c3", "*", "t2", "+", "2.0", "*", "c4", "*", "t1", "+", "c5", "\n", "xdd", "=", "20.0", "*", "c1", "*", "t3", "+", "12.0", "*", "c2", "*", "t2", "+", "6.0", "*", "c3", "*", "t1", "+", "2.0", "*", "c4", "\n", "\n", "return", "x", ",", "xd", ",", "xdd", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.minimize_jerk": [[165, 179], ["dmp.DMP.reset", "dmp.DMP.set_goal", "int", "numpy.zeros", "numpy.zeros", "numpy.zeros", "range", "dmp.DMP.fitting", "dmp.DMP.minimize_jerk_step"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.reset", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.set_goal", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.fitting", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.minimize_jerk_step"], ["", "def", "minimize_jerk", "(", "self", ")", ":", "\n", "        ", "self", ".", "reset", "(", ")", "\n", "self", ".", "set_goal", "(", "self", ".", "goal", ")", "\n", "timestep", "=", "int", "(", "self", ".", "tau", "/", "self", ".", "dt", ")", "\n", "ts", "=", "np", ".", "zeros", "(", "(", "timestep", ",", "1", ")", ")", "\n", "tds", "=", "np", ".", "zeros", "(", "(", "timestep", ",", "1", ")", ")", "\n", "tdds", "=", "np", ".", "zeros", "(", "(", "timestep", ",", "1", ")", ")", "\n", "t", "=", "td", "=", "tdd", "=", "0", "\n", "for", "i", "in", "range", "(", "timestep", ")", ":", "\n", "            ", "t", ",", "td", ",", "tdd", "=", "self", ".", "minimize_jerk_step", "(", "t", ",", "td", ",", "tdd", ",", "\n", "self", ".", "tau", "-", "i", "*", "self", ".", "dt", ")", "\n", "ts", "[", "i", "]", ",", "tds", "[", "i", "]", ",", "tdds", "[", "i", "]", "=", "t", ",", "td", ",", "tdd", "\n", "", "theta", "=", "self", ".", "fitting", "(", "ts", ",", "tds", ",", "tdds", ")", "\n", "return", "theta", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.fitting": [[180, 213], ["numpy.zeros", "numpy.zeros", "numpy.zeros", "range", "numpy.array", "dmp.DMP.prediction", "dmp.DMP.update_vx", "dmp.DMP.update_g", "dmp.DMP.wlr.weight", "numpy.array", "dmp.DMP.wlr.weight", "numpy.array", "dmp.DMP.rbf.kernel", "numpy.sum", "numpy.sum"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.prediction", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.update_vx", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.update_g", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.WLR.weight", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.WLR.weight", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.RBF.kernel"], ["", "def", "fitting", "(", "self", ",", "t", ",", "td", ",", "tdd", ")", ":", "\n", "        ", "y0", "=", "t", "[", "0", "]", "\n", "goal", "=", "t", "[", "-", "1", "]", "\n", "\n", "xs", "=", "np", ".", "zeros", "(", "(", "t", ".", "size", ",", "1", ")", ")", "\n", "vs", "=", "np", ".", "zeros", "(", "(", "t", ".", "size", ",", "1", ")", ")", "\n", "gs", "=", "np", ".", "zeros", "(", "(", "t", ".", "size", ",", "1", ")", ")", "\n", "x", "=", "1", "\n", "v", "=", "0", "\n", "if", "self", ".", "second_order", ":", "\n", "            ", "g", "=", "goal", "\n", "", "else", ":", "\n", "            ", "g", "=", "y0", "\n", "", "for", "i", "in", "range", "(", "t", ".", "size", ")", ":", "\n", "            ", "xs", "[", "i", "]", "=", "x", "\n", "vs", "[", "i", "]", "=", "v", "\n", "gs", "[", "i", "]", "=", "g", "\n", "v", ",", "x", "=", "self", ".", "update_vx", "(", "v", ",", "x", ")", "\n", "g", "=", "self", ".", "update_g", "(", "g", ",", "goal", ")", "\n", "\n", "", "f_target", "=", "(", "tdd", "/", "self", ".", "tau", "**", "2", "-", "\n", "self", ".", "alpha_z", "*", "(", "self", ".", "beta_z", "*", "(", "gs", "-", "t", ")", "-", "td", "/", "self", ".", "tau", ")", ")", "\n", "psi", "=", "np", ".", "array", "(", "[", "self", ".", "rbf", ".", "kernel", "(", "x", ")", "for", "x", "in", "xs", "]", ")", "\n", "\n", "if", "self", ".", "second_order", ":", "\n", "            ", "theta", "=", "self", ".", "wlr", ".", "weight", "(", "vs", ",", "f_target", ",", "psi", ")", "\n", "basis", "=", "np", ".", "array", "(", "[", "vs", "*", "p", "/", "np", ".", "sum", "(", "p", ")", "for", "p", "in", "psi", "]", ")", "\n", "", "else", ":", "\n", "            ", "theta", "=", "self", ".", "wlr", ".", "weight", "(", "xs", ",", "f_target", ",", "psi", ")", "\n", "basis", "=", "np", ".", "array", "(", "[", "xs", "*", "p", "/", "np", ".", "sum", "(", "p", ")", "for", "p", "in", "psi", "]", ")", "\n", "\n", "", "y", ",", "yd", ",", "ydd", "=", "self", ".", "prediction", "(", "t", ",", "theta", ",", "y0", ",", "gs", ",", "basis", ")", "\n", "return", "theta", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.prediction": [[214, 228], ["numpy.zeros_like", "numpy.zeros_like", "numpy.zeros_like", "range", "dmp.DMP.update_zy"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.update_zy"], ["", "def", "prediction", "(", "self", ",", "t", ",", "theta", ",", "y0", ",", "gs", ",", "basis", ")", ":", "\n", "        ", "ys", "=", "np", ".", "zeros_like", "(", "t", ")", "\n", "yds", "=", "np", ".", "zeros_like", "(", "t", ")", "\n", "ydds", "=", "np", ".", "zeros_like", "(", "t", ")", "\n", "ydd", "=", "0", "\n", "yd", "=", "z", "=", "0", "\n", "y", "=", "y0", "\n", "for", "i", "in", "range", "(", "t", ".", "size", ")", ":", "\n", "            ", "ydds", "[", "i", "]", "=", "ydd", "\n", "yds", "[", "i", "]", "=", "yd", "\n", "ys", "[", "i", "]", "=", "y", "\n", "z", ",", "y", ",", "yd", ",", "ydd", "=", "self", ".", "update_zy", "(", "theta", ",", "\n", "z", ",", "y", ",", "gs", "[", "i", "]", ",", "1", ",", "basis", "[", "i", "]", ")", "\n", "", "return", "ys", ",", "yds", ",", "ydds", "\n", "", "", ""]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.plot.arm_plots": [[9, 18], ["zip", "zip", "matplotlib.plot"], "function", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.plot"], ["def", "arm_plots", "(", "xlink", ",", "ylink", ")", ":", "\n", "    ", "for", "x", ",", "y", "in", "zip", "(", "xlink", ",", "ylink", ")", ":", "\n", "        ", "prev_xx", "=", "None", "\n", "prev_yy", "=", "None", "\n", "for", "xx", ",", "yy", "in", "zip", "(", "x", ",", "y", ")", ":", "\n", "            ", "if", "prev_xx", "is", "not", "None", ":", "\n", "                ", "plt", ".", "plot", "(", "(", "prev_xx", ",", "xx", ")", ",", "(", "prev_yy", ",", "yy", ")", ",", "c", "=", "\"grey\"", ",", "alpha", "=", "0.3", ")", "\n", "", "prev_xx", "=", "xx", "\n", "prev_yy", "=", "yy", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.plot.trajectory_plots": [[20, 34], ["len", "matplotlib.scatter", "range", "matplotlib.xlabel", "matplotlib.ylabel", "matplotlib.xlim", "matplotlib.Set1", "matplotlib.plot", "numpy.min", "numpy.max"], "function", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.plot"], ["", "", "", "def", "trajectory_plots", "(", "x", ",", "y", ",", "viapoint", ",", "xlabel", ",", "ylabel", ",", "\n", "labels", ")", ":", "\n", "    ", "n_plots", "=", "len", "(", "x", ")", "\n", "styles", "=", "[", "\"solid\"", ",", "\"dashed\"", ",", "\"dashdot\"", ",", "\"dotted\"", "]", "\n", "plt", ".", "scatter", "(", "viapoint", "[", "0", "]", ",", "viapoint", "[", "1", "]", ",", "c", "=", "\"white\"", ",", "\n", "edgecolors", "=", "\"black\"", ",", "marker", "=", "\"*\"", ",", "s", "=", "100", ")", "\n", "for", "i", "in", "range", "(", "n_plots", ")", ":", "\n", "        ", "color", "=", "cm", ".", "Set1", "(", "i", ")", "# list(cm.viridis(i/n_plots))", "\n", "linestyle", "=", "styles", "[", "i", "%", "4", "]", "\n", "plt", ".", "plot", "(", "x", "[", "i", "]", ",", "y", "[", "i", "]", ",", "label", "=", "labels", "[", "i", "]", ",", "color", "=", "color", ",", "linestyle", "=", "linestyle", ")", "\n", "\n", "", "plt", ".", "xlabel", "(", "xlabel", ")", "\n", "plt", ".", "ylabel", "(", "ylabel", ")", "\n", "plt", ".", "xlim", "(", "[", "np", ".", "min", "(", "x", ")", ",", "np", ".", "max", "(", "x", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.plot.mean_std_plots": [[36, 49], ["len", "range", "matplotlib.yscale", "matplotlib.xlabel", "matplotlib.ylabel", "matplotlib.xlim", "matplotlib.Set1", "plot.mean_std_plot", "numpy.min", "numpy.max"], "function", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.plot.mean_std_plot"], ["", "def", "mean_std_plots", "(", "x", ",", "y_mean", ",", "y_std", ",", "xlabel", ",", "ylabel", ",", "\n", "labels", ")", ":", "\n", "    ", "n_plots", "=", "len", "(", "x", ")", "\n", "styles", "=", "[", "\"solid\"", ",", "\"dashed\"", ",", "\"dashdot\"", ",", "\"dotted\"", "]", "\n", "for", "i", "in", "range", "(", "n_plots", ")", ":", "\n", "        ", "color", "=", "cm", ".", "Set1", "(", "i", ")", "# list(cm.viridis(i/n_plots))", "\n", "linestyle", "=", "styles", "[", "i", "%", "4", "]", "\n", "mean_std_plot", "(", "x", "[", "i", "]", ",", "y_mean", "[", "i", "]", ",", "y_std", "[", "i", "]", ",", "labels", "[", "i", "]", ",", "\n", "color", ",", "linestyle", ")", "\n", "", "plt", ".", "yscale", "(", "'log'", ")", "\n", "plt", ".", "xlabel", "(", "xlabel", ")", "\n", "plt", ".", "ylabel", "(", "ylabel", ")", "\n", "plt", ".", "xlim", "(", "[", "np", ".", "min", "(", "x", ")", ",", "np", ".", "max", "(", "x", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.plot.mean_std_plot": [[51, 55], ["matplotlib.plot", "matplotlib.fill_between"], "function", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.plot"], ["", "def", "mean_std_plot", "(", "x", ",", "y_mean", ",", "y_std", ",", "label", ",", "color", ",", "linestyle", "=", "\"solid\"", ")", ":", "\n", "    ", "plt", ".", "plot", "(", "x", ",", "y_mean", ",", "label", "=", "label", ",", "color", "=", "color", ",", "linestyle", "=", "linestyle", ")", "\n", "plt", ".", "fill_between", "(", "x", ",", "y_mean", "+", "y_std", ",", "y_mean", "-", "y_std", ",", "\n", "color", "=", "color", ",", "alpha", "=", "0.3", ",", "interpolate", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.plot.loadcsv": [[57, 59], ["numpy.loadtxt"], "function", ["None"], ["", "def", "loadcsv", "(", "path", ")", ":", "\n", "    ", "return", "np", ".", "loadtxt", "(", "path", ",", "delimiter", "=", "\",\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.plot.main": [[61, 158], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.parse_args", "numpy.reshape", "numpy.reshape", "numpy.reshape", "numpy.reshape", "numpy.mean", "numpy.std", "enumerate", "numpy.savetxt", "matplotlib.rc", "matplotlib.rc", "matplotlib.tight_layout", "matplotlib.figure", "plot.mean_std_plots", "matplotlib.savefig", "numpy.mean", "numpy.mean", "numpy.mean", "numpy.mean", "matplotlib.figure", "np.reshape.append", "np.reshape.append", "np.reshape.append", "np.reshape.append", "mean_std.append", "numpy.array", "matplotlib.legend", "plot.trajectory_plots", "matplotlib.legend", "matplotlib.xlim", "matplotlib.savefig", "glob.glob", "parser.parse_args.plot.extend", "plot.loadcsv", "plot.loadcsv", "plot.loadcsv", "plot.loadcsv", "matplotlib.legend", "plot.arm_plots", "plot.trajectory_plots", "matplotlib.legend", "matplotlib.xlim", "matplotlib.ylim", "matplotlib.savefig", "os.path.normpath"], "function", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.plot.mean_std_plots", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.plot.trajectory_plots", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.plot.loadcsv", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.plot.loadcsv", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.plot.loadcsv", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.plot.loadcsv", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.plot.arm_plots", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.plot.trajectory_plots"], ["", "def", "main", "(", ")", ":", "\n", "    ", "parser", "=", "argparse", ".", "ArgumentParser", "(", ")", "\n", "parser", ".", "add_argument", "(", "\"--plotdir\"", ",", "action", "=", "\"append\"", ")", "\n", "parser", ".", "add_argument", "(", "\"--plot\"", ",", "action", "=", "\"append\"", ")", "\n", "parser", ".", "add_argument", "(", "\"--label\"", ",", "action", "=", "\"append\"", ")", "\n", "parser", ".", "add_argument", "(", "\"--env\"", ",", "type", "=", "str", ",", "default", "=", "\"Point\"", ")", "\n", "parser", ".", "add_argument", "(", "\"--name\"", ",", "type", "=", "str", ")", "\n", "parser", ".", "add_argument", "(", "\"--n-plots\"", ",", "type", "=", "int", ")", "\n", "parser", ".", "add_argument", "(", "\"--n-stats\"", ",", "type", "=", "int", ")", "\n", "parser", ".", "add_argument", "(", "\"--n-dims\"", ",", "type", "=", "int", ",", "default", "=", "2", ")", "\n", "parser", ".", "add_argument", "(", "\"--n-steps\"", ",", "type", "=", "int", ",", "default", "=", "50", ")", "\n", "args", "=", "parser", ".", "parse_args", "(", ")", "\n", "\n", "if", "args", ".", "name", "is", "None", ":", "\n", "        ", "args", ".", "name", "=", "args", ".", "env", "\n", "", "if", "args", ".", "env", "==", "\"Arm\"", ":", "\n", "        ", "args", ".", "n_dims", "+=", "1", "\n", "\n", "", "if", "args", ".", "plotdir", "is", "not", "None", ":", "\n", "        ", "if", "not", "args", ".", "plot", ":", "\n", "            ", "args", ".", "plot", "=", "[", "]", "\n", "", "for", "d", "in", "args", ".", "plotdir", ":", "\n", "            ", "directory", "=", "glob", ".", "glob", "(", "'{}/*'", ".", "format", "(", "os", ".", "path", ".", "normpath", "(", "d", ")", ")", ")", "\n", "args", ".", "plot", ".", "extend", "(", "directory", ")", "\n", "\n", "", "", "rollout", "=", "[", "]", "\n", "cost", "=", "[", "]", "\n", "x", "=", "[", "]", "\n", "y", "=", "[", "]", "\n", "for", "pdir", "in", "args", ".", "plot", ":", "\n", "        ", "rollout", ".", "append", "(", "loadcsv", "(", "\"{}/rollout.csv\"", ".", "format", "(", "pdir", ")", ")", ")", "\n", "cost", ".", "append", "(", "loadcsv", "(", "\"{}/cost.csv\"", ".", "format", "(", "pdir", ")", ")", ")", "\n", "x", ".", "append", "(", "loadcsv", "(", "\"{}/x.csv\"", ".", "format", "(", "pdir", ")", ")", ")", "\n", "y", ".", "append", "(", "loadcsv", "(", "\"{}/y.csv\"", ".", "format", "(", "pdir", ")", ")", ")", "\n", "\n", "", "rollout", "=", "np", ".", "reshape", "(", "rollout", ",", "(", "args", ".", "n_plots", ",", "args", ".", "n_stats", ",", "-", "1", ")", ")", "\n", "cost", "=", "np", ".", "reshape", "(", "cost", ",", "(", "args", ".", "n_plots", ",", "args", ".", "n_stats", ",", "-", "1", ")", ")", "\n", "x", "=", "np", ".", "reshape", "(", "x", ",", "(", "args", ".", "n_plots", ",", "args", ".", "n_stats", ",", "-", "1", ",", "args", ".", "n_dims", ")", ")", "\n", "y", "=", "np", ".", "reshape", "(", "y", ",", "(", "args", ".", "n_plots", ",", "args", ".", "n_stats", ",", "-", "1", ",", "args", ".", "n_dims", ")", ")", "\n", "if", "args", ".", "env", "==", "\"Point\"", ":", "\n", "        ", "xee", "=", "x", "[", ":", ",", ":", ",", ":", ",", "0", "]", "\n", "yee", "=", "y", "[", ":", ",", ":", ",", ":", ",", "0", "]", "\n", "", "elif", "args", ".", "env", "==", "\"Arm\"", ":", "\n", "        ", "xee", "=", "x", "[", ":", ",", ":", ",", ":", ",", "-", "1", "]", "\n", "yee", "=", "y", "[", ":", ",", ":", ",", ":", ",", "-", "1", "]", "\n", "\n", "", "c_mean", "=", "np", ".", "mean", "(", "cost", ",", "1", ")", "\n", "c_std", "=", "np", ".", "std", "(", "cost", ",", "1", ")", "\n", "\n", "mean_std", "=", "[", "]", "\n", "for", "i", ",", "_", "in", "enumerate", "(", "c_std", "[", ":", ",", "-", "1", "]", ")", ":", "\n", "# print(c_mean[i, -1], c_std[i, -1])", "\n", "        ", "mean", "=", "\"{:.1e}\"", ".", "format", "(", "c_mean", "[", "i", ",", "-", "1", "]", ")", ".", "replace", "(", "\"e+0\"", ",", "\"\\\\times10^\"", ")", "\n", "std", "=", "\"{:.1e}\"", ".", "format", "(", "c_std", "[", "i", ",", "-", "1", "]", ")", ".", "replace", "(", "\"e+0\"", ",", "\"\\\\times10^\"", ")", "\n", "mean_std", ".", "append", "(", "[", "mean", ",", "\"\\pm\"", ",", "std", "]", ")", "\n", "\n", "", "np", ".", "savetxt", "(", "\"{}_mean-std.txt\"", ".", "format", "(", "args", ".", "name", ")", ",", "\n", "np", ".", "array", "(", "mean_std", ")", ",", "fmt", "=", "\"%s\"", ")", "\n", "\n", "plt", ".", "rc", "(", "'font'", ",", "family", "=", "'sans-serif'", ")", "\n", "plt", ".", "rc", "(", "'text'", ",", "usetex", "=", "True", ")", "\n", "plt", ".", "rcParams", "[", "\"font.size\"", "]", "=", "15", "\n", "plt", ".", "tight_layout", "(", ")", "\n", "plt", ".", "figure", "(", ")", "\n", "mean_std_plots", "(", "rollout", "[", ":", ",", "0", "]", ",", "c_mean", ",", "c_std", ",", "\n", "\"The Number of Roll-outs\"", ",", "\"Cost\"", ",", "\n", "args", ".", "label", ")", "\n", "if", "args", ".", "env", "==", "\"Point\"", ":", "\n", "        ", "plt", ".", "legend", "(", "loc", "=", "'lower left'", ")", "\n", "", "elif", "args", ".", "env", "==", "\"Arm\"", ":", "\n", "        ", "plt", ".", "legend", "(", "loc", "=", "'upper right'", ")", "\n", "", "plt", ".", "savefig", "(", "\"{}_cost.pdf\"", ".", "format", "(", "args", ".", "name", ")", ")", "\n", "\n", "xee_mean", "=", "np", ".", "mean", "(", "xee", ",", "1", ")", "\n", "yee_mean", "=", "np", ".", "mean", "(", "yee", ",", "1", ")", "\n", "x_mean", "=", "np", ".", "mean", "(", "x", ",", "1", ")", "\n", "y_mean", "=", "np", ".", "mean", "(", "y", ",", "1", ")", "\n", "\n", "plt", ".", "figure", "(", ")", "\n", "if", "args", ".", "env", "==", "\"Point\"", ":", "\n", "        ", "viapoint", "=", "(", "0.5", ",", "0.2", ")", "\n", "trajectory_plots", "(", "xee_mean", ",", "yee_mean", ",", "viapoint", ",", "\n", "\"X-Axis\"", ",", "\"Y-Axis\"", ",", "\n", "args", ".", "label", ")", "\n", "plt", ".", "legend", "(", "loc", "=", "'upper left'", ")", "\n", "plt", ".", "xlim", "(", "xmin", "=", "0", ",", "xmax", "=", "1", ")", "\n", "plt", ".", "savefig", "(", "\"{}_env.pdf\"", ".", "format", "(", "args", ".", "name", ")", ")", "\n", "", "elif", "args", ".", "env", "==", "\"Arm\"", ":", "\n", "        ", "viapoint", "=", "(", "0.5", ",", "0.5", ")", "\n", "arm_plots", "(", "x_mean", "[", "0", "]", ",", "y_mean", "[", "0", "]", ")", "\n", "trajectory_plots", "(", "xee_mean", ",", "yee_mean", ",", "viapoint", ",", "\n", "\"X-Axis\"", ",", "\"Y-Axis\"", ",", "\n", "args", ".", "label", ")", "\n", "plt", ".", "legend", "(", "loc", "=", "'upper right'", ")", "\n", "plt", ".", "xlim", "(", "xmin", "=", "0", ",", "xmax", "=", "1", ")", "\n", "plt", ".", "ylim", "(", "ymin", "=", "-", "0.1", ")", "\n", "plt", ".", "savefig", "(", "\"{}_env.pdf\"", ".", "format", "(", "args", ".", "name", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.util.Saver.saved_names": [[50, 53], ["None"], "methods", ["None"], ["    ", "@", "abstractproperty", "\n", "def", "saved_names", "(", "self", ")", ":", "\n", "        ", "pass", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.util.Saver.save": [[54, 59], ["os.makedirs", "numpy.save", "os.path.join", "getattr"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.util.Saver.save"], ["", "def", "save", "(", "self", ",", "dirname", ")", ":", "\n", "        ", "os", ".", "makedirs", "(", "dirname", ",", "mode", "=", "0o777", ",", "exist_ok", "=", "True", ")", "\n", "for", "name", "in", "self", ".", "saved_names", ":", "\n", "            ", "np", ".", "save", "(", "os", ".", "path", ".", "join", "(", "dirname", ",", "'{}'", ".", "format", "(", "name", ")", ")", ",", "\n", "getattr", "(", "self", ",", "name", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.util.Saver.load": [[60, 64], ["setattr", "numpy.load", "os.path.join"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.util.Saver.load"], ["", "", "def", "load", "(", "self", ",", "dirname", ")", ":", "\n", "        ", "for", "name", "in", "self", ".", "saved_names", ":", "\n", "            ", "setattr", "(", "self", ",", "name", ",", "\n", "np", ".", "load", "(", "os", ".", "path", ".", "join", "(", "dirname", ",", "'{}.npy'", ".", "format", "(", "name", ")", ")", ")", ")", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.util.plot_cost": [[8, 20], ["matplotlib.yscale", "matplotlib.xlabel", "matplotlib.ylabel", "matplotlib.plot", "matplotlib.plot", "matplotlib.legend"], "function", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.plot", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.plot"], ["def", "plot_cost", "(", "reward_list", ",", "rollouts", ",", "color", "=", "\"blue\"", ",", "label", "=", "None", ")", ":", "\n", "    ", "x", "=", "rollouts", "\n", "y", "=", "reward_list", "\n", "# plt.xscale(\"log\")", "\n", "plt", ".", "yscale", "(", "'log'", ")", "\n", "plt", ".", "xlabel", "(", "'Number of Roll-Outs'", ")", "\n", "plt", ".", "ylabel", "(", "'Cost'", ")", "\n", "if", "label", "is", "None", ":", "\n", "        ", "plt", ".", "plot", "(", "x", ",", "y", ",", "color", "=", "color", ")", "\n", "", "else", ":", "\n", "        ", "plt", ".", "plot", "(", "x", ",", "y", ",", "label", "=", "label", ",", "color", "=", "color", ")", "\n", "plt", ".", "legend", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.util.plot_animation": [[22, 35], ["matplotlib.figure", "plt.figure.add_subplot", "fig.add_subplot.grid", "fig.add_subplot.plot", "matplotlib.xlim", "matplotlib.ylim", "env.generate_animation", "matplotlib.ArtistAnimation", "anim.ArtistAnimation.save", "matplotlib.show"], "function", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.plot", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Point.generate_animation", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.util.Saver.save"], ["", "", "def", "plot_animation", "(", "path", ",", "xs", ",", "ys", ",", "env", ")", ":", "\n", "    ", "fig", "=", "plt", ".", "figure", "(", ")", "\n", "ax", "=", "fig", ".", "add_subplot", "(", "111", ")", "\n", "ax", ".", "grid", "(", "True", ",", "linestyle", "=", "'-'", ",", "color", "=", "'0.75'", ")", "\n", "line", ",", "=", "ax", ".", "plot", "(", "[", "]", ",", "[", "]", ",", "lw", "=", "2", ")", "\n", "plt", ".", "xlim", "(", "[", "-", "1", ",", "1", "]", ")", "\n", "plt", ".", "ylim", "(", "[", "-", "1", ",", "1", "]", ")", "\n", "\n", "# Generate animation", "\n", "ims", "=", "env", ".", "generate_animation", "(", "xs", ",", "ys", ")", "\n", "ani", "=", "anim", ".", "ArtistAnimation", "(", "fig", ",", "ims", ",", "interval", "=", "10", ",", "repeat_delay", "=", "1000", ")", "\n", "ani", ".", "save", "(", "path", "+", "'/trajectory.mp4'", ",", "fps", "=", "15", ")", "\n", "plt", ".", "show", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.util.get_end_effector": [[37, 47], ["numpy.cos", "numpy.sin", "numpy.sum", "numpy.sum", "numpy.cos", "numpy.sin", "numpy.sum", "range", "numpy.sum", "range"], "function", ["None"], ["", "def", "get_end_effector", "(", "xi", ",", "n_dims", ")", ":", "\n", "    ", "if", "n_dims", "==", "1", ":", "\n", "        ", "ee_x", "=", "np", ".", "cos", "(", "xi", "[", "0", "]", ")", "\n", "ee_y", "=", "np", ".", "sin", "(", "xi", "[", "0", "]", ")", "\n", "", "else", ":", "\n", "        ", "ee_x", "=", "np", ".", "sum", "(", "[", "np", ".", "cos", "(", "np", ".", "sum", "(", "xi", "[", ":", "i", "+", "1", "]", ")", ")", "\n", "for", "i", "in", "range", "(", "n_dims", ")", "]", ")", "*", "(", "1.0", "/", "n_dims", ")", "\n", "ee_y", "=", "np", ".", "sum", "(", "[", "np", ".", "sin", "(", "np", ".", "sum", "(", "xi", "[", ":", "i", "+", "1", "]", ")", ")", "\n", "for", "i", "in", "range", "(", "n_dims", ")", "]", ")", "*", "(", "1.0", "/", "n_dims", ")", "\n", "", "return", "ee_x", ",", "ee_y", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.painter.Painter.__init__": [[9, 24], ["super().__init__", "glClearColor", "glEnable", "glEnable", "glEnable", "int", "int"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.DebugAnimation.__init__"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "title", "=", "'Painter'", "\n", "self", ".", "scale", "=", "3", "\n", "self", ".", "image_size", "=", "500", "\n", "self", ".", "transform_x", "=", "-", "int", "(", "self", ".", "image_size", "/", "2", ")", "\n", "self", ".", "transform_y", "=", "-", "int", "(", "self", ".", "image_size", "/", "2", ")", "\n", "self", ".", "viapoint", "=", "(", "0.5", ",", "0.5", ")", "\n", "\n", "self", ".", "radius", "=", "5.0", "\n", "\n", "super", "(", ")", ".", "__init__", "(", "self", ".", "_width", ",", "self", ".", "_height", ",", "title", ",", "resizable", "=", "True", ")", "\n", "glClearColor", "(", "0", ",", "0", ",", "0", ",", "1", ")", "\n", "glEnable", "(", "GL_DEPTH_TEST", ")", "\n", "glEnable", "(", "GL_LIGHTING", ")", "\n", "glEnable", "(", "GL_LIGHT0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.painter.Painter.cylinder": [[25, 59], ["glNormal3d", "glBegin", "glMaterialfv", "range", "glEnd", "glNormal3d", "glBegin", "glMaterialfv", "reversed", "glEnd", "glBegin", "glMaterialfv", "range", "glEnd", "glVertex3d", "range", "glVertex3d", "math.sin", "math.cos", "glNormal3d", "glVertex3f", "glVertex3f", "len", "math.sin", "math.cos", "math.sin", "math.cos"], "methods", ["None"], ["", "def", "cylinder", "(", "self", ",", "radius", ",", "height", ",", "sides", ",", "color", ")", ":", "\n", "        ", "step", "=", "2.0", "*", "math", ".", "pi", "/", "sides", "\n", "gl_color", "=", "(", "GLfloat", "*", "len", "(", "color", ")", ")", "(", "*", "color", ")", "\n", "\n", "# top", "\n", "glNormal3d", "(", "0.0", ",", "1.0", ",", "0.0", ")", "\n", "glBegin", "(", "GL_TRIANGLE_FAN", ")", "\n", "glMaterialfv", "(", "GL_FRONT", ",", "GL_DIFFUSE", ",", "gl_color", ")", "\n", "for", "i", "in", "range", "(", "sides", "+", "1", ")", ":", "\n", "            ", "t", "=", "step", "*", "i", "\n", "glVertex3d", "(", "radius", "*", "math", ".", "sin", "(", "t", ")", ",", "height", ",", "radius", "*", "math", ".", "cos", "(", "t", ")", ")", "\n", "", "glEnd", "(", ")", "\n", "\n", "# bottom", "\n", "glNormal3d", "(", "0.0", ",", "-", "1.0", ",", "0.0", ")", "\n", "glBegin", "(", "GL_TRIANGLE_FAN", ")", "\n", "glMaterialfv", "(", "GL_FRONT", ",", "GL_DIFFUSE", ",", "gl_color", ")", "\n", "for", "i", "in", "reversed", "(", "range", "(", "sides", "+", "1", ")", ")", ":", "\n", "            ", "t", "=", "step", "*", "i", "\n", "glVertex3d", "(", "radius", "*", "math", ".", "sin", "(", "t", ")", ",", "0.0", ",", "radius", "*", "math", ".", "cos", "(", "t", ")", ")", "\n", "", "glEnd", "(", ")", "\n", "\n", "# side", "\n", "glBegin", "(", "GL_QUAD_STRIP", ")", "\n", "glMaterialfv", "(", "GL_FRONT", ",", "GL_DIFFUSE", ",", "gl_color", ")", "\n", "for", "i", "in", "range", "(", "sides", "+", "1", ")", ":", "\n", "            ", "t", "=", "step", "*", "i", "\n", "x", "=", "math", ".", "sin", "(", "t", ")", "\n", "z", "=", "math", ".", "cos", "(", "t", ")", "\n", "\n", "glNormal3d", "(", "x", ",", "0.0", ",", "z", ")", "\n", "glVertex3f", "(", "radius", "*", "x", ",", "height", ",", "radius", "*", "z", ")", "\n", "glVertex3f", "(", "radius", "*", "x", ",", "0.0", ",", "radius", "*", "z", ")", "\n", "", "glEnd", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.painter.Painter.link": [[60, 70], ["math.sqrt", "math.acos", "glPushMatrix", "glTranslated", "glRotated", "painter.Painter.cylinder", "glPopMatrix"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.painter.Painter.cylinder"], ["", "def", "link", "(", "self", ",", "p1", ",", "p2", ",", "radius", ",", "color", ")", ":", "\n", "        ", "x", "=", "p2", "[", "0", "]", "-", "p1", "[", "0", "]", "\n", "y", "=", "p2", "[", "1", "]", "-", "p1", "[", "1", "]", "\n", "dist", "=", "math", ".", "sqrt", "(", "x", "*", "x", "+", "y", "*", "y", ")", "\n", "rad", "=", "math", ".", "acos", "(", "y", "/", "dist", ")", "\n", "glPushMatrix", "(", ")", "\n", "glTranslated", "(", "p1", "[", "0", "]", ",", "p1", "[", "1", "]", ",", "0", ")", "\n", "glRotated", "(", "rad", "*", "180", "/", "math", ".", "pi", ",", "0", ",", "0", ",", "-", "x", ")", "\n", "self", ".", "cylinder", "(", "radius", ",", "dist", ",", "30", ",", "color", ")", "\n", "glPopMatrix", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.painter.Painter.sphere": [[71, 80], ["glPushMatrix", "glMaterialfv", "glTranslated", "gluNewQuadric", "gluQuadricDrawStyle", "gluSphere", "glPopMatrix", "len"], "methods", ["None"], ["", "def", "sphere", "(", "self", ",", "p", ",", "radius", ",", "color", ")", ":", "\n", "        ", "gl_color", "=", "(", "GLfloat", "*", "len", "(", "color", ")", ")", "(", "*", "color", ")", "\n", "glPushMatrix", "(", ")", "\n", "glMaterialfv", "(", "GL_FRONT", ",", "GL_DIFFUSE", ",", "gl_color", ")", "\n", "glTranslated", "(", "p", "[", "0", "]", ",", "p", "[", "1", "]", ",", "0", ")", "\n", "sphere", "=", "gluNewQuadric", "(", ")", "\n", "gluQuadricDrawStyle", "(", "sphere", ",", "GLU_FILL", ")", "\n", "gluSphere", "(", "sphere", ",", "radius", ",", "30", ",", "30", ")", "\n", "glPopMatrix", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.painter.Painter.on_draw": [[81, 97], ["painter.Painter.clear", "glPushMatrix", "range", "glPopMatrix", "len", "painter.Painter.link", "painter.Painter.sphere", "painter.Painter.sphere"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.painter.Painter.link", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.painter.Painter.sphere", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.painter.Painter.sphere"], ["", "def", "on_draw", "(", "self", ")", ":", "\n", "# Clear the current GL Window", "\n", "        ", "self", ".", "clear", "(", ")", "\n", "\n", "glPushMatrix", "(", ")", "\n", "n_dims", "=", "len", "(", "self", ".", "x", ")", "-", "1", "\n", "for", "i", "in", "range", "(", "n_dims", ")", ":", "\n", "            ", "self", ".", "link", "(", "(", "self", ".", "x", "[", "i", "]", ",", "self", ".", "y", "[", "i", "]", ")", ",", "\n", "(", "self", ".", "x", "[", "i", "+", "1", "]", ",", "self", ".", "y", "[", "i", "+", "1", "]", ")", ",", "\n", "0.05", ",", "\n", "(", "0.0", ",", "1.0", ",", "0.0", ",", "1.0", ")", ")", "\n", "self", ".", "sphere", "(", "self", ".", "viapoint", ",", "0.05", ",", "(", "1.0", ",", "0.0", ",", "0.0", ",", "1.0", ")", ")", "\n", "self", ".", "sphere", "(", "(", "self", ".", "x", "[", "i", "]", ",", "self", ".", "y", "[", "i", "]", ")", ",", "0.06", ",", "(", "0.0", ",", "0.0", ",", "1.0", ",", "1.0", ")", ")", "\n", "\n", "# Pop Matrix off stack", "\n", "", "glPopMatrix", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.painter.Painter.on_resize": [[98, 112], ["glViewport", "glMatrixMode", "glLoadIdentity", "gluPerspective", "glMatrixMode", "glLoadIdentity", "glTranslatef"], "methods", ["None"], ["", "def", "on_resize", "(", "self", ",", "width", ",", "height", ")", ":", "\n", "# Set the Viewport", "\n", "        ", "glViewport", "(", "0", ",", "0", ",", "width", ",", "height", ")", "\n", "\n", "# Using Projection mode", "\n", "glMatrixMode", "(", "GL_PROJECTION", ")", "\n", "glLoadIdentity", "(", ")", "\n", "\n", "aspect_ratio", "=", "width", "/", "height", "\n", "gluPerspective", "(", "35", ",", "aspect_ratio", ",", "1", ",", "1000", ")", "\n", "\n", "glMatrixMode", "(", "GL_MODELVIEW", ")", "\n", "glLoadIdentity", "(", ")", "\n", "glTranslatef", "(", "-", "0.5", ",", "-", "0.5", ",", "-", "2", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.painter.Painter.draw": [[113, 127], ["pyglet.clock.tick", "window.switch_to", "window.dispatch_events", "window.dispatch_event", "window.flip"], "methods", ["None"], ["", "def", "draw", "(", "self", ",", "x", ",", "y", ",", "t", ")", ":", "\n", "        ", "self", ".", "x", "=", "x", "\n", "self", ".", "y", "=", "y", "\n", "self", ".", "t", "=", "t", "\n", "\n", "pyglet", ".", "clock", ".", "tick", "(", ")", "\n", "\n", "for", "window", "in", "pyglet", ".", "app", ".", "windows", ":", "\n", "            ", "window", ".", "switch_to", "(", ")", "\n", "window", ".", "dispatch_events", "(", ")", "\n", "window", ".", "dispatch_event", "(", "'on_draw'", ")", "\n", "window", ".", "flip", "(", ")", "\n", "\n", "", "return", "self", ".", "viapoint", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.painter.Painter.mouse_ray": [[128, 145], ["glGetDoublev", "glGetDoublev", "glGetIntegerv", "GLdouble", "GLdouble", "GLdouble", "gluUnProject", "gluUnProject"], "methods", ["None"], ["", "def", "mouse_ray", "(", "self", ",", "x", ",", "y", ")", ":", "\n", "        ", "projection_mat", "=", "(", "GLdouble", "*", "16", ")", "(", ")", "\n", "modelview_mat", "=", "(", "GLdouble", "*", "16", ")", "(", ")", "\n", "viewport", "=", "(", "GLint", "*", "4", ")", "(", ")", "\n", "glGetDoublev", "(", "GL_MODELVIEW_MATRIX", ",", "modelview_mat", ")", "\n", "glGetDoublev", "(", "GL_PROJECTION_MATRIX", ",", "projection_mat", ")", "\n", "glGetIntegerv", "(", "GL_VIEWPORT", ",", "viewport", ")", "\n", "px", "=", "(", "GLdouble", ")", "(", ")", "\n", "py", "=", "(", "GLdouble", ")", "(", ")", "\n", "pz", "=", "(", "GLdouble", ")", "(", ")", "\n", "gluUnProject", "(", "x", ",", "y", ",", "1", ",", "modelview_mat", ",", "projection_mat", ",", "viewport", ",", "\n", "px", ",", "py", ",", "pz", ")", "\n", "far_pos", "=", "(", "px", ".", "value", ",", "py", ".", "value", ",", "pz", ".", "value", ")", "\n", "gluUnProject", "(", "x", ",", "y", ",", "0.", ",", "modelview_mat", ",", "projection_mat", ",", "viewport", ",", "\n", "px", ",", "py", ",", "pz", ")", "\n", "near_pos", "=", "(", "px", ".", "value", ",", "py", ".", "value", ",", "pz", ".", "value", ")", "\n", "return", "near_pos", ",", "far_pos", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.painter.Painter.mouse_position": [[146, 157], ["numpy.array", "painter.Painter.mouse_ray", "numpy.array", "numpy.array", "numpy.linalg.norm"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.painter.Painter.mouse_ray"], ["", "def", "mouse_position", "(", "self", ",", "x", ",", "y", ")", ":", "\n", "# Define plane", "\n", "        ", "normalized_plane", "=", "np", ".", "array", "(", "[", "0", ",", "0", ",", "1", "]", ")", "\n", "# Intersect plane and ray", "\n", "near_pos", ",", "far_pos", "=", "self", ".", "mouse_ray", "(", "x", ",", "y", ")", "\n", "near_pos", "=", "np", ".", "array", "(", "near_pos", ")", "\n", "far_pos", "=", "np", ".", "array", "(", "far_pos", ")", "\n", "ray_vec", "=", "far_pos", "-", "near_pos", "\n", "normalized_ray_vec", "=", "ray_vec", "/", "np", ".", "linalg", ".", "norm", "(", "ray_vec", ")", "\n", "t", "=", "(", "-", "near_pos", "/", "normalized_ray_vec", ")", ".", "dot", "(", "normalized_plane", ")", "\n", "return", "near_pos", "+", "t", "*", "normalized_ray_vec", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.painter.Painter.on_mouse_press": [[158, 162], ["painter.Painter.mouse_position"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.painter.Painter.mouse_position"], ["", "def", "on_mouse_press", "(", "self", ",", "x", ",", "y", ",", "button", ",", "modifiers", ")", ":", "\n", "        ", "if", "button", "==", "mouse", ".", "LEFT", ":", "\n", "            ", "wx", ",", "wy", ",", "_", "=", "self", ".", "mouse_position", "(", "x", ",", "y", ")", "\n", "self", ".", "viapoint", "=", "(", "wx", ",", "wy", ")", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Env.__init__": [[17, 19], ["None"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "env", ")", ":", "\n", "        ", "pass", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Env.generate_animation": [[20, 23], ["None"], "methods", ["None"], ["", "@", "abstractmethod", "\n", "def", "generate_animation", "(", "self", ",", "x", ",", "y", ")", ":", "\n", "        ", "pass", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Env.render": [[24, 27], ["None"], "methods", ["None"], ["", "@", "abstractmethod", "\n", "def", "render", "(", "self", ",", "x", ",", "y", ",", "t", ")", ":", "\n", "        ", "pass", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Env.step": [[28, 31], ["None"], "methods", ["None"], ["", "@", "abstractmethod", "\n", "def", "step", "(", "self", ",", "action", ",", "t", ")", ":", "\n", "        ", "pass", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Env.reset": [[32, 35], ["None"], "methods", ["None"], ["", "@", "abstractmethod", "\n", "def", "reset", "(", "self", ")", ":", "\n", "        ", "pass", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Env.set_plot_data": [[36, 39], ["None"], "methods", ["None"], ["", "@", "abstractmethod", "\n", "def", "set_plot_data", "(", "self", ",", "t", ")", ":", "\n", "        ", "pass", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Quadratic.__init__": [[43, 49], ["numpy.ones"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "n_dims", ")", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "self", ".", "n_dims", "=", "n_dims", "\n", "self", ".", "cost_func_order", "=", "2", "\n", "self", ".", "goal", "=", "1000", "*", "np", ".", "ones", "(", "n_dims", ")", "\n", "self", ".", "xi", "=", "[", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Quadratic.reset": [[50, 53], ["numpy.zeros"], "methods", ["None"], ["", "def", "reset", "(", "self", ")", ":", "\n", "        ", "obs", "=", "np", ".", "zeros", "(", "self", ".", "n_dims", ")", "\n", "return", "obs", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Quadratic.step": [[54, 63], ["env.Quadratic.xi.append", "numpy.sum", "numpy.dot", "numpy.ones"], "methods", ["None"], ["", "def", "step", "(", "self", ",", "action", ",", "t", ")", ":", "\n", "        ", "obs", "=", "action", "\n", "self", ".", "xi", ".", "append", "(", "obs", ")", "\n", "reward", "=", "np", ".", "dot", "(", "(", "obs", "-", "self", ".", "goal", ")", "**", "self", ".", "cost_func_order", ",", "\n", "np", ".", "ones", "(", "self", ".", "n_dims", ")", ")", "/", "self", ".", "cost_func_order", "\n", "reward", "=", "np", ".", "sum", "(", "reward", ")", "\n", "# reward =  np.dot((xi-self.goal)**3,np.ones(self.n_dims))/3", "\n", "# reward =  np.dot((xi-self.goal)**75,np.ones(self.n_dims))/75", "\n", "return", "obs", ",", "reward", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Quadratic.render": [[64, 66], ["None"], "methods", ["None"], ["", "def", "render", "(", "self", ",", "x", ",", "y", ",", "t", ")", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Quadratic.generate_animation": [[67, 69], ["None"], "methods", ["None"], ["", "def", "generate_animation", "(", "self", ",", "x", ",", "y", ")", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Quadratic.rollouts": [[70, 77], ["numpy.zeros", "numpy.zeros", "range", "numpy.add", "env.Quadratic.getCost"], "methods", ["None"], ["", "def", "rollouts", "(", "self", ",", "reps", ",", "mean", ",", "epsilon", ")", ":", "\n", "        ", "data", "=", "np", ".", "zeros", "(", "[", "reps", ",", "self", ".", "n_dims", "]", ")", "\n", "r", "=", "np", ".", "zeros", "(", "[", "reps", ",", "1", "]", ")", "\n", "for", "k", "in", "range", "(", "reps", ")", ":", "\n", "            ", "data", "[", "k", ",", ":", "]", "=", "np", ".", "add", "(", "mean", "[", "k", ",", ":", ",", "0", ",", "0", "]", ",", "epsilon", "[", "k", ",", ":", ",", "0", ",", "0", "]", ")", "\n", "r", "[", "k", ",", "0", "]", "=", "self", ".", "getCost", "(", "data", "[", "k", ",", ":", "]", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0", ")", "\n", "", "return", "r", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Quadratic.set_plot_data": [[78, 82], ["None"], "methods", ["None"], ["", "def", "set_plot_data", "(", "self", ",", "t", ")", ":", "\n", "# TODO", "\n", "        ", "x", "=", "y", "=", "[", "0", "]", "\n", "return", "x", ",", "y", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.__init__": [[85, 108], ["numpy.zeros", "numpy.zeros", "env.EnvDMP.goal", "Painter", "warnings.warn", "matplotlib.get_backend", "matplotlib.get_backend", "matplotlib.get_backend", "matplotlib.get_backend"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.OneDof.goal"], ["    ", "def", "__init__", "(", "self", ",", "dmps", ",", "n_dims", ",", "n_bfs", ",", "n_times", ",", "duration", ",", "dt", ")", ":", "\n", "        ", "self", ".", "dmps", "=", "dmps", "\n", "self", ".", "n_times", "=", "n_times", "\n", "self", ".", "n_dims", "=", "n_dims", "\n", "self", ".", "n_bfs", "=", "n_bfs", "\n", "self", ".", "ini_theta", "=", "np", ".", "zeros", "(", "(", "self", ".", "n_dims", ",", "self", ".", "n_bfs", ")", ")", "\n", "self", ".", "dt", "=", "dt", "\n", "self", ".", "duration", "=", "duration", "\n", "self", ".", "xi", "=", "[", "]", "\n", "self", ".", "prev_action", "=", "np", ".", "zeros", "(", "[", "n_dims", ",", "n_bfs", "]", ")", "\n", "\n", "self", ".", "gxi", "=", "self", ".", "goal", "(", ")", "\n", "\n", "try", ":", "\n", "            ", "self", ".", "painter", "=", "Painter", "(", ")", "\n", "", "except", "NameError", "as", "e", ":", "\n", "            ", "warnings", ".", "warn", "(", "'As your matplotlib backend is {0}, '", "\n", "'pyglet and matplotlib will conflict. '", "\n", "'So, pyglet wasn\\'t loaded. '", "\n", "'If you want to use pyglet and motlotlib, '", "\n", "'backend should change Qt5Agg or Qt4Agg. '", "\n", "'Actual error: {1}'", ".", "format", "(", "matplotlib", ".", "get_backend", "(", ")", ",", "\n", "e", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.reset_state": [[109, 114], ["len", "range", "dmps[].reset", "dmps[].set_goal"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.reset", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.set_goal"], ["", "", "def", "reset_state", "(", "self", ",", "dmps", ")", ":", "\n", "        ", "n_dims", "=", "len", "(", "dmps", ")", "\n", "for", "i", "in", "range", "(", "n_dims", ")", ":", "\n", "            ", "dmps", "[", "i", "]", ".", "reset", "(", "0", ")", "\n", "dmps", "[", "i", "]", ".", "set_goal", "(", "self", ".", "gxi", "[", "i", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.reset": [[115, 120], ["env.EnvDMP.reset_state", "env.EnvDMP.get_dmp"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.reset_state", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.get_dmp"], ["", "", "def", "reset", "(", "self", ")", ":", "\n", "        ", "self", ".", "reset_state", "(", "self", ".", "dmps", ")", "\n", "obs", "=", "self", ".", "get_dmp", "(", "self", ".", "prev_action", ")", "\n", "self", ".", "xi", "=", "[", "]", "\n", "return", "obs", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.step": [[121, 127], ["env.EnvDMP.get_dmp", "env.EnvDMP._step", "env.EnvDMP.xi.append"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.get_dmp", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Point._step"], ["", "def", "step", "(", "self", ",", "action", ",", "t", ")", ":", "\n", "        ", "obs", "=", "self", ".", "get_dmp", "(", "action", ")", "\n", "reward", "=", "self", ".", "_step", "(", "action", ",", "obs", ",", "t", ")", "\n", "self", ".", "xi", ".", "append", "(", "obs", "[", "0", "]", ")", "\n", "self", ".", "prev_action", "=", "action", "\n", "return", "obs", ",", "reward", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.get_dmp": [[128, 137], ["numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "range", "env.EnvDMP.dmps[].run", "numpy.array"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.run"], ["", "def", "get_dmp", "(", "self", ",", "action", ")", ":", "\n", "        ", "xi", "=", "np", ".", "zeros", "(", "(", "self", ".", "n_dims", ",", "1", ")", ")", "\n", "dxi", "=", "np", ".", "zeros", "(", "(", "self", ".", "n_dims", ",", "1", ")", ")", "\n", "ddxi", "=", "np", ".", "zeros", "(", "(", "self", ".", "n_dims", ",", "1", ")", ")", "\n", "g", "=", "np", ".", "zeros", "(", "(", "self", ".", "n_dims", ",", "self", ".", "n_bfs", ")", ")", "\n", "\n", "for", "d", "in", "range", "(", "self", ".", "n_dims", ")", ":", "\n", "            ", "xi", "[", "d", "]", ",", "dxi", "[", "d", "]", ",", "ddxi", "[", "d", "]", ",", "g", "[", "d", "]", "=", "self", ".", "dmps", "[", "d", "]", ".", "run", "(", "action", "[", "d", "]", ")", "\n", "", "return", "[", "xi", ",", "dxi", ",", "ddxi", ",", "np", ".", "array", "(", "g", ")", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.goal": [[138, 141], ["None"], "methods", ["None"], ["", "@", "abstractmethod", "\n", "def", "goal", "(", "self", ")", ":", "\n", "        ", "pass", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Arm.__init__": [[144, 148], ["env.EnvDMP.__init__", "matplotlib.ion", "matplotlib.ion"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.DebugAnimation.__init__"], ["    ", "def", "__init__", "(", "self", ",", "dmps", ",", "n_dims", ",", "n_bfs", ",", "n", ",", "duration", ",", "dt", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "dmps", ",", "n_dims", ",", "n_bfs", ",", "n", ",", "duration", ",", "dt", ")", "\n", "plt", ".", "ion", "(", ")", "\n", "self", ".", "viapoint", "=", "(", "0.5", ",", "0.5", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Arm.goal": [[149, 154], ["range"], "methods", ["None"], ["", "def", "goal", "(", "self", ")", ":", "\n", "        ", "dof", "=", "self", ".", "n_dims", "\n", "gxi", "=", "[", "np", ".", "pi", "*", "(", "1.0", "-", "(", "dof", "-", "1.0", ")", "/", "dof", ")", "for", "i", "in", "range", "(", "dof", ")", "]", "\n", "gxi", "[", "0", "]", "=", "gxi", "[", "0", "]", "/", "2.0", "\n", "return", "gxi", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Arm.generate_animation": [[155, 164], ["range", "len", "matplotlib.scatter", "matplotlib.scatter", "matplotlib.plot", "matplotlib.plot", "matplotlib.text", "matplotlib.text", "matplotlib.scatter", "matplotlib.scatter", "ims.append", "str"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.plot", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.plot"], ["", "def", "generate_animation", "(", "self", ",", "x", ",", "y", ")", ":", "\n", "        ", "ims", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "len", "(", "x", ")", ")", ":", "\n", "            ", "im", "=", "plt", ".", "scatter", "(", "x", "[", "i", "]", "[", "0", ":", "self", ".", "n_dims", "]", ",", "y", "[", "i", "]", "[", "0", ":", "self", ".", "n_dims", "]", ",", "c", "=", "'b'", ")", "\n", "im2", "=", "plt", ".", "plot", "(", "x", "[", "i", "]", ",", "y", "[", "i", "]", ",", "'g'", ")", "\n", "im3", "=", "plt", ".", "text", "(", "-", "0.8", ",", "-", "0.8", ",", "str", "(", "i", "*", "10", ")", "+", "\"ms\"", ",", "fontsize", "=", "17", ")", "\n", "im4", "=", "plt", ".", "scatter", "(", "[", "0.5", "]", ",", "[", "0.5", "]", ",", "c", "=", "'r'", ")", "\n", "ims", ".", "append", "(", "[", "im", "]", "+", "im2", "+", "[", "im3", "]", "+", "[", "im4", "]", ")", "\n", "", "return", "ims", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Arm.render": [[165, 170], ["env.Arm.painter.draw", "warnings.warn"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.painter.Painter.draw"], ["", "def", "render", "(", "self", ",", "x", ",", "y", ",", "t", ")", ":", "\n", "        ", "if", "self", ".", "painter", "is", "not", "None", ":", "\n", "            ", "self", ".", "viapoint", "=", "self", ".", "painter", ".", "draw", "(", "x", ",", "y", ",", "t", ")", "\n", "", "else", ":", "\n", "            ", "warnings", ".", "warn", "(", "'As matplotlib backend is not appropriate, '", "\n", "'You can\\'t use render option.'", ")", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Arm._step": [[172, 189], ["util.get_end_effector", "range", "numpy.sum", "numpy.array", "numpy.array", "numpy.array", "numpy.sum", "numpy.sum"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.util.get_end_effector"], ["", "", "def", "_step", "(", "self", ",", "action", ",", "obs", ",", "t", ")", ":", "\n", "        ", "xi", ",", "dxi", ",", "ddxi", ",", "gdof", "=", "obs", "\n", "ee_x", ",", "ee_y", "=", "get_end_effector", "(", "xi", ",", "self", ".", "n_dims", ")", "\n", "cost", "=", "(", "(", "self", ".", "viapoint", "[", "0", "]", "-", "ee_x", ")", "**", "2", "+", "\n", "(", "self", ".", "viapoint", "[", "1", "]", "-", "ee_y", ")", "**", "2", ")", "*", "(", "10", "**", "8", ")", "\n", "r_numerator", "=", "r_denominator", "=", "0", "\n", "\n", "for", "d", "in", "range", "(", "self", ".", "n_dims", ")", ":", "\n", "            ", "g_t_g", "=", "np", ".", "sum", "(", "np", ".", "array", "(", "gdof", "[", "d", "]", ")", "**", "2", ")", "\n", "g_t_theta_eps", "=", "np", ".", "array", "(", "gdof", "[", "d", "]", ")", "*", "np", ".", "array", "(", "action", "[", "d", "]", ")", "\n", "m_theta_eps", "=", "gdof", "[", "d", "]", "*", "g_t_theta_eps", "/", "(", "g_t_g", "+", "1.e-10", ")", "\n", "r_numerator", "+=", "(", "self", ".", "n_dims", "+", "1", "-", "(", "d", "+", "1", ")", ")", "*", "(", "\n", "0.1", "*", "np", ".", "sum", "(", "ddxi", "[", "d", "]", "**", "2", ")", "+", "0.5", "*", "np", ".", "sum", "(", "m_theta_eps", "**", "2", ")", ")", "\n", "r_denominator", "+=", "self", ".", "n_dims", "+", "1", "-", "(", "d", "+", "1", ")", "\n", "", "reward", "=", "(", "self", ".", "dt", "*", "t", "<=", "self", ".", "duration", ")", "*", "(", "r_numerator", "/", "r_denominator", ")", "+", "(", "self", ".", "dt", "*", "t", "==", "0.3", ")", "*", "cost", "\n", "return", "reward", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Arm.set_plot_data": [[190, 200], ["range", "numpy.zeros", "numpy.zeros", "numpy.sum", "numpy.sum", "numpy.cos", "numpy.sin", "numpy.sum", "range", "numpy.sum", "range"], "methods", ["None"], ["", "def", "set_plot_data", "(", "self", ",", "t", ")", ":", "\n", "        ", "x", ",", "y", "=", "np", ".", "zeros", "(", "self", ".", "n_dims", "+", "1", ")", ",", "np", ".", "zeros", "(", "self", ".", "n_dims", "+", "1", ")", "\n", "for", "d", "in", "range", "(", "self", ".", "n_dims", "+", "1", ")", ":", "\n", "            ", "x", "[", "d", "]", "=", "np", ".", "sum", "(", "\n", "[", "np", ".", "cos", "(", "np", ".", "sum", "(", "self", ".", "xi", "[", "t", "]", "[", ":", "i", "+", "1", "]", ")", ")", "\n", "for", "i", "in", "range", "(", "d", ")", "]", ")", "*", "1.0", "/", "self", ".", "n_dims", "\n", "y", "[", "d", "]", "=", "np", ".", "sum", "(", "\n", "[", "np", ".", "sin", "(", "np", ".", "sum", "(", "self", ".", "xi", "[", "t", "]", "[", ":", "i", "+", "1", "]", ")", ")", "\n", "for", "i", "in", "range", "(", "d", ")", "]", ")", "*", "1.0", "/", "self", ".", "n_dims", "\n", "", "return", "x", ",", "y", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Point.__init__": [[203, 207], ["env.EnvDMP.__init__", "matplotlib.ion", "matplotlib.ion"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.DebugAnimation.__init__"], ["    ", "def", "__init__", "(", "self", ",", "dmps", ",", "n_dims", ",", "n_bfs", ",", "n", ",", "duration", ",", "dt", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "dmps", ",", "n_dims", ",", "n_bfs", ",", "n", ",", "duration", ",", "dt", ")", "\n", "plt", ".", "ion", "(", ")", "\n", "self", ".", "viapoint", "=", "(", "0.5", ",", "0.2", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Point.goal": [[208, 210], ["numpy.ones"], "methods", ["None"], ["", "def", "goal", "(", "self", ")", ":", "\n", "        ", "return", "np", ".", "ones", "(", "self", ".", "n_dims", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Point.generate_animation": [[211, 219], ["range", "len", "matplotlib.scatter", "matplotlib.scatter", "matplotlib.text", "matplotlib.text", "matplotlib.scatter", "matplotlib.scatter", "ims.append", "str"], "methods", ["None"], ["", "def", "generate_animation", "(", "self", ",", "x", ",", "y", ")", ":", "\n", "        ", "ims", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "len", "(", "x", ")", ")", ":", "\n", "            ", "im", "=", "plt", ".", "scatter", "(", "x", "[", "i", "]", ",", "y", "[", "i", "]", ")", "\n", "im2", "=", "plt", ".", "text", "(", "-", "0.8", ",", "-", "0.8", ",", "str", "(", "i", "*", "10", ")", "+", "\"ms\"", ",", "fontsize", "=", "17", ")", "\n", "im3", "=", "plt", ".", "scatter", "(", "[", "self", ".", "viapoint", "[", "0", "]", "]", ",", "[", "self", ".", "viapoint", "[", "1", "]", "]", ",", "c", "=", "'r'", ")", "\n", "ims", ".", "append", "(", "[", "im", "]", "+", "[", "im2", "]", "+", "[", "im3", "]", ")", "\n", "", "return", "ims", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Point.render": [[220, 223], ["None"], "methods", ["None"], ["", "def", "render", "(", "self", ",", "x", ",", "y", ",", "t", ")", ":", "\n", "# TODO", "\n", "        ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Point._step": [[224, 239], ["range", "numpy.sum", "numpy.array", "numpy.array", "numpy.array", "numpy.sum", "numpy.sum"], "methods", ["None"], ["", "def", "_step", "(", "self", ",", "action", ",", "obs", ",", "t", ")", ":", "\n", "        ", "xi", ",", "dxi", ",", "ddxi", ",", "gdof", "=", "obs", "\n", "cost", "=", "(", "(", "self", ".", "viapoint", "[", "0", "]", "-", "xi", "[", "0", "]", "[", "0", "]", ")", "**", "2", "+", "\n", "(", "self", ".", "viapoint", "[", "1", "]", "-", "xi", "[", "1", "]", "[", "0", "]", ")", "**", "2", ")", "*", "(", "10", "**", "10", ")", "\n", "r", "=", "0", "\n", "for", "d", "in", "range", "(", "self", ".", "n_dims", ")", ":", "\n", "            ", "g_t_g", "=", "np", ".", "sum", "(", "np", ".", "array", "(", "gdof", "[", "d", "]", ")", "**", "2", ")", "\n", "g_t_theta_eps", "=", "np", ".", "array", "(", "gdof", "[", "d", "]", ")", "*", "np", ".", "array", "(", "action", "[", "d", "]", ")", "\n", "m_theta_eps", "=", "gdof", "[", "d", "]", "*", "g_t_theta_eps", "/", "(", "g_t_g", "+", "1.e-10", ")", "\n", "r", "+=", "0.5", "*", "1000", "*", "np", ".", "sum", "(", "ddxi", "[", "d", "]", "**", "2", ")", "+", "0.5", "*", "np", ".", "sum", "(", "m_theta_eps", "**", "2", ")", "\n", "\n", "", "reward", "=", "(", "self", ".", "dt", "*", "t", "<=", "self", ".", "duration", ")", "*", "r", "+", "(", "self", ".", "dt", "*", "t", "==", "0.25", ")", "*", "cost", "\n", "\n", "return", "reward", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.Point.set_plot_data": [[240, 245], ["numpy.zeros", "numpy.zeros"], "methods", ["None"], ["", "def", "set_plot_data", "(", "self", ",", "t", ")", ":", "\n", "        ", "x", ",", "y", "=", "np", ".", "zeros", "(", "self", ".", "n_dims", ")", ",", "np", ".", "zeros", "(", "self", ".", "n_dims", ")", "\n", "x", "[", "0", "]", "=", "self", ".", "xi", "[", "t", "]", "[", "0", "]", "\n", "y", "[", "0", "]", "=", "self", ".", "xi", "[", "t", "]", "[", "1", "]", "\n", "return", "x", ",", "y", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.OneDof.__init__": [[248, 254], ["None"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "RL", ")", ":", "\n", "# TODO", "\n", "        ", "raise", "NotImplementedError", "\n", "self", ".", "dt", "=", "RL", ".", "dt", "\n", "self", ".", "n_dims", "=", "RL", ".", "n_dims", "\n", "self", ".", "duration", "=", "RL", ".", "duration", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.OneDof.init": [[255, 266], ["env.OneDof.goal", "range", "dmp.DMP", "env.OneDof.RL.dmps[].init", "env.OneDof.RL.dmps[].reset", "env.OneDof.RL.dmps[].set_goal", "env.OneDof.RL.dmps[].minimize_jerk"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.OneDof.goal", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.init", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.reset", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.set_goal", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.dmp.DMP.minimize_jerk"], ["", "def", "init", "(", "self", ")", ":", "\n", "# Set each joint angle[rad] at goal", "\n", "        ", "self", ".", "gxi", "=", "self", ".", "goal", "(", ")", "\n", "\n", "# Set dmp", "\n", "for", "i", "in", "range", "(", "self", ".", "RL", ".", "n_dims", ")", ":", "\n", "            ", "self", ".", "RL", ".", "dmps", "[", "i", "]", "=", "dmp", ".", "DMP", "(", ")", "\n", "self", ".", "RL", ".", "dmps", "[", "i", "]", ".", "init", "(", "self", ".", "RL", ".", "n_bfs", ",", "1", ")", "\n", "self", ".", "RL", ".", "dmps", "[", "i", "]", ".", "reset", "(", ")", "\n", "self", ".", "RL", ".", "dmps", "[", "i", "]", ".", "set_goal", "(", "self", ".", "gxi", "[", "i", "]", ")", "\n", "self", ".", "RL", ".", "theta", "[", "i", "]", "=", "self", ".", "RL", ".", "dmps", "[", "i", "]", ".", "minimize_jerk", "(", "self", ".", "RL", ".", "theta", "[", "i", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.OneDof.goal": [[267, 270], ["None"], "methods", ["None"], ["", "", "def", "goal", "(", "self", ")", ":", "\n", "        ", "gxi", "=", "[", "1", "]", "\n", "return", "gxi", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.OneDof.make_animation": [[271, 280], ["range", "len", "matplotlib.scatter", "matplotlib.scatter", "matplotlib.plot", "matplotlib.plot", "matplotlib.text", "matplotlib.text", "matplotlib.plot", "matplotlib.plot", "ims.append", "str", "numpy.cos", "numpy.sin"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.plot", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.plot", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.plot", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.plot"], ["", "def", "make_animation", "(", "self", ",", "Xdata", ",", "Ydata", ")", ":", "\n", "        ", "ims", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "len", "(", "Xdata", ")", ")", ":", "\n", "            ", "im", "=", "plt", ".", "scatter", "(", "Xdata", "[", "i", "]", ",", "Ydata", "[", "i", "]", ")", "\n", "im2", "=", "plt", ".", "plot", "(", "Xdata", "[", "i", "]", ",", "Ydata", "[", "i", "]", ",", "'g'", ")", "\n", "im3", "=", "plt", ".", "text", "(", "-", "0.8", ",", "-", "0.8", ",", "str", "(", "i", "*", "10", ")", "+", "\"ms\"", ",", "fontsize", "=", "17", ")", "\n", "im4", "=", "plt", ".", "plot", "(", "[", "0.0", ",", "np", ".", "cos", "(", "1.0", ")", "]", ",", "[", "0.0", ",", "np", ".", "sin", "(", "1.0", ")", "]", ",", "'r'", ")", "\n", "ims", ".", "append", "(", "[", "im", "]", "+", "im2", "+", "[", "im3", "]", "+", "im4", ")", "\n", "", "return", "ims", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.OneDof.get_cost": [[281, 300], ["numpy.sum", "numpy.squeeze", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.sum"], "methods", ["None"], ["", "def", "get_cost", "(", "self", ",", "gxi", ",", "obs", ",", "gDof", ",", "_epsilon", ",", "theta", ",", "t", ")", ":", "\n", "        ", "dt", "=", "self", ".", "dt", "\n", "dof", "=", "self", ".", "n_dims", "\n", "duration", "=", "self", ".", "duration", "\n", "xi", ",", "dxi", ",", "ddxi", "=", "obs", "[", "t", "]", "\n", "tCost", "=", "10000", "*", "(", "dxi", "**", "2", "+", "10", "*", "(", "gxi", "[", "0", "]", "-", "xi", "[", "0", "]", ")", "**", "2", ")", "\n", "gTg", "=", "[", "]", "\n", "gTeps", "=", "[", "]", "\n", "Meps", "=", "[", "]", "\n", "gTg", "=", "np", ".", "sum", "(", "np", ".", "array", "(", "gDof", "[", "0", "]", ")", "*", "np", ".", "array", "(", "gDof", "[", "0", "]", ")", ")", "\n", "gTeps", "=", "np", ".", "array", "(", "gDof", "[", "0", "]", ")", "*", "np", ".", "array", "(", "_epsilon", "[", "0", "]", "[", "t", "]", ")", "\n", "Meps", "=", "gDof", "[", "0", "]", "*", "gTeps", "/", "gTg", "\n", "\n", "f", "=", "np", ".", "squeeze", "(", "ddxi", ")", "\n", "# np.squeeze(ddXi-np.sum(gDof[0]*(theta[0]+_epsilon[0][t])))", "\n", "tmp", "=", "(", "0.5", "*", "(", "f", "**", "2", ")", "+", "5000", "*", "np", ".", "sum", "(", "\n", "(", "theta", "[", "0", "]", "+", "Meps", ")", "*", "(", "theta", "[", "0", "]", "+", "Meps", ")", ")", ")", "\n", "\n", "return", "[", "(", "dt", "*", "t", "<", "duration", ")", "*", "tmp", "+", "(", "dt", "*", "t", ">", "duration", ")", "*", "tCost", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.OneDof.setPlotData": [[301, 310], ["numpy.zeros", "numpy.zeros", "numpy.cos", "numpy.sin", "numpy.sum", "numpy.sum"], "methods", ["None"], ["", "def", "setPlotData", "(", "self", ",", "xi", ",", "t", ")", ":", "\n", "        ", "x", ",", "y", "=", "np", ".", "zeros", "(", "self", ".", "n_dims", "+", "1", ")", ",", "np", ".", "zeros", "(", "self", ".", "n_dims", "+", "1", ")", "\n", "x", "[", "1", "]", "=", "np", ".", "cos", "(", "np", ".", "sum", "(", "xi", "[", "t", "]", "[", "0", "]", ")", ")", "*", "1.0", "/", "self", ".", "n_dims", "\n", "y", "[", "1", "]", "=", "np", ".", "sin", "(", "np", ".", "sum", "(", "xi", "[", "t", "]", "[", "0", "]", ")", ")", "*", "1.0", "/", "self", ".", "n_dims", "\n", "# x=Time[s], y=Position[rad]", "\n", "#        x, y = np.zeros(self.n_dims), np.zeros(self.n_dims)", "\n", "#        x[0]=float(t)/float(self.n)", "\n", "#        y[0]=xi[t][0]", "\n", "return", "x", ",", "y", "\n", "", "", ""]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.pi2.PI2.__init__": [[8, 30], ["range", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "dmps", ",", "n_updates", ",", "n_reps", ",", "n_dims", ",", "n_bfs", ",", "\n", "n_times", ",", "r_gain", ",", "r_normalize", ")", ":", "\n", "        ", "self", ".", "dmps", "=", "dmps", "\n", "self", ".", "n_updates", "=", "n_updates", "\n", "self", ".", "n_reps", "=", "n_reps", "\n", "self", ".", "n_dims", "=", "n_dims", "\n", "self", ".", "n_bfs", "=", "n_bfs", "\n", "self", ".", "n_times", "=", "n_times", "\n", "self", ".", "time_index", "=", "range", "(", "self", ".", "n_times", ")", "\n", "self", ".", "r_normalize", "=", "r_normalize", "\n", "\n", "self", ".", "c", "=", "r_gain", "\n", "self", ".", "std_eps", "=", "0", "# Operate out of the class: TODO What is best representation...?", "\n", "self", ".", "G", "=", "np", ".", "zeros", "(", "\n", "(", "self", ".", "n_reps", ",", "self", ".", "n_dims", ",", "self", ".", "n_times", ",", "self", ".", "n_bfs", ")", ")", "\n", "self", ".", "psi", "=", "np", ".", "zeros", "(", "(", "self", ".", "n_reps", ",", "self", ".", "n_times", ",", "self", ".", "n_bfs", ")", ")", "\n", "self", ".", "theta", "=", "np", ".", "zeros", "(", "[", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "self", ".", "epsilon", "=", "np", ".", "zeros", "(", "\n", "[", "self", ".", "n_reps", ",", "self", ".", "n_dims", ",", "self", ".", "n_times", ",", "self", ".", "n_bfs", "]", ")", "\n", "self", ".", "action", "=", "np", ".", "zeros", "(", "\n", "[", "self", ".", "n_reps", ",", "self", ".", "n_dims", ",", "self", ".", "n_times", ",", "self", ".", "n_bfs", "]", ")", "\n", "self", ".", "reward", "=", "np", ".", "zeros", "(", "(", "self", ".", "n_reps", ",", "self", ".", "n_times", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.pi2.PI2.update": [[31, 70], ["numpy.array", "numpy.array", "numpy.array", "numpy.rot90", "numpy.zeros", "range", "numpy.squeeze", "numpy.tile", "numpy.sum", "numpy.squeeze", "numpy.cumsum", "numpy.max", "numpy.min", "numpy.exp", "numpy.exp", "range", "numpy.sum", "numpy.arange", "numpy.array", "numpy.reshape", "numpy.rot90", "numpy.sum", "numpy.ones", "numpy.sum", "numpy.sum", "numpy.ones", "numpy.sum", "numpy.ones", "numpy.ones", "numpy.ones", "numpy.ones"], "methods", ["None"], ["", "def", "update", "(", "self", ",", "r", ",", "action", ")", ":", "\n", "        ", "g", "=", "np", ".", "array", "(", "self", ".", "G", ")", "\n", "r", "=", "np", ".", "array", "(", "r", ")", "\n", "action", "=", "np", ".", "array", "(", "action", ")", "\n", "s", "=", "np", ".", "rot90", "(", "np", ".", "cumsum", "(", "np", ".", "rot90", "(", "r", ",", "k", "=", "2", ")", ",", "1", ")", ",", "k", "=", "2", ")", "\n", "if", "self", ".", "r_normalize", ":", "\n", "            ", "max_s", "=", "np", ".", "max", "(", "s", ",", "0", ")", "\n", "min_s", "=", "np", ".", "min", "(", "s", ",", "0", ")", "\n", "exp_s", "=", "np", ".", "exp", "(", "-", "self", ".", "c", "*", "(", "s", "-", "(", "min_s", "*", "np", ".", "ones", "(", "(", "self", ".", "n_reps", ",", "\n", "self", ".", "n_times", ")", ")", ")", ")", "\n", "/", "(", "(", "max_s", "-", "min_s", ")", "*", "np", ".", "ones", "(", "(", "self", ".", "n_reps", ",", "\n", "self", ".", "n_times", ")", ")", ")", ")", "\n", "", "else", ":", "\n", "            ", "exp_s", "=", "np", ".", "exp", "(", "-", "1", "/", "self", ".", "c", "*", "s", ")", "\n", "\n", "", "p", "=", "exp_s", "/", "(", "np", ".", "sum", "(", "exp_s", ",", "0", ")", "*", "np", ".", "ones", "(", "(", "self", ".", "n_reps", ",", "self", ".", "n_times", ")", ")", ")", "\n", "p_m_eps", "=", "np", ".", "zeros", "(", "\n", "(", "self", ".", "n_reps", ",", "self", ".", "n_dims", ",", "self", ".", "n_times", ",", "self", ".", "n_bfs", ")", ")", "\n", "for", "k", "in", "range", "(", "self", ".", "n_reps", ")", ":", "\n", "            ", "for", "d", "in", "range", "(", "self", ".", "n_dims", ")", ":", "\n", "                ", "g_t_eps", "=", "np", ".", "sum", "(", "g", "[", "k", "]", "[", "d", "]", "*", "(", "action", "[", "k", ",", "d", "]", "-", "self", ".", "theta", "[", "d", "]", ")", ",", "1", ")", "\n", "g_t_g", "=", "np", ".", "sum", "(", "g", "[", "k", "]", "[", "d", "]", "**", "2", ",", "1", ")", "\n", "tmp", "=", "(", "p", "[", "k", "]", "*", "g_t_eps", "/", "(", "g_t_g", "+", "1.e-10", ")", ")", ".", "reshape", "(", "1", ",", "-", "1", ")", "\n", "p_m_eps", "[", "k", "]", "[", "d", "]", "=", "g", "[", "k", "]", "[", "d", "]", "*", "(", "tmp", ".", "T", "*", "np", ".", "ones", "(", "(", "self", ".", "n_times", ",", "self", ".", "n_bfs", ")", ")", ")", "\n", "\n", "", "", "dtheta", "=", "np", ".", "squeeze", "(", "np", ".", "sum", "(", "p_m_eps", ",", "0", ")", ")", "\n", "weight", "=", "np", ".", "arange", "(", "self", ".", "n_times", ",", "0", ",", "-", "1", ")", ".", "T", "\n", "weight", "=", "(", "weight", "*", "np", ".", "ones", "(", "(", "self", ".", "n_bfs", ",", "self", ".", "n_times", ")", ")", ")", ".", "T", "*", "np", ".", "array", "(", "self", ".", "psi", "[", "0", "]", ")", "\n", "weight", "=", "weight", "/", "(", "np", ".", "ones", "(", "(", "self", ".", "n_times", ",", "self", ".", "n_bfs", ")", ")", "*", "\n", "np", ".", "sum", "(", "weight", ",", "0", ")", ")", "\n", "weight", "=", "np", ".", "tile", "(", "np", ".", "reshape", "(", "weight", ",", "(", "1", ",", "self", ".", "n_times", ",", "self", ".", "n_bfs", ")", ")", ",", "\n", "(", "self", ".", "n_dims", ",", "1", ",", "1", ")", ")", "\n", "\n", "weighted_dtheta", "=", "np", ".", "sum", "(", "dtheta", "*", "weight", ",", "1", ")", "\n", "weighted_dtheta", "=", "np", ".", "squeeze", "(", "weighted_dtheta", ")", "\n", "\n", "self", ".", "theta", "=", "self", ".", "theta", "+", "weighted_dtheta", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.pi2.PI2.act": [[71, 73], ["None"], "methods", ["None"], ["", "def", "act", "(", "self", ",", "obs", ",", "t", ")", ":", "\n", "        ", "return", "self", ".", "theta", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.pi2.PI2.act_and_train": [[74, 85], ["numpy.random.randn", "pi2.PI2.update"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.amds.AMDS.update"], ["", "def", "act_and_train", "(", "self", ",", "obs", ",", "reward", ",", "t", ",", "k", ")", ":", "\n", "        ", "xi", ",", "dxi", ",", "ddxi", ",", "gdof", "=", "obs", "\n", "self", ".", "G", "[", "k", ",", ":", ",", "t", "]", "=", "gdof", "\n", "self", ".", "psi", "[", "k", ",", "t", "]", "=", "self", ".", "dmps", "[", "0", "]", ".", "psi", "\n", "self", ".", "reward", "[", "k", ",", "t", "]", "=", "reward", "\n", "self", ".", "epsilon", "[", "k", ",", ":", ",", "t", ",", ":", "]", "=", "np", ".", "random", ".", "randn", "(", "\n", "self", ".", "n_dims", ",", "self", ".", "n_bfs", ")", "*", "self", ".", "std_eps", "\n", "self", ".", "action", "[", "k", ",", ":", ",", "t", "]", "=", "self", ".", "theta", "+", "self", ".", "epsilon", "[", "k", ",", ":", ",", "t", "]", "\n", "if", "(", "k", "==", "self", ".", "n_reps", "-", "1", ")", "and", "(", "t", "==", "self", ".", "n_times", "-", "1", ")", ":", "\n", "            ", "self", ".", "update", "(", "self", ".", "reward", ",", "self", ".", "action", ")", "\n", "", "return", "self", ".", "action", "[", "k", ",", ":", ",", "t", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.pi2.PI2IndependTime.__update": [[88, 115], ["len", "numpy.rot90", "numpy.max", "numpy.min", "numpy.exp", "numpy.tile", "range", "numpy.rot90", "range", "range", "numpy.cumsum", "range", "numpy.rot90", "numpy.sum", "numpy.ones", "numpy.rot90", "numpy.ones", "numpy.add", "numpy.array", "numpy.ones"], "methods", ["None"], ["    ", "def", "__update", "(", "self", ",", "r", ",", "epsilon", ",", "theta", ")", ":", "\n", "        ", "next_theta", "=", "[", "[", "0", "for", "_", "in", "range", "(", "self", ".", "n_bfs", ")", "]", "\n", "for", "_", "in", "range", "(", "self", ".", "n_dims", ")", "]", "\n", "# dtheta = [[0 for _ in range(self.n_bfs)] for _ in range(self.n_dims)]", "\n", "c", "=", "10", "\n", "n_times", "=", "len", "(", "self", ".", "time_index", ")", "\n", "s", "=", "np", ".", "rot90", "(", "\n", "np", ".", "rot90", "(", "(", "np", ".", "cumsum", "(", "np", ".", "rot90", "(", "np", ".", "rot90", "(", "np", ".", "array", "(", "r", ")", ".", "T", ")", ")", ",", "0", ")", ")", ")", ")", "\n", "max_s", "=", "np", ".", "max", "(", "s", ",", "1", ")", "\n", "min_s", "=", "np", ".", "min", "(", "s", ",", "1", ")", "\n", "\n", "exp_s", "=", "np", ".", "exp", "(", "-", "c", "*", "(", "s", "-", "(", "min_s", "*", "np", ".", "ones", "(", "(", "self", ".", "n_reps", ",", "n_times", ")", ")", ")", ".", "T", ")", "\n", "/", "(", "(", "max_s", "-", "min_s", ")", "*", "np", ".", "ones", "(", "(", "self", ".", "n_reps", ",", "n_times", ")", ")", ")", ".", "T", ")", "\n", "\n", "p", "=", "exp_s", "/", "(", "np", ".", "sum", "(", "exp_s", ",", "1", ")", "*", "np", ".", "ones", "(", "(", "self", ".", "n_reps", ",", "n_times", ")", ")", ")", ".", "T", "\n", "p", "=", "np", ".", "tile", "(", "p", "[", "0", ",", ":", "]", ",", "(", "n_times", ",", "1", ")", ")", "\n", "\n", "for", "d", "in", "range", "(", "self", ".", "n_dims", ")", ":", "\n", "            ", "for", "k", "in", "range", "(", "self", ".", "n_reps", ")", ":", "\n", "# dtheta[d] = dtheta[d]+P[0,k]*epsilon[k][d][0]", "\n", "                ", "next_theta", "[", "d", "]", "=", "next_theta", "[", "d", "]", "+", "p", "[", "0", ",", "k", "]", "*", "(", "np", ".", "add", "(", "theta", "[", "0", ",", "d", ",", "0", ",", ":", "]", ",", "epsilon", "[", "k", ",", "d", ",", "0", ",", ":", "]", ")", ")", "\n", "\n", "# theta[0, :, 0, :] = theta[0, :, 0, :] + dtheta[:]", "\n", "", "", "theta", "[", "0", ",", ":", ",", "0", ",", ":", "]", "=", "next_theta", "[", ":", "]", "\n", "\n", "return", "theta", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.pi2.PI2IndependTime._act": [[116, 125], ["numpy.zeros", "range", "numpy.random.randn"], "methods", ["None"], ["", "def", "_act", "(", "self", ",", "reps", ",", "theta", ",", "std_eps", ")", ":", "\n", "        ", "epsilon", "=", "np", ".", "zeros", "(", "[", "reps", ",", "self", ".", "n_dims", ",", "self", ".", "n_times", ",", "self", ".", "n_bfs", "]", ")", "\n", "# Generate exploration noise", "\n", "for", "t", "in", "range", "(", "self", ".", "n_times", ")", ":", "\n", "            ", "if", "t", "==", "0", ":", "\n", "                ", "epsilon", "[", ":", ",", ":", ",", "t", ",", ":", "]", "=", "np", ".", "random", ".", "randn", "(", "\n", "reps", ",", "self", ".", "n_dims", ",", "self", ".", "n_bfs", ")", "*", "std_eps", "\n", "", "else", ":", "\n", "                ", "epsilon", "[", ":", ",", ":", ",", "t", ",", ":", "]", "=", "epsilon", "[", ":", ",", ":", ",", "0", ",", ":", "]", "\n", "", "", "", "", ""]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.gmds.GMDS.__init__": [[8, 24], ["numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "dmps", ",", "n_updates", ",", "n_reps", ",", "n_dims", ",", "n_bfs", ",", "n_times", ",", "\n", "r_gain", ",", "r_normalize", ")", ":", "\n", "        ", "self", ".", "dmps", "=", "dmps", "\n", "self", ".", "n_updates", "=", "n_updates", "\n", "self", ".", "n_reps", "=", "n_reps", "\n", "self", ".", "n_dims", "=", "n_dims", "\n", "self", ".", "n_bfs", "=", "n_bfs", "\n", "self", ".", "n_times", "=", "n_times", "\n", "self", ".", "r_normalize", "=", "r_normalize", "\n", "\n", "self", ".", "c", "=", "r_gain", "\n", "self", ".", "std_eps", "=", "0", "# Operate out of the class", "\n", "self", ".", "theta", "=", "np", ".", "zeros", "(", "[", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "self", ".", "epsilon", "=", "np", ".", "zeros", "(", "[", "self", ".", "n_reps", ",", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "self", ".", "action", "=", "np", ".", "zeros", "(", "[", "self", ".", "n_reps", ",", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "self", ".", "reward", "=", "np", ".", "zeros", "(", "(", "self", ".", "n_reps", ",", "self", ".", "n_times", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.gmds.GMDS.update": [[25, 44], ["numpy.array", "numpy.array", "numpy.sum", "numpy.zeros", "range", "numpy.sum", "numpy.max", "numpy.min", "numpy.exp", "numpy.exp", "range", "numpy.sum", "numpy.ones", "numpy.ones", "numpy.ones"], "methods", ["None"], ["", "def", "update", "(", "self", ",", "r", ",", "action", ")", ":", "\n", "        ", "r", "=", "np", ".", "array", "(", "r", ")", "\n", "action", "=", "np", ".", "array", "(", "action", ")", "\n", "s", "=", "np", ".", "sum", "(", "r", ",", "1", ")", "\n", "if", "self", ".", "r_normalize", ":", "\n", "            ", "max_s", "=", "np", ".", "max", "(", "s", ",", "0", ")", "\n", "min_s", "=", "np", ".", "min", "(", "s", ",", "0", ")", "\n", "exp_s", "=", "np", ".", "exp", "(", "-", "self", ".", "c", "*", "(", "s", "-", "(", "min_s", "*", "np", ".", "ones", "(", "self", ".", "n_reps", ")", ")", ")", "\n", "/", "(", "(", "max_s", "-", "min_s", ")", "*", "np", ".", "ones", "(", "self", ".", "n_reps", ")", ")", ")", "\n", "", "else", ":", "\n", "            ", "exp_s", "=", "np", ".", "exp", "(", "-", "1", "/", "self", ".", "c", "*", "s", ")", "\n", "\n", "", "p", "=", "exp_s", "/", "(", "np", ".", "sum", "(", "exp_s", ",", "0", ")", "*", "np", ".", "ones", "(", "self", ".", "n_reps", ")", ")", "\n", "p_eps", "=", "np", ".", "zeros", "(", "(", "self", ".", "n_reps", ",", "self", ".", "n_dims", ",", "self", ".", "n_bfs", ")", ")", "\n", "for", "k", "in", "range", "(", "self", ".", "n_reps", ")", ":", "\n", "            ", "for", "d", "in", "range", "(", "self", ".", "n_dims", ")", ":", "\n", "                ", "p_eps", "[", "k", "]", "[", "d", "]", "=", "p", "[", "k", "]", "*", "(", "action", "[", "k", ",", "d", "]", "-", "self", ".", "theta", "[", "d", "]", ")", "\n", "", "", "dtheta", "=", "np", ".", "sum", "(", "p_eps", ",", "0", ")", "\n", "self", ".", "theta", "=", "self", ".", "theta", "+", "dtheta", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.gmds.GMDS.act": [[45, 47], ["None"], "methods", ["None"], ["", "def", "act", "(", "self", ",", "obs", ",", "t", ")", ":", "\n", "        ", "return", "self", ".", "theta", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.gmds.GMDS.act_and_train": [[48, 58], ["gmds.GMDS.update", "numpy.random.randn"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.amds.AMDS.update"], ["", "def", "act_and_train", "(", "self", ",", "obs", ",", "reward", ",", "t", ",", "k", ")", ":", "\n", "        ", "xi", ",", "dxi", ",", "ddxi", ",", "gdof", "=", "obs", "\n", "self", ".", "reward", "[", "k", ",", "t", "]", "=", "reward", "\n", "if", "t", "==", "0", ":", "\n", "            ", "self", ".", "epsilon", "[", "k", ",", ":", ",", ":", "]", "=", "np", ".", "random", ".", "randn", "(", "self", ".", "n_dims", ",", "\n", "self", ".", "n_bfs", ")", "*", "self", ".", "std_eps", "\n", "", "self", ".", "action", "[", "k", ",", ":", "]", "=", "self", ".", "theta", "+", "self", ".", "epsilon", "[", "k", ",", ":", "]", "\n", "if", "(", "k", "==", "self", ".", "n_reps", "-", "1", ")", "and", "(", "t", "==", "self", ".", "n_times", "-", "1", ")", ":", "\n", "            ", "self", ".", "update", "(", "self", ".", "reward", ",", "self", ".", "action", ")", "\n", "", "return", "self", ".", "action", "[", "k", ",", ":", "]", "\n", "", "", ""]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.reps.REPS.__init__": [[8, 14], ["agents.gmds.GMDS.__init__"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.DebugAnimation.__init__"], ["    ", "def", "__init__", "(", "self", ",", "dmps", ",", "n_updates", ",", "n_reps", ",", "n_dims", ",", "n_bfs", ",", "\n", "n_times", ",", "r_gain", ",", "r_normalize", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "dmps", ",", "n_updates", ",", "n_reps", ",", "n_dims", ",", "n_bfs", ",", "\n", "n_times", ",", "r_gain", ",", "r_normalize", ")", "\n", "self", ".", "min_c", "=", "self", ".", "c", "*", "0.5", "\n", "self", ".", "kl_epsilon", "=", "2.0", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.reps.REPS.update": [[15, 40], ["numpy.array", "numpy.array", "numpy.sum", "scipy.optimize.minimize", "numpy.zeros", "range", "numpy.sum", "numpy.max", "numpy.min", "numpy.exp", "numpy.exp", "range", "numpy.sum", "numpy.ones", "numpy.ones", "numpy.ones"], "methods", ["None"], ["", "def", "update", "(", "self", ",", "r", ",", "action", ")", ":", "\n", "        ", "r", "=", "np", ".", "array", "(", "r", ")", "\n", "action", "=", "np", ".", "array", "(", "action", ")", "\n", "s", "=", "np", ".", "sum", "(", "r", ",", "1", ")", "\n", "\n", "res", "=", "minimize", "(", "reps_dual", ",", "\n", "x0", "=", "10.0", ",", "\n", "bounds", "=", "(", "(", "self", ".", "min_c", ",", "None", ")", ",", ")", ",", "\n", "args", "=", "(", "self", ".", "kl_epsilon", ",", "s", ")", ")", "\n", "self", ".", "c", "=", "res", ".", "x", "[", "0", "]", "\n", "if", "self", ".", "r_normalize", ":", "\n", "            ", "max_s", "=", "np", ".", "max", "(", "s", ",", "0", ")", "\n", "min_s", "=", "np", ".", "min", "(", "s", ",", "0", ")", "\n", "exp_s", "=", "np", ".", "exp", "(", "-", "self", ".", "c", "*", "(", "s", "-", "(", "min_s", "*", "np", ".", "ones", "(", "self", ".", "n_reps", ")", ")", ")", "\n", "/", "(", "(", "max_s", "-", "min_s", ")", "*", "np", ".", "ones", "(", "self", ".", "n_reps", ")", ")", ")", "\n", "", "else", ":", "\n", "            ", "exp_s", "=", "np", ".", "exp", "(", "-", "1", "/", "self", ".", "c", "*", "s", ")", "\n", "\n", "", "p", "=", "exp_s", "/", "(", "np", ".", "sum", "(", "exp_s", ",", "0", ")", "*", "np", ".", "ones", "(", "self", ".", "n_reps", ")", ")", "\n", "p_eps", "=", "np", ".", "zeros", "(", "(", "self", ".", "n_reps", ",", "self", ".", "n_dims", ",", "self", ".", "n_bfs", ")", ")", "\n", "for", "k", "in", "range", "(", "self", ".", "n_reps", ")", ":", "\n", "            ", "for", "d", "in", "range", "(", "self", ".", "n_dims", ")", ":", "\n", "                ", "p_eps", "[", "k", "]", "[", "d", "]", "=", "p", "[", "k", "]", "*", "(", "action", "[", "k", ",", "d", "]", "-", "self", ".", "theta", "[", "d", "]", ")", "\n", "", "", "dtheta", "=", "np", ".", "sum", "(", "p_eps", ",", "0", ")", "\n", "self", ".", "theta", "=", "self", ".", "theta", "+", "dtheta", "\n", "", "", ""]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.areps.AREPS.__init__": [[8, 14], ["agents.amds.AMDS.__init__"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.DebugAnimation.__init__"], ["    ", "def", "__init__", "(", "self", ",", "dmps", ",", "n_updates", ",", "n_reps", ",", "n_dims", ",", "n_bfs", ",", "\n", "n_times", ",", "r_gain", ",", "r_normalize", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "dmps", ",", "n_updates", ",", "n_reps", ",", "n_dims", ",", "n_bfs", ",", "\n", "n_times", ",", "r_gain", ",", "r_normalize", ")", "\n", "self", ".", "min_c", "=", "self", ".", "c2", "*", "0.8", "\n", "self", ".", "kl_episilon", "=", "2.0", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.areps.AREPS.update": [[15, 64], ["numpy.array", "numpy.array", "numpy.sum", "scipy.optimize.minimize", "agents.util.gauss_pdf", "agents.util.gauss_pdf", "numpy.sum().T.reshape", "numpy.sum().T.reshape", "numpy.array", "numpy.array", "agents.util.get_next_theta", "next_theta_z.reshape.reshape.reshape", "agents.util.get_next_theta", "next_theta_x.reshape.reshape.reshape", "numpy.ones", "numpy.ones", "numpy.array.reshape", "areps.AREPS.theta_z.reshape", "areps.AREPS.theta_x.reshape", "numpy.ones_like", "list", "list", "map", "map", "min", "max", "min", "numpy.sum", "numpy.sum"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gauss_pdf", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gauss_pdf", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.get_next_theta", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.get_next_theta"], ["", "def", "update", "(", "self", ",", "r", ",", "action", ")", ":", "\n", "        ", "r", "=", "np", ".", "array", "(", "r", ")", "\n", "act", "=", "np", ".", "array", "(", "action", ")", "\n", "s", "=", "np", ".", "sum", "(", "r", ",", "1", ")", "\n", "\n", "res", "=", "minimize", "(", "reps_dual", ",", "\n", "x0", "=", "10.0", ",", "\n", "bounds", "=", "(", "(", "self", ".", "min_c", ",", "None", ")", ",", ")", ",", "\n", "args", "=", "(", "self", ".", "kl_episilon", ",", "s", ")", ")", "\n", "\n", "self", ".", "c1", "=", "res", ".", "x", "[", "0", "]", "*", "self", ".", "p1", ".", "epsilon", "/", "(", "\n", "1", "+", "self", ".", "n_reps", "*", "self", ".", "p1", ".", "epsilon", ")", "\n", "self", ".", "c2", "=", "res", ".", "x", "[", "0", "]", "\n", "\n", "if", "self", ".", "r_normalize", ":", "\n", "            ", "s", "=", "(", "s", "-", "min", "(", "s", ")", ")", "/", "(", "max", "(", "s", ")", "-", "min", "(", "s", ")", ")", "\n", "g2", "=", "self", ".", "cnt", "**", "(", "self", ".", "alpha", "-", "1", ")", "*", "self", ".", "c2", "/", "self", ".", "r", "*", "s", "\n", "g1", "=", "self", ".", "c1", "*", "s", "\n", "", "else", ":", "\n", "            ", "g2", "=", "self", ".", "cnt", "**", "(", "self", ".", "alpha", "-", "1", ")", "*", "(", "1", "/", "self", ".", "c2", ")", "/", "self", ".", "r", "*", "s", "\n", "g1", "=", "(", "1", "/", "self", ".", "c1", ")", "*", "s", "\n", "", "g2", "=", "(", "g2", "*", "np", ".", "ones", "(", "(", "self", ".", "n_params", ",", "1", ")", ")", ")", "\n", "g1", "=", "(", "g1", "*", "np", ".", "ones", "(", "(", "self", ".", "n_params", ",", "1", ")", ")", ")", "\n", "act", "=", "act", ".", "reshape", "(", "[", "self", ".", "n_reps", ",", "self", ".", "n_params", "]", ")", ".", "T", "\n", "theta_z", "=", "self", ".", "theta_z", ".", "reshape", "(", "self", ".", "n_params", ")", ".", "T", "\n", "theta_x", "=", "self", ".", "theta_x", ".", "reshape", "(", "self", ".", "n_params", ")", ".", "T", "\n", "std", "=", "self", ".", "std_eps", "*", "np", ".", "ones_like", "(", "theta_x", ")", "\n", "\n", "# Discretize prob_z and prob_x", "\n", "prob_z", "=", "gauss_pdf", "(", "act", ",", "theta_z", ",", "std", ")", "\n", "prob_x", "=", "gauss_pdf", "(", "act", ",", "theta_x", ",", "std", ")", "\n", "# Normalize prob_z and prob_z", "\n", "prob_z", "/=", "(", "np", ".", "sum", "(", "prob_z", ",", "1", ")", ".", "T", ")", ".", "reshape", "(", "(", "-", "1", ",", "1", ")", ")", "\n", "prob_x", "/=", "(", "np", ".", "sum", "(", "prob_x", ",", "1", ")", ".", "T", ")", ".", "reshape", "(", "(", "-", "1", ",", "1", ")", ")", "\n", "# Update prob_z and prob_x by upper level MD", "\n", "next_prob_z", "=", "np", ".", "array", "(", "list", "(", "map", "(", "self", ".", "p2", ".", "project", ",", "prob_z", ",", "g2", ")", ")", ")", "\n", "next_prob_x", "=", "np", ".", "array", "(", "list", "(", "map", "(", "self", ".", "p1", ".", "project", ",", "prob_x", ",", "g1", ")", ")", ")", "\n", "# Fitting next_theta_z and next_theta_x", "\n", "next_theta_z", "=", "get_next_theta", "(", "act", ",", "next_prob_z", ")", "\n", "next_theta_z", "=", "next_theta_z", ".", "reshape", "(", "[", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "next_theta_x", "=", "get_next_theta", "(", "act", ",", "next_prob_x", ")", "\n", "next_theta_x", "=", "next_theta_x", ".", "reshape", "(", "[", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "\n", "self", ".", "theta_z", "=", "next_theta_z", "\n", "self", ".", "theta_x", "=", "next_theta_x", "\n", "self", ".", "theta", "=", "(", "self", ".", "cnt", "**", "(", "self", ".", "alpha", "-", "1", ")", "*", "\n", "self", ".", "theta_x", "+", "self", ".", "r", "*", "self", ".", "theta_z", ")", "/", "(", "self", ".", "cnt", "**", "(", "self", ".", "alpha", "-", "1", ")", "+", "self", ".", "r", ")", "\n", "self", ".", "cnt", "+=", "1", "\n", "", "", ""]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.mds.MDS.__init__": [[10, 27], ["numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "agents.util.Projection"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "n_updates", ",", "n_reps", ",", "n_dims", ",", "n_bfs", ",", "n_times", ",", "r_gain", ",", "\n", "r_normalize", ")", ":", "\n", "        ", "self", ".", "n_updates", "=", "n_updates", "\n", "self", ".", "n_reps", "=", "n_reps", "\n", "self", ".", "n_dims", "=", "n_dims", "\n", "self", ".", "n_params", "=", "n_bfs", "*", "n_dims", "\n", "self", ".", "n_bfs", "=", "n_bfs", "\n", "self", ".", "n_times", "=", "n_times", "\n", "self", ".", "r_normalize", "=", "r_normalize", "\n", "\n", "self", ".", "theta", "=", "np", ".", "zeros", "(", "[", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "self", ".", "epsilon", "=", "np", ".", "zeros", "(", "[", "self", ".", "n_reps", ",", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "self", ".", "action", "=", "np", ".", "zeros", "(", "[", "self", ".", "n_reps", ",", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "self", ".", "reward", "=", "np", ".", "zeros", "(", "(", "self", ".", "n_reps", ",", "self", ".", "n_times", ")", ")", "\n", "\n", "self", ".", "p", "=", "Projection", "(", "0", ")", "\n", "self", ".", "c", "=", "r_gain", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.mds.MDS.update": [[28, 51], ["numpy.array", "numpy.array", "numpy.sum", "agents.util.gauss_pdf", "numpy.sum().T.reshape", "numpy.array", "agents.util.get_next_theta", "next_theta_x.reshape.reshape.reshape", "numpy.ones", "numpy.array.reshape", "mds.MDS.theta.reshape", "numpy.ones_like", "list", "map", "numpy.sum", "min", "max", "min"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gauss_pdf", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.get_next_theta"], ["", "def", "update", "(", "self", ",", "r", ",", "action", ")", ":", "\n", "        ", "r", "=", "np", ".", "array", "(", "r", ")", "\n", "act", "=", "np", ".", "array", "(", "action", ")", "\n", "s", "=", "np", ".", "sum", "(", "r", ",", "1", ")", "\n", "if", "self", ".", "r_normalize", ":", "\n", "            ", "g", "=", "self", ".", "c", "*", "(", "(", "s", "-", "min", "(", "s", ")", ")", "/", "(", "max", "(", "s", ")", "-", "min", "(", "s", ")", ")", ")", "\n", "", "else", ":", "\n", "            ", "g", "=", "(", "1", "/", "self", ".", "c", ")", "*", "s", "\n", "", "g", "=", "(", "g", "*", "np", ".", "ones", "(", "(", "self", ".", "n_params", ",", "1", ")", ")", ")", "\n", "act", "=", "act", ".", "reshape", "(", "[", "self", ".", "n_reps", ",", "self", ".", "n_params", "]", ")", ".", "T", "\n", "theta_x", "=", "self", ".", "theta", ".", "reshape", "(", "self", ".", "n_params", ")", ".", "T", "\n", "std", "=", "self", ".", "std_eps", "*", "np", ".", "ones_like", "(", "theta_x", ")", "\n", "\n", "# Discretize prob_x", "\n", "prob_act", "=", "gauss_pdf", "(", "act", ",", "theta_x", ",", "std", ")", "\n", "# Normalize prob_x", "\n", "prob_act", "/=", "(", "np", ".", "sum", "(", "prob_act", ",", "1", ")", ".", "T", ")", ".", "reshape", "(", "(", "-", "1", ",", "1", ")", ")", "\n", "# Update prob_x by upper level MD", "\n", "next_prob_act", "=", "np", ".", "array", "(", "list", "(", "map", "(", "self", ".", "p", ".", "project", ",", "prob_act", ",", "g", ")", ")", ")", "\n", "# Fitting next_theta_x", "\n", "next_theta_x", "=", "get_next_theta", "(", "act", ",", "next_prob_act", ")", "\n", "next_theta_x", "=", "next_theta_x", ".", "reshape", "(", "[", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "self", ".", "theta", "=", "next_theta_x", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.mds.MDS.act": [[52, 54], ["None"], "methods", ["None"], ["", "def", "act", "(", "self", ",", "obs", ",", "t", ")", ":", "\n", "        ", "return", "self", ".", "theta", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.mds.MDS.act_and_train": [[55, 64], ["mds.MDS.update", "numpy.random.randn"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.amds.AMDS.update"], ["", "def", "act_and_train", "(", "self", ",", "obs", ",", "reward", ",", "t", ",", "k", ")", ":", "\n", "        ", "self", ".", "reward", "[", "k", ",", "t", "]", "=", "reward", "\n", "if", "t", "==", "0", ":", "\n", "            ", "self", ".", "epsilon", "[", "k", "]", "=", "np", ".", "random", ".", "randn", "(", "self", ".", "n_dims", ",", "\n", "self", ".", "n_bfs", ")", "*", "self", ".", "std_eps", "\n", "self", ".", "action", "[", "k", "]", "=", "self", ".", "theta", "+", "self", ".", "epsilon", "[", "k", "]", "\n", "", "if", "(", "k", "==", "self", ".", "n_reps", "-", "1", ")", "and", "(", "t", "==", "self", ".", "n_times", "-", "1", ")", ":", "\n", "            ", "self", ".", "update", "(", "self", ".", "reward", ",", "self", ".", "action", ")", "\n", "", "return", "self", ".", "action", "[", "k", ",", ":", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.mds.MDSKDE.__init__": [[69, 78], ["mds.MDS.__init__", "numpy.zeros", "numpy.zeros", "numpy.ones", "numpy.sum().reshape", "agents.util.DebugAnimation", "numpy.sum"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.DebugAnimation.__init__"], ["def", "__init__", "(", "self", ",", "n_updates", ",", "n_reps", ",", "n_dims", ",", "n_bfs", ",", "n_times", ",", "\n", "r_gain", ",", "r_normalize", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "n_updates", ",", "n_reps", ",", "n_dims", ",", "n_bfs", ",", "n_times", ",", "r_gain", ",", "\n", "r_normalize", ")", "\n", "self", ".", "theta", "=", "np", ".", "zeros", "(", "[", "self", ".", "n_reps", ",", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "self", ".", "theta_mean", "=", "np", ".", "zeros", "(", "[", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "self", ".", "prob", "=", "np", ".", "ones", "(", "(", "self", ".", "n_reps", ",", "self", ".", "n_params", ")", ")", "\n", "self", ".", "prob", "/=", "(", "np", ".", "sum", "(", "self", ".", "prob", ".", "T", ",", "1", ")", ")", ".", "reshape", "(", "(", "1", ",", "-", "1", ")", ")", "\n", "self", ".", "da", "=", "DebugAnimation", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.mds.MDSKDE.update": [[79, 125], ["numpy.array", "numpy.array", "numpy.sum", "agents.util.gmm_pdf", "numpy.sum().T.reshape", "numpy.array", "agents.util.get_next_theta", "next_theta_x.T.reshape.T.reshape.T.reshape", "next_prob_act.T.reshape.T.reshape.T.reshape", "theta_mean.T.reshape.T.reshape.T.reshape", "numpy.ones", "numpy.array.reshape", "mds.MDSKDE.theta.reshape", "mds.MDSKDE.prob.reshape", "numpy.ones_like", "list", "map", "min", "max", "min", "numpy.sum"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gmm_pdf", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.get_next_theta"], ["", "def", "update", "(", "self", ",", "r", ",", "action", ")", ":", "\n", "        ", "r", "=", "np", ".", "array", "(", "r", ")", "\n", "act", "=", "np", ".", "array", "(", "action", ")", "\n", "s", "=", "np", ".", "sum", "(", "r", ",", "1", ")", "\n", "\n", "if", "self", ".", "r_normalize", ":", "\n", "            ", "s", "=", "(", "s", "-", "min", "(", "s", ")", ")", "/", "(", "max", "(", "s", ")", "-", "min", "(", "s", ")", ")", "\n", "\n", "# Set s as g", "\n", "", "g", "=", "self", ".", "c", "*", "s", "\n", "g", "=", "(", "g", "*", "np", ".", "ones", "(", "(", "self", ".", "n_params", ",", "1", ")", ")", ")", "\n", "act", "=", "act", ".", "reshape", "(", "[", "self", ".", "n_reps", ",", "self", ".", "n_params", "]", ")", ".", "T", "\n", "theta_x", "=", "self", ".", "theta", ".", "reshape", "(", "self", ".", "n_reps", ",", "self", ".", "n_params", ")", ".", "T", "\n", "prob_x", "=", "self", ".", "prob", ".", "reshape", "(", "(", "self", ".", "n_reps", ",", "self", ".", "n_params", ")", ")", ".", "T", "\n", "std", "=", "self", ".", "std_eps", "*", "np", ".", "ones_like", "(", "theta_x", ")", "\n", "\n", "# Discretize prob_act", "\n", "prob_act", "=", "gmm_pdf", "(", "act", ",", "prob_x", ",", "theta_x", ",", "std", "=", "std", ")", "\n", "# Normalize prob_act", "\n", "prob_act", "/=", "(", "np", ".", "sum", "(", "prob_act", ",", "1", ")", ".", "T", ")", ".", "reshape", "(", "(", "-", "1", ",", "1", ")", ")", "\n", "\n", "# Update prob_x by upper level MD", "\n", "next_prob_act", "=", "np", ".", "array", "(", "list", "(", "map", "(", "self", ".", "p", ".", "project", ",", "prob_act", ",", "g", ")", ")", ")", "\n", "\n", "# --- Methods for debug ---", "\n", "# action = self.action.reshape(self.n_reps, self.n_params).T", "\n", "# self.da.plot_animation([theta_x[0]], [prob_x[0]], [prob_act[0]],", "\n", "#                        [action[0]], [g[0]], [next_prob_act[0]],", "\n", "#                        [std[0]], 1)", "\n", "# self.da.plot_animation(theta_x, prob_x, prob_act, action, g,", "\n", "#                        next_prob_act, std, self.n_params)", "\n", "# --- Methods for debug ---", "\n", "\n", "# Fitting next_theta_x", "\n", "next_theta_x", "=", "act", "# get_next_theta(act, next_prob_act)", "\n", "theta_mean", "=", "get_next_theta", "(", "act", ",", "next_prob_act", ")", "\n", "\n", "next_theta_x", "=", "(", "next_theta_x", ".", "T", ")", ".", "reshape", "(", "\n", "[", "self", ".", "n_reps", ",", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "next_prob_act", "=", "(", "next_prob_act", ".", "T", ")", ".", "reshape", "(", "\n", "[", "self", ".", "n_reps", ",", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "theta_mean", "=", "(", "theta_mean", ".", "T", ")", ".", "reshape", "(", "[", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "\n", "self", ".", "theta_mean", "=", "theta_mean", "\n", "self", ".", "theta", "=", "next_theta_x", "\n", "self", ".", "prob", "=", "next_prob_act", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.mds.MDSKDE.act_and_train": [[126, 141], ["mds.MDSKDE.prob.reshape", "mds.MDSKDE.theta.reshape", "numpy.ones_like", "agents.util.gmm_rand().reshape", "mds.MDSKDE.update", "agents.util.gmm_rand"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.amds.AMDS.update", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gmm_rand"], ["", "def", "act_and_train", "(", "self", ",", "obs", ",", "reward", ",", "t", ",", "k", ")", ":", "\n", "        ", "self", ".", "reward", "[", "k", ",", "t", "]", "=", "reward", "\n", "prob", "=", "self", ".", "prob", ".", "reshape", "(", "(", "self", ".", "n_reps", ",", "self", ".", "n_params", ")", ")", ".", "T", "\n", "theta", "=", "self", ".", "theta", ".", "reshape", "(", "self", ".", "n_reps", ",", "self", ".", "n_params", ")", ".", "T", "\n", "std", "=", "self", ".", "std_eps", "*", "np", ".", "ones_like", "(", "theta", ")", "\n", "if", "t", "==", "0", ":", "\n", "# self.epsilon[k] = np.random.randn(self.n_dims, self.n_bfs) * (", "\n", "#     self.std_eps)", "\n", "# self.action[k] = self.theta_mean + self.epsilon[k]", "\n", "            ", "self", ".", "action", "[", "k", "]", "=", "gmm_rand", "(", "prob", ",", "theta", ",", "std", ",", "\n", "1", ")", ".", "reshape", "(", "[", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "\n", "", "if", "(", "k", "==", "self", ".", "n_reps", "-", "1", ")", "and", "(", "t", "==", "self", ".", "n_times", "-", "1", ")", ":", "\n", "            ", "self", ".", "update", "(", "self", ".", "reward", ",", "self", ".", "action", ")", "\n", "", "return", "self", ".", "action", "[", "k", ",", ":", "]", "\n", "", "", ""]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.amds.AMDS.__init__": [[9, 39], ["numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "agents.util.Projection", "agents.util.Projection", "Exception"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "dmps", ",", "n_updates", ",", "n_reps", ",", "n_dims", ",", "n_bfs", ",", "n_times", ",", "\n", "r_gain", ",", "r_normalize", ")", ":", "\n", "        ", "self", ".", "dmps", "=", "dmps", "\n", "self", ".", "n_updates", "=", "n_updates", "\n", "self", ".", "n_reps", "=", "n_reps", "\n", "self", ".", "n_dims", "=", "n_dims", "\n", "self", ".", "n_params", "=", "n_bfs", "*", "n_dims", "\n", "self", ".", "n_bfs", "=", "n_bfs", "\n", "self", ".", "n_times", "=", "n_times", "\n", "self", ".", "r_normalize", "=", "r_normalize", "\n", "\n", "self", ".", "theta", "=", "np", ".", "zeros", "(", "[", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "self", ".", "theta_z", "=", "np", ".", "zeros", "(", "[", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "self", ".", "theta_x", "=", "np", ".", "zeros", "(", "[", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "self", ".", "epsilon", "=", "np", ".", "zeros", "(", "[", "self", ".", "n_reps", ",", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "self", ".", "action", "=", "np", ".", "zeros", "(", "[", "self", ".", "n_reps", ",", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "self", ".", "reward", "=", "np", ".", "zeros", "(", "(", "self", ".", "n_reps", ",", "self", ".", "n_times", ")", ")", "\n", "\n", "self", ".", "r", "=", "3", "\n", "self", ".", "alpha", "=", "2", "\n", "if", "self", ".", "r", "<", "self", ".", "alpha", ":", "\n", "            ", "raise", "Exception", "(", "'r needs to be larger than alpha (default 2)'", ")", "\n", "\n", "", "epsilon", "=", "0.3", "\n", "self", ".", "p1", "=", "Projection", "(", "epsilon", ")", "\n", "self", ".", "p2", "=", "Projection", "(", "0", ")", "\n", "self", ".", "c1", "=", "r_gain", "*", "self", ".", "p1", ".", "epsilon", "/", "(", "1", "+", "self", ".", "n_reps", "*", "self", ".", "p1", ".", "epsilon", ")", "\n", "self", ".", "c2", "=", "r_gain", "\n", "\n", "self", ".", "cnt", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.amds.AMDS.update": [[40, 79], ["numpy.array", "numpy.array", "numpy.sum", "agents.util.gauss_pdf", "agents.util.gauss_pdf", "numpy.sum().T.reshape", "numpy.sum().T.reshape", "numpy.array", "numpy.array", "agents.util.get_next_theta", "next_theta_z.reshape.reshape.reshape", "agents.util.get_next_theta", "next_theta_x.reshape.reshape.reshape", "numpy.ones", "numpy.ones", "numpy.array.reshape", "amds.AMDS.theta_z.reshape", "amds.AMDS.theta_x.reshape", "numpy.ones_like", "list", "list", "map", "map", "min", "max", "min", "numpy.sum", "numpy.sum"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gauss_pdf", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gauss_pdf", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.get_next_theta", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.get_next_theta"], ["", "def", "update", "(", "self", ",", "r", ",", "action", ")", ":", "\n", "        ", "r", "=", "np", ".", "array", "(", "r", ")", "\n", "act", "=", "np", ".", "array", "(", "action", ")", "\n", "s", "=", "np", ".", "sum", "(", "r", ",", "1", ")", "\n", "if", "self", ".", "r_normalize", ":", "\n", "            ", "s", "=", "(", "s", "-", "min", "(", "s", ")", ")", "/", "(", "max", "(", "s", ")", "-", "min", "(", "s", ")", ")", "\n", "g2", "=", "self", ".", "cnt", "**", "(", "self", ".", "alpha", "-", "1", ")", "*", "self", ".", "c2", "/", "self", ".", "r", "*", "s", "\n", "g1", "=", "self", ".", "c1", "*", "s", "\n", "", "else", ":", "\n", "            ", "g2", "=", "self", ".", "cnt", "**", "(", "self", ".", "alpha", "-", "1", ")", "*", "(", "1", "/", "self", ".", "c2", ")", "/", "self", ".", "r", "*", "s", "\n", "g1", "=", "(", "1", "/", "self", ".", "c1", ")", "*", "s", "\n", "", "g2", "=", "(", "g2", "*", "np", ".", "ones", "(", "(", "self", ".", "n_params", ",", "1", ")", ")", ")", "\n", "g1", "=", "(", "g1", "*", "np", ".", "ones", "(", "(", "self", ".", "n_params", ",", "1", ")", ")", ")", "\n", "act", "=", "act", ".", "reshape", "(", "[", "self", ".", "n_reps", ",", "self", ".", "n_params", "]", ")", ".", "T", "\n", "theta_z", "=", "self", ".", "theta_z", ".", "reshape", "(", "self", ".", "n_params", ")", ".", "T", "\n", "theta_x", "=", "self", ".", "theta_x", ".", "reshape", "(", "self", ".", "n_params", ")", ".", "T", "\n", "std", "=", "self", ".", "std_eps", "*", "np", ".", "ones_like", "(", "theta_x", ")", "\n", "\n", "# Discretize prob_z and prob_x", "\n", "prob_z", "=", "gauss_pdf", "(", "act", ",", "theta_z", ",", "std", ")", "\n", "prob_x", "=", "gauss_pdf", "(", "act", ",", "theta_x", ",", "std", ")", "\n", "# Normalize prob_z and prob_z", "\n", "prob_z", "/=", "(", "np", ".", "sum", "(", "prob_z", ",", "1", ")", ".", "T", ")", ".", "reshape", "(", "(", "-", "1", ",", "1", ")", ")", "\n", "prob_x", "/=", "(", "np", ".", "sum", "(", "prob_x", ",", "1", ")", ".", "T", ")", ".", "reshape", "(", "(", "-", "1", ",", "1", ")", ")", "\n", "# Update prob_z and prob_x by upper level MD", "\n", "next_prob_z", "=", "np", ".", "array", "(", "list", "(", "map", "(", "self", ".", "p2", ".", "project", ",", "prob_z", ",", "g2", ")", ")", ")", "\n", "next_prob_x", "=", "np", ".", "array", "(", "list", "(", "map", "(", "self", ".", "p1", ".", "project", ",", "prob_x", ",", "g1", ")", ")", ")", "\n", "# Fitting next_theta_z and next_theta_x", "\n", "next_theta_z", "=", "get_next_theta", "(", "act", ",", "next_prob_z", ")", "\n", "next_theta_z", "=", "next_theta_z", ".", "reshape", "(", "[", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "next_theta_x", "=", "get_next_theta", "(", "act", ",", "next_prob_x", ")", "\n", "next_theta_x", "=", "next_theta_x", ".", "reshape", "(", "[", "self", ".", "n_dims", ",", "self", ".", "n_bfs", "]", ")", "\n", "\n", "self", ".", "theta_z", "=", "next_theta_z", "\n", "self", ".", "theta_x", "=", "next_theta_x", "\n", "self", ".", "theta", "=", "(", "self", ".", "cnt", "**", "(", "self", ".", "alpha", "-", "1", ")", "*", "\n", "self", ".", "theta_x", "+", "self", ".", "r", "*", "self", ".", "theta_z", ")", "/", "(", "self", ".", "cnt", "**", "(", "self", ".", "alpha", "-", "1", ")", "+", "self", ".", "r", ")", "\n", "self", ".", "cnt", "+=", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.amds.AMDS.act": [[80, 82], ["None"], "methods", ["None"], ["", "def", "act", "(", "self", ",", "obs", ",", "t", ")", ":", "\n", "        ", "return", "self", ".", "theta", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.amds.AMDS.act_and_train": [[83, 93], ["amds.AMDS.update", "numpy.random.randn"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.amds.AMDS.update"], ["", "def", "act_and_train", "(", "self", ",", "obs", ",", "reward", ",", "t", ",", "k", ")", ":", "\n", "        ", "xi", ",", "dxi", ",", "ddxi", ",", "gdof", "=", "obs", "\n", "self", ".", "reward", "[", "k", ",", "t", "]", "=", "reward", "\n", "if", "t", "==", "0", ":", "\n", "            ", "self", ".", "epsilon", "[", "k", "]", "=", "np", ".", "random", ".", "randn", "(", "self", ".", "n_dims", ",", "\n", "self", ".", "n_bfs", ")", "*", "self", ".", "std_eps", "\n", "", "self", ".", "action", "[", "k", ",", ":", "]", "=", "self", ".", "theta", "+", "self", ".", "epsilon", "[", "k", ",", ":", "]", "\n", "if", "(", "k", "==", "self", ".", "n_reps", "-", "1", ")", "and", "(", "t", "==", "self", ".", "n_times", "-", "1", ")", ":", "\n", "            ", "self", ".", "update", "(", "self", ".", "reward", ",", "self", ".", "action", ")", "\n", "", "return", "self", ".", "action", "[", "k", ",", ":", "]", "\n", "", "", ""]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.__init__": [[19, 28], ["range", "numpy.zeros", "numpy.zeros"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "RL", ")", ":", "\n", "        ", "self", ".", "RL", "=", "RL", "\n", "timeStep", "=", "self", ".", "RL", ".", "n", "*", "self", ".", "RL", ".", "times", "\n", "dimension", "=", "self", ".", "RL", ".", "n_dims", "\n", "rfs", "=", "self", ".", "RL", ".", "n_rfs", "\n", "reps", "=", "self", ".", "RL", ".", "reps", "\n", "timeIndex", "=", "range", "(", "timeStep", ")", "\n", "self", ".", "G", "=", "np", ".", "zeros", "(", "(", "reps", ",", "dimension", ",", "timeStep", ",", "rfs", ")", ")", "\n", "self", ".", "psi", "=", "np", ".", "zeros", "(", "(", "reps", ",", "timeStep", ",", "rfs", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.init": [[29, 54], ["open", "numpy.zeros", "range", "omdpi.OMDPI.__amd_init", "numpy.zeros", "numpy.random.rand", "numpy.array", "sum", "range"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.__amd_init"], ["", "def", "init", "(", "self", ")", ":", "\n", "        ", "self", ".", "f", "=", "open", "(", "self", ".", "RL", ".", "path", "+", "'/'", "+", "'Entropy-'", "+", "self", ".", "RL", ".", "MethodMode", "+", "'.csv'", ",", "'a'", ")", "\n", "timeStep", "=", "self", ".", "RL", ".", "n", "*", "self", ".", "RL", ".", "times", "\n", "# mu\u306freps\u306b\u4f9d\u5b58\u3057\u306a\u3044\u305f\u3081\uff0c1\u3068\u3057\u305f", "\n", "self", ".", "mu0", "=", "np", ".", "zeros", "(", "[", "1", ",", "self", ".", "RL", ".", "n_dims", ",", "timeStep", ",", "self", ".", "RL", ".", "n_rfs", "]", ")", "\n", "self", ".", "mu0", "[", "0", ",", ":", ",", "0", ",", ":", "]", "=", "self", ".", "RL", ".", "meanIni", "+", "np", ".", "zeros", "(", "[", "self", ".", "RL", ".", "n_dims", ",", "self", ".", "RL", ".", "n_rfs", "]", ")", "\n", "#self.mu0[0,:,0,:]=np.array([[.55, .25, .2]]).T", "\n", "#TODO \u5ff5\u306e\u305f\u3081timestep\u5168\u4f53\u306b\u30b3\u30d4\u30fc", "\n", "for", "t", "in", "range", "(", "timeStep", ")", ":", "\n", "            ", "self", ".", "mu0", "[", "0", ",", ":", ",", "t", ",", ":", "]", "=", "self", ".", "mu0", "[", "0", ",", ":", ",", "0", ",", ":", "]", "\n", "\n", "", "self", ".", "distroIni", "=", "[", "[", "self", ".", "RL", ".", "lambdakIni", ",", "self", ".", "mu0", "]", ",", "[", "1.0", "-", "self", ".", "RL", ".", "lambdakIni", ",", "self", ".", "mu0", "]", "]", "\n", "\n", "# AMD\u30af\u30e9\u30b9\u306e\u521d\u671f\u5316", "\n", "self", ".", "MDmethod", "=", "self", ".", "__amd_init", "(", "self", ".", "RL", ".", "MethodMode", ")", "\n", "\n", "# \u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u521d\u671f\u5316", "\n", "self", ".", "_tmp", "=", "[", "np", ".", "random", ".", "rand", "(", ")", "for", "_", "in", "range", "(", "self", ".", "RL", ".", "reps", ")", "]", "\n", "self", ".", "x0", "=", "self", ".", "ztilde0", "=", "np", ".", "array", "(", "self", ".", "_tmp", ")", "/", "sum", "(", "self", ".", "_tmp", ")", "\n", "self", ".", "x", "=", "self", ".", "x0", "\n", "self", ".", "ztilde", "=", "self", ".", "ztilde0", "\n", "self", ".", "distro", "=", "self", ".", "distroIni", "\n", "self", ".", "lambdak", "=", "self", ".", "RL", ".", "lambdakIni", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.__amd_init": [[55, 86], ["projections.SimplexProjectionExpSort", "projections.SimplexProjectionExpSort", "numpy.ones", "numpy.sum", "Accelerated.AcceleratedMethod", "Accelerated.MDMethod", "error"], "methods", ["None"], ["", "def", "__amd_init", "(", "self", ",", "methodMode", ")", ":", "\n", "# dimension: num of Rollouts", "\n", "        ", "d", "=", "self", ".", "RL", ".", "reps", "\n", "\n", "precision", "=", "1e-10", "\n", "epsilon", "=", ".3", "\n", "# Simplex constrained projections", "\n", "psExpS", "=", "proj", ".", "SimplexProjectionExpSort", "(", "dimension", "=", "d", ",", "epsilon", "=", "epsilon", ")", "\n", "psExpS0", "=", "proj", ".", "SimplexProjectionExpSort", "(", "dimension", "=", "d", ",", "epsilon", "=", "0", ")", "\n", "\n", "h", "=", "self", ".", "RL", ".", "h", "\n", "r", "=", "3", "\n", "p1", "=", "psExpS", "\n", "p2", "=", "psExpS0", "\n", "s1", "=", "h", "*", "p1", ".", "epsilon", "/", "(", "1.0", "+", "d", "*", "p1", ".", "epsilon", ")", "\n", "s2", "=", "h", "\n", "\n", "#x0 = np.random.rand(d).T", "\n", "\n", "x0", "=", "np", ".", "ones", "(", "d", ")", ".", "T", "\n", "x0", "=", "x0", "/", "np", ".", "sum", "(", "x0", ")", "\n", "\n", "if", "(", "methodMode", "==", "'acc'", ")", ":", "\n", "            ", "method", "=", "ac", ".", "AcceleratedMethod", "(", "p1", ",", "p2", ",", "s1", ",", "s2", ",", "r", ",", "x0", ",", "'accelerated descent'", ")", "\n", "#method = ac.AcceleratedMethodWithRestartGradScheme(p1, p2, s1, s2, r, x0, 'gradient restart')", "\n", "", "elif", "(", "methodMode", "==", "'norm'", ")", ":", "\n", "            ", "method", "=", "ac", ".", "MDMethod", "(", "p2", ",", "s2", ",", "x0", ",", "'mirror descent'", ")", "\n", "", "else", ":", "\n", "            ", "error", "(", "'unknown method mode in OMDPI'", ")", "\n", "\n", "", "return", "method", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.__approximate": [[87, 131], ["numpy.squeeze", "numpy.squeeze", "range", "numpy.add", "numpy.add", "numpy.reshape", "numpy.reshape", "numpy.tile", "numpy.tile", "numpy.reshape", "numpy.reshape", "numpy.squeeze", "numpy.reshape"], "methods", ["None"], ["", "def", "__approximate", "(", "self", ",", "data", ",", "xtilde", ",", "ztilde", ",", "lambdak", ",", "params1", ",", "params2", ")", ":", "\n", "        ", "'''\n        mux, sigmax = gF.solver2(np.squeeze(data), xtilde)\n        muz, sigmaz = gF.solver2(np.squeeze(data), ztilde)\n        mux1 = np.array([[[[mux]]] for i in range(10)])\n        muz1 = np.array([[[[muz]]] for i in range(10)])\n        params=[[lambdak, mux1, sigmax], [1.0-lambdak, muz1, sigmaz]]\n        return params\n        '''", "\n", "\n", "reps", "=", "self", ".", "RL", ".", "reps", "\n", "timestep", "=", "self", ".", "RL", ".", "n", "*", "self", ".", "RL", ".", "times", "\n", "mean1", "=", "np", ".", "squeeze", "(", "np", ".", "reshape", "(", "params1", "[", "1", "]", "[", "0", ",", ":", ",", "0", ",", ":", "]", ",", "[", "1", ",", "-", "1", "]", ")", ")", "\n", "mean2", "=", "np", ".", "squeeze", "(", "np", ".", "reshape", "(", "params2", "[", "1", "]", "[", "0", ",", ":", ",", "0", ",", ":", "]", ",", "[", "1", ",", "-", "1", "]", ")", ")", "\n", "\n", "Delta1", "=", "0", "\n", "Delta2", "=", "0", "\n", "\n", "#theta1=0", "\n", "#theta2=0", "\n", "for", "i", "in", "range", "(", "reps", ")", ":", "\n", "            ", "_data", "=", "np", ".", "squeeze", "(", "np", ".", "reshape", "(", "data", "[", "i", ",", ":", ",", "0", ",", ":", "]", ",", "[", "1", ",", "-", "1", "]", ")", ")", "\n", "epsilon1", "=", "_data", "-", "mean1", "\n", "epsilon2", "=", "_data", "-", "mean2", "\n", "\n", "# \u30ce\u30a4\u30ba\u306e\u671f\u5f85\u5024\u3092\u8a08\u7b97", "\n", "Delta1", "+=", "epsilon1", "*", "xtilde", "[", "i", "]", "\n", "Delta2", "+=", "epsilon2", "*", "ztilde", "[", "i", "]", "\n", "#theta1 += _data*xtilde[i]", "\n", "#theta2 += _data*ztilde[i]", "\n", "\n", "# \u03b8\u306e\u66f4\u65b0", "\n", "", "theta1", "=", "np", ".", "add", "(", "mean1", ",", "Delta1", ")", "\n", "theta2", "=", "np", ".", "add", "(", "mean2", ",", "Delta2", ")", "\n", "\n", "theta11", "=", "np", ".", "reshape", "(", "theta1", ",", "(", "1", ",", "self", ".", "RL", ".", "n_dims", ",", "1", ",", "self", ".", "RL", ".", "n_rfs", ")", ")", "\n", "theta22", "=", "np", ".", "reshape", "(", "theta2", ",", "(", "1", ",", "self", ".", "RL", ".", "n_dims", ",", "1", ",", "self", ".", "RL", ".", "n_rfs", ")", ")", "\n", "#TODO \u3054\u308a\u62bc\u3057\u3067timestep\u5206\u30b3\u30d4\u30fc", "\n", "theta11", "=", "np", ".", "tile", "(", "theta11", "[", ":", "]", ",", "(", "timestep", ",", "1", ")", ")", "\n", "theta22", "=", "np", ".", "tile", "(", "theta22", "[", ":", "]", ",", "(", "timestep", ",", "1", ")", ")", "\n", "\n", "# weight, mean\u3092\u66f4\u65b0", "\n", "params", "=", "[", "[", "lambdak", ",", "theta11", "]", ",", "[", "1.0", "-", "lambdak", ",", "theta22", "]", "]", "\n", "return", "params", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.__update": [[132, 174], ["numpy.rot90", "GMM_sample.data_GMMs_likelihood", "GMM_sample.data_normalized_likelihood", "omdpi.OMDPI.f.write", "omdpi.OMDPI.__approximate", "numpy.matrix", "numpy.rot90", "omdpi.OMDPI.MDmethod.step", "omdpi.OMDPI.MDmethod.step", "numpy.identity", "numpy.cumsum", "min", "max", "min", "str", "numpy.rot90", "numpy.ones_like", "sum", "numpy.ones_like", "sum", "scipy.stats.entropy", "numpy.rot90", "numpy.ones_like", "numpy.ones_like"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.__approximate", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.step", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.step"], ["", "def", "__update", "(", "self", ",", "data", ",", "distro", ",", "stdEps", ",", "mean", ",", "r", ")", ":", "\n", "        ", "rfs", "=", "self", ".", "RL", ".", "n_rfs", "\n", "dims", "=", "self", ".", "RL", ".", "n_dims", "\n", "valMat", "=", "stdEps", "**", "2", "*", "np", ".", "matrix", "(", "np", ".", "identity", "(", "dims", "*", "rfs", ")", ")", "\n", "\n", "# \u7d2f\u7a4d\u5831\u916c\u548c\u3092\u8a08\u7b97", "\n", "S", "=", "np", ".", "rot90", "(", "np", ".", "rot90", "(", "(", "np", ".", "cumsum", "(", "np", ".", "rot90", "(", "np", ".", "rot90", "(", "r", ".", "T", ")", ")", ",", "0", ")", ")", ")", ")", "\n", "\n", "# weight, mean, variance", "\n", "distroX", "=", "[", "distro", "[", "0", "]", "[", "0", "]", ",", "distro", "[", "0", "]", "[", "1", "]", ",", "valMat", "]", "\n", "distroZ", "=", "[", "distro", "[", "1", "]", "[", "0", "]", ",", "distro", "[", "1", "]", "[", "1", "]", ",", "valMat", "]", "\n", "\n", "# x\u306e\u96e2\u6563\u5206\u5e03\u3092\u6c42\u3081\u308b", "\n", "x", "=", "GMMs", ".", "data_GMMs_likelihood", "(", "data", ",", "distroX", ",", "distroZ", ")", "\n", "#xtilde = GMMs.data_normalized_likelihood(data, distroX)", "\n", "\n", "# ztilde\u306e\u96e2\u6563\u5206\u5e03\u3092\u6c42\u3081\u308b", "\n", "ztilde", "=", "GMMs", ".", "data_normalized_likelihood", "(", "data", ",", "distroZ", ")", "\n", "\n", "# \u6b63\u898f\u5316", "\n", "g", "=", "S", "[", "0", ",", ":", "]", "\n", "g", "=", "(", "g", "-", "min", "(", "g", ")", ")", "/", "(", "max", "(", "g", ")", "-", "min", "(", "g", ")", ")", "\n", "\n", "if", "(", "not", "self", ".", "RL", ".", "skipMode", ")", ":", "\n", "            ", "self", ".", "x", "=", "x", "\n", "self", ".", "ztilde", "=", "ztilde", "\n", "# AMD\u306b\u5f93\u3063\u3066\u5206\u5e03\u3092\u66f4\u65b0", "\n", "", "if", "(", "self", ".", "RL", ".", "ztildeXequal", ")", ":", "\n", "            ", "x", ",", "xtilde", ",", "ztilde", ",", "lambdak", "=", "self", ".", "MDmethod", ".", "step", "(", "g", ",", "np", ".", "ones_like", "(", "self", ".", "x", ")", "/", "sum", "(", "np", ".", "ones_like", "(", "self", ".", "x", ")", ")", ",", "np", ".", "ones_like", "(", "self", ".", "ztilde", ")", "/", "sum", "(", "np", ".", "ones_like", "(", "self", ".", "ztilde", ")", ")", ")", "\n", "", "else", ":", "\n", "            ", "x", ",", "xtilde", ",", "ztilde", ",", "lambdak", "=", "self", ".", "MDmethod", ".", "step", "(", "g", ",", "self", ".", "x", ",", "self", ".", "ztilde", ")", "\n", "", "if", "(", "self", ".", "RL", ".", "skipMode", ")", ":", "\n", "            ", "self", ".", "x", "=", "x", "\n", "self", ".", "ztilde", "=", "ztilde", "\n", "", "self", ".", "f", ".", "write", "(", "str", "(", "entropy", "(", "self", ".", "x", ",", "self", ".", "ztilde", ",", "2", ")", ")", "+", "'\\n'", ")", "\n", "#self.f.write(str(entropy(x, ztilde, 2))+'\\n')", "\n", "#        print('x: '+str(self.x))", "\n", "#        print('ztilde: '+str(self.ztilde))", "\n", "#        print('entropy: '+str(entropy(self.x, self.ztilde, 2)))", "\n", "\n", "# \u9023\u7d9a\u5206\u5e03\u3092\u66f4\u65b0", "\n", "return", "self", ".", "__approximate", "(", "data", ",", "xtilde", ",", "ztilde", ",", "lambdak", ",", "distroX", ",", "distroZ", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.act_and_train": [[175, 177], ["None"], "methods", ["None"], ["", "def", "act_and_train", "(", "self", ",", "obs", ",", "reward", ")", ":", "\n", "        ", "return", "action", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.__rollouts": [[178, 200], ["numpy.zeros", "numpy.zeros", "range", "range", "numpy.zeros", "range", "numpy.matrix", "GMM_sample.GMM_sample", "omdpi.OMDPI.RL.task.step", "numpy.array", "numpy.identity"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.env.EnvDMP.step"], ["", "def", "__rollouts", "(", "self", ",", "reps", ",", "distro", ",", "stdEps", ")", ":", "\n", "        ", "timeStep", "=", "self", ".", "RL", ".", "n", "*", "self", ".", "RL", ".", "times", "\n", "rfs", "=", "self", ".", "RL", ".", "n_rfs", "\n", "dims", "=", "self", ".", "RL", ".", "n_dims", "\n", "\n", "valMat", "=", "stdEps", "**", "2", "*", "np", ".", "matrix", "(", "np", ".", "identity", "(", "dims", "*", "rfs", ")", ")", "\n", "# weight, mean, variance", "\n", "distro1", "=", "[", "distro", "[", "0", "]", "[", "0", "]", ",", "distro", "[", "0", "]", "[", "1", "]", ",", "valMat", "]", "\n", "distro2", "=", "[", "distro", "[", "1", "]", "[", "0", "]", ",", "distro", "[", "1", "]", "[", "1", "]", ",", "valMat", "]", "\n", "\n", "mean", "=", "np", ".", "zeros", "(", "[", "reps", ",", "dims", ",", "timeStep", ",", "rfs", "]", ")", "\n", "data", "=", "np", ".", "zeros", "(", "[", "reps", ",", "dims", ",", "timeStep", ",", "rfs", "]", ")", "\n", "for", "k", "in", "range", "(", "reps", ")", ":", "\n", "# 2\u3064\u306e\u5206\u5e03\u304b\u3089\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0", "\n", "            ", "data", "[", "k", ",", ":", ",", "0", ",", ":", "]", ",", "mean", "[", "k", ",", ":", ",", "0", ",", ":", "]", "=", "GMMs", ".", "GMM_sample", "(", "distro1", ",", "distro2", ")", "\n", "", "for", "t", "in", "range", "(", "timeStep", ")", ":", "\n", "            ", "data", "[", ":", ",", ":", ",", "t", ",", ":", "]", "=", "data", "[", ":", ",", ":", ",", "0", ",", ":", "]", "\n", "mean", "[", ":", ",", ":", ",", "t", ",", ":", "]", "=", "mean", "[", ":", ",", ":", ",", "0", ",", ":", "]", "\n", "", "R", "=", "np", ".", "zeros", "(", "(", "reps", ",", "timeStep", ")", ")", "\n", "for", "k", "in", "range", "(", "reps", ")", ":", "\n", "            ", "R", "[", "k", "]", "=", "self", ".", "RL", ".", "task", ".", "step", "(", "reps", ",", "mean", ",", "data", "-", "mean", ",", "self", ".", "G", ",", "self", ".", "psi", ",", "k", ")", "\n", "", "return", "np", ".", "array", "(", "R", ")", ",", "mean", ",", "data", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.act": [[201, 213], ["numpy.zeros", "range", "numpy.sum", "numpy.array", "numpy.array", "numpy.array", "numpy.array"], "methods", ["None"], ["", "def", "act", "(", "self", ",", "obs", ",", "gDof", ",", "_epsilon", ",", "theta", ",", "t", ")", ":", "\n", "        ", "dof", "=", "self", ".", "RL", ".", "n_dims", "\n", "xi", ",", "dxi", ",", "ddxi", "=", "obs", "[", "t", "]", "\n", "# Todo: 10 = rfs", "\n", "action", "=", "np", ".", "zeros", "(", "(", "dof", ",", "10", ")", ")", "\n", "#\u5831\u916c\u306e\u8a08\u7b97\uff08t=100\u3068\u3044\u3046\u306e\u306f\u7d4c\u7531\u70b9\u3092\u901a\u308a\u3059\u304e\u3066\u6b32\u3057\u3044\u6642\u9593\uff09", "\n", "for", "d", "in", "range", "(", "dof", ")", ":", "\n", "            ", "gTg", "=", "np", ".", "sum", "(", "np", ".", "array", "(", "gDof", "[", "d", "]", ")", "*", "np", ".", "array", "(", "gDof", "[", "d", "]", ")", ")", "\n", "gTeps", "=", "np", ".", "array", "(", "gDof", "[", "d", "]", ")", "*", "np", ".", "array", "(", "_epsilon", "[", "d", "]", "[", "t", "]", ")", "\n", "Meps", "=", "gDof", "[", "d", "]", "*", "gTeps", "/", "(", "gTg", "+", "1.e-10", ")", "\n", "action", "[", "d", "]", "=", "theta", "[", "d", "]", "+", "Meps", "\n", "", "return", "action", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.simulate": [[214, 234], ["numpy.max", "omdpi.OMDPI.__rollouts", "omdpi.OMDPI.__rollouts", "numpy.sum", "float", "float", "omdpi.OMDPI.__update"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.__rollouts", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.__rollouts", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.omdpi.OMDPI.__update"], ["", "def", "simulate", "(", "self", ",", "reps", ",", "step", ")", ":", "\n", "        ", "distro", "=", "self", ".", "distro", "\n", "\n", "# \u63a2\u7d22\u30ce\u30a4\u30ba", "\n", "noiseMult", "=", "float", "(", "self", ".", "RL", ".", "updates", "-", "step", ")", "/", "float", "(", "self", ".", "RL", ".", "updates", ")", "\n", "noiseMult", "=", "np", ".", "max", "(", "(", "0.1", ",", "noiseMult", ")", ")", "\n", "stdEps", "=", "self", ".", "RL", ".", "std", "*", "noiseMult", "\n", "\n", "# \u30ed\u30fc\u30eb\u30a2\u30a6\u30c8", "\n", "r", ",", "mean", ",", "data", "=", "self", ".", "__rollouts", "(", "reps", ",", "distro", ",", "stdEps", ")", "\n", "\n", "# \u66f4\u65b0", "\n", "if", "(", "reps", ">", "1", ")", ":", "distro", "=", "self", ".", "__update", "(", "data", ",", "distro", ",", "stdEps", ",", "mean", ",", "r", ")", "\n", "\n", "# \u30ce\u30a4\u30ba\u306e\u306a\u3044\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8", "\n", "r", ",", "_", ",", "_", "=", "self", ".", "__rollouts", "(", "1", ",", "distro", ",", "0", ")", "\n", "\n", "# \u30b3\u30b9\u30c8\u306e\u8a08\u7b97", "\n", "self", ".", "RL", ".", "cost", "[", "step", "]", "=", "np", ".", "sum", "(", "r", ")", "\n", "self", ".", "distro", "=", "distro", "\n", "", "", ""]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.Projection.__init__": [[10, 12], ["None"], "methods", ["None"], ["y", "=", "reward_list", "\n", "# plt.xscale(\"log\")", "\n", "plt", ".", "yscale", "(", "'log'", ")", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.Projection.project": [[13, 23], ["sorted", "numpy.sum", "len", "numpy.maximum", "numpy.exp"], "methods", ["None"], ["plt", ".", "xlabel", "(", "'Number of Roll-Outs'", ")", "\n", "plt", ".", "ylabel", "(", "'Cost'", ")", "\n", "if", "label", "is", "None", ":", "\n", "        ", "plt", ".", "plot", "(", "x", ",", "y", ",", "color", "=", "color", ")", "\n", "", "else", ":", "\n", "        ", "plt", ".", "plot", "(", "x", ",", "y", ",", "label", "=", "label", ",", "color", "=", "color", ")", "\n", "plt", ".", "legend", "(", ")", "\n", "\n", "\n", "", "", "def", "plot_animation", "(", "path", ",", "xs", ",", "ys", ",", "env", ")", ":", "\n", "    ", "fig", "=", "plt", ".", "figure", "(", ")", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.Debug.set_outdir": [[153, 156], ["None"], "methods", ["None"], []], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.Debug.set_n_updates": [[157, 160], ["None"], "methods", ["None"], []], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.DebugAnimation.__init__": [[165, 169], ["matplotlib.figure", "matplotlib.figure"], "methods", ["None"], []], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.DebugAnimation.plot_and_save_figure": [[170, 181], ["numpy.linspace", "matplotlib.figure", "matplotlib.figure", "util.plot_gmm", "util.plot_discrete", "util.plot_discrete", "matplotlib.savefig", "matplotlib.savefig"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.plot_gmm", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.plot_discrete", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.plot_discrete"], []], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.DebugAnimation.plot_animation": [[182, 201], ["numpy.linspace", "util.plot_gmm", "util.plot_discrete", "util.plot_discrete", "util.DebugAnimation.ims.append", "util.DebugAnimation.save_animation"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.plot_gmm", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.plot_discrete", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.plot_discrete", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.DebugAnimation.save_animation"], []], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.DebugAnimation.save_animation": [[202, 205], ["matplotlib.ArtistAnimation", "matplotlib.ArtistAnimation", "matplotlib.ArtistAnimation.save"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.util.Saver.save"], []], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.TestUtil.test_gmm_rand": [[208, 230], ["numpy.array", "numpy.array", "numpy.ones_like", "util.gmm_rand", "numpy.linspace", "matplotlib.figure", "matplotlib.figure", "util.plot_gmm", "numpy.sum", "print", "numpy.array.reshape", "numpy.array.reshape", "numpy.sum", "numpy.sum", "numpy.sum"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gmm_rand", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.plot_gmm"], []], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.TestUtil.test_gmm_pdf": [[231, 251], ["numpy.array", "numpy.array", "numpy.ones_like", "util.gmm_rand", "util.gmm_pdf", "numpy.linspace", "matplotlib.figure", "matplotlib.figure", "util.plot_gmm", "util.plot_discrete", "matplotlib.show", "matplotlib.show", "numpy.array.reshape", "numpy.array.reshape"], "methods", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gmm_rand", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gmm_pdf", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.plot_gmm", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.plot_discrete"], []], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.reps_dual": [[25, 32], ["numpy.min", "numpy.log", "numpy.sum", "len", "numpy.exp"], "function", ["None"], ["ax", ".", "grid", "(", "True", ",", "linestyle", "=", "'-'", ",", "color", "=", "'0.75'", ")", "\n", "line", ",", "=", "ax", ".", "plot", "(", "[", "]", ",", "[", "]", ",", "lw", "=", "2", ")", "\n", "plt", ".", "xlim", "(", "[", "-", "1", ",", "1", "]", ")", "\n", "plt", ".", "ylim", "(", "[", "-", "1", ",", "1", "]", ")", "\n", "\n", "# Generate animation", "\n", "ims", "=", "env", ".", "generate_animation", "(", "xs", ",", "ys", ")", "\n", "ani", "=", "anim", ".", "ArtistAnimation", "(", "fig", ",", "ims", ",", "interval", "=", "10", ",", "repeat_delay", "=", "1000", ")", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gauss_func": [[34, 36], ["numpy.exp"], "function", ["None"], ["plt", ".", "show", "(", ")", "\n", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gauss_rand": [[38, 40], ["numpy.random.randn"], "function", ["None"], ["    ", "if", "n_dims", "==", "1", ":", "\n", "        ", "ee_x", "=", "np", ".", "cos", "(", "xi", "[", "0", "]", ")", "\n", "ee_y", "=", "np", ".", "sin", "(", "xi", "[", "0", "]", ")", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gmm_rand": [[42, 53], ["numpy.zeros", "enumerate", "range", "numpy.sum", "numpy.random.choice", "util.gauss_rand", "list", "range", "len"], "function", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gauss_rand"], ["        ", "ee_x", "=", "np", ".", "sum", "(", "[", "np", ".", "cos", "(", "np", ".", "sum", "(", "xi", "[", ":", "i", "+", "1", "]", ")", ")", "\n", "for", "i", "in", "range", "(", "n_dims", ")", "]", ")", "*", "(", "1.0", "/", "n_dims", ")", "\n", "ee_y", "=", "np", ".", "sum", "(", "[", "np", ".", "sin", "(", "np", ".", "sum", "(", "xi", "[", ":", "i", "+", "1", "]", ")", ")", "\n", "for", "i", "in", "range", "(", "n_dims", ")", "]", ")", "*", "(", "1.0", "/", "n_dims", ")", "\n", "", "return", "ee_x", ",", "ee_y", "\n", "\n", "\n", "", "class", "Saver", ":", "\n", "    ", "@", "abstractproperty", "\n", "def", "saved_names", "(", "self", ")", ":", "\n", "        ", "pass", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gauss_pdf": [[55, 59], ["numpy.array", "scipy.stats.norm.pdf", "zip"], "function", ["None"], ["        ", "os", ".", "makedirs", "(", "dirname", ",", "mode", "=", "0o777", ",", "exist_ok", "=", "True", ")", "\n", "for", "name", "in", "self", ".", "saved_names", ":", "\n", "            ", "np", ".", "save", "(", "os", ".", "path", ".", "join", "(", "dirname", ",", "'{}'", ".", "format", "(", "name", ")", ")", ",", "\n", "getattr", "(", "self", ",", "name", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gmm_pdf_1dim": [[62, 69], ["zip", "numpy.sum", "mixed_weight.append", "scipy.stats.norm.pdf"], "function", ["None"], ["            ", "setattr", "(", "self", ",", "name", ",", "\n", "np", ".", "load", "(", "os", ".", "path", ".", "join", "(", "dirname", ",", "'{}.npy'", ".", "format", "(", "name", ")", ")", ")", ")", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gmm_pdf": [[71, 74], ["numpy.array", "util.gmm_pdf_1dim", "zip"], "function", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gmm_pdf_1dim"], []], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.estimate": [[76, 99], ["scipy.optimize.curve_fit", "scipy.optimize.curve_fit", "util.gauss_func"], "function", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gauss_func"], []], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.get_next_theta": [[101, 114], ["zip", "numpy.array", "numpy.sum", "numpy.sum", "next_theta.append", "util.estimate", "print", "print"], "function", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.estimate"], []], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.plot_gmm": [[116, 139], ["enumerate", "zip", "matplotlib.subplot", "ims.append", "enumerate", "matplotlib.scatter", "zip", "util.gauss_func", "yy.append", "ims.extend", "ims.extend", "matplotlib.plot", "matplotlib.plot", "numpy.sum"], "function", ["home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.gauss_func", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.plot", "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.None.learn.plot"], []], "home.repos.pwc.inspect_result.mmilk1231_MirrorDescentSearch.agents.util.plot_discrete": [[141, 147], ["enumerate", "zip", "matplotlib.subplot", "ims.extend", "matplotlib.bar"], "function", ["None"], []]}