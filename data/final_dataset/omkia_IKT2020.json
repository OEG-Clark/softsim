{"home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.entities": [[17, 25], ["entities.append"], "function", ["None"], ["def", "entities", "(", "doc", ")", ":", "\n", "# sample input:", "\n", "# doc = nlp(\"What is the PA average salary vs an RN?\")", "\n", "# print(*[f'entity: {ent.text}\\ttype: {ent.type}' for ent in doc.ents], sep='\\n')", "\n", "    ", "entities", "=", "[", "]", "\n", "for", "ent", "in", "doc", ".", "ents", ":", "\n", "        ", "entities", ".", "append", "(", "ent", ".", "type", ")", "\n", "", "return", "entities", "\n", "\n"]], "home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.lemma": [[27, 32], ["nltk.stem.wordnet.WordNetLemmatizer", "nltk.stem.wordnet.WordNetLemmatizer.lemmatize", "sentence.casefold"], "function", ["None"], ["", "def", "lemma", "(", "sentence", ")", ":", "\n", "# sentence = \"He was running and eating at same time. He has bad habit of swimming after playing long hours in", "\n", "# the Sun.\"", "\n", "    ", "lemmatizer", "=", "WordNetLemmatizer", "(", ")", "\n", "return", "lemmatizer", ".", "lemmatize", "(", "sentence", ".", "casefold", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.CheckStringContainAnyItem": [[34, 43], ["bool", "IKT2020.lemma", "IKT2020.lemma"], "function", ["home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.lemma", "home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.lemma"], ["", "def", "CheckStringContainAnyItem", "(", "test_string", ",", "test_list", ")", ":", "\n", "# checking if string contains list element", "\n", "# initializing string", "\n", "# test_string = \"There are 2 apples for 4 persons\"", "\n", "# initializing test list", "\n", "# test_list = ['apples', 'oranges']", "\n", "    ", "res", "=", "[", "ele", "for", "ele", "in", "test_list", "if", "(", "lemma", "(", "ele", ")", "in", "lemma", "(", "test_string", ")", ")", "]", "\n", "# print result", "\n", "return", "bool", "(", "res", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.searchQueryandRerank": [[45, 158], ["print", "elastic_client.search", "enumerate", "enumerate", "enumerate", "scores.append", "print", "str", "IKT2020.CheckStringContainAnyItem", "print", "IKT2020.CheckStringContainAnyItem", "IKT2020.entities", "print", "IKT2020.CheckStringContainAnyItem", "IKT2020.CheckStringContainAnyItem", "str", "nlp", "print", "IKT2020.entities", "IKT2020.entities", "print", "nlp", "nlp", "IKT2020.entities", "print", "IKT2020.entities", "nlp", "nlp", "IKT2020.entities", "nlp", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str"], "function", ["home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.CheckStringContainAnyItem", "home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.CheckStringContainAnyItem", "home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.entities", "home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.CheckStringContainAnyItem", "home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.CheckStringContainAnyItem", "home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.entities", "home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.entities", "home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.entities", "home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.entities", "home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.entities"], ["", "def", "searchQueryandRerank", "(", "firstturn", ",", "prevturn", ",", "currentturn", ",", "summary", ",", "turn_num", ",", "turnname", ",", "index", ")", ":", "\n", "# sample input", "\n", "# query = 'hi'", "\n", "# turn_num= \"1_1\"", "\n", "    ", "query", "=", "\"(\"", "+", "firstturn", "+", "\")^2 (\"", "+", "prevturn", "+", "\")^1 (\"", "+", "currentturn", "+", "\")^3 (\"", "+", "summary", "+", "\")^4\"", "\n", "print", "(", "query", ")", "\n", "search_param", "=", "{", "\n", "\"query\"", ":", "{", "\n", "\"query_string\"", ":", "{", "\n", "\"query\"", ":", "query", ",", "\n", "\"default_field\"", ":", "\"doc.content\"", "\n", "}", "\n", "}", "\n", "}", "\n", "# get another response from the cluster", "\n", "response", "=", "elastic_client", ".", "search", "(", "index", "=", "index", ",", "body", "=", "search_param", ",", "request_timeout", "=", "40", ",", "size", "=", "\"1000\"", ")", "\n", "all_hits", "=", "response", "[", "'hits'", "]", "[", "'hits'", "]", "\n", "ranking", "=", "\"\"", "\n", "rank", "=", "0", "\n", "scores", "=", "[", "]", "\n", "WhyWords", "=", "[", "\"reason\"", ",", "\"because\"", ",", "\"causing\"", ",", "\"so\"", ",", "\"why\"", ",", "\"since\"", ",", "\"due to\"", ",", "\"result of\"", ",", "\"therefore\"", "]", "\n", "WhereWords", "=", "[", "\"source\"", ",", "\"originate\"", ",", "\"originating\"", ",", "\"origin\"", ",", "\"part of\"", ",", "\"world\"", ",", "\"native\"", ",", "\"country\"", ",", "\"countries\"", ",", "\n", "\"place\"", ",", "\"Ancient\"", ",", "\"north\"", ",", "\"south\"", ",", "\"east\"", ",", "\"west\"", ",", "\"gulf\"", ",", "\"ocean\"", ",", "\"site\"", ",", "\"park\"", ",", "\"area\"", ",", "\n", "\"miles\"", ",", "\"downtown\"", ",", "\"island\"", ",", "\"antarctic\"", ",", "\"harbour\"", "]", "\n", "WhenWords", "=", "[", "\"spring\"", ",", "\"summer\"", ",", "\"autumn\"", ",", "\"winter\"", ",", "\"saturday\"", ",", "\"sunday\"", ",", "\"monday\"", ",", "\"tuesday\"", ",", "\"wednesday\"", ",", "\n", "\"thursday\"", ",", "\"friday\"", ",", "\"year\"", ",", "\"time\"", ",", "\"age\"", ",", "\"early\"", ",", "\"BC\"", ",", "\"BCE\"", ",", "\"until\"", ",", "\"millenium\"", ",", "\"era\"", ",", "\n", "\"century\"", ",", "\"when\"", ",", "\"season\"", ",", "\"later\"", "]", "\n", "TellWords", "=", "[", "\"like\"", ",", "\"related\"", ",", "\"most\"", ",", "\"described\"", ",", "\"define\"", ",", "\"detail\"", ",", "\"known\"", ",", "\"fact\"", ",", "\"review\"", ",", "\"summary\"", ",", "\n", "\"example\"", ",", "\"illustrate\"", ",", "\"how\"", ",", "\"mean\"", ",", "\"contain\"", ",", "\"consist\"", ",", "\"constituent\"", ",", "\"structure\"", ",", "\"character\"", ",", "\n", "\"almost\"", ",", "\"common\"", ",", "\"class\"", ",", "\"family\"", "]", "\n", "i", "=", "0", "\n", "for", "num", ",", "doc", "in", "enumerate", "(", "all_hits", ")", ":", "\n", "        ", "i", "+=", "1", "\n", "if", "(", "i", "<", "11", ")", ":", "\n", "            ", "print", "(", "str", "(", "i", ")", "+", "\"                \"", "+", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ")", "\n", "", "scores", ".", "append", "(", "str", "(", "doc", "[", "'_score'", "]", ")", ")", "\n", "", "for", "num", ",", "doc", "in", "enumerate", "(", "all_hits", ")", ":", "\n", "        ", "if", "\"Where\"", "in", "currentturn", ":", "\n", "            ", "if", "(", "\"GPE\"", "in", "entities", "(", "nlp", "(", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ")", ")", "or", "CheckStringContainAnyItem", "(", "\n", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ",", "WhereWords", ")", ")", ":", "\n", "                ", "print", "(", "\"Where   \"", "+", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ")", "\n", "rank", "=", "rank", "+", "1", "\n", "ranking", "=", "ranking", "+", "(", "str", "(", "turn_num", ")", "+", "\" 0 \"", "+", "doc", "[", "\"_id\"", "]", "+", "\" \"", "+", "str", "(", "rank", ")", "+", "\" \"", "+", "scores", "[", "\n", "rank", "-", "1", "]", "+", "\" \"", "+", "turnname", "+", "\"\\n\"", ")", "\n", "", "", "elif", "\"Tell\"", "in", "currentturn", ":", "\n", "            ", "if", "CheckStringContainAnyItem", "(", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ",", "TellWords", ")", ":", "\n", "                ", "print", "(", "\"Tell   \"", "+", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ")", "\n", "rank", "=", "rank", "+", "1", "\n", "ranking", "=", "ranking", "+", "(", "str", "(", "turn_num", ")", "+", "\" 0 \"", "+", "doc", "[", "\"_id\"", "]", "+", "\" \"", "+", "str", "(", "rank", ")", "+", "\" \"", "+", "scores", "[", "\n", "rank", "-", "1", "]", "+", "\" \"", "+", "turnname", "+", "\"\\n\"", ")", "\n", "", "", "elif", "(", "\n", "\"How many\"", "in", "currentturn", "or", "\"How much\"", "in", "currentturn", "or", "\"How long\"", "in", "currentturn", "or", "\"cost\"", "in", "currentturn", "or", "\"salary\"", "in", "currentturn", ")", ":", "\n", "            ", "if", "(", "\"CARDINAL\"", "in", "entities", "(", "nlp", "(", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ")", ")", "or", "\"$\"", "in", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "\n", "'content'", "]", ")", ":", "\n", "                ", "print", "(", "\"many   \"", "+", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ")", "\n", "rank", "=", "rank", "+", "1", "\n", "ranking", "=", "ranking", "+", "(", "str", "(", "turn_num", ")", "+", "\" 0 \"", "+", "doc", "[", "\"_id\"", "]", "+", "\" \"", "+", "str", "(", "rank", ")", "+", "\" \"", "+", "scores", "[", "\n", "rank", "-", "1", "]", "+", "\" \"", "+", "turnname", "+", "\"\\n\"", ")", "\n", "", "", "elif", "\"When\"", "in", "currentturn", "or", "\"era\"", "in", "currentturn", ":", "\n", "            ", "if", "(", "(", "\"CARDINAL\"", "in", "entities", "(", "nlp", "(", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ")", ")", ")", "or", "(", "\n", "\"BC\"", "in", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", "or", "\"BCE\"", "in", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", "\n", "or", "\"years\"", "in", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ")", ")", ":", "\n", "                ", "print", "(", "\"when   \"", "+", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ")", "\n", "rank", "=", "rank", "+", "1", "\n", "ranking", "=", "ranking", "+", "(", "str", "(", "turn_num", ")", "+", "\" 0 \"", "+", "doc", "[", "\"_id\"", "]", "+", "\" \"", "+", "str", "(", "rank", ")", "+", "\" \"", "+", "scores", "[", "\n", "rank", "-", "1", "]", "+", "\" \"", "+", "turnname", "+", "\"\\n\"", ")", "\n", "", "", "elif", "\"Why\"", "in", "currentturn", ":", "\n", "            ", "if", "(", "\"because\"", "in", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", "or", "\"causing\"", "in", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", "\n", "or", "\"Because\"", "in", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", "or", "\"result of\"", "in", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "\n", "'content'", "]", ")", ":", "\n", "                ", "print", "(", "\"why   \"", "+", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ")", "\n", "rank", "=", "rank", "+", "1", "\n", "ranking", "=", "ranking", "+", "(", "str", "(", "turn_num", ")", "+", "\" 0 \"", "+", "doc", "[", "\"_id\"", "]", "+", "\" \"", "+", "str", "(", "rank", ")", "+", "\" \"", "+", "scores", "[", "\n", "rank", "-", "1", "]", "+", "\" \"", "+", "turnname", "+", "\"\\n\"", ")", "\n", "", "", "", "for", "num", ",", "doc", "in", "enumerate", "(", "all_hits", ")", ":", "\n", "        ", "if", "\"Where\"", "in", "currentturn", ":", "\n", "            ", "if", "not", "(", "\"GPE\"", "in", "entities", "(", "nlp", "(", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ")", ")", "or", "CheckStringContainAnyItem", "(", "\n", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ",", "WhereWords", ")", ")", ":", "\n", "                ", "rank", "=", "rank", "+", "1", "\n", "ranking", "=", "ranking", "+", "(", "str", "(", "turn_num", ")", "+", "\" 0 \"", "+", "doc", "[", "\"_id\"", "]", "+", "\" \"", "+", "str", "(", "rank", ")", "+", "\" \"", "+", "scores", "[", "\n", "rank", "-", "1", "]", "+", "\" \"", "+", "turnname", "+", "\"\\n\"", ")", "\n", "", "", "elif", "\"Tell\"", "in", "currentturn", ":", "\n", "            ", "if", "not", "(", "CheckStringContainAnyItem", "(", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ",", "TellWords", ")", ")", ":", "\n", "                ", "rank", "=", "rank", "+", "1", "\n", "ranking", "=", "ranking", "+", "(", "str", "(", "turn_num", ")", "+", "\" 0 \"", "+", "doc", "[", "\"_id\"", "]", "+", "\" \"", "+", "str", "(", "rank", ")", "+", "\" \"", "+", "scores", "[", "\n", "rank", "-", "1", "]", "+", "\" \"", "+", "turnname", "+", "\"\\n\"", ")", "\n", "\n", "", "", "elif", "(", "\n", "\"How many\"", "in", "currentturn", "or", "\"How much\"", "in", "currentturn", "or", "\"How long\"", "in", "currentturn", "or", "\"cost\"", "in", "currentturn", "or", "\"salary\"", "in", "currentturn", ")", ":", "\n", "            ", "if", "not", "(", "\"CARDINAL\"", "in", "entities", "(", "nlp", "(", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ")", ")", "or", "\"$\"", "in", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "\n", "'content'", "]", ")", ":", "\n", "                ", "rank", "=", "rank", "+", "1", "\n", "ranking", "=", "ranking", "+", "(", "str", "(", "turn_num", ")", "+", "\" 0 \"", "+", "doc", "[", "\"_id\"", "]", "+", "\" \"", "+", "str", "(", "rank", ")", "+", "\" \"", "+", "scores", "[", "\n", "rank", "-", "1", "]", "+", "\" \"", "+", "turnname", "+", "\"\\n\"", ")", "\n", "", "", "elif", "\"When\"", "in", "currentturn", "or", "\"era\"", "in", "currentturn", ":", "\n", "            ", "if", "(", "not", "(", "(", "\"CARDINAL\"", "in", "entities", "(", "nlp", "(", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ")", ")", ")", "or", "(", "\n", "\"BC\"", "in", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", "or", "\"BCE\"", "in", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", "\n", "or", "\"years\"", "in", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", ")", ")", ")", ":", "\n", "                ", "rank", "=", "rank", "+", "1", "\n", "ranking", "=", "ranking", "+", "(", "str", "(", "turn_num", ")", "+", "\" 0 \"", "+", "doc", "[", "\"_id\"", "]", "+", "\" \"", "+", "str", "(", "rank", ")", "+", "\" \"", "+", "scores", "[", "\n", "rank", "-", "1", "]", "+", "\" \"", "+", "turnname", "+", "\"\\n\"", ")", "\n", "", "", "elif", "\"Why\"", "in", "currentturn", ":", "\n", "            ", "if", "(", "not", "(", "\"because\"", "in", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", "or", "\"causing\"", "in", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", "\n", "or", "\"Because\"", "in", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "'content'", "]", "or", "\"result of\"", "in", "doc", "[", "'_source'", "]", "[", "'doc'", "]", "[", "\n", "'content'", "]", ")", ")", ":", "\n", "                ", "rank", "=", "rank", "+", "1", "\n", "ranking", "=", "ranking", "+", "(", "str", "(", "turn_num", ")", "+", "\" 0 \"", "+", "doc", "[", "\"_id\"", "]", "+", "\" \"", "+", "str", "(", "rank", ")", "+", "\" \"", "+", "scores", "[", "\n", "rank", "-", "1", "]", "+", "\" \"", "+", "turnname", "+", "\"\\n\"", ")", "\n", "", "", "else", ":", "\n", "            ", "rank", "=", "rank", "+", "1", "\n", "ranking", "=", "ranking", "+", "(", "str", "(", "turn_num", ")", "+", "\" 0 \"", "+", "doc", "[", "\"_id\"", "]", "+", "\" \"", "+", "str", "(", "rank", ")", "+", "\" \"", "+", "scores", "[", "\n", "rank", "-", "1", "]", "+", "\" \"", "+", "turnname", "+", "\"\\n\"", ")", "\n", "", "", "return", "ranking", "\n", "\n"]], "home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.filereader": [[160, 182], ["open", "csv.reader", "open", "open.write", "open.close", "print", "q1.replace.replace", "q2.replace.replace", "q3.replace.replace", "IKT2020.searchQueryandRerank"], "function", ["home.repos.pwc.inspect_result.omkia_IKT2020.None.IKT2020.searchQueryandRerank"], ["", "def", "filereader", "(", "turnname", ",", "index", ")", ":", "\n", "    ", "with", "open", "(", "\"F:\\\\newest.csv\"", ",", "encoding", "=", "'utf-8'", ")", "as", "tsvfile", ":", "\n", "        ", "tsvreader", "=", "csv", ".", "reader", "(", "tsvfile", ",", "delimiter", "=", "\",\"", ")", "\n", "StopWords", "=", "[", "\" do \"", ",", "\" my \"", ",", "\" doing \"", ",", "\" Describe \"", ",", "\"Tell me about\"", "]", "\n", "ranks", "=", "\"\"", "\n", "for", "line", "in", "tsvreader", ":", "\n", "            ", "if", "line", "[", "0", "]", "==", "\"sep=\"", ":", "\n", "                ", "continue", "\n", "", "q1", "=", "line", "[", "1", "]", "\n", "for", "stop", "in", "StopWords", ":", "\n", "                ", "q1", "=", "q1", ".", "replace", "(", "stop", ",", "\" \"", ")", "\n", "", "q2", "=", "line", "[", "2", "]", "\n", "for", "stop", "in", "StopWords", ":", "\n", "                ", "q2", "=", "q2", ".", "replace", "(", "stop", ",", "\" \"", ")", "\n", "", "q3", "=", "line", "[", "3", "]", "\n", "for", "stop", "in", "StopWords", ":", "\n", "                ", "q3", "=", "q3", ".", "replace", "(", "stop", ",", "\" \"", ")", "\n", "", "print", "(", "q1", "+", "q2", "+", "q3", ")", "\n", "ranks", "=", "ranks", "+", "searchQueryandRerank", "(", "q1", ",", "q2", ",", "q3", ",", "line", "[", "4", "]", ",", "line", "[", "0", "]", ",", "turnname", ",", "index", ")", "\n", "", "resultFile", "=", "open", "(", "turnname", "+", "\".txt\"", ",", "\"w\"", ")", "# write mode", "\n", "resultFile", ".", "write", "(", "ranks", ")", "# resultFile", "\n", "resultFile", ".", "close", "(", ")", "\n", "\n"]]}