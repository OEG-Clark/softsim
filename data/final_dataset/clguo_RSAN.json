{"home.repos.pwc.inspect_result.clguo_RSAN.None.RSAN.RSANet": [[6, 48], ["Input", "layer.residual_drop_block", "layer.RSAB", "layer.residual_drop_block", "layer.RSAB", "layer.residual_drop_block", "layer.RSAB", "layer.residual_drop_block", "layer.RSAB", "concatenate", "layer.residual_drop_block", "layer.RSAB", "concatenate", "layer.residual_drop_block", "layer.RSAB", "concatenate", "layer.residual_drop_block", "layer.RSAB", "Model", "Model.compile", "MaxPooling2D", "MaxPooling2D", "MaxPooling2D", "Conv2DTranspose", "Conv2DTranspose", "Conv2DTranspose", "Conv2D", "Activation", "Adam"], "function", ["home.repos.pwc.inspect_result.clguo_RSAN.None.layer.residual_drop_block", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.RSAB", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.residual_drop_block", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.RSAB", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.residual_drop_block", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.RSAB", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.residual_drop_block", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.RSAB", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.residual_drop_block", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.RSAB", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.residual_drop_block", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.RSAB", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.residual_drop_block", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.RSAB"], ["def", "RSANet", "(", "input_size", "=", "(", "512", ",", "512", ",", "3", ")", ",", "start_neurons", "=", "16", ",", "keep_prob", "=", "0.9", ",", "block_size", "=", "7", ",", "lr", "=", "1e-3", ")", ":", "\n", "    ", "inputs", "=", "Input", "(", "input_size", ")", "\n", "conv1", "=", "residual_drop_block", "(", "inputs", ",", "start_neurons", "*", "1", ",", "False", ",", "block_size", "=", "block_size", ",", "keep_prob", "=", "keep_prob", ")", "\n", "conv1", "=", "RSAB", "(", "conv1", ",", "keep_prob", "=", "keep_prob", ",", "block_size", "=", "block_size", ")", "\n", "pool1", "=", "MaxPooling2D", "(", "(", "2", ",", "2", ")", ")", "(", "conv1", ")", "\n", "\n", "conv2", "=", "residual_drop_block", "(", "pool1", ",", "start_neurons", "*", "2", ",", "False", ",", "block_size", "=", "block_size", ",", "keep_prob", "=", "keep_prob", ")", "\n", "conv2", "=", "RSAB", "(", "conv2", ",", "keep_prob", "=", "keep_prob", ",", "block_size", "=", "block_size", ")", "\n", "pool2", "=", "MaxPooling2D", "(", "(", "2", ",", "2", ")", ")", "(", "conv2", ")", "\n", "\n", "conv3", "=", "residual_drop_block", "(", "pool2", ",", "start_neurons", "*", "4", ",", "False", ",", "block_size", "=", "block_size", ",", "keep_prob", "=", "keep_prob", ")", "\n", "conv3", "=", "RSAB", "(", "conv3", ",", "keep_prob", "=", "keep_prob", ",", "block_size", "=", "block_size", ")", "\n", "pool3", "=", "MaxPooling2D", "(", "(", "2", ",", "2", ")", ")", "(", "conv3", ")", "\n", "\n", "convm", "=", "residual_drop_block", "(", "pool3", ",", "start_neurons", "*", "8", ",", "False", ",", "block_size", "=", "block_size", ",", "keep_prob", "=", "keep_prob", ")", "\n", "convm", "=", "RSAB", "(", "convm", ",", "keep_prob", "=", "keep_prob", ",", "block_size", "=", "block_size", ")", "\n", "\n", "deconv3", "=", "Conv2DTranspose", "(", "start_neurons", "*", "4", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "padding", "=", "\"same\"", ")", "(", "convm", ")", "\n", "uconv3", "=", "concatenate", "(", "[", "deconv3", ",", "conv3", "]", ")", "\n", "\n", "uconv3", "=", "residual_drop_block", "(", "uconv3", ",", "start_neurons", "*", "4", ",", "False", ",", "block_size", "=", "block_size", ",", "keep_prob", "=", "keep_prob", ")", "\n", "uconv3", "=", "RSAB", "(", "uconv3", ",", "keep_prob", "=", "keep_prob", ",", "block_size", "=", "block_size", ")", "\n", "\n", "deconv2", "=", "Conv2DTranspose", "(", "start_neurons", "*", "2", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "padding", "=", "\"same\"", ")", "(", "uconv3", ")", "\n", "uconv2", "=", "concatenate", "(", "[", "deconv2", ",", "conv2", "]", ")", "\n", "\n", "uconv2", "=", "residual_drop_block", "(", "uconv2", ",", "start_neurons", "*", "2", ",", "False", ",", "block_size", "=", "block_size", ",", "keep_prob", "=", "keep_prob", ")", "\n", "uconv2", "=", "RSAB", "(", "uconv2", ",", "keep_prob", "=", "keep_prob", ",", "block_size", "=", "block_size", ")", "\n", "\n", "deconv1", "=", "Conv2DTranspose", "(", "start_neurons", "*", "1", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "padding", "=", "\"same\"", ")", "(", "uconv2", ")", "\n", "uconv1", "=", "concatenate", "(", "[", "deconv1", ",", "conv1", "]", ")", "\n", "\n", "uconv1", "=", "residual_drop_block", "(", "uconv1", ",", "start_neurons", "*", "1", ",", "False", ",", "block_size", "=", "block_size", ",", "keep_prob", "=", "keep_prob", ")", "\n", "uconv1", "=", "RSAB", "(", "uconv1", ",", "keep_prob", "=", "keep_prob", ",", "block_size", "=", "block_size", ")", "\n", "\n", "output_layer_noActi", "=", "Conv2D", "(", "1", ",", "(", "1", ",", "1", ")", ",", "padding", "=", "\"same\"", ",", "activation", "=", "None", ")", "(", "uconv1", ")", "\n", "output_layer", "=", "Activation", "(", "'sigmoid'", ")", "(", "output_layer_noActi", ")", "\n", "\n", "model", "=", "Model", "(", "input", "=", "inputs", ",", "output", "=", "output_layer", ")", "\n", "\n", "model", ".", "compile", "(", "optimizer", "=", "Adam", "(", "lr", "=", "lr", ")", ",", "loss", "=", "'binary_crossentropy'", ",", "metrics", "=", "[", "'accuracy'", "]", ")", "\n", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.attention_module.spatial_attention": [[5, 34], ["keras.layers.multiply", "keras.backend.image_data_format", "keras.layers.Lambda", "keras.layers.Lambda", "keras.layers.Concatenate", "keras.layers.Conv2D", "keras.backend.image_data_format", "keras.layers.Permute", "keras.layers.Permute", "keras.backend.mean", "keras.backend.max"], "function", ["None"], ["def", "spatial_attention", "(", "input_feature", ")", ":", "\n", "    ", "kernel_size", "=", "7", "\n", "\n", "if", "K", ".", "image_data_format", "(", ")", "==", "\"channels_first\"", ":", "\n", "        ", "channel", "=", "input_feature", ".", "_keras_shape", "[", "1", "]", "\n", "cbam_feature", "=", "Permute", "(", "(", "2", ",", "3", ",", "1", ")", ")", "(", "input_feature", ")", "\n", "", "else", ":", "\n", "        ", "channel", "=", "input_feature", ".", "_keras_shape", "[", "-", "1", "]", "\n", "cbam_feature", "=", "input_feature", "\n", "\n", "", "avg_pool", "=", "Lambda", "(", "lambda", "x", ":", "K", ".", "mean", "(", "x", ",", "axis", "=", "3", ",", "keepdims", "=", "True", ")", ")", "(", "cbam_feature", ")", "\n", "assert", "avg_pool", ".", "_keras_shape", "[", "-", "1", "]", "==", "1", "\n", "max_pool", "=", "Lambda", "(", "lambda", "x", ":", "K", ".", "max", "(", "x", ",", "axis", "=", "3", ",", "keepdims", "=", "True", ")", ")", "(", "cbam_feature", ")", "\n", "assert", "max_pool", ".", "_keras_shape", "[", "-", "1", "]", "==", "1", "\n", "concat", "=", "Concatenate", "(", "axis", "=", "3", ")", "(", "[", "avg_pool", ",", "max_pool", "]", ")", "\n", "assert", "concat", ".", "_keras_shape", "[", "-", "1", "]", "==", "2", "\n", "cbam_feature", "=", "Conv2D", "(", "filters", "=", "1", ",", "\n", "kernel_size", "=", "kernel_size", ",", "\n", "strides", "=", "1", ",", "\n", "padding", "=", "'same'", ",", "\n", "activation", "=", "'sigmoid'", ",", "\n", "kernel_initializer", "=", "'he_normal'", ",", "\n", "use_bias", "=", "False", ")", "(", "concat", ")", "\n", "assert", "cbam_feature", ".", "_keras_shape", "[", "-", "1", "]", "==", "1", "\n", "\n", "if", "K", ".", "image_data_format", "(", ")", "==", "\"channels_first\"", ":", "\n", "        ", "cbam_feature", "=", "Permute", "(", "(", "3", ",", "1", ",", "2", ")", ")", "(", "cbam_feature", ")", "\n", "\n", "", "return", "multiply", "(", "[", "input_feature", ",", "cbam_feature", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.BatchActivate": [[5, 10], ["BatchNormalization", "Activation"], "function", ["None"], ["def", "BatchActivate", "(", "x", ")", ":", "\n", "    ", "x", "=", "BatchNormalization", "(", "epsilon", "=", "2e-05", ",", "axis", "=", "3", ",", "momentum", "=", "0.9", ",", "weights", "=", "None", ",", "\n", "beta_initializer", "=", "'zero'", ",", "gamma_initializer", "=", "'one'", ")", "(", "x", ")", "\n", "x", "=", "Activation", "(", "'relu'", ")", "(", "x", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.convolution_block_dropblock": [[12, 18], ["Conv2D", "Dropblock.DropBlock2D", "layer.BatchActivate"], "function", ["home.repos.pwc.inspect_result.clguo_RSAN.None.layer.BatchActivate"], ["", "def", "convolution_block_dropblock", "(", "x", ",", "filters", ",", "size", ",", "strides", "=", "(", "1", ",", "1", ")", ",", "padding", "=", "'same'", ",", "activation", "=", "True", ",", "keep_prob", "=", "0.9", ",", "block_size", "=", "7", ")", ":", "\n", "    ", "x", "=", "Conv2D", "(", "filters", ",", "size", ",", "strides", "=", "strides", ",", "padding", "=", "padding", ")", "(", "x", ")", "\n", "x", "=", "DropBlock2D", "(", "block_size", "=", "block_size", ",", "keep_prob", "=", "keep_prob", ")", "(", "x", ")", "\n", "if", "activation", ":", "\n", "        ", "x", "=", "BatchActivate", "(", "x", ")", "\n", "", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.residual_drop_block": [[19, 29], ["layer.BatchActivate", "layer.convolution_block_dropblock", "layer.convolution_block_dropblock", "Add", "layer.BatchActivate", "blockInput.get_shape().as_list", "BatchActivate.get_shape().as_list", "Conv2D", "blockInput.get_shape", "BatchActivate.get_shape"], "function", ["home.repos.pwc.inspect_result.clguo_RSAN.None.layer.BatchActivate", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.convolution_block_dropblock", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.convolution_block_dropblock", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.BatchActivate"], ["", "def", "residual_drop_block", "(", "blockInput", ",", "num_filters", "=", "16", ",", "batch_activate", "=", "False", ",", "keep_prob", "=", "0.9", ",", "block_size", "=", "7", ")", ":", "\n", "    ", "x", "=", "BatchActivate", "(", "blockInput", ")", "\n", "x", "=", "convolution_block_dropblock", "(", "x", ",", "num_filters", ",", "(", "3", ",", "3", ")", ",", "keep_prob", "=", "keep_prob", ",", "block_size", "=", "block_size", ")", "\n", "x", "=", "convolution_block_dropblock", "(", "x", ",", "num_filters", ",", "(", "3", ",", "3", ")", ",", "activation", "=", "False", ",", "keep_prob", "=", "keep_prob", ",", "block_size", "=", "block_size", ")", "\n", "if", "blockInput", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "-", "1", "]", "!=", "x", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "-", "1", "]", ":", "\n", "        ", "blockInput", "=", "Conv2D", "(", "num_filters", ",", "(", "1", ",", "1", ")", ",", "activation", "=", "None", ",", "padding", "=", "\"same\"", ")", "(", "blockInput", ")", "\n", "", "x", "=", "Add", "(", ")", "(", "[", "x", ",", "blockInput", "]", ")", "\n", "if", "batch_activate", ":", "\n", "        ", "x", "=", "BatchActivate", "(", "x", ")", "\n", "", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.RSAB": [[30, 39], ["layer.BatchActivate", "layer.convolution_block_dropblock", "layer.convolution_block_dropblock", "attention_module.spatial_attention", "add", "layer.BatchActivate", "input.get_shape().as_list", "input.get_shape"], "function", ["home.repos.pwc.inspect_result.clguo_RSAN.None.layer.BatchActivate", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.convolution_block_dropblock", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.convolution_block_dropblock", "home.repos.pwc.inspect_result.clguo_RSAN.None.attention_module.spatial_attention", "home.repos.pwc.inspect_result.clguo_RSAN.None.layer.BatchActivate"], ["", "def", "RSAB", "(", "input", ",", "block_size", "=", "7", ",", "keep_prob", "=", "0.9", ")", ":", "\n", "    ", "num_filters", "=", "input", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "-", "1", "]", "\n", "f", "=", "BatchActivate", "(", "input", ")", "\n", "f", "=", "convolution_block_dropblock", "(", "f", ",", "num_filters", ",", "(", "3", ",", "3", ")", ",", "keep_prob", "=", "keep_prob", ",", "block_size", "=", "block_size", ")", "\n", "f", "=", "convolution_block_dropblock", "(", "f", ",", "num_filters", ",", "(", "3", ",", "3", ")", ",", "activation", "=", "False", ",", "keep_prob", "=", "keep_prob", ",", "block_size", "=", "block_size", ")", "\n", "x", "=", "spatial_attention", "(", "f", ")", "\n", "result", "=", "add", "(", "[", "input", ",", "x", "]", ")", "\n", "result", "=", "BatchActivate", "(", "result", ")", "\n", "return", "result", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock1D.__init__": [[8, 28], ["super().__init__", "keras.normalize_data_format", "keras.normalize_data_format", "keras.engine.base_layer.InputSpec", "keras.engine.base_layer.InputSpec", "keras.engine.base_layer.InputSpec", "keras.engine.base_layer.InputSpec"], "methods", ["home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D.__init__"], ["def", "__init__", "(", "self", ",", "\n", "block_size", ",", "\n", "keep_prob", ",", "\n", "sync_channels", "=", "False", ",", "\n", "data_format", "=", "None", ",", "\n", "**", "kwargs", ")", ":", "\n", "        ", "\"\"\"Initialize the layer.\n        :param block_size: Size for each mask block.\n        :param keep_prob: Probability of keeping the original feature.\n        :param sync_channels: Whether to use the same dropout for all channels.\n        :param data_format: 'channels_first' or 'channels_last' (default).\n        :param kwargs: Arguments for parent class.\n        \"\"\"", "\n", "super", "(", "DropBlock1D", ",", "self", ")", ".", "__init__", "(", "**", "kwargs", ")", "\n", "self", ".", "block_size", "=", "block_size", "\n", "self", ".", "keep_prob", "=", "keep_prob", "\n", "self", ".", "sync_channels", "=", "sync_channels", "\n", "self", ".", "data_format", "=", "K", ".", "normalize_data_format", "(", "data_format", ")", "\n", "self", ".", "input_spec", "=", "keras", ".", "engine", ".", "base_layer", ".", "InputSpec", "(", "ndim", "=", "3", ")", "\n", "self", ".", "supports_masking", "=", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock1D.get_config": [[29, 36], ["super().get_config", "dict", "list", "list", "super().get_config.items", "config.items"], "methods", ["home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D.get_config"], ["", "def", "get_config", "(", "self", ")", ":", "\n", "        ", "config", "=", "{", "'block_size'", ":", "self", ".", "block_size", ",", "\n", "'keep_prob'", ":", "self", ".", "keep_prob", ",", "\n", "'sync_channels'", ":", "self", ".", "sync_channels", ",", "\n", "'data_format'", ":", "self", ".", "data_format", "}", "\n", "base_config", "=", "super", "(", "DropBlock1D", ",", "self", ")", ".", "get_config", "(", ")", "\n", "return", "dict", "(", "list", "(", "base_config", ".", "items", "(", ")", ")", "+", "list", "(", "config", ".", "items", "(", ")", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock1D.compute_mask": [[37, 39], ["None"], "methods", ["None"], ["", "def", "compute_mask", "(", "self", ",", "inputs", ",", "mask", "=", "None", ")", ":", "\n", "        ", "return", "mask", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock1D.compute_output_shape": [[40, 42], ["None"], "methods", ["None"], ["", "def", "compute_output_shape", "(", "self", ",", "input_shape", ")", ":", "\n", "        ", "return", "input_shape", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock1D._get_gamma": [[43, 48], ["keras.cast", "keras.cast", "keras.constant", "keras.constant", "keras.floatx", "keras.floatx", "keras.floatx", "keras.floatx"], "methods", ["None"], ["", "def", "_get_gamma", "(", "self", ",", "feature_dim", ")", ":", "\n", "        ", "\"\"\"Get the number of activation units to drop\"\"\"", "\n", "feature_dim", "=", "K", ".", "cast", "(", "feature_dim", ",", "K", ".", "floatx", "(", ")", ")", "\n", "block_size", "=", "K", ".", "constant", "(", "self", ".", "block_size", ",", "dtype", "=", "K", ".", "floatx", "(", ")", ")", "\n", "return", "(", "(", "1.0", "-", "self", ".", "keep_prob", ")", "/", "block_size", ")", "*", "(", "feature_dim", "/", "(", "feature_dim", "-", "block_size", "+", "1.0", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock1D._compute_valid_seed_region": [[49, 67], ["keras.arange", "keras.arange", "keras.switch", "keras.switch", "keras.expand_dims", "keras.expand_dims", "keras.all", "keras.all", "keras.ones", "keras.ones", "keras.zeros", "keras.zeros", "keras.expand_dims", "keras.expand_dims", "keras.stack", "keras.stack"], "methods", ["None"], ["", "def", "_compute_valid_seed_region", "(", "self", ",", "seq_length", ")", ":", "\n", "        ", "positions", "=", "K", ".", "arange", "(", "seq_length", ")", "\n", "half_block_size", "=", "self", ".", "block_size", "//", "2", "\n", "valid_seed_region", "=", "K", ".", "switch", "(", "\n", "K", ".", "all", "(", "\n", "K", ".", "stack", "(", "\n", "[", "\n", "positions", ">=", "half_block_size", ",", "\n", "positions", "<", "seq_length", "-", "half_block_size", ",", "\n", "]", ",", "\n", "axis", "=", "-", "1", ",", "\n", ")", ",", "\n", "axis", "=", "-", "1", ",", "\n", ")", ",", "\n", "K", ".", "ones", "(", "(", "seq_length", ",", ")", ")", ",", "\n", "K", ".", "zeros", "(", "(", "seq_length", ",", ")", ")", ",", "\n", ")", "\n", "return", "K", ".", "expand_dims", "(", "K", ".", "expand_dims", "(", "valid_seed_region", ",", "axis", "=", "0", ")", ",", "axis", "=", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock1D._compute_drop_mask": [[68, 79], ["keras.random_binomial", "keras.random_binomial", "Dropblock.DropBlock1D._compute_valid_seed_region", "keras.layers.MaxPool1D", "keras.layers.MaxPool1D", "keras.layers.MaxPool1D", "keras.layers.MaxPool1D", "Dropblock.DropBlock1D._get_gamma"], "methods", ["home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D._compute_valid_seed_region", "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D._get_gamma"], ["", "def", "_compute_drop_mask", "(", "self", ",", "shape", ")", ":", "\n", "        ", "seq_length", "=", "shape", "[", "1", "]", "\n", "mask", "=", "K", ".", "random_binomial", "(", "shape", ",", "p", "=", "self", ".", "_get_gamma", "(", "seq_length", ")", ")", "\n", "mask", "*=", "self", ".", "_compute_valid_seed_region", "(", "seq_length", ")", "\n", "mask", "=", "keras", ".", "layers", ".", "MaxPool1D", "(", "\n", "pool_size", "=", "self", ".", "block_size", ",", "\n", "padding", "=", "'same'", ",", "\n", "strides", "=", "1", ",", "\n", "data_format", "=", "'channels_last'", ",", "\n", ")", "(", "mask", ")", "\n", "return", "1.0", "-", "mask", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock1D.call": [[80, 98], ["keras.in_train_phase", "keras.in_train_phase", "keras.shape", "keras.shape", "keras.permute_dimensions", "keras.permute_dimensions", "Dropblock.DropBlock1D._compute_drop_mask", "Dropblock.DropBlock1D._compute_drop_mask", "keras.permute_dimensions", "keras.permute_dimensions", "keras.cast", "keras.cast", "keras.sum", "keras.sum", "keras.prod", "keras.prod", "keras.floatx", "keras.floatx"], "methods", ["home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D._compute_drop_mask", "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D._compute_drop_mask"], ["", "def", "call", "(", "self", ",", "inputs", ",", "training", "=", "None", ")", ":", "\n", "\n", "        ", "def", "dropped_inputs", "(", ")", ":", "\n", "            ", "outputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'channels_first'", ":", "\n", "                ", "outputs", "=", "K", ".", "permute_dimensions", "(", "outputs", ",", "[", "0", ",", "2", ",", "1", "]", ")", "\n", "", "shape", "=", "K", ".", "shape", "(", "outputs", ")", "\n", "if", "self", ".", "sync_channels", ":", "\n", "                ", "mask", "=", "self", ".", "_compute_drop_mask", "(", "[", "shape", "[", "0", "]", ",", "shape", "[", "1", "]", ",", "1", "]", ")", "\n", "", "else", ":", "\n", "                ", "mask", "=", "self", ".", "_compute_drop_mask", "(", "shape", ")", "\n", "", "outputs", "=", "outputs", "*", "mask", "*", "(", "K", ".", "cast", "(", "K", ".", "prod", "(", "shape", ")", ",", "dtype", "=", "K", ".", "floatx", "(", ")", ")", "/", "K", ".", "sum", "(", "mask", ")", ")", "\n", "if", "self", ".", "data_format", "==", "'channels_first'", ":", "\n", "                ", "outputs", "=", "K", ".", "permute_dimensions", "(", "outputs", ",", "[", "0", ",", "2", ",", "1", "]", ")", "\n", "", "return", "outputs", "\n", "\n", "", "return", "K", ".", "in_train_phase", "(", "dropped_inputs", ",", "inputs", ",", "training", "=", "training", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D.__init__": [[103, 123], ["super().__init__", "keras.normalize_data_format", "keras.normalize_data_format", "keras.engine.base_layer.InputSpec", "keras.engine.base_layer.InputSpec", "keras.engine.base_layer.InputSpec", "keras.engine.base_layer.InputSpec"], "methods", ["home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D.__init__"], ["def", "__init__", "(", "self", ",", "\n", "block_size", ",", "\n", "keep_prob", ",", "\n", "sync_channels", "=", "False", ",", "\n", "data_format", "=", "None", ",", "\n", "**", "kwargs", ")", ":", "\n", "        ", "\"\"\"Initialize the layer.\n        :param block_size: Size for each mask block.\n        :param keep_prob: Probability of keeping the original feature.\n        :param sync_channels: Whether to use the same dropout for all channels.\n        :param data_format: 'channels_first' or 'channels_last' (default).\n        :param kwargs: Arguments for parent class.\n        \"\"\"", "\n", "super", "(", "DropBlock2D", ",", "self", ")", ".", "__init__", "(", "**", "kwargs", ")", "\n", "self", ".", "block_size", "=", "block_size", "\n", "self", ".", "keep_prob", "=", "keep_prob", "\n", "self", ".", "sync_channels", "=", "sync_channels", "\n", "self", ".", "data_format", "=", "K", ".", "normalize_data_format", "(", "data_format", ")", "\n", "self", ".", "input_spec", "=", "keras", ".", "engine", ".", "base_layer", ".", "InputSpec", "(", "ndim", "=", "4", ")", "\n", "self", ".", "supports_masking", "=", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D.get_config": [[124, 131], ["super().get_config", "dict", "list", "list", "super().get_config.items", "config.items"], "methods", ["home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D.get_config"], ["", "def", "get_config", "(", "self", ")", ":", "\n", "        ", "config", "=", "{", "'block_size'", ":", "self", ".", "block_size", ",", "\n", "'keep_prob'", ":", "self", ".", "keep_prob", ",", "\n", "'sync_channels'", ":", "self", ".", "sync_channels", ",", "\n", "'data_format'", ":", "self", ".", "data_format", "}", "\n", "base_config", "=", "super", "(", "DropBlock2D", ",", "self", ")", ".", "get_config", "(", ")", "\n", "return", "dict", "(", "list", "(", "base_config", ".", "items", "(", ")", ")", "+", "list", "(", "config", ".", "items", "(", ")", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D.compute_mask": [[132, 134], ["None"], "methods", ["None"], ["", "def", "compute_mask", "(", "self", ",", "inputs", ",", "mask", "=", "None", ")", ":", "\n", "        ", "return", "mask", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D.compute_output_shape": [[135, 137], ["None"], "methods", ["None"], ["", "def", "compute_output_shape", "(", "self", ",", "input_shape", ")", ":", "\n", "        ", "return", "input_shape", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D._get_gamma": [[138, 144], ["keras.constant", "keras.constant", "keras.cast", "keras.cast", "keras.cast", "keras.cast", "keras.floatx", "keras.floatx", "keras.floatx", "keras.floatx", "keras.floatx", "keras.floatx"], "methods", ["None"], ["", "def", "_get_gamma", "(", "self", ",", "height", ",", "width", ")", ":", "\n", "        ", "\"\"\"Get the number of activation units to drop\"\"\"", "\n", "height", ",", "width", "=", "K", ".", "cast", "(", "height", ",", "K", ".", "floatx", "(", ")", ")", ",", "K", ".", "cast", "(", "width", ",", "K", ".", "floatx", "(", ")", ")", "\n", "block_size", "=", "K", ".", "constant", "(", "self", ".", "block_size", ",", "dtype", "=", "K", ".", "floatx", "(", ")", ")", "\n", "return", "(", "(", "1.0", "-", "self", ".", "keep_prob", ")", "/", "(", "block_size", "**", "2", ")", ")", "*", "(", "height", "*", "width", "/", "(", "(", "height", "-", "block_size", "+", "1.0", ")", "*", "(", "width", "-", "block_size", "+", "1.0", ")", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D._compute_valid_seed_region": [[145, 168], ["keras.concatenate", "keras.concatenate", "keras.switch", "keras.switch", "keras.expand_dims", "keras.expand_dims", "keras.all", "keras.all", "keras.ones", "keras.ones", "keras.zeros", "keras.zeros", "keras.expand_dims", "keras.expand_dims", "keras.expand_dims", "keras.expand_dims", "keras.expand_dims", "keras.expand_dims", "keras.stack", "keras.stack", "keras.tile", "keras.tile", "keras.tile", "keras.tile", "keras.expand_dims", "keras.expand_dims", "keras.expand_dims", "keras.expand_dims", "keras.arange", "keras.arange", "keras.arange", "keras.arange"], "methods", ["None"], ["", "def", "_compute_valid_seed_region", "(", "self", ",", "height", ",", "width", ")", ":", "\n", "        ", "positions", "=", "K", ".", "concatenate", "(", "[", "\n", "K", ".", "expand_dims", "(", "K", ".", "tile", "(", "K", ".", "expand_dims", "(", "K", ".", "arange", "(", "height", ")", ",", "axis", "=", "1", ")", ",", "[", "1", ",", "width", "]", ")", ",", "axis", "=", "-", "1", ")", ",", "\n", "K", ".", "expand_dims", "(", "K", ".", "tile", "(", "K", ".", "expand_dims", "(", "K", ".", "arange", "(", "width", ")", ",", "axis", "=", "0", ")", ",", "[", "height", ",", "1", "]", ")", ",", "axis", "=", "-", "1", ")", ",", "\n", "]", ",", "axis", "=", "-", "1", ")", "\n", "half_block_size", "=", "self", ".", "block_size", "//", "2", "\n", "valid_seed_region", "=", "K", ".", "switch", "(", "\n", "K", ".", "all", "(", "\n", "K", ".", "stack", "(", "\n", "[", "\n", "positions", "[", ":", ",", ":", ",", "0", "]", ">=", "half_block_size", ",", "\n", "positions", "[", ":", ",", ":", ",", "1", "]", ">=", "half_block_size", ",", "\n", "positions", "[", ":", ",", ":", ",", "0", "]", "<", "height", "-", "half_block_size", ",", "\n", "positions", "[", ":", ",", ":", ",", "1", "]", "<", "width", "-", "half_block_size", ",", "\n", "]", ",", "\n", "axis", "=", "-", "1", ",", "\n", ")", ",", "\n", "axis", "=", "-", "1", ",", "\n", ")", ",", "\n", "K", ".", "ones", "(", "(", "height", ",", "width", ")", ")", ",", "\n", "K", ".", "zeros", "(", "(", "height", ",", "width", ")", ")", ",", "\n", ")", "\n", "return", "K", ".", "expand_dims", "(", "K", ".", "expand_dims", "(", "valid_seed_region", ",", "axis", "=", "0", ")", ",", "axis", "=", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D._compute_drop_mask": [[169, 180], ["keras.random_binomial", "keras.random_binomial", "Dropblock.DropBlock2D._compute_valid_seed_region", "keras.layers.MaxPool2D", "keras.layers.MaxPool2D", "keras.layers.MaxPool2D", "keras.layers.MaxPool2D", "Dropblock.DropBlock2D._get_gamma"], "methods", ["home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D._compute_valid_seed_region", "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D._get_gamma"], ["", "def", "_compute_drop_mask", "(", "self", ",", "shape", ")", ":", "\n", "        ", "height", ",", "width", "=", "shape", "[", "1", "]", ",", "shape", "[", "2", "]", "\n", "mask", "=", "K", ".", "random_binomial", "(", "shape", ",", "p", "=", "self", ".", "_get_gamma", "(", "height", ",", "width", ")", ")", "\n", "mask", "*=", "self", ".", "_compute_valid_seed_region", "(", "height", ",", "width", ")", "\n", "mask", "=", "keras", ".", "layers", ".", "MaxPool2D", "(", "\n", "pool_size", "=", "(", "self", ".", "block_size", ",", "self", ".", "block_size", ")", ",", "\n", "padding", "=", "'same'", ",", "\n", "strides", "=", "1", ",", "\n", "data_format", "=", "'channels_last'", ",", "\n", ")", "(", "mask", ")", "\n", "return", "1.0", "-", "mask", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D.call": [[181, 199], ["keras.in_train_phase", "keras.in_train_phase", "keras.shape", "keras.shape", "keras.permute_dimensions", "keras.permute_dimensions", "Dropblock.DropBlock2D._compute_drop_mask", "Dropblock.DropBlock2D._compute_drop_mask", "keras.permute_dimensions", "keras.permute_dimensions", "keras.cast", "keras.cast", "keras.sum", "keras.sum", "keras.prod", "keras.prod", "keras.floatx", "keras.floatx"], "methods", ["home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D._compute_drop_mask", "home.repos.pwc.inspect_result.clguo_RSAN.None.Dropblock.DropBlock2D._compute_drop_mask"], ["", "def", "call", "(", "self", ",", "inputs", ",", "training", "=", "None", ")", ":", "\n", "\n", "        ", "def", "dropped_inputs", "(", ")", ":", "\n", "            ", "outputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'channels_first'", ":", "\n", "                ", "outputs", "=", "K", ".", "permute_dimensions", "(", "outputs", ",", "[", "0", ",", "2", ",", "3", ",", "1", "]", ")", "\n", "", "shape", "=", "K", ".", "shape", "(", "outputs", ")", "\n", "if", "self", ".", "sync_channels", ":", "\n", "                ", "mask", "=", "self", ".", "_compute_drop_mask", "(", "[", "shape", "[", "0", "]", ",", "shape", "[", "1", "]", ",", "shape", "[", "2", "]", ",", "1", "]", ")", "\n", "", "else", ":", "\n", "                ", "mask", "=", "self", ".", "_compute_drop_mask", "(", "shape", ")", "\n", "", "outputs", "=", "outputs", "*", "mask", "*", "(", "K", ".", "cast", "(", "K", ".", "prod", "(", "shape", ")", ",", "dtype", "=", "K", ".", "floatx", "(", ")", ")", "/", "K", ".", "sum", "(", "mask", ")", ")", "\n", "if", "self", ".", "data_format", "==", "'channels_first'", ":", "\n", "                ", "outputs", "=", "K", ".", "permute_dimensions", "(", "outputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", "\n", "", "return", "outputs", "\n", "\n", "", "return", "K", ".", "in_train_phase", "(", "dropped_inputs", ",", "inputs", ",", "training", "=", "training", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.clguo_RSAN.None.util.crop_to_shape": [[7, 39], ["None"], "function", ["None"], ["def", "crop_to_shape", "(", "data", ",", "shape", ")", ":", "\n", "    ", "\"\"\"\n    Crops the array to the given image shape by removing the border (expects a tensor of shape [batches, nx, ny, channels].\n\n    :param data: the array to crop\n    :param shape: the target shape\n    \"\"\"", "\n", "#", "\n", "\n", "offset0", "=", "(", "data", ".", "shape", "[", "1", "]", "-", "shape", "[", "1", "]", ")", "//", "2", "\n", "offset1", "=", "(", "data", ".", "shape", "[", "2", "]", "-", "shape", "[", "2", "]", ")", "//", "2", "\n", "if", "offset0", "==", "0", ":", "\n", "        ", "if", "data", ".", "shape", "[", "1", "]", "%", "2", "==", "1", "or", "shape", "[", "1", "]", "%", "2", "==", "1", ":", "\n", "            ", "return", "data", "[", ":", ",", "offset0", ":", "data", ".", "shape", "[", "1", "]", ",", "offset1", ":", "(", "-", "offset1", ")", "]", "\n", "", "elif", "data", ".", "shape", "[", "2", "]", "%", "2", "==", "1", "or", "shape", "[", "2", "]", "%", "2", "==", "1", ":", "\n", "            ", "return", "data", "[", ":", ",", "offset0", ":", "data", ".", "shape", "[", "1", "]", ",", "offset1", ":", "(", "-", "offset1", "-", "1", ")", "]", "\n", "", "else", ":", "\n", "            ", "return", "data", "[", ":", ",", "offset0", ":", "data", ".", "shape", "[", "1", "]", ",", "offset1", ":", "(", "-", "offset1", ")", "]", "\n", "", "", "elif", "offset1", "==", "0", ":", "\n", "        ", "if", "data", ".", "shape", "[", "1", "]", "%", "2", "==", "1", "or", "shape", "[", "1", "]", "%", "2", "==", "1", ":", "\n", "            ", "return", "data", "[", ":", ",", "offset0", ":", "(", "-", "offset0", "-", "1", ")", ",", "offset1", ":", "data", ".", "shape", "[", "2", "]", "]", "\n", "", "elif", "data", ".", "shape", "[", "2", "]", "%", "2", "==", "1", "or", "shape", "[", "2", "]", "%", "2", "==", "1", ":", "\n", "            ", "return", "data", "[", ":", ",", "offset0", ":", "-", "offset0", ",", "offset1", ":", "data", ".", "shape", "[", "2", "]", "]", "\n", "", "else", ":", "\n", "            ", "return", "data", "[", ":", ",", "offset0", ":", "-", "offset0", ",", "offset1", ":", "data", ".", "shape", "[", "2", "]", "]", "\n", "", "", "else", ":", "\n", "        ", "if", "data", ".", "shape", "[", "1", "]", "%", "2", "==", "1", "or", "shape", "[", "1", "]", "%", "2", "==", "1", ":", "\n", "            ", "return", "data", "[", ":", ",", "offset0", ":", "(", "-", "offset0", "-", "1", ")", ",", "offset1", ":", "(", "-", "offset1", ")", "]", "\n", "", "elif", "data", ".", "shape", "[", "2", "]", "%", "2", "==", "1", "or", "shape", "[", "2", "]", "%", "2", "==", "1", ":", "\n", "            ", "return", "data", "[", ":", ",", "offset0", ":", "-", "offset0", ",", "offset1", ":", "(", "-", "offset1", "-", "1", ")", "]", "\n", "", "else", ":", "\n", "            ", "return", "data", "[", ":", ",", "offset0", ":", "-", "offset0", ",", "offset1", ":", "(", "-", "offset1", ")", "]", "", "", "", "", ""]]}