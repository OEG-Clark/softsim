{"home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_model.RW_generator": [[7, 20], ["inpaint_model.SINet", "inpaint_model.GPNet"], "function", ["home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_model.SINet", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_model.GPNet"], ["def", "RW_generator", "(", "x", ",", "mask", ",", "padding", "=", "'SAME'", ",", "name", "=", "'inpaint_net'", ",", "reuse", "=", "False", ")", ":", "\n", "    ", "'''\n    Region-wise generator\n    Args:\n            x: incomplete image\n            mask: mask region {0,1}\n    returns:\n            predicted image\n    '''", "\n", "x1", "=", "SINet", "(", "x", ",", "mask", ",", "reuse", "=", "reuse", ")", "\n", "x_combine", "=", "x", "*", "mask", "+", "x1", "*", "(", "1", "-", "mask", ")", "\n", "x2", "=", "GPNet", "(", "x_combine", ",", "mask", ",", "reuse", "=", "reuse", ")", "\n", "return", "x1", ",", "x2", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_model.SINet": [[21, 70], ["tensorflow.concat", "tensorflow.ones_like", "tensorflow.variable_scope", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "region_conv.region_deconv", "region_conv.region_conv", "region_conv.region_deconv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "tensorflow.clip_by_value", "tensorflow.concat", "tensorflow.concat", "tensorflow.concat", "tensorflow.concat", "tensorflow.concat"], "function", ["home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.region_conv.region_deconv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.region_conv.region_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.region_conv.region_deconv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv"], ["", "def", "SINet", "(", "x", ",", "mask", ",", "padding", "=", "'SAME'", ",", "name", "=", "'inpaint_net'", ",", "reuse", "=", "False", ")", ":", "\n", "    ", "'''\n    Semantic inferring network\n    Args:\n            x: incomplete image\n            mask: mask region {0,1}\n    returns:\n            image predicted by semantic inferring network\n    '''", "\n", "xin", "=", "x", ";", "\n", "mask_in", "=", "mask", "\n", "cnum", "=", "32", "\n", "ones_x", "=", "tf", ".", "ones_like", "(", "x", ")", "[", ":", ",", ":", ",", ":", ",", "0", ":", "1", "]", "#\u4e00\u5c42", "\n", "x", "=", "tf", ".", "concat", "(", "[", "x", ",", "mask", "]", ",", "axis", "=", "3", ")", "#\u62fc\u63a5", "\n", "with", "tf", ".", "variable_scope", "(", "name", ",", "reuse", "=", "reuse", ")", ":", "\n", "            ", "x1", "=", "standard_conv", "(", "x", ",", "mask", ",", "cnum", ",", "5", ",", "1", ",", "name", "=", "'conv1'", ")", "\n", "x2", "=", "standard_conv", "(", "x1", ",", "mask", ",", "2", "*", "cnum", ",", "3", ",", "2", ",", "name", "=", "'conv2_downsample'", ")", "\n", "x3", "=", "standard_conv", "(", "x2", ",", "mask", ",", "2", "*", "cnum", ",", "3", ",", "1", ",", "name", "=", "'conv3'", ")", "\n", "x4", "=", "standard_conv", "(", "x3", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "2", ",", "name", "=", "'conv4_downsample'", ")", "\n", "x5", "=", "standard_conv", "(", "x4", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "1", ",", "name", "=", "'conv5'", ")", "\n", "x6", "=", "standard_conv", "(", "x5", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "1", ",", "name", "=", "'conv6'", ")", "\n", "\n", "#dilated conv", "\n", "x7", "=", "standard_conv", "(", "x6", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "rate", "=", "2", ",", "name", "=", "'conv7_atrous'", ")", "\n", "x8", "=", "standard_conv", "(", "x7", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "rate", "=", "4", ",", "name", "=", "'conv8_atrous'", ")", "\n", "x9", "=", "standard_conv", "(", "x8", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "rate", "=", "8", ",", "name", "=", "'conv9_atrous'", ")", "\n", "x10", "=", "standard_conv", "(", "x9", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "rate", "=", "16", ",", "name", "=", "'conv10_atrous'", ")", "\n", "\n", "\n", "\n", "x11", "=", "standard_conv", "(", "tf", ".", "concat", "(", "[", "x10", ",", "x6", "]", ",", "axis", "=", "-", "1", ")", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "1", ",", "name", "=", "'conv11'", ")", "\n", "x12", "=", "standard_conv", "(", "tf", ".", "concat", "(", "[", "x11", ",", "x5", "]", ",", "axis", "=", "-", "1", ")", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "1", ",", "name", "=", "'conv12'", ")", "\n", "\n", "x_complete", ",", "x_missing", "=", "tf", ".", "concat", "(", "[", "x12", ",", "x4", "]", ",", "axis", "=", "-", "1", ")", ",", "x12", "\n", "x13", "=", "region_deconv", "(", "x_complete", ",", "x_missing", ",", "mask", ",", "name", "=", "'com_13'", ")", "\n", "\n", "x_complete", ",", "x_missing", "=", "tf", ".", "concat", "(", "[", "x13", ",", "x3", "]", ",", "axis", "=", "-", "1", ")", ",", "x13", "\n", "x14", "=", "region_conv", "(", "x_complete", ",", "x_missing", ",", "mask", ",", "name", "=", "'com_14'", ")", "\n", "\n", "x_complete", ",", "x_missing", "=", "tf", ".", "concat", "(", "[", "x14", ",", "x2", "]", ",", "axis", "=", "-", "1", ")", ",", "x14", "\n", "x15", "=", "region_deconv", "(", "x_complete", ",", "x_missing", ",", "mask", ",", "name", "=", "'com_15'", ")", "\n", "\n", "x16", "=", "standard_conv", "(", "x15", ",", "mask", ",", "cnum", ",", "3", ",", "1", ",", "name", "=", "'conv16'", ")", "\n", "\n", "x17", "=", "standard_conv", "(", "x16", ",", "mask", ",", "cnum", "//", "2", ",", "3", ",", "1", ",", "name", "=", "'conv17'", ")", "\n", "x18", "=", "standard_conv", "(", "x17", ",", "mask", ",", "3", ",", "3", ",", "1", ",", "name", "=", "'conv18'", ")", "\n", "x18", "=", "tf", ".", "clip_by_value", "(", "x18", ",", "-", "1.", ",", "1.", ")", "\n", "\n", "return", "x18", "\n", "", "", "def", "GPNet", "(", "x", ",", "mask", ",", "padding", "=", "'SAME'", ",", "name", "=", "'inpaint_net_1'", ",", "reuse", "=", "False", ")", ":", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_model.GPNet": [[70, 110], ["tensorflow.concat", "tensorflow.variable_scope", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "inpaint_ops.standard_dconv", "inpaint_ops.standard_conv", "inpaint_ops.standard_dconv", "inpaint_ops.standard_conv", "inpaint_ops.standard_conv", "tensorflow.clip_by_value", "tensorflow.concat", "tensorflow.concat", "tensorflow.concat", "tensorflow.concat", "tensorflow.concat", "tensorflow.concat"], "function", ["home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_dconv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_dconv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv"], ["", "", "def", "GPNet", "(", "x", ",", "mask", ",", "padding", "=", "'SAME'", ",", "name", "=", "'inpaint_net_1'", ",", "reuse", "=", "False", ")", ":", "\n", "    ", "'''\n    Global perceiving network\n    Args:\n            x: incomplete image\n            mask: mask region {0,1}\n    returns:\n            image predicted by global perceiving network\n    '''", "\n", "xin", "=", "x", ";", "\n", "mask_in", "=", "mask", "\n", "cnum", "=", "32", "\n", "x", "=", "tf", ".", "concat", "(", "[", "x", ",", "mask", "]", ",", "axis", "=", "3", ")", "#concat", "\n", "with", "tf", ".", "variable_scope", "(", "name", ",", "reuse", "=", "reuse", ")", ":", "\n", "            ", "x1", "=", "standard_conv", "(", "x", ",", "mask", ",", "cnum", ",", "5", ",", "1", ",", "name", "=", "'conv1'", ")", "\n", "x2", "=", "standard_conv", "(", "x1", ",", "mask", ",", "2", "*", "cnum", ",", "3", ",", "2", ",", "name", "=", "'conv2_downsample'", ")", "\n", "x3", "=", "standard_conv", "(", "x2", ",", "mask", ",", "2", "*", "cnum", ",", "3", ",", "1", ",", "name", "=", "'conv3'", ")", "\n", "x4", "=", "standard_conv", "(", "x3", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "2", ",", "name", "=", "'conv4_downsample'", ")", "\n", "x5", "=", "standard_conv", "(", "x4", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "1", ",", "name", "=", "'conv5'", ")", "\n", "x6", "=", "standard_conv", "(", "x5", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "1", ",", "name", "=", "'conv6'", ")", "\n", "\n", "#dilated conv", "\n", "x7", "=", "standard_conv", "(", "x6", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "rate", "=", "2", ",", "name", "=", "'conv7_atrous'", ")", "\n", "x8", "=", "standard_conv", "(", "x7", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "rate", "=", "4", ",", "name", "=", "'conv8_atrous'", ")", "\n", "x9", "=", "standard_conv", "(", "x8", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "rate", "=", "8", ",", "name", "=", "'conv9_atrous'", ")", "\n", "x10", "=", "standard_conv", "(", "x9", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "rate", "=", "16", ",", "name", "=", "'conv10_atrous'", ")", "\n", "\n", "\n", "\n", "x11", "=", "standard_conv", "(", "tf", ".", "concat", "(", "[", "x10", ",", "x6", "]", ",", "axis", "=", "-", "1", ")", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "1", ",", "name", "=", "'conv11'", ")", "\n", "x12", "=", "standard_conv", "(", "tf", ".", "concat", "(", "[", "x11", ",", "x5", "]", ",", "axis", "=", "-", "1", ")", ",", "mask", ",", "4", "*", "cnum", ",", "3", ",", "1", ",", "name", "=", "'conv12'", ")", "\n", "\n", "x13", "=", "standard_dconv", "(", "tf", ".", "concat", "(", "[", "x12", ",", "x4", "]", ",", "axis", "=", "-", "1", ")", ",", "mask", ",", "2", "*", "cnum", ",", "name", "=", "'conv13_upsample'", ")", "\n", "x14", "=", "standard_conv", "(", "tf", ".", "concat", "(", "[", "x13", ",", "x3", "]", ",", "axis", "=", "-", "1", ")", ",", "mask", ",", "2", "*", "cnum", ",", "3", ",", "1", ",", "name", "=", "'conv14'", ")", "\n", "x15", "=", "standard_dconv", "(", "tf", ".", "concat", "(", "[", "x14", ",", "x2", "]", ",", "axis", "=", "-", "1", ")", ",", "mask", ",", "cnum", ",", "name", "=", "'conv15_upsample'", ")", "\n", "x16", "=", "standard_conv", "(", "tf", ".", "concat", "(", "[", "x15", ",", "x1", "]", ",", "axis", "=", "-", "1", ")", ",", "mask", ",", "cnum", "//", "2", ",", "3", ",", "1", ",", "name", "=", "'conv16'", ")", "\n", "x17", "=", "standard_conv", "(", "x16", ",", "mask", ",", "3", ",", "3", ",", "1", ",", "name", "=", "'conv17'", ")", "\n", "x18", "=", "tf", ".", "clip_by_value", "(", "x17", ",", "-", "1.", ",", "1.", ")", "\n", "\n", "return", "x18", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_model.RW_discriminator": [[111, 130], ["tensorflow.variable_scope", "tensorflow.concat", "inpaint_ops.dis_conv", "inpaint_ops.dis_conv", "inpaint_ops.dis_conv", "inpaint_ops.dis_conv", "inpaint_ops.dis_conv", "inpaint_ops.dis_conv"], "function", ["home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.dis_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.dis_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.dis_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.dis_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.dis_conv", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.dis_conv"], ["", "", "def", "RW_discriminator", "(", "x", ",", "mask", ",", "batch_size", ",", "activation", "=", "'leaky_relu'", ",", "reuse", "=", "False", ")", ":", "\n", "    ", "'''\n    Region-wise discriminator\n    Args:\n            x: input images\n            mask: mask region {0,1}\n    returns:\n            matrix {real, fake}\n    '''", "\n", "with", "tf", ".", "variable_scope", "(", "'discriminator'", ",", "reuse", "=", "reuse", ")", ":", "\n", "            ", "cnum", "=", "64", "\n", "x", "=", "tf", ".", "concat", "(", "[", "x", ",", "mask", "]", ",", "axis", "=", "3", ")", "\n", "x", "=", "dis_conv", "(", "x", ",", "cnum", ",", "name", "=", "'d_conv1'", ")", "\n", "x", "=", "dis_conv", "(", "x", ",", "2", "*", "cnum", ",", "name", "=", "'d_conv2'", ")", "\n", "x", "=", "dis_conv", "(", "x", ",", "4", "*", "cnum", ",", "name", "=", "'d_conv3'", ")", "\n", "x", "=", "dis_conv", "(", "x", ",", "4", "*", "cnum", ",", "name", "=", "'d_conv4'", ")", "\n", "x", "=", "dis_conv", "(", "x", ",", "4", "*", "cnum", ",", "name", "=", "'d_conv5'", ")", "\n", "x", "=", "dis_conv", "(", "x", ",", "4", "*", "cnum", ",", "name", "=", "'d_conv6'", ",", "activation", "=", "activation", ")", "\n", "return", "x", "\n", "", "", "def", "build_graph_with_loss", "(", "batch_data", ",", "batch_size", ",", "mask", ",", "vgg_path", ",", "adv_type", ",", "stage", "=", "0", ",", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_model.build_graph_with_loss": [[130, 212], ["tensorflow.subtract", "batch_data.get_shape().as_list", "inpaint_model.RW_generator", "vgg.vgg16.Vgg16", "vgg.vgg16.Vgg16.build", "vgg.vgg16.Vgg16.build", "vgg.vgg16.Vgg16.build", "vgg.vgg16.loss_cor", "vgg.vgg16.loss_style", "tensorflow.get_collection", "tensorflow.summary.image", "tensorflow.summary.image", "tensorflow.summary.image", "tensorflow.summary.image", "tensorflow.summary.scalar", "tensorflow.summary.scalar", "tensorflow.summary.scalar", "tensorflow.divide", "tensorflow.reduce_sum", "tensorflow.reduce_sum", "inpaint_model.RW_discriminator", "inpaint_model.RW_discriminator", "inpaint_model.RW_discriminator", "RW_discriminator.get_shape().as_list", "tensorflow.image.resize_nearest_neighbor", "tensorflow.get_collection", "tensorflow.summary.scalar", "tensorflow.summary.scalar", "batch_data.get_shape", "tensorflow.abs", "tensorflow.abs", "inpaint_ops.random_interpolates", "inpaint_model.RW_discriminator", "inpaint_ops.gradients_penalty", "RW_discriminator.get_shape", "tensorflow.reduce_mean", "tensorflow.reduce_mean", "tensorflow.reduce_mean", "tensorflow.reduce_mean", "tensorflow.reduce_mean", "tensorflow.reduce_mean", "tensorflow.reduce_mean", "tensorflow.reduce_mean", "tensorflow.reduce_mean", "tensorflow.reduce_mean", "tensorflow.reduce_mean", "tensorflow.reduce_mean", "tensorflow.reduce_mean", "tensorflow.reduce_sum", "tensorflow.reduce_sum", "tensorflow.reduce_sum", "tensorflow.nn.sigmoid_cross_entropy_with_logits", "tensorflow.nn.sigmoid_cross_entropy_with_logits", "tensorflow.nn.sigmoid_cross_entropy_with_logits", "tensorflow.nn.sigmoid_cross_entropy_with_logits", "tensorflow.nn.sigmoid_cross_entropy_with_logits", "tensorflow.reduce_mean", "tensorflow.reduce_mean", "tensorflow.reduce_sum", "tensorflow.abs", "tensorflow.abs", "tensorflow.abs", "tensorflow.nn.relu", "tensorflow.nn.relu", "tensorflow.nn.relu", "tensorflow.reduce_sum", "tensorflow.abs", "tensorflow.ones_like", "tensorflow.zeros_like", "tensorflow.zeros_like", "tensorflow.ones_like", "tensorflow.ones_like", "tensorflow.nn.relu", "tensorflow.nn.relu", "tensorflow.abs"], "function", ["home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_model.RW_generator", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.build", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.build", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.build", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.loss_cor", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.loss_style", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_model.RW_discriminator", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_model.RW_discriminator", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_model.RW_discriminator", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.random_interpolates", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_model.RW_discriminator", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.gradients_penalty"], ["", "", "def", "build_graph_with_loss", "(", "batch_data", ",", "batch_size", ",", "mask", ",", "vgg_path", ",", "adv_type", ",", "stage", "=", "0", ",", "\n", "lambda_style", "=", "0.001", ",", "lambda_cor", "=", "0.00001", ",", "alpha", "=", "0.01", ",", "lambda_adv", "=", "1.0", ",", "\n", "reuse", "=", "False", ",", "training", "=", "True", ")", ":", "\n", "\n", "    ", "image_gt", "=", "tf", ".", "subtract", "(", "tf", ".", "divide", "(", "batch_data", ",", "127.5", ")", ",", "1.", ")", "\n", "date_shape", "=", "batch_data", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "\n", "batch_incomplete", "=", "image_gt", "*", "mask", "\n", "\n", "image_p1", ",", "image_p2", "=", "RW_generator", "(", "batch_incomplete", ",", "mask", ")", "\n", "image_c1", "=", "image_p1", "*", "(", "1", "-", "mask", ")", "+", "image_gt", "*", "mask", "\n", "image_c2", "=", "image_p2", "*", "(", "1", "-", "mask", ")", "+", "image_gt", "*", "mask", "\n", "rec_loss", "=", "tf", ".", "reduce_sum", "(", "tf", ".", "abs", "(", "image_gt", "-", "image_p1", ")", ")", "+", "tf", ".", "reduce_sum", "(", "tf", ".", "abs", "(", "image_gt", "-", "image_p2", ")", ")", "\n", "\n", "vgg", "=", "Vgg16", "(", "vgg_path", ")", "\n", "vgg", ".", "build", "(", "image_gt", ")", "\n", "vgg_pos", "=", "[", "vgg", ".", "pool1", ",", "vgg", ".", "pool2", ",", "vgg", ".", "pool3", "]", "\n", "vgg", ".", "build", "(", "image_c1", ")", "\n", "vgg_x1", "=", "[", "vgg", ".", "pool1", ",", "vgg", ".", "pool2", ",", "vgg", ".", "pool3", "]", "\n", "vgg", ".", "build", "(", "image_c2", ")", "\n", "vgg_x2", "=", "[", "vgg", ".", "pool1", ",", "vgg", ".", "pool2", ",", "vgg", ".", "pool3", "]", "\n", "\n", "cor_loss", "=", "loss_cor", "(", "vgg_x1", ",", "vgg_pos", ")", "\n", "style_loss", "=", "loss_style", "(", "vgg_x2", ",", "vgg_pos", ")", "\n", "cor_loss", "=", "cor_loss", "*", "lambda_cor", "\n", "style_loss", "=", "style_loss", "*", "lambda_style", "\n", "cor_style", "=", "cor_loss", "+", "style_loss", "\n", "\n", "\n", "if", "stage", "==", "1", ":", "\n", "        ", "activation", "=", "None", "\n", "if", "adv_type", "==", "' '", ":", "\n", "            ", "activation", "=", "'leaky_relu'", "\n", "", "d_pred", "=", "RW_discriminator", "(", "image_c1", "*", "(", "1", "-", "mask", ")", ",", "mask", ",", "batch_size", ",", "activation", ")", "\n", "d_pred2", "=", "RW_discriminator", "(", "image_c2", "*", "(", "1", "-", "mask", ")", ",", "mask", ",", "batch_size", ",", "activation", ",", "reuse", "=", "True", ")", "\n", "d_real", "=", "RW_discriminator", "(", "image_gt", "*", "(", "1", "-", "mask", ")", ",", "mask", ",", "batch_size", ",", "activation", ",", "reuse", "=", "True", ")", "\n", "mask_label", "=", "1", "-", "mask", "\n", "shape", "=", "d_pred", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "\n", "mask_label", "=", "tf", ".", "image", ".", "resize_nearest_neighbor", "(", "mask_label", ",", "[", "shape", "[", "1", "]", ",", "shape", "[", "2", "]", "]", ")", "\n", "if", "adv_type", "==", "'wgan_gp'", ":", "\n", "            ", "penalty_img", "=", "random_interpolates", "(", "image_gt", ",", "image_c2", ")", "\n", "dout_penalty", "=", "RW_discriminator", "(", "penalty_img", ",", "mask", ",", "batch_size", ",", "activation", ",", "reuse", "=", "True", ")", "\n", "penalty_loss", "=", "gradients_penalty", "(", "penalty_img", ",", "dout_penalty", ",", "mask", "=", "mask", ")", "\n", "d_loss", "=", "tf", ".", "reduce_mean", "(", "d_pred", "*", "mask_label", ")", "+", "tf", ".", "reduce_mean", "(", "d_pred2", "*", "mask_label", ")", "-", "0.01", "*", "tf", ".", "reduce_mean", "(", "d_real", "*", "mask_label", ")", "+", "penalty_loss", "\n", "d_g_loss", "=", "-", "1", "*", "tf", ".", "reduce_mean", "(", "d_pred", "*", "mask_label", ")", "-", "tf", ".", "reduce_mean", "(", "d_pred2", "*", "mask_label", ")", "\n", "\n", "", "elif", "adv_type", "==", "'gan'", ":", "\n", "            ", "adv_d_loss", "=", "0.01", "*", "tf", ".", "reduce_mean", "(", "tf", ".", "nn", ".", "sigmoid_cross_entropy_with_logits", "(", "logits", "=", "d_real", ",", "labels", "=", "tf", ".", "ones_like", "(", "d_real", ")", ")", "*", "mask_label", ")", "\n", "+", "tf", ".", "reduce_mean", "(", "tf", ".", "nn", ".", "sigmoid_cross_entropy_with_logits", "(", "logits", "=", "d_pred", ",", "labels", "=", "tf", ".", "zeros_like", "(", "d_pred", ")", ")", "*", "mask_label", ")", "\n", "+", "tf", ".", "reduce_mean", "(", "tf", ".", "nn", ".", "sigmoid_cross_entropy_with_logits", "(", "logits", "=", "d_pred2", ",", "labels", "=", "tf", ".", "zeros_like", "(", "d_pred2", ")", ")", "*", "mask_label", ")", "\n", "adv_g_loss", "=", "tf", ".", "reduce_mean", "(", "tf", ".", "nn", ".", "sigmoid_cross_entropy_with_logits", "(", "logits", "=", "d_pred", ",", "labels", "=", "tf", ".", "ones_like", "(", "d_real", ")", ")", "*", "mask_label", ")", "+", "tf", ".", "reduce_mean", "(", "tf", ".", "nn", ".", "sigmoid_cross_entropy_with_logits", "(", "logits", "=", "d_pred2", ",", "labels", "=", "tf", ".", "ones_like", "(", "d_real", ")", ")", "*", "mask_label", ")", "\n", "\n", "", "elif", "adv_type", "==", "'hinge'", ":", "\n", "\n", "            ", "adv_d_loss", "=", "0.01", "*", "tf", ".", "reduce_mean", "(", "tf", ".", "nn", ".", "relu", "(", "1", "-", "d_real", ")", "*", "mask_label", ")", "+", "tf", ".", "reduce_mean", "(", "tf", ".", "nn", ".", "relu", "(", "1", "+", "d_pred", ")", "*", "mask_label", ")", "\n", "+", "tf", ".", "reduce_mean", "(", "tf", ".", "nn", ".", "relu", "(", "1", "+", "d_pred2", ")", "*", "mask_label", ")", "\n", "adv_g_loss", "=", "-", "1", "*", "tf", ".", "reduce_mean", "(", "tf", ".", "nn", ".", "relu", "(", "d_pred", ")", "*", "mask_label", ")", "-", "tf", ".", "reduce_mean", "(", "tf", ".", "nn", ".", "relu", "(", "d_pred2", ")", "*", "mask_label", ")", "\n", "", "else", ":", "\n", "\n", "            ", "adv_d_loss", "=", "alpha", "*", "tf", ".", "reduce_sum", "(", "tf", ".", "abs", "(", "mask_label", "-", "d_real", ")", ")", "+", "tf", ".", "reduce_sum", "(", "tf", ".", "abs", "(", "0", "-", "d_pred", ")", ")", "+", "tf", ".", "reduce_sum", "(", "tf", ".", "abs", "(", "0", "-", "d_pred2", ")", ")", "\n", "adv_g_loss", "=", "tf", ".", "reduce_sum", "(", "tf", ".", "abs", "(", "mask_label", "-", "d_pred", ")", ")", "+", "tf", ".", "reduce_sum", "(", "tf", ".", "abs", "(", "mask_label", "-", "d_pred2", ")", ")", "\n", "", "", "else", ":", "\n", "        ", "adv_d_loss", "=", "None", "\n", "adv_g_loss", "=", "None", "\n", "\n", "", "if", "stage", "==", "1", ":", "\n", "        ", "g_loss", "=", "rec_loss", "+", "cor_style", "+", "lambda_adv", "*", "adv_g_loss", "\n", "", "else", ":", "\n", "        ", "g_loss", "=", "rec_loss", "+", "cor_style", "\n", "", "g_vars", "=", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "TRAINABLE_VARIABLES", ",", "'inpaint_net'", ")", "\n", "d_vars", "=", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "TRAINABLE_VARIABLES", ",", "'discriminator'", ")", "if", "stage", "==", "1", "else", "None", "\n", "\n", "tf", ".", "summary", ".", "image", "(", "'incomplete'", ",", "batch_incomplete", ",", "max_outputs", "=", "7", ")", "\n", "tf", ".", "summary", ".", "image", "(", "'image_p1'", ",", "image_p1", ",", "max_outputs", "=", "7", ")", "\n", "tf", ".", "summary", ".", "image", "(", "'image_p2'", ",", "image_p2", ",", "max_outputs", "=", "7", ")", "\n", "tf", ".", "summary", ".", "image", "(", "'image_c2'", ",", "image_c2", ",", "max_outputs", "=", "7", ")", "\n", "tf", ".", "summary", ".", "scalar", "(", "'rec_loss'", ",", "rec_loss", ")", "\n", "tf", ".", "summary", ".", "scalar", "(", "'correlation loss'", ",", "cor_loss", ")", "\n", "tf", ".", "summary", ".", "scalar", "(", "'style loss'", ",", "style_loss", ")", "\n", "if", "stage", "==", "1", ":", "\n", "        ", "tf", ".", "summary", ".", "scalar", "(", "'adv_g_loss'", ",", "adv_g_loss", ")", "\n", "tf", ".", "summary", ".", "scalar", "(", "'adv_d_loss'", ",", "adv_d_loss", ")", "\n", "", "return", "g_vars", ",", "d_vars", ",", "g_loss", ",", "adv_d_loss", ",", "rec_loss", ",", "cor_loss", ",", "style_loss", "\n", "", ""]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.region_conv.region_deconv": [[6, 17], ["x_complete.get_shape().as_list", "tensorflow.image.resize_nearest_neighbor", "tensorflow.reshape", "x_missing.get_shape().as_list", "tensorflow.concat", "inpaint_ops.standard_dconv", "x_complete.get_shape", "x_missing.get_shape"], "function", ["home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_dconv"], ["def", "region_deconv", "(", "x_complete", ",", "x_missing", ",", "mask", ",", "name", "=", "'com_'", ")", ":", "\n", "    ", "shape", "=", "x_complete", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "\n", "mask", "=", "tf", ".", "image", ".", "resize_nearest_neighbor", "(", "mask", ",", "size", "=", "[", "shape", "[", "1", "]", ",", "shape", "[", "2", "]", "]", ",", "align_corners", "=", "True", ")", "\n", "mask", "=", "tf", ".", "reshape", "(", "mask", ",", "[", "shape", "[", "0", "]", ",", "shape", "[", "1", "]", ",", "shape", "[", "2", "]", ",", "1", "]", ")", "\n", "x_complete", "=", "x_complete", "*", "mask", "\n", "shape", "=", "x_missing", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "\n", "x_missing", "=", "x_missing", "*", "(", "1", "-", "mask", ")", "\n", "x_fusion", "=", "tf", ".", "concat", "(", "[", "x_complete", ",", "x_missing", "]", ",", "axis", "=", "-", "1", ")", "\n", "\n", "x_fusion", "=", "standard_dconv", "(", "x_fusion", ",", "mask", ",", "shape", "[", "-", "1", "]", ",", "name", "=", "name", "+", "\"_fusion\"", ")", "\n", "return", "x_fusion", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.region_conv.region_conv": [[18, 33], ["x_complete.get_shape().as_list", "tensorflow.image.resize_nearest_neighbor", "tensorflow.reshape", "int", "x_missing.get_shape().as_list", "tensorflow.concat", "tensorflow.pad", "tensorflow.layers.conv2d", "tensorflow.nn.elu", "x_complete.get_shape", "x_missing.get_shape"], "function", ["None"], ["", "def", "region_conv", "(", "x_complete", ",", "x_missing", ",", "mask", ",", "name", "=", "'com_'", ")", ":", "\n", "    ", "shape", "=", "x_complete", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "\n", "mask", "=", "tf", ".", "image", ".", "resize_nearest_neighbor", "(", "mask", ",", "size", "=", "[", "shape", "[", "1", "]", ",", "shape", "[", "2", "]", "]", ",", "align_corners", "=", "True", ")", "\n", "mask", "=", "tf", ".", "reshape", "(", "mask", ",", "[", "shape", "[", "0", "]", ",", "shape", "[", "1", "]", ",", "shape", "[", "2", "]", ",", "1", "]", ")", "\n", "p3", "=", "int", "(", "1", "*", "(", "3", "-", "1", ")", "/", "2", ")", "\n", "\n", "x_complete", "=", "x_complete", "*", "mask", "\n", "shape", "=", "x_missing", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "\n", "x_missing", "=", "x_missing", "*", "(", "1", "-", "mask", ")", "\n", "x_fusion", "=", "tf", ".", "concat", "(", "[", "x_complete", ",", "x_missing", "]", ",", "axis", "=", "-", "1", ")", "\n", "x_fusion", "=", "tf", ".", "pad", "(", "x_fusion", ",", "[", "[", "0", ",", "0", "]", ",", "[", "p3", ",", "p3", "]", ",", "[", "p3", ",", "p3", "]", ",", "[", "0", ",", "0", "]", "]", ",", "'REFLECT'", ")", "\n", "\n", "x_fusion", "=", "tf", ".", "layers", ".", "conv2d", "(", "x_fusion", ",", "shape", "[", "-", "1", "]", ",", "kernel_size", "=", "3", ",", "strides", "=", "1", ",", "padding", "=", "'VALID'", ",", "dilation_rate", "=", "1", ",", "name", "=", "name", "+", "\"_fusion\"", ")", "\n", "x_fusion", "=", "tf", ".", "nn", ".", "elu", "(", "x_fusion", ")", "\n", "return", "x_fusion", "", "", ""]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.test.infer": [[13, 23], ["batch_data.get_shape().as_list", "inpaint_model.RW_generator", "batch_data.get_shape"], "function", ["home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_model.RW_generator"], ["def", "infer", "(", "batch_data", ",", "mask", ",", "reuse", "=", "False", ")", ":", "\n", "        ", "shape", "=", "batch_data", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "\n", "batch_gt", "=", "batch_data", "/", "127.5", "-", "1.", "\n", "batch_incomplete", "=", "batch_gt", "*", "mask", "\n", "\n", "image_p1", ",", "image_p2", "=", "RW_generator", "(", "batch_incomplete", ",", "mask", ",", "reuse", "=", "reuse", ")", "\n", "\n", "image_c2", "=", "batch_incomplete", "*", "mask", "+", "image_p2", "*", "(", "1.", "-", "mask", ")", "\n", "image_c2", "=", "(", "image_c2", "+", "1.", ")", "*", "127.5", "\n", "return", "image_c2", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.random_interpolates": [[9, 22], ["tf.reshape.get_shape().as_list", "tensorflow.reshape", "tensorflow.reshape", "tensorflow.reshape", "tensorflow.random_uniform", "tf.reshape.get_shape"], "function", ["None"], ["def", "random_interpolates", "(", "x", ",", "y", ",", "alpha", "=", "None", ")", ":", "\n", "    ", "\"\"\"\n    x: first dimension as batch_size\n    y: first dimension as batch_size\n    alpha: [BATCH_SIZE, 1]\n    \"\"\"", "\n", "shape", "=", "x", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "\n", "x", "=", "tf", ".", "reshape", "(", "x", ",", "[", "shape", "[", "0", "]", ",", "-", "1", "]", ")", "\n", "y", "=", "tf", ".", "reshape", "(", "y", ",", "[", "shape", "[", "0", "]", ",", "-", "1", "]", ")", "\n", "if", "alpha", "is", "None", ":", "\n", "        ", "alpha", "=", "tf", ".", "random_uniform", "(", "shape", "=", "[", "shape", "[", "0", "]", ",", "1", "]", ")", "\n", "", "interpolates", "=", "x", "+", "alpha", "*", "(", "y", "-", "x", ")", "\n", "return", "tf", ".", "reshape", "(", "interpolates", ",", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.gradients_penalty": [[24, 33], ["tensorflow.sqrt", "tensorflow.reduce_mean", "tensorflow.gradients", "tensorflow.ones_like", "tensorflow.reduce_mean", "tensorflow.square", "tensorflow.square"], "function", ["None"], ["", "def", "gradients_penalty", "(", "x", ",", "y", ",", "mask", "=", "None", ",", "norm", "=", "1.", ")", ":", "\n", "    ", "\"\"\"Improved Training of Wasserstein GANs\n    - https://arxiv.org/abs/1704.00028\n    \"\"\"", "\n", "gradients", "=", "tf", ".", "gradients", "(", "y", ",", "x", ")", "[", "0", "]", "\n", "if", "mask", "is", "None", ":", "\n", "        ", "mask", "=", "tf", ".", "ones_like", "(", "gradients", ")", "\n", "", "slopes", "=", "tf", ".", "sqrt", "(", "tf", ".", "reduce_mean", "(", "tf", ".", "square", "(", "gradients", ")", "*", "mask", ",", "axis", "=", "[", "1", ",", "2", ",", "3", "]", ")", ")", "\n", "return", "tf", ".", "reduce_mean", "(", "tf", ".", "square", "(", "slopes", "-", "norm", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_conv": [[35, 52], ["int", "tensorflow.pad", "tensorflow.layers.conv2d"], "function", ["None"], ["", "def", "standard_conv", "(", "x", ",", "mask", ",", "cnum", ",", "ksize", "=", "3", ",", "stride", "=", "1", ",", "rate", "=", "1", ",", "name", "=", "'conv'", ",", "padding", "=", "'SAME'", ")", ":", "\n", "        ", "'''\n        define convolution for generator\n        Args:\n                x:iput image\n                cnum: channel number\n                ksize: kernal size\n                stride: convolution stride\n                rate : rate for dilated conv\n                name: name of layers\n        '''", "\n", "p", "=", "int", "(", "rate", "*", "(", "ksize", "-", "1", ")", "/", "2", ")", "\n", "x", "=", "tf", ".", "pad", "(", "x", ",", "[", "[", "0", ",", "0", "]", ",", "[", "p", ",", "p", "]", ",", "[", "p", ",", "p", "]", ",", "[", "0", ",", "0", "]", "]", ",", "'REFLECT'", ")", "\n", "padding", "=", "'VALID'", "\n", "x", "=", "tf", ".", "layers", ".", "conv2d", "(", "x", ",", "cnum", ",", "ksize", ",", "stride", ",", "dilation_rate", "=", "rate", ",", "activation", "=", "tf", ".", "nn", ".", "elu", "\n", ",", "padding", "=", "padding", ",", "name", "=", "name", "+", "'_1'", ")", "\n", "return", "x", "\n", "", "def", "standard_dconv", "(", "x", ",", "mask", ",", "cnum", ",", "name", "=", "'deconv'", ",", "padding", "=", "'VALID'", ")", ":", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.standard_dconv": [[52, 70], ["tf.layers.conv2d.get_shape().as_list", "tensorflow.image.resize_nearest_neighbor", "int", "tensorflow.pad", "tensorflow.layers.conv2d", "tf.layers.conv2d.get_shape"], "function", ["None"], ["", "def", "standard_dconv", "(", "x", ",", "mask", ",", "cnum", ",", "name", "=", "'deconv'", ",", "padding", "=", "'VALID'", ")", ":", "\n", "        ", "'''\n        define upsample convolution for generator\n        Args:\n        x: input image\n        mask: input mask\n        name: name of layers\n        '''", "\n", "rate", "=", "1", "\n", "ksize", "=", "3", "\n", "stride", "=", "1", "\n", "shape", "=", "x", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "\n", "x", "=", "tf", ".", "image", ".", "resize_nearest_neighbor", "(", "x", ",", "[", "shape", "[", "1", "]", "*", "2", ",", "shape", "[", "2", "]", "*", "2", "]", ")", "\n", "p3", "=", "int", "(", "1", "*", "(", "3", "-", "1", ")", "/", "2", ")", "\n", "x", "=", "tf", ".", "pad", "(", "x", ",", "[", "[", "0", ",", "0", "]", ",", "[", "p3", ",", "p3", "]", ",", "[", "p3", ",", "p3", "]", ",", "[", "0", ",", "0", "]", "]", ",", "'REFLECT'", ")", "\n", "x", "=", "tf", ".", "layers", ".", "conv2d", "(", "x", ",", "cnum", ",", "ksize", ",", "stride", ",", "dilation_rate", "=", "rate", ",", "activation", "=", "tf", ".", "nn", ".", "elu", "\n", ",", "padding", "=", "padding", ",", "name", "=", "name", "+", "'_1'", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.l2_norm": [[72, 74], ["tensorflow.reduce_sum"], "function", ["None"], ["", "def", "l2_norm", "(", "v", ",", "eps", "=", "1e-12", ")", ":", "\n", "    ", "return", "v", "/", "(", "tf", ".", "reduce_sum", "(", "v", "**", "2", ")", "**", "0.5", "+", "eps", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.spectral_norm": [[76, 98], ["tf.reshape.shape.as_list", "tensorflow.reshape", "tensorflow.get_variable", "range", "tensorflow.matmul", "tensorflow.matmul", "inpaint_ops.l2_norm", "tensorflow.matmul", "inpaint_ops.l2_norm", "tensorflow.matmul", "tensorflow.transpose", "tensorflow.control_dependencies", "tensorflow.reshape", "tensorflow.truncated_normal_initializer", "tensorflow.transpose", "tf.get_variable.assign"], "function", ["home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.l2_norm", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.l2_norm"], ["", "def", "spectral_norm", "(", "w", ",", "iteration", "=", "1", ",", "name", "=", "'dasd'", ")", ":", "\n", "   ", "w_shape", "=", "w", ".", "shape", ".", "as_list", "(", ")", "\n", "w", "=", "tf", ".", "reshape", "(", "w", ",", "[", "-", "1", ",", "w_shape", "[", "-", "1", "]", "]", ")", "\n", "\n", "u", "=", "tf", ".", "get_variable", "(", "name", "+", "\"u\"", ",", "[", "1", ",", "w_shape", "[", "-", "1", "]", "]", ",", "initializer", "=", "tf", ".", "truncated_normal_initializer", "(", ")", ",", "trainable", "=", "False", ")", "\n", "\n", "u_hat", "=", "u", "\n", "v_hat", "=", "None", "\n", "for", "i", "in", "range", "(", "iteration", ")", ":", "\n", "       ", "v_", "=", "tf", ".", "matmul", "(", "u_hat", ",", "tf", ".", "transpose", "(", "w", ")", ")", "\n", "v_hat", "=", "l2_norm", "(", "v_", ")", "\n", "\n", "u_", "=", "tf", ".", "matmul", "(", "v_hat", ",", "w", ")", "\n", "u_hat", "=", "l2_norm", "(", "u_", ")", "\n", "\n", "", "sigma", "=", "tf", ".", "matmul", "(", "tf", ".", "matmul", "(", "v_hat", ",", "w", ")", ",", "tf", ".", "transpose", "(", "u_hat", ")", ")", "\n", "w_norm", "=", "w", "/", "sigma", "\n", "\n", "with", "tf", ".", "control_dependencies", "(", "[", "u", ".", "assign", "(", "u_hat", ")", "]", ")", ":", "\n", "       ", "w_norm", "=", "tf", ".", "reshape", "(", "w_norm", ",", "w_shape", ")", "\n", "\n", "", "return", "w_norm", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.LeakyRelu": [[100, 104], ["tensorflow.abs"], "function", ["None"], ["", "def", "LeakyRelu", "(", "x", ",", "leak", "=", "0.2", ",", "name", "=", "\"LeakyRelu\"", ")", ":", "\n", "        ", "f1", "=", "0.5", "*", "(", "1", "+", "leak", ")", "\n", "f2", "=", "0.5", "*", "(", "1", "-", "leak", ")", "\n", "return", "f1", "*", "x", "+", "f2", "*", "tf", ".", "abs", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.dis_conv": [[106, 126], ["tf.nn.conv2d.get_shape().as_list", "tensorflow.get_variable", "inpaint_ops.spectral_norm", "tensorflow.nn.conv2d", "tensorflow.get_variable", "inpaint_ops.LeakyRelu", "tf.nn.conv2d.get_shape"], "function", ["home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.spectral_norm", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.inpaint_ops.LeakyRelu"], ["", "def", "dis_conv", "(", "x", ",", "cnum", ",", "ksize", "=", "5", ",", "stride", "=", "2", ",", "activation", "=", "'leak_relu'", ",", "name", "=", "'conv'", ")", ":", "\n", "    ", "\"\"\"\n    covolution for discriminator.\n    Args:\n        x: input image\n        cnum: channel number.\n        ksize: kernel size.\n        Stride: convolution stride.\n        name: name of layers.\n    \"\"\"", "\n", "\n", "x_shape", "=", "x", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "\n", "w", "=", "tf", ".", "get_variable", "(", "name", "=", "name", "+", "'_w'", ",", "shape", "=", "[", "ksize", ",", "ksize", ",", "x_shape", "[", "-", "1", "]", "]", "+", "[", "cnum", "]", ")", "\n", "w", "=", "spectral_norm", "(", "w", ",", "name", "=", "name", ")", "\n", "x", "=", "tf", ".", "nn", ".", "conv2d", "(", "x", ",", "w", ",", "strides", "=", "[", "1", ",", "stride", ",", "stride", ",", "1", "]", ",", "padding", "=", "'SAME'", ")", "\n", "bias", "=", "tf", ".", "get_variable", "(", "name", "=", "name", "+", "'_bias'", ",", "shape", "=", "[", "cnum", "]", ")", "\n", "if", "activation", "!=", "None", ":", "\n", "        ", "return", "LeakyRelu", "(", "x", "+", "bias", ",", "name", "=", "name", ")", "\n", "", "else", ":", "\n", "        ", "return", "x", "+", "bias", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.mask_online.continuous_mask": [[8, 43], ["numpy.zeros", "range", "numpy.zeros", "random.randint", "random.randint", "range", "random.randint", "random.randint", "random.randint", "random.randint", "cv2.line", "cv2.circle", "int", "int", "sin", "cos"], "function", ["None"], ["def", "continuous_mask", "(", "height", ",", "width", ",", "num", ",", "maxAngle", ",", "maxLength", ",", "maxBrushWidth", ",", "channels", "=", "3", ")", ":", "\n", "    ", "\"\"\"Generates a continuous mask with lines, circles and elipses\"\"\"", "\n", "\n", "img", "=", "np", ".", "zeros", "(", "(", "height", ",", "width", ",", "channels", ")", ",", "np", ".", "uint8", ")", "\n", "\n", "for", "j", "in", "range", "(", "1", ")", ":", "\n", "        ", "startX", "=", "randint", "(", "0", ",", "width", ")", "\n", "startY", "=", "randint", "(", "0", ",", "height", ")", "\n", "for", "i", "in", "range", "(", "0", ",", "randint", "(", "1", ",", "num", ")", ")", ":", "\n", "            ", "angle", "=", "randint", "(", "0", ",", "maxAngle", ")", "\n", "if", "i", "%", "2", "==", "0", ":", "\n", "                ", "angle", "=", "360", "-", "angle", "\n", "", "length", "=", "randint", "(", "1", ",", "maxLength", ")", "\n", "brushWidth", "=", "randint", "(", "1", ",", "maxBrushWidth", ")", "\n", "endX", "=", "startX", "+", "int", "(", "length", "*", "sin", "(", "angle", ")", ")", "\n", "endY", "=", "startY", "+", "int", "(", "length", "*", "cos", "(", "angle", ")", ")", "\n", "if", "endX", ">", "255", ":", "\n", "                ", "endX", "=", "255", "\n", "", "if", "endX", "<", "0", ":", "\n", "                ", "endX", "=", "0", "\n", "", "if", "endY", ">", "255", ":", "\n", "                ", "endY", "=", "255", "\n", "", "if", "endY", "<", "0", ":", "\n", "                ", "endY", "=", "0", "\n", "", "cv2", ".", "line", "(", "img", ",", "(", "startX", ",", "startY", ")", ",", "(", "endX", ",", "endY", ")", ",", "(", "255", ",", "255", ",", "255", ")", ",", "brushWidth", ")", "\n", "cv2", ".", "circle", "(", "img", ",", "(", "endX", ",", "endY", ")", ",", "brushWidth", "//", "2", ",", "(", "255", ",", "255", ",", "255", ")", ",", "-", "1", ")", "\n", "startY", "=", "endY", "\n", "startX", "=", "endX", "\n", "\n", "\n", "", "", "img2", "=", "np", ".", "zeros", "(", "(", "height", ",", "width", ",", "1", ")", ")", "\n", "img2", "[", ":", ",", ":", ",", "0", "]", "=", "img", "[", ":", ",", ":", ",", "0", "]", "\n", "img2", "[", "img2", ">", "1", "]", "=", "1", "\n", "\n", "return", "1", "-", "img2", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.None.mask_online.discontinuous_mask": [[46, 88], ["numpy.zeros", "int", "range", "range", "range", "range", "numpy.zeros", "Exception", "random.randint", "random.randint", "cv2.line", "random.randint", "random.randint", "cv2.circle", "random.randint", "cv2.rectangle", "random.randint", "random.randint", "cv2.ellipse", "random.randint", "random.randint", "random.randint", "random.randint", "random.randint", "random.randint", "random.randint", "random.randint", "random.randint", "random.randint", "random.randint", "random.randint", "random.randint", "random.randint", "random.randint", "random.randint", "random.randint"], "function", ["None"], ["", "def", "discontinuous_mask", "(", "height", ",", "width", ",", "num", ",", "low", ",", "high", ",", "channels", "=", "3", ")", ":", "\n", "    ", "\"\"\"Generates a discontinuous mask with lines, circles and elipses\n       When we were training, we generated more elipses\n    \"\"\"", "\n", "img", "=", "np", ".", "zeros", "(", "(", "height", ",", "width", ",", "channels", ")", ",", "np", ".", "uint8", ")", "\n", "\n", "# Set size scale", "\n", "size", "=", "int", "(", "(", "width", "+", "height", ")", "*", "0.1", ")", "\n", "if", "width", "<", "64", "or", "height", "<", "64", ":", "\n", "        ", "raise", "Exception", "(", "\"Width and Height of mask must be at least 64!\"", ")", "\n", "\n", "# Draw random lines", "\n", "", "for", "_", "in", "range", "(", "randint", "(", "1", ",", "num", ")", ")", ":", "\n", "        ", "x1", ",", "x2", "=", "randint", "(", "1", ",", "width", ")", ",", "randint", "(", "1", ",", "width", ")", "\n", "y1", ",", "y2", "=", "randint", "(", "1", ",", "height", ")", ",", "randint", "(", "1", ",", "height", ")", "\n", "thickness", "=", "randint", "(", "3", ",", "size", ")", "\n", "cv2", ".", "line", "(", "img", ",", "(", "x1", ",", "y1", ")", ",", "(", "x2", ",", "y2", ")", ",", "(", "1", ",", "1", ",", "1", ")", ",", "thickness", ")", "\n", "\n", "# Draw random circles", "\n", "", "for", "_", "in", "range", "(", "randint", "(", "1", ",", "num", ")", ")", ":", "\n", "        ", "x1", ",", "y1", "=", "randint", "(", "1", ",", "width", ")", ",", "randint", "(", "1", ",", "height", ")", "\n", "radius", "=", "randint", "(", "3", ",", "size", ")", "\n", "cv2", ".", "circle", "(", "img", ",", "(", "x1", ",", "y1", ")", ",", "radius", ",", "(", "1", ",", "1", ",", "1", ")", ",", "-", "1", ")", "\n", "\n", "# Draw randow rectangle", "\n", "", "for", "_", "in", "range", "(", "randint", "(", "1", ",", "num", ")", ")", ":", "\n", "        ", "x1", ",", "y1", "=", "randint", "(", "1", ",", "width", ")", ",", "randint", "(", "1", ",", "height", ")", "\n", "x2", ",", "y2", "=", "randint", "(", "1", ",", "width", ")", ",", "randint", "(", "1", ",", "height", ")", "\n", "cv2", ".", "rectangle", "(", "img", ",", "(", "x1", ",", "y1", ")", ",", "(", "x2", ",", "y2", ")", ",", "(", "1", ",", "1", ",", "1", ")", ",", "-", "1", ")", "\n", "\n", "# Draw random ellipses", "\n", "", "for", "_", "in", "range", "(", "randint", "(", "1", ",", "num", ")", ")", ":", "\n", "        ", "x1", ",", "y1", "=", "randint", "(", "1", ",", "width", ")", ",", "randint", "(", "1", ",", "height", ")", "\n", "s1", ",", "s2", "=", "randint", "(", "low", ",", "high", ")", ",", "randint", "(", "low", ",", "high", ")", "\n", "a1", ",", "a2", ",", "a3", "=", "randint", "(", "3", ",", "180", ")", ",", "randint", "(", "3", ",", "180", ")", ",", "randint", "(", "3", ",", "180", ")", "\n", "thickness", "=", "randint", "(", "3", ",", "size", ")", "\n", "cv2", ".", "ellipse", "(", "img", ",", "(", "x1", ",", "y1", ")", ",", "(", "s1", ",", "s2", ")", ",", "a1", ",", "a2", ",", "a3", ",", "(", "1", ",", "1", ",", "1", ")", ",", "thickness", ")", "\n", "\n", "", "img2", "=", "np", ".", "zeros", "(", "(", "height", ",", "width", ",", "1", ")", ")", "\n", "img2", "[", ":", ",", ":", ",", "0", "]", "=", "img", "[", ":", ",", ":", ",", "0", "]", "\n", "\n", "return", "1", "-", "img2", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.__init__": [[12, 22], ["numpy.load().item", "print", "inspect.getfile", "os.path.abspath", "os.path.join", "print", "os.path.join", "numpy.load"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "vgg16_npy_path", "=", "None", ")", ":", "\n", "        ", "if", "vgg16_npy_path", "is", "None", ":", "\n", "            ", "path", "=", "inspect", ".", "getfile", "(", "Vgg16", ")", "\n", "path", "=", "os", ".", "path", ".", "abspath", "(", "os", ".", "path", ".", "join", "(", "path", ",", "os", ".", "pardir", ")", ")", "\n", "path", "=", "os", ".", "path", ".", "join", "(", "path", ",", "\"vgg16.npy\"", ")", "\n", "vgg16_npy_path", "=", "path", "\n", "print", "(", "path", ")", "\n", "\n", "", "self", ".", "data_dict", "=", "np", ".", "load", "(", "vgg16_npy_path", ",", "encoding", "=", "'latin1'", ",", "allow_pickle", "=", "True", ")", ".", "item", "(", ")", "\n", "print", "(", "\"npy file loaded\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.build": [[23, 73], ["time.time", "tensorflow.image.resize_images", "print", "tensorflow.split", "tensorflow.concat", "vgg16.Vgg16.conv_layer", "vgg16.Vgg16.conv_layer", "vgg16.Vgg16.max_pool", "vgg16.Vgg16.conv_layer", "vgg16.Vgg16.conv_layer", "vgg16.Vgg16.max_pool", "vgg16.Vgg16.conv_layer", "vgg16.Vgg16.conv_layer", "vgg16.Vgg16.conv_layer", "vgg16.Vgg16.max_pool", "vgg16.Vgg16.conv_layer", "vgg16.Vgg16.conv_layer", "vgg16.Vgg16.conv_layer", "vgg16.Vgg16.max_pool", "vgg16.Vgg16.conv_layer", "vgg16.Vgg16.conv_layer", "vgg16.Vgg16.conv_layer", "vgg16.Vgg16.max_pool", "print", "red.get_shape().as_list", "green.get_shape().as_list", "blue.get_shape().as_list", "tensorflow.concat.get_shape().as_list", "time.time", "red.get_shape", "green.get_shape", "blue.get_shape", "tensorflow.concat.get_shape"], "methods", ["home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.conv_layer", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.conv_layer", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.max_pool", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.conv_layer", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.conv_layer", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.max_pool", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.conv_layer", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.conv_layer", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.conv_layer", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.max_pool", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.conv_layer", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.conv_layer", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.conv_layer", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.max_pool", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.conv_layer", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.conv_layer", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.conv_layer", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.max_pool"], ["", "def", "build", "(", "self", ",", "rgb", ")", ":", "\n", "        ", "\"\"\"\n        load variable from npy to build the VGG\n        :param rgb: rgb image [batch, height, width, 3] values scaled [0, 1]\n        \"\"\"", "\n", "\n", "start_time", "=", "time", ".", "time", "(", ")", "\n", "rgb", "=", "tf", ".", "image", ".", "resize_images", "(", "rgb", ",", "(", "224", ",", "224", ")", ")", "\n", "print", "(", "\"build model started\"", ")", "\n", "rgb_scaled", "=", "(", "rgb", "+", "1.", ")", "*", "127.5", "\n", "#print(type(rgb[0][0][0][0]))", "\n", "\n", "# Convert RGB to BGR", "\n", "# red, green, blue = tf.split(3, 3, rgb_scaled)", "\n", "red", ",", "green", ",", "blue", "=", "tf", ".", "split", "(", "rgb_scaled", ",", "3", ",", "3", ")", "\n", "assert", "red", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "1", ":", "]", "==", "[", "224", ",", "224", ",", "1", "]", "\n", "assert", "green", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "1", ":", "]", "==", "[", "224", ",", "224", ",", "1", "]", "\n", "assert", "blue", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "1", ":", "]", "==", "[", "224", ",", "224", ",", "1", "]", "\n", "bgr", "=", "tf", ".", "concat", "(", "[", "\n", "blue", "-", "VGG_MEAN", "[", "0", "]", ",", "\n", "green", "-", "VGG_MEAN", "[", "1", "]", ",", "\n", "red", "-", "VGG_MEAN", "[", "2", "]", ",", "\n", "]", ",", "3", ")", "\n", "assert", "bgr", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "1", ":", "]", "==", "[", "224", ",", "224", ",", "3", "]", "\n", "\n", "self", ".", "conv1_1", "=", "self", ".", "conv_layer", "(", "bgr", ",", "\"conv1_1\"", ")", "\n", "self", ".", "conv1_2", "=", "self", ".", "conv_layer", "(", "self", ".", "conv1_1", ",", "\"conv1_2\"", ")", "\n", "self", ".", "pool1", "=", "self", ".", "max_pool", "(", "self", ".", "conv1_2", ",", "'pool1'", ")", "\n", "\n", "self", ".", "conv2_1", "=", "self", ".", "conv_layer", "(", "self", ".", "pool1", ",", "\"conv2_1\"", ")", "\n", "self", ".", "conv2_2", "=", "self", ".", "conv_layer", "(", "self", ".", "conv2_1", ",", "\"conv2_2\"", ")", "\n", "self", ".", "pool2", "=", "self", ".", "max_pool", "(", "self", ".", "conv2_2", ",", "'pool2'", ")", "\n", "\n", "self", ".", "conv3_1", "=", "self", ".", "conv_layer", "(", "self", ".", "pool2", ",", "\"conv3_1\"", ")", "\n", "self", ".", "conv3_2", "=", "self", ".", "conv_layer", "(", "self", ".", "conv3_1", ",", "\"conv3_2\"", ")", "\n", "self", ".", "conv3_3", "=", "self", ".", "conv_layer", "(", "self", ".", "conv3_2", ",", "\"conv3_3\"", ")", "\n", "self", ".", "pool3", "=", "self", ".", "max_pool", "(", "self", ".", "conv3_3", ",", "'pool3'", ")", "\n", "\n", "self", ".", "conv4_1", "=", "self", ".", "conv_layer", "(", "self", ".", "pool3", ",", "\"conv4_1\"", ")", "\n", "self", ".", "conv4_2", "=", "self", ".", "conv_layer", "(", "self", ".", "conv4_1", ",", "\"conv4_2\"", ")", "\n", "self", ".", "conv4_3", "=", "self", ".", "conv_layer", "(", "self", ".", "conv4_2", ",", "\"conv4_3\"", ")", "\n", "self", ".", "pool4", "=", "self", ".", "max_pool", "(", "self", ".", "conv4_3", ",", "'pool4'", ")", "\n", "\n", "self", ".", "conv5_1", "=", "self", ".", "conv_layer", "(", "self", ".", "pool4", ",", "\"conv5_1\"", ")", "\n", "self", ".", "conv5_2", "=", "self", ".", "conv_layer", "(", "self", ".", "conv5_1", ",", "\"conv5_2\"", ")", "\n", "self", ".", "conv5_3", "=", "self", ".", "conv_layer", "(", "self", ".", "conv5_2", ",", "\"conv5_3\"", ")", "\n", "self", ".", "pool5", "=", "self", ".", "max_pool", "(", "self", ".", "conv5_3", ",", "'pool5'", ")", "\n", "\n", "\n", "print", "(", "\"build model finished: %ds\"", "%", "(", "time", ".", "time", "(", ")", "-", "start_time", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.avg_pool": [[74, 76], ["tensorflow.nn.avg_pool"], "methods", ["home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.avg_pool"], ["", "def", "avg_pool", "(", "self", ",", "bottom", ",", "name", ")", ":", "\n", "        ", "return", "tf", ".", "nn", ".", "avg_pool", "(", "bottom", ",", "ksize", "=", "[", "1", ",", "2", ",", "2", ",", "1", "]", ",", "strides", "=", "[", "1", ",", "2", ",", "2", ",", "1", "]", ",", "padding", "=", "'SAME'", ",", "name", "=", "name", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.max_pool": [[77, 79], ["tensorflow.nn.max_pool"], "methods", ["home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.max_pool"], ["", "def", "max_pool", "(", "self", ",", "bottom", ",", "name", ")", ":", "\n", "        ", "return", "tf", ".", "nn", ".", "max_pool", "(", "bottom", ",", "ksize", "=", "[", "1", ",", "2", ",", "2", ",", "1", "]", ",", "strides", "=", "[", "1", ",", "2", ",", "2", ",", "1", "]", ",", "padding", "=", "'SAME'", ",", "name", "=", "name", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.conv_layer": [[80, 91], ["tensorflow.variable_scope", "vgg16.Vgg16.get_conv_filter", "tensorflow.nn.conv2d", "vgg16.Vgg16.get_bias", "tensorflow.nn.bias_add", "tensorflow.nn.relu"], "methods", ["home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.get_conv_filter", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.get_bias"], ["", "def", "conv_layer", "(", "self", ",", "bottom", ",", "name", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "name", ")", ":", "\n", "            ", "filt", "=", "self", ".", "get_conv_filter", "(", "name", ")", "\n", "\n", "conv", "=", "tf", ".", "nn", ".", "conv2d", "(", "bottom", ",", "filt", ",", "[", "1", ",", "1", ",", "1", ",", "1", "]", ",", "padding", "=", "'SAME'", ")", "\n", "\n", "conv_biases", "=", "self", ".", "get_bias", "(", "name", ")", "\n", "bias", "=", "tf", ".", "nn", ".", "bias_add", "(", "conv", ",", "conv_biases", ")", "\n", "\n", "relu", "=", "tf", ".", "nn", ".", "relu", "(", "bias", ")", "\n", "return", "relu", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.fc_layer": [[92, 108], ["tensorflow.variable_scope", "bottom.get_shape().as_list", "tensorflow.reshape", "vgg16.Vgg16.get_fc_weight", "vgg16.Vgg16.get_bias", "tensorflow.nn.bias_add", "tensorflow.matmul", "bottom.get_shape"], "methods", ["home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.get_fc_weight", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.get_bias"], ["", "", "def", "fc_layer", "(", "self", ",", "bottom", ",", "name", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "name", ")", ":", "\n", "            ", "shape", "=", "bottom", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "\n", "dim", "=", "1", "\n", "for", "d", "in", "shape", "[", "1", ":", "]", ":", "\n", "                ", "dim", "*=", "d", "\n", "", "x", "=", "tf", ".", "reshape", "(", "bottom", ",", "[", "-", "1", ",", "dim", "]", ")", "\n", "\n", "weights", "=", "self", ".", "get_fc_weight", "(", "name", ")", "\n", "biases", "=", "self", ".", "get_bias", "(", "name", ")", "\n", "\n", "# Fully connected layer. Note that the '+' operation automatically", "\n", "# broadcasts the biases.", "\n", "fc", "=", "tf", ".", "nn", ".", "bias_add", "(", "tf", ".", "matmul", "(", "x", ",", "weights", ")", ",", "biases", ")", "\n", "\n", "return", "fc", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.get_conv_filter": [[109, 111], ["tensorflow.constant"], "methods", ["None"], ["", "", "def", "get_conv_filter", "(", "self", ",", "name", ")", ":", "\n", "        ", "return", "tf", ".", "constant", "(", "self", ".", "data_dict", "[", "name", "]", "[", "0", "]", ",", "name", "=", "\"filter\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.get_bias": [[112, 114], ["tensorflow.constant"], "methods", ["None"], ["", "def", "get_bias", "(", "self", ",", "name", ")", ":", "\n", "        ", "return", "tf", ".", "constant", "(", "self", ".", "data_dict", "[", "name", "]", "[", "1", "]", ",", "name", "=", "\"biases\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.Vgg16.get_fc_weight": [[115, 117], ["tensorflow.constant"], "methods", ["None"], ["", "def", "get_fc_weight", "(", "self", ",", "name", ")", ":", "\n", "        ", "return", "tf", ".", "constant", "(", "self", ".", "data_dict", "[", "name", "]", "[", "0", "]", ",", "name", "=", "\"weights\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.loss_perceptual": [[118, 124], ["zip", "vgg16.l1", "vgg16.l1"], "function", ["home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.l1", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.l1"], ["", "", "def", "loss_perceptual", "(", "pic1", ",", "pic2", ",", "pic3", ")", ":", "\n", "    ", "loss", "=", "0", "\n", "\n", "for", "o", ",", "c", ",", "g", "in", "zip", "(", "pic2", ",", "pic3", ",", "pic1", ")", ":", "\n", "        ", "loss", "+=", "l1", "(", "o", ",", "g", ")", "+", "l1", "(", "c", ",", "g", ")", "\n", "", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.l1": [[125, 127], ["tensorflow.reduce_sum", "tensorflow.abs"], "function", ["None"], ["", "def", "l1", "(", "pic1", ",", "pic2", ")", ":", "\n", "    ", "return", "tf", ".", "reduce_sum", "(", "tf", ".", "abs", "(", "pic1", "-", "pic2", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.gram_matrix": [[128, 135], ["tensorflow.shape", "tensorflow.reshape", "tensorflow.matmul", "tensorflow.stack", "tensorflow.cast"], "function", ["None"], ["", "def", "gram_matrix", "(", "x", ")", ":", "\n", "    ", "shape", "=", "tf", ".", "shape", "(", "x", ")", "\n", "B", ",", "H", ",", "W", ",", "C", "=", "shape", "[", "0", "]", ",", "shape", "[", "1", "]", ",", "shape", "[", "2", "]", ",", "shape", "[", "3", "]", "\n", "features", "=", "tf", ".", "reshape", "(", "x", ",", "tf", ".", "stack", "(", "[", "B", ",", "-", "1", ",", "C", "]", ")", ")", "\n", "gram", "=", "tf", ".", "matmul", "(", "features", ",", "features", ",", "transpose_a", "=", "True", ")", "\n", "gram", "=", "gram", "/", "tf", ".", "cast", "(", "C", "*", "H", "*", "W", ",", "x", ".", "dtype", ")", "\n", "return", "gram", "\n", "", "def", "new_gram", "(", "x", ")", ":", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.new_gram": [[135, 142], ["tensorflow.shape", "tensorflow.reshape", "tensorflow.matmul", "tensorflow.stack", "tensorflow.cast"], "function", ["None"], ["", "def", "new_gram", "(", "x", ")", ":", "\n", "    ", "shape", "=", "tf", ".", "shape", "(", "x", ")", "\n", "B", ",", "H", ",", "W", ",", "C", "=", "shape", "[", "0", "]", ",", "shape", "[", "1", "]", ",", "shape", "[", "2", "]", ",", "shape", "[", "3", "]", "\n", "features", "=", "tf", ".", "reshape", "(", "x", ",", "tf", ".", "stack", "(", "[", "B", ",", "-", "1", ",", "C", "]", ")", ")", "\n", "gram", "=", "tf", ".", "matmul", "(", "features", ",", "features", ",", "transpose_b", "=", "True", ")", "\n", "gram", "=", "gram", "/", "tf", ".", "cast", "(", "C", "*", "C", ",", "x", ".", "dtype", ")", "\n", "return", "gram", "\n", "", "def", "loss_style", "(", "output", ",", "vgg_gt", ")", ":", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.loss_style": [[142, 147], ["zip", "vgg16.l1", "vgg16.gram_matrix", "vgg16.gram_matrix"], "function", ["home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.l1", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.gram_matrix", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.gram_matrix"], ["", "def", "loss_style", "(", "output", ",", "vgg_gt", ")", ":", "\n", "    ", "loss", "=", "0", "\n", "for", "o", ",", "g", "in", "zip", "(", "output", ",", "vgg_gt", ")", ":", "\n", "        ", "loss", "+=", "l1", "(", "gram_matrix", "(", "o", ")", ",", "gram_matrix", "(", "g", ")", ")", "\n", "", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.loss_cor": [[148, 152], ["vgg16.l1", "vgg16.new_gram", "vgg16.new_gram"], "function", ["home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.l1", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.new_gram", "home.repos.pwc.inspect_result.vickyFox_Region-wise-Inpainting.vgg.vgg16.new_gram"], ["", "def", "loss_cor", "(", "output", ",", "vgg_gt", ")", ":", "\n", "    ", "loss", "=", "0", "\n", "loss_new", "=", "l1", "(", "new_gram", "(", "output", "[", "1", "]", ")", ",", "new_gram", "(", "vgg_gt", "[", "1", "]", ")", ")", "\n", "return", "loss_new", "", "", ""]]}