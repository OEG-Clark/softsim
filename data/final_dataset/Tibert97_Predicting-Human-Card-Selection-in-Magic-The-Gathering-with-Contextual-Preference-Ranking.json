{"home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.mtg_dataset.__init__": [[11, 39], ["list", "list", "list", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "open", "pickle.load", "f.close", "line.split.split.split", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "models.mtg_dataset.anchors.append", "models.mtg_dataset.positives.append", "models.mtg_dataset.negatives.append", "line[].split", "int", "int", "int"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "dir_path", ",", "max_id", ")", ":", "\n", "        ", "self", ".", "path", "=", "dir_path", "\n", "self", ".", "max_id", "=", "max_id", "\n", "self", ".", "positives", "=", "list", "(", ")", "\n", "self", ".", "negatives", "=", "list", "(", ")", "\n", "self", ".", "anchors", "=", "list", "(", ")", "\n", "with", "open", "(", "dir_path", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "data", "=", "pickle", ".", "load", "(", "f", ")", "\n", "f", ".", "close", "(", ")", "\n", "", "for", "line", "in", "data", ":", "\n", "            ", "line", "=", "line", ".", "split", "(", "';'", ")", "\n", "pos", "=", "torch", ".", "zeros", "(", "self", ".", "max_id", ")", "\n", "pos", "[", "int", "(", "line", "[", "0", "]", ")", "]", "=", "1", "\n", "neg", "=", "torch", ".", "zeros", "(", "self", ".", "max_id", ")", "\n", "if", "line", "[", "1", "]", ":", "\n", "                ", "neg", "[", "int", "(", "line", "[", "1", "]", ")", "]", "=", "1", "\n", "", "anch", "=", "torch", ".", "zeros", "(", "self", ".", "max_id", ")", "\n", "if", "line", "[", "2", "]", ":", "\n", "                ", "for", "card", "in", "line", "[", "2", "]", ".", "split", "(", "','", ")", ":", "\n", "                    ", "anch", "[", "int", "(", "card", ")", "]", "+=", "1", "\n", "", "", "self", ".", "anchors", ".", "append", "(", "anch", ")", "\n", "self", ".", "positives", ".", "append", "(", "pos", ")", "\n", "self", ".", "negatives", ".", "append", "(", "neg", ")", "\n", "\n", "", "self", ".", "anchors", "=", "torch", ".", "stack", "(", "self", ".", "anchors", ")", "\n", "self", ".", "positives", "=", "torch", ".", "stack", "(", "self", ".", "positives", ")", "\n", "self", ".", "negatives", "=", "torch", ".", "stack", "(", "self", ".", "negatives", ")", "\n", "del", "data", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.mtg_dataset.__len__": [[40, 42], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "anchors", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.mtg_dataset.__getitem__": [[43, 45], ["None"], "methods", ["None"], ["", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "return", "self", ".", "anchors", "[", "index", "]", ",", "self", ".", "positives", "[", "index", "]", ",", "self", ".", "negatives", "[", "index", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.mtg_metadataset.__init__": [[47, 55], ["print", "os.listdir", "open", "pickle.load", "pickle.load.__len__"], "methods", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.mtg_metadataset.__len__"], ["    ", "def", "__init__", "(", "self", ",", "path", ")", ":", "\n", "        ", "self", ".", "files", "=", "[", "path", "+", "file", "for", "file", "in", "os", ".", "listdir", "(", "path", ")", "]", "\n", "self", ".", "len", "=", "0", "\n", "for", "file", "in", "self", ".", "files", ":", "\n", "            ", "with", "open", "(", "file", ",", "'rb'", ")", "as", "f", ":", "\n", "                ", "dataset", "=", "pickle", ".", "load", "(", "f", ")", "\n", "self", ".", "len", "+=", "dataset", ".", "__len__", "(", ")", "\n", "", "", "print", "(", "'done'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.mtg_metadataset.__len__": [[56, 58], ["None"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "len", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.mtg_metadataset.__getitem__": [[59, 61], ["print"], "methods", ["None"], ["", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "print", "(", "'error'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.Siamese.__init__": [[64, 82], ["torch.Module.__init__", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Dropout", "torch.Dropout", "torch.Dropout", "torch.ELU", "torch.ELU", "torch.ELU", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Dropout", "torch.Dropout", "torch.Dropout", "torch.ELU", "torch.ELU", "torch.ELU", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Tanh", "torch.Tanh", "torch.Tanh"], "methods", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.Siamese.__init__"], ["    ", "def", "__init__", "(", "self", ",", "input_size", ",", "output_dim", ")", ":", "\n", "        ", "super", "(", "Siamese", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "input_size", "=", "input_size", "\n", "\n", "\n", "self", ".", "hidden_1", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Linear", "(", "input_size", ",", "512", ")", ",", "\n", "nn", ".", "Dropout", "(", "0.5", ")", ",", "\n", "nn", ".", "ELU", "(", ")", "\n", ")", "\n", "self", ".", "hidden_2", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Linear", "(", "512", ",", "128", ")", ",", "\n", "nn", ".", "Dropout", "(", "0.5", ")", ",", "\n", "nn", ".", "ELU", "(", ")", "\n", ")", "\n", "self", ".", "out", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Linear", "(", "128", ",", "output_dim", ")", ",", "\n", "nn", ".", "Tanh", "(", ")", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.Siamese.forward": [[84, 89], ["models.Siamese.hidden_1", "models.Siamese.hidden_2", "models.Siamese.out"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "hidden_1", "(", "x", ")", "\n", "x", "=", "self", ".", "hidden_2", "(", "x", ")", "\n", "x", "=", "self", ".", "out", "(", "x", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance": [[91, 93], ["torch.sum", "torch.sum", "torch.sum", "torch.pow", "torch.pow", "torch.pow"], "function", ["None"], ["", "", "def", "get_distance", "(", "positive", ",", "negative", ")", ":", "\n", "    ", "return", "torch", ".", "sum", "(", "torch", ".", "pow", "(", "positive", "-", "negative", ",", "2", ")", ",", "dim", "=", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.preprocess.reconstruct_pack": [[11, 28], ["range", "range", "list", "range", "range", "range", "len", "[].append", "[].append", "len", "len", "set"], "function", ["None"], ["def", "reconstruct_pack", "(", "picks", ")", ":", "\n", "    ", "packs", "=", "[", "[", "list", "(", ")", "for", "_", "in", "range", "(", "len", "(", "picks", ")", ")", "]", "for", "__", "in", "range", "(", "3", ")", "]", "\n", "for", "i", "in", "range", "(", "8", ")", ":", "\n", "        ", "for", "k", "in", "range", "(", "3", ")", ":", "\n", "            ", "for", "j", "in", "range", "(", "15", ")", ":", "\n", "                ", "if", "k", "%", "2", "==", "1", ":", "\n", "                    ", "packs", "[", "k", "]", "[", "i", "]", ".", "append", "(", "picks", "[", "(", "i", "+", "(", "-", "j", "%", "8", ")", ")", "%", "8", "]", "[", "j", "+", "k", "*", "15", "]", ")", "\n", "", "else", ":", "\n", "                    ", "packs", "[", "k", "]", "[", "i", "]", ".", "append", "(", "picks", "[", "(", "i", "+", "j", ")", "%", "8", "]", "[", "j", "+", "k", "*", "15", "]", ")", "\n", "", "", "", "", "counter", "=", "0", "\n", "for", "round", "in", "packs", ":", "\n", "        ", "for", "pack", "in", "round", ":", "\n", "            ", "try", ":", "\n", "                ", "assert", "len", "(", "pack", ")", "==", "len", "(", "set", "(", "pack", ")", ")", "\n", "", "except", ":", "\n", "                ", "return", "False", "\n", "", "", "", "return", "packs", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.preprocess.create_dict": [[30, 75], ["open", "csv.reader", "set", "dict", "list", "list.sort", "player_pool.split", "list.remove", "list.add", "list.add"], "function", ["None"], ["", "def", "create_dict", "(", "dir", ")", ":", "\n", "    ", "with", "open", "(", "dir", ",", "'r'", ")", "as", "f", ":", "\n", "        ", "reader", "=", "csv", ".", "reader", "(", "f", ")", "\n", "output", "=", "[", "line", "for", "line", "in", "reader", "]", "\n", "all_cards", "=", "set", "(", ")", "\n", "for", "draft", "in", "output", ":", "\n", "            ", "for", "player_pool", "in", "draft", "[", "2", ":", "]", ":", "\n", "                ", "cards", "=", "player_pool", ".", "split", "(", "','", ")", "\n", "last_card", "=", "None", "\n", "for", "card", "in", "cards", ":", "\n", "                    ", "if", "card", "[", "0", "]", "==", "'_'", ":", "\n", "                        ", "all_cards", ".", "remove", "(", "last_card", ")", "\n", "all_cards", ".", "add", "(", "last_card", "+", "','", "+", "card", ")", "\n", "", "else", ":", "\n", "                        ", "all_cards", ".", "add", "(", "card", ")", "\n", "last_card", "=", "card", "\n", "", "", "", "", "card_to_num", "=", "dict", "(", ")", "\n", "i", "=", "0", "\n", "all_cards", "=", "list", "(", "all_cards", ")", "\n", "all_cards", ".", "sort", "(", ")", "\n", "last_card_was_basic", "=", "False", "\n", "for", "card", "in", "all_cards", ":", "\n", "            ", "if", "'Plains'", "in", "card", ":", "\n", "                ", "card_to_num", "[", "card", "]", "=", "i", "\n", "last_card_was_basic", "=", "True", "\n", "", "elif", "'Forest'", "in", "card", ":", "\n", "                ", "card_to_num", "[", "card", "]", "=", "i", "\n", "last_card_was_basic", "=", "True", "\n", "", "elif", "'Swamp'", "in", "card", ":", "\n", "                ", "card_to_num", "[", "card", "]", "=", "i", "\n", "last_card_was_basic", "=", "True", "\n", "", "elif", "'Island'", "in", "card", ":", "\n", "                ", "card_to_num", "[", "card", "]", "=", "i", "\n", "last_card_was_basic", "=", "True", "\n", "", "elif", "'Mountain'", "in", "card", ":", "\n", "                ", "card_to_num", "[", "card", "]", "=", "i", "\n", "last_card_was_basic", "=", "True", "\n", "", "else", ":", "\n", "                ", "if", "last_card_was_basic", ":", "\n", "                    ", "i", "+=", "1", "\n", "last_card_was_basic", "=", "False", "\n", "", "card_to_num", "[", "card", "]", "=", "i", "\n", "i", "+=", "1", "\n", "\n", "", "", "return", "card_to_num", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.preprocess.write_preferences": [[76, 102], ["list", "range", "range", "range", "len", "list.append", "[].remove", "[].remove", "list.append", "str", "str", "str", "str"], "function", ["None"], ["", "", "def", "write_preferences", "(", "picks", ",", "packs", ",", "card_dict", ")", ":", "\n", "    ", "output", "=", "list", "(", ")", "\n", "for", "k", "in", "range", "(", "3", ")", ":", "\n", "        ", "for", "i", "in", "range", "(", "15", ")", ":", "\n", "            ", "for", "j", "in", "range", "(", "8", ")", ":", "\n", "                ", "pick", "=", "picks", "[", "j", "]", "[", "k", "*", "15", "+", "i", "]", "\n", "if", "k", "%", "2", "==", "1", ":", "\n", "                    ", "unpicked", "=", "[", "card", "for", "card", "in", "packs", "[", "k", "]", "[", "(", "j", "+", "i", ")", "%", "8", "]", "if", "card", "!=", "pick", "]", "\n", "", "else", ":", "\n", "                    ", "unpicked", "=", "[", "card", "for", "card", "in", "packs", "[", "k", "]", "[", "(", "j", "-", "i", ")", "%", "8", "]", "if", "card", "!=", "pick", "]", "\n", "", "assert", "len", "(", "unpicked", ")", "==", "15", "-", "1", "-", "i", "\n", "if", "k", "==", "0", "and", "i", "==", "0", ":", "\n", "                    ", "drafted_num", "=", "''", "\n", "", "else", ":", "\n", "                    ", "drafted", "=", "picks", "[", "j", "]", "[", ":", "k", "*", "15", "+", "i", "]", "\n", "drafted_num", "=", "','", ".", "join", "(", "[", "str", "(", "card_dict", "[", "i", "]", ")", "for", "i", "in", "drafted", "]", ")", "\n", "", "if", "unpicked", ":", "\n", "                    ", "for", "card", "in", "unpicked", ":", "\n", "                        ", "output", ".", "append", "(", "str", "(", "card_dict", "[", "pick", "]", ")", "+", "';'", "+", "str", "(", "card_dict", "[", "card", "]", ")", "+", "';'", "+", "drafted_num", ")", "\n", "", "", "else", ":", "\n", "                    ", "output", ".", "append", "(", "str", "(", "card_dict", "[", "pick", "]", ")", "+", "';'", "+", "';'", "+", "drafted_num", ")", "\n", "", "if", "k", "%", "2", "==", "1", ":", "\n", "                    ", "packs", "[", "k", "]", "[", "(", "j", "+", "i", ")", "%", "8", "]", ".", "remove", "(", "pick", ")", "\n", "", "else", ":", "\n", "                    ", "packs", "[", "k", "]", "[", "(", "j", "-", "i", ")", "%", "8", "]", ".", "remove", "(", "pick", ")", "\n", "", "", "", "", "return", "output", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.preprocess.preprocess_data": [[104, 128], ["open", "csv.reader", "list", "enumerate", "preprocess.reconstruct_pack", "player.split", "enumerate", "preprocess.write_preferences", "list.extend", "len", "open", "pickle.dump", "w.close", "range", "len", "str"], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.preprocess.reconstruct_pack", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.preprocess.write_preferences"], ["", "def", "preprocess_data", "(", "card_dict", ",", "dir", ",", "outfile", ")", ":", "\n", "    ", "with", "open", "(", "dir", ",", "'r'", ")", "as", "f", ":", "\n", "        ", "reader", "=", "csv", ".", "reader", "(", "f", ")", "\n", "file_num", "=", "0", "\n", "file_data", "=", "list", "(", ")", "\n", "for", "line", "in", "reader", ":", "\n", "            ", "splitted_line", "=", "[", "player", ".", "split", "(", "','", ")", "for", "player", "in", "line", "[", "2", ":", "]", "]", "\n", "for", "i", ",", "player", "in", "enumerate", "(", "splitted_line", ")", ":", "\n", "                ", "for", "j", ",", "pick", "in", "enumerate", "(", "player", ")", ":", "\n", "                    ", "if", "pick", "[", "0", "]", "==", "'_'", ":", "\n", "                        ", "player", "[", "j", "-", "1", "]", "=", "player", "[", "j", "-", "1", "]", "+", "','", "+", "pick", "\n", "player", "[", "j", "]", "=", "None", "\n", "", "", "splitted_line", "[", "i", "]", "=", "[", "splitted_line", "[", "i", "]", "[", "j", "]", "for", "j", "in", "range", "(", "len", "(", "splitted_line", "[", "i", "]", ")", ")", "if", "splitted_line", "[", "i", "]", "[", "j", "]", "]", "\n", "\n", "", "packs", "=", "reconstruct_pack", "(", "splitted_line", ")", "\n", "if", "packs", ":", "\n", "                ", "output", "=", "write_preferences", "(", "splitted_line", ",", "packs", ",", "card_dict", ")", "\n", "file_data", ".", "extend", "(", "output", ")", "\n", "", "if", "len", "(", "file_data", ")", ">=", "997920", ":", "\n", "                ", "with", "open", "(", "outfile", "+", "'train_data'", "+", "str", "(", "file_num", ")", "+", "'.pt'", ",", "'wb'", ")", "as", "w", ":", "\n", "                    ", "pickle", ".", "dump", "(", "file_data", "[", ":", "997920", "]", ",", "w", ")", "\n", "file_num", "+=", "1", "\n", "file_data", "=", "file_data", "[", "997920", ":", "]", "\n", "w", ".", "close", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.preprocess.preprocess_data_into_dataset": [[129, 135], ["os.listdir", "models.mtg_dataset", "open", "pickle.dump", "f.close"], "function", ["None"], ["", "", "", "", "", "def", "preprocess_data_into_dataset", "(", "inpath", ",", "outpath", ")", ":", "\n", "    ", "for", "file", "in", "os", ".", "listdir", "(", "inpath", ")", "[", "13", ":", "]", ":", "\n", "        ", "dataset", "=", "mtg_dataset", "(", "inpath", "+", "file", ",", "265", ")", "\n", "with", "open", "(", "outpath", "+", "file", ",", "'wb'", ")", "as", "f", ":", "\n", "            ", "pickle", ".", "dump", "(", "dataset", ",", "f", ")", "\n", "f", ".", "close", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.preprocess.preprocess_evaldata_into_picks": [[136, 175], ["os.listdir", "list", "open", "pickle.load", "list", "pickle.load.positives[].numpy", "pickle.load.anchors[].numpy", "list.append", "range", "open", "numpy.array", "numpy.save", "list", "numpy.argmax", "len", "pickle.load.anchors[].numpy", "pickle.load.positives[].numpy", "pickle.load.negatives[].numpy", "range", "sum", "numpy.argmax", "list.append", "list.append", "numpy.array", "numpy.array", "list.append", "pickle.load.negatives[].numpy", "pickle.load.negatives[].numpy", "numpy.argmax", "list", "str"], "function", ["None"], ["", "", "", "def", "preprocess_evaldata_into_picks", "(", "inpath", ",", "outpath", ")", ":", "\n", "    ", "j", "=", "0", "\n", "for", "file", "in", "os", ".", "listdir", "(", "inpath", ")", ":", "\n", "        ", "picks", "=", "list", "(", ")", "\n", "with", "open", "(", "inpath", "+", "file", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "data", "=", "pickle", ".", "load", "(", "f", ")", "\n", "cards_in_pack", "=", "list", "(", ")", "\n", "last_positive", "=", "data", ".", "positives", "[", "0", "]", ".", "numpy", "(", ")", "\n", "last_anchor", "=", "data", ".", "anchors", "[", "0", "]", ".", "numpy", "(", ")", "\n", "cards_in_pack", ".", "append", "(", "np", ".", "argmax", "(", "data", ".", "negatives", "[", "0", "]", ".", "numpy", "(", ")", ")", ")", "\n", "last_picks", "=", "[", "None", "for", "_", "in", "range", "(", "8", ")", "]", "\n", "for", "i", "in", "range", "(", "1", ",", "len", "(", "data", ".", "anchors", ")", ")", ":", "\n", "                ", "anchor", "=", "data", ".", "anchors", "[", "i", "]", ".", "numpy", "(", ")", "\n", "pick", "=", "data", ".", "positives", "[", "i", "]", ".", "numpy", "(", ")", "\n", "if", "sum", "(", "data", ".", "negatives", "[", "i", "]", ".", "numpy", "(", ")", ")", "==", "0", ":", "\n", "                    ", "negative", "=", "None", "\n", "", "else", ":", "\n", "                    ", "negative", "=", "np", ".", "argmax", "(", "data", ".", "negatives", "[", "i", "]", ".", "numpy", "(", ")", ")", "\n", "", "if", "(", "anchor", "==", "last_anchor", ")", ".", "all", "(", ")", "and", "(", "pick", "==", "last_positive", ")", ".", "all", "(", ")", ":", "\n", "                    ", "cards_in_pack", ".", "append", "(", "negative", ")", "\n", "", "else", ":", "\n", "                    ", "cards_in_pack", ".", "append", "(", "np", ".", "argmax", "(", "last_positive", ")", ")", "\n", "cards_in_pack", "=", "np", ".", "array", "(", "cards_in_pack", ")", "\n", "tmp", "=", "[", "cards_in_pack", ",", "last_anchor", ",", "last_positive", "]", "\n", "tmp", "=", "np", ".", "array", "(", "tmp", ")", "\n", "picks", ".", "append", "(", "tmp", ")", "\n", "\n", "last_positive", "=", "pick", "\n", "if", "negative", ":", "\n", "                        ", "cards_in_pack", "=", "[", "negative", "]", "\n", "", "else", ":", "\n", "                        ", "cards_in_pack", "=", "list", "(", ")", "\n", "", "last_anchor", "=", "anchor", "\n", "#fix io error", "\n", "", "", "", "with", "open", "(", "outpath", "+", "str", "(", "j", ")", "+", "'.npy'", ",", "'wb'", ")", "as", "outfile", ":", "\n", "            ", "picks", "=", "np", ".", "array", "(", "picks", ")", "\n", "np", ".", "save", "(", "outfile", ",", "picks", ")", "\n", "picks", "=", "list", "(", ")", "\n", "j", "+=", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.preprocess.main": [[176, 199], ["print", "utils.load_card_dict", "os.mkdir", "preprocess.preprocess_data", "print", "os.mkdir", "preprocess.preprocess_data_into_dataset", "print", "os.mkdir", "preprocess.preprocess_data", "print", "os.mkdir", "preprocess.preprocess_data_into_dataset", "print", "os.mkdir", "preprocess.preprocess_evaldata_into_picks", "os.path.dirname", "os.path.dirname", "os.path.dirname", "os.path.dirname", "os.path.dirname", "os.path.realpath", "os.path.realpath", "os.path.realpath", "os.path.realpath", "os.path.realpath"], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.load_card_dict", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.preprocess.preprocess_data", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.preprocess.preprocess_data_into_dataset", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.preprocess.preprocess_data", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.preprocess.preprocess_data_into_dataset", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.preprocess.preprocess_evaldata_into_picks"], ["", "", "", "def", "main", "(", "training_path", ",", "test_path", ")", ":", "\n", "    ", "print", "(", "'Preprocessing training data'", ")", "\n", "card_dict", "=", "utils", ".", "load_card_dict", "(", "'Data/card_dict.pt'", ")", "\n", "training_out", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "realpath", "(", "__file__", ")", ")", "+", "'/Data//training_data/'", "\n", "os", ".", "mkdir", "(", "training_out", ")", "\n", "preprocess_data", "(", "card_dict", ",", "training_path", ",", "training_out", ")", "\n", "print", "(", "'Preproessing training data into datasets'", ")", "\n", "training_dataset_out", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "realpath", "(", "__file__", ")", ")", "+", "'/Data//training_datasets/'", "\n", "os", ".", "mkdir", "(", "training_dataset_out", ")", "\n", "preprocess_data_into_dataset", "(", "training_out", ",", "training_dataset_out", ")", "\n", "\n", "print", "(", "'Preprocessing test data'", ")", "\n", "test_out", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "realpath", "(", "__file__", ")", ")", "+", "'/Data//test_data/'", "\n", "os", ".", "mkdir", "(", "test_out", ")", "\n", "preprocess_data", "(", "card_dict", ",", "test_path", ",", "test_out", ")", "\n", "print", "(", "'Preproessing test data into datasets'", ")", "\n", "test_dataset_out", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "realpath", "(", "__file__", ")", ")", "+", "'/Data//test_datasets/'", "\n", "os", ".", "mkdir", "(", "test_dataset_out", ")", "\n", "preprocess_data_into_dataset", "(", "test_out", ",", "test_dataset_out", ")", "\n", "print", "(", "'Creating pick files'", ")", "\n", "pick_out", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "realpath", "(", "__file__", ")", ")", "+", "'/Data//picks/'", "\n", "os", ".", "mkdir", "(", "pick_out", ")", "\n", "preprocess_evaldata_into_picks", "(", "test_dataset_out", ",", "pick_out", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.training.compute_siamese_embedding_error": [[20, 43], ["list", "network.eval", "numpy.mean", "torch.no_grad", "torch.no_grad", "torch.no_grad", "network", "network", "network", "loss_fn().item", "list.append", "numpy.array", "sklearn.manifold.TSNE().fit_transform", "matplotlib.scatter", "matplotlib.scatter", "matplotlib.scatter", "matplotlib.legend", "matplotlib.show", "loss_fn", "network.detach().squeeze().numpy", "network.detach().squeeze().numpy", "network.detach().squeeze().numpy", "sklearn.manifold.TSNE", "network.detach().squeeze", "network.detach().squeeze", "network.detach().squeeze", "network.detach", "network.detach", "network.detach"], "function", ["None"], ["def", "compute_siamese_embedding_error", "(", "dataloader", ",", "network", ",", "loss_fn", ",", "plot", "=", "False", ")", ":", "\n", "    ", "losses", "=", "list", "(", ")", "\n", "network", ".", "eval", "(", ")", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "        ", "i", "=", "0", "\n", "for", "anchor", ",", "positive", ",", "negative", "in", "dataloader", ":", "\n", "            ", "if", "i", "==", "10000", ":", "\n", "                ", "break", "\n", "", "out1", "=", "network", "(", "anchor", ")", "\n", "out2", "=", "network", "(", "positive", ")", "\n", "out3", "=", "network", "(", "negative", ")", "\n", "loss", "=", "loss_fn", "(", "out1", ",", "out2", ",", "out3", ")", ".", "item", "(", ")", "\n", "losses", ".", "append", "(", "loss", ")", "\n", "i", "+=", "1", "\n", "", "if", "plot", ":", "\n", "            ", "X", "=", "np", ".", "array", "(", "[", "out1", ".", "detach", "(", ")", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ",", "out2", ".", "detach", "(", ")", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ",", "out3", ".", "detach", "(", ")", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", "]", ")", "\n", "X", "=", "TSNE", "(", "n_components", "=", "2", ")", ".", "fit_transform", "(", "X", ")", "\n", "plt", ".", "scatter", "(", "X", "[", "0", "]", "[", "0", "]", ",", "X", "[", "0", "]", "[", "1", "]", ",", "label", "=", "'Anchor'", ")", "\n", "plt", ".", "scatter", "(", "X", "[", "1", "]", "[", "0", "]", ",", "X", "[", "1", "]", "[", "1", "]", ",", "label", "=", "'Positive'", ")", "\n", "plt", ".", "scatter", "(", "X", "[", "2", "]", "[", "0", "]", ",", "X", "[", "2", "]", "[", "1", "]", ",", "label", "=", "'Negative'", ")", "\n", "plt", ".", "legend", "(", ")", "\n", "plt", ".", "show", "(", ")", "\n", "", "", "return", "np", ".", "mean", "(", "losses", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.training.train_siamese": [[44, 110], ["list", "list", "list", "list", "list", "torch.nn.TripletMarginLoss", "torch.nn.TripletMarginLoss", "torch.nn.TripletMarginLoss", "torch.Adam", "range", "matplotlib.subplots", "ax1.twinx", "ax1.plot", "ax1.plot", "ax1.twinx.plot", "ax1.set_ylabel", "ax1.twinx.set_ylabel", "ax1.set_xlabel", "ax1.legend", "matplotlib.xlim", "matplotlib.show", "network.eval.parameters", "torch.no_grad", "torch.no_grad", "torch.no_grad", "network.eval.eval", "list.append", "utils.correct_picks", "print", "print", "list.append", "list.append", "network.eval.train", "list", "network.eval.train", "enumerate", "range", "range", "range", "training.compute_siamese_embedding_error", "print", "network.eval.eval", "len", "len", "len", "str", "str", "open", "torch.utils.data.DataLoader", "f.close", "optim.Adam.zero_grad", "network.eval.", "network.eval.", "network.eval.", "torch.nn.TripletMarginLoss.", "loss_fn.backward", "optim.Adam.step", "list.append", "torch.no_grad", "torch.no_grad", "torch.no_grad", "list.append", "list.append", "print", "print", "utils.correct_picks", "print", "print", "list.append", "list.append", "training.evaluate_preferences", "print", "list.append", "torch.save", "torch.save", "torch.save", "str", "pickle.load", "loss_fn.item", "training.compute_siamese_embedding_error", "numpy.mean", "open", "csv.writer", "csv.writer.writerow", "csv.writer.writerow", "network.eval.state_dict", "str", "str", "str", "str", "train_errors[].item", "test_errors[].item"], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.correct_picks", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.training.compute_siamese_embedding_error", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.correct_picks", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.training.evaluate_preferences", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.training.compute_siamese_embedding_error"], ["", "def", "train_siamese", "(", "files", ",", "eval_dataloader", ",", "epochs", ",", "network", ",", "pick_path", ")", ":", "\n", "    ", "train_errors", "=", "list", "(", ")", "\n", "test_errors", "=", "list", "(", ")", "\n", "comp_percentages", "=", "list", "(", ")", "\n", "average_distances", "=", "list", "(", ")", "\n", "correct_decisions", "=", "list", "(", ")", "\n", "loss_fn", "=", "torch", ".", "nn", ".", "TripletMarginLoss", "(", ")", "\n", "optimizer", "=", "optim", ".", "Adam", "(", "network", ".", "parameters", "(", ")", ",", "lr", "=", "1e-4", ")", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "        ", "network", "=", "network", ".", "eval", "(", ")", "\n", "test_errors", ".", "append", "(", "compute_siamese_embedding_error", "(", "eval_dataloader", ",", "network", ",", "loss_fn", ",", "plot", "=", "False", ")", ")", "\n", "correct_picks", ",", "pick_distance", "=", "utils", ".", "correct_picks", "(", "network", ",", "pick_path", ")", "\n", "print", "(", "'Correct decisions: '", "+", "str", "(", "correct_picks", ")", ")", "\n", "print", "(", "'Average distance: '", "+", "str", "(", "pick_distance", ")", ")", "\n", "average_distances", ".", "append", "(", "pick_distance", ")", "\n", "correct_decisions", ".", "append", "(", "correct_picks", ")", "\n", "", "for", "epoch", "in", "range", "(", "epochs", ")", ":", "\n", "        ", "network", ".", "train", "(", ")", "\n", "epoch_training_loss", "=", "list", "(", ")", "\n", "network", "=", "network", ".", "train", "(", ")", "\n", "for", "l", ",", "file", "in", "enumerate", "(", "files", ")", ":", "\n", "            ", "print", "(", "'Subepoch:'", "+", "str", "(", "l", ")", ")", "\n", "with", "open", "(", "file", ",", "'rb'", ")", "as", "f", ":", "\n", "                ", "dataloader", "=", "DataLoader", "(", "pickle", ".", "load", "(", "f", ")", ",", "batch_size", "=", "128", ")", "\n", "f", ".", "close", "(", ")", "\n", "", "for", "anchor", ",", "positive", ",", "negative", "in", "dataloader", ":", "\n", "                ", "optimizer", ".", "zero_grad", "(", ")", "\n", "out1", "=", "network", "(", "anchor", ")", "\n", "out2", "=", "network", "(", "positive", ")", "\n", "out3", "=", "network", "(", "negative", ")", "\n", "loss", "=", "loss_fn", "(", "out1", ",", "out2", ",", "out3", ")", "\n", "loss", ".", "backward", "(", ")", "\n", "optimizer", ".", "step", "(", ")", "\n", "epoch_training_loss", ".", "append", "(", "loss", ".", "item", "(", ")", ")", "\n", "", "network", "=", "network", ".", "eval", "(", ")", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "                ", "test_errors", ".", "append", "(", "compute_siamese_embedding_error", "(", "eval_dataloader", ",", "network", ",", "loss_fn", ",", "plot", "=", "False", ")", ")", "\n", "train_errors", ".", "append", "(", "np", ".", "mean", "(", "epoch_training_loss", ")", ")", "\n", "print", "(", "'Training error: '", "+", "str", "(", "train_errors", "[", "-", "1", "]", ".", "item", "(", ")", ")", ")", "\n", "print", "(", "'Test error: '", "+", "str", "(", "test_errors", "[", "-", "1", "]", ".", "item", "(", ")", ")", ")", "\n", "correct_picks", ",", "pick_distance", "=", "utils", ".", "correct_picks", "(", "network", ",", "pick_path", ")", "\n", "print", "(", "'Correct decisions: '", "+", "str", "(", "correct_picks", ")", ")", "\n", "print", "(", "'Average distance: '", "+", "str", "(", "pick_distance", ")", ")", "\n", "average_distances", ".", "append", "(", "pick_distance", ")", "\n", "correct_decisions", ".", "append", "(", "correct_picks", ")", "\n", "with", "open", "(", "'training_progress.csv'", ",", "'w'", ")", "as", "res", ":", "\n", "                    ", "writer", "=", "csv", ".", "writer", "(", "res", ")", "\n", "writer", ".", "writerow", "(", "correct_decisions", ")", "\n", "writer", ".", "writerow", "(", "average_distances", ")", "\n", "", "comp_percentage", "=", "evaluate_preferences", "(", "eval_dataloader", ",", "network", ")", "\n", "print", "(", "comp_percentage", ")", "\n", "comp_percentages", ".", "append", "(", "comp_percentage", ")", "\n", "torch", ".", "save", "(", "network", ".", "state_dict", "(", ")", ",", "'network.pt'", ")", "\n", "del", "dataloader", "\n", "", "", "", "fig", ",", "ax1", "=", "plt", ".", "subplots", "(", ")", "\n", "ax2", "=", "ax1", ".", "twinx", "(", ")", "\n", "ax1", ".", "plot", "(", "range", "(", "len", "(", "test_errors", ")", ")", ",", "test_errors", ",", "label", "=", "'Evaluation Error'", ",", "color", "=", "'orange'", ")", "\n", "ax1", ".", "plot", "(", "range", "(", "len", "(", "train_errors", ")", ")", ",", "train_errors", ",", "label", "=", "'Training Error'", ",", "color", "=", "'blue'", ")", "\n", "ax2", ".", "plot", "(", "range", "(", "len", "(", "correct_decisions", ")", ")", ",", "correct_decisions", ",", "label", "=", "'Correct picks'", ",", "color", "=", "'green'", ")", "\n", "ax1", ".", "set_ylabel", "(", "'Loss'", ")", "\n", "ax2", ".", "set_ylabel", "(", "'Correct comparisons'", ")", "\n", "ax1", ".", "set_xlabel", "(", "'Epoch'", ")", "\n", "ax1", ".", "legend", "(", "loc", "=", "0", ")", "\n", "plt", ".", "xlim", "(", "0", ",", "100", ")", "\n", "plt", ".", "show", "(", ")", "\n", "return", "network", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.training.load_network": [[111, 115], ["models.Siamese", "models.Siamese.load_state_dict", "torch.load", "torch.load", "torch.load"], "function", ["None"], ["", "def", "load_network", "(", "features", ",", "output_dim", ",", "path", ")", ":", "\n", "    ", "network", "=", "models", ".", "Siamese", "(", "features", ",", "output_dim", ")", "\n", "network", ".", "load_state_dict", "(", "torch", ".", "load", "(", "path", ")", ")", "\n", "return", "network", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.training.evaluate_preferences": [[116, 131], ["net.eval", "net", "net", "net", "range", "models.get_distance", "models.get_distance", "out1[].view", "out2[].view", "out1[].view", "out3[].view"], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance"], ["", "def", "evaluate_preferences", "(", "dataset", ",", "net", ")", ":", "\n", "    ", "comparisons", "=", "0", "\n", "correct_comparisons", "=", "0", "\n", "net", ".", "eval", "(", ")", "\n", "for", "anchor", ",", "positive", ",", "negative", "in", "dataset", ":", "\n", "        ", "if", "comparisons", "==", "100000", ":", "\n", "            ", "break", "\n", "", "comparisons", "+=", "anchor", ".", "shape", "[", "0", "]", "\n", "out1", "=", "net", "(", "anchor", ")", "\n", "out2", "=", "net", "(", "positive", ")", "\n", "out3", "=", "net", "(", "negative", ")", "\n", "for", "i", "in", "range", "(", "anchor", ".", "shape", "[", "0", "]", ")", ":", "\n", "            ", "if", "models", ".", "get_distance", "(", "out1", "[", "i", ",", ":", "]", ".", "view", "(", "1", ",", "-", "1", ")", ",", "out2", "[", "i", ",", ":", "]", ".", "view", "(", "1", ",", "-", "1", ")", ")", "<", "models", ".", "get_distance", "(", "out1", "[", "i", ",", ":", "]", ".", "view", "(", "1", ",", "-", "1", ")", ",", "out3", "[", "i", ",", ":", "]", ".", "view", "(", "1", ",", "-", "1", ")", ")", ":", "\n", "                ", "correct_comparisons", "+=", "1", "\n", "", "", "", "return", "correct_comparisons", "/", "comparisons", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.training.main": [[132, 145], ["models.Siamese", "list", "os.listdir", "training.train_siamese", "list.append", "open", "pickle.load", "torch.utils.data.DataLoader", "numpy.random.choice", "os.listdir"], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.training.train_siamese"], ["", "def", "main", "(", "training_path", ",", "test_path", ",", "pick_path", ")", ":", "\n", "    ", "num_feature", "=", "265", "\n", "epochs", "=", "50", "\n", "output_dim", "=", "256", "\n", "siamese", "=", "models", ".", "Siamese", "(", "num_feature", ",", "output_dim", ")", "\n", "\n", "training_files", "=", "list", "(", ")", "\n", "for", "file", "in", "os", ".", "listdir", "(", "training_path", ")", ":", "\n", "        ", "training_files", ".", "append", "(", "training_path", "+", "file", ")", "\n", "", "with", "open", "(", "test_path", "+", "np", ".", "random", ".", "choice", "(", "os", ".", "listdir", "(", "test_path", ")", ")", ",", "'rb'", ")", "as", "f", ":", "\n", "        ", "eval_dataset", "=", "pickle", ".", "load", "(", "f", ")", "\n", "\n", "", "siamese", "=", "train_siamese", "(", "files", "=", "training_files", ",", "eval_dataloader", "=", "DataLoader", "(", "eval_dataset", ",", "batch_size", "=", "64", ")", ",", "epochs", "=", "epochs", ",", "network", "=", "siamese", ",", "pick_path", "=", "pick_path", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.compute_pick_chance": [[17, 40], ["numpy.zeros", "numpy.zeros", "os.listdir", "open", "range", "open", "pickle.load", "outfile.write", "line.split.split", "str", "int", "int", "int", "str"], "function", ["None"], ["def", "compute_pick_chance", "(", "path", ")", ":", "\n", "    ", "counts", "=", "np", ".", "zeros", "(", "265", ")", "\n", "picks", "=", "np", ".", "zeros", "(", "265", ")", "\n", "\n", "for", "filename", "in", "os", ".", "listdir", "(", "path", ")", ":", "\n", "        ", "with", "open", "(", "path", "+", "filename", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "data", "=", "pickle", ".", "load", "(", "f", ")", "\n", "last_deck", "=", "None", "\n", "last_pick", "=", "None", "\n", "for", "line", "in", "data", ":", "\n", "                ", "line", "=", "line", ".", "split", "(", "';'", ")", "\n", "deck", "=", "line", "[", "2", "]", "\n", "if", "deck", "!=", "last_deck", "or", "line", "[", "0", "]", "!=", "last_pick", ":", "\n", "                    ", "counts", "[", "int", "(", "line", "[", "0", "]", ")", "]", "+=", "1", "\n", "picks", "[", "int", "(", "line", "[", "0", "]", ")", "]", "+=", "1", "\n", "\n", "", "if", "line", "[", "1", "]", ":", "\n", "                    ", "counts", "[", "int", "(", "line", "[", "1", "]", ")", "]", "+=", "1", "\n", "", "last_deck", "=", "deck", "\n", "last_pick", "=", "line", "[", "0", "]", "\n", "", "", "", "with", "open", "(", "'pickrates.csv'", ",", "'w'", ")", "as", "outfile", ":", "\n", "        ", "for", "i", "in", "range", "(", "265", ")", ":", "\n", "            ", "outfile", ".", "write", "(", "str", "(", "picks", "[", "i", "]", "/", "counts", "[", "i", "]", ")", "+", "';'", "+", "str", "(", "picks", "[", "i", "]", ")", "+", "'\\n'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.compute_firstpick_chance": [[41, 65], ["numpy.zeros", "numpy.zeros", "os.listdir", "open", "range", "open", "pickle.load", "outfile.write", "line.split.split", "str", "str", "int", "int", "int"], "function", ["None"], ["", "", "", "def", "compute_firstpick_chance", "(", "path", ")", ":", "\n", "    ", "counts", "=", "np", ".", "zeros", "(", "265", ")", "\n", "picks", "=", "np", ".", "zeros", "(", "265", ")", "\n", "\n", "for", "filename", "in", "os", ".", "listdir", "(", "path", ")", ":", "\n", "        ", "with", "open", "(", "path", "+", "filename", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "data", "=", "pickle", ".", "load", "(", "f", ")", "\n", "last_deck", "=", "None", "\n", "last_pick", "=", "None", "\n", "for", "line", "in", "data", ":", "\n", "                ", "line", "=", "line", ".", "split", "(", "';'", ")", "\n", "deck", "=", "line", "[", "2", "]", "\n", "if", "not", "deck", ":", "\n", "                    ", "if", "deck", "!=", "last_deck", "or", "line", "[", "0", "]", "!=", "last_pick", ":", "\n", "                        ", "counts", "[", "int", "(", "line", "[", "0", "]", ")", "]", "+=", "1", "\n", "picks", "[", "int", "(", "line", "[", "0", "]", ")", "]", "+=", "1", "\n", "\n", "", "if", "line", "[", "1", "]", ":", "\n", "                        ", "counts", "[", "int", "(", "line", "[", "1", "]", ")", "]", "+=", "1", "\n", "", "last_deck", "=", "deck", "\n", "last_pick", "=", "line", "[", "0", "]", "\n", "", "", "", "", "with", "open", "(", "'pickrates.csv'", ",", "'w'", ")", "as", "outfile", ":", "\n", "        ", "for", "i", "in", "range", "(", "265", ")", ":", "\n", "            ", "outfile", ".", "write", "(", "str", "(", "picks", "[", "i", "]", "/", "counts", "[", "i", "]", ")", "+", "';'", "+", "str", "(", "picks", "[", "i", "]", ")", "+", "'\\n'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.pickrates_to_cards": [[66, 77], ["open", "pickle.load", "open", "pickle.load.keys", "open", "outfile.write"], "function", ["None"], ["", "", "", "def", "pickrates_to_cards", "(", "dict_file", ",", "score_file", ")", ":", "\n", "    ", "with", "open", "(", "dict_file", ",", "'rb'", ")", "as", "file", ":", "\n", "        ", "card_dict", "=", "pickle", ".", "load", "(", "file", ")", "\n", "", "for", "key", "in", "[", "k", "for", "k", "in", "card_dict", ".", "keys", "(", ")", "]", ":", "\n", "        ", "card_dict", "[", "card_dict", "[", "key", "]", "]", "=", "key", "\n", "", "with", "open", "(", "score_file", ",", "'r'", ")", "as", "infile", ":", "\n", "        ", "with", "open", "(", "'named_'", "+", "score_file", ",", "'w'", ")", "as", "outfile", ":", "\n", "            ", "i", "=", "0", "\n", "for", "line", "in", "infile", ":", "\n", "                ", "outfile", ".", "write", "(", "card_dict", "[", "i", "]", "+", "';'", "+", "line", ")", "\n", "i", "+=", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.point_cloud": [[78, 132], ["network.eval.eval", "utils.load_card_dict", "list", "list", "list", "list", "list", "numpy.max", "matplotlib.scatter", "matplotlib.annotate", "matplotlib.savefig", "matplotlib.show", "open", "csv.reader", "torch.no_grad", "torch.no_grad", "torch.zeros", "torch.zeros", "network.eval.", "list.append", "list.append", "list.append", "list", "list.append", "range", "sklearn.manifold.TSNE().fit_transform", "models.get_distance", "load_card_dict.items", "float", "network.squeeze().numpy", "torch.zeros", "torch.zeros", "network.eval.", "list.append", "list.append", "c.split.split", "torch.Tensor().view", "torch.Tensor().view", "torch.Tensor().view", "torch.Tensor().view", "range", "range", "network.squeeze().numpy", "models.get_distance().item", "len", "list.append", "list.append", "sklearn.manifold.TSNE", "len", "network.squeeze", "len", "list.append", "list.append", "list.append", "list.append", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "network.squeeze", "models.get_distance"], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.load_card_dict", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance"], ["", "", "", "", "def", "point_cloud", "(", "network", ",", "embedding", "=", "None", ")", ":", "\n", "    ", "network", "=", "network", ".", "eval", "(", ")", "\n", "card_dict", "=", "load_card_dict", "(", "'card_dict.pt'", ")", "\n", "inv_card_dict", "=", "{", "v", ":", "k", "for", "k", ",", "v", "in", "card_dict", ".", "items", "(", ")", "}", "\n", "\n", "cards", "=", "list", "(", ")", "\n", "if", "embedding", "is", "not", "None", ":", "\n", "        ", "tsne_embedding", "=", "embedding", "\n", "", "embeddings", "=", "list", "(", ")", "\n", "labels", "=", "list", "(", ")", "\n", "colors", "=", "list", "(", ")", "\n", "\n", "distances", "=", "list", "(", ")", "\n", "with", "open", "(", "'Data/named_pickrates.csv'", ",", "'r'", ")", "as", "f", ":", "\n", "        ", "reader", "=", "csv", ".", "reader", "(", "f", ",", "delimiter", "=", "';'", ")", "\n", "lines", "=", "[", "line", "for", "line", "in", "reader", "]", "\n", "indizes", "=", "[", "i", "for", "i", "in", "range", "(", "265", ")", "]", "\n", "pickrates", "=", "[", "float", "(", "lines", "[", "index", "]", "[", "1", "]", ")", "for", "index", "in", "indizes", "]", "\n", "", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "        ", "empty", "=", "torch", ".", "zeros", "(", "1", ",", "265", ")", "\n", "anchor", "=", "network", "(", "empty", ")", "\n", "distances", ".", "append", "(", "0", ")", "\n", "embeddings", ".", "append", "(", "anchor", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "colors", ".", "append", "(", "'lime'", ")", "\n", "border_colors", "=", "list", "(", ")", "\n", "border_colors", ".", "append", "(", "'lime'", ")", "\n", "color_map", "=", "{", "'Colourless'", ":", "'purple'", ",", "'Red'", ":", "'red'", ",", "'Blue'", ":", "'blue'", ",", "'Green'", ":", "'green'", ",", "'White'", ":", "'lightgrey'", ",", "'Black'", ":", "'black'", "}", "\n", "for", "card", "in", "range", "(", "265", ")", ":", "\n", "            ", "tmp", "=", "torch", ".", "zeros", "(", "(", "1", ",", "265", ")", ")", "\n", "tmp", "[", "0", ",", "card", "]", "=", "1", "\n", "output", "=", "network", "(", "tmp", ")", "\n", "embeddings", ".", "append", "(", "output", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "distances", ".", "append", "(", "networks", ".", "get_distance", "(", "anchor", ",", "output", ")", ".", "item", "(", ")", ")", "\n", "c", "=", "lines", "[", "card", "]", "[", "4", "]", "\n", "c", "=", "c", ".", "split", "(", "','", ")", "\n", "if", "len", "(", "c", ")", "==", "1", ":", "\n", "                ", "colors", ".", "append", "(", "color_map", "[", "c", "[", "0", "]", "]", ")", "\n", "border_colors", ".", "append", "(", "color_map", "[", "c", "[", "0", "]", "]", ")", "\n", "", "elif", "len", "(", "c", ")", "==", "2", ":", "\n", "                ", "colors", ".", "append", "(", "color_map", "[", "c", "[", "0", "]", "]", ")", "\n", "border_colors", ".", "append", "(", "color_map", "[", "c", "[", "1", "]", "]", ")", "\n", "", "else", ":", "\n", "                ", "colors", ".", "append", "(", "'gold'", ")", "\n", "border_colors", ".", "append", "(", "'gold'", ")", "\n", "\n", "", "", "", "if", "embedding", "is", "None", ":", "\n", "        ", "tsne_embedding", "=", "TSNE", "(", "n_components", "=", "2", ")", ".", "fit_transform", "(", "embeddings", ")", "\n", "", "tsne_distances", "=", "[", "networks", ".", "get_distance", "(", "torch", ".", "Tensor", "(", "tsne_embedding", "[", "0", "]", ")", ".", "view", "(", "1", ",", "-", "1", ")", ",", "torch", ".", "Tensor", "(", "tsne_embedding", "[", "i", "]", ")", ".", "view", "(", "1", ",", "-", "1", ")", ")", "for", "i", "in", "range", "(", "1", ",", "len", "(", "tsne_embedding", ")", ")", "]", "\n", "max_distance", "=", "np", ".", "max", "(", "distances", ")", "\n", "plt", ".", "scatter", "(", "tsne_embedding", "[", ":", ",", "0", "]", ",", "tsne_embedding", "[", ":", ",", "1", "]", ",", "c", "=", "colors", ",", "edgecolors", "=", "border_colors", ")", "\n", "plt", ".", "annotate", "(", "'Anchor'", ",", "(", "tsne_embedding", "[", "0", ",", "0", "]", ",", "tsne_embedding", "[", "0", ",", "1", "]", ")", ")", "\n", "plt", ".", "savefig", "(", "'plots/point_cloud.pdf'", ",", "bbox_inches", "=", "'tight'", ")", "\n", "plt", ".", "show", "(", ")", "\n", "return", "tsne_embedding", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.point_cloud_rarity": [[133, 197], ["network.eval.eval", "utils.load_card_dict", "list", "list", "list", "list", "list", "numpy.max", "matplotlib.scatter", "matplotlib.annotate", "utils.construct_ranking", "print", "matplotlib.savefig", "matplotlib.show", "open", "csv.reader", "torch.no_grad", "torch.no_grad", "torch.zeros", "torch.zeros", "network.eval.", "list.append", "list.append", "list.append", "list", "list.append", "range", "sklearn.manifold.TSNE().fit_transform", "models.get_distance", "open", "csv.writer", "range", "print", "numpy.argmax", "load_card_dict.items", "float", "network.squeeze().numpy", "torch.zeros", "torch.zeros", "network.eval.", "list.append", "list.append", "c.split.split", "torch.Tensor().view", "torch.Tensor().view", "torch.Tensor().view", "torch.Tensor().view", "range", "lines[].extend", "csv.writer.writerow", "range", "network.squeeze().numpy", "models.get_distance().item", "len", "list.append", "list.append", "sklearn.manifold.TSNE", "len", "len", "network.squeeze", "len", "list.append", "list.append", "list.append", "list.append", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "network.squeeze", "models.get_distance"], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.load_card_dict", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.construct_ranking", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance"], ["", "def", "point_cloud_rarity", "(", "network", ",", "embedding", "=", "None", ")", ":", "\n", "    ", "network", "=", "network", ".", "eval", "(", ")", "\n", "card_dict", "=", "load_card_dict", "(", "'card_dict.pt'", ")", "\n", "inv_card_dict", "=", "{", "v", ":", "k", "for", "k", ",", "v", "in", "card_dict", ".", "items", "(", ")", "}", "\n", "\n", "cards", "=", "list", "(", ")", "\n", "if", "embedding", "is", "not", "None", ":", "\n", "        ", "tsne_embedding", "=", "embedding", "\n", "", "embeddings", "=", "list", "(", ")", "\n", "labels", "=", "list", "(", ")", "\n", "colors", "=", "list", "(", ")", "\n", "\n", "distances", "=", "list", "(", ")", "\n", "with", "open", "(", "'named_pickrates.csv'", ",", "'r'", ")", "as", "f", ":", "\n", "        ", "reader", "=", "csv", ".", "reader", "(", "f", ",", "delimiter", "=", "';'", ")", "\n", "lines", "=", "[", "line", "for", "line", "in", "reader", "]", "\n", "indizes", "=", "[", "i", "for", "i", "in", "range", "(", "265", ")", "]", "\n", "pickrates", "=", "[", "float", "(", "lines", "[", "index", "]", "[", "1", "]", ")", "for", "index", "in", "indizes", "]", "\n", "", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "        ", "empty", "=", "torch", ".", "zeros", "(", "1", ",", "265", ")", "\n", "anchor", "=", "network", "(", "empty", ")", "\n", "distances", ".", "append", "(", "0", ")", "\n", "embeddings", ".", "append", "(", "anchor", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "colors", ".", "append", "(", "'lime'", ")", "\n", "border_colors", "=", "list", "(", ")", "\n", "border_colors", ".", "append", "(", "'lime'", ")", "\n", "color_map", "=", "{", "'C'", ":", "'black'", ",", "'U'", ":", "'silver'", ",", "'R'", ":", "'gold'", ",", "'M'", ":", "'brown'", "}", "\n", "for", "card", "in", "range", "(", "265", ")", ":", "\n", "            ", "tmp", "=", "torch", ".", "zeros", "(", "(", "1", ",", "265", ")", ")", "\n", "tmp", "[", "0", ",", "card", "]", "=", "1", "\n", "output", "=", "network", "(", "tmp", ")", "\n", "embeddings", ".", "append", "(", "output", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "distances", ".", "append", "(", "networks", ".", "get_distance", "(", "anchor", ",", "output", ")", ".", "item", "(", ")", ")", "\n", "c", "=", "lines", "[", "card", "]", "[", "3", "]", "\n", "c", "=", "c", ".", "split", "(", "','", ")", "\n", "if", "len", "(", "c", ")", "==", "1", ":", "\n", "                ", "colors", ".", "append", "(", "color_map", "[", "c", "[", "0", "]", "]", ")", "\n", "border_colors", ".", "append", "(", "color_map", "[", "c", "[", "0", "]", "]", ")", "\n", "", "elif", "len", "(", "c", ")", "==", "2", ":", "\n", "                ", "colors", ".", "append", "(", "color_map", "[", "c", "[", "0", "]", "]", ")", "\n", "border_colors", ".", "append", "(", "color_map", "[", "c", "[", "1", "]", "]", ")", "\n", "", "else", ":", "\n", "                ", "colors", ".", "append", "(", "'gold'", ")", "\n", "border_colors", ".", "append", "(", "'gold'", ")", "\n", "\n", "", "", "", "if", "embedding", "is", "None", ":", "\n", "        ", "tsne_embedding", "=", "TSNE", "(", "n_components", "=", "2", ")", ".", "fit_transform", "(", "embeddings", ")", "\n", "", "tsne_distances", "=", "[", "networks", ".", "get_distance", "(", "torch", ".", "Tensor", "(", "tsne_embedding", "[", "0", "]", ")", ".", "view", "(", "1", ",", "-", "1", ")", ",", "torch", ".", "Tensor", "(", "tsne_embedding", "[", "i", "]", ")", ".", "view", "(", "1", ",", "-", "1", ")", ")", "for", "i", "in", "range", "(", "1", ",", "len", "(", "tsne_embedding", ")", ")", "]", "\n", "max_distance", "=", "np", ".", "max", "(", "distances", ")", "\n", "plt", ".", "scatter", "(", "tsne_embedding", "[", ":", ",", "0", "]", ",", "tsne_embedding", "[", ":", ",", "1", "]", ",", "c", "=", "colors", ",", "edgecolors", "=", "border_colors", ")", "\n", "plt", ".", "annotate", "(", "'Anchor'", ",", "(", "tsne_embedding", "[", "0", ",", "0", "]", ",", "tsne_embedding", "[", "0", ",", "1", "]", ")", ")", "\n", "\n", "with", "open", "(", "'plot_understanding.csv'", ",", "'w'", ")", "as", "tmp", ":", "\n", "        ", "writer", "=", "csv", ".", "writer", "(", "tmp", ")", "\n", "for", "i", "in", "range", "(", "len", "(", "tsne_embedding", ")", "-", "1", ")", ":", "\n", "            ", "lines", "[", "i", "]", ".", "extend", "(", "tsne_embedding", "[", "i", "+", "1", "]", "[", ":", "]", ")", "\n", "writer", ".", "writerow", "(", "lines", "[", "i", "]", ")", "\n", "", "", "rank", "=", "construct_ranking", "(", "distances", ",", "reverse", "=", "False", ")", "\n", "for", "card", "in", "rank", "[", "1", ":", "]", ":", "\n", "        ", "print", "(", "inv_card_dict", "[", "card", "-", "1", "]", ")", "\n", "", "print", "(", "np", ".", "argmax", "(", "pickrates", ")", ")", "\n", "plt", ".", "savefig", "(", "'plots/point_cloud_rarity.pdf'", ",", "bbox_inches", "=", "'tight'", ")", "\n", "plt", ".", "show", "(", ")", "\n", "return", "tsne_embedding", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.plot_distance_against_fpr": [[198, 222], ["network.eval.eval", "list", "elements.sort", "matplotlib.scatter", "matplotlib.xlabel", "matplotlib.ylabel", "matplotlib.savefig", "open", "csv.reader", "torch.no_grad", "torch.no_grad", "torch.zeros", "torch.zeros", "network.eval.", "range", "float", "torch.zeros", "torch.zeros", "network.eval.", "list.append", "range", "range", "models.get_distance().item", "models.get_distance"], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance"], ["", "def", "plot_distance_against_fpr", "(", "network", ")", ":", "\n", "    ", "network", "=", "network", ".", "eval", "(", ")", "\n", "distances", "=", "list", "(", ")", "\n", "with", "open", "(", "'named_firstpickrates.csv'", ",", "'r'", ")", "as", "f", ":", "\n", "        ", "reader", "=", "csv", ".", "reader", "(", "f", ",", "delimiter", "=", "';'", ")", "\n", "lines", "=", "[", "line", "for", "line", "in", "reader", "]", "\n", "indizes", "=", "[", "i", "for", "i", "in", "range", "(", "265", ")", "]", "\n", "pickrates", "=", "[", "float", "(", "lines", "[", "index", "]", "[", "1", "]", ")", "for", "index", "in", "indizes", "]", "\n", "", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "        ", "empty", "=", "torch", ".", "zeros", "(", "1", ",", "265", ")", "\n", "anchor", "=", "network", "(", "empty", ")", "\n", "for", "card", "in", "range", "(", "265", ")", ":", "\n", "            ", "tmp", "=", "torch", ".", "zeros", "(", "(", "1", ",", "265", ")", ")", "\n", "tmp", "[", "0", ",", "card", "]", "=", "1", "\n", "output", "=", "network", "(", "tmp", ")", "\n", "distances", ".", "append", "(", "networks", ".", "get_distance", "(", "anchor", ",", "output", ")", ".", "item", "(", ")", ")", "\n", "\n", "", "", "elements", "=", "[", "(", "pickrates", "[", "i", "]", ",", "distances", "[", "i", "]", ")", "for", "i", "in", "range", "(", "265", ")", "]", "\n", "elements", ".", "sort", "(", "key", "=", "lambda", "v", ":", "v", "[", "0", "]", ")", "\n", "\n", "plt", ".", "scatter", "(", "[", "element", "[", "0", "]", "for", "element", "in", "elements", "]", ",", "[", "element", "[", "1", "]", "for", "element", "in", "elements", "]", ",", "alpha", "=", "0.6", ")", "\n", "plt", ".", "xlabel", "(", "'First-pick rate'", ")", "\n", "plt", ".", "ylabel", "(", "'Distance to empty set'", ")", "\n", "plt", ".", "savefig", "(", "'plots/fpr_distance_2.pdf'", ",", "bbox_inches", "=", "'tight'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.point_cloud_anchors": [[223, 291], ["network.eval.eval", "utils.load_card_dict", "list", "list", "list", "list", "list", "numpy.max", "matplotlib.scatter", "matplotlib.annotate", "matplotlib.savefig", "matplotlib.show", "open", "csv.reader", "torch.no_grad", "torch.no_grad", "torch.zeros", "torch.zeros", "network.eval.", "list.append", "list.append", "list.append", "list", "list.append", "range", "range", "range", "sklearn.manifold.TSNE().fit_transform", "models.get_distance", "load_card_dict.items", "float", "sum.squeeze().numpy", "torch.zeros", "torch.zeros", "network.eval.", "list.append", "list.append", "list.append", "list.append", "torch.zeros", "torch.zeros", "range", "list.append", "list.append", "list.append", "torch.Tensor().view", "torch.Tensor().view", "torch.Tensor().view", "torch.Tensor().view", "range", "range", "network.squeeze().numpy", "models.get_distance().item", "network.eval.squeeze().numpy", "open", "numpy.load", "torch.Tensor", "torch.Tensor", "list.append", "list.append", "list.append", "sklearn.manifold.TSNE", "len", "sum.squeeze", "sum", "network.eval.squeeze().numpy", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "network.squeeze", "models.get_distance", "network.eval.squeeze", "numpy.random.choice", "numpy.random.randint", "os.listdir", "numpy.random.randint", "network.eval.squeeze", "network.eval.", "network.eval."], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.load_card_dict", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance"], ["", "def", "point_cloud_anchors", "(", "network", ",", "embedding", "=", "None", ")", ":", "\n", "    ", "network", "=", "network", ".", "eval", "(", ")", "\n", "card_dict", "=", "load_card_dict", "(", "'card_dict.pt'", ")", "\n", "inv_card_dict", "=", "{", "v", ":", "k", "for", "k", ",", "v", "in", "card_dict", ".", "items", "(", ")", "}", "\n", "\n", "cards", "=", "list", "(", ")", "\n", "if", "embedding", "is", "not", "None", ":", "\n", "        ", "tsne_embedding", "=", "embedding", "\n", "", "embeddings", "=", "list", "(", ")", "\n", "labels", "=", "list", "(", ")", "\n", "colors", "=", "list", "(", ")", "\n", "\n", "distances", "=", "list", "(", ")", "\n", "with", "open", "(", "'named_pickrates.csv'", ",", "'r'", ")", "as", "f", ":", "\n", "        ", "reader", "=", "csv", ".", "reader", "(", "f", ",", "delimiter", "=", "';'", ")", "\n", "lines", "=", "[", "line", "for", "line", "in", "reader", "]", "\n", "indizes", "=", "[", "i", "for", "i", "in", "range", "(", "265", ")", "]", "\n", "pickrates", "=", "[", "float", "(", "lines", "[", "index", "]", "[", "1", "]", ")", "for", "index", "in", "indizes", "]", "\n", "", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "        ", "empty", "=", "torch", ".", "zeros", "(", "1", ",", "265", ")", "\n", "anchor", "=", "network", "(", "empty", ")", "\n", "distances", ".", "append", "(", "0", ")", "\n", "embeddings", ".", "append", "(", "anchor", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "colors", ".", "append", "(", "'lime'", ")", "\n", "border_colors", "=", "list", "(", ")", "\n", "border_colors", ".", "append", "(", "'lime'", ")", "\n", "color_map", "=", "{", "'Colourless'", ":", "'purple'", ",", "'Red'", ":", "'red'", ",", "'Blue'", ":", "'blue'", ",", "'Green'", ":", "'green'", ",", "'White'", ":", "'beige'", ",", "'Black'", ":", "'black'", "}", "\n", "for", "card", "in", "range", "(", "265", ")", ":", "\n", "            ", "tmp", "=", "torch", ".", "zeros", "(", "(", "1", ",", "265", ")", ")", "\n", "tmp", "[", "0", ",", "card", "]", "=", "1", "\n", "output", "=", "network", "(", "tmp", ")", "\n", "embeddings", ".", "append", "(", "output", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "distances", ".", "append", "(", "networks", ".", "get_distance", "(", "anchor", ",", "output", ")", ".", "item", "(", ")", ")", "\n", "colors", ".", "append", "(", "'black'", ")", "\n", "border_colors", ".", "append", "(", "'black'", ")", "\n", "\n", "", "for", "i", "in", "range", "(", "50", ")", ":", "\n", "            ", "tmp", "=", "torch", ".", "zeros", "(", "(", "1", ",", "265", ")", ")", "\n", "for", "_", "in", "range", "(", "45", ")", ":", "\n", "                ", "tmp", "[", "0", ",", "np", ".", "random", ".", "randint", "(", "265", ")", "]", "=", "1", "\n", "", "embeddings", ".", "append", "(", "network", "(", "tmp", ")", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "colors", ".", "append", "(", "'red'", ")", "\n", "border_colors", ".", "append", "(", "'red'", ")", "\n", "\n", "", "for", "i", "in", "range", "(", "50", ")", ":", "\n", "            ", "with", "open", "(", "'E:/picks_2/'", "+", "np", ".", "random", ".", "choice", "(", "os", ".", "listdir", "(", "'E:/picks_2/'", ")", ")", ",", "'rb'", ")", "as", "pick_file", ":", "\n", "                ", "some_picks", "=", "np", ".", "load", "(", "pick_file", ",", "allow_pickle", "=", "True", ")", "\n", "anchor", "=", "0", "\n", "while", "anchor", "!=", "44", ":", "\n", "                    ", "anchor_array", "=", "some_picks", "[", "np", ".", "random", ".", "randint", "(", "some_picks", ".", "shape", "[", "0", "]", ")", "]", "\n", "anchor", "=", "sum", "(", "anchor_array", "[", "1", "]", ")", "\n", "", "input", "=", "anchor_array", "[", "1", "]", "+", "anchor_array", "[", "2", "]", "\n", "tmp", "=", "torch", ".", "Tensor", "(", "input", ")", "\n", "embeddings", ".", "append", "(", "network", "(", "tmp", ")", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "colors", ".", "append", "(", "'blue'", ")", "\n", "border_colors", ".", "append", "(", "'blue'", ")", "\n", "\n", "\n", "\n", "", "", "", "if", "embedding", "is", "None", ":", "\n", "        ", "tsne_embedding", "=", "TSNE", "(", "n_components", "=", "2", ")", ".", "fit_transform", "(", "embeddings", ")", "\n", "", "tsne_distances", "=", "[", "networks", ".", "get_distance", "(", "torch", ".", "Tensor", "(", "tsne_embedding", "[", "0", "]", ")", ".", "view", "(", "1", ",", "-", "1", ")", ",", "torch", ".", "Tensor", "(", "tsne_embedding", "[", "i", "]", ")", ".", "view", "(", "1", ",", "-", "1", ")", ")", "for", "i", "in", "range", "(", "1", ",", "len", "(", "tsne_embedding", ")", ")", "]", "\n", "max_distance", "=", "np", ".", "max", "(", "distances", ")", "\n", "plt", ".", "scatter", "(", "tsne_embedding", "[", ":", ",", "0", "]", ",", "tsne_embedding", "[", ":", ",", "1", "]", ",", "c", "=", "colors", ",", "edgecolors", "=", "border_colors", ")", "\n", "plt", ".", "annotate", "(", "'Anchor'", ",", "(", "tsne_embedding", "[", "0", ",", "0", "]", ",", "tsne_embedding", "[", "0", ",", "1", "]", ")", ")", "\n", "plt", ".", "savefig", "(", "'plots/point_cloud_sets.pdf'", ",", "bbox_inches", "=", "'tight'", ")", "\n", "plt", ".", "show", "(", ")", "\n", "return", "tsne_embedding", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.point_cloud_anchors_colors": [[292, 356], ["network.eval.eval", "utils.load_card_dict", "list", "list", "list", "list", "list", "numpy.max", "matplotlib.scatter", "matplotlib.annotate", "matplotlib.savefig", "matplotlib.show", "open", "csv.reader", "torch.no_grad", "torch.no_grad", "torch.zeros", "torch.zeros", "network.eval.", "list.append", "list.append", "list.append", "list", "list.append", "range", "range", "sklearn.manifold.TSNE().fit_transform", "models.get_distance", "load_card_dict.items", "float", "sum.squeeze().numpy", "torch.zeros", "torch.zeros", "network.eval.", "list.append", "list.append", "list.append", "list.append", "torch.Tensor().view", "torch.Tensor().view", "torch.Tensor().view", "torch.Tensor().view", "range", "range", "network.squeeze().numpy", "models.get_distance().item", "open", "numpy.load", "sklearn.manifold.TSNE", "len", "sum.squeeze", "sum", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "network.squeeze", "models.get_distance", "numpy.random.choice", "utils.matching_colors", "os.listdir", "numpy.random.randint", "torch.Tensor", "torch.Tensor", "list.append", "list.append", "network.eval.squeeze().numpy", "network.eval.squeeze", "network.eval."], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.load_card_dict", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.matching_colors"], ["", "def", "point_cloud_anchors_colors", "(", "network", ",", "embedding", "=", "None", ")", ":", "\n", "    ", "network", "=", "network", ".", "eval", "(", ")", "\n", "card_dict", "=", "load_card_dict", "(", "'card_dict.pt'", ")", "\n", "inv_card_dict", "=", "{", "v", ":", "k", "for", "k", ",", "v", "in", "card_dict", ".", "items", "(", ")", "}", "\n", "\n", "cards", "=", "list", "(", ")", "\n", "if", "embedding", "is", "not", "None", ":", "\n", "        ", "tsne_embedding", "=", "embedding", "\n", "", "embeddings", "=", "list", "(", ")", "\n", "labels", "=", "list", "(", ")", "\n", "colors", "=", "list", "(", ")", "\n", "\n", "distances", "=", "list", "(", ")", "\n", "with", "open", "(", "'named_pickrates.csv'", ",", "'r'", ")", "as", "f", ":", "\n", "        ", "reader", "=", "csv", ".", "reader", "(", "f", ",", "delimiter", "=", "';'", ")", "\n", "lines", "=", "[", "line", "for", "line", "in", "reader", "]", "\n", "indizes", "=", "[", "i", "for", "i", "in", "range", "(", "265", ")", "]", "\n", "pickrates", "=", "[", "float", "(", "lines", "[", "index", "]", "[", "1", "]", ")", "for", "index", "in", "indizes", "]", "\n", "", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "        ", "empty", "=", "torch", ".", "zeros", "(", "1", ",", "265", ")", "\n", "anchor", "=", "network", "(", "empty", ")", "\n", "distances", ".", "append", "(", "0", ")", "\n", "embeddings", ".", "append", "(", "anchor", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "colors", ".", "append", "(", "'lime'", ")", "\n", "border_colors", "=", "list", "(", ")", "\n", "border_colors", ".", "append", "(", "'lime'", ")", "\n", "color_map", "=", "{", "'Colourless'", ":", "'purple'", ",", "'Red'", ":", "'red'", ",", "'Blue'", ":", "'blue'", ",", "'Green'", ":", "'green'", ",", "'White'", ":", "'beige'", ",", "'Black'", ":", "'black'", "}", "\n", "for", "card", "in", "range", "(", "265", ")", ":", "\n", "            ", "tmp", "=", "torch", ".", "zeros", "(", "(", "1", ",", "265", ")", ")", "\n", "tmp", "[", "0", ",", "card", "]", "=", "1", "\n", "output", "=", "network", "(", "tmp", ")", "\n", "embeddings", ".", "append", "(", "output", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "distances", ".", "append", "(", "networks", ".", "get_distance", "(", "anchor", ",", "output", ")", ".", "item", "(", ")", ")", "\n", "colors", ".", "append", "(", "'grey'", ")", "\n", "border_colors", ".", "append", "(", "'black'", ")", "\n", "\n", "", "for", "i", "in", "range", "(", "50", ")", ":", "\n", "            ", "with", "open", "(", "'E:/picks_2/'", "+", "np", ".", "random", ".", "choice", "(", "os", ".", "listdir", "(", "'E:/picks_2/'", ")", ")", ",", "'rb'", ")", "as", "pick_file", ":", "\n", "                ", "some_picks", "=", "np", ".", "load", "(", "pick_file", ",", "allow_pickle", "=", "True", ")", "\n", "anchor", "=", "0", "\n", "c", "=", "False", "\n", "while", "anchor", "!=", "44", "or", "not", "c", ":", "\n", "                    ", "anchor_array", "=", "some_picks", "[", "np", ".", "random", ".", "randint", "(", "some_picks", ".", "shape", "[", "0", "]", ")", "]", "\n", "anchor", "=", "sum", "(", "anchor_array", "[", "1", "]", ")", "\n", "input", "=", "anchor_array", "[", "1", "]", "+", "anchor_array", "[", "2", "]", "\n", "if", "anchor", "==", "44", ":", "\n", "                        ", "c", "=", "matching_colors", "(", "lines", ",", "input", ",", "'Red'", ")", "\n", "if", "c", ":", "\n", "\n", "                            ", "tmp", "=", "torch", ".", "Tensor", "(", "input", ")", "\n", "embeddings", ".", "append", "(", "network", "(", "tmp", ")", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "colors", ".", "append", "(", "color_map", "[", "c", "]", ")", "\n", "\n", "\n", "\n", "", "", "", "", "", "", "if", "embedding", "is", "None", ":", "\n", "        ", "tsne_embedding", "=", "TSNE", "(", "n_components", "=", "2", ")", ".", "fit_transform", "(", "embeddings", ")", "\n", "", "tsne_distances", "=", "[", "networks", ".", "get_distance", "(", "torch", ".", "Tensor", "(", "tsne_embedding", "[", "0", "]", ")", ".", "view", "(", "1", ",", "-", "1", ")", ",", "torch", ".", "Tensor", "(", "tsne_embedding", "[", "i", "]", ")", ".", "view", "(", "1", ",", "-", "1", ")", ")", "for", "i", "in", "range", "(", "1", ",", "len", "(", "tsne_embedding", ")", ")", "]", "\n", "max_distance", "=", "np", ".", "max", "(", "distances", ")", "\n", "plt", ".", "scatter", "(", "tsne_embedding", "[", ":", ",", "0", "]", ",", "tsne_embedding", "[", ":", ",", "1", "]", ",", "c", "=", "colors", ")", "\n", "plt", ".", "annotate", "(", "'Anchor'", ",", "(", "tsne_embedding", "[", "0", ",", "0", "]", ",", "tsne_embedding", "[", "0", ",", "1", "]", ")", ")", "\n", "plt", ".", "savefig", "(", "'plots/point_cloud_sets_colored.pdf'", ",", "bbox_inches", "=", "'tight'", ")", "\n", "plt", ".", "show", "(", ")", "\n", "return", "tsne_embedding", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.matching_colors": [[357, 371], ["collections.defaultdict", "enumerate", "list", "range", "out.keys", "int", "sorted", "collections.defaultdict.items"], "function", ["None"], ["", "def", "matching_colors", "(", "file", ",", "deck", ",", "match_color", ")", ":", "\n", "    ", "color_count", "=", "collections", ".", "defaultdict", "(", "int", ")", "\n", "for", "i", ",", "card", "in", "enumerate", "(", "deck", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "int", "(", "card", ")", ")", ":", "\n", "            ", "color_count", "[", "file", "[", "i", "]", "[", "4", "]", "]", "+=", "1", "\n", "", "", "out", "=", "{", "k", ":", "v", "for", "k", ",", "v", "in", "sorted", "(", "color_count", ".", "items", "(", ")", ",", "key", "=", "lambda", "item", ":", "item", "[", "1", "]", ",", "reverse", "=", "True", ")", "}", "\n", "items", "=", "list", "(", "out", ".", "keys", "(", ")", ")", "\n", "if", "items", "[", "0", "]", "!=", "match_color", "and", "items", "[", "1", "]", "!=", "match_color", ":", "\n", "        ", "return", "False", "\n", "", "else", ":", "\n", "        ", "if", "items", "[", "0", "]", "==", "match_color", ":", "\n", "            ", "return", "items", "[", "1", "]", "\n", "", "else", ":", "\n", "            ", "return", "items", "[", "0", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.point_cloud_anchors_distances": [[372, 453], ["network.eval.eval", "utils.load_card_dict", "list", "list", "list", "list", "list", "list", "list", "matplotlib.scatter", "matplotlib.scatter", "matplotlib.scatter", "matplotlib.annotate", "matplotlib.colorbar", "matplotlib.savefig", "matplotlib.show", "matplotlib.scatter", "matplotlib.scatter", "matplotlib.scatter", "matplotlib.annotate", "matplotlib.colorbar", "matplotlib.savefig", "matplotlib.show", "open", "csv.reader", "torch.no_grad", "torch.no_grad", "torch.zeros", "torch.zeros", "network.eval.", "list.append", "list.append", "list", "list.append", "range", "range", "range", "sklearn.manifold.TSNE().fit_transform", "load_card_dict.items", "float", "sum.squeeze().numpy", "torch.zeros", "torch.zeros", "network.eval.", "list.append", "list.append", "list.append", "torch.zeros", "torch.zeros", "range", "network.eval.", "list.extend", "list.append", "range", "network.squeeze().numpy", "models.get_distance().item", "models.get_distance().item", "network.squeeze().numpy", "open", "numpy.load", "torch.Tensor", "torch.Tensor", "network.eval.", "list.extend", "list.append", "sklearn.manifold.TSNE", "sum.squeeze", "sum", "models.get_distance().item", "network.squeeze().numpy", "network.squeeze", "models.get_distance", "models.get_distance", "network.squeeze", "numpy.random.choice", "numpy.random.randint", "os.listdir", "numpy.random.randint", "models.get_distance", "network.squeeze"], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.load_card_dict", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance"], ["", "", "", "def", "point_cloud_anchors_distances", "(", "network", ",", "embedding", "=", "None", ")", ":", "\n", "    ", "network", "=", "network", ".", "eval", "(", ")", "\n", "card_dict", "=", "load_card_dict", "(", "'card_dict.pt'", ")", "\n", "inv_card_dict", "=", "{", "v", ":", "k", "for", "k", ",", "v", "in", "card_dict", ".", "items", "(", ")", "}", "\n", "\n", "cards", "=", "list", "(", ")", "\n", "if", "embedding", "is", "not", "None", ":", "\n", "        ", "tsne_embedding", "=", "embedding", "\n", "", "embeddings", "=", "list", "(", ")", "\n", "labels", "=", "list", "(", ")", "\n", "random_colors", "=", "list", "(", ")", "\n", "deck_colors", "=", "list", "(", ")", "\n", "tensor_embeddings", "=", "list", "(", ")", "\n", "\n", "distances", "=", "list", "(", ")", "\n", "with", "open", "(", "'named_pickrates.csv'", ",", "'r'", ")", "as", "f", ":", "\n", "        ", "reader", "=", "csv", ".", "reader", "(", "f", ",", "delimiter", "=", "';'", ")", "\n", "lines", "=", "[", "line", "for", "line", "in", "reader", "]", "\n", "indizes", "=", "[", "i", "for", "i", "in", "range", "(", "265", ")", "]", "\n", "pickrates", "=", "[", "float", "(", "lines", "[", "index", "]", "[", "1", "]", ")", "for", "index", "in", "indizes", "]", "\n", "", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "        ", "empty", "=", "torch", ".", "zeros", "(", "1", ",", "265", ")", "\n", "anchor", "=", "network", "(", "empty", ")", "\n", "distances", ".", "append", "(", "0", ")", "\n", "embeddings", ".", "append", "(", "anchor", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "\n", "border_colors", "=", "list", "(", ")", "\n", "border_colors", ".", "append", "(", "'lime'", ")", "\n", "color_map", "=", "{", "'Colourless'", ":", "'purple'", ",", "'Red'", ":", "'red'", ",", "'Blue'", ":", "'blue'", ",", "'Green'", ":", "'green'", ",", "'White'", ":", "'beige'", ",", "'Black'", ":", "'black'", "}", "\n", "for", "card", "in", "range", "(", "265", ")", ":", "\n", "            ", "tmp", "=", "torch", ".", "zeros", "(", "(", "1", ",", "265", ")", ")", "\n", "tmp", "[", "0", ",", "card", "]", "=", "1", "\n", "output", "=", "network", "(", "tmp", ")", "\n", "tensor_embeddings", ".", "append", "(", "output", ")", "\n", "embeddings", ".", "append", "(", "output", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "distances", ".", "append", "(", "networks", ".", "get_distance", "(", "anchor", ",", "output", ")", ".", "item", "(", ")", ")", "\n", "\n", "", "for", "i", "in", "range", "(", "1", ")", ":", "\n", "            ", "tmp", "=", "torch", ".", "zeros", "(", "(", "1", ",", "265", ")", ")", "\n", "for", "_", "in", "range", "(", "45", ")", ":", "\n", "                ", "tmp", "[", "0", ",", "np", ".", "random", ".", "randint", "(", "265", ")", "]", "=", "1", "\n", "", "out", "=", "network", "(", "tmp", ")", "\n", "random_distances", "=", "[", "networks", ".", "get_distance", "(", "out", ",", "elem", ")", ".", "item", "(", ")", "for", "elem", "in", "tensor_embeddings", "]", "\n", "random_colors", ".", "extend", "(", "random_distances", ")", "\n", "embeddings", ".", "append", "(", "out", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "\n", "", "for", "i", "in", "range", "(", "1", ")", ":", "\n", "            ", "with", "open", "(", "'E:/picks_2/'", "+", "np", ".", "random", ".", "choice", "(", "os", ".", "listdir", "(", "'E:/picks_2/'", ")", ")", ",", "'rb'", ")", "as", "pick_file", ":", "\n", "                ", "some_picks", "=", "np", ".", "load", "(", "pick_file", ",", "allow_pickle", "=", "True", ")", "\n", "anchor", "=", "0", "\n", "while", "anchor", "!=", "44", ":", "\n", "                    ", "anchor_array", "=", "some_picks", "[", "np", ".", "random", ".", "randint", "(", "some_picks", ".", "shape", "[", "0", "]", ")", "]", "\n", "anchor", "=", "sum", "(", "anchor_array", "[", "1", "]", ")", "\n", "", "input", "=", "torch", ".", "Tensor", "(", "anchor_array", "[", "1", "]", "+", "anchor_array", "[", "2", "]", ")", "\n", "\n", "out", "=", "network", "(", "input", ")", "\n", "deck_distances", "=", "[", "networks", ".", "get_distance", "(", "out", ",", "elem", ")", ".", "item", "(", ")", "for", "elem", "in", "tensor_embeddings", "]", "\n", "deck_colors", ".", "extend", "(", "deck_distances", ")", "\n", "embeddings", ".", "append", "(", "out", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "\n", "\n", "\n", "", "", "", "if", "embedding", "is", "None", ":", "\n", "        ", "tsne_embedding", "=", "TSNE", "(", "n_components", "=", "2", ")", ".", "fit_transform", "(", "embeddings", ")", "\n", "", "plt", ".", "scatter", "(", "tsne_embedding", "[", "1", ":", "-", "2", ",", "0", "]", ",", "tsne_embedding", "[", "1", ":", "-", "2", ",", "1", "]", ",", "c", "=", "random_colors", ",", "cmap", "=", "plt", ".", "cm", ".", "rainbow", ")", "\n", "plt", ".", "scatter", "(", "tsne_embedding", "[", "0", ",", "0", "]", ",", "tsne_embedding", "[", "0", ",", "1", "]", ",", "c", "=", "'lime'", ")", "\n", "plt", ".", "scatter", "(", "tsne_embedding", "[", "-", "2", ",", "0", "]", ",", "tsne_embedding", "[", "-", "2", ",", "1", "]", ",", "c", "=", "'black'", ")", "\n", "plt", ".", "annotate", "(", "'Anchor'", ",", "(", "tsne_embedding", "[", "0", ",", "0", "]", ",", "tsne_embedding", "[", "0", ",", "1", "]", ")", ")", "\n", "plt", ".", "colorbar", "(", ")", "\n", "plt", ".", "savefig", "(", "'plots/point_cloud_sets_random.pdf'", ",", "bbox_inches", "=", "'tight'", ")", "\n", "plt", ".", "show", "(", ")", "\n", "\n", "\n", "plt", ".", "scatter", "(", "tsne_embedding", "[", "1", ":", "-", "2", ",", "0", "]", ",", "tsne_embedding", "[", "1", ":", "-", "2", ",", "1", "]", ",", "c", "=", "deck_colors", ",", "cmap", "=", "plt", ".", "cm", ".", "rainbow", ")", "\n", "plt", ".", "scatter", "(", "tsne_embedding", "[", "0", ",", "0", "]", ",", "tsne_embedding", "[", "0", ",", "1", "]", ",", "c", "=", "'lime'", ")", "\n", "plt", ".", "scatter", "(", "tsne_embedding", "[", "-", "1", ",", "0", "]", ",", "tsne_embedding", "[", "-", "1", ",", "1", "]", ",", "c", "=", "'black'", ")", "\n", "plt", ".", "annotate", "(", "'Anchor'", ",", "(", "tsne_embedding", "[", "0", ",", "0", "]", ",", "tsne_embedding", "[", "0", ",", "1", "]", ")", ")", "\n", "plt", ".", "colorbar", "(", ")", "\n", "plt", ".", "savefig", "(", "'plots/point_cloud_sets_deck.pdf'", ",", "bbox_inches", "=", "'tight'", ")", "\n", "plt", ".", "show", "(", ")", "\n", "return", "tsne_embedding", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.point_cloud_distance_colour": [[455, 518], ["network.eval.eval", "utils.load_card_dict", "list", "list", "list", "list", "numpy.max", "matplotlib.scatter", "matplotlib.annotate", "print", "print", "matplotlib.colorbar", "plt.colorbar.set_ticks", "plt.colorbar.set_ticklabels", "matplotlib.savefig", "matplotlib.show", "list", "open", "csv.reader", "torch.no_grad", "torch.no_grad", "torch.zeros", "torch.zeros", "network.eval.", "list.append", "list.append", "list.append", "list", "list.append", "range", "sklearn.manifold.TSNE", "sklearn.manifold.TSNE().fit_transform", "models.get_distance", "utils.construct_ranking", "numpy.argmax", "load_card_dict.items", "float", "network.squeeze().numpy", "torch.zeros", "torch.zeros", "network.eval.", "list.append", "list.append", "c.split.split", "torch.Tensor().view", "torch.Tensor().view", "torch.Tensor().view", "torch.Tensor().view", "range", "numpy.max", "range", "network.squeeze().numpy", "models.get_distance().item", "len", "list.append", "list.append", "sklearn.manifold.TSNE", "len", "network.squeeze", "len", "list.append", "list.append", "list.append", "list.append", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "network.squeeze", "models.get_distance"], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.load_card_dict", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.construct_ranking", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance"], ["", "def", "point_cloud_distance_colour", "(", "network", ",", "embedding", "=", "None", ")", ":", "\n", "    ", "network", "=", "network", ".", "eval", "(", ")", "\n", "card_dict", "=", "load_card_dict", "(", "'card_dict.pt'", ")", "\n", "inv_card_dict", "=", "{", "v", ":", "k", "for", "k", ",", "v", "in", "card_dict", ".", "items", "(", ")", "}", "\n", "\n", "cards", "=", "list", "(", ")", "\n", "\n", "if", "embedding", ":", "\n", "        ", "tsne_embedding", "=", "embedding", "\n", "", "else", ":", "\n", "        ", "embeddings", "=", "list", "(", ")", "\n", "", "labels", "=", "list", "(", ")", "\n", "colors", "=", "list", "(", ")", "\n", "\n", "distances", "=", "list", "(", ")", "\n", "with", "open", "(", "'named_pickrates.csv'", ",", "'r'", ")", "as", "f", ":", "\n", "        ", "reader", "=", "csv", ".", "reader", "(", "f", ",", "delimiter", "=", "';'", ")", "\n", "lines", "=", "[", "line", "for", "line", "in", "reader", "]", "\n", "indizes", "=", "[", "i", "for", "i", "in", "range", "(", "265", ")", "]", "\n", "pickrates", "=", "[", "float", "(", "lines", "[", "index", "]", "[", "1", "]", ")", "for", "index", "in", "indizes", "]", "\n", "", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "        ", "empty", "=", "torch", ".", "zeros", "(", "1", ",", "265", ")", "\n", "anchor", "=", "network", "(", "empty", ")", "\n", "distances", ".", "append", "(", "0", ")", "\n", "embeddings", ".", "append", "(", "anchor", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "colors", ".", "append", "(", "'lime'", ")", "\n", "border_colors", "=", "list", "(", ")", "\n", "border_colors", ".", "append", "(", "'lime'", ")", "\n", "color_map", "=", "{", "'Colourless'", ":", "'purple'", ",", "'Red'", ":", "'red'", ",", "'Blue'", ":", "'blue'", ",", "'Green'", ":", "'green'", ",", "'White'", ":", "'lightgrey'", ",", "'Black'", ":", "'black'", "}", "\n", "for", "card", "in", "range", "(", "265", ")", ":", "\n", "            ", "tmp", "=", "torch", ".", "zeros", "(", "(", "1", ",", "265", ")", ")", "\n", "tmp", "[", "0", ",", "card", "]", "=", "1", "\n", "output", "=", "network", "(", "tmp", ")", "\n", "embeddings", ".", "append", "(", "output", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "distances", ".", "append", "(", "networks", ".", "get_distance", "(", "anchor", ",", "output", ")", ".", "item", "(", ")", ")", "\n", "c", "=", "lines", "[", "card", "]", "[", "4", "]", "\n", "c", "=", "c", ".", "split", "(", "','", ")", "\n", "if", "len", "(", "c", ")", "==", "1", ":", "\n", "                ", "colors", ".", "append", "(", "color_map", "[", "c", "[", "0", "]", "]", ")", "\n", "border_colors", ".", "append", "(", "color_map", "[", "c", "[", "0", "]", "]", ")", "\n", "", "elif", "len", "(", "c", ")", "==", "2", ":", "\n", "                ", "colors", ".", "append", "(", "color_map", "[", "c", "[", "0", "]", "]", ")", "\n", "border_colors", ".", "append", "(", "color_map", "[", "c", "[", "1", "]", "]", ")", "\n", "", "else", ":", "\n", "                ", "colors", ".", "append", "(", "'gold'", ")", "\n", "border_colors", ".", "append", "(", "'gold'", ")", "\n", "\n", "", "", "", "if", "not", "embedding", ":", "\n", "        ", "tsne", "=", "TSNE", "(", "n_components", "=", "2", ")", "\n", "tsne_embedding", "=", "TSNE", "(", "n_components", "=", "2", ")", ".", "fit_transform", "(", "embeddings", ")", "\n", "", "tsne_distances", "=", "[", "networks", ".", "get_distance", "(", "torch", ".", "Tensor", "(", "tsne_embedding", "[", "0", "]", ")", ".", "view", "(", "1", ",", "-", "1", ")", ",", "torch", ".", "Tensor", "(", "tsne_embedding", "[", "i", "]", ")", ".", "view", "(", "1", ",", "-", "1", ")", ")", "for", "i", "in", "range", "(", "1", ",", "len", "(", "tsne_embedding", ")", ")", "]", "\n", "max_distance", "=", "np", ".", "max", "(", "distances", ")", "\n", "plt", ".", "scatter", "(", "tsne_embedding", "[", ":", ",", "0", "]", ",", "tsne_embedding", "[", ":", ",", "1", "]", ",", "c", "=", "distances", ",", "cmap", "=", "plt", ".", "cm", ".", "coolwarm_r", ")", "\n", "plt", ".", "annotate", "(", "'Anchor'", ",", "(", "tsne_embedding", "[", "0", ",", "0", "]", ",", "tsne_embedding", "[", "0", ",", "1", "]", ")", ")", "\n", "\n", "print", "(", "construct_ranking", "(", "distances", ",", "reverse", "=", "False", ")", ")", "\n", "print", "(", "np", ".", "argmax", "(", "pickrates", ")", ")", "\n", "cbar", "=", "plt", ".", "colorbar", "(", ")", "\n", "cbar", ".", "set_ticks", "(", "[", "0", ",", "np", ".", "max", "(", "distances", ")", "]", ")", "\n", "cbar", ".", "set_ticklabels", "(", "[", "'Min'", ",", "'Max'", "]", ")", "\n", "plt", ".", "savefig", "(", "'plots/point_cloud_distances.pdf'", ",", "bbox_inches", "=", "'tight'", ")", "\n", "plt", ".", "show", "(", ")", "\n", "return", "tsne_embedding", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.complete_draft": [[520, 556], ["network.eval", "list", "list", "list", "list", "list", "torch.no_grad", "torch.no_grad", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "list.append", "network", "network", "list.append", "list.append", "list.append", "list", "numpy.min", "numpy.random.randint", "list.append", "list.append", "network.squeeze().detach().numpy", "network.squeeze().detach().numpy", "network.squeeze().detach().numpy", "torch.zeros", "torch.zeros", "list.append", "len", "list", "models.get_distance().item", "numpy.argmin", "numpy.where", "network.squeeze().detach", "network.squeeze().detach", "network.squeeze().detach", "models.get_distance", "network.squeeze", "network.squeeze", "network.squeeze", "network"], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance"], ["", "def", "complete_draft", "(", "picks", ",", "network", ")", ":", "\n", "    ", "network", ".", "eval", "(", ")", "\n", "every_choice", "=", "list", "(", ")", "\n", "every_chosen", "=", "list", "(", ")", "\n", "every_anchor", "=", "list", "(", ")", "\n", "random_choices", "=", "list", "(", ")", "\n", "random_anchors", "=", "list", "(", ")", "\n", "siamese_distance", "=", "0", "\n", "random_distance", "=", "0", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "        ", "picked", "=", "torch", ".", "zeros", "(", "(", "1", ",", "265", ")", ")", "\n", "random_picked", "=", "torch", ".", "zeros", "(", "(", "1", ",", "265", ")", ")", "\n", "for", "pick", "in", "picks", ":", "\n", "            ", "anchor", "=", "network", "(", "picked", ")", "\n", "random_anchor", "=", "network", "(", "random_picked", ")", "\n", "every_anchor", ".", "append", "(", "anchor", ".", "squeeze", "(", ")", ".", "detach", "(", ")", ".", "numpy", "(", ")", ")", "\n", "random_anchors", ".", "append", "(", "random_anchor", ".", "squeeze", "(", ")", ".", "detach", "(", ")", ".", "numpy", "(", ")", ")", "\n", "choices", "=", "pick", "[", "0", "]", "\n", "every_choice", ".", "append", "(", "choices", ")", "\n", "distances", "=", "list", "(", ")", "\n", "for", "choice", "in", "choices", ":", "\n", "                ", "tmp", "=", "torch", ".", "zeros", "(", "(", "1", ",", "265", ")", ")", "\n", "tmp", "[", "0", ",", "choice", "]", "=", "1", "\n", "distances", ".", "append", "(", "networks", ".", "get_distance", "(", "anchor", ",", "network", "(", "tmp", ")", ")", ".", "item", "(", ")", ")", "\n", "", "chosen_card", "=", "choices", "[", "np", ".", "argmin", "(", "distances", ")", "]", "\n", "siamese_distance", "+=", "np", ".", "min", "(", "distances", ")", "\n", "random_index", "=", "np", ".", "random", ".", "randint", "(", "0", ",", "len", "(", "choices", ")", ")", "\n", "randomly_chosen_card", "=", "choices", "[", "random_index", "]", "\n", "indx", "=", "list", "(", "np", ".", "where", "(", "choices", "==", "randomly_chosen_card", ")", ")", "[", "0", "]", "\n", "random_distance", "+=", "distances", "[", "random_index", "]", "\n", "picked", "[", "0", ",", "chosen_card", "]", "+=", "1", "\n", "random_picked", "[", "0", ",", "randomly_chosen_card", "]", "+=", "1", "\n", "every_chosen", ".", "append", "(", "chosen_card", ")", "\n", "random_choices", ".", "append", "(", "randomly_chosen_card", ")", "\n", "", "every_anchor", ".", "append", "(", "anchor", ".", "squeeze", "(", ")", ".", "detach", "(", ")", ".", "numpy", "(", ")", ")", "\n", "", "return", "every_choice", ",", "every_chosen", ",", "every_anchor", ",", "random_choices", ",", "random_anchors", ",", "siamese_distance", ",", "random_distance", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.point_cloud_path": [[561, 618], ["network.train.eval", "utils.load_card_dict", "list", "list", "list", "list", "list", "sklearn.manifold.TSNE().fit_transform", "list", "list", "range", "network.train.train", "open", "csv.reader", "open", "numpy.load", "list", "range", "torch.no_grad", "torch.no_grad", "utils.complete_draft", "range", "list", "list.extend", "list.extend", "list.append", "len", "matplotlib.scatter", "matplotlib.scatter", "matplotlib.scatter", "matplotlib.show", "load_card_dict.items", "float", "list.append", "list.append", "torch.zeros", "torch.zeros", "network.train.", "list.append", "sklearn.manifold.TSNE", "range", "network.train.view().squeeze().numpy", "network.squeeze().numpy", "os.listdir", "network.train.view().squeeze", "network.squeeze", "network.train.view", "network.train.", "torch.Tensor", "torch.Tensor"], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.load_card_dict", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.complete_draft"], ["", "def", "point_cloud_path", "(", "network", ")", ":", "\n", "    ", "network", "=", "network", ".", "eval", "(", ")", "\n", "card_dict", "=", "load_card_dict", "(", "'card_dict.pt'", ")", "\n", "inv_card_dict", "=", "{", "v", ":", "k", "for", "k", ",", "v", "in", "card_dict", ".", "items", "(", ")", "}", "\n", "\n", "with", "open", "(", "'named_pickrates.csv'", ",", "'r'", ")", "as", "f", ":", "\n", "        ", "reader", "=", "csv", ".", "reader", "(", "f", ",", "delimiter", "=", "';'", ")", "\n", "lines", "=", "[", "line", "for", "line", "in", "reader", "]", "\n", "indizes", "=", "[", "i", "for", "i", "in", "range", "(", "265", ")", "]", "\n", "pickrates", "=", "[", "float", "(", "lines", "[", "index", "]", "[", "1", "]", ")", "for", "index", "in", "indizes", "]", "\n", "\n", "", "cards", "=", "list", "(", ")", "\n", "\n", "embeddings", "=", "list", "(", ")", "\n", "cards", "=", "list", "(", ")", "\n", "labels", "=", "list", "(", ")", "\n", "colors", "=", "list", "(", ")", "\n", "\n", "pick_path", "=", "'E:/picks_2/'", "\n", "with", "open", "(", "pick_path", "+", "os", ".", "listdir", "(", "pick_path", ")", "[", "0", "]", ",", "'rb'", ")", "as", "f", ":", "\n", "        ", "picks", "=", "np", ".", "load", "(", "f", ",", "allow_pickle", "=", "True", ")", "\n", "p1_picks", "=", "list", "(", ")", "\n", "for", "i", "in", "range", "(", "45", ")", ":", "\n", "            ", "p1_picks", ".", "append", "(", "picks", "[", "i", "*", "8", "]", ")", "\n", "\n", "", "", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "        ", "for", "pick", "in", "p1_picks", ":", "\n", "            ", "embeddings", ".", "append", "(", "network", "(", "torch", ".", "Tensor", "(", "pick", "[", "1", "]", ")", ")", ".", "view", "(", "1", ",", "-", "1", ")", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "\n", "", "every_choice", ",", "every_chosen", ",", "every_anchor", ",", "random_choices", ",", "random_anchors", "=", "complete_draft", "(", "p1_picks", ",", "network", ")", "\n", "for", "card", "in", "range", "(", "265", ")", ":", "\n", "            ", "tmp", "=", "torch", ".", "zeros", "(", "(", "1", ",", "265", ")", ")", "\n", "tmp", "[", "0", ",", "card", "]", "=", "1", "\n", "output", "=", "network", "(", "tmp", ")", "\n", "cards", ".", "append", "(", "output", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "\n", "", "all_things", "=", "list", "(", ")", "\n", "all_things", ".", "extend", "(", "cards", ")", "\n", "all_things", ".", "extend", "(", "every_anchor", ")", "\n", "\n", "", "tsne_embedding", "=", "TSNE", "(", "n_components", "=", "2", ")", ".", "fit_transform", "(", "all_things", ")", "\n", "route", "=", "list", "(", ")", "\n", "choices", "=", "list", "(", ")", "\n", "for", "choice", "in", "every_choice", ":", "\n", "        ", "choices", ".", "append", "(", "[", "tsne_embedding", "[", "i", "]", "for", "i", "in", "choice", "]", ")", "\n", "", "chosens", "=", "[", "tsne_embedding", "[", "i", "]", "for", "i", "in", "every_chosen", "]", "\n", "\n", "\n", "for", "i", "in", "range", "(", "len", "(", "chosens", ")", ")", ":", "\n", "        ", "x", "=", "[", "row", "[", "0", "]", "for", "row", "in", "choices", "[", "i", "]", "]", "\n", "y", "=", "[", "row", "[", "1", "]", "for", "row", "in", "choices", "[", "i", "]", "]", "\n", "plt", ".", "scatter", "(", "x", ",", "y", ",", "c", "=", "'blue'", ")", "\n", "plt", ".", "scatter", "(", "chosens", "[", "i", "]", "[", "0", "]", ",", "chosens", "[", "i", "]", "[", "1", "]", ",", "c", "=", "'red'", ",", "s", "=", "10", ",", "alpha", "=", "0.5", ")", "\n", "plt", ".", "scatter", "(", "tsne_embedding", "[", "265", "+", "i", ",", "0", "]", ",", "tsne_embedding", "[", "265", "+", "i", ",", "1", "]", ",", "c", "=", "'green'", ")", "\n", "plt", ".", "show", "(", ")", "\n", "", "network", "=", "network", ".", "train", "(", ")", "\n", "return", "tsne_embedding", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.point_cloud_path_all_cards": [[620, 694], ["network.train.eval", "utils.load_card_dict", "list", "list", "list", "list", "list", "sklearn.manifold.TSNE().fit_transform", "list", "matplotlib.scatter", "matplotlib.plot", "enumerate", "enumerate", "matplotlib.plot", "matplotlib.legend", "matplotlib.show", "network.train.train", "open", "csv.reader", "open", "numpy.load", "list", "range", "torch.no_grad", "torch.no_grad", "utils.complete_draft", "print", "print", "range", "list", "list.extend", "list.extend", "list.extend", "matplotlib.plot", "matplotlib.plot", "load_card_dict.items", "float", "list.append", "list.append", "torch.zeros", "torch.zeros", "network.train.", "list.append", "sklearn.manifold.TSNE", "range", "network.train.view().squeeze().numpy", "str", "str", "network.squeeze().numpy", "list.append", "os.listdir", "list.append", "network.train.view().squeeze", "network.squeeze", "list.append", "list.append", "network.train.view", "list.append", "list.append", "list.append", "network.train.", "torch.Tensor", "torch.Tensor"], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.load_card_dict", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.complete_draft"], ["", "def", "point_cloud_path_all_cards", "(", "network", ")", ":", "\n", "    ", "network", "=", "network", ".", "eval", "(", ")", "\n", "card_dict", "=", "load_card_dict", "(", "'card_dict.pt'", ")", "\n", "inv_card_dict", "=", "{", "v", ":", "k", "for", "k", ",", "v", "in", "card_dict", ".", "items", "(", ")", "}", "\n", "\n", "with", "open", "(", "'named_pickrates.csv'", ",", "'r'", ")", "as", "f", ":", "\n", "        ", "reader", "=", "csv", ".", "reader", "(", "f", ",", "delimiter", "=", "';'", ")", "\n", "lines", "=", "[", "line", "for", "line", "in", "reader", "]", "\n", "indizes", "=", "[", "i", "for", "i", "in", "range", "(", "265", ")", "]", "\n", "pickrates", "=", "[", "float", "(", "lines", "[", "index", "]", "[", "1", "]", ")", "for", "index", "in", "indizes", "]", "\n", "\n", "", "cards", "=", "list", "(", ")", "\n", "\n", "embeddings", "=", "list", "(", ")", "\n", "cards", "=", "list", "(", ")", "\n", "labels", "=", "list", "(", ")", "\n", "colors", "=", "list", "(", ")", "\n", "\n", "pick_path", "=", "'E:/picks_2/'", "\n", "with", "open", "(", "pick_path", "+", "os", ".", "listdir", "(", "pick_path", ")", "[", "0", "]", ",", "'rb'", ")", "as", "f", ":", "\n", "        ", "picks", "=", "np", ".", "load", "(", "f", ",", "allow_pickle", "=", "True", ")", "\n", "p1_picks", "=", "list", "(", ")", "\n", "for", "i", "in", "range", "(", "45", ")", ":", "\n", "            ", "p1_picks", ".", "append", "(", "picks", "[", "i", "*", "8", "]", ")", "\n", "\n", "", "", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "        ", "for", "pick", "in", "p1_picks", ":", "\n", "            ", "embeddings", ".", "append", "(", "network", "(", "torch", ".", "Tensor", "(", "pick", "[", "1", "]", ")", ")", ".", "view", "(", "1", ",", "-", "1", ")", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "\n", "", "every_choice", ",", "every_chosen", ",", "every_anchor", ",", "random_choices", ",", "random_anchors", ",", "siamese_distance", ",", "random_distance", "=", "complete_draft", "(", "p1_picks", ",", "network", ")", "\n", "print", "(", "'Siamese distance: '", "+", "str", "(", "siamese_distance", ")", ")", "\n", "print", "(", "'Random distance: '", "+", "str", "(", "random_distance", ")", ")", "\n", "for", "card", "in", "range", "(", "265", ")", ":", "\n", "            ", "tmp", "=", "torch", ".", "zeros", "(", "(", "1", ",", "265", ")", ")", "\n", "tmp", "[", "0", ",", "card", "]", "=", "1", "\n", "output", "=", "network", "(", "tmp", ")", "\n", "cards", ".", "append", "(", "output", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "c", "=", "lines", "[", "card", "]", "[", "4", "]", "\n", "if", "c", "==", "'Colourless'", ":", "\n", "                ", "colors", ".", "append", "(", "'purple'", ")", "\n", "", "elif", "c", "==", "'Red'", ":", "\n", "                ", "colors", ".", "append", "(", "'red'", ")", "\n", "", "elif", "c", "==", "'Blue'", ":", "\n", "                ", "colors", ".", "append", "(", "'blue'", ")", "\n", "", "elif", "c", "==", "'Green'", ":", "\n", "                ", "colors", ".", "append", "(", "'green'", ")", "\n", "", "elif", "c", "==", "'Black'", ":", "\n", "                ", "colors", ".", "append", "(", "'black'", ")", "\n", "", "elif", "c", "==", "'White'", ":", "\n", "                ", "colors", ".", "append", "(", "'lavenderblush'", ")", "\n", "", "else", ":", "\n", "                ", "colors", ".", "append", "(", "'gold'", ")", "\n", "\n", "", "", "all_things", "=", "list", "(", ")", "\n", "all_things", ".", "extend", "(", "cards", ")", "\n", "all_things", ".", "extend", "(", "every_anchor", ")", "\n", "all_things", ".", "extend", "(", "random_anchors", ")", "\n", "\n", "", "tsne_embedding", "=", "TSNE", "(", "n_components", "=", "2", ")", ".", "fit_transform", "(", "all_things", ")", "\n", "route", "=", "list", "(", ")", "\n", "chosens", "=", "[", "tsne_embedding", "[", "i", "]", "for", "i", "in", "every_chosen", "]", "\n", "random_chosens", "=", "[", "tsne_embedding", "[", "i", "]", "for", "i", "in", "random_choices", "]", "\n", "\n", "plt", ".", "scatter", "(", "tsne_embedding", "[", ":", "265", ",", "0", "]", ",", "tsne_embedding", "[", ":", "265", ",", "1", "]", ",", "c", "=", "colors", ")", "\n", "plt", ".", "plot", "(", "tsne_embedding", "[", "265", ":", "265", "+", "46", ",", "0", "]", ",", "tsne_embedding", "[", "265", ":", "265", "+", "46", ",", "1", "]", ",", "c", "=", "'blue'", ",", "label", "=", "'Siamese path'", ")", "\n", "for", "i", ",", "choice", "in", "enumerate", "(", "chosens", ")", ":", "\n", "        ", "plt", ".", "plot", "(", "[", "tsne_embedding", "[", "265", "+", "i", ",", "0", "]", ",", "choice", "[", "0", "]", "]", ",", "[", "tsne_embedding", "[", "265", "+", "i", ",", "1", "]", ",", "choice", "[", "1", "]", "]", ",", "'--'", ",", "c", "=", "'blue'", ",", "alpha", "=", "0.2", ")", "\n", "", "for", "i", ",", "choice", "in", "enumerate", "(", "random_chosens", ")", ":", "\n", "        ", "plt", ".", "plot", "(", "[", "tsne_embedding", "[", "265", "+", "46", "+", "i", ",", "0", "]", ",", "choice", "[", "0", "]", "]", ",", "[", "tsne_embedding", "[", "265", "+", "46", "+", "i", ",", "1", "]", ",", "choice", "[", "1", "]", "]", ",", "'--'", ",", "c", "=", "'green'", ",", "alpha", "=", "0.2", ")", "\n", "", "plt", ".", "plot", "(", "tsne_embedding", "[", "-", "46", ":", ",", "0", "]", ",", "tsne_embedding", "[", "-", "46", ":", ",", "1", "]", ",", "c", "=", "'green'", ",", "label", "=", "'Random path'", ")", "\n", "plt", ".", "legend", "(", ")", "\n", "plt", ".", "show", "(", ")", "\n", "network", "=", "network", ".", "train", "(", ")", "\n", "return", "tsne_embedding", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.plot_random_embeddings": [[696, 750], ["utils.load_card_dict", "list", "range", "list", "list", "list", "list", "sklearn.manifold.TSNE().fit_transform", "matplotlib.scatter", "print", "print", "matplotlib.show", "utils.construct_ranking", "print", "utils.construct_ranking", "print", "utils.construct_ranking", "print", "print", "print", "numpy.zeros", "list.append", "open", "csv.reader", "torch.no_grad", "torch.no_grad", "torch.zeros", "torch.zeros", "network", "list.append", "list.append", "list.append", "models.get_distance", "load_card_dict.items", "torch.Tensor", "torch.Tensor", "float", "network.squeeze().numpy", "network", "list.append", "list.append", "list.append", "sklearn.manifold.TSNE", "torch.Tensor().view", "torch.Tensor().view", "torch.Tensor().view", "torch.Tensor().view", "range", "str", "str", "range", "network.squeeze().numpy", "models.get_distance", "len", "network.squeeze", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "scipy.stats.kendalltau", "scipy.stats.kendalltau", "network.squeeze"], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.load_card_dict", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.construct_ranking", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.construct_ranking", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.construct_ranking", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance", "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance"], ["", "def", "plot_random_embeddings", "(", "network", ")", ":", "\n", "    ", "card_dict", "=", "load_card_dict", "(", "'card_dict.pt'", ")", "\n", "inv_card_dict", "=", "{", "v", ":", "k", "for", "k", ",", "v", "in", "card_dict", ".", "items", "(", ")", "}", "\n", "\n", "cards", "=", "list", "(", ")", "\n", "for", "i", "in", "range", "(", "265", ")", ":", "\n", "        ", "tmp", "=", "np", ".", "zeros", "(", "265", ")", "\n", "tmp", "[", "i", "]", "=", "1", "\n", "cards", ".", "append", "(", "torch", ".", "Tensor", "(", "tmp", ")", ")", "\n", "\n", "", "embeddings", "=", "list", "(", ")", "\n", "labels", "=", "list", "(", ")", "\n", "colors", "=", "list", "(", ")", "\n", "\n", "distances", "=", "list", "(", ")", "\n", "with", "open", "(", "'named_pickrates.csv'", ",", "'r'", ")", "as", "f", ":", "\n", "        ", "reader", "=", "csv", ".", "reader", "(", "f", ",", "delimiter", "=", "';'", ")", "\n", "lines", "=", "[", "line", "for", "line", "in", "reader", "]", "\n", "indizes", "=", "[", "i", "for", "i", "in", "range", "(", "265", ")", "]", "\n", "pickrates", "=", "[", "float", "(", "lines", "[", "index", "]", "[", "1", "]", ")", "for", "index", "in", "indizes", "]", "\n", "", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "        ", "empty", "=", "torch", ".", "zeros", "(", "1", ",", "265", ")", "\n", "anchor", "=", "network", "(", "empty", ")", "\n", "embeddings", ".", "append", "(", "anchor", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "labels", ".", "append", "(", "'Empty set'", ")", "\n", "colors", ".", "append", "(", "'r'", ")", "\n", "for", "card", "in", "cards", ":", "\n", "            ", "output", "=", "network", "(", "card", ")", "\n", "embeddings", ".", "append", "(", "output", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", ")", "\n", "distances", ".", "append", "(", "networks", ".", "get_distance", "(", "anchor", ",", "output", ")", ")", "\n", "#      labels.append(inv_card_dict[card.item()])", "\n", "colors", ".", "append", "(", "'b'", ")", "\n", "\n", "\n", "", "", "tsne_embedding", "=", "TSNE", "(", "n_components", "=", "2", ")", ".", "fit_transform", "(", "embeddings", ")", "\n", "tsne_distances", "=", "[", "networks", ".", "get_distance", "(", "torch", ".", "Tensor", "(", "tsne_embedding", "[", "0", "]", ")", ".", "view", "(", "1", ",", "-", "1", ")", ",", "torch", ".", "Tensor", "(", "tsne_embedding", "[", "i", "]", ")", ".", "view", "(", "1", ",", "-", "1", ")", ")", "for", "i", "in", "range", "(", "1", ",", "len", "(", "tsne_embedding", ")", ")", "]", "\n", "plt", ".", "scatter", "(", "tsne_embedding", "[", ":", ",", "0", "]", ",", "tsne_embedding", "[", ":", ",", "1", "]", ",", "c", "=", "colors", ")", "\n", "#for i in range(1,11):", "\n", "#    plt.plot([tsne_embedding[0][0],tsne_embedding[i][0]],[tsne_embedding[0][1],tsne_embedding[i][1]])", "\n", "#    plt.annotate(str(pickrates[i-1]),((tsne_embedding[i,0]+tsne_embedding[0,0])/2,(tsne_embedding[i,1]+tsne_embedding[0,1])/2))", "\n", "#for i,label in enumerate(labels):", "\n", "#    plt.annotate(label, (tsne_embedding[i,0],tsne_embedding[i,1]))", "\n", "print", "(", "distances", ")", "\n", "print", "(", "pickrates", ")", "\n", "plt", ".", "show", "(", ")", "\n", "pickrate_ranking", "=", "construct_ranking", "(", "pickrates", ",", "True", ")", "\n", "print", "(", "pickrate_ranking", ")", "\n", "distance_ranking", "=", "construct_ranking", "(", "distances", ",", "False", ")", "\n", "print", "(", "distance_ranking", ")", "\n", "tsne_distances_ranking", "=", "construct_ranking", "(", "tsne_distances", ",", "False", ")", "\n", "print", "(", "tsne_distances_ranking", ")", "\n", "print", "(", "'Embedded correlation: '", "+", "str", "(", "sc", ".", "stats", ".", "kendalltau", "(", "pickrate_ranking", ",", "distance_ranking", ")", "[", "0", "]", ")", ")", "\n", "print", "(", "'TSNE correlation: '", "+", "str", "(", "sc", ".", "stats", ".", "kendalltau", "(", "pickrate_ranking", ",", "tsne_distances_ranking", ")", "[", "0", "]", ")", ")", "\n", "return", "tsne_embedding", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.construct_ranking": [[751, 754], ["range", "len", "sorted", "zip"], "function", ["None"], ["", "def", "construct_ranking", "(", "values", ",", "reverse", ")", ":", "\n", "    ", "indizes", "=", "range", "(", "len", "(", "values", ")", ")", "\n", "return", "[", "x", "for", "_", ",", "x", "in", "sorted", "(", "zip", "(", "values", ",", "indizes", ")", ",", "reverse", "=", "reverse", ")", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.correct_picks": [[756, 789], ["list", "list", "os.listdir", "print", "open", "numpy.load", "f.close", "numpy.mean", "numpy.mean", "list.append", "numpy.argmax", "numpy.random.choice", "len", "torch.no_grad", "torch.no_grad", "network", "list", "range", "numpy.random.choice", "torch.Tensor().view", "torch.Tensor().view", "len", "torch.zeros", "torch.zeros", "list.append", "list.append", "list.append", "models.get_distance().item", "sorted", "ranking.index", "torch.Tensor", "torch.Tensor", "zip", "models.get_distance", "numpy.where", "network", "range", "len"], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance"], ["", "def", "correct_picks", "(", "network", ",", "folder_name", ")", ":", "\n", "    ", "pick_number", "=", "0", "\n", "correct_picks", "=", "0", "\n", "pick_distance", "=", "list", "(", ")", "\n", "pick_numbers", "=", "list", "(", ")", "\n", "files", "=", "os", ".", "listdir", "(", "folder_name", ")", "\n", "with", "open", "(", "folder_name", "+", "np", ".", "random", ".", "choice", "(", "files", ")", ",", "'rb'", ")", "as", "f", ":", "\n", "        ", "data", "=", "np", ".", "load", "(", "f", ",", "allow_pickle", "=", "True", ")", "\n", "for", "pick", "in", "data", "[", "np", ".", "random", ".", "choice", "(", "data", ".", "shape", "[", "0", "]", ",", "10000", ",", "replace", "=", "False", ")", ",", ":", "]", ":", "\n", "            ", "pick_number", "+=", "1", "\n", "choices", "=", "pick", "[", "0", "]", "\n", "pick_numbers", ".", "append", "(", "len", "(", "choices", ")", ")", "\n", "anchor", "=", "pick", "[", "1", "]", "\n", "correct_choice", "=", "np", ".", "argmax", "(", "pick", "[", "2", "]", ")", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "                ", "out1", "=", "network", "(", "torch", ".", "Tensor", "(", "anchor", ")", ".", "view", "(", "1", ",", "-", "1", ")", ")", "\n", "\n", "distances", "=", "list", "(", ")", "\n", "for", "i", "in", "range", "(", "len", "(", "choices", ")", ")", ":", "\n", "                    ", "elem", "=", "torch", ".", "zeros", "(", "(", "1", ",", "265", ")", ")", "\n", "elem", "[", "0", ",", "choices", "[", "i", "]", "]", "=", "1.0", "\n", "distances", ".", "append", "(", "networks", ".", "get_distance", "(", "out1", ",", "network", "(", "elem", ")", ")", ".", "item", "(", ")", ")", "\n", "\n", "", "ranking", "=", "[", "x", "for", "_", ",", "x", "in", "sorted", "(", "zip", "(", "distances", ",", "[", "y", "for", "y", "in", "range", "(", "len", "(", "distances", ")", ")", "]", ")", ")", "]", "\n", "if", "choices", "[", "ranking", "[", "0", "]", "]", "==", "correct_choice", ":", "\n", "                    ", "correct_picks", "+=", "1", "\n", "pick_distance", ".", "append", "(", "0", ")", "\n", "", "else", ":", "\n", "                    ", "pick_distance", ".", "append", "(", "ranking", ".", "index", "(", "np", ".", "where", "(", "choices", "==", "correct_choice", ")", "[", "0", "]", ")", ")", "\n", "", "", "", "f", ".", "close", "(", ")", "\n", "del", "data", "\n", "", "print", "(", "np", ".", "mean", "(", "pick_numbers", ")", ")", "\n", "return", "correct_picks", "/", "pick_number", ",", "np", ".", "mean", "(", "pick_distance", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.plot_pickrate": [[790, 810], ["enumerate", "x[].sort", "x[].sort", "matplotlib.plot", "matplotlib.plot", "matplotlib.ylabel", "matplotlib.xlabel", "matplotlib.legend", "matplotlib.xlim", "matplotlib.ylim", "matplotlib.savefig", "matplotlib.show", "list", "range", "range", "range", "open", "len", "len", "len", "line.split.split", "x[].append", "float"], "function", ["None"], ["", "def", "plot_pickrate", "(", "filenames", ")", ":", "\n", "    ", "x", "=", "[", "list", "(", ")", "for", "i", "in", "range", "(", "len", "(", "filenames", ")", ")", "]", "\n", "for", "i", ",", "filename", "in", "enumerate", "(", "filenames", ")", ":", "\n", "        ", "with", "open", "(", "filename", ",", "'r'", ")", "as", "f", ":", "\n", "            ", "for", "line", "in", "f", ":", "\n", "                ", "line", "=", "line", ".", "split", "(", "';'", ")", "\n", "x", "[", "i", "]", ".", "append", "(", "float", "(", "line", "[", "1", "]", ")", ")", "\n", "\n", "", "", "", "x", "[", "0", "]", ".", "sort", "(", ")", "\n", "x", "[", "1", "]", ".", "sort", "(", ")", "\n", "plt", ".", "plot", "(", "range", "(", "len", "(", "x", "[", "0", "]", ")", ")", ",", "x", "[", "0", "]", ",", "label", "=", "'First-pick rate'", ")", "\n", "plt", ".", "plot", "(", "range", "(", "len", "(", "x", "[", "1", "]", ")", ")", ",", "x", "[", "1", "]", ",", "label", "=", "'Pick rate'", ",", "linestyle", "=", "'dashed'", ")", "\n", "plt", ".", "ylabel", "(", "'Rate'", ")", "\n", "plt", ".", "xlabel", "(", "'Ranked cards'", ")", "\n", "plt", ".", "legend", "(", ")", "\n", "plt", ".", "xlim", "(", "0", ",", "264", ")", "\n", "plt", ".", "ylim", "(", "0", ",", "1", ")", "\n", "\n", "plt", ".", "savefig", "(", "'plots/firstpickrate_combiend_2.pdf'", ",", "bbox_inches", "=", "'tight'", ")", "\n", "plt", ".", "show", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.plot_pickrate_ratings": [[812, 856], ["sklearn.linear_model.LinearRegression", "range", "matplotlib.xlabel", "matplotlib.ylabel", "matplotlib.title", "matplotlib.xlim", "matplotlib.ylim", "matplotlib.show", "list", "list", "open", "numpy.array", "numpy.array", "matplotlib.scatter", "sklearn.linear_model.LinearRegression.fit", "matplotlib.plot", "range", "range", "line.split.split", "x[].reshape", "y[].reshape", "numpy.arange().reshape", "sklearn.linear_model.LinearRegression.predict", "x[].append", "y[].append", "numpy.arange().reshape", "float", "float", "x[].append", "y[].append", "numpy.arange", "line[].replace", "float", "float", "x[].append", "y[].append", "numpy.arange", "line[].replace", "float", "float", "x[].append", "y[].append", "line[].replace", "float", "float", "x[].append", "y[].append", "line[].replace", "float", "float", "x[].append", "y[].append", "x[].append", "y[].append", "line[].replace", "float", "float", "float", "float", "line[].replace", "line[].replace"], "function", ["None"], ["", "def", "plot_pickrate_ratings", "(", "filename", ")", ":", "\n", "    ", "colours", "=", "[", "'y'", ",", "'b'", ",", "'k'", ",", "'r'", ",", "'g'", ",", "'cyan'", ",", "'m'", "]", "\n", "x", "=", "[", "list", "(", ")", "for", "_", "in", "range", "(", "7", ")", "]", "\n", "y", "=", "[", "list", "(", ")", "for", "_", "in", "range", "(", "7", ")", "]", "\n", "with", "open", "(", "filename", ",", "'r'", ")", "as", "f", ":", "\n", "        ", "for", "line", "in", "f", ":", "\n", "            ", "line", "=", "line", ".", "split", "(", "';'", ")", "\n", "if", "line", "[", "5", "]", "==", "'None'", ":", "\n", "                ", "continue", "\n", "", "if", "line", "[", "4", "]", "==", "'White'", ":", "\n", "                ", "x", "[", "0", "]", ".", "append", "(", "float", "(", "line", "[", "1", "]", ")", ")", "\n", "y", "[", "0", "]", ".", "append", "(", "float", "(", "line", "[", "3", "]", ".", "replace", "(", "','", ",", "'.'", ")", ")", ")", "\n", "", "elif", "line", "[", "4", "]", "==", "'Blue'", ":", "\n", "                ", "x", "[", "1", "]", ".", "append", "(", "float", "(", "line", "[", "1", "]", ")", ")", "\n", "y", "[", "1", "]", ".", "append", "(", "float", "(", "line", "[", "3", "]", ".", "replace", "(", "','", ",", "'.'", ")", ")", ")", "\n", "", "elif", "line", "[", "4", "]", "==", "'Black'", ":", "\n", "                ", "x", "[", "2", "]", ".", "append", "(", "float", "(", "line", "[", "1", "]", ")", ")", "\n", "y", "[", "2", "]", ".", "append", "(", "float", "(", "line", "[", "3", "]", ".", "replace", "(", "','", ",", "'.'", ")", ")", ")", "\n", "", "elif", "line", "[", "4", "]", "==", "'Red'", ":", "\n", "                ", "x", "[", "3", "]", ".", "append", "(", "float", "(", "line", "[", "1", "]", ")", ")", "\n", "y", "[", "3", "]", ".", "append", "(", "float", "(", "line", "[", "3", "]", ".", "replace", "(", "','", ",", "'.'", ")", ")", ")", "\n", "", "elif", "line", "[", "4", "]", "==", "'Green'", ":", "\n", "                ", "x", "[", "4", "]", ".", "append", "(", "float", "(", "line", "[", "1", "]", ")", ")", "\n", "y", "[", "4", "]", ".", "append", "(", "float", "(", "line", "[", "3", "]", ".", "replace", "(", "','", ",", "'.'", ")", ")", ")", "\n", "", "elif", "line", "[", "4", "]", "==", "'Colourless'", ":", "\n", "                ", "x", "[", "5", "]", ".", "append", "(", "float", "(", "line", "[", "1", "]", ")", ")", "\n", "y", "[", "5", "]", ".", "append", "(", "float", "(", "line", "[", "3", "]", ".", "replace", "(", "','", ",", "'.'", ")", ")", ")", "\n", "", "else", ":", "\n", "                ", "x", "[", "6", "]", ".", "append", "(", "float", "(", "line", "[", "1", "]", ")", ")", "\n", "y", "[", "6", "]", ".", "append", "(", "float", "(", "line", "[", "3", "]", ".", "replace", "(", "','", ",", "'.'", ")", ")", ")", "\n", "", "", "", "reg", "=", "LinearRegression", "(", ")", "\n", "for", "i", "in", "range", "(", "7", ")", ":", "\n", "        ", "x", "[", "i", "]", "=", "np", ".", "array", "(", "x", "[", "i", "]", ")", "\n", "y", "[", "i", "]", "=", "np", ".", "array", "(", "y", "[", "i", "]", ")", "\n", "plt", ".", "scatter", "(", "x", "[", "i", "]", ",", "y", "[", "i", "]", ",", "s", "=", "2", ",", "label", "=", "'Cards'", ",", "color", "=", "colours", "[", "i", "]", ")", "\n", "reg", ".", "fit", "(", "x", "[", "i", "]", ".", "reshape", "(", "-", "1", ",", "1", ")", ",", "y", "[", "i", "]", ".", "reshape", "(", "-", "1", ",", "1", ")", ")", "\n", "plt", ".", "plot", "(", "np", ".", "arange", "(", "0", ",", "1", ",", "0.0001", ")", ".", "reshape", "(", "-", "1", ",", "1", ")", ",", "reg", ".", "predict", "(", "np", ".", "arange", "(", "0", ",", "1", ",", "0.0001", ")", ".", "reshape", "(", "-", "1", ",", "1", ")", ")", ",", "label", "=", "'Regression '", "+", "colours", "[", "i", "]", ",", "c", "=", "colours", "[", "i", "]", ")", "\n", "", "plt", ".", "xlabel", "(", "'Pick-percentage'", ")", "\n", "plt", ".", "ylabel", "(", "'Individual card rating'", ")", "\n", "plt", ".", "title", "(", "'Correlation between pick-percentage and individual card rating'", ")", "\n", "plt", ".", "xlim", "(", "0", ",", "1", ")", "\n", "plt", ".", "ylim", "(", "0", ",", "5", ")", "\n", "#  plt.legend()", "\n", "plt", ".", "show", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.plot_pickrate_against_rarity": [[857, 901], ["matplotlib.violinplot", "enumerate", "vio[].set_edgecolor", "matplotlib.xlabel", "matplotlib.ylabel", "matplotlib.xticks", "matplotlib.ylim", "matplotlib.savefig", "matplotlib.show", "list", "list", "open", "pc.set_facecolor", "pc.set_edgecolor", "range", "range", "line.split.split", "line[].strip", "x[].append", "y[].append", "float", "x[].append", "y[].append", "float", "x[].append", "y[].append", "float", "x[].append", "y[].append", "float"], "function", ["None"], ["", "def", "plot_pickrate_against_rarity", "(", "filename", ")", ":", "\n", "    ", "colours", "=", "[", "'black'", ",", "'silver'", ",", "'gold'", ",", "'brown'", "]", "\n", "labels", "=", "[", "'Common'", ",", "'Uncommon'", ",", "'Rare'", ",", "'Mythic'", "]", "\n", "x", "=", "[", "list", "(", ")", "for", "_", "in", "range", "(", "4", ")", "]", "\n", "y", "=", "[", "list", "(", ")", "for", "_", "in", "range", "(", "4", ")", "]", "\n", "with", "open", "(", "filename", ",", "'r'", ")", "as", "f", ":", "\n", "        ", "for", "line", "in", "f", ":", "\n", "            ", "line", "=", "line", ".", "split", "(", "';'", ")", "\n", "if", "line", "[", "3", "]", "==", "'None'", ":", "\n", "                ", "continue", "\n", "", "rarity", "=", "line", "[", "3", "]", ".", "strip", "(", "'\\n'", ")", "\n", "if", "rarity", "==", "'C'", ":", "\n", "                ", "x", "[", "0", "]", ".", "append", "(", "float", "(", "line", "[", "1", "]", ")", ")", "\n", "y", "[", "0", "]", ".", "append", "(", "1", ")", "\n", "", "elif", "rarity", "==", "'U'", ":", "\n", "                ", "x", "[", "1", "]", ".", "append", "(", "float", "(", "line", "[", "1", "]", ")", ")", "\n", "y", "[", "1", "]", ".", "append", "(", "2", ")", "\n", "", "elif", "rarity", "==", "'R'", ":", "\n", "                ", "x", "[", "2", "]", ".", "append", "(", "float", "(", "line", "[", "1", "]", ")", ")", "\n", "y", "[", "2", "]", ".", "append", "(", "3", ")", "\n", "", "elif", "rarity", "==", "'M'", ":", "\n", "                ", "x", "[", "3", "]", ".", "append", "(", "float", "(", "line", "[", "1", "]", ")", ")", "\n", "y", "[", "3", "]", ".", "append", "(", "4", ")", "\n", "", "", "", "vio", "=", "plt", ".", "violinplot", "(", "x", ",", "showextrema", "=", "False", ",", "showmeans", "=", "True", ",", "bw_method", "=", "0.2", ")", "\n", "for", "i", ",", "pc", "in", "enumerate", "(", "vio", "[", "'bodies'", "]", ")", ":", "\n", "        ", "pc", ".", "set_facecolor", "(", "colours", "[", "i", "]", ")", "\n", "pc", ".", "set_edgecolor", "(", "'black'", ")", "\n", "", "vio", "[", "'cmeans'", "]", ".", "set_edgecolor", "(", "'black'", ")", "\n", "# for i in range(4):", "\n", "#     x[i] = np.array(x[i])", "\n", "#     print(np.mean(x[i]))", "\n", "#     y[i] = np.array(y[i])", "\n", "#     print(np.mean(y[i]))", "\n", "#     # plt.violinplot(x[i],y[i],s = 100, label = labels[i], color = colours[i], alpha = 0.5)", "\n", "#     plt.violinplot(y[i],labels[i], color = colours[i])", "\n", "plt", ".", "xlabel", "(", "'Rarity'", ")", "\n", "plt", ".", "ylabel", "(", "'Pick rate'", ")", "\n", "plt", ".", "xticks", "(", "[", "1", ",", "2", ",", "3", ",", "4", "]", ",", "[", "'Common'", ",", "'Uncommon'", ",", "'Rare'", ",", "'Mythic'", "]", ")", "\n", "plt", ".", "ylim", "(", "0", ",", "1", ")", "\n", "#  plt.ylim(0,5)", "\n", "#   plt.legend()", "\n", "\n", "plt", ".", "savefig", "(", "'plots/firstpick_rarity_2.pdf'", ",", "bbox_inches", "=", "'tight'", ")", "\n", "plt", ".", "show", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.plot_pickrate_rarity": [[902, 941], ["sklearn.linear_model.LinearRegression", "range", "matplotlib.xlabel", "matplotlib.ylabel", "matplotlib.title", "matplotlib.legend", "matplotlib.show", "list", "list", "open", "numpy.array", "print", "numpy.array", "print", "matplotlib.scatter", "sklearn.linear_model.LinearRegression.fit", "range", "range", "line.split.split", "line[].strip", "numpy.mean", "numpy.mean", "x[].reshape", "y[].reshape", "x[].append", "y[].append", "float", "float", "x[].append", "y[].append", "line[].replace", "float", "float", "x[].append", "y[].append", "line[].replace", "float", "float", "x[].append", "y[].append", "line[].replace", "float", "float", "line[].replace"], "function", ["None"], ["", "def", "plot_pickrate_rarity", "(", "filename", ")", ":", "\n", "    ", "colours", "=", "[", "'black'", ",", "'silver'", ",", "'gold'", ",", "'brown'", "]", "\n", "labels", "=", "[", "'Common'", ",", "'Uncommon'", ",", "'Rare'", ",", "'Mythic'", "]", "\n", "x", "=", "[", "list", "(", ")", "for", "_", "in", "range", "(", "4", ")", "]", "\n", "y", "=", "[", "list", "(", ")", "for", "_", "in", "range", "(", "4", ")", "]", "\n", "with", "open", "(", "filename", ",", "'r'", ")", "as", "f", ":", "\n", "        ", "for", "line", "in", "f", ":", "\n", "            ", "line", "=", "line", ".", "split", "(", "';'", ")", "\n", "if", "line", "[", "5", "]", "==", "'None'", ":", "\n", "                ", "continue", "\n", "", "rarity", "=", "line", "[", "5", "]", ".", "strip", "(", "'\\n'", ")", "\n", "if", "rarity", "==", "'C'", ":", "\n", "                ", "x", "[", "0", "]", ".", "append", "(", "float", "(", "line", "[", "1", "]", ")", ")", "\n", "y", "[", "0", "]", ".", "append", "(", "float", "(", "line", "[", "3", "]", ".", "replace", "(", "','", ",", "'.'", ")", ")", ")", "\n", "", "elif", "rarity", "==", "'U'", ":", "\n", "                ", "x", "[", "1", "]", ".", "append", "(", "float", "(", "line", "[", "1", "]", ")", ")", "\n", "y", "[", "1", "]", ".", "append", "(", "float", "(", "line", "[", "3", "]", ".", "replace", "(", "','", ",", "'.'", ")", ")", ")", "\n", "", "elif", "rarity", "==", "'R'", ":", "\n", "                ", "x", "[", "2", "]", ".", "append", "(", "float", "(", "line", "[", "1", "]", ")", ")", "\n", "y", "[", "2", "]", ".", "append", "(", "float", "(", "line", "[", "3", "]", ".", "replace", "(", "','", ",", "'.'", ")", ")", ")", "\n", "", "elif", "rarity", "==", "'M'", ":", "\n", "                ", "x", "[", "3", "]", ".", "append", "(", "float", "(", "line", "[", "1", "]", ")", ")", "\n", "y", "[", "3", "]", ".", "append", "(", "float", "(", "line", "[", "3", "]", ".", "replace", "(", "','", ",", "'.'", ")", ")", ")", "\n", "", "", "", "reg", "=", "LinearRegression", "(", ")", "\n", "for", "i", "in", "range", "(", "4", ")", ":", "\n", "        ", "x", "[", "i", "]", "=", "np", ".", "array", "(", "x", "[", "i", "]", ")", "\n", "print", "(", "np", ".", "mean", "(", "x", "[", "i", "]", ")", ")", "\n", "y", "[", "i", "]", "=", "np", ".", "array", "(", "y", "[", "i", "]", ")", "\n", "print", "(", "np", ".", "mean", "(", "y", "[", "i", "]", ")", ")", "\n", "plt", ".", "scatter", "(", "x", "[", "i", "]", ",", "y", "[", "i", "]", ",", "s", "=", "100", ",", "label", "=", "labels", "[", "i", "]", ",", "color", "=", "colours", "[", "i", "]", ",", "alpha", "=", "0.5", ")", "\n", "reg", ".", "fit", "(", "x", "[", "i", "]", ".", "reshape", "(", "-", "1", ",", "1", ")", ",", "y", "[", "i", "]", ".", "reshape", "(", "-", "1", ",", "1", ")", ")", "\n", "# plt.plot(np.arange(0,1,0.0001).reshape(-1,1),reg.predict(np.arange(0,1,0.0001).reshape(-1,1)) , c = colours[i])", "\n", "", "plt", ".", "xlabel", "(", "'Pick-percentage'", ")", "\n", "plt", ".", "ylabel", "(", "'Individual card rating'", ")", "\n", "plt", ".", "title", "(", "'Correlation between pick-percentage and individual card rating by rarity'", ")", "\n", "#   plt.xlim(0,1)", "\n", "#   plt.ylim(0,5)", "\n", "plt", ".", "legend", "(", ")", "\n", "plt", ".", "show", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.plot_accuracy_per_pick": [[943, 1010], ["list", "list", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.xlim", "matplotlib.ylim", "matplotlib.xlabel", "matplotlib.ylabel", "print", "matplotlib.legend", "matplotlib.savefig", "matplotlib.show", "open", "csv.reader", "enumerate", "open", "numpy.load", "f.close", "list", "range", "[].append", "range", "range", "int", "list.append", "numpy.argmax", "sum", "sum", "range", "int", "numpy.random.choice", "sum", "len", "torch.no_grad", "torch.no_grad", "network", "list", "range", "range", "range", "range", "range", "range", "range", "range", "sum", "len", "range", "range", "sum", "len", "range", "range", "sum", "len", "range", "range", "sum", "len", "range", "range", "sum", "len", "range", "range", "sum", "len", "range", "range", "sum", "len", "range", "range", "sum", "len", "range", "range", "sum", "len", "range", "range", "sum", "len", "range", "range", "sum", "len", "range", "range", "sum", "len", "range", "range", "sum", "len", "range", "range", "sum", "len", "range", "range", "sum", "len", "range", "os.listdir", "torch.Tensor().view", "torch.Tensor().view", "len", "torch.zeros", "torch.zeros", "list.append", "models.get_distance().item", "sorted", "torch.Tensor", "torch.Tensor", "zip", "int", "models.get_distance", "network", "range", "len"], "function", ["home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.models.get_distance"], ["", "def", "plot_accuracy_per_pick", "(", "network", ")", ":", "\n", "    ", "with", "open", "(", "'exact_correct.tsv'", ")", "as", "f", ":", "\n", "        ", "reader", "=", "csv", ".", "reader", "(", "f", ",", "delimiter", "=", "\"\\t\"", ")", "\n", "lines", "=", "[", "line", "for", "line", "in", "reader", "]", "\n", "", "accuracies", "=", "[", "[", "list", "(", ")", "for", "_", "in", "range", "(", "45", ")", "]", "for", "__", "in", "range", "(", "5", ")", "]", "\n", "for", "line", "in", "lines", "[", "1", ":", "]", ":", "\n", "        ", "for", "i", ",", "elem", "in", "enumerate", "(", "line", "[", "3", ":", "]", ")", ":", "\n", "            ", "accuracies", "[", "i", "]", "[", "int", "(", "line", "[", "1", "]", ")", "-", "1", "]", ".", "append", "(", "int", "(", "elem", ")", ")", "\n", "", "", "pick_number", "=", "[", "0", "for", "_", "in", "range", "(", "45", ")", "]", "\n", "correct_picks", "=", "[", "0", "for", "_", "in", "range", "(", "45", ")", "]", "\n", "pick_distance", "=", "list", "(", ")", "\n", "pick_numbers", "=", "list", "(", ")", "\n", "folder_name", "=", "'E:/picks_2/'", "\n", "with", "open", "(", "folder_name", "+", "np", ".", "random", ".", "choice", "(", "os", ".", "listdir", "(", "folder_name", ")", ")", ",", "'rb'", ")", "as", "f", ":", "\n", "        ", "data", "=", "np", ".", "load", "(", "f", ",", "allow_pickle", "=", "True", ")", "\n", "for", "pick", "in", "data", ":", "\n", "            ", "chosen_num", "=", "int", "(", "sum", "(", "pick", "[", "1", "]", ")", ")", "\n", "pick_number", "[", "chosen_num", "]", "+=", "1", "\n", "choices", "=", "pick", "[", "0", "]", "\n", "pick_numbers", ".", "append", "(", "len", "(", "choices", ")", ")", "\n", "anchor", "=", "pick", "[", "1", "]", "\n", "correct_choice", "=", "np", ".", "argmax", "(", "pick", "[", "2", "]", ")", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "                ", "out1", "=", "network", "(", "torch", ".", "Tensor", "(", "anchor", ")", ".", "view", "(", "1", ",", "-", "1", ")", ")", "\n", "\n", "distances", "=", "list", "(", ")", "\n", "for", "i", "in", "range", "(", "len", "(", "choices", ")", ")", ":", "\n", "                    ", "elem", "=", "torch", ".", "zeros", "(", "(", "1", ",", "265", ")", ")", "\n", "elem", "[", "0", ",", "choices", "[", "i", "]", "]", "=", "1.0", "\n", "distances", ".", "append", "(", "networks", ".", "get_distance", "(", "out1", ",", "network", "(", "elem", ")", ")", ".", "item", "(", ")", ")", "\n", "\n", "", "ranking", "=", "[", "x", "for", "_", ",", "x", "in", "sorted", "(", "zip", "(", "distances", ",", "[", "y", "for", "y", "in", "range", "(", "len", "(", "distances", ")", ")", "]", ")", ")", "]", "\n", "if", "choices", "[", "ranking", "[", "0", "]", "]", "==", "correct_choice", ":", "\n", "                    ", "correct_picks", "[", "chosen_num", "]", "+=", "1", "\n", "", "", "", "f", ".", "close", "(", ")", "\n", "del", "data", "\n", "", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "15", ")", "]", ",", "[", "correct_picks", "[", "i", "]", "/", "pick_number", "[", "i", "]", "for", "i", "in", "range", "(", "15", ")", "]", ",", "c", "=", "'lightslategrey'", ",", "label", "=", "'SiameseBot'", ")", "\n", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "15", ",", "30", ")", "]", ",", "[", "correct_picks", "[", "i", "]", "/", "pick_number", "[", "i", "]", "for", "i", "in", "range", "(", "15", ",", "30", ")", "]", ",", "c", "=", "'lightslategrey'", ")", "\n", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "30", ",", "45", ")", "]", ",", "[", "correct_picks", "[", "i", "]", "/", "pick_number", "[", "i", "]", "for", "i", "in", "range", "(", "30", ",", "45", ")", "]", ",", "c", "=", "'lightslategrey'", ")", "\n", "\n", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "15", ")", "]", ",", "[", "sum", "(", "accuracies", "[", "0", "]", "[", "i", "]", ")", "/", "len", "(", "accuracies", "[", "0", "]", "[", "i", "]", ")", "for", "i", "in", "range", "(", "15", ")", "]", ",", "c", "=", "'red'", ",", "label", "=", "'RandomBot'", ")", "\n", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "15", ",", "30", ")", "]", ",", "[", "sum", "(", "accuracies", "[", "0", "]", "[", "i", "]", ")", "/", "len", "(", "accuracies", "[", "0", "]", "[", "i", "]", ")", "for", "i", "in", "range", "(", "15", ",", "30", ")", "]", ",", "c", "=", "'red'", ")", "\n", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "30", ",", "45", ")", "]", ",", "[", "sum", "(", "accuracies", "[", "0", "]", "[", "i", "]", ")", "/", "len", "(", "accuracies", "[", "0", "]", "[", "i", "]", ")", "for", "i", "in", "range", "(", "30", ",", "45", ")", "]", ",", "c", "=", "'red'", ")", "\n", "\n", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "15", ")", "]", ",", "[", "sum", "(", "accuracies", "[", "1", "]", "[", "i", "]", ")", "/", "len", "(", "accuracies", "[", "1", "]", "[", "i", "]", ")", "for", "i", "in", "range", "(", "15", ")", "]", ",", "c", "=", "'blue'", ",", "label", "=", "'RaredraftBot'", ")", "\n", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "15", ",", "30", ")", "]", ",", "[", "sum", "(", "accuracies", "[", "1", "]", "[", "i", "]", ")", "/", "len", "(", "accuracies", "[", "1", "]", "[", "i", "]", ")", "for", "i", "in", "range", "(", "15", ",", "30", ")", "]", ",", "c", "=", "'blue'", ")", "\n", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "30", ",", "45", ")", "]", ",", "[", "sum", "(", "accuracies", "[", "1", "]", "[", "i", "]", ")", "/", "len", "(", "accuracies", "[", "1", "]", "[", "i", "]", ")", "for", "i", "in", "range", "(", "30", ",", "45", ")", "]", ",", "c", "=", "'blue'", ")", "\n", "\n", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "15", ")", "]", ",", "[", "sum", "(", "accuracies", "[", "2", "]", "[", "i", "]", ")", "/", "len", "(", "accuracies", "[", "2", "]", "[", "i", "]", ")", "for", "i", "in", "range", "(", "15", ")", "]", ",", "c", "=", "'green'", ",", "label", "=", "'DraftsimBot'", ")", "\n", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "15", ",", "30", ")", "]", ",", "[", "sum", "(", "accuracies", "[", "2", "]", "[", "i", "]", ")", "/", "len", "(", "accuracies", "[", "2", "]", "[", "i", "]", ")", "for", "i", "in", "range", "(", "15", ",", "30", ")", "]", ",", "c", "=", "'green'", ")", "\n", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "30", ",", "45", ")", "]", ",", "[", "sum", "(", "accuracies", "[", "2", "]", "[", "i", "]", ")", "/", "len", "(", "accuracies", "[", "2", "]", "[", "i", "]", ")", "for", "i", "in", "range", "(", "30", ",", "45", ")", "]", ",", "c", "=", "'green'", ")", "\n", "\n", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "15", ")", "]", ",", "[", "sum", "(", "accuracies", "[", "3", "]", "[", "i", "]", ")", "/", "len", "(", "accuracies", "[", "3", "]", "[", "i", "]", ")", "for", "i", "in", "range", "(", "15", ")", "]", ",", "c", "=", "'purple'", ",", "label", "=", "'BayesBot'", ")", "\n", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "15", ",", "30", ")", "]", ",", "[", "sum", "(", "accuracies", "[", "3", "]", "[", "i", "]", ")", "/", "len", "(", "accuracies", "[", "3", "]", "[", "i", "]", ")", "for", "i", "in", "range", "(", "15", ",", "30", ")", "]", ",", "c", "=", "'purple'", ")", "\n", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "30", ",", "45", ")", "]", ",", "[", "sum", "(", "accuracies", "[", "3", "]", "[", "i", "]", ")", "/", "len", "(", "accuracies", "[", "3", "]", "[", "i", "]", ")", "for", "i", "in", "range", "(", "30", ",", "45", ")", "]", ",", "c", "=", "'purple'", ")", "\n", "\n", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "15", ")", "]", ",", "[", "sum", "(", "accuracies", "[", "4", "]", "[", "i", "]", ")", "/", "len", "(", "accuracies", "[", "4", "]", "[", "i", "]", ")", "for", "i", "in", "range", "(", "15", ")", "]", ",", "c", "=", "'orange'", ",", "label", "=", "'NNetBot'", ")", "\n", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "15", ",", "30", ")", "]", ",", "[", "sum", "(", "accuracies", "[", "4", "]", "[", "i", "]", ")", "/", "len", "(", "accuracies", "[", "4", "]", "[", "i", "]", ")", "for", "i", "in", "range", "(", "15", ",", "30", ")", "]", ",", "c", "=", "'orange'", ")", "\n", "plt", ".", "plot", "(", "[", "j", "for", "j", "in", "range", "(", "30", ",", "45", ")", "]", ",", "[", "sum", "(", "accuracies", "[", "4", "]", "[", "i", "]", ")", "/", "len", "(", "accuracies", "[", "4", "]", "[", "i", "]", ")", "for", "i", "in", "range", "(", "30", ",", "45", ")", "]", ",", "c", "=", "'orange'", ")", "\n", "plt", ".", "xlim", "(", "0", ",", "45", ")", "\n", "plt", ".", "ylim", "(", "0", ",", "1", ")", "\n", "plt", ".", "xlabel", "(", "'Pick'", ")", "\n", "plt", ".", "ylabel", "(", "'Accuracy'", ")", "\n", "print", "(", "sum", "(", "correct_picks", ")", "/", "sum", "(", "pick_number", ")", ")", "\n", "plt", ".", "legend", "(", "ncol", "=", "2", ",", "loc", "=", "4", ")", "\n", "plt", ".", "savefig", "(", "'plots/accuracy_per_pick_comp.pdf'", ",", "bbox_inches", "=", "'tight'", ")", "\n", "plt", ".", "show", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.load_card_dict": [[1011, 1015], ["open", "pickle.load"], "function", ["None"], ["", "def", "load_card_dict", "(", "path", ")", ":", "\n", "    ", "with", "open", "(", "path", ",", "'rb'", ")", "as", "file", ":", "\n", "        ", "card_dict", "=", "pickle", ".", "load", "(", "file", ")", "\n", "", "return", "card_dict", "\n", "\n"]], "home.repos.pwc.inspect_result.Tibert97_Predicting-Human-Card-Selection-in-Magic-The-Gathering-with-Contextual-Preference-Ranking.None.utils.plot_embedding_dimension": [[1016, 1037], ["matplotlib.get_cmap", "matplotlib.subplots", "enumerate", "ax1.set_ylabel", "matplotlib.xlabel", "matplotlib.xlim", "matplotlib.ylim", "ax1.get_legend_handles_labels", "zip", "ax1.legend", "matplotlib.savefig", "matplotlib.show", "os.listdir", "open", "csv.reader", "ax1.plot", "sorted", "float", "float", "range", "zip", "file.find", "len", "plt.get_cmap.", "file.find", "int", "float", "len", "os.listdir"], "function", ["None"], ["", "def", "plot_embedding_dimension", "(", "path", ")", ":", "\n", "    ", "cmap", "=", "plt", ".", "get_cmap", "(", "'jet_r'", ")", "\n", "fig", ",", "ax1", "=", "plt", ".", "subplots", "(", ")", "\n", "for", "j", ",", "file", "in", "enumerate", "(", "os", ".", "listdir", "(", "path", ")", ")", ":", "\n", "        ", "with", "open", "(", "path", "+", "file", ")", "as", "f", ":", "\n", "            ", "reader", "=", "csv", ".", "reader", "(", "f", ",", "delimiter", "=", "','", ")", "\n", "lines", "=", "[", "line", "for", "line", "in", "reader", "]", "\n", "comparisons", "=", "[", "float", "(", "i", ")", "for", "i", "in", "lines", "[", "0", "]", "]", "\n", "distances", "=", "[", "float", "(", "i", ")", "for", "i", "in", "lines", "[", "2", "]", "]", "\n", "label", "=", "file", "[", "file", ".", "find", "(", "'_'", ")", "+", "1", ":", "file", ".", "find", "(", "'d'", ")", "]", "\n", "ax1", ".", "plot", "(", "range", "(", "len", "(", "comparisons", ")", ")", ",", "comparisons", ",", "c", "=", "cmap", "(", "float", "(", "j", ")", "/", "len", "(", "os", ".", "listdir", "(", "path", ")", ")", ")", ",", "label", "=", "label", ")", "\n", "", "", "ax1", ".", "set_ylabel", "(", "'Correct picks'", ")", "\n", "plt", ".", "xlabel", "(", "'Subepoch'", ")", "\n", "plt", ".", "xlim", "(", "0", ",", "50", ")", "\n", "plt", ".", "ylim", "(", "0", ",", "1", ")", "\n", "handles", ",", "labels", "=", "ax1", ".", "get_legend_handles_labels", "(", ")", "\n", "# sort both labels and handles by labels", "\n", "labels", ",", "handles", "=", "zip", "(", "*", "sorted", "(", "zip", "(", "labels", ",", "handles", ")", ",", "key", "=", "lambda", "t", ":", "int", "(", "t", "[", "0", "]", ")", ",", "reverse", "=", "True", ")", ")", "\n", "ax1", ".", "legend", "(", "handles", ",", "labels", ",", "ncol", "=", "3", ",", "loc", "=", "4", ")", "\n", "plt", ".", "savefig", "(", "'plots/embedding_comparison.pdf'", ",", "bbox_inches", "=", "'tight'", ")", "\n", "plt", ".", "show", "(", ")", "\n", "\n"]]}