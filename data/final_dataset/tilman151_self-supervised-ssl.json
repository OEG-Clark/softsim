{"home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_semi_supervised.AllDataSplitter.__init__": [[66, 68], ["None"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "n_splits", ")", ":", "\n", "        ", "self", ".", "n_splits", "=", "n_splits", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_semi_supervised.AllDataSplitter.split": [[69, 72], ["range", "list"], "methods", ["None"], ["", "def", "split", "(", "self", ",", "x", ")", ":", "\n", "        ", "for", "_", "in", "range", "(", "self", ".", "n_splits", ")", ":", "\n", "            ", "yield", "list", "(", "x", ")", ",", "[", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_semi_supervised.run": [[13, 61], ["range", "zip", "ray.get", "datetime.datetime.now().timestamp", "random.seed", "random.randint", "sklearn.model_selection.ShuffleSplit", "run_semi_supervised.AllDataSplitter", "run_semi_supervised.AllDataSplitter.split", "process_ids.append", "range", "ray_train.remote", "datetime.datetime.now"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.AllDataSplitter.split"], ["def", "run", "(", "\n", "source", ",", "\n", "percent_broken", ",", "\n", "percent_fails", ",", "\n", "arch_config", ",", "\n", "pre_config", ",", "\n", "pretrain", ",", "\n", "encoder", ",", "\n", "mode", ",", "\n", "record_embeddings", ",", "\n", "replications", ",", "\n", "gpu", ",", "\n", "master_seed", ",", "\n", "version", "=", "None", ",", "\n", ")", ":", "\n", "    ", "if", "version", "is", "None", ":", "\n", "        ", "version", "=", "datetime", ".", "now", "(", ")", ".", "timestamp", "(", ")", "\n", "", "if", "master_seed", ":", "\n", "        ", "random", ".", "seed", "(", "master_seed", ")", "\n", "", "seeds", "=", "[", "random", ".", "randint", "(", "0", ",", "9999999", ")", "for", "_", "in", "range", "(", "replications", ")", "]", "\n", "\n", "if", "percent_fails", "<", "1", ":", "\n", "        ", "splitter", "=", "ShuffleSplit", "(", "\n", "n_splits", "=", "replications", ",", "train_size", "=", "percent_fails", ",", "random_state", "=", "42", "\n", ")", "\n", "", "else", ":", "\n", "        ", "splitter", "=", "AllDataSplitter", "(", "replications", ")", "\n", "", "run_idx", "=", "range", "(", "CMAPSSLoader", ".", "NUM_TRAIN_RUNS", "[", "source", "]", ")", "\n", "process_ids", "=", "[", "]", "\n", "for", "(", "failed_idx", ",", "_", ")", ",", "s", "in", "zip", "(", "splitter", ".", "split", "(", "run_idx", ")", ",", "seeds", ")", ":", "\n", "        ", "process_ids", ".", "append", "(", "\n", "ray_train", ".", "remote", "(", "\n", "source", ",", "\n", "percent_broken", ",", "\n", "failed_idx", ",", "\n", "arch_config", ",", "\n", "pre_config", ",", "\n", "encoder", ",", "\n", "mode", ",", "\n", "record_embeddings", ",", "\n", "s", ",", "\n", "gpu", ",", "\n", "version", ",", "\n", "pretrain", ",", "\n", ")", "\n", ")", "\n", "\n", "", "ray", ".", "get", "(", "process_ids", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_semi_supervised.ray_train": [[74, 116], ["ray.remote", "run_baseline.run", "run_pretraining.run"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_pretraining.run", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_pretraining.run"], ["", "", "", "@", "ray", ".", "remote", "(", "num_cpus", "=", "3", ",", "num_gpus", "=", "0.5", ")", "\n", "def", "ray_train", "(", "\n", "source", ",", "\n", "percent_broken", ",", "\n", "failed_idx", ",", "\n", "arch_config", ",", "\n", "pre_config", ",", "\n", "encoder", ",", "\n", "mode", ",", "\n", "record_embeddings", ",", "\n", "s", ",", "\n", "gpu", ",", "\n", "version", ",", "\n", "pretrain", ",", "\n", ")", ":", "\n", "    ", "if", "pretrain", ":", "\n", "        ", "checkpoint", ",", "_", "=", "run_pretraining", "(", "\n", "source", ",", "\n", "None", ",", "\n", "percent_broken", ",", "\n", "failed_idx", ",", "\n", "arch_config", ",", "\n", "pre_config", ",", "\n", "encoder", ",", "\n", "mode", ",", "\n", "record_embeddings", ",", "\n", "s", ",", "\n", "gpu", ",", "\n", "version", ",", "\n", ")", "\n", "", "else", ":", "\n", "        ", "checkpoint", "=", "None", "\n", "", "run_baseline", "(", "\n", "source", ",", "\n", "failed_idx", ",", "\n", "arch_config", ",", "\n", "encoder", ",", "\n", "s", ",", "\n", "gpu", ",", "\n", "checkpoint", ",", "\n", "version", ",", "\n", "record_embeddings", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_baseline.run": [[7, 31], ["building.build_baseline", "trainer.fit", "trainer.test"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_baseline"], ["def", "run", "(", "\n", "source", ",", "\n", "fails", ",", "\n", "config", ",", "\n", "encoder", ",", "\n", "seed", ",", "\n", "gpu", ",", "\n", "pretrained_encoder_path", ",", "\n", "version", ",", "\n", "record_embeddings", "=", "False", ",", "\n", ")", ":", "\n", "    ", "trainer", ",", "data", ",", "model", "=", "building", ".", "build_baseline", "(", "\n", "source", ",", "\n", "fails", ",", "\n", "config", ",", "\n", "encoder", ",", "\n", "pretrained_encoder_path", ",", "\n", "gpu", ",", "\n", "seed", ",", "\n", "version", ",", "\n", "record_embeddings", ",", "\n", ")", "\n", "trainer", ".", "fit", "(", "model", ",", "datamodule", "=", "data", ")", "\n", "trainer", ".", "test", "(", "datamodule", "=", "data", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_baseline.run_multiple": [[33, 51], ["random.seed", "random.randint", "datetime.datetime.now().timestamp", "range", "run_baseline.run", "datetime.datetime.now"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_pretraining.run"], ["", "def", "run_multiple", "(", "\n", "source", ",", "\n", "fails", ",", "\n", "config", ",", "\n", "encoder", ",", "\n", "replications", ",", "\n", "gpu", ",", "\n", "pretrained_encoder_path", ",", "\n", "version", "=", "None", ",", "\n", ")", ":", "\n", "    ", "random", ".", "seed", "(", "999", ")", "\n", "seeds", "=", "[", "random", ".", "randint", "(", "0", ",", "9999999", ")", "for", "_", "in", "range", "(", "replications", ")", "]", "\n", "if", "version", "is", "None", ":", "\n", "        ", "version", "=", "datetime", ".", "now", "(", ")", ".", "timestamp", "(", ")", "\n", "\n", "", "for", "f", "in", "fails", ":", "\n", "        ", "for", "s", "in", "seeds", ":", "\n", "            ", "run", "(", "source", ",", "f", ",", "config", ",", "encoder", ",", "s", ",", "gpu", ",", "pretrained_encoder_path", ",", "version", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.AllDataSplitter.__init__": [[58, 60], ["None"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "n_splits", ")", ":", "\n", "        ", "self", ".", "n_splits", "=", "n_splits", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.AllDataSplitter.split": [[61, 64], ["range", "list"], "methods", ["None"], ["", "def", "split", "(", "self", ",", "x", ")", ":", "\n", "        ", "for", "_", "in", "range", "(", "self", ".", "n_splits", ")", ":", "\n", "            ", "yield", "list", "(", "x", ")", ",", "[", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.run": [[13, 53], ["range", "zip", "ray.get", "datetime.datetime.now().timestamp", "random.seed", "random.randint", "sklearn.model_selection.ShuffleSplit", "run_rbm.AllDataSplitter", "run_rbm.AllDataSplitter.split", "process_ids.append", "range", "ray_train.remote", "datetime.datetime.now"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.AllDataSplitter.split"], ["def", "run", "(", "\n", "source", ",", "\n", "percent_broken", ",", "\n", "percent_fails", ",", "\n", "arch_config", ",", "\n", "encoder", ",", "\n", "replications", ",", "\n", "gpu", ",", "\n", "master_seed", ",", "\n", "version", "=", "None", ",", "\n", ")", ":", "\n", "    ", "if", "version", "is", "None", ":", "\n", "        ", "version", "=", "datetime", ".", "now", "(", ")", ".", "timestamp", "(", ")", "\n", "", "if", "master_seed", ":", "\n", "        ", "random", ".", "seed", "(", "master_seed", ")", "\n", "", "seeds", "=", "[", "random", ".", "randint", "(", "0", ",", "9999999", ")", "for", "_", "in", "range", "(", "replications", ")", "]", "\n", "\n", "if", "percent_fails", "<", "1", ":", "\n", "        ", "splitter", "=", "ShuffleSplit", "(", "\n", "n_splits", "=", "replications", ",", "train_size", "=", "percent_fails", ",", "random_state", "=", "42", "\n", ")", "\n", "", "else", ":", "\n", "        ", "splitter", "=", "AllDataSplitter", "(", "replications", ")", "\n", "", "run_idx", "=", "range", "(", "CMAPSSLoader", ".", "NUM_TRAIN_RUNS", "[", "source", "]", ")", "\n", "process_ids", "=", "[", "]", "\n", "for", "(", "failed_idx", ",", "_", ")", ",", "s", "in", "zip", "(", "splitter", ".", "split", "(", "run_idx", ")", ",", "seeds", ")", ":", "\n", "        ", "process_ids", ".", "append", "(", "\n", "ray_train", ".", "remote", "(", "\n", "source", ",", "\n", "percent_broken", ",", "\n", "failed_idx", ",", "\n", "arch_config", ",", "\n", "encoder", ",", "\n", "s", ",", "\n", "gpu", ",", "\n", "version", ",", "\n", ")", "\n", ")", "\n", "\n", "", "ray", ".", "get", "(", "process_ids", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.ray_train": [[66, 84], ["ray.remote", "run_rbm.run_pretraining", "run_rbm.run_baseline"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.run_pretraining", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.run_baseline"], ["", "", "", "@", "ray", ".", "remote", "(", "num_cpus", "=", "3", ",", "num_gpus", "=", "0.5", ")", "\n", "def", "ray_train", "(", "source", ",", "percent_broken", ",", "failed_idx", ",", "arch_config", ",", "encoder", ",", "s", ",", "gpu", ",", "version", ")", ":", "\n", "    ", "pretrained_rbm", "=", "run_pretraining", "(", "\n", "source", ",", "\n", "percent_broken", ",", "\n", "failed_idx", ",", "\n", "arch_config", ",", "\n", "gpu", ",", "\n", ")", "\n", "run_baseline", "(", "\n", "source", ",", "\n", "failed_idx", ",", "\n", "arch_config", ",", "\n", "encoder", ",", "\n", "s", ",", "\n", "gpu", ",", "\n", "pretrained_rbm", ",", "\n", "version", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.run_pretraining": [[87, 123], ["print", "torch.device", "building.build_datamodule", "building.build_datamodule.prepare_data", "building.build_datamodule.setup", "building.build_rbm().to", "torch.optim.Adam", "rbm.train", "print", "torch.cat", "rbm.parameters", "torch.cat", "torch.no_grad", "building.build_datamodule.train_dataloader", "building.build_rbm", "batch.to.to", "rbm.reconstruct", "torch.sum().cpu().item", "len", "building.build_datamodule.val_dataloader", "torch.sum().cpu", "torch.sum"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_datamodule", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader.prepare_data", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.setup", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.train_dataloader", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_rbm", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.val_dataloader"], ["", "def", "run_pretraining", "(", "source", ",", "percent_broken", ",", "failed_idx", ",", "arch_config", ",", "gpu", ")", ":", "\n", "    ", "print", "(", "\"Pre-train RBM layer...\"", ")", "\n", "device", "=", "torch", ".", "device", "(", "f\"cuda:{gpu}\"", ")", "\n", "dm", "=", "building", ".", "build_datamodule", "(", "\n", "source", ",", "\n", "None", ",", "\n", "percent_broken", ",", "\n", "failed_idx", ",", "\n", "arch_config", "[", "\"batch_size\"", "]", ",", "\n", "truncate_val", "=", "True", ",", "\n", "distance_mode", "=", "\"linear\"", ",", "\n", "min_distance", "=", "1", ",", "\n", ")", "\n", "dm", ".", "prepare_data", "(", ")", "\n", "dm", ".", "setup", "(", ")", "\n", "data", "=", "(", "torch", ".", "cat", "(", "[", "anchor", ",", "query", "]", ")", "for", "anchor", ",", "query", ",", "*", "_", "in", "dm", ".", "train_dataloader", "(", ")", ")", "\n", "rbm", ":", "RestrictedBoltzmannMachineCD", "=", "building", ".", "build_rbm", "(", "\n", "14", ",", "arch_config", "[", "\"base_filters\"", "]", "\n", ")", ".", "to", "(", "device", ")", "\n", "adam", "=", "torch", ".", "optim", ".", "Adam", "(", "rbm", ".", "parameters", "(", ")", ",", "lr", "=", "1e-4", ")", "\n", "rbm", ".", "train", "(", "data", ",", "epochs", "=", "5", ",", "optimizer", "=", "adam", ",", "device", "=", "device", ")", "\n", "\n", "data", "=", "(", "torch", ".", "cat", "(", "[", "anchor", ",", "query", "]", ")", "for", "anchor", ",", "query", ",", "*", "_", "in", "dm", ".", "val_dataloader", "(", ")", "[", "0", "]", ")", "\n", "recon_error", "=", "0", "\n", "num_elem", "=", "0", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "        ", "for", "batch", "in", "data", ":", "\n", "            ", "batch", "=", "batch", ".", "to", "(", "device", ")", "\n", "recon", "=", "rbm", ".", "reconstruct", "(", "visible_input", "=", "batch", ")", "\n", "recon_error", "+=", "torch", ".", "sum", "(", "(", "batch", "-", "recon", ")", "**", "2", ")", ".", "cpu", "(", ")", ".", "item", "(", ")", "\n", "num_elem", "+=", "len", "(", "batch", ")", "\n", "", "recon_error", "/=", "num_elem", "*", "dm", ".", "window_size", "\n", "\n", "", "print", "(", "f\"Recon error: {recon_error:.2f}\"", ")", "\n", "\n", "return", "rbm", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.run_baseline": [[125, 133], ["building.build_baseline", "model.load_from_rbm", "trainer.fit", "trainer.test"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_baseline", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.mixins.LoadEncoderMixin.load_from_rbm"], ["", "def", "run_baseline", "(", "source", ",", "fails", ",", "config", ",", "encoder", ",", "seed", ",", "gpu", ",", "pretrained_rbm", ",", "version", ")", ":", "\n", "    ", "trainer", ",", "data", ",", "model", "=", "building", ".", "build_baseline", "(", "\n", "source", ",", "fails", ",", "config", ",", "encoder", ",", "None", ",", "gpu", ",", "seed", ",", "version", "\n", ")", "\n", "model", ".", "hparams", "[", "\"encoder\"", "]", "=", "f\"rbm_{encoder}\"", "\n", "model", ".", "load_from_rbm", "(", "pretrained_rbm", ")", "\n", "trainer", ".", "fit", "(", "model", ",", "datamodule", "=", "data", ")", "\n", "trainer", ".", "test", "(", "datamodule", "=", "data", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.reproduce_baseline.reproduce": [[15, 61], ["ray.init", "random.seed", "enumerate", "ray.shutdown", "datetime.datetime.now().timestamp", "os.path.join", "building.load_config", "os.path.join", "building.load_config", "enumerate", "print", "random.randint", "range", "print", "datetime.datetime.now", "range", "len", "run_semi_supervised.run", "type", "len", "error_log.append"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.load_config", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.load_config", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_pretraining.run"], ["def", "reproduce", "(", "base_version", ",", "percent_fails", ",", "encoder", ",", "master_seed", ")", ":", "\n", "    ", "ray", ".", "init", "(", ")", "\n", "\n", "if", "base_version", "is", "None", ":", "\n", "        ", "base_version", "=", "datetime", ".", "now", "(", ")", ".", "timestamp", "(", ")", "\n", "", "error_log", "=", "[", "]", "\n", "fds", "=", "[", "1", ",", "2", ",", "3", ",", "4", "]", "\n", "random", ".", "seed", "(", "master_seed", ")", "\n", "seeds", "=", "[", "\n", "[", "random", ".", "randint", "(", "0", ",", "99999999", ")", "for", "_", "in", "range", "(", "len", "(", "percent_fails", ")", ")", "]", "\n", "for", "_", "in", "range", "(", "len", "(", "fds", ")", ")", "\n", "]", "\n", "\n", "for", "num_fd", ",", "fd", "in", "enumerate", "(", "fds", ")", ":", "\n", "        ", "arch_config_path", "=", "os", ".", "path", ".", "join", "(", "config_root", ",", "f\"baseline_fd{fd}.json\"", ")", "\n", "arch_config", "=", "building", ".", "load_config", "(", "arch_config_path", ")", "\n", "pre_config_path", "=", "os", ".", "path", ".", "join", "(", "config_root", ",", "f\"baseline_pre_fd{fd}.json\"", ")", "\n", "pre_config", "=", "building", ".", "load_config", "(", "pre_config_path", ")", "\n", "for", "num_fails", ",", "fails", "in", "enumerate", "(", "percent_fails", ")", ":", "\n", "            ", "seed", "=", "seeds", "[", "num_fd", "]", "[", "num_fails", "]", "\n", "try", ":", "\n", "                ", "run", "(", "\n", "fd", ",", "\n", "None", ",", "\n", "fails", ",", "\n", "arch_config", ",", "\n", "pre_config", ",", "\n", "pretrain", "=", "False", ",", "\n", "encoder", "=", "encoder", ",", "\n", "mode", "=", "\"metric\"", ",", "\n", "record_embeddings", "=", "False", ",", "\n", "replications", "=", "10", ",", "\n", "gpu", "=", "[", "0", "]", ",", "\n", "master_seed", "=", "seed", ",", "\n", "version", "=", "f\"{base_version}_baseline@{fails:.2f}\"", ",", "\n", ")", "\n", "", "except", "Exception", "as", "e", ":", "\n", "                ", "error_log", ".", "append", "(", "e", ")", "\n", "\n", "", "", "", "ray", ".", "shutdown", "(", ")", "\n", "\n", "if", "error_log", ":", "\n", "        ", "for", "e", "in", "error_log", ":", "\n", "            ", "print", "(", "type", "(", "e", ")", ",", "e", ")", "\n", "", "", "else", ":", "\n", "        ", "print", "(", "\"Everything went well.\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.reproduce_semi_supervised.reproduce": [[15, 62], ["ray.init", "random.seed", "enumerate", "ray.shutdown", "datetime.datetime.now().timestamp", "os.path.join", "building.load_config", "os.path.join", "building.load_config", "enumerate", "print", "range", "enumerate", "print", "datetime.datetime.now", "random.randint", "range", "len", "type", "range", "len", "run_rbm.run", "len", "error_log.append"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.load_config", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.load_config", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_pretraining.run"], ["def", "reproduce", "(", "base_version", ",", "percent_fails", ",", "percent_broken", ",", "encoder", ",", "mode", ",", "master_seed", ")", ":", "\n", "    ", "ray", ".", "init", "(", ")", "\n", "\n", "if", "base_version", "is", "None", ":", "\n", "        ", "base_version", "=", "datetime", ".", "now", "(", ")", ".", "timestamp", "(", ")", "\n", "", "error_log", "=", "[", "]", "\n", "fds", "=", "[", "1", ",", "2", ",", "3", ",", "4", "]", "\n", "pre_mode", "=", "\"pre\"", "if", "mode", "==", "\"metric\"", "else", "\"ae\"", "\n", "random", ".", "seed", "(", "master_seed", ")", "\n", "seeds", "=", "[", "\n", "[", "\n", "[", "random", ".", "randint", "(", "0", ",", "99999999", ")", "for", "_", "in", "range", "(", "len", "(", "percent_fails", ")", ")", "]", "\n", "for", "_", "in", "range", "(", "len", "(", "percent_broken", ")", ")", "\n", "]", "\n", "for", "_", "in", "range", "(", "len", "(", "fds", ")", ")", "\n", "]", "\n", "\n", "for", "num_fd", ",", "fd", "in", "enumerate", "(", "fds", ")", ":", "\n", "        ", "arch_config_path", "=", "os", ".", "path", ".", "join", "(", "config_root", ",", "f\"{encoder}_fd{fd}.json\"", ")", "\n", "arch_config", "=", "building", ".", "load_config", "(", "arch_config_path", ")", "\n", "pre_config_path", "=", "os", ".", "path", ".", "join", "(", "config_root", ",", "f\"{encoder}_{pre_mode}_fd{fd}.json\"", ")", "\n", "pre_config", "=", "building", ".", "load_config", "(", "pre_config_path", ")", "\n", "for", "num_broken", ",", "broken", "in", "enumerate", "(", "percent_broken", ")", ":", "\n", "            ", "for", "num_fails", ",", "fails", "in", "enumerate", "(", "percent_fails", ")", ":", "\n", "                ", "seed", "=", "seeds", "[", "num_fd", "]", "[", "num_broken", "]", "[", "num_fails", "]", "\n", "try", ":", "\n", "                    ", "run", "(", "\n", "fd", ",", "\n", "broken", ",", "\n", "fails", ",", "\n", "arch_config", ",", "\n", "pre_config", ",", "\n", "encoder", ",", "\n", "mode", ",", "\n", "seed", ",", "\n", "base_version", ",", "\n", ")", "\n", "", "except", "Exception", "as", "e", ":", "\n", "                    ", "error_log", ".", "append", "(", "e", ")", "\n", "\n", "", "", "", "", "ray", ".", "shutdown", "(", ")", "\n", "\n", "if", "error_log", ":", "\n", "        ", "for", "e", "in", "error_log", ":", "\n", "            ", "print", "(", "type", "(", "e", ")", ",", "e", ")", "\n", "", "", "else", ":", "\n", "        ", "print", "(", "\"Everything went well.\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.reproduce_semi_supervised.run": [[64, 92], ["run_rbm.run", "run_semi_supervised.run"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_pretraining.run", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_pretraining.run"], ["", "", "def", "run", "(", "fd", ",", "broken", ",", "fails", ",", "arch_config", ",", "pre_config", ",", "encoder", ",", "mode", ",", "seed", ",", "base_version", ")", ":", "\n", "    ", "if", "mode", "==", "\"rbm\"", ":", "\n", "        ", "run_rbm", "(", "\n", "fd", ",", "\n", "broken", ",", "\n", "fails", ",", "\n", "arch_config", ",", "\n", "encoder", ",", "\n", "replications", "=", "10", ",", "\n", "gpu", "=", "0", ",", "\n", "master_seed", "=", "seed", ",", "\n", "version", "=", "f\"{base_version}_pretrained@{broken:.2f}@{fails:.2f}\"", ",", "\n", ")", "\n", "", "else", ":", "\n", "        ", "run_ae_or_metric", "(", "\n", "fd", ",", "\n", "broken", ",", "\n", "fails", ",", "\n", "arch_config", ",", "\n", "pre_config", ",", "\n", "pretrain", "=", "True", ",", "\n", "encoder", "=", "encoder", ",", "\n", "mode", "=", "mode", ",", "\n", "record_embeddings", "=", "False", ",", "\n", "replications", "=", "10", ",", "\n", "gpu", "=", "[", "0", "]", ",", "\n", "master_seed", "=", "seed", ",", "\n", "version", "=", "f\"{base_version}_pretrained@{broken:.2f}@{fails:.2f}\"", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_pretraining.run": [[8, 43], ["building.build_pretraining", "trainer.fit", "trainer.test", "run_pretraining._get_checkpoint_path"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_pretraining", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_pretraining._get_checkpoint_path"], ["def", "run", "(", "\n", "source", ",", "\n", "target", ",", "\n", "percent_broken", ",", "\n", "percent_fail_runs", ",", "\n", "arch_config", ",", "\n", "config", ",", "\n", "encoder", ",", "\n", "mode", ",", "\n", "record_embeddings", ",", "\n", "seed", ",", "\n", "gpu", ",", "\n", "version", ",", "\n", ")", ":", "\n", "    ", "trainer", ",", "data", ",", "model", "=", "building", ".", "build_pretraining", "(", "\n", "source", ",", "\n", "target", ",", "\n", "percent_broken", ",", "\n", "percent_fail_runs", ",", "\n", "arch_config", ",", "\n", "config", ",", "\n", "encoder", ",", "\n", "mode", ",", "\n", "record_embeddings", ",", "\n", "gpu", ",", "\n", "seed", ",", "\n", "version", ",", "\n", ")", "\n", "trainer", ".", "fit", "(", "model", ",", "datamodule", "=", "data", ")", "\n", "trainer", ".", "test", "(", "datamodule", "=", "data", ")", "\n", "\n", "checkpoint_path", "=", "_get_checkpoint_path", "(", "trainer", ".", "logger", ")", "\n", "best_score", "=", "trainer", ".", "checkpoint_callback", ".", "best_model_score", "\n", "\n", "return", "checkpoint_path", ",", "best_score", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_pretraining._get_checkpoint_path": [[45, 53], ["sorted", "os.path.join", "os.listdir"], "function", ["None"], ["", "def", "_get_checkpoint_path", "(", "logger", ")", ":", "\n", "    ", "checkpoints_path", "=", "logger", ".", "checkpoint_path", "\n", "*", "_", ",", "checkpoint", "=", "sorted", "(", "\n", "[", "f", "for", "f", "in", "os", ".", "listdir", "(", "checkpoints_path", ")", "]", "\n", ")", "# get last checkpoint", "\n", "checkpoint_path", "=", "os", ".", "path", ".", "join", "(", "checkpoints_path", ",", "checkpoint", ")", "\n", "\n", "return", "checkpoint_path", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_pretraining.run_multiple": [[55, 96], ["random.seed", "random.randint", "datetime.datetime.now().timestamp", "range", "datetime.datetime.now", "run_pretraining.run", "checkpoints[].append"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_pretraining.run"], ["", "def", "run_multiple", "(", "\n", "source", ",", "\n", "target", ",", "\n", "broken", ",", "\n", "fails", ",", "\n", "arch_config", ",", "\n", "config", ",", "\n", "encoder", ",", "\n", "mode", ",", "\n", "record_embeddings", ",", "\n", "replications", ",", "\n", "gpu", ",", "\n", "version", "=", "None", ",", "\n", ")", ":", "\n", "    ", "broken", "=", "broken", "if", "broken", "is", "not", "None", "else", "[", "1.0", "]", "\n", "random", ".", "seed", "(", "999", ")", "\n", "seeds", "=", "[", "random", ".", "randint", "(", "0", ",", "9999999", ")", "for", "_", "in", "range", "(", "replications", ")", "]", "\n", "if", "version", "is", "None", ":", "\n", "        ", "version", "=", "datetime", ".", "now", "(", ")", ".", "timestamp", "(", ")", "\n", "\n", "", "checkpoints", "=", "{", "b", ":", "[", "]", "for", "b", "in", "broken", "}", "\n", "for", "b", "in", "broken", ":", "\n", "        ", "for", "f", "in", "fails", ":", "\n", "            ", "for", "s", "in", "seeds", ":", "\n", "                ", "checkpoint_path", "=", "run", "(", "\n", "source", ",", "\n", "target", ",", "\n", "b", ",", "\n", "f", ",", "\n", "arch_config", ",", "\n", "config", ",", "\n", "encoder", ",", "\n", "mode", ",", "\n", "record_embeddings", ",", "\n", "s", ",", "\n", "gpu", ",", "\n", "version", ",", "\n", ")", "\n", "checkpoints", "[", "b", "]", ".", "append", "(", "checkpoint_path", ")", "\n", "\n", "", "", "", "return", "checkpoints", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_baseline": [[14, 46], ["lightning.loggers.MLTBLogger", "pytorch_lightning.callbacks.ModelCheckpoint", "building.build_common.build_trainer", "datasets.BaselineDataModule", "build.build_baseline_from_config", "building.build_common.add_hparams", "building.build_common.get_logdir", "lightning.loggers.baseline_experiment_name"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.build_trainer", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_baseline_from_config", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.add_hparams", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.get_logdir", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.baseline_experiment_name"], ["def", "build_baseline", "(", "\n", "source", ",", "\n", "fails", ",", "\n", "config", ",", "\n", "encoder", ",", "\n", "pretrained_encoder_path", ",", "\n", "gpu", ",", "\n", "seed", ",", "\n", "version", ",", "\n", "record_embeddings", "=", "False", ",", "\n", ")", ":", "\n", "    ", "logger", "=", "loggers", ".", "MLTBLogger", "(", "\n", "get_logdir", "(", ")", ",", "loggers", ".", "baseline_experiment_name", "(", "source", ")", ",", "tag", "=", "version", "\n", ")", "\n", "checkpoint_callback", "=", "pl", ".", "callbacks", ".", "ModelCheckpoint", "(", "monitor", "=", "\"val/regression_loss\"", ")", "\n", "trainer", "=", "build_trainer", "(", "\n", "logger", ",", "\n", "checkpoint_callback", ",", "\n", "max_epochs", "=", "100", ",", "\n", "val_interval", "=", "1.0", ",", "\n", "gpu", "=", "gpu", ",", "\n", "seed", "=", "seed", ",", "\n", ")", "\n", "data", "=", "datasets", ".", "BaselineDataModule", "(", "\n", "fd_source", "=", "source", ",", "batch_size", "=", "config", "[", "\"batch_size\"", "]", ",", "percent_fail_runs", "=", "fails", "\n", ")", "\n", "model", "=", "build_baseline_from_config", "(", "\n", "config", ",", "data", ".", "window_size", ",", "encoder", ",", "pretrained_encoder_path", ",", "record_embeddings", "\n", ")", "\n", "add_hparams", "(", "model", ",", "data", ",", "seed", ")", "\n", "\n", "return", "trainer", ",", "data", ",", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_baseline_from_config": [[48, 68], ["lightning.baseline.Baseline", "baseline.Baseline.load_encoder"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.mixins.LoadEncoderMixin.load_encoder"], ["", "def", "build_baseline_from_config", "(", "\n", "config", ",", "seq_len", ",", "encoder", ",", "pretrained_encoder_path", ",", "record_embeddings", "=", "False", "\n", ")", ":", "\n", "    ", "model", "=", "baseline", ".", "Baseline", "(", "\n", "in_channels", "=", "14", ",", "\n", "seq_len", "=", "seq_len", ",", "\n", "num_layers", "=", "config", "[", "\"num_layers\"", "]", ",", "\n", "kernel_size", "=", "3", ",", "\n", "base_filters", "=", "config", "[", "\"base_filters\"", "]", ",", "\n", "latent_dim", "=", "config", "[", "\"latent_dim\"", "]", ",", "\n", "dropout", "=", "config", "[", "\"dropout\"", "]", ",", "\n", "optim_type", "=", "\"adam\"", ",", "\n", "lr", "=", "config", "[", "\"lr\"", "]", ",", "\n", "record_embeddings", "=", "record_embeddings", ",", "\n", "encoder", "=", "encoder", ",", "\n", ")", "\n", "if", "pretrained_encoder_path", "is", "not", "None", ":", "\n", "        ", "model", ".", "load_encoder", "(", "pretrained_encoder_path", ")", "\n", "\n", "", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_pretraining": [[70, 139], ["lightning.loggers.MLTBLogger", "lightning.loggers.MinEpochModelCheckpoint", "building.build_common.build_trainer", "build.build_datamodule", "building.build_common.add_hparams", "building.build_common.get_logdir", "lightning.loggers.pretraining_experiment_name", "build.build_pretraining_from_config", "build.build_autoencoder_from_config", "ValueError"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.build_trainer", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_datamodule", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.add_hparams", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.get_logdir", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.pretraining_experiment_name", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_pretraining_from_config", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_autoencoder_from_config"], ["", "def", "build_pretraining", "(", "\n", "source", ",", "\n", "target", ",", "\n", "percent_broken", ",", "\n", "percent_fail_runs", ",", "\n", "arch_config", ",", "\n", "config", ",", "\n", "encoder", ",", "\n", "mode", ",", "\n", "record_embeddings", ",", "\n", "gpu", ",", "\n", "seed", ",", "\n", "version", ",", "\n", ")", ":", "\n", "    ", "logger", "=", "loggers", ".", "MLTBLogger", "(", "\n", "get_logdir", "(", ")", ",", "\n", "loggers", ".", "pretraining_experiment_name", "(", "source", ",", "target", ")", ",", "\n", "tag", "=", "version", ",", "\n", "tensorboard_struct", "=", "{", "\"pb\"", ":", "percent_broken", ",", "\"dt\"", ":", "config", "[", "\"domain_tradeoff\"", "]", "}", ",", "\n", ")", "\n", "checkpoint_callback", "=", "loggers", ".", "MinEpochModelCheckpoint", "(", "\n", "monitor", "=", "\"val/checkpoint_score\"", ",", "min_epochs_before_saving", "=", "1", "\n", ")", "\n", "trainer", "=", "build_trainer", "(", "\n", "logger", ",", "\n", "checkpoint_callback", ",", "\n", "max_epochs", "=", "100", ",", "\n", "val_interval", "=", "1.0", ",", "\n", "gpu", "=", "gpu", ",", "\n", "seed", "=", "seed", ",", "\n", ")", "\n", "truncate_val", "=", "not", "record_embeddings", "\n", "distance_mode", "=", "config", "[", "\"distance_mode\"", "]", "\n", "min_distance", "=", "config", "[", "\"min_distance\"", "]", "if", "\"min_distance\"", "in", "config", "else", "1", "\n", "data", "=", "build_datamodule", "(", "\n", "source", ",", "\n", "target", ",", "\n", "percent_broken", ",", "\n", "percent_fail_runs", ",", "\n", "config", "[", "\"batch_size\"", "]", ",", "\n", "truncate_val", ",", "\n", "distance_mode", ",", "\n", "min_distance", ",", "\n", ")", "\n", "use_adaption", "=", "target", "is", "not", "None", "\n", "if", "mode", "==", "\"metric\"", ":", "\n", "        ", "model", "=", "build_pretraining_from_config", "(", "\n", "arch_config", ",", "\n", "config", ",", "\n", "data", ".", "window_size", ",", "\n", "encoder", ",", "\n", "record_embeddings", ",", "\n", "use_adaption", ",", "\n", ")", "\n", "", "elif", "mode", "==", "\"autoencoder\"", ":", "\n", "        ", "model", "=", "build_autoencoder_from_config", "(", "\n", "arch_config", ",", "\n", "config", ",", "\n", "data", ".", "window_size", ",", "\n", "encoder", ",", "\n", "record_embeddings", ",", "\n", "use_adaption", ",", "\n", ")", "\n", "", "else", ":", "\n", "        ", "raise", "ValueError", "(", "f\"Unrecognized pre-training mode {mode}.\"", ")", "\n", "\n", "", "add_hparams", "(", "model", ",", "data", ",", "seed", ")", "\n", "\n", "return", "trainer", ",", "data", ",", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_datamodule": [[141, 176], ["datasets.PretrainingBaselineDataModule", "datasets.PretrainingAdaptionDataModule"], "function", ["None"], ["", "def", "build_datamodule", "(", "\n", "source", ",", "\n", "target", ",", "\n", "percent_broken", ",", "\n", "percent_fail_runs", ",", "\n", "batch_size", ",", "\n", "truncate_val", ",", "\n", "distance_mode", ",", "\n", "min_distance", ",", "\n", "window_size", "=", "None", ",", "\n", ")", ":", "\n", "    ", "if", "target", "is", "None", ":", "\n", "        ", "return", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "fd_source", "=", "source", ",", "\n", "num_samples", "=", "25000", ",", "\n", "batch_size", "=", "batch_size", ",", "\n", "window_size", "=", "window_size", ",", "\n", "min_distance", "=", "min_distance", ",", "\n", "percent_broken", "=", "percent_broken", ",", "\n", "percent_fail_runs", "=", "percent_fail_runs", ",", "\n", "truncate_val", "=", "truncate_val", ",", "\n", "distance_mode", "=", "distance_mode", ",", "\n", ")", "\n", "", "else", ":", "\n", "        ", "return", "datasets", ".", "PretrainingAdaptionDataModule", "(", "\n", "fd_source", "=", "source", ",", "\n", "fd_target", "=", "target", ",", "\n", "num_samples", "=", "50000", ",", "\n", "batch_size", "=", "batch_size", ",", "\n", "window_size", "=", "window_size", ",", "\n", "min_distance", "=", "min_distance", ",", "\n", "percent_broken", "=", "percent_broken", ",", "\n", "percent_fail_runs", "=", "percent_fail_runs", ",", "\n", "truncate_target_val", "=", "truncate_val", ",", "\n", "distance_mode", "=", "distance_mode", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_pretraining_from_config": [[179, 200], ["lightning.pretraining.UnsupervisedPretraining"], "function", ["None"], ["", "", "def", "build_pretraining_from_config", "(", "\n", "arch_config", ",", "config", ",", "seq_len", ",", "encoder", ",", "record_embeddings", ",", "use_adaption", "\n", ")", ":", "\n", "    ", "model", "=", "pretraining", ".", "UnsupervisedPretraining", "(", "\n", "in_channels", "=", "14", ",", "\n", "seq_len", "=", "seq_len", ",", "\n", "num_layers", "=", "arch_config", "[", "\"num_layers\"", "]", ",", "\n", "kernel_size", "=", "3", ",", "\n", "base_filters", "=", "arch_config", "[", "\"base_filters\"", "]", ",", "\n", "latent_dim", "=", "arch_config", "[", "\"latent_dim\"", "]", ",", "\n", "dropout", "=", "config", "[", "\"dropout\"", "]", ",", "\n", "domain_tradeoff", "=", "config", "[", "\"domain_tradeoff\"", "]", "if", "use_adaption", "else", "0.0", ",", "\n", "domain_disc_dim", "=", "arch_config", "[", "\"latent_dim\"", "]", ",", "\n", "num_disc_layers", "=", "arch_config", "[", "\"num_disc_layers\"", "]", ",", "\n", "lr", "=", "config", "[", "\"lr\"", "]", ",", "\n", "weight_decay", "=", "0.0", ",", "\n", "record_embeddings", "=", "record_embeddings", ",", "\n", "encoder", "=", "encoder", ",", "\n", ")", "\n", "\n", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_autoencoder_from_config": [[202, 223], ["lightning.autoencoder.AutoencoderPretraining"], "function", ["None"], ["", "def", "build_autoencoder_from_config", "(", "\n", "arch_config", ",", "config", ",", "seq_len", ",", "encoder", ",", "record_embeddings", ",", "use_adaption", "\n", ")", ":", "\n", "    ", "model", "=", "autoencoder", ".", "AutoencoderPretraining", "(", "\n", "in_channels", "=", "14", ",", "\n", "seq_len", "=", "seq_len", ",", "\n", "num_layers", "=", "arch_config", "[", "\"num_layers\"", "]", ",", "\n", "kernel_size", "=", "3", ",", "\n", "base_filters", "=", "arch_config", "[", "\"base_filters\"", "]", ",", "\n", "latent_dim", "=", "arch_config", "[", "\"latent_dim\"", "]", ",", "\n", "dropout", "=", "config", "[", "\"dropout\"", "]", ",", "\n", "domain_tradeoff", "=", "config", "[", "\"domain_tradeoff\"", "]", "if", "use_adaption", "else", "0.0", ",", "\n", "domain_disc_dim", "=", "arch_config", "[", "\"latent_dim\"", "]", ",", "\n", "num_disc_layers", "=", "arch_config", "[", "\"num_disc_layers\"", "]", ",", "\n", "lr", "=", "config", "[", "\"lr\"", "]", ",", "\n", "weight_decay", "=", "0.0", ",", "\n", "record_embeddings", "=", "record_embeddings", ",", "\n", "encoder", "=", "encoder", ",", "\n", ")", "\n", "\n", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_rbm": [[225, 244], ["torch.zeros", "torch.zeros", "models.layers.GaussianSequenceLayer", "models.layers.RectifiedLinearLayer", "torch.nn.Conv1d", "pytorch_probgraph.InteractionModule", "pytorch_probgraph.RestrictedBoltzmannMachineCD", "torch.ones_like", "torch.nn.init.kaiming_uniform_"], "function", ["None"], ["", "def", "build_rbm", "(", "in_units", ",", "out_units", ",", "he_init", "=", "False", ")", ":", "\n", "    ", "l0bias", "=", "torch", ".", "zeros", "(", "[", "1", ",", "in_units", ",", "1", "]", ")", "\n", "l0bias", ".", "requires_grad", "=", "True", "\n", "l1bias", "=", "torch", ".", "zeros", "(", "[", "1", ",", "out_units", ",", "1", "]", ")", "\n", "l1bias", ".", "requires_grad", "=", "True", "\n", "\n", "l0", "=", "GaussianSequenceLayer", "(", "l0bias", ",", "torch", ".", "ones_like", "(", "l0bias", ")", ")", "\n", "l0", ".", "logsigma", ".", "requires_grad", "=", "False", "\n", "l1", "=", "RectifiedLinearLayer", "(", "l1bias", ")", "\n", "\n", "module", "=", "torch", ".", "nn", ".", "Conv1d", "(", "14", ",", "out_units", ",", "kernel_size", "=", "3", ",", "bias", "=", "False", ")", "\n", "i0", "=", "InteractionModule", "(", "module", ",", "l0", ".", "bias", ".", "shape", "[", "1", ":", "]", ")", "\n", "if", "he_init", ":", "\n", "        ", "torch", ".", "nn", ".", "init", ".", "kaiming_uniform_", "(", "i0", ".", "weight", ",", "nonlinearity", "=", "\"relu\"", ")", "\n", "\n", "# build the RBM", "\n", "", "rbm", "=", "RestrictedBoltzmannMachineCD", "(", "l0", ",", "l1", ",", "i0", ",", "ksteps", "=", "1", ")", "\n", "\n", "return", "rbm", "\n", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.build_trainer": [[7, 33], ["pytorch_lightning.Trainer", "pytorch_lightning.trainer.seed_everything"], "function", ["None"], ["def", "build_trainer", "(", "\n", "logger", ",", "\n", "checkpoint_callback", ",", "\n", "max_epochs", ",", "\n", "val_interval", ",", "\n", "gpu", ",", "\n", "seed", "=", "None", ",", "\n", "callbacks", "=", "None", ",", "\n", "check_sanity", "=", "True", ",", "\n", ")", ":", "\n", "    ", "if", "seed", "is", "not", "None", ":", "\n", "        ", "pl", ".", "trainer", ".", "seed_everything", "(", "seed", ")", "\n", "", "trainer", "=", "pl", ".", "Trainer", "(", "\n", "num_sanity_val_steps", "=", "2", "if", "check_sanity", "else", "0", ",", "\n", "gpus", "=", "[", "gpu", "]", ",", "\n", "max_epochs", "=", "max_epochs", ",", "\n", "logger", "=", "logger", ",", "\n", "deterministic", "=", "True", ",", "\n", "log_every_n_steps", "=", "10", ",", "\n", "checkpoint_callback", "=", "checkpoint_callback", ",", "\n", "gradient_clip_val", "=", "1.0", ",", "\n", "val_check_interval", "=", "val_interval", ",", "\n", "callbacks", "=", "callbacks", ",", "\n", ")", "\n", "\n", "return", "trainer", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.add_hparams": [[35, 38], ["model.add_data_hparams", "model.hparams.update"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.add_data_hparams", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update"], ["", "def", "add_hparams", "(", "model", ",", "data", ",", "seed", ")", ":", "\n", "    ", "model", ".", "add_data_hparams", "(", "data", ")", "\n", "model", ".", "hparams", ".", "update", "(", "{", "\"seed\"", ":", "seed", "}", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.get_logdir": [[40, 45], ["os.path.dirname", "os.path.normpath", "os.path.join"], "function", ["None"], ["", "def", "get_logdir", "(", ")", ":", "\n", "    ", "script_path", "=", "os", ".", "path", ".", "dirname", "(", "__file__", ")", "\n", "log_dir", "=", "os", ".", "path", ".", "normpath", "(", "os", ".", "path", ".", "join", "(", "script_path", ",", "\"..\"", ",", "\"..\"", ")", ")", "\n", "\n", "return", "log_dir", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.load_config": [[47, 52], ["open", "json.load"], "function", ["None"], ["", "def", "load_config", "(", "config_path", ")", ":", "\n", "    ", "with", "open", "(", "config_path", ",", "mode", "=", "\"rt\"", ")", "as", "f", ":", "\n", "        ", "config", "=", "json", ".", "load", "(", "f", ")", "\n", "\n", "", "return", "config", "\n", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.BaselineDataModule.__init__": [[11, 40], ["pytorch_lightning.LightningDataModule.__init__", "range", "baseline.BaselineDataModule._get_cmapss"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.BaselineDataModule._get_cmapss"], ["    ", "def", "__init__", "(", "\n", "self", ",", "\n", "fd_source", ":", "int", ",", "\n", "batch_size", ":", "int", ",", "\n", "window_size", ":", "int", "=", "None", ",", "\n", "max_rul", ":", "int", "=", "125", ",", "\n", "percent_fail_runs", ":", "float", "=", "None", ",", "\n", "feature_select", ":", "List", "[", "int", "]", "=", "None", ",", "\n", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "fd_source", "=", "fd_source", "\n", "self", ".", "batch_size", "=", "batch_size", "\n", "self", ".", "max_rul", "=", "max_rul", "\n", "self", ".", "window_size", "=", "window_size", "or", "CMAPSSLoader", ".", "WINDOW_SIZES", "[", "self", ".", "fd_source", "]", "\n", "self", ".", "percent_fail_runs", "=", "percent_fail_runs", "\n", "self", ".", "feature_select", "=", "feature_select", "\n", "\n", "self", ".", "hparams", "=", "{", "\n", "\"fd_source\"", ":", "self", ".", "fd_source", ",", "\n", "\"batch_size\"", ":", "self", ".", "batch_size", ",", "\n", "\"window_size\"", ":", "self", ".", "window_size", ",", "\n", "\"percent_fail_runs\"", ":", "self", ".", "percent_fail_runs", ",", "\n", "\"max_rul\"", ":", "self", ".", "max_rul", ",", "\n", "}", "\n", "\n", "self", ".", "cmapss", "=", "{", "}", "\n", "for", "fd", "in", "range", "(", "1", ",", "5", ")", ":", "\n", "            ", "self", ".", "cmapss", "[", "fd", "]", "=", "self", ".", "_get_cmapss", "(", "fd", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.BaselineDataModule._get_cmapss": [[41, 54], ["datasets.cmapss.CMAPSSDataModule"], "methods", ["None"], ["", "", "def", "_get_cmapss", "(", "self", ",", "fd", ")", ":", "\n", "        ", "fail_runs", "=", "self", ".", "percent_fail_runs", "if", "fd", "==", "self", ".", "fd_source", "else", "None", "\n", "cmapss", "=", "CMAPSSDataModule", "(", "\n", "fd", ",", "\n", "self", ".", "batch_size", ",", "\n", "self", ".", "window_size", ",", "\n", "self", ".", "max_rul", ",", "\n", "None", ",", "\n", "fail_runs", ",", "\n", "self", ".", "feature_select", ",", "\n", ")", "\n", "\n", "return", "cmapss", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.BaselineDataModule.prepare_data": [[55, 58], ["baseline.BaselineDataModule.cmapss.values", "cmapss_fd.prepare_data"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader.prepare_data"], ["", "def", "prepare_data", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "for", "cmapss_fd", "in", "self", ".", "cmapss", ".", "values", "(", ")", ":", "\n", "            ", "cmapss_fd", ".", "prepare_data", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.BaselineDataModule.setup": [[59, 62], ["baseline.BaselineDataModule.cmapss.values", "cmapss_fd.setup"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.setup"], ["", "", "def", "setup", "(", "self", ",", "stage", ":", "Optional", "[", "str", "]", "=", "None", ")", ":", "\n", "        ", "for", "cmapss_fd", "in", "self", ".", "cmapss", ".", "values", "(", ")", ":", "\n", "            ", "cmapss_fd", ".", "setup", "(", "stage", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.BaselineDataModule.train_dataloader": [[63, 65], ["baseline.BaselineDataModule.cmapss[].train_dataloader"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.train_dataloader"], ["", "", "def", "train_dataloader", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", "->", "DataLoader", ":", "\n", "        ", "return", "self", ".", "cmapss", "[", "self", ".", "fd_source", "]", ".", "train_dataloader", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.BaselineDataModule.val_dataloader": [[66, 68], ["baseline.BaselineDataModule.cmapss[].val_dataloader"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.val_dataloader"], ["", "def", "val_dataloader", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", "->", "DataLoader", ":", "\n", "        ", "return", "self", ".", "cmapss", "[", "self", ".", "fd_source", "]", ".", "val_dataloader", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.BaselineDataModule.test_dataloader": [[69, 76], ["range", "baseline.BaselineDataModule.cmapss[].test_dataloader", "test_dataloaders.append"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.test_dataloader"], ["", "def", "test_dataloader", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", "->", "List", "[", "DataLoader", "]", ":", "\n", "        ", "test_dataloaders", "=", "[", "]", "\n", "for", "fd_target", "in", "range", "(", "1", ",", "5", ")", ":", "\n", "            ", "target_dl", "=", "self", ".", "cmapss", "[", "fd_target", "]", ".", "test_dataloader", "(", ")", "\n", "test_dataloaders", ".", "append", "(", "target_dl", ")", "\n", "\n", "", "return", "test_dataloaders", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.PretrainingBaselineDataModule.__init__": [[79, 143], ["pytorch_lightning.LightningDataModule.__init__", "datasets.loader.CMAPSSLoader", "baseline.PretrainingBaselineDataModule._get_unbroken_runs", "datasets.loader.CMAPSSLoader", "datasets.cmapss.CMAPSSDataModule.from_loader"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.PretrainingBaselineDataModule._get_unbroken_runs", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.from_loader"], ["    ", "def", "__init__", "(", "\n", "self", ",", "\n", "fd_source", ":", "int", ",", "\n", "num_samples", ":", "int", ",", "\n", "batch_size", ":", "int", ",", "\n", "window_size", ":", "int", "=", "None", ",", "\n", "max_rul", ":", "int", "=", "125", ",", "\n", "min_distance", ":", "int", "=", "1", ",", "\n", "percent_broken", ":", "float", "=", "None", ",", "\n", "percent_fail_runs", ":", "Union", "[", "float", ",", "List", "[", "int", "]", "]", "=", "None", ",", "\n", "feature_select", ":", "List", "[", "int", "]", "=", "None", ",", "\n", "truncate_val", ":", "bool", "=", "False", ",", "\n", "distance_mode", ":", "str", "=", "\"linear\"", ",", "\n", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "fd_source", "=", "fd_source", "\n", "self", ".", "num_samples", "=", "num_samples", "\n", "self", ".", "batch_size", "=", "batch_size", "\n", "self", ".", "min_distance", "=", "min_distance", "\n", "self", ".", "max_rul", "=", "max_rul", "\n", "self", ".", "percent_broken", "=", "percent_broken", "\n", "self", ".", "percent_fail_runs", "=", "percent_fail_runs", "\n", "self", ".", "feature_select", "=", "feature_select", "\n", "self", ".", "truncate_val", "=", "truncate_val", "\n", "self", ".", "distance_mode", "=", "distance_mode", "\n", "\n", "self", ".", "fails_source_loader", "=", "CMAPSSLoader", "(", "\n", "self", ".", "fd_source", ",", "\n", "window_size", ",", "\n", "self", ".", "max_rul", ",", "\n", "None", ",", "\n", "self", ".", "percent_fail_runs", ",", "\n", "self", ".", "feature_select", ",", "\n", "self", ".", "truncate_val", ",", "\n", ")", "\n", "unfailed_runs", "=", "self", ".", "_get_unbroken_runs", "(", "self", ".", "percent_fail_runs", ")", "\n", "self", ".", "broken_source_loader", "=", "CMAPSSLoader", "(", "\n", "self", ".", "fd_source", ",", "\n", "window_size", ",", "\n", "self", ".", "max_rul", ",", "\n", "self", ".", "percent_broken", ",", "\n", "unfailed_runs", ",", "\n", "self", ".", "feature_select", ",", "\n", "self", ".", "truncate_val", ",", "\n", ")", "\n", "\n", "self", ".", "window_size", "=", "self", ".", "broken_source_loader", ".", "window_size", "\n", "\n", "self", ".", "source", "=", "CMAPSSDataModule", ".", "from_loader", "(", "\n", "self", ".", "broken_source_loader", ",", "self", ".", "batch_size", "\n", ")", "\n", "\n", "self", ".", "hparams", "=", "{", "\n", "\"fd_source\"", ":", "self", ".", "fd_source", ",", "\n", "\"num_samples\"", ":", "self", ".", "num_samples", ",", "\n", "\"batch_size\"", ":", "self", ".", "batch_size", ",", "\n", "\"window_size\"", ":", "self", ".", "window_size", ",", "\n", "\"max_rul\"", ":", "self", ".", "max_rul", ",", "\n", "\"min_distance\"", ":", "self", ".", "min_distance", ",", "\n", "\"percent_broken\"", ":", "self", ".", "percent_broken", ",", "\n", "\"percent_fail_runs\"", ":", "self", ".", "percent_fail_runs", ",", "\n", "\"truncate_val\"", ":", "self", ".", "truncate_val", ",", "\n", "\"distance_mode\"", ":", "self", ".", "distance_mode", ",", "\n", "}", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.PretrainingBaselineDataModule._get_unbroken_runs": [[145, 153], ["isinstance", "range", "list", "set().difference", "set"], "methods", ["None"], ["", "def", "_get_unbroken_runs", "(", "self", ",", "fail_runs", ")", ":", "\n", "        ", "if", "fail_runs", "is", "None", "or", "isinstance", "(", "fail_runs", ",", "float", ")", ":", "\n", "            ", "unfailed_runs", "=", "None", "\n", "", "else", ":", "\n", "            ", "run_idx", "=", "range", "(", "CMAPSSLoader", ".", "NUM_TRAIN_RUNS", "[", "self", ".", "fd_source", "]", ")", "\n", "unfailed_runs", "=", "list", "(", "set", "(", "run_idx", ")", ".", "difference", "(", "fail_runs", ")", ")", "\n", "\n", "", "return", "unfailed_runs", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.PretrainingBaselineDataModule.prepare_data": [[154, 156], ["baseline.PretrainingBaselineDataModule.broken_source_loader.prepare_data"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader.prepare_data"], ["", "def", "prepare_data", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "self", ".", "broken_source_loader", ".", "prepare_data", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.PretrainingBaselineDataModule.setup": [[157, 159], ["baseline.PretrainingBaselineDataModule.source.setup"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.setup"], ["", "def", "setup", "(", "self", ",", "stage", ":", "Optional", "[", "str", "]", "=", "None", ")", ":", "\n", "        ", "self", ".", "source", ".", "setup", "(", "stage", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.PretrainingBaselineDataModule.train_dataloader": [[160, 163], ["torch.utils.data.DataLoader", "baseline.PretrainingBaselineDataModule._get_paired_dataset"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.PretrainingBaselineDataModule._get_paired_dataset"], ["", "def", "train_dataloader", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", "->", "DataLoader", ":", "\n", "        ", "return", "DataLoader", "(", "\n", "self", ".", "_get_paired_dataset", "(", "\"dev\"", ")", ",", "batch_size", "=", "self", ".", "batch_size", ",", "pin_memory", "=", "True", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.PretrainingBaselineDataModule.val_dataloader": [[165, 172], ["torch.utils.data.DataLoader", "baseline.PretrainingBaselineDataModule.source.val_dataloader", "baseline.PretrainingBaselineDataModule._get_paired_dataset"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.val_dataloader", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.PretrainingBaselineDataModule._get_paired_dataset"], ["", "def", "val_dataloader", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", "->", "List", "[", "DataLoader", "]", ":", "\n", "        ", "combined_loader", "=", "DataLoader", "(", "\n", "self", ".", "_get_paired_dataset", "(", "\"val\"", ")", ",", "batch_size", "=", "self", ".", "batch_size", ",", "pin_memory", "=", "True", "\n", ")", "\n", "source_loader", "=", "self", ".", "source", ".", "val_dataloader", "(", ")", "\n", "\n", "return", "[", "combined_loader", ",", "source_loader", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.PretrainingBaselineDataModule._get_paired_dataset": [[173, 187], ["datasets.cmapss.PairedCMAPSS"], "methods", ["None"], ["", "def", "_get_paired_dataset", "(", "self", ",", "split", ":", "str", ")", "->", "PairedCMAPSS", ":", "\n", "        ", "deterministic", "=", "split", "==", "\"val\"", "\n", "min_distance", "=", "1", "if", "split", "==", "\"val\"", "else", "self", ".", "min_distance", "\n", "num_samples", "=", "25000", "if", "split", "==", "\"val\"", "else", "self", ".", "num_samples", "\n", "paired", "=", "PairedCMAPSS", "(", "\n", "[", "self", ".", "broken_source_loader", ",", "self", ".", "fails_source_loader", "]", ",", "\n", "split", ",", "\n", "num_samples", ",", "\n", "min_distance", ",", "\n", "deterministic", ",", "\n", "mode", "=", "self", ".", "distance_mode", ",", "\n", ")", "\n", "\n", "return", "paired", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.__init__": [[12, 55], ["pytorch_lightning.LightningDataModule.__init__", "datasets.loader.CMAPSSLoader"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__"], ["    ", "def", "__init__", "(", "\n", "self", ",", "\n", "fd", ":", "int", ",", "\n", "batch_size", ":", "int", ",", "\n", "window_size", ":", "int", "=", "None", ",", "\n", "max_rul", ":", "int", "=", "125", ",", "\n", "percent_broken", ":", "float", "=", "None", ",", "\n", "percent_fail_runs", ":", "Union", "[", "float", ",", "List", "[", "int", "]", "]", "=", "None", ",", "\n", "feature_select", ":", "int", "=", "None", ",", "\n", "truncate_val", ":", "bool", "=", "False", ",", "\n", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "_loader", "=", "CMAPSSLoader", "(", "\n", "fd", ",", "\n", "window_size", ",", "\n", "max_rul", ",", "\n", "percent_broken", ",", "\n", "percent_fail_runs", ",", "\n", "feature_select", ",", "\n", "truncate_val", ",", "\n", ")", "\n", "\n", "self", ".", "batch_size", "=", "batch_size", "\n", "self", ".", "fd", "=", "self", ".", "_loader", ".", "fd", "\n", "self", ".", "window_size", "=", "self", ".", "_loader", ".", "window_size", "\n", "self", ".", "max_rul", "=", "self", ".", "_loader", ".", "max_rul", "\n", "self", ".", "percent_broken", "=", "self", ".", "_loader", ".", "percent_broken", "\n", "self", ".", "percent_fail_runs", "=", "self", ".", "_loader", ".", "percent_fail_runs", "\n", "self", ".", "feature_select", "=", "self", ".", "_loader", ".", "feature_select", "\n", "self", ".", "truncate_val", "=", "self", ".", "_loader", ".", "truncate_val", "\n", "\n", "self", ".", "hparams", "=", "{", "\n", "\"fd\"", ":", "self", ".", "fd", ",", "\n", "\"batch_size\"", ":", "self", ".", "batch_size", ",", "\n", "\"window_size\"", ":", "self", ".", "window_size", ",", "\n", "\"max_rul\"", ":", "self", ".", "max_rul", ",", "\n", "\"percent_broken\"", ":", "self", ".", "percent_broken", ",", "\n", "\"percent_fail_runs\"", ":", "self", ".", "percent_fail_runs", ",", "\n", "\"truncate_val\"", ":", "self", ".", "truncate_val", ",", "\n", "}", "\n", "\n", "self", ".", "data", "=", "{", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.from_loader": [[56, 67], ["cls"], "methods", ["None"], ["", "@", "classmethod", "\n", "def", "from_loader", "(", "cls", ",", "loader", ":", "CMAPSSLoader", ",", "batch_size", ":", "int", ")", ":", "\n", "        ", "return", "cls", "(", "\n", "loader", ".", "fd", ",", "\n", "batch_size", ",", "\n", "loader", ".", "window_size", ",", "\n", "loader", ".", "max_rul", ",", "\n", "loader", ".", "percent_broken", ",", "\n", "loader", ".", "percent_fail_runs", ",", "\n", "loader", ".", "feature_select", ",", "\n", "loader", ".", "truncate_val", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.prepare_data": [[69, 71], ["cmapss.CMAPSSDataModule._loader.prepare_data"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader.prepare_data"], ["", "def", "prepare_data", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "self", ".", "_loader", ".", "prepare_data", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.setup": [[72, 76], ["cmapss.CMAPSSDataModule._setup_split", "cmapss.CMAPSSDataModule._setup_split", "cmapss.CMAPSSDataModule._setup_split"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule._setup_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule._setup_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule._setup_split"], ["", "def", "setup", "(", "self", ",", "stage", ":", "Optional", "[", "str", "]", "=", "None", ")", ":", "\n", "        ", "self", ".", "data", "[", "\"dev\"", "]", "=", "self", ".", "_setup_split", "(", "\"dev\"", ")", "\n", "self", ".", "data", "[", "\"val\"", "]", "=", "self", ".", "_setup_split", "(", "\"val\"", ")", "\n", "self", ".", "data", "[", "\"test\"", "]", "=", "self", ".", "_setup_split", "(", "\"test\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule._setup_split": [[77, 87], ["cmapss.CMAPSSDataModule._loader.load_split", "torch.cat", "torch.cat", "torch.empty", "torch.empty", "len"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split"], ["", "def", "_setup_split", "(", "self", ",", "split", ")", ":", "\n", "        ", "features", ",", "targets", "=", "self", ".", "_loader", ".", "load_split", "(", "split", ")", "\n", "if", "features", ":", "\n", "            ", "features", "=", "torch", ".", "cat", "(", "features", ")", "\n", "targets", "=", "torch", ".", "cat", "(", "targets", ")", "\n", "", "else", ":", "\n", "            ", "features", "=", "torch", ".", "empty", "(", "0", ",", "len", "(", "self", ".", "_loader", ".", "feature_select", ")", ",", "self", ".", "window_size", ")", "\n", "targets", "=", "torch", ".", "empty", "(", "0", ")", "\n", "\n", "", "return", "features", ",", "targets", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.train_dataloader": [[88, 100], ["cmapss.CMAPSSDataModule.to_dataset", "torch.utils.data.DataLoader", "len"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.to_dataset"], ["", "def", "train_dataloader", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", "->", "DataLoader", ":", "\n", "        ", "dataset", "=", "self", ".", "to_dataset", "(", "\"dev\"", ")", "\n", "drop_last", "=", "len", "(", "dataset", ")", "%", "self", ".", "batch_size", "==", "1", "\n", "loader", "=", "DataLoader", "(", "\n", "dataset", ",", "\n", "batch_size", "=", "self", ".", "batch_size", ",", "\n", "shuffle", "=", "True", ",", "\n", "drop_last", "=", "drop_last", ",", "\n", "pin_memory", "=", "True", ",", "\n", ")", "\n", "\n", "return", "loader", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.val_dataloader": [[101, 107], ["torch.utils.data.DataLoader", "cmapss.CMAPSSDataModule.to_dataset"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.to_dataset"], ["", "def", "val_dataloader", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", "->", "Union", "[", "DataLoader", ",", "List", "[", "DataLoader", "]", "]", ":", "\n", "        ", "return", "DataLoader", "(", "\n", "self", ".", "to_dataset", "(", "\"val\"", ")", ",", "\n", "batch_size", "=", "self", ".", "batch_size", ",", "\n", "shuffle", "=", "False", ",", "\n", "pin_memory", "=", "True", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.test_dataloader": [[109, 115], ["torch.utils.data.DataLoader", "cmapss.CMAPSSDataModule.to_dataset"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.to_dataset"], ["", "def", "test_dataloader", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", "->", "Union", "[", "DataLoader", ",", "List", "[", "DataLoader", "]", "]", ":", "\n", "        ", "return", "DataLoader", "(", "\n", "self", ".", "to_dataset", "(", "\"test\"", ")", ",", "\n", "batch_size", "=", "self", ".", "batch_size", ",", "\n", "shuffle", "=", "False", ",", "\n", "pin_memory", "=", "True", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.to_dataset": [[117, 122], ["torch.utils.data.TensorDataset"], "methods", ["None"], ["", "def", "to_dataset", "(", "self", ",", "split", ")", ":", "\n", "        ", "features", ",", "targets", "=", "self", ".", "data", "[", "split", "]", "\n", "split_dataset", "=", "TensorDataset", "(", "features", ",", "targets", ")", "\n", "\n", "return", "split_dataset", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS.__init__": [[125, 163], ["torch.utils.data.IterableDataset.__init__", "cmapss.PairedCMAPSS._prepare_datasets", "max", "cmapss.PairedCMAPSS._reset_rng", "all", "ValueError"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS._prepare_datasets", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS._reset_rng"], ["    ", "def", "__init__", "(", "\n", "self", ",", "\n", "loaders", ":", "List", "[", "CMAPSSLoader", "]", ",", "\n", "split", ":", "str", ",", "\n", "num_samples", ":", "int", ",", "\n", "min_distance", ":", "int", ",", "\n", "deterministic", ":", "bool", "=", "False", ",", "\n", "mode", ":", "str", "=", "\"linear\"", ",", "\n", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "loaders", "=", "loaders", "\n", "self", ".", "split", "=", "split", "\n", "self", ".", "min_distance", "=", "min_distance", "\n", "self", ".", "num_samples", "=", "num_samples", "\n", "self", ".", "deterministic", "=", "deterministic", "\n", "self", ".", "mode", "=", "mode", "\n", "\n", "if", "not", "all", "(", "d", ".", "window_size", "==", "self", ".", "loaders", "[", "0", "]", ".", "window_size", "for", "d", "in", "self", ".", "loaders", ")", ":", "\n", "            ", "window_sizes", "=", "[", "d", ".", "window_size", "for", "d", "in", "self", ".", "loaders", "]", "\n", "raise", "ValueError", "(", "\n", "f\"Datasets to be paired do not have the same window size, but {window_sizes}\"", "\n", ")", "\n", "\n", "", "self", ".", "_run_domain_idx", "=", "None", "\n", "self", ".", "_features", "=", "None", "\n", "self", ".", "_labels", "=", "None", "\n", "self", ".", "_prepare_datasets", "(", ")", "\n", "\n", "self", ".", "_max_rul", "=", "max", "(", "loader", ".", "max_rul", "for", "loader", "in", "self", ".", "loaders", ")", "\n", "self", ".", "_current_iteration", "=", "0", "\n", "self", ".", "_rng", "=", "self", ".", "_reset_rng", "(", ")", "\n", "if", "mode", "==", "\"linear\"", ":", "\n", "            ", "self", ".", "_get_pair_func", "=", "self", ".", "_get_pair_idx", "\n", "", "elif", "mode", "==", "\"piecewise\"", ":", "\n", "            ", "self", ".", "_get_pair_func", "=", "self", ".", "_get_pair_idx_piecewise", "\n", "", "elif", "mode", "==", "\"labeled\"", ":", "\n", "            ", "self", ".", "_get_pair_func", "=", "self", ".", "_get_labeled_pair_idx", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS._prepare_datasets": [[164, 179], ["enumerate", "numpy.array", "loader.load_split", "zip", "len", "run_domain_idx.append", "features.append", "labels.append"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split"], ["", "", "def", "_prepare_datasets", "(", "self", ")", ":", "\n", "        ", "run_domain_idx", "=", "[", "]", "\n", "features", "=", "[", "]", "\n", "labels", "=", "[", "]", "\n", "for", "domain_idx", ",", "loader", "in", "enumerate", "(", "self", ".", "loaders", ")", ":", "\n", "            ", "run_features", ",", "run_labels", "=", "loader", ".", "load_split", "(", "self", ".", "split", ")", "\n", "for", "feat", ",", "lab", "in", "zip", "(", "run_features", ",", "run_labels", ")", ":", "\n", "                ", "if", "len", "(", "feat", ")", ">", "self", ".", "min_distance", ":", "\n", "                    ", "run_domain_idx", ".", "append", "(", "domain_idx", ")", "\n", "features", ".", "append", "(", "feat", ")", "\n", "labels", ".", "append", "(", "lab", ")", "\n", "\n", "", "", "", "self", ".", "_run_domain_idx", "=", "np", ".", "array", "(", "run_domain_idx", ")", "\n", "self", ".", "_features", "=", "features", "\n", "self", ".", "_labels", "=", "labels", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS._reset_rng": [[180, 182], ["numpy.random.default_rng"], "methods", ["None"], ["", "def", "_reset_rng", "(", "self", ")", "->", "np", ".", "random", ".", "Generator", ":", "\n", "        ", "return", "np", ".", "random", ".", "default_rng", "(", "seed", "=", "42", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS.__len__": [[183, 185], ["None"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", "->", "int", ":", "\n", "        ", "return", "self", ".", "num_samples", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS.__iter__": [[186, 192], ["cmapss.PairedCMAPSS._reset_rng"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS._reset_rng"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "        ", "self", ".", "_current_iteration", "=", "0", "\n", "if", "self", ".", "deterministic", ":", "\n", "            ", "self", ".", "_rng", "=", "self", ".", "_reset_rng", "(", ")", "\n", "\n", "", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS.__next__": [[193, 200], ["cmapss.PairedCMAPSS._get_pair_func", "cmapss.PairedCMAPSS._build_pair"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS._build_pair"], ["", "def", "__next__", "(", "self", ")", "->", "Tuple", "[", "torch", ".", "Tensor", ",", "torch", ".", "Tensor", ",", "torch", ".", "Tensor", ",", "torch", ".", "Tensor", "]", ":", "\n", "        ", "if", "self", ".", "_current_iteration", "<", "self", ".", "num_samples", ":", "\n", "            ", "self", ".", "_current_iteration", "+=", "1", "\n", "idx", "=", "self", ".", "_get_pair_func", "(", ")", "\n", "return", "self", ".", "_build_pair", "(", "*", "idx", ")", "\n", "", "else", ":", "\n", "            ", "raise", "StopIteration", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS._get_pair_idx": [[201, 219], ["cmapss.PairedCMAPSS._rng.integers", "cmapss.PairedCMAPSS._rng.integers", "min", "cmapss.PairedCMAPSS._rng.integers", "len"], "methods", ["None"], ["", "", "def", "_get_pair_idx", "(", "self", ")", "->", "Tuple", "[", "torch", ".", "Tensor", ",", "int", ",", "int", ",", "int", ",", "int", "]", ":", "\n", "        ", "chosen_run_idx", "=", "self", ".", "_rng", ".", "integers", "(", "0", ",", "len", "(", "self", ".", "_features", ")", ")", "\n", "domain_label", "=", "self", ".", "_run_domain_idx", "[", "chosen_run_idx", "]", "\n", "chosen_run", "=", "self", ".", "_features", "[", "chosen_run_idx", "]", "\n", "\n", "run_length", "=", "chosen_run", ".", "shape", "[", "0", "]", "\n", "anchor_idx", "=", "self", ".", "_rng", ".", "integers", "(", "\n", "low", "=", "0", ",", "\n", "high", "=", "run_length", "-", "self", ".", "min_distance", ",", "\n", ")", "\n", "end_idx", "=", "min", "(", "run_length", ",", "anchor_idx", "+", "self", ".", "_max_rul", ")", "\n", "query_idx", "=", "self", ".", "_rng", ".", "integers", "(", "\n", "low", "=", "anchor_idx", "+", "self", ".", "min_distance", ",", "\n", "high", "=", "end_idx", ",", "\n", ")", "\n", "distance", "=", "query_idx", "-", "anchor_idx", "\n", "\n", "return", "chosen_run", ",", "anchor_idx", ",", "query_idx", ",", "distance", ",", "domain_label", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS._get_pair_idx_piecewise": [[220, 241], ["cmapss.PairedCMAPSS._rng.integers", "cmapss.PairedCMAPSS._rng.integers", "cmapss.PairedCMAPSS._rng.integers", "len"], "methods", ["None"], ["", "def", "_get_pair_idx_piecewise", "(", "self", ")", "->", "Tuple", "[", "torch", ".", "Tensor", ",", "int", ",", "int", ",", "int", ",", "int", "]", ":", "\n", "        ", "chosen_run_idx", "=", "self", ".", "_rng", ".", "integers", "(", "0", ",", "len", "(", "self", ".", "_features", ")", ")", "\n", "domain_label", "=", "self", ".", "_run_domain_idx", "[", "chosen_run_idx", "]", "\n", "chosen_run", "=", "self", ".", "_features", "[", "chosen_run_idx", "]", "\n", "\n", "run_length", "=", "chosen_run", ".", "shape", "[", "0", "]", "\n", "middle_idx", "=", "run_length", "//", "2", "\n", "anchor_idx", "=", "self", ".", "_rng", ".", "integers", "(", "\n", "low", "=", "0", ",", "\n", "high", "=", "run_length", "-", "self", ".", "min_distance", ",", "\n", ")", "\n", "end_idx", "=", "(", "\n", "middle_idx", "if", "anchor_idx", "<", "(", "middle_idx", "-", "self", ".", "min_distance", ")", "else", "run_length", "\n", ")", "\n", "query_idx", "=", "self", ".", "_rng", ".", "integers", "(", "\n", "low", "=", "anchor_idx", "+", "self", ".", "min_distance", ",", "\n", "high", "=", "end_idx", ",", "\n", ")", "\n", "distance", "=", "query_idx", "-", "anchor_idx", "if", "anchor_idx", ">", "middle_idx", "else", "0", "\n", "\n", "return", "chosen_run", ",", "anchor_idx", ",", "query_idx", ",", "distance", ",", "domain_label", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS._get_labeled_pair_idx": [[242, 261], ["cmapss.PairedCMAPSS._rng.integers", "cmapss.PairedCMAPSS._rng.integers", "cmapss.PairedCMAPSS._rng.integers", "len"], "methods", ["None"], ["", "def", "_get_labeled_pair_idx", "(", "self", ")", "->", "Tuple", "[", "torch", ".", "Tensor", ",", "int", ",", "int", ",", "int", ",", "int", "]", ":", "\n", "        ", "chosen_run_idx", "=", "self", ".", "_rng", ".", "integers", "(", "0", ",", "len", "(", "self", ".", "_features", ")", ")", "\n", "domain_label", "=", "self", ".", "_run_domain_idx", "[", "chosen_run_idx", "]", "\n", "chosen_run", "=", "self", ".", "_features", "[", "chosen_run_idx", "]", "\n", "chosen_labels", "=", "self", ".", "_labels", "[", "chosen_run_idx", "]", "\n", "\n", "run_length", "=", "chosen_run", ".", "shape", "[", "0", "]", "\n", "anchor_idx", "=", "self", ".", "_rng", ".", "integers", "(", "\n", "low", "=", "0", ",", "\n", "high", "=", "run_length", "-", "self", ".", "min_distance", ",", "\n", ")", "\n", "query_idx", "=", "self", ".", "_rng", ".", "integers", "(", "\n", "low", "=", "anchor_idx", "+", "self", ".", "min_distance", ",", "\n", "high", "=", "run_length", ",", "\n", ")", "\n", "# RUL label difference is negative time step difference", "\n", "distance", "=", "chosen_labels", "[", "anchor_idx", "]", "-", "chosen_labels", "[", "query_idx", "]", "\n", "\n", "return", "chosen_run", ",", "anchor_idx", ",", "query_idx", ",", "distance", ",", "domain_label", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS._build_pair": [[262, 277], ["torch.tensor", "torch.clamp_max", "torch.tensor"], "methods", ["None"], ["", "def", "_build_pair", "(", "\n", "self", ",", "\n", "run", ":", "torch", ".", "Tensor", ",", "\n", "anchor_idx", ":", "int", ",", "\n", "query_idx", ":", "int", ",", "\n", "distance", ":", "int", ",", "\n", "domain_label", ":", "int", ",", "\n", ")", "->", "Tuple", "[", "torch", ".", "Tensor", ",", "torch", ".", "Tensor", ",", "torch", ".", "Tensor", ",", "torch", ".", "Tensor", "]", ":", "\n", "        ", "anchors", "=", "run", "[", "anchor_idx", "]", "\n", "queries", "=", "run", "[", "query_idx", "]", "\n", "domain_label", "=", "torch", ".", "tensor", "(", "domain_label", ",", "dtype", "=", "torch", ".", "float", ")", "\n", "distances", "=", "torch", ".", "tensor", "(", "distance", ",", "dtype", "=", "torch", ".", "float", ")", "/", "self", ".", "_max_rul", "\n", "distances", "=", "torch", ".", "clamp_max", "(", "distances", ",", "max", "=", "1", ")", "# max distance is max_rul", "\n", "\n", "return", "anchors", ",", "queries", ",", "distances", ",", "domain_label", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.AdaptionDataset.__init__": [[280, 293], ["len", "numpy.random.default_rng", "cmapss.AdaptionDataset._get_random_target_idx", "range", "len"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.AdaptionDataset._get_random_target_idx"], ["    ", "def", "__init__", "(", "self", ",", "source", ",", "target", ",", "deterministic", "=", "False", ")", ":", "\n", "        ", "self", ".", "source", "=", "source", "\n", "self", ".", "target", "=", "target", "\n", "self", ".", "deterministic", "=", "deterministic", "\n", "self", ".", "_target_len", "=", "len", "(", "target", ")", "\n", "\n", "self", ".", "_rng", "=", "np", ".", "random", ".", "default_rng", "(", "seed", "=", "42", ")", "\n", "if", "self", ".", "deterministic", ":", "\n", "            ", "self", ".", "_get_target_idx", "=", "self", ".", "_get_deterministic_target_idx", "\n", "self", ".", "_target_idx", "=", "[", "self", ".", "_get_random_target_idx", "(", "_", ")", "for", "_", "in", "range", "(", "len", "(", "self", ")", ")", "]", "\n", "", "else", ":", "\n", "            ", "self", ".", "_get_target_idx", "=", "self", ".", "_get_random_target_idx", "\n", "self", ".", "_target_idx", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.AdaptionDataset._get_random_target_idx": [[294, 296], ["cmapss.AdaptionDataset._rng.integers"], "methods", ["None"], ["", "", "def", "_get_random_target_idx", "(", "self", ",", "_", ")", ":", "\n", "        ", "return", "self", ".", "_rng", ".", "integers", "(", "0", ",", "self", ".", "_target_len", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.AdaptionDataset._get_deterministic_target_idx": [[297, 299], ["None"], "methods", ["None"], ["", "def", "_get_deterministic_target_idx", "(", "self", ",", "idx", ")", ":", "\n", "        ", "return", "self", ".", "_target_idx", "[", "idx", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.AdaptionDataset.__getitem__": [[300, 306], ["cmapss.AdaptionDataset._get_target_idx"], "methods", ["None"], ["", "def", "__getitem__", "(", "self", ",", "idx", ")", ":", "\n", "        ", "target_idx", "=", "self", ".", "_get_target_idx", "(", "idx", ")", "\n", "source", ",", "source_label", "=", "self", ".", "source", "[", "idx", "]", "\n", "target", ",", "_", "=", "self", ".", "target", "[", "target_idx", "]", "\n", "\n", "return", "source", ",", "source_label", ",", "target", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.AdaptionDataset.__len__": [[307, 309], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "source", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.AbstractLoader.prepare_data": [[14, 16], ["None"], "methods", ["None"], ["    ", "def", "prepare_data", "(", "self", ")", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.AbstractLoader.load_split": [[17, 19], ["None"], "methods", ["None"], ["", "def", "load_split", "(", "self", ",", "split", ":", "str", ")", "->", "Tuple", "[", "List", "[", "torch", ".", "Tensor", "]", ",", "List", "[", "torch", ".", "Tensor", "]", "]", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.AbstractLoader._truncate_runs": [[20, 45], ["isinstance", "loader.AbstractLoader._trunc_broken_by_percentage", "loader.AbstractLoader._trunc_fail_runs_by_percentage", "isinstance", "loader.AbstractLoader._trunc_fail_runs_by_index"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.AbstractLoader._trunc_broken_by_percentage", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.AbstractLoader._trunc_fail_runs_by_percentage", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.AbstractLoader._trunc_fail_runs_by_index"], ["", "def", "_truncate_runs", "(", "\n", "self", ",", "\n", "features", ":", "List", "[", "np", ".", "ndarray", "]", ",", "\n", "targets", ":", "List", "[", "np", ".", "ndarray", "]", ",", "\n", "percent_broken", ":", "float", "=", "None", ",", "\n", "percent_fail_runs", ":", "Union", "[", "float", ",", "List", "[", "int", "]", "]", "=", "None", ",", "\n", ")", "->", "Tuple", "[", "List", "[", "np", ".", "ndarray", "]", ",", "List", "[", "np", ".", "ndarray", "]", "]", ":", "\n", "# Truncate the number of runs to failure", "\n", "        ", "if", "percent_fail_runs", "is", "not", "None", ":", "\n", "            ", "if", "isinstance", "(", "percent_fail_runs", ",", "float", ")", ":", "\n", "                ", "features", ",", "targets", "=", "self", ".", "_trunc_fail_runs_by_percentage", "(", "\n", "features", ",", "targets", ",", "percent_fail_runs", "\n", ")", "\n", "", "elif", "isinstance", "(", "percent_fail_runs", ",", "Iterable", ")", ":", "\n", "                ", "features", ",", "targets", "=", "self", ".", "_trunc_fail_runs_by_index", "(", "\n", "features", ",", "targets", ",", "percent_fail_runs", "\n", ")", "\n", "\n", "# Truncate the number of samples per run, starting at failure", "\n", "", "", "if", "percent_broken", "is", "not", "None", "and", "percent_broken", "<", "1", ":", "\n", "            ", "features", ",", "targets", "=", "self", ".", "_trunc_broken_by_percentage", "(", "\n", "features", ",", "targets", ",", "percent_broken", "\n", ")", "\n", "\n", "", "return", "features", ",", "targets", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.AbstractLoader._trunc_fail_runs_by_percentage": [[46, 57], ["int", "len"], "methods", ["None"], ["", "def", "_trunc_fail_runs_by_percentage", "(", "\n", "self", ",", "\n", "features", ":", "List", "[", "np", ".", "ndarray", "]", ",", "\n", "targets", ":", "List", "[", "np", ".", "ndarray", "]", ",", "\n", "percent_fail_runs", ":", "float", ",", "\n", ")", "->", "Tuple", "[", "List", "[", "np", ".", "ndarray", "]", ",", "List", "[", "np", ".", "ndarray", "]", "]", ":", "\n", "        ", "num_runs", "=", "int", "(", "percent_fail_runs", "*", "len", "(", "features", ")", ")", "\n", "features", "=", "features", "[", ":", "num_runs", "]", "\n", "targets", "=", "targets", "[", ":", "num_runs", "]", "\n", "\n", "return", "features", ",", "targets", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.AbstractLoader._trunc_fail_runs_by_index": [[58, 68], ["None"], "methods", ["None"], ["", "def", "_trunc_fail_runs_by_index", "(", "\n", "self", ",", "\n", "features", ":", "List", "[", "np", ".", "ndarray", "]", ",", "\n", "targets", ":", "List", "[", "np", ".", "ndarray", "]", ",", "\n", "percent_fail_runs", ":", "Iterable", "[", "int", "]", ",", "\n", ")", "->", "Tuple", "[", "List", "[", "np", ".", "ndarray", "]", ",", "List", "[", "np", ".", "ndarray", "]", "]", ":", "\n", "        ", "features", "=", "[", "features", "[", "i", "]", "for", "i", "in", "percent_fail_runs", "]", "\n", "targets", "=", "[", "targets", "[", "i", "]", "for", "i", "in", "percent_fail_runs", "]", "\n", "\n", "return", "features", ",", "targets", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.AbstractLoader._trunc_broken_by_percentage": [[69, 78], ["enumerate", "int", "len"], "methods", ["None"], ["", "def", "_trunc_broken_by_percentage", "(", "\n", "self", ",", "features", ":", "List", "[", "np", ".", "ndarray", "]", ",", "targets", ":", "List", "[", "np", ".", "ndarray", "]", ",", "percent_broken", ":", "float", "\n", ")", "->", "Tuple", "[", "List", "[", "np", ".", "ndarray", "]", ",", "List", "[", "np", ".", "ndarray", "]", "]", ":", "\n", "        ", "for", "i", ",", "run", "in", "enumerate", "(", "features", ")", ":", "\n", "            ", "num_cycles", "=", "int", "(", "percent_broken", "*", "len", "(", "run", ")", ")", "\n", "features", "[", "i", "]", "=", "run", "[", ":", "num_cycles", "]", "\n", "targets", "[", "i", "]", "=", "targets", "[", "i", "]", "[", ":", "num_cycles", "]", "\n", "\n", "", "return", "features", ",", "targets", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.AbstractLoader._to_tensor": [[79, 88], ["torch.tensor().permute", "torch.tensor", "torch.tensor"], "methods", ["None"], ["", "def", "_to_tensor", "(", "\n", "self", ",", "features", ":", "List", "[", "np", ".", "ndarray", "]", ",", "targets", ":", "List", "[", "np", ".", "ndarray", "]", "\n", ")", "->", "Tuple", "[", "List", "[", "torch", ".", "Tensor", "]", ",", "List", "[", "torch", ".", "Tensor", "]", "]", ":", "\n", "        ", "features", "=", "[", "\n", "torch", ".", "tensor", "(", "f", ",", "dtype", "=", "torch", ".", "float32", ")", ".", "permute", "(", "0", ",", "2", ",", "1", ")", "for", "f", "in", "features", "\n", "]", "\n", "targets", "=", "[", "torch", ".", "tensor", "(", "t", ",", "dtype", "=", "torch", ".", "float32", ")", "for", "t", "in", "targets", "]", "\n", "\n", "return", "features", ",", "targets", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader.__init__": [[100, 126], ["super().__init__", "os.path.join", "os.path.dirname"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__"], ["def", "__init__", "(", "\n", "self", ",", "\n", "fd", ":", "int", ",", "\n", "window_size", ":", "int", "=", "None", ",", "\n", "max_rul", ":", "int", "=", "125", ",", "\n", "percent_broken", ":", "float", "=", "None", ",", "\n", "percent_fail_runs", ":", "Union", "[", "float", ",", "List", "[", "int", "]", "]", "=", "None", ",", "\n", "feature_select", ":", "List", "[", "int", "]", "=", "None", ",", "\n", "truncate_val", ":", "bool", "=", "False", ",", "\n", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "# Select features according to https://doi.org/10.1016/j.ress.2017.11.021", "\n", "if", "feature_select", "is", "None", ":", "\n", "            ", "feature_select", "=", "self", ".", "DEFAULT_CHANNELS", "\n", "\n", "", "self", ".", "fd", "=", "fd", "\n", "self", ".", "window_size", "=", "window_size", "or", "self", ".", "WINDOW_SIZES", "[", "self", ".", "fd", "]", "\n", "self", ".", "max_rul", "=", "max_rul", "\n", "self", ".", "feature_select", "=", "feature_select", "\n", "self", ".", "truncate_val", "=", "truncate_val", "\n", "self", ".", "percent_broken", "=", "percent_broken", "\n", "self", ".", "percent_fail_runs", "=", "percent_fail_runs", "\n", "\n", "self", ".", "DATA_ROOT", "=", "os", ".", "path", ".", "join", "(", "\n", "os", ".", "path", ".", "dirname", "(", "__file__", ")", ",", "\"../..\"", ",", "\"data\"", ",", "\"CMAPSS\"", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader.prepare_data": [[128, 136], ["loader.CMAPSSLoader._file_path", "os.path.exists", "warnings.warn", "loader.CMAPSSLoader._split_fd_train", "loader.CMAPSSLoader._file_path"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._file_path", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._split_fd_train", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._file_path"], ["", "def", "prepare_data", "(", "self", ")", ":", "\n", "# Check if training data was already split", "\n", "        ", "dev_path", "=", "self", ".", "_file_path", "(", "\"dev\"", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "dev_path", ")", ":", "\n", "            ", "warnings", ".", "warn", "(", "\n", "f\"Training data for FD{self.fd:03d} not yet split into dev and val. Splitting now.\"", "\n", ")", "\n", "self", ".", "_split_fd_train", "(", "self", ".", "_file_path", "(", "\"train\"", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._split_fd_train": [[137, 156], ["numpy.loadtxt", "numpy.unique", "numpy.split", "int", "numpy.concatenate", "numpy.concatenate", "os.path.split", "train_file.replace", "os.path.join", "numpy.savetxt", "train_file.replace", "os.path.join", "numpy.savetxt", "numpy.cumsum", "len"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.AllDataSplitter.split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.AllDataSplitter.split"], ["", "", "def", "_split_fd_train", "(", "self", ",", "train_path", ":", "str", ")", ":", "\n", "        ", "train_data", "=", "np", ".", "loadtxt", "(", "train_path", ")", "\n", "\n", "# Split into runs", "\n", "_", ",", "samples_per_run", "=", "np", ".", "unique", "(", "train_data", "[", ":", ",", "0", "]", ",", "return_counts", "=", "True", ")", "\n", "split_idx", "=", "np", ".", "cumsum", "(", "samples_per_run", ")", "[", ":", "-", "1", "]", "\n", "train_data", "=", "np", ".", "split", "(", "train_data", ",", "split_idx", ",", "axis", "=", "0", ")", "\n", "\n", "split_idx", "=", "int", "(", "len", "(", "train_data", ")", "*", "self", ".", "_TRAIN_PERCENTAGE", ")", "\n", "dev_data", "=", "np", ".", "concatenate", "(", "train_data", "[", ":", "split_idx", "]", ")", "\n", "val_data", "=", "np", ".", "concatenate", "(", "train_data", "[", "split_idx", ":", "]", ")", "\n", "\n", "data_root", ",", "train_file", "=", "os", ".", "path", ".", "split", "(", "train_path", ")", "\n", "dev_file", "=", "train_file", ".", "replace", "(", "\"train_\"", ",", "\"dev_\"", ")", "\n", "dev_file", "=", "os", ".", "path", ".", "join", "(", "data_root", ",", "dev_file", ")", "\n", "np", ".", "savetxt", "(", "dev_file", ",", "dev_data", ",", "fmt", "=", "self", ".", "_FMT", ")", "\n", "val_file", "=", "train_file", ".", "replace", "(", "\"train_\"", ",", "\"val_\"", ")", "\n", "val_file", "=", "os", ".", "path", ".", "join", "(", "data_root", ",", "val_file", ")", "\n", "np", ".", "savetxt", "(", "val_file", ",", "val_data", ",", "fmt", "=", "self", ".", "_FMT", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._file_path": [[157, 159], ["os.path.join", "loader.CMAPSSLoader._file_name"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._file_name"], ["", "def", "_file_path", "(", "self", ",", "split", ":", "str", ")", "->", "str", ":", "\n", "        ", "return", "os", ".", "path", ".", "join", "(", "self", ".", "DATA_ROOT", ",", "self", ".", "_file_name", "(", "split", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._file_name": [[160, 162], ["None"], "methods", ["None"], ["", "def", "_file_name", "(", "self", ",", "split", ":", "str", ")", "->", "str", ":", "\n", "        ", "return", "f\"{split}_FD{self.fd:03d}.txt\"", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader.load_split": [[163, 182], ["loader.CMAPSSLoader._file_path", "loader.CMAPSSLoader._load_features", "loader.CMAPSSLoader._normalize", "loader.CMAPSSLoader._remove_time_steps_from_features", "loader.CMAPSSLoader._to_tensor", "loader.CMAPSSLoader._process_dev_or_val_split", "loader.CMAPSSLoader._process_test_split", "ValueError"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._file_path", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._load_features", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._normalize", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._remove_time_steps_from_features", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.AbstractLoader._to_tensor", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._process_dev_or_val_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._process_test_split"], ["", "def", "load_split", "(", "self", ",", "split", ":", "str", ")", "->", "Tuple", "[", "List", "[", "torch", ".", "Tensor", "]", ",", "List", "[", "torch", ".", "Tensor", "]", "]", ":", "\n", "        ", "file_path", "=", "self", ".", "_file_path", "(", "split", ")", "\n", "\n", "features", "=", "self", ".", "_load_features", "(", "file_path", ")", "\n", "features", "=", "self", ".", "_normalize", "(", "features", ")", "\n", "features", ",", "time_steps", "=", "self", ".", "_remove_time_steps_from_features", "(", "features", ")", "\n", "\n", "if", "split", "==", "\"dev\"", "or", "split", "==", "\"val\"", ":", "\n", "            ", "features", ",", "targets", "=", "self", ".", "_process_dev_or_val_split", "(", "\n", "split", ",", "features", ",", "time_steps", "\n", ")", "\n", "", "elif", "split", "==", "\"test\"", ":", "\n", "            ", "features", ",", "targets", "=", "self", ".", "_process_test_split", "(", "features", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "f\"Unknown split {split}.\"", ")", "\n", "\n", "", "features", ",", "targets", "=", "self", ".", "_to_tensor", "(", "features", ",", "targets", ")", "\n", "\n", "return", "features", ",", "targets", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._process_dev_or_val_split": [[183, 198], ["loader.CMAPSSLoader._generate_targets", "loader.CMAPSSLoader._window_data", "loader.CMAPSSLoader._truncate_runs", "loader.CMAPSSLoader._truncate_runs"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._generate_targets", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._window_data", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.AbstractLoader._truncate_runs", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.AbstractLoader._truncate_runs"], ["", "def", "_process_dev_or_val_split", "(", "self", ",", "split", ",", "features", ",", "time_steps", ")", ":", "\n", "# Build targets from time steps on training", "\n", "        ", "targets", "=", "self", ".", "_generate_targets", "(", "time_steps", ")", "\n", "# Window data to get uniform sequence lengths", "\n", "features", ",", "targets", "=", "self", ".", "_window_data", "(", "features", ",", "targets", ")", "\n", "if", "split", "==", "\"dev\"", ":", "\n", "            ", "features", ",", "targets", "=", "self", ".", "_truncate_runs", "(", "\n", "features", ",", "targets", ",", "self", ".", "percent_broken", ",", "self", ".", "percent_fail_runs", "\n", ")", "\n", "", "elif", "split", "==", "\"val\"", "and", "self", ".", "truncate_val", ":", "\n", "            ", "features", ",", "targets", "=", "self", ".", "_truncate_runs", "(", "\n", "features", ",", "targets", ",", "self", ".", "percent_broken", "\n", ")", "\n", "\n", "", "return", "features", ",", "targets", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._process_test_split": [[199, 206], ["loader.CMAPSSLoader._load_targets", "loader.CMAPSSLoader._crop_data"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._load_targets", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._crop_data"], ["", "def", "_process_test_split", "(", "self", ",", "features", ")", ":", "\n", "# Load targets from file on test", "\n", "        ", "targets", "=", "self", ".", "_load_targets", "(", ")", "\n", "# Crop data to get uniform sequence lengths", "\n", "features", "=", "self", ".", "_crop_data", "(", "features", ")", "\n", "\n", "return", "features", ",", "targets", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._load_features": [[207, 219], ["numpy.loadtxt", "numpy.unique", "numpy.split", "numpy.cumsum"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.AllDataSplitter.split"], ["", "def", "_load_features", "(", "self", ",", "file_path", ":", "str", ")", "->", "List", "[", "np", ".", "ndarray", "]", ":", "\n", "        ", "features", "=", "np", ".", "loadtxt", "(", "file_path", ")", "\n", "\n", "feature_idx", "=", "[", "0", ",", "1", "]", "+", "[", "idx", "+", "2", "for", "idx", "in", "self", ".", "feature_select", "]", "\n", "features", "=", "features", "[", ":", ",", "feature_idx", "]", "\n", "\n", "# Split into runs", "\n", "_", ",", "samples_per_run", "=", "np", ".", "unique", "(", "features", "[", ":", ",", "0", "]", ",", "return_counts", "=", "True", ")", "\n", "split_idx", "=", "np", ".", "cumsum", "(", "samples_per_run", ")", "[", ":", "-", "1", "]", "\n", "features", "=", "np", ".", "split", "(", "features", ",", "split_idx", ",", "axis", "=", "0", ")", "\n", "\n", "return", "features", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._normalize": [[220, 234], ["loader.CMAPSSLoader._file_path", "loader.CMAPSSLoader._load_features", "numpy.concatenate", "sklearn.MinMaxScaler", "sklearn.MinMaxScaler.fit", "enumerate", "sklearn.MinMaxScaler.transform"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._file_path", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._load_features", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.RectifiedLinearLayer.transform"], ["", "def", "_normalize", "(", "self", ",", "features", ":", "List", "[", "np", ".", "ndarray", "]", ")", "->", "List", "[", "np", ".", "ndarray", "]", ":", "\n", "        ", "\"\"\"Normalize features with sklearn transform.\"\"\"", "\n", "# Fit scaler on corresponding training split", "\n", "train_file", "=", "self", ".", "_file_path", "(", "\"dev\"", ")", "\n", "train_features", "=", "self", ".", "_load_features", "(", "train_file", ")", "\n", "full_features", "=", "np", ".", "concatenate", "(", "train_features", ",", "axis", "=", "0", ")", "\n", "scaler", "=", "scalers", ".", "MinMaxScaler", "(", "feature_range", "=", "(", "-", "1", ",", "1", ")", ")", "\n", "scaler", ".", "fit", "(", "full_features", "[", ":", ",", "2", ":", "]", ")", "\n", "\n", "# Normalize features", "\n", "for", "i", ",", "run", "in", "enumerate", "(", "features", ")", ":", "\n", "            ", "features", "[", "i", "]", "[", ":", ",", "2", ":", "]", "=", "scaler", ".", "transform", "(", "run", "[", ":", ",", "2", ":", "]", ")", "\n", "\n", "", "return", "features", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._remove_time_steps_from_features": [[235, 247], ["enumerate", "time_steps.append"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "_remove_time_steps_from_features", "(", "\n", "features", ":", "List", "[", "np", ".", "ndarray", "]", ",", "\n", ")", "->", "Tuple", "[", "List", "[", "np", ".", "ndarray", "]", ",", "List", "[", "np", ".", "ndarray", "]", "]", ":", "\n", "        ", "\"\"\"Extract and return time steps from feature array.\"\"\"", "\n", "time_steps", "=", "[", "]", "\n", "for", "i", ",", "seq", "in", "enumerate", "(", "features", ")", ":", "\n", "            ", "time_steps", ".", "append", "(", "seq", "[", ":", ",", "1", "]", ")", "\n", "seq", "=", "seq", "[", ":", ",", "2", ":", "]", "\n", "features", "[", "i", "]", "=", "seq", "\n", "\n", "", "return", "features", ",", "time_steps", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._generate_targets": [[248, 251], ["[].copy", "numpy.minimum"], "methods", ["None"], ["", "def", "_generate_targets", "(", "self", ",", "time_steps", ":", "List", "[", "np", ".", "ndarray", "]", ")", "->", "List", "[", "np", ".", "ndarray", "]", ":", "\n", "        ", "\"\"\"Generate RUL targets from time steps.\"\"\"", "\n", "return", "[", "np", ".", "minimum", "(", "self", ".", "max_rul", ",", "steps", ")", "[", ":", ":", "-", "1", "]", ".", "copy", "(", ")", "for", "steps", "in", "time_steps", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._load_targets": [[252, 262], ["os.path.join", "numpy.loadtxt", "numpy.minimum", "numpy.split", "len"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.AllDataSplitter.split"], ["", "def", "_load_targets", "(", "self", ")", "->", "List", "[", "np", ".", "ndarray", "]", ":", "\n", "        ", "\"\"\"Load target file.\"\"\"", "\n", "file_name", "=", "f\"RUL_FD{self.fd:03d}.txt\"", "\n", "file_path", "=", "os", ".", "path", ".", "join", "(", "self", ".", "DATA_ROOT", ",", "file_name", ")", "\n", "targets", "=", "np", ".", "loadtxt", "(", "file_path", ")", "\n", "\n", "targets", "=", "np", ".", "minimum", "(", "self", ".", "max_rul", ",", "targets", ")", "\n", "targets", "=", "np", ".", "split", "(", "targets", ",", "len", "(", "targets", ")", ")", "\n", "\n", "return", "targets", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._window_data": [[263, 280], ["zip", "numpy.stack", "new_features.append", "new_targets.append", "range"], "methods", ["None"], ["", "def", "_window_data", "(", "\n", "self", ",", "features", ":", "List", "[", "np", ".", "ndarray", "]", ",", "targets", ":", "List", "[", "np", ".", "ndarray", "]", "\n", ")", "->", "Tuple", "[", "List", "[", "np", ".", "ndarray", "]", ",", "List", "[", "np", ".", "ndarray", "]", "]", ":", "\n", "        ", "\"\"\"Window features with specified window size.\"\"\"", "\n", "new_features", "=", "[", "]", "\n", "new_targets", "=", "[", "]", "\n", "for", "seq", ",", "target", "in", "zip", "(", "features", ",", "targets", ")", ":", "\n", "            ", "num_frames", "=", "seq", ".", "shape", "[", "0", "]", "-", "self", ".", "window_size", "+", "1", "\n", "feature_windows", "=", "[", "\n", "seq", "[", "i", ":", "(", "i", "+", "self", ".", "window_size", ")", "]", "for", "i", "in", "range", "(", "0", ",", "num_frames", ")", "\n", "]", "\n", "target", "=", "target", "[", "-", "num_frames", ":", "]", "\n", "feature_windows", "=", "np", ".", "stack", "(", "feature_windows", ")", "\n", "new_features", ".", "append", "(", "feature_windows", ")", "\n", "new_targets", ".", "append", "(", "target", ")", "\n", "\n", "", "return", "new_features", ",", "new_targets", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.CMAPSSLoader._crop_data": [[281, 293], ["cropped_features.append", "numpy.concatenate", "numpy.expand_dims", "numpy.zeros"], "methods", ["None"], ["", "def", "_crop_data", "(", "self", ",", "features", ":", "List", "[", "np", ".", "ndarray", "]", ")", "->", "List", "[", "np", ".", "ndarray", "]", ":", "\n", "        ", "\"\"\"Crop length of features to specified window size.\"\"\"", "\n", "cropped_features", "=", "[", "]", "\n", "for", "seq", "in", "features", ":", "\n", "            ", "if", "seq", ".", "shape", "[", "0", "]", "<", "self", ".", "window_size", ":", "\n", "                ", "pad", "=", "(", "self", ".", "window_size", "-", "seq", ".", "shape", "[", "0", "]", ",", "seq", ".", "shape", "[", "1", "]", ")", "\n", "seq", "=", "np", ".", "concatenate", "(", "[", "np", ".", "zeros", "(", "pad", ")", ",", "seq", "]", ")", "\n", "", "else", ":", "\n", "                ", "seq", "=", "seq", "[", "-", "self", ".", "window_size", ":", "]", "\n", "", "cropped_features", ".", "append", "(", "np", ".", "expand_dims", "(", "seq", ",", "axis", "=", "0", ")", ")", "\n", "\n", "", "return", "cropped_features", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader.__init__": [[300, 321], ["super().__init__", "loader.FEMTOPreparator"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__"], ["def", "__init__", "(", "\n", "self", ",", "\n", "fd", ":", "int", ",", "\n", "window_size", ":", "int", "=", "None", ",", "\n", "max_rul", ":", "int", "=", "125", ",", "\n", "percent_broken", ":", "float", "=", "None", ",", "\n", "percent_fail_runs", ":", "Union", "[", "float", ",", "List", "[", "int", "]", "]", "=", "None", ",", "\n", "feature_select", ":", "List", "[", "int", "]", "=", "None", ",", "\n", "truncate_val", ":", "bool", "=", "False", ",", "\n", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "fd", "=", "fd", "\n", "self", ".", "window_size", "=", "window_size", "or", "FEMTOPreparator", ".", "DEFAULT_WINDOW_SIZE", "\n", "self", ".", "max_rul", "=", "max_rul", "\n", "self", ".", "feature_select", "=", "feature_select", "\n", "self", ".", "truncate_val", "=", "truncate_val", "\n", "self", ".", "percent_broken", "=", "percent_broken", "\n", "self", ".", "percent_fail_runs", "=", "percent_fail_runs", "\n", "\n", "self", ".", "_preparator", "=", "FEMTOPreparator", "(", "self", ".", "fd", ",", "self", ".", "DATA_ROOT", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader.prepare_data": [[322, 325], ["loader.FEMTOLoader._preparator.prepare_split", "loader.FEMTOLoader._preparator.prepare_split"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator.prepare_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator.prepare_split"], ["", "def", "prepare_data", "(", "self", ")", ":", "\n", "        ", "self", ".", "_preparator", ".", "prepare_split", "(", "\"train\"", ")", "\n", "self", ".", "_preparator", ".", "prepare_split", "(", "\"test\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader.load_split": [[326, 336], ["loader.FEMTOLoader._load_runs", "loader.FEMTOLoader._scale_features", "loader.FEMTOLoader._to_tensor", "loader.FEMTOLoader._truncate_runs"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader._load_runs", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader._scale_features", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.AbstractLoader._to_tensor", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.AbstractLoader._truncate_runs"], ["", "def", "load_split", "(", "self", ",", "split", ":", "str", ")", "->", "Tuple", "[", "List", "[", "torch", ".", "Tensor", "]", ",", "List", "[", "torch", ".", "Tensor", "]", "]", ":", "\n", "        ", "features", ",", "targets", "=", "self", ".", "_load_runs", "(", "split", ")", "\n", "if", "split", "==", "\"train\"", ":", "\n", "            ", "features", ",", "targets", "=", "self", ".", "_truncate_runs", "(", "\n", "features", ",", "targets", ",", "self", ".", "percent_broken", ",", "self", ".", "percent_fail_runs", "\n", ")", "\n", "", "features", "=", "self", ".", "_scale_features", "(", "features", ")", "\n", "features", ",", "targets", "=", "self", ".", "_to_tensor", "(", "features", ",", "targets", ")", "\n", "\n", "return", "features", ",", "targets", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader._load_runs": [[337, 342], ["loader.FEMTOLoader._preparator.load_runs"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator.load_runs"], ["", "def", "_load_runs", "(", "self", ",", "split", ":", "str", ")", ":", "\n", "        ", "features", ",", "targets", "=", "self", ".", "_preparator", ".", "load_runs", "(", "split", ")", "\n", "features", "=", "[", "f", "[", ":", ",", "-", "self", ".", "window_size", ":", ",", ":", "]", "for", "f", "in", "features", "]", "\n", "\n", "return", "features", ",", "targets", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader._scale_features": [[343, 351], ["loader.FEMTOLoader._preparator.load_scaler", "enumerate", "loader.FEMTOLoader.transform.reshape", "loader.FEMTOLoader.transform", "loader.FEMTOLoader.transform.reshape"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator.load_scaler", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.RectifiedLinearLayer.transform"], ["", "def", "_scale_features", "(", "self", ",", "runs", ":", "List", "[", "np", ".", "ndarray", "]", ")", "->", "List", "[", "np", ".", "ndarray", "]", ":", "\n", "        ", "scaler", "=", "self", ".", "_preparator", ".", "load_scaler", "(", ")", "\n", "for", "i", ",", "run", "in", "enumerate", "(", "runs", ")", ":", "\n", "            ", "run", "=", "run", ".", "reshape", "(", "-", "1", ",", "2", ")", "\n", "run", "=", "scaler", ".", "transform", "(", "run", ")", "\n", "runs", "[", "i", "]", "=", "run", ".", "reshape", "(", "-", "1", ",", "self", ".", "window_size", ",", "2", ")", "\n", "\n", "", "return", "runs", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator.__init__": [[357, 360], ["None"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "fd", ",", "data_root", ")", ":", "\n", "        ", "self", ".", "fd", "=", "fd", "\n", "self", ".", "_data_root", "=", "data_root", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator.prepare_split": [[361, 370], ["os.path.exists", "print", "loader.FEMTOPreparator._load_raw_runs", "loader.FEMTOPreparator._save_efficient", "loader.FEMTOPreparator.load_runs", "loader.FEMTOPreparator._fit_scaler", "loader.FEMTOPreparator._save_scaler", "loader.FEMTOPreparator._get_run_file_path", "os.path.exists", "loader.FEMTOPreparator._get_scaler_path"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._load_raw_runs", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._save_efficient", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator.load_runs", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._fit_scaler", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._save_scaler", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_run_file_path", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_scaler_path"], ["", "def", "prepare_split", "(", "self", ",", "split", ":", "str", ")", ":", "\n", "        ", "if", "not", "os", ".", "path", ".", "exists", "(", "self", ".", "_get_run_file_path", "(", "split", ")", ")", ":", "\n", "            ", "print", "(", "f\"Prepare FEMTO {split} data of condition {self.fd}...\"", ")", "\n", "features", ",", "targets", "=", "self", ".", "_load_raw_runs", "(", "split", ")", "\n", "self", ".", "_save_efficient", "(", "split", ",", "features", ",", "targets", ")", "\n", "", "if", "split", "==", "\"train\"", "and", "not", "os", ".", "path", ".", "exists", "(", "self", ".", "_get_scaler_path", "(", ")", ")", ":", "\n", "            ", "features", ",", "_", "=", "self", ".", "load_runs", "(", "split", ")", "\n", "scaler", "=", "self", ".", "_fit_scaler", "(", "features", ")", "\n", "self", ".", "_save_scaler", "(", "scaler", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator.load_runs": [[371, 377], ["loader.FEMTOPreparator._get_run_file_path", "open", "pickle.load"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_run_file_path"], ["", "", "def", "load_runs", "(", "self", ",", "split", ":", "str", ")", "->", "Tuple", "[", "List", "[", "np", ".", "ndarray", "]", ",", "List", "[", "np", ".", "ndarray", "]", "]", ":", "\n", "        ", "save_path", "=", "self", ".", "_get_run_file_path", "(", "split", ")", "\n", "with", "open", "(", "save_path", ",", "mode", "=", "\"rb\"", ")", "as", "f", ":", "\n", "            ", "features", ",", "targets", "=", "pickle", ".", "load", "(", "f", ")", "\n", "\n", "", "return", "features", ",", "targets", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._load_raw_runs": [[378, 384], ["loader.FEMTOPreparator._get_csv_file_paths", "loader.FEMTOPreparator._load_raw_features", "loader.FEMTOPreparator._targets_from_file_paths"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_csv_file_paths", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._load_raw_features", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._targets_from_file_paths"], ["", "def", "_load_raw_runs", "(", "self", ",", "split", ":", "str", ")", "->", "Tuple", "[", "List", "[", "np", ".", "ndarray", "]", ",", "List", "[", "np", ".", "ndarray", "]", "]", ":", "\n", "        ", "file_paths", "=", "self", ".", "_get_csv_file_paths", "(", "split", ")", "\n", "features", "=", "self", ".", "_load_raw_features", "(", "file_paths", ")", "\n", "targets", "=", "self", ".", "_targets_from_file_paths", "(", "file_paths", ")", "\n", "\n", "return", "features", ",", "targets", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._load_raw_features": [[385, 394], ["tqdm.tqdm.tqdm", "numpy.empty", "enumerate", "runs.append", "tqdm.tqdm.tqdm", "loader.FEMTOPreparator._load_feature_file", "len"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._load_feature_file"], ["", "def", "_load_raw_features", "(", "self", ",", "file_paths", ":", "List", "[", "List", "[", "str", "]", "]", ")", "->", "List", "[", "np", ".", "ndarray", "]", ":", "\n", "        ", "runs", "=", "[", "]", "\n", "for", "run_files", "in", "tqdm", "(", "file_paths", ",", "desc", "=", "\"Runs\"", ")", ":", "\n", "            ", "run_features", "=", "np", ".", "empty", "(", "(", "len", "(", "run_files", ")", ",", "self", ".", "DEFAULT_WINDOW_SIZE", ",", "2", ")", ")", "\n", "for", "i", ",", "file_path", "in", "enumerate", "(", "tqdm", "(", "run_files", ",", "desc", "=", "\"Files\"", ")", ")", ":", "\n", "                ", "run_features", "[", "i", "]", "=", "self", ".", "_load_feature_file", "(", "file_path", ")", "\n", "", "runs", ".", "append", "(", "run_features", ")", "\n", "\n", "", "return", "runs", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_csv_file_paths": [[395, 405], ["loader.FEMTOPreparator._get_split_folder", "loader.FEMTOPreparator._get_run_folders", "os.path.join", "loader.FEMTOPreparator._get_csv_files_in_path", "file_paths.append"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_split_folder", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_run_folders", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_csv_files_in_path"], ["", "def", "_get_csv_file_paths", "(", "self", ",", "split", ":", "str", ")", "->", "List", "[", "List", "[", "str", "]", "]", ":", "\n", "        ", "split_path", "=", "self", ".", "_get_split_folder", "(", "split", ")", "\n", "run_folders", "=", "self", ".", "_get_run_folders", "(", "split_path", ")", "\n", "file_paths", "=", "[", "]", "\n", "for", "run_folder", "in", "run_folders", ":", "\n", "            ", "run_path", "=", "os", ".", "path", ".", "join", "(", "split_path", ",", "run_folder", ")", "\n", "feature_files", "=", "self", ".", "_get_csv_files_in_path", "(", "run_path", ")", "\n", "file_paths", ".", "append", "(", "feature_files", ")", "\n", "\n", "", "return", "file_paths", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_split_folder": [[406, 408], ["os.path.join"], "methods", ["None"], ["", "def", "_get_split_folder", "(", "self", ",", "split", ":", "str", ")", "->", "str", ":", "\n", "        ", "return", "os", ".", "path", ".", "join", "(", "self", ".", "_data_root", ",", "self", ".", "SPLIT_FOLDERS", "[", "split", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_run_folders": [[409, 415], ["loader.FEMTOPreparator._get_run_folder_pattern", "os.listdir", "loader.FEMTOPreparator.match"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_run_folder_pattern"], ["", "def", "_get_run_folders", "(", "self", ",", "split_path", ")", ":", "\n", "        ", "folder_pattern", "=", "self", ".", "_get_run_folder_pattern", "(", ")", "\n", "all_folders", "=", "os", ".", "listdir", "(", "split_path", ")", "\n", "run_folders", "=", "[", "f", "for", "f", "in", "all_folders", "if", "folder_pattern", ".", "match", "(", "f", ")", "is", "not", "None", "]", "\n", "\n", "return", "run_folders", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_run_folder_pattern": [[416, 418], ["re.compile"], "methods", ["None"], ["", "def", "_get_run_folder_pattern", "(", "self", ")", "->", "re", ".", "Pattern", ":", "\n", "        ", "return", "re", ".", "compile", "(", "fr\"Bearing{self.fd}_\\d\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_csv_files_in_path": [[419, 424], ["sorted", "os.listdir", "f.startswith", "os.path.join"], "methods", ["None"], ["", "def", "_get_csv_files_in_path", "(", "self", ",", "run_path", ")", ":", "\n", "        ", "feature_files", "=", "[", "f", "for", "f", "in", "os", ".", "listdir", "(", "run_path", ")", "if", "f", ".", "startswith", "(", "\"acc\"", ")", "]", "\n", "feature_files", "=", "sorted", "(", "os", ".", "path", ".", "join", "(", "run_path", ",", "f", ")", "for", "f", "in", "feature_files", ")", "\n", "\n", "return", "feature_files", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._load_feature_file": [[425, 430], ["numpy.loadtxt"], "methods", ["None"], ["", "def", "_load_feature_file", "(", "self", ",", "file_path", ":", "str", ")", "->", "np", ".", "ndarray", ":", "\n", "        ", "features", "=", "np", ".", "loadtxt", "(", "file_path", ",", "delimiter", "=", "\",\"", ")", "\n", "features", "=", "features", "[", ":", ",", "[", "4", ",", "5", "]", "]", "\n", "\n", "return", "features", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._targets_from_file_paths": [[431, 441], ["numpy.empty", "enumerate", "run_targets[].copy", "targets.append", "len", "loader.FEMTOPreparator._timestep_from_file_path"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._timestep_from_file_path"], ["", "def", "_targets_from_file_paths", "(", "self", ",", "file_paths", ":", "List", "[", "List", "[", "str", "]", "]", ")", "->", "List", "[", "np", ".", "ndarray", "]", ":", "\n", "        ", "targets", "=", "[", "]", "\n", "for", "run_files", "in", "file_paths", ":", "\n", "            ", "run_targets", "=", "np", ".", "empty", "(", "len", "(", "run_files", ")", ")", "\n", "for", "i", ",", "file_path", "in", "enumerate", "(", "run_files", ")", ":", "\n", "                ", "run_targets", "[", "i", "]", "=", "self", ".", "_timestep_from_file_path", "(", "file_path", ")", "\n", "", "run_targets", "=", "run_targets", "[", ":", ":", "-", "1", "]", ".", "copy", "(", ")", "\n", "targets", ".", "append", "(", "run_targets", ")", "\n", "\n", "", "return", "targets", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._timestep_from_file_path": [[442, 447], ["os.path.basename", "int"], "methods", ["None"], ["", "def", "_timestep_from_file_path", "(", "self", ",", "file_path", ":", "str", ")", "->", "int", ":", "\n", "        ", "file_name", "=", "os", ".", "path", ".", "basename", "(", "file_path", ")", "\n", "time_step", "=", "int", "(", "file_name", "[", "4", ":", "9", "]", ")", "\n", "\n", "return", "time_step", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._fit_scaler": [[448, 455], ["sklearn.StandardScaler", "run.reshape.reshape.reshape", "sklearn.StandardScaler.partial_fit"], "methods", ["None"], ["", "def", "_fit_scaler", "(", "self", ",", "features", ")", ":", "\n", "        ", "scaler", "=", "scalers", ".", "StandardScaler", "(", ")", "\n", "for", "run", "in", "features", ":", "\n", "            ", "run", "=", "run", ".", "reshape", "(", "-", "1", ",", "run", ".", "shape", "[", "-", "1", "]", ")", "\n", "scaler", ".", "partial_fit", "(", "run", ")", "\n", "\n", "", "return", "scaler", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._save_scaler": [[456, 460], ["loader.FEMTOPreparator._get_scaler_path", "open", "pickle.dump"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_scaler_path"], ["", "def", "_save_scaler", "(", "self", ",", "scaler", ")", ":", "\n", "        ", "save_path", "=", "self", ".", "_get_scaler_path", "(", ")", "\n", "with", "open", "(", "save_path", ",", "mode", "=", "\"wb\"", ")", "as", "f", ":", "\n", "            ", "pickle", ".", "dump", "(", "scaler", ",", "f", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator.load_scaler": [[461, 467], ["loader.FEMTOPreparator._get_scaler_path", "open", "pickle.load"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_scaler_path"], ["", "", "def", "load_scaler", "(", "self", ")", "->", "scalers", ".", "StandardScaler", ":", "\n", "        ", "save_path", "=", "self", ".", "_get_scaler_path", "(", ")", "\n", "with", "open", "(", "save_path", ",", "mode", "=", "\"rb\"", ")", "as", "f", ":", "\n", "            ", "scaler", "=", "pickle", ".", "load", "(", "f", ")", "\n", "\n", "", "return", "scaler", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_scaler_path": [[468, 470], ["os.path.join", "loader.FEMTOPreparator._get_split_folder"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_split_folder"], ["", "def", "_get_scaler_path", "(", "self", ")", ":", "\n", "        ", "return", "os", ".", "path", ".", "join", "(", "self", ".", "_get_split_folder", "(", "\"train\"", ")", ",", "f\"scaler_{self.fd}.pkl\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._save_efficient": [[471, 476], ["open", "pickle.dump", "loader.FEMTOPreparator._get_run_file_path"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_run_file_path"], ["", "def", "_save_efficient", "(", "\n", "self", ",", "split", ":", "str", ",", "features", ":", "List", "[", "np", ".", "ndarray", "]", ",", "targets", ":", "List", "[", "np", ".", "ndarray", "]", "\n", ")", ":", "\n", "        ", "with", "open", "(", "self", ".", "_get_run_file_path", "(", "split", ")", ",", "mode", "=", "\"wb\"", ")", "as", "f", ":", "\n", "            ", "pickle", ".", "dump", "(", "(", "features", ",", "targets", ")", ",", "f", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_run_file_path": [[477, 482], ["loader.FEMTOPreparator._get_split_folder", "os.path.join"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOPreparator._get_split_folder"], ["", "", "def", "_get_run_file_path", "(", "self", ",", "split", ":", "str", ")", "->", "str", ":", "\n", "        ", "split_folder", "=", "self", ".", "_get_split_folder", "(", "split", ")", "\n", "run_file_path", "=", "os", ".", "path", ".", "join", "(", "split_folder", ",", "f\"runs_{self.fd}.pkl\"", ")", "\n", "\n", "return", "run_file_path", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.hyperopt.hyperopt_supervised.tune_supervised": [[14, 48], ["arch_config.update", "pytorch_lightning.TensorBoardLogger", "pytorch_lightning.callbacks.ModelCheckpoint", "ray.tune.integration.pytorch_lightning.TuneReportCallback", "building.build_trainer", "datasets.BaselineDataModule", "building.build_baseline_from_config", "building.add_hparams", "building.build_trainer.fit", "hyperopt_supervised._get_hyperopt_logdir", "lightning.loggers.baseline_experiment_name"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.build_trainer", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_baseline_from_config", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.add_hparams", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.hyperopt.hyperopt_semi_supervised._get_hyperopt_logdir", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.baseline_experiment_name"], ["def", "tune_supervised", "(", "config", ",", "source", ",", "arch_config", ",", "encoder", ")", ":", "\n", "    ", "arch_config", ".", "update", "(", "config", ")", "\n", "\n", "logger", "=", "pl_loggers", ".", "TensorBoardLogger", "(", "\n", "_get_hyperopt_logdir", "(", ")", ",", "\n", "loggers", ".", "baseline_experiment_name", "(", "source", ")", ",", "\n", ")", "\n", "checkpoint_callback", "=", "pl", ".", "callbacks", ".", "ModelCheckpoint", "(", "monitor", "=", "\"val/regression_loss\"", ")", "\n", "tune_callback", "=", "TuneReportCallback", "(", "\n", "{", "\n", "\"reg_loss\"", ":", "\"val/regression_loss\"", ",", "\n", "}", ",", "\n", "on", "=", "\"validation_end\"", ",", "\n", ")", "\n", "trainer", "=", "building", ".", "build_trainer", "(", "\n", "logger", ",", "\n", "checkpoint_callback", ",", "\n", "max_epochs", "=", "100", ",", "\n", "val_interval", "=", "1.0", ",", "\n", "gpu", "=", "1", ",", "\n", "seed", "=", "None", ",", "\n", "callbacks", "=", "[", "tune_callback", "]", ",", "\n", "check_sanity", "=", "False", ",", "\n", ")", "\n", "\n", "data", "=", "datasets", ".", "BaselineDataModule", "(", "\n", "fd_source", "=", "source", ",", "batch_size", "=", "arch_config", "[", "\"batch_size\"", "]", "\n", ")", "\n", "model", "=", "building", ".", "build_baseline_from_config", "(", "\n", "arch_config", ",", "data", ".", "window_size", ",", "encoder", ",", "None", "\n", ")", "\n", "building", ".", "add_hparams", "(", "model", ",", "data", ",", "None", ")", "\n", "\n", "trainer", ".", "fit", "(", "model", ",", "datamodule", "=", "data", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.hyperopt.hyperopt_supervised._get_hyperopt_logdir": [[50, 55], ["os.path.dirname", "os.path.normpath", "os.path.join"], "function", ["None"], ["", "def", "_get_hyperopt_logdir", "(", ")", ":", "\n", "    ", "script_path", "=", "os", ".", "path", ".", "dirname", "(", "__file__", ")", "\n", "log_dir", "=", "os", ".", "path", ".", "normpath", "(", "os", ".", "path", ".", "join", "(", "script_path", ",", "\"..\"", ",", "\"..\"", ",", "\"hyperopt\"", ")", ")", "\n", "\n", "return", "log_dir", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.hyperopt.hyperopt_supervised.optimize_supervised": [[57, 94], ["ray.tune.schedulers.ASHAScheduler", "ray.tune.CLIReporter", "functools.partial", "ray.tune.run", "print", "ray.tune.quniform", "ray.tune.qloguniform", "ray.tune.choice", "list", "config.keys"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_pretraining.run"], ["", "def", "optimize_supervised", "(", "source", ",", "arch_config", ",", "encoder", ",", "num_trials", ")", ":", "\n", "    ", "config", "=", "{", "\n", "\"dropout\"", ":", "tune", ".", "quniform", "(", "0.0", ",", "0.5", ",", "0.1", ")", ",", "\n", "\"lr\"", ":", "tune", ".", "qloguniform", "(", "1e-4", ",", "1e-1", ",", "5e-5", ")", ",", "\n", "\"batch_size\"", ":", "tune", ".", "choice", "(", "[", "64", ",", "128", ",", "256", ",", "512", "]", ")", ",", "\n", "}", "\n", "\n", "scheduler", "=", "tune", ".", "schedulers", ".", "ASHAScheduler", "(", "\n", "max_t", "=", "100", ",", "grace_period", "=", "10", ",", "reduction_factor", "=", "2", "\n", ")", "\n", "reporter", "=", "tune", ".", "CLIReporter", "(", "\n", "parameter_columns", "=", "list", "(", "config", ".", "keys", "(", ")", ")", ",", "\n", "metric_columns", "=", "[", "\"reg_loss\"", "]", ",", "\n", ")", "\n", "\n", "tune_func", "=", "partial", "(", "\n", "tune_supervised", ",", "\n", "source", "=", "source", ",", "\n", "arch_config", "=", "arch_config", ",", "\n", "encoder", "=", "encoder", ",", "\n", ")", "\n", "analysis", "=", "tune", ".", "run", "(", "\n", "tune_func", ",", "\n", "resources_per_trial", "=", "{", "\"cpu\"", ":", "3", ",", "\"gpu\"", ":", "0.5", "}", ",", "\n", "metric", "=", "\"reg_loss\"", ",", "\n", "mode", "=", "\"min\"", ",", "\n", "config", "=", "config", ",", "\n", "num_samples", "=", "num_trials", ",", "\n", "scheduler", "=", "scheduler", ",", "\n", "progress_reporter", "=", "reporter", ",", "\n", "name", "=", "\"tune_supervised_asha\"", ",", "\n", "fail_fast", "=", "True", ",", "\n", ")", "\n", "\n", "print", "(", "\"Best hyperparameters found were: \"", ",", "analysis", ".", "best_config", ")", "\n", "\n", "return", "analysis", ".", "best_config", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.hyperopt.hyperopt_semi_supervised.tune_pretraining": [[14, 68], ["range", "ray.tune.report", "pytorch_lightning.TensorBoardLogger", "pytorch_lightning.callbacks.ModelCheckpoint", "building.build_trainer", "datasets.PretrainingBaselineDataModule", "building.add_hparams", "building.build_trainer.fit", "best_scores.append", "hyperopt_semi_supervised._get_hyperopt_logdir", "lightning.loggers.semi_supervised_hyperopt_name", "building.build_pretraining_from_config", "building.build_autoencoder_from_config", "building.build_trainer.checkpoint_callback.best_model_score.item", "ray.tune.report", "numpy.mean", "numpy.std", "numpy.max", "numpy.max"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.build_trainer", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.add_hparams", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.hyperopt.hyperopt_semi_supervised._get_hyperopt_logdir", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.semi_supervised_hyperopt_name", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_pretraining_from_config", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_autoencoder_from_config"], ["def", "tune_pretraining", "(", "config", ",", "arch_config", ",", "source", ",", "percent_broken", ",", "encoder", ",", "mode", ")", ":", "\n", "    ", "best_scores", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "5", ")", ":", "\n", "        ", "logger", "=", "pl_loggers", ".", "TensorBoardLogger", "(", "\n", "_get_hyperopt_logdir", "(", ")", ",", "\n", "loggers", ".", "semi_supervised_hyperopt_name", "(", "source", ",", "percent_broken", ")", ",", "\n", ")", "\n", "checkpoint_callback", "=", "pl", ".", "callbacks", ".", "ModelCheckpoint", "(", "monitor", "=", "\"val/checkpoint_score\"", ")", "\n", "trainer", "=", "building", ".", "build_trainer", "(", "\n", "logger", ",", "\n", "checkpoint_callback", ",", "\n", "max_epochs", "=", "100", ",", "\n", "val_interval", "=", "1.0", ",", "\n", "gpu", "=", "1", ",", "\n", "seed", "=", "None", ",", "\n", "check_sanity", "=", "False", ",", "\n", ")", "\n", "\n", "data", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "fd_source", "=", "source", ",", "\n", "num_samples", "=", "50000", ",", "\n", "batch_size", "=", "config", "[", "\"batch_size\"", "]", ",", "\n", "percent_broken", "=", "percent_broken", ",", "\n", "percent_fail_runs", "=", "0.0", ",", "\n", "min_distance", "=", "config", "[", "\"min_distance\"", "]", ",", "\n", "truncate_val", "=", "True", ",", "\n", ")", "\n", "if", "mode", "==", "\"metric\"", ":", "\n", "            ", "model", "=", "building", ".", "build_pretraining_from_config", "(", "\n", "arch_config", ",", "\n", "config", ",", "\n", "data", ".", "window_size", ",", "\n", "encoder", "=", "encoder", ",", "\n", "record_embeddings", "=", "False", ",", "\n", "use_adaption", "=", "False", ",", "\n", ")", "\n", "", "else", ":", "\n", "            ", "model", "=", "building", ".", "build_autoencoder_from_config", "(", "\n", "arch_config", ",", "\n", "config", ",", "\n", "data", ".", "window_size", ",", "\n", "encoder", "=", "encoder", ",", "\n", "record_embeddings", "=", "False", ",", "\n", "use_adaption", "=", "False", ",", "\n", ")", "\n", "", "building", ".", "add_hparams", "(", "model", ",", "data", ",", "42", ")", "\n", "\n", "trainer", ".", "fit", "(", "model", ",", "datamodule", "=", "data", ")", "\n", "best_scores", ".", "append", "(", "trainer", ".", "checkpoint_callback", ".", "best_model_score", ".", "item", "(", ")", ")", "\n", "if", "np", ".", "std", "(", "best_scores", ")", ">", "0.005", "or", "np", ".", "max", "(", "best_scores", ")", ">", "0.04", ":", "\n", "            ", "tune", ".", "report", "(", "checkpoint_score", "=", "np", ".", "max", "(", "best_scores", ")", ",", "replication", "=", "i", ")", "\n", "return", "\n", "\n", "", "", "tune", ".", "report", "(", "checkpoint_score", "=", "np", ".", "mean", "(", "best_scores", ")", ",", "replication", "=", "5", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.hyperopt.hyperopt_semi_supervised._get_hyperopt_logdir": [[70, 75], ["os.path.dirname", "os.path.normpath", "os.path.join"], "function", ["None"], ["", "def", "_get_hyperopt_logdir", "(", ")", ":", "\n", "    ", "script_path", "=", "os", ".", "path", ".", "dirname", "(", "__file__", ")", "\n", "log_dir", "=", "os", ".", "path", ".", "normpath", "(", "os", ".", "path", ".", "join", "(", "script_path", ",", "\"..\"", ",", "\"..\"", ",", "\"hyperopt\"", ")", ")", "\n", "\n", "return", "log_dir", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.hyperopt.hyperopt_semi_supervised.optimize_pretraining": [[77, 116], ["ray.tune.schedulers.FIFOScheduler", "ray.tune.CLIReporter", "functools.partial", "ray.tune.run", "print", "ray.tune.choice", "ray.tune.quniform", "ray.tune.qloguniform", "ray.tune.choice", "ray.tune.choice", "list", "config.keys"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_pretraining.run"], ["", "def", "optimize_pretraining", "(", "source", ",", "percent_broken", ",", "arch_config", ",", "encoder", ",", "mode", ",", "num_trials", ")", ":", "\n", "    ", "config", "=", "{", "\n", "\"domain_tradeoff\"", ":", "tune", ".", "choice", "(", "[", "0.0", "]", ")", ",", "\n", "\"dropout\"", ":", "tune", ".", "quniform", "(", "0.0", ",", "0.5", ",", "0.1", ")", ",", "\n", "\"lr\"", ":", "tune", ".", "qloguniform", "(", "1e-4", ",", "1e-1", ",", "5e-5", ")", ",", "\n", "\"batch_size\"", ":", "tune", ".", "choice", "(", "[", "64", ",", "128", ",", "256", ",", "512", "]", ")", ",", "\n", "\"min_distance\"", ":", "tune", ".", "choice", "(", "[", "1", ",", "10", ",", "15", ",", "30", "]", ")", ",", "\n", "}", "\n", "\n", "scheduler", "=", "tune", ".", "schedulers", ".", "FIFOScheduler", "(", ")", "\n", "reporter", "=", "tune", ".", "CLIReporter", "(", "\n", "parameter_columns", "=", "list", "(", "config", ".", "keys", "(", ")", ")", ",", "\n", "metric_columns", "=", "[", "\"checkpoint_score\"", ",", "\"replication\"", "]", ",", "\n", ")", "\n", "\n", "tune_func", "=", "partial", "(", "\n", "tune_pretraining", ",", "\n", "arch_config", "=", "arch_config", ",", "\n", "source", "=", "source", ",", "\n", "percent_broken", "=", "percent_broken", ",", "\n", "encoder", "=", "encoder", ",", "\n", "mode", "=", "mode", ",", "\n", ")", "\n", "analysis", "=", "tune", ".", "run", "(", "\n", "tune_func", ",", "\n", "resources_per_trial", "=", "{", "\"cpu\"", ":", "3", ",", "\"gpu\"", ":", "0.5", "}", ",", "\n", "metric", "=", "\"checkpoint_score\"", ",", "\n", "mode", "=", "\"min\"", ",", "\n", "config", "=", "config", ",", "\n", "num_samples", "=", "num_trials", ",", "\n", "scheduler", "=", "scheduler", ",", "\n", "progress_reporter", "=", "reporter", ",", "\n", "name", "=", "\"tune_stability_asha\"", ",", "\n", "fail_fast", "=", "True", ",", "\n", ")", "\n", "\n", "print", "(", "\"Best hyperparameters found were: \"", ",", "analysis", ".", "best_config", ")", "\n", "\n", "return", "analysis", ".", "best_config", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining.__init__": [[11, 57], ["super().__init__", "pretraining.UnsupervisedPretraining._get_encoder", "torch.MSELoss", "torch.MSELoss", "torch.BCEWithLogitsLoss", "torch.BCEWithLogitsLoss", "lightning.metrics.EmbeddingViz", "lightning.metrics.SimpleMetric", "lightning.metrics.SimpleMetric", "pretraining.UnsupervisedPretraining.save_hyperparameters"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline._get_encoder"], ["    ", "def", "__init__", "(", "\n", "self", ",", "\n", "in_channels", ",", "\n", "seq_len", ",", "\n", "num_layers", ",", "\n", "kernel_size", ",", "\n", "base_filters", ",", "\n", "latent_dim", ",", "\n", "dropout", ",", "\n", "domain_tradeoff", ",", "\n", "domain_disc_dim", ",", "\n", "num_disc_layers", ",", "\n", "lr", ",", "\n", "weight_decay", ",", "\n", "record_embeddings", "=", "False", ",", "\n", "encoder", "=", "\"cnn\"", ",", "\n", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "in_channels", "=", "in_channels", "\n", "self", ".", "seq_len", "=", "seq_len", "\n", "self", ".", "num_layers", "=", "num_layers", "\n", "self", ".", "kernel_size", "=", "kernel_size", "\n", "self", ".", "base_filters", "=", "base_filters", "\n", "self", ".", "latent_dim", "=", "latent_dim", "\n", "self", ".", "dropout", "=", "dropout", "\n", "self", ".", "domain_tradeoff", "=", "domain_tradeoff", "\n", "self", ".", "domain_disc_dim", "=", "domain_disc_dim", "\n", "self", ".", "num_disc_layers", "=", "num_disc_layers", "\n", "self", ".", "lr", "=", "lr", "\n", "self", ".", "weight_decay", "=", "weight_decay", "\n", "self", ".", "record_embeddings", "=", "record_embeddings", "\n", "self", ".", "encoder_type", "=", "encoder", "\n", "\n", "self", ".", "encoder", "=", "self", ".", "_get_encoder", "(", ")", "\n", "self", ".", "domain_disc", "=", "None", "\n", "\n", "self", ".", "criterion_regression", "=", "nn", ".", "MSELoss", "(", ")", "\n", "self", ".", "criterion_domain", "=", "nn", ".", "BCEWithLogitsLoss", "(", ")", "\n", "\n", "self", ".", "embedding_metric", "=", "metrics", ".", "EmbeddingViz", "(", "40000", ",", "self", ".", "latent_dim", ")", "\n", "self", ".", "regression_metric", "=", "metrics", ".", "SimpleMetric", "(", "40000", ")", "\n", "self", ".", "domain_metric", "=", "metrics", ".", "SimpleMetric", "(", "40000", ")", "\n", "\n", "self", ".", "save_hyperparameters", "(", ")", "\n", "self", ".", "hparams", "[", "\"mode\"", "]", "=", "\"metric\"", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining._get_encoder": [[58, 73], ["models.networks.Encoder", "ValueError"], "methods", ["None"], ["", "def", "_get_encoder", "(", "self", ")", ":", "\n", "        ", "if", "self", ".", "encoder_type", "==", "\"cnn\"", ":", "\n", "            ", "encoder", "=", "networks", ".", "Encoder", "(", "\n", "self", ".", "in_channels", ",", "\n", "self", ".", "base_filters", ",", "\n", "self", ".", "kernel_size", ",", "\n", "self", ".", "num_layers", ",", "\n", "self", ".", "latent_dim", ",", "\n", "self", ".", "seq_len", ",", "\n", "self", ".", "dropout", ",", "\n", "norm_outputs", "=", "True", ",", "\n", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "f\"Unknown encoder type {self.encoder_type}. Use 'cnn'.\"", ")", "\n", "", "return", "encoder", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining.configure_optimizers": [[74, 77], ["torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "pretraining.UnsupervisedPretraining.parameters"], "methods", ["None"], ["", "def", "configure_optimizers", "(", "self", ")", ":", "\n", "        ", "return", "torch", ".", "optim", ".", "Adam", "(", "\n", "self", ".", "parameters", "(", ")", ",", "lr", "=", "self", ".", "lr", ",", "weight_decay", "=", "self", ".", "weight_decay", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining.forward": [[79, 86], ["pretraining.UnsupervisedPretraining._get_anchor_query_embeddings", "pretraining.UnsupervisedPretraining._pairwise_distance"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining._get_anchor_query_embeddings", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining._pairwise_distance"], ["", "def", "forward", "(", "self", ",", "anchors", ",", "queries", ")", ":", "\n", "        ", "anchor_embeddings", ",", "query_embeddings", "=", "self", ".", "_get_anchor_query_embeddings", "(", "\n", "anchors", ",", "queries", "\n", ")", "\n", "pred_distances", "=", "self", ".", "_pairwise_distance", "(", "anchor_embeddings", ",", "query_embeddings", ")", "\n", "\n", "return", "pred_distances", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining.training_step": [[87, 95], ["pretraining.UnsupervisedPretraining._get_losses", "pretraining.UnsupervisedPretraining.log", "pretraining.UnsupervisedPretraining.log", "pretraining.UnsupervisedPretraining.log"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.autoencoder.AutoencoderPretraining._get_losses"], ["", "def", "training_step", "(", "self", ",", "batch", ",", "batch_idx", ")", ":", "\n", "        ", "regression_loss", ",", "domain_loss", "=", "self", ".", "_get_losses", "(", "batch", ")", "\n", "loss", "=", "regression_loss", "+", "self", ".", "domain_tradeoff", "*", "domain_loss", "\n", "self", ".", "log", "(", "\"train/loss\"", ",", "loss", ")", "\n", "self", ".", "log", "(", "\"train/regression_loss\"", ",", "regression_loss", ")", "\n", "self", ".", "log", "(", "\"train/domain_loss\"", ",", "domain_loss", ")", "\n", "\n", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining.on_validation_epoch_start": [[96, 98], ["pretraining.UnsupervisedPretraining._reset_all_metrics"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline._reset_all_metrics"], ["", "def", "on_validation_epoch_start", "(", "self", ")", ":", "\n", "        ", "self", ".", "_reset_all_metrics", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining._reset_all_metrics": [[99, 103], ["pretraining.UnsupervisedPretraining.embedding_metric.reset", "pretraining.UnsupervisedPretraining.regression_metric.reset", "pretraining.UnsupervisedPretraining.domain_metric.reset"], "methods", ["None"], ["", "def", "_reset_all_metrics", "(", "self", ")", ":", "\n", "        ", "self", ".", "embedding_metric", ".", "reset", "(", ")", "\n", "self", ".", "regression_metric", ".", "reset", "(", ")", "\n", "self", ".", "domain_metric", ".", "reset", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining.validation_step": [[104, 112], ["pretraining.UnsupervisedPretraining._get_losses", "pretraining.UnsupervisedPretraining.regression_metric.update", "pretraining.UnsupervisedPretraining.domain_metric.update", "pretraining.UnsupervisedPretraining._record_embeddings"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.autoencoder.AutoencoderPretraining._get_losses", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.autoencoder.AutoencoderPretraining._record_embeddings"], ["", "def", "validation_step", "(", "self", ",", "batch", ",", "batch_idx", ",", "dataloader_idx", ")", ":", "\n", "        ", "if", "dataloader_idx", "==", "0", ":", "\n", "            ", "regression_loss", ",", "domain_loss", "=", "self", ".", "_get_losses", "(", "batch", ")", "\n", "batch_size", "=", "batch", "[", "0", "]", ".", "shape", "[", "0", "]", "\n", "self", ".", "regression_metric", ".", "update", "(", "regression_loss", ",", "batch_size", ")", "\n", "self", ".", "domain_metric", ".", "update", "(", "domain_loss", ",", "batch_size", ")", "\n", "", "elif", "self", ".", "record_embeddings", ":", "\n", "            ", "self", ".", "_record_embeddings", "(", "batch", ",", "dataloader_idx", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining._record_embeddings": [[113, 120], ["pretraining.UnsupervisedPretraining.encoder", "torch.full_like", "torch.full_like", "torch.full_like", "torch.full_like", "pretraining.UnsupervisedPretraining.embedding_metric.update"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update"], ["", "", "def", "_record_embeddings", "(", "self", ",", "batch", ",", "dataloader_idx", ")", ":", "\n", "        ", "features", ",", "labels", "=", "batch", "\n", "embedding", "=", "self", ".", "encoder", "(", "features", ")", "\n", "domain_labels", "=", "torch", ".", "full_like", "(", "\n", "labels", ",", "fill_value", "=", "(", "2", "-", "dataloader_idx", ")", ",", "dtype", "=", "torch", ".", "int", "\n", ")", "\n", "self", ".", "embedding_metric", ".", "update", "(", "embedding", ",", "domain_labels", ",", "labels", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining.validation_epoch_end": [[121, 132], ["pretraining.UnsupervisedPretraining.regression_metric.compute", "pretraining.UnsupervisedPretraining.domain_metric.compute", "pretraining.UnsupervisedPretraining.log", "pretraining.UnsupervisedPretraining.log", "pretraining.UnsupervisedPretraining.log", "pretraining.UnsupervisedPretraining.embedding_metric.compute", "pretraining.UnsupervisedPretraining.logger.log_figure"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MLTBLogger.log_figure"], ["", "def", "validation_epoch_end", "(", "self", ",", "validation_step_outputs", ")", ":", "\n", "        ", "if", "self", ".", "record_embeddings", ":", "\n", "            ", "embedding_fig", "=", "self", ".", "embedding_metric", ".", "compute", "(", ")", "\n", "self", ".", "logger", ".", "log_figure", "(", "\"val/embeddings\"", ",", "embedding_fig", ",", "self", ".", "global_step", ")", "\n", "\n", "", "regression_loss", "=", "self", ".", "regression_metric", ".", "compute", "(", ")", "\n", "domain_loss", "=", "self", ".", "domain_metric", ".", "compute", "(", ")", "\n", "\n", "self", ".", "log", "(", "\"val/regression_loss\"", ",", "regression_loss", ")", "\n", "self", ".", "log", "(", "\"val/domain_loss\"", ",", "domain_loss", ")", "\n", "self", ".", "log", "(", "\"val/checkpoint_score\"", ",", "regression_loss", "-", "0.1", "*", "domain_loss", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining._get_losses": [[133, 148], ["pretraining.UnsupervisedPretraining._get_anchor_query_embeddings", "pretraining.UnsupervisedPretraining._pairwise_distance", "pretraining.UnsupervisedPretraining.criterion_regression", "pretraining.UnsupervisedPretraining.domain_disc", "pretraining.UnsupervisedPretraining.criterion_domain"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining._get_anchor_query_embeddings", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining._pairwise_distance"], ["", "def", "_get_losses", "(", "self", ",", "batch", ")", ":", "\n", "        ", "anchors", ",", "queries", ",", "true_distances", ",", "domain_labels", "=", "batch", "\n", "anchor_embeddings", ",", "query_embeddings", "=", "self", ".", "_get_anchor_query_embeddings", "(", "\n", "anchors", ",", "queries", "\n", ")", "\n", "pred_distances", "=", "self", ".", "_pairwise_distance", "(", "anchor_embeddings", ",", "query_embeddings", ")", "\n", "regression_loss", "=", "self", ".", "criterion_regression", "(", "pred_distances", ",", "true_distances", ")", "\n", "\n", "if", "self", ".", "domain_tradeoff", ">", "0", ":", "\n", "            ", "domain_pred", "=", "self", ".", "domain_disc", "(", "anchor_embeddings", ")", "\n", "domain_loss", "=", "self", ".", "criterion_domain", "(", "domain_pred", ",", "domain_labels", ")", "\n", "", "else", ":", "\n", "            ", "domain_loss", "=", "0", "\n", "\n", "", "return", "regression_loss", ",", "domain_loss", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining._pairwise_distance": [[149, 151], ["torch.pairwise_distance", "torch.pairwise_distance", "torch.pairwise_distance", "torch.pairwise_distance"], "methods", ["None"], ["", "def", "_pairwise_distance", "(", "self", ",", "anchor_embeddings", ",", "query_embeddings", ")", ":", "\n", "        ", "return", "torch", ".", "pairwise_distance", "(", "anchor_embeddings", ",", "query_embeddings", ",", "eps", "=", "1e-8", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining._get_anchor_query_embeddings": [[152, 159], ["torch.cat", "torch.cat", "torch.cat", "torch.cat", "pretraining.UnsupervisedPretraining.encoder", "torch.split", "torch.split", "torch.split", "torch.split"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.AllDataSplitter.split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.AllDataSplitter.split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.AllDataSplitter.split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.AllDataSplitter.split"], ["", "def", "_get_anchor_query_embeddings", "(", "self", ",", "anchors", ",", "queries", ")", ":", "\n", "        ", "batch_size", "=", "anchors", ".", "shape", "[", "0", "]", "\n", "combined", "=", "torch", ".", "cat", "(", "[", "anchors", ",", "queries", "]", ")", "\n", "embeddings", "=", "self", ".", "encoder", "(", "combined", ")", "\n", "anchor_embeddings", ",", "query_embeddings", "=", "torch", ".", "split", "(", "embeddings", ",", "batch_size", ")", "\n", "\n", "return", "anchor_embeddings", ",", "query_embeddings", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.mixins.DataHparamsMixin.add_data_hparams": [[5, 7], ["mixins.DataHparamsMixin.hparams.update"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update"], ["    ", "def", "add_data_hparams", "(", "self", ",", "data", ")", ":", "\n", "        ", "self", ".", "hparams", ".", "update", "(", "data", ".", "hparams", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.mixins.LoadEncoderMixin.load_encoder": [[10, 21], ["torch.load", "mixins.LoadEncoderMixin._extract_state_dict", "mixins.LoadEncoderMixin.encoder.load_state_dict", "mixins.LoadEncoderMixin._extract_state_dict", "mixins.LoadEncoderMixin.domain_disc.load_state_dict"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.mixins.LoadEncoderMixin._extract_state_dict", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.mixins.LoadEncoderMixin._extract_state_dict"], ["    ", "def", "load_encoder", "(", "self", ",", "checkpoint_path", ",", "load_disc", "=", "False", ")", ":", "\n", "        ", "checkpoint", "=", "torch", ".", "load", "(", "checkpoint_path", ",", "map_location", "=", "\"cpu\"", ")", "\n", "\n", "encoder_state", "=", "self", ".", "_extract_state_dict", "(", "checkpoint", ",", "model", "=", "\"encoder\"", ")", "\n", "self", ".", "encoder", ".", "load_state_dict", "(", "encoder_state", ")", "\n", "if", "load_disc", ":", "\n", "            ", "disc_state", "=", "self", ".", "_extract_state_dict", "(", "checkpoint", ",", "model", "=", "\"domain_disc\"", ")", "\n", "self", ".", "domain_disc", ".", "load_state_dict", "(", "disc_state", ")", "\n", "\n", "", "self", ".", "hparams", "[", "\"pretrained_checkpoint\"", "]", "=", "checkpoint_path", "\n", "self", ".", "encoder", ".", "norm_outputs", "=", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.mixins.LoadEncoderMixin._extract_state_dict": [[22, 30], ["n.replace", "checkpoint[].items", "n.startswith"], "methods", ["None"], ["", "def", "_extract_state_dict", "(", "self", ",", "checkpoint", ",", "model", ")", ":", "\n", "        ", "encoder_state", "=", "{", "\n", "n", ".", "replace", "(", "model", "+", "\".\"", ",", "\"\"", ")", ":", "weight", "\n", "for", "n", ",", "weight", "in", "checkpoint", "[", "\"state_dict\"", "]", ".", "items", "(", ")", "\n", "if", "n", ".", "startswith", "(", "model", ")", "\n", "}", "\n", "\n", "return", "encoder_state", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.mixins.LoadEncoderMixin.load_from_rbm": [[31, 36], ["rbm.hidden.bias.data.squeeze"], "methods", ["None"], ["", "def", "load_from_rbm", "(", "self", ",", "rbm", ")", ":", "\n", "        ", "first_conv", "=", "self", ".", "encoder", ".", "layers", "[", "0", "]", "\n", "first_bn", "=", "self", ".", "encoder", ".", "layers", "[", "1", "]", "\n", "first_conv", ".", "weight", ".", "data", "=", "rbm", ".", "interaction", ".", "module", ".", "weight", ".", "data", "\n", "first_bn", ".", "bias", ".", "data", "=", "rbm", ".", "hidden", ".", "bias", ".", "data", ".", "squeeze", "(", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.EmbeddingViz.__init__": [[10, 28], ["super().__init__", "metrics.EmbeddingViz.add_state", "metrics.EmbeddingViz.add_state", "metrics.EmbeddingViz.add_state", "metrics.EmbeddingViz.add_state", "matplotlib.get_cmap", "matplotlib.get_cmap", "matplotlib.get_cmap", "matplotlib.get_cmap", "torch.zeros", "torch.zeros", "torch.zeros", "torch.tensor"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__"], ["    ", "def", "__init__", "(", "self", ",", "num_elements", ",", "embedding_size", ",", "combined", "=", "True", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "num_elements", "=", "num_elements", "\n", "self", ".", "embedding_size", "=", "embedding_size", "\n", "self", ".", "combined", "=", "combined", "\n", "\n", "self", ".", "add_state", "(", "\n", "\"embeddings\"", ",", "\n", "default", "=", "torch", ".", "zeros", "(", "num_elements", ",", "embedding_size", ")", ",", "\n", "dist_reduce_fx", "=", "None", ",", "\n", ")", "\n", "self", ".", "add_state", "(", "\"labels\"", ",", "default", "=", "torch", ".", "zeros", "(", "num_elements", ")", ",", "dist_reduce_fx", "=", "None", ")", "\n", "self", ".", "add_state", "(", "\"ruls\"", ",", "default", "=", "torch", ".", "zeros", "(", "num_elements", ")", ",", "dist_reduce_fx", "=", "None", ")", "\n", "self", ".", "add_state", "(", "\"sample_counter\"", ",", "default", "=", "torch", ".", "tensor", "(", "0", ")", ",", "dist_reduce_fx", "=", "None", ")", "\n", "\n", "self", ".", "class_cm", "=", "plt", ".", "get_cmap", "(", "\"tab10\"", ")", "\n", "self", ".", "rul_cm", "=", "plt", ".", "get_cmap", "(", "\"viridis\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.EmbeddingViz.update": [[29, 44], ["None"], "methods", ["None"], ["", "def", "update", "(", "self", ",", "embeddings", ",", "labels", ",", "ruls", ")", ":", "\n", "        ", "\"\"\"\n        Add embedding, labels and RUL to the metric.\n\n        :param embeddings: hidden layer embedding of the data points\n        :param labels: domain labels with 0 being source and 1 being target\n        :param ruls: Remaining Useful Lifetime values of the data points\n        \"\"\"", "\n", "start", "=", "self", ".", "sample_counter", "\n", "end", "=", "self", ".", "sample_counter", "+", "embeddings", ".", "shape", "[", "0", "]", "\n", "self", ".", "sample_counter", "=", "end", "\n", "\n", "self", ".", "embeddings", "[", "start", ":", "end", "]", "=", "embeddings", "\n", "self", ".", "labels", "[", "start", ":", "end", "]", "=", "labels", "\n", "self", ".", "ruls", "[", "start", ":", "end", "]", "=", "ruls", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.EmbeddingViz.compute": [[45, 67], ["metrics.EmbeddingViz.embeddings[].detach().cpu().numpy", "metrics.EmbeddingViz.labels[].detach().cpu().int", "metrics.EmbeddingViz.ruls[].detach().cpu", "umap.UMAP().fit_transform", "metrics.EmbeddingViz._scatter_class", "metrics.EmbeddingViz._scatter_rul", "matplotlib.subplots", "matplotlib.subplots", "matplotlib.figure", "matplotlib.figure", "matplotlib.figure.gca", "matplotlib.figure", "matplotlib.figure", "matplotlib.figure.gca", "metrics.EmbeddingViz.embeddings[].detach().cpu", "metrics.EmbeddingViz.labels[].detach().cpu", "metrics.EmbeddingViz.ruls[].detach", "umap.UMAP", "metrics.EmbeddingViz.embeddings[].detach", "metrics.EmbeddingViz.labels[].detach"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.EmbeddingViz._scatter_class", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.EmbeddingViz._scatter_rul"], ["", "def", "compute", "(", "self", ")", ":", "\n", "        ", "\"\"\"Compute UMAP and plot points to 2d scatter plot.\"\"\"", "\n", "logged_embeddings", "=", "self", ".", "embeddings", "[", ":", "self", ".", "sample_counter", "]", ".", "detach", "(", ")", ".", "cpu", "(", ")", ".", "numpy", "(", ")", "\n", "logged_labels", "=", "self", ".", "labels", "[", ":", "self", ".", "sample_counter", "]", ".", "detach", "(", ")", ".", "cpu", "(", ")", ".", "int", "(", ")", "\n", "logged_ruls", "=", "self", ".", "ruls", "[", ":", "self", ".", "sample_counter", "]", ".", "detach", "(", ")", ".", "cpu", "(", ")", "\n", "viz_embeddings", "=", "umap", ".", "UMAP", "(", "random_state", "=", "42", ")", ".", "fit_transform", "(", "logged_embeddings", ")", "\n", "\n", "if", "self", ".", "combined", ":", "\n", "            ", "fig", ",", "(", "ax_class", ",", "ax_rul", ")", "=", "plt", ".", "subplots", "(", "\n", "1", ",", "2", ",", "sharex", "=", "\"all\"", ",", "sharey", "=", "\"all\"", ",", "figsize", "=", "(", "20", ",", "10", ")", ",", "dpi", "=", "300", "\n", ")", "\n", "", "else", ":", "\n", "            ", "fig_class", "=", "plt", ".", "figure", "(", "figsize", "=", "(", "10", ",", "10", ")", ",", "dpi", "=", "300", ")", "\n", "ax_class", "=", "fig_class", ".", "gca", "(", ")", "\n", "fig_rul", "=", "plt", ".", "figure", "(", "figsize", "=", "(", "10", ",", "10", ")", ",", "dpi", "=", "300", ")", "\n", "ax_rul", "=", "fig_rul", ".", "gca", "(", ")", "\n", "fig", "=", "[", "fig_class", ",", "fig_rul", "]", "\n", "\n", "", "self", ".", "_scatter_class", "(", "ax_class", ",", "viz_embeddings", ",", "logged_labels", ")", "\n", "self", ".", "_scatter_rul", "(", "ax_rul", ",", "viz_embeddings", ",", "logged_ruls", ")", "\n", "\n", "return", "fig", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.EmbeddingViz._scatter_class": [[68, 80], ["ax.scatter", "ax.legend"], "methods", ["None"], ["", "def", "_scatter_class", "(", "self", ",", "ax", ",", "embeddings", ",", "labels", ")", ":", "\n", "        ", "class_colors", "=", "[", "self", ".", "class_cm", ".", "colors", "[", "c", "]", "for", "c", "in", "labels", "]", "\n", "ax", ".", "scatter", "(", "\n", "embeddings", "[", ":", ",", "0", "]", ",", "\n", "embeddings", "[", ":", ",", "1", "]", ",", "\n", "c", "=", "class_colors", ",", "\n", "alpha", "=", "0.4", ",", "\n", "edgecolors", "=", "\"none\"", ",", "\n", "s", "=", "[", "4", "]", ",", "\n", "rasterized", "=", "True", ",", "\n", ")", "\n", "ax", ".", "legend", "(", "[", "\"Source\"", ",", "\"Target\"", "]", ",", "loc", "=", "\"lower left\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.EmbeddingViz._scatter_rul": [[81, 96], ["ax.scatter", "matplotlib.cm.ScalarMappable", "matplotlib.cm.ScalarMappable", "matplotlib.cm.ScalarMappable.set_array", "matplotlib.colorbar", "matplotlib.colorbar", "matplotlib.Normalize", "matplotlib.Normalize", "ruls.min", "ruls.max"], "methods", ["None"], ["", "def", "_scatter_rul", "(", "self", ",", "ax", ",", "embeddings", ",", "ruls", ")", ":", "\n", "        ", "ax", ".", "scatter", "(", "\n", "embeddings", "[", ":", ",", "0", "]", ",", "\n", "embeddings", "[", ":", ",", "1", "]", ",", "\n", "c", "=", "ruls", ",", "\n", "alpha", "=", "0.4", ",", "\n", "edgecolors", "=", "\"none\"", ",", "\n", "s", "=", "[", "4", "]", ",", "\n", "rasterized", "=", "True", ",", "\n", ")", "\n", "color_bar", "=", "plt", ".", "cm", ".", "ScalarMappable", "(", "\n", "mplcolors", ".", "Normalize", "(", "ruls", ".", "min", "(", ")", ",", "ruls", ".", "max", "(", ")", ")", ",", "self", ".", "rul_cm", "\n", ")", "\n", "color_bar", ".", "set_array", "(", "ruls", ")", "\n", "plt", ".", "colorbar", "(", "color_bar", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.RMSELoss.__init__": [[99, 107], ["super().__init__", "torch.nn.MSELoss", "metrics.RMSELoss.add_state", "metrics.RMSELoss.add_state", "metrics.RMSELoss.add_state", "torch.zeros", "torch.zeros", "torch.tensor"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__"], ["    ", "def", "__init__", "(", "self", ",", "num_elements", ":", "int", "=", "1000", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "mse", "=", "nn", ".", "MSELoss", "(", ")", "\n", "\n", "self", ".", "add_state", "(", "\"losses\"", ",", "default", "=", "torch", ".", "zeros", "(", "num_elements", ")", ",", "dist_reduce_fx", "=", "None", ")", "\n", "self", ".", "add_state", "(", "\"sizes\"", ",", "default", "=", "torch", ".", "zeros", "(", "num_elements", ")", ",", "dist_reduce_fx", "=", "None", ")", "\n", "self", ".", "add_state", "(", "\"sample_counter\"", ",", "default", "=", "torch", ".", "tensor", "(", "0", ")", ",", "dist_reduce_fx", "=", "None", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.RMSELoss.update": [[108, 115], ["torch.nn.functional.mse_loss"], "methods", ["None"], ["", "def", "update", "(", "self", ",", "inputs", ":", "torch", ".", "Tensor", ",", "targets", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "summed_square", "=", "nn", ".", "functional", ".", "mse_loss", "(", "inputs", ",", "targets", ",", "reduction", "=", "\"sum\"", ")", "\n", "batch_size", "=", "inputs", ".", "shape", "[", "0", "]", "\n", "\n", "self", ".", "losses", "[", "self", ".", "sample_counter", "]", "=", "summed_square", "\n", "self", ".", "sizes", "[", "self", ".", "sample_counter", "]", "=", "batch_size", "\n", "self", ".", "sample_counter", "+=", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.RMSELoss.compute": [[116, 124], ["torch.sqrt", "RuntimeError", "summed_squares.sum", "batch_sizes.sum"], "methods", ["None"], ["", "def", "compute", "(", "self", ")", "->", "torch", ".", "Tensor", ":", "\n", "        ", "if", "self", ".", "sample_counter", "==", "0", ":", "\n", "            ", "raise", "RuntimeError", "(", "\"RMSE metric was not used. Computation impossible.\"", ")", "\n", "", "summed_squares", "=", "self", ".", "losses", "[", ":", "self", ".", "sample_counter", "]", "\n", "batch_sizes", "=", "self", ".", "sizes", "[", ":", "self", ".", "sample_counter", "]", "\n", "rmse", "=", "torch", ".", "sqrt", "(", "summed_squares", ".", "sum", "(", ")", "/", "batch_sizes", ".", "sum", "(", ")", ")", "\n", "\n", "return", "rmse", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.RMSELoss.forward": [[125, 127], ["torch.sqrt", "metrics.RMSELoss.mse"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "inputs", ",", "targets", ")", ":", "\n", "        ", "return", "torch", ".", "sqrt", "(", "self", ".", "mse", "(", "inputs", ",", "targets", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.__init__": [[130, 140], ["super().__init__", "metrics.SimpleMetric.add_state", "metrics.SimpleMetric.add_state", "metrics.SimpleMetric.add_state", "ValueError", "torch.zeros", "torch.zeros", "torch.tensor"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__"], ["    ", "def", "__init__", "(", "self", ",", "num_elements", ":", "int", "=", "1000", ",", "reduction", "=", "\"mean\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "if", "reduction", "not", "in", "[", "\"sum\"", ",", "\"mean\"", "]", ":", "\n", "            ", "raise", "ValueError", "(", "f\"Unsupported reduction {reduction}\"", ")", "\n", "", "self", ".", "reduction", "=", "reduction", "\n", "\n", "self", ".", "add_state", "(", "\"losses\"", ",", "default", "=", "torch", ".", "zeros", "(", "num_elements", ")", ",", "dist_reduce_fx", "=", "None", ")", "\n", "self", ".", "add_state", "(", "\"sizes\"", ",", "default", "=", "torch", ".", "zeros", "(", "num_elements", ")", ",", "dist_reduce_fx", "=", "None", ")", "\n", "self", ".", "add_state", "(", "\"sample_counter\"", ",", "default", "=", "torch", ".", "tensor", "(", "0", ")", ",", "dist_reduce_fx", "=", "None", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update": [[141, 145], ["None"], "methods", ["None"], ["", "def", "update", "(", "self", ",", "loss", ":", "torch", ".", "Tensor", ",", "batch_size", ":", "int", ")", ":", "\n", "        ", "self", ".", "losses", "[", "self", ".", "sample_counter", "]", "=", "loss", "\n", "self", ".", "sizes", "[", "self", ".", "sample_counter", "]", "=", "batch_size", "\n", "self", ".", "sample_counter", "+=", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute": [[146, 155], ["RuntimeError", "metrics.SimpleMetric._weighted_mean", "metrics.SimpleMetric._sum"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric._weighted_mean", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric._sum"], ["", "def", "compute", "(", "self", ")", "->", "torch", ".", "Tensor", ":", "\n", "        ", "if", "self", ".", "sample_counter", "==", "0", ":", "\n", "            ", "raise", "RuntimeError", "(", "\"RMSE metric was not used. Computation impossible.\"", ")", "\n", "", "if", "self", ".", "reduction", "==", "\"mean\"", ":", "\n", "            ", "loss", "=", "self", ".", "_weighted_mean", "(", ")", "\n", "", "else", ":", "\n", "            ", "loss", "=", "self", ".", "_sum", "(", ")", "\n", "\n", "", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric._weighted_mean": [[156, 163], ["torch.sum", "weights.sum"], "methods", ["None"], ["", "def", "_weighted_mean", "(", "self", ")", ":", "\n", "        ", "weights", "=", "self", ".", "sizes", "[", ":", "self", ".", "sample_counter", "]", "\n", "weights", "=", "weights", "/", "weights", ".", "sum", "(", ")", "\n", "loss", "=", "self", ".", "losses", "[", ":", "self", ".", "sample_counter", "]", "\n", "loss", "=", "torch", ".", "sum", "(", "loss", "*", "weights", ")", "\n", "\n", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric._sum": [[164, 169], ["torch.sum"], "methods", ["None"], ["", "def", "_sum", "(", "self", ")", ":", "\n", "        ", "loss", "=", "self", ".", "losses", "[", ":", "self", ".", "sample_counter", "]", "\n", "loss", "=", "torch", ".", "sum", "(", "loss", ")", "\n", "\n", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.RULScore.__init__": [[172, 175], ["None"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "pos_factor", "=", "10", ",", "neg_factor", "=", "-", "13", ")", ":", "\n", "        ", "self", ".", "pos_factor", "=", "pos_factor", "\n", "self", ".", "neg_factor", "=", "neg_factor", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.RULScore.__call__": [[176, 184], ["enumerate", "dist.sum", "torch.exp"], "methods", ["None"], ["", "def", "__call__", "(", "self", ",", "inputs", ",", "targets", ")", ":", "\n", "        ", "dist", "=", "inputs", "-", "targets", "\n", "for", "i", ",", "d", "in", "enumerate", "(", "dist", ")", ":", "\n", "            ", "dist", "[", "i", "]", "=", "(", "d", "/", "self", ".", "neg_factor", ")", "if", "d", "<", "0", "else", "(", "d", "/", "self", ".", "pos_factor", ")", "\n", "", "dist", "=", "torch", ".", "exp", "(", "dist", ")", "-", "1", "\n", "score", "=", "dist", ".", "sum", "(", ")", "\n", "\n", "return", "score", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MLTBLogger.__init__": [[68, 94], ["os.path.join", "pytorch_lightning.MLTBLogger._dirs_from_dict", "pytorch_lightning.TensorBoardLogger", "pytorch_lightning.MLFlowLogger", "pytorch_lightning.LoggerCollection.__init__", "os.path.normpath", "os.path.join", "pytorch_lightning.MLTBLogger._build_tags"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MLTBLogger._dirs_from_dict", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MLTBLogger._build_tags"], ["def", "__init__", "(", "self", ",", "log_dir", ",", "experiment_name", ",", "tag", "=", "None", ",", "tensorboard_struct", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        This logger combines a MlFlow and Tensorboard logger.\n        It creates a directory (mlruns/tensorboard) for each logger in log_dir.\n\n        If a tensorboard_struct dict is provided, it is used to create additional\n        sub-directories for tensorboard to get a better overview over the runs.\n\n        The difference to a simple LoggerCollection is that the save dir points\n        to the artifact path of the MlFlow run. This way the model is logged as\n        a MlFlow artifact.\n\n        :param log_dir: directory to put the mlruns and tensorboard directories\n        :param experiment_name: name for the experiment\n        :param tensorboard_struct: dictionary containing information to refine the tensorboard directory structure\n        \"\"\"", "\n", "tensorboard_path", "=", "os", ".", "path", ".", "join", "(", "log_dir", ",", "\"tensorboard\"", ",", "experiment_name", ")", "\n", "sub_dirs", "=", "self", ".", "_dirs_from_dict", "(", "tensorboard_struct", ")", "\n", "self", ".", "_tf_logger", "=", "loggers", ".", "TensorBoardLogger", "(", "tensorboard_path", ",", "name", "=", "sub_dirs", ")", "\n", "\n", "mlflow_path", "=", "\"file:\"", "+", "os", ".", "path", ".", "normpath", "(", "os", ".", "path", ".", "join", "(", "log_dir", ",", "\"mlruns\"", ")", ")", "\n", "self", ".", "_mlflow_logger", "=", "loggers", ".", "MLFlowLogger", "(", "\n", "experiment_name", ",", "tracking_uri", "=", "mlflow_path", ",", "tags", "=", "self", ".", "_build_tags", "(", "tag", ")", "\n", ")", "\n", "\n", "super", "(", ")", ".", "__init__", "(", "[", "self", ".", "_tf_logger", ",", "self", ".", "_mlflow_logger", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MLTBLogger._dirs_from_dict": [[95, 111], ["tensorboard_struct.items", "os.path.join", "isinstance", "os.path.join.append", "isinstance", "os.path.join.append", "os.path.join.append"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "_dirs_from_dict", "(", "tensorboard_struct", ")", ":", "\n", "        ", "if", "tensorboard_struct", "is", "not", "None", ":", "\n", "            ", "dirs", "=", "[", "]", "\n", "for", "key", ",", "value", "in", "tensorboard_struct", ".", "items", "(", ")", ":", "\n", "                ", "if", "isinstance", "(", "value", ",", "float", ")", "and", "value", ">=", "0.1", ":", "\n", "                    ", "dirs", ".", "append", "(", "f\"{value:.1f}{key}\"", ")", "\n", "", "elif", "isinstance", "(", "value", ",", "str", ")", ":", "\n", "                    ", "dirs", ".", "append", "(", "f\"{key}-{value}\"", ")", "\n", "", "else", ":", "\n", "                    ", "dirs", ".", "append", "(", "f\"{value}{key}\"", ")", "\n", "", "", "dirs", "=", "os", ".", "path", ".", "join", "(", "*", "dirs", ")", "\n", "", "else", ":", "\n", "            ", "dirs", "=", "\"\"", "\n", "\n", "", "return", "dirs", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MLTBLogger._build_tags": [[112, 119], ["None"], "methods", ["None"], ["", "def", "_build_tags", "(", "self", ",", "tag", ")", ":", "\n", "        ", "if", "tag", "is", "not", "None", ":", "\n", "            ", "tags", "=", "{", "\"version\"", ":", "tag", "}", "\n", "", "else", ":", "\n", "            ", "tags", "=", "None", "\n", "\n", "", "return", "tags", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MLTBLogger.name": [[120, 123], ["None"], "methods", ["None"], ["", "@", "property", "\n", "def", "name", "(", "self", ")", "->", "str", ":", "\n", "        ", "return", "self", ".", "_mlflow_logger", ".", "name", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MLTBLogger.version": [[124, 127], ["os.path.join"], "methods", ["None"], ["", "@", "property", "\n", "def", "version", "(", "self", ")", "->", "str", ":", "\n", "        ", "return", "os", ".", "path", ".", "join", "(", "self", ".", "_mlflow_logger", ".", "version", ",", "\"artifacts\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MLTBLogger.save_dir": [[128, 131], ["None"], "methods", ["None"], ["", "@", "property", "\n", "def", "save_dir", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "_mlflow_logger", ".", "save_dir", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MLTBLogger.checkpoint_path": [[132, 135], ["os.path.join"], "methods", ["None"], ["", "@", "property", "\n", "def", "checkpoint_path", "(", "self", ")", ":", "\n", "        ", "return", "os", ".", "path", ".", "join", "(", "self", ".", "save_dir", ",", "self", ".", "name", ",", "self", ".", "version", ",", "\"checkpoints\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MLTBLogger.tf_experiment": [[136, 139], ["None"], "methods", ["None"], ["", "@", "property", "\n", "def", "tf_experiment", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "_tf_logger", ".", "experiment", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MLTBLogger.mlflow_experiment": [[140, 143], ["None"], "methods", ["None"], ["", "@", "property", "\n", "def", "mlflow_experiment", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "_mlflow_logger", ".", "experiment", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MLTBLogger.run_id": [[144, 147], ["None"], "methods", ["None"], ["", "@", "property", "\n", "def", "run_id", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "_mlflow_logger", ".", "run_id", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MLTBLogger.log_figure": [[148, 156], ["os.path.split", "tempfile.mkstemp", "figure.savefig", "pytorch_lightning.MLTBLogger.mlflow_experiment.log_artifact", "pytorch_lightning.MLTBLogger.tf_experiment.add_figure"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.AllDataSplitter.split"], ["", "def", "log_figure", "(", "self", ",", "tag", ",", "figure", ",", "step", ")", ":", "\n", "        ", "tag_tail", ",", "tag_head", "=", "os", ".", "path", ".", "split", "(", "tag", ")", "\n", "_", ",", "tmp_file", "=", "tempfile", ".", "mkstemp", "(", "\".pdf\"", ",", "f\"{tag_head}_{step:05}_\"", ")", "\n", "figure", ".", "savefig", "(", "tmp_file", ")", "\n", "self", ".", "mlflow_experiment", ".", "log_artifact", "(", "\n", "self", ".", "_mlflow_logger", ".", "run_id", ",", "tmp_file", ",", "tag_tail", "\n", ")", "\n", "self", ".", "tf_experiment", ".", "add_figure", "(", "tag", ",", "figure", ",", "step", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MinEpochModelCheckpoint.__init__": [[161, 187], ["pytorch_lightning.callbacks.ModelCheckpoint.__init__"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__"], ["def", "__init__", "(", "\n", "self", ",", "\n", "filepath", ":", "Optional", "[", "str", "]", "=", "None", ",", "\n", "monitor", ":", "Optional", "[", "str", "]", "=", "None", ",", "\n", "verbose", ":", "bool", "=", "False", ",", "\n", "save_last", ":", "Optional", "[", "bool", "]", "=", "None", ",", "\n", "save_top_k", ":", "Optional", "[", "int", "]", "=", "None", ",", "\n", "save_weights_only", ":", "bool", "=", "False", ",", "\n", "mode", ":", "str", "=", "\"auto\"", ",", "\n", "period", ":", "int", "=", "1", ",", "\n", "prefix", ":", "str", "=", "\"\"", ",", "\n", "min_epochs_before_saving", ":", "int", "=", "0", ",", "\n", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "\n", "filepath", ",", "\n", "monitor", ",", "\n", "verbose", ",", "\n", "save_last", ",", "\n", "save_top_k", ",", "\n", "save_weights_only", ",", "\n", "mode", ",", "\n", "period", ",", "\n", "prefix", ",", "\n", ")", "\n", "\n", "self", ".", "min_epochs_before_saving", "=", "min_epochs_before_saving", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MinEpochModelCheckpoint.save_checkpoint": [[188, 191], ["super().save_checkpoint"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MinEpochModelCheckpoint.save_checkpoint"], ["", "def", "save_checkpoint", "(", "self", ",", "trainer", ",", "pl_module", ")", ":", "\n", "        ", "if", "trainer", ".", "current_epoch", ">", "self", ".", "min_epochs_before_saving", ":", "\n", "            ", "super", "(", ")", ".", "save_checkpoint", "(", "trainer", ",", "pl_module", ")", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.baseline_experiment_name": [[11, 14], ["None"], "function", ["None"], ["def", "baseline_experiment_name", "(", "source", ")", ":", "\n", "    ", "assert", "source", "in", "ExperimentNaming", ",", "f\"Unknown FD number {source}.\"", "\n", "return", "f\"cmapss_{ExperimentNaming[source]}_baseline\"", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.transfer_experiment_name": [[16, 20], ["None"], "function", ["None"], ["", "def", "transfer_experiment_name", "(", "source", ",", "target", ")", ":", "\n", "    ", "assert", "source", "in", "ExperimentNaming", ",", "f\"Unknown source FD number {source}.\"", "\n", "assert", "target", "in", "ExperimentNaming", ",", "f\"Unknown target FD number {target}.\"", "\n", "return", "f\"{ExperimentNaming[source]}2{ExperimentNaming[target]}\"", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.pretraining_experiment_name": [[22, 27], ["loggers.pretraining_baseline_experiment_name", "loggers.pretraining_adaption_experiment_name"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.pretraining_baseline_experiment_name", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.pretraining_adaption_experiment_name"], ["", "def", "pretraining_experiment_name", "(", "source", ",", "target", ")", ":", "\n", "    ", "if", "target", "is", "None", ":", "\n", "        ", "return", "pretraining_baseline_experiment_name", "(", "source", ")", "\n", "", "else", ":", "\n", "        ", "return", "pretraining_adaption_experiment_name", "(", "source", ",", "target", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.pretraining_baseline_experiment_name": [[29, 33], ["None"], "function", ["None"], ["", "", "def", "pretraining_baseline_experiment_name", "(", "dataset", ")", ":", "\n", "    ", "assert", "dataset", "in", "ExperimentNaming", ",", "f\"Unknown dataset FD number {dataset}.\"", "\n", "\n", "return", "f\"pretraining_{ExperimentNaming[dataset]}\"", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.pretraining_adaption_experiment_name": [[35, 40], ["None"], "function", ["None"], ["", "def", "pretraining_adaption_experiment_name", "(", "source", ",", "target", ")", ":", "\n", "    ", "assert", "source", "in", "ExperimentNaming", ",", "f\"Unknown source FD number {source}.\"", "\n", "assert", "target", "in", "ExperimentNaming", ",", "f\"Unknown target FD number {target}.\"", "\n", "\n", "return", "f\"pretraining_{ExperimentNaming[source]}&{ExperimentNaming[target]}\"", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.transfer_hyperopt_name": [[42, 48], ["None"], "function", ["None"], ["", "def", "transfer_hyperopt_name", "(", "source", ",", "target", ",", "percent_broken", ")", ":", "\n", "    ", "assert", "source", "in", "ExperimentNaming", ",", "f\"Unknown source FD number {source}.\"", "\n", "assert", "target", "in", "ExperimentNaming", ",", "f\"Unknown target FD number {target}.\"", "\n", "assert", "0", "<=", "percent_broken", "<=", "1", ",", "f\"Invalid percent broken {percent_broken}.\"", "\n", "\n", "return", "f\"hyperopt_{ExperimentNaming[source]}&{ExperimentNaming[target]}@{percent_broken:.2f}\"", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.pretraining_hyperopt_name": [[50, 56], ["None"], "function", ["None"], ["", "def", "pretraining_hyperopt_name", "(", "source", ",", "target", ",", "percent_broken", ")", ":", "\n", "    ", "assert", "source", "in", "ExperimentNaming", ",", "f\"Unknown source FD number {source}.\"", "\n", "assert", "target", "in", "ExperimentNaming", ",", "f\"Unknown target FD number {target}.\"", "\n", "assert", "0", "<=", "percent_broken", "<=", "1", ",", "f\"Invalid percent broken {percent_broken}.\"", "\n", "\n", "return", "f\"pre_hyperopt_{ExperimentNaming[source]}&{ExperimentNaming[target]}@{percent_broken:.2f}\"", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.semi_supervised_hyperopt_name": [[58, 63], ["None"], "function", ["None"], ["", "def", "semi_supervised_hyperopt_name", "(", "source", ",", "percent_broken", ")", ":", "\n", "    ", "assert", "source", "in", "ExperimentNaming", ",", "f\"Unknown source FD number {source}.\"", "\n", "assert", "0", "<=", "percent_broken", "<=", "1", ",", "f\"Invalid percent broken {percent_broken}.\"", "\n", "\n", "return", "f\"pre_hyperopt_{ExperimentNaming[source]}@{percent_broken:.2f}\"", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.autoencoder.AutoencoderPretraining.__init__": [[11, 74], ["super().__init__", "models.networks.Encoder", "models.networks.Decoder", "torch.MSELoss", "torch.MSELoss", "torch.BCEWithLogitsLoss", "torch.BCEWithLogitsLoss", "lightning.metrics.EmbeddingViz", "lightning.metrics.SimpleMetric", "lightning.metrics.SimpleMetric", "autoencoder.AutoencoderPretraining.save_hyperparameters"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__"], ["    ", "def", "__init__", "(", "\n", "self", ",", "\n", "in_channels", ",", "\n", "seq_len", ",", "\n", "num_layers", ",", "\n", "kernel_size", ",", "\n", "base_filters", ",", "\n", "latent_dim", ",", "\n", "dropout", ",", "\n", "domain_tradeoff", ",", "\n", "domain_disc_dim", ",", "\n", "num_disc_layers", ",", "\n", "lr", ",", "\n", "weight_decay", ",", "\n", "record_embeddings", "=", "False", ",", "\n", "encoder", "=", "\"cnn\"", ",", "\n", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "in_channels", "=", "in_channels", "\n", "self", ".", "seq_len", "=", "seq_len", "\n", "self", ".", "num_layers", "=", "num_layers", "\n", "self", ".", "kernel_size", "=", "kernel_size", "\n", "self", ".", "base_filters", "=", "base_filters", "\n", "self", ".", "latent_dim", "=", "latent_dim", "\n", "self", ".", "dropout", "=", "dropout", "\n", "self", ".", "domain_tradeoff", "=", "domain_tradeoff", "\n", "self", ".", "domain_disc_dim", "=", "domain_disc_dim", "\n", "self", ".", "num_disc_layers", "=", "num_disc_layers", "\n", "self", ".", "lr", "=", "lr", "\n", "self", ".", "weight_decay", "=", "weight_decay", "\n", "self", ".", "record_embeddings", "=", "record_embeddings", "\n", "\n", "self", ".", "encoder", "=", "networks", ".", "Encoder", "(", "\n", "self", ".", "in_channels", ",", "\n", "self", ".", "base_filters", ",", "\n", "self", ".", "kernel_size", ",", "\n", "self", ".", "num_layers", ",", "\n", "self", ".", "latent_dim", ",", "\n", "self", ".", "seq_len", ",", "\n", "self", ".", "dropout", ",", "\n", "norm_outputs", "=", "True", ",", "\n", ")", "\n", "self", ".", "decoder", "=", "networks", ".", "Decoder", "(", "\n", "self", ".", "in_channels", ",", "\n", "self", ".", "base_filters", ",", "\n", "self", ".", "kernel_size", ",", "\n", "self", ".", "num_layers", ",", "\n", "self", ".", "latent_dim", ",", "\n", "self", ".", "seq_len", ",", "\n", "self", ".", "dropout", ",", "\n", ")", "\n", "self", ".", "domain_disc", "=", "None", "\n", "\n", "self", ".", "criterion_regression", "=", "nn", ".", "MSELoss", "(", ")", "\n", "self", ".", "criterion_domain", "=", "nn", ".", "BCEWithLogitsLoss", "(", ")", "\n", "\n", "self", ".", "embedding_metric", "=", "metrics", ".", "EmbeddingViz", "(", "40000", ",", "self", ".", "latent_dim", ")", "\n", "self", ".", "regression_metric", "=", "metrics", ".", "SimpleMetric", "(", "40000", ")", "\n", "self", ".", "domain_metric", "=", "metrics", ".", "SimpleMetric", "(", "40000", ")", "\n", "\n", "self", ".", "save_hyperparameters", "(", ")", "\n", "self", ".", "hparams", "[", "\"mode\"", "]", "=", "\"autoencoder\"", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.autoencoder.AutoencoderPretraining.configure_optimizers": [[75, 78], ["torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "autoencoder.AutoencoderPretraining.parameters"], "methods", ["None"], ["", "def", "configure_optimizers", "(", "self", ")", ":", "\n", "        ", "return", "torch", ".", "optim", ".", "Adam", "(", "\n", "self", ".", "parameters", "(", ")", ",", "lr", "=", "self", ".", "lr", ",", "weight_decay", "=", "self", ".", "weight_decay", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.autoencoder.AutoencoderPretraining.forward": [[80, 85], ["autoencoder.AutoencoderPretraining.encoder", "autoencoder.AutoencoderPretraining.decoder"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "latent_code", "=", "self", ".", "encoder", "(", "inputs", ")", "\n", "outputs", "=", "self", ".", "decoder", "(", "latent_code", ")", "\n", "\n", "return", "outputs", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.autoencoder.AutoencoderPretraining.training_step": [[86, 94], ["autoencoder.AutoencoderPretraining._get_losses", "autoencoder.AutoencoderPretraining.log", "autoencoder.AutoencoderPretraining.log", "autoencoder.AutoencoderPretraining.log"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.autoencoder.AutoencoderPretraining._get_losses"], ["", "def", "training_step", "(", "self", ",", "batch", ",", "batch_idx", ")", ":", "\n", "        ", "regression_loss", ",", "domain_loss", "=", "self", ".", "_get_losses", "(", "batch", ")", "\n", "loss", "=", "regression_loss", "+", "self", ".", "domain_tradeoff", "*", "domain_loss", "\n", "self", ".", "log", "(", "\"train/loss\"", ",", "loss", ")", "\n", "self", ".", "log", "(", "\"train/regression_loss\"", ",", "regression_loss", ")", "\n", "self", ".", "log", "(", "\"train/domain_loss\"", ",", "domain_loss", ")", "\n", "\n", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.autoencoder.AutoencoderPretraining.on_validation_epoch_start": [[95, 97], ["autoencoder.AutoencoderPretraining._reset_all_metrics"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline._reset_all_metrics"], ["", "def", "on_validation_epoch_start", "(", "self", ")", ":", "\n", "        ", "self", ".", "_reset_all_metrics", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.autoencoder.AutoencoderPretraining._reset_all_metrics": [[98, 102], ["autoencoder.AutoencoderPretraining.embedding_metric.reset", "autoencoder.AutoencoderPretraining.regression_metric.reset", "autoencoder.AutoencoderPretraining.domain_metric.reset"], "methods", ["None"], ["", "def", "_reset_all_metrics", "(", "self", ")", ":", "\n", "        ", "self", ".", "embedding_metric", ".", "reset", "(", ")", "\n", "self", ".", "regression_metric", ".", "reset", "(", ")", "\n", "self", ".", "domain_metric", ".", "reset", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.autoencoder.AutoencoderPretraining.validation_step": [[103, 111], ["autoencoder.AutoencoderPretraining._get_losses", "autoencoder.AutoencoderPretraining.regression_metric.update", "autoencoder.AutoencoderPretraining.domain_metric.update", "autoencoder.AutoencoderPretraining._record_embeddings"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.autoencoder.AutoencoderPretraining._get_losses", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.autoencoder.AutoencoderPretraining._record_embeddings"], ["", "def", "validation_step", "(", "self", ",", "batch", ",", "batch_idx", ",", "dataloader_idx", ")", ":", "\n", "        ", "if", "dataloader_idx", "==", "0", ":", "\n", "            ", "regression_loss", ",", "domain_loss", "=", "self", ".", "_get_losses", "(", "batch", ")", "\n", "batch_size", "=", "batch", "[", "0", "]", ".", "shape", "[", "0", "]", "\n", "self", ".", "regression_metric", ".", "update", "(", "regression_loss", ",", "batch_size", ")", "\n", "self", ".", "domain_metric", ".", "update", "(", "domain_loss", ",", "batch_size", ")", "\n", "", "elif", "self", ".", "record_embeddings", ":", "\n", "            ", "self", ".", "_record_embeddings", "(", "batch", ",", "dataloader_idx", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.autoencoder.AutoencoderPretraining._record_embeddings": [[112, 119], ["autoencoder.AutoencoderPretraining.encoder", "torch.full_like", "torch.full_like", "torch.full_like", "torch.full_like", "autoencoder.AutoencoderPretraining.embedding_metric.update"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update"], ["", "", "def", "_record_embeddings", "(", "self", ",", "batch", ",", "dataloader_idx", ")", ":", "\n", "        ", "features", ",", "labels", "=", "batch", "\n", "embedding", "=", "self", ".", "encoder", "(", "features", ")", "\n", "domain_labels", "=", "torch", ".", "full_like", "(", "\n", "labels", ",", "fill_value", "=", "(", "2", "-", "dataloader_idx", ")", ",", "dtype", "=", "torch", ".", "int", "\n", ")", "\n", "self", ".", "embedding_metric", ".", "update", "(", "embedding", ",", "domain_labels", ",", "labels", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.autoencoder.AutoencoderPretraining.validation_epoch_end": [[120, 131], ["autoencoder.AutoencoderPretraining.regression_metric.compute", "autoencoder.AutoencoderPretraining.domain_metric.compute", "autoencoder.AutoencoderPretraining.log", "autoencoder.AutoencoderPretraining.log", "autoencoder.AutoencoderPretraining.log", "autoencoder.AutoencoderPretraining.embedding_metric.compute", "autoencoder.AutoencoderPretraining.logger.log_figure"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MLTBLogger.log_figure"], ["", "def", "validation_epoch_end", "(", "self", ",", "validation_step_outputs", ")", ":", "\n", "        ", "if", "self", ".", "record_embeddings", ":", "\n", "            ", "embedding_fig", "=", "self", ".", "embedding_metric", ".", "compute", "(", ")", "\n", "self", ".", "logger", ".", "log_figure", "(", "\"val/embeddings\"", ",", "embedding_fig", ",", "self", ".", "global_step", ")", "\n", "\n", "", "regression_loss", "=", "self", ".", "regression_metric", ".", "compute", "(", ")", "\n", "domain_loss", "=", "self", ".", "domain_metric", ".", "compute", "(", ")", "\n", "\n", "self", ".", "log", "(", "\"val/regression_loss\"", ",", "regression_loss", ")", "\n", "self", ".", "log", "(", "\"val/domain_loss\"", ",", "domain_loss", ")", "\n", "self", ".", "log", "(", "\"val/checkpoint_score\"", ",", "regression_loss", "-", "0.1", "*", "domain_loss", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.autoencoder.AutoencoderPretraining._get_losses": [[132, 147], ["torch.cat", "torch.cat", "torch.cat", "torch.cat", "autoencoder.AutoencoderPretraining.encoder", "autoencoder.AutoencoderPretraining.decoder", "autoencoder.AutoencoderPretraining.criterion_regression", "autoencoder.AutoencoderPretraining.domain_disc", "autoencoder.AutoencoderPretraining.criterion_domain"], "methods", ["None"], ["", "def", "_get_losses", "(", "self", ",", "batch", ")", ":", "\n", "        ", "anchors", ",", "queries", ",", "true_distances", ",", "domain_labels", "=", "batch", "\n", "combined", "=", "torch", ".", "cat", "(", "[", "anchors", ",", "queries", "]", ")", "\n", "embeddings", "=", "self", ".", "encoder", "(", "combined", ")", "\n", "outputs", "=", "self", ".", "decoder", "(", "embeddings", ")", "\n", "regression_loss", "=", "self", ".", "criterion_regression", "(", "outputs", ",", "combined", ")", "\n", "\n", "if", "self", ".", "domain_tradeoff", ">", "0", ":", "\n", "            ", "batch_size", "=", "anchors", ".", "shape", "[", "0", "]", "\n", "domain_pred", "=", "self", ".", "domain_disc", "(", "embeddings", "[", ":", "batch_size", "]", ")", "\n", "domain_loss", "=", "self", ".", "criterion_domain", "(", "domain_pred", ",", "domain_labels", ")", "\n", "", "else", ":", "\n", "            ", "domain_loss", "=", "0", "\n", "\n", "", "return", "regression_loss", ",", "domain_loss", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.__init__": [[10, 49], ["super().__init__", "baseline.Baseline._get_encoder", "models.networks.Regressor", "lightning.metrics.RMSELoss", "lightning.metrics.EmbeddingViz", "baseline.Baseline.save_hyperparameters", "lightning.metrics.RMSELoss", "range"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline._get_encoder"], ["class", "BaselineDataModule", "(", "pl", ".", "LightningDataModule", ")", ":", "\n", "    ", "def", "__init__", "(", "\n", "self", ",", "\n", "fd_source", ":", "int", ",", "\n", "batch_size", ":", "int", ",", "\n", "window_size", ":", "int", "=", "None", ",", "\n", "max_rul", ":", "int", "=", "125", ",", "\n", "percent_fail_runs", ":", "float", "=", "None", ",", "\n", "feature_select", ":", "List", "[", "int", "]", "=", "None", ",", "\n", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "fd_source", "=", "fd_source", "\n", "self", ".", "batch_size", "=", "batch_size", "\n", "self", ".", "max_rul", "=", "max_rul", "\n", "self", ".", "window_size", "=", "window_size", "or", "CMAPSSLoader", ".", "WINDOW_SIZES", "[", "self", ".", "fd_source", "]", "\n", "self", ".", "percent_fail_runs", "=", "percent_fail_runs", "\n", "self", ".", "feature_select", "=", "feature_select", "\n", "\n", "self", ".", "hparams", "=", "{", "\n", "\"fd_source\"", ":", "self", ".", "fd_source", ",", "\n", "\"batch_size\"", ":", "self", ".", "batch_size", ",", "\n", "\"window_size\"", ":", "self", ".", "window_size", ",", "\n", "\"percent_fail_runs\"", ":", "self", ".", "percent_fail_runs", ",", "\n", "\"max_rul\"", ":", "self", ".", "max_rul", ",", "\n", "}", "\n", "\n", "self", ".", "cmapss", "=", "{", "}", "\n", "for", "fd", "in", "range", "(", "1", ",", "5", ")", ":", "\n", "            ", "self", ".", "cmapss", "[", "fd", "]", "=", "self", ".", "_get_cmapss", "(", "fd", ")", "\n", "\n", "", "", "def", "_get_cmapss", "(", "self", ",", "fd", ")", ":", "\n", "        ", "fail_runs", "=", "self", ".", "percent_fail_runs", "if", "fd", "==", "self", ".", "fd_source", "else", "None", "\n", "cmapss", "=", "CMAPSSDataModule", "(", "\n", "fd", ",", "\n", "self", ".", "batch_size", ",", "\n", "self", ".", "window_size", ",", "\n", "self", ".", "max_rul", ",", "\n", "None", ",", "\n", "fail_runs", ",", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline._get_encoder": [[50, 68], ["models.networks.Encoder", "ValueError"], "methods", ["None"], ["self", ".", "feature_select", ",", "\n", ")", "\n", "\n", "return", "cmapss", "\n", "\n", "", "def", "prepare_data", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "for", "cmapss_fd", "in", "self", ".", "cmapss", ".", "values", "(", ")", ":", "\n", "            ", "cmapss_fd", ".", "prepare_data", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "\n", "", "", "def", "setup", "(", "self", ",", "stage", ":", "Optional", "[", "str", "]", "=", "None", ")", ":", "\n", "        ", "for", "cmapss_fd", "in", "self", ".", "cmapss", ".", "values", "(", ")", ":", "\n", "            ", "cmapss_fd", ".", "setup", "(", "stage", ")", "\n", "\n", "", "", "def", "train_dataloader", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", "->", "DataLoader", ":", "\n", "        ", "return", "self", ".", "cmapss", "[", "self", ".", "fd_source", "]", ".", "train_dataloader", "(", ")", "\n", "\n", "", "def", "val_dataloader", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", "->", "DataLoader", ":", "\n", "        ", "return", "self", ".", "cmapss", "[", "self", ".", "fd_source", "]", ".", "val_dataloader", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.add_data_hparams": [[69, 71], ["baseline.Baseline.hparams.update"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update"], ["", "def", "test_dataloader", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", "->", "List", "[", "DataLoader", "]", ":", "\n", "        ", "test_dataloaders", "=", "[", "]", "\n", "for", "fd_target", "in", "range", "(", "1", ",", "5", ")", ":", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.example_input_array": [[72, 77], ["torch.randn"], "methods", ["None"], ["            ", "target_dl", "=", "self", ".", "cmapss", "[", "fd_target", "]", ".", "test_dataloader", "(", ")", "\n", "test_dataloaders", ".", "append", "(", "target_dl", ")", "\n", "\n", "", "return", "test_dataloaders", "\n", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.configure_optimizers": [[78, 88], ["torch.optim.Adam", "torch.optim.SGD", "baseline.Baseline.encoder.parameters", "baseline.Baseline.regressor.parameters"], "methods", ["None"], ["", "", "class", "PretrainingBaselineDataModule", "(", "pl", ".", "LightningDataModule", ")", ":", "\n", "    ", "def", "__init__", "(", "\n", "self", ",", "\n", "fd_source", ":", "int", ",", "\n", "num_samples", ":", "int", ",", "\n", "batch_size", ":", "int", ",", "\n", "window_size", ":", "int", "=", "None", ",", "\n", "max_rul", ":", "int", "=", "125", ",", "\n", "min_distance", ":", "int", "=", "1", ",", "\n", "percent_broken", ":", "float", "=", "None", ",", "\n", "percent_fail_runs", ":", "Union", "[", "float", ",", "List", "[", "int", "]", "]", "=", "None", ",", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.forward": [[90, 95], ["baseline.Baseline.encoder", "baseline.Baseline.regressor"], "methods", ["None"], ["truncate_val", ":", "bool", "=", "False", ",", "\n", "distance_mode", ":", "str", "=", "\"linear\"", ",", "\n", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "fd_source", "=", "fd_source", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.training_step": [[96, 104], ["baseline.Baseline.", "baseline.Baseline.criterion_regression", "baseline.Baseline.log"], "methods", ["None"], ["self", ".", "num_samples", "=", "num_samples", "\n", "self", ".", "batch_size", "=", "batch_size", "\n", "self", ".", "min_distance", "=", "min_distance", "\n", "self", ".", "max_rul", "=", "max_rul", "\n", "self", ".", "percent_broken", "=", "percent_broken", "\n", "self", ".", "percent_fail_runs", "=", "percent_fail_runs", "\n", "self", ".", "feature_select", "=", "feature_select", "\n", "self", ".", "truncate_val", "=", "truncate_val", "\n", "self", ".", "distance_mode", "=", "distance_mode", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.on_validation_epoch_start": [[105, 107], ["baseline.Baseline._reset_all_metrics"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline._reset_all_metrics"], ["\n", "self", ".", "fails_source_loader", "=", "CMAPSSLoader", "(", "\n", "self", ".", "fd_source", ",", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.on_test_epoch_start": [[108, 110], ["baseline.Baseline._reset_all_metrics"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline._reset_all_metrics"], ["window_size", ",", "\n", "self", ".", "max_rul", ",", "\n", "None", ",", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline._reset_all_metrics": [[111, 115], ["baseline.Baseline.embedding_metric.reset", "baseline.Baseline.regression_metrics.values", "metric.reset"], "methods", ["None"], ["self", ".", "percent_fail_runs", ",", "\n", "self", ".", "feature_select", ",", "\n", "self", ".", "truncate_val", ",", "\n", ")", "\n", "unfailed_runs", "=", "self", ".", "_get_unbroken_runs", "(", "self", ".", "percent_fail_runs", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.validation_step": [[116, 118], ["baseline.Baseline._evaluate"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline._evaluate"], ["self", ".", "broken_source_loader", "=", "CMAPSSLoader", "(", "\n", "self", ".", "fd_source", ",", "\n", "window_size", ",", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.test_step": [[119, 121], ["baseline.Baseline._evaluate"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline._evaluate"], ["self", ".", "max_rul", ",", "\n", "self", ".", "percent_broken", ",", "\n", "unfailed_runs", ",", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline._evaluate": [[122, 129], ["baseline.Baseline.", "baseline.Baseline.regression_metrics[].update", "baseline.Baseline.encoder", "baseline.Baseline.embedding_metric.update", "torch.zeros_like"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update"], ["self", ".", "feature_select", ",", "\n", "self", ".", "truncate_val", ",", "\n", ")", "\n", "\n", "self", ".", "window_size", "=", "self", ".", "broken_source_loader", ".", "window_size", "\n", "\n", "self", ".", "source", "=", "CMAPSSDataModule", ".", "from_loader", "(", "\n", "self", ".", "broken_source_loader", ",", "self", ".", "batch_size", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.validation_epoch_end": [[130, 137], ["baseline.Baseline.log", "baseline.Baseline.regression_metrics[].compute", "baseline.Baseline.embedding_metric.compute", "baseline.Baseline.logger.log_figure", "baseline.Baseline.logger.log_figure", "baseline.Baseline.embedding_metric.reset"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MLTBLogger.log_figure", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MLTBLogger.log_figure"], [")", "\n", "\n", "self", ".", "hparams", "=", "{", "\n", "\"fd_source\"", ":", "self", ".", "fd_source", ",", "\n", "\"num_samples\"", ":", "self", ".", "num_samples", ",", "\n", "\"batch_size\"", ":", "self", ".", "batch_size", ",", "\n", "\"window_size\"", ":", "self", ".", "window_size", ",", "\n", "\"max_rul\"", ":", "self", ".", "max_rul", ",", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.test_epoch_end": [[138, 141], ["baseline.Baseline.regression_metrics.items", "baseline.Baseline.log", "metric.compute"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute"], ["\"min_distance\"", ":", "self", ".", "min_distance", ",", "\n", "\"percent_broken\"", ":", "self", ".", "percent_broken", ",", "\n", "\"percent_fail_runs\"", ":", "self", ".", "percent_fail_runs", ",", "\n", "\"truncate_val\"", ":", "self", ".", "truncate_val", ",", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Encoder.__init__": [[8, 31], ["torch.Module.__init__", "networks.Encoder._build_encoder"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Encoder._build_encoder"], ["    ", "def", "__init__", "(", "\n", "self", ",", "\n", "in_channels", ",", "\n", "base_filters", ",", "\n", "kernel_size", ",", "\n", "num_layers", ",", "\n", "latent_dim", ",", "\n", "seq_len", ",", "\n", "dropout", ",", "\n", "norm_outputs", ",", "\n", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "in_channels", "=", "in_channels", "\n", "self", ".", "base_filters", "=", "base_filters", "\n", "self", ".", "kernel_size", "=", "kernel_size", "\n", "self", ".", "num_layers", "=", "num_layers", "\n", "self", ".", "latent_dim", "=", "latent_dim", "\n", "self", ".", "seq_len", "=", "seq_len", "\n", "self", ".", "dropout", "=", "dropout", "\n", "self", ".", "norm_outputs", "=", "norm_outputs", "\n", "\n", "self", ".", "layers", "=", "self", ".", "_build_encoder", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Encoder.padding": [[32, 38], ["None"], "methods", ["None"], ["", "@", "property", "\n", "def", "padding", "(", "self", ")", ":", "\n", "        ", "left", "=", "self", ".", "kernel_size", "-", "1", "\n", "right", "=", "0", "\n", "\n", "return", "left", ",", "right", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Encoder._build_encoder": [[39, 56], ["range", "sequence.extend", "torch.Sequential", "torch.Sequential", "torch.Conv1d", "torch.Conv1d", "torch.BatchNorm1d", "torch.BatchNorm1d", "torch.ReLU", "torch.ReLU", "min", "min", "sequence.extend", "min", "networks.Encoder._build_conv_layer", "torch.Flatten", "torch.Flatten", "torch.Linear", "torch.Linear"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Decoder._build_conv_layer"], ["", "def", "_build_encoder", "(", "self", ")", ":", "\n", "        ", "sequence", "=", "[", "\n", "nn", ".", "Conv1d", "(", "self", ".", "in_channels", ",", "self", ".", "base_filters", ",", "self", ".", "kernel_size", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm1d", "(", "self", ".", "base_filters", ")", ",", "\n", "nn", ".", "ReLU", "(", "True", ")", ",", "\n", "]", "\n", "for", "i", "in", "range", "(", "1", ",", "self", ".", "num_layers", ")", ":", "\n", "            ", "in_filters", "=", "min", "(", "i", "*", "self", ".", "base_filters", ",", "64", ")", "\n", "out_filters", "=", "min", "(", "(", "i", "+", "1", ")", "*", "self", ".", "base_filters", ",", "64", ")", "\n", "use_padding", "=", "i", "%", "2", "==", "1", "\n", "sequence", ".", "extend", "(", "self", ".", "_build_conv_layer", "(", "in_filters", ",", "out_filters", ",", "use_padding", ")", ")", "\n", "\n", "", "cut_off", "=", "self", ".", "num_layers", "//", "2", "*", "(", "self", ".", "kernel_size", "-", "(", "self", ".", "kernel_size", "%", "2", ")", ")", "\n", "flat_dim", "=", "(", "self", ".", "seq_len", "-", "cut_off", ")", "*", "min", "(", "self", ".", "num_layers", "*", "self", ".", "base_filters", ",", "64", ")", "\n", "sequence", ".", "extend", "(", "[", "nn", ".", "Flatten", "(", ")", ",", "nn", ".", "Linear", "(", "flat_dim", ",", "self", ".", "latent_dim", ")", "]", ")", "\n", "\n", "return", "nn", ".", "Sequential", "(", "*", "sequence", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Encoder._build_conv_layer": [[57, 71], ["layer.extend", "layer.append", "torch.ConstantPad1d", "torch.ConstantPad1d", "torch.Conv1d", "torch.Conv1d", "torch.BatchNorm1d", "torch.BatchNorm1d", "torch.ReLU", "torch.ReLU", "torch.Dropout2d", "torch.Dropout2d"], "methods", ["None"], ["", "def", "_build_conv_layer", "(", "self", ",", "in_filters", ",", "out_filters", ",", "use_padding", ")", ":", "\n", "        ", "layer", "=", "[", "]", "\n", "if", "use_padding", ":", "\n", "            ", "layer", ".", "append", "(", "nn", ".", "ConstantPad1d", "(", "self", ".", "padding", ",", "0.0", ")", ")", "\n", "", "layer", ".", "extend", "(", "\n", "[", "\n", "nn", ".", "Conv1d", "(", "in_filters", ",", "out_filters", ",", "self", ".", "kernel_size", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm1d", "(", "out_filters", ")", ",", "\n", "nn", ".", "ReLU", "(", "True", ")", ",", "\n", "nn", ".", "Dropout2d", "(", "p", "=", "self", ".", "dropout", ")", ",", "\n", "]", "\n", ")", "\n", "\n", "return", "layer", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Encoder.forward": [[72, 78], ["networks.Encoder.layers", "torch.norm", "torch.norm", "torch.norm", "torch.norm"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "outputs", "=", "self", ".", "layers", "(", "inputs", ")", "\n", "if", "self", ".", "norm_outputs", ":", "\n", "            ", "outputs", "=", "outputs", "/", "torch", ".", "norm", "(", "outputs", ",", "dim", "=", "1", ",", "keepdim", "=", "True", ")", "\n", "\n", "", "return", "outputs", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Decoder.__init__": [[81, 102], ["torch.Module.__init__", "networks.Decoder._build_decoder"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Decoder._build_decoder"], ["    ", "def", "__init__", "(", "\n", "self", ",", "\n", "in_channels", ",", "\n", "base_filters", ",", "\n", "kernel_size", ",", "\n", "num_layers", ",", "\n", "latent_dim", ",", "\n", "seq_len", ",", "\n", "dropout", ",", "\n", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "in_channels", "=", "in_channels", "\n", "self", ".", "base_filters", "=", "base_filters", "\n", "self", ".", "kernel_size", "=", "kernel_size", "\n", "self", ".", "num_layers", "=", "num_layers", "\n", "self", ".", "latent_dim", "=", "latent_dim", "\n", "self", ".", "seq_len", "=", "seq_len", "\n", "self", ".", "dropout", "=", "dropout", "\n", "\n", "self", ".", "layers", "=", "self", ".", "_build_decoder", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Decoder.padding": [[103, 109], ["None"], "methods", ["None"], ["", "@", "property", "\n", "def", "padding", "(", "self", ")", ":", "\n", "        ", "left", "=", "self", ".", "kernel_size", "-", "1", "\n", "right", "=", "0", "\n", "\n", "return", "left", ",", "right", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Decoder._build_decoder": [[110, 136], ["min", "range", "sequence.extend", "torch.Sequential", "torch.Sequential", "torch.Linear", "torch.Linear", "torch.BatchNorm1d", "torch.BatchNorm1d", "torch.ReLU", "torch.ReLU", "models.layers.DeFlatten", "min", "min", "sequence.extend", "networks.Decoder._build_conv_layer", "torch.ConvTranspose1d", "torch.ConvTranspose1d", "torch.Tanh", "torch.Tanh"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Decoder._build_conv_layer"], ["", "def", "_build_decoder", "(", "self", ")", ":", "\n", "        ", "cut_off", "=", "self", ".", "num_layers", "//", "2", "*", "(", "self", ".", "kernel_size", "-", "(", "self", ".", "kernel_size", "%", "2", ")", ")", "\n", "max_filters", "=", "min", "(", "self", ".", "num_layers", "*", "self", ".", "base_filters", ",", "64", ")", "\n", "reduced_seq_len", "=", "self", ".", "seq_len", "-", "cut_off", "\n", "flat_dim", "=", "reduced_seq_len", "*", "max_filters", "\n", "\n", "sequence", "=", "[", "\n", "nn", ".", "Linear", "(", "self", ".", "latent_dim", ",", "flat_dim", ")", ",", "\n", "nn", ".", "BatchNorm1d", "(", "flat_dim", ")", ",", "\n", "nn", ".", "ReLU", "(", "True", ")", ",", "\n", "layers", ".", "DeFlatten", "(", "reduced_seq_len", ",", "max_filters", ")", ",", "\n", "]", "\n", "for", "i", "in", "range", "(", "self", ".", "num_layers", "-", "1", ",", "0", ",", "-", "1", ")", ":", "\n", "            ", "in_filters", "=", "min", "(", "(", "i", "+", "1", ")", "*", "self", ".", "base_filters", ",", "64", ")", "\n", "out_filters", "=", "min", "(", "i", "*", "self", ".", "base_filters", ",", "64", ")", "\n", "use_padding", "=", "i", "%", "2", "==", "1", "\n", "sequence", ".", "extend", "(", "self", ".", "_build_conv_layer", "(", "in_filters", ",", "out_filters", ",", "use_padding", ")", ")", "\n", "\n", "", "sequence", ".", "extend", "(", "\n", "[", "\n", "nn", ".", "ConvTranspose1d", "(", "self", ".", "base_filters", ",", "self", ".", "in_channels", ",", "self", ".", "kernel_size", ")", ",", "\n", "nn", ".", "Tanh", "(", ")", ",", "\n", "]", "\n", ")", "\n", "\n", "return", "nn", ".", "Sequential", "(", "*", "sequence", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Decoder._build_conv_layer": [[137, 159], ["layer.extend", "layer.extend", "layer.append", "torch.ConvTranspose1d", "torch.ConvTranspose1d", "torch.BatchNorm1d", "torch.BatchNorm1d", "torch.ReLU", "torch.ReLU", "torch.Dropout2d", "torch.Dropout2d", "torch.ConstantPad1d", "torch.ConstantPad1d", "torch.Conv1d", "torch.Conv1d"], "methods", ["None"], ["", "def", "_build_conv_layer", "(", "self", ",", "in_filters", ",", "out_filters", ",", "use_padding", ")", ":", "\n", "        ", "layer", "=", "[", "]", "\n", "if", "use_padding", ":", "\n", "            ", "layer", ".", "extend", "(", "\n", "[", "\n", "nn", ".", "ConstantPad1d", "(", "self", ".", "padding", ",", "0.0", ")", ",", "\n", "nn", ".", "Conv1d", "(", "in_filters", ",", "out_filters", ",", "self", ".", "kernel_size", ",", "bias", "=", "False", ")", ",", "\n", "]", "\n", ")", "\n", "", "else", ":", "\n", "            ", "layer", ".", "append", "(", "\n", "nn", ".", "ConvTranspose1d", "(", "in_filters", ",", "out_filters", ",", "self", ".", "kernel_size", ",", "bias", "=", "False", ")", "\n", ")", "\n", "", "layer", ".", "extend", "(", "\n", "[", "\n", "nn", ".", "BatchNorm1d", "(", "out_filters", ")", ",", "\n", "nn", ".", "ReLU", "(", "True", ")", ",", "\n", "nn", ".", "Dropout2d", "(", "p", "=", "self", ".", "dropout", ")", ",", "\n", "]", "\n", ")", "\n", "\n", "return", "layer", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Decoder.forward": [[160, 166], ["m"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "outputs", "=", "inputs", "\n", "for", "m", "in", "self", ".", "layers", ":", "\n", "            ", "outputs", "=", "m", "(", "outputs", ")", "\n", "\n", "", "return", "outputs", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Regressor.__init__": [[169, 175], ["torch.Module.__init__", "networks.Regressor._build_regressor"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Regressor._build_regressor"], ["    ", "def", "__init__", "(", "self", ",", "latent_dim", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "latent_dim", "=", "latent_dim", "\n", "\n", "self", ".", "layers", "=", "self", ".", "_build_regressor", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Regressor._build_regressor": [[176, 184], ["torch.Sequential", "torch.Sequential", "torch.BatchNorm1d", "torch.BatchNorm1d", "torch.ReLU", "torch.ReLU", "torch.Linear", "torch.Linear"], "methods", ["None"], ["", "def", "_build_regressor", "(", "self", ")", ":", "\n", "        ", "classifier", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "BatchNorm1d", "(", "self", ".", "latent_dim", ")", ",", "\n", "nn", ".", "ReLU", "(", "True", ")", ",", "\n", "nn", ".", "Linear", "(", "self", ".", "latent_dim", ",", "1", ")", ",", "\n", ")", "\n", "\n", "return", "classifier", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.networks.Regressor.forward": [[185, 187], ["networks.Regressor.layers().squeeze", "networks.Regressor.layers"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "return", "self", ".", "layers", "(", "inputs", ")", ".", "squeeze", "(", "1", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.DeFlatten.__init__": [[9, 14], ["torch.nn.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__"], ["    ", "def", "__init__", "(", "self", ",", "seq_len", ",", "num_channels", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "seq_len", "=", "seq_len", "\n", "self", ".", "num_channels", "=", "num_channels", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.DeFlatten.forward": [[15, 17], ["inputs.view"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "return", "inputs", ".", "view", "(", "-", "1", ",", "self", ".", "num_channels", ",", "self", ".", "seq_len", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers._GradientReverse.forward": [[22, 26], ["None"], "methods", ["None"], ["@", "staticmethod", "\n", "def", "forward", "(", "ctx", ",", "inputs", ",", "**", "kwargs", ")", ":", "\n", "        ", "\"\"\"Forward pass as identity mapping.\"\"\"", "\n", "return", "inputs", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers._GradientReverse.backward": [[27, 31], ["None"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "backward", "(", "ctx", ",", "grad", ")", ":", "\n", "        ", "\"\"\"Backward pass as negative of gradient.\"\"\"", "\n", "return", "-", "grad", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.GradientReversalLayer.forward": [[41, 44], ["layers.gradient_reversal"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.gradient_reversal"], ["def", "forward", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "\"\"\"Perform forward pass of gradient reversal.\"\"\"", "\n", "return", "gradient_reversal", "(", "inputs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.RectifiedLinearLayer.__init__": [[51, 57], ["pytorch_probgraph.UnitLayer.__init__", "layers.RectifiedLinearLayer.register_parameter", "torch.nn.Parameter"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__"], ["def", "__init__", "(", "self", ",", "bias", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "\"\"\"\n        :param bias: Bias for the ReLU unit.\n        \"\"\"", "\n", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "register_parameter", "(", "\"bias\"", ",", "torch", ".", "nn", ".", "Parameter", "(", "bias", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.RectifiedLinearLayer.mean_cond": [[58, 62], ["torch.nn.functional.relu"], "methods", ["None"], ["", "def", "mean_cond", "(", "\n", "self", ",", "interaction", ":", "Union", "[", "torch", ".", "Tensor", ",", "None", "]", "=", "None", ",", "N", ":", "int", "=", "1", "\n", ")", "->", "torch", ".", "Tensor", ":", "\n", "        ", "return", "nn", ".", "functional", ".", "relu", "(", "interaction", "+", "self", ".", "bias", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.RectifiedLinearLayer.sample_cond": [[63, 68], ["torch.nn.functional.relu", "torch.sigmoid"], "methods", ["None"], ["", "def", "sample_cond", "(", "\n", "self", ",", "interaction", ":", "Union", "[", "torch", ".", "Tensor", ",", "None", "]", "=", "None", ",", "N", ":", "int", "=", "1", "\n", ")", "->", "torch", ".", "Tensor", ":", "\n", "        ", "interaction", "=", "interaction", "+", "self", ".", "bias", "\n", "return", "nn", ".", "functional", ".", "relu", "(", "interaction", "+", "torch", ".", "sigmoid", "(", "interaction", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.RectifiedLinearLayer.transform": [[69, 71], ["None"], "methods", ["None"], ["", "def", "transform", "(", "self", ",", "input", ":", "torch", ".", "Tensor", ")", "->", "torch", ".", "Tensor", ":", "\n", "        ", "return", "input", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.RectifiedLinearLayer.transform_invert": [[72, 74], ["None"], "methods", ["None"], ["", "def", "transform_invert", "(", "self", ",", "transformed_input", ":", "torch", ".", "Tensor", ")", "->", "torch", ".", "Tensor", ":", "\n", "        ", "return", "transformed_input", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.RectifiedLinearLayer.logprob_cond": [[75, 79], ["None"], "methods", ["None"], ["", "def", "logprob_cond", "(", "\n", "self", ",", "input", ":", "torch", ".", "Tensor", ",", "interaction", ":", "Union", "[", "torch", ".", "Tensor", ",", "float", "]", "=", "0.0", "\n", ")", "->", "torch", ".", "Tensor", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.RectifiedLinearLayer.logprob_joint": [[80, 82], ["torch.sum", "list", "range", "len"], "methods", ["None"], ["", "def", "logprob_joint", "(", "self", ",", "input", ":", "torch", ".", "Tensor", ")", "->", "torch", ".", "Tensor", ":", "\n", "        ", "return", "torch", ".", "sum", "(", "input", "*", "self", ".", "bias", ",", "dim", "=", "list", "(", "range", "(", "1", ",", "len", "(", "input", ".", "shape", ")", ")", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.RectifiedLinearLayer.free_energy": [[83, 85], ["None"], "methods", ["None"], ["", "def", "free_energy", "(", "self", ",", "interaction", ":", "torch", ".", "Tensor", ")", "->", "torch", ".", "Tensor", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.RectifiedLinearLayer.backward": [[86, 93], ["grad_bias.mean.mean.mean", "layers.RectifiedLinearLayer.bias.backward", "grad_bias.mean.mean.detach"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.GaussianSequenceLayer.backward"], ["", "def", "backward", "(", "\n", "self", ",", "input", ":", "torch", ".", "Tensor", ",", "factor", ":", "Union", "[", "torch", ".", "Tensor", ",", "float", "]", "=", "1.0", "\n", ")", "->", "None", ":", "\n", "        ", "if", "self", ".", "bias", ".", "requires_grad", ":", "\n", "            ", "grad_bias", "=", "(", "factor", "*", "input", ")", ".", "mean", "(", "dim", "=", "0", ",", "keepdim", "=", "True", ")", "\n", "grad_bias", "=", "grad_bias", ".", "mean", "(", "dim", "=", "-", "1", ",", "keepdim", "=", "True", ")", "\n", "self", ".", "bias", ".", "backward", "(", "grad_bias", ".", "detach", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.GaussianSequenceLayer.backward": [[96, 107], ["layers.GaussianSequenceLayer.bias.backward", "layers.GaussianSequenceLayer.logsigma.backward", "grad_bias.sum", "grad_bias.detach", "grad_logsigma.detach", "torch.exp"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.GaussianSequenceLayer.backward", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.GaussianSequenceLayer.backward"], ["    ", "def", "backward", "(", "\n", "self", ",", "input", ":", "torch", ".", "Tensor", ",", "factor", ":", "Union", "[", "torch", ".", "Tensor", ",", "float", "]", "=", "1.0", "\n", ")", "->", "None", ":", "\n", "        ", "if", "self", ".", "bias", ".", "requires_grad", ":", "\n", "            ", "grad_bias", "=", "(", "factor", "*", "input", ")", ".", "sum", "(", "dim", "=", "0", ",", "keepdim", "=", "True", ")", "/", "input", ".", "shape", "[", "0", "]", "\n", "grad_bias", "=", "grad_bias", ".", "sum", "(", "dim", "=", "-", "1", ",", "keepdim", "=", "True", ")", "/", "input", ".", "shape", "[", "-", "1", "]", "\n", "self", ".", "bias", ".", "backward", "(", "grad_bias", ".", "detach", "(", ")", ")", "\n", "", "if", "self", ".", "logsigma", ".", "requires_grad", ":", "\n", "            ", "var", "=", "(", "input", "**", "2", ")", ".", "sum", "(", "dim", "=", "0", ",", "keepdim", "=", "True", ")", "/", "input", ".", "shape", "[", "0", "]", "\n", "grad_logsigma", "=", "factor", "*", "var", "*", "torch", ".", "exp", "(", "-", "2", "*", "self", ".", "logsigma", ")", "-", "1.0", "\n", "self", ".", "logsigma", ".", "backward", "(", "grad_logsigma", ".", "detach", "(", ")", ")", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.gradient_reversal": [[33, 36], ["_GradientReverse.apply"], "function", ["None"], ["", "", "def", "gradient_reversal", "(", "x", ")", ":", "\n", "    ", "\"\"\"Perform gradient reversal on input.\"\"\"", "\n", "return", "_GradientReverse", ".", "apply", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.add_rul_score.add_rul_score_all_fd": [[15, 36], ["mlflow.tracking.MlflowClient", "mlflow.tracking.MlflowClient.list_experiments", "re.compile", "print", "mlflow.tracking.MlflowClient.search_runs", "tqdm.tqdm", "print", "len", "print", "re.compile.match", "add_rul_score._process_run", "errors.append"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.add_rul_score._process_run"], ["def", "add_rul_score_all_fd", "(", "mlflow_uri", ")", ":", "\n", "    ", "client", "=", "mlflow", ".", "tracking", ".", "MlflowClient", "(", "mlflow_uri", ")", "\n", "\n", "experiments", "=", "client", ".", "list_experiments", "(", ")", "\n", "exp_pattern", "=", "re", ".", "compile", "(", "\"cmapss_.+_baseline$\"", ")", "\n", "experiments", "=", "[", "e", "for", "e", "in", "experiments", "if", "exp_pattern", ".", "match", "(", "e", ".", "name", ")", "is", "not", "None", "]", "\n", "print", "(", "\"Found experiments %d\"", "%", "len", "(", "experiments", ")", ")", "\n", "\n", "for", "e", "in", "experiments", ":", "\n", "        ", "runs", "=", "client", ".", "search_runs", "(", "e", ".", "experiment_id", ")", "\n", "\n", "errors", "=", "[", "]", "\n", "for", "r", "in", "tqdm", ".", "tqdm", "(", "runs", ",", "desc", "=", "e", ".", "name", ")", ":", "\n", "            ", "try", ":", "\n", "                ", "_process_run", "(", "client", ",", "r", ")", "\n", "", "except", "Exception", "as", "e", ":", "\n", "                ", "errors", ".", "append", "(", "e", ")", "\n", "\n", "", "", "print", "(", "\"Errors:\"", ")", "\n", "for", "e", "in", "errors", ":", "\n", "            ", "print", "(", "e", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.add_rul_score._process_run": [[38, 53], ["add_rul_score._get_datamodule", "add_rul_score._load_model", "add_rul_score._get_score", "add_rul_score._log_metric", "enumerate", "client.list_artifacts", "_get_datamodule.val_dataloader", "_get_datamodule.test_dataloader", "add_rul_score._get_score", "add_rul_score._log_metric"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.add_rul_score._get_datamodule", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.add_rul_score._load_model", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.add_rul_score._get_score", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.add_rul_score._log_metric", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.val_dataloader", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.test_dataloader", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.add_rul_score._get_score", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.add_rul_score._log_metric"], ["", "", "", "def", "_process_run", "(", "client", ",", "r", ")", ":", "\n", "# if run complete and not already processed", "\n", "    ", "if", "(", "\n", "\"epoch\"", "in", "r", ".", "data", ".", "metrics", "\n", "and", "r", ".", "data", ".", "metrics", "[", "\"epoch\"", "]", "==", "99.0", "\n", "and", "\"val/rul_score\"", "not", "in", "r", ".", "data", ".", "metrics", "\n", ")", ":", "\n", "        ", "dm", "=", "_get_datamodule", "(", "r", ")", "\n", "model_artifact", "=", "client", ".", "list_artifacts", "(", "r", ".", "info", ".", "run_id", ",", "\"checkpoints\"", ")", "[", "0", "]", "\n", "model", "=", "_load_model", "(", "model_artifact", ",", "r", ")", "\n", "score", "=", "_get_score", "(", "model", ",", "dm", ".", "val_dataloader", "(", ")", ")", "\n", "_log_metric", "(", "client", ",", "r", ",", "score", ",", "\"val/rul_score\"", ")", "\n", "for", "fd", ",", "test_loader", "in", "enumerate", "(", "dm", ".", "test_dataloader", "(", ")", ",", "start", "=", "1", ")", ":", "\n", "            ", "score", "=", "_get_score", "(", "model", ",", "test_loader", ")", "\n", "_log_metric", "(", "client", ",", "r", ",", "score", ",", "f\"test/rul_score_fd{fd}\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.add_rul_score._get_datamodule": [[55, 64], ["datasets.BaselineDataModule", "datasets.BaselineDataModule.prepare_data", "datasets.BaselineDataModule.setup", "int"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader.prepare_data", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.setup"], ["", "", "", "def", "_get_datamodule", "(", "r", ")", ":", "\n", "    ", "data", "=", "datasets", ".", "BaselineDataModule", "(", "\n", "fd_source", "=", "int", "(", "r", ".", "data", ".", "params", "[", "\"fd_source\"", "]", ")", ",", "\n", "batch_size", "=", "512", ",", "\n", ")", "\n", "data", ".", "prepare_data", "(", ")", "\n", "data", ".", "setup", "(", ")", "\n", "\n", "return", "data", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.add_rul_score._load_model": [[66, 76], ["os.path.join", "lightning.baseline.Baseline.load_from_checkpoint", "Baseline.load_from_checkpoint.eval", "r.info.artifact_uri.replace"], "function", ["None"], ["", "def", "_load_model", "(", "model_artifact", ",", "r", ")", ":", "\n", "    ", "artifact_path", "=", "os", ".", "path", ".", "join", "(", "\n", "r", ".", "info", ".", "artifact_uri", ".", "replace", "(", "\"file://\"", ",", "\"\"", ")", ",", "model_artifact", ".", "path", "\n", ")", "\n", "model", "=", "Baseline", ".", "load_from_checkpoint", "(", "artifact_path", ",", "map_location", "=", "\"cpu\"", ")", "\n", "if", "\"pretrained_checkpoint\"", "in", "r", ".", "data", ".", "params", ":", "\n", "        ", "model", ".", "encoder", ".", "norm_outputs", "=", "True", "\n", "", "model", ".", "eval", "(", ")", "\n", "\n", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.add_rul_score._get_score": [[78, 90], ["torch.no_grad", "model.to.to", "lightning.metrics.RULScore", "lightning.metrics.SimpleMetric", "metrics.SimpleMetric.compute().item", "len", "metrics.RULScore.", "metrics.SimpleMetric.update", "b.to", "model.to.", "metrics.SimpleMetric.compute"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute"], ["", "@", "torch", ".", "no_grad", "(", ")", "\n", "def", "_get_score", "(", "model", ",", "dataloader", ")", ":", "\n", "    ", "model", "=", "model", ".", "to", "(", "\"cuda:0\"", ")", "\n", "rul_score", "=", "metrics", ".", "RULScore", "(", ")", "\n", "rul_score_metric", "=", "metrics", ".", "SimpleMetric", "(", "reduction", "=", "\"sum\"", ")", "\n", "for", "batch", "in", "dataloader", ":", "\n", "        ", "features", ",", "labels", "=", "[", "b", ".", "to", "(", "\"cuda:0\"", ")", "for", "b", "in", "batch", "]", "\n", "batch_size", "=", "len", "(", "features", ")", "\n", "score", "=", "rul_score", "(", "model", "(", "features", ")", ",", "labels", ")", "\n", "rul_score_metric", ".", "update", "(", "score", ",", "batch_size", ")", "\n", "\n", "", "return", "rul_score_metric", ".", "compute", "(", ")", ".", "item", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.add_rul_score._log_metric": [[92, 95], ["client.log_metric"], "function", ["None"], ["", "def", "_log_metric", "(", "client", ",", "r", ",", "score", ",", "metric", ")", ":", "\n", "    ", "if", "metric", "not", "in", "r", ".", "data", ".", "metrics", ":", "\n", "        ", "client", ".", "log_metric", "(", "r", ".", "info", ".", "run_id", ",", "metric", ",", "score", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised.export_all": [[14, 24], ["mlflow.tracking.MlflowClient", "print", "export_results_semi_supervised.export_matching_experiments", "export_matching_experiments.to_csv"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised.export_matching_experiments"], ["def", "export_all", "(", "mlflow_uri", ",", "tags", ")", ":", "\n", "    ", "\"\"\"Export all transfer and baseline experiments to CSV.\"\"\"", "\n", "client", "=", "mlflow", ".", "tracking", ".", "MlflowClient", "(", "mlflow_uri", ")", "\n", "\n", "print", "(", "\"Export baseline experiments...\"", ")", "\n", "df", "=", "export_matching_experiments", "(", "\n", "client", ",", "\"cmapss_.{3,5}_baseline$\"", ",", "tags", ",", "_runs_of_semi_supervised", "\n", ")", "\n", "if", "df", "is", "not", "None", ":", "\n", "        ", "df", ".", "to_csv", "(", "\"semi_supervised.csv\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised.export_matching_experiments": [[26, 41], ["re.compile", "client.list_experiments", "print", "print", "pd.concat.append", "pandas.concat", "len", "re.compile.match", "export_results_semi_supervised._runs_of_semi_supervised"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised._runs_of_semi_supervised"], ["", "", "def", "export_matching_experiments", "(", "client", ",", "exp_name_regex", ",", "tags", ",", "func", ")", ":", "\n", "    ", "regex", "=", "re", ".", "compile", "(", "exp_name_regex", ")", "\n", "experiments", "=", "client", ".", "list_experiments", "(", ")", "\n", "filtered_experiments", "=", "[", "e", "for", "e", "in", "experiments", "if", "regex", ".", "match", "(", "e", ".", "name", ")", "is", "not", "None", "]", "\n", "print", "(", "\"Found %d experiments...\"", "%", "len", "(", "filtered_experiments", ")", ")", "\n", "df", "=", "[", "]", "\n", "for", "e", "in", "filtered_experiments", ":", "\n", "        ", "print", "(", "'Evaluate experiment \"%s\" with id %s'", "%", "(", "e", ".", "name", ",", "e", ".", "experiment_id", ")", ")", "\n", "df", ".", "append", "(", "func", "(", "client", ",", "e", ",", "tags", ")", ")", "\n", "", "if", "df", ":", "\n", "        ", "df", "=", "pd", ".", "concat", "(", "df", ")", "\n", "", "else", ":", "\n", "        ", "df", "=", "None", "\n", "\n", "", "return", "df", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised._runs_of_semi_supervised": [[43, 73], ["export_results_semi_supervised._get_replications", "export_results_semi_supervised._filter_complete_with_tag", "pandas.DataFrame", "enumerate", "print", "numpy.zeros", "export_results_semi_supervised._get_test_value", "export_results_semi_supervised._get_test_value", "export_results_semi_supervised._get_val_value", "export_results_semi_supervised._get_num_labeled", "export_results_semi_supervised._get_percent_broken", "export_results_semi_supervised._get_pretraining_mode", "len", "len", "len"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised._get_replications", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised._filter_complete_with_tag", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised._get_test_value", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised._get_test_value", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised._get_val_value", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised._get_num_labeled", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised._get_percent_broken", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised._get_pretraining_mode"], ["", "def", "_runs_of_semi_supervised", "(", "client", ",", "e", ",", "tags", ")", ":", "\n", "    ", "replications", "=", "_get_replications", "(", "client", ",", "e", ")", "\n", "replications", "=", "_filter_complete_with_tag", "(", "replications", ",", "tags", ")", "\n", "df", "=", "pd", ".", "DataFrame", "(", "\n", "np", ".", "zeros", "(", "(", "len", "(", "replications", ")", ",", "7", ")", ")", ",", "\n", "columns", "=", "[", "\n", "\"source\"", ",", "\n", "\"num_labeled\"", ",", "\n", "\"percent_broken\"", ",", "\n", "\"pretrained\"", ",", "\n", "\"test\"", ",", "\n", "\"val\"", ",", "\n", "\"score\"", ",", "\n", "]", ",", "\n", "index", "=", "[", "e", ".", "name", "]", "*", "len", "(", "replications", ")", ",", "\n", ")", "\n", "for", "i", ",", "run", "in", "enumerate", "(", "replications", ")", ":", "\n", "        ", "statics", "=", "[", "\n", "run", ".", "data", ".", "params", "[", "\"fd_source\"", "]", ",", "\n", "_get_num_labeled", "(", "run", ".", "data", ".", "params", "[", "\"percent_fail_runs\"", "]", ")", ",", "\n", "_get_percent_broken", "(", "run", ".", "data", ".", "tags", "[", "\"version\"", "]", ")", ",", "\n", "_get_pretraining_mode", "(", "run", ")", ",", "\n", "]", "\n", "test_rmse", "=", "_get_test_value", "(", "f\"regression_loss_fd{statics[0]}\"", ",", "run", ")", "\n", "test_score", "=", "_get_test_value", "(", "f\"rul_score_fd{statics[0]}\"", ",", "run", ")", "\n", "val_rmse", "=", "_get_val_value", "(", "client", ",", "\"regression_loss\"", ",", "\"regression_loss\"", ",", "run", ")", "\n", "df", ".", "iloc", "[", "i", "]", "=", "statics", "+", "[", "test_rmse", ",", "val_rmse", ",", "test_score", "]", "\n", "", "print", "(", "\"Return %d runs...\"", "%", "len", "(", "df", ")", ")", "\n", "\n", "return", "df", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised._get_replications": [[75, 80], ["client.search_runs", "print", "len"], "function", ["None"], ["", "def", "_get_replications", "(", "client", ",", "experiment", ")", ":", "\n", "    ", "runs", "=", "client", ".", "search_runs", "(", "experiment_ids", "=", "experiment", ".", "experiment_id", ",", "max_results", "=", "9999", ")", "\n", "print", "(", "\"Found %d top-level runs...\"", "%", "len", "(", "runs", ")", ")", "\n", "\n", "return", "runs", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised._filter_complete_with_tag": [[82, 93], ["numpy.unique", "any", "r.data.tags[].startswith"], "function", ["None"], ["", "def", "_filter_complete_with_tag", "(", "replications", ",", "tags", ")", ":", "\n", "    ", "versions", "=", "[", "\n", "r", ".", "data", ".", "tags", "[", "\"version\"", "]", "\n", "for", "r", "in", "replications", "\n", "if", "any", "(", "r", ".", "data", ".", "tags", "[", "\"version\"", "]", ".", "startswith", "(", "t", ")", "for", "t", "in", "tags", ")", "\n", "]", "\n", "versions", ",", "version_counts", "=", "np", ".", "unique", "(", "versions", ",", "return_counts", "=", "True", ")", "\n", "versions", "=", "versions", "[", "version_counts", "==", "10", "]", "\n", "replications", "=", "[", "r", "for", "r", "in", "replications", "if", "r", ".", "data", ".", "tags", "[", "\"version\"", "]", "in", "versions", "]", "\n", "\n", "return", "replications", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised._get_num_labeled": [[95, 97], ["len", "LIST_PATTERN.findall"], "function", ["None"], ["", "def", "_get_num_labeled", "(", "percent_labeled", ")", ":", "\n", "    ", "return", "len", "(", "LIST_PATTERN", ".", "findall", "(", "percent_labeled", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised._get_pretraining_mode": [[99, 109], ["None"], "function", ["None"], ["", "def", "_get_pretraining_mode", "(", "run", ")", ":", "\n", "    ", "version", "=", "run", ".", "data", ".", "tags", "[", "\"version\"", "]", "\n", "if", "\"baseline\"", "in", "version", ":", "\n", "        ", "return", "\"no pretraining\"", "\n", "", "elif", "\"autoencoder\"", "in", "version", ":", "\n", "        ", "return", "\"autoencoder\"", "\n", "", "elif", "\"rbm\"", "in", "version", ":", "\n", "        ", "return", "\"rbm\"", "\n", "", "else", ":", "\n", "        ", "return", "\"metric\"", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised._get_percent_broken": [[111, 120], ["VERSION_PATTERN.match", "float", "ValueError", "VERSION_PATTERN.match.group"], "function", ["None"], ["", "", "def", "_get_percent_broken", "(", "version", ")", ":", "\n", "    ", "match", "=", "VERSION_PATTERN", ".", "match", "(", "version", ")", "\n", "if", "match", "is", "not", "None", ":", "\n", "        ", "percent_broken", "=", "match", ".", "group", "(", "\"percent_broken\"", ")", "or", "\"0.0\"", "\n", "percent_broken", "=", "float", "(", "percent_broken", ")", "\n", "", "else", ":", "\n", "        ", "raise", "ValueError", "(", "f\"Could not parse version tag '{version}'\"", ")", "\n", "\n", "", "return", "percent_broken", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised._get_test_value": [[122, 131], ["None"], "function", ["None"], ["", "def", "_get_test_value", "(", "metric", ",", "run", ")", ":", "\n", "    ", "\"\"\"Return test value of selected metric.\"\"\"", "\n", "test_metric", "=", "f\"test/{metric}\"", "\n", "if", "test_metric", "in", "run", ".", "data", ".", "metrics", ":", "\n", "        ", "best_value", "=", "run", ".", "data", ".", "metrics", "[", "test_metric", "]", "\n", "", "else", ":", "\n", "        ", "best_value", "=", "np", ".", "nan", "\n", "\n", "", "return", "best_value", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.export_results_semi_supervised._get_val_value": [[133, 146], ["client.get_metric_history", "numpy.argmin", "client.get_metric_history"], "function", ["None"], ["", "def", "_get_val_value", "(", "client", ",", "metric", ",", "indicator_metric", ",", "run", ")", ":", "\n", "    ", "\"\"\"Return test value of selected metric.\"\"\"", "\n", "val_metric", "=", "f\"val/{metric}\"", "\n", "val_indicator", "=", "f\"val/{indicator_metric}\"", "\n", "if", "val_metric", "in", "run", ".", "data", ".", "metrics", "and", "val_indicator", "in", "run", ".", "data", ".", "metrics", ":", "\n", "        ", "indicator_values", "=", "client", ".", "get_metric_history", "(", "run", ".", "info", ".", "run_id", ",", "val_indicator", ")", "\n", "best_indicator_idx", "=", "np", ".", "argmin", "(", "[", "m", ".", "value", "for", "m", "in", "indicator_values", "]", ")", "\n", "metric_value", "=", "client", ".", "get_metric_history", "(", "run", ".", "info", ".", "run_id", ",", "val_metric", ")", "\n", "best_value", "=", "metric_value", "[", "best_indicator_idx", "]", ".", "value", "\n", "", "else", ":", "\n", "        ", "best_value", "=", "np", ".", "nan", "\n", "\n", "", "return", "best_value", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised.plot": [[11, 30], ["pandas.read_csv", "plot_semi_supervised._preprocess_data", "plot_semi_supervised._generate_table", "plot_semi_supervised._generate_table", "plot_semi_supervised._plot_val_test", "plot_semi_supervised._vs_broken", "_vs_broken.save", "plot_semi_supervised._vs_broken", "_vs_broken.save", "file_path.replace", "file_path.replace"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._preprocess_data", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._generate_table", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._generate_table", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._plot_val_test", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._vs_broken", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._vs_broken"], ["def", "plot", "(", "file_path", ")", ":", "\n", "    ", "df", "=", "pd", ".", "read_csv", "(", "file_path", ",", "index_col", "=", "0", ")", "\n", "df", "=", "_preprocess_data", "(", "df", ")", "\n", "\n", "percent_broken", "=", "[", "40", ",", "60", ",", "70", ",", "80", ",", "90", "]", "\n", "percent_labeled", "=", "[", "2", ",", "10", ",", "20", ",", "40", ",", "100", "]", "\n", "\n", "plotnine", ".", "options", ".", "figure_size", "=", "(", "15", ",", "8", ")", "\n", "for", "broken", "in", "percent_broken", ":", "\n", "        ", "plot_df", "=", "df", "[", "(", "df", "[", "\"percent_broken\"", "]", "==", "broken", ")", "|", "(", "df", "[", "\"percent_broken\"", "]", "==", "0.0", ")", "]", "\n", "_plot_val_test", "(", "plot_df", ",", "broken", ",", "file_path", ")", "\n", "", "for", "labeled", "in", "percent_labeled", ":", "\n", "        ", "plot_df", "=", "df", "[", "(", "df", "[", "\"num_labeled\"", "]", "==", "labeled", ")", "&", "(", "df", "[", "\"percent_broken\"", "]", ">", "0.0", ")", "]", "\n", "gg", "=", "_vs_broken", "(", "plot_df", ",", "\"test\"", ")", "\n", "gg", ".", "save", "(", "file_path", ".", "replace", "(", "\".csv\"", ",", "f\"_test_labeled@{labeled}.pdf\"", ")", ")", "\n", "gg", "=", "_vs_broken", "(", "plot_df", ",", "\"score\"", ",", "log_scale", "=", "True", ")", "\n", "gg", ".", "save", "(", "file_path", ".", "replace", "(", "\".csv\"", ",", "f\"_score_labeled@{labeled}.pdf\"", ")", ")", "\n", "", "_generate_table", "(", "df", ",", "\"test\"", ")", "\n", "_generate_table", "(", "df", ",", "\"score\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._preprocess_data": [[32, 63], ["df[].map", "df[].map", "df[].map"], "function", ["None"], ["", "def", "_preprocess_data", "(", "df", ")", ":", "\n", "    ", "method2displayname", "=", "{", "\n", "\"no pretraining\"", ":", "\"None\"", ",", "\n", "\"metric\"", ":", "\"Self-Supervised\"", ",", "\n", "\"autoencoder\"", ":", "\"Autoencoder\"", ",", "\n", "\"rbm\"", ":", "\"RBM\"", ",", "\n", "}", "\n", "df", "[", "\"Pre-Training\"", "]", "=", "df", "[", "\"pretrained\"", "]", ".", "map", "(", "method2displayname", ")", "\n", "num2percent_labeled", "=", "{", "\n", "1.0", ":", "2", ",", "\n", "4.0", ":", "2", ",", "\n", "3.0", ":", "2", ",", "\n", "8.0", ":", "10", ",", "\n", "20.0", ":", "10", ",", "\n", "19.0", ":", "10", ",", "\n", "16.0", ":", "20", ",", "\n", "41.0", ":", "20", ",", "\n", "39.0", ":", "20", ",", "\n", "32.0", ":", "40", ",", "\n", "83.0", ":", "40", ",", "\n", "79.0", ":", "40", ",", "\n", "80.0", ":", "100", ",", "\n", "208.0", ":", "100", ",", "\n", "199.0", ":", "100", ",", "\n", "}", "\n", "df", "[", "\"num_labeled\"", "]", "=", "df", "[", "\"num_labeled\"", "]", ".", "map", "(", "num2percent_labeled", ")", "\n", "num2subset", "=", "{", "1", ":", "\"FD001\"", ",", "2", ":", "\"FD002\"", ",", "3", ":", "\"FD003\"", ",", "4", ":", "\"FD004\"", "}", "\n", "df", "[", "\"source\"", "]", "=", "df", "[", "\"source\"", "]", ".", "map", "(", "num2subset", ")", "\n", "df", "[", "\"percent_broken\"", "]", "=", "(", "df", "[", "\"percent_broken\"", "]", "*", "100", ")", ".", "astype", "(", "int", ")", "\n", "\n", "return", "df", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._plot_val_test": [[65, 77], ["pandas.Categorical", "plot_semi_supervised._vs_labeled", "_vs_labeled.save", "plot_semi_supervised._vs_labeled", "_vs_labeled.save", "plot_semi_supervised._vs_labeled", "_vs_labeled.save", "file_path.replace", "file_path.replace", "file_path.replace"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._vs_labeled", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._vs_labeled", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._vs_labeled"], ["", "def", "_plot_val_test", "(", "plot_df", ",", "broken", ",", "file_path", ")", ":", "\n", "    ", "plot_df", ".", "loc", "[", ":", ",", "\"Pre-Training\"", "]", "=", "pd", ".", "Categorical", "(", "\n", "plot_df", "[", "\"Pre-Training\"", "]", ",", "\n", "[", "\"None\"", ",", "\"Self-Supervised\"", ",", "\"Autoencoder\"", ",", "\"RBM\"", "]", ",", "\n", "ordered", "=", "True", ",", "\n", ")", "\n", "gg", "=", "_vs_labeled", "(", "plot_df", ",", "\"val\"", ")", "\n", "gg", ".", "save", "(", "file_path", ".", "replace", "(", "\".csv\"", ",", "f\"_val@{broken:.2f}.pdf\"", ")", ")", "\n", "gg", "=", "_vs_labeled", "(", "plot_df", ",", "\"test\"", ")", "\n", "gg", ".", "save", "(", "file_path", ".", "replace", "(", "\".csv\"", ",", "f\"_test@{broken:.2f}.pdf\"", ")", ")", "\n", "gg", "=", "_vs_labeled", "(", "plot_df", ",", "\"score\"", ",", "log_scale", "=", "True", ")", "\n", "gg", ".", "save", "(", "file_path", ".", "replace", "(", "\".csv\"", ",", "f\"_score@{broken:.2f}.pdf\"", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._vs_labeled": [[79, 106], ["df.sort_values.sort_values", "plotnine.theme", "plotnine.ylab", "plotnine.ylab", "plotnine.scale_y_log10", "plotnine.theme_classic", "plotnine.xlab", "plotnine.scale_color_manual", "plotnine.facet_wrap", "plotnine.ggplot", "plotnine.stat_boxplot", "matplotlib.colors.rgb2hex", "plotnine.aes", "plotnine.aes", "matplotlib.cm.get_cmap"], "function", ["None"], ["", "def", "_vs_labeled", "(", "df", ",", "column", ",", "log_scale", "=", "False", ")", ":", "\n", "    ", "df", "=", "df", ".", "sort_values", "(", "\"Pre-Training\"", ")", "\n", "gg", "=", "(", "\n", "ggplot", "(", "df", ",", "aes", "(", "x", "=", "\"num_labeled\"", ",", "y", "=", "column", ")", ")", "\n", "+", "plotnine", ".", "stat_boxplot", "(", "\n", "aes", "(", "\n", "y", "=", "column", ",", "\n", "x", "=", "\"factor(num_labeled)\"", ",", "\n", "color", "=", "\"Pre-Training\"", ",", "\n", ")", "\n", ")", "\n", "+", "plotnine", ".", "facet_wrap", "(", "\"source\"", ",", "nrow", "=", "2", ",", "ncol", "=", "2", ",", "scales", "=", "\"free_x\"", ")", "\n", "+", "plotnine", ".", "scale_color_manual", "(", "\n", "[", "colors", ".", "rgb2hex", "(", "c", ")", "for", "c", "in", "cm", ".", "get_cmap", "(", "\"tab10\"", ")", ".", "colors", "]", "\n", ")", "\n", "+", "plotnine", ".", "xlab", "(", "\"Percent Labeled\"", ")", "\n", "+", "plotnine", ".", "theme_classic", "(", "base_size", "=", "20", ")", "\n", "+", "plotnine", ".", "theme", "(", "subplots_adjust", "=", "{", "\"hspace\"", ":", "0.25", "}", ")", "\n", ")", "\n", "if", "column", "==", "\"score\"", ":", "\n", "        ", "gg", "+=", "plotnine", ".", "ylab", "(", "\"RUL Score\"", ")", "\n", "", "else", ":", "\n", "        ", "gg", "+=", "plotnine", ".", "ylab", "(", "\"RMSE\"", ")", "\n", "", "if", "log_scale", ":", "\n", "        ", "gg", "+=", "plotnine", ".", "scale_y_log10", "(", ")", "\n", "\n", "", "return", "gg", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._vs_broken": [[108, 140], ["pandas.Categorical", "df.sort_values.sort_values", "plotnine.theme", "plotnine.ylab", "plotnine.ylab", "plotnine.scale_y_log10", "plotnine.theme_classic", "plotnine.xlab", "plotnine.scale_color_manual", "plotnine.facet_wrap", "plotnine.ggplot", "plotnine.stat_boxplot", "matplotlib.colors.rgb2hex", "plotnine.aes", "plotnine.aes", "matplotlib.cm.get_cmap"], "function", ["None"], ["", "def", "_vs_broken", "(", "df", ",", "column", ",", "log_scale", "=", "False", ")", ":", "\n", "    ", "df", ".", "loc", "[", ":", ",", "\"Pre-Training\"", "]", "=", "pd", ".", "Categorical", "(", "\n", "df", "[", "\"Pre-Training\"", "]", ",", "\n", "[", "\"Self-Supervised\"", ",", "\"Autoencoder\"", ",", "\"RBM\"", "]", ",", "\n", "ordered", "=", "True", ",", "\n", ")", "\n", "df", "=", "df", ".", "sort_values", "(", "\"Pre-Training\"", ")", "\n", "gg", "=", "(", "\n", "ggplot", "(", "df", ",", "aes", "(", "x", "=", "\"percent_broken\"", ",", "y", "=", "column", ")", ")", "\n", "+", "plotnine", ".", "stat_boxplot", "(", "\n", "aes", "(", "\n", "y", "=", "column", ",", "\n", "x", "=", "\"factor(percent_broken)\"", ",", "\n", "color", "=", "\"Pre-Training\"", ",", "\n", ")", "\n", ")", "\n", "+", "plotnine", ".", "facet_wrap", "(", "\"source\"", ",", "nrow", "=", "2", ",", "ncol", "=", "2", ")", "\n", "+", "plotnine", ".", "scale_color_manual", "(", "\n", "[", "colors", ".", "rgb2hex", "(", "c", ")", "for", "c", "in", "cm", ".", "get_cmap", "(", "\"tab10\"", ")", ".", "colors", "[", "1", ":", "]", "]", "\n", ")", "\n", "+", "plotnine", ".", "xlab", "(", "\"Grade of Degradation\"", ")", "\n", "+", "plotnine", ".", "theme_classic", "(", "base_size", "=", "20", ")", "\n", "+", "plotnine", ".", "theme", "(", "subplots_adjust", "=", "{", "\"hspace\"", ":", "0.25", "}", ")", "\n", ")", "\n", "if", "column", "==", "\"score\"", ":", "\n", "        ", "gg", "+=", "plotnine", ".", "ylab", "(", "\"RUL Score\"", ")", "\n", "", "else", ":", "\n", "        ", "gg", "+=", "plotnine", ".", "ylab", "(", "\"RMSE\"", ")", "\n", "", "if", "log_scale", ":", "\n", "        ", "gg", "+=", "plotnine", ".", "scale_y_log10", "(", ")", "\n", "\n", "", "return", "gg", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._replace_power_fmt": [[145, 152], ["POWER_PATTERN.finditer", "match.group", "int", "string.replace.replace", "match.group", "match.group"], "function", ["None"], ["def", "_replace_power_fmt", "(", "string", ")", ":", "\n", "    ", "for", "match", "in", "POWER_PATTERN", ".", "finditer", "(", "string", ")", ":", "\n", "        ", "base", "=", "match", ".", "group", "(", "\"base\"", ")", "\n", "exponent", "=", "int", "(", "match", ".", "group", "(", "\"exponent\"", ")", ")", "\n", "string", "=", "string", ".", "replace", "(", "match", ".", "group", "(", ")", ",", "fr\"{base}e{exponent}\"", ")", "\n", "\n", "", "return", "string", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._generate_table": [[154, 189], ["_make_multirows.filter", "_make_multirows.groupby", "_make_multirows.agg().reset_index", "plot_semi_supervised._get_argmins", "_make_multirows.pivot", "_make_multirows.reset_index().sort_index().droplevel", "plot_semi_supervised._mark_best", "plot_semi_supervised._rename_methods", "plot_semi_supervised._make_multirows", "df[].combine", "df[].apply", "df[].combine", "print", "_make_multirows.agg", "_make_multirows.reset_index().sort_index", "tabulate.tabulate", "pandas.NamedAgg", "pandas.NamedAgg", "_make_multirows.reset_index"], "function", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._get_argmins", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._mark_best", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._rename_methods", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._make_multirows"], ["", "def", "_generate_table", "(", "df", ":", "pd", ".", "DataFrame", ",", "column", ")", ":", "\n", "    ", "df", "=", "df", ".", "filter", "(", "\n", "items", "=", "[", "\"source\"", ",", "\"Pre-Training\"", ",", "\"percent_broken\"", ",", "\"num_labeled\"", ",", "column", "]", ",", "\n", "axis", "=", "1", ",", "\n", ")", "\n", "df", "=", "df", ".", "groupby", "(", "[", "\"source\"", ",", "\"Pre-Training\"", ",", "\"percent_broken\"", ",", "\"num_labeled\"", "]", ")", "\n", "df", "=", "df", ".", "agg", "(", "\n", "mean", "=", "pd", ".", "NamedAgg", "(", "column", ",", "\"mean\"", ")", ",", "std", "=", "pd", ".", "NamedAgg", "(", "column", ",", "\"std\"", ")", "\n", ")", ".", "reset_index", "(", ")", "\n", "if", "column", "==", "\"score\"", ":", "\n", "        ", "df", "[", "column", "]", "=", "df", "[", "\"mean\"", "]", ".", "combine", "(", "\n", "df", "[", "\"std\"", "]", ",", "func", "=", "lambda", "mean", ",", "std", ":", "f\"${mean:.2e} \\pm {std:.2e}$\"", "\n", ")", "\n", "df", "[", "column", "]", "=", "df", "[", "column", "]", ".", "apply", "(", "_replace_power_fmt", ")", "\n", "", "else", ":", "\n", "        ", "df", "[", "column", "]", "=", "df", "[", "\"mean\"", "]", ".", "combine", "(", "\n", "df", "[", "\"std\"", "]", ",", "func", "=", "lambda", "mean", ",", "std", ":", "f\"${mean:.2f} \\pm {std:.2f}$\"", "\n", ")", "\n", "", "argmins", "=", "_get_argmins", "(", "df", ")", "\n", "df", "=", "df", ".", "pivot", "(", "\n", "index", "=", "[", "\"Pre-Training\"", ",", "\"percent_broken\"", "]", ",", "\n", "columns", "=", "[", "\"source\"", ",", "\"num_labeled\"", "]", ",", "\n", "values", "=", "[", "column", "]", ",", "\n", ")", "\n", "df", "=", "(", "\n", "df", ".", "reset_index", "(", "level", "=", "\"Pre-Training\"", ")", "\n", ".", "sort_index", "(", "level", "=", "\"percent_broken\"", ")", "\n", ".", "droplevel", "(", "0", ",", "axis", "=", "1", ")", "\n", ")", "\n", "df", "=", "_mark_best", "(", "df", ",", "argmins", ")", "\n", "df", "=", "_rename_methods", "(", "df", ")", "\n", "df", "=", "_make_multirows", "(", "df", ")", "\n", "\n", "for", "fd", "in", "[", "\"FD001\"", ",", "\"FD002\"", ",", "\"FD003\"", ",", "\"FD004\"", "]", ":", "\n", "        ", "print", "(", "tabulate", "(", "df", ".", "loc", "[", ":", ",", "[", "\"\"", ",", "fd", "]", "]", ",", "headers", "=", "\"keys\"", ",", "tablefmt", "=", "\"latex_raw\"", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._get_argmins": [[191, 205], ["df.pivot", "worse_than_baseline.groupby().agg.groupby().agg", "df.pivot.reset_index().groupby().agg", "argmins.droplevel.drop", "argmins.droplevel.droplevel", "worse_than_baseline.groupby().agg.groupby", "df.pivot.reset_index().groupby", "df.pivot.reset_index"], "function", ["None"], ["", "", "def", "_get_argmins", "(", "df", ")", ":", "\n", "    ", "min_df", "=", "df", ".", "pivot", "(", "\n", "index", "=", "[", "\"Pre-Training\"", ",", "\"percent_broken\"", "]", ",", "\n", "columns", "=", "[", "\"source\"", ",", "\"num_labeled\"", "]", ",", "\n", "values", "=", "[", "\"mean\"", "]", ",", "\n", ")", "\n", "worse_than_baseline", "=", "(", "min_df", "-", "min_df", ".", "loc", "[", "(", "\"None\"", ",", "0", ")", ",", ":", "]", ")", ">", "0", "\n", "worse_than_baseline", "=", "worse_than_baseline", ".", "groupby", "(", "[", "\"percent_broken\"", "]", ")", ".", "agg", "(", "all", ")", "\n", "argmins", "=", "min_df", ".", "reset_index", "(", ")", ".", "groupby", "(", "[", "\"percent_broken\"", "]", ")", ".", "agg", "(", "np", ".", "argmin", ")", "\n", "argmins", "=", "argmins", ".", "drop", "(", "(", "\"Pre-Training\"", ",", "\"\"", ",", "\"\"", ")", ",", "axis", "=", "1", ")", "\n", "argmins", "[", "worse_than_baseline", "]", "=", "-", "1", "\n", "argmins", "=", "argmins", ".", "droplevel", "(", "0", ",", "axis", "=", "1", ")", "\n", "\n", "return", "argmins", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._mark_best": [[207, 220], ["argmins.iterrows", "next", "int", "df.loc[].iloc[].strip"], "function", ["None"], ["", "def", "_mark_best", "(", "df", ",", "argmins", ")", ":", "\n", "    ", "row_iter", "=", "argmins", ".", "iterrows", "(", ")", "\n", "next", "(", "row_iter", ")", "# skip baseline row", "\n", "for", "percent_broken", ",", "row", "in", "row_iter", ":", "\n", "        ", "for", "col_idx", "in", "row", ".", "index", ":", "\n", "            ", "min_idx", "=", "int", "(", "argmins", ".", "loc", "[", "percent_broken", ",", "col_idx", "]", ")", "#", "\n", "if", "min_idx", ">", "-", "1", ":", "\n", "                ", "stripped_value", "=", "df", ".", "loc", "[", "percent_broken", ",", "col_idx", "]", ".", "iloc", "[", "min_idx", "]", ".", "strip", "(", "\"$\"", ")", "\n", "df", ".", "loc", "[", "percent_broken", ",", "col_idx", "]", ".", "iloc", "[", "\n", "min_idx", "\n", "]", "=", "f\"$\\mathbf{{{stripped_value}}}$\"", "\n", "\n", "", "", "", "return", "df", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._rename_methods": [[222, 232], ["df.loc[].map"], "function", ["None"], ["", "def", "_rename_methods", "(", "df", ")", ":", "\n", "    ", "method_dict", "=", "{", "\n", "\"Autoencoder\"", ":", "\"AE\"", ",", "\n", "\"Self-Supervised\"", ":", "\"Ours\"", ",", "\n", "\"RBM\"", ":", "\"RBM\"", ",", "\n", "\"None\"", ":", "\"None\"", ",", "\n", "}", "\n", "df", ".", "loc", "[", ":", ",", "(", "\"\"", ",", "\"\"", ")", "]", "=", "df", ".", "loc", "[", ":", ",", "(", "\"\"", ",", "\"\"", ")", "]", ".", "map", "(", "method_dict", ")", "\n", "\n", "return", "df", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.evaluation.plot_semi_supervised._make_multirows": [[234, 246], ["enumerate", "new_index.append", "new_index.append", "new_index.append"], "function", ["None"], ["", "def", "_make_multirows", "(", "df", ")", ":", "\n", "    ", "new_index", "=", "[", "]", "\n", "for", "i", ",", "value", "in", "enumerate", "(", "df", ".", "index", ")", ":", "\n", "        ", "if", "value", "==", "0", ":", "\n", "            ", "new_index", ".", "append", "(", "\"\"", ")", "\n", "", "elif", "i", "%", "3", "==", "1", ":", "\n", "            ", "new_index", ".", "append", "(", "f\"\\multirow{{3}}{{*}}{{{value}\\%}}\"", ")", "\n", "", "else", ":", "\n", "            ", "new_index", ".", "append", "(", "\"\"", ")", "\n", "", "", "df", ".", "index", "=", "new_index", "\n", "\n", "return", "df", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.tests.test_building.TestBuildingFunctions.setUp": [[9, 26], ["None"], "methods", ["None"], ["    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "config", "=", "{", "\n", "\"num_layers\"", ":", "8", ",", "\n", "\"base_filters\"", ":", "16", ",", "\n", "\"domain_tradeoff\"", ":", "1.0", ",", "\n", "\"latent_dim\"", ":", "32", ",", "\n", "\"dropout\"", ":", "0.1", ",", "\n", "\"num_disc_layers\"", ":", "1", ",", "\n", "\"lr\"", ":", "0.01", ",", "\n", "\"batch_size\"", ":", "512", ",", "\n", "}", "\n", "self", ".", "pretraining_config", "=", "{", "\n", "\"domain_tradeoff\"", ":", "2.0", ",", "\n", "\"dropout\"", ":", "0.3", ",", "\n", "\"lr\"", ":", "0.02", ",", "\n", "\"batch_size\"", ":", "256", ",", "\n", "\"distance_mode\"", ":", "\"piecewise\"", ",", "\n", "}", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.tests.test_building.TestBuildingFunctions.test_build_pretraining_metric": [[28, 48], ["unittest.mock.patch", "unittest.mock.patch", "unittest.mock.patch", "unittest.mock.patch", "unittest.mock.patch", "test_building.TestBuildingFunctions._check_build_pretraining"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.tests.test_building.TestBuildingFunctions._check_build_pretraining"], ["", "@", "mock", ".", "patch", "(", "\"lightning.loggers.MinEpochModelCheckpoint\"", ")", "\n", "@", "mock", ".", "patch", "(", "\"lightning.loggers.MLTBLogger\"", ")", "\n", "@", "mock", ".", "patch", "(", "\"building.build.build_pretraining_from_config\"", ")", "\n", "@", "mock", ".", "patch", "(", "\"building.build.build_datamodule\"", ")", "\n", "@", "mock", ".", "patch", "(", "\"building.build.build_trainer\"", ")", "\n", "def", "test_build_pretraining_metric", "(", "\n", "self", ",", "\n", "mock_build_trainer", ",", "\n", "mock_datamodule", ",", "\n", "mock_pretraining_from_config", ",", "\n", "mock_logger", ",", "\n", "mock_checkpoint", ",", "\n", ")", ":", "\n", "        ", "self", ".", "_check_build_pretraining", "(", "\n", "mock_build_trainer", ",", "\n", "mock_checkpoint", ",", "\n", "mock_datamodule", ",", "\n", "mock_logger", ",", "\n", "mock_pretraining_from_config", ",", "\n", "\"metric\"", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.tests.test_building.TestBuildingFunctions.test_build_pretraining_autoencoder": [[50, 70], ["unittest.mock.patch", "unittest.mock.patch", "unittest.mock.patch", "unittest.mock.patch", "unittest.mock.patch", "test_building.TestBuildingFunctions._check_build_pretraining"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.tests.test_building.TestBuildingFunctions._check_build_pretraining"], ["", "@", "mock", ".", "patch", "(", "\"lightning.loggers.MinEpochModelCheckpoint\"", ")", "\n", "@", "mock", ".", "patch", "(", "\"lightning.loggers.MLTBLogger\"", ")", "\n", "@", "mock", ".", "patch", "(", "\"building.build.build_autoencoder_from_config\"", ")", "\n", "@", "mock", ".", "patch", "(", "\"building.build.build_datamodule\"", ")", "\n", "@", "mock", ".", "patch", "(", "\"building.build.build_trainer\"", ")", "\n", "def", "test_build_pretraining_autoencoder", "(", "\n", "self", ",", "\n", "mock_build_trainer", ",", "\n", "mock_datamodule", ",", "\n", "mock_pretraining_from_config", ",", "\n", "mock_logger", ",", "\n", "mock_checkpoint", ",", "\n", ")", ":", "\n", "        ", "self", ".", "_check_build_pretraining", "(", "\n", "mock_build_trainer", ",", "\n", "mock_checkpoint", ",", "\n", "mock_datamodule", ",", "\n", "mock_logger", ",", "\n", "mock_pretraining_from_config", ",", "\n", "\"autoencoder\"", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.tests.test_building.TestBuildingFunctions._check_build_pretraining": [[72, 131], ["building.build.build_pretraining", "mock_logger.assert_called_with", "mock_build_trainer.assert_called_with", "mock_datamodule.assert_called_with", "mock_pretraining_from_config.assert_called_with", "building.get_logdir", "lightning.loggers.pretraining_experiment_name", "mock_datamodule"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_pretraining", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.get_logdir", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.pretraining_experiment_name"], ["", "def", "_check_build_pretraining", "(", "\n", "self", ",", "\n", "mock_build_trainer", ",", "\n", "mock_checkpoint", ",", "\n", "mock_datamodule", ",", "\n", "mock_logger", ",", "\n", "mock_pretraining_from_config", ",", "\n", "mode", ",", "\n", ")", ":", "\n", "        ", "mock_logger", ".", "return_value", "=", "\"mock_logger\"", "\n", "mock_checkpoint", ".", "return_value", "=", "\"mock_checkpoint\"", "\n", "build", ".", "build_pretraining", "(", "\n", "2", ",", "\n", "1", ",", "\n", "0.8", ",", "\n", "0.5", ",", "\n", "self", ".", "config", ",", "\n", "self", ".", "pretraining_config", ",", "\n", "\"cnn\"", ",", "\n", "mode", ",", "\n", "False", ",", "\n", "1", ",", "\n", "42", ",", "\n", "\"version\"", ",", "\n", ")", "\n", "mock_logger", ".", "assert_called_with", "(", "\n", "get_logdir", "(", ")", ",", "\n", "loggers", ".", "pretraining_experiment_name", "(", "2", ",", "1", ")", ",", "\n", "tag", "=", "\"version\"", ",", "\n", "tensorboard_struct", "=", "{", "\n", "\"pb\"", ":", "0.8", ",", "\n", "\"dt\"", ":", "self", ".", "pretraining_config", "[", "\"domain_tradeoff\"", "]", ",", "\n", "}", ",", "\n", ")", "\n", "mock_build_trainer", ".", "assert_called_with", "(", "\n", "\"mock_logger\"", ",", "\n", "\"mock_checkpoint\"", ",", "\n", "max_epochs", "=", "100", ",", "\n", "val_interval", "=", "1.0", ",", "\n", "gpu", "=", "1", ",", "\n", "seed", "=", "42", ",", "\n", ")", "\n", "mock_datamodule", ".", "assert_called_with", "(", "\n", "2", ",", "\n", "1", ",", "\n", "0.8", ",", "\n", "0.5", ",", "\n", "self", ".", "pretraining_config", "[", "\"batch_size\"", "]", ",", "\n", "True", ",", "\n", "\"piecewise\"", ",", "\n", "1", ",", "\n", ")", "\n", "mock_pretraining_from_config", ".", "assert_called_with", "(", "\n", "self", ".", "config", ",", "\n", "self", ".", "pretraining_config", ",", "\n", "mock_datamodule", "(", ")", ".", "window_size", ",", "\n", "\"cnn\"", ",", "\n", "False", ",", "\n", "True", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.tests.test_building.TestBuildingFunctions.test_build_pretraining_from_config": [[133, 137], ["unittest.mock.patch", "test_building.TestBuildingFunctions._check_pretraining_from_config"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.tests.test_building.TestBuildingFunctions._check_pretraining_from_config"], ["", "@", "mock", ".", "patch", "(", "\"lightning.pretraining.UnsupervisedPretraining\"", ")", "\n", "def", "test_build_pretraining_from_config", "(", "self", ",", "mock_pretraining", ")", ":", "\n", "        ", "self", ".", "_check_pretraining_from_config", "(", "\n", "build", ".", "build_pretraining_from_config", ",", "mock_pretraining", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.tests.test_building.TestBuildingFunctions.test_build_autoencoder_from_config": [[139, 143], ["unittest.mock.patch", "test_building.TestBuildingFunctions._check_pretraining_from_config"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.tests.test_building.TestBuildingFunctions._check_pretraining_from_config"], ["", "@", "mock", ".", "patch", "(", "\"lightning.autoencoder.AutoencoderPretraining\"", ")", "\n", "def", "test_build_autoencoder_from_config", "(", "self", ",", "mock_autoencoder", ")", ":", "\n", "        ", "self", ".", "_check_pretraining_from_config", "(", "\n", "build", ".", "build_autoencoder_from_config", ",", "mock_autoencoder", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.tests.test_building.TestBuildingFunctions._check_pretraining_from_config": [[145, 183], ["building_func", "mock_pretraining.assert_called_with", "building_func", "mock_pretraining.assert_called_with"], "methods", ["None"], ["", "def", "_check_pretraining_from_config", "(", "self", ",", "building_func", ",", "mock_pretraining", ")", ":", "\n", "        ", "building_func", "(", "\n", "self", ".", "config", ",", "self", ".", "pretraining_config", ",", "30", ",", "\"cnn\"", ",", "False", ",", "use_adaption", "=", "True", "\n", ")", "\n", "mock_pretraining", ".", "assert_called_with", "(", "\n", "in_channels", "=", "14", ",", "\n", "seq_len", "=", "30", ",", "\n", "num_layers", "=", "self", ".", "config", "[", "\"num_layers\"", "]", ",", "\n", "kernel_size", "=", "3", ",", "\n", "base_filters", "=", "self", ".", "config", "[", "\"base_filters\"", "]", ",", "\n", "latent_dim", "=", "self", ".", "config", "[", "\"latent_dim\"", "]", ",", "\n", "encoder", "=", "\"cnn\"", ",", "\n", "dropout", "=", "self", ".", "pretraining_config", "[", "\"dropout\"", "]", ",", "\n", "domain_tradeoff", "=", "self", ".", "pretraining_config", "[", "\"domain_tradeoff\"", "]", ",", "\n", "domain_disc_dim", "=", "self", ".", "config", "[", "\"latent_dim\"", "]", ",", "\n", "num_disc_layers", "=", "self", ".", "config", "[", "\"num_disc_layers\"", "]", ",", "\n", "lr", "=", "self", ".", "pretraining_config", "[", "\"lr\"", "]", ",", "\n", "weight_decay", "=", "0.0", ",", "\n", "record_embeddings", "=", "False", ",", "\n", ")", "\n", "building_func", "(", "\n", "self", ".", "config", ",", "self", ".", "pretraining_config", ",", "30", ",", "\"cnn\"", ",", "False", ",", "use_adaption", "=", "False", "\n", ")", "\n", "mock_pretraining", ".", "assert_called_with", "(", "\n", "in_channels", "=", "14", ",", "\n", "seq_len", "=", "30", ",", "\n", "num_layers", "=", "self", ".", "config", "[", "\"num_layers\"", "]", ",", "\n", "kernel_size", "=", "3", ",", "\n", "base_filters", "=", "self", ".", "config", "[", "\"base_filters\"", "]", ",", "\n", "latent_dim", "=", "self", ".", "config", "[", "\"latent_dim\"", "]", ",", "\n", "encoder", "=", "\"cnn\"", ",", "\n", "dropout", "=", "self", ".", "pretraining_config", "[", "\"dropout\"", "]", ",", "\n", "domain_tradeoff", "=", "0.0", ",", "\n", "domain_disc_dim", "=", "self", ".", "config", "[", "\"latent_dim\"", "]", ",", "\n", "num_disc_layers", "=", "self", ".", "config", "[", "\"num_disc_layers\"", "]", ",", "\n", "lr", "=", "self", ".", "pretraining_config", "[", "\"lr\"", "]", ",", "\n", "weight_decay", "=", "0.0", ",", "\n", "record_embeddings", "=", "False", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.tests.test_building.TestBuildingFunctions.test_build_baseline": [[185, 246], ["unittest.mock.patch", "unittest.mock.patch", "unittest.mock.patch", "unittest.mock.patch", "unittest.mock.patch", "test_building.TestBuildingFunctions.subTest", "building.build.build_baseline", "mock_logger.assert_called_with", "mock_build_trainer.assert_called_with", "mock_datamodule.assert_called_with", "mock_baseline_from_config.assert_called_with", "test_building.TestBuildingFunctions.subTest", "building.build.build_baseline", "mock_build_trainer.assert_called_with", "mock_datamodule.assert_called_with", "mock_baseline_from_config.assert_called_with", "building.get_logdir", "lightning.loggers.baseline_experiment_name", "mock_datamodule", "mock_datamodule"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_baseline", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_baseline", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build_common.get_logdir", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.baseline_experiment_name"], ["", "@", "mock", ".", "patch", "(", "\"pytorch_lightning.callbacks.ModelCheckpoint\"", ")", "\n", "@", "mock", ".", "patch", "(", "\"lightning.loggers.MLTBLogger\"", ")", "\n", "@", "mock", ".", "patch", "(", "\"building.build.build_baseline_from_config\"", ")", "\n", "@", "mock", ".", "patch", "(", "\"datasets.BaselineDataModule\"", ")", "\n", "@", "mock", ".", "patch", "(", "\"building.build.build_trainer\"", ")", "\n", "def", "test_build_baseline", "(", "\n", "self", ",", "\n", "mock_build_trainer", ",", "\n", "mock_datamodule", ",", "\n", "mock_baseline_from_config", ",", "\n", "mock_logger", ",", "\n", "mock_checkpoint", ",", "\n", ")", ":", "\n", "        ", "mock_logger", ".", "return_value", "=", "\"mock_logger\"", "\n", "mock_checkpoint", ".", "return_value", "=", "\"mock_checkpoint\"", "\n", "with", "self", ".", "subTest", "(", "\"no_encoder\"", ")", ":", "\n", "            ", "build", ".", "build_baseline", "(", "2", ",", "1.0", ",", "self", ".", "config", ",", "\"cnn\"", ",", "None", ",", "1", ",", "42", ",", "\"version\"", ")", "\n", "mock_logger", ".", "assert_called_with", "(", "\n", "get_logdir", "(", ")", ",", "\n", "loggers", ".", "baseline_experiment_name", "(", "2", ")", ",", "\n", "tag", "=", "\"version\"", ",", "\n", ")", "\n", "mock_build_trainer", ".", "assert_called_with", "(", "\n", "\"mock_logger\"", ",", "\n", "\"mock_checkpoint\"", ",", "\n", "max_epochs", "=", "100", ",", "\n", "val_interval", "=", "1.0", ",", "\n", "gpu", "=", "1", ",", "\n", "seed", "=", "42", ",", "\n", ")", "\n", "mock_datamodule", ".", "assert_called_with", "(", "\n", "fd_source", "=", "2", ",", "percent_fail_runs", "=", "1.0", ",", "batch_size", "=", "self", ".", "config", "[", "\"batch_size\"", "]", "\n", ")", "\n", "mock_baseline_from_config", ".", "assert_called_with", "(", "\n", "self", ".", "config", ",", "\n", "mock_datamodule", "(", ")", ".", "window_size", ",", "\n", "\"cnn\"", ",", "\n", "None", ",", "\n", "False", ",", "\n", ")", "\n", "", "with", "self", ".", "subTest", "(", "\"with_encoder\"", ")", ":", "\n", "            ", "build", ".", "build_baseline", "(", "\n", "2", ",", "1.0", ",", "self", ".", "config", ",", "\"cnn\"", ",", "\"encoder_path\"", ",", "1", ",", "42", ",", "\"version\"", "\n", ")", "\n", "mock_build_trainer", ".", "assert_called_with", "(", "\n", "\"mock_logger\"", ",", "\n", "\"mock_checkpoint\"", ",", "\n", "max_epochs", "=", "100", ",", "\n", "val_interval", "=", "1.0", ",", "\n", "gpu", "=", "1", ",", "\n", "seed", "=", "42", ",", "\n", ")", "\n", "mock_datamodule", ".", "assert_called_with", "(", "\n", "fd_source", "=", "2", ",", "percent_fail_runs", "=", "1.0", ",", "batch_size", "=", "self", ".", "config", "[", "\"batch_size\"", "]", "\n", ")", "\n", "mock_baseline_from_config", ".", "assert_called_with", "(", "\n", "self", ".", "config", ",", "\n", "mock_datamodule", "(", ")", ".", "window_size", ",", "\n", "\"cnn\"", ",", "\n", "\"encoder_path\"", ",", "\n", "False", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.tests.test_building.TestBuildingFunctions.test_build_baseline_from_config": [[248, 258], ["unittest.mock.patch", "test_building.TestBuildingFunctions.subTest", "building.build.build_baseline_from_config", "test_building.TestBuildingFunctions._assert_baseline_build_correctly", "mock_baseline().load_encoder.assert_not_called", "test_building.TestBuildingFunctions.subTest", "building.build.build_baseline_from_config", "test_building.TestBuildingFunctions._assert_baseline_build_correctly", "mock_baseline().load_encoder.assert_called_with", "mock_baseline", "mock_baseline"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_baseline_from_config", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.tests.test_building.TestBuildingFunctions._assert_baseline_build_correctly", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_baseline_from_config", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.tests.test_building.TestBuildingFunctions._assert_baseline_build_correctly"], ["", "", "@", "mock", ".", "patch", "(", "\"lightning.baseline.Baseline\"", ")", "\n", "def", "test_build_baseline_from_config", "(", "self", ",", "mock_baseline", ")", ":", "\n", "        ", "with", "self", ".", "subTest", "(", "\"no_encoder\"", ")", ":", "\n", "            ", "build", ".", "build_baseline_from_config", "(", "self", ".", "config", ",", "30", ",", "\"cnn\"", ",", "None", ")", "\n", "self", ".", "_assert_baseline_build_correctly", "(", "mock_baseline", ")", "\n", "mock_baseline", "(", ")", ".", "load_encoder", ".", "assert_not_called", "(", ")", "\n", "", "with", "self", ".", "subTest", "(", "\"with_encoder\"", ")", ":", "\n", "            ", "build", ".", "build_baseline_from_config", "(", "self", ".", "config", ",", "30", ",", "\"cnn\"", ",", "\"encoder_path\"", ")", "\n", "self", ".", "_assert_baseline_build_correctly", "(", "mock_baseline", ")", "\n", "mock_baseline", "(", ")", ".", "load_encoder", ".", "assert_called_with", "(", "\"encoder_path\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.tests.test_building.TestBuildingFunctions._assert_baseline_build_correctly": [[259, 272], ["mock_baseline.assert_called_with"], "methods", ["None"], ["", "", "def", "_assert_baseline_build_correctly", "(", "self", ",", "mock_baseline", ")", ":", "\n", "        ", "mock_baseline", ".", "assert_called_with", "(", "\n", "in_channels", "=", "14", ",", "\n", "seq_len", "=", "30", ",", "\n", "num_layers", "=", "self", ".", "config", "[", "\"num_layers\"", "]", ",", "\n", "kernel_size", "=", "3", ",", "\n", "base_filters", "=", "self", ".", "config", "[", "\"base_filters\"", "]", ",", "\n", "latent_dim", "=", "self", ".", "config", "[", "\"latent_dim\"", "]", ",", "\n", "dropout", "=", "self", ".", "config", "[", "\"dropout\"", "]", ",", "\n", "optim_type", "=", "\"adam\"", ",", "\n", "lr", "=", "self", ".", "config", "[", "\"lr\"", "]", ",", "\n", "record_embeddings", "=", "False", ",", "\n", "encoder", "=", "\"cnn\"", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestCMAPSS.test_data": [[14, 27], ["enumerate", "datasets.cmapss.CMAPSSDataModule", "datasets.cmapss.CMAPSSDataModule.prepare_data", "datasets.cmapss.CMAPSSDataModule.setup", "test_cmapss.TestCMAPSS.subTest", "test_cmapss.TestCMAPSS.assertEqual", "test_cmapss.TestCMAPSS.assertEqual", "test_cmapss.TestCMAPSS.assertEqual", "test_cmapss.TestCMAPSS.assertEqual", "len", "len"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader.prepare_data", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.setup"], ["    ", "def", "test_data", "(", "self", ")", ":", "\n", "        ", "window_sizes", "=", "[", "30", ",", "20", ",", "30", ",", "15", "]", "\n", "for", "n", ",", "win", "in", "enumerate", "(", "window_sizes", ",", "start", "=", "1", ")", ":", "\n", "            ", "dataset", "=", "cmapss", ".", "CMAPSSDataModule", "(", "n", ",", "batch_size", "=", "16", ")", "\n", "dataset", ".", "prepare_data", "(", ")", "\n", "dataset", ".", "setup", "(", ")", "\n", "for", "split", "in", "[", "\"dev\"", ",", "\"val\"", ",", "\"test\"", "]", ":", "\n", "                ", "with", "self", ".", "subTest", "(", "fd", "=", "n", ",", "split", "=", "split", ")", ":", "\n", "                    ", "features", ",", "targets", "=", "dataset", ".", "data", "[", "split", "]", "\n", "self", ".", "assertEqual", "(", "win", ",", "features", ".", "shape", "[", "2", "]", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "features", ")", ",", "len", "(", "targets", ")", ")", "\n", "self", ".", "assertEqual", "(", "torch", ".", "float32", ",", "features", ".", "dtype", ")", "\n", "self", ".", "assertEqual", "(", "torch", ".", "float32", ",", "targets", ".", "dtype", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestCMAPSS.test_override_window_size": [[28, 34], ["range", "datasets.cmapss.CMAPSSDataModule", "test_cmapss.TestCMAPSS.assertEqual", "test_cmapss.TestCMAPSS.assertEqual"], "methods", ["None"], ["", "", "", "", "def", "test_override_window_size", "(", "self", ")", ":", "\n", "        ", "window_size", "=", "40", "\n", "for", "n", "in", "range", "(", "1", ",", "5", ")", ":", "\n", "            ", "dataset", "=", "cmapss", ".", "CMAPSSDataModule", "(", "n", ",", "batch_size", "=", "16", ",", "window_size", "=", "window_size", ")", "\n", "self", ".", "assertEqual", "(", "window_size", ",", "dataset", ".", "window_size", ")", "\n", "self", ".", "assertEqual", "(", "window_size", ",", "dataset", ".", "_loader", ".", "window_size", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestCMAPSS.test_default_window_size": [[35, 41], ["enumerate", "datasets.cmapss.CMAPSSDataModule", "test_cmapss.TestCMAPSS.assertEqual", "test_cmapss.TestCMAPSS.assertEqual"], "methods", ["None"], ["", "", "def", "test_default_window_size", "(", "self", ")", ":", "\n", "        ", "window_sizes", "=", "[", "30", ",", "20", ",", "30", ",", "15", "]", "\n", "for", "n", ",", "win", "in", "enumerate", "(", "window_sizes", ",", "start", "=", "1", ")", ":", "\n", "            ", "dataset", "=", "cmapss", ".", "CMAPSSDataModule", "(", "n", ",", "batch_size", "=", "16", ")", "\n", "self", ".", "assertEqual", "(", "win", ",", "dataset", ".", "window_size", ")", "\n", "self", ".", "assertEqual", "(", "win", ",", "dataset", ".", "_loader", ".", "window_size", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestCMAPSS.test_feature_select": [[42, 47], ["datasets.cmapss.CMAPSSDataModule", "test_cmapss.TestCMAPSS.assertListEqual", "test_cmapss.TestCMAPSS.assertListEqual"], "methods", ["None"], ["", "", "def", "test_feature_select", "(", "self", ")", ":", "\n", "        ", "feature_idx", "=", "[", "4", ",", "9", ",", "10", ",", "13", ",", "14", ",", "15", ",", "22", "]", "\n", "dataset", "=", "cmapss", ".", "CMAPSSDataModule", "(", "1", ",", "batch_size", "=", "16", ",", "feature_select", "=", "feature_idx", ")", "\n", "self", ".", "assertListEqual", "(", "feature_idx", ",", "dataset", ".", "feature_select", ")", "\n", "self", ".", "assertListEqual", "(", "feature_idx", ",", "dataset", ".", "_loader", ".", "feature_select", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestCMAPSS.test_default_feature_select": [[48, 53], ["datasets.cmapss.CMAPSSDataModule", "test_cmapss.TestCMAPSS.assertListEqual", "test_cmapss.TestCMAPSS.assertListEqual"], "methods", ["None"], ["", "def", "test_default_feature_select", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "cmapss", ".", "CMAPSSDataModule", "(", "1", ",", "batch_size", "=", "16", ")", "\n", "self", ".", "assertListEqual", "(", "dataset", ".", "_loader", ".", "DEFAULT_CHANNELS", ",", "dataset", ".", "feature_select", ")", "\n", "self", ".", "assertListEqual", "(", "\n", "dataset", ".", "_loader", ".", "DEFAULT_CHANNELS", ",", "dataset", ".", "_loader", ".", "feature_select", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestCMAPSS.test_truncation_functions": [[55, 91], ["datasets.cmapss.CMAPSSDataModule", "datasets.cmapss.CMAPSSDataModule.prepare_data", "datasets.cmapss.CMAPSSDataModule.setup", "datasets.cmapss.CMAPSSDataModule", "datasets.cmapss.CMAPSSDataModule.prepare_data", "datasets.cmapss.CMAPSSDataModule.setup", "test_cmapss.TestCMAPSS.assertGreater", "test_cmapss.TestCMAPSS.assertEqual", "test_cmapss.TestCMAPSS.assertEqual", "datasets.cmapss.CMAPSSDataModule", "datasets.cmapss.CMAPSSDataModule.prepare_data", "datasets.cmapss.CMAPSSDataModule.setup", "test_cmapss.TestCMAPSS.assertGreater", "test_cmapss.TestCMAPSS.assertAlmostEqual", "test_cmapss.TestCMAPSS.assertEqual", "test_cmapss.TestCMAPSS.assertEqual", "test_cmapss.TestCMAPSS.assertFalse", "test_cmapss.TestCMAPSS.assertEqual", "len", "len", "len", "len", "len", "len", "len", "len", "len", "len", "len", "len", "torch.any", "len", "len"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader.prepare_data", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.setup", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader.prepare_data", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.setup", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader.prepare_data", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.setup"], ["", "def", "test_truncation_functions", "(", "self", ")", ":", "\n", "        ", "full_dataset", "=", "cmapss", ".", "CMAPSSDataModule", "(", "fd", "=", "1", ",", "batch_size", "=", "4", ",", "window_size", "=", "30", ")", "\n", "full_dataset", ".", "prepare_data", "(", ")", "\n", "full_dataset", ".", "setup", "(", ")", "\n", "\n", "dataset", "=", "cmapss", ".", "CMAPSSDataModule", "(", "\n", "fd", "=", "1", ",", "batch_size", "=", "4", ",", "window_size", "=", "30", ",", "percent_fail_runs", "=", "0.8", "\n", ")", "\n", "dataset", ".", "prepare_data", "(", ")", "\n", "dataset", ".", "setup", "(", ")", "\n", "self", ".", "assertGreater", "(", "len", "(", "full_dataset", ".", "data", "[", "\"dev\"", "]", "[", "0", "]", ")", ",", "len", "(", "dataset", ".", "data", "[", "\"dev\"", "]", "[", "0", "]", ")", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "full_dataset", ".", "data", "[", "\"val\"", "]", "[", "0", "]", ")", ",", "len", "(", "dataset", ".", "data", "[", "\"val\"", "]", "[", "0", "]", ")", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "full_dataset", ".", "data", "[", "\"test\"", "]", "[", "0", "]", ")", ",", "len", "(", "dataset", ".", "data", "[", "\"test\"", "]", "[", "0", "]", ")", ")", "\n", "\n", "dataset", "=", "cmapss", ".", "CMAPSSDataModule", "(", "\n", "fd", "=", "1", ",", "batch_size", "=", "4", ",", "window_size", "=", "30", ",", "percent_broken", "=", "0.2", "\n", ")", "\n", "dataset", ".", "prepare_data", "(", ")", "\n", "dataset", ".", "setup", "(", ")", "\n", "self", ".", "assertGreater", "(", "len", "(", "full_dataset", ".", "data", "[", "\"dev\"", "]", "[", "0", "]", ")", ",", "len", "(", "dataset", ".", "data", "[", "\"dev\"", "]", "[", "0", "]", ")", ")", "\n", "self", ".", "assertAlmostEqual", "(", "\n", "0.2", ",", "\n", "len", "(", "dataset", ".", "data", "[", "\"dev\"", "]", "[", "0", "]", ")", "/", "len", "(", "full_dataset", ".", "data", "[", "\"dev\"", "]", "[", "0", "]", ")", ",", "\n", "delta", "=", "0.01", ",", "\n", ")", "\n", "self", ".", "assertEqual", "(", "\n", "len", "(", "full_dataset", ".", "data", "[", "\"val\"", "]", "[", "0", "]", ")", ",", "len", "(", "dataset", ".", "data", "[", "\"val\"", "]", "[", "0", "]", ")", "\n", ")", "# Val dataset_tests not truncated", "\n", "self", ".", "assertEqual", "(", "\n", "len", "(", "full_dataset", ".", "data", "[", "\"test\"", "]", "[", "0", "]", ")", ",", "len", "(", "dataset", ".", "data", "[", "\"test\"", "]", "[", "0", "]", ")", "\n", ")", "# Test dataset_tests not truncated", "\n", "self", ".", "assertFalse", "(", "\n", "torch", ".", "any", "(", "dataset", ".", "data", "[", "\"dev\"", "]", "[", "1", "]", "==", "1", ")", "\n", ")", "# No failure dataset_tests in truncated dataset_tests", "\n", "self", ".", "assertEqual", "(", "\n", "full_dataset", ".", "data", "[", "\"dev\"", "]", "[", "1", "]", "[", "0", "]", ",", "dataset", ".", "data", "[", "\"dev\"", "]", "[", "1", "]", "[", "0", "]", "\n", ")", "# First target has to be equal", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestCMAPSS.test_truncation_passed_correctly": [[93, 97], ["datasets.cmapss.CMAPSSDataModule", "test_cmapss.TestCMAPSS.assertEqual", "test_cmapss.TestCMAPSS.assertEqual"], "methods", ["None"], ["", "def", "test_truncation_passed_correctly", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "cmapss", ".", "CMAPSSDataModule", "(", "1", ",", "4", ",", "percent_broken", "=", "0.2", ",", "percent_fail_runs", "=", "0.5", ")", "\n", "self", ".", "assertEqual", "(", "dataset", ".", "percent_broken", ",", "dataset", ".", "_loader", ".", "percent_broken", ")", "\n", "self", ".", "assertEqual", "(", "dataset", ".", "percent_fail_runs", ",", "dataset", ".", "_loader", ".", "percent_fail_runs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestCMAPSS.test_from_loader": [[98, 111], ["datasets.loader.CMAPSSLoader", "datasets.cmapss.CMAPSSDataModule.from_loader", "test_cmapss.TestCMAPSS.assertEqual", "test_cmapss.TestCMAPSS.assertEqual", "test_cmapss.TestCMAPSS.assertEqual", "test_cmapss.TestCMAPSS.assertEqual", "test_cmapss.TestCMAPSS.assertEqual", "test_cmapss.TestCMAPSS.assertEqual", "test_cmapss.TestCMAPSS.assertEqual", "test_cmapss.TestCMAPSS.assertEqual"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.from_loader"], ["", "def", "test_from_loader", "(", "self", ")", ":", "\n", "        ", "cmapss_loader", "=", "loader", ".", "CMAPSSLoader", "(", "3", ",", "40", ",", "130", ",", "0.2", ",", "0.5", ",", "truncate_val", "=", "True", ")", "\n", "cmapss_dataset", "=", "cmapss", ".", "CMAPSSDataModule", ".", "from_loader", "(", "cmapss_loader", ",", "128", ")", "\n", "self", ".", "assertEqual", "(", "cmapss_loader", ".", "fd", ",", "cmapss_dataset", ".", "fd", ")", "\n", "self", ".", "assertEqual", "(", "cmapss_loader", ".", "window_size", ",", "cmapss_dataset", ".", "window_size", ")", "\n", "self", ".", "assertEqual", "(", "cmapss_loader", ".", "max_rul", ",", "cmapss_dataset", ".", "max_rul", ")", "\n", "self", ".", "assertEqual", "(", "cmapss_loader", ".", "percent_broken", ",", "cmapss_dataset", ".", "percent_broken", ")", "\n", "self", ".", "assertEqual", "(", "\n", "cmapss_loader", ".", "percent_fail_runs", ",", "cmapss_dataset", ".", "percent_fail_runs", "\n", ")", "\n", "self", ".", "assertEqual", "(", "cmapss_loader", ".", "feature_select", ",", "cmapss_dataset", ".", "feature_select", ")", "\n", "self", ".", "assertEqual", "(", "cmapss_loader", ".", "truncate_val", ",", "cmapss_dataset", ".", "truncate_val", ")", "\n", "self", ".", "assertEqual", "(", "128", ",", "cmapss_dataset", ".", "batch_size", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestCMAPSS.test_empty_dataset": [[112, 117], ["datasets.cmapss.CMAPSSDataModule", "datasets.cmapss.CMAPSSDataModule.setup", "datasets.cmapss.CMAPSSDataModule", "datasets.cmapss.CMAPSSDataModule.setup"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.setup", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.setup"], ["", "def", "test_empty_dataset", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "cmapss", ".", "CMAPSSDataModule", "(", "1", ",", "4", ",", "percent_broken", "=", "0.2", ",", "percent_fail_runs", "=", "0.0", ")", "\n", "dataset", ".", "setup", "(", ")", "\n", "dataset", "=", "cmapss", ".", "CMAPSSDataModule", "(", "1", ",", "4", ",", "percent_broken", "=", "0.0", ",", "percent_fail_runs", "=", "0.5", ")", "\n", "dataset", ".", "setup", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSS.__init__": [[120, 127], ["torch.zeros", "torch.clamp_max", "torch.arange"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "length", ")", ":", "\n", "        ", "self", ".", "window_size", "=", "30", "\n", "self", ".", "max_rul", "=", "125", "\n", "self", ".", "data", "=", "{", "\n", "\"dev\"", ":", "(", "\n", "[", "torch", ".", "zeros", "(", "length", ",", "self", ".", "window_size", ",", "5", ")", "]", ",", "\n", "[", "torch", ".", "clamp_max", "(", "torch", ".", "arange", "(", "length", ",", "0", ",", "step", "=", "-", "1", ")", ",", "125", ")", "]", ",", "\n", ")", ",", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSS.load_split": [[130, 133], ["None"], "methods", ["None"], ["", "def", "load_split", "(", "self", ",", "split", ")", ":", "\n", "        ", "assert", "split", "==", "\"dev\"", ",", "\"Can only use dev data.\"", "\n", "return", "self", ".", "data", "[", "\"dev\"", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.__init__": [[138, 156], ["torch.zeros", "torch.zeros", "torch.clamp_max", "torch.clamp_max", "torch.ones", "torch.arange().view", "torch.ones", "torch.arange().view", "torch.arange", "torch.ones", "torch.arange", "torch.ones", "torch.arange", "torch.arange"], "methods", ["None"], ["def", "__init__", "(", "self", ")", ":", "\n", "        ", "self", ".", "window_size", "=", "30", "\n", "self", ".", "max_rul", "=", "125", "\n", "self", ".", "data", "=", "{", "\n", "\"dev\"", ":", "(", "\n", "[", "\n", "torch", ".", "ones", "(", "100", ",", "self", ".", "window_size", ",", "5", ")", "\n", "*", "torch", ".", "arange", "(", "1", ",", "101", ")", ".", "view", "(", "100", ",", "1", ",", "1", ")", ",", "# normal run", "\n", "torch", ".", "zeros", "(", "2", ",", "self", ".", "window_size", ",", "5", ")", ",", "# too short run", "\n", "torch", ".", "ones", "(", "100", ",", "self", ".", "window_size", ",", "5", ")", "\n", "*", "torch", ".", "arange", "(", "1", ",", "101", ")", ".", "view", "(", "100", ",", "1", ",", "1", ")", ",", "# normal run", "\n", "torch", ".", "zeros", "(", "1", ",", "self", ".", "window_size", ",", "5", ")", ",", "# empty run", "\n", "]", ",", "\n", "[", "\n", "torch", ".", "clamp_max", "(", "torch", ".", "arange", "(", "100", ",", "0", ",", "step", "=", "-", "1", ")", ",", "125", ")", ",", "\n", "torch", ".", "ones", "(", "2", ")", "*", "500", ",", "\n", "torch", ".", "clamp_max", "(", "torch", ".", "arange", "(", "100", ",", "0", ",", "step", "=", "-", "1", ")", ",", "125", ")", ",", "\n", "torch", ".", "ones", "(", "1", ")", "*", "500", ",", "\n", "]", ",", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split": [[160, 163], ["None"], "methods", ["None"], ["", "def", "load_split", "(", "self", ",", "split", ")", ":", "\n", "        ", "assert", "split", "==", "\"dev\"", ",", "\"Can only use dev data.\"", "\n", "return", "self", ".", "data", "[", "\"dev\"", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestPairedDataset.setUp": [[166, 172], ["test_cmapss.DummyCMAPSS", "test_cmapss.DummyCMAPSSShortRuns", "datasets.loader.CMAPSSLoader", "datasets.loader.CMAPSSLoader"], "methods", ["None"], ["    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "length", "=", "300", "\n", "self", ".", "cmapss_normal", "=", "DummyCMAPSS", "(", "self", ".", "length", ")", "\n", "self", ".", "cmapss_short", "=", "DummyCMAPSSShortRuns", "(", ")", "\n", "self", ".", "fd1", "=", "loader", ".", "CMAPSSLoader", "(", "1", ")", "\n", "self", ".", "fd3", "=", "loader", ".", "CMAPSSLoader", "(", "3", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestPairedDataset.test_get_pair_idx_piecewise": [[173, 183], ["datasets.cmapss.PairedCMAPSS", "range", "datasets.cmapss.PairedCMAPSS._get_pair_idx_piecewise", "test_cmapss.TestPairedDataset.assertEqual", "test_cmapss.TestPairedDataset.assertEqual", "test_cmapss.TestPairedDataset.assertLessEqual", "len"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS._get_pair_idx_piecewise"], ["", "def", "test_get_pair_idx_piecewise", "(", "self", ")", ":", "\n", "        ", "data", "=", "datasets", ".", "cmapss", ".", "PairedCMAPSS", "(", "[", "self", ".", "cmapss_normal", "]", ",", "\"dev\"", ",", "512", ",", "1", ",", "True", ")", "\n", "middle_idx", "=", "self", ".", "length", "//", "2", "\n", "for", "_", "in", "range", "(", "512", ")", ":", "\n", "            ", "run", ",", "anchor_idx", ",", "query_idx", ",", "distance", ",", "_", "=", "data", ".", "_get_pair_idx_piecewise", "(", ")", "\n", "self", ".", "assertEqual", "(", "middle_idx", ",", "len", "(", "run", ")", "//", "2", ")", "\n", "if", "anchor_idx", "<", "middle_idx", ":", "\n", "                ", "self", ".", "assertEqual", "(", "0", ",", "distance", ")", "\n", "", "else", ":", "\n", "                ", "self", ".", "assertLessEqual", "(", "0", ",", "distance", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestPairedDataset.test_get_pair_idx_linear": [[184, 190], ["datasets.cmapss.PairedCMAPSS", "range", "datasets.cmapss.PairedCMAPSS._get_pair_idx", "test_cmapss.TestPairedDataset.assertLess", "test_cmapss.TestPairedDataset.assertGreaterEqual"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS._get_pair_idx"], ["", "", "", "def", "test_get_pair_idx_linear", "(", "self", ")", ":", "\n", "        ", "data", "=", "datasets", ".", "cmapss", ".", "PairedCMAPSS", "(", "[", "self", ".", "cmapss_normal", "]", ",", "\"dev\"", ",", "512", ",", "1", ",", "True", ")", "\n", "for", "_", "in", "range", "(", "512", ")", ":", "\n", "            ", "run", ",", "anchor_idx", ",", "query_idx", ",", "distance", ",", "_", "=", "data", ".", "_get_pair_idx", "(", ")", "\n", "self", ".", "assertLess", "(", "0", ",", "distance", ")", "\n", "self", ".", "assertGreaterEqual", "(", "125", ",", "distance", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestPairedDataset.test_get_labeled_pair_idx": [[191, 199], ["datasets.cmapss.PairedCMAPSS", "range", "datasets.cmapss.PairedCMAPSS._get_labeled_pair_idx", "test_cmapss.TestPairedDataset.assertEqual", "test_cmapss.TestPairedDataset.assertLessEqual", "test_cmapss.TestPairedDataset.assertEqual", "len"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS._get_labeled_pair_idx"], ["", "", "def", "test_get_labeled_pair_idx", "(", "self", ")", ":", "\n", "        ", "data", "=", "datasets", ".", "cmapss", ".", "PairedCMAPSS", "(", "[", "self", ".", "cmapss_normal", "]", ",", "\"dev\"", ",", "512", ",", "1", ",", "True", ")", "\n", "for", "_", "in", "range", "(", "512", ")", ":", "\n", "            ", "run", ",", "anchor_idx", ",", "query_idx", ",", "distance", ",", "_", "=", "data", ".", "_get_labeled_pair_idx", "(", ")", "\n", "self", ".", "assertEqual", "(", "self", ".", "length", ",", "len", "(", "run", ")", ")", "\n", "expected_distance", "=", "data", ".", "_labels", "[", "0", "]", "[", "anchor_idx", "]", "-", "data", ".", "_labels", "[", "0", "]", "[", "query_idx", "]", "\n", "self", ".", "assertLessEqual", "(", "0", ",", "distance", ")", "\n", "self", ".", "assertEqual", "(", "expected_distance", ",", "distance", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestPairedDataset.test_pair_func_selection": [[200, 219], ["test_cmapss.TestPairedDataset.subTest", "datasets.cmapss.PairedCMAPSS", "test_cmapss.TestPairedDataset.assertEqual", "test_cmapss.TestPairedDataset.subTest", "datasets.cmapss.PairedCMAPSS", "test_cmapss.TestPairedDataset.assertEqual", "test_cmapss.TestPairedDataset.subTest", "datasets.cmapss.PairedCMAPSS", "test_cmapss.TestPairedDataset.assertEqual", "test_cmapss.TestPairedDataset.subTest", "datasets.cmapss.PairedCMAPSS", "test_cmapss.TestPairedDataset.assertEqual"], "methods", ["None"], ["", "", "def", "test_pair_func_selection", "(", "self", ")", ":", "\n", "        ", "with", "self", ".", "subTest", "(", "\"default\"", ")", ":", "\n", "            ", "data", "=", "datasets", ".", "cmapss", ".", "PairedCMAPSS", "(", "[", "self", ".", "cmapss_normal", "]", ",", "\"dev\"", ",", "512", ",", "1", ",", "True", ")", "\n", "self", ".", "assertEqual", "(", "data", ".", "_get_pair_idx", ",", "data", ".", "_get_pair_func", ")", "\n", "", "with", "self", ".", "subTest", "(", "\"piecewise\"", ")", ":", "\n", "            ", "data", "=", "datasets", ".", "cmapss", ".", "PairedCMAPSS", "(", "\n", "[", "self", ".", "cmapss_normal", "]", ",", "\"dev\"", ",", "512", ",", "1", ",", "True", ",", "mode", "=", "\"linear\"", "\n", ")", "\n", "self", ".", "assertEqual", "(", "data", ".", "_get_pair_idx", ",", "data", ".", "_get_pair_func", ")", "\n", "", "with", "self", ".", "subTest", "(", "\"piecewise\"", ")", ":", "\n", "            ", "data", "=", "datasets", ".", "cmapss", ".", "PairedCMAPSS", "(", "\n", "[", "self", ".", "cmapss_normal", "]", ",", "\"dev\"", ",", "512", ",", "1", ",", "True", ",", "mode", "=", "\"piecewise\"", "\n", ")", "\n", "self", ".", "assertEqual", "(", "data", ".", "_get_pair_idx_piecewise", ",", "data", ".", "_get_pair_func", ")", "\n", "", "with", "self", ".", "subTest", "(", "\"labeled\"", ")", ":", "\n", "            ", "data", "=", "datasets", ".", "cmapss", ".", "PairedCMAPSS", "(", "\n", "[", "self", ".", "cmapss_normal", "]", ",", "\"dev\"", ",", "512", ",", "1", ",", "True", ",", "mode", "=", "\"labeled\"", "\n", ")", "\n", "self", ".", "assertEqual", "(", "data", ".", "_get_labeled_pair_idx", ",", "data", ".", "_get_pair_func", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestPairedDataset.test_sampled_data": [[220, 236], ["datasets.cmapss.PairedCMAPSS", "unittest.mock.MagicMock", "unittest.mock.MagicMock", "enumerate", "test_cmapss.TestPairedDataset.assertEqual", "test_cmapss.TestPairedDataset.assertEqual", "test_cmapss.TestPairedDataset.assertAlmostEqual", "test_cmapss.TestPairedDataset.assertEqual", "min", "torch.dist", "torch.dist", "sample[].item", "sample[].item"], "methods", ["None"], ["", "", "def", "test_sampled_data", "(", "self", ")", ":", "\n", "        ", "fixed_idx", "=", "[", "0", ",", "60", ",", "80", ",", "1", ",", "55", ",", "99", "]", "# two samples with run, anchor and query idx", "\n", "data", "=", "datasets", ".", "cmapss", ".", "PairedCMAPSS", "(", "[", "self", ".", "cmapss_short", "]", ",", "\"dev\"", ",", "2", ",", "2", ")", "\n", "data", ".", "_rng", "=", "mock", ".", "MagicMock", "(", ")", "\n", "data", ".", "_rng", ".", "integers", "=", "mock", ".", "MagicMock", "(", "side_effect", "=", "fixed_idx", ")", "\n", "for", "i", ",", "sample", "in", "enumerate", "(", "data", ")", ":", "\n", "            ", "idx", "=", "3", "*", "i", "\n", "expected_run", "=", "data", ".", "_features", "[", "fixed_idx", "[", "idx", "]", "]", "\n", "expected_anchor", "=", "expected_run", "[", "fixed_idx", "[", "idx", "+", "1", "]", "]", "\n", "expected_query", "=", "expected_run", "[", "fixed_idx", "[", "idx", "+", "2", "]", "]", "\n", "expected_distance", "=", "min", "(", "125", ",", "fixed_idx", "[", "idx", "+", "2", "]", "-", "fixed_idx", "[", "idx", "+", "1", "]", ")", "/", "125", "\n", "expected_domain_idx", "=", "0", "\n", "self", ".", "assertEqual", "(", "0", ",", "torch", ".", "dist", "(", "expected_anchor", ",", "sample", "[", "0", "]", ")", ")", "\n", "self", ".", "assertEqual", "(", "0", ",", "torch", ".", "dist", "(", "expected_query", ",", "sample", "[", "1", "]", ")", ")", "\n", "self", ".", "assertAlmostEqual", "(", "expected_distance", ",", "sample", "[", "2", "]", ".", "item", "(", ")", ")", "\n", "self", ".", "assertEqual", "(", "expected_domain_idx", ",", "sample", "[", "3", "]", ".", "item", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestPairedDataset.test_discarding_too_short_runs": [[237, 243], ["datasets.cmapss.PairedCMAPSS", "zip", "test_cmapss.TestPairedDataset.assertTrue", "test_cmapss.TestPairedDataset.assertTrue", "test_cmapss.TestPairedDataset.assertLess", "len"], "methods", ["None"], ["", "", "def", "test_discarding_too_short_runs", "(", "self", ")", ":", "\n", "        ", "data", "=", "datasets", ".", "cmapss", ".", "PairedCMAPSS", "(", "[", "self", ".", "cmapss_short", "]", ",", "\"dev\"", ",", "512", ",", "2", ")", "\n", "for", "run", ",", "labels", "in", "zip", "(", "data", ".", "_features", ",", "data", ".", "_labels", ")", ":", "\n", "            ", "self", ".", "assertTrue", "(", "(", "run", ">=", "1", ")", ".", "all", "(", ")", ")", "\n", "self", ".", "assertTrue", "(", "(", "labels", "<", "500", ")", ".", "all", "(", ")", ")", "\n", "self", ".", "assertLess", "(", "2", ",", "len", "(", "run", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestPairedDataset.test_determinisim": [[244, 253], ["test_cmapss.TestPairedDataset.subTest", "datasets.cmapss.PairedCMAPSS", "test_cmapss.TestPairedDataset.assertTrue", "test_cmapss.TestPairedDataset.subTest", "datasets.cmapss.PairedCMAPSS", "test_cmapss.TestPairedDataset.assertFalse", "test_cmapss.TestPairedDataset._two_epochs_different", "test_cmapss.TestPairedDataset._two_epochs_different"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestPairedDataset._two_epochs_different", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestPairedDataset._two_epochs_different"], ["", "", "def", "test_determinisim", "(", "self", ")", ":", "\n", "        ", "with", "self", ".", "subTest", "(", "\"non-deterministic\"", ")", ":", "\n", "            ", "data", "=", "datasets", ".", "cmapss", ".", "PairedCMAPSS", "(", "[", "self", ".", "cmapss_short", "]", ",", "\"dev\"", ",", "512", ",", "2", ")", "\n", "self", ".", "assertTrue", "(", "self", ".", "_two_epochs_different", "(", "data", ")", ")", "\n", "", "with", "self", ".", "subTest", "(", "\"non-deterministic\"", ")", ":", "\n", "            ", "data", "=", "datasets", ".", "cmapss", ".", "PairedCMAPSS", "(", "\n", "[", "self", ".", "cmapss_short", "]", ",", "\"dev\"", ",", "512", ",", "2", ",", "deterministic", "=", "True", "\n", ")", "\n", "self", ".", "assertFalse", "(", "self", ".", "_two_epochs_different", "(", "data", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestPairedDataset._two_epochs_different": [[254, 264], ["zip", "zip", "torch.dist"], "methods", ["None"], ["", "", "def", "_two_epochs_different", "(", "self", ",", "data", ")", ":", "\n", "        ", "first_epoch", "=", "[", "samples", "for", "samples", "in", "data", "]", "\n", "second_epoch", "=", "[", "samples", "for", "samples", "in", "data", "]", "\n", "different", "=", "False", "\n", "for", "first_samples", ",", "second_samples", "in", "zip", "(", "first_epoch", ",", "second_epoch", ")", ":", "\n", "            ", "for", "first", ",", "second", "in", "zip", "(", "first_samples", ",", "second_samples", ")", ":", "\n", "                ", "if", "torch", ".", "dist", "(", "first", ",", "second", ")", ">", "0", ":", "\n", "                    ", "different", "=", "True", "\n", "\n", "", "", "", "return", "different", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestPairedDataset.test_min_distance": [[265, 273], ["datasets.cmapss.PairedCMAPSS", "test_cmapss.TestPairedDataset._get_pairs", "test_cmapss.TestPairedDataset.assertTrue", "test_cmapss.TestPairedDataset.assertTrue", "numpy.all", "numpy.all"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestPairedDataset._get_pairs"], ["", "def", "test_min_distance", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "datasets", ".", "cmapss", ".", "PairedCMAPSS", "(", "\n", "[", "self", ".", "cmapss_short", "]", ",", "\"dev\"", ",", "512", ",", "min_distance", "=", "30", "\n", ")", "\n", "pairs", "=", "self", ".", "_get_pairs", "(", "dataset", ")", "\n", "distances", "=", "pairs", "[", ":", ",", "1", "]", "-", "pairs", "[", ":", ",", "0", "]", "\n", "self", ".", "assertTrue", "(", "np", ".", "all", "(", "pairs", "[", ":", ",", "0", "]", "<", "pairs", "[", ":", ",", "1", "]", ")", ")", "\n", "self", ".", "assertTrue", "(", "np", ".", "all", "(", "distances", ">=", "30", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestPairedDataset.test_build_pairs": [[274, 286], ["test_cmapss.TestPairedDataset.subTest", "datasets.cmapss.PairedCMAPSS", "test_cmapss.TestPairedDataset._get_pairs", "test_cmapss.TestPairedDataset.assertTrue", "test_cmapss.TestPairedDataset.assertTrue", "test_cmapss.TestPairedDataset.assertTrue", "numpy.all", "numpy.all", "numpy.all"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestPairedDataset._get_pairs"], ["", "def", "test_build_pairs", "(", "self", ")", ":", "\n", "        ", "for", "split", "in", "[", "\"dev\"", ",", "\"val\"", "]", ":", "\n", "            ", "with", "self", ".", "subTest", "(", "split", "=", "split", ")", ":", "\n", "                ", "paired_dataset", "=", "datasets", ".", "cmapss", ".", "PairedCMAPSS", "(", "\n", "[", "self", ".", "fd1", ",", "self", ".", "fd3", "]", ",", "split", ",", "1000", ",", "1", "\n", ")", "\n", "pairs", "=", "self", ".", "_get_pairs", "(", "paired_dataset", ")", "\n", "self", ".", "assertTrue", "(", "\n", "np", ".", "all", "(", "pairs", "[", ":", ",", "0", "]", "<", "pairs", "[", ":", ",", "1", "]", ")", "\n", ")", "# query always after anchor", "\n", "self", ".", "assertTrue", "(", "np", ".", "all", "(", "pairs", "[", ":", ",", "3", "]", "<=", "1", ")", ")", "# domain label is either 1", "\n", "self", ".", "assertTrue", "(", "np", ".", "all", "(", "pairs", "[", ":", ",", "3", "]", ">=", "0", ")", ")", "# or zero", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestPairedDataset.test_domain_labels": [[287, 297], ["datasets.cmapss.PairedCMAPSS", "range", "datasets.cmapss.PairedCMAPSS._get_pair_idx_piecewise", "len", "test_cmapss.TestPairedDataset.assertEqual", "test_cmapss.TestPairedDataset.assertEqual"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS._get_pair_idx_piecewise"], ["", "", "", "def", "test_domain_labels", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "datasets", ".", "cmapss", ".", "PairedCMAPSS", "(", "\n", "[", "self", ".", "cmapss_normal", ",", "self", ".", "cmapss_short", "]", ",", "\"dev\"", ",", "512", ",", "min_distance", "=", "30", "\n", ")", "\n", "for", "_", "in", "range", "(", "512", ")", ":", "\n", "            ", "run", ",", "_", ",", "_", ",", "_", ",", "domain_idx", "=", "dataset", ".", "_get_pair_idx_piecewise", "(", ")", "\n", "if", "len", "(", "run", ")", "==", "self", ".", "length", ":", "\n", "                ", "self", ".", "assertEqual", "(", "0", ",", "domain_idx", ")", "# First domain is self.length long", "\n", "", "else", ":", "\n", "                ", "self", ".", "assertEqual", "(", "1", ",", "domain_idx", ")", "# Second is not", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestPairedDataset._get_pairs": [[298, 306], ["numpy.array", "paired._get_pair_idx_piecewise", "range"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.PairedCMAPSS._get_pair_idx_piecewise"], ["", "", "", "def", "_get_pairs", "(", "self", ",", "paired", ")", ":", "\n", "        ", "pairs", "=", "[", "paired", ".", "_get_pair_idx_piecewise", "(", ")", "for", "_", "in", "range", "(", "paired", ".", "num_samples", ")", "]", "\n", "pairs", "=", "[", "\n", "(", "anchor_idx", ",", "query_idx", ",", "distance", ",", "domain_idx", ")", "\n", "for", "_", ",", "anchor_idx", ",", "query_idx", ",", "distance", ",", "domain_idx", "in", "pairs", "\n", "]", "\n", "\n", "return", "np", ".", "array", "(", "pairs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestAdaptionDataset.setUp": [[309, 315], ["torch.utils.data.TensorDataset", "torch.utils.data.TensorDataset", "datasets.cmapss.AdaptionDataset", "torch.arange", "torch.arange", "torch.arange", "torch.arange"], "methods", ["None"], ["    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "source", "=", "TensorDataset", "(", "torch", ".", "arange", "(", "100", ")", ",", "torch", ".", "arange", "(", "100", ")", ")", "\n", "self", ".", "target", "=", "TensorDataset", "(", "torch", ".", "arange", "(", "150", ")", ",", "torch", ".", "arange", "(", "150", ")", ")", "\n", "self", ".", "dataset", "=", "datasets", ".", "cmapss", ".", "AdaptionDataset", "(", "\n", "self", ".", "source", ",", "\n", "self", ".", "target", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestAdaptionDataset.test_len": [[317, 319], ["test_cmapss.TestAdaptionDataset.assertEqual", "len", "len"], "methods", ["None"], ["", "def", "test_len", "(", "self", ")", ":", "\n", "        ", "self", ".", "assertEqual", "(", "len", "(", "self", ".", "dataset", ".", "source", ")", ",", "len", "(", "self", ".", "dataset", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestAdaptionDataset.test_source_target_shuffeled": [[320, 327], ["range", "len", "test_cmapss.TestAdaptionDataset.assertEqual", "test_cmapss.TestAdaptionDataset.assertEqual", "test_cmapss.TestAdaptionDataset.assertNotEqual"], "methods", ["None"], ["", "def", "test_source_target_shuffeled", "(", "self", ")", ":", "\n", "        ", "for", "i", "in", "range", "(", "len", "(", "self", ".", "dataset", ")", ")", ":", "\n", "            ", "source_one", ",", "label_one", ",", "target_one", "=", "self", ".", "dataset", "[", "i", "]", "\n", "source_another", ",", "label_another", ",", "target_another", "=", "self", ".", "dataset", "[", "i", "]", "\n", "self", ".", "assertEqual", "(", "source_one", ",", "source_another", ")", "\n", "self", ".", "assertEqual", "(", "label_one", ",", "label_another", ")", "\n", "self", ".", "assertNotEqual", "(", "target_one", ",", "target_another", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestAdaptionDataset.test_source_target_deterministic": [[328, 338], ["datasets.cmapss.AdaptionDataset", "range", "len", "test_cmapss.TestAdaptionDataset.assertEqual", "test_cmapss.TestAdaptionDataset.assertEqual", "test_cmapss.TestAdaptionDataset.assertEqual"], "methods", ["None"], ["", "", "def", "test_source_target_deterministic", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "datasets", ".", "cmapss", ".", "AdaptionDataset", "(", "\n", "self", ".", "source", ",", "self", ".", "target", ",", "deterministic", "=", "True", "\n", ")", "\n", "for", "i", "in", "range", "(", "len", "(", "dataset", ")", ")", ":", "\n", "            ", "source_one", ",", "label_one", ",", "target_one", "=", "dataset", "[", "i", "]", "\n", "source_another", ",", "label_another", ",", "target_another", "=", "dataset", "[", "i", "]", "\n", "self", ".", "assertEqual", "(", "source_one", ",", "source_another", ")", "\n", "self", ".", "assertEqual", "(", "label_one", ",", "label_another", ")", "\n", "self", ".", "assertEqual", "(", "target_one", ",", "target_another", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.TestAdaptionDataset.test_source_sampled_completely": [[339, 344], ["range", "len", "test_cmapss.TestAdaptionDataset.assertEqual", "test_cmapss.TestAdaptionDataset.assertEqual", "source.item", "labels.item"], "methods", ["None"], ["", "", "def", "test_source_sampled_completely", "(", "self", ")", ":", "\n", "        ", "for", "i", "in", "range", "(", "len", "(", "self", ".", "dataset", ")", ")", ":", "\n", "            ", "source", ",", "labels", ",", "_", "=", "self", ".", "dataset", "[", "i", "]", "\n", "self", ".", "assertEqual", "(", "i", ",", "source", ".", "item", "(", ")", ")", "\n", "self", ".", "assertEqual", "(", "i", ",", "labels", ".", "item", "(", ")", ")", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline.setUp": [[12, 18], ["datasets.BaselineDataModule", "test_baseline.TestCMAPSSBaseline.dataset.prepare_data", "test_baseline.TestCMAPSSBaseline.dataset.setup"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader.prepare_data", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.setup"], ["    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "dataset", "=", "datasets", ".", "BaselineDataModule", "(", "\n", "3", ",", "batch_size", "=", "16", ",", "percent_fail_runs", "=", "0.8", "\n", ")", "\n", "self", ".", "dataset", ".", "prepare_data", "(", ")", "\n", "self", ".", "dataset", ".", "setup", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline.test_override_window_size": [[19, 25], ["datasets.BaselineDataModule", "datasets.BaselineDataModule.cmapss.values", "test_baseline.TestCMAPSSBaseline.assertEqual"], "methods", ["None"], ["", "def", "test_override_window_size", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "datasets", ".", "BaselineDataModule", "(", "\n", "3", ",", "batch_size", "=", "16", ",", "window_size", "=", "40", ",", "percent_fail_runs", "=", "0.8", "\n", ")", "\n", "for", "fd", "in", "dataset", ".", "cmapss", ".", "values", "(", ")", ":", "\n", "            ", "self", ".", "assertEqual", "(", "40", ",", "fd", ".", "window_size", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline.test_default_window_size": [[26, 32], ["enumerate", "datasets.BaselineDataModule", "datasets.BaselineDataModule.cmapss.values", "test_baseline.TestCMAPSSBaseline.assertEqual"], "methods", ["None"], ["", "", "def", "test_default_window_size", "(", "self", ")", ":", "\n", "        ", "window_sizes", "=", "[", "30", ",", "20", ",", "30", ",", "15", "]", "\n", "for", "i", ",", "win", "in", "enumerate", "(", "window_sizes", ",", "start", "=", "1", ")", ":", "\n", "            ", "dataset", "=", "datasets", ".", "BaselineDataModule", "(", "i", ",", "batch_size", "=", "16", ",", "percent_fail_runs", "=", "0.8", ")", "\n", "for", "fd", "in", "dataset", ".", "cmapss", ".", "values", "(", ")", ":", "\n", "                ", "self", ".", "assertEqual", "(", "win", ",", "fd", ".", "window_size", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline.test_train_batch_structure": [[33, 37], ["test_baseline.TestCMAPSSBaseline.dataset.train_dataloader", "test_baseline.TestCMAPSSBaseline.assertIsInstance", "test_baseline.TestCMAPSSBaseline._assert_batch_structure"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.train_dataloader", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline._assert_batch_structure"], ["", "", "", "def", "test_train_batch_structure", "(", "self", ")", ":", "\n", "        ", "train_loader", "=", "self", ".", "dataset", ".", "train_dataloader", "(", ")", "\n", "self", ".", "assertIsInstance", "(", "train_loader", ".", "sampler", ",", "RandomSampler", ")", "\n", "self", ".", "_assert_batch_structure", "(", "train_loader", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline.test_val_batch_structure": [[38, 42], ["test_baseline.TestCMAPSSBaseline.dataset.val_dataloader", "test_baseline.TestCMAPSSBaseline.assertIsInstance", "test_baseline.TestCMAPSSBaseline._assert_batch_structure"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.val_dataloader", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline._assert_batch_structure"], ["", "def", "test_val_batch_structure", "(", "self", ")", ":", "\n", "        ", "val_loader", "=", "self", ".", "dataset", ".", "val_dataloader", "(", ")", "\n", "self", ".", "assertIsInstance", "(", "val_loader", ".", "sampler", ",", "SequentialSampler", ")", "\n", "self", ".", "_assert_batch_structure", "(", "val_loader", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline.test_test_batch_structure": [[43, 48], ["test_baseline.TestCMAPSSBaseline.dataset.test_dataloader", "test_baseline.TestCMAPSSBaseline.assertIsInstance", "test_baseline.TestCMAPSSBaseline._assert_batch_structure"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.test_dataloader", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline._assert_batch_structure"], ["", "def", "test_test_batch_structure", "(", "self", ")", ":", "\n", "        ", "test_loaders", "=", "self", ".", "dataset", ".", "test_dataloader", "(", ")", "\n", "for", "test_loader", "in", "test_loaders", ":", "\n", "            ", "self", ".", "assertIsInstance", "(", "test_loader", ".", "sampler", ",", "SequentialSampler", ")", "\n", "self", ".", "_assert_batch_structure", "(", "test_loader", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline._assert_batch_structure": [[49, 55], ["next", "test_baseline.TestCMAPSSBaseline.assertEqual", "test_baseline.TestCMAPSSBaseline.assertEqual", "test_baseline.TestCMAPSSBaseline.assertEqual", "iter", "len", "torch.Size", "torch.Size", "torch.Size", "torch.Size", "torch.Size", "torch.Size", "torch.Size", "torch.Size"], "methods", ["None"], ["", "", "def", "_assert_batch_structure", "(", "self", ",", "loader", ")", ":", "\n", "        ", "batch", "=", "next", "(", "iter", "(", "loader", ")", ")", "\n", "self", ".", "assertEqual", "(", "2", ",", "len", "(", "batch", ")", ")", "\n", "features", ",", "labels", "=", "batch", "\n", "self", ".", "assertEqual", "(", "torch", ".", "Size", "(", "(", "16", ",", "14", ",", "30", ")", ")", ",", "features", ".", "shape", ")", "\n", "self", ".", "assertEqual", "(", "torch", ".", "Size", "(", "(", "16", ",", ")", ")", ",", "labels", ".", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline.test_selected_source_on_train": [[56, 61], ["test_baseline.TestCMAPSSBaseline._assert_datasets_equal", "test_baseline.TestCMAPSSBaseline.dataset.train_dataloader", "test_baseline.TestCMAPSSBaseline.dataset.cmapss[].train_dataloader"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline._assert_datasets_equal", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.train_dataloader", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.train_dataloader"], ["", "def", "test_selected_source_on_train", "(", "self", ")", ":", "\n", "        ", "fd_source", "=", "self", ".", "dataset", ".", "fd_source", "\n", "baseline_train_dataset", "=", "self", ".", "dataset", ".", "train_dataloader", "(", ")", ".", "dataset", "\n", "source_train_dataset", "=", "self", ".", "dataset", ".", "cmapss", "[", "fd_source", "]", ".", "train_dataloader", "(", ")", ".", "dataset", "\n", "self", ".", "_assert_datasets_equal", "(", "baseline_train_dataset", ",", "source_train_dataset", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline.test_selected_source_on_val": [[62, 67], ["test_baseline.TestCMAPSSBaseline._assert_datasets_equal", "test_baseline.TestCMAPSSBaseline.dataset.val_dataloader", "test_baseline.TestCMAPSSBaseline.dataset.cmapss[].val_dataloader"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline._assert_datasets_equal", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.val_dataloader", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.val_dataloader"], ["", "def", "test_selected_source_on_val", "(", "self", ")", ":", "\n", "        ", "fd_source", "=", "self", ".", "dataset", ".", "fd_source", "\n", "baseline_val_dataset", "=", "self", ".", "dataset", ".", "val_dataloader", "(", ")", ".", "dataset", "\n", "source_val_dataset", "=", "self", ".", "dataset", ".", "cmapss", "[", "fd_source", "]", ".", "val_dataloader", "(", ")", ".", "dataset", "\n", "self", ".", "_assert_datasets_equal", "(", "baseline_val_dataset", ",", "source_val_dataset", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline.test_selected_all_on_test": [[68, 74], ["test_baseline.TestCMAPSSBaseline.dataset.test_dataloader", "enumerate", "test_baseline.TestCMAPSSBaseline._assert_datasets_equal", "test_baseline.TestCMAPSSBaseline.dataset.cmapss[].test_dataloader"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.test_dataloader", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline._assert_datasets_equal", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.test_dataloader"], ["", "def", "test_selected_all_on_test", "(", "self", ")", ":", "\n", "        ", "baseline_test_loaders", "=", "self", ".", "dataset", ".", "test_dataloader", "(", ")", "\n", "for", "fd", ",", "baseline_test_loader", "in", "enumerate", "(", "baseline_test_loaders", ",", "start", "=", "1", ")", ":", "\n", "            ", "baseline_test_dataset", "=", "baseline_test_loader", ".", "dataset", "\n", "test_dataset", "=", "self", ".", "dataset", ".", "cmapss", "[", "fd", "]", ".", "test_dataloader", "(", ")", ".", "dataset", "\n", "self", ".", "_assert_datasets_equal", "(", "baseline_test_dataset", ",", "test_dataset", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline._assert_datasets_equal": [[75, 81], ["len", "zip", "test_baseline.TestCMAPSSBaseline.assertEqual", "torch.sum", "torch.sum", "torch.sum", "torch.sum"], "methods", ["None"], ["", "", "def", "_assert_datasets_equal", "(", "self", ",", "baseline_dataset", ",", "inner_dataset", ")", ":", "\n", "        ", "num_samples", "=", "len", "(", "baseline_dataset", ")", "\n", "baseline_data", "=", "baseline_dataset", "[", ":", "num_samples", "]", "\n", "inner_data", "=", "inner_dataset", "[", ":", "num_samples", "]", "\n", "for", "baseline", ",", "inner", "in", "zip", "(", "baseline_data", ",", "inner_data", ")", ":", "\n", "            ", "self", ".", "assertEqual", "(", "0", ",", "torch", ".", "sum", "(", "baseline", "-", "inner", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestCMAPSSBaseline.test_fail_runs_passed_correctly": [[82, 88], ["range", "test_baseline.TestCMAPSSBaseline.assertEqual", "test_baseline.TestCMAPSSBaseline.assertIsNone"], "methods", ["None"], ["", "", "def", "test_fail_runs_passed_correctly", "(", "self", ")", ":", "\n", "        ", "for", "i", "in", "range", "(", "1", ",", "5", ")", ":", "\n", "            ", "if", "i", "==", "self", ".", "dataset", ".", "fd_source", ":", "\n", "                ", "self", ".", "assertEqual", "(", "0.8", ",", "self", ".", "dataset", ".", "cmapss", "[", "i", "]", ".", "percent_fail_runs", ")", "\n", "", "else", ":", "\n", "                ", "self", ".", "assertIsNone", "(", "self", ".", "dataset", ".", "cmapss", "[", "i", "]", ".", "percent_fail_runs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestPretrainingBaselineDataModuleFullData.setUp": [[93, 102], ["datasets.PretrainingBaselineDataModule", "test_baseline.TestPretrainingBaselineDataModuleFullData.dataset.prepare_data", "test_baseline.TestPretrainingBaselineDataModuleFullData.dataset.setup"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader.prepare_data", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.setup"], ["    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "num_samples", "=", "10000", ",", "batch_size", "=", "16", ",", "min_distance", "=", "2", "\n", ")", "\n", "self", ".", "dataset", ".", "prepare_data", "(", ")", "\n", "self", ".", "dataset", ".", "setup", "(", ")", "\n", "\n", "self", ".", "expected_num_val_loaders", "=", "2", "\n", "self", ".", "window_size", "=", "self", ".", "dataset", ".", "broken_source_loader", ".", "window_size", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestPretrainingBaselineDataModuleFullData.test_val_truncation": [[103, 117], ["test_baseline.TestPretrainingBaselineDataModuleFullData.subTest", "datasets.PretrainingBaselineDataModule", "test_baseline.TestPretrainingBaselineDataModuleFullData.assertFalse", "test_baseline.TestPretrainingBaselineDataModuleFullData.assertFalse", "test_baseline.TestPretrainingBaselineDataModuleFullData.subTest", "datasets.PretrainingBaselineDataModule", "test_baseline.TestPretrainingBaselineDataModuleFullData.assertTrue", "test_baseline.TestPretrainingBaselineDataModuleFullData.assertTrue"], "methods", ["None"], ["", "def", "test_val_truncation", "(", "self", ")", ":", "\n", "        ", "with", "self", ".", "subTest", "(", "truncation", "=", "False", ")", ":", "\n", "            ", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "num_samples", "=", "10000", ",", "batch_size", "=", "16", "\n", ")", "\n", "self", ".", "assertFalse", "(", "dataset", ".", "broken_source_loader", ".", "truncate_val", ")", "\n", "self", ".", "assertFalse", "(", "dataset", ".", "source", ".", "truncate_val", ")", "\n", "\n", "", "with", "self", ".", "subTest", "(", "truncation", "=", "True", ")", ":", "\n", "            ", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "num_samples", "=", "10000", ",", "batch_size", "=", "16", ",", "truncate_val", "=", "True", "\n", ")", "\n", "self", ".", "assertTrue", "(", "dataset", ".", "broken_source_loader", ".", "truncate_val", ")", "\n", "self", ".", "assertTrue", "(", "dataset", ".", "source", ".", "truncate_val", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestPretrainingBaselineDataModuleFullData.test_override_window_size": [[118, 129], ["datasets.PretrainingBaselineDataModule", "datasets.PretrainingBaselineDataModule.prepare_data", "datasets.PretrainingBaselineDataModule.setup", "datasets.PretrainingBaselineDataModule.train_dataloader", "next", "test_baseline.TestPretrainingBaselineDataModuleFullData.assertEqual", "test_baseline.TestPretrainingBaselineDataModuleFullData.assertEqual", "iter"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader.prepare_data", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.setup", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.train_dataloader"], ["", "", "def", "test_override_window_size", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "num_samples", "=", "10000", ",", "batch_size", "=", "16", ",", "window_size", "=", "40", "\n", ")", "\n", "dataset", ".", "prepare_data", "(", ")", "\n", "dataset", ".", "setup", "(", ")", "\n", "train_loader", "=", "dataset", ".", "train_dataloader", "(", ")", "\n", "\n", "anchors", ",", "queries", ",", "_", ",", "_", "=", "next", "(", "iter", "(", "train_loader", ")", ")", "\n", "self", ".", "assertEqual", "(", "40", ",", "anchors", ".", "shape", "[", "2", "]", ")", "\n", "self", ".", "assertEqual", "(", "40", ",", "queries", ".", "shape", "[", "2", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestPretrainingBaselineDataModuleFullData.test_truncation_passed_correctly": [[130, 138], ["datasets.PretrainingBaselineDataModule", "test_baseline.TestPretrainingBaselineDataModuleFullData.assertEqual", "test_baseline.TestPretrainingBaselineDataModuleFullData.assertIsNone", "test_baseline.TestPretrainingBaselineDataModuleFullData.assertEqual", "test_baseline.TestPretrainingBaselineDataModuleFullData.assertIsNone"], "methods", ["None"], ["", "def", "test_truncation_passed_correctly", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "1000", ",", "16", ",", "percent_broken", "=", "0.2", ",", "percent_fail_runs", "=", "0.5", "\n", ")", "\n", "self", ".", "assertEqual", "(", "0.2", ",", "dataset", ".", "broken_source_loader", ".", "percent_broken", ")", "\n", "self", ".", "assertIsNone", "(", "dataset", ".", "broken_source_loader", ".", "percent_fail_runs", ")", "\n", "self", ".", "assertEqual", "(", "0.5", ",", "dataset", ".", "fails_source_loader", ".", "percent_fail_runs", ")", "\n", "self", ".", "assertIsNone", "(", "dataset", ".", "fails_source_loader", ".", "percent_broken", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestPretrainingBaselineDataModuleFullData.test_distance_mode_passed_correctly": [[139, 145], ["datasets.PretrainingBaselineDataModule", "datasets.PretrainingBaselineDataModule.train_dataloader", "test_baseline.TestPretrainingBaselineDataModuleFullData.assertEqual"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.train_dataloader"], ["", "def", "test_distance_mode_passed_correctly", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "1000", ",", "16", ",", "distance_mode", "=", "\"labeled\"", "\n", ")", "\n", "data_loader", "=", "dataset", ".", "train_dataloader", "(", ")", "\n", "self", ".", "assertEqual", "(", "dataset", ".", "distance_mode", ",", "data_loader", ".", "dataset", ".", "mode", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestPretrainingBaselineDataModuleFullData.test_both_source_datasets_used": [[146, 157], ["datasets.PretrainingBaselineDataModule", "test_baseline.TestPretrainingBaselineDataModuleFullData.subTest", "len", "len", "datasets.PretrainingBaselineDataModule._get_paired_dataset", "test_baseline.TestPretrainingBaselineDataModuleFullData.assertEqual", "len", "datasets.PretrainingBaselineDataModule.broken_source_loader.load_split", "datasets.PretrainingBaselineDataModule.fails_source_loader.load_split"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.baseline.PretrainingBaselineDataModule._get_paired_dataset", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split"], ["", "def", "test_both_source_datasets_used", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "1000", ",", "16", ",", "percent_broken", "=", "0.2", ",", "percent_fail_runs", "=", "0.5", "\n", ")", "\n", "for", "split", "in", "[", "\"dev\"", ",", "\"val\"", "]", ":", "\n", "            ", "with", "self", ".", "subTest", "(", "split", ")", ":", "\n", "                ", "num_broken_runs", "=", "len", "(", "dataset", ".", "broken_source_loader", ".", "load_split", "(", "split", ")", "[", "0", "]", ")", "\n", "num_fail_runs", "=", "len", "(", "dataset", ".", "fails_source_loader", ".", "load_split", "(", "split", ")", "[", "0", "]", ")", "\n", "paired_dataset", "=", "dataset", ".", "_get_paired_dataset", "(", "split", ")", "\n", "self", ".", "assertEqual", "(", "\n", "num_broken_runs", "+", "num_fail_runs", ",", "len", "(", "paired_dataset", ".", "_features", ")", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestPretrainingBaselineDataModuleFullData.test_get_unfailed_runs": [[159, 167], ["datasets.PretrainingBaselineDataModule", "test_baseline.TestPretrainingBaselineDataModuleFullData.assertListEqual", "test_baseline.TestPretrainingBaselineDataModuleFullData.assertNotIn"], "methods", ["None"], ["", "", "", "def", "test_get_unfailed_runs", "(", "self", ")", ":", "\n", "        ", "fail_runs", "=", "[", "1", ",", "5", ",", "40", ",", "79", "]", "\n", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "1000", ",", "16", ",", "percent_broken", "=", "0.2", ",", "percent_fail_runs", "=", "fail_runs", "\n", ")", "\n", "self", ".", "assertListEqual", "(", "fail_runs", ",", "dataset", ".", "fails_source_loader", ".", "percent_fail_runs", ")", "\n", "for", "r", "in", "fail_runs", ":", "\n", "            ", "self", ".", "assertNotIn", "(", "r", ",", "dataset", ".", "broken_source_loader", ".", "percent_fail_runs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestPretrainingBaselineDataModuleFullData.test_percent_fails_zero": [[168, 176], ["datasets.PretrainingBaselineDataModule", "len", "len", "test_baseline.TestPretrainingBaselineDataModuleFullData.assertEqual", "test_baseline.TestPretrainingBaselineDataModuleFullData.assertNotEqual", "datasets.PretrainingBaselineDataModule.broken_source_loader.load_split", "datasets.PretrainingBaselineDataModule.fails_source_loader.load_split"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split"], ["", "", "def", "test_percent_fails_zero", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "1000", ",", "16", ",", "percent_broken", "=", "0.2", ",", "percent_fail_runs", "=", "0.0", "\n", ")", "\n", "num_broken_runs", "=", "len", "(", "dataset", ".", "broken_source_loader", ".", "load_split", "(", "\"dev\"", ")", "[", "0", "]", ")", "\n", "num_fail_runs", "=", "len", "(", "dataset", ".", "fails_source_loader", ".", "load_split", "(", "\"dev\"", ")", "[", "0", "]", ")", "\n", "self", ".", "assertEqual", "(", "0", ",", "num_fail_runs", ")", "\n", "self", ".", "assertNotEqual", "(", "0", ",", "num_broken_runs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_baseline.TestPretrainingBaselineDataModuleLowData.setUp": [[181, 190], ["datasets.PretrainingBaselineDataModule", "test_baseline.TestPretrainingBaselineDataModuleLowData.dataset.prepare_data", "test_baseline.TestPretrainingBaselineDataModuleLowData.dataset.setup"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.loader.FEMTOLoader.prepare_data", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.setup"], ["    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "num_samples", "=", "10000", ",", "batch_size", "=", "16", ",", "percent_broken", "=", "0.2", "\n", ")", "\n", "self", ".", "dataset", ".", "prepare_data", "(", ")", "\n", "self", ".", "dataset", ".", "setup", "(", ")", "\n", "\n", "self", ".", "expected_num_val_loaders", "=", "2", "\n", "self", ".", "window_size", "=", "self", ".", "dataset", ".", "broken_source_loader", ".", "window_size", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_loader.TestCMAPSSLoader.test_run_shape_and_dtype": [[12, 19], ["enumerate", "datasets.loader.CMAPSSLoader", "test_loader.TestCMAPSSLoader.subTest", "test_loader.TestCMAPSSLoader._check_split"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_loader.TestCMAPSSLoader._check_split"], ["def", "test_run_shape_and_dtype", "(", "self", ")", ":", "\n", "        ", "window_sizes", "=", "[", "30", ",", "20", ",", "30", ",", "15", "]", "\n", "for", "n", ",", "win", "in", "enumerate", "(", "window_sizes", ",", "start", "=", "1", ")", ":", "\n", "            ", "cmapss_loader", "=", "loader", ".", "CMAPSSLoader", "(", "n", ")", "\n", "for", "split", "in", "[", "\"dev\"", ",", "\"val\"", ",", "\"test\"", "]", ":", "\n", "                ", "with", "self", ".", "subTest", "(", "fd", "=", "n", ",", "split", "=", "split", ")", ":", "\n", "                    ", "self", ".", "_check_split", "(", "cmapss_loader", ",", "split", ",", "win", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_loader.TestCMAPSSLoader._check_split": [[20, 24], ["cmapss_loader.load_split", "zip", "test_loader.TestCMAPSSLoader._assert_run_correct"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_loader.TestCMAPSSLoader._assert_run_correct"], ["", "", "", "", "def", "_check_split", "(", "self", ",", "cmapss_loader", ",", "split", ",", "window_size", ")", ":", "\n", "        ", "features", ",", "targets", "=", "cmapss_loader", ".", "load_split", "(", "split", ")", "\n", "for", "run", ",", "run_target", "in", "zip", "(", "features", ",", "targets", ")", ":", "\n", "            ", "self", ".", "_assert_run_correct", "(", "run", ",", "run_target", ",", "window_size", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_loader.TestCMAPSSLoader._assert_run_correct": [[25, 31], ["test_loader.TestCMAPSSLoader.assertEqual", "test_loader.TestCMAPSSLoader.assertEqual", "test_loader.TestCMAPSSLoader.assertEqual", "test_loader.TestCMAPSSLoader.assertEqual", "test_loader.TestCMAPSSLoader.assertEqual", "len", "len"], "methods", ["None"], ["", "", "def", "_assert_run_correct", "(", "self", ",", "run", ",", "run_target", ",", "win", ")", ":", "\n", "        ", "self", ".", "assertEqual", "(", "win", ",", "run", ".", "shape", "[", "2", "]", ")", "\n", "self", ".", "assertEqual", "(", "self", ".", "NUM_CHANNELS", ",", "run", ".", "shape", "[", "1", "]", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "run", ")", ",", "len", "(", "run_target", ")", ")", "\n", "self", ".", "assertEqual", "(", "torch", ".", "float32", ",", "run", ".", "dtype", ")", "\n", "self", ".", "assertEqual", "(", "torch", ".", "float32", ",", "run_target", ".", "dtype", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_loader.TestCMAPSSLoader.test_override_window_size": [[32, 41], ["range", "datasets.loader.CMAPSSLoader", "test_loader.TestCMAPSSLoader.subTest", "datasets.loader.CMAPSSLoader.load_split", "test_loader.TestCMAPSSLoader.assertEqual"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split"], ["", "def", "test_override_window_size", "(", "self", ")", ":", "\n", "        ", "window_size", "=", "40", "\n", "for", "n", "in", "range", "(", "1", ",", "5", ")", ":", "\n", "            ", "dataset", "=", "loader", ".", "CMAPSSLoader", "(", "n", ",", "window_size", "=", "window_size", ")", "\n", "for", "split", "in", "[", "\"dev\"", ",", "\"val\"", ",", "\"test\"", "]", ":", "\n", "                ", "with", "self", ".", "subTest", "(", "fd", "=", "n", ",", "split", "=", "split", ")", ":", "\n", "                    ", "features", ",", "targets", "=", "dataset", ".", "load_split", "(", "split", ")", "\n", "for", "run", "in", "features", ":", "\n", "                        ", "self", ".", "assertEqual", "(", "window_size", ",", "run", ".", "shape", "[", "2", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_loader.TestCMAPSSLoader.test_feature_select": [[42, 48], ["datasets.loader.CMAPSSLoader", "datasets.loader.CMAPSSLoader.load_split", "test_loader.TestCMAPSSLoader.assertEqual"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split"], ["", "", "", "", "", "def", "test_feature_select", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "loader", ".", "CMAPSSLoader", "(", "1", ",", "feature_select", "=", "[", "4", ",", "9", ",", "10", ",", "13", ",", "14", ",", "15", ",", "22", "]", ")", "\n", "for", "split", "in", "[", "\"dev\"", ",", "\"val\"", ",", "\"test\"", "]", ":", "\n", "            ", "features", ",", "_", "=", "dataset", ".", "load_split", "(", "split", ")", "\n", "for", "run", "in", "features", ":", "\n", "                ", "self", ".", "assertEqual", "(", "7", ",", "run", ".", "shape", "[", "1", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_loader.TestCMAPSSLoader.test_percent_fail_runs": [[49, 67], ["datasets.loader.CMAPSSLoader", "datasets.loader.CMAPSSLoader.load_split", "datasets.loader.CMAPSSLoader", "datasets.loader.CMAPSSLoader.load_split", "test_loader.TestCMAPSSLoader.assertGreater", "test_loader.TestCMAPSSLoader.assertAlmostEqual", "test_loader.TestCMAPSSLoader.assertEqual", "test_loader.TestCMAPSSLoader.assertEqual", "zip", "zip", "datasets.loader.CMAPSSLoader.load_split", "datasets.loader.CMAPSSLoader.load_split", "len", "len", "len", "len", "len", "len", "test_loader.TestCMAPSSLoader.assertEqual", "test_loader.TestCMAPSSLoader.assertEqual", "len", "len", "torch.dist", "torch.dist", "datasets.loader.CMAPSSLoader.load_split", "datasets.loader.CMAPSSLoader.load_split"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split"], ["", "", "", "def", "test_percent_fail_runs", "(", "self", ")", ":", "\n", "        ", "full_dataset", "=", "loader", ".", "CMAPSSLoader", "(", "fd", "=", "1", ",", "window_size", "=", "30", ")", "\n", "full_dev", ",", "full_dev_targets", "=", "full_dataset", ".", "load_split", "(", "\"dev\"", ")", "\n", "full_val", "=", "full_dataset", ".", "load_split", "(", "\"val\"", ")", "[", "0", "]", "\n", "full_test", "=", "full_dataset", ".", "load_split", "(", "\"test\"", ")", "[", "0", "]", "\n", "\n", "dataset", "=", "loader", ".", "CMAPSSLoader", "(", "fd", "=", "1", ",", "window_size", "=", "30", ",", "percent_fail_runs", "=", "0.8", ")", "\n", "trunc_dev", ",", "trunc_dev_targets", "=", "dataset", ".", "load_split", "(", "\"dev\"", ")", "\n", "\n", "self", ".", "assertGreater", "(", "len", "(", "full_dev", ")", ",", "len", "(", "trunc_dev", ")", ")", "\n", "self", ".", "assertAlmostEqual", "(", "0.8", ",", "len", "(", "trunc_dev", ")", "/", "len", "(", "full_dev", ")", ",", "delta", "=", "0.01", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "full_val", ")", ",", "len", "(", "dataset", ".", "load_split", "(", "\"val\"", ")", "[", "0", "]", ")", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "full_test", ")", ",", "len", "(", "dataset", ".", "load_split", "(", "\"test\"", ")", "[", "0", "]", ")", ")", "\n", "\n", "for", "full_run", ",", "trunc_run", "in", "zip", "(", "full_dev", ",", "trunc_dev", ")", ":", "\n", "            ", "self", ".", "assertEqual", "(", "0.0", ",", "torch", ".", "dist", "(", "trunc_run", ",", "full_run", ")", ")", "\n", "", "for", "full_targets", ",", "trunc_targets", "in", "zip", "(", "full_dev_targets", ",", "trunc_dev_targets", ")", ":", "\n", "            ", "self", ".", "assertEqual", "(", "0.0", ",", "torch", ".", "dist", "(", "trunc_targets", ",", "full_targets", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_loader.TestCMAPSSLoader.test_percent_broken": [[68, 99], ["datasets.loader.CMAPSSLoader", "datasets.loader.CMAPSSLoader.load_split", "datasets.loader.CMAPSSLoader", "datasets.loader.CMAPSSLoader.load_split", "sum", "sum", "test_loader.TestCMAPSSLoader.assertGreater", "test_loader.TestCMAPSSLoader.assertAlmostEqual", "test_loader.TestCMAPSSLoader.assertFalse", "zip", "zip", "zip", "zip", "datasets.loader.CMAPSSLoader.load_split", "datasets.loader.CMAPSSLoader.load_split", "any", "test_loader.TestCMAPSSLoader.assertEqual", "test_loader.TestCMAPSSLoader.assertEqual", "test_loader.TestCMAPSSLoader.assertEqual", "test_loader.TestCMAPSSLoader.assertEqual", "len", "len", "torch.dist", "torch.dist", "datasets.loader.CMAPSSLoader.load_split", "len", "len", "datasets.loader.CMAPSSLoader.load_split", "len", "len", "torch.any"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split"], ["", "", "def", "test_percent_broken", "(", "self", ")", ":", "\n", "        ", "full_dataset", "=", "loader", ".", "CMAPSSLoader", "(", "fd", "=", "1", ",", "window_size", "=", "30", ")", "\n", "full_dev", ",", "full_dev_targets", "=", "full_dataset", ".", "load_split", "(", "\"dev\"", ")", "\n", "full_val", "=", "full_dataset", ".", "load_split", "(", "\"val\"", ")", "[", "0", "]", "\n", "full_test", "=", "full_dataset", ".", "load_split", "(", "\"test\"", ")", "[", "0", "]", "\n", "\n", "dataset", "=", "loader", ".", "CMAPSSLoader", "(", "fd", "=", "1", ",", "window_size", "=", "30", ",", "percent_broken", "=", "0.2", ")", "\n", "truncated_dev", ",", "truncated_dev_targets", "=", "dataset", ".", "load_split", "(", "\"dev\"", ")", "\n", "\n", "full_length", "=", "sum", "(", "len", "(", "r", ")", "for", "r", "in", "full_dev", ")", "\n", "truncated_length", "=", "sum", "(", "len", "(", "r", ")", "for", "r", "in", "truncated_dev", ")", "\n", "self", ".", "assertGreater", "(", "full_length", ",", "truncated_length", ")", "\n", "self", ".", "assertAlmostEqual", "(", "0.2", ",", "truncated_length", "/", "full_length", ",", "delta", "=", "0.01", ")", "\n", "\n", "# No failure data in truncated dev data", "\n", "self", ".", "assertFalse", "(", "any", "(", "torch", ".", "any", "(", "r", "==", "1", ")", "for", "r", "in", "truncated_dev_targets", ")", ")", "\n", "\n", "for", "full_run", ",", "trunc_run", "in", "zip", "(", "full_dev", ",", "truncated_dev", ")", ":", "\n", "            ", "trunc_run_length", "=", "trunc_run", ".", "shape", "[", "0", "]", "\n", "self", ".", "assertEqual", "(", "0.0", ",", "torch", ".", "dist", "(", "trunc_run", ",", "full_run", "[", ":", "trunc_run_length", "]", ")", ")", "\n", "", "for", "full_run", ",", "trunc_run", "in", "zip", "(", "full_dev_targets", ",", "truncated_dev_targets", ")", ":", "\n", "            ", "trunc_run_length", "=", "trunc_run", ".", "shape", "[", "0", "]", "\n", "self", ".", "assertEqual", "(", "0.0", ",", "torch", ".", "dist", "(", "trunc_run", ",", "full_run", "[", ":", "trunc_run_length", "]", ")", ")", "\n", "\n", "# Val dataset_tests not truncated", "\n", "", "for", "full_run", ",", "trunc_run", "in", "zip", "(", "full_val", ",", "dataset", ".", "load_split", "(", "\"val\"", ")", "[", "0", "]", ")", ":", "\n", "            ", "self", ".", "assertEqual", "(", "len", "(", "full_run", ")", ",", "len", "(", "trunc_run", ")", ")", "\n", "\n", "# Test dataset_tests not truncated", "\n", "", "for", "full_run", ",", "trunc_run", "in", "zip", "(", "full_test", ",", "dataset", ".", "load_split", "(", "\"test\"", ")", "[", "0", "]", ")", ":", "\n", "            ", "self", ".", "assertEqual", "(", "len", "(", "full_run", ")", ",", "len", "(", "trunc_run", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_loader.TestCMAPSSLoader.test_val_truncation": [[100, 119], ["unittest.mock.patch", "datasets.loader.CMAPSSLoader", "datasets.loader.CMAPSSLoader", "test_loader.TestCMAPSSLoader.subTest", "datasets.loader.CMAPSSLoader.load_split", "mock_truncate.assert_called_once", "mock_truncate.reset_mock", "datasets.loader.CMAPSSLoader.load_split", "mock_truncate.assert_not_called", "test_loader.TestCMAPSSLoader.subTest", "datasets.loader.CMAPSSLoader.load_split", "mock_truncate.assert_called_once", "mock_truncate.reset_mock", "datasets.loader.CMAPSSLoader.load_split", "mock_truncate.assert_called_once"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split"], ["", "", "@", "mock", ".", "patch", "(", "\n", "\"datasets.loader.CMAPSSLoader._truncate_runs\"", ",", "wraps", "=", "lambda", "x", ",", "y", ",", "*", "args", ":", "(", "x", ",", "y", ")", "\n", ")", "\n", "def", "test_val_truncation", "(", "self", ",", "mock_truncate", ")", ":", "\n", "        ", "dataset", "=", "loader", ".", "CMAPSSLoader", "(", "fd", "=", "1", ",", "window_size", "=", "30", ")", "\n", "with", "self", ".", "subTest", "(", "truncate_val", "=", "False", ")", ":", "\n", "            ", "dataset", ".", "load_split", "(", "\"dev\"", ")", "\n", "mock_truncate", ".", "assert_called_once", "(", ")", "\n", "mock_truncate", ".", "reset_mock", "(", ")", "\n", "dataset", ".", "load_split", "(", "\"val\"", ")", "\n", "mock_truncate", ".", "assert_not_called", "(", ")", "\n", "\n", "", "dataset", "=", "loader", ".", "CMAPSSLoader", "(", "fd", "=", "1", ",", "window_size", "=", "30", ",", "truncate_val", "=", "True", ")", "\n", "with", "self", ".", "subTest", "(", "truncate_val", "=", "True", ")", ":", "\n", "            ", "dataset", ".", "load_split", "(", "\"dev\"", ")", "\n", "mock_truncate", ".", "assert_called_once", "(", ")", "\n", "mock_truncate", ".", "reset_mock", "(", ")", "\n", "dataset", ".", "load_split", "(", "\"val\"", ")", "\n", "mock_truncate", ".", "assert_called_once", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_loader.TestCMAPSSLoader.test_normalization_min_max": [[120, 142], ["range", "test_loader.TestCMAPSSLoader.subTest", "datasets.loader.CMAPSSLoader", "datasets.loader.CMAPSSLoader.load_split", "test_loader.TestCMAPSSLoader.assertAlmostEqual", "test_loader.TestCMAPSSLoader.assertAlmostEqual", "datasets.loader.CMAPSSLoader", "datasets.loader.CMAPSSLoader.load_split", "test_loader.TestCMAPSSLoader.assertLessEqual", "test_loader.TestCMAPSSLoader.assertGreaterEqual", "datasets.loader.CMAPSSLoader", "datasets.loader.CMAPSSLoader.load_split", "test_loader.TestCMAPSSLoader.assertLessEqual", "test_loader.TestCMAPSSLoader.assertGreaterEqual", "max", "min", "max", "min", "max", "min", "torch.max().item", "torch.min().item", "torch.max().item", "torch.min().item", "torch.max().item", "torch.min().item", "torch.max", "torch.min", "torch.max", "torch.min", "torch.max", "torch.min"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split"], ["", "", "def", "test_normalization_min_max", "(", "self", ")", ":", "\n", "        ", "for", "i", "in", "range", "(", "1", ",", "5", ")", ":", "\n", "            ", "with", "self", ".", "subTest", "(", "fd", "=", "i", ")", ":", "\n", "                ", "full_dataset", "=", "loader", ".", "CMAPSSLoader", "(", "fd", "=", "i", ",", "window_size", "=", "30", ")", "\n", "full_dev", ",", "full_dev_targets", "=", "full_dataset", ".", "load_split", "(", "\"dev\"", ")", "\n", "\n", "self", ".", "assertAlmostEqual", "(", "max", "(", "torch", ".", "max", "(", "r", ")", ".", "item", "(", ")", "for", "r", "in", "full_dev", ")", ",", "1.0", ")", "\n", "self", ".", "assertAlmostEqual", "(", "min", "(", "torch", ".", "min", "(", "r", ")", ".", "item", "(", ")", "for", "r", "in", "full_dev", ")", ",", "-", "1.0", ")", "\n", "\n", "truncated_dataset", "=", "loader", ".", "CMAPSSLoader", "(", "\n", "fd", "=", "i", ",", "window_size", "=", "30", ",", "percent_fail_runs", "=", "0.8", "\n", ")", "\n", "trunc_dev", ",", "trunc_dev_targets", "=", "truncated_dataset", ".", "load_split", "(", "\"dev\"", ")", "\n", "self", ".", "assertLessEqual", "(", "max", "(", "torch", ".", "max", "(", "r", ")", ".", "item", "(", ")", "for", "r", "in", "trunc_dev", ")", ",", "1.0", ")", "\n", "self", ".", "assertGreaterEqual", "(", "min", "(", "torch", ".", "min", "(", "r", ")", ".", "item", "(", ")", "for", "r", "in", "trunc_dev", ")", ",", "-", "1.0", ")", "\n", "\n", "truncated_dataset", "=", "loader", ".", "CMAPSSLoader", "(", "\n", "fd", "=", "i", ",", "window_size", "=", "30", ",", "percent_broken", "=", "0.2", "\n", ")", "\n", "trunc_dev", ",", "trunc_dev_targets", "=", "truncated_dataset", ".", "load_split", "(", "\"dev\"", ")", "\n", "self", ".", "assertLessEqual", "(", "max", "(", "torch", ".", "max", "(", "r", ")", ".", "item", "(", ")", "for", "r", "in", "trunc_dev", ")", ",", "1.0", ")", "\n", "self", ".", "assertGreaterEqual", "(", "min", "(", "torch", ".", "min", "(", "r", ")", ".", "item", "(", ")", "for", "r", "in", "trunc_dev", ")", ",", "-", "1.0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_loader.TestCMAPSSLoader.test_truncation_by_index": [[143, 157], ["datasets.loader.CMAPSSLoader", "datasets.loader.CMAPSSLoader.load_split", "datasets.loader.CMAPSSLoader", "datasets.loader.CMAPSSLoader.load_split", "test_loader.TestCMAPSSLoader.assertEqual", "test_loader.TestCMAPSSLoader.assertEqual", "enumerate", "len", "len", "len", "len", "test_loader.TestCMAPSSLoader.assertEqual", "test_loader.TestCMAPSSLoader.assertEqual", "torch.dist", "torch.dist"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.test_cmapss.DummyCMAPSSShortRuns.load_split"], ["", "", "", "def", "test_truncation_by_index", "(", "self", ")", ":", "\n", "        ", "full_dataset", "=", "loader", ".", "CMAPSSLoader", "(", "1", ")", "\n", "full_train", ",", "full_train_targets", "=", "full_dataset", ".", "load_split", "(", "\"dev\"", ")", "\n", "indices", "=", "[", "50", ",", "60", ",", "70", "]", "\n", "truncated_dataset", "=", "loader", ".", "CMAPSSLoader", "(", "1", ",", "percent_fail_runs", "=", "indices", ")", "\n", "trunc_train", ",", "trunc_train_targets", "=", "truncated_dataset", ".", "load_split", "(", "\"dev\"", ")", "\n", "\n", "self", ".", "assertEqual", "(", "len", "(", "indices", ")", ",", "len", "(", "trunc_train", ")", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "indices", ")", ",", "len", "(", "trunc_train_targets", ")", ")", "\n", "for", "trunc_idx", ",", "full_idx", "in", "enumerate", "(", "indices", ")", ":", "\n", "            ", "self", ".", "assertEqual", "(", "0", ",", "torch", ".", "dist", "(", "full_train", "[", "full_idx", "]", ",", "trunc_train", "[", "trunc_idx", "]", ")", ")", "\n", "self", ".", "assertEqual", "(", "\n", "0", ",", "\n", "torch", ".", "dist", "(", "full_train_targets", "[", "full_idx", "]", ",", "trunc_train_targets", "[", "trunc_idx", "]", ")", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate.test_data_structure": [[8, 20], ["templates.PretrainingDataModuleTemplate.subTest", "templates.PretrainingDataModuleTemplate.dataset.train_dataloader", "templates.PretrainingDataModuleTemplate._check_paired_dataset", "templates.PretrainingDataModuleTemplate.subTest", "templates.PretrainingDataModuleTemplate.dataset.val_dataloader", "templates.PretrainingDataModuleTemplate.assertIsInstance", "templates.PretrainingDataModuleTemplate.assertEqual", "templates.PretrainingDataModuleTemplate._check_paired_dataset", "len", "templates.PretrainingDataModuleTemplate._check_tensor_dataset"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.train_dataloader", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate._check_paired_dataset", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.val_dataloader", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate._check_paired_dataset", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate._check_tensor_dataset"], ["    ", "def", "test_data_structure", "(", "self", ")", ":", "\n", "        ", "with", "self", ".", "subTest", "(", "split", "=", "\"dev\"", ")", ":", "\n", "            ", "dataloader", "=", "self", ".", "dataset", ".", "train_dataloader", "(", ")", "\n", "self", ".", "_check_paired_dataset", "(", "dataloader", ".", "dataset", ")", "\n", "\n", "", "with", "self", ".", "subTest", "(", "split", "=", "\"val\"", ")", ":", "\n", "            ", "loaders", "=", "self", ".", "dataset", ".", "val_dataloader", "(", ")", "\n", "self", ".", "assertIsInstance", "(", "loaders", ",", "list", ")", "\n", "self", ".", "assertEqual", "(", "self", ".", "expected_num_val_loaders", ",", "len", "(", "loaders", ")", ")", "\n", "self", ".", "_check_paired_dataset", "(", "loaders", "[", "0", "]", ".", "dataset", ")", "\n", "for", "dataloader", "in", "loaders", "[", "1", ":", "]", ":", "\n", "                ", "self", ".", "_check_tensor_dataset", "(", "dataloader", ".", "dataset", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate._check_paired_dataset": [[21, 24], ["templates.PretrainingDataModuleTemplate.assertIsInstance", "templates.PretrainingDataModuleTemplate._check_paired_shapes"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate._check_paired_shapes"], ["", "", "", "def", "_check_paired_dataset", "(", "self", ",", "data", ")", ":", "\n", "        ", "self", ".", "assertIsInstance", "(", "data", ",", "PairedCMAPSS", ")", "\n", "self", ".", "_check_paired_shapes", "(", "data", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate._check_paired_shapes": [[25, 31], ["templates.PretrainingDataModuleTemplate.assertEqual", "templates.PretrainingDataModuleTemplate.assertEqual", "templates.PretrainingDataModuleTemplate.assertEqual", "templates.PretrainingDataModuleTemplate.assertEqual", "torch.Size", "torch.Size", "torch.Size", "torch.Size"], "methods", ["None"], ["", "def", "_check_paired_shapes", "(", "self", ",", "data", ")", ":", "\n", "        ", "for", "anchors", ",", "queries", ",", "distances", ",", "domain_labels", "in", "data", ":", "\n", "            ", "self", ".", "assertEqual", "(", "torch", ".", "Size", "(", "(", "14", ",", "self", ".", "window_size", ")", ")", ",", "anchors", ".", "shape", ")", "\n", "self", ".", "assertEqual", "(", "torch", ".", "Size", "(", "(", "14", ",", "self", ".", "window_size", ")", ")", ",", "queries", ".", "shape", ")", "\n", "self", ".", "assertEqual", "(", "torch", ".", "Size", "(", "(", ")", ")", ",", "distances", ".", "shape", ")", "\n", "self", ".", "assertEqual", "(", "torch", ".", "Size", "(", "(", ")", ")", ",", "domain_labels", ".", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate._check_tensor_dataset": [[32, 35], ["templates.PretrainingDataModuleTemplate.assertIsInstance", "templates.PretrainingDataModuleTemplate._check_cmapss_shapes"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate._check_cmapss_shapes"], ["", "", "def", "_check_tensor_dataset", "(", "self", ",", "data", ")", ":", "\n", "        ", "self", ".", "assertIsInstance", "(", "data", ",", "TensorDataset", ")", "\n", "self", ".", "_check_cmapss_shapes", "(", "data", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate._check_cmapss_shapes": [[36, 41], ["range", "len", "templates.PretrainingDataModuleTemplate.assertEqual", "templates.PretrainingDataModuleTemplate.assertEqual", "torch.Size", "torch.Size"], "methods", ["None"], ["", "def", "_check_cmapss_shapes", "(", "self", ",", "data", ")", ":", "\n", "        ", "for", "i", "in", "range", "(", "len", "(", "data", ")", ")", ":", "\n", "            ", "features", ",", "labels", "=", "data", "[", "i", "]", "\n", "self", ".", "assertEqual", "(", "torch", ".", "Size", "(", "(", "14", ",", "self", ".", "window_size", ")", ")", ",", "features", ".", "shape", ")", "\n", "self", ".", "assertEqual", "(", "torch", ".", "Size", "(", "(", ")", ")", ",", "labels", ".", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate.test_distances": [[42, 50], ["templates.PretrainingDataModuleTemplate.subTest", "templates.PretrainingDataModuleTemplate._run_epoch", "templates.PretrainingDataModuleTemplate.assertTrue", "templates.PretrainingDataModuleTemplate.subTest", "templates.PretrainingDataModuleTemplate._run_epoch", "templates.PretrainingDataModuleTemplate.assertTrue", "templates.PretrainingDataModuleTemplate.dataset.train_dataloader", "torch.all", "torch.all", "templates.PretrainingDataModuleTemplate.dataset.val_dataloader"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate._run_epoch", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate._run_epoch", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.train_dataloader", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.val_dataloader"], ["", "", "def", "test_distances", "(", "self", ")", ":", "\n", "        ", "with", "self", ".", "subTest", "(", "split", "=", "\"dev\"", ")", ":", "\n", "            ", "_", ",", "_", ",", "distances", ",", "_", "=", "self", ".", "_run_epoch", "(", "self", ".", "dataset", ".", "train_dataloader", "(", ")", ")", "\n", "self", ".", "assertTrue", "(", "torch", ".", "all", "(", "distances", ">=", "0", ")", ")", "\n", "\n", "", "with", "self", ".", "subTest", "(", "split", "=", "\"val\"", ")", ":", "\n", "            ", "_", ",", "_", ",", "distances", ",", "_", "=", "self", ".", "_run_epoch", "(", "self", ".", "dataset", ".", "val_dataloader", "(", ")", "[", "0", "]", ")", "\n", "self", ".", "assertTrue", "(", "torch", ".", "all", "(", "distances", ">=", "0", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate.test_determinism": [[51, 67], ["templates.PretrainingDataModuleTemplate.subTest", "templates.PretrainingDataModuleTemplate.dataset.train_dataloader", "templates.PretrainingDataModuleTemplate._run_epoch", "templates.PretrainingDataModuleTemplate._run_epoch", "zip", "templates.PretrainingDataModuleTemplate.subTest", "templates.PretrainingDataModuleTemplate._run_epoch", "templates.PretrainingDataModuleTemplate._run_epoch", "zip", "templates.PretrainingDataModuleTemplate.assertNotEqual", "templates.PretrainingDataModuleTemplate.dataset.val_dataloader", "templates.PretrainingDataModuleTemplate.assertEqual", "torch.sum", "torch.sum"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.train_dataloader", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate._run_epoch", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate._run_epoch", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate._run_epoch", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate._run_epoch", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.val_dataloader"], ["", "", "def", "test_determinism", "(", "self", ")", ":", "\n", "        ", "with", "self", ".", "subTest", "(", "split", "=", "\"dev\"", ")", ":", "\n", "            ", "train_loader", "=", "self", ".", "dataset", ".", "train_dataloader", "(", ")", "\n", "*", "one_train_data", ",", "one_domain_labels", "=", "self", ".", "_run_epoch", "(", "train_loader", ")", "\n", "*", "another_train_data", ",", "another_domain_labels", "=", "self", ".", "_run_epoch", "(", "train_loader", ")", "\n", "\n", "for", "one", ",", "another", "in", "zip", "(", "one_train_data", ",", "another_train_data", ")", ":", "\n", "                ", "self", ".", "assertNotEqual", "(", "0.0", ",", "torch", ".", "sum", "(", "one", "-", "another", ")", ")", "\n", "\n", "", "", "with", "self", ".", "subTest", "(", "split", "=", "\"val\"", ")", ":", "\n", "            ", "paired_val_loader", "=", "self", ".", "dataset", ".", "val_dataloader", "(", ")", "[", "0", "]", "\n", "one_train_data", "=", "self", ".", "_run_epoch", "(", "paired_val_loader", ")", "\n", "another_train_data", "=", "self", ".", "_run_epoch", "(", "paired_val_loader", ")", "\n", "\n", "for", "one", ",", "another", "in", "zip", "(", "one_train_data", ",", "another_train_data", ")", ":", "\n", "                ", "self", ".", "assertEqual", "(", "0.0", ",", "torch", ".", "sum", "(", "one", "-", "another", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate._run_epoch": [[68, 85], ["torch.empty", "torch.empty", "torch.empty", "torch.empty", "len", "len", "len", "len"], "methods", ["None"], ["", "", "", "def", "_run_epoch", "(", "self", ",", "loader", ")", ":", "\n", "        ", "anchors", "=", "torch", ".", "empty", "(", "(", "len", "(", "loader", ".", "dataset", ")", ",", "14", ",", "self", ".", "window_size", ")", ")", "\n", "queries", "=", "torch", ".", "empty", "(", "(", "len", "(", "loader", ".", "dataset", ")", ",", "14", ",", "self", ".", "window_size", ")", ")", "\n", "distances", "=", "torch", ".", "empty", "(", "len", "(", "loader", ".", "dataset", ")", ")", "\n", "domain_labels", "=", "torch", ".", "empty", "(", "len", "(", "loader", ".", "dataset", ")", ")", "\n", "\n", "start", "=", "0", "\n", "end", "=", "loader", ".", "batch_size", "\n", "for", "anchor", ",", "query", ",", "dist", ",", "domain", "in", "loader", ":", "\n", "            ", "anchors", "[", "start", ":", "end", "]", "=", "anchor", "\n", "queries", "[", "start", ":", "end", "]", "=", "query", "\n", "distances", "[", "start", ":", "end", "]", "=", "dist", "\n", "domain_labels", "[", "start", ":", "end", "]", "=", "domain", "\n", "start", "=", "end", "\n", "end", "+=", "anchor", ".", "shape", "[", "0", "]", "\n", "\n", "", "return", "anchors", ",", "queries", ",", "distances", ",", "domain_labels", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.dataset_tests.templates.PretrainingDataModuleTemplate.test_min_distance": [[86, 91], ["templates.PretrainingDataModuleTemplate.dataset.train_dataloader", "templates.PretrainingDataModuleTemplate.assertEqual", "templates.PretrainingDataModuleTemplate.assertEqual", "templates.PretrainingDataModuleTemplate.dataset.val_dataloader"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.train_dataloader", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.datasets.cmapss.CMAPSSDataModule.val_dataloader"], ["", "def", "test_min_distance", "(", "self", ")", ":", "\n", "        ", "train_loader", "=", "self", ".", "dataset", ".", "train_dataloader", "(", ")", "\n", "self", ".", "assertEqual", "(", "self", ".", "dataset", ".", "min_distance", ",", "train_loader", ".", "dataset", ".", "min_distance", ")", "\n", "val_loader", "=", "self", ".", "dataset", ".", "val_dataloader", "(", ")", "[", "0", "]", "\n", "self", ".", "assertEqual", "(", "1", ",", "val_loader", ".", "dataset", ".", "min_distance", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.model_tests.test_networks.ModelTestsMixin.test_shape": [[9, 13], ["torch.no_grad", "test_networks.ModelTestsMixin.net", "test_networks.ModelTestsMixin.assertEqual"], "methods", ["None"], ["    ", "@", "torch", ".", "no_grad", "(", ")", "\n", "def", "test_shape", "(", "self", ")", ":", "\n", "        ", "outputs", "=", "self", ".", "net", "(", "self", ".", "test_inputs", ")", "\n", "self", ".", "assertEqual", "(", "self", ".", "expected_shape", ",", "outputs", ".", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.model_tests.test_networks.ModelTestsMixin.test_device_moving": [[14, 35], ["torch.no_grad", "unittest.skipUnless", "test_networks.ModelTestsMixin.net.eval", "torch.manual_seed", "test_networks.ModelTestsMixin.net", "test_networks.ModelTestsMixin.net.to", "torch.manual_seed", "test_networks.ModelTestsMixin.", "torch.manual_seed", "test_networks.ModelTestsMixin.cpu", "test_networks.ModelTestsMixin.cpu.", "test_networks.ModelTestsMixin.assertAlmostEqual", "test_networks.ModelTestsMixin.assertAlmostEqual", "torch.cuda.is_available", "test_networks.ModelTestsMixin.test_inputs.to", "torch.sum().item", "torch.sum().item", "torch.sum", "torch.sum", "test_networks.ModelTestsMixin.cpu"], "methods", ["None"], ["", "@", "torch", ".", "no_grad", "(", ")", "\n", "@", "unittest", ".", "skipUnless", "(", "torch", ".", "cuda", ".", "is_available", "(", ")", ",", "\"No GPU was detected\"", ")", "\n", "def", "test_device_moving", "(", "self", ")", ":", "\n", "        ", "self", ".", "net", ".", "eval", "(", ")", "\n", "\n", "torch", ".", "manual_seed", "(", "42", ")", "\n", "outputs_cpu", "=", "self", ".", "net", "(", "self", ".", "test_inputs", ")", "\n", "\n", "net_on_gpu", "=", "self", ".", "net", ".", "to", "(", "\"cuda:0\"", ")", "\n", "torch", ".", "manual_seed", "(", "42", ")", "\n", "outputs_gpu", "=", "net_on_gpu", "(", "self", ".", "test_inputs", ".", "to", "(", "\"cuda:0\"", ")", ")", "\n", "\n", "torch", ".", "manual_seed", "(", "42", ")", "\n", "net_back_on_cpu", "=", "net_on_gpu", ".", "cpu", "(", ")", "\n", "outputs_back_on_cpu", "=", "net_back_on_cpu", "(", "self", ".", "test_inputs", ")", "\n", "\n", "self", ".", "assertAlmostEqual", "(", "\n", "0.0", ",", "torch", ".", "sum", "(", "outputs_cpu", "-", "outputs_gpu", ".", "cpu", "(", ")", ")", ".", "item", "(", ")", ",", "delta", "=", "10e-6", "\n", ")", "\n", "self", ".", "assertAlmostEqual", "(", "\n", "0.0", ",", "torch", ".", "sum", "(", "outputs_cpu", "-", "outputs_back_on_cpu", ")", ".", "item", "(", ")", ",", "delta", "=", "10e-6", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.model_tests.test_networks.ModelTestsMixin.test_batch_independence": [[37, 63], ["test_networks.ModelTestsMixin.test_inputs.clone", "test_networks.ModelTestsMixin.net.eval", "test_networks.ModelTestsMixin.net", "test_networks.ModelTestsMixin.net.train", "torch.randint", "torch.ones_like", "test_networks.ModelTestsMixin.mean", "test_networks.ModelTestsMixin.mean.backward", "enumerate", "test_networks.ModelTestsMixin.assertTrue", "test_networks.ModelTestsMixin.assertTrue", "torch.all().item", "torch.all", "torch.all"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.GaussianSequenceLayer.backward"], ["", "def", "test_batch_independence", "(", "self", ")", ":", "\n", "        ", "inputs", "=", "self", ".", "test_inputs", ".", "clone", "(", ")", "\n", "inputs", ".", "requires_grad", "=", "True", "\n", "\n", "# Compute forward pass in eval mode to deactivate batch norm", "\n", "self", ".", "net", ".", "eval", "(", ")", "\n", "outputs", "=", "self", ".", "net", "(", "inputs", ")", "\n", "self", ".", "net", ".", "train", "(", ")", "\n", "\n", "# Mask loss for certain samples in batch", "\n", "batch_size", "=", "inputs", ".", "shape", "[", "0", "]", "\n", "mask_idx", "=", "torch", ".", "randint", "(", "0", ",", "batch_size", ",", "(", ")", ")", "\n", "mask", "=", "torch", ".", "ones_like", "(", "outputs", ")", "\n", "mask", "[", "mask_idx", "]", "=", "0", "\n", "outputs", "=", "outputs", "*", "mask", "\n", "\n", "# Compute backward pass", "\n", "loss", "=", "outputs", ".", "mean", "(", ")", "\n", "loss", ".", "backward", "(", ")", "\n", "\n", "# Check if gradient exists and is zero for masked samples", "\n", "for", "i", ",", "grad", "in", "enumerate", "(", "inputs", ".", "grad", ")", ":", "\n", "            ", "if", "i", "==", "mask_idx", ":", "\n", "                ", "self", ".", "assertTrue", "(", "torch", ".", "all", "(", "grad", "==", "0", ")", ".", "item", "(", ")", ")", "\n", "", "else", ":", "\n", "                ", "self", ".", "assertTrue", "(", "not", "torch", ".", "all", "(", "grad", "==", "0", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.model_tests.test_networks.ModelTestsMixin.test_all_parameters_updated": [[64, 77], ["torch.optim.SGD", "test_networks.ModelTestsMixin.net", "test_networks.ModelTestsMixin.mean", "test_networks.ModelTestsMixin.mean.backward", "torch.optim.SGD.step", "test_networks.ModelTestsMixin.net.named_parameters", "test_networks.ModelTestsMixin.net.parameters", "test_networks.ModelTestsMixin.subTest", "test_networks.ModelTestsMixin.assertIsNotNone", "test_networks.ModelTestsMixin.assertNotEqual", "torch.sum"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.GaussianSequenceLayer.backward"], ["", "", "", "def", "test_all_parameters_updated", "(", "self", ")", ":", "\n", "        ", "optim", "=", "torch", ".", "optim", ".", "SGD", "(", "self", ".", "net", ".", "parameters", "(", ")", ",", "lr", "=", "0.1", ")", "\n", "\n", "outputs", "=", "self", ".", "net", "(", "self", ".", "test_inputs", ")", "\n", "loss", "=", "outputs", ".", "mean", "(", ")", "\n", "loss", ".", "backward", "(", ")", "\n", "optim", ".", "step", "(", ")", "\n", "\n", "for", "param_name", ",", "param", "in", "self", ".", "net", ".", "named_parameters", "(", ")", ":", "\n", "            ", "if", "param", ".", "requires_grad", ":", "\n", "                ", "with", "self", ".", "subTest", "(", "name", "=", "param_name", ")", ":", "\n", "                    ", "self", ".", "assertIsNotNone", "(", "param", ".", "grad", ")", "\n", "self", ".", "assertNotEqual", "(", "0.0", ",", "torch", ".", "sum", "(", "param", ".", "grad", "**", "2", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.model_tests.test_networks.TestEncoder.setUp": [[80, 84], ["models.networks.Encoder", "torch.randn"], "methods", ["None"], ["    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "net", "=", "networks", ".", "Encoder", "(", "14", ",", "16", ",", "3", ",", "6", ",", "64", ",", "30", ",", "0.1", ",", "True", ")", "\n", "self", ".", "test_inputs", "=", "torch", ".", "randn", "(", "16", ",", "14", ",", "30", ")", "\n", "self", ".", "expected_shape", "=", "(", "16", ",", "64", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.model_tests.test_networks.TestDecoder.setUp": [[87, 91], ["models.networks.Decoder", "torch.randn"], "methods", ["None"], ["    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "net", "=", "networks", ".", "Decoder", "(", "14", ",", "16", ",", "3", ",", "6", ",", "64", ",", "30", ",", "0.1", ")", "\n", "self", ".", "test_inputs", "=", "torch", ".", "randn", "(", "16", ",", "64", ")", "\n", "self", ".", "expected_shape", "=", "(", "16", ",", "14", ",", "30", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.model_tests.test_networks.TestRegressor.setUp": [[94, 98], ["models.networks.Regressor", "torch.randn"], "methods", ["None"], ["    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "net", "=", "networks", ".", "Regressor", "(", "64", ")", "\n", "self", ".", "test_inputs", "=", "torch", ".", "randn", "(", "16", ",", "64", ")", "\n", "self", ".", "expected_shape", "=", "(", "16", ",", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.model_tests.test_layers.TestDeflatten.test_deflattening": [[9, 19], ["torch.randn", "models.layers.DeFlatten", "models.layers.DeFlatten.", "layers.DeFlatten.view", "test_layers.TestDeflatten.assertEqual", "test_layers.TestDeflatten.assertEqual", "torch.sum().item", "torch.sum"], "methods", ["None"], ["    ", "def", "test_deflattening", "(", "self", ")", ":", "\n", "        ", "inputs", "=", "torch", ".", "randn", "(", "16", ",", "512", ")", "\n", "expected_shape", "=", "(", "16", ",", "8", ",", "64", ")", "\n", "module", "=", "layers", ".", "DeFlatten", "(", "64", ",", "8", ")", "\n", "\n", "deflattened", "=", "module", "(", "inputs", ")", "\n", "reflattened", "=", "deflattened", ".", "view", "(", "16", ",", "-", "1", ")", "\n", "\n", "self", ".", "assertEqual", "(", "expected_shape", ",", "deflattened", ".", "shape", ")", "\n", "self", ".", "assertEqual", "(", "0.0", ",", "torch", ".", "sum", "(", "inputs", "-", "reflattened", ")", ".", "item", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.model_tests.test_layers.TestGradientReversal.test_against_identity": [[22, 38], ["torch.randn", "torch.randn", "models.layers.GradientReversalLayer", "torch.mean", "torch.mean.backward", "torch.randn.grad.clone", "torch.mean", "torch.mean.backward", "torch.randn.grad.clone", "test_layers.TestGradientReversal.assertEqual", "models.layers.GradientReversalLayer.", "torch.sum"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.GaussianSequenceLayer.backward", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.GaussianSequenceLayer.backward"], ["    ", "def", "test_against_identity", "(", "self", ")", ":", "\n", "        ", "inputs", "=", "torch", ".", "randn", "(", "16", ",", "64", ",", "1", ")", "\n", "weight", "=", "torch", ".", "randn", "(", "1", ",", "32", ",", "64", ")", "\n", "weight", ".", "requires_grad", "=", "True", "\n", "grad_reversal", "=", "layers", ".", "GradientReversalLayer", "(", ")", "\n", "\n", "normal_loss", "=", "torch", ".", "mean", "(", "weight", "@", "inputs", ")", "\n", "normal_loss", ".", "backward", "(", ")", "\n", "normal_gradient", "=", "weight", ".", "grad", ".", "clone", "(", ")", "\n", "weight", ".", "grad", "=", "None", "\n", "\n", "reverse_loss", "=", "torch", ".", "mean", "(", "grad_reversal", "(", "weight", "@", "inputs", ")", ")", "\n", "reverse_loss", ".", "backward", "(", ")", "\n", "reverse_gradient", "=", "weight", ".", "grad", ".", "clone", "(", ")", "\n", "\n", "self", ".", "assertEqual", "(", "0.0", ",", "torch", ".", "sum", "(", "normal_gradient", "+", "reverse_gradient", ")", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_pretraining.TestUnsupervisedPretraining.test_mode_hparam": [[10, 14], ["test_pretraining.TestUnsupervisedPretraining.assertLess", "test_pretraining.TestUnsupervisedPretraining.assertIn", "test_pretraining.TestUnsupervisedPretraining.assertEqual", "len"], "methods", ["None"], ["    ", "def", "test_mode_hparam", "(", "self", ")", ":", "\n", "        ", "self", ".", "assertLess", "(", "1", ",", "len", "(", "self", ".", "net", ".", "hparams", ")", ")", "\n", "self", ".", "assertIn", "(", "\"mode\"", ",", "self", ".", "net", ".", "hparams", ")", "\n", "self", ".", "assertEqual", "(", "\"metric\"", ",", "self", ".", "net", ".", "hparams", "[", "\"mode\"", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_pretraining.TestUnsupervisedPretraining.test_encoder": [[15, 20], ["torch.no_grad", "torch.randn", "test_pretraining.TestUnsupervisedPretraining.net.encoder", "test_pretraining.TestUnsupervisedPretraining.assertEqual"], "methods", ["None"], ["", "@", "torch", ".", "no_grad", "(", ")", "\n", "def", "test_encoder", "(", "self", ")", ":", "\n", "        ", "inputs", "=", "torch", ".", "randn", "(", "16", ",", "14", ",", "30", ")", "\n", "outputs", "=", "self", ".", "net", ".", "encoder", "(", "inputs", ")", "\n", "self", ".", "assertEqual", "(", "self", ".", "encoder_shape", ",", "outputs", ".", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_pretraining.TestUnsupervisedPretraining.test_get_anchor_query_embeddings": [[21, 36], ["torch.no_grad", "torch.randn", "torch.randn", "test_pretraining.TestUnsupervisedPretraining.net._get_anchor_query_embeddings", "test_pretraining.TestUnsupervisedPretraining.assertEqual", "test_pretraining.TestUnsupervisedPretraining.assertEqual", "torch.norm().tolist", "torch.norm().tolist", "test_pretraining.TestUnsupervisedPretraining.assertAlmostEqual", "test_pretraining.TestUnsupervisedPretraining.assertAlmostEqual", "torch.norm", "torch.norm"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.pretraining.UnsupervisedPretraining._get_anchor_query_embeddings"], ["", "@", "torch", ".", "no_grad", "(", ")", "\n", "def", "test_get_anchor_query_embeddings", "(", "self", ")", ":", "\n", "        ", "anchors", "=", "torch", ".", "randn", "(", "16", ",", "14", ",", "30", ")", "\n", "queries", "=", "torch", ".", "randn", "(", "16", ",", "14", ",", "30", ")", "\n", "anchor_embeddings", ",", "query_embeddings", "=", "self", ".", "net", ".", "_get_anchor_query_embeddings", "(", "\n", "anchors", ",", "queries", "\n", ")", "\n", "\n", "self", ".", "assertEqual", "(", "self", ".", "encoder_shape", ",", "anchor_embeddings", ".", "shape", ")", "\n", "self", ".", "assertEqual", "(", "self", ".", "encoder_shape", ",", "query_embeddings", ".", "shape", ")", "\n", "\n", "for", "norm", "in", "torch", ".", "norm", "(", "anchor_embeddings", ",", "dim", "=", "1", ")", ".", "tolist", "(", ")", ":", "\n", "            ", "self", ".", "assertAlmostEqual", "(", "1.0", ",", "norm", ",", "places", "=", "6", ")", "\n", "", "for", "norm", "in", "torch", ".", "norm", "(", "query_embeddings", ",", "dim", "=", "1", ")", ".", "tolist", "(", ")", ":", "\n", "            ", "self", ".", "assertAlmostEqual", "(", "1.0", ",", "norm", ",", "places", "=", "6", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_pretraining.TestUnsupervisedPretraining.test_forward": [[37, 49], ["torch.no_grad", "torch.randn", "torch.randn", "test_pretraining.TestUnsupervisedPretraining.net.eval", "test_pretraining.TestUnsupervisedPretraining.net", "test_pretraining.TestUnsupervisedPretraining.assertEqual", "test_pretraining.TestUnsupervisedPretraining.assertAlmostEqual", "test_pretraining.TestUnsupervisedPretraining.assertNotAlmostEqual", "torch.Size", "distances[].item", "test_pretraining.TestUnsupervisedPretraining.sum().item", "test_pretraining.TestUnsupervisedPretraining.sum"], "methods", ["None"], ["", "", "@", "torch", ".", "no_grad", "(", ")", "\n", "def", "test_forward", "(", "self", ")", ":", "\n", "        ", "anchors", "=", "torch", ".", "randn", "(", "16", ",", "14", ",", "30", ")", "\n", "anchors", "[", "5", "]", "=", "1.0", "\n", "queries", "=", "torch", ".", "randn", "(", "16", ",", "14", ",", "30", ")", "\n", "queries", "[", "5", "]", "=", "1.0", "\n", "self", ".", "net", ".", "eval", "(", ")", "\n", "distances", "=", "self", ".", "net", "(", "anchors", ",", "queries", ")", "\n", "\n", "self", ".", "assertEqual", "(", "torch", ".", "Size", "(", "(", "16", ",", ")", ")", ",", "distances", ".", "shape", ")", "\n", "self", ".", "assertAlmostEqual", "(", "0.0", ",", "distances", "[", "5", "]", ".", "item", "(", ")", ",", "delta", "=", "1e-6", ")", "\n", "self", ".", "assertNotAlmostEqual", "(", "0.0", ",", "distances", ".", "sum", "(", ")", ".", "item", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_pretraining.TestUnsupervisedPretraining.test_batch_independence": [[50, 82], ["torch.autograd.set_detect_anomaly", "torch.randn", "torch.randn", "test_pretraining.TestUnsupervisedPretraining.net.eval", "test_pretraining.TestUnsupervisedPretraining.net", "test_pretraining.TestUnsupervisedPretraining.net.train", "torch.randint", "torch.ones_like", "output.mean", "output.mean.backward", "enumerate", "torch.autograd.set_detect_anomaly", "test_pretraining.TestUnsupervisedPretraining.assertTrue", "test_pretraining.TestUnsupervisedPretraining.assertTrue", "torch.all().item", "torch.all", "torch.all"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.GaussianSequenceLayer.backward"], ["", "def", "test_batch_independence", "(", "self", ")", ":", "\n", "        ", "torch", ".", "autograd", ".", "set_detect_anomaly", "(", "True", ")", "\n", "\n", "anchors", "=", "torch", ".", "randn", "(", "16", ",", "14", ",", "30", ")", "\n", "queries", "=", "torch", ".", "randn", "(", "16", ",", "14", ",", "30", ")", "\n", "anchors", ".", "requires_grad", "=", "True", "\n", "\n", "# Compute forward pass in eval mode to deactivate batch norm", "\n", "self", ".", "net", ".", "eval", "(", ")", "\n", "outputs", "=", "self", ".", "net", "(", "anchors", ",", "queries", ")", "\n", "self", ".", "net", ".", "train", "(", ")", "\n", "\n", "# Mask loss for certain samples in batch", "\n", "batch_size", "=", "outputs", ".", "shape", "[", "0", "]", "\n", "mask_idx", "=", "torch", ".", "randint", "(", "0", ",", "batch_size", ",", "(", ")", ")", "\n", "mask", "=", "torch", ".", "ones_like", "(", "outputs", ")", "\n", "mask", "[", "mask_idx", "]", "=", "0", "\n", "output", "=", "outputs", "*", "mask", "\n", "\n", "# Compute backward pass", "\n", "loss", "=", "output", ".", "mean", "(", ")", "\n", "loss", ".", "backward", "(", "retain_graph", "=", "True", ")", "\n", "\n", "# Check if gradient exists and is zero for masked samples", "\n", "for", "i", ",", "grad", "in", "enumerate", "(", "anchors", ".", "grad", "[", ":", "batch_size", "]", ")", ":", "\n", "            ", "if", "i", "==", "mask_idx", ":", "\n", "                ", "self", ".", "assertTrue", "(", "torch", ".", "all", "(", "grad", "==", "0", ")", ".", "item", "(", ")", ")", "\n", "", "else", ":", "\n", "                ", "self", ".", "assertTrue", "(", "not", "torch", ".", "all", "(", "grad", "==", "0", ")", ")", "\n", "", "", "anchors", ".", "grad", "=", "None", "\n", "\n", "torch", ".", "autograd", ".", "set_detect_anomaly", "(", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_pretraining.TestUnsupervisedPretraining.test_all_parameters_updated": [[83, 101], ["torch.optim.SGD", "test_pretraining.TestUnsupervisedPretraining.net.training_step", "test_pretraining.TestUnsupervisedPretraining.backward", "torch.optim.SGD.step", "test_pretraining.TestUnsupervisedPretraining.net.named_parameters", "test_pretraining.TestUnsupervisedPretraining.net.parameters", "torch.randn", "torch.randn", "torch.randn", "torch.randn", "test_pretraining.TestUnsupervisedPretraining.subTest", "test_pretraining.TestUnsupervisedPretraining.assertIsNotNone", "test_pretraining.TestUnsupervisedPretraining.assertNotEqual", "torch.sum"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.training_step", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.GaussianSequenceLayer.backward"], ["", "def", "test_all_parameters_updated", "(", "self", ")", ":", "\n", "        ", "optim", "=", "torch", ".", "optim", ".", "SGD", "(", "self", ".", "net", ".", "parameters", "(", ")", ",", "lr", "=", "0.1", ")", "\n", "\n", "inputs", "=", "(", "\n", "torch", ".", "randn", "(", "16", ",", "14", ",", "30", ")", ",", "\n", "torch", ".", "randn", "(", "16", ",", "14", ",", "30", ")", ",", "\n", "torch", ".", "randn", "(", "16", ")", ",", "\n", "torch", ".", "randn", "(", "16", ")", ",", "\n", ")", "\n", "loss", "=", "self", ".", "net", ".", "training_step", "(", "inputs", ",", "batch_idx", "=", "0", ")", "\n", "loss", ".", "backward", "(", ")", "\n", "optim", ".", "step", "(", ")", "\n", "\n", "for", "param_name", ",", "param", "in", "self", ".", "net", ".", "named_parameters", "(", ")", ":", "\n", "            ", "if", "param", ".", "requires_grad", ":", "\n", "                ", "with", "self", ".", "subTest", "(", "name", "=", "param_name", ")", ":", "\n", "                    ", "self", ".", "assertIsNotNone", "(", "param", ".", "grad", ")", "\n", "self", ".", "assertNotEqual", "(", "0.0", ",", "torch", ".", "sum", "(", "param", ".", "grad", "**", "2", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_pretraining.TestUnsupervisedPretraining.test_metric_val_reduction": [[102, 130], ["unittest.mock.patch", "torch.no_grad", "torch.randn", "torch.randn", "torch.randn", "test_pretraining.TestUnsupervisedPretraining._mock_predictions", "test_pretraining.TestUnsupervisedPretraining._feed_dummy_val", "torch.pairwise_distance", "torch.mean", "torch.tensor", "test_pretraining.TestUnsupervisedPretraining.net.validation_epoch_end", "test_pretraining.TestUnsupervisedPretraining._assert_logs", "torch.randn.view", "torch.randn.view"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._mock_predictions", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._feed_dummy_val", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.validation_epoch_end", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._assert_logs"], ["", "", "", "", "@", "mock", ".", "patch", "(", "\"pytorch_lightning.LightningModule.log\"", ")", "\n", "@", "torch", ".", "no_grad", "(", ")", "\n", "def", "test_metric_val_reduction", "(", "self", ",", "mock_log", ")", ":", "\n", "        ", "paired_batches", "=", "600", "\n", "embedding_dim", "=", "self", ".", "encoder_shape", "[", "-", "1", "]", "\n", "anchor_embeddings", "=", "torch", ".", "randn", "(", "paired_batches", ",", "32", ",", "embedding_dim", ")", "\n", "query_embeddings", "=", "torch", ".", "randn", "(", "paired_batches", ",", "32", ",", "embedding_dim", ")", "\n", "domain_predictions", "=", "torch", ".", "randn", "(", "paired_batches", ",", "32", ")", "\n", "self", ".", "_mock_predictions", "(", "anchor_embeddings", ",", "query_embeddings", ",", "domain_predictions", ")", "\n", "\n", "self", ".", "_feed_dummy_val", "(", "paired_batches", ")", "\n", "\n", "regression_loss", "=", "torch", ".", "pairwise_distance", "(", "\n", "anchor_embeddings", ".", "view", "(", "-", "1", ",", "embedding_dim", ")", ",", "\n", "query_embeddings", ".", "view", "(", "-", "1", ",", "embedding_dim", ")", ",", "\n", "eps", "=", "1e-8", ",", "\n", ")", "\n", "regression_loss", "=", "torch", ".", "mean", "(", "regression_loss", "**", "2", ")", "\n", "domain_loss", "=", "torch", ".", "tensor", "(", "0.0", ")", "\n", "checkpoint_score", "=", "regression_loss", "-", "0.1", "*", "domain_loss", "\n", "expected_logs", "=", "{", "\n", "\"val/regression_loss\"", ":", "(", "regression_loss", ",", "0.0001", ")", ",", "\n", "\"val/domain_loss\"", ":", "(", "domain_loss", ",", "0.0001", ")", ",", "\n", "\"val/checkpoint_score\"", ":", "(", "checkpoint_score", ",", "0.0001", ")", ",", "\n", "}", "\n", "self", ".", "net", ".", "validation_epoch_end", "(", "[", "]", ")", "\n", "\n", "self", ".", "_assert_logs", "(", "mock_log", ",", "expected_logs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_pretraining.TestUnsupervisedPretraining.test_metric_val_updates": [[131, 142], ["torch.randn", "torch.randn", "torch.randn", "test_pretraining.TestUnsupervisedPretraining._mock_predictions", "test_pretraining.TestUnsupervisedPretraining._feed_dummy_val", "test_pretraining.TestUnsupervisedPretraining.assertEqual", "test_pretraining.TestUnsupervisedPretraining.assertEqual"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._mock_predictions", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._feed_dummy_val"], ["", "def", "test_metric_val_updates", "(", "self", ")", ":", "\n", "        ", "paired_batches", "=", "600", "\n", "embedding_dim", "=", "self", ".", "encoder_shape", "[", "-", "1", "]", "\n", "anchor_embeddings", "=", "torch", ".", "randn", "(", "paired_batches", ",", "32", ",", "embedding_dim", ")", "\n", "query_embeddings", "=", "torch", ".", "randn", "(", "paired_batches", ",", "32", ",", "embedding_dim", ")", "\n", "domain_predictions", "=", "torch", ".", "randn", "(", "paired_batches", ",", "32", ")", "\n", "self", ".", "_mock_predictions", "(", "anchor_embeddings", ",", "query_embeddings", ",", "domain_predictions", ")", "\n", "\n", "self", ".", "_feed_dummy_val", "(", "paired_batches", ")", "\n", "self", ".", "assertEqual", "(", "paired_batches", ",", "self", ".", "net", ".", "regression_metric", ".", "sample_counter", ")", "\n", "self", ".", "assertEqual", "(", "paired_batches", ",", "self", ".", "net", ".", "domain_metric", ".", "sample_counter", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_pretraining.TestUnsupervisedPretraining._mock_predictions": [[143, 146], ["torch.cat", "unittest.mock.MagicMock"], "methods", ["None"], ["", "def", "_mock_predictions", "(", "self", ",", "anchor_embeddings", ",", "query_embeddings", ",", "domain_predictions", ")", ":", "\n", "        ", "embeddings", "=", "torch", ".", "cat", "(", "[", "anchor_embeddings", ",", "query_embeddings", "]", ",", "dim", "=", "1", ")", "\n", "self", ".", "net", ".", "encoder", ".", "forward", "=", "mock", ".", "MagicMock", "(", "side_effect", "=", "embeddings", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_pretraining.TestUnsupervisedPretraining._feed_dummy_val": [[147, 158], ["range", "test_pretraining.TestUnsupervisedPretraining.net.validation_step", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.validation_step"], ["", "def", "_feed_dummy_val", "(", "self", ",", "num_batches", ")", ":", "\n", "        ", "for", "i", "in", "range", "(", "num_batches", ")", ":", "\n", "            ", "self", ".", "net", ".", "validation_step", "(", "\n", "(", "\n", "torch", ".", "zeros", "(", "32", ",", "14", ",", "30", ")", ",", "\n", "torch", ".", "zeros", "(", "32", ",", "14", ",", "30", ")", ",", "\n", "torch", ".", "zeros", "(", "32", ")", ",", "\n", "torch", ".", "zeros", "(", "32", ")", ",", "\n", ")", ",", "\n", "batch_idx", "=", "i", ",", "\n", "dataloader_idx", "=", "0", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_pretraining.TestUnsupervisedPretraining._assert_logs": [[160, 170], ["mock_log.assert_called", "test_pretraining.TestUnsupervisedPretraining.assertIn", "expected_value.item.item.item", "[].item", "test_pretraining.TestUnsupervisedPretraining.subTest", "test_pretraining.TestUnsupervisedPretraining.assertAlmostEqual"], "methods", ["None"], ["", "", "def", "_assert_logs", "(", "self", ",", "mock_log", ",", "expected_logs", ")", ":", "\n", "        ", "mock_log", ".", "assert_called", "(", ")", "\n", "for", "call", "in", "mock_log", ".", "mock_calls", ":", "\n", "            ", "metric", "=", "call", "[", "1", "]", "[", "0", "]", "\n", "self", ".", "assertIn", "(", "metric", ",", "expected_logs", ",", "\"Unexpected logged metric found.\"", ")", "\n", "expected_value", ",", "delta", "=", "expected_logs", "[", "metric", "]", "\n", "expected_value", "=", "expected_value", ".", "item", "(", ")", "\n", "actual_value", "=", "call", "[", "1", "]", "[", "1", "]", ".", "item", "(", ")", "\n", "with", "self", ".", "subTest", "(", "metric", ")", ":", "\n", "                ", "self", ".", "assertAlmostEqual", "(", "expected_value", ",", "actual_value", ",", "delta", "=", "delta", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_pretraining.TestCnnUnsupervisedPretraining.setUp": [[173, 188], ["torch.Size", "lightning.pretraining.UnsupervisedPretraining"], "methods", ["None"], ["    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "encoder_shape", "=", "torch", ".", "Size", "(", "(", "16", ",", "64", ")", ")", "\n", "self", ".", "net", "=", "pretraining", ".", "UnsupervisedPretraining", "(", "\n", "in_channels", "=", "14", ",", "\n", "seq_len", "=", "30", ",", "\n", "num_layers", "=", "4", ",", "\n", "kernel_size", "=", "3", ",", "\n", "base_filters", "=", "16", ",", "\n", "latent_dim", "=", "64", ",", "\n", "dropout", "=", "0.1", ",", "\n", "domain_tradeoff", "=", "0.0", ",", "\n", "domain_disc_dim", "=", "32", ",", "\n", "num_disc_layers", "=", "2", ",", "\n", "weight_decay", "=", "0", ",", "\n", "lr", "=", "0.01", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_baseline.TestBaselineTemplate.test_encoder": [[11, 16], ["torch.no_grad", "torch.randn", "test_baseline.TestBaselineTemplate.net.encoder", "test_baseline.TestBaselineTemplate.assertEqual"], "methods", ["None"], ["class", "TestCMAPSSBaseline", "(", "unittest", ".", "TestCase", ")", ":", "\n", "    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "dataset", "=", "datasets", ".", "BaselineDataModule", "(", "\n", "3", ",", "batch_size", "=", "16", ",", "percent_fail_runs", "=", "0.8", "\n", ")", "\n", "self", ".", "dataset", ".", "prepare_data", "(", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_baseline.TestBaselineTemplate.test_regressor": [[17, 22], ["torch.no_grad", "torch.randn", "test_baseline.TestBaselineTemplate.net.regressor", "test_baseline.TestBaselineTemplate.assertEqual", "torch.Size"], "methods", ["None"], ["self", ".", "dataset", ".", "setup", "(", ")", "\n", "\n", "", "def", "test_override_window_size", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "datasets", ".", "BaselineDataModule", "(", "\n", "3", ",", "batch_size", "=", "16", ",", "window_size", "=", "40", ",", "percent_fail_runs", "=", "0.8", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_baseline.TestBaselineTemplate.test_batch_independence": [[23, 50], ["torch.randn", "test_baseline.TestBaselineTemplate.net.eval", "test_baseline.TestBaselineTemplate.net", "test_baseline.TestBaselineTemplate.net.train", "torch.randint", "torch.ones_like", "output.mean", "output.mean.backward", "enumerate", "test_baseline.TestBaselineTemplate.assertTrue", "test_baseline.TestBaselineTemplate.assertTrue", "torch.all().item", "torch.all", "torch.all"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.GaussianSequenceLayer.backward"], ["for", "fd", "in", "dataset", ".", "cmapss", ".", "values", "(", ")", ":", "\n", "            ", "self", ".", "assertEqual", "(", "40", ",", "fd", ".", "window_size", ")", "\n", "\n", "", "", "def", "test_default_window_size", "(", "self", ")", ":", "\n", "        ", "window_sizes", "=", "[", "30", ",", "20", ",", "30", ",", "15", "]", "\n", "for", "i", ",", "win", "in", "enumerate", "(", "window_sizes", ",", "start", "=", "1", ")", ":", "\n", "            ", "dataset", "=", "datasets", ".", "BaselineDataModule", "(", "i", ",", "batch_size", "=", "16", ",", "percent_fail_runs", "=", "0.8", ")", "\n", "for", "fd", "in", "dataset", ".", "cmapss", ".", "values", "(", ")", ":", "\n", "                ", "self", ".", "assertEqual", "(", "win", ",", "fd", ".", "window_size", ")", "\n", "\n", "", "", "", "def", "test_train_batch_structure", "(", "self", ")", ":", "\n", "        ", "train_loader", "=", "self", ".", "dataset", ".", "train_dataloader", "(", ")", "\n", "self", ".", "assertIsInstance", "(", "train_loader", ".", "sampler", ",", "RandomSampler", ")", "\n", "self", ".", "_assert_batch_structure", "(", "train_loader", ")", "\n", "\n", "", "def", "test_val_batch_structure", "(", "self", ")", ":", "\n", "        ", "val_loader", "=", "self", ".", "dataset", ".", "val_dataloader", "(", ")", "\n", "self", ".", "assertIsInstance", "(", "val_loader", ".", "sampler", ",", "SequentialSampler", ")", "\n", "self", ".", "_assert_batch_structure", "(", "val_loader", ")", "\n", "\n", "", "def", "test_test_batch_structure", "(", "self", ")", ":", "\n", "        ", "test_loaders", "=", "self", ".", "dataset", ".", "test_dataloader", "(", ")", "\n", "for", "test_loader", "in", "test_loaders", ":", "\n", "            ", "self", ".", "assertIsInstance", "(", "test_loader", ".", "sampler", ",", "SequentialSampler", ")", "\n", "self", ".", "_assert_batch_structure", "(", "test_loader", ")", "\n", "\n", "", "", "def", "_assert_batch_structure", "(", "self", ",", "loader", ")", ":", "\n", "        ", "batch", "=", "next", "(", "iter", "(", "loader", ")", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_baseline.TestBaselineTemplate.test_all_parameters_updated": [[51, 65], ["torch.optim.SGD", "test_baseline.TestBaselineTemplate.net.training_step", "test_baseline.TestBaselineTemplate.backward", "torch.optim.SGD.step", "test_baseline.TestBaselineTemplate.net.named_parameters", "test_baseline.TestBaselineTemplate.net.parameters", "torch.randn", "torch.ones", "test_baseline.TestBaselineTemplate.subTest", "test_baseline.TestBaselineTemplate.assertIsNotNone", "test_baseline.TestBaselineTemplate.assertNotEqual", "torch.sum"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.training_step", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.GaussianSequenceLayer.backward"], ["self", ".", "assertEqual", "(", "2", ",", "len", "(", "batch", ")", ")", "\n", "features", ",", "labels", "=", "batch", "\n", "self", ".", "assertEqual", "(", "torch", ".", "Size", "(", "(", "16", ",", "14", ",", "30", ")", ")", ",", "features", ".", "shape", ")", "\n", "self", ".", "assertEqual", "(", "torch", ".", "Size", "(", "(", "16", ",", ")", ")", ",", "labels", ".", "shape", ")", "\n", "\n", "", "def", "test_selected_source_on_train", "(", "self", ")", ":", "\n", "        ", "fd_source", "=", "self", ".", "dataset", ".", "fd_source", "\n", "baseline_train_dataset", "=", "self", ".", "dataset", ".", "train_dataloader", "(", ")", ".", "dataset", "\n", "source_train_dataset", "=", "self", ".", "dataset", ".", "cmapss", "[", "fd_source", "]", ".", "train_dataloader", "(", ")", ".", "dataset", "\n", "self", ".", "_assert_datasets_equal", "(", "baseline_train_dataset", ",", "source_train_dataset", ")", "\n", "\n", "", "def", "test_selected_source_on_val", "(", "self", ")", ":", "\n", "        ", "fd_source", "=", "self", ".", "dataset", ".", "fd_source", "\n", "baseline_val_dataset", "=", "self", ".", "dataset", ".", "val_dataloader", "(", ")", ".", "dataset", "\n", "source_val_dataset", "=", "self", ".", "dataset", ".", "cmapss", "[", "fd_source", "]", ".", "val_dataloader", "(", ")", ".", "dataset", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_baseline.TestBaselineTemplate.test_metric_val_reduction": [[66, 82], ["unittest.mock.patch", "torch.no_grad", "test_baseline.TestBaselineTemplate._mock_predictions", "test_baseline.TestBaselineTemplate._feed_dummy_val", "torch.sqrt", "test_baseline.TestBaselineTemplate.net.validation_epoch_end", "test_baseline.TestBaselineTemplate._assert_logs", "torch.randn", "torch.mean"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._mock_predictions", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._feed_dummy_val", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.validation_epoch_end", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._assert_logs"], ["self", ".", "_assert_datasets_equal", "(", "baseline_val_dataset", ",", "source_val_dataset", ")", "\n", "\n", "", "def", "test_selected_all_on_test", "(", "self", ")", ":", "\n", "        ", "baseline_test_loaders", "=", "self", ".", "dataset", ".", "test_dataloader", "(", ")", "\n", "for", "fd", ",", "baseline_test_loader", "in", "enumerate", "(", "baseline_test_loaders", ",", "start", "=", "1", ")", ":", "\n", "            ", "baseline_test_dataset", "=", "baseline_test_loader", ".", "dataset", "\n", "test_dataset", "=", "self", ".", "dataset", ".", "cmapss", "[", "fd", "]", ".", "test_dataloader", "(", ")", ".", "dataset", "\n", "self", ".", "_assert_datasets_equal", "(", "baseline_test_dataset", ",", "test_dataset", ")", "\n", "\n", "", "", "def", "_assert_datasets_equal", "(", "self", ",", "baseline_dataset", ",", "inner_dataset", ")", ":", "\n", "        ", "num_samples", "=", "len", "(", "baseline_dataset", ")", "\n", "baseline_data", "=", "baseline_dataset", "[", ":", "num_samples", "]", "\n", "inner_data", "=", "inner_dataset", "[", ":", "num_samples", "]", "\n", "for", "baseline", ",", "inner", "in", "zip", "(", "baseline_data", ",", "inner_data", ")", ":", "\n", "            ", "self", ".", "assertEqual", "(", "0", ",", "torch", ".", "sum", "(", "baseline", "-", "inner", ")", ")", "\n", "\n", "", "", "def", "test_fail_runs_passed_correctly", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_baseline.TestBaselineTemplate.test_metric_val_updates": [[83, 90], ["test_baseline.TestBaselineTemplate._mock_predictions", "test_baseline.TestBaselineTemplate._feed_dummy_val", "test_baseline.TestBaselineTemplate.assertEqual", "torch.randn"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._mock_predictions", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._feed_dummy_val"], ["        ", "for", "i", "in", "range", "(", "1", ",", "5", ")", ":", "\n", "            ", "if", "i", "==", "self", ".", "dataset", ".", "fd_source", ":", "\n", "                ", "self", ".", "assertEqual", "(", "0.8", ",", "self", ".", "dataset", ".", "cmapss", "[", "i", "]", ".", "percent_fail_runs", ")", "\n", "", "else", ":", "\n", "                ", "self", ".", "assertIsNone", "(", "self", ".", "dataset", ".", "cmapss", "[", "i", "]", ".", "percent_fail_runs", ")", "\n", "\n", "\n", "", "", "", "", "class", "TestPretrainingBaselineDataModuleFullData", "(", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_baseline.TestBaselineTemplate.test_metric_test_reduction": [[91, 110], ["unittest.mock.patch", "torch.no_grad", "test_baseline.TestBaselineTemplate._mock_predictions", "test_baseline.TestBaselineTemplate._feed_dummy_test", "range", "test_baseline.TestBaselineTemplate.net.test_epoch_end", "test_baseline.TestBaselineTemplate._assert_logs", "torch.cat", "torch.sqrt", "torch.randn", "range", "torch.mean"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._mock_predictions", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_baseline.TestBaselineTemplate._feed_dummy_test", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.test_epoch_end", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._assert_logs"], ["unittest", ".", "TestCase", ",", "PretrainingDataModuleTemplate", "\n", ")", ":", "\n", "    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "num_samples", "=", "10000", ",", "batch_size", "=", "16", ",", "min_distance", "=", "2", "\n", ")", "\n", "self", ".", "dataset", ".", "prepare_data", "(", ")", "\n", "self", ".", "dataset", ".", "setup", "(", ")", "\n", "\n", "self", ".", "expected_num_val_loaders", "=", "2", "\n", "self", ".", "window_size", "=", "self", ".", "dataset", ".", "broken_source_loader", ".", "window_size", "\n", "\n", "", "def", "test_val_truncation", "(", "self", ")", ":", "\n", "        ", "with", "self", ".", "subTest", "(", "truncation", "=", "False", ")", ":", "\n", "            ", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "num_samples", "=", "10000", ",", "batch_size", "=", "16", "\n", ")", "\n", "self", ".", "assertFalse", "(", "dataset", ".", "broken_source_loader", ".", "truncate_val", ")", "\n", "self", ".", "assertFalse", "(", "dataset", ".", "source", ".", "truncate_val", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_baseline.TestBaselineTemplate.test_metric_test_updates": [[111, 122], ["test_baseline.TestBaselineTemplate._mock_predictions", "test_baseline.TestBaselineTemplate._feed_dummy_test", "range", "torch.cat", "test_baseline.TestBaselineTemplate.assertEqual", "torch.randn", "range"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._mock_predictions", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_baseline.TestBaselineTemplate._feed_dummy_test"], ["", "with", "self", ".", "subTest", "(", "truncation", "=", "True", ")", ":", "\n", "            ", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "num_samples", "=", "10000", ",", "batch_size", "=", "16", ",", "truncate_val", "=", "True", "\n", ")", "\n", "self", ".", "assertTrue", "(", "dataset", ".", "broken_source_loader", ".", "truncate_val", ")", "\n", "self", ".", "assertTrue", "(", "dataset", ".", "source", ".", "truncate_val", ")", "\n", "\n", "", "", "def", "test_override_window_size", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "num_samples", "=", "10000", ",", "batch_size", "=", "16", ",", "window_size", "=", "40", "\n", ")", "\n", "dataset", ".", "prepare_data", "(", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_baseline.TestBaselineTemplate._mock_predictions": [[124, 126], ["unittest.mock.MagicMock"], "methods", ["None"], ["train_loader", "=", "dataset", ".", "train_dataloader", "(", ")", "\n", "\n", "anchors", ",", "queries", ",", "_", ",", "_", "=", "next", "(", "iter", "(", "train_loader", ")", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_baseline.TestBaselineTemplate._feed_dummy_val": [[127, 132], ["range", "test_baseline.TestBaselineTemplate.net.validation_step", "torch.zeros", "torch.zeros"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.validation_step"], ["self", ".", "assertEqual", "(", "40", ",", "anchors", ".", "shape", "[", "2", "]", ")", "\n", "self", ".", "assertEqual", "(", "40", ",", "queries", ".", "shape", "[", "2", "]", ")", "\n", "\n", "", "def", "test_truncation_passed_correctly", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "1000", ",", "16", ",", "percent_broken", "=", "0.2", ",", "percent_fail_runs", "=", "0.5", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_baseline.TestBaselineTemplate._feed_dummy_test": [[134, 141], ["range", "range", "test_baseline.TestBaselineTemplate.net.test_step", "torch.zeros", "torch.zeros"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.test_step"], ["self", ".", "assertEqual", "(", "0.2", ",", "dataset", ".", "broken_source_loader", ".", "percent_broken", ")", "\n", "self", ".", "assertIsNone", "(", "dataset", ".", "broken_source_loader", ".", "percent_fail_runs", ")", "\n", "self", ".", "assertEqual", "(", "0.5", ",", "dataset", ".", "fails_source_loader", ".", "percent_fail_runs", ")", "\n", "self", ".", "assertIsNone", "(", "dataset", ".", "fails_source_loader", ".", "percent_broken", ")", "\n", "\n", "", "def", "test_distance_mode_passed_correctly", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "1000", ",", "16", ",", "distance_mode", "=", "\"labeled\"", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_baseline.TestBaselineTemplate._assert_logs": [[143, 153], ["mock_log.assert_called", "test_baseline.TestBaselineTemplate.assertIn", "expected_value.item.item.item", "[].item", "test_baseline.TestBaselineTemplate.subTest", "test_baseline.TestBaselineTemplate.assertAlmostEqual"], "methods", ["None"], ["data_loader", "=", "dataset", ".", "train_dataloader", "(", ")", "\n", "self", ".", "assertEqual", "(", "dataset", ".", "distance_mode", ",", "data_loader", ".", "dataset", ".", "mode", ")", "\n", "\n", "", "def", "test_both_source_datasets_used", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "1000", ",", "16", ",", "percent_broken", "=", "0.2", ",", "percent_fail_runs", "=", "0.5", "\n", ")", "\n", "for", "split", "in", "[", "\"dev\"", ",", "\"val\"", "]", ":", "\n", "            ", "with", "self", ".", "subTest", "(", "split", ")", ":", "\n", "                ", "num_broken_runs", "=", "len", "(", "dataset", ".", "broken_source_loader", ".", "load_split", "(", "split", ")", "[", "0", "]", ")", "\n", "num_fail_runs", "=", "len", "(", "dataset", ".", "fails_source_loader", ".", "load_split", "(", "split", ")", "[", "0", "]", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_baseline.TestCnnBaseline.setUp": [[156, 169], ["torch.Size", "lightning.baseline.Baseline"], "methods", ["None"], ["num_broken_runs", "+", "num_fail_runs", ",", "len", "(", "paired_dataset", ".", "_features", ")", "\n", ")", "\n", "\n", "", "", "", "def", "test_get_unfailed_runs", "(", "self", ")", ":", "\n", "        ", "fail_runs", "=", "[", "1", ",", "5", ",", "40", ",", "79", "]", "\n", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "1000", ",", "16", ",", "percent_broken", "=", "0.2", ",", "percent_fail_runs", "=", "fail_runs", "\n", ")", "\n", "self", ".", "assertListEqual", "(", "fail_runs", ",", "dataset", ".", "fails_source_loader", ".", "percent_fail_runs", ")", "\n", "for", "r", "in", "fail_runs", ":", "\n", "            ", "self", ".", "assertNotIn", "(", "r", ",", "dataset", ".", "broken_source_loader", ".", "percent_fail_runs", ")", "\n", "\n", "", "", "def", "test_percent_fails_zero", "(", "self", ")", ":", "\n", "        ", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_baseline.TestCnnBaseline.test_load_from_rbm": [[171, 198], ["torch.randn_like", "building.build_rbm", "test_baseline.TestCnnBaseline.assertNotEqual", "test_baseline.TestCnnBaseline.assertNotEqual", "test_baseline.TestCnnBaseline.assertTrue", "test_baseline.TestCnnBaseline.assertTrue", "test_baseline.TestCnnBaseline.net.load_from_rbm", "test_baseline.TestCnnBaseline.assertEqual", "test_baseline.TestCnnBaseline.assertEqual", "test_baseline.TestCnnBaseline.assertTrue", "test_baseline.TestCnnBaseline.assertTrue", "test_baseline.TestCnnBaseline.assertEqual", "test_baseline.TestCnnBaseline.assertEqual", "torch.dist", "torch.dist", "torch.dist", "torch.dist"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.building.build.build_rbm", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.mixins.LoadEncoderMixin.load_from_rbm"], [")", "\n", "num_broken_runs", "=", "len", "(", "dataset", ".", "broken_source_loader", ".", "load_split", "(", "\"dev\"", ")", "[", "0", "]", ")", "\n", "num_fail_runs", "=", "len", "(", "dataset", ".", "fails_source_loader", ".", "load_split", "(", "\"dev\"", ")", "[", "0", "]", ")", "\n", "self", ".", "assertEqual", "(", "0", ",", "num_fail_runs", ")", "\n", "self", ".", "assertNotEqual", "(", "0", ",", "num_broken_runs", ")", "\n", "\n", "\n", "", "", "class", "TestPretrainingBaselineDataModuleLowData", "(", "\n", "unittest", ".", "TestCase", ",", "PretrainingDataModuleTemplate", "\n", ")", ":", "\n", "    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "dataset", "=", "datasets", ".", "PretrainingBaselineDataModule", "(", "\n", "3", ",", "num_samples", "=", "10000", ",", "batch_size", "=", "16", ",", "percent_broken", "=", "0.2", "\n", ")", "\n", "self", ".", "dataset", ".", "prepare_data", "(", ")", "\n", "self", ".", "dataset", ".", "setup", "(", ")", "\n", "\n", "self", ".", "expected_num_val_loaders", "=", "2", "\n", "self", ".", "window_size", "=", "self", ".", "dataset", ".", "broken_source_loader", ".", "window_size", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_loggers.TestMLTBLogger.setUp": [[15, 20], ["tempfile.mkdtemp", "lightning.MLTBLogger"], "methods", ["None"], ["    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "logdir", "=", "tempfile", ".", "mkdtemp", "(", ")", "\n", "self", ".", "test_tag", "=", "\"test_tag\"", "\n", "self", ".", "logger", "=", "loggers", ".", "MLTBLogger", "(", "\n", "self", ".", "logdir", ",", "\"Test\"", ",", "self", ".", "test_tag", ",", "{", "\"pb\"", ":", "0.1", ",", "\"foo\"", ":", "\"bar\"", "}", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_loggers.TestMLTBLogger.test_save_path": [[22, 26], ["test_loggers.TestMLTBLogger._run_dummy_training", "test_loggers.TestMLTBLogger.assertListEqual", "os.listdir"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_loggers.TestMLTBLogger._run_dummy_training"], ["", "def", "test_save_path", "(", "self", ")", ":", "\n", "        ", "self", ".", "_run_dummy_training", "(", ")", "\n", "artifact_path", "=", "self", ".", "logger", ".", "checkpoint_path", "\n", "self", ".", "assertListEqual", "(", "[", "\"epoch=0.ckpt\"", "]", ",", "os", ".", "listdir", "(", "artifact_path", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_loggers.TestMLTBLogger.test_tensorboard_struct": [[27, 33], ["test_loggers.TestMLTBLogger._run_dummy_training", "os.path.join", "test_loggers.TestMLTBLogger.assertTrue", "os.path.exists"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_loggers.TestMLTBLogger._run_dummy_training"], ["", "def", "test_tensorboard_struct", "(", "self", ")", ":", "\n", "        ", "self", ".", "_run_dummy_training", "(", ")", "\n", "expected_tf_logdir", "=", "os", ".", "path", ".", "join", "(", "\n", "self", ".", "logdir", ",", "\"tensorboard\"", ",", "\"Test\"", ",", "\"0.1pb\"", ",", "\"foo-bar\"", ",", "\"version_0\"", "\n", ")", "\n", "self", ".", "assertTrue", "(", "os", ".", "path", ".", "exists", "(", "expected_tf_logdir", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_loggers.TestMLTBLogger.test_version_tag": [[34, 39], ["test_loggers.TestMLTBLogger._run_dummy_training", "test_loggers.TestMLTBLogger.logger.mlflow_experiment.get_run", "test_loggers.TestMLTBLogger.assertDictEqual"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_loggers.TestMLTBLogger._run_dummy_training"], ["", "def", "test_version_tag", "(", "self", ")", ":", "\n", "        ", "self", ".", "_run_dummy_training", "(", ")", "\n", "run_id", "=", "self", ".", "logger", ".", "_mlflow_logger", ".", "run_id", "\n", "run", "=", "self", ".", "logger", ".", "mlflow_experiment", ".", "get_run", "(", "run_id", ")", "\n", "self", ".", "assertDictEqual", "(", "{", "\"version\"", ":", "\"test_tag\"", "}", ",", "run", ".", "data", ".", "tags", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_loggers.TestMLTBLogger._run_dummy_training": [[40, 61], ["pytorch_lightning.Trainer", "datasets.BaselineDataModule", "lightning.baseline.Baseline", "pytorch_lightning.Trainer.fit"], "methods", ["None"], ["", "def", "_run_dummy_training", "(", "self", ")", ":", "\n", "        ", "trainer", "=", "pl", ".", "Trainer", "(", "\n", "gpus", "=", "0", ",", "\n", "max_epochs", "=", "1", ",", "\n", "logger", "=", "self", ".", "logger", ",", "\n", "deterministic", "=", "True", ",", "\n", "log_every_n_steps", "=", "10", ",", "\n", ")", "\n", "data", "=", "datasets", ".", "BaselineDataModule", "(", "fd_source", "=", "1", ",", "batch_size", "=", "512", ",", "window_size", "=", "30", ")", "\n", "model", "=", "baseline", ".", "Baseline", "(", "\n", "in_channels", "=", "14", ",", "\n", "seq_len", "=", "30", ",", "\n", "num_layers", "=", "1", ",", "\n", "kernel_size", "=", "1", ",", "\n", "base_filters", "=", "1", ",", "\n", "latent_dim", "=", "16", ",", "\n", "optim_type", "=", "\"adam\"", ",", "\n", "lr", "=", "0.01", ",", "\n", "record_embeddings", "=", "False", ",", "\n", ")", "\n", "trainer", ".", "fit", "(", "model", ",", "datamodule", "=", "data", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_loggers.TestMLTBLogger.tearDown": [[62, 64], ["shutil.rmtree"], "methods", ["None"], ["", "def", "tearDown", "(", "self", ")", ":", "\n", "        ", "shutil", ".", "rmtree", "(", "self", ".", "logdir", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_loggers.TestMinEpochModelCheckpoint.test_min_epoch": [[67, 86], ["unittest.mock.patch", "unittest.mock.MagicMock", "unittest.mock.MagicMock", "lightning.MinEpochModelCheckpoint", "test_loggers.TestMinEpochModelCheckpoint.subTest", "lightning.MinEpochModelCheckpoint.save_checkpoint", "mock_super_save_checkpoint.assert_not_called", "test_loggers.TestMinEpochModelCheckpoint.subTest", "lightning.MinEpochModelCheckpoint.save_checkpoint", "mock_super_save_checkpoint.assert_called_with"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MinEpochModelCheckpoint.save_checkpoint", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.loggers.MinEpochModelCheckpoint.save_checkpoint"], ["    ", "@", "mock", ".", "patch", "(", "\"pytorch_lightning.callbacks.ModelCheckpoint.save_checkpoint\"", ")", "\n", "def", "test_min_epoch", "(", "self", ",", "mock_super_save_checkpoint", ")", ":", "\n", "        ", "mock_trainer", "=", "mock", ".", "MagicMock", "(", "\"trainer\"", ")", "\n", "mock_pl_module", "=", "mock", ".", "MagicMock", "(", "\"pl_module\"", ")", "\n", "\n", "min_epoch", "=", "1", "\n", "checkpoint_callback", "=", "loggers", ".", "MinEpochModelCheckpoint", "(", "\n", "\"val/test_metric\"", ",", "min_epochs_before_saving", "=", "min_epoch", "\n", ")", "\n", "\n", "with", "self", ".", "subTest", "(", "case", "=", "\"before_min_epoch\"", ")", ":", "\n", "            ", "mock_trainer", ".", "current_epoch", "=", "0", "\n", "checkpoint_callback", ".", "save_checkpoint", "(", "mock_trainer", ",", "mock_pl_module", ")", "\n", "mock_super_save_checkpoint", ".", "assert_not_called", "(", ")", "\n", "\n", "", "with", "self", ".", "subTest", "(", "case", "=", "\"after_min_epoch\"", ")", ":", "\n", "            ", "mock_trainer", ".", "current_epoch", "=", "2", "\n", "checkpoint_callback", ".", "save_checkpoint", "(", "mock_trainer", ",", "mock_pl_module", ")", "\n", "mock_super_save_checkpoint", ".", "assert_called_with", "(", "mock_trainer", ",", "mock_pl_module", ")", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining.setUp": [[10, 24], ["lightning.autoencoder.AutoencoderPretraining"], "methods", ["None"], ["    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "net", "=", "autoencoder", ".", "AutoencoderPretraining", "(", "\n", "in_channels", "=", "14", ",", "\n", "seq_len", "=", "30", ",", "\n", "num_layers", "=", "4", ",", "\n", "kernel_size", "=", "3", ",", "\n", "base_filters", "=", "16", ",", "\n", "latent_dim", "=", "64", ",", "\n", "dropout", "=", "0.1", ",", "\n", "domain_tradeoff", "=", "0.0", ",", "\n", "domain_disc_dim", "=", "32", ",", "\n", "num_disc_layers", "=", "2", ",", "\n", "weight_decay", "=", "0", ",", "\n", "lr", "=", "0.01", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining.test_mode_hparam": [[26, 30], ["test_autoencoder.TestUnsupervisedPretraining.assertLess", "test_autoencoder.TestUnsupervisedPretraining.assertIn", "test_autoencoder.TestUnsupervisedPretraining.assertEqual", "len"], "methods", ["None"], ["", "def", "test_mode_hparam", "(", "self", ")", ":", "\n", "        ", "self", ".", "assertLess", "(", "1", ",", "len", "(", "self", ".", "net", ".", "hparams", ")", ")", "\n", "self", ".", "assertIn", "(", "\"mode\"", ",", "self", ".", "net", ".", "hparams", ")", "\n", "self", ".", "assertEqual", "(", "\"autoencoder\"", ",", "self", ".", "net", ".", "hparams", "[", "\"mode\"", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining.test_encoder": [[31, 36], ["torch.no_grad", "torch.randn", "test_autoencoder.TestUnsupervisedPretraining.net.encoder", "test_autoencoder.TestUnsupervisedPretraining.assertEqual", "torch.Size"], "methods", ["None"], ["", "@", "torch", ".", "no_grad", "(", ")", "\n", "def", "test_encoder", "(", "self", ")", ":", "\n", "        ", "inputs", "=", "torch", ".", "randn", "(", "16", ",", "14", ",", "30", ")", "\n", "outputs", "=", "self", ".", "net", ".", "encoder", "(", "inputs", ")", "\n", "self", ".", "assertEqual", "(", "torch", ".", "Size", "(", "(", "16", ",", "64", ")", ")", ",", "outputs", ".", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining.test_decoder": [[37, 42], ["torch.no_grad", "torch.randn", "test_autoencoder.TestUnsupervisedPretraining.net.decoder", "test_autoencoder.TestUnsupervisedPretraining.assertEqual", "torch.Size"], "methods", ["None"], ["", "@", "torch", ".", "no_grad", "(", ")", "\n", "def", "test_decoder", "(", "self", ")", ":", "\n", "        ", "inputs", "=", "torch", ".", "randn", "(", "16", ",", "64", ")", "\n", "outputs", "=", "self", ".", "net", ".", "decoder", "(", "inputs", ")", "\n", "self", ".", "assertEqual", "(", "torch", ".", "Size", "(", "(", "16", ",", "14", ",", "30", ")", ")", ",", "outputs", ".", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining.test_forward": [[43, 48], ["torch.no_grad", "torch.randn", "test_autoencoder.TestUnsupervisedPretraining.net", "test_autoencoder.TestUnsupervisedPretraining.assertEqual", "torch.Size"], "methods", ["None"], ["", "@", "torch", ".", "no_grad", "(", ")", "\n", "def", "test_forward", "(", "self", ")", ":", "\n", "        ", "inputs", "=", "torch", ".", "randn", "(", "16", ",", "14", ",", "30", ")", "\n", "outputs", "=", "self", ".", "net", "(", "inputs", ")", "\n", "self", ".", "assertEqual", "(", "torch", ".", "Size", "(", "(", "16", ",", "14", ",", "30", ")", ")", ",", "outputs", ".", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining.test_batch_independence": [[49, 80], ["torch.autograd.set_detect_anomaly", "torch.randn", "test_autoencoder.TestUnsupervisedPretraining.net.eval", "test_autoencoder.TestUnsupervisedPretraining.net", "test_autoencoder.TestUnsupervisedPretraining.net.train", "torch.randint", "torch.ones_like", "output.mean", "output.mean.backward", "enumerate", "torch.autograd.set_detect_anomaly", "test_autoencoder.TestUnsupervisedPretraining.assertTrue", "test_autoencoder.TestUnsupervisedPretraining.assertTrue", "torch.all().item", "torch.all", "torch.all"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.GaussianSequenceLayer.backward"], ["", "def", "test_batch_independence", "(", "self", ")", ":", "\n", "        ", "torch", ".", "autograd", ".", "set_detect_anomaly", "(", "True", ")", "\n", "\n", "inputs", "=", "torch", ".", "randn", "(", "16", ",", "14", ",", "30", ")", "\n", "inputs", ".", "requires_grad", "=", "True", "\n", "\n", "# Compute forward pass in eval mode to deactivate batch norm", "\n", "self", ".", "net", ".", "eval", "(", ")", "\n", "outputs", "=", "self", ".", "net", "(", "inputs", ")", "\n", "self", ".", "net", ".", "train", "(", ")", "\n", "\n", "# Mask loss for certain samples in batch", "\n", "batch_size", "=", "outputs", ".", "shape", "[", "0", "]", "\n", "mask_idx", "=", "torch", ".", "randint", "(", "0", ",", "batch_size", ",", "(", ")", ")", "\n", "mask", "=", "torch", ".", "ones_like", "(", "outputs", ")", "\n", "mask", "[", "mask_idx", "]", "=", "0", "\n", "output", "=", "outputs", "*", "mask", "\n", "\n", "# Compute backward pass", "\n", "loss", "=", "output", ".", "mean", "(", ")", "\n", "loss", ".", "backward", "(", "retain_graph", "=", "True", ")", "\n", "\n", "# Check if gradient exists and is zero for masked samples", "\n", "for", "i", ",", "grad", "in", "enumerate", "(", "inputs", ".", "grad", "[", ":", "batch_size", "]", ")", ":", "\n", "            ", "if", "i", "==", "mask_idx", ":", "\n", "                ", "self", ".", "assertTrue", "(", "torch", ".", "all", "(", "grad", "==", "0", ")", ".", "item", "(", ")", ")", "\n", "", "else", ":", "\n", "                ", "self", ".", "assertTrue", "(", "not", "torch", ".", "all", "(", "grad", "==", "0", ")", ")", "\n", "", "", "inputs", ".", "grad", "=", "None", "\n", "\n", "torch", ".", "autograd", ".", "set_detect_anomaly", "(", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining.test_all_parameters_updated": [[81, 99], ["torch.optim.SGD", "test_autoencoder.TestUnsupervisedPretraining.net.training_step", "test_autoencoder.TestUnsupervisedPretraining.backward", "torch.optim.SGD.step", "test_autoencoder.TestUnsupervisedPretraining.net.named_parameters", "test_autoencoder.TestUnsupervisedPretraining.net.parameters", "torch.randn", "torch.randn", "torch.randn", "torch.randn", "test_autoencoder.TestUnsupervisedPretraining.subTest", "test_autoencoder.TestUnsupervisedPretraining.assertIsNotNone", "test_autoencoder.TestUnsupervisedPretraining.assertNotEqual", "torch.sum"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.training_step", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.models.layers.GaussianSequenceLayer.backward"], ["", "def", "test_all_parameters_updated", "(", "self", ")", ":", "\n", "        ", "optim", "=", "torch", ".", "optim", ".", "SGD", "(", "self", ".", "net", ".", "parameters", "(", ")", ",", "lr", "=", "0.1", ")", "\n", "\n", "inputs", "=", "(", "\n", "torch", ".", "randn", "(", "16", ",", "14", ",", "30", ")", ",", "\n", "torch", ".", "randn", "(", "16", ",", "14", ",", "30", ")", ",", "\n", "torch", ".", "randn", "(", "16", ")", ",", "\n", "torch", ".", "randn", "(", "16", ")", ",", "\n", ")", "\n", "loss", "=", "self", ".", "net", ".", "training_step", "(", "inputs", ",", "batch_idx", "=", "0", ")", "\n", "loss", ".", "backward", "(", ")", "\n", "optim", ".", "step", "(", ")", "\n", "\n", "for", "param_name", ",", "param", "in", "self", ".", "net", ".", "named_parameters", "(", ")", ":", "\n", "            ", "if", "param", ".", "requires_grad", ":", "\n", "                ", "with", "self", ".", "subTest", "(", "name", "=", "param_name", ")", ":", "\n", "                    ", "self", ".", "assertIsNotNone", "(", "param", ".", "grad", ")", "\n", "self", ".", "assertNotEqual", "(", "0.0", ",", "torch", ".", "sum", "(", "param", ".", "grad", "**", "2", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining.test_metric_val_reduction": [[100, 122], ["unittest.mock.patch", "torch.no_grad", "torch.randn", "torch.randn", "torch.randn", "test_autoencoder.TestUnsupervisedPretraining._mock_predictions", "test_autoencoder.TestUnsupervisedPretraining._feed_dummy_val", "torch.mean", "torch.tensor", "test_autoencoder.TestUnsupervisedPretraining.net.validation_epoch_end", "test_autoencoder.TestUnsupervisedPretraining._assert_logs"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._mock_predictions", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._feed_dummy_val", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.validation_epoch_end", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._assert_logs"], ["", "", "", "", "@", "mock", ".", "patch", "(", "\"pytorch_lightning.LightningModule.log\"", ")", "\n", "@", "torch", ".", "no_grad", "(", ")", "\n", "def", "test_metric_val_reduction", "(", "self", ",", "mock_log", ")", ":", "\n", "        ", "num_batches", "=", "600", "\n", "embeddings", "=", "torch", ".", "randn", "(", "num_batches", ",", "64", ",", "64", ")", "\n", "reconstructions", "=", "torch", ".", "randn", "(", "num_batches", ",", "64", ",", "14", ",", "30", ")", "\n", "domain_predictions", "=", "torch", ".", "randn", "(", "num_batches", ",", "32", ")", "\n", "self", ".", "_mock_predictions", "(", "embeddings", ",", "reconstructions", ",", "domain_predictions", ")", "\n", "\n", "self", ".", "_feed_dummy_val", "(", "num_batches", ")", "\n", "\n", "regression_loss", "=", "torch", ".", "mean", "(", "reconstructions", "**", "2", ")", "\n", "domain_loss", "=", "torch", ".", "tensor", "(", "0.0", ")", "\n", "checkpoint_score", "=", "regression_loss", "-", "0.1", "*", "domain_loss", "\n", "expected_logs", "=", "{", "\n", "\"val/regression_loss\"", ":", "(", "regression_loss", ",", "0.0001", ")", ",", "\n", "\"val/domain_loss\"", ":", "(", "domain_loss", ",", "0.0001", ")", ",", "\n", "\"val/checkpoint_score\"", ":", "(", "checkpoint_score", ",", "0.0001", ")", ",", "\n", "}", "\n", "self", ".", "net", ".", "validation_epoch_end", "(", "[", "]", ")", "\n", "\n", "self", ".", "_assert_logs", "(", "mock_log", ",", "expected_logs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining.test_metric_val_updates": [[123, 133], ["torch.randn", "torch.randn", "torch.randn", "test_autoencoder.TestUnsupervisedPretraining._mock_predictions", "test_autoencoder.TestUnsupervisedPretraining._feed_dummy_val", "test_autoencoder.TestUnsupervisedPretraining.assertEqual", "test_autoencoder.TestUnsupervisedPretraining.assertEqual"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._mock_predictions", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._feed_dummy_val"], ["", "def", "test_metric_val_updates", "(", "self", ")", ":", "\n", "        ", "num_batches", "=", "600", "\n", "embeddings", "=", "torch", ".", "randn", "(", "num_batches", ",", "64", ",", "64", ")", "\n", "reconstructions", "=", "torch", ".", "randn", "(", "num_batches", ",", "64", ",", "14", ",", "30", ")", "\n", "domain_predictions", "=", "torch", ".", "randn", "(", "num_batches", ",", "32", ")", "\n", "self", ".", "_mock_predictions", "(", "embeddings", ",", "reconstructions", ",", "domain_predictions", ")", "\n", "\n", "self", ".", "_feed_dummy_val", "(", "num_batches", ")", "\n", "self", ".", "assertEqual", "(", "num_batches", ",", "self", ".", "net", ".", "regression_metric", ".", "sample_counter", ")", "\n", "self", ".", "assertEqual", "(", "num_batches", ",", "self", ".", "net", ".", "domain_metric", ".", "sample_counter", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._mock_predictions": [[134, 137], ["unittest.mock.MagicMock", "unittest.mock.MagicMock"], "methods", ["None"], ["", "def", "_mock_predictions", "(", "self", ",", "embeddings", ",", "reconstructions", ",", "domain_predictions", ")", ":", "\n", "        ", "self", ".", "net", ".", "encoder", ".", "forward", "=", "mock", ".", "MagicMock", "(", "side_effect", "=", "embeddings", ")", "\n", "self", ".", "net", ".", "decoder", ".", "forward", "=", "mock", ".", "MagicMock", "(", "side_effect", "=", "reconstructions", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._feed_dummy_val": [[138, 149], ["range", "test_autoencoder.TestUnsupervisedPretraining.net.validation_step", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.baseline.Baseline.validation_step"], ["", "def", "_feed_dummy_val", "(", "self", ",", "num_batches", ")", ":", "\n", "        ", "for", "i", "in", "range", "(", "num_batches", ")", ":", "\n", "            ", "self", ".", "net", ".", "validation_step", "(", "\n", "(", "\n", "torch", ".", "zeros", "(", "32", ",", "14", ",", "30", ")", ",", "\n", "torch", ".", "zeros", "(", "32", ",", "14", ",", "30", ")", ",", "\n", "torch", ".", "zeros", "(", "32", ")", ",", "\n", "torch", ".", "zeros", "(", "32", ")", ",", "\n", ")", ",", "\n", "batch_idx", "=", "i", ",", "\n", "dataloader_idx", "=", "0", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_autoencoder.TestUnsupervisedPretraining._assert_logs": [[151, 161], ["mock_log.assert_called", "test_autoencoder.TestUnsupervisedPretraining.assertIn", "expected_value.item.item.item", "[].item", "test_autoencoder.TestUnsupervisedPretraining.subTest", "test_autoencoder.TestUnsupervisedPretraining.assertAlmostEqual"], "methods", ["None"], ["", "", "def", "_assert_logs", "(", "self", ",", "mock_log", ",", "expected_logs", ")", ":", "\n", "        ", "mock_log", ".", "assert_called", "(", ")", "\n", "for", "call", "in", "mock_log", ".", "mock_calls", ":", "\n", "            ", "metric", "=", "call", "[", "1", "]", "[", "0", "]", "\n", "self", ".", "assertIn", "(", "metric", ",", "expected_logs", ",", "\"Unexpected logged metric found.\"", ")", "\n", "expected_value", ",", "delta", "=", "expected_logs", "[", "metric", "]", "\n", "expected_value", "=", "expected_value", ".", "item", "(", ")", "\n", "actual_value", "=", "call", "[", "1", "]", "[", "1", "]", ".", "item", "(", ")", "\n", "with", "self", ".", "subTest", "(", "metric", ")", ":", "\n", "                ", "self", ".", "assertAlmostEqual", "(", "expected_value", ",", "actual_value", ",", "delta", "=", "delta", ")", "\n", "", "", "", "", ""]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestEmbeddingViz.setUp": [[10, 12], ["lightning.metrics.EmbeddingViz"], "methods", ["None"], ["    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "metric", "=", "metrics", ".", "EmbeddingViz", "(", "32", ",", "128", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestEmbeddingViz.test_updating": [[13, 25], ["torch.randn", "torch.ones", "torch.arange", "test_metrics.TestEmbeddingViz.metric.update", "test_metrics.TestEmbeddingViz.metric.update", "test_metrics.TestEmbeddingViz.assertEqual", "test_metrics.TestEmbeddingViz.assertEqual", "test_metrics.TestEmbeddingViz.assertEqual", "test_metrics.TestEmbeddingViz.assertEqual", "torch.sum", "torch.sum", "torch.sum", "torch.sum"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update"], ["", "def", "test_updating", "(", "self", ")", ":", "\n", "        ", "embeddings", "=", "torch", ".", "randn", "(", "16", ",", "128", ")", "\n", "labels", "=", "torch", ".", "ones", "(", "16", ")", "\n", "ruls", "=", "torch", ".", "arange", "(", "0", ",", "16", ")", "\n", "\n", "self", ".", "metric", ".", "update", "(", "embeddings", ",", "labels", ",", "ruls", ")", "\n", "self", ".", "metric", ".", "update", "(", "embeddings", ",", "labels", ",", "ruls", ")", "\n", "\n", "self", ".", "assertEqual", "(", "0", ",", "torch", ".", "sum", "(", "self", ".", "metric", ".", "embeddings", "[", ":", "16", "]", "-", "embeddings", ")", ")", "\n", "self", ".", "assertEqual", "(", "0", ",", "torch", ".", "sum", "(", "self", ".", "metric", ".", "labels", "[", ":", "16", "]", "-", "labels", ")", ")", "\n", "self", ".", "assertEqual", "(", "0", ",", "torch", ".", "sum", "(", "self", ".", "metric", ".", "embeddings", "[", "16", ":", "32", "]", "-", "embeddings", ")", ")", "\n", "self", ".", "assertEqual", "(", "0", ",", "torch", ".", "sum", "(", "self", ".", "metric", ".", "labels", "[", "16", ":", "32", "]", "-", "labels", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestEmbeddingViz.test_compute": [[26, 36], ["torch.randn", "torch.cat", "torch.arange", "test_metrics.TestEmbeddingViz.metric.update", "test_metrics.TestEmbeddingViz.metric.compute", "test_metrics.TestEmbeddingViz.assertIsInstance", "test_metrics.TestEmbeddingViz.assertListEqual", "list", "torch.ones", "torch.zeros", "test_metrics.TestEmbeddingViz.get_size_inches"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute"], ["", "def", "test_compute", "(", "self", ")", ":", "\n", "        ", "embeddings", "=", "torch", ".", "randn", "(", "32", ",", "128", ")", "\n", "labels", "=", "torch", ".", "cat", "(", "[", "torch", ".", "ones", "(", "16", ")", ",", "torch", ".", "zeros", "(", "16", ")", "]", ")", "\n", "ruls", "=", "torch", ".", "arange", "(", "0", ",", "32", ")", "\n", "\n", "self", ".", "metric", ".", "update", "(", "embeddings", ",", "labels", ",", "ruls", ")", "\n", "fig", "=", "self", ".", "metric", ".", "compute", "(", ")", "\n", "\n", "self", ".", "assertIsInstance", "(", "fig", ",", "plt", ".", "Figure", ")", "\n", "self", ".", "assertListEqual", "(", "[", "20.0", ",", "10.0", "]", ",", "list", "(", "fig", ".", "get_size_inches", "(", ")", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestRULScore.setUp": [[39, 41], ["lightning.metrics.RULScore"], "methods", ["None"], ["    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "metric", "=", "metrics", ".", "RULScore", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestRULScore.test_negative": [[42, 50], ["torch.ones", "test_metrics.TestRULScore.metric", "torch.sum", "test_metrics.TestRULScore.assertEqual", "torch.ones", "torch.exp"], "methods", ["None"], ["", "def", "test_negative", "(", "self", ")", ":", "\n", "        ", "inputs", "=", "torch", ".", "ones", "(", "2", ")", "\n", "targets", "=", "torch", ".", "ones", "(", "2", ")", "*", "2", "\n", "actual_score", "=", "self", ".", "metric", "(", "inputs", ",", "targets", ")", "\n", "expected_score", "=", "torch", ".", "sum", "(", "\n", "torch", ".", "exp", "(", "(", "inputs", "-", "targets", ")", "/", "self", ".", "metric", ".", "neg_factor", ")", "-", "1", "\n", ")", "\n", "self", ".", "assertEqual", "(", "expected_score", ",", "actual_score", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestRULScore.test_positive": [[51, 59], ["torch.ones", "test_metrics.TestRULScore.metric", "torch.sum", "test_metrics.TestRULScore.assertEqual", "torch.ones", "torch.exp"], "methods", ["None"], ["", "def", "test_positive", "(", "self", ")", ":", "\n", "        ", "inputs", "=", "torch", ".", "ones", "(", "2", ")", "*", "2", "\n", "targets", "=", "torch", ".", "ones", "(", "2", ")", "\n", "actual_score", "=", "self", ".", "metric", "(", "inputs", ",", "targets", ")", "\n", "expected_score", "=", "torch", ".", "sum", "(", "\n", "torch", ".", "exp", "(", "(", "inputs", "-", "targets", ")", "/", "self", ".", "metric", ".", "pos_factor", ")", "-", "1", "\n", ")", "\n", "self", ".", "assertEqual", "(", "expected_score", ",", "actual_score", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestRMSE.setUp": [[62, 64], ["lightning.metrics.RMSELoss"], "methods", ["None"], ["    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "metric", "=", "metrics", ".", "RMSELoss", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestRMSE.test_update": [[65, 70], ["test_metrics.TestRMSE._add_one_batch", "test_metrics.TestRMSE.assertEqual", "test_metrics.TestRMSE.assertEqual", "test_metrics.TestRMSE.assertEqual"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestMeanMetric._add_one_batch"], ["", "def", "test_update", "(", "self", ")", ":", "\n", "        ", "expected_sse", ",", "batch_size", "=", "self", ".", "_add_one_batch", "(", ")", "\n", "self", ".", "assertEqual", "(", "1", ",", "self", ".", "metric", ".", "sample_counter", ")", "\n", "self", ".", "assertEqual", "(", "expected_sse", ",", "self", ".", "metric", ".", "losses", "[", "0", "]", ")", "\n", "self", ".", "assertEqual", "(", "batch_size", ",", "self", ".", "metric", ".", "sizes", "[", "0", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestRMSE.test_reset": [[71, 77], ["test_metrics.TestRMSE._add_one_batch", "test_metrics.TestRMSE.metric.reset", "test_metrics.TestRMSE.assertEqual", "test_metrics.TestRMSE.assertEqual", "test_metrics.TestRMSE.assertEqual", "test_metrics.TestRMSE.metric.losses.sum", "test_metrics.TestRMSE.metric.sizes.sum"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestMeanMetric._add_one_batch"], ["", "def", "test_reset", "(", "self", ")", ":", "\n", "        ", "self", ".", "_add_one_batch", "(", ")", "\n", "self", ".", "metric", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "0", ",", "self", ".", "metric", ".", "sample_counter", ")", "\n", "self", ".", "assertEqual", "(", "0", ",", "self", ".", "metric", ".", "losses", ".", "sum", "(", ")", ")", "\n", "self", ".", "assertEqual", "(", "0", ",", "self", ".", "metric", ".", "sizes", ".", "sum", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestRMSE._add_one_batch": [[78, 87], ["torch.zeros_like", "torch.sum", "test_metrics.TestRMSE.metric.update", "torch.ones"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update"], ["", "def", "_add_one_batch", "(", "self", ")", ":", "\n", "        ", "batch_size", "=", "100", "\n", "inputs", "=", "torch", ".", "ones", "(", "batch_size", ")", "*", "2", "\n", "targets", "=", "torch", ".", "zeros_like", "(", "inputs", ")", "\n", "summed_squares", "=", "torch", ".", "sum", "(", "(", "inputs", "-", "targets", ")", "**", "2", ")", "\n", "\n", "self", ".", "metric", ".", "update", "(", "inputs", ",", "targets", ")", "\n", "\n", "return", "summed_squares", ",", "batch_size", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestRMSE.test_compute": [[88, 101], ["torch.randn_like", "torch.sqrt", "torch.split", "torch.split", "zip", "test_metrics.TestRMSE.metric.compute", "test_metrics.TestRMSE.assertAlmostEqual", "torch.randn", "torch.mean", "test_metrics.TestRMSE.metric.update", "torch.sqrt.item", "test_metrics.TestRMSE.item", "sum"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.AllDataSplitter.split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.AllDataSplitter.split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update"], ["", "def", "test_compute", "(", "self", ")", ":", "\n", "        ", "batch_sizes", "=", "[", "3000", ",", "3000", ",", "3000", ",", "1000", "]", "\n", "inputs", "=", "torch", ".", "randn", "(", "sum", "(", "batch_sizes", ")", ")", "+", "100", "\n", "targets", "=", "torch", ".", "randn_like", "(", "inputs", ")", "\n", "expected_rmse", "=", "torch", ".", "sqrt", "(", "torch", ".", "mean", "(", "(", "inputs", "-", "targets", ")", "**", "2", ")", ")", "\n", "\n", "batched_inputs", "=", "torch", ".", "split", "(", "inputs", ",", "batch_sizes", ")", "\n", "batched_targets", "=", "torch", ".", "split", "(", "targets", ",", "batch_sizes", ")", "\n", "for", "inp", ",", "tgt", "in", "zip", "(", "batched_inputs", ",", "batched_targets", ")", ":", "\n", "            ", "self", ".", "metric", ".", "update", "(", "inp", ",", "tgt", ")", "\n", "", "actual_rmse", "=", "self", ".", "metric", ".", "compute", "(", ")", "\n", "\n", "self", ".", "assertAlmostEqual", "(", "expected_rmse", ".", "item", "(", ")", ",", "actual_rmse", ".", "item", "(", ")", ",", "delta", "=", "0.001", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestRMSE.test_compute_fails_on_empty_metric": [[102, 105], ["test_metrics.TestRMSE.assertRaises", "test_metrics.TestRMSE.metric.compute"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute"], ["", "def", "test_compute_fails_on_empty_metric", "(", "self", ")", ":", "\n", "        ", "with", "self", ".", "assertRaises", "(", "RuntimeError", ")", ":", "\n", "            ", "self", ".", "metric", ".", "compute", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestMeanMetric.setUp": [[108, 111], ["lightning.metrics.SimpleMetric", "lightning.metrics.SimpleMetric"], "methods", ["None"], ["    ", "def", "setUp", "(", "self", ")", ":", "\n", "        ", "self", ".", "mean_metric", "=", "metrics", ".", "SimpleMetric", "(", ")", "\n", "self", ".", "sum_metric", "=", "metrics", ".", "SimpleMetric", "(", "reduction", "=", "\"sum\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestMeanMetric.test_update": [[112, 117], ["test_metrics.TestMeanMetric._add_one_batch", "test_metrics.TestMeanMetric.assertEqual", "test_metrics.TestMeanMetric.assertEqual", "test_metrics.TestMeanMetric.assertEqual"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestMeanMetric._add_one_batch"], ["", "def", "test_update", "(", "self", ")", ":", "\n", "        ", "expected_loss", ",", "batch_size", "=", "self", ".", "_add_one_batch", "(", ")", "\n", "self", ".", "assertEqual", "(", "1", ",", "self", ".", "mean_metric", ".", "sample_counter", ")", "\n", "self", ".", "assertEqual", "(", "expected_loss", ",", "self", ".", "mean_metric", ".", "losses", "[", "0", "]", ")", "\n", "self", ".", "assertEqual", "(", "batch_size", ",", "self", ".", "mean_metric", ".", "sizes", "[", "0", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestMeanMetric.test_reset": [[118, 124], ["test_metrics.TestMeanMetric._add_one_batch", "test_metrics.TestMeanMetric.mean_metric.reset", "test_metrics.TestMeanMetric.assertEqual", "test_metrics.TestMeanMetric.assertEqual", "test_metrics.TestMeanMetric.assertEqual", "test_metrics.TestMeanMetric.mean_metric.losses.sum", "test_metrics.TestMeanMetric.mean_metric.sizes.sum"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestMeanMetric._add_one_batch"], ["", "def", "test_reset", "(", "self", ")", ":", "\n", "        ", "self", ".", "_add_one_batch", "(", ")", "\n", "self", ".", "mean_metric", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "0", ",", "self", ".", "mean_metric", ".", "sample_counter", ")", "\n", "self", ".", "assertEqual", "(", "0", ",", "self", ".", "mean_metric", ".", "losses", ".", "sum", "(", ")", ")", "\n", "self", ".", "assertEqual", "(", "0", ",", "self", ".", "mean_metric", ".", "sizes", ".", "sum", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestMeanMetric._add_one_batch": [[125, 132], ["torch.tensor", "test_metrics.TestMeanMetric.mean_metric.update"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update"], ["", "def", "_add_one_batch", "(", "self", ")", ":", "\n", "        ", "batch_size", "=", "100", "\n", "loss", "=", "torch", ".", "tensor", "(", "500", ")", "\n", "\n", "self", ".", "mean_metric", ".", "update", "(", "loss", ",", "batch_size", ")", "\n", "\n", "return", "loss", ",", "batch_size", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestMeanMetric.test_compute_mean": [[133, 144], ["losses.mean", "torch.split", "zip", "test_metrics.TestMeanMetric.mean_metric.compute", "test_metrics.TestMeanMetric.assertAlmostEqual", "torch.randn", "test_metrics.TestMeanMetric.mean_metric.update", "losses.mean.item", "test_metrics.TestMeanMetric.item", "sum", "inp.mean"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.AllDataSplitter.split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update"], ["", "def", "test_compute_mean", "(", "self", ")", ":", "\n", "        ", "batch_sizes", "=", "[", "512", "]", "*", "50", "+", "[", "100", "]", "\n", "losses", "=", "torch", ".", "randn", "(", "sum", "(", "batch_sizes", ")", ")", "+", "2", "\n", "expected_loss", "=", "losses", ".", "mean", "(", ")", "\n", "\n", "batched_inputs", "=", "torch", ".", "split", "(", "losses", ",", "batch_sizes", ")", "\n", "for", "inp", ",", "sizes", "in", "zip", "(", "batched_inputs", ",", "batch_sizes", ")", ":", "\n", "            ", "self", ".", "mean_metric", ".", "update", "(", "inp", ".", "mean", "(", ")", ",", "sizes", ")", "\n", "", "actual_loss", "=", "self", ".", "mean_metric", ".", "compute", "(", ")", "\n", "\n", "self", ".", "assertAlmostEqual", "(", "expected_loss", ".", "item", "(", ")", ",", "actual_loss", ".", "item", "(", ")", ",", "places", "=", "5", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestMeanMetric.test_compute_sum": [[145, 156], ["losses.sum", "torch.split", "zip", "test_metrics.TestMeanMetric.sum_metric.compute", "test_metrics.TestMeanMetric.assertAlmostEqual", "torch.randn", "test_metrics.TestMeanMetric.sum_metric.update", "losses.sum.item", "test_metrics.TestMeanMetric.item", "sum", "inp.sum"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.src.run_rbm.AllDataSplitter.split", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.update"], ["", "def", "test_compute_sum", "(", "self", ")", ":", "\n", "        ", "batch_sizes", "=", "[", "512", "]", "*", "50", "+", "[", "100", "]", "\n", "losses", "=", "torch", ".", "randn", "(", "sum", "(", "batch_sizes", ")", ")", "+", "2", "\n", "expected_loss", "=", "losses", ".", "sum", "(", ")", "\n", "\n", "batched_inputs", "=", "torch", ".", "split", "(", "losses", ",", "batch_sizes", ")", "\n", "for", "inp", ",", "sizes", "in", "zip", "(", "batched_inputs", ",", "batch_sizes", ")", ":", "\n", "            ", "self", ".", "sum_metric", ".", "update", "(", "inp", ".", "sum", "(", ")", ",", "sizes", ")", "\n", "", "actual_loss", "=", "self", ".", "sum_metric", ".", "compute", "(", ")", "\n", "\n", "self", ".", "assertAlmostEqual", "(", "expected_loss", ".", "item", "(", ")", ",", "actual_loss", ".", "item", "(", ")", ",", "delta", "=", "0.1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning_tests.test_metrics.TestMeanMetric.test_compute_fails_on_empty_metric": [[157, 162], ["test_metrics.TestMeanMetric.assertRaises", "test_metrics.TestMeanMetric.mean_metric.compute", "test_metrics.TestMeanMetric.assertRaises", "test_metrics.TestMeanMetric.sum_metric.compute"], "methods", ["home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute", "home.repos.pwc.inspect_result.tilman151_self-supervised-ssl.lightning.metrics.SimpleMetric.compute"], ["", "def", "test_compute_fails_on_empty_metric", "(", "self", ")", ":", "\n", "        ", "with", "self", ".", "assertRaises", "(", "RuntimeError", ")", ":", "\n", "            ", "self", ".", "mean_metric", ".", "compute", "(", ")", "\n", "", "with", "self", ".", "assertRaises", "(", "RuntimeError", ")", ":", "\n", "            ", "self", ".", "sum_metric", ".", "compute", "(", ")", "\n", "", "", "", ""]]}