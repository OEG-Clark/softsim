{"home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.__init__": [[8, 34], ["generator().__next__", "range", "tensorflow.FIFOQueue", "queues.GeneratorRunner.queue.enqueue_many", "queues.GeneratorRunner.queue.close", "type", "ValueError", "all", "ValueError", "len", "queues.GeneratorRunner.shapes.append", "queues.GeneratorRunner.dtypes.append", "queues.GeneratorRunner.data.append", "generator", "tensorflow.placeholder", "type", "range", "len", "range", "len"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "generator", ",", "capacity", ")", ":", "\n", "\t\t", "\"\"\"\n\t\tinputs: generator feeding the data, must have thread_idx \n\t\t\tas parameter (but the parameter may be not used)\n\t\t\"\"\"", "\n", "self", ".", "generator", "=", "generator", "\n", "_input", "=", "generator", "(", "0", ",", "1", ")", ".", "__next__", "(", ")", "\n", "if", "type", "(", "_input", ")", "is", "not", "list", ":", "\n", "\t\t\t", "raise", "ValueError", "(", "\"generator doesn't return\"", "\"a list: %r\"", "%", "type", "(", "_input", ")", ")", "\n", "", "input_batch_size", "=", "_input", "[", "0", "]", ".", "shape", "[", "0", "]", "\n", "if", "not", "all", "(", "_input", "[", "i", "]", ".", "shape", "[", "0", "]", "==", "input_batch_size", "for", "i", "in", "range", "(", "len", "(", "_input", ")", ")", ")", ":", "\n", "\t\t\t", "raise", "ValueError", "(", "\"all the inputs doesn't have the same batch size,\"", "\"the batch sizes are: %s\"", "%", "[", "_input", "[", "i", "]", ".", "shape", "[", "0", "]", "for", "i", "in", "range", "(", "len", "(", "_input", ")", ")", "]", ")", "\n", "", "self", ".", "data", "=", "[", "]", "\n", "self", ".", "dtypes", "=", "[", "]", "\n", "self", ".", "shapes", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "len", "(", "_input", ")", ")", ":", "\n", "\t\t\t", "self", ".", "shapes", ".", "append", "(", "_input", "[", "i", "]", ".", "shape", "[", "1", ":", "]", ")", "\n", "self", ".", "dtypes", ".", "append", "(", "_input", "[", "i", "]", ".", "dtype", ")", "\n", "self", ".", "data", ".", "append", "(", "tf", ".", "placeholder", "(", "dtype", "=", "self", ".", "dtypes", "[", "i", "]", ",", "shape", "=", "(", "input_batch_size", ",", ")", "+", "self", ".", "shapes", "[", "i", "]", ")", ")", "\n", "", "self", ".", "queue", "=", "tf", ".", "FIFOQueue", "(", "capacity", ",", "shapes", "=", "self", ".", "shapes", ",", "dtypes", "=", "self", ".", "dtypes", ")", "\n", "self", ".", "enqueue_op", "=", "self", ".", "queue", ".", "enqueue_many", "(", "self", ".", "data", ")", "\n", "self", ".", "close_queue_op", "=", "self", ".", "queue", ".", "close", "(", "cancel_pending_enqueues", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.get_batched_inputs": [[35, 41], ["queues.GeneratorRunner.queue.dequeue_many"], "methods", ["None"], ["", "def", "get_batched_inputs", "(", "self", ",", "batch_size", ")", ":", "\n", "\t\t", "\"\"\"\n\t\tReturn tensors containing a batch of generated data\n\t\t\"\"\"", "\n", "batch", "=", "self", ".", "queue", ".", "dequeue_many", "(", "batch_size", ")", "\n", "return", "batch", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.thread_main": [[42, 51], ["queues.GeneratorRunner.generator", "sess.run", "zip"], "methods", ["None"], ["", "def", "thread_main", "(", "self", ",", "sess", ",", "thread_idx", "=", "0", ",", "n_threads", "=", "1", ")", ":", "\n", "\t\t", "try", ":", "\n", "\t\t\t", "for", "data", "in", "self", ".", "generator", "(", "thread_idx", ",", "n_threads", ")", ":", "\n", "\t\t\t\t", "sess", ".", "run", "(", "self", ".", "enqueue_op", ",", "feed_dict", "=", "{", "i", ":", "d", "for", "i", ",", "d", "in", "zip", "(", "self", ".", "data", ",", "data", ")", "}", ")", "\n", "if", "self", ".", "stop_threads", ":", "\n", "\t\t\t\t\t", "return", "\n", "", "", "", "except", "RuntimeError", ":", "\n", "\t\t\t", "pass", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.start_threads": [[52, 61], ["range", "threading.Thread", "threading.Thread.start", "queues.GeneratorRunner.threads.append"], "methods", ["None"], ["", "", "def", "start_threads", "(", "self", ",", "sess", ",", "n_threads", "=", "1", ")", ":", "\n", "\t\t", "self", ".", "stop_threads", "=", "False", "\n", "self", ".", "threads", "=", "[", "]", "\n", "for", "n", "in", "range", "(", "n_threads", ")", ":", "\n", "\t\t\t", "t", "=", "threading", ".", "Thread", "(", "target", "=", "self", ".", "thread_main", ",", "args", "=", "(", "sess", ",", "n", ",", "n_threads", ")", ")", "\n", "t", ".", "daemon", "=", "True", "\n", "t", ".", "start", "(", ")", "\n", "self", ".", "threads", ".", "append", "(", "t", ")", "\n", "", "return", "self", ".", "threads", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.stop_runner": [[62, 65], ["sess.run"], "methods", ["None"], ["", "def", "stop_runner", "(", "self", ",", "sess", ")", ":", "\n", "\t\t", "self", ".", "stop_threads", "=", "True", "\n", "sess", ".", "run", "(", "self", ".", "close_queue_op", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.queueSelection": [[66, 69], ["tensorflow.FIFOQueue.from_list", "tf.FIFOQueue.from_list.dequeue_many"], "function", ["None"], ["", "", "def", "queueSelection", "(", "runners", ",", "sel", ",", "batch_size", ")", ":", "\n", "\t", "selection_queue", "=", "tf", ".", "FIFOQueue", ".", "from_list", "(", "sel", ",", "[", "r", ".", "queue", "for", "r", "in", "runners", "]", ")", "\n", "return", "selection_queue", ".", "dequeue_many", "(", "batch_size", ")", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.SRNet.SRNet._build_model": [[11, 118], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "128", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "128", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "128", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "256", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "256", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "256", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "512", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "512", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.average_summary.__init__": [[7, 19], ["tensorflow.get_variable", "tensorflow.get_variable", "tensorflow.summary.scalar", "tensorflow.summary.scalar", "tensorflow.control_dependencies", "tensorflow.control_dependencies", "tensorflow.assign_add", "tensorflow.assign_add", "float", "tensorflow.control_dependencies", "tensorflow.control_dependencies", "tensorflow.assign", "tensorflow.assign", "tensorflow.constant_initializer", "tensorflow.constant_initializer"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "variable", ",", "name", ",", "num_iterations", ")", ":", "\n", "        ", "self", ".", "sum_variable", "=", "tf", ".", "get_variable", "(", "name", ",", "shape", "=", "[", "]", ",", "initializer", "=", "tf", ".", "constant_initializer", "(", "0", ")", ",", "dtype", "=", "variable", ".", "dtype", ".", "base_dtype", ",", "trainable", "=", "False", ",", "collections", "=", "[", "tf", ".", "GraphKeys", ".", "LOCAL_VARIABLES", "]", ")", "\n", "with", "tf", ".", "control_dependencies", "(", "[", "variable", "]", ")", ":", "\n", "            ", "self", ".", "increment_op", "=", "tf", ".", "assign_add", "(", "self", ".", "sum_variable", ",", "variable", ")", "\n", "", "self", ".", "mean_variable", "=", "self", ".", "sum_variable", "/", "float", "(", "num_iterations", ")", "\n", "self", ".", "summary", "=", "tf", ".", "summary", ".", "scalar", "(", "name", ",", "self", ".", "mean_variable", ")", "\n", "with", "tf", ".", "control_dependencies", "(", "[", "self", ".", "summary", "]", ")", ":", "\n", "            ", "self", ".", "reset_variable_op", "=", "tf", ".", "assign", "(", "self", ".", "sum_variable", ",", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.average_summary.add_summary": [[20, 23], ["sess.run", "writer.add_summary"], "methods", ["home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.average_summary.add_summary"], ["", "", "def", "add_summary", "(", "self", ",", "sess", ",", "writer", ",", "step", ")", ":", "\n", "        ", "s", ",", "_", "=", "sess", ".", "run", "(", "[", "self", ".", "summary", ",", "self", ".", "reset_variable_op", "]", ")", "\n", "writer", ".", "add_summary", "(", "s", ",", "step", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.Model.__init__": [[25, 33], ["tensorflow.get_variable", "tensorflow.get_variable", "tensorflow.constant_initializer", "tensorflow.constant_initializer"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "is_training", "=", "None", ",", "data_format", "=", "'NCHW'", ")", ":", "\n", "        ", "self", ".", "data_format", "=", "data_format", "\n", "if", "is_training", "is", "None", ":", "\n", "            ", "self", ".", "is_training", "=", "tf", ".", "get_variable", "(", "'is_training'", ",", "dtype", "=", "tf", ".", "bool", ",", "initializer", "=", "tf", ".", "constant_initializer", "(", "True", ")", ",", "trainable", "=", "False", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "is_training", "=", "is_training", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.Model._build_model": [[34, 36], ["NotImplementedError"], "methods", ["None"], ["", "", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "raise", "NotImplementedError", "(", "'Here is your model definition'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.Model._build_losses": [[37, 50], ["tensorflow.cast", "tensorflow.cast", "tensorflow.variable_scope", "tensorflow.variable_scope", "tensorflow.one_hot", "tensorflow.one_hot", "tensorflow.reduce_mean", "tensorflow.reduce_mean", "tensorflow.get_collection", "tensorflow.get_collection", "tensorflow.add_n", "tensorflow.add_n", "tensorflow.variable_scope", "tensorflow.variable_scope", "tensorflow.argmax", "tensorflow.argmax", "tensorflow.equal", "tensorflow.equal", "tensorflow.reduce_mean", "tensorflow.reduce_mean", "tensorflow.nn.softmax_cross_entropy_with_logits", "tensorflow.nn.softmax_cross_entropy_with_logits", "tensorflow.cast", "tensorflow.cast"], "methods", ["None"], ["", "def", "_build_losses", "(", "self", ",", "labels", ")", ":", "\n", "        ", "self", ".", "labels", "=", "tf", ".", "cast", "(", "labels", ",", "tf", ".", "int64", ")", "\n", "with", "tf", ".", "variable_scope", "(", "'loss'", ")", ":", "\n", "            ", "oh", "=", "tf", ".", "one_hot", "(", "self", ".", "labels", ",", "2", ")", "\n", "xen_loss", "=", "tf", ".", "reduce_mean", "(", "tf", ".", "nn", ".", "softmax_cross_entropy_with_logits", "(", "labels", "=", "oh", ",", "logits", "=", "self", ".", "outputs", ")", ")", "\n", "reg_losses", "=", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "REGULARIZATION_LOSSES", ")", "\n", "self", ".", "loss", "=", "tf", ".", "add_n", "(", "[", "xen_loss", "]", "+", "reg_losses", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'accuracy'", ")", ":", "\n", "            ", "am", "=", "tf", ".", "argmax", "(", "self", ".", "outputs", ",", "1", ")", "\n", "equal", "=", "tf", ".", "equal", "(", "am", ",", "self", ".", "labels", ")", "\n", "self", ".", "accuracy", "=", "tf", ".", "reduce_mean", "(", "tf", ".", "cast", "(", "equal", ",", "tf", ".", "float32", ")", ")", "\n", "", "return", "self", ".", "loss", ",", "self", ".", "accuracy", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.AdamaxOptimizer.__init__": [[189, 199], ["tensorflow.python.training.optimizer.Optimizer.__init__"], "methods", ["home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.tf_roc.__init__"], ["def", "__init__", "(", "self", ",", "learning_rate", "=", "0.001", ",", "beta1", "=", "0.9", ",", "beta2", "=", "0.999", ",", "use_locking", "=", "False", ",", "name", "=", "\"Adamax\"", ")", ":", "\n", "        ", "super", "(", "AdamaxOptimizer", ",", "self", ")", ".", "__init__", "(", "use_locking", ",", "name", ")", "\n", "self", ".", "_lr", "=", "learning_rate", "\n", "self", ".", "_beta1", "=", "beta1", "\n", "self", ".", "_beta2", "=", "beta2", "\n", "\n", "# Tensor versions of the constructor arguments, created in _prepare().", "\n", "self", ".", "_lr_t", "=", "None", "\n", "self", ".", "_beta1_t", "=", "None", "\n", "self", ".", "_beta2_t", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.AdamaxOptimizer._prepare": [[200, 204], ["tensorflow.python.framework.ops.convert_to_tensor", "tensorflow.python.framework.ops.convert_to_tensor", "tensorflow.python.framework.ops.convert_to_tensor", "tensorflow.python.framework.ops.convert_to_tensor", "tensorflow.python.framework.ops.convert_to_tensor", "tensorflow.python.framework.ops.convert_to_tensor"], "methods", ["None"], ["", "def", "_prepare", "(", "self", ")", ":", "\n", "        ", "self", ".", "_lr_t", "=", "ops", ".", "convert_to_tensor", "(", "self", ".", "_lr", ",", "name", "=", "\"learning_rate\"", ")", "\n", "self", ".", "_beta1_t", "=", "ops", ".", "convert_to_tensor", "(", "self", ".", "_beta1", ",", "name", "=", "\"beta1\"", ")", "\n", "self", ".", "_beta2_t", "=", "ops", ".", "convert_to_tensor", "(", "self", ".", "_beta2", ",", "name", "=", "\"beta2\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.AdamaxOptimizer._create_slots": [[205, 210], ["utils_multistep_lr.AdamaxOptimizer._zeros_slot", "utils_multistep_lr.AdamaxOptimizer._zeros_slot"], "methods", ["None"], ["", "def", "_create_slots", "(", "self", ",", "var_list", ")", ":", "\n", "# Create slots for the first and second moments.", "\n", "        ", "for", "v", "in", "var_list", ":", "\n", "            ", "self", ".", "_zeros_slot", "(", "v", ",", "\"m\"", ",", "self", ".", "_name", ")", "\n", "self", ".", "_zeros_slot", "(", "v", ",", "\"v\"", ",", "self", ".", "_name", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.AdamaxOptimizer._apply_dense": [[211, 228], ["tensorflow.python.ops.math_ops.cast", "tensorflow.python.ops.math_ops.cast", "tensorflow.python.ops.math_ops.cast", "tensorflow.python.ops.math_ops.cast", "tensorflow.python.ops.math_ops.cast", "tensorflow.python.ops.math_ops.cast", "utils_multistep_lr.AdamaxOptimizer.get_slot", "utils_multistep_lr.AdamaxOptimizer.assign", "utils_multistep_lr.AdamaxOptimizer.get_slot", "utils_multistep_lr.AdamaxOptimizer.assign", "tensorflow.python.ops.state_ops.assign_sub", "tensorflow.python.ops.state_ops.assign_sub", "tensorflow.python.ops.control_flow_ops.group", "tensorflow.python.ops.control_flow_ops.group", "tensorflow.maximum", "tensorflow.maximum", "tensorflow.abs", "tensorflow.abs"], "methods", ["None"], ["", "", "def", "_apply_dense", "(", "self", ",", "grad", ",", "var", ")", ":", "\n", "        ", "lr_t", "=", "math_ops", ".", "cast", "(", "self", ".", "_lr_t", ",", "var", ".", "dtype", ".", "base_dtype", ")", "\n", "beta1_t", "=", "math_ops", ".", "cast", "(", "self", ".", "_beta1_t", ",", "var", ".", "dtype", ".", "base_dtype", ")", "\n", "beta2_t", "=", "math_ops", ".", "cast", "(", "self", ".", "_beta2_t", ",", "var", ".", "dtype", ".", "base_dtype", ")", "\n", "if", "var", ".", "dtype", ".", "base_dtype", "==", "tf", ".", "float16", ":", "\n", "            ", "eps", "=", "1e-7", "# Can't use 1e-8 due to underflow -- not sure if it makes a big difference.", "\n", "", "else", ":", "\n", "            ", "eps", "=", "1e-8", "\n", "\n", "", "v", "=", "self", ".", "get_slot", "(", "var", ",", "\"v\"", ")", "\n", "v_t", "=", "v", ".", "assign", "(", "beta1_t", "*", "v", "+", "(", "1.", "-", "beta1_t", ")", "*", "grad", ")", "\n", "m", "=", "self", ".", "get_slot", "(", "var", ",", "\"m\"", ")", "\n", "m_t", "=", "m", ".", "assign", "(", "tf", ".", "maximum", "(", "beta2_t", "*", "m", "+", "eps", ",", "tf", ".", "abs", "(", "grad", ")", ")", ")", "\n", "g_t", "=", "v_t", "/", "m_t", "\n", "\n", "var_update", "=", "state_ops", ".", "assign_sub", "(", "var", ",", "lr_t", "*", "g_t", ")", "\n", "return", "control_flow_ops", ".", "group", "(", "*", "[", "var_update", ",", "m_t", ",", "v_t", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.AdamaxOptimizer._apply_sparse": [[229, 231], ["NotImplementedError"], "methods", ["None"], ["", "def", "_apply_sparse", "(", "self", ",", "grad", ",", "var", ")", ":", "\n", "        ", "raise", "NotImplementedError", "(", "\"Sparse gradient updates are not supported.\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.train": [[51, 143], ["tensorflow.reset_default_graph", "queues.GeneratorRunner", "queues.GeneratorRunner", "tensorflow.get_variable", "queues.queueSelection", "model_class", "model_class._build_model", "model_class._build_losses", "utils_multistep_lr.average_summary", "utils_multistep_lr.average_summary", "utils_multistep_lr.average_summary", "utils_multistep_lr.average_summary", "tensorflow.get_variable", "tensorflow.train.piecewise_constant", "tensorflow.summary.scalar", "tensorflow.python.training.optimizer.", "tensorflow.python.training.optimizer.minimize", "tensorflow.group", "tensorflow.group", "tensorflow.group", "tensorflow.train.Saver", "tensorflow.assign", "tensorflow.assign", "tensorflow.get_variable", "tensorflow.group", "tensorflow.group", "tensorflow.cast", "tensorflow.global_variables_initializer", "tensorflow.local_variables_initializer", "tensorflow.Session", "sess.run", "queues.GeneratorRunner.start_threads", "queues.GeneratorRunner.start_threads", "tensorflow.summary.FileWriter", "sess.run", "sess.run", "sess.run", "time.time", "range", "sess.run", "print", "print", "utils_multistep_lr.average_summary.add_summary", "utils_multistep_lr.average_summary.add_summary", "sess.run", "print", "xrange", "tensorflow.assign", "tensorflow.assign", "tensorflow.assign", "tensorflow.assign", "float", "float", "float", "float", "tensorflow.constant_initializer", "tf.train.Saver.restore", "sess.run", "sess.run", "time.time", "utils_multistep_lr.average_summary.add_summary", "utils_multistep_lr.average_summary.add_summary", "sess.run", "tf.summary.FileWriter.add_summary", "sess.run", "range", "utils_multistep_lr.average_summary.add_summary", "utils_multistep_lr.average_summary.add_summary", "sess.run", "tf.train.Saver.save", "sess.run", "str"], "function", ["home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.queueSelection", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_32.SRNetC64DE32._build_model", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.Model._build_losses", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.start_threads", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.start_threads", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.average_summary.add_summary", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.average_summary.add_summary", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.average_summary.add_summary", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.average_summary.add_summary", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.average_summary.add_summary", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.average_summary.add_summary", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.average_summary.add_summary"], ["", "", "def", "train", "(", "model_class", ",", "train_gen", ",", "valid_gen", ",", "train_batch_size", ",", "valid_batch_size", ",", "valid_ds_size", ",", "optimizer", ",", "boundaries", ",", "values", ",", "train_interval", ",", "valid_interval", ",", "max_iter", ",", "save_interval", ",", "log_path", ",", "num_runner_threads", "=", "1", ",", "load_path", "=", "None", ")", ":", "\n", "    ", "tf", ".", "reset_default_graph", "(", ")", "\n", "train_runner", "=", "GeneratorRunner", "(", "train_gen", ",", "train_batch_size", "*", "10", ")", "\n", "valid_runner", "=", "GeneratorRunner", "(", "valid_gen", ",", "valid_batch_size", "*", "10", ")", "\n", "is_training", "=", "tf", ".", "get_variable", "(", "'is_training'", ",", "dtype", "=", "tf", ".", "bool", ",", "initializer", "=", "True", ",", "trainable", "=", "False", ")", "\n", "if", "train_batch_size", "==", "valid_batch_size", ":", "\n", "        ", "batch_size", "=", "train_batch_size", "\n", "disable_training_op", "=", "tf", ".", "assign", "(", "is_training", ",", "False", ")", "\n", "enable_training_op", "=", "tf", ".", "assign", "(", "is_training", ",", "True", ")", "\n", "", "else", ":", "\n", "        ", "batch_size", "=", "tf", ".", "get_variable", "(", "'batch_size'", ",", "dtype", "=", "tf", ".", "int32", ",", "initializer", "=", "train_batch_size", ",", "trainable", "=", "False", ",", "collections", "=", "[", "tf", ".", "GraphKeys", ".", "LOCAL_VARIABLES", "]", ")", "\n", "disable_training_op", "=", "tf", ".", "group", "(", "tf", ".", "assign", "(", "is_training", ",", "False", ")", ",", "tf", ".", "assign", "(", "batch_size", ",", "valid_batch_size", ")", ")", "\n", "enable_training_op", "=", "tf", ".", "group", "(", "tf", ".", "assign", "(", "is_training", ",", "True", ")", ",", "tf", ".", "assign", "(", "batch_size", ",", "train_batch_size", ")", ")", "\n", "", "img_batch", ",", "label_batch", "=", "queueSelection", "(", "[", "valid_runner", ",", "train_runner", "]", ",", "tf", ".", "cast", "(", "is_training", ",", "tf", ".", "int32", ")", ",", "batch_size", ")", "\n", "model", "=", "model_class", "(", "is_training", ",", "'NCHW'", ")", "\n", "model", ".", "_build_model", "(", "img_batch", ")", "\n", "loss", ",", "accuracy", "=", "model", ".", "_build_losses", "(", "label_batch", ")", "\n", "train_loss_s", "=", "average_summary", "(", "loss", ",", "'train_loss'", ",", "train_interval", ")", "\n", "train_accuracy_s", "=", "average_summary", "(", "accuracy", ",", "'train_accuracy'", ",", "train_interval", ")", "\n", "valid_loss_s", "=", "average_summary", "(", "loss", ",", "'valid_loss'", ",", "float", "(", "valid_ds_size", ")", "/", "float", "(", "valid_batch_size", ")", ")", "\n", "valid_accuracy_s", "=", "average_summary", "(", "accuracy", ",", "'valid_accuracy'", ",", "float", "(", "valid_ds_size", ")", "/", "float", "(", "valid_batch_size", ")", ")", "\n", "global_step", "=", "tf", ".", "get_variable", "(", "'global_step'", ",", "dtype", "=", "tf", ".", "int32", ",", "shape", "=", "[", "]", ",", "initializer", "=", "tf", ".", "constant_initializer", "(", "0", ")", ",", "trainable", "=", "False", ")", "\n", "\n", "learning_rate", "=", "tf", ".", "train", ".", "piecewise_constant", "(", "global_step", ",", "boundaries", ",", "values", ")", "\n", "lr_summary", "=", "tf", ".", "summary", ".", "scalar", "(", "'learning_rate'", ",", "learning_rate", ")", "\n", "optimizer", "=", "optimizer", "(", "learning_rate", ")", "\n", "\n", "minimize_op", "=", "optimizer", ".", "minimize", "(", "loss", ",", "global_step", ")", "\n", "train_op", "=", "tf", ".", "group", "(", "minimize_op", ",", "train_loss_s", ".", "increment_op", ",", "train_accuracy_s", ".", "increment_op", ")", "\n", "increment_valid", "=", "tf", ".", "group", "(", "valid_loss_s", ".", "increment_op", ",", "valid_accuracy_s", ".", "increment_op", ")", "\n", "init_op", "=", "tf", ".", "group", "(", "tf", ".", "global_variables_initializer", "(", ")", ",", "tf", ".", "local_variables_initializer", "(", ")", ")", "\n", "saver", "=", "tf", ".", "train", ".", "Saver", "(", "max_to_keep", "=", "10000", ")", "\n", "with", "tf", ".", "Session", "(", ")", "as", "sess", ":", "\n", "        ", "sess", ".", "run", "(", "init_op", ")", "\n", "if", "load_path", "is", "not", "None", ":", "\n", "            ", "saver", ".", "restore", "(", "sess", ",", "load_path", ")", "\n", "", "train_runner", ".", "start_threads", "(", "sess", ",", "num_runner_threads", ")", "\n", "valid_runner", ".", "start_threads", "(", "sess", ",", "1", ")", "\n", "writer", "=", "tf", ".", "summary", ".", "FileWriter", "(", "log_path", "+", "'/LogFile/'", ",", "sess", ".", "graph", ")", "\n", "start", "=", "sess", ".", "run", "(", "global_step", ")", "\n", "sess", ".", "run", "(", "disable_training_op", ")", "\n", "sess", ".", "run", "(", "[", "valid_loss_s", ".", "reset_variable_op", ",", "valid_accuracy_s", ".", "reset_variable_op", ",", "train_loss_s", ".", "reset_variable_op", ",", "train_accuracy_s", ".", "reset_variable_op", "]", ")", "\n", "_time", "=", "time", ".", "time", "(", ")", "\n", "for", "j", "in", "range", "(", "0", ",", "valid_ds_size", ",", "valid_batch_size", ")", ":", "\n", "            ", "sess", ".", "run", "(", "[", "increment_valid", "]", ")", "\n", "", "_acc_val", "=", "sess", ".", "run", "(", "valid_accuracy_s", ".", "mean_variable", ")", "\n", "print", "(", "\"initial accuracy on validation set:\"", ",", "_acc_val", ")", "\n", "print", "(", "\"evaluation time on validation set:\"", ",", "time", ".", "time", "(", ")", "-", "_time", ",", "\"seconds\"", ")", "\n", "valid_accuracy_s", ".", "add_summary", "(", "sess", ",", "writer", ",", "start", ")", "\n", "valid_loss_s", ".", "add_summary", "(", "sess", ",", "writer", ",", "start", ")", "\n", "sess", ".", "run", "(", "enable_training_op", ")", "\n", "print", "(", "\"network will be evaluatd every %i iterations on validation set\"", "%", "valid_interval", ")", "\n", "for", "i", "in", "xrange", "(", "start", "+", "1", ",", "max_iter", "+", "1", ")", ":", "\n", "            ", "sess", ".", "run", "(", "train_op", ")", "\n", "if", "i", "%", "train_interval", "==", "0", ":", "\n", "                ", "train_loss_s", ".", "add_summary", "(", "sess", ",", "writer", ",", "i", ")", "\n", "train_accuracy_s", ".", "add_summary", "(", "sess", ",", "writer", ",", "i", ")", "\n", "s", "=", "sess", ".", "run", "(", "lr_summary", ")", "\n", "writer", ".", "add_summary", "(", "s", ",", "i", ")", "\n", "", "if", "i", "%", "valid_interval", "==", "0", ":", "\n", "                ", "sess", ".", "run", "(", "disable_training_op", ")", "\n", "for", "j", "in", "range", "(", "0", ",", "valid_ds_size", ",", "valid_batch_size", ")", ":", "\n", "                    ", "sess", ".", "run", "(", "[", "increment_valid", "]", ")", "\n", "", "valid_loss_s", ".", "add_summary", "(", "sess", ",", "writer", ",", "i", ")", "\n", "valid_accuracy_s", ".", "add_summary", "(", "sess", ",", "writer", ",", "i", ")", "\n", "sess", ".", "run", "(", "enable_training_op", ")", "\n", "", "if", "i", "%", "save_interval", "==", "0", ":", "\n", "                ", "saver", ".", "save", "(", "sess", ",", "log_path", "+", "'/Model_'", "+", "str", "(", "i", ")", "+", "'.ckpt'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.test_dataset": [[144, 172], ["tensorflow.reset_default_graph", "queues.GeneratorRunner", "queues.GeneratorRunner.get_batched_inputs", "model_class", "model_class._build_model", "model_class._build_losses", "utils_multistep_lr.average_summary", "utils_multistep_lr.average_summary", "tensorflow.group", "tensorflow.get_variable", "tensorflow.group", "tensorflow.train.Saver", "print", "tensorflow.global_variables_initializer", "tensorflow.local_variables_initializer", "tensorflow.Session", "sess.run", "tf.train.Saver.restore", "queues.GeneratorRunner.start_threads", "range", "sess.run", "float", "float", "float", "float", "tensorflow.constant_initializer", "sess.run"], "function", ["home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.get_batched_inputs", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_32.SRNetC64DE32._build_model", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.Model._build_losses", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.start_threads"], ["", "", "", "", "def", "test_dataset", "(", "model_class", ",", "gen", ",", "batch_size", ",", "ds_size", ",", "load_path", ")", ":", "\n", "    ", "tf", ".", "reset_default_graph", "(", ")", "\n", "runner", "=", "GeneratorRunner", "(", "gen", ",", "batch_size", "*", "10", ")", "\n", "img_batch", ",", "label_batch", "=", "runner", ".", "get_batched_inputs", "(", "batch_size", ")", "\n", "model", "=", "model_class", "(", "False", ",", "'NCHW'", ")", "\n", "model", ".", "_build_model", "(", "img_batch", ")", "\n", "loss", ",", "accuracy", "=", "model", ".", "_build_losses", "(", "label_batch", ")", "\n", "loss_summary", "=", "average_summary", "(", "loss", ",", "'loss'", ",", "float", "(", "ds_size", ")", "/", "float", "(", "batch_size", ")", ")", "\n", "accuracy_summary", "=", "average_summary", "(", "accuracy", ",", "'accuracy'", ",", "float", "(", "ds_size", ")", "/", "float", "(", "batch_size", ")", ")", "\n", "increment_op", "=", "tf", ".", "group", "(", "loss_summary", ".", "increment_op", ",", "accuracy_summary", ".", "increment_op", ")", "\n", "global_step", "=", "tf", ".", "get_variable", "(", "'global_step'", ",", "dtype", "=", "tf", ".", "int32", ",", "shape", "=", "[", "]", ",", "initializer", "=", "tf", ".", "constant_initializer", "(", "0", ")", ",", "trainable", "=", "False", ")", "\n", "init_op", "=", "tf", ".", "group", "(", "tf", ".", "global_variables_initializer", "(", ")", ",", "tf", ".", "local_variables_initializer", "(", ")", ")", "\n", "saver", "=", "tf", ".", "train", ".", "Saver", "(", "max_to_keep", "=", "10000", ")", "\n", "with", "tf", ".", "Session", "(", ")", "as", "sess", ":", "\n", "        ", "sess", ".", "run", "(", "init_op", ")", "\n", "saver", ".", "restore", "(", "sess", ",", "load_path", ")", "\n", "runner", ".", "start_threads", "(", "sess", ",", "1", ")", "\n", "for", "j", "in", "range", "(", "0", ",", "ds_size", ",", "batch_size", ")", ":", "\n", "            ", "sess", ".", "run", "(", "increment_op", ")", "\n", "", "mean_loss", ",", "mean_accuracy", "=", "sess", ".", "run", "(", "[", "loss_summary", ".", "mean_variable", ",", "accuracy_summary", ".", "mean_variable", "]", ")", "\n", "", "print", "(", "\"Accuracy:\"", ",", "mean_accuracy", ",", "\" | Loss:\"", ",", "mean_loss_", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.generator.gen_flip_and_rot": [[9, 45], ["sorted", "sorted", "len", "cover_list[].endswith", "zip", "glob.glob", "glob.glob", "len", "len", "numpy.empty", "scipy.misc.imread", "numpy.empty", "random.shuffle", "scipy.io.loadmat", "random.randint", "random.random.randint", "scipy.misc.imread", "scipy.misc.imread", "random.random", "len", "scipy.io.loadmat", "scipy.io.loadmat", "numpy.rot90", "numpy.array", "numpy.flip", "numpy.array", "numpy.rot90"], "function", ["None"], ["def", "gen_flip_and_rot", "(", "cover_dir", ",", "stego_dir", ",", "thread_idx", ",", "n_threads", ")", ":", "\n", "    ", "cover_list", "=", "sorted", "(", "glob", "(", "cover_dir", "+", "'/*'", ")", ")", "\n", "stego_list", "=", "sorted", "(", "glob", "(", "stego_dir", "+", "'/*'", ")", ")", "\n", "nb_data", "=", "len", "(", "cover_list", ")", "\n", "assert", "len", "(", "stego_list", ")", "!=", "0", ",", "\"the stego directory '%s' is empty\"", "%", "stego_dir", "\n", "assert", "nb_data", "!=", "0", ",", "\"the cover directory '%s' is empty\"", "%", "cover_dir", "\n", "assert", "len", "(", "stego_list", ")", "==", "nb_data", ",", "\"the cover directory and \"", "+", "\"the stego directory don't \"", "+", "\"have the same number of files \"", "+", "\"respectively %d and %d\"", "%", "(", "nb_data", ",", "+", "len", "(", "stego_list", ")", ")", "\n", "load_mat", "=", "cover_list", "[", "0", "]", ".", "endswith", "(", "'.mat'", ")", "\n", "if", "load_mat", ":", "\n", "        ", "img", "=", "io", ".", "loadmat", "(", "cover_list", "[", "0", "]", ")", "[", "'im'", "]", "\n", "img_shape", "=", "img", ".", "shape", "\n", "batch", "=", "np", ".", "empty", "(", "(", "2", ",", "img_shape", "[", "0", "]", ",", "img_shape", "[", "1", "]", ",", "1", ")", ",", "dtype", "=", "'float32'", ")", "\n", "", "else", ":", "\n", "        ", "img", "=", "misc", ".", "imread", "(", "cover_list", "[", "0", "]", ")", "\n", "img_shape", "=", "img", ".", "shape", "\n", "batch", "=", "np", ".", "empty", "(", "(", "2", ",", "img_shape", "[", "0", "]", ",", "img_shape", "[", "1", "]", ",", "1", ")", ",", "dtype", "=", "'uint8'", ")", "\n", "\n", "", "iterable", "=", "zip", "(", "cover_list", ",", "stego_list", ")", "\n", "while", "True", ":", "\n", "        ", "shuffle", "(", "iterable", ")", "\n", "for", "cover_path", ",", "stego_path", "in", "iterable", ":", "\n", "            ", "if", "load_mat", ":", "\n", "                ", "batch", "[", "0", ",", ":", ",", ":", ",", "0", "]", "=", "io", ".", "loadmat", "(", "cover_path", ")", "[", "'im'", "]", "\n", "batch", "[", "1", ",", ":", ",", ":", ",", "0", "]", "=", "io", ".", "loadmat", "(", "stego_path", ")", "[", "'im'", "]", "\n", "", "else", ":", "\n", "                ", "batch", "[", "0", ",", ":", ",", ":", ",", "0", "]", "=", "misc", ".", "imread", "(", "cover_path", ")", "\n", "batch", "[", "1", ",", ":", ",", ":", ",", "0", "]", "=", "misc", ".", "imread", "(", "stego_path", ")", "\n", "", "rot", "=", "random", ".", "randint", "(", "0", ",", "3", ")", "\n", "if", "rand", "(", ")", "<", "0.5", ":", "\n", "                ", "yield", "[", "np", ".", "rot90", "(", "batch", ",", "rot", ",", "axes", "=", "[", "1", ",", "2", "]", ")", ",", "np", ".", "array", "(", "[", "0", ",", "1", "]", ",", "dtype", "=", "'uint8'", ")", "]", "\n", "", "else", ":", "\n", "                ", "yield", "[", "np", ".", "flip", "(", "np", ".", "rot90", "(", "batch", ",", "rot", ",", "axes", "=", "[", "1", ",", "2", "]", ")", ",", "axis", "=", "2", ")", ",", "np", ".", "array", "(", "[", "0", ",", "1", "]", ",", "dtype", "=", "'uint8'", ")", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.generator.gen_valid": [[47, 79], ["sorted", "sorted", "len", "cover_list[].endswith", "numpy.array", "glob.glob", "glob.glob", "len", "len", "numpy.empty", "scipy.misc.imread", "numpy.empty", "zip", "scipy.io.loadmat", "len", "scipy.misc.imread", "scipy.misc.imread", "scipy.io.loadmat", "scipy.io.loadmat"], "function", ["None"], ["", "", "", "", "def", "gen_valid", "(", "cover_dir", ",", "stego_dir", ",", "thread_idx", ",", "n_threads", ")", ":", "\n", "    ", "cover_list", "=", "sorted", "(", "glob", "(", "cover_dir", "+", "'/*'", ")", ")", "\n", "stego_list", "=", "sorted", "(", "glob", "(", "stego_dir", "+", "'/*'", ")", ")", "\n", "nb_data", "=", "len", "(", "cover_list", ")", "\n", "assert", "len", "(", "stego_list", ")", "!=", "0", ",", "\"the stego directory '%s' is empty\"", "%", "stego_dir", "\n", "assert", "nb_data", "!=", "0", ",", "\"the cover directory '%s' is empty\"", "%", "cover_dir", "\n", "assert", "len", "(", "stego_list", ")", "==", "nb_data", ",", "\"the cover directory and \"", "+", "\"the stego directory don't \"", "+", "\"have the same number of files \"", "+", "\"respectively %d and %d\"", "%", "(", "nb_data", ",", "len", "(", "stego_list", ")", ")", "\n", "load_mat", "=", "cover_list", "[", "0", "]", ".", "endswith", "(", "'.mat'", ")", "\n", "if", "load_mat", ":", "\n", "        ", "img", "=", "io", ".", "loadmat", "(", "cover_list", "[", "0", "]", ")", "[", "'im'", "]", "\n", "img_shape", "=", "img", ".", "shape", "\n", "batch", "=", "np", ".", "empty", "(", "(", "2", ",", "img_shape", "[", "0", "]", ",", "img_shape", "[", "1", "]", ",", "1", ")", ",", "dtype", "=", "'float32'", ")", "\n", "", "else", ":", "\n", "        ", "img", "=", "misc", ".", "imread", "(", "cover_list", "[", "0", "]", ")", "\n", "img_shape", "=", "img", ".", "shape", "\n", "batch", "=", "np", ".", "empty", "(", "(", "2", ",", "img_shape", "[", "0", "]", ",", "img_shape", "[", "1", "]", ",", "1", ")", ",", "dtype", "=", "'uint8'", ")", "\n", "", "img_shape", "=", "img", ".", "shape", "\n", "\n", "labels", "=", "np", ".", "array", "(", "[", "0", ",", "1", "]", ",", "dtype", "=", "'uint8'", ")", "\n", "while", "True", ":", "\n", "        ", "for", "cover_path", ",", "stego_path", "in", "zip", "(", "cover_list", ",", "stego_list", ")", ":", "\n", "            ", "if", "load_mat", ":", "\n", "                ", "batch", "[", "0", ",", ":", ",", ":", ",", "0", "]", "=", "io", ".", "loadmat", "(", "cover_path", ")", "[", "'im'", "]", "\n", "batch", "[", "1", ",", ":", ",", ":", ",", "0", "]", "=", "io", ".", "loadmat", "(", "stego_path", ")", "[", "'im'", "]", "\n", "", "else", ":", "\n", "                ", "batch", "[", "0", ",", ":", ",", ":", ",", "0", "]", "=", "misc", ".", "imread", "(", "cover_path", ")", "\n", "batch", "[", "1", ",", ":", ",", ":", ",", "0", "]", "=", "misc", ".", "imread", "(", "stego_path", ")", "\n", "", "yield", "[", "batch", ",", "labels", "]", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.SCA_SRNet_Spatial.SCA_SRNet._build_model": [[11, 134], ["tensorflow.split", "tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.get_variable", "tensorflow.get_variable", "tensorflow.nn.bias_add", "tensorflow.nn.relu", "tensorflow.nn.conv2d", "tensorflow.add_n", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.nn.conv2d", "tensorflow.cast", "tensorflow.abs", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.cast"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "input_batch", ")", ":", "\n", "        ", "inputs_image", ",", "inputs_Beta", "=", "tf", ".", "split", "(", "input_batch", ",", "num_or_size_splits", "=", "2", ",", "axis", "=", "3", ")", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs_image", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs_image", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "_inputs_Beta", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs_Beta", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs_image", "=", "tf", ".", "cast", "(", "inputs_image", ",", "tf", ".", "float32", ")", "\n", "_inputs_Beta", "=", "tf", ".", "cast", "(", "inputs_Beta", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "# 256*256", "\n", "                ", "W", "=", "tf", ".", "get_variable", "(", "'W'", ",", "shape", "=", "[", "3", ",", "3", ",", "1", ",", "64", "]", ",", "initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "dtype", "=", "tf", ".", "float32", ",", "regularizer", "=", "layers", ".", "l2_regularizer", "(", "5e-4", ")", ")", "\n", "b", "=", "tf", ".", "get_variable", "(", "'b'", ",", "shape", "=", "[", "64", "]", ",", "dtype", "=", "tf", ".", "float32", ",", "initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ")", "\n", "conv", "=", "tf", ".", "nn", ".", "bias_add", "(", "tf", ".", "nn", ".", "conv2d", "(", "tf", ".", "cast", "(", "_inputs_image", ",", "tf", ".", "float32", ")", ",", "W", ",", "[", "1", ",", "1", ",", "1", ",", "1", "]", ",", "'SAME'", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "b", ",", "data_format", "=", "self", ".", "data_format", ",", "name", "=", "'Layer1'", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "conv", ")", "\n", "prob_map", "=", "tf", ".", "nn", ".", "conv2d", "(", "tf", ".", "cast", "(", "_inputs_Beta", ",", "tf", ".", "float32", ")", ",", "tf", ".", "abs", "(", "W", ")", ",", "[", "1", ",", "1", ",", "1", ",", "1", "]", ",", "'SAME'", ",", "data_format", "=", "self", ".", "data_format", ")", "\n", "out_L1", "=", "tf", ".", "add_n", "(", "[", "actv", ",", "prob_map", "]", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "# 256*256", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "out_L1", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "# 256*256", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "# 256*256", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "# 256*256", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "# 256*256", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "# 256*256", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "# 256*256", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "# 128*128", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "# 64*64", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "128", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "128", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "128", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "# 32*32", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "256", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "256", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "256", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "# 16*16", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "512", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "512", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.tflib.SCA_SRNet_JPEG.SCA_SRNet._build_model": [[11, 134], ["tensorflow.split", "tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.get_variable", "tensorflow.get_variable", "tensorflow.nn.bias_add", "tensorflow.nn.relu", "tensorflow.sqrt", "tensorflow.add_n", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.nn.conv2d", "tensorflow.nn.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.cast", "tensorflow.cast", "tensorflow.abs"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "input_batch", ")", ":", "\n", "        ", "inputs_image", ",", "inputs_Beta", "=", "tf", ".", "split", "(", "input_batch", ",", "num_or_size_splits", "=", "2", ",", "axis", "=", "3", ")", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs_image", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs_image", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "_inputs_Beta", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs_Beta", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs_image", "=", "tf", ".", "cast", "(", "inputs_image", ",", "tf", ".", "float32", ")", "\n", "_inputs_Beta", "=", "tf", ".", "cast", "(", "inputs_Beta", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "# 256*256", "\n", "                ", "W", "=", "tf", ".", "get_variable", "(", "'W'", ",", "shape", "=", "[", "3", ",", "3", ",", "1", ",", "64", "]", ",", "initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "dtype", "=", "tf", ".", "float32", ",", "regularizer", "=", "layers", ".", "l2_regularizer", "(", "5e-4", ")", ")", "\n", "b", "=", "tf", ".", "get_variable", "(", "'b'", ",", "shape", "=", "[", "64", "]", ",", "dtype", "=", "tf", ".", "float32", ",", "initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ")", "\n", "conv", "=", "tf", ".", "nn", ".", "bias_add", "(", "tf", ".", "nn", ".", "conv2d", "(", "tf", ".", "cast", "(", "_inputs_image", ",", "tf", ".", "float32", ")", ",", "W", ",", "[", "1", ",", "1", ",", "1", ",", "1", "]", ",", "'SAME'", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "b", ",", "data_format", "=", "self", ".", "data_format", ",", "name", "=", "'Layer1'", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "conv", ")", "\n", "prob_map", "=", "tf", ".", "sqrt", "(", "tf", ".", "nn", ".", "conv2d", "(", "tf", ".", "cast", "(", "_inputs_Beta", ",", "tf", ".", "float32", ")", ",", "tf", ".", "abs", "(", "W", ")", ",", "[", "1", ",", "1", ",", "1", ",", "1", "]", ",", "'SAME'", ",", "data_format", "=", "self", ".", "data_format", ")", ")", "\n", "out_L1", "=", "tf", ".", "add_n", "(", "[", "actv", ",", "prob_map", "]", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "# 256*256", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "out_L1", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "# 256*256", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "# 256*256", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "# 256*256", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "# 256*256", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "# 256*256", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "# 256*256", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "# 128*128", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "# 64*64", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "128", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "128", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "128", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "# 32*32", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "256", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "256", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "256", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "# 16*16", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "512", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "512", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.bb_qf75_ju04.4_detect.choose_mat": [[32, 47], ["fo_mat.get"], "function", ["None"], ["def", "choose_mat", "(", "layer", ")", ":", "\n", "    ", "fo_mat", "=", "{", "\n", "2", ":", "F_o_mat_l2", ",", "\n", "3", ":", "F_o_mat_l3", ",", "\n", "4", ":", "F_o_mat_l4", ",", "\n", "5", ":", "F_o_mat_l5", ",", "\n", "6", ":", "F_o_mat_l6", ",", "\n", "7", ":", "F_o_mat_l7", ",", "\n", "8", ":", "F_o_mat_l8", ",", "\n", "9", ":", "F_o_mat_l9", ",", "\n", "10", ":", "F_o_mat_l10", ",", "\n", "11", ":", "F_o_mat_l11", ",", "\n", "12", ":", "F_o_mat_l12", ",", "\n", "}", "\n", "return", "fo_mat", ".", "get", "(", "layer", ",", "None", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.bb_qf75_ju04.4_detect.gen_batch": [[48, 72], ["os.path.join", "cover_list[].endswith", "numpy.array", "numpy.empty", "imageio.imread", "numpy.empty", "list", "a.strip", "io.loadmat", "imageio.imread", "scipy.loadmat"], "function", ["None"], ["", "def", "gen_batch", "(", "cover_list", ",", "thread_idx", ",", "n_threads", ")", ":", "\n", "\n", "    ", "cover_root", "=", "os", ".", "path", ".", "join", "(", "args", ".", "data_path", ",", "'bb_256_qf75/'", ")", "\n", "\n", "cover_list", "=", "[", "cover_root", "+", "a", ".", "strip", "(", ")", "for", "a", "in", "cover_list", "]", "\n", "\n", "load_mat", "=", "cover_list", "[", "0", "]", ".", "endswith", "(", "'.mat'", ")", "\n", "if", "load_mat", ":", "\n", "        ", "img", "=", "io", ".", "loadmat", "(", "cover_list", "[", "0", "]", ")", "[", "'im'", "]", "\n", "img_shape", "=", "img", ".", "shape", "\n", "batch", "=", "np", ".", "empty", "(", "(", "1", ",", "img_shape", "[", "0", "]", ",", "img_shape", "[", "1", "]", ",", "1", ")", ",", "dtype", "=", "'float32'", ")", "\n", "", "else", ":", "\n", "        ", "img", "=", "imageio", ".", "imread", "(", "cover_list", "[", "0", "]", ")", "\n", "img_shape", "=", "img", ".", "shape", "\n", "batch", "=", "np", ".", "empty", "(", "(", "1", ",", "img_shape", "[", "0", "]", ",", "img_shape", "[", "1", "]", ",", "1", ")", ",", "dtype", "=", "'uint8'", ")", "\n", "\n", "", "labels", "=", "np", ".", "array", "(", "[", "0", "]", ",", "dtype", "=", "'uint8'", ")", "\n", "while", "True", ":", "\n", "        ", "for", "cover_path", "in", "list", "(", "cover_list", ")", ":", "\n", "            ", "if", "load_mat", ":", "\n", "                ", "batch", "[", "0", ",", ":", ",", ":", ",", "0", "]", "=", "sio", ".", "loadmat", "(", "cover_path", ")", "[", "'im'", "]", "\n", "", "else", ":", "\n", "                ", "batch", "[", "0", ",", ":", ",", ":", ",", "0", "]", "=", "imageio", ".", "imread", "(", "cover_path", ")", "\n", "", "yield", "[", "batch", ",", "labels", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.bb_qf75_ju04.4_detect.init_config": [[73, 124], ["configparser.ConfigParser", "configparser.ConfigParser.add_section", "configparser.ConfigParser.add_section", "configparser.ConfigParser.add_section", "configparser.ConfigParser.add_section", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.set", "configparser.ConfigParser.write", "open"], "function", ["None"], ["", "", "", "def", "init_config", "(", "config_log", ")", ":", "\n", "    ", "cf", "=", "configparser", ".", "ConfigParser", "(", ")", "\n", "cf", ".", "add_section", "(", "'first_layer_input_ranks'", ")", "\n", "cf", ".", "add_section", "(", "'first_layer_output_ranks'", ")", "\n", "cf", ".", "add_section", "(", "'second_layer_input_ranks'", ")", "\n", "cf", ".", "add_section", "(", "'second_layer_output_ranks'", ")", "\n", "cf", ".", "set", "(", "'first_layer_input_ranks'", ",", "'layer2'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_output_ranks'", ",", "'layer2'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_input_ranks'", ",", "'layer3'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_output_ranks'", ",", "'layer3'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_input_ranks'", ",", "'layer4'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_output_ranks'", ",", "'layer4'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_input_ranks'", ",", "'layer5'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_output_ranks'", ",", "'layer5'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_input_ranks'", ",", "'layer6'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_output_ranks'", ",", "'layer6'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_input_ranks'", ",", "'layer7'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_output_ranks'", ",", "'layer7'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_input_ranks'", ",", "'layer8'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_output_ranks'", ",", "'layer8'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_input_ranks'", ",", "'layer9'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_output_ranks'", ",", "'layer9'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_input_ranks'", ",", "'layer10'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_output_ranks'", ",", "'layer10'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_input_ranks'", ",", "'layer11'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_output_ranks'", ",", "'layer11'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_input_ranks'", ",", "'layer12'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'first_layer_output_ranks'", ",", "'layer12'", ",", "'0.0'", ")", "\n", "\n", "cf", ".", "set", "(", "'second_layer_input_ranks'", ",", "'layer3'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_output_ranks'", ",", "'layer3'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_input_ranks'", ",", "'layer4'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_output_ranks'", ",", "'layer4'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_input_ranks'", ",", "'layer5'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_output_ranks'", ",", "'layer5'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_input_ranks'", ",", "'layer6'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_output_ranks'", ",", "'layer6'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_input_ranks'", ",", "'layer7'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_output_ranks'", ",", "'layer7'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_input_ranks'", ",", "'layer8'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_output_ranks'", ",", "'layer8'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_input_ranks'", ",", "'layer9'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_output_ranks'", ",", "'layer9'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_input_ranks'", ",", "'layer10'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_output_ranks'", ",", "'layer10'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_input_ranks'", ",", "'layer11'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_output_ranks'", ",", "'layer11'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_input_ranks'", ",", "'layer12'", ",", "'0.0'", ")", "\n", "cf", ".", "set", "(", "'second_layer_output_ranks'", ",", "'layer12'", ",", "'0.0'", ")", "\n", "\n", "cf", ".", "write", "(", "open", "(", "config_log", ",", "'w'", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.bb_qf75_ju04.3_inspect_ma.gen_batch": [[28, 39], ["numpy.empty", "numpy.array", "scipy.loadmat", "list", "scipy.loadmat"], "function", ["None"], ["def", "gen_batch", "(", "cover_list", ",", "thread_idx", ",", "n_threads", ")", ":", "\n", "\n", "    ", "img", "=", "sio", ".", "loadmat", "(", "cover_list", "[", "0", "]", ")", "[", "'im'", "]", "\n", "img_shape", "=", "img", ".", "shape", "\n", "batch", "=", "np", ".", "empty", "(", "(", "1", ",", "img_shape", "[", "0", "]", ",", "img_shape", "[", "1", "]", ",", "1", ")", ",", "dtype", "=", "'float32'", ")", "\n", "\n", "labels", "=", "np", ".", "array", "(", "[", "0", "]", ",", "dtype", "=", "'uint8'", ")", "\n", "while", "True", ":", "\n", "        ", "for", "cover_path", "in", "list", "(", "cover_list", ")", ":", "\n", "            ", "batch", "[", "0", ",", ":", ",", ":", ",", "0", "]", "=", "sio", ".", "loadmat", "(", "cover_path", ")", "[", "'im'", "]", "\n", "yield", "[", "batch", ",", "labels", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_5.SRNetC64DE5._build_model": [[12, 125], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "16", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv1 = layers.conv2d(res)", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "#conv2_1=layers.conv2d(actv1, num_outputs=16, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv2_2=layers.conv2d(conv2_1, num_outputs=16, biases_initializer=None)", "\n", "#conv2_3=layers.conv2d(conv2_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_2.SRNetC64DE2._build_model": [[11, 121], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "#conv = layers.conv2d(actv)", "\n", "                ", "conv_1", "=", "layers", ".", "conv2d", "(", "actv", ",", "num_outputs", "=", "59", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv_2", "=", "layers", ".", "conv2d", "(", "conv_1", ",", "num_outputs", "=", "15", ",", "padding", "=", "'SAME'", ",", "biases_initializer", "=", "None", ")", "\n", "conv_3", "=", "layers", ".", "conv2d", "(", "conv_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv_3", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_6.SRNetC64DE6._build_model": [[12, 125], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "16", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv1 = layers.conv2d(res)", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "#conv2_1=layers.conv2d(actv1, num_outputs=16, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv2_2=layers.conv2d(conv2_1, num_outputs=16, biases_initializer=None)", "\n", "#conv2_3=layers.conv2d(conv2_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.decom_srnet.decom_ori_srnet_one_layer_first": [[10, 32], ["tensorflow.contrib.framework.load_variable", "tensorflow.contrib.framework.load_variable", "tensorly.decomposition.partial_tucker", "numpy.float32", "np.float32.transpose", "numpy.float32", "numpy.expand_dims", "numpy.expand_dims", "tensorflow.contrib.framework.load_variable", "tensorflow.contrib.framework.load_variable", "tensorly.decomposition.partial_tucker", "numpy.float32", "np.float32.transpose", "numpy.float32", "str", "str", "numpy.expand_dims", "numpy.expand_dims", "numpy.expand_dims", "numpy.expand_dims", "np.float32.copy", "np.float32.copy", "str", "str", "numpy.expand_dims", "numpy.expand_dims", "np.float32.copy", "np.float32.copy"], "function", ["None"], ["def", "decom_ori_srnet_one_layer_first", "(", "load_path", ",", "layer", ",", "r1", ",", "r2", ")", ":", "#decompose the first convolution layer of the blocks in srnet such as Layer3/Conv/weights", "\n", "    ", "if", "layer", ">=", "3", "and", "layer", "<=", "7", "or", "layer", "==", "12", "or", "layer", "==", "2", ":", "\n", "        ", "var_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv/weights'", "\n", "var_name_bias", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv/biases'", "\n", "var", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path", ",", "var_name", ")", "\n", "var_bias", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path", ",", "var_name_bias", ")", "\n", "ranks", "=", "[", "r1", ",", "r2", "]", "\n", "core", ",", "[", "first", ",", "last", "]", "=", "partial_tucker", "(", "var", ",", "modes", "=", "[", "2", ",", "3", "]", ",", "ranks", "=", "ranks", ",", "init", "=", "'svd'", ")", "\n", "first", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "first", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "last", "=", "last", ".", "transpose", "(", "(", "1", ",", "0", ")", ")", "\n", "last", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "last", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "", "elif", "layer", ">=", "8", "and", "layer", "<=", "11", ":", "\n", "        ", "var_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/weights'", "\n", "var_name_bias", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/biases'", "\n", "var", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path", ",", "var_name", ")", "\n", "var_bias", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path", ",", "var_name_bias", ")", "\n", "ranks", "=", "[", "r1", ",", "r2", "]", "\n", "core", ",", "[", "first", ",", "last", "]", "=", "partial_tucker", "(", "var", ",", "modes", "=", "[", "2", ",", "3", "]", ",", "ranks", "=", "ranks", ",", "init", "=", "'svd'", ")", "\n", "first", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "first", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "last", "=", "last", ".", "transpose", "(", "(", "1", ",", "0", ")", ")", "\n", "last", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "last", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "", "return", "first", ",", "core", ",", "last", ",", "var_bias", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.decom_srnet.decom_ori_srnet_one_layer_second": [[33, 55], ["tensorflow.contrib.framework.load_variable", "tensorflow.contrib.framework.load_variable", "tensorly.decomposition.partial_tucker", "numpy.float32", "np.float32.transpose", "numpy.float32", "numpy.expand_dims", "numpy.expand_dims", "tensorflow.contrib.framework.load_variable", "tensorflow.contrib.framework.load_variable", "tensorly.decomposition.partial_tucker", "numpy.float32", "np.float32.transpose", "numpy.float32", "str", "str", "numpy.expand_dims", "numpy.expand_dims", "numpy.expand_dims", "numpy.expand_dims", "np.float32.copy", "np.float32.copy", "str", "str", "numpy.expand_dims", "numpy.expand_dims", "np.float32.copy", "np.float32.copy"], "function", ["None"], ["", "def", "decom_ori_srnet_one_layer_second", "(", "load_path", ",", "layer", ",", "r1", ",", "r2", ")", ":", "#decomposed the second convolution layer of the blocks in srner such as :Layer3/Conv_1/weights", "\n", "    ", "if", "layer", ">=", "3", "and", "layer", "<=", "7", "or", "layer", "==", "12", ":", "\n", "        ", "var_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/weights'", "\n", "var_name_bias", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/biases'", "\n", "var", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path", ",", "var_name", ")", "\n", "var_bias", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path", ",", "var_name_bias", ")", "\n", "ranks", "=", "[", "r1", ",", "r2", "]", "\n", "core", ",", "[", "first", ",", "last", "]", "=", "partial_tucker", "(", "var", ",", "modes", "=", "[", "2", ",", "3", "]", ",", "ranks", "=", "ranks", ",", "init", "=", "'svd'", ")", "\n", "first", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "first", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "last", "=", "last", ".", "transpose", "(", "(", "1", ",", "0", ")", ")", "\n", "last", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "last", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "", "elif", "layer", ">=", "8", "and", "layer", "<=", "11", ":", "\n", "        ", "var_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/weights'", "\n", "var_name_bias", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/biases'", "\n", "var", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path", ",", "var_name", ")", "\n", "var_bias", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path", ",", "var_name_bias", ")", "\n", "ranks", "=", "[", "r1", ",", "r2", "]", "\n", "core", ",", "[", "first", ",", "last", "]", "=", "partial_tucker", "(", "var", ",", "modes", "=", "[", "2", ",", "3", "]", ",", "ranks", "=", "ranks", ",", "init", "=", "'svd'", ")", "\n", "first", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "first", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "last", "=", "last", ".", "transpose", "(", "(", "1", ",", "0", ")", ")", "\n", "last", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "last", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "", "return", "first", ",", "core", ",", "last", ",", "var_bias", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.decom_srnet.copy_weights_to_decom_srnet": [[56, 206], ["range", "tensorflow.reset_default_graph", "tensorflow.contrib.framework.list_variables", "print", "name_list.append", "tensorflow.Session", "range", "tensorflow.contrib.framework.list_variables", "print", "tensorflow.train.Saver", "sess.run", "os.path.join", "tf.train.Saver.save", "configparser.ConfigParser", "configparser.ConfigParser.read", "configparser.ConfigParser.getfloat", "configparser.ConfigParser.getfloat", "decom_srnet.decom_ori_srnet_one_layer_first", "first_1.append", "core_1.append", "last_1.append", "bias_1.append", "configparser.ConfigParser", "configparser.ConfigParser.read", "configparser.ConfigParser.getfloat", "configparser.ConfigParser.getfloat", "decom_srnet.decom_ori_srnet_one_layer_first", "configparser.ConfigParser.getfloat", "configparser.ConfigParser.getfloat", "decom_srnet.decom_ori_srnet_one_layer_second", "first_1.append", "core_1.append", "last_1.append", "bias_1.append", "first_2.append", "core_2.append", "last_2.append", "bias_2.append", "tensorflow.global_variables_initializer", "os.path.exists", "os.makedirs", "int", "int", "int", "int", "int", "int", "new_name_list.append", "tensorflow.Variable", "new_var_list.append", "new_name_list.append", "tensorflow.Variable", "new_var_list.append", "new_name_list.append", "tensorflow.Variable", "new_var_list.append", "tensorflow.contrib.framework.load_variable", "new_name_list.append", "new_var_list.append", "str", "str", "str", "str", "str", "str", "tensorflow.Variable", "new_name_list.append", "tensorflow.Variable", "new_var_list.append", "new_name_list.append", "tensorflow.Variable", "new_var_list.append", "new_name_list.append", "tensorflow.Variable", "new_var_list.append", "tensorflow.contrib.framework.load_variable", "new_name_list.append", "new_var_list.append", "new_name_list.append", "tensorflow.Variable", "new_var_list.append", "new_name_list.append", "tensorflow.Variable", "new_var_list.append", "new_name_list.append", "tensorflow.Variable", "new_var_list.append", "tensorflow.contrib.framework.load_variable", "new_name_list.append", "new_var_list.append", "tensorflow.contrib.framework.load_variable", "new_var_list.append", "tensorflow.contrib.framework.load_variable", "new_var_list.append", "str", "str", "str", "tensorflow.Variable", "tensorflow.Variable", "new_name_list.append", "tensorflow.Variable", "new_var_list.append", "new_name_list.append", "tensorflow.Variable", "new_var_list.append", "new_name_list.append", "tensorflow.Variable", "new_var_list.append", "tensorflow.contrib.framework.load_variable", "new_name_list.append", "new_var_list.append", "new_name_list.append", "tensorflow.Variable", "new_var_list.append", "new_name_list.append", "tensorflow.Variable", "new_var_list.append", "new_name_list.append", "tensorflow.Variable", "new_var_list.append", "tensorflow.contrib.framework.load_variable", "new_name_list.append", "new_var_list.append", "len", "tensorflow.Variable", "tensorflow.Variable", "str", "str", "str", "str", "str", "str", "str", "str", "tensorflow.Variable", "tensorflow.Variable", "var_name.split", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str"], "function", ["home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.decom_srnet.decom_ori_srnet_one_layer_first", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.decom_srnet.decom_ori_srnet_one_layer_first", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.decom_srnet.decom_ori_srnet_one_layer_second"], ["", "def", "copy_weights_to_decom_srnet", "(", "load_path_ori", ",", "load_path_new", ",", "config_path", ",", "log_path", ",", "model_name", ")", ":", "#copy the decomposed weights to new model", "\n", "    ", "first_1", "=", "[", "]", "\n", "core_1", "=", "[", "]", "\n", "last_1", "=", "[", "]", "\n", "bias_1", "=", "[", "]", "\n", "first_2", "=", "[", "]", "\n", "core_2", "=", "[", "]", "\n", "last_2", "=", "[", "]", "\n", "bias_2", "=", "[", "]", "\n", "for", "layer", "in", "range", "(", "2", ",", "13", ")", ":", "\n", "        ", "if", "layer", "==", "2", ":", "\n", "            ", "cf", "=", "configparser", ".", "ConfigParser", "(", ")", "\n", "cf", ".", "read", "(", "config_path", ")", "\n", "r1", "=", "cf", ".", "getfloat", "(", "'first_layer_input_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ")", "\n", "r2", "=", "cf", ".", "getfloat", "(", "'first_layer_output_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ")", "\n", "(", "first_var_1", ",", "core_var_1", ",", "last_var_1", ",", "var_bias_1", ")", "=", "decom_ori_srnet_one_layer_first", "(", "load_path_ori", ",", "layer", ",", "int", "(", "r1", ")", ",", "int", "(", "r2", ")", ")", "\n", "first_1", ".", "append", "(", "first_var_1", ")", "\n", "core_1", ".", "append", "(", "core_var_1", ")", "\n", "last_1", ".", "append", "(", "last_var_1", ")", "\n", "bias_1", ".", "append", "(", "var_bias_1", ")", "\n", "", "else", ":", "\n", "            ", "cf", "=", "configparser", ".", "ConfigParser", "(", ")", "\n", "cf", ".", "read", "(", "config_path", ")", "\n", "r1", "=", "cf", ".", "getfloat", "(", "'first_layer_input_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ")", "\n", "r2", "=", "cf", ".", "getfloat", "(", "'first_layer_output_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ")", "\n", "(", "first_var_1", ",", "core_var_1", ",", "last_var_1", ",", "var_bias_1", ")", "=", "decom_ori_srnet_one_layer_first", "(", "load_path_ori", ",", "layer", ",", "int", "(", "r1", ")", ",", "int", "(", "r2", ")", ")", "\n", "r1", "=", "cf", ".", "getfloat", "(", "'second_layer_input_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ")", "\n", "r2", "=", "cf", ".", "getfloat", "(", "'second_layer_output_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ")", "\n", "(", "first_var_2", ",", "core_var_2", ",", "last_var_2", ",", "var_bias_2", ")", "=", "decom_ori_srnet_one_layer_second", "(", "load_path_ori", ",", "layer", ",", "int", "(", "r1", ")", ",", "int", "(", "r2", ")", ")", "\n", "first_1", ".", "append", "(", "first_var_1", ")", "\n", "core_1", ".", "append", "(", "core_var_1", ")", "\n", "last_1", ".", "append", "(", "last_var_1", ")", "\n", "bias_1", ".", "append", "(", "var_bias_1", ")", "\n", "first_2", ".", "append", "(", "first_var_2", ")", "\n", "core_2", ".", "append", "(", "core_var_2", ")", "\n", "last_2", ".", "append", "(", "last_var_2", ")", "\n", "bias_2", ".", "append", "(", "var_bias_2", ")", "\n", "", "", "tf", ".", "reset_default_graph", "(", ")", "\n", "new_var_list", "=", "[", "]", "\n", "new_name_list", "=", "[", "]", "\n", "name_list", "=", "[", "]", "\n", "for", "var_name", ",", "_", "in", "tf", ".", "contrib", ".", "framework", ".", "list_variables", "(", "load_path_ori", ")", ":", "\n", "        ", "name_list", ".", "append", "(", "var_name", ")", "\n", "", "with", "tf", ".", "Session", "(", ")", "as", "sess", ":", "\n", "        ", "for", "layer", "in", "range", "(", "2", ",", "13", ")", ":", "\n", "            ", "if", "layer", "==", "2", ":", "\n", "                ", "new_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv/weights'", "\n", "new_name_list", ".", "append", "(", "new_name", ")", "\n", "renamed_var", "=", "tf", ".", "Variable", "(", "first_1", "[", "layer", "-", "2", "]", ",", "name", "=", "new_name", ")", "\n", "new_var_list", ".", "append", "(", "renamed_var", ")", "\n", "new_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/weights'", "\n", "new_name_list", ".", "append", "(", "new_name", ")", "\n", "renamed_var", "=", "tf", ".", "Variable", "(", "core_1", "[", "layer", "-", "2", "]", ",", "name", "=", "new_name", ")", "\n", "new_var_list", ".", "append", "(", "renamed_var", ")", "\n", "new_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/weights'", "\n", "new_name_list", ".", "append", "(", "new_name", ")", "\n", "renamed_var", "=", "tf", ".", "Variable", "(", "last_1", "[", "layer", "-", "2", "]", ",", "name", "=", "new_name", ")", "\n", "new_var_list", ".", "append", "(", "renamed_var", ")", "\n", "var", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path_ori", ",", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv/biases'", ")", "\n", "new_name_list", ".", "append", "(", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/biases'", ")", "\n", "new_var_list", ".", "append", "(", "tf", ".", "Variable", "(", "var", ",", "name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/biases'", ")", ")", "\n", "continue", "\n", "\n", "", "elif", "layer", ">=", "3", "and", "layer", "<=", "7", "or", "layer", "==", "12", ":", "\n", "                ", "new_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv/weights'", "\n", "new_name_list", ".", "append", "(", "new_name", ")", "\n", "renamed_var", "=", "tf", ".", "Variable", "(", "first_1", "[", "layer", "-", "2", "]", ",", "name", "=", "new_name", ")", "\n", "new_var_list", ".", "append", "(", "renamed_var", ")", "\n", "new_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/weights'", "\n", "new_name_list", ".", "append", "(", "new_name", ")", "\n", "renamed_var", "=", "tf", ".", "Variable", "(", "core_1", "[", "layer", "-", "2", "]", ",", "name", "=", "new_name", ")", "\n", "new_var_list", ".", "append", "(", "renamed_var", ")", "\n", "new_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/weights'", "\n", "new_name_list", ".", "append", "(", "new_name", ")", "\n", "renamed_var", "=", "tf", ".", "Variable", "(", "last_1", "[", "layer", "-", "2", "]", ",", "name", "=", "new_name", ")", "\n", "new_var_list", ".", "append", "(", "renamed_var", ")", "\n", "var", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path_ori", ",", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv/biases'", ")", "\n", "new_name_list", ".", "append", "(", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/biases'", ")", "\n", "new_var_list", ".", "append", "(", "tf", ".", "Variable", "(", "var", ",", "name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/biases'", ")", ")", "\n", "new_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_3/weights'", "\n", "new_name_list", ".", "append", "(", "new_name", ")", "\n", "renamed_var", "=", "tf", ".", "Variable", "(", "first_2", "[", "layer", "-", "3", "]", ",", "name", "=", "new_name", ")", "\n", "new_var_list", ".", "append", "(", "renamed_var", ")", "\n", "new_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_4/weights'", "\n", "new_name_list", ".", "append", "(", "new_name", ")", "\n", "renamed_var", "=", "tf", ".", "Variable", "(", "core_2", "[", "layer", "-", "3", "]", ",", "name", "=", "new_name", ")", "\n", "new_var_list", ".", "append", "(", "renamed_var", ")", "\n", "new_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_5/weights'", "\n", "new_name_list", ".", "append", "(", "new_name", ")", "\n", "renamed_var", "=", "tf", ".", "Variable", "(", "last_2", "[", "layer", "-", "3", "]", ",", "name", "=", "new_name", ")", "\n", "new_var_list", ".", "append", "(", "renamed_var", ")", "\n", "var", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path_ori", ",", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/biases'", ")", "\n", "new_name_list", ".", "append", "(", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_5/biases'", ")", "\n", "new_var_list", ".", "append", "(", "tf", ".", "Variable", "(", "var", ",", "name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_5/biases'", ")", ")", "\n", "continue", "\n", "\n", "", "elif", "layer", ">=", "8", "and", "layer", "<=", "11", ":", "\n", "                ", "new_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/weights'", "\n", "new_name_list", ".", "append", "(", "new_name", ")", "\n", "renamed_var", "=", "tf", ".", "Variable", "(", "first_1", "[", "layer", "-", "2", "]", ",", "name", "=", "new_name", ")", "\n", "new_var_list", ".", "append", "(", "renamed_var", ")", "\n", "new_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/weights'", "\n", "new_name_list", ".", "append", "(", "new_name", ")", "\n", "renamed_var", "=", "tf", ".", "Variable", "(", "core_1", "[", "layer", "-", "2", "]", ",", "name", "=", "new_name", ")", "\n", "new_var_list", ".", "append", "(", "renamed_var", ")", "\n", "new_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_3/weights'", "\n", "new_name_list", ".", "append", "(", "new_name", ")", "\n", "renamed_var", "=", "tf", ".", "Variable", "(", "last_1", "[", "layer", "-", "2", "]", ",", "name", "=", "new_name", ")", "\n", "new_var_list", ".", "append", "(", "renamed_var", ")", "\n", "var", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path_ori", ",", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/biases'", ")", "\n", "new_name_list", ".", "append", "(", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_3/biases'", ")", "\n", "new_var_list", ".", "append", "(", "tf", ".", "Variable", "(", "var", ",", "name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_3/biases'", ")", ")", "\n", "new_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_4/weights'", "\n", "new_name_list", ".", "append", "(", "new_name", ")", "\n", "renamed_var", "=", "tf", ".", "Variable", "(", "first_2", "[", "layer", "-", "3", "]", ",", "name", "=", "new_name", ")", "\n", "new_var_list", ".", "append", "(", "renamed_var", ")", "\n", "new_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_5/weights'", "\n", "new_name_list", ".", "append", "(", "new_name", ")", "\n", "renamed_var", "=", "tf", ".", "Variable", "(", "core_2", "[", "layer", "-", "3", "]", ",", "name", "=", "new_name", ")", "\n", "new_var_list", ".", "append", "(", "renamed_var", ")", "\n", "new_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_6/weights'", "\n", "new_name_list", ".", "append", "(", "new_name", ")", "\n", "renamed_var", "=", "tf", ".", "Variable", "(", "last_2", "[", "layer", "-", "3", "]", ",", "name", "=", "new_name", ")", "\n", "new_var_list", ".", "append", "(", "renamed_var", ")", "\n", "var", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path_ori", ",", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/biases'", ")", "\n", "new_name_list", ".", "append", "(", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_6/biases'", ")", "\n", "new_var_list", ".", "append", "(", "tf", ".", "Variable", "(", "var", ",", "name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_6/biases'", ")", ")", "\n", "continue", "\n", "\n", "\n", "", "", "for", "var_name", ",", "_", "in", "tf", ".", "contrib", ".", "framework", ".", "list_variables", "(", "load_path_new", ")", ":", "\n", "            ", "if", "var_name", "in", "new_name_list", ":", "\n", "                ", "continue", "\n", "", "elif", "var_name", "in", "name_list", "and", "len", "(", "var_name", ".", "split", "(", "'/'", ")", ")", "<=", "3", ":", "\n", "                ", "var", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path_ori", ",", "var_name", ")", "\n", "new_var_list", ".", "append", "(", "tf", ".", "Variable", "(", "var", ",", "name", "=", "var_name", ")", ")", "\n", "", "else", ":", "\n", "                ", "var", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path_new", ",", "var_name", ")", "\n", "new_var_list", ".", "append", "(", "tf", ".", "Variable", "(", "var", ",", "name", "=", "var_name", ")", ")", "\n", "\n", "", "", "print", "(", "'starting to write new checkpoint !'", ")", "\n", "saver", "=", "tf", ".", "train", ".", "Saver", "(", "var_list", "=", "new_var_list", ")", "\n", "sess", ".", "run", "(", "tf", ".", "global_variables_initializer", "(", ")", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "log_path", ")", ":", "\n", "            ", "os", ".", "makedirs", "(", "log_path", ")", "\n", "", "checkpoint_path", "=", "os", ".", "path", ".", "join", "(", "log_path", ",", "model_name", ")", "\n", "saver", ".", "save", "(", "sess", ",", "checkpoint_path", ")", "\n", "\n", "\n", "", "print", "(", "'done!'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.models.choose_model_class": [[33, 58], ["layer_model.get"], "function", ["None"], ["def", "choose_model_class", "(", "layer", ")", ":", "\n", "    ", "layer_model", "=", "{", "\n", "21", ":", "snc64_2", ".", "SRNetC64DE2", ",", "\n", "31", ":", "snc64_3", ".", "SRNetC64DE3", ",", "\n", "32", ":", "snc64_32", ".", "SRNetC64DE32", ",", "\n", "41", ":", "snc64_4", ".", "SRNetC64DE4", ",", "\n", "42", ":", "snc64_42", ".", "SRNetC64DE42", ",", "\n", "51", ":", "snc64_5", ".", "SRNetC64DE5", ",", "\n", "52", ":", "snc64_52", ".", "SRNetC64DE52", ",", "\n", "61", ":", "snc64_6", ".", "SRNetC64DE6", ",", "\n", "62", ":", "snc64_62", ".", "SRNetC64DE62", ",", "\n", "71", ":", "snc64_7", ".", "SRNetC64DE7", ",", "\n", "72", ":", "snc64_72", ".", "SRNetC64DE72", ",", "\n", "81", ":", "snc64_8", ".", "SRNetC64DE8", ",", "\n", "82", ":", "snc64_82", ".", "SRNetC64DE82", ",", "\n", "91", ":", "snc64_9", ".", "SRNetC64DE9", ",", "\n", "92", ":", "snc64_92", ".", "SRNetC64DE92", ",", "\n", "101", ":", "snc64_10", ".", "SRNetC64DE10", ",", "\n", "102", ":", "snc64_102", ".", "SRNetC64DE102", ",", "\n", "111", ":", "snc64_11", ".", "SRNetC64DE11", ",", "\n", "112", ":", "snc64_112", ".", "SRNetC64DE112", ",", "\n", "121", ":", "snc64_12", ".", "SRNetC64DE12", ",", "\n", "122", ":", "snc64_122", ".", "SRNetC64DE122", "\n", "}", "\n", "return", "layer_model", ".", "get", "(", "layer", ",", "None", ")", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_52.SRNetC64DE52._build_model": [[12, 125], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "#conv1_1=layers.conv2d(res, num_outputs=16, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv1_2=layers.conv2d(conv1_1, num_outputs=16, biases_initializer=None)", "\n", "#conv1_3=layers.conv2d(conv1_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "16", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv2 = layers.conv2d(actv1)", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.inspect_decom_snl9l12_c64.get_all_f_o_L2L12": [[16, 129], ["tensorflow.reset_default_graph", "GeneratorRunner", "GeneratorRunner.get_batched_inputs", "model_class", "model_class._build_model", "model_class._build_losses", "average_summary", "average_summary", "tensorflow.group", "tensorflow.group", "tensorflow.train.Saver", "tensorflow.global_variables_initializer", "tensorflow.local_variables_initializer", "tensorflow.Session", "sess.run", "print", "GeneratorRunner.start_threads", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "range", "sess.run", "print", "float", "float", "float", "float", "tf.train.Saver.restore", "sess.run", "range", "sess.graph.get_tensor_by_name", "sess.run", "bn1_f.reshape.reshape", "sess.graph.get_tensor_by_name", "sess.run", "bn2_f.reshape.reshape", "str", "str", "sess.graph.get_tensor_by_name", "sess.run", "bn1_f.reshape.reshape", "str", "str", "str"], "function", ["home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.get_batched_inputs", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_32.SRNetC64DE32._build_model", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.Model._build_losses", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.start_threads"], ["def", "get_all_f_o_L2L12", "(", "model_class", ",", "gen", ",", "batch_size", ",", "ds_size", ",", "load_path_ori", ")", ":", "\n", "\n", "    ", "tf", ".", "reset_default_graph", "(", ")", "\n", "runner", "=", "GeneratorRunner", "(", "gen", ",", "batch_size", "*", "10", ")", "\n", "img_batch", ",", "label_batch", "=", "runner", ".", "get_batched_inputs", "(", "batch_size", ")", "\n", "model", "=", "model_class", "(", "False", ",", "'NHWC'", ")", "\n", "model", ".", "_build_model", "(", "img_batch", ")", "\n", "loss", ",", "accuracy", "=", "model", ".", "_build_losses", "(", "label_batch", ")", "\n", "loss_summary", "=", "average_summary", "(", "loss", ",", "'loss'", ",", "float", "(", "ds_size", ")", "/", "float", "(", "batch_size", ")", ")", "\n", "accuracy_summary", "=", "average_summary", "(", "accuracy", ",", "'accuracy'", ",", "float", "(", "ds_size", ")", "/", "float", "(", "batch_size", ")", ")", "\n", "increment_op", "=", "tf", ".", "group", "(", "loss_summary", ".", "increment_op", ",", "accuracy_summary", ".", "increment_op", ")", "\n", "\n", "init_op", "=", "tf", ".", "group", "(", "tf", ".", "global_variables_initializer", "(", ")", ",", "\n", "tf", ".", "local_variables_initializer", "(", ")", ")", "\n", "saver", "=", "tf", ".", "train", ".", "Saver", "(", "max_to_keep", "=", "10000", ")", "\n", "with", "tf", ".", "Session", "(", ")", "as", "sess", ":", "\n", "        ", "sess", ".", "run", "(", "init_op", ")", "\n", "if", "load_path_ori", "is", "not", "None", ":", "\n", "            ", "saver", ".", "restore", "(", "sess", ",", "load_path_ori", ")", "\n", "", "print", "(", "\"load ckpt: \"", ",", "load_path_ori", ")", "\n", "runner", ".", "start_threads", "(", "sess", ",", "1", ")", "\n", "\n", "F_o_mat_l2", "=", "np", ".", "zeros", "(", "(", "1", ",", "ds_size", ",", "256", "*", "256", "*", "16", ")", ")", "\n", "F_o_mat_l3", "=", "np", ".", "zeros", "(", "(", "2", ",", "ds_size", ",", "256", "*", "256", "*", "16", ")", ")", "\n", "F_o_mat_l4", "=", "np", ".", "zeros", "(", "(", "2", ",", "ds_size", ",", "256", "*", "256", "*", "16", ")", ")", "\n", "F_o_mat_l5", "=", "np", ".", "zeros", "(", "(", "2", ",", "ds_size", ",", "256", "*", "256", "*", "16", ")", ")", "\n", "F_o_mat_l6", "=", "np", ".", "zeros", "(", "(", "2", ",", "ds_size", ",", "256", "*", "256", "*", "16", ")", ")", "\n", "F_o_mat_l7", "=", "np", ".", "zeros", "(", "(", "2", ",", "ds_size", ",", "256", "*", "256", "*", "16", ")", ")", "\n", "F_o_mat_l8", "=", "np", ".", "zeros", "(", "(", "2", ",", "ds_size", ",", "256", "*", "256", "*", "16", ")", ")", "\n", "F_o_mat_l9", "=", "np", ".", "zeros", "(", "(", "2", ",", "ds_size", ",", "128", "*", "128", "*", "64", ")", ")", "\n", "F_o_mat_l10", "=", "np", ".", "zeros", "(", "(", "2", ",", "ds_size", ",", "64", "*", "64", "*", "64", ")", ")", "\n", "F_o_mat_l11", "=", "np", ".", "zeros", "(", "(", "2", ",", "ds_size", ",", "32", "*", "32", "*", "64", ")", ")", "\n", "F_o_mat_l12", "=", "np", ".", "zeros", "(", "(", "2", ",", "ds_size", ",", "16", "*", "16", "*", "64", ")", ")", "\n", "\n", "for", "j", "in", "range", "(", "0", ",", "ds_size", ",", "batch_size", ")", ":", "\n", "\n", "            ", "sess", ".", "run", "(", "increment_op", ")", "# ds_size should be equal to batch_size", "\n", "\n", "row", "=", "0", "\n", "for", "layer", "in", "range", "(", "2", ",", "13", ")", ":", "\n", "\n", "                ", "if", "(", "layer", ">=", "3", "and", "layer", "<=", "7", ")", "or", "layer", "==", "12", ":", "\n", "                    ", "tensor_name_1", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/BatchNorm/FusedBatchNorm:0'", "\n", "tensor_name_2", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/BatchNorm_1/FusedBatchNorm:0'", "\n", "", "elif", "layer", ">=", "8", "and", "layer", "<=", "11", ":", "\n", "                    ", "tensor_name_1", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/BatchNorm_1/FusedBatchNorm:0'", "\n", "tensor_name_2", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/BatchNorm_2/FusedBatchNorm:0'", "\n", "# tensor_name_1 = 'Layer' + str(layer) + '/BatchNorm_1/cond_1/Merge:0'", "\n", "# tensor_name_2 = 'Layer' + str(layer) + '/BatchNorm_2/cond_1/Merge:0'", "\n", "", "elif", "layer", "==", "2", ":", "\n", "                    ", "tensor_name_1", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/BatchNorm/FusedBatchNorm:0'", "\n", "ori_bn1", "=", "sess", ".", "graph", ".", "get_tensor_by_name", "(", "tensor_name_1", ")", "\n", "bn1_f", "=", "sess", ".", "run", "(", "ori_bn1", ")", "\n", "bn1_f", "=", "bn1_f", ".", "reshape", "(", "batch_size", ",", "-", "1", ")", "\n", "row", "=", "row", "+", "1", "\n", "F_o_mat_l2", "[", "0", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn1_f", "\n", "continue", "\n", "\n", "\n", "", "ori_bn1", "=", "sess", ".", "graph", ".", "get_tensor_by_name", "(", "tensor_name_1", ")", "\n", "bn1_f", "=", "sess", ".", "run", "(", "ori_bn1", ")", "\n", "bn1_f", "=", "bn1_f", ".", "reshape", "(", "batch_size", ",", "-", "1", ")", "\n", "# fo_assign[str(layer)](0, j, j+batch_size, bn1_f)", "\n", "row", "=", "row", "+", "1", "\n", "\n", "ori_bn2", "=", "sess", ".", "graph", ".", "get_tensor_by_name", "(", "tensor_name_2", ")", "\n", "bn2_f", "=", "sess", ".", "run", "(", "ori_bn2", ")", "\n", "bn2_f", "=", "bn2_f", ".", "reshape", "(", "batch_size", ",", "-", "1", ")", "\n", "# fo_assign[str(layer)](1, j, j+batch_size, bn2_f)   ", "\n", "row", "=", "row", "+", "1", "\n", "\n", "if", "layer", "==", "3", ":", "\n", "                    ", "F_o_mat_l3", "[", "0", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn1_f", "\n", "F_o_mat_l3", "[", "1", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn2_f", "\n", "", "elif", "layer", "==", "4", ":", "\n", "                    ", "F_o_mat_l4", "[", "0", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn1_f", "\n", "F_o_mat_l4", "[", "1", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn2_f", "\n", "", "elif", "layer", "==", "5", ":", "\n", "                    ", "F_o_mat_l5", "[", "0", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn1_f", "\n", "F_o_mat_l5", "[", "1", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn2_f", "\n", "", "elif", "layer", "==", "6", ":", "\n", "                    ", "F_o_mat_l6", "[", "0", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn1_f", "\n", "F_o_mat_l6", "[", "1", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn2_f", "\n", "", "elif", "layer", "==", "7", ":", "\n", "                    ", "F_o_mat_l7", "[", "0", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn1_f", "\n", "F_o_mat_l7", "[", "1", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn2_f", "\n", "", "elif", "layer", "==", "8", ":", "\n", "                    ", "F_o_mat_l8", "[", "0", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn1_f", "\n", "F_o_mat_l8", "[", "1", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn2_f", "\n", "", "elif", "layer", "==", "9", ":", "\n", "                    ", "F_o_mat_l9", "[", "0", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn1_f", "\n", "F_o_mat_l9", "[", "1", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn2_f", "\n", "", "elif", "layer", "==", "10", ":", "\n", "                    ", "F_o_mat_l10", "[", "0", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn1_f", "\n", "F_o_mat_l10", "[", "1", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn2_f", "\n", "", "elif", "layer", "==", "11", ":", "\n", "                    ", "F_o_mat_l11", "[", "0", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn1_f", "\n", "F_o_mat_l11", "[", "1", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn2_f", "\n", "", "elif", "layer", "==", "12", ":", "\n", "                    ", "F_o_mat_l12", "[", "0", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn1_f", "\n", "F_o_mat_l12", "[", "1", ",", "j", ":", "j", "+", "batch_size", ",", ":", "]", "=", "bn2_f", "\n", "\n", "", "", "", "mean_loss", ",", "mean_accuracy", "=", "sess", ".", "run", "(", "[", "loss_summary", ".", "mean_variable", ",", "accuracy_summary", ".", "mean_variable", "]", ")", "\n", "\n", "print", "(", "\"row==21: \"", ",", "(", "row", "==", "21", ")", ")", "\n", "assert", "row", "==", "21", ",", "\"row is not equal to 21, warning ! \"", "\n", "\n", "", "return", "F_o_mat_l2", ",", "F_o_mat_l3", ",", "F_o_mat_l4", ",", "F_o_mat_l5", ",", "F_o_mat_l6", ",", "F_o_mat_l7", ",", "F_o_mat_l8", ",", "F_o_mat_l9", ",", "F_o_mat_l10", ",", "F_o_mat_l11", ",", "F_o_mat_l12", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.inspect_decom_snl9l12_c64.inspect_decom_conv": [[137, 275], ["print", "output_log.write", "output_log.write", "utils.get_decom_tensor_name", "tensorflow.contrib.framework.load_variable", "tensorflow.contrib.framework.load_variable", "numpy.empty", "range", "tensorflow.reset_default_graph", "GeneratorRunner", "GeneratorRunner.get_batched_inputs", "model_class", "model_class._build_model", "model_class._build_losses", "average_summary", "average_summary", "tensorflow.group", "tensorflow.group", "tensorflow.train.Saver", "numpy.empty", "range", "time.strftime", "tensorflow.global_variables_initializer", "tensorflow.local_variables_initializer", "tensorflow.Session", "sess.run", "GeneratorRunner.start_threads", "tensorly.decomposition.partial_tucker", "numpy.float32", "np.float32.transpose", "numpy.float32", "utils.assign_sess", "range", "sess.run", "print", "output_log.write", "output_log.flush", "sess.run", "tensorflow.reset_default_graph", "GeneratorRunner", "GeneratorRunner.get_batched_inputs", "model_class", "model_class._build_model", "model_class._build_losses", "average_summary", "average_summary", "tensorflow.group", "tensorflow.group", "tensorflow.train.Saver", "str", "float", "float", "float", "float", "int", "int", "numpy.expand_dims", "numpy.expand_dims", "sess.run", "sess.graph.get_tensor_by_name", "sess.run", "F_c.reshape.reshape", "print", "utils.compute_ma", "tensorflow.global_variables_initializer", "tensorflow.local_variables_initializer", "tensorflow.Session", "sess.run", "GeneratorRunner.start_threads", "tensorly.decomposition.partial_tucker", "numpy.float32", "np.float32.transpose", "numpy.float32", "utils.assign_sess", "range", "sess.run", "print", "output_log.write", "output_log.flush", "sess.run", "str", "numpy.expand_dims", "numpy.expand_dims", "time.strftime", "str", "str", "time.strftime", "float", "float", "float", "float", "int", "int", "numpy.expand_dims", "numpy.expand_dims", "sess.run", "sess.graph.get_tensor_by_name", "sess.run", "F_c.reshape.reshape", "print", "utils.compute_ma", "np.float32.copy", "np.float32.copy", "numpy.expand_dims", "numpy.expand_dims", "time.strftime", "str", "str", "time.strftime", "np.float32.copy", "np.float32.copy"], "function", ["home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.get_decom_tensor_name", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.get_batched_inputs", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_32.SRNetC64DE32._build_model", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.Model._build_losses", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.start_threads", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.assign_sess", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.get_batched_inputs", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_32.SRNetC64DE32._build_model", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.Model._build_losses", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.compute_ma", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.start_threads", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.assign_sess", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.compute_ma"], ["def", "inspect_decom_conv", "(", "model_class", ",", "gen", ",", "batch_size", ",", "ds_size", ",", "load_path_ori", ",", "layer", ",", "index", ",", "output_log", ",", "F_o_mat", ")", ":", "\n", "\n", "# ma_row = np.empty((ds_size, 59))", "\n", "    ", "mat_col", "=", "0", "\n", "print", "(", "\"Ready to traverse shrinking rate in l%d-conv%d\"", "%", "(", "layer", ",", "index", ")", ")", "\n", "output_log", ".", "write", "(", "'--------layer'", "+", "str", "(", "layer", ")", "+", "'--------'", "+", "time", ".", "strftime", "(", "\"%Y%m%d-%H%M%S\"", ")", "+", "'\\n'", ")", "\n", "output_log", ".", "write", "(", "'------'", "+", "str", "(", "index", ")", "+", "'------'", "+", "'\\n'", ")", "\n", "\n", "var_name", ",", "var_name_bias", ",", "fc_tensor_name", "=", "get_decom_tensor_name", "(", "layer", ",", "index", ")", "\n", "var_ori_1", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path_ori", ",", "var_name", ")", "\n", "var_bias_1", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path_ori", ",", "var_name_bias", ")", "\n", "\n", "if", "(", "layer", ">=", "2", "and", "layer", "<=", "8", ")", "or", "(", "layer", "==", "9", "and", "index", "==", "1", ")", ":", "\n", "        ", "ma_dim", "=", "14", "\n", "ma_row", "=", "np", ".", "empty", "(", "(", "ds_size", ",", "ma_dim", ")", ")", "\n", "\n", "# if index == 1:", "\n", "step", "=", "0.05", "\n", "for", "i", "in", "range", "(", "0", ",", "17", ")", ":", "# rate reduction from 1 to 0.20 ", "\n", "            ", "if", "i", "in", "[", "5", ",", "10", ",", "15", "]", ":", "\n", "                ", "continue", "\n", "", "tf", ".", "reset_default_graph", "(", ")", "\n", "runner", "=", "GeneratorRunner", "(", "gen", ",", "batch_size", "*", "10", ")", "\n", "img_batch", ",", "label_batch", "=", "runner", ".", "get_batched_inputs", "(", "batch_size", ")", "\n", "model", "=", "model_class", "(", "False", ",", "'NHWC'", ")", "\n", "model", ".", "_build_model", "(", "img_batch", ")", "\n", "loss", ",", "accuracy", "=", "model", ".", "_build_losses", "(", "label_batch", ")", "\n", "loss_summary", "=", "average_summary", "(", "loss", ",", "'loss'", ",", "float", "(", "ds_size", ")", "/", "float", "(", "batch_size", ")", ")", "\n", "accuracy_summary", "=", "average_summary", "(", "accuracy", ",", "'accuracy'", ",", "float", "(", "ds_size", ")", "/", "float", "(", "batch_size", ")", ")", "\n", "increment_op", "=", "tf", ".", "group", "(", "loss_summary", ".", "increment_op", ",", "accuracy_summary", ".", "increment_op", ")", "\n", "# global_step = tf.get_variable('global_step', dtype=tf.int32, shape=[], \\", "\n", "#                               initializer=tf.constant_initializer(0), \\", "\n", "#                               trainable=False)", "\n", "init_op", "=", "tf", ".", "group", "(", "tf", ".", "global_variables_initializer", "(", ")", ",", "\n", "tf", ".", "local_variables_initializer", "(", ")", ")", "\n", "saver", "=", "tf", ".", "train", ".", "Saver", "(", "max_to_keep", "=", "10000", ")", "\n", "with", "tf", ".", "Session", "(", ")", "as", "sess", ":", "\n", "                ", "sess", ".", "run", "(", "init_op", ")", "\n", "runner", ".", "start_threads", "(", "sess", ",", "1", ")", "\n", "ranks", "=", "[", "]", "\n", "ranks", "=", "[", "int", "(", "var_ori_1", ".", "shape", "[", "2", "]", "*", "step", "*", "(", "20", "-", "i", ")", ")", ",", "int", "(", "var_ori_1", ".", "shape", "[", "3", "]", "*", "step", "*", "(", "20", "-", "i", ")", ")", "]", "\n", "core_1", ",", "[", "first_1", ",", "last_1", "]", "=", "partial_tucker", "(", "var_ori_1", ",", "modes", "=", "[", "2", ",", "3", "]", ",", "ranks", "=", "ranks", ",", "init", "=", "'svd'", ")", "\n", "first_1", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "first_1", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "last_1", "=", "last_1", ".", "transpose", "(", "(", "1", ",", "0", ")", ")", "\n", "last_1", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "last_1", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "\n", "assign_sess", "(", "sess", ",", "load_path_ori", ",", "layer", ",", "index", ",", "first_1", ",", "core_1", ",", "last_1", ",", "var_bias_1", ")", "\n", "\n", "\n", "for", "j", "in", "range", "(", "0", ",", "ds_size", ",", "batch_size", ")", ":", "\n", "                    ", "sess", ".", "run", "(", "increment_op", ")", "\n", "# load the decom_conv+bn from decom_srnet_layeri and get the feature map", "\n", "decom_bn", "=", "sess", ".", "graph", ".", "get_tensor_by_name", "(", "fc_tensor_name", ")", "\n", "F_c", "=", "sess", ".", "run", "(", "decom_bn", ")", "\n", "\n", "F_c", "=", "F_c", ".", "reshape", "(", "batch_size", ",", "-", "1", ")", "\n", "# F_o = F_o_mat[batch_size,:]", "\n", "\n", "print", "(", "\"F_c.shape: \"", ",", "F_c", ".", "shape", ")", "\n", "M_A", ",", "_", "=", "compute_ma", "(", "batch_size", ",", "F_o_mat", "[", "j", ":", "j", "+", "batch_size", ",", ":", "]", ",", "F_c", ")", "\n", "ma_row", "[", "j", ":", "j", "+", "batch_size", ",", "mat_col", "]", "=", "M_A", "\n", "\n", "", "mat_col", "=", "mat_col", "+", "1", "\n", "mean_loss", ",", "mean_accuracy", "=", "sess", ".", "run", "(", "[", "loss_summary", ".", "mean_variable", ",", "accuracy_summary", ".", "mean_variable", "]", ")", "\n", "print", "(", "\"Rank: {}, time: {}\"", ".", "format", "(", "ranks", ",", "time", ".", "strftime", "(", "\"%Y%m%d-%H%M%S\"", ")", ")", ")", "\n", "output_log", ".", "write", "(", "\"Rank: {}, acc={}, loss={}, time: {} \\n\"", ".", "format", "(", "ranks", ",", "str", "(", "mean_accuracy", ")", ",", "str", "(", "mean_loss", ")", ",", "time", ".", "strftime", "(", "\"%Y%m%d-%H%M%S\"", ")", ")", ")", "\n", "output_log", ".", "flush", "(", ")", "\n", "sess", ".", "run", "(", "[", "loss_summary", ".", "reset_variable_op", ",", "accuracy_summary", ".", "reset_variable_op", "]", ")", "\n", "\n", "", "", "", "elif", "(", "layer", ">=", "10", "and", "layer", "<=", "12", ")", "or", "(", "layer", "==", "9", "and", "index", "==", "2", ")", ":", "\n", "# elif layer >= 10 and layer <= 11:", "\n", "# elif layer >= 8 and layer <= 11:", "\n", "        ", "ma_dim", "=", "59", "\n", "ma_row", "=", "np", ".", "empty", "(", "(", "ds_size", ",", "ma_dim", ")", ")", "\n", "\n", "# if index == 1:", "\n", "# step = 0.05", "\n", "for", "i", "in", "range", "(", "ma_dim", ")", ":", "\n", "            ", "tf", ".", "reset_default_graph", "(", ")", "\n", "runner", "=", "GeneratorRunner", "(", "gen", ",", "batch_size", "*", "10", ")", "\n", "img_batch", ",", "label_batch", "=", "runner", ".", "get_batched_inputs", "(", "batch_size", ")", "\n", "model", "=", "model_class", "(", "False", ",", "'NHWC'", ")", "\n", "model", ".", "_build_model", "(", "img_batch", ")", "\n", "loss", ",", "accuracy", "=", "model", ".", "_build_losses", "(", "label_batch", ")", "\n", "loss_summary", "=", "average_summary", "(", "loss", ",", "'loss'", ",", "float", "(", "ds_size", ")", "/", "float", "(", "batch_size", ")", ")", "\n", "accuracy_summary", "=", "average_summary", "(", "accuracy", ",", "'accuracy'", ",", "float", "(", "ds_size", ")", "/", "float", "(", "batch_size", ")", ")", "\n", "increment_op", "=", "tf", ".", "group", "(", "loss_summary", ".", "increment_op", ",", "accuracy_summary", ".", "increment_op", ")", "\n", "# global_step = tf.get_variable('global_step', dtype=tf.int32, shape=[], \\", "\n", "#                               initializer=tf.constant_initializer(0), \\", "\n", "#                               trainable=False)", "\n", "init_op", "=", "tf", ".", "group", "(", "tf", ".", "global_variables_initializer", "(", ")", ",", "\n", "tf", ".", "local_variables_initializer", "(", ")", ")", "\n", "saver", "=", "tf", ".", "train", ".", "Saver", "(", "max_to_keep", "=", "10000", ")", "\n", "with", "tf", ".", "Session", "(", ")", "as", "sess", ":", "\n", "                ", "sess", ".", "run", "(", "init_op", ")", "\n", "runner", ".", "start_threads", "(", "sess", ",", "1", ")", "\n", "ranks", "=", "[", "]", "\n", "ranks", "=", "[", "int", "(", "var_ori_1", ".", "shape", "[", "2", "]", "-", "i", ")", ",", "int", "(", "var_ori_1", ".", "shape", "[", "3", "]", "-", "i", ")", "]", "\n", "core_1", ",", "[", "first_1", ",", "last_1", "]", "=", "partial_tucker", "(", "var_ori_1", ",", "modes", "=", "[", "2", ",", "3", "]", ",", "ranks", "=", "ranks", ",", "init", "=", "'svd'", ")", "\n", "first_1", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "first_1", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "last_1", "=", "last_1", ".", "transpose", "(", "(", "1", ",", "0", ")", ")", "\n", "last_1", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "last_1", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "\n", "assign_sess", "(", "sess", ",", "load_path_ori", ",", "layer", ",", "index", ",", "first_1", ",", "core_1", ",", "last_1", ",", "var_bias_1", ")", "\n", "\n", "for", "j", "in", "range", "(", "0", ",", "ds_size", ",", "batch_size", ")", ":", "\n", "                    ", "sess", ".", "run", "(", "increment_op", ")", "\n", "decom_bn", "=", "sess", ".", "graph", ".", "get_tensor_by_name", "(", "fc_tensor_name", ")", "\n", "F_c", "=", "sess", ".", "run", "(", "decom_bn", ")", "\n", "\n", "F_c", "=", "F_c", ".", "reshape", "(", "batch_size", ",", "-", "1", ")", "\n", "# F_o = F_o_mat[batch_size,:]", "\n", "\n", "print", "(", "\"F_c.shape: \"", ",", "F_c", ".", "shape", ")", "\n", "M_A", ",", "_", "=", "compute_ma", "(", "batch_size", ",", "F_o_mat", "[", "j", ":", "j", "+", "batch_size", ",", ":", "]", ",", "F_c", ")", "\n", "ma_row", "[", "j", ":", "j", "+", "batch_size", ",", "mat_col", "]", "=", "M_A", "\n", "\n", "", "mat_col", "=", "mat_col", "+", "1", "\n", "mean_loss", ",", "mean_accuracy", "=", "sess", ".", "run", "(", "[", "loss_summary", ".", "mean_variable", ",", "\n", "accuracy_summary", ".", "mean_variable", "]", ")", "\n", "print", "(", "\"Rank: {}, time: {}\"", ".", "format", "(", "ranks", ",", "time", ".", "strftime", "(", "\"%Y%m%d-%H%M%S\"", ")", ")", ")", "\n", "output_log", ".", "write", "(", "\"Rank: {}, acc={}, loss={}, time: {} \\n\"", ".", "format", "(", "ranks", ",", "str", "(", "mean_accuracy", ")", ",", "str", "(", "mean_loss", ")", ",", "time", ".", "strftime", "(", "\"%Y%m%d-%H%M%S\"", ")", ")", ")", "\n", "# output_log.write('rate ' + str(round((20-i)*step, 2)) + ',acc ' + str(mean_accuracy) + ',loss ' + str(", "\n", "#     mean_loss) + '\\n')", "\n", "output_log", ".", "flush", "(", ")", "\n", "sess", ".", "run", "(", "[", "loss_summary", ".", "reset_variable_op", ",", "accuracy_summary", ".", "reset_variable_op", "]", ")", "\n", "\n", "", "", "", "return", "ma_row", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.inspect_decom_snl9l12_c64.plot_errorbar": [[279, 341], ["numpy.array", "numpy.array", "matplotlib.subplots", "ax.get_xaxis().tick_bottom", "ax.get_yaxis().tick_left", "ax.tick_params", "fig.suptitle", "matplotlib.ylim", "range", "matplotlib.legend", "matplotlib.savefig", "matplotlib.close", "len", "ax.errorbar", "matplotlib.xticks", "matplotlib.yticks", "matplotlib.xlabel", "matplotlib.ylabel", "matplotlib.xticks", "matplotlib.yticks", "matplotlib.xlabel", "matplotlib.ylabel", "ax.get_xaxis", "ax.get_yaxis", "range", "range", "len", "len", "range", "len"], "function", ["None"], ["def", "plot_errorbar", "(", "conv_list", ",", "rank_list", ",", "mean_mat", ",", "std_err", ",", "fig_name", ",", "save_plot_path", ",", "spec_row", ")", ":", "\n", "# spec_row (list) : specify rows to plot", "\n", "    ", "conv_array", "=", "np", ".", "array", "(", "conv_list", ")", "\n", "rank_array", "=", "np", ".", "array", "(", "rank_list", ")", "\n", "\n", "conv_array", "=", "conv_array", "[", "spec_row", "]", "\n", "# ma_mat = ma_mat[spec_row,:]", "\n", "mean_mat", "=", "mean_mat", "[", "spec_row", ",", ":", "]", "\n", "std_err", "=", "std_err", "[", "spec_row", ",", ":", "]", "\n", "\n", "# Common figsizes: (10, 7.5) and (12, 9)", "\n", "fig", ",", "ax", "=", "plt", ".", "subplots", "(", "1", ",", "1", ",", "figsize", "=", "(", "12", ",", "9", ")", ")", "\n", "\n", "# Remove the plot frame lines. They are unnecessary here.", "\n", "# ax.spines['top'].set_visible(False)", "\n", "# ax.spines['bottom'].set_visible(False)", "\n", "# ax.spines['right'].set_visible(False)", "\n", "# ax.spines['left'].set_visible(False)", "\n", "\n", "# Ensure that the axis ticks only show up on the bottom and left of the plot.", "\n", "# Ticks on the right and top of the plot are generally unnecessary.", "\n", "ax", ".", "get_xaxis", "(", ")", ".", "tick_bottom", "(", ")", "\n", "ax", ".", "get_yaxis", "(", ")", ".", "tick_left", "(", ")", "\n", "\n", "# Make sure your axis ticks are large enough to be easily read.", "\n", "# You don't want your viewers squinting to read your plot.", "\n", "# plt.xticks(range(len(rank_list)),rank_list, fontsize=10)", "\n", "# plt.yticks(fontsize=10)", "\n", "\n", "# Provide tick lines across the plot to help your viewers trace along", "\n", "# the axis ticks. Make sure that the lines are light and small so they", "\n", "# don't obscure the primary data lines.", "\n", "# ax.grid(True, 'major', 'y', ls='-', lw=.5, c='k', alpha=.3)", "\n", "\n", "# Remove the tick marks; they are unnecessary with the tick lines we just", "\n", "# plotted.", "\n", "ax", ".", "tick_params", "(", "axis", "=", "'both'", ",", "which", "=", "'both'", ",", "bottom", "=", "True", ",", "top", "=", "False", ",", "\n", "labelbottom", "=", "True", ",", "left", "=", "True", ",", "right", "=", "False", ",", "labelleft", "=", "True", ")", "\n", "# plt.figure(figsize=(10,5))# set fig canvas size", "\n", "fig", ".", "suptitle", "(", "fig_name", ",", "fontsize", "=", "17", ",", "ha", "=", "\"center\"", ")", "\n", "plt", ".", "ylim", "(", "-", "0.05", ",", "1.35", ")", "\n", "\n", "for", "i", "in", "range", "(", "len", "(", "spec_row", ")", ")", ":", "\n", "        ", "ax", ".", "errorbar", "(", "x", "=", "[", "k", "for", "k", "in", "range", "(", "len", "(", "rank_list", ")", ")", "]", ",", "y", "=", "mean_mat", "[", "i", ",", ":", "]", ",", "yerr", "=", "std_err", "[", "i", ",", ":", "]", ",", "label", "=", "conv_array", "[", "i", "]", ",", "elinewidth", "=", "1", ",", "capsize", "=", "3", ")", "\n", "# ax.plot(mean_mat[i,:],linewidth=2,linestyle='-',label=conv_array[i], marker='o')", "\n", "# plt.plot(rank_array, ma_mat[1,:],color=\"darkblue\",linewidth=1,linestyle='--', marker='o')", "\n", "# plt.plot(rank_array, ma_mat[2,:],color=\"goldenrod\",linewidth=1.5,linestyle='-', marker='o')", "\n", "\n", "", "if", "'l10'", "in", "conv_array", "[", "i", "]", "or", "'l11'", "in", "conv_array", "[", "i", "]", "or", "'l12'", "in", "conv_array", "[", "i", "]", "or", "'l9-conv2'", "in", "conv_array", "[", "i", "]", ":", "\n", "        ", "plt", ".", "xticks", "(", "range", "(", "0", ",", "len", "(", "rank_list", ")", ",", "10", ")", ",", "rank_list", "[", ":", ":", "10", "]", ",", "fontsize", "=", "10", ")", "\n", "plt", ".", "yticks", "(", "fontsize", "=", "10", ")", "\n", "plt", ".", "xlabel", "(", "u'rank'", ",", "fontsize", "=", "14", ")", "\n", "plt", ".", "ylabel", "(", "u'M_A'", ",", "fontsize", "=", "14", ")", "\n", "", "else", ":", "\n", "        ", "plt", ".", "xticks", "(", "range", "(", "len", "(", "rank_list", ")", ")", ",", "rank_list", ",", "fontsize", "=", "10", ")", "\n", "plt", ".", "yticks", "(", "fontsize", "=", "10", ")", "\n", "plt", ".", "xlabel", "(", "u'rate'", ",", "fontsize", "=", "14", ")", "\n", "plt", ".", "ylabel", "(", "u'M_A'", ",", "fontsize", "=", "14", ")", "\n", "\n", "", "plt", ".", "legend", "(", "bbox_to_anchor", "=", "(", "0.5", ",", "-", "0.06", ")", ",", "loc", "=", "\"upper center\"", ",", "ncol", "=", "6", ",", "frameon", "=", "False", ")", "\n", "plt", ".", "savefig", "(", "save_plot_path", "+", "fig_name", "+", "\".png\"", ",", "bbox_inches", "=", "'tight'", ",", "dpi", "=", "100", ")", "\n", "plt", ".", "close", "(", "fig_name", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.inspect_decom_snl9l12_c64.single_plot_errorbar": [[344, 391], ["numpy.array", "numpy.array", "range", "len", "matplotlib.subplots", "ax.get_xaxis().tick_bottom", "ax.get_yaxis().tick_left", "ax.tick_params", "fig.suptitle", "matplotlib.ylim", "ax.errorbar", "matplotlib.savefig", "matplotlib.xticks", "matplotlib.yticks", "matplotlib.xlabel", "matplotlib.ylabel", "matplotlib.xticks", "matplotlib.yticks", "matplotlib.xlabel", "matplotlib.ylabel", "ax.get_xaxis", "ax.get_yaxis", "range", "range", "len", "len", "range", "len"], "function", ["None"], ["", "def", "single_plot_errorbar", "(", "conv_list", ",", "rank_list", ",", "mean_mat", ",", "std_err", ",", "fig_name", ",", "save_plot_path", ",", "spec_row", ")", ":", "\n", "# spec_row (list) : specify rows to plot", "\n", "    ", "conv_array", "=", "np", ".", "array", "(", "conv_list", ")", "\n", "rank_array", "=", "np", ".", "array", "(", "rank_list", ")", "\n", "\n", "conv_array", "=", "conv_array", "[", "spec_row", "]", "\n", "# ma_mat = ma_mat[spec_row,:]", "\n", "mean_mat", "=", "mean_mat", "[", "spec_row", ",", ":", "]", "\n", "std_err", "=", "std_err", "[", "spec_row", ",", ":", "]", "\n", "\n", "for", "i", "in", "range", "(", "len", "(", "spec_row", ")", ")", ":", "\n", "# Common figsizes: (10, 7.5) and (12, 9)", "\n", "        ", "fig", ",", "ax", "=", "plt", ".", "subplots", "(", "1", ",", "1", ",", "figsize", "=", "(", "12", ",", "9", ")", ")", "\n", "\n", "# Ensure that the axis ticks only show up on the bottom and left of the plot.", "\n", "# Ticks on the right and top of the plot are generally unnecessary.", "\n", "ax", ".", "get_xaxis", "(", ")", ".", "tick_bottom", "(", ")", "\n", "ax", ".", "get_yaxis", "(", ")", ".", "tick_left", "(", ")", "\n", "\n", "\n", "# Remove the tick marks; they are unnecessary with the tick lines we just", "\n", "# plotted.", "\n", "ax", ".", "tick_params", "(", "axis", "=", "'both'", ",", "which", "=", "'both'", ",", "bottom", "=", "True", ",", "top", "=", "False", ",", "\n", "labelbottom", "=", "True", ",", "left", "=", "True", ",", "right", "=", "False", ",", "labelleft", "=", "True", ")", "\n", "# plt.figure(figsize=(10,5))# set fig canvas size", "\n", "fig", ".", "suptitle", "(", "conv_array", "[", "i", "]", ",", "fontsize", "=", "17", ",", "ha", "=", "\"center\"", ")", "\n", "plt", ".", "ylim", "(", "-", "0.05", ",", "1.35", ")", "\n", "# if 'l9' in conv_array[i]:", "\n", "\n", "ax", ".", "errorbar", "(", "x", "=", "[", "k", "for", "k", "in", "range", "(", "len", "(", "rank_list", ")", ")", "]", ",", "y", "=", "mean_mat", "[", "i", ",", ":", "]", ",", "yerr", "=", "std_err", "[", "i", ",", ":", "]", ",", "label", "=", "conv_array", "[", "i", "]", ",", "elinewidth", "=", "1", ",", "capsize", "=", "3", ")", "\n", "\n", "if", "'l10'", "in", "conv_array", "[", "i", "]", "or", "'l11'", "in", "conv_array", "[", "i", "]", "or", "'l12'", "in", "conv_array", "[", "i", "]", "or", "'l9-conv2'", "in", "conv_array", "[", "i", "]", ":", "\n", "            ", "plt", ".", "xticks", "(", "range", "(", "0", ",", "len", "(", "rank_list", ")", ",", "10", ")", ",", "rank_list", "[", ":", ":", "10", "]", ",", "fontsize", "=", "10", ")", "\n", "plt", ".", "yticks", "(", "fontsize", "=", "10", ")", "\n", "plt", ".", "xlabel", "(", "u'rank'", ",", "fontsize", "=", "14", ")", "\n", "plt", ".", "ylabel", "(", "u'M_A'", ",", "fontsize", "=", "14", ")", "\n", "", "else", ":", "\n", "            ", "plt", ".", "xticks", "(", "range", "(", "len", "(", "rank_list", ")", ")", ",", "rank_list", ",", "fontsize", "=", "10", ")", "\n", "plt", ".", "yticks", "(", "fontsize", "=", "10", ")", "\n", "plt", ".", "xlabel", "(", "u'rate'", ",", "fontsize", "=", "14", ")", "\n", "plt", ".", "ylabel", "(", "u'M_A'", ",", "fontsize", "=", "14", ")", "\n", "\n", "# x_major_locator=plt.MultipleLocator(10)", "\n", "# ax.xaxis.set_major_locator(x_major_locator)", "\n", "\n", "# plt.legend(bbox_to_anchor=(0.5, -0.06), loc=\"upper center\", ncol=6, frameon=False)", "\n", "", "plt", ".", "savefig", "(", "save_plot_path", "+", "conv_array", "[", "i", "]", "+", "\".png\"", ",", "bbox_inches", "=", "'tight'", ",", "dpi", "=", "100", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.inspect_decom_snl9l12_c64.plot_rank_ma_for_conv": [[393, 440], ["numpy.array", "numpy.array", "matplotlib.subplots", "ax.spines[].set_visible", "ax.spines[].set_visible", "ax.spines[].set_visible", "ax.spines[].set_visible", "ax.get_xaxis().tick_bottom", "ax.get_yaxis().tick_left", "matplotlib.xticks", "matplotlib.yticks", "ax.grid", "ax.tick_params", "fig.suptitle", "matplotlib.xlabel", "matplotlib.ylabel", "range", "matplotlib.legend", "matplotlib.savefig", "matplotlib.close", "range", "len", "ax.plot", "ax.get_xaxis", "ax.get_yaxis", "len"], "function", ["None"], ["", "", "def", "plot_rank_ma_for_conv", "(", "conv_list", ",", "rank_list", ",", "ma_mat", ",", "fig_name", ",", "save_plot_path", ",", "spec_row", ")", ":", "\n", "# spec_row (list) : specify rows to plot", "\n", "    ", "conv_array", "=", "np", ".", "array", "(", "conv_list", ")", "\n", "rank_array", "=", "np", ".", "array", "(", "rank_list", ")", "\n", "\n", "conv_array", "=", "conv_array", "[", "spec_row", "]", "\n", "ma_mat", "=", "ma_mat", "[", "spec_row", ",", ":", "]", "\n", "\n", "# Common figsizes: (10, 7.5) and (12, 9)", "\n", "fig", ",", "ax", "=", "plt", ".", "subplots", "(", "1", ",", "1", ",", "figsize", "=", "(", "12", ",", "9", ")", ")", "\n", "\n", "# Remove the plot frame lines. They are unnecessary here.", "\n", "ax", ".", "spines", "[", "'top'", "]", ".", "set_visible", "(", "False", ")", "\n", "ax", ".", "spines", "[", "'bottom'", "]", ".", "set_visible", "(", "False", ")", "\n", "ax", ".", "spines", "[", "'right'", "]", ".", "set_visible", "(", "False", ")", "\n", "ax", ".", "spines", "[", "'left'", "]", ".", "set_visible", "(", "False", ")", "\n", "\n", "# Ensure that the axis ticks only show up on the bottom and left of the plot.", "\n", "# Ticks on the right and top of the plot are generally unnecessary.", "\n", "ax", ".", "get_xaxis", "(", ")", ".", "tick_bottom", "(", ")", "\n", "ax", ".", "get_yaxis", "(", ")", ".", "tick_left", "(", ")", "\n", "\n", "# Make sure your axis ticks are large enough to be easily read.", "\n", "# You don't want your viewers squinting to read your plot.", "\n", "plt", ".", "xticks", "(", "range", "(", "len", "(", "rank_list", ")", ")", ",", "rank_list", ",", "fontsize", "=", "10", ")", "\n", "plt", ".", "yticks", "(", "fontsize", "=", "10", ")", "\n", "\n", "# Provide tick lines across the plot to help your viewers trace along", "\n", "# the axis ticks. Make sure that the lines are light and small so they", "\n", "# don't obscure the primary data lines.", "\n", "ax", ".", "grid", "(", "True", ",", "'major'", ",", "'y'", ",", "ls", "=", "'-'", ",", "lw", "=", ".5", ",", "c", "=", "'k'", ",", "alpha", "=", ".3", ")", "\n", "\n", "# Remove the tick marks; they are unnecessary with the tick lines we just", "\n", "# plotted.", "\n", "ax", ".", "tick_params", "(", "axis", "=", "'both'", ",", "which", "=", "'both'", ",", "bottom", "=", "False", ",", "top", "=", "False", ",", "\n", "labelbottom", "=", "True", ",", "left", "=", "False", ",", "right", "=", "False", ",", "labelleft", "=", "True", ")", "\n", "# plt.figure(figsize=(10,5))# set fig canvas size", "\n", "fig", ".", "suptitle", "(", "fig_name", ",", "fontsize", "=", "17", ",", "ha", "=", "\"center\"", ")", "\n", "plt", ".", "xlabel", "(", "u'rank'", ",", "fontsize", "=", "14", ")", "\n", "plt", ".", "ylabel", "(", "u'M_A'", ",", "fontsize", "=", "14", ")", "\n", "\n", "for", "i", "in", "range", "(", "len", "(", "spec_row", ")", ")", ":", "\n", "        ", "ax", ".", "plot", "(", "ma_mat", "[", "i", ",", ":", "]", ",", "linewidth", "=", "2", ",", "linestyle", "=", "'-'", ",", "label", "=", "conv_array", "[", "i", "]", ",", "marker", "=", "'o'", ")", "\n", "\n", "", "plt", ".", "legend", "(", "bbox_to_anchor", "=", "(", "0.5", ",", "-", "0.06", ")", ",", "loc", "=", "\"upper center\"", ",", "ncol", "=", "6", ",", "frameon", "=", "False", ")", "\n", "plt", ".", "savefig", "(", "save_plot_path", "+", "fig_name", "+", "\".png\"", ",", "bbox_inches", "=", "'tight'", ",", "dpi", "=", "100", ")", "\n", "plt", ".", "close", "(", "fig_name", ")", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_11.SRNetC64DE11._build_model": [[11, 124], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "#conv_1=layers.conv2d(actv, num_outputs=59, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv_2=layers.conv2d(conv_1, num_outputs=15, padding='SAME', biases_initializer=None)", "\n", "#conv_3=layers.conv2d(conv_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "64", ",", "padding", "=", "'SAME'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv1 = layers.conv2d(res, num_outputs=256)", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_102.SRNetC64DE102._build_model": [[11, 124], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "#conv_1=layers.conv2d(actv, num_outputs=59, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv_2=layers.conv2d(conv_1, num_outputs=15, padding='SAME', biases_initializer=None)", "\n", "#conv_3=layers.conv2d(conv_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "64", ",", "padding", "=", "'SAME'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv2 = layers.conv2d(actv1, num_outputs=128)", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.detect_srnet_before_cand.inspect_decom_conv_before_cand": [[12, 146], ["print", "output_log.write", "output_log.write", "utils.get_decom_tensor_name", "tensorflow.contrib.framework.load_variable", "tensorflow.contrib.framework.load_variable", "range", "tensorflow.reset_default_graph", "GeneratorRunner", "GeneratorRunner.get_batched_inputs", "model_class", "model_class._build_model", "model_class._build_losses", "average_summary", "average_summary", "tensorflow.group", "tensorflow.group", "tensorflow.train.Saver", "range", "time.strftime", "tensorflow.global_variables_initializer", "tensorflow.local_variables_initializer", "tensorflow.Session", "sess.run", "GeneratorRunner.start_threads", "tensorly.decomposition.partial_tucker", "numpy.float32", "np.float32.transpose", "numpy.float32", "utils.assign_sess", "range", "print", "tensorflow.reset_default_graph", "GeneratorRunner", "GeneratorRunner.get_batched_inputs", "model_class", "model_class._build_model", "model_class._build_losses", "average_summary", "average_summary", "tensorflow.group", "tensorflow.group", "tensorflow.train.Saver", "str", "float", "float", "float", "float", "numpy.expand_dims", "numpy.expand_dims", "sess.run", "sess.graph.get_tensor_by_name", "sess.run", "F_c.reshape.reshape", "print", "utils.compute_ma", "utils.write_2_config_log", "output_log.write", "output_log.flush", "sess.run", "tensorflow.global_variables_initializer", "tensorflow.local_variables_initializer", "tensorflow.Session", "sess.run", "GeneratorRunner.start_threads", "tensorly.decomposition.partial_tucker", "numpy.float32", "np.float32.transpose", "numpy.float32", "utils.assign_sess", "range", "sess.run", "print", "str", "numpy.expand_dims", "numpy.expand_dims", "float", "float", "float", "float", "int", "int", "numpy.expand_dims", "numpy.expand_dims", "sess.run", "sess.graph.get_tensor_by_name", "sess.run", "F_c.reshape.reshape", "print", "utils.compute_ma", "utils.write_2_config_log", "output_log.write", "output_log.flush", "sess.run", "np.float32.copy", "np.float32.copy", "numpy.expand_dims", "numpy.expand_dims", "np.float32.copy", "np.float32.copy"], "function", ["home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.get_decom_tensor_name", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.get_batched_inputs", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_32.SRNetC64DE32._build_model", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.Model._build_losses", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.start_threads", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.assign_sess", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.get_batched_inputs", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_32.SRNetC64DE32._build_model", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.Model._build_losses", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.compute_ma", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.write_2_config_log", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.start_threads", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.assign_sess", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.compute_ma", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.write_2_config_log"], ["def", "inspect_decom_conv_before_cand", "(", "model_class", ",", "gen", ",", "batch_size", ",", "ds_size", ",", "load_path_ori", ",", "layer", ",", "index", ",", "output_log", ",", "F_o_mat", ",", "ma_threshold", ",", "config_log", ")", ":", "\n", "\n", "    ", "print", "(", "\"Ready to traverse shrinking rate in l%d-conv%d\"", "%", "(", "layer", ",", "index", ")", ")", "\n", "output_log", ".", "write", "(", "'--------layer'", "+", "str", "(", "layer", ")", "+", "'--------'", "+", "time", ".", "strftime", "(", "\"%Y%m%d-%H%M%S\"", ")", "+", "'\\n'", ")", "\n", "output_log", ".", "write", "(", "'------'", "+", "str", "(", "index", ")", "+", "'------'", "+", "'\\n'", ")", "\n", "\n", "var_name", ",", "var_name_bias", ",", "fc_tensor_name", "=", "get_decom_tensor_name", "(", "layer", ",", "index", ")", "\n", "var_ori_1", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path_ori", ",", "var_name", ")", "\n", "var_bias_1", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path_ori", ",", "var_name_bias", ")", "\n", "if", "layer", "==", "2", ":", "\n", "        ", "threshold", "=", "ma_threshold", "[", "0", "]", "\n", "", "else", ":", "\n", "        ", "threshold", "=", "ma_threshold", "[", "(", "layer", "-", "3", ")", "*", "2", "+", "index", "]", "\n", "\n", "\n", "", "if", "layer", "==", "2", "or", "(", "layer", "==", "9", "and", "index", "==", "1", ")", ":", "\n", "#step = 0.05", "\n", "        ", "for", "i", "in", "range", "(", "0", ",", "16", ")", ":", "# rate reduction from 1 to 0.20 ", "\n", "            ", "tf", ".", "reset_default_graph", "(", ")", "\n", "runner", "=", "GeneratorRunner", "(", "gen", ",", "batch_size", "*", "10", ")", "\n", "img_batch", ",", "label_batch", "=", "runner", ".", "get_batched_inputs", "(", "batch_size", ")", "\n", "model", "=", "model_class", "(", "False", ",", "'NHWC'", ")", "\n", "model", ".", "_build_model", "(", "img_batch", ")", "\n", "loss", ",", "accuracy", "=", "model", ".", "_build_losses", "(", "label_batch", ")", "\n", "loss_summary", "=", "average_summary", "(", "loss", ",", "'loss'", ",", "float", "(", "ds_size", ")", "/", "float", "(", "batch_size", ")", ")", "\n", "accuracy_summary", "=", "average_summary", "(", "accuracy", ",", "'accuracy'", ",", "float", "(", "ds_size", ")", "/", "float", "(", "batch_size", ")", ")", "\n", "increment_op", "=", "tf", ".", "group", "(", "loss_summary", ".", "increment_op", ",", "accuracy_summary", ".", "increment_op", ")", "\n", "# global_step = tf.get_variable('global_step', dtype=tf.int32, shape=[], \\", "\n", "#                               initializer=tf.constant_initializer(0), \\", "\n", "#                               trainable=False)", "\n", "init_op", "=", "tf", ".", "group", "(", "tf", ".", "global_variables_initializer", "(", ")", ",", "\n", "tf", ".", "local_variables_initializer", "(", ")", ")", "\n", "saver", "=", "tf", ".", "train", ".", "Saver", "(", "max_to_keep", "=", "10000", ")", "\n", "with", "tf", ".", "Session", "(", ")", "as", "sess", ":", "\n", "                ", "sess", ".", "run", "(", "init_op", ")", "\n", "runner", ".", "start_threads", "(", "sess", ",", "1", ")", "\n", "ranks", "=", "[", "]", "\n", "if", "layer", "==", "2", ":", "\n", "                    ", "ranks", "=", "[", "var_ori_1", ".", "shape", "[", "2", "]", "-", "4", "*", "i", ",", "var_ori_1", ".", "shape", "[", "3", "]", "-", "i", "]", "\n", "", "else", ":", "\n", "                    ", "ranks", "=", "[", "var_ori_1", ".", "shape", "[", "2", "]", "-", "i", ",", "var_ori_1", ".", "shape", "[", "3", "]", "-", "4", "*", "i", "]", "\n", "", "core_1", ",", "[", "first_1", ",", "last_1", "]", "=", "partial_tucker", "(", "var_ori_1", ",", "modes", "=", "[", "2", ",", "3", "]", ",", "ranks", "=", "ranks", ",", "init", "=", "'svd'", ")", "\n", "first_1", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "first_1", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "last_1", "=", "last_1", ".", "transpose", "(", "(", "1", ",", "0", ")", ")", "\n", "last_1", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "last_1", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "\n", "assign_sess", "(", "sess", ",", "load_path_ori", ",", "layer", ",", "index", ",", "first_1", ",", "core_1", ",", "last_1", ",", "var_bias_1", ")", "\n", "\n", "for", "j", "in", "range", "(", "0", ",", "ds_size", ",", "batch_size", ")", ":", "\n", "                    ", "sess", ".", "run", "(", "increment_op", ")", "\n", "# load the decom_conv+bn from decom_srnet_layeri and get the feature map", "\n", "decom_bn", "=", "sess", ".", "graph", ".", "get_tensor_by_name", "(", "fc_tensor_name", ")", "\n", "F_c", "=", "sess", ".", "run", "(", "decom_bn", ")", "\n", "\n", "F_c", "=", "F_c", ".", "reshape", "(", "batch_size", ",", "-", "1", ")", "\n", "# F_o = F_o_mat[batch_size,:]", "\n", "\n", "print", "(", "\"F_c.shape: \"", ",", "F_c", ".", "shape", ")", "\n", "M_A", ",", "ma", "=", "compute_ma", "(", "batch_size", ",", "F_o_mat", "[", "j", ":", "j", "+", "batch_size", ",", ":", "]", ",", "F_c", ")", "\n", "\n", "", "print", "(", "\"Rank: {}\\n\"", ".", "format", "(", "ranks", ")", ")", "\n", "if", "ma", ">", "threshold", ":", "\n", "                    ", "write_2_config_log", "(", "config_log", ",", "layer", ",", "index", ",", "ranks_result", "[", "0", "]", ",", "ranks_result", "[", "1", "]", ")", "\n", "return", "ranks_result", "\n", "break", "\n", "", "else", ":", "\n", "                    ", "ranks_result", "=", "ranks", "\n", "output_log", ".", "write", "(", "\"Rank: {}, ma :{}\\n\"", ".", "format", "(", "ranks", ",", "ma", ")", ")", "\n", "output_log", ".", "flush", "(", ")", "\n", "sess", ".", "run", "(", "[", "loss_summary", ".", "reset_variable_op", ",", "accuracy_summary", ".", "reset_variable_op", "]", ")", "\n", "\n", "", "", "", "", "elif", "(", "layer", ">=", "3", "and", "layer", "<=", "8", ")", "or", "(", "layer", "==", "9", "and", "index", "==", "2", ")", "or", "(", "layer", ">=", "10", "and", "layer", "<=", "12", ")", ":", "\n", "\n", "        ", "ma_dim", "=", "64", "\n", "\n", "for", "i", "in", "range", "(", "ma_dim", ")", ":", "\n", "            ", "tf", ".", "reset_default_graph", "(", ")", "\n", "runner", "=", "GeneratorRunner", "(", "gen", ",", "batch_size", "*", "10", ")", "\n", "img_batch", ",", "label_batch", "=", "runner", ".", "get_batched_inputs", "(", "batch_size", ")", "\n", "model", "=", "model_class", "(", "False", ",", "'NHWC'", ")", "\n", "model", ".", "_build_model", "(", "img_batch", ")", "\n", "loss", ",", "accuracy", "=", "model", ".", "_build_losses", "(", "label_batch", ")", "\n", "loss_summary", "=", "average_summary", "(", "loss", ",", "'loss'", ",", "float", "(", "ds_size", ")", "/", "float", "(", "batch_size", ")", ")", "\n", "accuracy_summary", "=", "average_summary", "(", "accuracy", ",", "'accuracy'", ",", "float", "(", "ds_size", ")", "/", "float", "(", "batch_size", ")", ")", "\n", "increment_op", "=", "tf", ".", "group", "(", "loss_summary", ".", "increment_op", ",", "accuracy_summary", ".", "increment_op", ")", "\n", "# global_step = tf.get_variable('global_step', dtype=tf.int32, shape=[], \\", "\n", "#                               initializer=tf.constant_initializer(0), \\", "\n", "#                               trainable=False)", "\n", "init_op", "=", "tf", ".", "group", "(", "tf", ".", "global_variables_initializer", "(", ")", ",", "\n", "tf", ".", "local_variables_initializer", "(", ")", ")", "\n", "saver", "=", "tf", ".", "train", ".", "Saver", "(", "max_to_keep", "=", "10000", ")", "\n", "with", "tf", ".", "Session", "(", ")", "as", "sess", ":", "\n", "                ", "sess", ".", "run", "(", "init_op", ")", "\n", "runner", ".", "start_threads", "(", "sess", ",", "1", ")", "\n", "ranks", "=", "[", "]", "\n", "ranks", "=", "[", "int", "(", "var_ori_1", ".", "shape", "[", "2", "]", "-", "i", ")", ",", "int", "(", "var_ori_1", ".", "shape", "[", "3", "]", "-", "i", ")", "]", "\n", "core_1", ",", "[", "first_1", ",", "last_1", "]", "=", "partial_tucker", "(", "var_ori_1", ",", "modes", "=", "[", "2", ",", "3", "]", ",", "ranks", "=", "ranks", ",", "init", "=", "'svd'", ")", "\n", "first_1", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "first_1", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "last_1", "=", "last_1", ".", "transpose", "(", "(", "1", ",", "0", ")", ")", "\n", "last_1", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "last_1", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "\n", "assign_sess", "(", "sess", ",", "load_path_ori", ",", "layer", ",", "index", ",", "first_1", ",", "core_1", ",", "last_1", ",", "var_bias_1", ")", "\n", "\n", "for", "j", "in", "range", "(", "0", ",", "ds_size", ",", "batch_size", ")", ":", "\n", "                    ", "sess", ".", "run", "(", "increment_op", ")", "\n", "decom_bn", "=", "sess", ".", "graph", ".", "get_tensor_by_name", "(", "fc_tensor_name", ")", "\n", "F_c", "=", "sess", ".", "run", "(", "decom_bn", ")", "\n", "\n", "F_c", "=", "F_c", ".", "reshape", "(", "batch_size", ",", "-", "1", ")", "\n", "# F_o = F_o_mat[batch_size,:]", "\n", "\n", "print", "(", "\"F_c.shape: \"", ",", "F_c", ".", "shape", ")", "\n", "M_A", ",", "ma", "=", "compute_ma", "(", "batch_size", ",", "F_o_mat", "[", "j", ":", "j", "+", "batch_size", ",", ":", "]", ",", "F_c", ")", "\n", "\n", "\n", "", "mean_loss", ",", "mean_accuracy", "=", "sess", ".", "run", "(", "[", "loss_summary", ".", "mean_variable", ",", "\n", "accuracy_summary", ".", "mean_variable", "]", ")", "\n", "print", "(", "\"Rank: {}\"", ".", "format", "(", "ranks", ")", ")", "\n", "if", "ma", ">", "threshold", ":", "\n", "                    ", "write_2_config_log", "(", "config_log", ",", "layer", ",", "index", ",", "ranks_result", "[", "0", "]", ",", "ranks_result", "[", "1", "]", ")", "\n", "return", "ranks_result", "\n", "break", "\n", "", "else", ":", "\n", "                    ", "ranks_result", "=", "ranks", "\n", "output_log", ".", "write", "(", "\"Rank: {}, ma={} \\n\"", ".", "format", "(", "ranks", ",", "ma", ")", ")", "\n", "output_log", ".", "flush", "(", ")", "\n", "sess", ".", "run", "(", "[", "loss_summary", ".", "reset_variable_op", ",", "accuracy_summary", ".", "reset_variable_op", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNet.SRNet._build_model": [[10, 117], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["class", "SRNet", "(", "Model", ")", ":", "\n", "    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "128", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "128", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "128", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "256", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "256", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "256", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "512", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "512", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_112.SRNetC64DE112._build_model": [[11, 124], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "#conv_1=layers.conv2d(actv, num_outputs=59, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv_2=layers.conv2d(conv_1, num_outputs=15, padding='SAME', biases_initializer=None)", "\n", "#conv_3=layers.conv2d(conv_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "64", ",", "padding", "=", "'SAME'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv2 = layers.conv2d(actv1, num_outputs=256)", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_9.SRNetC64DE9._build_model": [[11, 124], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "#conv_1=layers.conv2d(actv, num_outputs=59, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv_2=layers.conv2d(conv_1, num_outputs=15, padding='SAME', biases_initializer=None)", "\n", "#conv_3=layers.conv2d(conv_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "64", ",", "padding", "=", "'SAME'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv1 = layers.conv2d(res, num_outputs=64)", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_10.SRNetC64DE10._build_model": [[11, 124], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "#conv_1=layers.conv2d(actv, num_outputs=59, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv_2=layers.conv2d(conv_1, num_outputs=15, padding='SAME', biases_initializer=None)", "\n", "#conv_3=layers.conv2d(conv_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "64", ",", "padding", "=", "'SAME'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv1 = layers.conv2d(res, num_outputs=128)", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_62.SRNetC64DE62._build_model": [[11, 124], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "#conv1_1=layers.conv2d(res, num_outputs=16, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv1_2=layers.conv2d(conv1_1, num_outputs=16, biases_initializer=None)", "\n", "#conv1_3=layers.conv2d(conv1_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "16", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv2 = layers.conv2d(actv1)", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_42.SRNetC64DE42._build_model": [[12, 125], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "# conv1_1=layers.conv2d(res, num_outputs=16, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "# conv1_2=layers.conv2d(conv1_1, num_outputs=16, biases_initializer=None)", "\n", "# conv1_3=layers.conv2d(conv1_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "16", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "# conv2 = layers.conv2d(actv1)", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64.SRNetC64._build_model": [[10, 117], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetDecom.SRNetDecom._build_model": [[34, 207], ["SRNetDecom.fill_rank", "tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetDecom.fill_rank"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ",", "config_log", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "self", ".", "config_log", "=", "config_log", "\n", "(", "first_layer_input_ranks", ",", "first_layer_output_ranks", ",", "second_layer_input_ranks", ",", "second_layer_output_ranks", ")", "=", "fill_rank", "(", "self", ".", "config_log", ")", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "#conv=layers.conv2d(actv) ", "\n", "                ", "conv_1", "=", "layers", ".", "conv2d", "(", "actv", ",", "num_outputs", "=", "first_layer_input_ranks", "[", "0", "]", ",", "kernel_size", "=", "1", ",", "biases_initializer", "=", "None", ")", "\n", "conv_2", "=", "layers", ".", "conv2d", "(", "conv_1", ",", "num_outputs", "=", "first_layer_output_ranks", "[", "0", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv_3", "=", "layers", ".", "conv2d", "(", "conv_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv_3", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "#conv1=layers.conv2d(actv)", "\n", "                ", "conv1_1", "=", "layers", ".", "conv2d", "(", "actv", ",", "num_outputs", "=", "first_layer_input_ranks", "[", "1", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "first_layer_output_ranks", "[", "1", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "#conv2=layers.conv2d(actv1)", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "second_layer_input_ranks", "[", "0", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "second_layer_output_ranks", "[", "0", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "#conv1=layers.conv2d(res)", "\n", "                ", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "first_layer_input_ranks", "[", "2", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "first_layer_output_ranks", "[", "2", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "#conv2=layers.conv2d(actv1)", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "second_layer_input_ranks", "[", "1", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "second_layer_output_ranks", "[", "1", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "#conv1=layers.conv2d(res)", "\n", "                ", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "first_layer_input_ranks", "[", "3", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "first_layer_output_ranks", "[", "3", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "#conv2=layers.conv2d(actv1)", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "second_layer_input_ranks", "[", "2", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "second_layer_output_ranks", "[", "2", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "#conv1=layers.conv2d(res)", "\n", "                ", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "first_layer_input_ranks", "[", "4", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "first_layer_output_ranks", "[", "4", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "#conv2=layers.conv2d(actv1)", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "second_layer_input_ranks", "[", "3", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "second_layer_output_ranks", "[", "3", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "#conv1=layers.conv2d(res)", "\n", "                ", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "first_layer_input_ranks", "[", "5", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "first_layer_output_ranks", "[", "5", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "#conv2=layers.conv2d(actv1)", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "second_layer_input_ranks", "[", "4", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "second_layer_output_ranks", "[", "4", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "#conv1 = layers.conv2d(res, num_outputs=16)", "\n", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "first_layer_input_ranks", "[", "6", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "first_layer_output_ranks", "[", "6", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "#conv2 = layers.conv2d(actv1, num_outputs=16)", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "second_layer_input_ranks", "[", "5", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "second_layer_output_ranks", "[", "5", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "#conv1 = layers.conv2d(res, num_outputs=64)", "\n", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "first_layer_input_ranks", "[", "7", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "first_layer_output_ranks", "[", "7", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "#conv2 = layers.conv2d(actv1, num_outputs=64)", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "second_layer_input_ranks", "[", "6", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "second_layer_output_ranks", "[", "6", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "#conv1 = layers.conv2d(res, num_outputs=128)", "\n", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "first_layer_input_ranks", "[", "8", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "first_layer_output_ranks", "[", "8", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "#conv2 = layers.conv2d(actv1, num_outputs=128)", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "second_layer_input_ranks", "[", "7", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "second_layer_output_ranks", "[", "7", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "first_layer_input_ranks", "[", "9", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "first_layer_output_ranks", "[", "9", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "#conv1 = layers.conv2d(res, num_outputs=256)", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "second_layer_input_ranks", "[", "8", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "second_layer_output_ranks", "[", "8", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "#conv2 = layers.conv2d(actv1, num_outputs=256)", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "#conv1 = layers.conv2d(res, num_outputs=512) ", "\n", "                ", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "first_layer_input_ranks", "[", "10", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "first_layer_output_ranks", "[", "10", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "second_layer_input_ranks", "[", "9", "]", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "second_layer_output_ranks", "[", "9", "]", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'valid'", ")", "\n", "#conv2 = layers.conv2d(actv1, num_outputs=512)", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetDecom.fill_rank": [[14, 32], ["configparser.ConfigParser", "configparser.ConfigParser.read", "range", "first_layer_input_ranks.append", "first_layer_output_ranks.append", "first_layer_input_ranks.append", "first_layer_output_ranks.append", "second_layer_input_ranks.append", "second_layer_output_ranks.append", "configparser.ConfigParser.getfloat", "configparser.ConfigParser.getfloat", "configparser.ConfigParser.getfloat", "configparser.ConfigParser.getfloat", "configparser.ConfigParser.getfloat", "configparser.ConfigParser.getfloat", "str", "str", "str", "str", "str", "str"], "function", ["None"], ["def", "fill_rank", "(", "config_log", ")", ":", "\n", "    ", "cf", "=", "configparser", ".", "ConfigParser", "(", ")", "\n", "cf", ".", "read", "(", "config_log", ")", "\n", "first_layer_input_ranks", "=", "[", "]", "\n", "first_layer_output_ranks", "=", "[", "]", "\n", "second_layer_input_ranks", "=", "[", "]", "\n", "second_layer_output_ranks", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "2", ",", "13", ")", ":", "\n", "        ", "if", "i", "==", "2", ":", "\n", "            ", "first_layer_input_ranks", ".", "append", "(", "cf", ".", "getfloat", "(", "'first_layer_input_ranks'", ",", "'layer'", "+", "str", "(", "i", ")", ")", ")", "\n", "first_layer_output_ranks", ".", "append", "(", "cf", ".", "getfloat", "(", "'first_layer_output_ranks'", ",", "'layer'", "+", "str", "(", "i", ")", ")", ")", "\n", "", "else", ":", "\n", "            ", "first_layer_input_ranks", ".", "append", "(", "cf", ".", "getfloat", "(", "'first_layer_input_ranks'", ",", "'layer'", "+", "str", "(", "i", ")", ")", ")", "\n", "first_layer_output_ranks", ".", "append", "(", "cf", ".", "getfloat", "(", "'first_layer_output_ranks'", ",", "'layer'", "+", "str", "(", "i", ")", ")", ")", "\n", "second_layer_input_ranks", ".", "append", "(", "cf", ".", "getfloat", "(", "'second_layer_input_ranks'", ",", "'layer'", "+", "str", "(", "i", ")", ")", ")", "\n", "second_layer_output_ranks", ".", "append", "(", "cf", ".", "getfloat", "(", "'second_layer_output_ranks'", ",", "'layer'", "+", "str", "(", "i", ")", ")", ")", "\n", "", "", "return", "first_layer_input_ranks", ",", "first_layer_output_ranks", ",", "second_layer_input_ranks", ",", "second_layer_output_ranks", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_92.SRNetC64DE92._build_model": [[11, 126], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "#conv_1=layers.conv2d(actv, num_outputs=59, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv_2=layers.conv2d(conv_1, num_outputs=15, padding='SAME', biases_initializer=None)", "\n", "#conv_3=layers.conv2d(conv_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "64", ",", "padding", "=", "'SAME'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv2 = layers.conv2d(actv1, num_outputs=64)", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.gen_data.gen_flip_and_rot": [[12, 60], ["len", "cover_list[].endswith", "list", "open", "f.readlines", "open", "f.readlines", "len", "len", "numpy.empty", "imageio.imread", "numpy.empty", "zip", "random.shuffle", "scipy.io.loadmat", "random.randint", "random.random.randint", "a.strip", "a.strip", "imageio.imread", "imageio.imread", "random.random", "len", "scipy.io.loadmat", "scipy.io.loadmat", "numpy.rot90", "numpy.array", "numpy.flip", "numpy.array", "numpy.rot90"], "function", ["None"], ["def", "gen_flip_and_rot", "(", "cover_root", ",", "stego_root", ",", "cover_txt", ",", "stego_txt", ",", "thread_idx", ",", "n_threads", ")", ":", "\n", "    ", "\"\"\"\n    Args:\n        cover_root, stego_root: the root paths of cover and stego which are end with '/'\n        cover_txt, stego_txt: absolute paths list of sub_dataset\n    \"\"\"", "\n", "\n", "with", "open", "(", "cover_txt", ")", "as", "f", ":", "\n", "        ", "cover_list", "=", "f", ".", "readlines", "(", ")", "\n", "cover_list", "=", "[", "cover_root", "+", "a", ".", "strip", "(", ")", "for", "a", "in", "cover_list", "]", "\n", "\n", "", "with", "open", "(", "stego_txt", ")", "as", "f", ":", "\n", "        ", "stego_list", "=", "f", ".", "readlines", "(", ")", "\n", "stego_list", "=", "[", "stego_root", "+", "a", ".", "strip", "(", ")", "for", "a", "in", "stego_list", "]", "\n", "\n", "", "nb_data", "=", "len", "(", "cover_list", ")", "\n", "assert", "len", "(", "stego_list", ")", "!=", "0", ",", "\"the stego directory '%s' is empty\"", "%", "stego_txt", "\n", "assert", "nb_data", "!=", "0", ",", "\"the cover directory '%s' is empty\"", "%", "cover_txt", "\n", "assert", "len", "(", "stego_list", ")", "==", "nb_data", ",", "\"the cover directory and \"", "+", "\"the stego directory don't \"", "+", "\"have the same number of files \"", "+", "\"respectively %d and %d\"", "%", "(", "nb_data", ",", "+", "len", "(", "stego_list", ")", ")", "\n", "load_mat", "=", "cover_list", "[", "0", "]", ".", "endswith", "(", "'.mat'", ")", "\n", "if", "load_mat", ":", "\n", "        ", "img", "=", "io", ".", "loadmat", "(", "cover_list", "[", "0", "]", ")", "[", "'im'", "]", "\n", "img_shape", "=", "img", ".", "shape", "\n", "batch", "=", "np", ".", "empty", "(", "(", "2", ",", "img_shape", "[", "0", "]", ",", "img_shape", "[", "1", "]", ",", "1", ")", ",", "dtype", "=", "'float32'", ")", "\n", "", "else", ":", "\n", "        ", "img", "=", "imageio", ".", "imread", "(", "cover_list", "[", "0", "]", ")", "\n", "img_shape", "=", "img", ".", "shape", "\n", "batch", "=", "np", ".", "empty", "(", "(", "2", ",", "img_shape", "[", "0", "]", ",", "img_shape", "[", "1", "]", ",", "1", ")", ",", "dtype", "=", "'uint8'", ")", "\n", "\n", "", "iterable", "=", "list", "(", "zip", "(", "cover_list", ",", "stego_list", ")", ")", "\n", "while", "True", ":", "\n", "        ", "shuffle", "(", "iterable", ")", "\n", "for", "cover_path", ",", "stego_path", "in", "iterable", ":", "\n", "            ", "if", "load_mat", ":", "\n", "                ", "batch", "[", "0", ",", ":", ",", ":", ",", "0", "]", "=", "io", ".", "loadmat", "(", "cover_path", ")", "[", "'im'", "]", "\n", "batch", "[", "1", ",", ":", ",", ":", ",", "0", "]", "=", "io", ".", "loadmat", "(", "stego_path", ")", "[", "'im'", "]", "\n", "", "else", ":", "\n", "                ", "batch", "[", "0", ",", ":", ",", ":", ",", "0", "]", "=", "imageio", ".", "imread", "(", "cover_path", ")", "\n", "batch", "[", "1", ",", ":", ",", ":", ",", "0", "]", "=", "imageio", ".", "imread", "(", "stego_path", ")", "\n", "", "rot", "=", "random", ".", "randint", "(", "0", ",", "3", ")", "\n", "if", "rand", "(", ")", "<", "0.5", ":", "\n", "                ", "yield", "[", "np", ".", "rot90", "(", "batch", ",", "rot", ",", "axes", "=", "[", "1", ",", "2", "]", ")", ",", "np", ".", "array", "(", "[", "0", ",", "1", "]", ",", "dtype", "=", "'uint8'", ")", "]", "\n", "", "else", ":", "\n", "                ", "yield", "[", "np", ".", "flip", "(", "np", ".", "rot90", "(", "batch", ",", "rot", ",", "axes", "=", "[", "1", ",", "2", "]", ")", ",", "axis", "=", "2", ")", ",", "np", ".", "array", "(", "[", "0", ",", "1", "]", ",", "dtype", "=", "'uint8'", ")", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.gen_data.gen_valid": [[62, 107], ["len", "cover_list[].endswith", "numpy.array", "open", "f.readlines", "open", "f.readlines", "len", "len", "numpy.empty", "imageio.imread", "numpy.empty", "list", "scipy.io.loadmat", "zip", "a.strip", "a.strip", "len", "imageio.imread", "imageio.imread", "scipy.io.loadmat", "scipy.io.loadmat"], "function", ["None"], ["", "", "", "", "def", "gen_valid", "(", "cover_root", ",", "stego_root", ",", "cover_txt", ",", "stego_txt", ",", "thread_idx", ",", "n_threads", ")", ":", "\n", "    ", "\"\"\"\n    Args:\n        cover_root, stego_root: the root paths of cover and stego which are end with '/'\n        cover_txt, stego_txt: absolute paths list of sub_dataset\n    \"\"\"", "\n", "\n", "with", "open", "(", "cover_txt", ")", "as", "f", ":", "\n", "        ", "cover_list", "=", "f", ".", "readlines", "(", ")", "\n", "cover_list", "=", "[", "cover_root", "+", "a", ".", "strip", "(", ")", "for", "a", "in", "cover_list", "]", "\n", "\n", "", "with", "open", "(", "stego_txt", ")", "as", "f", ":", "\n", "        ", "stego_list", "=", "f", ".", "readlines", "(", ")", "\n", "stego_list", "=", "[", "stego_root", "+", "a", ".", "strip", "(", ")", "for", "a", "in", "stego_list", "]", "\n", "\n", "", "nb_data", "=", "len", "(", "cover_list", ")", "\n", "assert", "len", "(", "stego_list", ")", "!=", "0", ",", "\"the stego directory '%s' is empty\"", "%", "stego_txt", "\n", "assert", "nb_data", "!=", "0", ",", "\"the cover directory '%s' is empty\"", "%", "cover_txt", "\n", "assert", "len", "(", "stego_list", ")", "==", "nb_data", ",", "\"the cover directory and \"", "+", "\"the stego directory don't \"", "+", "\"have the same number of files \"", "+", "\"respectively %d and %d\"", "%", "(", "nb_data", ",", "len", "(", "stego_list", ")", ")", "\n", "load_mat", "=", "cover_list", "[", "0", "]", ".", "endswith", "(", "'.mat'", ")", "\n", "if", "load_mat", ":", "\n", "        ", "img", "=", "io", ".", "loadmat", "(", "cover_list", "[", "0", "]", ")", "[", "'im'", "]", "\n", "#img = h5py.File(cover_list[0])['im2']", "\n", "img_shape", "=", "img", ".", "shape", "\n", "batch", "=", "np", ".", "empty", "(", "(", "2", ",", "img_shape", "[", "0", "]", ",", "img_shape", "[", "1", "]", ",", "1", ")", ",", "dtype", "=", "'float32'", ")", "\n", "", "else", ":", "\n", "        ", "img", "=", "imageio", ".", "imread", "(", "cover_list", "[", "0", "]", ")", "\n", "img_shape", "=", "img", ".", "shape", "\n", "batch", "=", "np", ".", "empty", "(", "(", "2", ",", "img_shape", "[", "0", "]", ",", "img_shape", "[", "1", "]", ",", "1", ")", ",", "dtype", "=", "'uint8'", ")", "\n", "", "img_shape", "=", "img", ".", "shape", "\n", "\n", "labels", "=", "np", ".", "array", "(", "[", "0", ",", "1", "]", ",", "dtype", "=", "'uint8'", ")", "\n", "while", "True", ":", "\n", "        ", "for", "cover_path", ",", "stego_path", "in", "list", "(", "zip", "(", "cover_list", ",", "stego_list", ")", ")", ":", "\n", "            ", "if", "load_mat", ":", "\n", "                ", "batch", "[", "0", ",", ":", ",", ":", ",", "0", "]", "=", "io", ".", "loadmat", "(", "cover_path", ")", "[", "'im'", "]", "\n", "batch", "[", "1", ",", ":", ",", ":", ",", "0", "]", "=", "io", ".", "loadmat", "(", "stego_path", ")", "[", "'im'", "]", "\n", "", "else", ":", "\n", "                ", "batch", "[", "0", ",", ":", ",", ":", ",", "0", "]", "=", "imageio", ".", "imread", "(", "cover_path", ")", "\n", "batch", "[", "1", ",", ":", ",", ":", ",", "0", "]", "=", "imageio", ".", "imread", "(", "stego_path", ")", "\n", "", "yield", "[", "batch", ",", "labels", "]", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_82.SRNetC64DE82._build_model": [[11, 124], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "#conv_1=layers.conv2d(actv, num_outputs=59, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv_2=layers.conv2d(conv_1, num_outputs=15, padding='SAME', biases_initializer=None)", "\n", "#conv_3=layers.conv2d(conv_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "16", ",", "padding", "=", "'SAME'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv2 = layers.conv2d(actv1)", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_122.SRNetC64DE122._build_model": [[11, 124], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "#conv_1=layers.conv2d(actv, num_outputs=59, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv_2=layers.conv2d(conv_1, num_outputs=15, padding='SAME', biases_initializer=None)", "\n", "#conv_3=layers.conv2d(conv_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "64", ",", "padding", "=", "'SAME'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv2 = layers.conv2d(actv1, num_outputs=512)", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_4.SRNetC64DE4._build_model": [[12, 125], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "16", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv1 = layers.conv2d(res)", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "#conv2_1=layers.conv2d(actv1, num_outputs=16, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv2_2=layers.conv2d(conv2_1, num_outputs=16, biases_initializer=None)", "\n", "#conv2_3=layers.conv2d(conv2_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.detect_srnet_cand.get_floats": [[12, 22], ["configparser.ConfigParser", "configparser.ConfigParser.read", "configparser.ConfigParser.getfloat", "configparser.ConfigParser.getfloat", "configparser.ConfigParser.getfloat", "configparser.ConfigParser.getfloat", "str", "str", "str", "str"], "function", ["None"], ["def", "get_floats", "(", "config_log", ",", "layer", ",", "index", ")", ":", "\n", "    ", "cf", "=", "configparser", ".", "ConfigParser", "(", ")", "\n", "cf", ".", "read", "(", "config_log", ")", "\n", "if", "index", "==", "1", ":", "\n", "        ", "ir_ori", "=", "cf", ".", "getfloat", "(", "'first_layer_input_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ")", "\n", "orr_ori", "=", "cf", ".", "getfloat", "(", "'first_layer_output_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ")", "\n", "", "else", ":", "\n", "        ", "ir_ori", "=", "cf", ".", "getfloat", "(", "'second_layer_input_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ")", "\n", "orr_ori", "=", "cf", ".", "getfloat", "(", "'second_layer_output_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ")", "\n", "", "return", "ir_ori", ",", "orr_ori", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.detect_srnet_cand.inspect_decom_conv_cand": [[30, 125], ["print", "output_log.write", "output_log.write", "utils.get_decom_tensor_name", "tensorflow.contrib.framework.load_variable", "tensorflow.contrib.framework.load_variable", "tensorflow.reset_default_graph", "GeneratorRunner", "GeneratorRunner.get_batched_inputs", "model_class", "model_class._build_model", "model_class._build_losses", "average_summary", "average_summary", "tensorflow.group", "tensorflow.group", "tensorflow.train.Saver", "utils.write_2_config_log", "tensorflow.global_variables_initializer", "tensorflow.local_variables_initializer", "tensorflow.Session", "sess.run", "GeneratorRunner.start_threads", "tensorly.decomposition.partial_tucker", "numpy.float32", "np.float32.transpose", "numpy.float32", "utils.assign_sess", "range", "sess.run", "time.strftime", "float", "float", "float", "float", "numpy.expand_dims", "numpy.expand_dims", "sess.run", "sess.graph.get_tensor_by_name", "sess.run", "F_c.reshape.reshape", "print", "utils.compute_ma", "output_log.write", "output_log.flush", "print", "print", "str", "numpy.expand_dims", "numpy.expand_dims", "utils.write_2_config_log", "detect_srnet_cand.get_floats", "utils.write_2_config_log", "utils.write_2_config_log", "str", "np.float32.copy", "np.float32.copy", "utils.write_2_config_log", "str", "str", "str"], "function", ["home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.get_decom_tensor_name", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.get_batched_inputs", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_32.SRNetC64DE32._build_model", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.Model._build_losses", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.write_2_config_log", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.start_threads", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.assign_sess", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.compute_ma", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.write_2_config_log", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.detect_srnet_cand.get_floats", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.write_2_config_log", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.write_2_config_log", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.write_2_config_log"], ["def", "inspect_decom_conv_cand", "(", "model_class", ",", "gen", ",", "batch_size", ",", "ds_size", ",", "load_path_ori", ",", "layer", ",", "index", ",", "output_log", ",", "F_o_mat", ",", "ma_threshold", ",", "ranks_result", ",", "err", ",", "cand", ",", "config_log", ")", ":", "\n", "\n", "    ", "print", "(", "\"Ready to traverse shrinking rate in l%d-conv%d\"", "%", "(", "layer", ",", "index", ")", ")", "\n", "output_log", ".", "write", "(", "'--------layer'", "+", "str", "(", "layer", ")", "+", "'--------'", "+", "time", ".", "strftime", "(", "\"%Y%m%d-%H%M%S\"", ")", "+", "'\\n'", ")", "\n", "output_log", ".", "write", "(", "'------'", "+", "str", "(", "index", ")", "+", "'------'", "+", "'\\n'", ")", "\n", "\n", "var_name", ",", "var_name_bias", ",", "fc_tensor_name", "=", "get_decom_tensor_name", "(", "layer", ",", "index", ")", "\n", "var_ori_1", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path_ori", ",", "var_name", ")", "\n", "var_bias_1", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path_ori", ",", "var_name_bias", ")", "\n", "if", "layer", "==", "2", ":", "\n", "        ", "threshold", "=", "ma_threshold", "[", "0", "]", "\n", "", "else", ":", "\n", "        ", "threshold", "=", "ma_threshold", "[", "(", "layer", "-", "3", ")", "*", "2", "+", "index", "]", "\n", "", "err", "=", "0.001", "\n", "ir", "=", "ranks_result", "[", "0", "]", "\n", "orr", "=", "ranks_result", "[", "1", "]", "\n", "while", "1", ":", "\n", "        ", "if", "layer", "==", "2", "or", "layer", "==", "9", "and", "index", "==", "1", ":", "\n", "            ", "write_2_config_log", "(", "config_log", ",", "layer", ",", "index", ",", "ir", ",", "orr", ")", "\n", "break", "\n", "", "tf", ".", "reset_default_graph", "(", ")", "\n", "runner", "=", "GeneratorRunner", "(", "gen", ",", "batch_size", "*", "10", ")", "\n", "img_batch", ",", "label_batch", "=", "runner", ".", "get_batched_inputs", "(", "batch_size", ")", "\n", "model", "=", "model_class", "(", "False", ",", "'NHWC'", ")", "\n", "model", ".", "_build_model", "(", "img_batch", ")", "\n", "loss", ",", "accuracy", "=", "model", ".", "_build_losses", "(", "label_batch", ")", "\n", "loss_summary", "=", "average_summary", "(", "loss", ",", "'loss'", ",", "float", "(", "ds_size", ")", "/", "float", "(", "batch_size", ")", ")", "\n", "accuracy_summary", "=", "average_summary", "(", "accuracy", ",", "'accuracy'", ",", "float", "(", "ds_size", ")", "/", "float", "(", "batch_size", ")", ")", "\n", "increment_op", "=", "tf", ".", "group", "(", "loss_summary", ".", "increment_op", ",", "accuracy_summary", ".", "increment_op", ")", "\n", "init_op", "=", "tf", ".", "group", "(", "tf", ".", "global_variables_initializer", "(", ")", ",", "\n", "tf", ".", "local_variables_initializer", "(", ")", ")", "\n", "saver", "=", "tf", ".", "train", ".", "Saver", "(", "max_to_keep", "=", "10000", ")", "\n", "if", "cand", "==", "1", ":", "\n", "            ", "ir", "=", "ir", "+", "1", "\n", "orr", "=", "orr", "-", "1", "\n", "", "else", ":", "\n", "            ", "ir", "=", "ir", "-", "1", "\n", "orr", "=", "orr", "+", "1", "\n", "", "with", "tf", ".", "Session", "(", ")", "as", "sess", ":", "\n", "            ", "sess", ".", "run", "(", "init_op", ")", "\n", "runner", ".", "start_threads", "(", "sess", ",", "1", ")", "\n", "ranks_1", "=", "[", "]", "\n", "ranks_1", "=", "[", "ir", ",", "orr", "]", "\n", "core", ",", "[", "first", ",", "last", "]", "=", "partial_tucker", "(", "var_ori_1", ",", "modes", "=", "[", "2", ",", "3", "]", ",", "ranks", "=", "ranks_1", ",", "init", "=", "'svd'", ")", "\n", "first", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "first", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "last", "=", "last", ".", "transpose", "(", "(", "1", ",", "0", ")", ")", "\n", "last", "=", "np", ".", "float32", "(", "np", ".", "expand_dims", "(", "np", ".", "expand_dims", "(", "last", ".", "copy", "(", ")", ",", "axis", "=", "0", ")", ",", "axis", "=", "0", ")", ")", "\n", "assign_sess", "(", "sess", ",", "load_path_ori", ",", "layer", ",", "index", ",", "first", ",", "core", ",", "last", ",", "var_bias_1", ")", "\n", "\n", "for", "j", "in", "range", "(", "0", ",", "ds_size", ",", "batch_size", ")", ":", "\n", "                ", "sess", ".", "run", "(", "increment_op", ")", "\n", "# laod the decom_conv+bn from decom_srnet_layerX and get the feature map", "\n", "decom_bn", "=", "sess", ".", "graph", ".", "get_tensor_by_name", "(", "fc_tensor_name", ")", "\n", "F_c", "=", "sess", ".", "run", "(", "decom_bn", ")", "\n", "\n", "F_c", "=", "F_c", ".", "reshape", "(", "batch_size", ",", "-", "1", ")", "\n", "# F_o = np.zeros((1,F_o_mat.shape[1]))", "\n", "# F_o = F_o_mat[batch_size,:]", "\n", "\n", "print", "(", "\"F_c.shape: \"", ",", "F_c", ".", "shape", ")", "\n", "\n", "M_A", ",", "ma", "=", "compute_ma", "(", "batch_size", ",", "F_o_mat", ",", "F_c", ")", "\n", "\n", "\n", "\n", "", "if", "ma", ">", "threshold", "+", "err", ":", "\n", "                ", "if", "cand", "==", "1", ":", "\n", "                    ", "write_2_config_log", "(", "config_log", ",", "layer", ",", "index", ",", "ir", "-", "1", ",", "orr", "+", "1", ")", "\n", "", "else", ":", "\n", "                    ", "ir_ori", ",", "orr_ori", "=", "get_floats", "(", "config_log", ",", "layer", ",", "index", ")", "\n", "if", "ir_ori", "*", "orr_ori", ">", "(", "ir", "+", "1", ")", "*", "(", "orr", "-", "1", ")", ":", "\n", "                        ", "write_2_config_log", "(", "config_log", ",", "layer", ",", "index", ",", "ir", "+", "1", ",", "orr", "-", "1", ")", "\n", "", "", "break", "\n", "", "else", ":", "\n", "                ", "output_log", ".", "write", "(", "'input_rank '", "+", "str", "(", "ir", ")", "+", "' output_rank '", "+", "str", "(", "orr", ")", "+", "',ma '", "+", "str", "(", "ma", ")", "+", "'\\n'", ")", "\n", "output_log", ".", "flush", "(", ")", "\n", "print", "(", "'ma '", ",", "ma", ")", "\n", "print", "(", "'ranks '", ",", "ranks_1", ")", "\n", "", "if", "cand", "==", "1", ":", "\n", "                ", "if", "ir", "==", "var_ori_1", ".", "shape", "[", "2", "]", "or", "orr", "==", "1", ":", "\n", "                    ", "write_2_config_log", "(", "config_log", ",", "layer", ",", "index", ",", "ir", ",", "orr", ")", "\n", "break", "\n", "", "", "else", ":", "\n", "                ", "if", "ir", "==", "1", "or", "orr", "==", "var_ori_1", ".", "shape", "[", "3", "]", ":", "\n", "                    ", "write_2_config_log", "(", "config_log", ",", "layer", ",", "index", ",", "ir", ",", "orr", ")", "\n", "break", "\n", "\n", "\n", "#mat_col = mat_col + 1", "\n", "", "", "mean_loss", ",", "mean_accuracy", "=", "sess", ".", "run", "(", "[", "loss_summary", ".", "mean_variable", ",", "accuracy_summary", ".", "mean_variable", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_8.SRNetC64DE8._build_model": [[11, 124], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "#conv_1=layers.conv2d(actv, num_outputs=59, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv_2=layers.conv2d(conv_1, num_outputs=15, padding='SAME', biases_initializer=None)", "\n", "#conv_3=layers.conv2d(conv_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "16", ",", "padding", "=", "'SAME'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv1 = layers.conv2d(res)", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_12.SRNetC64DE12._build_model": [[11, 124], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "#conv_1=layers.conv2d(actv, num_outputs=59, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv_2=layers.conv2d(conv_1, num_outputs=15, padding='SAME', biases_initializer=None)", "\n", "#conv_3=layers.conv2d(conv_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "64", ",", "padding", "=", "'SAME'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv1 = layers.conv2d(res, num_outputs=512)", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_7.SRNetC64DE7._build_model": [[12, 125], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1_1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "16", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv1 = layers.conv2d(res)", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "#conv2_1=layers.conv2d(actv1, num_outputs=16, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv2_2=layers.conv2d(conv2_1, num_outputs=16, biases_initializer=None)", "\n", "#conv2_3=layers.conv2d(conv2_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.Model.__init__": [[22, 24], ["utils_multistep_lr.Model.__init__"], "methods", ["home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.tf_roc.__init__"], ["def", "__init__", "(", "self", ",", "is_training", "=", "None", ",", "data_format", "=", "'NCHW'", ")", ":", "\n", "        ", "super", "(", "Model", ",", "self", ")", ".", "__init__", "(", "is_training", ",", "data_format", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.Model._build_predict": [[25, 32], ["tensorflow.cast", "tensorflow.variable_scope", "tensorflow.nn.softmax"], "methods", ["None"], ["", "def", "_build_predict", "(", "self", ",", "labels", ")", ":", "\n", "        ", "self", ".", "labels", "=", "tf", ".", "cast", "(", "labels", ",", "tf", ".", "int64", ")", "\n", "with", "tf", ".", "variable_scope", "(", "'prob'", ")", ":", "\n", "           ", "test_result", "=", "tf", ".", "nn", ".", "softmax", "(", "self", ".", "outputs", ")", "\n", "self", ".", "predict", "=", "test_result", "[", ":", ",", "1", "]", "\n", "\n", "", "return", "self", ".", "labels", ",", "self", ".", "predict", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.tf_roc.__init__": [[300, 341], ["print", "utils.tf_roc.calc", "open", "open.readline", "open.close", "len", "len", "open.readline.replace", "open.readline.split", "utils.tf_roc.predicts.append", "utils.tf_roc.labels.append", "open.readline", "isinstance", "list", "isinstance", "list", "float", "int", "eval"], "methods", ["home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.tf_roc.calc"], ["    ", "def", "__init__", "(", "self", ",", "predicts", ",", "labels", ",", "threshold_num", ",", "predict_label_file", "=", "None", ")", ":", "\n", "        ", "'''predict_score,label\n        the predict_score should be between 0 and 1\n        the label should be 0 or 1\n        threshold_num: number of threshold will plot'''", "\n", "\n", "self", ".", "predicts", "=", "[", "]", "\n", "self", ".", "labels", "=", "[", "]", "\n", "self", ".", "total", "=", "0", "\n", "\n", "if", "predict_label_file", "is", "not", "None", ":", "\n", "            ", "fd", "=", "open", "(", "predict_label_file", ")", "\n", "fdl", "=", "fd", ".", "readline", "(", ")", "\n", "while", "len", "(", "fdl", ")", ">", "0", ":", "\n", "                ", "fdl", "=", "fdl", ".", "replace", "(", "'\\n'", ",", "''", ")", "\n", "val", "=", "fdl", ".", "split", "(", "','", ")", "\n", "# val[2] = val[2].split('\\\\')[0]", "\n", "self", ".", "predicts", ".", "append", "(", "float", "(", "val", "[", "1", "]", ")", ")", "\n", "self", ".", "labels", ".", "append", "(", "True", "if", "int", "(", "eval", "(", "val", "[", "2", "]", ")", ")", "==", "1", "else", "False", ")", "\n", "fdl", "=", "fd", ".", "readline", "(", ")", "\n", "self", ".", "total", "+=", "1", "\n", "", "fd", ".", "close", "(", ")", "\n", "", "else", ":", "\n", "            ", "if", "not", "isinstance", "(", "predicts", ",", "list", ")", ":", "\n", "                ", "predicts", "=", "list", "(", "predicts", ")", "\n", "", "if", "not", "isinstance", "(", "labels", ",", "list", ")", ":", "\n", "                ", "labels", "=", "list", "(", "labels", ")", "\n", "", "self", ".", "predicts", "=", "predicts", "\n", "self", ".", "labels", "=", "labels", "\n", "self", ".", "total", "=", "len", "(", "self", ".", "labels", ")", "\n", "", "print", "(", "self", ".", "total", ")", "\n", "self", ".", "threshold_num", "=", "threshold_num", "\n", "self", ".", "trues", "=", "0", "# total of True labels", "\n", "self", ".", "fpr", "=", "[", "]", "# false positive rate", "\n", "self", ".", "tpr", "=", "[", "]", "# true positive rate", "\n", "self", ".", "ths", "=", "[", "]", "# thresholds", "\n", "self", ".", "tn", "=", "[", "]", "# true negative", "\n", "self", ".", "tp", "=", "[", "]", "# true positive", "\n", "self", ".", "fp", "=", "[", "]", "# false positive", "\n", "self", ".", "fn", "=", "[", "]", "# false negative", "\n", "self", ".", "calc", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.tf_roc.calc": [[342, 358], ["range", "utils.tf_roc._calc_once", "utils.tf_roc.fpr.append", "utils.tf_roc.tpr.append", "utils.tf_roc.ths.append", "utils.tf_roc.tn.append", "utils.tf_roc.tp.append", "utils.tf_roc.fp.append", "utils.tf_roc.fn.append"], "methods", ["home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.tf_roc._calc_once"], ["", "def", "calc", "(", "self", ")", ":", "\n", "        ", "for", "label", "in", "self", ".", "labels", ":", "\n", "            ", "if", "label", ":", "\n", "                ", "self", ".", "trues", "+=", "1", "\n", "# print 'self.trues:', self.trues", "\n", "", "", "threshold_step", "=", "1.", "/", "self", ".", "threshold_num", "\n", "for", "t", "in", "range", "(", "self", ".", "threshold_num", "+", "1", ")", ":", "\n", "            ", "th", "=", "1", "-", "threshold_step", "*", "t", "\n", "tn", ",", "tp", ",", "fp", ",", "fn", ",", "fpr", ",", "tpr", "=", "self", ".", "_calc_once", "(", "th", ")", "\n", "self", ".", "fpr", ".", "append", "(", "fpr", ")", "\n", "self", ".", "tpr", ".", "append", "(", "tpr", ")", "\n", "self", ".", "ths", ".", "append", "(", "th", ")", "\n", "self", ".", "tn", ".", "append", "(", "tn", ")", "\n", "self", ".", "tp", ".", "append", "(", "tp", ")", "\n", "self", ".", "fp", ".", "append", "(", "fp", ")", "\n", "self", ".", "fn", ".", "append", "(", "fn", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.tf_roc._calc_once": [[359, 385], ["range", "float", "float"], "methods", ["None"], ["", "", "def", "_calc_once", "(", "self", ",", "t", ")", ":", "\n", "        ", "fp", "=", "0", "\n", "tp", "=", "0", "\n", "tn", "=", "0", "\n", "fn", "=", "0", "\n", "# print 't:', t", "\n", "for", "i", "in", "range", "(", "self", ".", "total", ")", ":", "\n", "# print 'labels:', self.labels[i], ' predicts:', self.predicts[i]", "\n", "            ", "if", "not", "self", ".", "labels", "[", "i", "]", ":", "# when labels[i] == 0 or false", "\n", "                ", "if", "self", ".", "predicts", "[", "i", "]", ">=", "t", ":", "\n", "                    ", "fp", "+=", "1", "# false positive", "\n", "# print 'fp == ', 'labels:', self.labels[i], ' predicts:', self.predicts[i]", "\n", "", "else", ":", "\n", "                    ", "tn", "+=", "1", "# true negative", "\n", "# print 'tn == ', 'labels:', self.labels[i], ' predicts:', self.predicts[i]", "\n", "", "", "elif", "self", ".", "labels", "[", "i", "]", ":", "\n", "                ", "if", "self", ".", "predicts", "[", "i", "]", ">=", "t", ":", "# when labels[i] == 1 or true", "\n", "                    ", "tp", "+=", "1", "# true positive", "\n", "# print 'tp == ', 'labels:', self.labels[i], ' predicts:', self.predicts[i]", "\n", "", "else", ":", "\n", "                    ", "fn", "+=", "1", "# false negative", "\n", "# print 'fn == ', 'labels:', self.labels[i], ' predicts:', self.predicts[i]", "\n", "", "", "", "fpr", "=", "fp", "/", "float", "(", "fp", "+", "tn", ")", "# precision", "\n", "tpr", "=", "tp", "/", "float", "(", "self", ".", "trues", ")", "\n", "\n", "return", "tn", ",", "tp", ",", "fp", ",", "fn", ",", "fpr", ",", "tpr", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.tf_roc.get_pmd": [[386, 414], ["bisect.bisect_left", "print", "print", "print", "numpy.polyfit", "print", "numpy.polyval", "part_fpr.index"], "methods", ["None"], ["", "def", "get_pmd", "(", "self", ",", "thresh", ")", ":", "\n", "# thresh is pre-defined FPR", "\n", "        ", "tpr", "=", "self", ".", "tpr", "\n", "fpr", "=", "self", ".", "fpr", "\n", "\n", "#  fnr = 1 - self.tpr", "\n", "\n", "if", "(", "thresh", ">=", "fpr", "[", "-", "1", "]", ")", ":", "\n", "            ", "print", "(", "'warning !!!'", ")", "\n", "return", "1", "-", "tpr", "[", "-", "1", "]", "\n", "", "elif", "thresh", "<=", "fpr", "[", "0", "]", ":", "\n", "            ", "print", "(", "'warning !!!'", ")", "\n", "return", "1", "-", "tpr", "[", "0", "]", "\n", "", "pos", "=", "bisect_left", "(", "fpr", ",", "thresh", ")", "\n", "part_fpr", "=", "[", "fpr", "[", "pos", "-", "1", "]", ",", "fpr", "[", "pos", "]", "]", "\n", "part_pos", "=", "[", "pos", "-", "1", ",", "pos", "]", "\n", "part_tpr", "=", "[", "tpr", "[", "pos", "-", "1", "]", ",", "tpr", "[", "pos", "]", "]", "\n", "if", "thresh", "in", "part_fpr", ":", "\n", "            ", "sp_pos", "=", "part_pos", "[", "part_fpr", ".", "index", "(", "thresh", ")", "]", "\n", "pmd", "=", "1.0", "-", "tpr", "[", "sp_pos", "]", "\n", "", "else", ":", "\n", "            ", "assert", "thresh", "in", "[", "0.05", "]", ",", "\"type error get P_MD(%f)\"", "%", "(", "thresh", ")", "\n", "f1", "=", "np", ".", "polyfit", "(", "part_fpr", ",", "part_tpr", ",", "1", ")", "\n", "pmd", "=", "1", "-", "np", ".", "polyval", "(", "f1", ",", "thresh", ")", "\n", "", "print", "(", "'%.2f part_tpr: %s'", "%", "(", "thresh", ",", "part_tpr", ")", ")", "\n", "print", "(", "'%.2f part_fpr: %s'", "%", "(", "thresh", ",", "part_fpr", ")", ")", "\n", "\n", "return", "pmd", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.tf_roc.get_pfa": [[415, 447], ["bisect.bisect_left", "print", "print", "print", "numpy.polyfit", "numpy.polyval", "print", "part_tpr.index"], "methods", ["None"], ["", "def", "get_pfa", "(", "self", ",", "thresh", ")", ":", "\n", "# args: thresh is pre-defined TPR", "\n", "\n", "        ", "tpr", "=", "self", ".", "tpr", "\n", "fpr", "=", "self", ".", "fpr", "\n", "\n", "if", "(", "thresh", ">=", "tpr", "[", "-", "1", "]", ")", ":", "\n", "            ", "print", "(", "'warning !!!'", ")", "\n", "return", "fpr", "[", "-", "1", "]", "\n", "", "elif", "thresh", "<=", "tpr", "[", "0", "]", ":", "\n", "            ", "print", "(", "'warning !!!'", ")", "\n", "return", "fpr", "[", "0", "]", "\n", "", "pos", "=", "bisect_left", "(", "tpr", ",", "thresh", ")", "\n", "part_tpr", "=", "[", "tpr", "[", "pos", "-", "1", "]", ",", "tpr", "[", "pos", "]", "]", "\n", "part_pos", "=", "[", "pos", "-", "1", ",", "pos", "]", "\n", "part_fpr", "=", "[", "fpr", "[", "pos", "-", "1", "]", ",", "fpr", "[", "pos", "]", "]", "\n", "if", "thresh", "in", "part_tpr", ":", "\n", "            ", "sp_pos", "=", "part_pos", "[", "part_tpr", ".", "index", "(", "thresh", ")", "]", "\n", "pfa", "=", "fpr", "[", "sp_pos", "]", "\n", "", "else", ":", "\n", "# pfa = get_FA(part_tpr, part_fpr, thresh)", "\n", "            ", "assert", "thresh", "in", "[", "0.3", ",", "0.5", ",", "0.7", "]", ",", "\"type error get P_FA(%f)\"", "%", "(", "thresh", ")", "\n", "# p1 = np.poly1d(f1)", "\n", "\n", "f1", "=", "np", ".", "polyfit", "(", "part_tpr", ",", "part_fpr", ",", "1", ")", "\n", "pfa", "=", "np", ".", "polyval", "(", "f1", ",", "thresh", ")", "\n", "\n", "", "print", "(", "'%.2f part_tpr: %s'", "%", "(", "thresh", ",", "part_tpr", ")", ")", "\n", "print", "(", "'%.2f part_fpr: %s'", "%", "(", "thresh", ",", "part_fpr", ")", ")", "\n", "# print ('P_FA(%f): %f'%(thresh, pfa))", "\n", "\n", "return", "pfa", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.train": [[33, 222], ["tensorflow.reset_default_graph", "GeneratorRunner", "GeneratorRunner", "tensorflow.get_variable", "queueSelection", "model_class", "model_class._build_predict", "model_class._build_losses", "utils_multistep_lr.average_summary", "utils_multistep_lr.average_summary", "utils_multistep_lr.average_summary", "utils_multistep_lr.average_summary", "tensorflow.get_variable", "tensorflow.assign", "tensorflow.train.piecewise_constant", "tensorflow.summary.scalar", "optimizer.", "optimizer.minimize", "tensorflow.group", "tensorflow.group", "tensorflow.group", "tensorflow.train.Saver", "tensorflow.assign", "tensorflow.assign", "tensorflow.get_variable", "tensorflow.group", "tensorflow.group", "tensorflow.cast", "model_class._build_model", "model_class._build_model", "tensorflow.global_variables_initializer", "tensorflow.local_variables_initializer", "tensorflow.Session", "sess.run", "GeneratorRunner.start_threads", "GeneratorRunner.start_threads", "tensorflow.summary.FileWriter", "sess.run", "sess.run", "sess.run", "time.time", "range", "sess.run", "print", "print", "utils_multistep_lr.average_summary.add_summary", "utils_multistep_lr.average_summary.add_summary", "sess.run", "print", "os.path.join", "numpy.array", "numpy.array", "range", "tensorflow.assign", "tensorflow.assign", "tensorflow.assign", "tensorflow.assign", "float", "float", "float", "float", "tensorflow.constant_initializer", "open", "f.write", "f.write", "tf.train.Saver.restore", "sess.run", "sess.run", "os.path.exists", "os.makedirs", "tf.train.Saver.save", "sess.run", "time.time", "utils_multistep_lr.average_summary.add_summary", "utils_multistep_lr.average_summary.add_summary", "sess.run", "tf.summary.FileWriter.add_summary", "sess.run", "range", "sess.run", "sklearn.metrics.roc_auc_score", "utils_multistep_lr.average_summary.add_summary", "utils_multistep_lr.average_summary.add_summary", "print", "print", "sess.run", "tf.train.Saver.save", "sess.run", "sess.run", "numpy.concatenate", "numpy.concatenate", "utils.alaska_weighted_auc", "open", "f.write", "open", "f.write", "str", "str", "str", "str", "str", "time.strftime", "str", "str", "str", "time.strftime"], "function", ["home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.queueSelection", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.Model._build_predict", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.Model._build_losses", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_32.SRNetC64DE32._build_model", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_32.SRNetC64DE32._build_model", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.start_threads", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.start_threads", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.average_summary.add_summary", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.average_summary.add_summary", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.average_summary.add_summary", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.average_summary.add_summary", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.average_summary.add_summary", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.average_summary.add_summary", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.average_summary.add_summary", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.alaska_weighted_auc"], ["", "", "def", "train", "(", "model_class", ",", "train_gen", ",", "valid_gen", ",", "train_batch_size", ",", "valid_batch_size", ",", "valid_ds_size", ",", "optimizer", ",", "boundaries", ",", "values", ",", "train_interval", ",", "valid_interval", ",", "max_iter", ",", "save_interval", ",", "log_path", ",", "acc_log_path", ",", "num_runner_threads", "=", "1", ",", "load_path", "=", "None", ",", "config_log", "=", "None", ",", "wauc_flag", "=", "False", ",", "transfer_flag", "=", "False", ")", ":", "\n", "    ", "tf", ".", "reset_default_graph", "(", ")", "\n", "train_runner", "=", "GeneratorRunner", "(", "train_gen", ",", "train_batch_size", "*", "10", ")", "\n", "valid_runner", "=", "GeneratorRunner", "(", "valid_gen", ",", "valid_batch_size", "*", "10", ")", "\n", "is_training", "=", "tf", ".", "get_variable", "(", "'is_training'", ",", "dtype", "=", "tf", ".", "bool", ",", "initializer", "=", "True", ",", "trainable", "=", "False", ")", "\n", "if", "train_batch_size", "==", "valid_batch_size", ":", "\n", "        ", "batch_size", "=", "train_batch_size", "\n", "disable_training_op", "=", "tf", ".", "assign", "(", "is_training", ",", "False", ")", "\n", "enable_training_op", "=", "tf", ".", "assign", "(", "is_training", ",", "True", ")", "\n", "", "else", ":", "\n", "        ", "batch_size", "=", "tf", ".", "get_variable", "(", "'batch_size'", ",", "dtype", "=", "tf", ".", "int32", ",", "initializer", "=", "train_batch_size", ",", "trainable", "=", "False", ",", "collections", "=", "[", "tf", ".", "GraphKeys", ".", "LOCAL_VARIABLES", "]", ")", "\n", "disable_training_op", "=", "tf", ".", "group", "(", "tf", ".", "assign", "(", "is_training", ",", "False", ")", ",", "tf", ".", "assign", "(", "batch_size", ",", "valid_batch_size", ")", ")", "\n", "enable_training_op", "=", "tf", ".", "group", "(", "tf", ".", "assign", "(", "is_training", ",", "True", ")", ",", "tf", ".", "assign", "(", "batch_size", ",", "train_batch_size", ")", ")", "\n", "", "img_batch", ",", "label_batch", "=", "queueSelection", "(", "[", "valid_runner", ",", "train_runner", "]", ",", "tf", ".", "cast", "(", "is_training", ",", "tf", ".", "int32", ")", ",", "batch_size", ")", "\n", "\n", "model", "=", "model_class", "(", "is_training", ",", "'NHWC'", ")", "\n", "if", "model_class", ".", "__name__", "!=", "'SRNetDecom'", ":", "\n", "        ", "model", ".", "_build_model", "(", "img_batch", ")", "\n", "", "else", ":", "\n", "        ", "assert", "config_log", "!=", "None", ",", "'SRNetDecom. config_log == None !'", "\n", "model", ".", "_build_model", "(", "img_batch", ",", "config_log", ")", "\n", "\n", "", "labels", ",", "predicts", "=", "model", ".", "_build_predict", "(", "label_batch", ")", "\n", "\n", "loss", ",", "accuracy", "=", "model", ".", "_build_losses", "(", "label_batch", ")", "\n", "train_loss_s", "=", "average_summary", "(", "loss", ",", "'train_loss'", ",", "train_interval", ")", "\n", "train_accuracy_s", "=", "average_summary", "(", "accuracy", ",", "'train_accuracy'", ",", "train_interval", ")", "\n", "valid_loss_s", "=", "average_summary", "(", "loss", ",", "'valid_loss'", ",", "float", "(", "valid_ds_size", ")", "/", "float", "(", "valid_batch_size", ")", ")", "\n", "valid_accuracy_s", "=", "average_summary", "(", "accuracy", ",", "'valid_accuracy'", ",", "float", "(", "valid_ds_size", ")", "/", "float", "(", "valid_batch_size", ")", ")", "\n", "global_step", "=", "tf", ".", "get_variable", "(", "'global_step'", ",", "dtype", "=", "tf", ".", "int32", ",", "shape", "=", "[", "]", ",", "initializer", "=", "tf", ".", "constant_initializer", "(", "0", ")", ",", "trainable", "=", "False", ")", "\n", "\n", "init_step", "=", "tf", ".", "assign", "(", "global_step", ",", "0", ")", "\n", "learning_rate", "=", "tf", ".", "train", ".", "piecewise_constant", "(", "global_step", ",", "boundaries", ",", "values", ")", "\n", "lr_summary", "=", "tf", ".", "summary", ".", "scalar", "(", "'learning_rate'", ",", "learning_rate", ")", "\n", "optimizer", "=", "optimizer", "(", "learning_rate", ")", "\n", "\n", "minimize_op", "=", "optimizer", ".", "minimize", "(", "loss", ",", "global_step", ")", "\n", "train_op", "=", "tf", ".", "group", "(", "minimize_op", ",", "train_loss_s", ".", "increment_op", ",", "train_accuracy_s", ".", "increment_op", ")", "\n", "increment_valid", "=", "tf", ".", "group", "(", "valid_loss_s", ".", "increment_op", ",", "valid_accuracy_s", ".", "increment_op", ")", "\n", "init_op", "=", "tf", ".", "group", "(", "tf", ".", "global_variables_initializer", "(", ")", ",", "tf", ".", "local_variables_initializer", "(", ")", ")", "\n", "# The following code calculates the parameters for each convolutional layer and the total parameters", "\n", "# total_parameters = 0", "\n", "# for variable in tf.trainable_variables():", "\n", "#     # shape is an array of tf.Dimension", "\n", "#     shape = variable.get_shape()", "\n", "#", "\n", "#     # condition == 4, Focus only on convolutional layers;", "\n", "#     # condition > 0, Focus on all layers;", "\n", "#     if len(shape) == 4:", "\n", "#         variable_parameters = 1", "\n", "#         for dim in shape:", "\n", "#             variable_parameters *= dim.value", "\n", "#         print('variable_parameters:', variable_parameters)", "\n", "#         total_parameters += variable_parameters", "\n", "# print(\"total_parameters:\", total_parameters)", "\n", "#", "\n", "# # for all data collection(gpu memory etc.)", "\n", "# run_metadata = tf.RunMetadata()", "\n", "#", "\n", "# # varlist = optimistic_restore_vars(load_path)", "\n", "# # saver = tf.train.Saver(varlist, max_to_keep=10000)", "\n", "# saver = tf.train.Saver(max_to_keep=10000)", "\n", "# with tf.Session() as sess:", "\n", "#     # sess.run(init_op)", "\n", "#", "\n", "#     # Write down all the data by using RunMetadata", "\n", "#     sess.run(init_op, options=tf.RunOptions(trace_level=tf.RunOptions.FULL_TRACE,", "\n", "#                                             output_partition_graphs=True), run_metadata=run_metadata)", "\n", "#     # write it to txt file", "\n", "#     with open(\"calpa_init_full_traces_srnetc64_256_bs2.txt\", \"w\") as out:", "\n", "#         # with open(\"test.txt\", \"w\") as out:", "\n", "#         out.write(str(run_metadata))", "\n", "#     with open(\"calpa_init_full_traces_srnetc64_256_bs2.txt\", \"r\") as f:", "\n", "#         # with open(\"test.txt\", \"r\") as f:", "\n", "#         requested_bytes = 0", "\n", "#         allocated_bytes = 0", "\n", "#         for line in f.readlines():", "\n", "#             line = line.strip('\\n')", "\n", "#             if 'requested_bytes' in line:", "\n", "#                 data = line.split(' ')", "\n", "#                 requested_bytes += int(data[-1])", "\n", "#             if 'allocated_bytes' in line:", "\n", "#                 data = line.split(' ')", "\n", "#                 allocated_bytes += int(data[-1])", "\n", "#         print('requested_bytes:', requested_bytes)", "\n", "#         print('allocated_bytes:', allocated_bytes)", "\n", "#         print(\"log_gpu_memory_finished....\")", "\n", "saver", "=", "tf", ".", "train", ".", "Saver", "(", "max_to_keep", "=", "10000", ")", "\n", "with", "tf", ".", "Session", "(", ")", "as", "sess", ":", "\n", "        ", "sess", ".", "run", "(", "init_op", ")", "\n", "with", "open", "(", "acc_log_path", ",", "'a+'", ")", "as", "f", ":", "\n", "            ", "f", ".", "write", "(", "\"load_path: %s\\n\"", "%", "(", "load_path", ")", ")", "\n", "f", ".", "write", "(", "\"is transfer: %s\\n\"", "%", "(", "transfer_flag", ")", ")", "\n", "", "if", "load_path", "is", "not", "None", ":", "\n", "            ", "saver", ".", "restore", "(", "sess", ",", "load_path", ")", "\n", "", "if", "transfer_flag", "is", "True", ":", "\n", "            ", "assert", "load_path", "is", "not", "None", ",", "'load_path is None!!!'", "\n", "sess", ".", "run", "(", "init_step", ")", "\n", "", "train_runner", ".", "start_threads", "(", "sess", ",", "num_runner_threads", ")", "\n", "valid_runner", ".", "start_threads", "(", "sess", ",", "1", ")", "\n", "writer", "=", "tf", ".", "summary", ".", "FileWriter", "(", "log_path", "+", "'/LogFile/'", ",", "sess", ".", "graph", ")", "\n", "start", "=", "sess", ".", "run", "(", "global_step", ")", "\n", "sess", ".", "run", "(", "disable_training_op", ")", "\n", "sess", ".", "run", "(", "[", "valid_loss_s", ".", "reset_variable_op", ",", "valid_accuracy_s", ".", "reset_variable_op", ",", "train_loss_s", ".", "reset_variable_op", ",", "train_accuracy_s", ".", "reset_variable_op", "]", ")", "\n", "_time", "=", "time", ".", "time", "(", ")", "\n", "for", "j", "in", "range", "(", "0", ",", "valid_ds_size", ",", "valid_batch_size", ")", ":", "\n", "            ", "sess", ".", "run", "(", "[", "increment_valid", "]", ")", "\n", "", "_acc_val", "=", "sess", ".", "run", "(", "valid_accuracy_s", ".", "mean_variable", ")", "\n", "print", "(", "\"initial accuracy on validation set:\"", ",", "_acc_val", ")", "\n", "print", "(", "\"evaluation time on validation set:\"", ",", "time", ".", "time", "(", ")", "-", "_time", ",", "\"seconds\"", ")", "\n", "valid_accuracy_s", ".", "add_summary", "(", "sess", ",", "writer", ",", "start", ")", "\n", "valid_loss_s", ".", "add_summary", "(", "sess", ",", "writer", ",", "start", ")", "\n", "sess", ".", "run", "(", "enable_training_op", ")", "\n", "print", "(", "\"network will be evaluatd every %i iterations on validation set\"", "%", "valid_interval", ")", "\n", "\n", "model_path", "=", "os", ".", "path", ".", "join", "(", "log_path", ",", "'models'", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "model_path", ")", ":", "\n", "            ", "os", ".", "makedirs", "(", "model_path", ")", "\n", "# save model 0", "\n", "", "if", "load_path", "is", "None", ":", "\n", "            ", "saver", ".", "save", "(", "sess", ",", "model_path", "+", "'/model_0.ckpt'", ")", "\n", "\n", "", "all_labels", "=", "np", ".", "array", "(", "[", "]", ")", "\n", "all_predicts", "=", "np", ".", "array", "(", "[", "]", ")", "\n", "\n", "for", "i", "in", "range", "(", "start", "+", "1", ",", "max_iter", "+", "1", ")", ":", "\n", "# start \"time\"", "\n", "            ", "sess", ".", "run", "(", "train_op", ")", "\n", "# end \"time\"", "\n", "if", "i", "%", "train_interval", "==", "0", ":", "\n", "                ", "train_loss_s", ".", "add_summary", "(", "sess", ",", "writer", ",", "i", ")", "\n", "train_accuracy_s", ".", "add_summary", "(", "sess", ",", "writer", ",", "i", ")", "\n", "s", "=", "sess", ".", "run", "(", "lr_summary", ")", "\n", "writer", ".", "add_summary", "(", "s", ",", "i", ")", "\n", "", "if", "i", "%", "valid_interval", "==", "0", ":", "\n", "                ", "sess", ".", "run", "(", "disable_training_op", ")", "\n", "for", "j", "in", "range", "(", "0", ",", "valid_ds_size", ",", "valid_batch_size", ")", ":", "\n", "                    ", "sess", ".", "run", "(", "[", "increment_valid", "]", ")", "\n", "\n", "valid_label", ",", "valid_predict", "=", "sess", ".", "run", "(", "[", "labels", ",", "predicts", "]", ")", "\n", "\n", "all_labels", "=", "np", ".", "concatenate", "(", "[", "all_labels", ",", "valid_label", "]", ",", "axis", "=", "0", ")", "\n", "all_predicts", "=", "np", ".", "concatenate", "(", "[", "all_predicts", ",", "valid_predict", "]", ",", "axis", "=", "0", ")", "\n", "\n", "", "valid_loss", ",", "valid_accuracy", "=", "sess", ".", "run", "(", "[", "valid_loss_s", ".", "mean_variable", ",", "valid_accuracy_s", ".", "mean_variable", "]", ")", "\n", "AUC", "=", "roc_auc_score", "(", "all_labels", ",", "all_predicts", ")", "\n", "valid_loss_s", ".", "add_summary", "(", "sess", ",", "writer", ",", "i", ")", "\n", "valid_accuracy_s", ".", "add_summary", "(", "sess", ",", "writer", ",", "i", ")", "\n", "print", "(", "\"iteration:\"", ",", "i", ")", "\n", "print", "(", "\"accuracy on validation set:\"", ",", "valid_accuracy", ")", "\n", "if", "wauc_flag", "==", "True", ":", "\n", "                    ", "weight_auc", "=", "alaska_weighted_auc", "(", "all_labels", ",", "all_predicts", ")", "\n", "with", "open", "(", "acc_log_path", ",", "'a+'", ")", "as", "f", ":", "\n", "                        ", "f", ".", "write", "(", "\"Iter:%d, valid_acc: %s, valid_loss: %s, auc: %s, weight_auc: %s, time:%s\\n\"", "\n", "%", "(", "i", ",", "str", "(", "valid_accuracy", ")", ",", "str", "(", "valid_loss", ")", ",", "str", "(", "AUC", ")", ",", "str", "(", "weight_auc", ")", ",", "\n", "time", ".", "strftime", "(", "\"%Y%m%d-%H%M%S\"", ")", ")", ")", "\n", "", "", "else", ":", "\n", "                    ", "with", "open", "(", "acc_log_path", ",", "'a+'", ")", "as", "f", ":", "\n", "                        ", "f", ".", "write", "(", "\"Iter:%d, valid_acc: %s, valid_loss: %s, auc: %s, time:%s\\n\"", "\n", "%", "(", "i", ",", "str", "(", "valid_accuracy", ")", ",", "str", "(", "valid_loss", ")", ",", "str", "(", "AUC", ")", ",", "\n", "time", ".", "strftime", "(", "\"%Y%m%d-%H%M%S\"", ")", ")", ")", "\n", "", "", "sess", ".", "run", "(", "enable_training_op", ")", "\n", "", "if", "i", "%", "save_interval", "==", "0", ":", "\n", "                ", "saver", ".", "save", "(", "sess", ",", "model_path", "+", "'/model_'", "+", "str", "(", "i", ")", "+", "'.ckpt'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.test_dataset": [[223, 295], ["tensorflow.reset_default_graph", "GeneratorRunner", "GeneratorRunner.get_batched_inputs", "model_class", "model_class._build_predict", "model_class._build_losses", "utils_multistep_lr.average_summary", "utils_multistep_lr.average_summary", "tensorflow.group", "tensorflow.get_variable", "tensorflow.group", "tensorflow.train.Saver", "print", "model_class._build_model", "model_class._build_model", "tensorflow.global_variables_initializer", "tensorflow.local_variables_initializer", "tensorflow.Session", "sess.run", "tf.train.Saver.restore", "GeneratorRunner.start_threads", "numpy.array", "numpy.array", "range", "sess.run", "sklearn.metrics.roc_auc_score", "utils.alaska_weighted_auc", "sess.run", "float", "float", "float", "float", "tensorflow.constant_initializer", "sess.run", "sess.run", "numpy.concatenate", "numpy.concatenate", "pandas.DataFrame", "pd.DataFrame.to_csv", "print", "utils.tf_roc", "utils.tf_roc.get_pfa", "utils.tf_roc.get_pfa", "utils.tf_roc.get_pfa", "utils.tf_roc.get_pmd", "print", "print", "print", "print", "open", "f.write", "str", "str", "str", "str", "time.strftime"], "function", ["home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.get_batched_inputs", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.Model._build_predict", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.Model._build_losses", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_32.SRNetC64DE32._build_model", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_32.SRNetC64DE32._build_model", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.start_threads", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.alaska_weighted_auc", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.tf_roc.get_pfa", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.tf_roc.get_pfa", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.tf_roc.get_pfa", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.tf_roc.get_pmd"], ["", "", "", "", "def", "test_dataset", "(", "model_class", ",", "gen", ",", "batch_size", ",", "ds_size", ",", "load_path", ",", "test_log_path", "=", "None", ",", "config_log", "=", "None", ",", "csv_path", "=", "None", ")", ":", "\n", "    ", "tf", ".", "reset_default_graph", "(", ")", "\n", "runner", "=", "GeneratorRunner", "(", "gen", ",", "batch_size", "*", "10", ")", "\n", "img_batch", ",", "label_batch", "=", "runner", ".", "get_batched_inputs", "(", "batch_size", ")", "\n", "model", "=", "model_class", "(", "False", ",", "'NCHW'", ")", "\n", "\n", "if", "model_class", ".", "__name__", "!=", "'SRNetDecom'", ":", "\n", "        ", "model", ".", "_build_model", "(", "img_batch", ")", "\n", "", "else", ":", "\n", "        ", "assert", "config_log", "!=", "None", ",", "'SRNetDecom. config_log == None !'", "\n", "model", ".", "_build_model", "(", "img_batch", ",", "config_log", ")", "\n", "\n", "", "labels", ",", "predicts", "=", "model", ".", "_build_predict", "(", "label_batch", ")", "\n", "\n", "loss", ",", "accuracy", "=", "model", ".", "_build_losses", "(", "label_batch", ")", "\n", "loss_summary", "=", "average_summary", "(", "loss", ",", "'loss'", ",", "float", "(", "ds_size", ")", "/", "float", "(", "batch_size", ")", ")", "\n", "accuracy_summary", "=", "average_summary", "(", "accuracy", ",", "'accuracy'", ",", "float", "(", "ds_size", ")", "/", "float", "(", "batch_size", ")", ")", "\n", "increment_op", "=", "tf", ".", "group", "(", "loss_summary", ".", "increment_op", ",", "accuracy_summary", ".", "increment_op", ")", "\n", "global_step", "=", "tf", ".", "get_variable", "(", "'global_step'", ",", "dtype", "=", "tf", ".", "int32", ",", "shape", "=", "[", "]", ",", "initializer", "=", "tf", ".", "constant_initializer", "(", "0", ")", ",", "trainable", "=", "False", ")", "\n", "init_op", "=", "tf", ".", "group", "(", "tf", ".", "global_variables_initializer", "(", ")", ",", "tf", ".", "local_variables_initializer", "(", ")", ")", "\n", "saver", "=", "tf", ".", "train", ".", "Saver", "(", "max_to_keep", "=", "10000", ")", "\n", "with", "tf", ".", "Session", "(", ")", "as", "sess", ":", "\n", "        ", "sess", ".", "run", "(", "init_op", ")", "\n", "saver", ".", "restore", "(", "sess", ",", "load_path", ")", "\n", "runner", ".", "start_threads", "(", "sess", ",", "1", ")", "\n", "\n", "all_labels", "=", "np", ".", "array", "(", "[", "]", ")", "\n", "all_predicts", "=", "np", ".", "array", "(", "[", "]", ")", "\n", "\n", "for", "j", "in", "range", "(", "0", ",", "ds_size", ",", "batch_size", ")", ":", "\n", "            ", "sess", ".", "run", "(", "increment_op", ")", "\n", "\n", "valid_label", ",", "valid_predict", "=", "sess", ".", "run", "(", "[", "labels", ",", "predicts", "]", ")", "\n", "all_labels", "=", "np", ".", "concatenate", "(", "[", "all_labels", ",", "valid_label", "]", ",", "axis", "=", "0", ")", "\n", "all_predicts", "=", "np", ".", "concatenate", "(", "[", "all_predicts", ",", "valid_predict", "]", ",", "axis", "=", "0", ")", "\n", "\n", "", "mean_loss", ",", "mean_accuracy", "=", "sess", ".", "run", "(", "[", "loss_summary", ".", "mean_variable", ",", "accuracy_summary", ".", "mean_variable", "]", ")", "\n", "\n", "AUC", "=", "roc_auc_score", "(", "all_labels", ",", "all_predicts", ")", "\n", "weight_auc", "=", "alaska_weighted_auc", "(", "all_labels", ",", "all_predicts", ")", "\n", "cur_iter", "=", "sess", ".", "run", "(", "global_step", ")", "\n", "if", "test_log_path", "!=", "None", ":", "\n", "            ", "with", "open", "(", "test_log_path", ",", "'a+'", ")", "as", "f", ":", "\n", "                        ", "f", ".", "write", "(", "\"Model:%d, test_acc: %s, test_loss: %s, auc: %s, weight_auc: %s, time:%s\\n\"", "\n", "%", "(", "cur_iter", ",", "str", "(", "mean_accuracy", ")", ",", "str", "(", "mean_loss", ")", ",", "str", "(", "AUC", ")", ",", "str", "(", "weight_auc", ")", ",", "\n", "time", ".", "strftime", "(", "\"%Y%m%d-%H%M%S\"", ")", ")", ")", "\n", "\n", "\n", "", "", "if", "csv_path", "!=", "None", ":", "\n", "# write to csv", "\n", "            ", "df", "=", "pd", ".", "DataFrame", "(", "{", "'Predict'", ":", "all_predicts", ",", "'Label'", ":", "all_labels", "}", ")", "\n", "df", ".", "to_csv", "(", "csv_path", ",", "mode", "=", "'w'", ",", "index", "=", "True", ",", "sep", "=", "','", ",", "columns", "=", "[", "'Predict'", ",", "'Label'", "]", ",", "\n", "header", "=", "0", ")", "\n", "\n", "print", "(", "\"cal P_FA\"", ")", "\n", "eval_criter", "=", "tf_roc", "(", "all_predicts", ",", "all_labels", ",", "9999", ")", "\n", "pfa_30", "=", "eval_criter", ".", "get_pfa", "(", "0.3", ")", "\n", "pfa_50", "=", "eval_criter", ".", "get_pfa", "(", "0.5", ")", "\n", "pfa_70", "=", "eval_criter", ".", "get_pfa", "(", "0.7", ")", "\n", "pmd_05", "=", "eval_criter", ".", "get_pmd", "(", "0.05", ")", "\n", "print", "(", "\"P_FA(30%%): %f\"", "%", "(", "pfa_30", ")", ")", "\n", "print", "(", "\"P_FA(50%%): %f\"", "%", "(", "pfa_50", ")", ")", "\n", "print", "(", "\"P_FA(70%%): %f\"", "%", "(", "pfa_70", ")", ")", "\n", "print", "(", "\"P_MD(5%%): %f\"", "%", "(", "pmd_05", ")", ")", "\n", "", "", "print", "(", "\"Accuracy:\"", ",", "mean_accuracy", ",", "\" | Loss:\"", ",", "mean_loss", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.compute_ma": [[449, 459], ["numpy.zeros", "print", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.sum"], "function", ["None"], ["", "", "def", "compute_ma", "(", "batch_size", ",", "f_o", ",", "f_c", ")", ":", "\n", "# L2 NORM", "\n", "    ", "ma_mat", "=", "np", ".", "zeros", "(", "(", "batch_size", ",", "1", ")", ")", "\n", "\n", "ma_mat", "=", "np", ".", "linalg", ".", "norm", "(", "f_c", "-", "f_o", ",", "ord", "=", "2", ",", "axis", "=", "1", ")", "/", "np", ".", "linalg", ".", "norm", "(", "f_o", ",", "ord", "=", "2", ",", "axis", "=", "1", ")", "\n", "ma", "=", "np", ".", "sum", "(", "ma_mat", ")", "/", "batch_size", "\n", "print", "(", "\"ma_mat.shape: \"", ",", "ma_mat", ".", "shape", ")", "# (batch_size,)", "\n", "assert", "ma_mat", ".", "shape", "[", "0", "]", "==", "batch_size", ",", "\"ma_mat.shape[0]=%d is not equal ot batch_size=%d\"", "%", "(", "ma_mat", ".", "shape", "[", "0", "]", ",", "batch_size", ")", "\n", "\n", "return", "ma_mat", ",", "ma", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.get_assign_tensor_name": [[461, 503], ["str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str"], "function", ["None"], ["", "def", "get_assign_tensor_name", "(", "layer", ",", "index", ")", ":", "\n", "\n", "    ", "if", "index", "==", "1", "and", "layer", "!=", "2", ":", "\n", "        ", "if", "(", "layer", ">=", "3", "and", "layer", "<=", "7", ")", "or", "layer", "==", "12", ":", "\n", "            ", "new_conv_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv/weights:0'", "\n", "new_conv1_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/weights:0'", "\n", "new_conv2_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/weights:0'", "\n", "new_bias2_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/biases:0'", "\n", "ori_conv1_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/weights'", "\n", "new_conv3_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_3/weights:0'", "\n", "ori_bias1_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/biases'", "\n", "new_bias3_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_3/biases:0'", "\n", "", "elif", "layer", ">=", "8", "and", "layer", "<=", "11", ":", "\n", "            ", "new_conv_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/weights:0'", "\n", "new_conv1_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/weights:0'", "\n", "new_conv2_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_3/weights:0'", "\n", "new_bias2_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_3/biases:0'", "\n", "ori_conv1_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/weights'", "\n", "new_conv3_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_4/weights:0'", "\n", "ori_bias1_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/biases'", "\n", "new_bias3_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_4/biases:0'", "\n", "\n", "", "return", "new_conv_name", ",", "new_conv1_name", ",", "new_conv2_name", ",", "new_bias2_name", ",", "ori_conv1_name", ",", "new_conv3_name", ",", "ori_bias1_name", ",", "new_bias3_name", "\n", "", "elif", "index", "==", "2", "or", "layer", "==", "2", ":", "\n", "        ", "if", "(", "layer", ">=", "3", "and", "layer", "<=", "7", ")", "or", "layer", "==", "12", ":", "\n", "            ", "new_conv_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/weights:0'", "\n", "new_conv1_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/weights:0'", "\n", "new_conv2_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_3/weights:0'", "\n", "new_bias2_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_3/biases:0'", "\n", "", "elif", "layer", ">=", "8", "and", "layer", "<=", "11", ":", "\n", "            ", "new_conv_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/weights:0'", "\n", "new_conv1_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_3/weights:0'", "\n", "new_conv2_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_4/weights:0'", "\n", "new_bias2_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_4/biases:0'", "\n", "", "elif", "layer", "==", "2", ":", "\n", "            ", "new_conv_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv/weights:0'", "\n", "new_conv1_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/weights:0'", "\n", "new_conv2_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/weights:0'", "\n", "new_bias2_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/biases:0'", "\n", "\n", "", "return", "new_conv_name", ",", "new_conv1_name", ",", "new_conv2_name", ",", "new_bias2_name", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.assign_sess": [[505, 546], ["utils.get_assign_tensor_name", "tensorflow.global_variables", "utils.get_assign_tensor_name", "tensorflow.global_variables", "sess.run", "tensorflow.assign", "sess.run", "sess.run", "tensorflow.get_default_graph().get_tensor_by_name", "tensorflow.assign", "sess.run", "tensorflow.assign", "sess.run", "tensorflow.get_default_graph().get_tensor_by_name", "tensorflow.assign", "sess.run", "tensorflow.get_default_graph().get_tensor_by_name", "tensorflow.assign", "sess.run", "tensorflow.get_default_graph", "tensorflow.get_default_graph().get_tensor_by_name", "tensorflow.assign", "tensorflow.contrib.framework.load_variable", "sess.run", "tensorflow.get_default_graph().get_tensor_by_name", "tensorflow.assign", "sess.run", "tensorflow.contrib.framework.load_variable", "sess.run", "tensorflow.get_default_graph", "tensorflow.get_default_graph().get_tensor_by_name", "tensorflow.assign", "tensorflow.contrib.framework.load_variable", "sess.run", "tensorflow.contrib.framework.load_variable", "sess.run", "tensorflow.get_default_graph", "tensorflow.get_default_graph().get_tensor_by_name", "tensorflow.assign", "tensorflow.assign", "tensorflow.get_default_graph", "tensorflow.get_default_graph().get_tensor_by_name", "tensorflow.assign", "tensorflow.assign", "tensorflow.get_default_graph", "tensorflow.get_default_graph().get_tensor_by_name", "tensorflow.get_default_graph().get_tensor_by_name", "tensorflow.get_default_graph", "tensorflow.get_default_graph().get_tensor_by_name", "tensorflow.get_default_graph().get_tensor_by_name", "tensorflow.get_default_graph", "tensorflow.get_default_graph", "tensorflow.get_default_graph", "tensorflow.get_default_graph", "tensorflow.get_default_graph", "tensorflow.get_default_graph"], "function", ["home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.get_assign_tensor_name", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.get_assign_tensor_name"], ["", "", "def", "assign_sess", "(", "sess", ",", "load_path_ori", ",", "layer", ",", "index", ",", "first", ",", "core", ",", "last", ",", "var_bias", ")", ":", "\n", "    ", "if", "index", "==", "1", "and", "layer", "!=", "2", ":", "\n", "        ", "new_conv_name", ",", "new_conv1_name", ",", "new_conv2_name", ",", "new_bias2_name", ",", "ori_conv1_name", ",", "new_conv3_name", ",", "ori_bias1_name", ",", "new_bias3_name", "=", "get_assign_tensor_name", "(", "layer", ",", "index", ")", "\n", "for", "v", "in", "tf", ".", "global_variables", "(", ")", ":", "\n", "            ", "if", "v", ".", "name", "==", "new_conv_name", ":", "\n", "                ", "sess", ".", "run", "(", "tf", ".", "assign", "(", "tf", ".", "get_default_graph", "(", ")", ".", "get_tensor_by_name", "(", "v", ".", "name", ")", ",", "first", ",", "validate_shape", "=", "False", ")", ")", "\n", "", "elif", "v", ".", "name", "==", "new_conv1_name", ":", "\n", "                ", "sess", ".", "run", "(", "tf", ".", "assign", "(", "tf", ".", "get_default_graph", "(", ")", ".", "get_tensor_by_name", "(", "v", ".", "name", ")", ",", "core", ",", "validate_shape", "=", "False", ")", ")", "\n", "", "elif", "v", ".", "name", "==", "new_conv2_name", ":", "\n", "                ", "sess", ".", "run", "(", "tf", ".", "assign", "(", "tf", ".", "get_default_graph", "(", ")", ".", "get_tensor_by_name", "(", "v", ".", "name", ")", ",", "last", ",", "validate_shape", "=", "False", ")", ")", "\n", "", "elif", "v", ".", "name", "==", "new_bias2_name", ":", "\n", "                ", "sess", ".", "run", "(", "tf", ".", "assign", "(", "tf", ".", "get_default_graph", "(", ")", ".", "get_tensor_by_name", "(", "v", ".", "name", ")", ",", "var_bias", ",", "validate_shape", "=", "False", ")", ")", "\n", "", "elif", "v", ".", "name", "==", "new_conv3_name", ":", "\n", "                ", "name_ori", "=", "ori_conv1_name", "\n", "var", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path_ori", ",", "name_ori", ")", "\n", "sess", ".", "run", "(", "tf", ".", "assign", "(", "tf", ".", "get_default_graph", "(", ")", ".", "get_tensor_by_name", "(", "v", ".", "name", ")", ",", "var", ",", "validate_shape", "=", "False", ")", ")", "\n", "", "elif", "v", ".", "name", "==", "new_bias3_name", ":", "\n", "                ", "name_ori", "=", "ori_bias1_name", "\n", "var", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path_ori", ",", "name_ori", ")", "\n", "sess", ".", "run", "(", "tf", ".", "assign", "(", "tf", ".", "get_default_graph", "(", ")", ".", "get_tensor_by_name", "(", "v", ".", "name", ")", ",", "var", ",", "validate_shape", "=", "False", ")", ")", "\n", "", "else", ":", "\n", "                ", "var", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path_ori", ",", "v", ".", "name", "[", ":", "-", "2", "]", ")", "\n", "sess", ".", "run", "(", "tf", ".", "assign", "(", "tf", ".", "get_default_graph", "(", ")", ".", "get_tensor_by_name", "(", "v", ".", "name", ")", ",", "var", ",", "validate_shape", "=", "False", ")", ")", "\n", "\n", "", "", "", "elif", "index", "==", "2", "or", "layer", "==", "2", ":", "\n", "        ", "new_conv_name", ",", "new_conv1_name", ",", "new_conv2_name", ",", "new_bias2_name", "=", "get_assign_tensor_name", "(", "layer", ",", "index", ")", "\n", "for", "v", "in", "tf", ".", "global_variables", "(", ")", ":", "\n", "            ", "if", "v", ".", "name", "==", "new_conv_name", ":", "\n", "                ", "sess", ".", "run", "(", "tf", ".", "assign", "(", "tf", ".", "get_default_graph", "(", ")", ".", "get_tensor_by_name", "(", "v", ".", "name", ")", ",", "first", ",", "validate_shape", "=", "False", ")", ")", "\n", "", "elif", "v", ".", "name", "==", "new_conv1_name", ":", "\n", "                ", "sess", ".", "run", "(", "tf", ".", "assign", "(", "tf", ".", "get_default_graph", "(", ")", ".", "get_tensor_by_name", "(", "v", ".", "name", ")", ",", "core", ",", "validate_shape", "=", "False", ")", ")", "\n", "", "elif", "v", ".", "name", "==", "new_conv2_name", ":", "\n", "                ", "sess", ".", "run", "(", "tf", ".", "assign", "(", "tf", ".", "get_default_graph", "(", ")", ".", "get_tensor_by_name", "(", "v", ".", "name", ")", ",", "last", ",", "validate_shape", "=", "False", ")", ")", "\n", "", "elif", "v", ".", "name", "==", "new_bias2_name", ":", "\n", "                ", "sess", ".", "run", "(", "tf", ".", "assign", "(", "tf", ".", "get_default_graph", "(", ")", ".", "get_tensor_by_name", "(", "v", ".", "name", ")", ",", "var_bias", ",", "validate_shape", "=", "False", ")", ")", "\n", "", "else", ":", "\n", "                ", "var", "=", "tf", ".", "contrib", ".", "framework", ".", "load_variable", "(", "load_path_ori", ",", "v", ".", "name", "[", ":", "-", "2", "]", ")", "\n", "sess", ".", "run", "(", "tf", ".", "assign", "(", "tf", ".", "get_default_graph", "(", ")", ".", "get_tensor_by_name", "(", "v", ".", "name", ")", ",", "var", ",", "validate_shape", "=", "False", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.get_decom_tensor_name": [[547, 570], ["str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str"], "function", ["None"], ["", "", "", "", "def", "get_decom_tensor_name", "(", "layer", ",", "index", ")", ":", "\n", "    ", "\"\"\"\n        get decom tensor name of Conv and BN\n    \"\"\"", "\n", "if", "index", "==", "1", ":", "\n", "        ", "if", "(", "layer", ">=", "2", "and", "layer", "<=", "7", ")", "or", "layer", "==", "12", ":", "\n", "            ", "ori_conv_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv/weights'", "\n", "ori_bias_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv/biases'", "\n", "ori_bn_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/BatchNorm/FusedBatchNorm:0'", "\n", "", "elif", "layer", ">=", "8", "and", "layer", "<=", "11", ":", "\n", "            ", "ori_conv_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/weights'", "\n", "ori_bias_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/biases'", "\n", "ori_bn_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/BatchNorm_1/FusedBatchNorm:0'", "\n", "", "", "elif", "index", "==", "2", ":", "\n", "        ", "if", "(", "layer", ">=", "3", "and", "layer", "<=", "7", ")", "or", "layer", "==", "12", ":", "\n", "            ", "ori_conv_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/weights'", "\n", "ori_bias_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_1/biases'", "\n", "ori_bn_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/BatchNorm_1/FusedBatchNorm:0'", "\n", "", "elif", "layer", ">=", "8", "and", "layer", "<=", "11", ":", "\n", "            ", "ori_conv_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/weights'", "\n", "ori_bias_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/Conv_2/biases'", "\n", "ori_bn_name", "=", "'Layer'", "+", "str", "(", "layer", ")", "+", "'/BatchNorm_2/FusedBatchNorm:0'", "\n", "", "", "return", "ori_conv_name", ",", "ori_bias_name", ",", "ori_bn_name", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.initial_and_decom_model": [[572, 641], ["tensorflow.reset_default_graph", "GeneratorRunner", "GeneratorRunner", "tensorflow.get_variable", "queueSelection", "model_class", "model_class._build_losses", "utils_multistep_lr.average_summary", "utils_multistep_lr.average_summary", "utils_multistep_lr.average_summary", "utils_multistep_lr.average_summary", "tensorflow.get_variable", "tensorflow.train.piecewise_constant", "tensorflow.summary.scalar", "optimizer.", "optimizer.minimize", "tensorflow.group", "tensorflow.group", "tensorflow.group", "tensorflow.train.Saver", "decom_srnet.copy_weights_to_decom_srnet", "tensorflow.assign", "tensorflow.assign", "tensorflow.get_variable", "tensorflow.group", "tensorflow.group", "tensorflow.cast", "model_class._build_model", "model_class._build_model", "tensorflow.global_variables_initializer", "tensorflow.local_variables_initializer", "tensorflow.Session", "sess.run", "GeneratorRunner.start_threads", "GeneratorRunner.start_threads", "sess.run", "sess.run", "sess.run", "os.path.join", "tf.train.Saver.save", "tensorflow.assign", "tensorflow.assign", "tensorflow.assign", "tensorflow.assign", "float", "float", "float", "float", "tensorflow.constant_initializer"], "function", ["home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.queueSelection", "home.repos.pwc.inspect_result.tansq_std-net.tflib.utils_multistep_lr.Model._build_losses", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.decom_srnet.copy_weights_to_decom_srnet", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_32.SRNetC64DE32._build_model", "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_32.SRNetC64DE32._build_model", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.start_threads", "home.repos.pwc.inspect_result.tansq_std-net.tflib.queues.GeneratorRunner.start_threads"], ["", "def", "initial_and_decom_model", "(", "model_class", ",", "train_gen", ",", "valid_gen", ",", "train_batch_size", ",", "valid_batch_size", ",", "valid_ds_size", ",", "optimizer", ",", "boundaries", ",", "values", ",", "train_interval", ",", "valid_interval", ",", "save_path", ",", "Model_name", ",", "load_path_ori", ",", "config_log", ",", "model_name_decom", ",", "num_runner_threads", "=", "1", ")", ":", "#initial the model of decomposition", "\n", "    ", "tf", ".", "reset_default_graph", "(", ")", "\n", "train_runner", "=", "GeneratorRunner", "(", "train_gen", ",", "train_batch_size", "*", "10", ")", "\n", "valid_runner", "=", "GeneratorRunner", "(", "valid_gen", ",", "valid_batch_size", "*", "10", ")", "\n", "is_training", "=", "tf", ".", "get_variable", "(", "'is_training'", ",", "dtype", "=", "tf", ".", "bool", ",", "initializer", "=", "True", ",", "trainable", "=", "False", ")", "\n", "if", "train_batch_size", "==", "valid_batch_size", ":", "\n", "        ", "batch_size", "=", "train_batch_size", "\n", "disable_training_op", "=", "tf", ".", "assign", "(", "is_training", ",", "False", ")", "\n", "enable_training_op", "=", "tf", ".", "assign", "(", "is_training", ",", "True", ")", "\n", "", "else", ":", "\n", "        ", "batch_size", "=", "tf", ".", "get_variable", "(", "'batch_size'", ",", "dtype", "=", "tf", ".", "int32", ",", "initializer", "=", "train_batch_size", ",", "trainable", "=", "False", ",", "collections", "=", "[", "tf", ".", "GraphKeys", ".", "LOCAL_VARIABLES", "]", ")", "\n", "disable_training_op", "=", "tf", ".", "group", "(", "tf", ".", "assign", "(", "is_training", ",", "False", ")", ",", "tf", ".", "assign", "(", "batch_size", ",", "valid_batch_size", ")", ")", "\n", "enable_training_op", "=", "tf", ".", "group", "(", "tf", ".", "assign", "(", "is_training", ",", "True", ")", ",", "tf", ".", "assign", "(", "batch_size", ",", "train_batch_size", ")", ")", "\n", "", "img_batch", ",", "label_batch", "=", "queueSelection", "(", "[", "valid_runner", ",", "train_runner", "]", ",", "tf", ".", "cast", "(", "is_training", ",", "tf", ".", "int32", ")", ",", "batch_size", ")", "\n", "model", "=", "model_class", "(", "is_training", ",", "'NHWC'", ")", "\n", "if", "model_class", ".", "__name__", "!=", "'SRNetDecom'", ":", "\n", "        ", "model", ".", "_build_model", "(", "img_batch", ")", "\n", "", "else", ":", "\n", "        ", "assert", "config_log", "!=", "None", ",", "'SRNetDecom. config_log == None !'", "\n", "model", ".", "_build_model", "(", "img_batch", ",", "config_log", ")", "\n", "\n", "", "loss", ",", "accuracy", "=", "model", ".", "_build_losses", "(", "label_batch", ")", "\n", "train_loss_s", "=", "average_summary", "(", "loss", ",", "'train_loss'", ",", "train_interval", ")", "\n", "train_accuracy_s", "=", "average_summary", "(", "accuracy", ",", "'train_accuracy'", ",", "train_interval", ")", "\n", "valid_loss_s", "=", "average_summary", "(", "loss", ",", "'valid_loss'", ",", "float", "(", "valid_ds_size", ")", "/", "float", "(", "valid_batch_size", ")", ")", "\n", "valid_accuracy_s", "=", "average_summary", "(", "accuracy", ",", "'valid_accuracy'", ",", "float", "(", "valid_ds_size", ")", "/", "float", "(", "valid_batch_size", ")", ")", "\n", "global_step", "=", "tf", ".", "get_variable", "(", "'global_step'", ",", "dtype", "=", "tf", ".", "int32", ",", "shape", "=", "[", "]", ",", "initializer", "=", "tf", ".", "constant_initializer", "(", "0", ")", ",", "trainable", "=", "False", ")", "\n", "\n", "learning_rate", "=", "tf", ".", "train", ".", "piecewise_constant", "(", "global_step", ",", "boundaries", ",", "values", ")", "\n", "lr_summary", "=", "tf", ".", "summary", ".", "scalar", "(", "'learning_rate'", ",", "learning_rate", ")", "\n", "optimizer", "=", "optimizer", "(", "learning_rate", ")", "\n", "\n", "minimize_op", "=", "optimizer", ".", "minimize", "(", "loss", ",", "global_step", ")", "\n", "train_op", "=", "tf", ".", "group", "(", "minimize_op", ",", "train_loss_s", ".", "increment_op", ",", "train_accuracy_s", ".", "increment_op", ")", "\n", "increment_valid", "=", "tf", ".", "group", "(", "valid_loss_s", ".", "increment_op", ",", "valid_accuracy_s", ".", "increment_op", ")", "\n", "init_op", "=", "tf", ".", "group", "(", "tf", ".", "global_variables_initializer", "(", ")", ",", "tf", ".", "local_variables_initializer", "(", ")", ")", "\n", "saver", "=", "tf", ".", "train", ".", "Saver", "(", "max_to_keep", "=", "10000", ")", "\n", "with", "tf", ".", "Session", "(", ")", "as", "sess", ":", "\n", "        ", "sess", ".", "run", "(", "init_op", ")", "\n", "train_runner", ".", "start_threads", "(", "sess", ",", "num_runner_threads", ")", "\n", "valid_runner", ".", "start_threads", "(", "sess", ",", "1", ")", "\n", "start", "=", "sess", ".", "run", "(", "global_step", ")", "\n", "sess", ".", "run", "(", "disable_training_op", ")", "\n", "sess", ".", "run", "(", "[", "valid_loss_s", ".", "reset_variable_op", ",", "valid_accuracy_s", ".", "reset_variable_op", ",", "train_loss_s", ".", "reset_variable_op", ",", "train_accuracy_s", ".", "reset_variable_op", "]", ")", "\n", "load_path_new", "=", "os", ".", "path", ".", "join", "(", "save_path", ",", "Model_name", ")", "\n", "saver", ".", "save", "(", "sess", ",", "load_path_new", ")", "\n", "", "copy_weights_to_decom_srnet", "(", "load_path_ori", ",", "load_path_new", ",", "config_log", ",", "save_path", ",", "model_name_decom", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.stat_parameters": [[642, 657], ["tensorflow.trainable_variables", "print", "variable.get_shape", "len", "print"], "function", ["None"], ["", "def", "stat_parameters", "(", ")", ":", "\n", "# calculates the parameters for each convolutional layer and the total parameters", "\n", "    ", "total_parameters", "=", "0", "\n", "for", "variable", "in", "tf", ".", "trainable_variables", "(", ")", ":", "\n", "# shape is an array of tf.Dimension", "\n", "        ", "shape", "=", "variable", ".", "get_shape", "(", ")", "\n", "\n", "if", "len", "(", "shape", ")", "==", "4", ":", "# condition == 4, Focus only on convolutional layers; condition > 0, Focus on all layers;", "\n", "            ", "variable_parameters", "=", "1", "\n", "for", "dim", "in", "shape", ":", "\n", "# print 'dim:', dim", "\n", "                ", "variable_parameters", "*=", "dim", ".", "value", "\n", "", "print", "(", "'variable_parameters:'", ",", "variable_parameters", ")", "\n", "total_parameters", "+=", "variable_parameters", "\n", "", "", "print", "(", "\"total_parameters:\"", ",", "total_parameters", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.alaska_weighted_auc": [[658, 688], ["sklearn.metrics.roc_curve", "numpy.dot", "enumerate", "numpy.array", "numpy.array", "numpy.linspace", "numpy.concatenate", "numpy.concatenate", "sklearn.metrics.auc", "len"], "function", ["None"], ["", "def", "alaska_weighted_auc", "(", "y_true", ",", "y_valid", ")", ":", "\n", "    ", "tpr_thresholds", "=", "[", "0.0", ",", "0.4", ",", "1.0", "]", "\n", "weights", "=", "[", "2", ",", "1", "]", "\n", "\n", "fpr", ",", "tpr", ",", "thresholds", "=", "roc_curve", "(", "y_true", ",", "y_valid", ",", "pos_label", "=", "1", ")", "\n", "\n", "# size of subsets", "\n", "areas", "=", "np", ".", "array", "(", "tpr_thresholds", "[", "1", ":", "]", ")", "-", "np", ".", "array", "(", "tpr_thresholds", "[", ":", "-", "1", "]", ")", "\n", "\n", "# The total area is normalized by the sum of weights such that the final weighted AUC is between 0 and 1.", "\n", "normalization", "=", "np", ".", "dot", "(", "areas", ",", "weights", ")", "\n", "\n", "competition_metric", "=", "0", "\n", "for", "idx", ",", "weight", "in", "enumerate", "(", "weights", ")", ":", "\n", "        ", "y_min", "=", "tpr_thresholds", "[", "idx", "]", "\n", "y_max", "=", "tpr_thresholds", "[", "idx", "+", "1", "]", "\n", "mask", "=", "(", "y_min", "<", "tpr", ")", "&", "(", "tpr", "<", "y_max", ")", "\n", "# pdb.set_trace()", "\n", "\n", "x_padding", "=", "np", ".", "linspace", "(", "fpr", "[", "mask", "]", "[", "-", "1", "]", ",", "1", ",", "100", ")", "\n", "\n", "x", "=", "np", ".", "concatenate", "(", "[", "fpr", "[", "mask", "]", ",", "x_padding", "]", ")", "\n", "y", "=", "np", ".", "concatenate", "(", "[", "tpr", "[", "mask", "]", ",", "[", "y_max", "]", "*", "len", "(", "x_padding", ")", "]", ")", "\n", "y", "=", "y", "-", "y_min", "# normalize such that curve starts at y=0", "\n", "score", "=", "auc", "(", "x", ",", "y", ")", "\n", "submetric", "=", "score", "*", "weight", "\n", "best_subscore", "=", "(", "y_max", "-", "y_min", ")", "*", "weight", "\n", "competition_metric", "+=", "submetric", "\n", "\n", "", "return", "competition_metric", "/", "normalization", "\n", "\n"]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.utils.write_2_config_log": [[689, 703], ["configparser.ConfigParser", "configparser.ConfigParser.read", "configparser.ConfigParser.write", "configparser.ConfigParser.remove_option", "configparser.ConfigParser.set", "configparser.ConfigParser.remove_option", "configparser.ConfigParser.set", "configparser.ConfigParser.remove_option", "configparser.ConfigParser.set", "configparser.ConfigParser.remove_option", "configparser.ConfigParser.set", "open", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str", "str"], "function", ["None"], ["", "def", "write_2_config_log", "(", "config_log", ",", "layer", ",", "index", ",", "input_rank", ",", "output_rank", ")", ":", "\n", "    ", "cf", "=", "configparser", ".", "ConfigParser", "(", ")", "\n", "cf", ".", "read", "(", "config_log", ")", "\n", "if", "index", "==", "1", ":", "\n", "        ", "cf", ".", "remove_option", "(", "'first_layer_input_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ")", "\n", "cf", ".", "set", "(", "'first_layer_input_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ",", "str", "(", "input_rank", ")", ")", "\n", "cf", ".", "remove_option", "(", "'first_layer_output_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ")", "\n", "cf", ".", "set", "(", "'first_layer_output_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ",", "str", "(", "output_rank", ")", ")", "\n", "", "else", ":", "\n", "        ", "cf", ".", "remove_option", "(", "'second_layer_input_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ")", "\n", "cf", ".", "set", "(", "'second_layer_input_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ",", "str", "(", "input_rank", ")", ")", "\n", "cf", ".", "remove_option", "(", "'second_layer_output_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ")", "\n", "cf", ".", "set", "(", "'second_layer_output_ranks'", ",", "'layer'", "+", "str", "(", "layer", ")", ",", "str", "(", "output_rank", ")", ")", "\n", "", "cf", ".", "write", "(", "open", "(", "config_log", ",", "'w'", ")", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_3.SRNetC64DE3._build_model": [[12, 125], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1_1", "=", "layers", ".", "conv2d", "(", "actv", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_2", "=", "layers", ".", "conv2d", "(", "conv1_1", ",", "num_outputs", "=", "16", ",", "biases_initializer", "=", "None", ")", "\n", "conv1_3", "=", "layers", ".", "conv2d", "(", "conv1_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv1 = layers.conv2d(actv)", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1_3", ")", ")", "\n", "#conv2_1=layers.conv2d(actv1, num_outputs=16, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv2_2=layers.conv2d(conv2_1, num_outputs=16, biases_initializer=None)", "\n", "#conv2_3=layers.conv2d(conv2_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_72.SRNetC64DE72._build_model": [[12, 125], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "#conv1_1=layers.conv2d(res, num_outputs=16, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv1_2=layers.conv2d(conv1_1, num_outputs=16, biases_initializer=None)", "\n", "#conv1_3=layers.conv2d(conv1_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "16", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv2 = layers.conv2d(actv1)", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tansq_std-net.decom_srnet.SRNetL9L12C64_32.SRNetC64DE32._build_model": [[12, 125], ["tensorflow.contrib.layers.fully_connected", "tensorflow.cast", "tensorflow.cast", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.framework.arg_scope", "tensorflow.contrib.layers.flatten", "tensorflow.transpose", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.avg_pool2d", "tensorflow.add", "tensorflow.variable_scope", "tensorflow.contrib.layers.conv2d", "tensorflow.nn.relu", "tensorflow.contrib.layers.conv2d", "tensorflow.contrib.layers.batch_norm", "tensorflow.reduce_mean", "tensorflow.random_normal_initializer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.variance_scaling_initializer", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.constant_initializer", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm", "tensorflow.contrib.layers.batch_norm"], "methods", ["None"], ["    ", "def", "_build_model", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "self", ".", "inputs", "=", "inputs", "\n", "if", "self", ".", "data_format", "==", "'NCHW'", ":", "\n", "            ", "reduction_axis", "=", "[", "2", ",", "3", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "tf", ".", "transpose", "(", "inputs", ",", "[", "0", ",", "3", ",", "1", ",", "2", "]", ")", ",", "tf", ".", "float32", ")", "\n", "", "else", ":", "\n", "            ", "reduction_axis", "=", "[", "1", ",", "2", "]", "\n", "_inputs", "=", "tf", ".", "cast", "(", "inputs", ",", "tf", ".", "float32", ")", "\n", "", "with", "arg_scope", "(", "[", "layers", ".", "conv2d", "]", ",", "num_outputs", "=", "16", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ",", "\n", "activation_fn", "=", "None", ",", "\n", "weights_initializer", "=", "layers", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "weights_regularizer", "=", "layers", ".", "l2_regularizer", "(", "2e-4", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.2", ")", ",", "\n", "biases_regularizer", "=", "None", ")", ",", "arg_scope", "(", "[", "layers", ".", "batch_norm", "]", ",", "\n", "decay", "=", "0.9", ",", "center", "=", "True", ",", "scale", "=", "True", ",", "\n", "updates_collections", "=", "None", ",", "is_training", "=", "self", ".", "is_training", ",", "\n", "fused", "=", "True", ",", "data_format", "=", "self", ".", "data_format", ")", ",", "arg_scope", "(", "[", "layers", ".", "avg_pool2d", "]", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "stride", "=", "[", "2", ",", "2", "]", ",", "padding", "=", "'SAME'", ",", "\n", "data_format", "=", "self", ".", "data_format", ")", ":", "\n", "            ", "with", "tf", ".", "variable_scope", "(", "'Layer1'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "_inputs", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "3", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer2'", ")", ":", "\n", "                ", "conv", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv", ")", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer3'", ")", ":", "\n", "#conv1_1=layers.conv2d(actv, num_outputs=16, kernel_size=1, padding='VALID',biases_initializer=None)", "\n", "#conv1_2=layers.conv2d(conv1_1, num_outputs=16, biases_initializer=None)", "\n", "#conv1_3=layers.conv2d(conv1_2, num_outputs=16, kernel_size=1, padding='VALID')", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "actv", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2_1", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_2", "=", "layers", ".", "conv2d", "(", "conv2_1", ",", "num_outputs", "=", "16", ",", "biases_initializer", "=", "None", ")", "\n", "conv2_3", "=", "layers", ".", "conv2d", "(", "conv2_2", ",", "num_outputs", "=", "16", ",", "kernel_size", "=", "1", ",", "padding", "=", "'VALID'", ")", "\n", "#conv2 = layers.conv2d(actv1)", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2_3", ")", "\n", "res", "=", "tf", ".", "add", "(", "actv", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer4'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn2", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn2", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer5'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer6'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer7'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "res", "=", "tf", ".", "add", "(", "res", ",", "bn", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer8'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer9'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer10'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer11'", ")", ":", "\n", "                ", "convs", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ",", "kernel_size", "=", "1", ",", "stride", "=", "2", ")", "\n", "convs", "=", "layers", ".", "batch_norm", "(", "convs", ")", "\n", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "pool", "=", "layers", ".", "avg_pool2d", "(", "bn", ")", "\n", "res", "=", "tf", ".", "add", "(", "convs", ",", "pool", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Layer12'", ")", ":", "\n", "                ", "conv1", "=", "layers", ".", "conv2d", "(", "res", ",", "num_outputs", "=", "64", ")", "\n", "actv1", "=", "tf", ".", "nn", ".", "relu", "(", "layers", ".", "batch_norm", "(", "conv1", ")", ")", "\n", "conv2", "=", "layers", ".", "conv2d", "(", "actv1", ",", "num_outputs", "=", "64", ")", "\n", "bn", "=", "layers", ".", "batch_norm", "(", "conv2", ")", "\n", "avgp", "=", "tf", ".", "reduce_mean", "(", "bn", ",", "reduction_axis", ",", "keep_dims", "=", "True", ")", "\n", "", "", "ip", "=", "layers", ".", "fully_connected", "(", "layers", ".", "flatten", "(", "avgp", ")", ",", "num_outputs", "=", "2", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ",", "\n", "weights_initializer", "=", "tf", ".", "random_normal_initializer", "(", "mean", "=", "0.", ",", "stddev", "=", "0.01", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "constant_initializer", "(", "0.", ")", ",", "scope", "=", "'ip'", ")", "\n", "self", ".", "outputs", "=", "ip", "\n", "return", "self", ".", "outputs", "\n", "", "", ""]]}