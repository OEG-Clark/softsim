{"home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.postprocess_text.replace_word_list": [[66, 70], ["list"], "function", ["None"], ["def", "replace_word_list", "(", "listS", ",", "i", ",", "w", ")", ":", "\n", "\t", "new_sentence", "=", "list", "(", "listS", ")", "\n", "new_sentence", "[", "i", "]", "=", "w", "\n", "return", "new_sentence", "\n", "\n"]], "home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.postprocess_text.same_case": [[74, 81], ["w.isupper", "w2.upper", "w[].isupper", "w2.capitalize"], "function", ["None"], ["", "def", "same_case", "(", "w", ",", "w2", ")", ":", "\n", "\t", "if", "w", ".", "isupper", "(", ")", ":", "\n", "\t\t", "return", "w2", ".", "upper", "(", ")", "\n", "", "elif", "w", "[", "0", "]", ".", "isupper", "(", ")", ":", "\n", "\t\t", "return", "w2", ".", "capitalize", "(", ")", "\n", "", "else", ":", "\n", "\t\t", "return", "w2", "\n", "\n"]], "home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.postprocess_text.candidate_sentences_i": [[85, 97], ["w_orig.lower", "postprocess_text.same_case", "alternative_sentences.append", "replacements.append", "postprocess_text.replace_word_list"], "function", ["home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.postprocess_text.same_case", "home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.postprocess_text.replace_word_list"], ["", "", "def", "candidate_sentences_i", "(", "listS", ",", "i", ")", ":", "\n", "\t", "alternative_sentences", "=", "[", "listS", "]", "\n", "replacements", "=", "[", "[", "]", "]", "\n", "w_orig", "=", "listS", "[", "i", "]", "\n", "w", "=", "w_orig", ".", "lower", "(", ")", "\n", "if", "w", "in", "unrecognized_words_list", ":", "\n", "\t\t", "altern", "=", "alternative_dict", "[", "w", "]", "\n", "for", "alt_lower", "in", "altern", ":", "\n", "\t\t\t", "alt", "=", "same_case", "(", "w_orig", ",", "alt_lower", ")", "#Same case as the original word", "\n", "alternative_sentences", ".", "append", "(", "replace_word_list", "(", "listS", ",", "i", ",", "alt", ")", ")", "\n", "replacements", ".", "append", "(", "[", "w_orig", ",", "alt", "]", ")", "\n", "", "", "return", "alternative_sentences", ",", "replacements", "\n", "\n"]], "home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.postprocess_text.sentence_score": [[101, 103], ["LMmodel.score"], "function", ["None"], ["", "def", "sentence_score", "(", "listS", ")", ":", "\n", "\t", "return", "LMmodel", ".", "score", "(", "\" \"", ".", "join", "(", "listS", ")", ".", "lower", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.postprocess_text.postproc_sentence": [[106, 118], ["list", "range", "s.strip().split", "len", "postprocess_text.candidate_sentences_i", "scores.index", "replacements_list.append", "detok.detokenize", "postprocess_text.sentence_score", "max", "s.strip"], "function", ["home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.postprocess_text.candidate_sentences_i", "home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.postprocess_text.sentence_score"], ["", "def", "postproc_sentence", "(", "s", ")", ":", "\n", "\t", "listS", "=", "list", "(", "s", ".", "strip", "(", ")", ".", "split", "(", "\" \"", ")", ")", "\n", "replacements_list", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "0", ",", "len", "(", "listS", ")", ")", ":", "\n", "\t\t", "candidates", ",", "replacements", "=", "candidate_sentences_i", "(", "listS", ",", "i", ")", "\n", "scores", "=", "[", "sentence_score", "(", "x", ")", "for", "x", "in", "candidates", "]", "\n", "best_sentence_idx", "=", "scores", ".", "index", "(", "max", "(", "scores", ")", ")", "\n", "#Replace the sentence with the best candidate", "\n", "listS", "=", "candidates", "[", "best_sentence_idx", "]", "\n", "replacements_list", ".", "append", "(", "replacements", "[", "best_sentence_idx", "]", ")", "\n", "#return \" \".join(listS),replacements_list", "\n", "", "return", "detok", ".", "detokenize", "(", "listS", ")", ",", "replacements_list", "\n", "\n"]], "home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.postprocess_text.format_replacements_list": [[126, 132], ["len", "replac_list_out.append"], "function", ["None"], ["", "def", "format_replacements_list", "(", "replac_list", ")", ":", "\n", "\t", "replac_list_out", "=", "[", "]", "\n", "for", "x", "in", "replac_list", ":", "\n", "\t\t", "if", "len", "(", "x", ")", ">", "0", ":", "\n", "\t\t\t", "replac_list_out", ".", "append", "(", "x", "[", "0", "]", "+", "\"->\"", "+", "x", "[", "1", "]", ")", "\n", "", "", "return", "\"; \"", ".", "join", "(", "replac_list_out", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.get_replacement_dict.has_ambig_char": [[56, 58], ["len", "set().intersection", "ambig_chars.keys", "set", "w.lower"], "function", ["None"], ["def", "has_ambig_char", "(", "w", ")", ":", "\n", "\t", "return", "len", "(", "set", "(", "w", ".", "lower", "(", ")", ")", ".", "intersection", "(", "ambig_chars", ".", "keys", "(", ")", ")", ")", ">", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.get_replacement_dict.is_unrecognized": [[60, 62], ["w.lower", "set"], "function", ["None"], ["", "def", "is_unrecognized", "(", "w", ")", ":", "\n", "\t", "return", "w", ".", "lower", "(", ")", "not", "in", "set", "(", "choices", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.get_replacement_dict.replace_ambig": [[66, 78], ["list", "range", "set", "len", "ambig_chars.keys", "list", "get_replacement_dict.is_unrecognized", "altern.append"], "function", ["home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.get_replacement_dict.is_unrecognized"], ["", "def", "replace_ambig", "(", "w", ")", ":", "\n", "\t", "listw", "=", "list", "(", "w", ")", "\n", "altern", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "0", ",", "len", "(", "listw", ")", ")", ":", "\n", "\t\t", "current_char", "=", "listw", "[", "i", "]", "\n", "if", "current_char", "in", "ambig_chars", ".", "keys", "(", ")", ":", "\n", "\t\t\t", "new_word", "=", "list", "(", "w", ")", "\n", "new_word", "[", "i", "]", "=", "ambig_chars", "[", "current_char", "]", "\n", "new_word", "=", "\"\"", ".", "join", "(", "new_word", ")", "\n", "if", "not", "is_unrecognized", "(", "new_word", ")", ":", "\n", "\t\t\t\t", "altern", ".", "append", "(", "new_word", ")", "\n", "", "", "", "return", "set", "(", "altern", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.get_replacement_dict.get_close_matches": [[81, 83], ["set", "difflib.get_close_matches", "w.lower"], "function", ["home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.get_replacement_dict.get_close_matches"], ["", "def", "get_close_matches", "(", "w", ")", ":", "\n", "\t", "return", "set", "(", "difflib", ".", "get_close_matches", "(", "w", ".", "lower", "(", ")", ",", "choices", ",", "3", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.get_replacement_dict.split_word": [[86, 95], ["range", "set", "len", "altern.append", "len", "w1.lower", "w2.lower"], "function", ["None"], ["", "def", "split_word", "(", "w", ")", ":", "\n", "\t", "altern", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "1", ",", "len", "(", "w", ")", "-", "1", ")", ":", "\n", "\t\t", "w1", "=", "w", "[", "0", ":", "i", "]", "\n", "w2", "=", "w", "[", "i", ":", "len", "(", "w", ")", "]", "\n", "if", "(", "w1", ".", "lower", "(", ")", "in", "choices", ")", "and", "(", "w2", ".", "lower", "(", ")", "in", "choices", ")", ":", "\n", "\t\t\t", "splited_w", "=", "w1", "+", "\" \"", "+", "w2", "\n", "altern", ".", "append", "(", "splited_w", ")", "\n", "", "", "return", "set", "(", "altern", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.get_replacement_dict.get_altern": [[101, 109], ["set", "get_replacement_dict.has_ambig_char", "get_replacement_dict.is_unrecognized", "set", "altern.union.union", "altern.union.union", "altern.union.union", "get_replacement_dict.replace_ambig", "get_replacement_dict.get_close_matches", "get_replacement_dict.split_word"], "function", ["home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.get_replacement_dict.has_ambig_char", "home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.get_replacement_dict.is_unrecognized", "home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.get_replacement_dict.replace_ambig", "home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.get_replacement_dict.get_close_matches", "home.repos.pwc.inspect_result.alberto-poncelas_tesseract_postprocess.postprocess.get_replacement_dict.split_word"], ["", "def", "get_altern", "(", "w", ")", ":", "\n", "\t", "altern", "=", "set", "(", ")", "\n", "if", "has_ambig_char", "(", "w", ")", ":", "\n", "\t\t", "altern", "=", "altern", ".", "union", "(", "replace_ambig", "(", "w", ")", ")", "\n", "", "if", "is_unrecognized", "(", "w", ")", ":", "\n", "\t\t", "altern", "=", "altern", ".", "union", "(", "get_close_matches", "(", "w", ")", ")", "\n", "altern", "=", "altern", ".", "union", "(", "split_word", "(", "w", ")", ")", "\n", "", "return", "set", "(", "altern", ")", "\n", "\n"]]}