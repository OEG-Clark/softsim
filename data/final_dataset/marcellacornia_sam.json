{"home.repos.pwc.inspect_result.marcellacornia_sam.None.gaussian_prior.LearningPrior.__init__": [[12, 26], ["keras.initializations.get", "keras.regularizers.get", "keras.regularizers.get", "keras.constraints.get", "keras.layers.Layer.__init__", "keras.layers.InputSpec"], "methods", ["home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.__init__"], ["    ", "def", "__init__", "(", "self", ",", "nb_gaussian", ",", "init", "=", "'normal'", ",", "weights", "=", "None", ",", "\n", "W_regularizer", "=", "None", ",", "activity_regularizer", "=", "None", ",", "\n", "W_constraint", "=", "None", ",", "**", "kwargs", ")", ":", "\n", "        ", "self", ".", "nb_gaussian", "=", "nb_gaussian", "\n", "self", ".", "init", "=", "initializations", ".", "get", "(", "init", ",", "dim_ordering", "=", "'th'", ")", "\n", "\n", "self", ".", "W_regularizer", "=", "regularizers", ".", "get", "(", "W_regularizer", ")", "\n", "self", ".", "activity_regularizer", "=", "regularizers", ".", "get", "(", "activity_regularizer", ")", "\n", "\n", "self", ".", "W_constraint", "=", "constraints", ".", "get", "(", "W_constraint", ")", "\n", "\n", "self", ".", "input_spec", "=", "[", "InputSpec", "(", "ndim", "=", "4", ")", "]", "\n", "self", ".", "initial_weights", "=", "weights", "\n", "super", "(", "LearningPrior", ",", "self", ")", ".", "__init__", "(", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.gaussian_prior.LearningPrior.build": [[27, 49], ["gaussian_prior.LearningPrior.init", "gaussian_prior.LearningPrior.W_regularizer.set_param", "gaussian_prior.LearningPrior.regularizers.append", "gaussian_prior.LearningPrior.activity_regularizer.set_layer", "gaussian_prior.LearningPrior.regularizers.append", "gaussian_prior.LearningPrior.set_weights"], "methods", ["None"], ["", "def", "build", "(", "self", ",", "input_shape", ")", ":", "\n", "        ", "self", ".", "W_shape", "=", "(", "self", ".", "nb_gaussian", "*", "4", ",", ")", "\n", "self", ".", "W", "=", "self", ".", "init", "(", "self", ".", "W_shape", ",", "name", "=", "'{}_W'", ".", "format", "(", "self", ".", "name", ")", ")", "\n", "\n", "self", ".", "trainable_weights", "=", "[", "self", ".", "W", "]", "\n", "\n", "self", ".", "regularizers", "=", "[", "]", "\n", "if", "self", ".", "W_regularizer", ":", "\n", "            ", "self", ".", "W_regularizer", ".", "set_param", "(", "self", ".", "W", ")", "\n", "self", ".", "regularizers", ".", "append", "(", "self", ".", "W_regularizer", ")", "\n", "\n", "", "if", "self", ".", "activity_regularizer", ":", "\n", "            ", "self", ".", "activity_regularizer", ".", "set_layer", "(", "self", ")", "\n", "self", ".", "regularizers", ".", "append", "(", "self", ".", "activity_regularizer", ")", "\n", "\n", "", "if", "self", ".", "initial_weights", "is", "not", "None", ":", "\n", "            ", "self", ".", "set_weights", "(", "self", ".", "initial_weights", ")", "\n", "del", "self", ".", "initial_weights", "\n", "\n", "", "self", ".", "constraints", "=", "{", "}", "\n", "if", "self", ".", "W_constraint", ":", "\n", "            ", "self", ".", "constraints", "[", "self", ".", "W", "]", "=", "self", ".", "W_constraint", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.gaussian_prior.LearningPrior.get_output_shape_for": [[50, 56], ["None"], "methods", ["None"], ["", "", "def", "get_output_shape_for", "(", "self", ",", "input_shape", ")", ":", "\n", "        ", "self", ".", "b_s", "=", "input_shape", "[", "0", "]", "\n", "self", ".", "height", "=", "input_shape", "[", "2", "]", "\n", "self", ".", "width", "=", "input_shape", "[", "3", "]", "\n", "\n", "return", "self", ".", "b_s", ",", "self", ".", "nb_gaussian", ",", "self", ".", "height", ",", "self", ".", "width", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.gaussian_prior.LearningPrior.call": [[57, 94], ["keras.clip", "keras.clip", "keras.clip", "keras.clip", "theano.dot", "theano.dot", "theano.dot", "theano.dot", "keras.repeat_elements", "keras.repeat_elements", "keras.permute_dimensions", "keras.repeat_elements", "keras.repeat_elements", "theano.ones", "theano.ones", "gaussian_prior.LearningPrior._linspace().dimshuffle", "gaussian_prior.LearningPrior._linspace().dimshuffle", "theano.ones", "theano.ones", "keras.expand_dims", "keras.expand_dims", "theano.exp", "theano.exp", "keras.expand_dims", "keras.expand_dims", "keras.repeat_elements", "gaussian_prior.LearningPrior._linspace", "gaussian_prior.LearningPrior._linspace", "keras.epsilon", "keras.expand_dims", "keras.max", "keras.max", "keras.epsilon", "keras.epsilon"], "methods", ["home.repos.pwc.inspect_result.marcellacornia_sam.None.gaussian_prior.LearningPrior._linspace", "home.repos.pwc.inspect_result.marcellacornia_sam.None.gaussian_prior.LearningPrior._linspace"], ["", "def", "call", "(", "self", ",", "x", ",", "mask", "=", "None", ")", ":", "\n", "        ", "mu_x", "=", "self", ".", "W", "[", ":", "self", ".", "nb_gaussian", "]", "\n", "mu_y", "=", "self", ".", "W", "[", "self", ".", "nb_gaussian", ":", "self", ".", "nb_gaussian", "*", "2", "]", "\n", "sigma_x", "=", "self", ".", "W", "[", "self", ".", "nb_gaussian", "*", "2", ":", "self", ".", "nb_gaussian", "*", "3", "]", "\n", "sigma_y", "=", "self", ".", "W", "[", "self", ".", "nb_gaussian", "*", "3", ":", "]", "\n", "\n", "self", ".", "b_s", "=", "x", ".", "shape", "[", "0", "]", "\n", "self", ".", "height", "=", "x", ".", "shape", "[", "2", "]", "\n", "self", ".", "width", "=", "x", ".", "shape", "[", "3", "]", "\n", "\n", "e", "=", "self", ".", "height", "/", "self", ".", "width", "\n", "e1", "=", "(", "1", "-", "e", ")", "/", "2", "\n", "e2", "=", "e1", "+", "e", "\n", "\n", "mu_x", "=", "K", ".", "clip", "(", "mu_x", ",", "0.25", ",", "0.75", ")", "\n", "mu_y", "=", "K", ".", "clip", "(", "mu_y", ",", "0.35", ",", "0.65", ")", "\n", "\n", "sigma_x", "=", "K", ".", "clip", "(", "sigma_x", ",", "0.1", ",", "0.9", ")", "\n", "sigma_y", "=", "K", ".", "clip", "(", "sigma_y", ",", "0.2", ",", "0.8", ")", "\n", "\n", "x_t", "=", "T", ".", "dot", "(", "T", ".", "ones", "(", "(", "self", ".", "height", ",", "1", ")", ")", ",", "self", ".", "_linspace", "(", "0", ",", "1.0", ",", "self", ".", "width", ")", ".", "dimshuffle", "(", "'x'", ",", "0", ")", ")", "\n", "y_t", "=", "T", ".", "dot", "(", "self", ".", "_linspace", "(", "e1", ",", "e2", ",", "self", ".", "height", ")", ".", "dimshuffle", "(", "0", ",", "'x'", ")", ",", "T", ".", "ones", "(", "(", "1", ",", "self", ".", "width", ")", ")", ")", "\n", "\n", "x_t", "=", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "x_t", ",", "dim", "=", "-", "1", ")", ",", "self", ".", "nb_gaussian", ",", "axis", "=", "-", "1", ")", "\n", "y_t", "=", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "y_t", ",", "dim", "=", "-", "1", ")", ",", "self", ".", "nb_gaussian", ",", "axis", "=", "-", "1", ")", "\n", "\n", "gaussian", "=", "1", "/", "(", "2", "*", "np", ".", "pi", "*", "sigma_x", "*", "sigma_y", "+", "K", ".", "epsilon", "(", ")", ")", "*", "T", ".", "exp", "(", "-", "(", "(", "x_t", "-", "mu_x", ")", "**", "2", "/", "(", "2", "*", "sigma_x", "**", "2", "+", "K", ".", "epsilon", "(", ")", ")", "+", "\n", "(", "y_t", "-", "mu_y", ")", "**", "2", "/", "(", "2", "*", "sigma_y", "**", "2", "+", "K", ".", "epsilon", "(", ")", ")", ")", ")", "\n", "\n", "gaussian", "=", "K", ".", "permute_dimensions", "(", "gaussian", ",", "(", "2", ",", "0", ",", "1", ")", ")", "\n", "max_gauss", "=", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "max", "(", "K", ".", "max", "(", "gaussian", ",", "axis", "=", "1", ")", ",", "axis", "=", "1", ")", ")", ",", "self", ".", "height", ",", "axis", "=", "-", "1", ")", ")", ",", "self", ".", "width", ",", "axis", "=", "-", "1", ")", "\n", "gaussian", "=", "gaussian", "/", "max_gauss", "\n", "\n", "output", "=", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "gaussian", ",", "dim", "=", "0", ")", ",", "self", ".", "b_s", ",", "axis", "=", "0", ")", "\n", "\n", "return", "output", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.gaussian_prior.LearningPrior._linspace": [[95, 104], ["theano.cast", "theano.cast", "theano.cast", "theano.cast", "theano.cast", "theano.cast", "theano.arange", "theano.arange"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "_linspace", "(", "start", ",", "stop", ",", "num", ")", ":", "\n", "# produces results identical to:", "\n", "# np.linspace(start, stop, num)", "\n", "        ", "start", "=", "T", ".", "cast", "(", "start", ",", "floatX", ")", "\n", "stop", "=", "T", ".", "cast", "(", "stop", ",", "floatX", ")", "\n", "num", "=", "T", ".", "cast", "(", "num", ",", "floatX", ")", "\n", "step", "=", "(", "stop", "-", "start", ")", "/", "(", "num", "-", "1", ")", "\n", "return", "T", ".", "arange", "(", "num", ",", "dtype", "=", "floatX", ")", "*", "step", "+", "start", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.gaussian_prior.LearningPrior.get_config": [[105, 114], ["super().get_config", "dict", "gaussian_prior.LearningPrior.W_regularizer.get_config", "gaussian_prior.LearningPrior.activity_regularizer.get_config", "gaussian_prior.LearningPrior.W_constraint.get_config", "list", "list", "super().get_config.items", "config.items"], "methods", ["home.repos.pwc.inspect_result.marcellacornia_sam.None.gaussian_prior.LearningPrior.get_config", "home.repos.pwc.inspect_result.marcellacornia_sam.None.gaussian_prior.LearningPrior.get_config", "home.repos.pwc.inspect_result.marcellacornia_sam.None.gaussian_prior.LearningPrior.get_config", "home.repos.pwc.inspect_result.marcellacornia_sam.None.gaussian_prior.LearningPrior.get_config"], ["", "def", "get_config", "(", "self", ")", ":", "\n", "        ", "config", "=", "{", "'nb_gaussian'", ":", "self", ".", "nb_gaussian", ",", "\n", "'init'", ":", "self", ".", "init", ".", "__name__", ",", "\n", "'W_regularizer'", ":", "self", ".", "W_regularizer", ".", "get_config", "(", ")", "if", "self", ".", "W_regularizer", "else", "None", ",", "\n", "'activity_regularizer'", ":", "self", ".", "activity_regularizer", ".", "get_config", "(", ")", "if", "self", ".", "activity_regularizer", "else", "None", ",", "\n", "'W_constraint'", ":", "self", ".", "W_constraint", ".", "get_config", "(", ")", "if", "self", ".", "W_constraint", "else", "None", ",", "\n", "}", "\n", "base_config", "=", "super", "(", "LearningPrior", ",", "self", ")", ".", "get_config", "(", ")", "\n", "return", "dict", "(", "list", "(", "base_config", ".", "items", "(", ")", ")", "+", "list", "(", "config", ".", "items", "(", ")", ")", ")", "", "", "", ""]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.models.repeat": [[14, 16], ["keras.reshape", "keras.repeat", "keras.batch_flatten"], "function", ["home.repos.pwc.inspect_result.marcellacornia_sam.None.models.repeat"], ["def", "repeat", "(", "x", ")", ":", "\n", "    ", "return", "K", ".", "reshape", "(", "K", ".", "repeat", "(", "K", ".", "batch_flatten", "(", "x", ")", ",", "nb_timestep", ")", ",", "(", "b_s", ",", "nb_timestep", ",", "512", ",", "shape_r_gt", ",", "shape_c_gt", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.models.repeat_shape": [[18, 20], ["None"], "function", ["None"], ["", "def", "repeat_shape", "(", "s", ")", ":", "\n", "    ", "return", "(", "s", "[", "0", "]", ",", "nb_timestep", ")", "+", "s", "[", "1", ":", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.models.upsampling": [[22, 24], ["theano.nnet.abstract_conv.bilinear_upsampling"], "function", ["None"], ["", "def", "upsampling", "(", "x", ")", ":", "\n", "    ", "return", "T", ".", "nnet", ".", "abstract_conv", ".", "bilinear_upsampling", "(", "input", "=", "x", ",", "ratio", "=", "upsampling_factor", ",", "num_input_channels", "=", "1", ",", "batch_size", "=", "b_s", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.models.upsampling_shape": [[26, 28], ["None"], "function", ["None"], ["", "def", "upsampling_shape", "(", "s", ")", ":", "\n", "    ", "return", "s", "[", ":", "2", "]", "+", "(", "s", "[", "2", "]", "*", "upsampling_factor", ",", "s", "[", "3", "]", "*", "upsampling_factor", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.models.kl_divergence": [[31, 44], ["keras.repeat_elements", "keras.repeat_elements", "keras.repeat_elements", "keras.expand_dims", "keras.expand_dims", "keras.expand_dims", "keras.epsilon", "keras.epsilon", "keras.sum", "keras.repeat_elements", "keras.repeat_elements", "keras.repeat_elements", "keras.sum", "keras.expand_dims", "keras.expand_dims", "keras.expand_dims", "keras.max", "keras.sum", "keras.sum", "keras.log", "keras.max", "keras.sum", "keras.sum", "keras.epsilon", "keras.epsilon"], "function", ["None"], ["", "def", "kl_divergence", "(", "y_true", ",", "y_pred", ")", ":", "\n", "    ", "max_y_pred", "=", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "max", "(", "K", ".", "max", "(", "y_pred", ",", "axis", "=", "2", ")", ",", "axis", "=", "2", ")", ")", ",", "\n", "shape_r_out", ",", "axis", "=", "-", "1", ")", ")", ",", "shape_c_out", ",", "axis", "=", "-", "1", ")", "\n", "y_pred", "/=", "max_y_pred", "\n", "\n", "sum_y_true", "=", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "sum", "(", "K", ".", "sum", "(", "y_true", ",", "axis", "=", "2", ")", ",", "axis", "=", "2", ")", ")", ",", "\n", "shape_r_out", ",", "axis", "=", "-", "1", ")", ")", ",", "shape_c_out", ",", "axis", "=", "-", "1", ")", "\n", "sum_y_pred", "=", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "sum", "(", "K", ".", "sum", "(", "y_pred", ",", "axis", "=", "2", ")", ",", "axis", "=", "2", ")", ")", ",", "\n", "shape_r_out", ",", "axis", "=", "-", "1", ")", ")", ",", "shape_c_out", ",", "axis", "=", "-", "1", ")", "\n", "y_true", "/=", "(", "sum_y_true", "+", "K", ".", "epsilon", "(", ")", ")", "\n", "y_pred", "/=", "(", "sum_y_pred", "+", "K", ".", "epsilon", "(", ")", ")", "\n", "\n", "return", "10", "*", "K", ".", "sum", "(", "K", ".", "sum", "(", "y_true", "*", "K", ".", "log", "(", "(", "y_true", "/", "(", "y_pred", "+", "K", ".", "epsilon", "(", ")", ")", ")", "+", "K", ".", "epsilon", "(", ")", ")", ",", "axis", "=", "-", "1", ")", ",", "axis", "=", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.models.correlation_coefficient": [[47, 71], ["keras.repeat_elements", "keras.repeat_elements", "keras.repeat_elements", "keras.sum", "keras.sum", "keras.sum", "keras.sum", "keras.sum", "keras.sqrt", "keras.expand_dims", "keras.expand_dims", "keras.expand_dims", "keras.epsilon", "keras.epsilon", "keras.sum", "keras.sum", "keras.sum", "keras.sum", "keras.sum", "keras.repeat_elements", "keras.repeat_elements", "keras.repeat_elements", "keras.square", "keras.square", "keras.expand_dims", "keras.expand_dims", "keras.expand_dims", "keras.max", "keras.sum", "keras.sum", "keras.square", "keras.square", "keras.max", "keras.sum", "keras.sum"], "function", ["None"], ["", "def", "correlation_coefficient", "(", "y_true", ",", "y_pred", ")", ":", "\n", "    ", "max_y_pred", "=", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "max", "(", "K", ".", "max", "(", "y_pred", ",", "axis", "=", "2", ")", ",", "axis", "=", "2", ")", ")", ",", "\n", "shape_r_out", ",", "axis", "=", "-", "1", ")", ")", ",", "shape_c_out", ",", "axis", "=", "-", "1", ")", "\n", "y_pred", "/=", "max_y_pred", "\n", "\n", "sum_y_true", "=", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "sum", "(", "K", ".", "sum", "(", "y_true", ",", "axis", "=", "2", ")", ",", "axis", "=", "2", ")", ")", ",", "\n", "shape_r_out", ",", "axis", "=", "-", "1", ")", ")", ",", "shape_c_out", ",", "axis", "=", "-", "1", ")", "\n", "sum_y_pred", "=", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "sum", "(", "K", ".", "sum", "(", "y_pred", ",", "axis", "=", "2", ")", ",", "axis", "=", "2", ")", ")", ",", "\n", "shape_r_out", ",", "axis", "=", "-", "1", ")", ")", ",", "shape_c_out", ",", "axis", "=", "-", "1", ")", "\n", "\n", "y_true", "/=", "(", "sum_y_true", "+", "K", ".", "epsilon", "(", ")", ")", "\n", "y_pred", "/=", "(", "sum_y_pred", "+", "K", ".", "epsilon", "(", ")", ")", "\n", "\n", "N", "=", "shape_r_out", "*", "shape_c_out", "\n", "sum_prod", "=", "K", ".", "sum", "(", "K", ".", "sum", "(", "y_true", "*", "y_pred", ",", "axis", "=", "2", ")", ",", "axis", "=", "2", ")", "\n", "sum_x", "=", "K", ".", "sum", "(", "K", ".", "sum", "(", "y_true", ",", "axis", "=", "2", ")", ",", "axis", "=", "2", ")", "\n", "sum_y", "=", "K", ".", "sum", "(", "K", ".", "sum", "(", "y_pred", ",", "axis", "=", "2", ")", ",", "axis", "=", "2", ")", "\n", "sum_x_square", "=", "K", ".", "sum", "(", "K", ".", "sum", "(", "K", ".", "square", "(", "y_true", ")", ",", "axis", "=", "2", ")", ",", "axis", "=", "2", ")", "\n", "sum_y_square", "=", "K", ".", "sum", "(", "K", ".", "sum", "(", "K", ".", "square", "(", "y_pred", ")", ",", "axis", "=", "2", ")", ",", "axis", "=", "2", ")", "\n", "\n", "num", "=", "sum_prod", "-", "(", "(", "sum_x", "*", "sum_y", ")", "/", "N", ")", "\n", "den", "=", "K", ".", "sqrt", "(", "(", "sum_x_square", "-", "K", ".", "square", "(", "sum_x", ")", "/", "N", ")", "*", "(", "sum_y_square", "-", "K", ".", "square", "(", "sum_y", ")", "/", "N", ")", ")", "\n", "\n", "return", "-", "2", "*", "num", "/", "den", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.models.nss": [[74, 91], ["keras.repeat_elements", "keras.batch_flatten", "keras.mean", "keras.repeat_elements", "keras.std", "keras.repeat_elements", "keras.expand_dims", "keras.expand_dims", "keras.expand_dims", "keras.repeat_elements", "keras.repeat_elements", "keras.repeat_elements", "keras.epsilon", "keras.sum", "keras.sum", "keras.expand_dims", "keras.expand_dims", "keras.expand_dims", "keras.sum", "keras.sum", "keras.max", "keras.expand_dims", "keras.expand_dims", "keras.max"], "function", ["None"], ["", "def", "nss", "(", "y_true", ",", "y_pred", ")", ":", "\n", "    ", "max_y_pred", "=", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "max", "(", "K", ".", "max", "(", "y_pred", ",", "axis", "=", "2", ")", ",", "axis", "=", "2", ")", ")", ",", "\n", "shape_r_out", ",", "axis", "=", "-", "1", ")", ")", ",", "shape_c_out", ",", "axis", "=", "-", "1", ")", "\n", "y_pred", "/=", "max_y_pred", "\n", "y_pred_flatten", "=", "K", ".", "batch_flatten", "(", "y_pred", ")", "\n", "\n", "y_mean", "=", "K", ".", "mean", "(", "y_pred_flatten", ",", "axis", "=", "-", "1", ")", "\n", "y_mean", "=", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "expand_dims", "(", "y_mean", ")", ")", ",", "\n", "shape_r_out", ",", "axis", "=", "-", "1", ")", ")", ",", "shape_c_out", ",", "axis", "=", "-", "1", ")", "\n", "\n", "y_std", "=", "K", ".", "std", "(", "y_pred_flatten", ",", "axis", "=", "-", "1", ")", "\n", "y_std", "=", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "repeat_elements", "(", "K", ".", "expand_dims", "(", "K", ".", "expand_dims", "(", "y_std", ")", ")", ",", "\n", "shape_r_out", ",", "axis", "=", "-", "1", ")", ")", ",", "shape_c_out", ",", "axis", "=", "-", "1", ")", "\n", "\n", "y_pred", "=", "(", "y_pred", "-", "y_mean", ")", "/", "(", "y_std", "+", "K", ".", "epsilon", "(", ")", ")", "\n", "\n", "return", "-", "(", "K", ".", "sum", "(", "K", ".", "sum", "(", "y_true", "*", "y_pred", ",", "axis", "=", "2", ")", ",", "axis", "=", "2", ")", "/", "K", ".", "sum", "(", "K", ".", "sum", "(", "y_true", ",", "axis", "=", "2", ")", ",", "axis", "=", "2", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.models.gaussian_priors_init": [[94, 98], ["numpy.random.uniform", "numpy.random.uniform", "keras.variable", "numpy.concatenate"], "function", ["None"], ["", "def", "gaussian_priors_init", "(", "shape", ",", "name", "=", "None", ")", ":", "\n", "    ", "means", "=", "np", ".", "random", ".", "uniform", "(", "low", "=", "0.3", ",", "high", "=", "0.7", ",", "size", "=", "shape", "[", "0", "]", "//", "2", ")", "\n", "covars", "=", "np", ".", "random", ".", "uniform", "(", "low", "=", "0.05", ",", "high", "=", "0.3", ",", "size", "=", "shape", "[", "0", "]", "//", "2", ")", "\n", "return", "K", ".", "variable", "(", "np", ".", "concatenate", "(", "(", "means", ",", "covars", ")", ",", "axis", "=", "0", ")", ",", "name", "=", "name", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.models.sam_vgg": [[100, 126], ["dcn_vgg.dcn_vgg", "keras.layers.merge", "keras.layers.merge", "keras.layers.Lambda", "attentive_convlstm.AttentiveConvLSTM", "gaussian_prior.LearningPrior", "keras.layers.convolutional.AtrousConvolution2D", "gaussian_prior.LearningPrior", "keras.layers.convolutional.AtrousConvolution2D", "keras.layers.convolutional.Convolution2D", "keras.layers.Lambda"], "function", ["home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_vgg.dcn_vgg"], ["", "def", "sam_vgg", "(", "x", ")", ":", "\n", "# Dilated Convolutional Network", "\n", "    ", "dcn", "=", "dcn_vgg", "(", "input_tensor", "=", "x", "[", "0", "]", ")", "\n", "\n", "# Attentive Convolutional LSTM", "\n", "att_convlstm", "=", "Lambda", "(", "repeat", ",", "repeat_shape", ")", "(", "dcn", ".", "output", ")", "\n", "att_convlstm", "=", "AttentiveConvLSTM", "(", "nb_filters_in", "=", "512", ",", "nb_filters_out", "=", "512", ",", "nb_filters_att", "=", "512", ",", "\n", "nb_cols", "=", "3", ",", "nb_rows", "=", "3", ")", "(", "att_convlstm", ")", "\n", "\n", "# Learned Prior (1)", "\n", "priors1", "=", "LearningPrior", "(", "nb_gaussian", "=", "nb_gaussian", ",", "init", "=", "gaussian_priors_init", ")", "(", "x", "[", "1", "]", ")", "\n", "concateneted", "=", "merge", "(", "[", "att_convlstm", ",", "priors1", "]", ",", "mode", "=", "'concat'", ",", "concat_axis", "=", "1", ")", "\n", "learned_priors1", "=", "AtrousConvolution2D", "(", "512", ",", "5", ",", "5", ",", "border_mode", "=", "'same'", ",", "activation", "=", "'relu'", ",", "\n", "atrous_rate", "=", "(", "4", ",", "4", ")", ")", "(", "concateneted", ")", "\n", "\n", "# Learned Prior (2)", "\n", "priors2", "=", "LearningPrior", "(", "nb_gaussian", "=", "nb_gaussian", ",", "init", "=", "gaussian_priors_init", ")", "(", "x", "[", "1", "]", ")", "\n", "concateneted", "=", "merge", "(", "[", "learned_priors1", ",", "priors2", "]", ",", "mode", "=", "'concat'", ",", "concat_axis", "=", "1", ")", "\n", "learned_priors2", "=", "AtrousConvolution2D", "(", "512", ",", "5", ",", "5", ",", "border_mode", "=", "'same'", ",", "activation", "=", "'relu'", ",", "\n", "atrous_rate", "=", "(", "4", ",", "4", ")", ")", "(", "concateneted", ")", "\n", "\n", "# Final Convolutional Layer", "\n", "outs", "=", "Convolution2D", "(", "1", ",", "1", ",", "1", ",", "border_mode", "=", "'same'", ",", "activation", "=", "'relu'", ")", "(", "learned_priors2", ")", "\n", "outs_up", "=", "Lambda", "(", "upsampling", ",", "upsampling_shape", ")", "(", "outs", ")", "\n", "\n", "return", "[", "outs_up", ",", "outs_up", ",", "outs_up", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.models.sam_resnet": [[128, 155], ["dcn_resnet.dcn_resnet", "keras.layers.merge", "keras.layers.merge", "keras.layers.convolutional.Convolution2D", "keras.layers.Lambda", "attentive_convlstm.AttentiveConvLSTM", "gaussian_prior.LearningPrior", "keras.layers.convolutional.AtrousConvolution2D", "gaussian_prior.LearningPrior", "keras.layers.convolutional.AtrousConvolution2D", "keras.layers.convolutional.Convolution2D", "keras.layers.Lambda"], "function", ["home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.dcn_resnet"], ["", "def", "sam_resnet", "(", "x", ")", ":", "\n", "# Dilated Convolutional Network", "\n", "    ", "dcn", "=", "dcn_resnet", "(", "input_tensor", "=", "x", "[", "0", "]", ")", "\n", "conv_feat", "=", "Convolution2D", "(", "512", ",", "3", ",", "3", ",", "border_mode", "=", "'same'", ",", "activation", "=", "'relu'", ")", "(", "dcn", ".", "output", ")", "\n", "\n", "# Attentive Convolutional LSTM", "\n", "att_convlstm", "=", "Lambda", "(", "repeat", ",", "repeat_shape", ")", "(", "conv_feat", ")", "\n", "att_convlstm", "=", "AttentiveConvLSTM", "(", "nb_filters_in", "=", "512", ",", "nb_filters_out", "=", "512", ",", "nb_filters_att", "=", "512", ",", "\n", "nb_cols", "=", "3", ",", "nb_rows", "=", "3", ")", "(", "att_convlstm", ")", "\n", "\n", "# Learned Prior (1)", "\n", "priors1", "=", "LearningPrior", "(", "nb_gaussian", "=", "nb_gaussian", ",", "init", "=", "gaussian_priors_init", ")", "(", "x", "[", "1", "]", ")", "\n", "concateneted", "=", "merge", "(", "[", "att_convlstm", ",", "priors1", "]", ",", "mode", "=", "'concat'", ",", "concat_axis", "=", "1", ")", "\n", "learned_priors1", "=", "AtrousConvolution2D", "(", "512", ",", "5", ",", "5", ",", "border_mode", "=", "'same'", ",", "activation", "=", "'relu'", ",", "\n", "atrous_rate", "=", "(", "4", ",", "4", ")", ")", "(", "concateneted", ")", "\n", "\n", "# Learned Prior (2)", "\n", "priors2", "=", "LearningPrior", "(", "nb_gaussian", "=", "nb_gaussian", ",", "init", "=", "gaussian_priors_init", ")", "(", "x", "[", "1", "]", ")", "\n", "concateneted", "=", "merge", "(", "[", "learned_priors1", ",", "priors2", "]", ",", "mode", "=", "'concat'", ",", "concat_axis", "=", "1", ")", "\n", "learned_priors2", "=", "AtrousConvolution2D", "(", "512", ",", "5", ",", "5", ",", "border_mode", "=", "'same'", ",", "activation", "=", "'relu'", ",", "\n", "atrous_rate", "=", "(", "4", ",", "4", ")", ")", "(", "concateneted", ")", "\n", "\n", "# Final Convolutional Layer", "\n", "outs", "=", "Convolution2D", "(", "1", ",", "1", ",", "1", ",", "border_mode", "=", "'same'", ",", "activation", "=", "'relu'", ")", "(", "learned_priors2", ")", "\n", "outs_up", "=", "Lambda", "(", "upsampling", ",", "upsampling_shape", ")", "(", "outs", ")", "\n", "\n", "return", "[", "outs_up", ",", "outs_up", ",", "outs_up", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.main.generator": [[13, 37], ["images.sort", "maps.sort", "fixs.sort", "numpy.zeros", "utilities.preprocess_maps", "utilities.preprocess_fixmaps", "len", "os.listdir", "f.endswith", "os.listdir", "f.endswith", "os.listdir", "f.endswith", "os.listdir", "f.endswith", "os.listdir", "f.endswith", "os.listdir", "f.endswith", "utilities.preprocess_images"], "function", ["home.repos.pwc.inspect_result.marcellacornia_sam.None.utilities.preprocess_maps", "home.repos.pwc.inspect_result.marcellacornia_sam.None.utilities.preprocess_fixmaps", "home.repos.pwc.inspect_result.marcellacornia_sam.None.utilities.preprocess_images"], ["def", "generator", "(", "b_s", ",", "phase_gen", "=", "'train'", ")", ":", "\n", "    ", "if", "phase_gen", "==", "'train'", ":", "\n", "        ", "images", "=", "[", "imgs_train_path", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "imgs_train_path", ")", "if", "f", ".", "endswith", "(", "(", "'.jpg'", ",", "'.jpeg'", ",", "'.png'", ")", ")", "]", "\n", "maps", "=", "[", "maps_train_path", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "maps_train_path", ")", "if", "f", ".", "endswith", "(", "(", "'.jpg'", ",", "'.jpeg'", ",", "'.png'", ")", ")", "]", "\n", "fixs", "=", "[", "fixs_train_path", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "fixs_train_path", ")", "if", "f", ".", "endswith", "(", "'.mat'", ")", "]", "\n", "", "elif", "phase_gen", "==", "'val'", ":", "\n", "        ", "images", "=", "[", "imgs_val_path", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "imgs_val_path", ")", "if", "f", ".", "endswith", "(", "(", "'.jpg'", ",", "'.jpeg'", ",", "'.png'", ")", ")", "]", "\n", "maps", "=", "[", "maps_val_path", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "maps_val_path", ")", "if", "f", ".", "endswith", "(", "(", "'.jpg'", ",", "'.jpeg'", ",", "'.png'", ")", ")", "]", "\n", "fixs", "=", "[", "fixs_val_path", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "fixs_val_path", ")", "if", "f", ".", "endswith", "(", "'.mat'", ")", "]", "\n", "", "else", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "\n", "", "images", ".", "sort", "(", ")", "\n", "maps", ".", "sort", "(", ")", "\n", "fixs", ".", "sort", "(", ")", "\n", "\n", "gaussian", "=", "np", ".", "zeros", "(", "(", "b_s", ",", "nb_gaussian", ",", "shape_r_gt", ",", "shape_c_gt", ")", ")", "\n", "\n", "counter", "=", "0", "\n", "while", "True", ":", "\n", "        ", "Y", "=", "preprocess_maps", "(", "maps", "[", "counter", ":", "counter", "+", "b_s", "]", ",", "shape_r_out", ",", "shape_c_out", ")", "\n", "Y_fix", "=", "preprocess_fixmaps", "(", "fixs", "[", "counter", ":", "counter", "+", "b_s", "]", ",", "shape_r_out", ",", "shape_c_out", ")", "\n", "yield", "[", "preprocess_images", "(", "images", "[", "counter", ":", "counter", "+", "b_s", "]", ",", "shape_r", ",", "shape_c", ")", ",", "gaussian", "]", ",", "[", "Y", ",", "Y", ",", "Y_fix", "]", "\n", "counter", "=", "(", "counter", "+", "b_s", ")", "%", "len", "(", "images", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.main.generator_test": [[39, 49], ["images.sort", "numpy.zeros", "os.listdir", "f.endswith", "len", "utilities.preprocess_images"], "function", ["home.repos.pwc.inspect_result.marcellacornia_sam.None.utilities.preprocess_images"], ["", "", "def", "generator_test", "(", "b_s", ",", "imgs_test_path", ")", ":", "\n", "    ", "images", "=", "[", "imgs_test_path", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "imgs_test_path", ")", "if", "f", ".", "endswith", "(", "(", "'.jpg'", ",", "'.jpeg'", ",", "'.png'", ")", ")", "]", "\n", "images", ".", "sort", "(", ")", "\n", "\n", "gaussian", "=", "np", ".", "zeros", "(", "(", "b_s", ",", "nb_gaussian", ",", "shape_r_gt", ",", "shape_c_gt", ")", ")", "\n", "\n", "counter", "=", "0", "\n", "while", "True", ":", "\n", "        ", "yield", "[", "preprocess_images", "(", "images", "[", "counter", ":", "counter", "+", "b_s", "]", ",", "shape_r", ",", "shape_c", ")", ",", "gaussian", "]", "\n", "counter", "=", "(", "counter", "+", "b_s", ")", "%", "len", "(", "images", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.__init__": [[9, 33], ["keras.initializations.get", "keras.initializations.get", "keras.initializations.get", "keras.activations.get", "keras.activations.get", "keras.layers.Layer.__init__", "keras.layers.InputSpec"], "methods", ["home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.__init__"], ["    ", "def", "__init__", "(", "self", ",", "nb_filters_in", ",", "nb_filters_out", ",", "nb_filters_att", ",", "nb_rows", ",", "nb_cols", ",", "\n", "init", "=", "'normal'", ",", "inner_init", "=", "'orthogonal'", ",", "attentive_init", "=", "'zero'", ",", "\n", "activation", "=", "'tanh'", ",", "inner_activation", "=", "'sigmoid'", ",", "\n", "W_regularizer", "=", "None", ",", "U_regularizer", "=", "None", ",", "\n", "weights", "=", "None", ",", "go_backwards", "=", "False", ",", "\n", "**", "kwargs", ")", ":", "\n", "        ", "self", ".", "nb_filters_in", "=", "nb_filters_in", "\n", "self", ".", "nb_filters_out", "=", "nb_filters_out", "\n", "self", ".", "nb_filters_att", "=", "nb_filters_att", "\n", "self", ".", "nb_rows", "=", "nb_rows", "\n", "self", ".", "nb_cols", "=", "nb_cols", "\n", "self", ".", "init", "=", "initializations", ".", "get", "(", "init", ")", "\n", "self", ".", "inner_init", "=", "initializations", ".", "get", "(", "inner_init", ")", "\n", "self", ".", "attentive_init", "=", "initializations", ".", "get", "(", "attentive_init", ")", "\n", "self", ".", "activation", "=", "activations", ".", "get", "(", "activation", ")", "\n", "self", ".", "inner_activation", "=", "activations", ".", "get", "(", "inner_activation", ")", "\n", "self", ".", "initial_weights", "=", "weights", "\n", "self", ".", "go_backwards", "=", "go_backwards", "\n", "\n", "self", ".", "W_regularizer", "=", "W_regularizer", "\n", "self", ".", "U_regularizer", "=", "U_regularizer", "\n", "self", ".", "input_spec", "=", "[", "InputSpec", "(", "ndim", "=", "5", ")", "]", "\n", "\n", "super", "(", "AttentiveConvLSTM", ",", "self", ")", ".", "__init__", "(", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.get_output_shape_for": [[34, 36], ["None"], "methods", ["None"], ["", "def", "get_output_shape_for", "(", "self", ",", "input_shape", ")", ":", "\n", "        ", "return", "input_shape", "[", ":", "1", "]", "+", "(", "self", ".", "nb_filters_out", ",", ")", "+", "input_shape", "[", "3", ":", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.compute_mask": [[37, 39], ["None"], "methods", ["None"], ["", "def", "compute_mask", "(", "self", ",", "input", ",", "mask", ")", ":", "\n", "        ", "return", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.get_initial_states": [[40, 46], ["keras.sum", "keras.conv2d", "keras.zeros", "range", "len"], "methods", ["None"], ["", "def", "get_initial_states", "(", "self", ",", "x", ")", ":", "\n", "        ", "initial_state", "=", "K", ".", "sum", "(", "x", ",", "axis", "=", "1", ")", "\n", "initial_state", "=", "K", ".", "conv2d", "(", "initial_state", ",", "K", ".", "zeros", "(", "(", "self", ".", "nb_filters_out", ",", "self", ".", "nb_filters_in", ",", "1", ",", "1", ")", ")", ",", "border_mode", "=", "'same'", ")", "\n", "initial_states", "=", "[", "initial_state", "for", "_", "in", "range", "(", "len", "(", "self", ".", "states", ")", ")", "]", "\n", "\n", "return", "initial_states", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.build": [[47, 112], ["keras.layers.convolutional.Convolution2D", "keras.layers.convolutional.Convolution2D", "keras.layers.convolutional.Convolution2D", "attentive_convlstm.AttentiveConvLSTM.W_a.build", "attentive_convlstm.AttentiveConvLSTM.U_a.build", "attentive_convlstm.AttentiveConvLSTM.V_a.build", "keras.layers.convolutional.Convolution2D", "keras.layers.convolutional.Convolution2D", "attentive_convlstm.AttentiveConvLSTM.W_i.build", "attentive_convlstm.AttentiveConvLSTM.U_i.build", "keras.layers.convolutional.Convolution2D", "keras.layers.convolutional.Convolution2D", "attentive_convlstm.AttentiveConvLSTM.W_f.build", "attentive_convlstm.AttentiveConvLSTM.U_f.build", "keras.layers.convolutional.Convolution2D", "keras.layers.convolutional.Convolution2D", "attentive_convlstm.AttentiveConvLSTM.W_c.build", "attentive_convlstm.AttentiveConvLSTM.U_c.build", "keras.layers.convolutional.Convolution2D", "keras.layers.convolutional.Convolution2D", "attentive_convlstm.AttentiveConvLSTM.W_o.build", "attentive_convlstm.AttentiveConvLSTM.U_o.build", "attentive_convlstm.AttentiveConvLSTM.trainable_weights.extend", "attentive_convlstm.AttentiveConvLSTM.trainable_weights.extend", "attentive_convlstm.AttentiveConvLSTM.trainable_weights.extend", "attentive_convlstm.AttentiveConvLSTM.trainable_weights.extend", "attentive_convlstm.AttentiveConvLSTM.trainable_weights.extend", "attentive_convlstm.AttentiveConvLSTM.trainable_weights.extend", "attentive_convlstm.AttentiveConvLSTM.trainable_weights.extend", "attentive_convlstm.AttentiveConvLSTM.trainable_weights.extend", "attentive_convlstm.AttentiveConvLSTM.trainable_weights.extend", "attentive_convlstm.AttentiveConvLSTM.trainable_weights.extend", "attentive_convlstm.AttentiveConvLSTM.trainable_weights.extend", "keras.layers.InputSpec"], "methods", ["home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.build", "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.build", "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.build", "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.build", "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.build", "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.build", "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.build", "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.build", "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.build", "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.build", "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.build"], ["", "def", "build", "(", "self", ",", "input_shape", ")", ":", "\n", "        ", "self", ".", "input_spec", "=", "[", "InputSpec", "(", "shape", "=", "input_shape", ")", "]", "\n", "self", ".", "states", "=", "[", "None", ",", "None", "]", "\n", "self", ".", "trainable_weights", "=", "[", "]", "\n", "\n", "self", ".", "W_a", "=", "Convolution2D", "(", "self", ".", "nb_filters_att", ",", "self", ".", "nb_rows", ",", "self", ".", "nb_cols", ",", "border_mode", "=", "'same'", ",", "bias", "=", "True", ",", "init", "=", "self", ".", "init", ")", "\n", "self", ".", "U_a", "=", "Convolution2D", "(", "self", ".", "nb_filters_att", ",", "self", ".", "nb_rows", ",", "self", ".", "nb_cols", ",", "border_mode", "=", "'same'", ",", "bias", "=", "True", ",", "init", "=", "self", ".", "init", ")", "\n", "self", ".", "V_a", "=", "Convolution2D", "(", "1", ",", "self", ".", "nb_rows", ",", "self", ".", "nb_cols", ",", "border_mode", "=", "'same'", ",", "bias", "=", "False", ",", "init", "=", "self", ".", "attentive_init", ")", "\n", "\n", "self", ".", "W_a", ".", "build", "(", "(", "input_shape", "[", "0", "]", ",", "self", ".", "nb_filters_att", ",", "input_shape", "[", "3", "]", ",", "input_shape", "[", "4", "]", ")", ")", "\n", "self", ".", "U_a", ".", "build", "(", "(", "input_shape", "[", "0", "]", ",", "self", ".", "nb_filters_in", ",", "input_shape", "[", "3", "]", ",", "input_shape", "[", "4", "]", ")", ")", "\n", "self", ".", "V_a", ".", "build", "(", "(", "input_shape", "[", "0", "]", ",", "self", ".", "nb_filters_att", ",", "input_shape", "[", "3", "]", ",", "input_shape", "[", "4", "]", ")", ")", "\n", "\n", "self", ".", "W_a", ".", "built", "=", "True", "\n", "self", ".", "U_a", ".", "built", "=", "True", "\n", "self", ".", "V_a", ".", "built", "=", "True", "\n", "\n", "self", ".", "W_i", "=", "Convolution2D", "(", "self", ".", "nb_filters_out", ",", "self", ".", "nb_rows", ",", "self", ".", "nb_cols", ",", "border_mode", "=", "'same'", ",", "bias", "=", "True", ",", "init", "=", "self", ".", "init", ")", "\n", "self", ".", "U_i", "=", "Convolution2D", "(", "self", ".", "nb_filters_out", ",", "self", ".", "nb_rows", ",", "self", ".", "nb_cols", ",", "border_mode", "=", "'same'", ",", "bias", "=", "True", ",", "init", "=", "self", ".", "inner_init", ")", "\n", "\n", "self", ".", "W_i", ".", "build", "(", "(", "input_shape", "[", "0", "]", ",", "self", ".", "nb_filters_in", ",", "input_shape", "[", "3", "]", ",", "input_shape", "[", "4", "]", ")", ")", "\n", "self", ".", "U_i", ".", "build", "(", "(", "input_shape", "[", "0", "]", ",", "self", ".", "nb_filters_out", ",", "input_shape", "[", "3", "]", ",", "input_shape", "[", "4", "]", ")", ")", "\n", "\n", "self", ".", "W_i", ".", "built", "=", "True", "\n", "self", ".", "U_i", ".", "built", "=", "True", "\n", "\n", "self", ".", "W_f", "=", "Convolution2D", "(", "self", ".", "nb_filters_out", ",", "self", ".", "nb_rows", ",", "self", ".", "nb_cols", ",", "border_mode", "=", "'same'", ",", "bias", "=", "True", ",", "init", "=", "self", ".", "init", ")", "\n", "self", ".", "U_f", "=", "Convolution2D", "(", "self", ".", "nb_filters_out", ",", "self", ".", "nb_rows", ",", "self", ".", "nb_cols", ",", "border_mode", "=", "'same'", ",", "bias", "=", "True", ",", "init", "=", "self", ".", "inner_init", ")", "\n", "\n", "self", ".", "W_f", ".", "build", "(", "(", "input_shape", "[", "0", "]", ",", "self", ".", "nb_filters_in", ",", "input_shape", "[", "3", "]", ",", "input_shape", "[", "4", "]", ")", ")", "\n", "self", ".", "U_f", ".", "build", "(", "(", "input_shape", "[", "0", "]", ",", "self", ".", "nb_filters_out", ",", "input_shape", "[", "3", "]", ",", "input_shape", "[", "4", "]", ")", ")", "\n", "\n", "self", ".", "W_f", ".", "built", "=", "True", "\n", "self", ".", "U_f", ".", "built", "=", "True", "\n", "\n", "self", ".", "W_c", "=", "Convolution2D", "(", "self", ".", "nb_filters_out", ",", "self", ".", "nb_rows", ",", "self", ".", "nb_cols", ",", "border_mode", "=", "'same'", ",", "bias", "=", "True", ",", "init", "=", "self", ".", "init", ")", "\n", "self", ".", "U_c", "=", "Convolution2D", "(", "self", ".", "nb_filters_out", ",", "self", ".", "nb_rows", ",", "self", ".", "nb_cols", ",", "border_mode", "=", "'same'", ",", "bias", "=", "True", ",", "init", "=", "self", ".", "inner_init", ")", "\n", "\n", "self", ".", "W_c", ".", "build", "(", "(", "input_shape", "[", "0", "]", ",", "self", ".", "nb_filters_in", ",", "input_shape", "[", "3", "]", ",", "input_shape", "[", "4", "]", ")", ")", "\n", "self", ".", "U_c", ".", "build", "(", "(", "input_shape", "[", "0", "]", ",", "self", ".", "nb_filters_out", ",", "input_shape", "[", "3", "]", ",", "input_shape", "[", "4", "]", ")", ")", "\n", "\n", "self", ".", "W_c", ".", "built", "=", "True", "\n", "self", ".", "U_c", ".", "built", "=", "True", "\n", "\n", "self", ".", "W_o", "=", "Convolution2D", "(", "self", ".", "nb_filters_out", ",", "self", ".", "nb_rows", ",", "self", ".", "nb_cols", ",", "border_mode", "=", "'same'", ",", "bias", "=", "True", ",", "init", "=", "self", ".", "init", ")", "\n", "self", ".", "U_o", "=", "Convolution2D", "(", "self", ".", "nb_filters_out", ",", "self", ".", "nb_rows", ",", "self", ".", "nb_cols", ",", "border_mode", "=", "'same'", ",", "bias", "=", "True", ",", "init", "=", "self", ".", "inner_init", ")", "\n", "\n", "self", ".", "W_o", ".", "build", "(", "(", "input_shape", "[", "0", "]", ",", "self", ".", "nb_filters_in", ",", "input_shape", "[", "3", "]", ",", "input_shape", "[", "4", "]", ")", ")", "\n", "self", ".", "U_o", ".", "build", "(", "(", "input_shape", "[", "0", "]", ",", "self", ".", "nb_filters_out", ",", "input_shape", "[", "3", "]", ",", "input_shape", "[", "4", "]", ")", ")", "\n", "\n", "self", ".", "W_o", ".", "built", "=", "True", "\n", "self", ".", "U_o", ".", "built", "=", "True", "\n", "\n", "self", ".", "trainable_weights", "=", "[", "]", "\n", "self", ".", "trainable_weights", ".", "extend", "(", "self", ".", "W_a", ".", "trainable_weights", ")", "\n", "self", ".", "trainable_weights", ".", "extend", "(", "self", ".", "U_a", ".", "trainable_weights", ")", "\n", "self", ".", "trainable_weights", ".", "extend", "(", "self", ".", "V_a", ".", "trainable_weights", ")", "\n", "self", ".", "trainable_weights", ".", "extend", "(", "self", ".", "W_i", ".", "trainable_weights", ")", "\n", "self", ".", "trainable_weights", ".", "extend", "(", "self", ".", "U_i", ".", "trainable_weights", ")", "\n", "self", ".", "trainable_weights", ".", "extend", "(", "self", ".", "W_f", ".", "trainable_weights", ")", "\n", "self", ".", "trainable_weights", ".", "extend", "(", "self", ".", "U_f", ".", "trainable_weights", ")", "\n", "self", ".", "trainable_weights", ".", "extend", "(", "self", ".", "W_c", ".", "trainable_weights", ")", "\n", "self", ".", "trainable_weights", ".", "extend", "(", "self", ".", "U_c", ".", "trainable_weights", ")", "\n", "self", ".", "trainable_weights", ".", "extend", "(", "self", ".", "W_o", ".", "trainable_weights", ")", "\n", "self", ".", "trainable_weights", ".", "extend", "(", "self", ".", "U_o", ".", "trainable_weights", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.preprocess_input": [[113, 115], ["None"], "methods", ["None"], ["", "def", "preprocess_input", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.step": [[116, 137], ["keras.shape", "attentive_convlstm.AttentiveConvLSTM.V_a", "keras.reshape", "attentive_convlstm.AttentiveConvLSTM.W_i", "attentive_convlstm.AttentiveConvLSTM.W_f", "attentive_convlstm.AttentiveConvLSTM.W_c", "attentive_convlstm.AttentiveConvLSTM.W_o", "attentive_convlstm.AttentiveConvLSTM.inner_activation", "attentive_convlstm.AttentiveConvLSTM.inner_activation", "attentive_convlstm.AttentiveConvLSTM.inner_activation", "keras.tanh", "keras.softmax", "keras.repeat_elements", "attentive_convlstm.AttentiveConvLSTM.activation", "keras.batch_flatten", "attentive_convlstm.AttentiveConvLSTM.U_i", "attentive_convlstm.AttentiveConvLSTM.U_f", "attentive_convlstm.AttentiveConvLSTM.activation", "attentive_convlstm.AttentiveConvLSTM.U_o", "attentive_convlstm.AttentiveConvLSTM.W_a", "attentive_convlstm.AttentiveConvLSTM.U_a", "attentive_convlstm.AttentiveConvLSTM.U_c"], "methods", ["None"], ["", "def", "step", "(", "self", ",", "x", ",", "states", ")", ":", "\n", "        ", "x_shape", "=", "K", ".", "shape", "(", "x", ")", "\n", "h_tm1", "=", "states", "[", "0", "]", "\n", "c_tm1", "=", "states", "[", "1", "]", "\n", "\n", "e", "=", "self", ".", "V_a", "(", "K", ".", "tanh", "(", "self", ".", "W_a", "(", "h_tm1", ")", "+", "self", ".", "U_a", "(", "x", ")", ")", ")", "\n", "a", "=", "K", ".", "reshape", "(", "K", ".", "softmax", "(", "K", ".", "batch_flatten", "(", "e", ")", ")", ",", "(", "x_shape", "[", "0", "]", ",", "1", ",", "x_shape", "[", "2", "]", ",", "x_shape", "[", "3", "]", ")", ")", "\n", "x_tilde", "=", "x", "*", "K", ".", "repeat_elements", "(", "a", ",", "x_shape", "[", "1", "]", ",", "1", ")", "\n", "\n", "x_i", "=", "self", ".", "W_i", "(", "x_tilde", ")", "\n", "x_f", "=", "self", ".", "W_f", "(", "x_tilde", ")", "\n", "x_c", "=", "self", ".", "W_c", "(", "x_tilde", ")", "\n", "x_o", "=", "self", ".", "W_o", "(", "x_tilde", ")", "\n", "\n", "i", "=", "self", ".", "inner_activation", "(", "x_i", "+", "self", ".", "U_i", "(", "h_tm1", ")", ")", "\n", "f", "=", "self", ".", "inner_activation", "(", "x_f", "+", "self", ".", "U_f", "(", "h_tm1", ")", ")", "\n", "c", "=", "f", "*", "c_tm1", "+", "i", "*", "self", ".", "activation", "(", "x_c", "+", "self", ".", "U_c", "(", "h_tm1", ")", ")", "\n", "o", "=", "self", ".", "inner_activation", "(", "x_o", "+", "self", ".", "U_o", "(", "h_tm1", ")", ")", "\n", "\n", "h", "=", "o", "*", "self", ".", "activation", "(", "c", ")", "\n", "return", "h", ",", "[", "h", ",", "c", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.get_constants": [[138, 140], ["None"], "methods", ["None"], ["", "def", "get_constants", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "[", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.call": [[141, 159], ["attentive_convlstm.AttentiveConvLSTM.get_initial_states", "attentive_convlstm.AttentiveConvLSTM.get_constants", "attentive_convlstm.AttentiveConvLSTM.preprocess_input", "keras.rnn", "keras.expand_dims"], "methods", ["home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.get_initial_states", "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.get_constants", "home.repos.pwc.inspect_result.marcellacornia_sam.None.attentive_convlstm.AttentiveConvLSTM.preprocess_input"], ["", "def", "call", "(", "self", ",", "x", ",", "mask", "=", "None", ")", ":", "\n", "        ", "input_shape", "=", "self", ".", "input_spec", "[", "0", "]", ".", "shape", "\n", "initial_states", "=", "self", ".", "get_initial_states", "(", "x", ")", "\n", "constants", "=", "self", ".", "get_constants", "(", "x", ")", "\n", "preprocessed_input", "=", "self", ".", "preprocess_input", "(", "x", ")", "\n", "\n", "last_output", ",", "outputs", ",", "states", "=", "K", ".", "rnn", "(", "self", ".", "step", ",", "preprocessed_input", ",", "\n", "initial_states", ",", "\n", "go_backwards", "=", "False", ",", "\n", "mask", "=", "mask", ",", "\n", "constants", "=", "constants", ",", "\n", "unroll", "=", "False", ",", "\n", "input_length", "=", "input_shape", "[", "1", "]", ")", "\n", "\n", "if", "last_output", ".", "ndim", "==", "3", ":", "\n", "            ", "last_output", "=", "K", ".", "expand_dims", "(", "last_output", ",", "dim", "=", "0", ")", "\n", "\n", "", "return", "last_output", "", "", "", ""]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.utilities.padding": [[8, 31], ["numpy.zeros", "numpy.zeros", "cv2.resize", "cv2.resize", "numpy.np.float32"], "function", ["None"], ["def", "padding", "(", "img", ",", "shape_r", "=", "240", ",", "shape_c", "=", "320", ",", "channels", "=", "3", ")", ":", "\n", "    ", "img_padded", "=", "np", ".", "zeros", "(", "(", "shape_r", ",", "shape_c", ",", "channels", ")", ",", "dtype", "=", "np", ".", "uint8", ")", "\n", "if", "channels", "==", "1", ":", "\n", "        ", "img_padded", "=", "np", ".", "zeros", "(", "(", "shape_r", ",", "shape_c", ")", ",", "dtype", "=", "np", ".", "uint8", ")", "\n", "\n", "", "original_shape", "=", "img", ".", "shape", "\n", "rows_rate", "=", "original_shape", "[", "0", "]", "/", "shape_r", "\n", "cols_rate", "=", "original_shape", "[", "1", "]", "/", "shape_c", "\n", "\n", "if", "rows_rate", ">", "cols_rate", ":", "\n", "        ", "new_cols", "=", "(", "original_shape", "[", "1", "]", "*", "shape_r", ")", "//", "original_shape", "[", "0", "]", "\n", "img", "=", "cv2", ".", "resize", "(", "img", ",", "(", "new_cols", ",", "shape_r", ")", ")", "\n", "if", "new_cols", ">", "shape_c", ":", "\n", "            ", "new_cols", "=", "shape_c", "\n", "", "img_padded", "[", ":", ",", "(", "(", "img_padded", ".", "shape", "[", "1", "]", "-", "new_cols", ")", "//", "2", ")", ":", "(", "(", "img_padded", ".", "shape", "[", "1", "]", "-", "new_cols", ")", "//", "2", "+", "new_cols", ")", "]", "=", "img", "\n", "", "else", ":", "\n", "        ", "new_rows", "=", "(", "original_shape", "[", "0", "]", "*", "shape_c", ")", "//", "original_shape", "[", "1", "]", "\n", "img", "=", "cv2", ".", "resize", "(", "img", ",", "(", "shape_c", ",", "new_rows", ")", ")", "\n", "if", "new_rows", ">", "shape_r", ":", "\n", "            ", "new_rows", "=", "shape_r", "\n", "", "img_padded", "[", "(", "(", "img_padded", ".", "shape", "[", "0", "]", "-", "new_rows", ")", "//", "2", ")", ":", "(", "(", "img_padded", ".", "shape", "[", "0", "]", "-", "new_rows", ")", "//", "2", "+", "new_rows", ")", ",", ":", "]", "=", "img", "\n", "\n", "", "return", "img_padded", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.utilities.resize_fixation": [[33, 49], ["numpy.zeros", "numpy.argwhere", "int", "int", "numpy.round", "numpy.round"], "function", ["None"], ["", "def", "resize_fixation", "(", "img", ",", "rows", "=", "480", ",", "cols", "=", "640", ")", ":", "\n", "    ", "out", "=", "np", ".", "zeros", "(", "(", "rows", ",", "cols", ")", ")", "\n", "factor_scale_r", "=", "rows", "/", "img", ".", "shape", "[", "0", "]", "\n", "factor_scale_c", "=", "cols", "/", "img", ".", "shape", "[", "1", "]", "\n", "\n", "coords", "=", "np", ".", "argwhere", "(", "img", ")", "\n", "for", "coord", "in", "coords", ":", "\n", "        ", "r", "=", "int", "(", "np", ".", "round", "(", "coord", "[", "0", "]", "*", "factor_scale_r", ")", ")", "\n", "c", "=", "int", "(", "np", ".", "round", "(", "coord", "[", "1", "]", "*", "factor_scale_c", ")", ")", "\n", "if", "r", "==", "rows", ":", "\n", "            ", "r", "-=", "1", "\n", "", "if", "c", "==", "cols", ":", "\n", "            ", "c", "-=", "1", "\n", "", "out", "[", "r", ",", "c", "]", "=", "1", "\n", "\n", "", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.utilities.padding_fixation": [[51, 72], ["numpy.zeros", "utilities.resize_fixation", "utilities.resize_fixation"], "function", ["home.repos.pwc.inspect_result.marcellacornia_sam.None.utilities.resize_fixation", "home.repos.pwc.inspect_result.marcellacornia_sam.None.utilities.resize_fixation"], ["", "def", "padding_fixation", "(", "img", ",", "shape_r", "=", "480", ",", "shape_c", "=", "640", ")", ":", "\n", "    ", "img_padded", "=", "np", ".", "zeros", "(", "(", "shape_r", ",", "shape_c", ")", ")", "\n", "\n", "original_shape", "=", "img", ".", "shape", "\n", "rows_rate", "=", "original_shape", "[", "0", "]", "/", "shape_r", "\n", "cols_rate", "=", "original_shape", "[", "1", "]", "/", "shape_c", "\n", "\n", "if", "rows_rate", ">", "cols_rate", ":", "\n", "        ", "new_cols", "=", "(", "original_shape", "[", "1", "]", "*", "shape_r", ")", "//", "original_shape", "[", "0", "]", "\n", "img", "=", "resize_fixation", "(", "img", ",", "rows", "=", "shape_r", ",", "cols", "=", "new_cols", ")", "\n", "if", "new_cols", ">", "shape_c", ":", "\n", "            ", "new_cols", "=", "shape_c", "\n", "", "img_padded", "[", ":", ",", "(", "(", "img_padded", ".", "shape", "[", "1", "]", "-", "new_cols", ")", "//", "2", ")", ":", "(", "(", "img_padded", ".", "shape", "[", "1", "]", "-", "new_cols", ")", "//", "2", "+", "new_cols", ")", "]", "=", "img", "\n", "", "else", ":", "\n", "        ", "new_rows", "=", "(", "original_shape", "[", "0", "]", "*", "shape_c", ")", "//", "original_shape", "[", "1", "]", "\n", "img", "=", "resize_fixation", "(", "img", ",", "rows", "=", "new_rows", ",", "cols", "=", "shape_c", ")", "\n", "if", "new_rows", ">", "shape_r", ":", "\n", "            ", "new_rows", "=", "shape_r", "\n", "", "img_padded", "[", "(", "(", "img_padded", ".", "shape", "[", "0", "]", "-", "new_rows", ")", "//", "2", ")", ":", "(", "(", "img_padded", ".", "shape", "[", "0", "]", "-", "new_rows", ")", "//", "2", "+", "new_rows", ")", ",", ":", "]", "=", "img", "\n", "\n", "", "return", "img_padded", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.utilities.preprocess_images": [[74, 88], ["numpy.zeros", "enumerate", "ims.transpose.transpose", "cv2.imread", "utilities.padding", "len"], "function", ["home.repos.pwc.inspect_result.marcellacornia_sam.None.utilities.padding"], ["", "def", "preprocess_images", "(", "paths", ",", "shape_r", ",", "shape_c", ")", ":", "\n", "    ", "ims", "=", "np", ".", "zeros", "(", "(", "len", "(", "paths", ")", ",", "shape_r", ",", "shape_c", ",", "3", ")", ")", "\n", "\n", "for", "i", ",", "path", "in", "enumerate", "(", "paths", ")", ":", "\n", "        ", "original_image", "=", "cv2", ".", "imread", "(", "path", ")", "\n", "padded_image", "=", "padding", "(", "original_image", ",", "shape_r", ",", "shape_c", ",", "3", ")", "\n", "ims", "[", "i", "]", "=", "padded_image", "\n", "\n", "", "ims", "[", ":", ",", ":", ",", ":", ",", "0", "]", "-=", "103.939", "\n", "ims", "[", ":", ",", ":", ",", ":", ",", "1", "]", "-=", "116.779", "\n", "ims", "[", ":", ",", ":", ",", ":", ",", "2", "]", "-=", "123.68", "\n", "ims", "=", "ims", ".", "transpose", "(", "(", "0", ",", "3", ",", "1", ",", "2", ")", ")", "\n", "\n", "return", "ims", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.utilities.preprocess_maps": [[90, 100], ["numpy.zeros", "enumerate", "cv2.imread", "utilities.padding", "padding.astype", "len"], "function", ["home.repos.pwc.inspect_result.marcellacornia_sam.None.utilities.padding"], ["", "def", "preprocess_maps", "(", "paths", ",", "shape_r", ",", "shape_c", ")", ":", "\n", "    ", "ims", "=", "np", ".", "zeros", "(", "(", "len", "(", "paths", ")", ",", "1", ",", "shape_r", ",", "shape_c", ")", ")", "\n", "\n", "for", "i", ",", "path", "in", "enumerate", "(", "paths", ")", ":", "\n", "        ", "original_map", "=", "cv2", ".", "imread", "(", "path", ",", "0", ")", "\n", "padded_map", "=", "padding", "(", "original_map", ",", "shape_r", ",", "shape_c", ",", "1", ")", "\n", "ims", "[", "i", ",", "0", "]", "=", "padded_map", ".", "astype", "(", "np", ".", "float32", ")", "\n", "ims", "[", "i", ",", "0", "]", "/=", "255.0", "\n", "\n", "", "return", "ims", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.utilities.preprocess_fixmaps": [[102, 110], ["numpy.zeros", "enumerate", "utilities.padding_fixation", "len", "scipy.io.loadmat", "scipy.io.loadmat"], "function", ["home.repos.pwc.inspect_result.marcellacornia_sam.None.utilities.padding_fixation"], ["", "def", "preprocess_fixmaps", "(", "paths", ",", "shape_r", ",", "shape_c", ")", ":", "\n", "    ", "ims", "=", "np", ".", "zeros", "(", "(", "len", "(", "paths", ")", ",", "1", ",", "shape_r", ",", "shape_c", ")", ")", "\n", "\n", "for", "i", ",", "path", "in", "enumerate", "(", "paths", ")", ":", "\n", "        ", "fix_map", "=", "scipy", ".", "io", ".", "loadmat", "(", "path", ")", "[", "\"I\"", "]", "\n", "ims", "[", "i", ",", "0", "]", "=", "padding_fixation", "(", "fix_map", ",", "shape_r", "=", "shape_r", ",", "shape_c", "=", "shape_c", ")", "\n", "\n", "", "return", "ims", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.utilities.postprocess_predictions": [[112, 132], ["scipy.ndimage.filters.gaussian_filter", "scipy.ndimage.filters.gaussian_filter", "cv2.resize", "cv2.resize", "numpy.max", "numpy.max"], "function", ["None"], ["", "def", "postprocess_predictions", "(", "pred", ",", "shape_r", ",", "shape_c", ")", ":", "\n", "    ", "predictions_shape", "=", "pred", ".", "shape", "\n", "rows_rate", "=", "shape_r", "/", "predictions_shape", "[", "0", "]", "\n", "cols_rate", "=", "shape_c", "/", "predictions_shape", "[", "1", "]", "\n", "\n", "pred", "=", "pred", "/", "np", ".", "max", "(", "pred", ")", "*", "255", "\n", "\n", "if", "rows_rate", ">", "cols_rate", ":", "\n", "        ", "new_cols", "=", "(", "predictions_shape", "[", "1", "]", "*", "shape_r", ")", "//", "predictions_shape", "[", "0", "]", "\n", "pred", "=", "cv2", ".", "resize", "(", "pred", ",", "(", "new_cols", ",", "shape_r", ")", ")", "\n", "img", "=", "pred", "[", ":", ",", "(", "(", "pred", ".", "shape", "[", "1", "]", "-", "shape_c", ")", "//", "2", ")", ":", "(", "(", "pred", ".", "shape", "[", "1", "]", "-", "shape_c", ")", "//", "2", "+", "shape_c", ")", "]", "\n", "", "else", ":", "\n", "        ", "new_rows", "=", "(", "predictions_shape", "[", "0", "]", "*", "shape_c", ")", "//", "predictions_shape", "[", "1", "]", "\n", "pred", "=", "cv2", ".", "resize", "(", "pred", ",", "(", "shape_c", ",", "new_rows", ")", ")", "\n", "img", "=", "pred", "[", "(", "(", "pred", ".", "shape", "[", "0", "]", "-", "shape_r", ")", "//", "2", ")", ":", "(", "(", "pred", ".", "shape", "[", "0", "]", "-", "shape_r", ")", "//", "2", "+", "shape_r", ")", ",", ":", "]", "\n", "\n", "", "img", "=", "scipy", ".", "ndimage", ".", "filters", ".", "gaussian_filter", "(", "img", ",", "sigma", "=", "7", ")", "\n", "img", "=", "img", "/", "np", ".", "max", "(", "img", ")", "*", "255", "\n", "\n", "return", "img", "", "", ""]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_vgg.dcn_vgg": [[17, 64], ["keras.models.Model", "keras.utils.data_utils.get_file", "keras.models.Model.load_weights", "keras.layers.Input", "keras.layers.Convolution2D", "keras.layers.Convolution2D", "keras.layers.MaxPooling2D", "keras.layers.Convolution2D", "keras.layers.Convolution2D", "keras.layers.MaxPooling2D", "keras.layers.Convolution2D", "keras.layers.Convolution2D", "keras.layers.Convolution2D", "keras.layers.MaxPooling2D", "keras.layers.Convolution2D", "keras.layers.Convolution2D", "keras.layers.Convolution2D", "keras.layers.MaxPooling2D", "keras.layers.convolutional.AtrousConvolution2D", "keras.layers.convolutional.AtrousConvolution2D", "keras.layers.convolutional.AtrousConvolution2D", "keras.backend.is_keras_tensor", "keras.layers.Input"], "function", ["None"], ["def", "dcn_vgg", "(", "input_tensor", "=", "None", ")", ":", "\n", "    ", "input_shape", "=", "(", "3", ",", "None", ",", "None", ")", "\n", "\n", "if", "input_tensor", "is", "None", ":", "\n", "        ", "img_input", "=", "Input", "(", "shape", "=", "input_shape", ")", "\n", "", "else", ":", "\n", "        ", "if", "not", "K", ".", "is_keras_tensor", "(", "input_tensor", ")", ":", "\n", "            ", "img_input", "=", "Input", "(", "tensor", "=", "input_tensor", ",", "shape", "=", "input_shape", ")", "\n", "", "else", ":", "\n", "            ", "img_input", "=", "input_tensor", "\n", "\n", "# conv_1", "\n", "", "", "x", "=", "Convolution2D", "(", "64", ",", "3", ",", "3", ",", "activation", "=", "'relu'", ",", "border_mode", "=", "'same'", ",", "name", "=", "'block1_conv1'", ")", "(", "img_input", ")", "\n", "x", "=", "Convolution2D", "(", "64", ",", "3", ",", "3", ",", "activation", "=", "'relu'", ",", "border_mode", "=", "'same'", ",", "name", "=", "'block1_conv2'", ")", "(", "x", ")", "\n", "x", "=", "MaxPooling2D", "(", "(", "2", ",", "2", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "name", "=", "'block1_pool'", ")", "(", "x", ")", "\n", "\n", "# conv_2", "\n", "x", "=", "Convolution2D", "(", "128", ",", "3", ",", "3", ",", "activation", "=", "'relu'", ",", "border_mode", "=", "'same'", ",", "name", "=", "'block2_conv1'", ")", "(", "x", ")", "\n", "x", "=", "Convolution2D", "(", "128", ",", "3", ",", "3", ",", "activation", "=", "'relu'", ",", "border_mode", "=", "'same'", ",", "name", "=", "'block2_conv2'", ")", "(", "x", ")", "\n", "x", "=", "MaxPooling2D", "(", "(", "2", ",", "2", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "name", "=", "'block2_pool'", ")", "(", "x", ")", "\n", "\n", "# conv_3", "\n", "x", "=", "Convolution2D", "(", "256", ",", "3", ",", "3", ",", "activation", "=", "'relu'", ",", "border_mode", "=", "'same'", ",", "name", "=", "'block3_conv1'", ")", "(", "x", ")", "\n", "x", "=", "Convolution2D", "(", "256", ",", "3", ",", "3", ",", "activation", "=", "'relu'", ",", "border_mode", "=", "'same'", ",", "name", "=", "'block3_conv2'", ")", "(", "x", ")", "\n", "x", "=", "Convolution2D", "(", "256", ",", "3", ",", "3", ",", "activation", "=", "'relu'", ",", "border_mode", "=", "'same'", ",", "name", "=", "'block3_conv3'", ")", "(", "x", ")", "\n", "x", "=", "MaxPooling2D", "(", "(", "2", ",", "2", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "name", "=", "'block3_pool'", ",", "border_mode", "=", "'same'", ")", "(", "x", ")", "\n", "\n", "# conv_4", "\n", "x", "=", "Convolution2D", "(", "512", ",", "3", ",", "3", ",", "activation", "=", "'relu'", ",", "border_mode", "=", "'same'", ",", "name", "=", "'block4_conv1'", ")", "(", "x", ")", "\n", "x", "=", "Convolution2D", "(", "512", ",", "3", ",", "3", ",", "activation", "=", "'relu'", ",", "border_mode", "=", "'same'", ",", "name", "=", "'block4_conv2'", ")", "(", "x", ")", "\n", "x", "=", "Convolution2D", "(", "512", ",", "3", ",", "3", ",", "activation", "=", "'relu'", ",", "border_mode", "=", "'same'", ",", "name", "=", "'block4_conv3'", ")", "(", "x", ")", "\n", "x", "=", "MaxPooling2D", "(", "(", "2", ",", "2", ")", ",", "strides", "=", "(", "1", ",", "1", ")", ",", "name", "=", "'block4_pool'", ",", "border_mode", "=", "'same'", ")", "(", "x", ")", "\n", "\n", "# conv_5", "\n", "x", "=", "AtrousConvolution2D", "(", "512", ",", "3", ",", "3", ",", "activation", "=", "'relu'", ",", "border_mode", "=", "'same'", ",", "name", "=", "'block5_conv1'", ",", "atrous_rate", "=", "(", "2", ",", "2", ")", ")", "(", "x", ")", "\n", "x", "=", "AtrousConvolution2D", "(", "512", ",", "3", ",", "3", ",", "activation", "=", "'relu'", ",", "border_mode", "=", "'same'", ",", "name", "=", "'block5_conv2'", ",", "atrous_rate", "=", "(", "2", ",", "2", ")", ")", "(", "x", ")", "\n", "x", "=", "AtrousConvolution2D", "(", "512", ",", "3", ",", "3", ",", "activation", "=", "'relu'", ",", "border_mode", "=", "'same'", ",", "name", "=", "'block5_conv3'", ",", "atrous_rate", "=", "(", "2", ",", "2", ")", ")", "(", "x", ")", "\n", "\n", "# Create model", "\n", "model", "=", "Model", "(", "img_input", ",", "x", ")", "\n", "\n", "# Load weights", "\n", "weights_path", "=", "get_file", "(", "'vgg16_weights_th_dim_ordering_th_kernels_notop.h5'", ",", "TH_WEIGHTS_PATH_NO_TOP", ",", "\n", "cache_subdir", "=", "'models'", ")", "\n", "model", ".", "load_weights", "(", "weights_path", ")", "\n", "\n", "return", "model", "\n", "", ""]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.identity_block": [[18, 40], ["keras.layers.merge", "keras.layers.Convolution2D", "keras.layers.BatchNormalization", "keras.layers.Activation", "keras.layers.Convolution2D", "keras.layers.BatchNormalization", "keras.layers.Activation", "keras.layers.Convolution2D", "keras.layers.BatchNormalization", "keras.layers.Activation", "str", "str"], "function", ["None"], ["def", "identity_block", "(", "input_tensor", ",", "kernel_size", ",", "filters", ",", "stage", ",", "block", ")", ":", "\n", "    ", "nb_filter1", ",", "nb_filter2", ",", "nb_filter3", "=", "filters", "\n", "bn_axis", "=", "1", "\n", "\n", "conv_name_base", "=", "'res'", "+", "str", "(", "stage", ")", "+", "block", "+", "'_branch'", "\n", "bn_name_base", "=", "'bn'", "+", "str", "(", "stage", ")", "+", "block", "+", "'_branch'", "\n", "\n", "x", "=", "Convolution2D", "(", "nb_filter1", ",", "1", ",", "1", ",", "name", "=", "conv_name_base", "+", "'2a'", ")", "(", "input_tensor", ")", "\n", "x", "=", "BatchNormalization", "(", "axis", "=", "bn_axis", ",", "name", "=", "bn_name_base", "+", "'2a'", ")", "(", "x", ")", "\n", "x", "=", "Activation", "(", "'relu'", ")", "(", "x", ")", "\n", "\n", "x", "=", "Convolution2D", "(", "nb_filter2", ",", "kernel_size", ",", "kernel_size", ",", "\n", "border_mode", "=", "'same'", ",", "name", "=", "conv_name_base", "+", "'2b'", ")", "(", "x", ")", "\n", "x", "=", "BatchNormalization", "(", "axis", "=", "bn_axis", ",", "name", "=", "bn_name_base", "+", "'2b'", ")", "(", "x", ")", "\n", "x", "=", "Activation", "(", "'relu'", ")", "(", "x", ")", "\n", "\n", "x", "=", "Convolution2D", "(", "nb_filter3", ",", "1", ",", "1", ",", "name", "=", "conv_name_base", "+", "'2c'", ")", "(", "x", ")", "\n", "x", "=", "BatchNormalization", "(", "axis", "=", "bn_axis", ",", "name", "=", "bn_name_base", "+", "'2c'", ")", "(", "x", ")", "\n", "\n", "x", "=", "merge", "(", "[", "x", ",", "input_tensor", "]", ",", "mode", "=", "'sum'", ")", "\n", "x", "=", "Activation", "(", "'relu'", ")", "(", "x", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.conv_block": [[42, 69], ["keras.layers.merge", "keras.layers.Convolution2D", "keras.layers.BatchNormalization", "keras.layers.Activation", "keras.layers.Convolution2D", "keras.layers.BatchNormalization", "keras.layers.Activation", "keras.layers.Convolution2D", "keras.layers.BatchNormalization", "keras.layers.Convolution2D", "keras.layers.BatchNormalization", "keras.layers.Activation", "str", "str"], "function", ["None"], ["", "def", "conv_block", "(", "input_tensor", ",", "kernel_size", ",", "filters", ",", "stage", ",", "block", ",", "strides", "=", "(", "2", ",", "2", ")", ")", ":", "\n", "    ", "nb_filter1", ",", "nb_filter2", ",", "nb_filter3", "=", "filters", "\n", "bn_axis", "=", "1", "\n", "\n", "conv_name_base", "=", "'res'", "+", "str", "(", "stage", ")", "+", "block", "+", "'_branch'", "\n", "bn_name_base", "=", "'bn'", "+", "str", "(", "stage", ")", "+", "block", "+", "'_branch'", "\n", "\n", "x", "=", "Convolution2D", "(", "nb_filter1", ",", "1", ",", "1", ",", "subsample", "=", "strides", ",", "\n", "name", "=", "conv_name_base", "+", "'2a'", ")", "(", "input_tensor", ")", "\n", "x", "=", "BatchNormalization", "(", "axis", "=", "bn_axis", ",", "name", "=", "bn_name_base", "+", "'2a'", ")", "(", "x", ")", "\n", "x", "=", "Activation", "(", "'relu'", ")", "(", "x", ")", "\n", "\n", "x", "=", "Convolution2D", "(", "nb_filter2", ",", "kernel_size", ",", "kernel_size", ",", "border_mode", "=", "'same'", ",", "\n", "name", "=", "conv_name_base", "+", "'2b'", ")", "(", "x", ")", "\n", "x", "=", "BatchNormalization", "(", "axis", "=", "bn_axis", ",", "name", "=", "bn_name_base", "+", "'2b'", ")", "(", "x", ")", "\n", "x", "=", "Activation", "(", "'relu'", ")", "(", "x", ")", "\n", "\n", "x", "=", "Convolution2D", "(", "nb_filter3", ",", "1", ",", "1", ",", "name", "=", "conv_name_base", "+", "'2c'", ")", "(", "x", ")", "\n", "x", "=", "BatchNormalization", "(", "axis", "=", "bn_axis", ",", "name", "=", "bn_name_base", "+", "'2c'", ")", "(", "x", ")", "\n", "\n", "shortcut", "=", "Convolution2D", "(", "nb_filter3", ",", "1", ",", "1", ",", "subsample", "=", "strides", ",", "\n", "name", "=", "conv_name_base", "+", "'1'", ")", "(", "input_tensor", ")", "\n", "shortcut", "=", "BatchNormalization", "(", "axis", "=", "bn_axis", ",", "name", "=", "bn_name_base", "+", "'1'", ")", "(", "shortcut", ")", "\n", "\n", "x", "=", "merge", "(", "[", "x", ",", "shortcut", "]", ",", "mode", "=", "'sum'", ")", "\n", "x", "=", "Activation", "(", "'relu'", ")", "(", "x", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.conv_block_atrous": [[71, 96], ["keras.layers.merge", "keras.layers.Convolution2D", "keras.layers.BatchNormalization", "keras.layers.Activation", "keras.layers.convolutional.AtrousConvolution2D", "keras.layers.BatchNormalization", "keras.layers.Activation", "keras.layers.Convolution2D", "keras.layers.BatchNormalization", "keras.layers.Convolution2D", "keras.layers.BatchNormalization", "keras.layers.Activation", "str", "str"], "function", ["None"], ["", "def", "conv_block_atrous", "(", "input_tensor", ",", "kernel_size", ",", "filters", ",", "stage", ",", "block", ",", "atrous_rate", "=", "(", "2", ",", "2", ")", ")", ":", "\n", "    ", "nb_filter1", ",", "nb_filter2", ",", "nb_filter3", "=", "filters", "\n", "bn_axis", "=", "1", "\n", "\n", "conv_name_base", "=", "'res'", "+", "str", "(", "stage", ")", "+", "block", "+", "'_branch'", "\n", "bn_name_base", "=", "'bn'", "+", "str", "(", "stage", ")", "+", "block", "+", "'_branch'", "\n", "\n", "x", "=", "Convolution2D", "(", "nb_filter1", ",", "1", ",", "1", ",", "name", "=", "conv_name_base", "+", "'2a'", ")", "(", "input_tensor", ")", "\n", "x", "=", "BatchNormalization", "(", "axis", "=", "bn_axis", ",", "name", "=", "bn_name_base", "+", "'2a'", ")", "(", "x", ")", "\n", "x", "=", "Activation", "(", "'relu'", ")", "(", "x", ")", "\n", "\n", "x", "=", "AtrousConvolution2D", "(", "nb_filter2", ",", "kernel_size", ",", "kernel_size", ",", "border_mode", "=", "'same'", ",", "\n", "atrous_rate", "=", "atrous_rate", ",", "name", "=", "conv_name_base", "+", "'2b'", ")", "(", "x", ")", "\n", "x", "=", "BatchNormalization", "(", "axis", "=", "bn_axis", ",", "name", "=", "bn_name_base", "+", "'2b'", ")", "(", "x", ")", "\n", "x", "=", "Activation", "(", "'relu'", ")", "(", "x", ")", "\n", "\n", "x", "=", "Convolution2D", "(", "nb_filter3", ",", "1", ",", "1", ",", "name", "=", "conv_name_base", "+", "'2c'", ")", "(", "x", ")", "\n", "x", "=", "BatchNormalization", "(", "axis", "=", "bn_axis", ",", "name", "=", "bn_name_base", "+", "'2c'", ")", "(", "x", ")", "\n", "\n", "shortcut", "=", "Convolution2D", "(", "nb_filter3", ",", "1", ",", "1", ",", "name", "=", "conv_name_base", "+", "'1'", ")", "(", "input_tensor", ")", "\n", "shortcut", "=", "BatchNormalization", "(", "axis", "=", "bn_axis", ",", "name", "=", "bn_name_base", "+", "'1'", ")", "(", "shortcut", ")", "\n", "\n", "x", "=", "merge", "(", "[", "x", ",", "shortcut", "]", ",", "mode", "=", "'sum'", ")", "\n", "x", "=", "Activation", "(", "'relu'", ")", "(", "x", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.identity_block_atrous": [[98, 120], ["keras.layers.merge", "keras.layers.Convolution2D", "keras.layers.BatchNormalization", "keras.layers.Activation", "keras.layers.convolutional.AtrousConvolution2D", "keras.layers.BatchNormalization", "keras.layers.Activation", "keras.layers.Convolution2D", "keras.layers.BatchNormalization", "keras.layers.Activation", "str", "str"], "function", ["None"], ["", "def", "identity_block_atrous", "(", "input_tensor", ",", "kernel_size", ",", "filters", ",", "stage", ",", "block", ",", "atrous_rate", "=", "(", "2", ",", "2", ")", ")", ":", "\n", "    ", "nb_filter1", ",", "nb_filter2", ",", "nb_filter3", "=", "filters", "\n", "bn_axis", "=", "1", "\n", "\n", "conv_name_base", "=", "'res'", "+", "str", "(", "stage", ")", "+", "block", "+", "'_branch'", "\n", "bn_name_base", "=", "'bn'", "+", "str", "(", "stage", ")", "+", "block", "+", "'_branch'", "\n", "\n", "x", "=", "Convolution2D", "(", "nb_filter1", ",", "1", ",", "1", ",", "name", "=", "conv_name_base", "+", "'2a'", ")", "(", "input_tensor", ")", "\n", "x", "=", "BatchNormalization", "(", "axis", "=", "bn_axis", ",", "name", "=", "bn_name_base", "+", "'2a'", ")", "(", "x", ")", "\n", "x", "=", "Activation", "(", "'relu'", ")", "(", "x", ")", "\n", "\n", "x", "=", "AtrousConvolution2D", "(", "nb_filter2", ",", "kernel_size", ",", "kernel_size", ",", "atrous_rate", "=", "atrous_rate", ",", "\n", "border_mode", "=", "'same'", ",", "name", "=", "conv_name_base", "+", "'2b'", ")", "(", "x", ")", "\n", "x", "=", "BatchNormalization", "(", "axis", "=", "bn_axis", ",", "name", "=", "bn_name_base", "+", "'2b'", ")", "(", "x", ")", "\n", "x", "=", "Activation", "(", "'relu'", ")", "(", "x", ")", "\n", "\n", "x", "=", "Convolution2D", "(", "nb_filter3", ",", "1", ",", "1", ",", "name", "=", "conv_name_base", "+", "'2c'", ")", "(", "x", ")", "\n", "x", "=", "BatchNormalization", "(", "axis", "=", "bn_axis", ",", "name", "=", "bn_name_base", "+", "'2c'", ")", "(", "x", ")", "\n", "\n", "x", "=", "merge", "(", "[", "x", ",", "input_tensor", "]", ",", "mode", "=", "'sum'", ")", "\n", "x", "=", "Activation", "(", "'relu'", ")", "(", "x", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.dcn_resnet": [[122, 175], ["dcn_resnet.conv_block", "dcn_resnet.identity_block", "dcn_resnet.identity_block", "dcn_resnet.conv_block", "dcn_resnet.identity_block", "dcn_resnet.identity_block", "dcn_resnet.identity_block", "dcn_resnet.conv_block_atrous", "dcn_resnet.identity_block_atrous", "dcn_resnet.identity_block_atrous", "dcn_resnet.identity_block_atrous", "dcn_resnet.identity_block_atrous", "dcn_resnet.identity_block_atrous", "dcn_resnet.conv_block_atrous", "dcn_resnet.identity_block_atrous", "dcn_resnet.identity_block_atrous", "keras.models.Model", "keras.utils.data_utils.get_file", "keras.models.Model.load_weights", "keras.layers.Input", "keras.layers.ZeroPadding2D", "keras.layers.Convolution2D", "keras.layers.BatchNormalization", "keras.layers.Activation", "keras.layers.MaxPooling2D", "keras.backend.is_keras_tensor", "keras.layers.Input"], "function", ["home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.conv_block", "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.identity_block", "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.identity_block", "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.conv_block", "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.identity_block", "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.identity_block", "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.identity_block", "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.conv_block_atrous", "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.identity_block_atrous", "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.identity_block_atrous", "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.identity_block_atrous", "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.identity_block_atrous", "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.identity_block_atrous", "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.conv_block_atrous", "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.identity_block_atrous", "home.repos.pwc.inspect_result.marcellacornia_sam.None.dcn_resnet.identity_block_atrous"], ["", "def", "dcn_resnet", "(", "input_tensor", "=", "None", ")", ":", "\n", "    ", "input_shape", "=", "(", "3", ",", "None", ",", "None", ")", "\n", "\n", "if", "input_tensor", "is", "None", ":", "\n", "        ", "img_input", "=", "Input", "(", "shape", "=", "input_shape", ")", "\n", "", "else", ":", "\n", "        ", "if", "not", "K", ".", "is_keras_tensor", "(", "input_tensor", ")", ":", "\n", "            ", "img_input", "=", "Input", "(", "tensor", "=", "input_tensor", ")", "\n", "", "else", ":", "\n", "            ", "img_input", "=", "input_tensor", "\n", "\n", "", "", "bn_axis", "=", "1", "\n", "\n", "# conv_1", "\n", "x", "=", "ZeroPadding2D", "(", "(", "3", ",", "3", ")", ")", "(", "img_input", ")", "\n", "x", "=", "Convolution2D", "(", "64", ",", "7", ",", "7", ",", "subsample", "=", "(", "2", ",", "2", ")", ",", "name", "=", "'conv1'", ")", "(", "x", ")", "\n", "x", "=", "BatchNormalization", "(", "axis", "=", "bn_axis", ",", "name", "=", "'bn_conv1'", ")", "(", "x", ")", "\n", "x", "=", "Activation", "(", "'relu'", ")", "(", "x", ")", "\n", "x", "=", "MaxPooling2D", "(", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "border_mode", "=", "'same'", ")", "(", "x", ")", "\n", "\n", "# conv_2", "\n", "x", "=", "conv_block", "(", "x", ",", "3", ",", "[", "64", ",", "64", ",", "256", "]", ",", "stage", "=", "2", ",", "block", "=", "'a'", ",", "strides", "=", "(", "1", ",", "1", ")", ")", "\n", "x", "=", "identity_block", "(", "x", ",", "3", ",", "[", "64", ",", "64", ",", "256", "]", ",", "stage", "=", "2", ",", "block", "=", "'b'", ")", "\n", "x", "=", "identity_block", "(", "x", ",", "3", ",", "[", "64", ",", "64", ",", "256", "]", ",", "stage", "=", "2", ",", "block", "=", "'c'", ")", "\n", "\n", "# conv_3", "\n", "x", "=", "conv_block", "(", "x", ",", "3", ",", "[", "128", ",", "128", ",", "512", "]", ",", "stage", "=", "3", ",", "block", "=", "'a'", ",", "strides", "=", "(", "2", ",", "2", ")", ")", "\n", "x", "=", "identity_block", "(", "x", ",", "3", ",", "[", "128", ",", "128", ",", "512", "]", ",", "stage", "=", "3", ",", "block", "=", "'b'", ")", "\n", "x", "=", "identity_block", "(", "x", ",", "3", ",", "[", "128", ",", "128", ",", "512", "]", ",", "stage", "=", "3", ",", "block", "=", "'c'", ")", "\n", "x", "=", "identity_block", "(", "x", ",", "3", ",", "[", "128", ",", "128", ",", "512", "]", ",", "stage", "=", "3", ",", "block", "=", "'d'", ")", "\n", "\n", "# conv_4", "\n", "x", "=", "conv_block_atrous", "(", "x", ",", "3", ",", "[", "256", ",", "256", ",", "1024", "]", ",", "stage", "=", "4", ",", "block", "=", "'a'", ",", "atrous_rate", "=", "(", "2", ",", "2", ")", ")", "\n", "x", "=", "identity_block_atrous", "(", "x", ",", "3", ",", "[", "256", ",", "256", ",", "1024", "]", ",", "stage", "=", "4", ",", "block", "=", "'b'", ",", "atrous_rate", "=", "(", "2", ",", "2", ")", ")", "\n", "x", "=", "identity_block_atrous", "(", "x", ",", "3", ",", "[", "256", ",", "256", ",", "1024", "]", ",", "stage", "=", "4", ",", "block", "=", "'c'", ",", "atrous_rate", "=", "(", "2", ",", "2", ")", ")", "\n", "x", "=", "identity_block_atrous", "(", "x", ",", "3", ",", "[", "256", ",", "256", ",", "1024", "]", ",", "stage", "=", "4", ",", "block", "=", "'d'", ",", "atrous_rate", "=", "(", "2", ",", "2", ")", ")", "\n", "x", "=", "identity_block_atrous", "(", "x", ",", "3", ",", "[", "256", ",", "256", ",", "1024", "]", ",", "stage", "=", "4", ",", "block", "=", "'e'", ",", "atrous_rate", "=", "(", "2", ",", "2", ")", ")", "\n", "x", "=", "identity_block_atrous", "(", "x", ",", "3", ",", "[", "256", ",", "256", ",", "1024", "]", ",", "stage", "=", "4", ",", "block", "=", "'f'", ",", "atrous_rate", "=", "(", "2", ",", "2", ")", ")", "\n", "\n", "# conv_5", "\n", "x", "=", "conv_block_atrous", "(", "x", ",", "3", ",", "[", "512", ",", "512", ",", "2048", "]", ",", "stage", "=", "5", ",", "block", "=", "'a'", ",", "atrous_rate", "=", "(", "4", ",", "4", ")", ")", "\n", "x", "=", "identity_block_atrous", "(", "x", ",", "3", ",", "[", "512", ",", "512", ",", "2048", "]", ",", "stage", "=", "5", ",", "block", "=", "'b'", ",", "atrous_rate", "=", "(", "4", ",", "4", ")", ")", "\n", "x", "=", "identity_block_atrous", "(", "x", ",", "3", ",", "[", "512", ",", "512", ",", "2048", "]", ",", "stage", "=", "5", ",", "block", "=", "'c'", ",", "atrous_rate", "=", "(", "4", ",", "4", ")", ")", "\n", "\n", "# Create model", "\n", "model", "=", "Model", "(", "img_input", ",", "x", ")", "\n", "\n", "# Load weights", "\n", "weights_path", "=", "get_file", "(", "'resnet50_weights_th_dim_ordering_th_kernels_notop.h5'", ",", "TH_WEIGHTS_PATH_NO_TOP", ",", "\n", "cache_subdir", "=", "'models'", ",", "md5_hash", "=", "'f64f049c92468c9affcd44b0976cdafe'", ")", "\n", "model", ".", "load_weights", "(", "weights_path", ")", "\n", "\n", "return", "model", "", "", ""]]}