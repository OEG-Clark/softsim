{"home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.ystrain.print_network": [[82, 89], ["model.parameters", "print", "print", "print", "p.numel"], "function", ["None"], ["", "def", "print_network", "(", "model", ",", "name", ")", ":", "\n", "    ", "num_params", "=", "0", "\n", "for", "p", "in", "model", ".", "parameters", "(", ")", ":", "\n", "        ", "num_params", "+=", "p", ".", "numel", "(", ")", "\n", "", "print", "(", "name", ")", "\n", "print", "(", "model", ")", "\n", "print", "(", "\"The number of parameters: {}\"", ".", "format", "(", "num_params", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.ystrain.train": [[90, 149], ["model.train", "print", "enumerate", "optimizer.zero_grad", "torch.autograd.Variable", "torch.autograd.Variable", "images.cuda.cuda", "gts.cuda.cuda", "model", "CE", "CE", "loss.backward", "utils.clip_gradient", "optimizer.step", "os.path.exists", "os.makedirs", "print", "torch.save", "torch.save", "str", "atts.sigmoid", "dets.sigmoid", "CE", "CE", "model.state_dict", "torch.no_grad", "torch.no_grad", "atts.sigmoid", "dets.sigmoid", "print", "print", "str", "model.ysmodel.postpnet", "model.ysmodel.postpnet", "datetime.datetime.now", "datetime.datetime.now", "str", "str", "str", "str", "str", "str", "str"], "function", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.ystrain.train", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.utils.clip_gradient"], ["", "def", "train", "(", "train_loader", ",", "model", ",", "optimizer", ",", "epoch", ")", ":", "\n", "    ", "model", ".", "train", "(", ")", "\n", "save_path", "=", "'models2/'", "+", "opt", ".", "modelchoice", "+", "str", "(", "opt", ".", "trainsize", ")", "+", "'_'", "+", "str", "(", "opt", ".", "psgloss", ")", "+", "str", "(", "opt", ".", "alpha", ")", "+", "'_'", "+", "str", "(", "opt", ".", "kernel_size", ")", "+", "'_aug'", "+", "str", "(", "opt", ".", "randomflip", ")", "+", "'_bs'", "+", "str", "(", "opt", ".", "batchsize", ")", "+", "'_'", "+", "str", "(", "opt", ".", "weighteddim", ")", "+", "'_'", "+", "str", "(", "opt", ".", "loss", ")", "+", "'_lr'", "+", "str", "(", "opt", ".", "lr", ")", "+", "'/'", "\n", "\n", "print", "(", "save_path", ")", "\n", "# print_network(model, opt.modelchoice )", "\n", "for", "i", ",", "pack", "in", "enumerate", "(", "train_loader", ",", "start", "=", "1", ")", ":", "\n", "        ", "optimizer", ".", "zero_grad", "(", ")", "\n", "images", ",", "gts", "=", "pack", "\n", "images", "=", "Variable", "(", "images", ")", "\n", "gts", "=", "Variable", "(", "gts", ")", "\n", "images", "=", "images", ".", "cuda", "(", ")", "\n", "gts", "=", "gts", ".", "cuda", "(", ")", "\n", "\n", "_", ",", "atts", ",", "dets", "=", "model", "(", "images", ")", "\n", "\n", "loss1", "=", "CE", "(", "atts", ".", "sigmoid", "(", ")", ",", "gts", ")", "\n", "loss2", "=", "CE", "(", "dets", ".", "sigmoid", "(", ")", ",", "gts", ")", "\n", "\n", "if", "opt", ".", "psgloss", ":", "\n", "            ", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "                ", "gts1", "=", "postpnet", "(", "kernel_size", "=", "opt", ".", "kernel_size", ")", "(", "atts", ",", "gts", ")", "\n", "#", "\n", "gts2", "=", "postpnet", "(", "kernel_size", "=", "opt", ".", "kernel_size", ")", "(", "dets", ",", "gts", ")", "\n", "\n", "\n", "", "loss1a", "=", "CE", "(", "atts", ".", "sigmoid", "(", ")", ",", "gts1", ")", "\n", "loss2a", "=", "CE", "(", "dets", ".", "sigmoid", "(", ")", ",", "gts2", ")", "\n", "\n", "if", "opt", ".", "onlypsgloss", ":", "\n", "                ", "loss", "=", "loss2a", "\n", "", "else", ":", "\n", "                ", "loss", "=", "loss2", "+", "loss2a", "*", "opt", ".", "alpha", "\n", "", "", "else", ":", "\n", "            ", "loss", "=", "loss2", "\n", "# loss = loss2 + loss1", "\n", "", "loss", ".", "backward", "(", ")", "\n", "\n", "clip_gradient", "(", "optimizer", ",", "opt", ".", "clip", ")", "\n", "optimizer", ".", "step", "(", ")", "\n", "\n", "if", "i", "%", "100", "==", "0", "or", "i", "==", "total_step", ":", "\n", "            ", "if", "opt", ".", "psgloss", ":", "\n", "                ", "print", "(", "'{} Epoch [{:03d}/{:03d}], Step [{:04d}/{:04d}], Loss1: {:.4f}  Loss1a: {:.4f}  Loss2: {:0.4f}  Loss2a: {:.4f} Total loss: {:.4f} '", ".", "\n", "format", "(", "datetime", ".", "now", "(", ")", ",", "epoch", ",", "opt", ".", "epoch", ",", "i", ",", "total_step", ",", "loss1", ".", "data", ",", "loss1a", ".", "data", ",", "loss2", ".", "data", ",", "loss2a", ".", "data", ",", "loss", ".", "data", ")", ")", "\n", "", "else", ":", "\n", "                ", "print", "(", "'{} Epoch [{:03d}/{:03d}], Step [{:04d}/{:04d}], Loss1: {:.4f} Loss2: {:0.4f}'", ".", "\n", "format", "(", "datetime", ".", "now", "(", ")", ",", "epoch", ",", "opt", ".", "epoch", ",", "i", ",", "total_step", ",", "loss1", ".", "data", ",", "loss2", ".", "data", ")", ")", "\n", "\n", "# if opt.is_ResNet:", "\n", "#     save_path = 'models/CPD_Resnet_'+ opt.modelchoice + '_' + str(opt.postp) +  '/'", "\n", "# else:", "\n", "#     save_path = 'models/CPD_VGG_'+ opt.modelchoice + '/'", "\n", "# print (save_path)", "\n", "", "", "", "if", "not", "os", ".", "path", ".", "exists", "(", "save_path", ")", ":", "\n", "        ", "os", ".", "makedirs", "(", "save_path", ")", "\n", "", "if", "(", "epoch", "+", "1", ")", "%", "20", "==", "0", ":", "#5  or epoch <6 ", "\n", "        ", "print", "(", "'saving %d'", "%", "epoch", ")", "\n", "torch", ".", "save", "(", "model", ".", "state_dict", "(", ")", ",", "save_path", "+", "opt", ".", "trainset", "+", "'_w.pth'", "+", "'.%d'", "%", "epoch", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.SalObjDataset.__init__": [[22, 40], ["sorted", "sorted", "torch.SalObjDataset.filter_files", "len", "torchvision.Compose", "torchvision.Compose", "os.listdir", "f.endswith", "os.listdir", "f.endswith", "torchvision.Resize", "torchvision.ToTensor", "torchvision.Normalize", "torchvision.Resize", "torchvision.ToTensor"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.SalObjDataset.filter_files"], ["    ", "def", "__init__", "(", "self", ",", "image_root", ",", "gt_root", ",", "trainsize", ",", "randomflip", "=", "False", ")", ":", "\n", "        ", "self", ".", "trainsize", "=", "trainsize", "\n", "self", ".", "images", "=", "[", "image_root", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "image_root", ")", "if", "f", ".", "endswith", "(", "'.jpg'", ")", "]", "\n", "# self.gts = [gt_root + f for f in os.listdir(gt_root) if f.endswith('.jpg')", "\n", "#             or f.endswith('.png')]", "\n", "self", ".", "gts", "=", "[", "gt_root", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "gt_root", ")", "if", "f", ".", "endswith", "(", "'.png'", ")", "]", "\n", "self", ".", "images", "=", "sorted", "(", "self", ".", "images", ")", "\n", "self", ".", "gts", "=", "sorted", "(", "self", ".", "gts", ")", "\n", "self", ".", "filter_files", "(", ")", "\n", "self", ".", "size", "=", "len", "(", "self", ".", "images", ")", "\n", "self", ".", "randomflip", "=", "randomflip", "\n", "self", ".", "img_transform", "=", "transforms", ".", "Compose", "(", "[", "\n", "transforms", ".", "Resize", "(", "(", "self", ".", "trainsize", ",", "self", ".", "trainsize", ")", ")", ",", "\n", "transforms", ".", "ToTensor", "(", ")", ",", "\n", "transforms", ".", "Normalize", "(", "[", "0.485", ",", "0.456", ",", "0.406", "]", ",", "[", "0.229", ",", "0.224", ",", "0.225", "]", ")", "]", ")", "\n", "self", ".", "gt_transform", "=", "transforms", ".", "Compose", "(", "[", "\n", "transforms", ".", "Resize", "(", "(", "self", ".", "trainsize", ",", "self", ".", "trainsize", ")", ")", ",", "\n", "transforms", ".", "ToTensor", "(", ")", "]", ")", "#[0, 1.0] torch.FloadTensor", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.SalObjDataset.__getitem__": [[41, 51], ["torch.SalObjDataset.rgb_loader", "torch.SalObjDataset.binary_loader", "torch.SalObjDataset.img_transform", "torch.SalObjDataset.gt_transform", "data.cv_random_flip"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset3.rgb_loader", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset3.binary_loader", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.cv_random_flip"], ["", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "image", "=", "self", ".", "rgb_loader", "(", "self", ".", "images", "[", "index", "]", ")", "\n", "gt", "=", "self", ".", "binary_loader", "(", "self", ".", "gts", "[", "index", "]", ")", "\n", "if", "self", ".", "randomflip", ":", "\n", "            ", "image", ",", "gt", "=", "cv_random_flip", "(", "image", ",", "gt", ")", "\n", "", "image", "=", "self", ".", "img_transform", "(", "image", ")", "\n", "gt", "=", "self", ".", "gt_transform", "(", "gt", ")", "\n", "# if self.randomflip:", "\n", "#     image, gt = cv_random_flip(image, gt)", "\n", "return", "image", ",", "gt", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.SalObjDataset.filter_files": [[52, 64], ["zip", "len", "len", "PIL.Image.open", "PIL.Image.open", "images.append", "gts.append"], "methods", ["None"], ["", "def", "filter_files", "(", "self", ")", ":", "\n", "        ", "assert", "len", "(", "self", ".", "images", ")", "==", "len", "(", "self", ".", "gts", ")", "\n", "images", "=", "[", "]", "\n", "gts", "=", "[", "]", "\n", "for", "img_path", ",", "gt_path", "in", "zip", "(", "self", ".", "images", ",", "self", ".", "gts", ")", ":", "\n", "            ", "img", "=", "Image", ".", "open", "(", "img_path", ")", "\n", "gt", "=", "Image", ".", "open", "(", "gt_path", ")", "\n", "if", "img", ".", "size", "==", "gt", ".", "size", ":", "\n", "                ", "images", ".", "append", "(", "img_path", ")", "\n", "gts", ".", "append", "(", "gt_path", ")", "\n", "", "", "self", ".", "images", "=", "images", "\n", "self", ".", "gts", "=", "gts", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.SalObjDataset.rgb_loader": [[65, 69], ["open", "PIL.Image.open", "PIL.Image.open.convert"], "methods", ["None"], ["", "def", "rgb_loader", "(", "self", ",", "path", ")", ":", "\n", "        ", "with", "open", "(", "path", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "img", "=", "Image", ".", "open", "(", "f", ")", "\n", "return", "img", ".", "convert", "(", "'RGB'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.SalObjDataset.binary_loader": [[70, 75], ["open", "PIL.Image.open", "PIL.Image.open.convert"], "methods", ["None"], ["", "", "def", "binary_loader", "(", "self", ",", "path", ")", ":", "\n", "        ", "with", "open", "(", "path", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "img", "=", "Image", ".", "open", "(", "f", ")", "\n", "# return img.convert('1')", "\n", "return", "img", ".", "convert", "(", "'L'", ")", "#0,255", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.SalObjDataset.resize": [[76, 85], ["max", "max", "img.resize", "gt.resize"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.SalObjDataset.resize", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.SalObjDataset.resize"], ["", "", "def", "resize", "(", "self", ",", "img", ",", "gt", ")", ":", "\n", "        ", "assert", "img", ".", "size", "==", "gt", ".", "size", "\n", "w", ",", "h", "=", "img", ".", "size", "\n", "if", "h", "<", "self", ".", "trainsize", "or", "w", "<", "self", ".", "trainsize", ":", "\n", "            ", "h", "=", "max", "(", "h", ",", "self", ".", "trainsize", ")", "\n", "w", "=", "max", "(", "w", ",", "self", ".", "trainsize", ")", "\n", "return", "img", ".", "resize", "(", "(", "w", ",", "h", ")", ",", "Image", ".", "BILINEAR", ")", ",", "gt", ".", "resize", "(", "(", "w", ",", "h", ")", ",", "Image", ".", "NEAREST", ")", "\n", "", "else", ":", "\n", "            ", "return", "img", ",", "gt", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.SalObjDataset.__len__": [[86, 88], ["None"], "methods", ["None"], ["", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "size", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset.__init__": [[102, 116], ["sorted", "sorted", "torchvision.Compose", "torchvision.ToTensor", "len", "os.listdir", "f.endswith", "os.listdir", "torchvision.Resize", "torchvision.ToTensor", "torchvision.Normalize", "f.endswith", "f.endswith"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "image_root", ",", "gt_root", ",", "testsize", ")", ":", "\n", "        ", "self", ".", "testsize", "=", "testsize", "\n", "self", ".", "images", "=", "[", "image_root", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "image_root", ")", "if", "f", ".", "endswith", "(", "'.jpg'", ")", "]", "\n", "self", ".", "gts", "=", "[", "gt_root", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "gt_root", ")", "if", "f", ".", "endswith", "(", "'.jpg'", ")", "\n", "or", "f", ".", "endswith", "(", "'.png'", ")", "]", "\n", "self", ".", "images", "=", "sorted", "(", "self", ".", "images", ")", "\n", "self", ".", "gts", "=", "sorted", "(", "self", ".", "gts", ")", "\n", "self", ".", "transform", "=", "transforms", ".", "Compose", "(", "[", "\n", "transforms", ".", "Resize", "(", "(", "self", ".", "testsize", ",", "self", ".", "testsize", ")", ")", ",", "\n", "transforms", ".", "ToTensor", "(", ")", ",", "\n", "transforms", ".", "Normalize", "(", "[", "0.485", ",", "0.456", ",", "0.406", "]", ",", "[", "0.229", ",", "0.224", ",", "0.225", "]", ")", "]", ")", "\n", "self", ".", "gt_transform", "=", "transforms", ".", "ToTensor", "(", ")", "\n", "self", ".", "size", "=", "len", "(", "self", ".", "images", ")", "\n", "self", ".", "index", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset.load_data": [[117, 126], ["torch.test_dataset.rgb_loader", "torch.test_dataset.transform().unsqueeze", "torch.test_dataset.binary_loader", "name.endswith", "torch.test_dataset.images[].split", "torch.test_dataset.transform", "name.split"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset3.rgb_loader", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset3.binary_loader"], ["", "def", "load_data", "(", "self", ")", ":", "\n", "        ", "image", "=", "self", ".", "rgb_loader", "(", "self", ".", "images", "[", "self", ".", "index", "]", ")", "\n", "image", "=", "self", ".", "transform", "(", "image", ")", ".", "unsqueeze", "(", "0", ")", "\n", "gt", "=", "self", ".", "binary_loader", "(", "self", ".", "gts", "[", "self", ".", "index", "]", ")", "\n", "name", "=", "self", ".", "images", "[", "self", ".", "index", "]", ".", "split", "(", "'/'", ")", "[", "-", "1", "]", "\n", "if", "name", ".", "endswith", "(", "'.jpg'", ")", ":", "\n", "            ", "name", "=", "name", ".", "split", "(", "'.jpg'", ")", "[", "0", "]", "+", "'.png'", "\n", "", "self", ".", "index", "+=", "1", "\n", "return", "image", ",", "gt", ",", "name", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset.rgb_loader": [[127, 131], ["open", "PIL.Image.open", "PIL.Image.open.convert"], "methods", ["None"], ["", "def", "rgb_loader", "(", "self", ",", "path", ")", ":", "\n", "        ", "with", "open", "(", "path", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "img", "=", "Image", ".", "open", "(", "f", ")", "\n", "return", "img", ".", "convert", "(", "'RGB'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset.binary_loader": [[132, 136], ["open", "PIL.Image.open", "PIL.Image.open.convert"], "methods", ["None"], ["", "", "def", "binary_loader", "(", "self", ",", "path", ")", ":", "\n", "        ", "with", "open", "(", "path", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "img", "=", "Image", ".", "open", "(", "f", ")", "\n", "return", "img", ".", "convert", "(", "'L'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset2.__init__": [[138, 153], ["sorted", "sorted", "print", "print", "torchvision.Compose", "torchvision.ToTensor", "len", "len", "len", "os.listdir", "f.endswith", "os.listdir", "f.endswith", "torchvision.Resize", "torchvision.ToTensor", "torchvision.Normalize"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "image_root", ",", "gt_root", ",", "testsize", ")", ":", "\n", "        ", "self", ".", "testsize", "=", "testsize", "\n", "self", ".", "images", "=", "[", "image_root", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "image_root", ")", "if", "f", ".", "endswith", "(", "'.jpg'", ")", "]", "\n", "self", ".", "gts", "=", "[", "gt_root", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "gt_root", ")", "if", "f", ".", "endswith", "(", "'.png'", ")", "]", "\n", "self", ".", "images", "=", "sorted", "(", "self", ".", "images", ")", "\n", "self", ".", "gts", "=", "sorted", "(", "self", ".", "gts", ")", "\n", "print", "(", "len", "(", "self", ".", "images", ")", ")", "\n", "print", "(", "len", "(", "self", ".", "gts", ")", ")", "\n", "self", ".", "transform", "=", "transforms", ".", "Compose", "(", "[", "\n", "transforms", ".", "Resize", "(", "(", "self", ".", "testsize", ",", "self", ".", "testsize", ")", ")", ",", "\n", "transforms", ".", "ToTensor", "(", ")", ",", "\n", "transforms", ".", "Normalize", "(", "[", "0.485", ",", "0.456", ",", "0.406", "]", ",", "[", "0.229", ",", "0.224", ",", "0.225", "]", ")", "]", ")", "\n", "self", ".", "gt_transform", "=", "transforms", ".", "ToTensor", "(", ")", "\n", "self", ".", "size", "=", "len", "(", "self", ".", "images", ")", "\n", "self", ".", "index", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset2.load_data": [[154, 163], ["torch.test_dataset2.rgb_loader", "torch.test_dataset2.transform().unsqueeze", "torch.test_dataset2.binary_loader", "name.endswith", "torch.test_dataset2.images[].split", "torch.test_dataset2.transform", "name.split"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset3.rgb_loader", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset3.binary_loader"], ["", "def", "load_data", "(", "self", ")", ":", "\n", "        ", "image", "=", "self", ".", "rgb_loader", "(", "self", ".", "images", "[", "self", ".", "index", "]", ")", "\n", "image", "=", "self", ".", "transform", "(", "image", ")", ".", "unsqueeze", "(", "0", ")", "\n", "gt", "=", "self", ".", "binary_loader", "(", "self", ".", "gts", "[", "self", ".", "index", "]", ")", "\n", "name", "=", "self", ".", "images", "[", "self", ".", "index", "]", ".", "split", "(", "'/'", ")", "[", "-", "1", "]", "\n", "if", "name", ".", "endswith", "(", "'.jpg'", ")", ":", "\n", "            ", "name", "=", "name", ".", "split", "(", "'.jpg'", ")", "[", "0", "]", "+", "'.png'", "\n", "", "self", ".", "index", "+=", "1", "\n", "return", "image", ",", "gt", ",", "name", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset2.rgb_loader": [[164, 168], ["open", "PIL.Image.open", "PIL.Image.open.convert"], "methods", ["None"], ["", "def", "rgb_loader", "(", "self", ",", "path", ")", ":", "\n", "        ", "with", "open", "(", "path", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "img", "=", "Image", ".", "open", "(", "f", ")", "\n", "return", "img", ".", "convert", "(", "'RGB'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset2.binary_loader": [[169, 173], ["open", "PIL.Image.open", "PIL.Image.open.convert"], "methods", ["None"], ["", "", "def", "binary_loader", "(", "self", ",", "path", ")", ":", "\n", "        ", "with", "open", "(", "path", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "img", "=", "Image", ".", "open", "(", "f", ")", "\n", "return", "img", ".", "convert", "(", "'L'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset3.__init__": [[176, 191], ["sorted", "sorted", "print", "print", "torchvision.Compose", "torchvision.ToTensor", "len", "len", "len", "os.listdir", "f.endswith", "os.listdir", "f.endswith", "torchvision.Resize", "torchvision.ToTensor", "torchvision.Normalize"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "image_root", ",", "gt_root", ",", "testsize", ")", ":", "\n", "        ", "self", ".", "testsize", "=", "testsize", "\n", "self", ".", "images", "=", "[", "image_root", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "image_root", ")", "if", "f", ".", "endswith", "(", "'.jpg'", ")", "]", "\n", "self", ".", "gts", "=", "[", "gt_root", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "gt_root", ")", "if", "f", ".", "endswith", "(", "'.png'", ")", "]", "\n", "self", ".", "images", "=", "sorted", "(", "self", ".", "images", ")", "\n", "self", ".", "gts", "=", "sorted", "(", "self", ".", "gts", ")", "\n", "print", "(", "len", "(", "self", ".", "images", ")", ")", "\n", "print", "(", "len", "(", "self", ".", "gts", ")", ")", "\n", "self", ".", "transform", "=", "transforms", ".", "Compose", "(", "[", "\n", "transforms", ".", "Resize", "(", "(", "self", ".", "testsize", ",", "self", ".", "testsize", ")", ")", ",", "\n", "transforms", ".", "ToTensor", "(", ")", ",", "\n", "transforms", ".", "Normalize", "(", "[", "0.485", ",", "0.456", ",", "0.406", "]", ",", "[", "0.229", ",", "0.224", ",", "0.225", "]", ")", "]", ")", "\n", "self", ".", "gt_transform", "=", "transforms", ".", "ToTensor", "(", ")", "\n", "self", ".", "size", "=", "len", "(", "self", ".", "images", ")", "\n", "self", ".", "index", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset3.load_data": [[192, 201], ["torch.test_dataset3.rgb_loader", "torch.test_dataset3.transform().unsqueeze", "name.endswith", "torch.test_dataset3.images[].split", "torch.test_dataset3.transform", "name.split"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset3.rgb_loader"], ["", "def", "load_data", "(", "self", ")", ":", "\n", "        ", "image", "=", "self", ".", "rgb_loader", "(", "self", ".", "images", "[", "self", ".", "index", "]", ")", "\n", "image", "=", "self", ".", "transform", "(", "image", ")", ".", "unsqueeze", "(", "0", ")", "\n", "# gt = self.binary_loader(self.gts[self.index])", "\n", "name", "=", "self", ".", "images", "[", "self", ".", "index", "]", ".", "split", "(", "'/'", ")", "[", "-", "1", "]", "\n", "if", "name", ".", "endswith", "(", "'.jpg'", ")", ":", "\n", "            ", "name", "=", "name", ".", "split", "(", "'.jpg'", ")", "[", "0", "]", "+", "'.png'", "\n", "", "self", ".", "index", "+=", "1", "\n", "return", "image", ",", "name", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset3.rgb_loader": [[202, 206], ["open", "PIL.Image.open", "PIL.Image.open.convert"], "methods", ["None"], ["", "def", "rgb_loader", "(", "self", ",", "path", ")", ":", "\n", "        ", "with", "open", "(", "path", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "img", "=", "Image", ".", "open", "(", "f", ")", "\n", "return", "img", ".", "convert", "(", "'RGB'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.test_dataset3.binary_loader": [[207, 211], ["open", "PIL.Image.open", "PIL.Image.open.convert"], "methods", ["None"], ["", "", "def", "binary_loader", "(", "self", ",", "path", ")", ":", "\n", "        ", "with", "open", "(", "path", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "img", "=", "Image", ".", "open", "(", "f", ")", "\n", "return", "img", ".", "convert", "(", "'L'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.cv_random_flip": [[7, 19], ["random.randint", "img.transpose.transpose", "label.transpose.transpose"], "function", ["None"], ["def", "cv_random_flip", "(", "img", ",", "label", ")", ":", "\n", "    ", "flip_flag", "=", "random", ".", "randint", "(", "0", ",", "1", ")", "\n", "if", "flip_flag", "==", "1", ":", "\n", "        ", "img", "=", "img", ".", "transpose", "(", "Image", ".", "FLIP_LEFT_RIGHT", ")", "\n", "label", "=", "label", ".", "transpose", "(", "Image", ".", "FLIP_LEFT_RIGHT", ")", "\n", "# flip_flag2 = random.randint(0, 1)", "\n", "# if flip_flag2 == 1:", "\n", "#     img = img.transpose(Image.FLIP_TOP_BOTTOM)", "\n", "#     label = label.transpose(Image.FLIP_TOP_BOTTOM)", "\n", "# img = img[:,:,::-1].copy()", "\n", "# label = label[:,:,::-1].copy()", "\n", "", "return", "img", ",", "label", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.data.get_loader": [[90, 99], ["data.SalObjDataset", "torch.DataLoader"], "function", ["None"], ["", "", "def", "get_loader", "(", "image_root", ",", "gt_root", ",", "batchsize", ",", "trainsize", ",", "shuffle", "=", "True", ",", "num_workers", "=", "12", ",", "pin_memory", "=", "True", ",", "randomflip", "=", "False", ")", ":", "\n", "\n", "    ", "dataset", "=", "SalObjDataset", "(", "image_root", ",", "gt_root", ",", "trainsize", ",", "randomflip", ")", "\n", "data_loader", "=", "data", ".", "DataLoader", "(", "dataset", "=", "dataset", ",", "\n", "batch_size", "=", "batchsize", ",", "\n", "shuffle", "=", "shuffle", ",", "\n", "num_workers", "=", "num_workers", ",", "\n", "pin_memory", "=", "pin_memory", ",", "drop_last", "=", "True", ")", "\n", "return", "data_loader", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.test_ys.get_test_info": [[14, 40], ["None"], "function", ["None"], ["def", "get_test_info", "(", "sal_mode", "=", "'ECSSD'", ")", ":", "\n", "    ", "if", "sal_mode", "==", "'ECSSD'", ":", "\n", "        ", "image_root", "=", "'/home/syang/ysdata/salientobj_dataset/dataset_test/ECSSD/Imgs/'", "\n", "image_source", "=", "'/home/syang/ysdata/salientobj_dataset/dataset_test/ECSSD/test.lst'", "\n", "", "elif", "sal_mode", "==", "'PASCAL'", ":", "\n", "        ", "image_root", "=", "'/home/syang/ysdata/salientobj_dataset/dataset_test/PASCALS/Imgs/'", "\n", "image_source", "=", "'/home/syang/ysdata/salientobj_dataset/dataset_test/PASCALS/test.lst'", "\n", "", "elif", "sal_mode", "==", "'DUT-OMRON'", ":", "\n", "        ", "image_root", "=", "'/home/syang/ysdata/salientobj_dataset/dataset_test/DUTOMRON/Imgs/'", "\n", "image_source", "=", "'/home/syang/ysdata/salientobj_dataset/dataset_test/DUTOMRON/test.lst'", "\n", "", "elif", "sal_mode", "==", "'HKUIS'", ":", "\n", "        ", "image_root", "=", "'/home/syang/ysdata/salientobj_dataset/dataset_test/HKU-IS/Imgs/'", "\n", "image_source", "=", "'/home/syang/ysdata/salientobj_dataset/dataset_test/HKU-IS/test.lst'", "\n", "", "elif", "sal_mode", "==", "'SOD'", ":", "\n", "        ", "image_root", "=", "'/home/syang/ysdata/salientobj_dataset/dataset_test/SOD/Imgs/'", "\n", "image_source", "=", "'/home/syang/ysdata/salientobj_dataset/dataset_test/SOD/test.lst'", "\n", "", "elif", "sal_mode", "==", "'DUTS-TEST'", ":", "\n", "        ", "image_root", "=", "'/home/syang/ysdata/salientobj_dataset/dataset_test/DUTS-TE/Imgs/'", "\n", "image_source", "=", "'/home/syang/ysdata/salientobj_dataset/dataset_test/DUTS-TE/test.lst'", "\n", "", "elif", "sal_mode", "==", "'m_r'", ":", "# for speed test  n.a.", "\n", "        ", "image_root", "=", "'/home/syang/ysdata/salientobj_dataset/dataset_test/MSRA/Imgs_resized/'", "\n", "image_source", "=", "'/home/syang/ysdata/salientobj_dataset/dataset_test/MSRA/test_resized.lst'", "\n", "", "elif", "sal_mode", "==", "'kk'", ":", "# for speed test  n.a.", "\n", "        ", "image_root", "=", "'/home/syang/ysdata/QA_dataset/koniq10k_1024x768/1024x768/'", "\n", "image_source", "=", "''", "\n", "", "return", "image_root", ",", "image_source", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.utils.clip_gradient": [[1, 6], ["param.grad.data.clamp_"], "function", ["None"], ["def", "clip_gradient", "(", "optimizer", ",", "grad_clip", ")", ":", "\n", "    ", "for", "group", "in", "optimizer", ".", "param_groups", ":", "\n", "        ", "for", "param", "in", "group", "[", "'params'", "]", ":", "\n", "            ", "if", "param", ".", "grad", "is", "not", "None", ":", "\n", "                ", "param", ".", "grad", ".", "data", ".", "clamp_", "(", "-", "grad_clip", ",", "grad_clip", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.None.utils.adjust_lr": [[8, 15], ["None"], "function", ["None"], ["", "", "", "", "def", "adjust_lr", "(", "optimizer", ",", "init_lr", ",", "epoch", ",", "decay_rate", "=", "0.1", ",", "decay_epoch", "=", "30", ")", ":", "\n", "    ", "if", "epoch", "!=", "0", "and", "epoch", "%", "decay_epoch", "==", "0", ":", "\n", "        ", "decay", "=", "decay_rate", "**", "(", "epoch", "//", "decay_epoch", ")", "\n", "", "else", ":", "\n", "        ", "decay", "=", "1.0", "\n", "", "for", "param_group", "in", "optimizer", ".", "param_groups", ":", "\n", "        ", "param_group", "[", "'lr'", "]", "*=", "decay", "\n", "", "", ""]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.BasicBlock.__init__": [[14, 23], ["torch.Module.__init__", "ResNet.conv3x3", "torch.BatchNorm2d", "torch.ReLU", "ResNet.conv3x3", "torch.BatchNorm2d"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.__init__", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.conv3x3", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.conv3x3"], ["def", "__init__", "(", "self", ",", "inplanes", ",", "planes", ",", "stride", "=", "1", ",", "downsample", "=", "None", ",", "dilation", "=", "1", ")", ":", "\n", "        ", "super", "(", "BasicBlock", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv1", "=", "conv3x3", "(", "inplanes", ",", "planes", ",", "stride", ")", "\n", "self", ".", "bn1", "=", "nn", ".", "BatchNorm2d", "(", "planes", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "planes", ",", "planes", ")", "\n", "self", ".", "bn2", "=", "nn", ".", "BatchNorm2d", "(", "planes", ")", "\n", "self", ".", "downsample", "=", "downsample", "\n", "self", ".", "stride", "=", "stride", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.BasicBlock.forward": [[24, 41], ["ResNet.BasicBlock.conv1", "ResNet.BasicBlock.bn1", "ResNet.BasicBlock.relu", "ResNet.BasicBlock.conv2", "ResNet.BasicBlock.bn2", "ResNet.BasicBlock.relu", "ResNet.BasicBlock.downsample"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "residual", "=", "x", "\n", "\n", "out", "=", "self", ".", "conv1", "(", "x", ")", "\n", "out", "=", "self", ".", "bn1", "(", "out", ")", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "out", "=", "self", ".", "conv2", "(", "out", ")", "\n", "out", "=", "self", ".", "bn2", "(", "out", ")", "\n", "\n", "if", "self", ".", "downsample", "is", "not", "None", ":", "\n", "            ", "residual", "=", "self", ".", "downsample", "(", "x", ")", "\n", "\n", "", "out", "+=", "residual", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.Bottleneck.__init__": [[46, 59], ["torch.Module.__init__", "torch.Conv2d", "torch.BatchNorm2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.ReLU"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.__init__"], ["def", "__init__", "(", "self", ",", "inplanes", ",", "planes", ",", "stride", "=", "1", ",", "downsample", "=", "None", ",", "dilation", "=", "1", ")", ":", "\n", "        ", "super", "(", "Bottleneck", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "inplanes", ",", "planes", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "bn1", "=", "nn", ".", "BatchNorm2d", "(", "planes", ")", "\n", "\n", "self", ".", "conv2", "=", "nn", ".", "Conv2d", "(", "planes", ",", "planes", ",", "kernel_size", "=", "3", ",", "stride", "=", "stride", ",", "dilation", "=", "dilation", ",", "\n", "padding", "=", "dilation", ",", "bias", "=", "False", ")", "\n", "self", ".", "bn2", "=", "nn", ".", "BatchNorm2d", "(", "planes", ")", "\n", "self", ".", "conv3", "=", "nn", ".", "Conv2d", "(", "planes", ",", "planes", "*", "4", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "bn3", "=", "nn", ".", "BatchNorm2d", "(", "planes", "*", "4", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "self", ".", "downsample", "=", "downsample", "\n", "self", ".", "stride", "=", "stride", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.Bottleneck.forward": [[60, 81], ["ResNet.Bottleneck.conv1", "ResNet.Bottleneck.bn1", "ResNet.Bottleneck.relu", "ResNet.Bottleneck.conv2", "ResNet.Bottleneck.bn2", "ResNet.Bottleneck.relu", "ResNet.Bottleneck.conv3", "ResNet.Bottleneck.bn3", "ResNet.Bottleneck.relu", "ResNet.Bottleneck.downsample"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "residual", "=", "x", "\n", "\n", "out", "=", "self", ".", "conv1", "(", "x", ")", "\n", "out", "=", "self", ".", "bn1", "(", "out", ")", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "out", "=", "self", ".", "conv2", "(", "out", ")", "\n", "out", "=", "self", ".", "bn2", "(", "out", ")", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "out", "=", "self", ".", "conv3", "(", "out", ")", "\n", "out", "=", "self", ".", "bn3", "(", "out", ")", "\n", "\n", "if", "self", ".", "downsample", "is", "not", "None", ":", "\n", "            ", "residual", "=", "self", ".", "downsample", "(", "x", ")", "\n", "\n", "", "out", "+=", "residual", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B2_ResNet.__init__": [[85, 111], ["torch.Module.__init__", "torch.Conv2d", "torch.BatchNorm2d", "torch.ReLU", "torch.MaxPool2d", "ResNet.B2_ResNet._make_layer", "ResNet.B2_ResNet._make_layer", "ResNet.B2_ResNet._make_layer", "ResNet.B2_ResNet._make_layer", "ResNet.B2_ResNet._make_layer", "ResNet.B2_ResNet._make_layer", "ResNet.B2_ResNet.modules", "isinstance", "m.weight.data.normal_", "isinstance", "math.sqrt", "m.weight.data.fill_", "m.bias.data.zero_"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.__init__", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_DRN._make_layer", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_DRN._make_layer", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_DRN._make_layer", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_DRN._make_layer", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_DRN._make_layer", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_DRN._make_layer"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "# self.inplanes = 128", "\n", "        ", "self", ".", "inplanes", "=", "64", "\n", "super", "(", "B2_ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "3", ",", "64", ",", "kernel_size", "=", "7", ",", "stride", "=", "2", ",", "padding", "=", "3", ",", "\n", "bias", "=", "False", ")", "\n", "self", ".", "bn1", "=", "nn", ".", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ")", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "64", ",", "3", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "128", ",", "4", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3_1", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "256", ",", "6", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer4_1", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "512", ",", "3", ",", "stride", "=", "2", ")", "\n", "\n", "self", ".", "inplanes", "=", "512", "\n", "self", ".", "layer3_2", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "256", ",", "6", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer4_2", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "512", ",", "3", ",", "stride", "=", "2", ")", "\n", "\n", "for", "m", "in", "self", ".", "modules", "(", ")", ":", "\n", "            ", "if", "isinstance", "(", "m", ",", "nn", ".", "Conv2d", ")", ":", "\n", "                ", "n", "=", "m", ".", "kernel_size", "[", "0", "]", "*", "m", ".", "kernel_size", "[", "1", "]", "*", "m", ".", "out_channels", "\n", "m", ".", "weight", ".", "data", ".", "normal_", "(", "0", ",", "math", ".", "sqrt", "(", "2.", "/", "n", ")", ")", "\n", "", "elif", "isinstance", "(", "m", ",", "nn", ".", "BatchNorm2d", ")", ":", "\n", "                ", "m", ".", "weight", ".", "data", ".", "fill_", "(", "1", ")", "\n", "m", ".", "bias", ".", "data", ".", "zero_", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B2_ResNet._make_layer": [[112, 128], ["layers.append", "range", "torch.Sequential", "torch.Sequential", "block", "layers.append", "torch.Conv2d", "torch.BatchNorm2d", "block"], "methods", ["None"], ["", "", "", "def", "_make_layer", "(", "self", ",", "block", ",", "planes", ",", "blocks", ",", "stride", "=", "1", ")", ":", "\n", "        ", "downsample", "=", "None", "\n", "if", "stride", "!=", "1", "or", "self", ".", "inplanes", "!=", "planes", "*", "block", ".", "expansion", ":", "\n", "            ", "downsample", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "self", ".", "inplanes", ",", "planes", "*", "block", ".", "expansion", ",", "\n", "kernel_size", "=", "1", ",", "stride", "=", "stride", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm2d", "(", "planes", "*", "block", ".", "expansion", ")", ",", "\n", ")", "\n", "\n", "", "layers", "=", "[", "]", "\n", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "stride", ",", "downsample", ")", ")", "\n", "self", ".", "inplanes", "=", "planes", "*", "block", ".", "expansion", "\n", "for", "i", "in", "range", "(", "1", ",", "blocks", ")", ":", "\n", "            ", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ")", ")", "\n", "\n", "", "return", "nn", ".", "Sequential", "(", "*", "layers", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B2_ResNet.forward": [[129, 144], ["ResNet.B2_ResNet.conv1", "ResNet.B2_ResNet.bn1", "ResNet.B2_ResNet.relu", "ResNet.B2_ResNet.maxpool", "ResNet.B2_ResNet.layer1", "ResNet.B2_ResNet.layer2", "ResNet.B2_ResNet.layer3_1", "ResNet.B2_ResNet.layer4_1", "ResNet.B2_ResNet.layer3_2", "ResNet.B2_ResNet.layer4_2"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "conv1", "(", "x", ")", "\n", "x", "=", "self", ".", "bn1", "(", "x", ")", "\n", "x", "=", "self", ".", "relu", "(", "x", ")", "\n", "x", "=", "self", ".", "maxpool", "(", "x", ")", "\n", "\n", "x", "=", "self", ".", "layer1", "(", "x", ")", "\n", "x", "=", "self", ".", "layer2", "(", "x", ")", "\n", "x1", "=", "self", ".", "layer3_1", "(", "x", ")", "\n", "x1", "=", "self", ".", "layer4_1", "(", "x1", ")", "\n", "\n", "x2", "=", "self", ".", "layer3_2", "(", "x", ")", "\n", "x2", "=", "self", ".", "layer4_2", "(", "x2", ")", "\n", "\n", "return", "x1", ",", "x2", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_ResNet.__init__": [[148, 174], ["torch.Module.__init__", "torch.Conv2d", "torch.BatchNorm2d", "torch.ReLU", "torch.MaxPool2d", "ResNet.B1_ResNet._make_layer", "ResNet.B1_ResNet._make_layer", "ResNet.B1_ResNet._make_layer", "ResNet.B1_ResNet._make_layer", "ResNet.B1_ResNet.modules", "isinstance", "m.weight.data.normal_", "isinstance", "math.sqrt", "m.weight.data.fill_", "m.bias.data.zero_"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.__init__", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_DRN._make_layer", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_DRN._make_layer", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_DRN._make_layer", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_DRN._make_layer"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "# self.inplanes = 128", "\n", "        ", "self", ".", "inplanes", "=", "64", "\n", "super", "(", "B1_ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "3", ",", "64", ",", "kernel_size", "=", "7", ",", "stride", "=", "2", ",", "padding", "=", "3", ",", "\n", "bias", "=", "False", ")", "\n", "self", ".", "bn1", "=", "nn", ".", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ")", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "64", ",", "3", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "128", ",", "4", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3_1", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "256", ",", "6", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer4_1", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "512", ",", "3", ",", "stride", "=", "2", ")", "\n", "\n", "self", ".", "inplanes", "=", "512", "\n", "# self.layer3_2 = self._make_layer(Bottleneck, 256, 6, stride=2)", "\n", "# self.layer4_2 = self._make_layer(Bottleneck, 512, 3, stride=2)", "\n", "\n", "for", "m", "in", "self", ".", "modules", "(", ")", ":", "\n", "            ", "if", "isinstance", "(", "m", ",", "nn", ".", "Conv2d", ")", ":", "\n", "                ", "n", "=", "m", ".", "kernel_size", "[", "0", "]", "*", "m", ".", "kernel_size", "[", "1", "]", "*", "m", ".", "out_channels", "\n", "m", ".", "weight", ".", "data", ".", "normal_", "(", "0", ",", "math", ".", "sqrt", "(", "2.", "/", "n", ")", ")", "\n", "", "elif", "isinstance", "(", "m", ",", "nn", ".", "BatchNorm2d", ")", ":", "\n", "                ", "m", ".", "weight", ".", "data", ".", "fill_", "(", "1", ")", "\n", "m", ".", "bias", ".", "data", ".", "zero_", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_ResNet._make_layer": [[175, 191], ["layers.append", "range", "torch.Sequential", "torch.Sequential", "block", "layers.append", "torch.Conv2d", "torch.BatchNorm2d", "block"], "methods", ["None"], ["", "", "", "def", "_make_layer", "(", "self", ",", "block", ",", "planes", ",", "blocks", ",", "stride", "=", "1", ")", ":", "\n", "        ", "downsample", "=", "None", "\n", "if", "stride", "!=", "1", "or", "self", ".", "inplanes", "!=", "planes", "*", "block", ".", "expansion", ":", "\n", "            ", "downsample", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "self", ".", "inplanes", ",", "planes", "*", "block", ".", "expansion", ",", "\n", "kernel_size", "=", "1", ",", "stride", "=", "stride", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm2d", "(", "planes", "*", "block", ".", "expansion", ")", ",", "\n", ")", "\n", "\n", "", "layers", "=", "[", "]", "\n", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "stride", ",", "downsample", ")", ")", "\n", "self", ".", "inplanes", "=", "planes", "*", "block", ".", "expansion", "\n", "for", "i", "in", "range", "(", "1", ",", "blocks", ")", ":", "\n", "            ", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ")", ")", "\n", "\n", "", "return", "nn", ".", "Sequential", "(", "*", "layers", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_ResNet.forward": [[192, 207], ["ResNet.B1_ResNet.conv1", "ResNet.B1_ResNet.bn1", "ResNet.B1_ResNet.relu", "ResNet.B1_ResNet.maxpool", "ResNet.B1_ResNet.layer1", "ResNet.B1_ResNet.layer2", "ResNet.B1_ResNet.layer3_1", "ResNet.B1_ResNet.layer4_1"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "conv1", "(", "x", ")", "\n", "x", "=", "self", ".", "bn1", "(", "x", ")", "\n", "x", "=", "self", ".", "relu", "(", "x", ")", "\n", "x", "=", "self", ".", "maxpool", "(", "x", ")", "\n", "\n", "x", "=", "self", ".", "layer1", "(", "x", ")", "\n", "x", "=", "self", ".", "layer2", "(", "x", ")", "\n", "x1", "=", "self", ".", "layer3_1", "(", "x", ")", "\n", "x1", "=", "self", ".", "layer4_1", "(", "x1", ")", "\n", "\n", "# x2 = self.layer3_2(x)", "\n", "# x2 = self.layer4_2(x2)", "\n", "\n", "return", "x1", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_DRN.__init__": [[212, 238], ["torch.Module.__init__", "torch.Conv2d", "torch.BatchNorm2d", "torch.ReLU", "torch.MaxPool2d", "ResNet.B1_DRN._make_layer", "ResNet.B1_DRN._make_layer", "ResNet.B1_DRN._make_layer", "ResNet.B1_DRN._make_layer", "ResNet.B1_DRN.modules", "isinstance", "m.weight.data.normal_", "isinstance", "math.sqrt", "m.weight.data.fill_", "m.bias.data.zero_"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.__init__", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_DRN._make_layer", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_DRN._make_layer", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_DRN._make_layer", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_DRN._make_layer"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "# self.inplanes = 128", "\n", "        ", "self", ".", "inplanes", "=", "64", "\n", "super", "(", "B1_DRN", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "3", ",", "64", ",", "kernel_size", "=", "7", ",", "stride", "=", "2", ",", "padding", "=", "3", ",", "\n", "bias", "=", "False", ")", "\n", "self", ".", "bn1", "=", "nn", ".", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ")", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "64", ",", "3", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "128", ",", "4", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3_1", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "256", ",", "6", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4_1", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "512", ",", "3", ",", "stride", "=", "1", ",", "dilation", "=", "4", ")", "\n", "\n", "self", ".", "inplanes", "=", "512", "\n", "# self.layer3_2 = self._make_layer(Bottleneck, 256, 6, stride=2)", "\n", "# self.layer4_2 = self._make_layer(Bottleneck, 512, 3, stride=2)", "\n", "\n", "for", "m", "in", "self", ".", "modules", "(", ")", ":", "\n", "            ", "if", "isinstance", "(", "m", ",", "nn", ".", "Conv2d", ")", ":", "\n", "                ", "n", "=", "m", ".", "kernel_size", "[", "0", "]", "*", "m", ".", "kernel_size", "[", "1", "]", "*", "m", ".", "out_channels", "\n", "m", ".", "weight", ".", "data", ".", "normal_", "(", "0", ",", "math", ".", "sqrt", "(", "2.", "/", "n", ")", ")", "\n", "", "elif", "isinstance", "(", "m", ",", "nn", ".", "BatchNorm2d", ")", ":", "\n", "                ", "m", ".", "weight", ".", "data", ".", "fill_", "(", "1", ")", "\n", "m", ".", "bias", ".", "data", ".", "zero_", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_DRN._make_layer": [[239, 255], ["layers.append", "range", "torch.Sequential", "torch.Sequential", "block", "layers.append", "torch.Conv2d", "torch.BatchNorm2d", "block"], "methods", ["None"], ["", "", "", "def", "_make_layer", "(", "self", ",", "block", ",", "planes", ",", "blocks", ",", "stride", "=", "1", ",", "dilation", "=", "1", ")", ":", "\n", "        ", "downsample", "=", "None", "\n", "if", "stride", "!=", "1", "or", "self", ".", "inplanes", "!=", "planes", "*", "block", ".", "expansion", ":", "\n", "            ", "downsample", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "self", ".", "inplanes", ",", "planes", "*", "block", ".", "expansion", ",", "\n", "kernel_size", "=", "1", ",", "stride", "=", "stride", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm2d", "(", "planes", "*", "block", ".", "expansion", ")", ",", "\n", ")", "\n", "\n", "", "layers", "=", "[", "]", "\n", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "stride", ",", "downsample", ",", "dilation", "=", "dilation", ")", ")", "\n", "self", ".", "inplanes", "=", "planes", "*", "block", ".", "expansion", "\n", "for", "i", "in", "range", "(", "1", ",", "blocks", ")", ":", "\n", "            ", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ")", ")", "\n", "\n", "", "return", "nn", ".", "Sequential", "(", "*", "layers", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.B1_DRN.forward": [[256, 271], ["ResNet.B1_DRN.conv1", "ResNet.B1_DRN.bn1", "ResNet.B1_DRN.relu", "ResNet.B1_DRN.maxpool", "ResNet.B1_DRN.layer1", "ResNet.B1_DRN.layer2", "ResNet.B1_DRN.layer3_1", "ResNet.B1_DRN.layer4_1"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "conv1", "(", "x", ")", "\n", "x", "=", "self", ".", "bn1", "(", "x", ")", "\n", "x", "=", "self", ".", "relu", "(", "x", ")", "\n", "x", "=", "self", ".", "maxpool", "(", "x", ")", "\n", "\n", "x", "=", "self", ".", "layer1", "(", "x", ")", "\n", "x", "=", "self", ".", "layer2", "(", "x", ")", "\n", "x1", "=", "self", ".", "layer3_1", "(", "x", ")", "\n", "x1", "=", "self", ".", "layer4_1", "(", "x1", ")", "\n", "\n", "# x2 = self.layer3_2(x)", "\n", "# x2 = self.layer4_2(x2)", "\n", "\n", "return", "x1", "", "", "", ""]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ResNet.conv3x3": [[5, 9], ["torch.Conv2d"], "function", ["None"], ["def", "conv3x3", "(", "in_planes", ",", "out_planes", ",", "stride", "=", "1", ",", "dilation", "=", "1", ")", ":", "\n", "    ", "\"\"\"3x3 convolution with padding\"\"\"", "\n", "return", "nn", ".", "Conv2d", "(", "in_planes", ",", "out_planes", ",", "kernel_size", "=", "3", ",", "stride", "=", "stride", ",", "dilation", "=", "dilation", ",", "\n", "padding", "=", "1", ",", "bias", "=", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.DiceLoss.__init__": [[14, 16], ["torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.__init__"], ["\t", "def", "__init__", "(", "self", ")", ":", "\n", "\t\t", "super", "(", "DiceLoss", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.DiceLoss.forward": [[17, 30], ["target.size", "input.view", "target.view", "loss.sum", "intersection.sum", "input.view.sum", "target.view.sum"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "input", ",", "target", ")", ":", "\n", "\t\t", "N", "=", "target", ".", "size", "(", "0", ")", "\n", "smooth", "=", "1.", "\n", "\n", "input_flat", "=", "input", ".", "view", "(", "N", ",", "-", "1", ")", "\n", "target_flat", "=", "target", ".", "view", "(", "N", ",", "-", "1", ")", "\n", "\n", "intersection", "=", "input_flat", "*", "target_flat", "\n", "\n", "loss", "=", "2", "*", "(", "intersection", ".", "sum", "(", "1", ")", "+", "smooth", ")", "/", "(", "input_flat", ".", "sum", "(", "1", ")", "+", "target_flat", ".", "sum", "(", "1", ")", "+", "smooth", ")", "\n", "loss", "=", "1", "-", "loss", ".", "sum", "(", ")", "/", "N", "\n", "\n", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.KldLoss.__init__": [[32, 34], ["torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.__init__"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", "KldLoss", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.KldLoss.forward": [[35, 50], ["target.size", "input.view", "target.view", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.log", "torch.log", "torch.log", "torch.log", "torch.log", "torch.log", "torch.log", "torch.log", "torch.log", "kld.sum", "input.view.sum().unsqueeze", "target.view.sum().unsqueeze", "input.view.sum", "target.view.sum"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "input", ",", "target", ")", ":", "\n", "        ", "N", "=", "target", ".", "size", "(", "0", ")", "\n", "eps", "=", "1e-8", "\n", "input_flat", "=", "input", ".", "view", "(", "N", ",", "-", "1", ")", "#(20, 147456)", "\n", "target_flat", "=", "target", ".", "view", "(", "N", ",", "-", "1", ")", "\n", "# _,M=input_flat.size()", "\n", "# print (input_flat.size()) #(20, 147456)", "\n", "# print (input_flat.sum(1).unsqueeze(1).size()) # (20,1)", "\n", "\n", "Q", "=", "torch", ".", "div", "(", "input_flat", ",", "input_flat", ".", "sum", "(", "1", ")", ".", "unsqueeze", "(", "1", ")", "+", "eps", ")", "#prediction", "\n", "P", "=", "torch", ".", "div", "(", "target_flat", ",", "target_flat", ".", "sum", "(", "1", ")", ".", "unsqueeze", "(", "1", ")", "+", "eps", ")", "#ground turth", "\n", "\n", "kld", "=", "P", "*", "torch", ".", "log", "(", "eps", "+", "P", "/", "(", "eps", "+", "Q", ")", ")", "\n", "loss", "=", "kld", ".", "sum", "(", ")", "/", "N", "\n", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.tvdLoss.__init__": [[54, 56], ["torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.__init__"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", "tvdLoss", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.tvdLoss.forward": [[57, 73], ["target.size", "input.view", "target.view", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs.sum", "torch.abs.sum", "torch.abs.sum", "input.view.sum().unsqueeze", "target.view.sum().unsqueeze", "input.view.sum", "target.view.sum"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "input", ",", "target", ")", ":", "\n", "        ", "N", "=", "target", ".", "size", "(", "0", ")", "\n", "eps", "=", "1e-8", "\n", "input_flat", "=", "input", ".", "view", "(", "N", ",", "-", "1", ")", "#(20, 147456)", "\n", "target_flat", "=", "target", ".", "view", "(", "N", ",", "-", "1", ")", "\n", "# _,M=input_flat.size()", "\n", "# print (input_flat.size()) #(20, 147456)", "\n", "# print (input_flat.sum(1).unsqueeze(1).size()) # (20,1)", "\n", "\n", "Q", "=", "torch", ".", "div", "(", "input_flat", ",", "input_flat", ".", "sum", "(", "1", ")", ".", "unsqueeze", "(", "1", ")", "+", "eps", ")", "#prediction", "\n", "P", "=", "torch", ".", "div", "(", "target_flat", ",", "target_flat", ".", "sum", "(", "1", ")", ".", "unsqueeze", "(", "1", ")", "+", "eps", ")", "#ground turth", "\n", "\n", "# kld = P* torch.log(eps +  P/ (eps + Q))", "\n", "tv", "=", "torch", ".", "abs", "(", "P", "-", "Q", ")", "\n", "loss", "=", "tv", ".", "sum", "(", ")", "/", "N", "\n", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.DicebceLoss.__init__": [[76, 78], ["torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.__init__"], ["\t", "def", "__init__", "(", "self", ")", ":", "\n", "\t\t", "super", "(", "DicebceLoss", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.DicebceLoss.forward": [[79, 95], ["target.size", "input.view", "target.view", "torch.nn.BCELoss", "torch.nn.BCELoss", "torch.nn.BCELoss", "torch.nn.BCELoss", "torch.nn.BCELoss", "torch.nn.BCELoss", "torch.nn.BCELoss", "torch.nn.BCELoss", "torch.nn.BCELoss", "loss.sum", "intersection.sum", "input.view.sum", "target.view.sum"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "input", ",", "target", ")", ":", "\n", "\t\t", "N", "=", "target", ".", "size", "(", "0", ")", "\n", "smooth", "=", "1.", "\n", "\n", "input_flat", "=", "input", ".", "view", "(", "N", ",", "-", "1", ")", "\n", "target_flat", "=", "target", ".", "view", "(", "N", ",", "-", "1", ")", "\n", "\n", "intersection", "=", "input_flat", "*", "target_flat", "\n", "\n", "loss", "=", "2", "*", "(", "intersection", ".", "sum", "(", "1", ")", "+", "smooth", ")", "/", "(", "input_flat", ".", "sum", "(", "1", ")", "+", "target_flat", ".", "sum", "(", "1", ")", "+", "smooth", ")", "\n", "loss", "=", "1", "-", "loss", ".", "sum", "(", ")", "/", "N", "\n", "loss2", "=", "torch", ".", "nn", ".", "BCELoss", "(", ")", "(", "input", ",", "target", ")", "\n", "# loss = 1 - loss.sum() / N", "\n", "# loss2 = torch.nn.BCELoss()(input, target)", "\n", "\n", "return", "loss", "+", "loss2", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.tvdbceLoss.__init__": [[97, 99], ["torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.__init__"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", "tvdbceLoss", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.tvdbceLoss.forward": [[100, 117], ["target.size", "input.view", "target.view", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.div", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs.sum", "torch.abs.sum", "torch.abs.sum", "torch.nn.BCELoss", "torch.nn.BCELoss", "torch.nn.BCELoss", "torch.nn.BCELoss", "torch.nn.BCELoss", "torch.nn.BCELoss", "torch.nn.BCELoss", "torch.nn.BCELoss", "torch.nn.BCELoss", "input.view.sum().unsqueeze", "target.view.sum().unsqueeze", "input.view.sum", "target.view.sum"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "input", ",", "target", ")", ":", "\n", "        ", "N", "=", "target", ".", "size", "(", "0", ")", "\n", "eps", "=", "1e-8", "\n", "input_flat", "=", "input", ".", "view", "(", "N", ",", "-", "1", ")", "#(20, 147456)", "\n", "target_flat", "=", "target", ".", "view", "(", "N", ",", "-", "1", ")", "\n", "# _,M=input_flat.size()", "\n", "# print (input_flat.size()) #(20, 147456)", "\n", "# print (input_flat.sum(1).unsqueeze(1).size()) # (20,1)", "\n", "\n", "Q", "=", "torch", ".", "div", "(", "input_flat", ",", "input_flat", ".", "sum", "(", "1", ")", ".", "unsqueeze", "(", "1", ")", "+", "eps", ")", "#prediction", "\n", "P", "=", "torch", ".", "div", "(", "target_flat", ",", "target_flat", ".", "sum", "(", "1", ")", ".", "unsqueeze", "(", "1", ")", "+", "eps", ")", "#ground turth", "\n", "\n", "# kld = P* torch.log(eps +  P/ (eps + Q))", "\n", "tv", "=", "torch", ".", "abs", "(", "P", "-", "Q", ")", "\n", "loss", "=", "tv", ".", "sum", "(", ")", "/", "N", "\n", "loss2", "=", "torch", ".", "nn", ".", "BCELoss", "(", ")", "(", "input", ",", "target", ")", "\n", "return", "loss", "+", "loss2", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.postpnet.__init__": [[121, 124], ["torch.Module.__init__", "torch.MaxPool2d", "torch.MaxPool2d", "torch.MaxPool2d"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.__init__"], ["    ", "def", "__init__", "(", "self", ",", "kernel_size", "=", "3", ")", ":", "\n", "        ", "super", "(", "postpnet", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "kernel_size", ",", "stride", "=", "1", ",", "padding", "=", "(", "kernel_size", "-", "1", ")", "//", "2", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.postpnet.forward": [[125, 133], ["ysmodel.postpnet.maxpool", "x.sigmoid.sigmoid.sigmoid"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ",", "y", ")", ":", "\n", "# print (x.size())", "\n", "# x =F.sigmoid(x)", "\n", "        ", "x", "=", "self", ".", "maxpool", "(", "x", ")", "\n", "x", "=", "x", ".", "sigmoid", "(", ")", "\n", "x", "=", "x", "*", "y", "\n", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.BasicConv2d.__init__": [[137, 144], ["torch.Module.__init__", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.ReLU", "torch.ReLU", "torch.ReLU"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.__init__"], ["    ", "def", "__init__", "(", "self", ",", "in_planes", ",", "out_planes", ",", "kernel_size", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "dilation", "=", "1", ")", ":", "\n", "        ", "super", "(", "BasicConv2d", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv", "=", "nn", ".", "Conv2d", "(", "in_planes", ",", "out_planes", ",", "\n", "kernel_size", "=", "kernel_size", ",", "stride", "=", "stride", ",", "\n", "padding", "=", "padding", ",", "dilation", "=", "dilation", ",", "bias", "=", "False", ")", "\n", "self", ".", "bn", "=", "nn", ".", "BatchNorm2d", "(", "out_planes", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.BasicConv2d.forward": [[145, 149], ["ysmodel.BasicConv2d.conv", "ysmodel.BasicConv2d.bn"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "conv", "(", "x", ")", "\n", "x", "=", "self", ".", "bn", "(", "x", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.DIM_BAM.__init__": [[152, 185], ["torch.Module.__init__", "torch.ReLU", "torch.ReLU", "torch.ReLU", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "ysmodel.BasicConv2d", "ysmodel.BasicConv2d", "torch.Sequential", "torch.Sequential", "torch.Sequential", "ysmodel.BasicConv2d", "ysmodel.BasicConv2d", "ysmodel.BasicConv2d", "ysmodel.BasicConv2d", "ysmodel.BasicConv2d", "ysmodel.BasicConv2d", "ysmodel.BasicConv2d", "torch.Linear", "torch.Linear", "torch.Linear", "torch.ReLU", "torch.ReLU", "torch.ReLU", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Sigmoid", "torch.Sigmoid", "torch.Sigmoid"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.__init__"], ["    ", "def", "__init__", "(", "self", ",", "in_channel", ",", "out_channel", ",", "Weighted", "=", "True", ",", "reduction", "=", "4", ",", "shortcut", "=", "True", ")", ":", "\n", "        ", "super", "(", "DIM_BAM", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "True", ")", "\n", "self", ".", "Weighted", "=", "Weighted", "\n", "self", ".", "shortcut", "=", "shortcut", "\n", "self", ".", "branch0", "=", "nn", ".", "Sequential", "(", "\n", "BasicConv2d", "(", "in_channel", ",", "out_channel", ",", "1", ")", ",", "\n", ")", "\n", "self", ".", "branch1", "=", "nn", ".", "Sequential", "(", "\n", "# BasicConv2d(in_channel, out_channel, 1),", "\n", "BasicConv2d", "(", "out_channel", ",", "out_channel", ",", "3", ",", "padding", "=", "1", ",", "dilation", "=", "1", ")", ",", "\n", "# BasicConv2d_nobn(out_channel, out_channel, kernel_size=(1, 3), padding=(0, 1)),", "\n", "# BasicConv2d_nobn(out_channel, out_channel, kernel_size=(3, 1), padding=(1, 0)),", "\n", "BasicConv2d", "(", "out_channel", ",", "out_channel", ",", "3", ",", "padding", "=", "2", ",", "dilation", "=", "2", ")", "\n", ")", "\n", "self", ".", "branch2", "=", "nn", ".", "Sequential", "(", "\n", "# BasicConv2d(in_channel, out_channel, 1),", "\n", "BasicConv2d", "(", "out_channel", ",", "out_channel", ",", "3", ",", "padding", "=", "1", ",", "dilation", "=", "1", ")", ",", "\n", "BasicConv2d", "(", "out_channel", ",", "out_channel", ",", "3", ",", "padding", "=", "4", ",", "dilation", "=", "4", ")", "\n", ")", "\n", "self", ".", "branch3", "=", "nn", ".", "Sequential", "(", "\n", "# BasicConv2d(in_channel, out_channel, 1),", "\n", "BasicConv2d", "(", "out_channel", ",", "out_channel", ",", "3", ",", "padding", "=", "1", ",", "dilation", "=", "1", ")", ",", "\n", "BasicConv2d", "(", "out_channel", ",", "out_channel", ",", "3", ",", "padding", "=", "8", ",", "dilation", "=", "8", ")", "\n", ")", "\n", "self", ".", "conv_cat", "=", "BasicConv2d", "(", "out_channel", ",", "out_channel", ",", "3", ",", "padding", "=", "1", ")", "\n", "\n", "self", ".", "conv_res", "=", "BasicConv2d", "(", "out_channel", ",", "out_channel", ",", "1", ")", "\n", "self", ".", "fc1", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Linear", "(", "out_channel", ",", "out_channel", "//", "reduction", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", ",", "\n", "nn", ".", "Linear", "(", "out_channel", "//", "reduction", ",", "3", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "Sigmoid", "(", ")", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.DIM_BAM.forward": [[187, 209], ["ysmodel.DIM_BAM.branch0", "ysmodel.DIM_BAM.branch1", "ysmodel.DIM_BAM.branch2", "ysmodel.DIM_BAM.branch3", "ysmodel.DIM_BAM.size", "torch.avg_pool2d().view", "torch.avg_pool2d().view", "torch.avg_pool2d().view", "ysmodel.DIM_BAM.fc1().view", "list", "ysmodel.DIM_BAM.conv_cat", "ysmodel.DIM_BAM.conv_res", "ysmodel.DIM_BAM.relu", "torch.split", "torch.split", "torch.split", "torch.split", "torch.split", "torch.split", "torch.split", "torch.split", "torch.split", "torch.avg_pool2d", "torch.avg_pool2d", "torch.avg_pool2d", "ysmodel.DIM_BAM.fc1", "ysmodel.DIM_BAM.size"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x0", "=", "self", ".", "branch0", "(", "x", ")", "\n", "x1", "=", "self", ".", "branch1", "(", "x0", ")", "\n", "x2", "=", "self", ".", "branch2", "(", "x0", ")", "\n", "x3", "=", "self", ".", "branch3", "(", "x0", ")", "\n", "b", ",", "c", ",", "_", ",", "_", "=", "x0", ".", "size", "(", ")", "\n", "y", "=", "F", ".", "avg_pool2d", "(", "x0", ",", "kernel_size", "=", "x0", ".", "size", "(", ")", "[", "2", ":", "]", ")", ".", "view", "(", "b", ",", "c", ")", "\n", "y", "=", "self", ".", "fc1", "(", "y", ")", ".", "view", "(", "b", ",", "3", ",", "1", ",", "1", ")", "\n", "yall", "=", "list", "(", "torch", ".", "split", "(", "y", ",", "1", ",", "dim", "=", "1", ")", ")", "\n", "y1", ",", "y2", ",", "y3", "=", "yall", "[", "0", "]", ",", "yall", "[", "1", "]", ",", "yall", "[", "2", "]", "\n", "if", "self", ".", "Weighted", ":", "\n", "# po = x1 * y1*3./(y1+y2+y3) + x2*y2*3./(y1+y2+y3) +x3*y3*3./(y1+y2+y3)", "\n", "            ", "po", "=", "x1", "*", "y1", "+", "x2", "*", "y2", "+", "x3", "*", "y3", "\n", "", "else", ":", "\n", "            ", "po", "=", "x1", "+", "x2", "+", "x3", "\n", "# if self.shortcut:", "\n", "#     po = po + x0", "\n", "# po = x1 * y1 + x2*y2 +x3*y3", "\n", "", "x_cat", "=", "self", ".", "conv_cat", "(", "po", ")", "\n", "x_cat", "=", "self", ".", "conv_res", "(", "x_cat", ")", "\n", "x", "=", "self", ".", "relu", "(", "x_cat", "+", "x0", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.fpn_aggregation.__init__": [[214, 228], ["torch.Module.__init__", "torch.ReLU", "torch.ReLU", "torch.ReLU", "torch.Upsample", "torch.Upsample", "torch.Upsample", "ysmodel.BasicConv2d", "ysmodel.BasicConv2d", "ysmodel.BasicConv2d", "ysmodel.BasicConv2d", "ysmodel.BasicConv2d", "ysmodel.BasicConv2d", "ysmodel.BasicConv2d"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.__init__"], ["    ", "def", "__init__", "(", "self", ",", "channel", ",", "Weighted", "=", "True", ")", ":", "\n", "        ", "super", "(", "fpn_aggregation", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "True", ")", "\n", "\n", "self", ".", "upsample", "=", "nn", ".", "Upsample", "(", "scale_factor", "=", "2", ",", "mode", "=", "'bilinear'", ",", "align_corners", "=", "False", ")", "\n", "# BasicConv2d( 256, channel, kernel_size=1, stride=1, padding=0)", "\n", "self", ".", "smooth1", "=", "BasicConv2d", "(", "channel", ",", "channel", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "1", ")", "\n", "self", ".", "smooth2", "=", "BasicConv2d", "(", "channel", ",", "channel", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "1", ")", "\n", "self", ".", "smooth3", "=", "BasicConv2d", "(", "channel", ",", "channel", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "1", ")", "\n", "\n", "self", ".", "latlayer1", "=", "BasicConv2d", "(", "channel", ",", "channel", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ")", "\n", "self", ".", "latlayer2", "=", "BasicConv2d", "(", "channel", ",", "channel", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ")", "\n", "self", ".", "latlayer3", "=", "BasicConv2d", "(", "channel", ",", "channel", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ")", "\n", "self", ".", "latlayer4", "=", "BasicConv2d", "(", "channel", ",", "channel", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.fpn_aggregation._upsample_add": [[229, 232], ["y.size", "torch.upsample", "torch.upsample", "torch.upsample"], "methods", ["None"], ["", "def", "_upsample_add", "(", "self", ",", "x", ",", "y", ")", ":", "\n", "        ", "_", ",", "_", ",", "H", ",", "W", "=", "y", ".", "size", "(", ")", "\n", "return", "F", ".", "upsample", "(", "x", ",", "size", "=", "(", "H", ",", "W", ")", ",", "mode", "=", "'bilinear'", ")", "+", "y", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.fpn_aggregation.forward": [[233, 248], ["ysmodel.fpn_aggregation.latlayer1", "ysmodel.fpn_aggregation._upsample_add", "ysmodel.fpn_aggregation.smooth1", "ysmodel.fpn_aggregation.upsample", "ysmodel.fpn_aggregation._upsample_add", "ysmodel.fpn_aggregation.smooth2", "ysmodel.fpn_aggregation._upsample_add", "ysmodel.fpn_aggregation.smooth3", "ysmodel.fpn_aggregation.upsample", "ysmodel.fpn_aggregation.upsample", "ysmodel.fpn_aggregation.latlayer2", "ysmodel.fpn_aggregation.latlayer3", "ysmodel.fpn_aggregation.latlayer4"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.fpn_aggregation._upsample_add", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.fpn_aggregation._upsample_add", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.fpn_aggregation._upsample_add"], ["", "def", "forward", "(", "self", ",", "x1", ",", "x2", ",", "x3", ",", "x4", ")", ":", "\n", "# x1_1 = ", "\n", "        ", "x1", "=", "self", ".", "latlayer1", "(", "x1", ")", "\n", "p3", "=", "self", ".", "_upsample_add", "(", "x1", ",", "self", ".", "latlayer2", "(", "x2", ")", ")", "\n", "p3", "=", "self", ".", "smooth1", "(", "p3", ")", "\n", "p3", "=", "self", ".", "upsample", "(", "p3", ")", "\n", "p4", "=", "self", ".", "_upsample_add", "(", "p3", ",", "self", ".", "latlayer3", "(", "x3", ")", ")", "\n", "# p4o = self.dimrfb(p4)", "\n", "p4", "=", "self", ".", "smooth2", "(", "p4", ")", "\n", "p5", "=", "self", ".", "_upsample_add", "(", "p4", ",", "self", ".", "latlayer4", "(", "x4", ")", ")", "\n", "p5", "=", "self", ".", "smooth3", "(", "p5", ")", "\n", "# p5o = self.dimrfb(p5)", "\n", "p4", "=", "self", ".", "upsample", "(", "p4", ")", "\n", "p3", "=", "self", ".", "upsample", "(", "p3", ")", "\n", "return", "p3", ",", "p4", ",", "p5", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.__init__": [[253, 275], ["torch.Module.__init__", "model.ResNet.B1_ResNet", "ysmodel.BasicConv2d", "ysmodel.DIM_BAM", "ysmodel.DIM_BAM", "ysmodel.DIM_BAM", "ysmodel.fpn_aggregation", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "ysmodel.DIM_BAM", "ysmodel.DIM_BAM", "ysmodel.DIM_BAM", "torch.Upsample", "torch.Upsample", "torch.Upsample", "ysmodel.ysmodel.initialize_weights"], "methods", ["home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.__init__", "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.initialize_weights"], ["    ", "def", "__init__", "(", "self", ",", "channel", "=", "64", ",", "Weighted", "=", "True", ")", ":", "#32", "\n", "        ", "super", "(", "ysmodel", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "resnet", "=", "B1_ResNet", "(", ")", "\n", "self", ".", "rfb1_1", "=", "BasicConv2d", "(", "256", ",", "channel", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ")", "\n", "\n", "self", ".", "rfb2_1", "=", "DIM_BAM", "(", "512", ",", "channel", ",", "Weighted", ")", "\n", "self", ".", "rfb3_1", "=", "DIM_BAM", "(", "1024", ",", "channel", ",", "Weighted", ")", "\n", "self", ".", "rfb4_1", "=", "DIM_BAM", "(", "2048", ",", "channel", ",", "Weighted", ")", "\n", "\n", "self", ".", "agg1", "=", "fpn_aggregation", "(", "channel", ",", "Weighted", ")", "\n", "\n", "self", ".", "fusion0", "=", "nn", ".", "Conv2d", "(", "channel", ",", "channel", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "1", ")", "\n", "self", ".", "fusion1", "=", "nn", ".", "Conv2d", "(", "channel", ",", "channel", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "1", ")", "\n", "self", ".", "finalout", "=", "nn", ".", "Conv2d", "(", "channel", ",", "1", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ")", "\n", "\n", "self", ".", "dimrfb2", "=", "DIM_BAM", "(", "channel", ",", "channel", ",", "Weighted", ")", "\n", "self", ".", "dimrfb2a", "=", "DIM_BAM", "(", "channel", ",", "channel", ",", "Weighted", ")", "\n", "self", ".", "dimrfb2b", "=", "DIM_BAM", "(", "channel", ",", "channel", ",", "Weighted", ")", "\n", "self", ".", "upsample", "=", "nn", ".", "Upsample", "(", "scale_factor", "=", "4", ",", "mode", "=", "'bilinear'", ",", "align_corners", "=", "False", ")", "\n", "\n", "if", "self", ".", "training", ":", "\n", "            ", "self", ".", "initialize_weights", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.forward": [[276, 301], ["ysmodel.ysmodel.resnet.conv1", "ysmodel.ysmodel.resnet.bn1", "ysmodel.ysmodel.resnet.relu", "ysmodel.ysmodel.resnet.maxpool", "ysmodel.ysmodel.resnet.layer1", "ysmodel.ysmodel.resnet.layer2", "ysmodel.ysmodel.resnet.layer3_1", "ysmodel.ysmodel.resnet.layer4_1", "ysmodel.ysmodel.rfb1_1", "ysmodel.ysmodel.rfb2_1", "ysmodel.ysmodel.rfb3_1", "ysmodel.ysmodel.rfb4_1", "ysmodel.ysmodel.agg1", "ysmodel.ysmodel.dimrfb2", "ysmodel.ysmodel.dimrfb2a", "ysmodel.ysmodel.dimrfb2b", "ysmodel.ysmodel.finalout", "ysmodel.ysmodel.finalout", "ysmodel.ysmodel.finalout", "ysmodel.ysmodel.fusion1", "ysmodel.ysmodel.fusion1", "ysmodel.ysmodel.fusion1", "ysmodel.ysmodel.upsample", "ysmodel.ysmodel.upsample", "ysmodel.ysmodel.upsample", "ysmodel.ysmodel.fusion0", "ysmodel.ysmodel.fusion0", "ysmodel.ysmodel.fusion0"], "methods", ["None"], ["", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "resnet", ".", "conv1", "(", "x", ")", "\n", "x", "=", "self", ".", "resnet", ".", "bn1", "(", "x", ")", "\n", "x", "=", "self", ".", "resnet", ".", "relu", "(", "x", ")", "\n", "x", "=", "self", ".", "resnet", ".", "maxpool", "(", "x", ")", "\n", "x1", "=", "self", ".", "resnet", ".", "layer1", "(", "x", ")", "# 256 x 64 x 64", "\n", "x2", "=", "self", ".", "resnet", ".", "layer2", "(", "x1", ")", "# 512 x 32 x 32", "\n", "\n", "x2_1", "=", "x2", "\n", "x3_1", "=", "self", ".", "resnet", ".", "layer3_1", "(", "x2_1", ")", "# 1024 x 16 x 16", "\n", "x4_1", "=", "self", ".", "resnet", ".", "layer4_1", "(", "x3_1", ")", "# 2048 x 8 x 8", "\n", "x1_1", "=", "self", ".", "rfb1_1", "(", "x1", ")", "\n", "x2_1", "=", "self", ".", "rfb2_1", "(", "x2_1", ")", "\n", "x3_1", "=", "self", ".", "rfb3_1", "(", "x3_1", ")", "\n", "x4_1", "=", "self", ".", "rfb4_1", "(", "x4_1", ")", "\n", "am", ",", "attention_map", ",", "detection_map", "=", "self", ".", "agg1", "(", "x4_1", ",", "x3_1", ",", "x2_1", ",", "x1_1", ")", "\n", "\n", "detection_map", "=", "self", ".", "dimrfb2", "(", "detection_map", ")", "\n", "detection_map", "=", "self", ".", "dimrfb2a", "(", "detection_map", ")", "\n", "detection_map", "=", "self", ".", "dimrfb2b", "(", "detection_map", ")", "\n", "am", "=", "self", ".", "finalout", "(", "self", ".", "fusion1", "(", "self", ".", "fusion0", "(", "am", ")", ")", ")", "\n", "attention_map", "=", "self", ".", "finalout", "(", "self", ".", "fusion1", "(", "self", ".", "fusion0", "(", "attention_map", ")", ")", ")", "\n", "detection_map", "=", "self", ".", "finalout", "(", "self", ".", "fusion1", "(", "self", ".", "fusion0", "(", "detection_map", ")", ")", ")", "\n", "\n", "return", "self", ".", "upsample", "(", "am", ")", ",", "self", ".", "upsample", "(", "attention_map", ")", ",", "self", ".", "upsample", "(", "detection_map", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ysyscool_PSGLoss.model.ysmodel.ysmodel.initialize_weights": [[302, 317], ["torchvision.resnet50", "torchvision.resnet50.state_dict", "ysmodel.ysmodel.resnet.state_dict().items", "ysmodel.ysmodel.resnet.load_state_dict", "len", "len", "ysmodel.ysmodel.resnet.state_dict", "models.resnet50.state_dict.keys", "all_params.keys", "ysmodel.ysmodel.resnet.state_dict().keys", "ysmodel.ysmodel.resnet.state_dict", "k.split", "k.split"], "methods", ["None"], ["", "def", "initialize_weights", "(", "self", ")", ":", "\n", "        ", "res50", "=", "models", ".", "resnet50", "(", "pretrained", "=", "True", ")", "\n", "pretrained_dict", "=", "res50", ".", "state_dict", "(", ")", "\n", "all_params", "=", "{", "}", "\n", "for", "k", ",", "v", "in", "self", ".", "resnet", ".", "state_dict", "(", ")", ".", "items", "(", ")", ":", "\n", "            ", "if", "k", "in", "pretrained_dict", ".", "keys", "(", ")", ":", "\n", "                ", "v", "=", "pretrained_dict", "[", "k", "]", "\n", "all_params", "[", "k", "]", "=", "v", "\n", "", "elif", "'_1'", "in", "k", ":", "\n", "                ", "name", "=", "k", ".", "split", "(", "'_1'", ")", "[", "0", "]", "+", "k", ".", "split", "(", "'_1'", ")", "[", "1", "]", "\n", "v", "=", "pretrained_dict", "[", "name", "]", "\n", "all_params", "[", "k", "]", "=", "v", "\n", "\n", "", "", "assert", "len", "(", "all_params", ".", "keys", "(", ")", ")", "==", "len", "(", "self", ".", "resnet", ".", "state_dict", "(", ")", ".", "keys", "(", ")", ")", "\n", "self", ".", "resnet", ".", "load_state_dict", "(", "all_params", ")", "\n", "", "", ""]]}