{"home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.count_errors": [[72, 142], ["json.load", "collections.defaultdict", "collections.defaultdict", "collections.defaultdict", "collections.defaultdict", "float", "scores.readline", "float", "error.get", "error.get", "better", "collections.defaultdict", "collections.defaultdict", "collections.defaultdict", "collections.defaultdict", "scores.readline", "print", "annotations.strip", "print", "print", "print", "print", "print", "better", "print", "sentence[].rsplit", "annotations.strip", "int", "print"], "function", ["None"], ["", "", "def", "count_errors", "(", "reference", ",", "scores", ",", "maximize", ",", "categories", ",", "outputs", ",", "verbose", "=", "False", ")", ":", "\n", "    ", "\"\"\"read in scores file and count number of correct decisions\"\"\"", "\n", "\n", "reference", "=", "json", ".", "load", "(", "reference", ")", "\n", "\n", "results", "=", "{", "'by_category'", ":", "defaultdict", "(", "lambda", ":", "defaultdict", "(", "int", ")", ")", ",", "\n", "'by_distance'", ":", "defaultdict", "(", "lambda", ":", "defaultdict", "(", "int", ")", ")", ",", "\n", "'by_frequency'", ":", "defaultdict", "(", "lambda", ":", "defaultdict", "(", "int", ")", ")", ",", "\n", "'by_frequency_and_distance'", ":", "defaultdict", "(", "lambda", ":", "defaultdict", "(", "int", ")", ")", "}", "\n", "\n", "if", "maximize", ":", "\n", "        ", "better", "=", "gt", "\n", "", "else", ":", "\n", "        ", "better", "=", "lt", "\n", "\n", "", "for", "sentence", "in", "reference", ":", "\n", "        ", "score", "=", "float", "(", "scores", ".", "readline", "(", ")", ")", "\n", "for", "error", "in", "sentence", "[", "'errors'", "]", ":", "\n", "            ", "errorscore", "=", "float", "(", "scores", ".", "readline", "(", ")", ")", "\n", "category", "=", "error", "[", "'type'", "]", "\n", "if", "category", "not", "in", "categories", ":", "\n", "                ", "continue", "\n", "", "distance", "=", "error", ".", "get", "(", "'distance'", ",", "None", ")", "\n", "if", "distance", "in", "DISTANCE_TO_BIN", ":", "\n", "                ", "distance", "=", "DISTANCE_TO_BIN", "[", "distance", "]", "\n", "", "elif", "distance", "is", "not", "None", ":", "\n", "                ", "distance", "=", "DEFAULT_DISTANCE", "\n", "", "frequency", "=", "error", ".", "get", "(", "'frequency'", ",", "None", ")", "\n", "if", "frequency", "in", "FREQUENCY_TO_BIN", ":", "\n", "                ", "frequency", "=", "FREQUENCY_TO_BIN", "[", "frequency", "]", "\n", "", "elif", "frequency", "is", "not", "None", ":", "\n", "                ", "frequency", "=", "DEFAULT_FREQUENCY", "\n", "\n", "", "results", "[", "'by_category'", "]", "[", "category", "]", "[", "'total'", "]", "+=", "1", "\n", "if", "distance", "is", "not", "None", ":", "\n", "                ", "results", "[", "'by_distance'", "]", "[", "distance", "]", "[", "'total'", "]", "+=", "1", "\n", "", "if", "frequency", "is", "not", "None", ":", "\n", "                ", "results", "[", "'by_frequency'", "]", "[", "frequency", "]", "[", "'total'", "]", "+=", "1", "\n", "", "if", "frequency", "is", "not", "None", "and", "distance", "is", "not", "None", ":", "\n", "                ", "results", "[", "'by_frequency_and_distance'", "]", "[", "frequency", ",", "distance", "]", "[", "'total'", "]", "+=", "1", "\n", "", "if", "better", "(", "score", ",", "errorscore", ")", ":", "\n", "                ", "results", "[", "'by_category'", "]", "[", "category", "]", "[", "'correct'", "]", "+=", "1", "\n", "if", "distance", "is", "not", "None", ":", "\n", "                    ", "results", "[", "'by_distance'", "]", "[", "distance", "]", "[", "'correct'", "]", "+=", "1", "\n", "", "if", "frequency", "is", "not", "None", ":", "\n", "                    ", "results", "[", "'by_frequency'", "]", "[", "frequency", "]", "[", "'correct'", "]", "+=", "1", "\n", "", "if", "frequency", "is", "not", "None", "and", "distance", "is", "not", "None", ":", "\n", "                    ", "results", "[", "'by_frequency_and_distance'", "]", "[", "frequency", ",", "distance", "]", "[", "'correct'", "]", "+=", "1", "\n", "\n", "", "", "if", "verbose", "and", "not", "better", "(", "score", ",", "errorscore", ")", ":", "\n", "                ", "print", "(", "'id: {0}'", ".", "format", "(", "sentence", "[", "'origin'", "]", ")", ")", "\n", "annotations", "=", "''", "\n", "if", "distance", "is", "not", "None", ":", "\n", "                    ", "annotations", "+=", "'distance: {0}'", ".", "format", "(", "distance", ")", "\n", "", "if", "frequency", "is", "not", "None", ":", "\n", "                    ", "annotations", "+=", "' frequency: {0}'", ".", "format", "(", "frequency", ")", "\n", "", "if", "annotations", ".", "strip", "(", ")", ":", "\n", "                    ", "print", "(", "annotations", ".", "strip", "(", ")", ")", "\n", "", "print", "(", "'error: {0}'", ".", "format", "(", "category", ")", ")", "\n", "print", "(", "'source: {0}'", ".", "format", "(", "sentence", "[", "'source'", "]", ")", ")", "\n", "print", "(", "'correct (score {0}): {1}'", ".", "format", "(", "score", ",", "sentence", "[", "'reference'", "]", ")", ")", "\n", "print", "(", "'error (score {0}): {1}'", ".", "format", "(", "errorscore", ",", "error", "[", "'contrastive'", "]", ")", ")", "\n", "if", "outputs", ":", "\n", "                    ", "test_set", ",", "i", "=", "sentence", "[", "'origin'", "]", ".", "rsplit", "(", "'.'", ",", "1", ")", "\n", "i", "=", "int", "(", "i", ")", "-", "1", "\n", "if", "test_set", "in", "outputs", ":", "\n", "                        ", "print", "(", "'1best: {0}'", ".", "format", "(", "outputs", "[", "test_set", "]", "[", "i", "]", ")", ")", "\n", "", "", "print", "(", ")", "\n", "\n", "", "", "", "return", "results", "\n", "\n"]], "home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.get_scores": [[143, 151], ["None"], "function", ["None"], ["", "def", "get_scores", "(", "category", ")", ":", "\n", "    ", "correct", "=", "category", "[", "'correct'", "]", "\n", "total", "=", "category", "[", "'total'", "]", "\n", "if", "total", ":", "\n", "        ", "accuracy", "=", "correct", "/", "total", "\n", "", "else", ":", "\n", "        ", "accuracy", "=", "0", "\n", "", "return", "correct", ",", "total", ",", "accuracy", "\n", "\n"]], "home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.print_statistics": [[153, 158], ["sum", "sum", "print"], "function", ["None"], ["", "def", "print_statistics", "(", "results", ")", ":", "\n", "\n", "    ", "correct", "=", "sum", "(", "[", "results", "[", "'by_category'", "]", "[", "category", "]", "[", "'correct'", "]", "for", "category", "in", "results", "[", "'by_category'", "]", "]", ")", "\n", "total", "=", "sum", "(", "[", "results", "[", "'by_category'", "]", "[", "category", "]", "[", "'total'", "]", "for", "category", "in", "results", "[", "'by_category'", "]", "]", ")", "\n", "print", "(", "'{0} : {1} {2} {3}'", ".", "format", "(", "'total'", ",", "correct", ",", "total", ",", "correct", "/", "total", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.print_statistics_by_category": [[160, 167], ["evaluate.get_scores", "print"], "function", ["home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.get_scores"], ["", "def", "print_statistics_by_category", "(", "results", ")", ":", "\n", "\n", "    ", "for", "category", "in", "ERROR_CATEGORIES", ":", "\n", "        ", "correct", ",", "total", ",", "accuracy", "=", "get_scores", "(", "results", "[", "'by_category'", "]", "[", "category", "]", ")", "\n", "\n", "if", "total", ":", "\n", "            ", "print", "(", "'{0} : {1} {2} {3}'", ".", "format", "(", "category", ",", "correct", ",", "total", ",", "accuracy", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.print_statistics_by_distance": [[168, 175], ["evaluate.get_scores", "print"], "function", ["home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.get_scores"], ["", "", "", "def", "print_statistics_by_distance", "(", "results", ")", ":", "\n", "\n", "    ", "for", "distance", "in", "DISTANCE_BINS", ":", "\n", "        ", "correct", ",", "total", ",", "accuracy", "=", "get_scores", "(", "results", "[", "'by_distance'", "]", "[", "distance", "]", ")", "\n", "\n", "if", "total", ":", "\n", "            ", "print", "(", "'distance {0}: {1} {2} {3}'", ".", "format", "(", "distance", ",", "correct", ",", "total", ",", "accuracy", ")", ")", "\n", "##for gnuplot table", "\n"]], "home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.print_statistics_by_frequency": [[178, 185], ["evaluate.get_scores", "print"], "function", ["home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.get_scores"], ["", "", "", "def", "print_statistics_by_frequency", "(", "results", ")", ":", "\n", "\n", "    ", "for", "category", "in", "FREQUENCY_BINS", ":", "\n", "        ", "correct", ",", "total", ",", "accuracy", "=", "get_scores", "(", "results", "[", "'by_frequency'", "]", "[", "category", "]", ")", "\n", "\n", "if", "total", ":", "\n", "            ", "print", "(", "'{0} : {1} {2} {3}'", ".", "format", "(", "category", ",", "correct", ",", "total", ",", "accuracy", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.print_statistics_by_frequency_and_distance": [[186, 194], ["evaluate.get_scores", "print"], "function", ["home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.get_scores"], ["", "", "", "def", "print_statistics_by_frequency_and_distance", "(", "results", ")", ":", "\n", "\n", "    ", "for", "category", "in", "FREQUENCY_BINS", ":", "\n", "        ", "for", "distance", "in", "DISTANCE_BINS", ":", "\n", "            ", "correct", ",", "total", ",", "accuracy", "=", "get_scores", "(", "results", "[", "'by_frequency_and_distance'", "]", "[", "category", ",", "distance", "]", ")", "\n", "\n", "if", "total", ":", "\n", "                ", "print", "(", "'frequency: {0} distance: {1}: {2} {3} {4}'", ".", "format", "(", "category", ",", "distance", ",", "correct", ",", "total", ",", "accuracy", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.print_latex_table": [[195, 222], ["sum", "sum", "sum", "sum", "print", "print", "zip"], "function", ["None"], ["", "", "", "", "def", "print_latex_table", "(", "results", ")", ":", "\n", "    ", "\"\"\"print LateX table as published. Different types of polarity errors are merged\"\"\"", "\n", "\n", "correct", "=", "[", "0", "]", "*", "6", "\n", "total", "=", "[", "0", "]", "*", "6", "\n", "\n", "correct", "[", "0", "]", "=", "results", "[", "'by_category'", "]", "[", "'np_agreement'", "]", "[", "'correct'", "]", "\n", "total", "[", "0", "]", "=", "results", "[", "'by_category'", "]", "[", "'np_agreement'", "]", "[", "'total'", "]", "\n", "\n", "correct", "[", "1", "]", "=", "results", "[", "'by_category'", "]", "[", "'subj_verb_agreement'", "]", "[", "'correct'", "]", "\n", "total", "[", "1", "]", "=", "results", "[", "'by_category'", "]", "[", "'subj_verb_agreement'", "]", "[", "'total'", "]", "\n", "\n", "correct", "[", "2", "]", "=", "results", "[", "'by_category'", "]", "[", "'verb_particle'", "]", "[", "'correct'", "]", "\n", "total", "[", "2", "]", "=", "results", "[", "'by_category'", "]", "[", "'verb_particle'", "]", "[", "'total'", "]", "\n", "\n", "correct", "[", "3", "]", "=", "sum", "(", "results", "[", "'by_category'", "]", "[", "category", "]", "[", "'correct'", "]", "for", "category", "in", "[", "'polarity_particle_nicht_ins'", ",", "'polarity_particle_kein_ins'", ",", "'polarity_affix_ins'", "]", ")", "\n", "total", "[", "3", "]", "=", "sum", "(", "results", "[", "'by_category'", "]", "[", "category", "]", "[", "'total'", "]", "for", "category", "in", "[", "'polarity_particle_nicht_ins'", ",", "'polarity_particle_kein_ins'", ",", "'polarity_affix_ins'", "]", ")", "\n", "\n", "\n", "correct", "[", "4", "]", "=", "sum", "(", "results", "[", "'by_category'", "]", "[", "category", "]", "[", "'correct'", "]", "for", "category", "in", "[", "'polarity_particle_nicht_del'", ",", "'polarity_particle_kein_del'", ",", "'polarity_affix_del'", "]", ")", "\n", "total", "[", "4", "]", "=", "sum", "(", "results", "[", "'by_category'", "]", "[", "category", "]", "[", "'total'", "]", "for", "category", "in", "[", "'polarity_particle_nicht_del'", ",", "'polarity_particle_kein_del'", ",", "'polarity_affix_del'", "]", ")", "\n", "\n", "correct", "[", "5", "]", "=", "results", "[", "'by_category'", "]", "[", "'transliteration'", "]", "[", "'correct'", "]", "\n", "total", "[", "5", "]", "=", "results", "[", "'by_category'", "]", "[", "'transliteration'", "]", "[", "'total'", "]", "\n", "\n", "print", "(", "' & '", ".", "join", "(", "[", "'{0}'", ".", "format", "(", "t", ")", "for", "t", "in", "total", "]", ")", ")", "\n", "print", "(", "' & '", ".", "join", "(", "[", "'{0:.1f}'", ".", "format", "(", "c", "/", "t", "*", "100", ")", "for", "(", "c", ",", "t", ")", "in", "zip", "(", "correct", ",", "total", ")", "]", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.print_latex_table_polarity": [[223, 249], ["print", "print", "zip"], "function", ["None"], ["", "def", "print_latex_table_polarity", "(", "results", ")", ":", "\n", "    ", "\"\"\"print LateX table as published. Just polarity\"\"\"", "\n", "\n", "correct", "=", "[", "0", "]", "*", "6", "\n", "total", "=", "[", "0", "]", "*", "6", "\n", "\n", "correct", "[", "1", "]", "=", "results", "[", "'by_category'", "]", "[", "'polarity_particle_kein_ins'", "]", "[", "'correct'", "]", "\n", "total", "[", "1", "]", "=", "results", "[", "'by_category'", "]", "[", "'polarity_particle_kein_ins'", "]", "[", "'total'", "]", "\n", "\n", "correct", "[", "4", "]", "=", "results", "[", "'by_category'", "]", "[", "'polarity_particle_kein_del'", "]", "[", "'correct'", "]", "\n", "total", "[", "4", "]", "=", "results", "[", "'by_category'", "]", "[", "'polarity_particle_kein_del'", "]", "[", "'total'", "]", "\n", "\n", "correct", "[", "0", "]", "=", "results", "[", "'by_category'", "]", "[", "'polarity_particle_nicht_ins'", "]", "[", "'correct'", "]", "\n", "total", "[", "0", "]", "=", "results", "[", "'by_category'", "]", "[", "'polarity_particle_nicht_ins'", "]", "[", "'total'", "]", "\n", "\n", "correct", "[", "3", "]", "=", "results", "[", "'by_category'", "]", "[", "'polarity_particle_nicht_del'", "]", "[", "'correct'", "]", "\n", "total", "[", "3", "]", "=", "results", "[", "'by_category'", "]", "[", "'polarity_particle_nicht_del'", "]", "[", "'total'", "]", "\n", "\n", "correct", "[", "2", "]", "=", "results", "[", "'by_category'", "]", "[", "'polarity_affix_ins'", "]", "[", "'correct'", "]", "\n", "total", "[", "2", "]", "=", "results", "[", "'by_category'", "]", "[", "'polarity_affix_ins'", "]", "[", "'total'", "]", "\n", "\n", "correct", "[", "5", "]", "=", "results", "[", "'by_category'", "]", "[", "'polarity_affix_del'", "]", "[", "'correct'", "]", "\n", "total", "[", "5", "]", "=", "results", "[", "'by_category'", "]", "[", "'polarity_affix_del'", "]", "[", "'total'", "]", "\n", "\n", "print", "(", "' & '", ".", "join", "(", "[", "'{0}'", ".", "format", "(", "t", ")", "for", "t", "in", "total", "]", ")", ")", "\n", "print", "(", "' & '", ".", "join", "(", "[", "'{0:.1f}'", ".", "format", "(", "c", "/", "t", "*", "100", ")", "for", "(", "c", ",", "t", ")", "in", "zip", "(", "correct", ",", "total", ")", "]", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.load_outputs": [[251, 254], ["open().readlines", "open"], "function", ["None"], ["", "def", "load_outputs", "(", "d", ")", ":", "\n", "    ", "for", "f", "in", "d", ":", "\n", "        ", "d", "[", "f", "]", "=", "open", "(", "d", "[", "f", "]", ")", ".", "readlines", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.main": [[255, 280], ["evaluate.count_errors", "evaluate.print_statistics", "print", "print", "evaluate.print_statistics_by_category", "print", "print", "evaluate.print_statistics_by_distance", "print", "print", "evaluate.print_statistics_by_frequency", "print", "print", "evaluate.print_statistics_by_frequency_and_distance", "print", "print", "evaluate.print_latex_table", "print", "evaluate.print_latex_table_polarity"], "function", ["home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.count_errors", "home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.print_statistics", "home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.print_statistics_by_category", "home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.print_statistics_by_distance", "home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.print_statistics_by_frequency", "home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.print_statistics_by_frequency_and_distance", "home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.print_latex_table", "home.repos.pwc.inspect_result.rsennrich_lingeval97.None.evaluate.print_latex_table_polarity"], ["", "", "def", "main", "(", "reference", ",", "scores", ",", "maximize", ",", "categories", ",", "verbose", ",", "outputs", ",", "fd", ",", "latex", ",", "latex_polarity", ")", ":", "\n", "\n", "    ", "results", "=", "count_errors", "(", "reference", ",", "scores", ",", "maximize", ",", "categories", ",", "outputs", ",", "verbose", ")", "\n", "\n", "print_statistics", "(", "results", ")", "\n", "print", "(", ")", "\n", "print", "(", "'statistics by error category'", ")", "\n", "print_statistics_by_category", "(", "results", ")", "\n", "print", "(", ")", "\n", "print", "(", "'statistics by distance'", ")", "\n", "print_statistics_by_distance", "(", "results", ")", "\n", "print", "(", ")", "\n", "print", "(", "'statistics by frequency in training data'", ")", "\n", "print_statistics_by_frequency", "(", "results", ")", "\n", "print", "(", ")", "\n", "if", "fd", ":", "\n", "        ", "print", "(", "'statistics by frequency and distance'", ")", "\n", "print_statistics_by_frequency_and_distance", "(", "results", ")", "\n", "print", "(", ")", "\n", "", "if", "latex", ":", "\n", "        ", "print", "(", "'LaTeX table'", ")", "\n", "print_latex_table", "(", "results", ")", "\n", "", "if", "latex_polarity", ":", "\n", "        ", "print", "(", "'LaTeX table (polarity)'", ")", "\n", "print_latex_table_polarity", "(", "results", ")", "\n", "\n"]]}