{"home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.model.generator": [[11, 97], ["tensorflow.variable_scope", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d_transpose", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d"], "function", ["None"], ["def", "generator", "(", "z", ")", ":", "\n", "    ", "with", "tf", ".", "variable_scope", "(", "'G'", ",", "reuse", "=", "tf", ".", "AUTO_REUSE", ")", ":", "\n", "        ", "conv1", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "z", ",", "\n", "filters", "=", "64", ",", "\n", "kernel_size", "=", "[", "5", ",", "5", "]", ",", "\n", "strides", "=", "(", "1", ",", "1", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv2", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv1", ",", "\n", "filters", "=", "128", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv3", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv2", ",", "\n", "filters", "=", "256", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "\n", "strides", "=", "(", "1", ",", "1", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv4", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv3", ",", "\n", "filters", "=", "256", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "\n", "strides", "=", "(", "1", ",", "1", ")", ",", "\n", "dilation_rate", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv5", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv4", ",", "\n", "filters", "=", "256", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "\n", "strides", "=", "(", "1", ",", "1", ")", ",", "\n", "dilation_rate", "=", "(", "4", ",", "4", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv5_p", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv5", ",", "\n", "filters", "=", "256", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "\n", "strides", "=", "(", "1", ",", "1", ")", ",", "\n", "dilation_rate", "=", "(", "8", ",", "8", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv6", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv5_p", ",", "\n", "filters", "=", "256", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "\n", "strides", "=", "(", "1", ",", "1", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "deconv7", "=", "tf", ".", "layers", ".", "conv2d_transpose", "(", "\n", "inputs", "=", "conv6", ",", "\n", "filters", "=", "128", ",", "\n", "kernel_size", "=", "[", "4", ",", "4", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv8", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "deconv7", ",", "\n", "filters", "=", "64", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "\n", "strides", "=", "(", "1", ",", "1", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "out", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv8", ",", "\n", "filters", "=", "3", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "\n", "strides", "=", "(", "1", ",", "1", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "sigmoid", ")", "\n", "\n", "", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.model.global_discriminator": [[98, 149], ["tensorflow.variable_scope", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.flatten", "tensorflow.layers.dense"], "function", ["None"], ["", "def", "global_discriminator", "(", "x", ")", ":", "\n", "    ", "with", "tf", ".", "variable_scope", "(", "'DG'", ",", "reuse", "=", "tf", ".", "AUTO_REUSE", ")", ":", "\n", "        ", "conv1", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "x", ",", "\n", "filters", "=", "32", ",", "\n", "kernel_size", "=", "[", "5", ",", "5", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv2", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv1", ",", "\n", "filters", "=", "64", ",", "\n", "kernel_size", "=", "[", "5", ",", "5", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv3", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv2", ",", "\n", "filters", "=", "64", ",", "\n", "kernel_size", "=", "[", "5", ",", "5", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv4", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv3", ",", "\n", "filters", "=", "64", ",", "\n", "kernel_size", "=", "[", "5", ",", "5", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv5", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv4", ",", "\n", "filters", "=", "64", ",", "\n", "kernel_size", "=", "[", "5", ",", "5", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv5_flat", "=", "tf", ".", "layers", ".", "flatten", "(", "\n", "inputs", "=", "conv5", ")", "\n", "\n", "dense6", "=", "tf", ".", "layers", ".", "dense", "(", "\n", "inputs", "=", "conv5_flat", ",", "\n", "units", "=", "512", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "", "return", "dense6", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.model.concatenator": [[150, 158], ["tensorflow.variable_scope", "tensorflow.layers.dense"], "function", ["None"], ["", "def", "concatenator", "(", "global_x", ")", ":", "\n", "    ", "with", "tf", ".", "variable_scope", "(", "'C'", ",", "reuse", "=", "tf", ".", "AUTO_REUSE", ")", ":", "\n", "        ", "dense1", "=", "tf", ".", "layers", ".", "dense", "(", "\n", "inputs", "=", "global_x", ",", "\n", "units", "=", "1", ",", "\n", "activation", "=", "tf", ".", "sigmoid", ")", "\n", "\n", "", "return", "dense1", "\n", "", ""]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.model_ld.generator": [[11, 97], ["tensorflow.variable_scope", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d_transpose", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d"], "function", ["None"], ["def", "generator", "(", "z", ")", ":", "\n", "    ", "with", "tf", ".", "variable_scope", "(", "'G'", ",", "reuse", "=", "tf", ".", "AUTO_REUSE", ")", ":", "\n", "        ", "conv1", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "z", ",", "\n", "filters", "=", "64", ",", "\n", "kernel_size", "=", "[", "5", ",", "5", "]", ",", "\n", "strides", "=", "(", "1", ",", "1", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv2", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv1", ",", "\n", "filters", "=", "128", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv3", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv2", ",", "\n", "filters", "=", "256", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "\n", "strides", "=", "(", "1", ",", "1", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv4", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv3", ",", "\n", "filters", "=", "256", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "\n", "strides", "=", "(", "1", ",", "1", ")", ",", "\n", "dilation_rate", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv5", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv4", ",", "\n", "filters", "=", "256", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "\n", "strides", "=", "(", "1", ",", "1", ")", ",", "\n", "dilation_rate", "=", "(", "4", ",", "4", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv5_p", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv5", ",", "\n", "filters", "=", "256", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "\n", "strides", "=", "(", "1", ",", "1", ")", ",", "\n", "dilation_rate", "=", "(", "8", ",", "8", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv6", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv5_p", ",", "\n", "filters", "=", "256", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "\n", "strides", "=", "(", "1", ",", "1", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "deconv7", "=", "tf", ".", "layers", ".", "conv2d_transpose", "(", "\n", "inputs", "=", "conv6", ",", "\n", "filters", "=", "128", ",", "\n", "kernel_size", "=", "[", "4", ",", "4", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv8", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "deconv7", ",", "\n", "filters", "=", "64", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "\n", "strides", "=", "(", "1", ",", "1", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "out", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv8", ",", "\n", "filters", "=", "3", ",", "\n", "kernel_size", "=", "[", "3", ",", "3", "]", ",", "\n", "strides", "=", "(", "1", ",", "1", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "sigmoid", ")", "\n", "\n", "", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.model_ld.global_discriminator": [[98, 149], ["tensorflow.variable_scope", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.flatten", "tensorflow.layers.dense"], "function", ["None"], ["", "def", "global_discriminator", "(", "x", ")", ":", "\n", "    ", "with", "tf", ".", "variable_scope", "(", "'DG'", ",", "reuse", "=", "tf", ".", "AUTO_REUSE", ")", ":", "\n", "        ", "conv1", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "x", ",", "\n", "filters", "=", "32", ",", "\n", "kernel_size", "=", "[", "5", ",", "5", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv2", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv1", ",", "\n", "filters", "=", "64", ",", "\n", "kernel_size", "=", "[", "5", ",", "5", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv3", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv2", ",", "\n", "filters", "=", "64", ",", "\n", "kernel_size", "=", "[", "5", ",", "5", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv4", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv3", ",", "\n", "filters", "=", "64", ",", "\n", "kernel_size", "=", "[", "5", ",", "5", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv5", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv4", ",", "\n", "filters", "=", "64", ",", "\n", "kernel_size", "=", "[", "5", ",", "5", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv5_flat", "=", "tf", ".", "layers", ".", "flatten", "(", "\n", "inputs", "=", "conv5", ")", "\n", "\n", "dense6", "=", "tf", ".", "layers", ".", "dense", "(", "\n", "inputs", "=", "conv5_flat", ",", "\n", "units", "=", "512", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "", "return", "dense6", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.model_ld.local_discriminator": [[150, 193], ["tensorflow.variable_scope", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.conv2d", "tensorflow.layers.flatten", "tensorflow.layers.dense"], "function", ["None"], ["", "def", "local_discriminator", "(", "x", ")", ":", "\n", "    ", "with", "tf", ".", "variable_scope", "(", "'DL'", ",", "reuse", "=", "tf", ".", "AUTO_REUSE", ")", ":", "\n", "        ", "conv1", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "x", ",", "\n", "filters", "=", "32", ",", "\n", "kernel_size", "=", "[", "5", ",", "5", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv2", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv1", ",", "\n", "filters", "=", "64", ",", "\n", "kernel_size", "=", "[", "5", ",", "5", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv3", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv2", ",", "\n", "filters", "=", "64", ",", "\n", "kernel_size", "=", "[", "5", ",", "5", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv4", "=", "tf", ".", "layers", ".", "conv2d", "(", "\n", "inputs", "=", "conv3", ",", "\n", "filters", "=", "64", ",", "\n", "kernel_size", "=", "[", "5", ",", "5", "]", ",", "\n", "strides", "=", "(", "2", ",", "2", ")", ",", "\n", "padding", "=", "\"same\"", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "conv4_flat", "=", "tf", ".", "layers", ".", "flatten", "(", "\n", "inputs", "=", "conv4", ")", "\n", "\n", "dense5", "=", "tf", ".", "layers", ".", "dense", "(", "\n", "inputs", "=", "conv4_flat", ",", "\n", "units", "=", "512", ",", "\n", "activation", "=", "tf", ".", "nn", ".", "relu", ")", "\n", "\n", "", "return", "dense5", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.model_ld.concatenator": [[194, 202], ["tensorflow.variable_scope", "tensorflow.layers.dense", "tensorflow.concat"], "function", ["None"], ["", "def", "concatenator", "(", "global_x", ",", "local_x_left", ",", "local_x_right", ")", ":", "\n", "    ", "with", "tf", ".", "variable_scope", "(", "'C'", ",", "reuse", "=", "tf", ".", "AUTO_REUSE", ")", ":", "\n", "        ", "dense1", "=", "tf", ".", "layers", ".", "dense", "(", "\n", "inputs", "=", "tf", ".", "concat", "(", "[", "global_x", ",", "local_x_left", ",", "local_x_right", "]", ",", "axis", "=", "-", "1", ")", ",", "\n", "units", "=", "1", ",", "\n", "activation", "=", "tf", ".", "sigmoid", ")", "\n", "\n", "", "return", "dense1", "\n", "", ""]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.load_city_image": [[19, 28], ["PIL.Image.open().convert", "im.crop.crop", "numpy.array", "PIL.Image.open"], "function", ["None"], ["def", "load_city_image", "(", ")", ":", "\n", "    ", "im", "=", "Image", ".", "open", "(", "'images/city_128.png'", ")", ".", "convert", "(", "'RGB'", ")", "\n", "width", ",", "height", "=", "im", ".", "size", "\n", "left", "=", "(", "width", "-", "IMAGE_SZ", ")", "/", "2", "\n", "top", "=", "(", "height", "-", "IMAGE_SZ", ")", "/", "2", "\n", "im", "=", "im", ".", "crop", "(", "(", "left", ",", "top", ",", "left", "+", "IMAGE_SZ", ",", "top", "+", "IMAGE_SZ", ")", ")", "\n", "pix", "=", "np", ".", "array", "(", "im", ")", "\n", "assert", "pix", ".", "shape", "==", "(", "IMAGE_SZ", ",", "IMAGE_SZ", ",", "3", ")", "\n", "return", "pix", "[", "np", ".", "newaxis", "]", "/", "255.0", "# Need to normalize images to [0, 1]", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.load_images": [[31, 42], ["sorted", "numpy.array", "os.listdir", "os.path.join", "PIL.Image.open().convert", "numpy.array", "imgs.append", "print", "os.path.abspath", "PIL.Image.open"], "function", ["None"], ["", "def", "load_images", "(", "in_PATH", ",", "verbose", "=", "False", ")", ":", "\n", "    ", "imgs", "=", "[", "]", "\n", "for", "filename", "in", "sorted", "(", "os", ".", "listdir", "(", "in_PATH", ")", ")", ":", "\n", "        ", "if", "verbose", ":", "\n", "            ", "print", "(", "'Processing %s'", "%", "filename", ")", "\n", "", "full_filename", "=", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "abspath", "(", "in_PATH", ")", ",", "filename", ")", "\n", "img", "=", "Image", ".", "open", "(", "full_filename", ")", ".", "convert", "(", "'RGB'", ")", "\n", "pix", "=", "np", ".", "array", "(", "img", ")", "\n", "pix_norm", "=", "pix", "/", "255.0", "\n", "imgs", ".", "append", "(", "pix_norm", ")", "\n", "", "return", "np", ".", "array", "(", "imgs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.compile_images": [[44, 47], ["util.load_images", "numpy.save"], "function", ["home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.load_images"], ["", "def", "compile_images", "(", "in_PATH", ",", "out_PATH", ")", ":", "\n", "    ", "imgs", "=", "load_images", "(", "in_PATH", ",", "verbose", "=", "True", ")", "\n", "np", ".", "save", "(", "out_PATH", ",", "imgs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.preprocess_images_outpainting": [[50, 60], ["numpy.array", "numpy.mean", "numpy.zeros", "numpy.concatenate", "int", "int", "int", "int"], "function", ["None"], ["", "def", "preprocess_images_outpainting", "(", "imgs", ",", "crop", "=", "True", ")", ":", "\n", "    ", "m", "=", "imgs", ".", "shape", "[", "0", "]", "\n", "imgs", "=", "np", ".", "array", "(", "imgs", ",", "copy", "=", "True", ")", "\n", "pix_avg", "=", "np", ".", "mean", "(", "imgs", ",", "axis", "=", "(", "1", ",", "2", ",", "3", ")", ")", "\n", "if", "crop", ":", "\n", "        ", "imgs", "[", ":", ",", ":", ",", ":", "int", "(", "2", "*", "IMAGE_SZ", "/", "8", ")", ",", ":", "]", "=", "imgs", "[", ":", ",", ":", ",", "int", "(", "-", "2", "*", "IMAGE_SZ", "/", "8", ")", ":", ",", ":", "]", "=", "pix_avg", "[", ":", ",", "np", ".", "newaxis", ",", "np", ".", "newaxis", ",", "np", ".", "newaxis", "]", "\n", "", "mask", "=", "np", ".", "zeros", "(", "(", "m", ",", "IMAGE_SZ", ",", "IMAGE_SZ", ",", "1", ")", ")", "\n", "mask", "[", ":", ",", ":", ",", ":", "int", "(", "2", "*", "IMAGE_SZ", "/", "8", ")", ",", ":", "]", "=", "mask", "[", ":", ",", ":", ",", "int", "(", "-", "2", "*", "IMAGE_SZ", "/", "8", ")", ":", ",", ":", "]", "=", "1.0", "\n", "imgs_p", "=", "np", ".", "concatenate", "(", "(", "imgs", ",", "mask", ")", ",", "axis", "=", "3", ")", "\n", "return", "imgs_p", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.preprocess_images_gen": [[63, 73], ["numpy.array", "numpy.mean", "int", "numpy.zeros", "numpy.concatenate", "numpy.ones", "int", "int"], "function", ["None"], ["", "def", "preprocess_images_gen", "(", "img", ")", ":", "\n", "    ", "img", "=", "np", ".", "array", "(", "img", ",", "copy", "=", "True", ")", "\n", "pix_avg", "=", "np", ".", "mean", "(", "img", ")", "\n", "dw", "=", "int", "(", "2", "*", "IMAGE_SZ", "/", "8", ")", "# Amount that will be outpainted on each side", "\n", "img_expand", "=", "np", ".", "ones", "(", "(", "img", ".", "shape", "[", "0", "]", ",", "img", ".", "shape", "[", "1", "]", "+", "2", "*", "dw", ",", "img", ".", "shape", "[", "2", "]", ")", ")", "*", "pix_avg", "\n", "img_expand", "[", ":", ",", "dw", ":", "-", "dw", ",", ":", "]", "=", "img", "\n", "mask", "=", "np", ".", "zeros", "(", "(", "img_expand", ".", "shape", "[", "0", "]", ",", "img_expand", ".", "shape", "[", "1", "]", ",", "1", ")", ")", "\n", "mask", "[", ":", ",", ":", "int", "(", "2", "*", "IMAGE_SZ", "/", "8", ")", ",", ":", "]", "=", "mask", "[", ":", ",", "int", "(", "-", "2", "*", "IMAGE_SZ", "/", "8", ")", ":", ",", ":", "]", "=", "1.0", "\n", "img_p", "=", "np", ".", "concatenate", "(", "(", "img_expand", ",", "mask", ")", ",", "axis", "=", "2", ")", "\n", "return", "img_p", "[", "np", ".", "newaxis", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.norm_image": [[75, 78], ["None"], "function", ["None"], ["", "def", "norm_image", "(", "img_r", ")", ":", "\n", "    ", "img_norm", "=", "(", "img_r", "*", "255.0", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "return", "img_norm", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.vis_image": [[80, 84], ["util.norm_image", "PIL.Image.fromarray", "Image.fromarray.show"], "function", ["home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.norm_image"], ["", "def", "vis_image", "(", "img_r", ",", "mode", "=", "'RGB'", ")", ":", "\n", "    ", "img_norm", "=", "norm_image", "(", "img_r", ")", "\n", "img", "=", "Image", ".", "fromarray", "(", "img_norm", ",", "mode", ")", "\n", "img", ".", "show", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.save_image": [[86, 90], ["util.norm_image", "PIL.Image.fromarray", "Image.fromarray.save"], "function", ["home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.norm_image"], ["", "def", "save_image", "(", "img_r", ",", "name", ",", "mode", "=", "'RGB'", ")", ":", "\n", "    ", "img_norm", "=", "norm_image", "(", "img_r", ")", "\n", "img", "=", "Image", ".", "fromarray", "(", "img_norm", ",", "mode", ")", "\n", "img", ".", "save", "(", "name", ",", "format", "=", "'PNG'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.sample_random_minibatch": [[94, 97], ["numpy.random.randint"], "function", ["None"], ["", "def", "sample_random_minibatch", "(", "data", ",", "data_p", ",", "m", ")", ":", "\n", "    ", "indices", "=", "np", ".", "random", ".", "randint", "(", "0", ",", "data", ".", "shape", "[", "0", "]", ",", "m", ")", "\n", "return", "data", "[", "indices", "]", ",", "data_p", "[", "indices", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.plot_loss": [[99, 112], ["numpy.load", "matplotlib.plot", "matplotlib.plot", "matplotlib.legend", "matplotlib.xlabel", "matplotlib.ylabel", "matplotlib.title", "matplotlib.savefig", "matplotlib.clf"], "function", ["None"], ["", "def", "plot_loss", "(", "loss_filename", ",", "title", ",", "out_filename", ")", ":", "\n", "    ", "loss", "=", "np", ".", "load", "(", "loss_filename", ")", "\n", "assert", "'train_MSE_loss'", "in", "loss", "and", "'dev_MSE_loss'", "in", "loss", "\n", "train_MSE_loss", "=", "loss", "[", "'train_MSE_loss'", "]", "\n", "dev_MSE_loss", "=", "loss", "[", "'dev_MSE_loss'", "]", "# TODO: Deal with dev_MSE_loss not changing during Phase 2", "\n", "label_train", ",", "=", "plt", ".", "plot", "(", "train_MSE_loss", "[", ":", ",", "0", "]", ",", "train_MSE_loss", "[", ":", ",", "1", "]", ",", "label", "=", "'Training MSE loss'", ")", "\n", "label_dev", ",", "=", "plt", ".", "plot", "(", "dev_MSE_loss", "[", ":", ",", "0", "]", ",", "dev_MSE_loss", "[", ":", ",", "1", "]", ",", "label", "=", "'Dev MSE loss'", ")", "\n", "plt", ".", "legend", "(", "handles", "=", "[", "label_train", ",", "label_dev", "]", ")", "\n", "plt", ".", "xlabel", "(", "'Iteration'", ")", "\n", "plt", ".", "ylabel", "(", "'MSE Loss'", ")", "\n", "plt", ".", "title", "(", "title", ")", "\n", "plt", ".", "savefig", "(", "out_filename", ")", "\n", "plt", ".", "clf", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.plot_loss2": [[114, 130], ["numpy.load", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.legend", "matplotlib.xlabel", "matplotlib.ylabel", "matplotlib.title", "matplotlib.savefig", "matplotlib.clf"], "function", ["None"], ["", "def", "plot_loss2", "(", "loss_filename", ",", "title", ",", "out_filename", ")", ":", "\n", "    ", "loss", "=", "np", ".", "load", "(", "loss_filename", ")", "\n", "itrain_MSE_loss", ",", "train_MSE_loss", "=", "loss", "[", "'itrain_MSE_loss'", "]", ",", "loss", "[", "'train_MSE_loss'", "]", "\n", "idev_MSE_loss", ",", "dev_MSE_loss", "=", "loss", "[", "'idev_MSE_loss'", "]", ",", "loss", "[", "'dev_MSE_loss'", "]", "\n", "iG_loss", ",", "G_loss", "=", "loss", "[", "'iG_loss'", "]", ",", "loss", "[", "'G_loss'", "]", "\n", "iD_loss", ",", "D_loss", "=", "loss", "[", "'iD_loss'", "]", ",", "loss", "[", "'D_loss'", "]", "\n", "label_train", ",", "=", "plt", ".", "plot", "(", "itrain_MSE_loss", ",", "train_MSE_loss", ",", "label", "=", "'Training MSE loss'", ")", "\n", "label_dev", ",", "=", "plt", ".", "plot", "(", "idev_MSE_loss", ",", "dev_MSE_loss", ",", "label", "=", "'Dev MSE loss'", ")", "\n", "label_G", ",", "=", "plt", ".", "plot", "(", "iG_loss", ",", "G_loss", ",", "label", "=", "'Generator loss'", ")", "\n", "label_D", ",", "=", "plt", ".", "plot", "(", "iD_loss", ",", "D_loss", ",", "label", "=", "'Discriminator loss'", ")", "\n", "plt", ".", "legend", "(", "handles", "=", "[", "label_train", ",", "label_dev", ",", "label_G", ",", "label_D", "]", ")", "\n", "plt", ".", "xlabel", "(", "'Iteration'", ")", "\n", "plt", ".", "ylabel", "(", "'Loss'", ")", "\n", "plt", ".", "title", "(", "title", ")", "\n", "plt", ".", "savefig", "(", "out_filename", ")", "\n", "plt", ".", "clf", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.postprocess_images_outpainting": [[132, 143], ["cv2.imread", "cv2.imwrite", "cv2.imread", "cv2.seamlessClone", "cv2.imread.copy", "numpy.ones", "int", "int", "int", "int", "int", "int"], "function", ["None"], ["", "def", "postprocess_images_outpainting", "(", "img_PATH", ",", "img_o_PATH", ",", "out_PATH", ",", "blend", "=", "False", ")", ":", "# img, img_0 are (64, 64, 3), mask is (64, 64, 1)", "\n", "    ", "src", "=", "cv2", ".", "imread", "(", "img_PATH", ")", "[", ":", ",", "int", "(", "2", "*", "IMAGE_SZ", "/", "8", ")", ":", "-", "int", "(", "2", "*", "IMAGE_SZ", "/", "8", ")", ",", ":", "]", "\n", "dst", "=", "cv2", ".", "imread", "(", "img_o_PATH", ")", "\n", "if", "blend", ":", "\n", "        ", "mask", "=", "np", ".", "ones", "(", "src", ".", "shape", ",", "src", ".", "dtype", ")", "*", "255", "\n", "center", "=", "(", "int", "(", "IMAGE_SZ", "/", "2", ")", "-", "1", ",", "int", "(", "IMAGE_SZ", "/", "2", ")", "-", "1", ")", "\n", "out", "=", "cv2", ".", "seamlessClone", "(", "src", ",", "dst", ",", "mask", ",", "center", ",", "cv2", ".", "NORMAL_CLONE", ")", "\n", "", "else", ":", "\n", "        ", "out", "=", "dst", ".", "copy", "(", ")", "\n", "out", "[", ":", ",", "int", "(", "2", "*", "IMAGE_SZ", "/", "8", ")", ":", "-", "int", "(", "2", "*", "IMAGE_SZ", "/", "8", ")", ",", ":", "]", "=", "src", "\n", "", "cv2", ".", "imwrite", "(", "out_PATH", ",", "out", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.postprocess_images_gen": [[145, 156], ["img[].copy", "img_o[].copy", "out[].copy", "cv2.seamlessClone", "img_o[].copy.copy", "numpy.ones", "int", "int", "int", "int"], "function", ["None"], ["", "def", "postprocess_images_gen", "(", "img", ",", "img_o", ",", "blend", "=", "False", ")", ":", "\n", "    ", "src", "=", "img", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", ".", "copy", "(", ")", "\n", "dst", "=", "img_o", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", ".", "copy", "(", ")", "\n", "if", "blend", ":", "\n", "        ", "mask", "=", "np", ".", "ones", "(", "src", ".", "shape", ",", "src", ".", "dtype", ")", "*", "255", "\n", "center", "=", "(", "int", "(", "dst", ".", "shape", "[", "1", "]", "/", "2", ")", "-", "1", ",", "int", "(", "dst", ".", "shape", "[", "0", "]", "/", "2", ")", "-", "1", ")", "\n", "out", "=", "cv2", ".", "seamlessClone", "(", "src", ",", "dst", ",", "mask", ",", "center", ",", "cv2", ".", "NORMAL_CLONE", ")", "\n", "", "else", ":", "\n", "        ", "out", "=", "dst", ".", "copy", "(", ")", "\n", "out", "[", ":", ",", "int", "(", "2", "*", "IMAGE_SZ", "/", "8", ")", ":", "-", "int", "(", "2", "*", "IMAGE_SZ", "/", "8", ")", ",", ":", "]", "=", "src", "\n", "", "return", "out", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", ".", "copy", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.resize_images": [[158, 175], ["os.listdir", "print", "os.path.join", "PIL.Image.open().convert", "img_raw.crop.resize", "os.path.join", "img_crop.resize.save", "os.path.abspath", "int", "Image.open().convert.crop", "int", "Image.open().convert.crop", "os.path.abspath", "PIL.Image.open"], "function", ["home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.figs.resize"], ["", "def", "resize_images", "(", "src_PATH", ",", "dst_PATH", ")", ":", "\n", "    ", "for", "filename", "in", "os", ".", "listdir", "(", "src_PATH", ")", ":", "\n", "        ", "print", "(", "'Processing %s'", "%", "filename", ")", "\n", "full_filename", "=", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "abspath", "(", "src_PATH", ")", ",", "filename", ")", "\n", "img_raw", "=", "Image", ".", "open", "(", "full_filename", ")", ".", "convert", "(", "'RGB'", ")", "\n", "w", ",", "h", "=", "img_raw", ".", "size", "\n", "if", "w", "<=", "h", ":", "\n", "            ", "dim", "=", "w", "\n", "y_start", "=", "int", "(", "(", "h", "-", "dim", ")", "/", "2", ")", "\n", "img_crop", "=", "img_raw", ".", "crop", "(", "box", "=", "(", "0", ",", "y_start", ",", "dim", ",", "y_start", "+", "dim", ")", ")", "\n", "", "else", ":", "# w > h", "\n", "            ", "dim", "=", "h", "\n", "x_start", "=", "int", "(", "(", "w", "-", "dim", ")", "/", "2", ")", "\n", "img_crop", "=", "img_raw", ".", "crop", "(", "box", "=", "(", "x_start", ",", "0", ",", "x_start", "+", "dim", ",", "dim", ")", ")", "\n", "", "img_scale", "=", "img_crop", ".", "resize", "(", "(", "IMAGE_SZ", ",", "IMAGE_SZ", ")", ",", "Image", ".", "ANTIALIAS", ")", "\n", "full_outfilename", "=", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "abspath", "(", "dst_PATH", ")", ",", "filename", ")", "\n", "img_scale", ".", "save", "(", "full_outfilename", ",", "format", "=", "'PNG'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.parse_log": [[177, 237], ["numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.savez", "open", "enumerate", "len", "float", "int", "line.strip.strip", "line.strip.startswith", "data.append", "len", "util.parse_log.extract_loss"], "function", ["None"], ["", "", "def", "parse_log", "(", "in_PATH", ",", "out_PATH", ")", ":", "\n", "    ", "data", "=", "[", "]", "\n", "curr_list", "=", "[", "]", "\n", "with", "open", "(", "in_PATH", ",", "'r'", ")", "as", "fp", ":", "\n", "        ", "for", "i", ",", "line", "in", "enumerate", "(", "fp", ")", ":", "\n", "            ", "if", "i", "==", "0", ":", "\n", "                ", "continue", "\n", "", "line", "=", "line", ".", "strip", "(", ")", "\n", "if", "line", ".", "startswith", "(", "'----'", ")", ":", "\n", "                ", "continue", "\n", "", "elif", "line", ".", "startswith", "(", "'Model'", ")", ":", "\n", "                ", "continue", "\n", "", "elif", "line", ".", "startswith", "(", "'Iteration'", ")", ":", "\n", "                ", "if", "len", "(", "curr_list", ")", ":", "\n", "                    ", "data", ".", "append", "(", "curr_list", ")", "\n", "curr_list", "=", "[", "]", "\n", "", "curr_list", ".", "append", "(", "line", ")", "\n", "", "else", ":", "\n", "                ", "curr_list", ".", "append", "(", "line", ")", "\n", "", "", "if", "len", "(", "curr_list", ")", ":", "\n", "            ", "data", ".", "append", "(", "curr_list", ")", "\n", "", "", "G_MSE_train", ",", "G_MSE_dev", ",", "G", ",", "C", "=", "None", ",", "None", ",", "None", ",", "None", "\n", "G_MSE_train_s", ",", "G_MSE_dev_s", ",", "G_s", ",", "C_s", "=", "[", "]", ",", "[", "]", ",", "[", "]", ",", "[", "]", "\n", "G_MSE_train_is", ",", "G_MSE_dev_is", ",", "G_is", ",", "C_is", "=", "[", "]", ",", "[", "]", ",", "[", "]", ",", "[", "]", "\n", "def", "extract_loss", "(", "str", ")", ":", "\n", "        ", "return", "float", "(", "re", ".", "findall", "(", "'= ([\\d, .]+)'", ",", "str", ")", "[", "0", "]", ")", "\n", "", "for", "entry", "in", "data", ":", "\n", "        ", "i", "=", "int", "(", "re", ".", "findall", "(", "'\\[(\\d+)/'", ",", "entry", "[", "0", "]", ")", "[", "0", "]", ")", "\n", "if", "len", "(", "entry", ")", "==", "3", ":", "# Phase 1", "\n", "            ", "G_MSE_train", "=", "extract_loss", "(", "entry", "[", "1", "]", ")", "\n", "G_MSE_dev", "=", "extract_loss", "(", "entry", "[", "2", "]", ")", "\n", "", "elif", "len", "(", "entry", ")", "==", "2", ":", "# Phase 2", "\n", "            ", "C", "=", "extract_loss", "(", "entry", "[", "1", "]", ")", "\n", "", "elif", "len", "(", "entry", ")", "==", "5", ":", "# Phase 3", "\n", "            ", "G_MSE_train", "=", "extract_loss", "(", "entry", "[", "1", "]", ")", "\n", "G_MSE_dev", "=", "extract_loss", "(", "entry", "[", "2", "]", ")", "\n", "G", "=", "extract_loss", "(", "entry", "[", "3", "]", ")", "\n", "C", "=", "extract_loss", "(", "entry", "[", "4", "]", ")", "\n", "", "if", "G_MSE_train", "is", "not", "None", ":", "\n", "            ", "G_MSE_train_s", ".", "append", "(", "G_MSE_train", ")", "\n", "G_MSE_train_is", ".", "append", "(", "i", ")", "\n", "", "if", "G_MSE_dev", "is", "not", "None", ":", "\n", "            ", "G_MSE_dev_s", ".", "append", "(", "G_MSE_dev", ")", "\n", "G_MSE_dev_is", ".", "append", "(", "i", ")", "\n", "", "if", "G", "is", "not", "None", ":", "\n", "            ", "G_s", ".", "append", "(", "G", ")", "\n", "G_is", ".", "append", "(", "i", ")", "\n", "", "if", "C", "is", "not", "None", ":", "\n", "            ", "C_s", ".", "append", "(", "C", ")", "\n", "C_is", ".", "append", "(", "i", ")", "\n", "", "", "G_MSE_train_sm", "=", "np", ".", "array", "(", "G_MSE_train_s", ")", "\n", "G_MSE_dev_sm", "=", "np", ".", "array", "(", "G_MSE_dev_s", ")", "\n", "G_sm", "=", "np", ".", "array", "(", "G_s", ")", "\n", "C_sm", "=", "np", ".", "array", "(", "C_s", ")", "\n", "G_MSE_train_ism", "=", "np", ".", "array", "(", "G_MSE_train_is", ")", "\n", "G_MSE_dev_ism", "=", "np", ".", "array", "(", "G_MSE_dev_is", ")", "\n", "G_ism", "=", "np", ".", "array", "(", "G_is", ")", "\n", "C_ism", "=", "np", ".", "array", "(", "C_is", ")", "\n", "np", ".", "savez", "(", "out_PATH", ",", "train_MSE_loss", "=", "G_MSE_train_sm", ",", "dev_MSE_loss", "=", "G_MSE_dev_sm", ",", "G_loss", "=", "G_sm", ",", "D_loss", "=", "C_sm", ",", "\n", "itrain_MSE_loss", "=", "G_MSE_train_ism", ",", "idev_MSE_loss", "=", "G_MSE_dev_ism", ",", "iG_loss", "=", "G_ism", ",", "iD_loss", "=", "C_ism", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.smooth_MSE_loss": [[239, 251], ["numpy.load", "range", "numpy.array", "numpy.savez", "new_train_list.append", "numpy.sum", "float", "numpy.sum", "float"], "function", ["None"], ["", "def", "smooth_MSE_loss", "(", "loss_file", ",", "window_size", ",", "outfile", ")", ":", "\n", "    ", "losses", "=", "np", ".", "load", "(", "loss_file", ")", "\n", "train", "=", "losses", "[", "'train_MSE_loss'", "]", "\n", "dev", "=", "losses", "[", "'dev_MSE_loss'", "]", "\n", "num_train", "=", "train", ".", "shape", "[", "0", "]", "\n", "new_train_list", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "0", ",", "num_train", ",", "window_size", ")", ":", "\n", "        ", "window_avg", "=", "np", ".", "sum", "(", "train", "[", "i", ":", "i", "+", "window_size", ",", "1", "]", ")", "/", "float", "(", "window_size", ")", "\n", "window_avg_val", "=", "np", ".", "sum", "(", "train", "[", "i", ":", "i", "+", "window_size", ",", "0", "]", ")", "/", "float", "(", "window_size", ")", "\n", "new_train_list", ".", "append", "(", "[", "window_avg_val", ",", "window_avg", "]", ")", "\n", "", "np_train", "=", "np", ".", "array", "(", "new_train_list", "[", ":", "-", "2", "]", ")", "\n", "np", ".", "savez", "(", "outfile", ",", "train_MSE_loss", "=", "np_train", ",", "dev_MSE_loss", "=", "dev", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.create_GIF": [[253, 264], ["range", "imageio.mimwrite", "os.path.join", "os.path.abspath", "images.append", "imageio.imread", "str"], "function", ["None"], ["", "def", "create_GIF", "(", "in_PATH", ",", "prefix", ",", "out_PATH", ")", ":", "\n", "    ", "indices", "=", "range", "(", "0", ",", "227401", ",", "200", ")", "\n", "images", "=", "[", "]", "\n", "for", "index", "in", "indices", ":", "\n", "        ", "full_filename", "=", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "abspath", "(", "in_PATH", ")", ",", "prefix", "+", "str", "(", "index", ")", "+", "'.png'", ")", "\n", "try", ":", "\n", "            ", "images", ".", "append", "(", "imageio", ".", "imread", "(", "full_filename", ")", ")", "\n", "", "except", ":", "\n", "            ", "continue", "\n", "", "", "images", "=", "images", "[", ":", "50", "]", "+", "images", "[", "50", ":", ":", "10", "]", "+", "[", "images", "[", "-", "1", "]", "]", "\n", "imageio", ".", "mimwrite", "(", "out_PATH", ",", "images", ",", "loop", "=", "1", ",", "duration", "=", "0.1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.util.compute_RMSE": [[266, 275], ["numpy.array().astype", "numpy.array().astype", "numpy.ones", "numpy.sqrt", "numpy.array", "numpy.array", "numpy.sum", "PIL.Image.open().convert", "PIL.Image.open().convert", "PIL.Image.open", "PIL.Image.open"], "function", ["None"], ["", "def", "compute_RMSE", "(", "image_gt_PATH", ",", "image_o_PATH", ")", ":", "\n", "    ", "im_gt", "=", "np", ".", "array", "(", "Image", ".", "open", "(", "image_gt_PATH", ")", ".", "convert", "(", "'RGB'", ")", ")", ".", "astype", "(", "np", ".", "float64", ")", "\n", "im_o", "=", "np", ".", "array", "(", "Image", ".", "open", "(", "image_o_PATH", ")", ".", "convert", "(", "'RGB'", ")", ")", ".", "astype", "(", "np", ".", "float64", ")", "\n", "assert", "im_gt", ".", "shape", "==", "(", "128", ",", "128", ",", "3", ")", "\n", "assert", "im_o", ".", "shape", "==", "(", "128", ",", "128", ",", "3", ")", "\n", "M", "=", "np", ".", "ones", "(", "(", "128", ",", "128", ",", "3", ")", ")", "\n", "M", "[", ":", ",", "32", ":", "96", ",", ":", "]", "=", "0", "\n", "num_pixels", "=", "128", "*", "64", "*", "3", "\n", "return", "np", ".", "sqrt", "(", "np", ".", "sum", "(", "(", "(", "im_gt", "-", "im_o", ")", "*", "M", ")", "**", "2", ")", "/", "num_pixels", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.figs.resize": [[13, 17], ["PIL.Image.open().convert", "Image.open().convert.resize", "img.resize.save", "PIL.Image.open"], "function", ["home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.figs.resize"], ["def", "resize", "(", "in_PATH", ",", "out_PATH", ")", ":", "\n", "    ", "img", "=", "Image", ".", "open", "(", "in_PATH", ")", ".", "convert", "(", "'RGB'", ")", "\n", "img_scale", "=", "img", ".", "resize", "(", "(", "IMAGE_SZ", ",", "IMAGE_SZ", ")", ",", "Image", ".", "ANTIALIAS", ")", "\n", "img_scale", ".", "save", "(", "out_PATH", ",", "format", "=", "'PNG'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShinyCode_image-outpainting.src.figs.mask": [[18, 24], ["numpy.array", "numpy.mean", "PIL.Image.fromarray", "Image.fromarray.save", "PIL.Image.open().convert", "Image.fromarray.astype", "PIL.Image.open", "int", "int"], "function", ["None"], ["", "def", "mask", "(", "in_PATH", ",", "out_PATH", ")", ":", "\n", "    ", "img", "=", "np", ".", "array", "(", "Image", ".", "open", "(", "in_PATH", ")", ".", "convert", "(", "'RGB'", ")", ")", "\n", "pix_avg", "=", "np", ".", "mean", "(", "img", ")", "\n", "img", "[", ":", ",", ":", "int", "(", "2", "*", "IMAGE_SZ", "/", "8", ")", ",", ":", "]", "=", "img", "[", ":", ",", "int", "(", "-", "2", "*", "IMAGE_SZ", "/", "8", ")", ":", ",", ":", "]", "=", "pix_avg", "\n", "img", "=", "Image", ".", "fromarray", "(", "img", ".", "astype", "(", "np", ".", "uint8", ")", ",", "'RGB'", ")", "\n", "img", ".", "save", "(", "out_PATH", ",", "format", "=", "'PNG'", ")", "\n", "", ""]]}