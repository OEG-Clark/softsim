{"home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.main.count_number_trainable_params": [[31, 38], ["tensorflow.trainable_variables", "trainable_variable.get_shape", "main.get_nb_params_shape"], "function", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.main.get_nb_params_shape"], ["def", "count_number_trainable_params", "(", ")", ":", "\n", "    ", "tot_nb_params", "=", "0", "\n", "for", "trainable_variable", "in", "tf", ".", "trainable_variables", "(", ")", ":", "\n", "        ", "shape", "=", "trainable_variable", ".", "get_shape", "(", ")", "\n", "current_nb_params", "=", "get_nb_params_shape", "(", "shape", ")", "\n", "tot_nb_params", "=", "tot_nb_params", "+", "current_nb_params", "\n", "", "return", "tot_nb_params", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.main.get_nb_params_shape": [[39, 44], ["int"], "function", ["None"], ["", "def", "get_nb_params_shape", "(", "shape", ")", ":", "\n", "    ", "nb_params", "=", "1", "\n", "for", "dim", "in", "shape", ":", "\n", "        ", "nb_params", "=", "nb_params", "*", "int", "(", "dim", ")", "\n", "", "return", "nb_params", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.main.signal_handler": [[104, 110], ["print", "saver.save", "sys.exit"], "function", ["None"], ["def", "signal_handler", "(", "signal", ",", "frame", ")", ":", "\n", "  ", "global", "stop_requested", "\n", "print", "(", "'You just pressed Ctrl+C! Saving model.'", ")", "\n", "saver", ".", "save", "(", "sess", ",", "CHECKPOINT_DIR", "+", "'/'", "+", "'checkpoint'", ",", "global_step", "=", "training_thread", ".", "global_t", ")", "\n", "stop_requested", "=", "True", "\n", "sys", ".", "exit", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.__init__": [[11, 20], ["int"], "methods", ["None"], ["  ", "def", "__init__", "(", "self", ",", "batch_size", ",", "generic_map_size", ")", ":", "\n", "    ", "self", ".", "batch_size", "=", "batch_size", "\n", "self", ".", "agent_mark", "=", "4", "\n", "self", ".", "unknown_mark", "=", "3", "\n", "self", ".", "generic_map_size", "=", "generic_map_size", "\n", "self", ".", "unavail_mark", "=", "1", "\n", "self", ".", "free_mark", "=", "0", "\n", "self", ".", "visited_mark", "=", "2", "\n", "self", ".", "radius", "=", "int", "(", "INPUT_SIZE", "/", "2", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.create_blank_map": [[21, 29], ["range", "numpy.ones"], "methods", ["None"], ["", "def", "create_blank_map", "(", "self", ",", "size", ")", ":", "\n", "    ", "blank_map", "=", "np", ".", "ones", "(", "(", "size", ",", "size", ")", ",", "dtype", "=", "int", ")", "*", "self", ".", "free_mark", "\n", "for", "i", "in", "range", "(", "size", ")", ":", "\n", "      ", "blank_map", "[", "0", ",", "i", "]", "=", "self", ".", "unavail_mark", "\n", "blank_map", "[", "size", "-", "1", ",", "i", "]", "=", "self", ".", "unavail_mark", "\n", "blank_map", "[", "i", ",", "0", "]", "=", "self", ".", "unavail_mark", "\n", "blank_map", "[", "i", ",", "size", "-", "1", "]", "=", "self", ".", "unavail_mark", "\n", "", "return", "blank_map", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.maze": [[30, 53], ["int", "int", "range", "numpy.ones", "range", "len", "numpy.random.random_integers", "numpy.random.random_integers", "neighbours.append", "neighbours.append", "neighbours.append", "neighbours.append", "numpy.random.random_integers", "len"], "methods", ["None"], ["", "def", "maze", "(", "self", ",", "width", "=", "13", ",", "height", "=", "13", ",", "complexity", "=", ".1", ",", "density", "=", ".75", ")", ":", "\n", "    ", "shape", "=", "(", "(", "height", "//", "2", ")", "*", "2", "+", "1", ",", "(", "width", "//", "2", ")", "*", "2", "+", "1", ")", "\n", "complexity", "=", "int", "(", "complexity", "*", "(", "5", "*", "(", "shape", "[", "0", "]", "+", "shape", "[", "1", "]", ")", ")", ")", "\n", "density", "=", "int", "(", "density", "*", "(", "(", "shape", "[", "0", "]", "//", "2", ")", "*", "(", "shape", "[", "1", "]", "//", "2", ")", ")", ")", "\n", "Z", "=", "np", ".", "ones", "(", "shape", ",", "dtype", "=", "int", ")", "*", "self", ".", "free_mark", "\n", "Z", "[", "0", ",", ":", "]", "=", "Z", "[", "-", "1", ",", ":", "]", "=", "self", ".", "unavail_mark", "\n", "Z", "[", ":", ",", "0", "]", "=", "Z", "[", ":", ",", "-", "1", "]", "=", "self", ".", "unavail_mark", "\n", "for", "i", "in", "range", "(", "density", ")", ":", "\n", "        ", "x", ",", "y", "=", "rand", "(", "0", ",", "shape", "[", "1", "]", "//", "2", ")", "*", "2", ",", "rand", "(", "0", ",", "shape", "[", "0", "]", "//", "2", ")", "*", "2", "\n", "Z", "[", "y", ",", "x", "]", "=", "self", ".", "unavail_mark", "\n", "for", "j", "in", "range", "(", "complexity", ")", ":", "\n", "            ", "neighbours", "=", "[", "]", "\n", "if", "x", ">", "1", ":", "neighbours", ".", "append", "(", "(", "y", ",", "x", "-", "2", ")", ")", "\n", "if", "x", "<", "shape", "[", "1", "]", "-", "2", ":", "neighbours", ".", "append", "(", "(", "y", ",", "x", "+", "2", ")", ")", "\n", "if", "y", ">", "1", ":", "neighbours", ".", "append", "(", "(", "y", "-", "2", ",", "x", ")", ")", "\n", "if", "y", "<", "shape", "[", "0", "]", "-", "2", ":", "neighbours", ".", "append", "(", "(", "y", "+", "2", ",", "x", ")", ")", "\n", "if", "len", "(", "neighbours", ")", ":", "\n", "                ", "y_", ",", "x_", "=", "neighbours", "[", "rand", "(", "0", ",", "len", "(", "neighbours", ")", "-", "1", ")", "]", "\n", "if", "Z", "[", "y_", ",", "x_", "]", "==", "self", ".", "free_mark", ":", "\n", "                    ", "Z", "[", "y_", ",", "x_", "]", "=", "self", ".", "unavail_mark", "\n", "Z", "[", "y_", "+", "(", "y", "-", "y_", ")", "//", "2", ",", "x_", "+", "(", "x", "-", "x_", ")", "//", "2", "]", "=", "self", ".", "unavail_mark", "\n", "x", ",", "y", "=", "x_", ",", "y_", "\n", "", "", "", "", "return", "Z", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.clip_bound": [[54, 60], ["None"], "methods", ["None"], ["", "def", "clip_bound", "(", "self", ",", "val", ")", ":", "\n", "    ", "if", "val", "<", "0", ":", "\n", "      ", "return", "0", "\n", "", "if", "val", ">=", "MAP_SIZE", ":", "\n", "      ", "return", "MAP_SIZE", "-", "1", "\n", "", "return", "val", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.to_tuple": [[61, 63], ["tuple", "tuple", "arr.tolist"], "methods", ["None"], ["", "def", "to_tuple", "(", "self", ",", "arr", ")", ":", "\n", "    ", "return", "tuple", "(", "[", "tuple", "(", "l", ")", "for", "l", "in", "arr", ".", "tolist", "(", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.reset_agent_pos": [[64, 104], ["numpy.zeros", "numpy.zeros", "int", "int", "range", "range", "range", "numpy.ones", "numpy.ones", "map_env.MapEnv.clip_bound", "map_env.MapEnv.clip_bound", "map_env.MapEnv.clip_bound", "map_env.MapEnv.clip_bound", "map_env.MapEnv.pattern_loc.append", "numpy.zeros", "numpy.copy", "numpy.ones", "map_env.MapEnv.create_blank_map", "map_env.MapEnv.maze", "map_env.MapEnv.to_tuple", "map_env.MapEnv.to_tuple"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.clip_bound", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.clip_bound", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.clip_bound", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.clip_bound", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.create_blank_map", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.maze", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.to_tuple", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.to_tuple"], ["", "def", "reset_agent_pos", "(", "self", ")", ":", "\n", "    ", "self", ".", "init_map", "=", "np", ".", "zeros", "(", "(", "self", ".", "batch_size", ",", "MAP_SIZE", ",", "MAP_SIZE", ")", ",", "dtype", "=", "int", ")", "\n", "if", "BLANK_MAP", ":", "\n", "      ", "for", "batch_ind", "in", "range", "(", "self", ".", "batch_size", ")", ":", "\n", "        ", "self", ".", "init_map", "[", "batch_ind", ",", ":", ",", ":", "]", "=", "self", ".", "create_blank_map", "(", "MAP_SIZE", ")", "\n", "", "", "else", ":", "\n", "      ", "for", "batch_ind", "in", "range", "(", "self", ".", "batch_size", ")", ":", "\n", "        ", "self", ".", "init_map", "[", "batch_ind", ",", ":", ",", ":", "]", "=", "self", ".", "maze", "(", "MAP_SIZE", ",", "MAP_SIZE", ",", "MAP_COMPLEXITY", ",", "MAP_DENSITY", ")", "\n", "", "", "self", ".", "maps", "=", "np", ".", "ones", "(", "(", "self", ".", "batch_size", ",", "self", ".", "init_map", ".", "shape", "[", "1", "]", ",", "self", ".", "init_map", ".", "shape", "[", "2", "]", ")", ",", "dtype", "=", "int", ")", "*", "self", ".", "unknown_mark", "\n", "self", ".", "generic_maps", "=", "np", ".", "ones", "(", "(", "self", ".", "batch_size", ",", "self", ".", "generic_map_size", ",", "self", ".", "generic_map_size", ")", ",", "dtype", "=", "int", ")", "*", "self", ".", "unknown_mark", "\n", "self", ".", "agent_pos", "=", "np", ".", "zeros", "(", "(", "self", ".", "batch_size", ",", "2", ")", ",", "dtype", "=", "int", ")", "\n", "self", ".", "agent_pos", "[", ":", ",", "0", "]", "=", "int", "(", "MAP_SIZE", "/", "2", ")", "\n", "self", ".", "agent_pos", "[", ":", ",", "1", "]", "=", "int", "(", "MAP_SIZE", "/", "2", ")", "\n", "self", ".", "pattern_loc", "=", "[", "]", "\n", "\n", "for", "batch_ind", "in", "range", "(", "self", ".", "batch_size", ")", ":", "\n", "      ", "ystart", "=", "self", ".", "clip_bound", "(", "self", ".", "agent_pos", "[", "batch_ind", "]", "[", "0", "]", "-", "self", ".", "radius", ")", "\n", "yend", "=", "self", ".", "clip_bound", "(", "self", ".", "agent_pos", "[", "batch_ind", "]", "[", "0", "]", "+", "self", ".", "radius", ")", "\n", "xstart", "=", "self", ".", "clip_bound", "(", "self", ".", "agent_pos", "[", "batch_ind", "]", "[", "1", "]", "-", "self", ".", "radius", ")", "\n", "xend", "=", "self", ".", "clip_bound", "(", "self", ".", "agent_pos", "[", "batch_ind", "]", "[", "1", "]", "+", "self", ".", "radius", ")", "\n", "y", ",", "x", "=", "np", ".", "ogrid", "[", "ystart", ":", "yend", "+", "1", ",", "xstart", ":", "xend", "+", "1", "]", "\n", "self", ".", "maps", "[", "batch_ind", ",", "y", ",", "x", "]", "=", "self", ".", "init_map", "[", "batch_ind", ",", "y", ",", "x", "]", "\n", "if", "self", ".", "maps", "[", "batch_ind", "]", "[", "self", ".", "agent_pos", "[", "batch_ind", ",", "0", "]", "]", "[", "self", ".", "agent_pos", "[", "batch_ind", ",", "1", "]", "]", "==", "self", ".", "free_mark", ":", "\n", "        ", "self", ".", "maps", "[", "batch_ind", "]", "[", "self", ".", "agent_pos", "[", "batch_ind", ",", "0", "]", "]", "[", "self", ".", "agent_pos", "[", "batch_ind", ",", "1", "]", "]", "=", "self", ".", "visited_mark", "\n", "\n", "", "old_ego", "=", "self", ".", "maps", "[", "batch_ind", ",", "y", ",", "x", "]", "\n", "generic_pos", "=", "(", "self", ".", "generic_map_size", "/", "2", ",", "self", ".", "generic_map_size", "/", "2", ")", "\n", "\n", "self", ".", "pattern_loc", ".", "append", "(", "{", "}", ")", "\n", "self", ".", "pattern_loc", "[", "batch_ind", "]", "[", "self", ".", "to_tuple", "(", "self", ".", "init_map", "[", "batch_ind", ",", "y", ",", "x", "]", ")", "]", "=", "np", ".", "zeros", "(", "(", "48", ",", "48", ")", ",", "dtype", "=", "int", ")", "\n", "self", ".", "pattern_loc", "[", "batch_ind", "]", "[", "self", ".", "to_tuple", "(", "self", ".", "init_map", "[", "batch_ind", ",", "y", ",", "x", "]", ")", "]", "[", "generic_pos", "[", "0", "]", ",", "generic_pos", "[", "1", "]", "]", "=", "1", "\n", "\n", "ystart", "=", "generic_pos", "[", "0", "]", "-", "self", ".", "radius", "\n", "yend", "=", "generic_pos", "[", "0", "]", "+", "self", ".", "radius", "\n", "xstart", "=", "generic_pos", "[", "1", "]", "-", "self", ".", "radius", "\n", "xend", "=", "generic_pos", "[", "1", "]", "+", "self", ".", "radius", "\n", "y", ",", "x", "=", "np", ".", "ogrid", "[", "ystart", ":", "yend", "+", "1", ",", "xstart", ":", "xend", "+", "1", "]", "\n", "self", ".", "generic_maps", "[", "batch_ind", ",", "y", ",", "x", "]", "=", "np", ".", "copy", "(", "old_ego", ")", "\n", "\n", "", "self", ".", "generic_pos", "=", "np", ".", "ones", "(", "(", "self", ".", "batch_size", ",", "2", ")", ",", "dtype", "=", "int", ")", "*", "(", "self", ".", "generic_map_size", "/", "2", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.move_spiral": [[105, 183], ["int", "int", "map_env.MapEnv.clip_bound", "map_env.MapEnv.clip_bound", "map_env.MapEnv.clip_bound", "map_env.MapEnv.clip_bound", "range", "numpy.where", "map_env.MapEnv.to_tuple", "numpy.zeros"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.clip_bound", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.clip_bound", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.clip_bound", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.clip_bound", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.to_tuple"], ["", "def", "move_spiral", "(", "self", ")", ":", "\n", "    ", "r0", "=", "int", "(", "MAP_SIZE", "/", "2", ")", "\n", "c0", "=", "int", "(", "MAP_SIZE", "/", "2", ")", "\n", "r_cur", "=", "self", ".", "agent_pos", "[", "0", ",", "0", "]", "\n", "c_cur", "=", "self", ".", "agent_pos", "[", "0", ",", "1", "]", "\n", "rdelta", "=", "r_cur", "-", "r0", "\n", "cdelta", "=", "c_cur", "-", "c0", "\n", "\n", "r_next", "=", "r_cur", "\n", "c_next", "=", "c_cur", "\n", "\n", "if", "cdelta", ">=", "0", ":", "\n", "      ", "rlow", "=", "r0", "+", "(", "-", "cdelta", "+", "1", ")", "\n", "rhigh", "=", "r0", "+", "(", "cdelta", "-", "1", ")", "\n", "if", "r_cur", "<", "rlow", ":", "\n", "        ", "r_next", "=", "r_cur", "\n", "c_next", "+=", "1", "\n", "", "elif", "r_cur", "<=", "rhigh", ":", "\n", "        ", "r_next", "+=", "1", "\n", "c_next", "=", "c_cur", "\n", "", "else", ":", "\n", "        ", "r_next", "=", "r_cur", "\n", "c_next", "-=", "1", "\n", "\n", "", "", "else", ":", "\n", "      ", "rlow", "=", "r0", "+", "(", "cdelta", "+", "1", ")", "\n", "rhigh", "=", "r0", "+", "(", "-", "cdelta", ")", "\n", "if", "r_cur", "<", "rlow", ":", "\n", "        ", "r_next", "=", "r_cur", "\n", "c_next", "+=", "1", "\n", "", "elif", "r_cur", "<=", "rhigh", ":", "\n", "        ", "r_next", "-=", "1", "\n", "c_next", "=", "c_cur", "\n", "", "else", ":", "\n", "        ", "r_next", "=", "r_cur", "\n", "c_next", "-=", "1", "\n", "\n", "", "", "if", "r_next", "<", "1", "or", "r_next", ">=", "MAP_SIZE", "-", "1", "or", "c_next", "<", "1", "or", "c_next", ">=", "MAP_SIZE", "-", "1", ":", "\n", "      ", "return", "True", "\n", "", "else", ":", "\n", "      ", "self", ".", "agent_pos", "[", ":", ",", "0", "]", "=", "r_next", "\n", "self", ".", "agent_pos", "[", ":", ",", "1", "]", "=", "c_next", "\n", "self", ".", "generic_pos", "[", ":", ",", "0", "]", "+=", "(", "r_next", "-", "r_cur", ")", "\n", "self", ".", "generic_pos", "[", ":", ",", "1", "]", "+=", "(", "c_next", "-", "c_cur", ")", "\n", "\n", "ystart", "=", "self", ".", "clip_bound", "(", "self", ".", "agent_pos", "[", "0", ",", "0", "]", "-", "self", ".", "radius", ")", "\n", "yend", "=", "self", ".", "clip_bound", "(", "self", ".", "agent_pos", "[", "0", ",", "0", "]", "+", "self", ".", "radius", ")", "\n", "xstart", "=", "self", ".", "clip_bound", "(", "self", ".", "agent_pos", "[", "0", ",", "1", "]", "-", "self", ".", "radius", ")", "\n", "xend", "=", "self", ".", "clip_bound", "(", "self", ".", "agent_pos", "[", "0", ",", "1", "]", "+", "self", ".", "radius", ")", "\n", "\n", "y", ",", "x", "=", "np", ".", "ogrid", "[", "ystart", ":", "yend", "+", "1", ",", "xstart", ":", "xend", "+", "1", "]", "\n", "\n", "ystart_generic", "=", "self", ".", "generic_pos", "[", "0", ",", "0", "]", "-", "self", ".", "radius", "\n", "yend_generic", "=", "self", ".", "generic_pos", "[", "0", ",", "0", "]", "+", "self", ".", "radius", "\n", "xstart_generic", "=", "self", ".", "generic_pos", "[", "0", ",", "1", "]", "-", "self", ".", "radius", "\n", "xend_generic", "=", "self", ".", "generic_pos", "[", "0", ",", "1", "]", "+", "self", ".", "radius", "\n", "y_generic", ",", "x_generic", "=", "np", ".", "ogrid", "[", "ystart_generic", ":", "yend_generic", "+", "1", ",", "xstart_generic", ":", "xend_generic", "+", "1", "]", "\n", "\n", "for", "batch_ind", "in", "range", "(", "self", ".", "batch_size", ")", ":", "\n", "        ", "if", "self", ".", "maps", "[", "batch_ind", "]", "[", "self", ".", "agent_pos", "[", "batch_ind", ",", "0", "]", "]", "[", "self", ".", "agent_pos", "[", "batch_ind", ",", "1", "]", "]", "==", "self", ".", "free_mark", ":", "\n", "          ", "self", ".", "maps", "[", "batch_ind", "]", "[", "self", ".", "agent_pos", "[", "batch_ind", ",", "0", "]", "]", "[", "self", ".", "agent_pos", "[", "batch_ind", ",", "1", "]", "]", "=", "self", ".", "visited_mark", "\n", "", "if", "self", ".", "generic_maps", "[", "batch_ind", "]", "[", "self", ".", "generic_pos", "[", "batch_ind", ",", "0", "]", "]", "[", "self", ".", "generic_pos", "[", "batch_ind", ",", "1", "]", "]", "==", "self", ".", "free_mark", ":", "\n", "          ", "self", ".", "generic_maps", "[", "batch_ind", "]", "[", "self", ".", "generic_pos", "[", "batch_ind", ",", "0", "]", "]", "[", "self", ".", "generic_pos", "[", "batch_ind", ",", "1", "]", "]", "=", "self", ".", "visited_mark", "\n", "", "old_ego", "=", "self", ".", "maps", "[", "batch_ind", ",", "y", ",", "x", "]", "\n", "new_ego", "=", "self", ".", "init_map", "[", "batch_ind", ",", "y", ",", "x", "]", "\n", "indices", "=", "np", ".", "where", "(", "old_ego", "==", "self", ".", "unknown_mark", ")", "\n", "old_ego", "[", "indices", "[", "0", "]", ",", "indices", "[", "1", "]", "]", "=", "new_ego", "[", "indices", "[", "0", "]", ",", "indices", "[", "1", "]", "]", "\n", "self", ".", "maps", "[", "batch_ind", ",", "y", ",", "x", "]", "=", "old_ego", "\n", "self", ".", "generic_maps", "[", "batch_ind", ",", "y_generic", ",", "x_generic", "]", "=", "old_ego", "\n", "\n", "cur_key", "=", "self", ".", "to_tuple", "(", "self", ".", "init_map", "[", "batch_ind", ",", "y", ",", "x", "]", ")", "\n", "if", "cur_key", "in", "self", ".", "pattern_loc", "[", "batch_ind", "]", ":", "\n", "          ", "self", ".", "pattern_loc", "[", "batch_ind", "]", "[", "cur_key", "]", "[", "self", ".", "generic_pos", "[", "batch_ind", ",", "0", "]", ",", "self", ".", "generic_pos", "[", "batch_ind", ",", "1", "]", "]", "=", "1", "\n", "", "else", ":", "\n", "          ", "self", ".", "pattern_loc", "[", "batch_ind", "]", "[", "cur_key", "]", "=", "np", ".", "zeros", "(", "(", "48", ",", "48", ")", ",", "dtype", "=", "int", ")", "\n", "self", ".", "pattern_loc", "[", "batch_ind", "]", "[", "cur_key", "]", "[", "self", ".", "generic_pos", "[", "batch_ind", ",", "0", "]", ",", "self", ".", "generic_pos", "[", "batch_ind", ",", "1", "]", "]", "=", "1", "\n", "\n", "", "", "return", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.get_input_ego": [[184, 198], ["numpy.zeros", "numpy.copy", "range", "numpy.ones"], "methods", ["None"], ["", "", "def", "get_input_ego", "(", "self", ")", ":", "\n", "    ", "input_ego", "=", "np", ".", "zeros", "(", "(", "self", ".", "batch_size", ",", "INPUT_SIZE", ",", "INPUT_SIZE", ")", ",", "dtype", "=", "int", ")", "\n", "offset", "=", "(", "INPUT_SIZE", "-", "3", ")", "/", "2", "\n", "radius", "=", "(", "INPUT_SIZE", "-", "1", ")", "/", "2", "\n", "newmap", "=", "np", ".", "ones", "(", "(", "self", ".", "batch_size", ",", "self", ".", "init_map", "[", "0", "]", ".", "shape", "[", "0", "]", "+", "offset", "*", "2", ",", "self", ".", "init_map", "[", "0", "]", ".", "shape", "[", "1", "]", "+", "offset", "*", "2", ")", ",", "dtype", "=", "int", ")", "*", "self", ".", "unknown_mark", "\n", "newmap", "[", ":", ",", "offset", ":", "newmap", ".", "shape", "[", "1", "]", "-", "offset", ",", "offset", ":", "newmap", ".", "shape", "[", "2", "]", "-", "offset", "]", "=", "np", ".", "copy", "(", "self", ".", "init_map", "[", ":", ",", ":", ",", ":", "]", ")", "\n", "for", "i", "in", "range", "(", "self", ".", "batch_size", ")", ":", "\n", "      ", "ystart", "=", "self", ".", "agent_pos", "[", "i", ",", "0", "]", "+", "offset", "-", "radius", "\n", "yend", "=", "self", ".", "agent_pos", "[", "i", ",", "0", "]", "+", "offset", "+", "radius", "\n", "xstart", "=", "self", ".", "agent_pos", "[", "i", ",", "1", "]", "+", "offset", "-", "radius", "\n", "xend", "=", "self", ".", "agent_pos", "[", "i", ",", "1", "]", "+", "offset", "+", "radius", "\n", "y", ",", "x", "=", "np", ".", "ogrid", "[", "ystart", ":", "yend", "+", "1", ",", "xstart", ":", "xend", "+", "1", "]", "\n", "input_ego", "[", "i", "]", "=", "newmap", "[", "i", ",", "y", ",", "x", "]", "\n", "", "return", "input_ego", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.training_thread.TrainingThread.__init__": [[39, 74], ["network.prepare_loss", "tensorflow.clip_by_global_norm", "grad_applier.apply_gradients", "map_env.MapEnv", "training_thread.TrainingThread.game_state.reset_agent_pos", "numpy.indices", "tensorflow.device", "tensorflow.gradients", "network.get_vars", "v._ref", "network.get_vars"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model.prepare_loss", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier.apply_gradients", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.reset_agent_pos", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.get_vars", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.get_vars"], ["  ", "def", "__init__", "(", "self", ",", "\n", "network", ",", "\n", "initial_learning_rate", ",", "\n", "learning_rate_input", ",", "\n", "grad_applier", ",", "\n", "max_global_time_step", ",", "\n", "device", ")", ":", "\n", "\n", "    ", "self", ".", "learning_rate_input", "=", "learning_rate_input", "\n", "self", ".", "max_global_time_step", "=", "max_global_time_step", "\n", "\n", "\n", "network", ".", "prepare_loss", "(", ")", "\n", "\n", "with", "tf", ".", "device", "(", "device", ")", ":", "\n", "      ", "var_refs", "=", "[", "v", ".", "_ref", "(", ")", "for", "v", "in", "network", ".", "get_vars", "(", ")", "]", "\n", "self", ".", "gradients", "=", "tf", ".", "gradients", "(", "\n", "network", ".", "loss", ",", "var_refs", ",", "\n", "gate_gradients", "=", "False", ",", "\n", "aggregation_method", "=", "None", ",", "\n", "colocate_gradients_with_ops", "=", "False", ")", "\n", "", "clipped_gradients", ",", "_", "=", "tf", ".", "clip_by_global_norm", "(", "self", ".", "gradients", ",", "GRAD_NORM_CLIP", ")", "\n", "self", ".", "apply_gradients", "=", "grad_applier", ".", "apply_gradients", "(", "\n", "network", ".", "get_vars", "(", ")", ",", "\n", "clipped_gradients", ")", "\n", "\n", "self", ".", "batch_size", "=", "BATCH_SIZE", "\n", "self", ".", "game_state", "=", "MapEnv", "(", "self", ".", "batch_size", ",", "GENERIC_MAP_SIZE", ")", "\n", "self", ".", "game_state", ".", "reset_agent_pos", "(", ")", "\n", "self", ".", "game_step", "=", "0", "\n", "\n", "self", ".", "initial_learning_rate", "=", "initial_learning_rate", "\n", "\n", "self", ".", "batch_ind", ",", "self", ".", "row_ind", ",", "self", ".", "col_ind", "=", "np", ".", "indices", "(", "(", "self", ".", "batch_size", ",", "INPUT_SIZE", ",", "INPUT_SIZE", ")", ")", "\n", "self", ".", "network", "=", "network", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.training_thread.TrainingThread.vis_convert_to_image": [[76, 103], ["numpy.zeros", "numpy.where", "numpy.where", "numpy.where", "numpy.where", "numpy.where", "numpy.where"], "methods", ["None"], ["", "def", "vis_convert_to_image", "(", "self", ",", "matrix", ",", "env_state", ")", ":", "\n", "    ", "im", "=", "np", ".", "zeros", "(", "(", "matrix", ".", "shape", "[", "0", "]", ",", "matrix", ".", "shape", "[", "1", "]", ",", "3", ")", ")", "\n", "#background cells in the combined visualization", "\n", "background_color", "=", "(", "0.5", ",", "0.5", ",", "0.5", ")", "\n", "indices", "=", "np", ".", "where", "(", "matrix", "==", "-", "1", ")", "\n", "im", "[", "indices", "[", "0", "]", ",", "indices", "[", "1", "]", ",", ":", "]", "=", "background_color", "\n", "#unknown cells", "\n", "unknown_color", "=", "(", "0", ",", "0", ",", "0", ")", "\n", "indices", "=", "np", ".", "where", "(", "matrix", "==", "env_state", ".", "unknown_mark", ")", "\n", "im", "[", "indices", "[", "0", "]", ",", "indices", "[", "1", "]", ",", ":", "]", "=", "unknown_color", "\n", "#Wall cells", "\n", "wall_color", "=", "(", "0", ",", "0", ",", "1", ")", "\n", "indices", "=", "np", ".", "where", "(", "matrix", "==", "env_state", ".", "unavail_mark", ")", "\n", "im", "[", "indices", "[", "0", "]", ",", "indices", "[", "1", "]", ",", ":", "]", "=", "wall_color", "\n", "#Free cells", "\n", "free_color", "=", "(", "1", ",", "1", ",", "1", ")", "\n", "indices", "=", "np", ".", "where", "(", "matrix", "==", "env_state", ".", "free_mark", ")", "\n", "im", "[", "indices", "[", "0", "]", ",", "indices", "[", "1", "]", ",", ":", "]", "=", "free_color", "\n", "#Visited cells", "\n", "visited_color", "=", "(", "0.5", ",", "0.5", ",", "1", ")", "\n", "indices", "=", "np", ".", "where", "(", "matrix", "==", "env_state", ".", "visited_mark", ")", "\n", "im", "[", "indices", "[", "0", "]", ",", "indices", "[", "1", "]", ",", ":", "]", "=", "visited_color", "\n", "#Agent cell", "\n", "agent_color", "=", "(", "1", ",", "0", ",", "0", ")", "\n", "indices", "=", "np", ".", "where", "(", "matrix", "==", "env_state", ".", "agent_mark", ")", "\n", "im", "[", "indices", "[", "0", "]", ",", "indices", "[", "1", "]", ",", ":", "]", "=", "agent_color", "\n", "return", "im", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.training_thread.TrainingThread.vis_save": [[104, 234], ["os.path.exists", "os.mkdir", "training_thread.TrainingThread.network.get_initial_state", "map_env.MapEnv", "map_env.MapEnv.reset_agent_pos", "training_thread.TrainingThread.convert_maps", "numpy.copy", "numpy.copy", "training_thread.TrainingThread.remove_loc", "training_thread.TrainingThread.get_loc_output", "numpy.copy", "numpy.copy", "map_env.MapEnv.move_spiral", "numpy.asarray().reshape.append", "numpy.asarray().reshape.append", "numpy.asarray().reshape.append", "numpy.asarray().reshape", "numpy.asarray().reshape", "numpy.asarray().reshape", "sess.run", "numpy.asarray().reshape.reshape", "pred_maps.reshape.reshape.reshape", "range", "map_env.MapEnv.get_input_ego", "pred_maps[].reshape", "gt_data_list[].reshape", "batch_map_input[].reshape", "map_input[].argmax().reshape", "numpy.kron", "range", "range", "numpy.kron", "range", "numpy.kron", "range", "numpy.kron", "range", "numpy.kron", "range", "cv2.cvtColor", "cv2.imwrite", "numpy.asarray", "numpy.asarray", "numpy.asarray", "dict", "numpy.ones", "numpy.ones", "numpy.ones", "len", "range", "lstm_state_vis.append", "len", "range", "numpy.ones", "numpy.ones", "pred_map_argmax.astype", "numpy.ones", "numpy.ones", "zip", "len", "len", "map_input[].argmax", "numpy.expand_dims", "numpy.expand_dims", "cur_lstm.append", "range", "numpy.amax", "training_thread.TrainingThread.vis_convert_to_image", "numpy.mean", "numpy.var", "numpy.concatenate"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.get_initial_state", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.reset_agent_pos", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.training_thread.TrainingThread.convert_maps", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.training_thread.TrainingThread.remove_loc", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.training_thread.TrainingThread.get_loc_output", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.move_spiral", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.get_input_ego", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.training_thread.TrainingThread.vis_convert_to_image"], ["", "def", "vis_save", "(", "self", ",", "sess", ",", "timestep", ")", ":", "\n", "    ", "vis_dir", "=", "CHECKPOINT_DIR", "+", "(", "\"/%d\"", "%", "timestep", ")", "\n", "if", "os", ".", "path", ".", "exists", "(", "vis_dir", ")", ":", "\n", "      ", "return", "\n", "", "os", ".", "mkdir", "(", "vis_dir", ")", "\n", "MAP_SIZE_MEM", "=", "48", "\n", "episode_end", "=", "False", "\n", "cur_lstm_states", "=", "self", ".", "network", ".", "get_initial_state", "(", ")", "\n", "step_ind", "=", "-", "1", "\n", "env_state", "=", "MapEnv", "(", "self", ".", "batch_size", ",", "MAP_SIZE", "*", "2", ")", "\n", "env_state", ".", "reset_agent_pos", "(", ")", "\n", "while", "not", "episode_end", ":", "\n", "      ", "batch_map_input", "=", "[", "]", "\n", "batch_map_input2", "=", "[", "]", "\n", "batch_loc_output", "=", "[", "]", "\n", "step_ind", "+=", "1", "\n", "map_input", "=", "self", ".", "convert_maps", "(", "env_state", ".", "get_input_ego", "(", ")", ",", "env_state", ".", "generic_pos", ")", "\n", "loc", "=", "np", ".", "copy", "(", "env_state", ".", "agent_pos", ")", "\n", "loc_generic", "=", "np", ".", "copy", "(", "env_state", ".", "generic_pos", ")", "\n", "map_input_noloc", "=", "self", ".", "remove_loc", "(", "map_input", ")", "\n", "loc_output", "=", "self", ".", "get_loc_output", "(", "map_input", ",", "env_state", ")", "\n", "\n", "full_maps", "=", "np", ".", "copy", "(", "env_state", ".", "maps", ")", "\n", "full_maps_generic", "=", "np", ".", "copy", "(", "env_state", ".", "generic_maps", ")", "\n", "episode_end", "=", "env_state", ".", "move_spiral", "(", ")", "\n", "num_steps", "=", "1", "\n", "batch_map_input", ".", "append", "(", "map_input", ")", "\n", "batch_map_input2", ".", "append", "(", "map_input_noloc", ")", "\n", "batch_loc_output", ".", "append", "(", "loc_output", ")", "\n", "\n", "batch_map_input", "=", "np", ".", "asarray", "(", "batch_map_input", ")", ".", "reshape", "(", "(", "num_steps", "*", "self", ".", "batch_size", ",", "INPUT_SIZE", ",", "INPUT_SIZE", ",", "4", ")", ")", "\n", "batch_map_input2", "=", "np", ".", "asarray", "(", "batch_map_input2", ")", ".", "reshape", "(", "(", "num_steps", "*", "self", ".", "batch_size", ",", "INPUT_SIZE", ",", "INPUT_SIZE", ",", "4", ")", ")", "\n", "batch_loc_output", "=", "np", ".", "asarray", "(", "batch_loc_output", ")", ".", "reshape", "(", "(", "num_steps", "*", "self", ".", "batch_size", ",", "MAP_SIZE_MEM", "*", "MAP_SIZE_MEM", ")", ")", "\n", "\n", "list_to_run", "=", "[", "self", ".", "network", ".", "locpred", "]", "+", "self", ".", "network", ".", "lstm_state_list", "+", "self", ".", "network", ".", "output_grids7", "\n", "list_keys", "=", "self", ".", "network", ".", "lstm_state_ph_list", "+", "[", "self", ".", "network", ".", "ma", ",", "self", ".", "network", ".", "ma2", ",", "self", ".", "network", ".", "step_size", "]", "\n", "list_vals", "=", "cur_lstm_states", "+", "[", "batch_map_input", ",", "batch_map_input2", ",", "[", "num_steps", "]", "]", "\n", "list_output", "=", "sess", ".", "run", "(", "list_to_run", ",", "\n", "feed_dict", "=", "dict", "(", "zip", "(", "list_keys", ",", "list_vals", ")", ")", "\n", ")", "\n", "pred_maps", "=", "list_output", "[", "0", "]", "[", ":", "batch_map_input", ".", "shape", "[", "0", "]", "]", "\n", "cur_lstm_states", "=", "list_output", "[", "1", ":", "1", "+", "len", "(", "self", ".", "network", ".", "lstm_state_list", ")", "]", "\n", "learned_maps", "=", "list_output", "[", "1", "+", "len", "(", "self", ".", "network", ".", "lstm_state_list", ")", ":", "]", "\n", "gt_data_list", "=", "batch_loc_output", ".", "reshape", "(", "(", "self", ".", "batch_size", ",", "MAP_SIZE_MEM", ",", "MAP_SIZE_MEM", ")", ")", "\n", "locpred_gt", "=", "loc", "\n", "locpred_gt_generic", "=", "loc_generic", "\n", "pred_maps", "=", "pred_maps", ".", "reshape", "(", "(", "self", ".", "batch_size", ",", "MAP_SIZE_MEM", ",", "MAP_SIZE_MEM", ")", ")", "\n", "\n", "num_vis_env", "=", "2", "\n", "for", "ind_vis_env", "in", "range", "(", "num_vis_env", ")", ":", "\n", "        ", "pred_map", "=", "pred_maps", "[", "ind_vis_env", "]", ".", "reshape", "(", "(", "MAP_SIZE_MEM", ",", "MAP_SIZE_MEM", ")", ")", "\n", "pred_map_argmax", "=", "(", "pred_map", ">=", "0.5", ")", "\n", "gt_data", "=", "gt_data_list", "[", "ind_vis_env", "]", ".", "reshape", "(", "(", "MAP_SIZE_MEM", ",", "MAP_SIZE_MEM", ")", ")", "\n", "gt_data_argmax", "=", "gt_data", "\n", "full_map_data", "=", "full_maps", "[", "ind_vis_env", "]", "\n", "full_map_data_generic", "=", "full_maps_generic", "[", "ind_vis_env", "]", "\n", "cur_agent_pos", "=", "locpred_gt", "[", "ind_vis_env", "]", "\n", "cur_agent_pos_generic", "=", "locpred_gt_generic", "[", "ind_vis_env", "]", "\n", "full_map_data", "[", "cur_agent_pos", "[", "0", "]", ",", "cur_agent_pos", "[", "1", "]", "]", "=", "env_state", ".", "agent_mark", "\n", "full_map_data_generic", "[", "cur_agent_pos_generic", "[", "0", "]", ",", "cur_agent_pos_generic", "[", "1", "]", "]", "=", "env_state", ".", "agent_mark", "\n", "map_input", "=", "batch_map_input", "[", "ind_vis_env", ",", ":", ",", ":", ",", ":", "]", ".", "reshape", "(", "(", "INPUT_SIZE", ",", "INPUT_SIZE", ",", "4", ")", ")", "\n", "map_input_argmax", "=", "map_input", "[", ":", ",", ":", ",", ":", "2", "]", ".", "argmax", "(", "2", ")", ".", "reshape", "(", "(", "INPUT_SIZE", ",", "INPUT_SIZE", ")", ")", "\n", "\n", "\n", "step_string", "=", "(", "\"%02d_%04d\"", "%", "(", "ind_vis_env", ",", "step_ind", ")", ")", "\n", "step_path", "=", "vis_dir", "+", "\"/\"", "+", "step_string", "+", "\".jpg\"", "\n", "\n", "vis_width", "=", "MAP_SIZE", "+", "2", "*", "MAP_SIZE", "+", "5", "+", "20", "+", "3", "*", "MAP_SIZE_MEM", "+", "INPUT_SIZE", "\n", "vis_height", "=", "MAP_SIZE", "*", "2", "+", "11", "+", "MAP_SIZE_MEM", "*", "2", "+", "3", "\n", "final_image", "=", "np", ".", "ones", "(", "(", "vis_height", ",", "vis_width", ")", ")", "*", "(", "-", "1", ")", "\n", "\n", "final_image", "[", ":", "MAP_SIZE", ",", ":", "MAP_SIZE", "]", "=", "full_map_data", "\n", "final_image", "[", ":", "MAP_SIZE", "*", "2", ",", "MAP_SIZE", "+", "5", ":", "MAP_SIZE", "+", "5", "+", "MAP_SIZE", "*", "2", "]", "=", "full_map_data_generic", "\n", "final_image", "[", "MAP_SIZE", "-", "INPUT_SIZE", "/", "2", ":", "MAP_SIZE", "+", "INPUT_SIZE", "/", "2", "+", "1", ",", "MAP_SIZE", "+", "5", "+", "MAP_SIZE", "*", "2", "+", "5", ":", "MAP_SIZE", "+", "5", "+", "MAP_SIZE", "*", "2", "+", "5", "+", "INPUT_SIZE", "]", "=", "map_input_argmax", "\n", "\n", "\n", "scale_factor", "=", "10", "\n", "map_img_scaled", "=", "np", ".", "kron", "(", "final_image", ",", "np", ".", "ones", "(", "(", "scale_factor", ",", "scale_factor", ")", ")", ")", "\n", "\n", "map_img_vis", "=", "(", "self", ".", "vis_convert_to_image", "(", "map_img_scaled", ",", "env_state", ")", "*", "255", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "\n", "lstm_image", "=", "np", ".", "ones", "(", "(", "MAP_SIZE_MEM", "+", "3", "+", "MAP_SIZE_MEM", ",", "vis_width", ")", ")", "*", "(", "-", "1", ")", "\n", "lstm_state", "=", "cur_lstm_states", "[", "0", "]", "\n", "lstm_state_vis", "=", "[", "]", "\n", "cur_lstm_states_vis", "=", "cur_lstm_states", "[", "-", "5", ":", "]", "\n", "for", "list_lstm_ind", "in", "range", "(", "len", "(", "cur_lstm_states_vis", ")", ")", ":", "\n", "          ", "cur_lstm", "=", "[", "]", "\n", "for", "lstm_ind", "in", "range", "(", "2", ")", ":", "\n", "            ", "cur_mean", "=", "np", ".", "expand_dims", "(", "np", ".", "mean", "(", "cur_lstm_states_vis", "[", "list_lstm_ind", "]", "[", "lstm_ind", "]", ",", "axis", "=", "-", "1", ")", ",", "axis", "=", "-", "1", ")", "\n", "cur_var", "=", "np", ".", "expand_dims", "(", "np", ".", "var", "(", "cur_lstm_states_vis", "[", "list_lstm_ind", "]", "[", "lstm_ind", "]", ",", "axis", "=", "-", "1", ")", ",", "axis", "=", "-", "1", ")", "\n", "cur_lstm", ".", "append", "(", "np", ".", "concatenate", "(", "(", "cur_mean", ",", "cur_var", ")", ",", "axis", "=", "-", "1", ")", ")", "\n", "", "lstm_state_vis", ".", "append", "(", "cur_lstm", ")", "\n", "\n", "", "start_lstm_pos", "=", "0", "\n", "for", "list_lstm_ind", "in", "range", "(", "len", "(", "cur_lstm_states_vis", ")", ")", ":", "\n", "          ", "cur_lstm_size", "=", "3", "*", "(", "2", "**", "list_lstm_ind", ")", "\n", "for", "lstm_ind", "in", "range", "(", "2", ")", ":", "\n", "            ", "for", "lstm_chan", "in", "range", "(", "2", ")", ":", "\n", "              ", "lstm_image", "[", "lstm_ind", "*", "(", "cur_lstm_size", "+", "3", ")", ":", "lstm_ind", "*", "(", "cur_lstm_size", "+", "3", ")", "+", "cur_lstm_size", ",", "start_lstm_pos", "+", "lstm_chan", "*", "(", "cur_lstm_size", "+", "5", ")", ":", "start_lstm_pos", "+", "lstm_chan", "*", "(", "cur_lstm_size", "+", "5", ")", "+", "cur_lstm_size", "]", "=", "lstm_state_vis", "[", "list_lstm_ind", "]", "[", "lstm_ind", "]", "[", "ind_vis_env", ",", ":", ",", ":", ",", "lstm_chan", "]", "\n", "", "", "start_lstm_pos", "+=", "(", "cur_lstm_size", "*", "2", "+", "10", ")", "\n", "\n", "\n", "", "lstm_image", "=", "(", "lstm_image", "+", "1", ")", "/", "2.0", "\n", "lstm_img_scaled", "=", "np", ".", "kron", "(", "lstm_image", ",", "np", ".", "ones", "(", "(", "scale_factor", ",", "scale_factor", ")", ")", ")", "\n", "lstm_img_scaled", "=", "(", "lstm_img_scaled", "*", "255", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "for", "chan_ind", "in", "range", "(", "3", ")", ":", "\n", "          ", "map_img_vis", "[", "-", "lstm_img_scaled", ".", "shape", "[", "0", "]", ":", ",", ":", ",", "chan_ind", "]", "=", "lstm_img_scaled", "\n", "\n", "", "pred_map_scaled", "=", "np", ".", "kron", "(", "pred_map", "*", "1.0", "/", "np", ".", "amax", "(", "pred_map", ")", ",", "np", ".", "ones", "(", "(", "scale_factor", ",", "scale_factor", ")", ")", ")", "\n", "pred_map_scaled", "=", "(", "pred_map_scaled", "*", "255", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "for", "chan_ind", "in", "range", "(", "3", ")", ":", "\n", "          ", "map_img_vis", "[", ":", "MAP_SIZE_MEM", "*", "10", ",", "(", "MAP_SIZE", "+", "5", "+", "INPUT_SIZE", "+", "5", "+", "MAP_SIZE", "*", "2", "+", "5", ")", "*", "10", ":", "(", "MAP_SIZE", "+", "5", "+", "INPUT_SIZE", "+", "5", "+", "MAP_SIZE", "*", "2", "+", "5", "+", "MAP_SIZE_MEM", ")", "*", "10", ",", "chan_ind", "]", "=", "pred_map_scaled", "\n", "\n", "", "pred_argmax_scaled", "=", "np", ".", "kron", "(", "pred_map_argmax", ".", "astype", "(", "np", ".", "int32", ")", ",", "np", ".", "ones", "(", "(", "scale_factor", ",", "scale_factor", ")", ")", ")", "\n", "pred_argmax_scaled", "=", "(", "pred_argmax_scaled", "*", "255", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "for", "chan_ind", "in", "range", "(", "3", ")", ":", "\n", "          ", "map_img_vis", "[", ":", "MAP_SIZE_MEM", "*", "10", ",", "(", "MAP_SIZE", "+", "5", "+", "INPUT_SIZE", "+", "5", "+", "MAP_SIZE", "*", "2", "+", "5", "+", "MAP_SIZE_MEM", "+", "5", ")", "*", "10", ":", "(", "MAP_SIZE", "+", "5", "+", "INPUT_SIZE", "+", "5", "+", "MAP_SIZE", "*", "2", "+", "5", "+", "MAP_SIZE_MEM", "+", "5", "+", "MAP_SIZE_MEM", ")", "*", "10", ",", "chan_ind", "]", "=", "pred_argmax_scaled", "\n", "\n", "", "gt_argmax_scaled", "=", "np", ".", "kron", "(", "gt_data_argmax", ",", "np", ".", "ones", "(", "(", "scale_factor", ",", "scale_factor", ")", ")", ")", "\n", "gt_argmax_scaled", "=", "(", "gt_argmax_scaled", "*", "255", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "for", "chan_ind", "in", "range", "(", "3", ")", ":", "\n", "          ", "map_img_vis", "[", ":", "MAP_SIZE_MEM", "*", "10", ",", "(", "MAP_SIZE", "+", "5", "+", "INPUT_SIZE", "+", "5", "+", "MAP_SIZE", "*", "2", "+", "5", "+", "MAP_SIZE_MEM", "+", "5", "+", "MAP_SIZE_MEM", "+", "5", ")", "*", "10", ":", "(", "MAP_SIZE", "+", "5", "+", "INPUT_SIZE", "+", "5", "+", "MAP_SIZE", "*", "2", "+", "5", "+", "MAP_SIZE_MEM", "+", "5", "+", "MAP_SIZE_MEM", "+", "5", "+", "MAP_SIZE_MEM", ")", "*", "10", ",", "chan_ind", "]", "=", "gt_argmax_scaled", "\n", "\n", "", "font", "=", "cv2", ".", "FONT_HERSHEY_SIMPLEX", "\n", "fontScale", "=", "0.6", "\n", "fontColor", "=", "(", "255", ",", "255", ",", "255", ")", "\n", "lineType", "=", "2", "\n", "\n", "saved_image", "=", "cv2", ".", "cvtColor", "(", "map_img_vis", ",", "cv2", ".", "COLOR_RGB2BGR", ")", "\n", "cv2", ".", "imwrite", "(", "step_path", ",", "saved_image", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.training_thread.TrainingThread._anneal_learning_rate": [[235, 241], ["None"], "methods", ["None"], ["", "", "", "def", "_anneal_learning_rate", "(", "self", ",", "global_time_step", ")", ":", "\n", "    ", "if", "global_time_step", "<", "END_DECAY_TIME", ":", "\n", "      ", "learning_rate", "=", "self", ".", "initial_learning_rate", "+", "(", "END_ALPHA", "-", "self", ".", "initial_learning_rate", ")", "*", "global_time_step", "/", "END_DECAY_TIME", "\n", "", "else", ":", "\n", "      ", "learning_rate", "=", "END_ALPHA", "\n", "", "return", "learning_rate", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.training_thread.TrainingThread._record_params": [[243, 249], ["sess.run", "summary_writer.add_summary", "summary_writer.flush", "numpy.asscalar"], "methods", ["None"], ["", "def", "_record_params", "(", "self", ",", "sess", ",", "summary_writer", ",", "summary_op", ",", "loss_input", ",", "loss", ",", "global_t", ")", ":", "\n", "    ", "summary_str", "=", "sess", ".", "run", "(", "summary_op", ",", "feed_dict", "=", "{", "\n", "loss_input", ":", "np", ".", "asscalar", "(", "loss", ")", ",", "\n", "}", ")", "\n", "summary_writer", ".", "add_summary", "(", "summary_str", ",", "global_t", ")", "\n", "summary_writer", ".", "flush", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.training_thread.TrainingThread.convert_maps": [[250, 257], ["numpy.zeros", "range"], "methods", ["None"], ["", "def", "convert_maps", "(", "self", ",", "maps_input", ",", "loc", ")", ":", "\n", "    ", "maps_output", "=", "np", ".", "zeros", "(", "(", "maps_input", ".", "shape", "[", "0", "]", ",", "maps_input", ".", "shape", "[", "1", "]", ",", "maps_input", ".", "shape", "[", "2", "]", ",", "4", ")", ")", "\n", "maps_output", "[", "self", ".", "batch_ind", ",", "self", ".", "row_ind", ",", "self", ".", "col_ind", ",", "maps_input", "[", "self", ".", "batch_ind", ",", "self", ".", "row_ind", ",", "self", ".", "col_ind", "]", "]", "=", "1", "\n", "for", "i", "in", "range", "(", "maps_input", ".", "shape", "[", "0", "]", ")", ":", "\n", "      ", "maps_output", "[", "i", ",", ":", ",", ":", ",", "2", "]", "=", "loc", "[", "i", ",", "0", "]", "\n", "maps_output", "[", "i", ",", ":", ",", ":", ",", "3", "]", "=", "loc", "[", "i", ",", "1", "]", "\n", "", "return", "maps_output", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.training_thread.TrainingThread.remove_loc": [[258, 263], ["numpy.copy"], "methods", ["None"], ["", "def", "remove_loc", "(", "self", ",", "maps_input", ")", ":", "\n", "    ", "maps_output", "=", "np", ".", "copy", "(", "maps_input", ")", "\n", "maps_output", "[", ":", ",", ":", ",", ":", ",", "2", "]", "=", "0", "\n", "maps_output", "[", ":", ",", ":", ",", ":", ",", "3", "]", "=", "0", "\n", "return", "maps_output", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.training_thread.TrainingThread.get_loc_output": [[264, 271], ["numpy.zeros", "pattern[].argmax", "range", "numpy.copy().reshape", "numpy.copy", "env_state.to_tuple"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.to_tuple"], ["", "def", "get_loc_output", "(", "self", ",", "pattern", ",", "env_state", ")", ":", "\n", "    ", "output", "=", "np", ".", "zeros", "(", "(", "self", ".", "batch_size", ",", "48", "*", "48", ")", ")", "\n", "pattern", "=", "pattern", "[", ":", ",", ":", ",", ":", ",", ":", "2", "]", ".", "argmax", "(", "-", "1", ")", "\n", "for", "i", "in", "range", "(", "self", ".", "batch_size", ")", ":", "\n", "      ", "cur_pattern", "=", "pattern", "[", "i", "]", "\n", "output", "[", "i", "]", "=", "np", ".", "copy", "(", "env_state", ".", "pattern_loc", "[", "i", "]", "[", "env_state", ".", "to_tuple", "(", "cur_pattern", ")", "]", ")", ".", "reshape", "(", "48", "*", "48", ")", "\n", "", "return", "output", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.training_thread.TrainingThread.process": [[273, 343], ["time.time", "training_thread.TrainingThread.network.get_initial_state", "training_thread.TrainingThread.game_state.reset_agent_pos", "numpy.asarray().reshape", "numpy.asarray().reshape", "numpy.asarray().reshape", "training_thread.TrainingThread._anneal_learning_rate", "sess.run", "training_thread.TrainingThread.convert_maps", "training_thread.TrainingThread.game_state.move_spiral", "numpy.asarray().reshape.append", "list_map_input_all.append", "random.randint", "numpy.asarray().reshape.append", "numpy.asarray().reshape.append", "saver.save", "training_thread.TrainingThread.vis_save", "sess.run", "print", "training_thread.TrainingThread._record_params", "training_thread.TrainingThread.game_state.get_input_ego", "training_thread.TrainingThread.remove_loc", "training_thread.TrainingThread.get_loc_output", "numpy.asarray", "numpy.asarray", "numpy.asarray", "dict", "len", "dict", "zip", "zip"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.get_initial_state", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.reset_agent_pos", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.training_thread.TrainingThread._anneal_learning_rate", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.training_thread.TrainingThread.convert_maps", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.move_spiral", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.training_thread.TrainingThread.vis_save", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.training_thread.TrainingThread._record_params", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.map_env.MapEnv.get_input_ego", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.training_thread.TrainingThread.remove_loc", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.training_thread.TrainingThread.get_loc_output"], ["", "def", "process", "(", "self", ",", "saver", ",", "sess", ",", "global_t", ",", "summary_writer", ",", "summary_op", ",", "loss_input", ")", ":", "\n", "    ", "self", ".", "global_t", "=", "global_t", "\n", "# variable controling output logging", "\n", "self", ".", "prev_global_t", "=", "global_t", "\n", "self", ".", "prev_global_t_log", "=", "global_t", "\n", "self", ".", "prev_global_t_vis", "=", "global_t", "\n", "\n", "self", ".", "start_time", "=", "time", ".", "time", "(", ")", "\n", "stop", "=", "False", "\n", "while", "not", "stop", ":", "\n", "      ", "episode_end", "=", "False", "\n", "cur_lstm_states", "=", "self", ".", "network", ".", "get_initial_state", "(", ")", "\n", "self", ".", "game_state", ".", "reset_agent_pos", "(", ")", "\n", "list_map_input_all", "=", "[", "]", "\n", "while", "not", "episode_end", ":", "\n", "        ", "if", "(", "self", ".", "global_t", ">", "self", ".", "max_global_time_step", ")", ":", "\n", "          ", "stop", "=", "True", "\n", "break", "\n", "", "num_steps", "=", "0", "\n", "batch_map_input", "=", "[", "]", "\n", "batch_loc_output", "=", "[", "]", "\n", "batch_map_input2", "=", "[", "]", "\n", "batch_loc_output2", "=", "[", "]", "\n", "while", "(", "not", "episode_end", ")", "and", "(", "num_steps", "<", "LOCAL_T_MAX", ")", ":", "\n", "          ", "map_input", "=", "self", ".", "convert_maps", "(", "self", ".", "game_state", ".", "get_input_ego", "(", ")", ",", "self", ".", "game_state", ".", "generic_pos", ")", "\n", "episode_end", "=", "self", ".", "game_state", ".", "move_spiral", "(", ")", "\n", "num_steps", "+=", "1", "\n", "batch_map_input", ".", "append", "(", "map_input", ")", "\n", "list_map_input_all", ".", "append", "(", "self", ".", "remove_loc", "(", "map_input", ")", ")", "\n", "chosen_ind", "=", "random", ".", "randint", "(", "0", ",", "len", "(", "list_map_input_all", ")", "-", "1", ")", "\n", "batch_map_input2", ".", "append", "(", "list_map_input_all", "[", "chosen_ind", "]", ")", "\n", "batch_loc_output2", ".", "append", "(", "self", ".", "get_loc_output", "(", "list_map_input_all", "[", "chosen_ind", "]", ",", "self", ".", "game_state", ")", ")", "\n", "\n", "", "batch_map_input", "=", "np", ".", "asarray", "(", "batch_map_input", ")", ".", "reshape", "(", "(", "num_steps", "*", "self", ".", "batch_size", ",", "INPUT_SIZE", ",", "INPUT_SIZE", ",", "4", ")", ")", "\n", "batch_map_input2", "=", "np", ".", "asarray", "(", "batch_map_input2", ")", ".", "reshape", "(", "(", "num_steps", "*", "self", ".", "batch_size", ",", "INPUT_SIZE", ",", "INPUT_SIZE", ",", "4", ")", ")", "\n", "batch_loc_output2", "=", "np", ".", "asarray", "(", "batch_loc_output2", ")", ".", "reshape", "(", "(", "num_steps", "*", "self", ".", "batch_size", ",", "48", "*", "48", ")", ")", "\n", "if", "(", "self", ".", "global_t", "-", "self", ".", "prev_global_t", ">=", "SAVE_INTERVAL", ")", ":", "\n", "          ", "self", ".", "prev_global_t", "=", "self", ".", "global_t", "\n", "saver", ".", "save", "(", "sess", ",", "CHECKPOINT_DIR", "+", "'/'", "+", "'checkpoint'", ",", "global_step", "=", "self", ".", "global_t", ")", "\n", "\n", "", "if", "(", "self", ".", "global_t", "-", "self", ".", "prev_global_t_vis", ">=", "SAVE_VIS_INTERVAL", ")", ":", "\n", "          ", "self", ".", "prev_global_t_vis", "=", "self", ".", "global_t", "\n", "self", ".", "vis_save", "(", "sess", ",", "self", ".", "global_t", ")", "\n", "\n", "", "cur_learning_rate", "=", "self", ".", "_anneal_learning_rate", "(", "self", ".", "global_t", ")", "\n", "if", "(", "(", "self", ".", "global_t", "-", "self", ".", "prev_global_t_log", ")", ">=", "LOG_INTERVAL", ")", ":", "\n", "          ", "self", ".", "prev_global_t_log", "=", "self", ".", "global_t", "\n", "list_to_run", "=", "[", "self", ".", "network", ".", "loss", "]", "\n", "list_keys", "=", "self", ".", "network", ".", "lstm_state_ph_list", "+", "[", "self", ".", "network", ".", "locpred_gt", ",", "self", ".", "network", ".", "ma", ",", "self", ".", "network", ".", "ma2", ",", "self", ".", "network", ".", "step_size", "]", "\n", "list_vals", "=", "cur_lstm_states", "+", "[", "batch_loc_output2", ",", "batch_map_input", ",", "batch_map_input2", ",", "[", "num_steps", "]", "]", "\n", "list_output", "=", "sess", ".", "run", "(", "list_to_run", ",", "\n", "feed_dict", "=", "dict", "(", "zip", "(", "list_keys", ",", "list_vals", ")", ")", "\n", ")", "\n", "loss_output_total", "=", "list_output", "[", "0", "]", "\n", "\n", "print", "(", "\"Step {}: loss = {}\"", ".", "format", "(", "self", ".", "global_t", ",", "loss_output_total", ")", ")", "\n", "\n", "self", ".", "_record_params", "(", "sess", ",", "summary_writer", ",", "summary_op", ",", "loss_input", ",", "loss_output_total", ",", "self", ".", "global_t", ")", "\n", "\n", "", "list_to_run", "=", "[", "self", ".", "apply_gradients", "]", "+", "self", ".", "network", ".", "lstm_state_list", "\n", "list_keys", "=", "self", ".", "network", ".", "lstm_state_ph_list", "+", "[", "self", ".", "network", ".", "locpred_gt", ",", "self", ".", "network", ".", "ma", ",", "self", ".", "network", ".", "ma2", ",", "self", ".", "network", ".", "step_size", ",", "self", ".", "learning_rate_input", "]", "\n", "list_vals", "=", "cur_lstm_states", "+", "[", "batch_loc_output2", ",", "batch_map_input", ",", "batch_map_input2", ",", "[", "num_steps", "]", ",", "cur_learning_rate", "]", "\n", "list_output", "=", "sess", ".", "run", "(", "list_to_run", ",", "\n", "feed_dict", "=", "dict", "(", "zip", "(", "list_keys", ",", "list_vals", ")", ")", "\n", ")", "\n", "cur_lstm_states", "=", "list_output", "[", "1", ":", "]", "\n", "\n", "self", ".", "global_t", "+=", "num_steps", "\n", "\n", "", "", "return", "self", ".", "global_t", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.training_thread.eprint": [[34, 36], ["print"], "function", ["None"], ["def", "eprint", "(", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "    ", "print", "(", "*", "args", ",", "file", "=", "sys", ".", "stderr", ",", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.rmsprop_applier.RMSPropApplier.__init__": [[9, 33], ["None"], "methods", ["None"], ["  ", "def", "__init__", "(", "self", ",", "\n", "learning_rate", ",", "\n", "decay", "=", "0.9", ",", "\n", "momentum", "=", "0.0", ",", "\n", "epsilon", "=", "1e-10", ",", "\n", "clip_norm", "=", "40.0", ",", "\n", "device", "=", "\"/cpu:0\"", ",", "\n", "name", "=", "\"RMSPropApplier\"", ")", ":", "\n", "\n", "    ", "self", ".", "_name", "=", "name", "\n", "self", ".", "_learning_rate", "=", "learning_rate", "\n", "self", ".", "_decay", "=", "decay", "\n", "self", ".", "_momentum", "=", "momentum", "\n", "self", ".", "_epsilon", "=", "epsilon", "\n", "self", ".", "_clip_norm", "=", "clip_norm", "\n", "self", ".", "_device", "=", "device", "\n", "\n", "# Tensors for learning rate and momentum.  Created in _prepare.", "\n", "self", ".", "_learning_rate_tensor", "=", "None", "\n", "self", ".", "_decay_tensor", "=", "None", "\n", "self", ".", "_momentum_tensor", "=", "None", "\n", "self", ".", "_epsilon_tensor", "=", "None", "\n", "\n", "self", ".", "_slots", "=", "{", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.rmsprop_applier.RMSPropApplier._create_slots": [[34, 40], ["tensorflow.constant", "rmsprop_applier.RMSPropApplier._get_or_make_slot", "rmsprop_applier.RMSPropApplier._zeros_slot", "v.get_shape"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._get_or_make_slot", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._zeros_slot"], ["", "def", "_create_slots", "(", "self", ",", "var_list", ")", ":", "\n", "    ", "for", "v", "in", "var_list", ":", "\n", "# 'val' is Variable's intial value tensor.", "\n", "      ", "val", "=", "tf", ".", "constant", "(", "1.0", ",", "dtype", "=", "v", ".", "dtype", ",", "shape", "=", "v", ".", "get_shape", "(", ")", ")", "\n", "self", ".", "_get_or_make_slot", "(", "v", ",", "val", ",", "\"rms\"", ",", "self", ".", "_name", ")", "\n", "self", ".", "_zeros_slot", "(", "v", ",", "\"momentum\"", ",", "self", ".", "_name", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.rmsprop_applier.RMSPropApplier._prepare": [[41, 49], ["tensorflow.convert_to_tensor", "tensorflow.convert_to_tensor", "tensorflow.convert_to_tensor", "tensorflow.convert_to_tensor"], "methods", ["None"], ["", "", "def", "_prepare", "(", "self", ")", ":", "\n", "      ", "self", ".", "_learning_rate_tensor", "=", "tf", ".", "convert_to_tensor", "(", "self", ".", "_learning_rate", ",", "\n", "name", "=", "\"learning_rate\"", ")", "\n", "self", ".", "_decay_tensor", "=", "tf", ".", "convert_to_tensor", "(", "self", ".", "_decay", ",", "name", "=", "\"decay\"", ")", "\n", "self", ".", "_momentum_tensor", "=", "tf", ".", "convert_to_tensor", "(", "self", ".", "_momentum", ",", "\n", "name", "=", "\"momentum\"", ")", "\n", "self", ".", "_epsilon_tensor", "=", "tf", ".", "convert_to_tensor", "(", "self", ".", "_epsilon", ",", "\n", "name", "=", "\"epsilon\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.rmsprop_applier.RMSPropApplier._slot_dict": [[50, 56], ["rmsprop_applier.RMSPropApplier._slots.get"], "methods", ["None"], ["", "def", "_slot_dict", "(", "self", ",", "slot_name", ")", ":", "\n", "    ", "named_slots", "=", "self", ".", "_slots", ".", "get", "(", "slot_name", ",", "None", ")", "\n", "if", "named_slots", "is", "None", ":", "\n", "      ", "named_slots", "=", "{", "}", "\n", "self", ".", "_slots", "[", "slot_name", "]", "=", "named_slots", "\n", "", "return", "named_slots", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.rmsprop_applier.RMSPropApplier._get_or_make_slot": [[57, 62], ["rmsprop_applier.RMSPropApplier._slot_dict", "tensorflow.python.training.slot_creator.create_slot"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._slot_dict"], ["", "def", "_get_or_make_slot", "(", "self", ",", "var", ",", "val", ",", "slot_name", ",", "op_name", ")", ":", "\n", "    ", "named_slots", "=", "self", ".", "_slot_dict", "(", "slot_name", ")", "\n", "if", "var", "not", "in", "named_slots", ":", "\n", "      ", "named_slots", "[", "var", "]", "=", "slot_creator", ".", "create_slot", "(", "var", ",", "val", ",", "op_name", ")", "\n", "", "return", "named_slots", "[", "var", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.rmsprop_applier.RMSPropApplier.get_slot": [[63, 68], ["rmsprop_applier.RMSPropApplier._slots.get", "rmsprop_applier.RMSPropApplier.get"], "methods", ["None"], ["", "def", "get_slot", "(", "self", ",", "var", ",", "name", ")", ":", "\n", "    ", "named_slots", "=", "self", ".", "_slots", ".", "get", "(", "name", ",", "None", ")", "\n", "if", "not", "named_slots", ":", "\n", "      ", "return", "None", "\n", "", "return", "named_slots", ".", "get", "(", "var", ",", "None", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.rmsprop_applier.RMSPropApplier._zeros_slot": [[69, 74], ["rmsprop_applier.RMSPropApplier._slot_dict", "tensorflow.python.training.slot_creator.create_zeros_slot"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._slot_dict"], ["", "def", "_zeros_slot", "(", "self", ",", "var", ",", "slot_name", ",", "op_name", ")", ":", "\n", "    ", "named_slots", "=", "self", ".", "_slot_dict", "(", "slot_name", ")", "\n", "if", "var", "not", "in", "named_slots", ":", "\n", "      ", "named_slots", "[", "var", "]", "=", "slot_creator", ".", "create_zeros_slot", "(", "var", ",", "op_name", ")", "\n", "", "return", "named_slots", "[", "var", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.rmsprop_applier.RMSPropApplier._apply_dense": [[79, 90], ["rmsprop_applier.RMSPropApplier.get_slot", "rmsprop_applier.RMSPropApplier.get_slot", "tensorflow.python.training.training_ops.apply_rms_prop"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier.get_slot", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier.get_slot"], ["", "def", "_apply_dense", "(", "self", ",", "grad", ",", "var", ")", ":", "\n", "    ", "rms", "=", "self", ".", "get_slot", "(", "var", ",", "\"rms\"", ")", "\n", "mom", "=", "self", ".", "get_slot", "(", "var", ",", "\"momentum\"", ")", "\n", "return", "training_ops", ".", "apply_rms_prop", "(", "\n", "var", ",", "rms", ",", "mom", ",", "\n", "self", ".", "_learning_rate_tensor", ",", "\n", "self", ".", "_decay_tensor", ",", "\n", "self", ".", "_momentum_tensor", ",", "\n", "self", ".", "_epsilon_tensor", ",", "\n", "grad", ",", "\n", "use_locking", "=", "False", ")", ".", "op", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.rmsprop_applier.RMSPropApplier.apply_gradients": [[92, 106], ["tensorflow.device", "tensorflow.control_dependencies", "rmsprop_applier.RMSPropApplier._create_slots", "tensorflow.name_scope", "rmsprop_applier.RMSPropApplier._prepare", "zip", "tensorflow.group", "tensorflow.name_scope", "tensorflow.device", "update_ops.append", "rmsprop_applier.RMSPropApplier._apply_dense"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._create_slots", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._prepare", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._apply_dense"], ["", "def", "apply_gradients", "(", "self", ",", "var_list", ",", "accum_grad_list", ",", "name", "=", "None", ")", ":", "\n", "    ", "update_ops", "=", "[", "]", "\n", "\n", "with", "tf", ".", "device", "(", "self", ".", "_device", ")", ":", "\n", "      ", "with", "tf", ".", "control_dependencies", "(", "None", ")", ":", "\n", "        ", "self", ".", "_create_slots", "(", "var_list", ")", "\n", "\n", "", "with", "tf", ".", "name_scope", "(", "name", ",", "self", ".", "_name", ",", "[", "]", ")", "as", "name", ":", "\n", "        ", "self", ".", "_prepare", "(", ")", "\n", "for", "var", ",", "accum_grad", "in", "zip", "(", "var_list", ",", "accum_grad_list", ")", ":", "\n", "          ", "with", "tf", ".", "name_scope", "(", "\"update_\"", "+", "var", ".", "op", ".", "name", ")", ",", "tf", ".", "device", "(", "var", ".", "device", ")", ":", "\n", "#clipped_accum_grad = tf.clip_by_norm(accum_grad, self._clip_norm)", "\n", "            ", "update_ops", ".", "append", "(", "self", ".", "_apply_dense", "(", "accum_grad", ",", "var", ")", ")", "\n", "", "", "return", "tf", ".", "group", "(", "*", "update_ops", ",", "name", "=", "name", ")", "\n", "", "", "", "", ""]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.Model.__init__": [[12, 17], ["None"], "methods", ["None"], ["  ", "def", "__init__", "(", "self", ",", "\n", "thread_index", ",", "\n", "device", "=", "\"/cpu:0\"", ")", ":", "\n", "    ", "self", ".", "_thread_index", "=", "thread_index", "\n", "self", ".", "_device", "=", "device", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.Model.prepare_loss": [[18, 26], ["tensorflow.device", "tensorflow.placeholder", "tensorflow.reduce_sum", "tensorflow.nn.sigmoid_cross_entropy_with_logits"], "methods", ["None"], ["", "def", "prepare_loss", "(", "self", ")", ":", "\n", "    ", "with", "tf", ".", "device", "(", "self", ".", "_device", ")", ":", "\n", "\n", "      ", "self", ".", "locpred_gt", "=", "tf", ".", "placeholder", "(", "\"float\"", ",", "[", "None", ",", "48", "*", "48", "]", ")", "\n", "\n", "self", ".", "locpred_loss", "=", "tf", ".", "reduce_sum", "(", "tf", ".", "nn", ".", "sigmoid_cross_entropy_with_logits", "(", "labels", "=", "self", ".", "locpred_gt", ",", "logits", "=", "self", ".", "multigrid_output2", ")", ")", "\n", "\n", "self", ".", "loss", "=", "self", ".", "locpred_loss", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.Model._fc_variable": [[27, 35], ["tensorflow.Variable", "tensorflow.Variable", "numpy.sqrt", "tensorflow.random_uniform", "tensorflow.random_uniform"], "methods", ["None"], ["", "", "def", "_fc_variable", "(", "self", ",", "weight_shape", ")", ":", "\n", "    ", "input_channels", "=", "weight_shape", "[", "0", "]", "\n", "output_channels", "=", "weight_shape", "[", "1", "]", "\n", "d", "=", "1.0", "/", "np", ".", "sqrt", "(", "input_channels", ")", "\n", "bias_shape", "=", "[", "output_channels", "]", "\n", "weight", "=", "tf", ".", "Variable", "(", "tf", ".", "random_uniform", "(", "weight_shape", ",", "minval", "=", "-", "d", ",", "maxval", "=", "d", ")", ")", "\n", "bias", "=", "tf", ".", "Variable", "(", "tf", ".", "random_uniform", "(", "bias_shape", ",", "minval", "=", "-", "d", ",", "maxval", "=", "d", ")", ")", "\n", "return", "weight", ",", "bias", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.Model._conv_variable": [[36, 46], ["tensorflow.Variable", "tensorflow.Variable", "numpy.sqrt", "tensorflow.random_uniform", "tensorflow.random_uniform"], "methods", ["None"], ["", "def", "_conv_variable", "(", "self", ",", "weight_shape", ")", ":", "\n", "    ", "w", "=", "weight_shape", "[", "0", "]", "\n", "h", "=", "weight_shape", "[", "1", "]", "\n", "input_channels", "=", "weight_shape", "[", "2", "]", "\n", "output_channels", "=", "weight_shape", "[", "3", "]", "\n", "d", "=", "1.0", "/", "np", ".", "sqrt", "(", "input_channels", "*", "w", "*", "h", ")", "\n", "bias_shape", "=", "[", "output_channels", "]", "\n", "weight", "=", "tf", ".", "Variable", "(", "tf", ".", "random_uniform", "(", "weight_shape", ",", "minval", "=", "-", "d", ",", "maxval", "=", "d", ")", ")", "\n", "bias", "=", "tf", ".", "Variable", "(", "tf", ".", "random_uniform", "(", "bias_shape", ",", "minval", "=", "-", "d", ",", "maxval", "=", "d", ")", ")", "\n", "return", "weight", ",", "bias", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.Model._conv2d": [[47, 49], ["tensorflow.nn.conv2d"], "methods", ["None"], ["", "def", "_conv2d", "(", "self", ",", "x", ",", "W", ",", "stride", ")", ":", "\n", "    ", "return", "tf", ".", "nn", ".", "conv2d", "(", "x", ",", "W", ",", "strides", "=", "[", "1", ",", "stride", ",", "stride", ",", "1", "]", ",", "padding", "=", "\"SAME\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.__init__": [[52, 176], ["model.Model.__init__", "str", "tensorflow.device", "tensorflow.variable_scope", "tensorflow.trainable_variables", "tensorflow.placeholder", "tensorflow.placeholder", "tensorflow.placeholder", "model.LocalizationModel.build_next_layer", "model.LocalizationModel.build_next_layer", "model.LocalizationModel.build_next_layer", "model.LocalizationModel.create_residual_conn_extra", "model.LocalizationModel.create_residual_conn_extra", "model.LocalizationModel.build_next_layer", "model.LocalizationModel.build_next_layer", "model.LocalizationModel.create_residual_conn_extra", "model.LocalizationModel.create_residual_conn_extra", "model.LocalizationModel.create_residual_conn_extra", "model.LocalizationModel.build_next_layer", "model.LocalizationModel.build_next_layer", "model.LocalizationModel.create_residual_conn", "model.LocalizationModel.create_residual_conn", "model.LocalizationModel.create_residual_conn", "model.LocalizationModel.create_residual_conn", "model.LocalizationModel.build_next_layer_convo", "range", "model.LocalizationModel.build_next_layer_convo", "range", "model.LocalizationModel.build_next_layer_convo", "model.LocalizationModel.create_residual_conn", "model.LocalizationModel.create_residual_conn", "range", "model.LocalizationModel.build_next_layer_convo", "range", "model.LocalizationModel.build_next_layer_convo", "model.LocalizationModel.create_residual_conn", "model.LocalizationModel.create_residual_conn", "model.LocalizationModel.create_residual_conn", "range", "model.LocalizationModel.build_next_layer_convo", "range", "model.LocalizationModel.build_next_layer_convo", "range", "model.LocalizationModel.build_next_layer_convo_reverse", "model.LocalizationModel.build_next_layer_convo_reverse", "model.LocalizationModel.build_next_layer_convo_reverse", "model.LocalizationModel.build_next_layer_convo_reverse", "model.LocalizationModel.create_residual_conn", "model.LocalizationModel.create_residual_conn", "model.LocalizationModel.create_residual_conn", "model.LocalizationModel.build_next_layer_convo_reverse", "model.LocalizationModel.build_next_layer_convo_reverse", "model.LocalizationModel.create_residual_conn", "model.LocalizationModel.create_residual_conn", "model.LocalizationModel.build_next_layer_convo_reverse_without_activation", "tensorflow.reshape", "tensorflow.sigmoid", "scope.reuse_variables", "sorted", "tensorflow.concat", "tensorflow.concat", "tensorflow.concat", "tensorflow.concat", "tensorflow.concat", "tensorflow.concat", "tensorflow.concat", "list", "set", "set", "tensorflow.trainable_variables"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.__init__", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn_extra", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn_extra", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn_extra", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn_extra", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn_extra", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer_convo_reverse", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer_convo_reverse", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer_convo_reverse", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer_convo_reverse", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer_convo_reverse", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer_convo_reverse", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer_convo_reverse_without_activation"], ["  ", "def", "__init__", "(", "self", ",", "\n", "thread_index", ",", "\n", "device", "=", "\"/cpu:0\"", ")", ":", "\n", "    ", "Model", ".", "__init__", "(", "self", ",", "thread_index", ",", "device", ")", "\n", "\n", "map_size", "=", "INPUT_SIZE", "\n", "flattened_len", "=", "3", "*", "3", "*", "16", "\n", "\n", "scope_name", "=", "\"net_\"", "+", "str", "(", "self", ".", "_thread_index", ")", "\n", "with", "tf", ".", "device", "(", "self", ".", "_device", ")", ",", "tf", ".", "variable_scope", "(", "scope_name", ")", "as", "scope", ":", "\n", "      ", "variables_before", "=", "tf", ".", "trainable_variables", "(", ")", "\n", "self", ".", "ma", "=", "tf", ".", "placeholder", "(", "\"float\"", ",", "[", "None", ",", "map_size", ",", "map_size", ",", "4", "]", ")", "\n", "self", ".", "ma2", "=", "tf", ".", "placeholder", "(", "\"float\"", ",", "[", "None", ",", "map_size", ",", "map_size", ",", "4", "]", ")", "\n", "self", ".", "step_size", "=", "tf", ".", "placeholder", "(", "tf", ".", "float32", ",", "[", "1", "]", ")", "\n", "self", ".", "lstm_state_list", "=", "[", "]", "\n", "self", ".", "lstm_state_ph_list", "=", "[", "]", "\n", "self", ".", "grid_dim_list", "=", "[", "]", "\n", "output_dims", ",", "self", ".", "output_grids1", ",", "lstm_states", ",", "lstm_states_ph", "=", "self", ".", "build_next_layer", "(", "[", "self", ".", "ma", "]", ",", "2", ",", "4", ",", "1", ")", "\n", "self", ".", "lstm_state_list", "=", "self", ".", "lstm_state_list", "+", "lstm_states", "\n", "self", ".", "lstm_state_ph_list", "=", "self", ".", "lstm_state_ph_list", "+", "lstm_states_ph", "\n", "self", ".", "grid_dim_list", "=", "self", ".", "grid_dim_list", "+", "output_dims", "\n", "\n", "output_dims", ",", "self", ".", "output_grids2", ",", "lstm_states", ",", "lstm_states_ph", "=", "self", ".", "build_next_layer", "(", "self", ".", "output_grids1", ",", "2", ",", "4", ",", "2", ")", "\n", "self", ".", "lstm_state_list", "=", "self", ".", "lstm_state_list", "+", "lstm_states", "\n", "self", ".", "lstm_state_ph_list", "=", "self", ".", "lstm_state_ph_list", "+", "lstm_states_ph", "\n", "self", ".", "grid_dim_list", "=", "self", ".", "grid_dim_list", "+", "output_dims", "\n", "\n", "output_dims", ",", "self", ".", "output_grids3", ",", "lstm_states", ",", "lstm_states_ph", "=", "self", ".", "build_next_layer", "(", "self", ".", "output_grids2", ",", "3", ",", "8", ",", "3", ")", "\n", "self", ".", "lstm_state_list", "=", "self", ".", "lstm_state_list", "+", "lstm_states", "\n", "self", ".", "lstm_state_ph_list", "=", "self", ".", "lstm_state_ph_list", "+", "lstm_states_ph", "\n", "self", ".", "grid_dim_list", "=", "self", ".", "grid_dim_list", "+", "output_dims", "\n", "\n", "\n", "self", ".", "output_grids3", "[", "0", "]", "=", "self", ".", "create_residual_conn_extra", "(", "self", ".", "output_grids1", "[", "0", "]", ",", "self", ".", "output_grids3", "[", "0", "]", ",", "4", ",", "8", ")", "\n", "self", ".", "output_grids3", "[", "1", "]", "=", "self", ".", "create_residual_conn_extra", "(", "self", ".", "output_grids1", "[", "1", "]", ",", "self", ".", "output_grids3", "[", "1", "]", ",", "4", ",", "8", ")", "\n", "\n", "output_dims", ",", "self", ".", "output_grids4", ",", "lstm_states", ",", "lstm_states_ph", "=", "self", ".", "build_next_layer", "(", "self", ".", "output_grids3", ",", "3", ",", "8", ",", "4", ")", "\n", "self", ".", "lstm_state_list", "=", "self", ".", "lstm_state_list", "+", "lstm_states", "\n", "self", ".", "lstm_state_ph_list", "=", "self", ".", "lstm_state_ph_list", "+", "lstm_states_ph", "\n", "self", ".", "grid_dim_list", "=", "self", ".", "grid_dim_list", "+", "output_dims", "\n", "\n", "output_dims", ",", "self", ".", "output_grids5", ",", "lstm_states", ",", "lstm_states_ph", "=", "self", ".", "build_next_layer", "(", "self", ".", "output_grids4", ",", "4", ",", "16", ",", "5", ")", "\n", "self", ".", "lstm_state_list", "=", "self", ".", "lstm_state_list", "+", "lstm_states", "\n", "self", ".", "lstm_state_ph_list", "=", "self", ".", "lstm_state_ph_list", "+", "lstm_states_ph", "\n", "self", ".", "grid_dim_list", "=", "self", ".", "grid_dim_list", "+", "output_dims", "\n", "\n", "self", ".", "output_grids5", "[", "0", "]", "=", "self", ".", "create_residual_conn_extra", "(", "self", ".", "output_grids3", "[", "0", "]", ",", "self", ".", "output_grids5", "[", "0", "]", ",", "8", ",", "16", ")", "\n", "self", ".", "output_grids5", "[", "1", "]", "=", "self", ".", "create_residual_conn_extra", "(", "self", ".", "output_grids3", "[", "1", "]", ",", "self", ".", "output_grids5", "[", "1", "]", ",", "8", ",", "16", ")", "\n", "self", ".", "output_grids5", "[", "2", "]", "=", "self", ".", "create_residual_conn_extra", "(", "self", ".", "output_grids3", "[", "2", "]", ",", "self", ".", "output_grids5", "[", "2", "]", ",", "8", ",", "16", ")", "\n", "\n", "output_dims", ",", "self", ".", "output_grids6", ",", "lstm_states", ",", "lstm_states_ph", "=", "self", ".", "build_next_layer", "(", "self", ".", "output_grids5", ",", "4", ",", "16", ",", "6", ")", "\n", "self", ".", "lstm_state_list", "=", "self", ".", "lstm_state_list", "+", "lstm_states", "\n", "self", ".", "lstm_state_ph_list", "=", "self", ".", "lstm_state_ph_list", "+", "lstm_states_ph", "\n", "self", ".", "grid_dim_list", "=", "self", ".", "grid_dim_list", "+", "output_dims", "\n", "\n", "\n", "output_dims", ",", "self", ".", "output_grids7", ",", "lstm_states", ",", "lstm_states_ph", "=", "self", ".", "build_next_layer", "(", "self", ".", "output_grids6", ",", "5", ",", "16", ",", "7", ")", "\n", "self", ".", "lstm_state_list", "=", "self", ".", "lstm_state_list", "+", "lstm_states", "\n", "self", ".", "lstm_state_ph_list", "=", "self", ".", "lstm_state_ph_list", "+", "lstm_states_ph", "\n", "self", ".", "grid_dim_list", "=", "self", ".", "grid_dim_list", "+", "output_dims", "\n", "\n", "self", ".", "output_grids7", "[", "0", "]", "=", "self", ".", "create_residual_conn", "(", "self", ".", "output_grids5", "[", "0", "]", ",", "self", ".", "output_grids7", "[", "0", "]", ")", "\n", "self", ".", "output_grids7", "[", "1", "]", "=", "self", ".", "create_residual_conn", "(", "self", ".", "output_grids5", "[", "1", "]", ",", "self", ".", "output_grids7", "[", "1", "]", ")", "\n", "self", ".", "output_grids7", "[", "2", "]", "=", "self", ".", "create_residual_conn", "(", "self", ".", "output_grids5", "[", "2", "]", ",", "self", ".", "output_grids7", "[", "2", "]", ")", "\n", "self", ".", "output_grids7", "[", "3", "]", "=", "self", ".", "create_residual_conn", "(", "self", ".", "output_grids5", "[", "3", "]", ",", "self", ".", "output_grids7", "[", "3", "]", ")", "\n", "\n", "output_dims", ",", "output_grids1_2", "=", "self", ".", "build_next_layer_convo", "(", "[", "self", ".", "ma2", "]", ",", "2", ",", "4", ",", "4", ",", "1", ")", "\n", "for", "scale_ind", "in", "range", "(", "2", ")", ":", "\n", "        ", "output_grids1_2", "[", "scale_ind", "]", "=", "tf", ".", "concat", "(", "[", "output_grids1_2", "[", "scale_ind", "]", ",", "self", ".", "output_grids1", "[", "scale_ind", "]", "]", ",", "-", "1", ")", "\n", "\n", "", "output_dims", ",", "output_grids2_2", "=", "self", ".", "build_next_layer_convo", "(", "output_grids1_2", ",", "2", ",", "8", ",", "4", ",", "2", ")", "\n", "for", "scale_ind", "in", "range", "(", "2", ")", ":", "\n", "        ", "output_grids2_2", "[", "scale_ind", "]", "=", "tf", ".", "concat", "(", "[", "output_grids2_2", "[", "scale_ind", "]", ",", "self", ".", "output_grids2", "[", "scale_ind", "]", "]", ",", "-", "1", ")", "\n", "\n", "", "output_dims", ",", "output_grids3_2", "=", "self", ".", "build_next_layer_convo", "(", "output_grids2_2", ",", "3", ",", "8", ",", "8", ",", "3", ")", "\n", "output_grids3_2", "[", "0", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids1_2", "[", "0", "]", ",", "output_grids3_2", "[", "0", "]", ")", "\n", "output_grids3_2", "[", "1", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids1_2", "[", "1", "]", ",", "output_grids3_2", "[", "1", "]", ")", "\n", "for", "scale_ind", "in", "range", "(", "3", ")", ":", "\n", "        ", "output_grids3_2", "[", "scale_ind", "]", "=", "tf", ".", "concat", "(", "[", "output_grids3_2", "[", "scale_ind", "]", ",", "self", ".", "output_grids3", "[", "scale_ind", "]", "]", ",", "-", "1", ")", "\n", "\n", "", "output_dims", ",", "output_grids4_2", "=", "self", ".", "build_next_layer_convo", "(", "output_grids3_2", ",", "3", ",", "16", ",", "8", ",", "4", ")", "\n", "for", "scale_ind", "in", "range", "(", "3", ")", ":", "\n", "        ", "output_grids4_2", "[", "scale_ind", "]", "=", "tf", ".", "concat", "(", "[", "output_grids4_2", "[", "scale_ind", "]", ",", "self", ".", "output_grids4", "[", "scale_ind", "]", "]", ",", "-", "1", ")", "\n", "\n", "", "output_dims", ",", "output_grids5_2", "=", "self", ".", "build_next_layer_convo", "(", "output_grids4_2", ",", "4", ",", "16", ",", "16", ",", "5", ")", "\n", "output_grids5_2", "[", "0", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids3_2", "[", "0", "]", ",", "output_grids5_2", "[", "0", "]", ")", "\n", "output_grids5_2", "[", "1", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids3_2", "[", "1", "]", ",", "output_grids5_2", "[", "1", "]", ")", "\n", "output_grids5_2", "[", "2", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids3_2", "[", "2", "]", ",", "output_grids5_2", "[", "2", "]", ")", "\n", "for", "scale_ind", "in", "range", "(", "4", ")", ":", "\n", "        ", "output_grids5_2", "[", "scale_ind", "]", "=", "tf", ".", "concat", "(", "[", "output_grids5_2", "[", "scale_ind", "]", ",", "self", ".", "output_grids5", "[", "scale_ind", "]", "]", ",", "-", "1", ")", "\n", "\n", "", "output_dims", ",", "output_grids6_2", "=", "self", ".", "build_next_layer_convo", "(", "output_grids5_2", ",", "4", ",", "32", ",", "16", ",", "6", ")", "\n", "for", "scale_ind", "in", "range", "(", "4", ")", ":", "\n", "        ", "output_grids6_2", "[", "scale_ind", "]", "=", "tf", ".", "concat", "(", "[", "output_grids6_2", "[", "scale_ind", "]", ",", "self", ".", "output_grids6", "[", "scale_ind", "]", "]", ",", "-", "1", ")", "\n", "\n", "", "output_dims", ",", "output_grids7_2", "=", "self", ".", "build_next_layer_convo", "(", "output_grids6_2", ",", "5", ",", "32", ",", "16", ",", "7", ")", "\n", "for", "scale_ind", "in", "range", "(", "5", ")", ":", "\n", "        ", "output_grids7_2", "[", "scale_ind", "]", "=", "tf", ".", "concat", "(", "[", "output_grids7_2", "[", "scale_ind", "]", ",", "self", ".", "output_grids7", "[", "scale_ind", "]", "]", ",", "-", "1", ")", "\n", "\n", "\n", "", "output_dims", ",", "output_grids8_2", "=", "self", ".", "build_next_layer_convo_reverse", "(", "output_grids7_2", ",", "4", ",", "32", ",", "16", ",", "4", ",", "8", ")", "\n", "output_dims", ",", "output_grids9_2", "=", "self", ".", "build_next_layer_convo_reverse", "(", "output_grids8_2", ",", "4", ",", "16", ",", "16", ",", "4", ",", "9", ")", "\n", "output_dims", ",", "output_grids10_2", "=", "self", ".", "build_next_layer_convo_reverse", "(", "output_grids9_2", ",", "3", ",", "16", ",", "16", ",", "4", ",", "10", ")", "\n", "\n", "output_dims", ",", "output_grids11_2", "=", "self", ".", "build_next_layer_convo_reverse", "(", "output_grids10_2", ",", "3", ",", "16", ",", "16", ",", "4", ",", "11", ")", "\n", "output_grids11_2", "[", "-", "1", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids9_2", "[", "-", "1", "]", ",", "output_grids11_2", "[", "-", "1", "]", ")", "\n", "output_grids11_2", "[", "-", "2", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids9_2", "[", "-", "2", "]", ",", "output_grids11_2", "[", "-", "2", "]", ")", "\n", "output_grids11_2", "[", "-", "3", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids9_2", "[", "-", "3", "]", ",", "output_grids11_2", "[", "-", "3", "]", ")", "\n", "\n", "\n", "output_dims", ",", "output_grids12_2", "=", "self", ".", "build_next_layer_convo_reverse", "(", "output_grids11_2", ",", "2", ",", "16", ",", "16", ",", "4", ",", "12", ")", "\n", "\n", "output_dims", ",", "output_grids13_2", "=", "self", ".", "build_next_layer_convo_reverse", "(", "output_grids12_2", ",", "2", ",", "16", ",", "16", ",", "4", ",", "13", ")", "\n", "\n", "output_grids13_2", "[", "-", "1", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids11_2", "[", "-", "1", "]", ",", "output_grids13_2", "[", "-", "1", "]", ")", "\n", "output_grids13_2", "[", "-", "2", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids11_2", "[", "-", "2", "]", ",", "output_grids13_2", "[", "-", "2", "]", ")", "\n", "\n", "output_dims", ",", "output_grids14_2", "=", "self", ".", "build_next_layer_convo_reverse_without_activation", "(", "output_grids13_2", ",", "1", ",", "16", ",", "1", ",", "4", ",", "14", ")", "\n", "\n", "self", ".", "multigrid_output2", "=", "tf", ".", "reshape", "(", "output_grids14_2", "[", "0", "]", ",", "[", "-", "1", ",", "48", "*", "48", "]", ")", "\n", "self", ".", "locpred", "=", "tf", ".", "sigmoid", "(", "self", ".", "multigrid_output2", ")", "\n", "\n", "scope", ".", "reuse_variables", "(", ")", "\n", "self", ".", "variables", "=", "sorted", "(", "list", "(", "set", "(", "tf", ".", "trainable_variables", "(", ")", ")", "-", "set", "(", "variables_before", ")", ")", ",", "key", "=", "lambda", "x", ":", "x", ".", "name", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.create_residual_conn": [[177, 179], ["None"], "methods", ["None"], ["", "", "def", "create_residual_conn", "(", "self", ",", "first_elem", ",", "second_elem", ")", ":", "\n", "    ", "return", "first_elem", "+", "second_elem", "\n", "", "def", "create_residual_conn_extra", "(", "self", ",", "first_elem", ",", "second_elem", ",", "first_dim", ",", "second_dim", ")", ":", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.create_residual_conn_extra": [[179, 182], ["tensorflow.pad", "tensorflow.constant"], "methods", ["None"], ["", "def", "create_residual_conn_extra", "(", "self", ",", "first_elem", ",", "second_elem", ",", "first_dim", ",", "second_dim", ")", ":", "\n", "    ", "first_elem_padded", "=", "tf", ".", "pad", "(", "first_elem", ",", "tf", ".", "constant", "(", "[", "[", "0", ",", "0", "]", ",", "[", "0", ",", "0", "]", ",", "[", "0", ",", "0", "]", ",", "[", "0", ",", "second_dim", "-", "first_dim", "]", "]", ")", ",", "\"CONSTANT\"", ")", "\n", "return", "first_elem_padded", "+", "second_elem", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer_convo": [[183, 218], ["len", "range", "output_dims.append", "model.LocalizationModel._conv_variable", "tensorflow.nn.relu", "output_grids.append", "tensorflow.image.resize_images", "tensorflow.layers.max_pooling2d", "tensorflow.concat", "tensorflow.concat", "model.LocalizationModel._conv2d"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model._conv_variable", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model._conv2d"], ["", "def", "build_next_layer_convo", "(", "self", ",", "prev_grids", ",", "num_output_grids", ",", "input_feature_chan", ",", "output_feature_chan", ",", "lay_ind", ")", ":", "\n", "    ", "num_input_grids", "=", "len", "(", "prev_grids", ")", "\n", "output_grids", "=", "[", "]", "\n", "output_dims", "=", "[", "]", "\n", "\n", "for", "i", "in", "range", "(", "num_output_grids", ")", ":", "\n", "      ", "sum_input_feature_chan", "=", "0", "\n", "output_dim", "=", "(", "3", "*", "(", "2", "**", "i", ")", ",", "3", "*", "(", "2", "**", "i", ")", ",", "output_feature_chan", ")", "\n", "output_dims", ".", "append", "(", "output_dim", ")", "\n", "concat_grid", "=", "None", "\n", "if", "(", "i", "-", "1", ")", ">=", "0", "and", "(", "i", "-", "1", ")", "<", "num_input_grids", ":", "\n", "        ", "prev_spatial_dim", "=", "(", "prev_grids", "[", "i", "-", "1", "]", ".", "shape", "[", "1", "]", ",", "prev_grids", "[", "i", "-", "1", "]", ".", "shape", "[", "2", "]", ")", "\n", "next_spatial_dim", "=", "(", "prev_spatial_dim", "[", "0", "]", "*", "2", ",", "prev_spatial_dim", "[", "1", "]", "*", "2", ")", "\n", "prev_up", "=", "tf", ".", "image", ".", "resize_images", "(", "prev_grids", "[", "i", "-", "1", "]", ",", "next_spatial_dim", ",", "tf", ".", "image", ".", "ResizeMethod", ".", "NEAREST_NEIGHBOR", ")", "\n", "concat_grid", "=", "prev_up", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "if", "i", ">=", "0", "and", "i", "<", "num_input_grids", ":", "\n", "        ", "if", "concat_grid", "==", "None", ":", "\n", "          ", "concat_grid", "=", "prev_grids", "[", "i", "]", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "else", ":", "\n", "          ", "concat_grid", "=", "tf", ".", "concat", "(", "[", "concat_grid", ",", "prev_grids", "[", "i", "]", "]", ",", "3", ")", "\n", "sum_input_feature_chan", "+=", "input_feature_chan", "\n", "", "", "if", "i", "+", "1", ">=", "0", "and", "i", "+", "1", "<", "num_input_grids", ":", "\n", "        ", "prev_down", "=", "tf", ".", "layers", ".", "max_pooling2d", "(", "prev_grids", "[", "i", "+", "1", "]", ",", "[", "2", ",", "2", "]", ",", "2", ")", "\n", "if", "concat_grid", "==", "None", ":", "\n", "          ", "concat_grid", "=", "prev_down", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "else", ":", "\n", "          ", "concat_grid", "=", "tf", ".", "concat", "(", "[", "concat_grid", ",", "prev_down", "]", ",", "3", ")", "\n", "sum_input_feature_chan", "+=", "input_feature_chan", "\n", "", "", "W_conv1_m", ",", "b_conv1_m", "=", "self", ".", "_conv_variable", "(", "[", "3", ",", "3", ",", "sum_input_feature_chan", ",", "output_feature_chan", "]", ")", "\n", "output_grid", "=", "tf", ".", "nn", ".", "relu", "(", "self", ".", "_conv2d", "(", "concat_grid", ",", "W_conv1_m", ",", "1", ")", "+", "b_conv1_m", ")", "\n", "output_grids", ".", "append", "(", "output_grid", ")", "\n", "", "return", "output_dims", ",", "output_grids", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer_convo_reverse": [[219, 256], ["len", "range", "output_dims.append", "model.LocalizationModel._conv_variable", "tensorflow.nn.relu", "output_grids.append", "tensorflow.image.resize_images", "tensorflow.layers.max_pooling2d", "tensorflow.concat", "tensorflow.concat", "model.LocalizationModel._conv2d"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model._conv_variable", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model._conv2d"], ["", "def", "build_next_layer_convo_reverse", "(", "self", ",", "prev_grids", ",", "num_output_grids", ",", "input_feature_chan", ",", "output_feature_chan", ",", "largest_scale", ",", "lay_ind", ")", ":", "\n", "    ", "num_input_grids", "=", "len", "(", "prev_grids", ")", "\n", "output_grids", "=", "[", "]", "\n", "output_dims", "=", "[", "]", "\n", "\n", "for", "i", "in", "range", "(", "num_output_grids", ")", ":", "\n", "      ", "j", "=", "(", "num_input_grids", "-", "num_output_grids", ")", "+", "i", "\n", "sum_input_feature_chan", "=", "0", "\n", "scale", "=", "largest_scale", "-", "num_output_grids", "+", "1", "+", "i", "\n", "output_dim", "=", "(", "3", "*", "(", "2", "**", "scale", ")", ",", "3", "*", "(", "2", "**", "scale", ")", ",", "output_feature_chan", ")", "\n", "output_dims", ".", "append", "(", "output_dim", ")", "\n", "concat_grid", "=", "None", "\n", "if", "(", "j", "-", "1", ")", ">=", "0", "and", "(", "j", "-", "1", ")", "<", "num_input_grids", ":", "\n", "        ", "prev_spatial_dim", "=", "(", "prev_grids", "[", "j", "-", "1", "]", ".", "shape", "[", "1", "]", ",", "prev_grids", "[", "j", "-", "1", "]", ".", "shape", "[", "2", "]", ")", "\n", "next_spatial_dim", "=", "(", "prev_spatial_dim", "[", "0", "]", "*", "2", ",", "prev_spatial_dim", "[", "1", "]", "*", "2", ")", "\n", "prev_up", "=", "tf", ".", "image", ".", "resize_images", "(", "prev_grids", "[", "j", "-", "1", "]", ",", "next_spatial_dim", ",", "tf", ".", "image", ".", "ResizeMethod", ".", "NEAREST_NEIGHBOR", ")", "\n", "concat_grid", "=", "prev_up", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "if", "j", ">=", "0", "and", "j", "<", "num_input_grids", ":", "\n", "        ", "if", "concat_grid", "==", "None", ":", "\n", "          ", "concat_grid", "=", "prev_grids", "[", "j", "]", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "else", ":", "\n", "          ", "concat_grid", "=", "tf", ".", "concat", "(", "[", "concat_grid", ",", "prev_grids", "[", "j", "]", "]", ",", "3", ")", "\n", "sum_input_feature_chan", "+=", "input_feature_chan", "\n", "", "", "if", "j", "+", "1", ">=", "0", "and", "j", "+", "1", "<", "num_input_grids", ":", "\n", "        ", "prev_down", "=", "tf", ".", "layers", ".", "max_pooling2d", "(", "prev_grids", "[", "j", "+", "1", "]", ",", "[", "2", ",", "2", "]", ",", "2", ")", "\n", "if", "concat_grid", "==", "None", ":", "\n", "          ", "concat_grid", "=", "prev_down", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "else", ":", "\n", "          ", "concat_grid", "=", "tf", ".", "concat", "(", "[", "concat_grid", ",", "prev_down", "]", ",", "3", ")", "\n", "sum_input_feature_chan", "+=", "input_feature_chan", "\n", "", "", "W_conv1_m", ",", "b_conv1_m", "=", "self", ".", "_conv_variable", "(", "[", "3", ",", "3", ",", "sum_input_feature_chan", ",", "output_feature_chan", "]", ")", "\n", "output_grid", "=", "tf", ".", "nn", ".", "relu", "(", "self", ".", "_conv2d", "(", "concat_grid", ",", "W_conv1_m", ",", "1", ")", "+", "b_conv1_m", ")", "\n", "output_grids", ".", "append", "(", "output_grid", ")", "\n", "", "return", "output_dims", ",", "output_grids", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer_convo_reverse_without_activation": [[257, 294], ["len", "range", "output_dims.append", "model.LocalizationModel._conv_variable", "output_grids.append", "tensorflow.image.resize_images", "tensorflow.layers.max_pooling2d", "model.LocalizationModel._conv2d", "tensorflow.concat", "tensorflow.concat"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model._conv_variable", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model._conv2d"], ["", "def", "build_next_layer_convo_reverse_without_activation", "(", "self", ",", "prev_grids", ",", "num_output_grids", ",", "input_feature_chan", ",", "output_feature_chan", ",", "largest_scale", ",", "lay_ind", ")", ":", "\n", "    ", "num_input_grids", "=", "len", "(", "prev_grids", ")", "\n", "output_grids", "=", "[", "]", "\n", "output_dims", "=", "[", "]", "\n", "\n", "for", "i", "in", "range", "(", "num_output_grids", ")", ":", "\n", "      ", "j", "=", "(", "num_input_grids", "-", "num_output_grids", ")", "+", "i", "\n", "sum_input_feature_chan", "=", "0", "\n", "scale", "=", "largest_scale", "-", "num_output_grids", "+", "1", "+", "i", "\n", "output_dim", "=", "(", "3", "*", "(", "2", "**", "scale", ")", ",", "3", "*", "(", "2", "**", "scale", ")", ",", "output_feature_chan", ")", "\n", "output_dims", ".", "append", "(", "output_dim", ")", "\n", "concat_grid", "=", "None", "\n", "if", "(", "j", "-", "1", ")", ">=", "0", "and", "(", "j", "-", "1", ")", "<", "num_input_grids", ":", "\n", "        ", "prev_spatial_dim", "=", "(", "prev_grids", "[", "j", "-", "1", "]", ".", "shape", "[", "1", "]", ",", "prev_grids", "[", "j", "-", "1", "]", ".", "shape", "[", "2", "]", ")", "\n", "next_spatial_dim", "=", "(", "prev_spatial_dim", "[", "0", "]", "*", "2", ",", "prev_spatial_dim", "[", "1", "]", "*", "2", ")", "\n", "prev_up", "=", "tf", ".", "image", ".", "resize_images", "(", "prev_grids", "[", "j", "-", "1", "]", ",", "next_spatial_dim", ",", "tf", ".", "image", ".", "ResizeMethod", ".", "NEAREST_NEIGHBOR", ")", "\n", "concat_grid", "=", "prev_up", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "if", "j", ">=", "0", "and", "j", "<", "num_input_grids", ":", "\n", "        ", "if", "concat_grid", "==", "None", ":", "\n", "          ", "concat_grid", "=", "prev_grids", "[", "j", "]", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "else", ":", "\n", "          ", "concat_grid", "=", "tf", ".", "concat", "(", "[", "concat_grid", ",", "prev_grids", "[", "j", "]", "]", ",", "3", ")", "\n", "sum_input_feature_chan", "+=", "input_feature_chan", "\n", "", "", "if", "j", "+", "1", ">=", "0", "and", "j", "+", "1", "<", "num_input_grids", ":", "\n", "        ", "prev_down", "=", "tf", ".", "layers", ".", "max_pooling2d", "(", "prev_grids", "[", "j", "+", "1", "]", ",", "[", "2", ",", "2", "]", ",", "2", ")", "\n", "if", "concat_grid", "==", "None", ":", "\n", "          ", "concat_grid", "=", "prev_down", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "else", ":", "\n", "          ", "concat_grid", "=", "tf", ".", "concat", "(", "[", "concat_grid", ",", "prev_down", "]", ",", "3", ")", "\n", "sum_input_feature_chan", "+=", "input_feature_chan", "\n", "", "", "W_conv1_m", ",", "b_conv1_m", "=", "self", ".", "_conv_variable", "(", "[", "3", ",", "3", ",", "sum_input_feature_chan", ",", "output_feature_chan", "]", ")", "\n", "output_grid", "=", "(", "self", ".", "_conv2d", "(", "concat_grid", ",", "W_conv1_m", ",", "1", ")", "+", "b_conv1_m", ")", "\n", "output_grids", ".", "append", "(", "output_grid", ")", "\n", "", "return", "output_dims", ",", "output_grids", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.build_next_layer": [[295, 342], ["len", "range", "output_dims.append", "tensorflow.reshape", "tensorflow.contrib.rnn.Conv2DLSTMCell", "tensorflow.placeholder", "tensorflow.placeholder", "tensorflow.contrib.rnn.LSTMStateTuple", "tensorflow.reshape", "output_grids.append", "lstm_states.append", "lstm_states_ph.append", "tensorflow.image.resize_images", "tensorflow.layers.max_pooling2d", "str", "tensorflow.variable_scope", "tensorflow.nn.dynamic_rnn", "tensorflow.concat", "tensorflow.concat", "str", "tensorflow.fill"], "methods", ["None"], ["", "def", "build_next_layer", "(", "self", ",", "prev_grids", ",", "num_output_grids", ",", "output_feature_chan", ",", "lay_ind", ")", ":", "\n", "    ", "num_input_grids", "=", "len", "(", "prev_grids", ")", "\n", "output_grids", "=", "[", "]", "\n", "lstm_states", "=", "[", "]", "\n", "lstm_states_ph", "=", "[", "]", "\n", "output_dims", "=", "[", "]", "\n", "\n", "for", "i", "in", "range", "(", "num_output_grids", ")", ":", "\n", "      ", "output_dim", "=", "(", "3", "*", "(", "2", "**", "i", ")", ",", "3", "*", "(", "2", "**", "i", ")", ",", "output_feature_chan", ")", "\n", "output_dims", ".", "append", "(", "output_dim", ")", "\n", "concat_grid", "=", "None", "\n", "if", "(", "i", "-", "1", ")", ">=", "0", "and", "(", "i", "-", "1", ")", "<", "num_input_grids", ":", "\n", "        ", "prev_spatial_dim", "=", "(", "prev_grids", "[", "i", "-", "1", "]", ".", "shape", "[", "1", "]", ",", "prev_grids", "[", "i", "-", "1", "]", ".", "shape", "[", "2", "]", ")", "\n", "next_spatial_dim", "=", "(", "prev_spatial_dim", "[", "0", "]", "*", "2", ",", "prev_spatial_dim", "[", "1", "]", "*", "2", ")", "\n", "prev_up", "=", "tf", ".", "image", ".", "resize_images", "(", "prev_grids", "[", "i", "-", "1", "]", ",", "next_spatial_dim", ",", "tf", ".", "image", ".", "ResizeMethod", ".", "NEAREST_NEIGHBOR", ")", "\n", "concat_grid", "=", "prev_up", "\n", "", "if", "i", ">=", "0", "and", "i", "<", "num_input_grids", ":", "\n", "        ", "if", "concat_grid", "==", "None", ":", "\n", "          ", "concat_grid", "=", "prev_grids", "[", "i", "]", "\n", "", "else", ":", "\n", "          ", "concat_grid", "=", "tf", ".", "concat", "(", "[", "concat_grid", ",", "prev_grids", "[", "i", "]", "]", ",", "3", ")", "\n", "", "", "if", "i", "+", "1", ">=", "0", "and", "i", "+", "1", "<", "num_input_grids", ":", "\n", "        ", "prev_down", "=", "tf", ".", "layers", ".", "max_pooling2d", "(", "prev_grids", "[", "i", "+", "1", "]", ",", "[", "2", ",", "2", "]", ",", "2", ")", "\n", "if", "concat_grid", "==", "None", ":", "\n", "          ", "concat_grid", "=", "prev_down", "\n", "", "else", ":", "\n", "          ", "concat_grid", "=", "tf", ".", "concat", "(", "[", "concat_grid", ",", "prev_down", "]", ",", "3", ")", "\n", "", "", "concat_grid_reshaped", "=", "tf", ".", "reshape", "(", "concat_grid", ",", "[", "-", "1", ",", "BATCH_SIZE", ",", "concat_grid", ".", "shape", "[", "1", "]", ",", "concat_grid", ".", "shape", "[", "2", "]", ",", "concat_grid", ".", "shape", "[", "3", "]", "]", ")", "\n", "lstm", "=", "tf", ".", "contrib", ".", "rnn", ".", "Conv2DLSTMCell", "(", "input_shape", "=", "[", "concat_grid", ".", "shape", "[", "1", "]", ",", "concat_grid", ".", "shape", "[", "2", "]", ",", "concat_grid", ".", "shape", "[", "3", "]", "]", ",", "kernel_shape", "=", "[", "3", ",", "3", "]", ",", "output_channels", "=", "output_feature_chan", ")", "\n", "initial_lstm_state0", "=", "tf", ".", "placeholder", "(", "tf", ".", "float32", ",", "[", "BATCH_SIZE", ",", "concat_grid", ".", "shape", "[", "1", "]", ",", "concat_grid", ".", "shape", "[", "2", "]", ",", "output_feature_chan", "]", ")", "\n", "initial_lstm_state1", "=", "tf", ".", "placeholder", "(", "tf", ".", "float32", ",", "[", "BATCH_SIZE", ",", "concat_grid", ".", "shape", "[", "1", "]", ",", "concat_grid", ".", "shape", "[", "2", "]", ",", "output_feature_chan", "]", ")", "\n", "initial_lstm_state", "=", "tf", ".", "contrib", ".", "rnn", ".", "LSTMStateTuple", "(", "initial_lstm_state0", ",", "\n", "initial_lstm_state1", ")", "\n", "\n", "scope_name", "=", "\"lstm_\"", "+", "str", "(", "lay_ind", ")", "+", "\"_\"", "+", "str", "(", "i", ")", "\n", "with", "tf", ".", "variable_scope", "(", "scope_name", ")", "as", "scope", ":", "\n", "        ", "lstm_outputs", ",", "lstm_state", "=", "tf", ".", "nn", ".", "dynamic_rnn", "(", "lstm", ",", "\n", "concat_grid_reshaped", ",", "\n", "initial_state", "=", "initial_lstm_state", ",", "\n", "sequence_length", "=", "tf", ".", "fill", "(", "[", "BATCH_SIZE", "]", ",", "self", ".", "step_size", "[", "0", "]", ")", ",", "\n", "time_major", "=", "True", ",", "\n", "scope", "=", "scope", ")", "\n", "", "lstm_outputs", "=", "tf", ".", "reshape", "(", "lstm_outputs", ",", "[", "-", "1", ",", "concat_grid", ".", "shape", "[", "1", "]", ",", "concat_grid", ".", "shape", "[", "2", "]", ",", "output_feature_chan", "]", ")", "\n", "output_grids", ".", "append", "(", "lstm_outputs", ")", "\n", "lstm_states", ".", "append", "(", "lstm_state", ")", "\n", "lstm_states_ph", ".", "append", "(", "initial_lstm_state", ")", "\n", "", "return", "output_dims", ",", "output_grids", ",", "lstm_states", ",", "lstm_states_ph", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.get_initial_state": [[346, 354], ["range", "len", "lstm_state_out.append", "tensorflow.contrib.rnn.LSTMStateTuple", "numpy.zeros", "numpy.zeros"], "methods", ["None"], ["", "def", "get_initial_state", "(", "self", ")", ":", "\n", "    ", "lstm_state_out", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "len", "(", "self", ".", "lstm_state_list", ")", ")", ":", "\n", "      ", "cur_dim", "=", "self", ".", "grid_dim_list", "[", "i", "]", "\n", "lstm_state_out", ".", "append", "(", "tf", ".", "contrib", ".", "rnn", ".", "LSTMStateTuple", "(", "np", ".", "zeros", "(", "[", "BATCH_SIZE", ",", "cur_dim", "[", "0", "]", ",", "cur_dim", "[", "1", "]", ",", "cur_dim", "[", "2", "]", "]", ")", ",", "\n", "np", ".", "zeros", "(", "[", "BATCH_SIZE", ",", "cur_dim", "[", "0", "]", ",", "cur_dim", "[", "1", "]", ",", "cur_dim", "[", "2", "]", "]", ")", ")", ")", "\n", "\n", "", "return", "lstm_state_out", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mapping_localization.model.LocalizationModel.get_vars": [[355, 357], ["tensorflow.trainable_variables"], "methods", ["None"], ["", "def", "get_vars", "(", "self", ")", ":", "\n", "    ", "return", "tf", ".", "trainable_variables", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.main.signal_handler": [[80, 86], ["print", "saver.save", "sys.exit"], "function", ["None"], ["summary_op", "=", "tf", ".", "summary", ".", "merge_all", "(", ")", "\n", "summary_writer", "=", "tf", ".", "summary", ".", "FileWriter", "(", "LOG_FILE", ",", "sess", ".", "graph", ")", "\n", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "CHECKPOINT_DIR", ")", ":", "\n", "  ", "os", ".", "mkdir", "(", "CHECKPOINT_DIR", ")", "\n", "\n", "", "saver", "=", "tf", ".", "train", ".", "Saver", "(", "network", ".", "get_vars", "(", ")", ")", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.training_thread.TrainingThread.__init__": [[33, 86], ["network.prepare_loss", "mnist.MNIST", "mnist.MNIST.load_training", "numpy.asarray", "numpy.asarray().reshape", "mnist.MNIST.load_testing", "numpy.asarray", "numpy.asarray().reshape", "tensorflow.device", "tensorflow.gradients", "tensorflow.clip_by_global_norm", "grad_applier.apply_gradients", "v._ref", "network.get_vars", "numpy.asarray", "numpy.asarray", "network.get_vars"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model.prepare_loss", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier.apply_gradients", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.get_vars", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.get_vars"], ["\n", "def", "eprint", "(", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "    ", "print", "(", "*", "args", ",", "file", "=", "sys", ".", "stderr", ",", "**", "kwargs", ")", "\n", "\n", "\n", "", "class", "TrainingThread", "(", "object", ")", ":", "\n", "  ", "def", "__init__", "(", "self", ",", "\n", "network", ",", "\n", "initial_learning_rate", ",", "\n", "learning_rate_input", ",", "\n", "grad_applier", ",", "\n", "max_global_time_step", ",", "\n", "device", ")", ":", "\n", "\n", "    ", "self", ".", "learning_rate_input", "=", "learning_rate_input", "\n", "self", ".", "max_global_time_step", "=", "max_global_time_step", "\n", "\n", "\n", "network", ".", "prepare_loss", "(", ")", "\n", "\n", "with", "tf", ".", "device", "(", "device", ")", ":", "\n", "      ", "var_refs", "=", "[", "v", ".", "_ref", "(", ")", "for", "v", "in", "network", ".", "get_vars", "(", ")", "]", "\n", "self", ".", "gradients", "=", "tf", ".", "gradients", "(", "\n", "network", ".", "loss", ",", "var_refs", ",", "\n", "gate_gradients", "=", "False", ",", "\n", "aggregation_method", "=", "None", ",", "\n", "colocate_gradients_with_ops", "=", "False", ")", "\n", "", "clipped_gradients", ",", "_", "=", "tf", ".", "clip_by_global_norm", "(", "self", ".", "gradients", ",", "GRAD_NORM_CLIP", ")", "\n", "self", ".", "apply_gradients", "=", "grad_applier", ".", "apply_gradients", "(", "\n", "network", ".", "get_vars", "(", ")", ",", "\n", "clipped_gradients", ")", "\n", "\n", "self", ".", "batch_size", "=", "BATCH_SIZE", "\n", "self", ".", "game_state", "=", "MapEnv", "(", "self", ".", "batch_size", ",", "GENERIC_MAP_SIZE", ")", "\n", "self", ".", "game_state", ".", "reset_agent_pos", "(", ")", "\n", "self", ".", "game_step", "=", "0", "\n", "\n", "self", ".", "initial_learning_rate", "=", "initial_learning_rate", "\n", "\n", "self", ".", "batch_ind", ",", "self", ".", "row_ind", ",", "self", ".", "col_ind", "=", "np", ".", "indices", "(", "(", "self", ".", "batch_size", ",", "INPUT_SIZE", ",", "INPUT_SIZE", ")", ")", "\n", "self", ".", "network", "=", "network", "\n", "\n", "\n", "", "def", "vis_convert_to_image", "(", "self", ",", "matrix", ",", "env_state", ")", ":", "\n", "    ", "im", "=", "np", ".", "zeros", "(", "(", "matrix", ".", "shape", "[", "0", "]", ",", "matrix", ".", "shape", "[", "1", "]", ",", "3", ")", ")", "\n", "#background cells in the combined visualization", "\n", "background_color", "=", "(", "0.5", ",", "0.5", ",", "0.5", ")", "\n", "indices", "=", "np", ".", "where", "(", "matrix", "==", "-", "1", ")", "\n", "im", "[", "indices", "[", "0", "]", ",", "indices", "[", "1", "]", ",", ":", "]", "=", "background_color", "\n", "#unknown cells", "\n", "unknown_color", "=", "(", "0", ",", "0", ",", "0", ")", "\n", "indices", "=", "np", ".", "where", "(", "matrix", "==", "env_state", ".", "unknown_mark", ")", "\n", "im", "[", "indices", "[", "0", "]", ",", "indices", "[", "1", "]", ",", ":", "]", "=", "unknown_color", "\n", "#Wall cells", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.training_thread.TrainingThread.vis_save": [[87, 134], ["range", "os.path.exists", "os.mkdir", "training_thread.TrainingThread.generate_test_input_output", "batch_input.reshape.reshape.reshape", "batch_input2.reshape.reshape.reshape", "batch_output.reshape.reshape.reshape", "training_thread.TrainingThread.network.get_initial_state", "sess.run", "batch_input.reshape.reshape.reshape", "batch_input2.reshape.reshape.reshape", "range", "range", "numpy.kron", "vis_img_scaled.astype.astype.astype", "numpy.stack", "prediction_output[].argmax", "cv2.putText", "cv2.imwrite", "dict", "numpy.ones", "numpy.ones", "zip"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.training_thread.TrainingThread.generate_test_input_output", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.get_initial_state"], ["wall_color", "=", "(", "0", ",", "0", ",", "1", ")", "\n", "indices", "=", "np", ".", "where", "(", "matrix", "==", "env_state", ".", "unavail_mark", ")", "\n", "im", "[", "indices", "[", "0", "]", ",", "indices", "[", "1", "]", ",", ":", "]", "=", "wall_color", "\n", "#Free cells", "\n", "free_color", "=", "(", "1", ",", "1", ",", "1", ")", "\n", "indices", "=", "np", ".", "where", "(", "matrix", "==", "env_state", ".", "free_mark", ")", "\n", "im", "[", "indices", "[", "0", "]", ",", "indices", "[", "1", "]", ",", ":", "]", "=", "free_color", "\n", "#Visited cells", "\n", "visited_color", "=", "(", "0.5", ",", "0.5", ",", "1", ")", "\n", "indices", "=", "np", ".", "where", "(", "matrix", "==", "env_state", ".", "visited_mark", ")", "\n", "im", "[", "indices", "[", "0", "]", ",", "indices", "[", "1", "]", ",", ":", "]", "=", "visited_color", "\n", "#Agent cell", "\n", "agent_color", "=", "(", "1", ",", "0", ",", "0", ")", "\n", "indices", "=", "np", ".", "where", "(", "matrix", "==", "env_state", ".", "agent_mark", ")", "\n", "im", "[", "indices", "[", "0", "]", ",", "indices", "[", "1", "]", ",", ":", "]", "=", "agent_color", "\n", "return", "im", "\n", "\n", "", "def", "vis_save", "(", "self", ",", "sess", ",", "timestep", ")", ":", "\n", "    ", "vis_dir", "=", "CHECKPOINT_DIR", "+", "(", "\"/%d\"", "%", "timestep", ")", "\n", "if", "os", ".", "path", ".", "exists", "(", "vis_dir", ")", ":", "\n", "      ", "return", "\n", "", "os", ".", "mkdir", "(", "vis_dir", ")", "\n", "MAP_SIZE_MEM", "=", "48", "\n", "episode_end", "=", "False", "\n", "cur_lstm_states", "=", "self", ".", "network", ".", "get_initial_state", "(", ")", "\n", "step_ind", "=", "-", "1", "\n", "env_state", "=", "MapEnv", "(", "self", ".", "batch_size", ",", "MAP_SIZE", "*", "2", ")", "\n", "env_state", ".", "reset_agent_pos", "(", ")", "\n", "while", "not", "episode_end", ":", "\n", "      ", "batch_map_input", "=", "[", "]", "\n", "batch_map_input2", "=", "[", "]", "\n", "batch_loc_output", "=", "[", "]", "\n", "step_ind", "+=", "1", "\n", "map_input", "=", "self", ".", "convert_maps", "(", "env_state", ".", "get_input_ego", "(", ")", ",", "env_state", ".", "generic_pos", ")", "\n", "loc", "=", "np", ".", "copy", "(", "env_state", ".", "agent_pos", ")", "\n", "loc_generic", "=", "np", ".", "copy", "(", "env_state", ".", "generic_pos", ")", "\n", "map_input_noloc", "=", "self", ".", "remove_loc", "(", "map_input", ")", "\n", "loc_output", "=", "self", ".", "get_loc_output", "(", "map_input", ",", "env_state", ")", "\n", "\n", "full_maps", "=", "np", ".", "copy", "(", "env_state", ".", "maps", ")", "\n", "full_maps_generic", "=", "np", ".", "copy", "(", "env_state", ".", "generic_maps", ")", "\n", "episode_end", "=", "env_state", ".", "move_spiral", "(", ")", "\n", "num_steps", "=", "1", "\n", "batch_map_input", ".", "append", "(", "map_input", ")", "\n", "batch_map_input2", ".", "append", "(", "map_input_noloc", ")", "\n", "batch_loc_output", ".", "append", "(", "loc_output", ")", "\n", "\n", "batch_map_input", "=", "np", ".", "asarray", "(", "batch_map_input", ")", ".", "reshape", "(", "(", "num_steps", "*", "self", ".", "batch_size", ",", "INPUT_SIZE", ",", "INPUT_SIZE", ",", "4", ")", ")", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.training_thread.TrainingThread._anneal_learning_rate": [[136, 142], ["None"], "methods", ["None"], ["batch_loc_output", "=", "np", ".", "asarray", "(", "batch_loc_output", ")", ".", "reshape", "(", "(", "num_steps", "*", "self", ".", "batch_size", ",", "MAP_SIZE_MEM", "*", "MAP_SIZE_MEM", ")", ")", "\n", "\n", "list_to_run", "=", "[", "self", ".", "network", ".", "locpred", "]", "+", "self", ".", "network", ".", "lstm_state_list", "+", "self", ".", "network", ".", "output_grids7", "\n", "list_keys", "=", "self", ".", "network", ".", "lstm_state_ph_list", "+", "[", "self", ".", "network", ".", "ma", ",", "self", ".", "network", ".", "ma2", ",", "self", ".", "network", ".", "step_size", "]", "\n", "list_vals", "=", "cur_lstm_states", "+", "[", "batch_map_input", ",", "batch_map_input2", ",", "[", "num_steps", "]", "]", "\n", "list_output", "=", "sess", ".", "run", "(", "list_to_run", ",", "\n", "feed_dict", "=", "dict", "(", "zip", "(", "list_keys", ",", "list_vals", ")", ")", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.training_thread.TrainingThread._record_params": [[143, 149], ["sess.run", "summary_writer.add_summary", "summary_writer.flush", "numpy.asscalar"], "methods", ["None"], [")", "\n", "pred_maps", "=", "list_output", "[", "0", "]", "[", ":", "batch_map_input", ".", "shape", "[", "0", "]", "]", "\n", "cur_lstm_states", "=", "list_output", "[", "1", ":", "1", "+", "len", "(", "self", ".", "network", ".", "lstm_state_list", ")", "]", "\n", "learned_maps", "=", "list_output", "[", "1", "+", "len", "(", "self", ".", "network", ".", "lstm_state_list", ")", ":", "]", "\n", "gt_data_list", "=", "batch_loc_output", ".", "reshape", "(", "(", "self", ".", "batch_size", ",", "MAP_SIZE_MEM", ",", "MAP_SIZE_MEM", ")", ")", "\n", "locpred_gt", "=", "loc", "\n", "locpred_gt_generic", "=", "loc_generic", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.training_thread.TrainingThread.generate_test_input_output": [[150, 163], ["training_thread.TrainingThread.mnist_test_images_curr[].reshape", "training_thread.TrainingThread.mnist_test_labels_curr[].reshape", "random.randint", "len", "numpy.random.permutation", "len"], "methods", ["None"], ["pred_maps", "=", "pred_maps", ".", "reshape", "(", "(", "self", ".", "batch_size", ",", "MAP_SIZE_MEM", ",", "MAP_SIZE_MEM", ")", ")", "\n", "\n", "num_vis_env", "=", "2", "\n", "for", "ind_vis_env", "in", "range", "(", "num_vis_env", ")", ":", "\n", "        ", "pred_map", "=", "pred_maps", "[", "ind_vis_env", "]", ".", "reshape", "(", "(", "MAP_SIZE_MEM", ",", "MAP_SIZE_MEM", ")", ")", "\n", "pred_map_argmax", "=", "(", "pred_map", ">=", "0.5", ")", "\n", "gt_data", "=", "gt_data_list", "[", "ind_vis_env", "]", ".", "reshape", "(", "(", "MAP_SIZE_MEM", ",", "MAP_SIZE_MEM", ")", ")", "\n", "gt_data_argmax", "=", "gt_data", "\n", "full_map_data", "=", "full_maps", "[", "ind_vis_env", "]", "\n", "full_map_data_generic", "=", "full_maps_generic", "[", "ind_vis_env", "]", "\n", "cur_agent_pos", "=", "locpred_gt", "[", "ind_vis_env", "]", "\n", "cur_agent_pos_generic", "=", "locpred_gt_generic", "[", "ind_vis_env", "]", "\n", "full_map_data", "[", "cur_agent_pos", "[", "0", "]", ",", "cur_agent_pos", "[", "1", "]", "]", "=", "env_state", ".", "agent_mark", "\n", "full_map_data_generic", "[", "cur_agent_pos_generic", "[", "0", "]", ",", "cur_agent_pos_generic", "[", "1", "]", "]", "=", "env_state", ".", "agent_mark", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.training_thread.TrainingThread.generate_input_output": [[164, 177], ["training_thread.TrainingThread.mnist_train_images_curr[].reshape", "training_thread.TrainingThread.mnist_train_labels_curr[].reshape", "random.randint", "len", "numpy.random.permutation", "len"], "methods", ["None"], ["map_input", "=", "batch_map_input", "[", "ind_vis_env", ",", ":", ",", ":", ",", ":", "]", ".", "reshape", "(", "(", "INPUT_SIZE", ",", "INPUT_SIZE", ",", "4", ")", ")", "\n", "map_input_argmax", "=", "map_input", "[", ":", ",", ":", ",", ":", "2", "]", ".", "argmax", "(", "2", ")", ".", "reshape", "(", "(", "INPUT_SIZE", ",", "INPUT_SIZE", ")", ")", "\n", "\n", "\n", "step_string", "=", "(", "\"%02d_%04d\"", "%", "(", "ind_vis_env", ",", "step_ind", ")", ")", "\n", "step_path", "=", "vis_dir", "+", "\"/\"", "+", "step_string", "+", "\".jpg\"", "\n", "\n", "vis_width", "=", "MAP_SIZE", "+", "2", "*", "MAP_SIZE", "+", "5", "+", "20", "+", "3", "*", "MAP_SIZE_MEM", "+", "INPUT_SIZE", "\n", "vis_height", "=", "MAP_SIZE", "*", "2", "+", "11", "+", "MAP_SIZE_MEM", "*", "2", "+", "3", "\n", "final_image", "=", "np", ".", "ones", "(", "(", "vis_height", ",", "vis_width", ")", ")", "*", "(", "-", "1", ")", "\n", "\n", "final_image", "[", ":", "MAP_SIZE", ",", ":", "MAP_SIZE", "]", "=", "full_map_data", "\n", "final_image", "[", ":", "MAP_SIZE", "*", "2", ",", "MAP_SIZE", "+", "5", ":", "MAP_SIZE", "+", "5", "+", "MAP_SIZE", "*", "2", "]", "=", "full_map_data_generic", "\n", "final_image", "[", "MAP_SIZE", "-", "INPUT_SIZE", "/", "2", ":", "MAP_SIZE", "+", "INPUT_SIZE", "/", "2", "+", "1", ",", "MAP_SIZE", "+", "5", "+", "MAP_SIZE", "*", "2", "+", "5", ":", "MAP_SIZE", "+", "5", "+", "MAP_SIZE", "*", "2", "+", "5", "+", "INPUT_SIZE", "]", "=", "map_input_argmax", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.training_thread.TrainingThread.process": [[178, 220], ["training_thread.TrainingThread.network.get_initial_state", "training_thread.TrainingThread.generate_input_output", "batch_input.reshape.reshape.reshape", "batch_input2.reshape.reshape.reshape", "batch_output.reshape.reshape.reshape", "training_thread.TrainingThread._anneal_learning_rate", "sess.run", "training_thread.TrainingThread.vis_save", "saver.save", "sess.run", "print", "training_thread.TrainingThread._record_params", "dict", "dict", "zip", "zip"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.get_initial_state", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.training_thread.TrainingThread.generate_input_output", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.training_thread.TrainingThread._anneal_learning_rate", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.training_thread.TrainingThread.vis_save", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.training_thread.TrainingThread._record_params"], ["\n", "\n", "scale_factor", "=", "10", "\n", "map_img_scaled", "=", "np", ".", "kron", "(", "final_image", ",", "np", ".", "ones", "(", "(", "scale_factor", ",", "scale_factor", ")", ")", ")", "\n", "\n", "map_img_vis", "=", "(", "self", ".", "vis_convert_to_image", "(", "map_img_scaled", ",", "env_state", ")", "*", "255", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "\n", "lstm_image", "=", "np", ".", "ones", "(", "(", "MAP_SIZE_MEM", "+", "3", "+", "MAP_SIZE_MEM", ",", "vis_width", ")", ")", "*", "(", "-", "1", ")", "\n", "lstm_state", "=", "cur_lstm_states", "[", "0", "]", "\n", "lstm_state_vis", "=", "[", "]", "\n", "cur_lstm_states_vis", "=", "cur_lstm_states", "[", "-", "5", ":", "]", "\n", "for", "list_lstm_ind", "in", "range", "(", "len", "(", "cur_lstm_states_vis", ")", ")", ":", "\n", "          ", "cur_lstm", "=", "[", "]", "\n", "for", "lstm_ind", "in", "range", "(", "2", ")", ":", "\n", "            ", "cur_mean", "=", "np", ".", "expand_dims", "(", "np", ".", "mean", "(", "cur_lstm_states_vis", "[", "list_lstm_ind", "]", "[", "lstm_ind", "]", ",", "axis", "=", "-", "1", ")", ",", "axis", "=", "-", "1", ")", "\n", "cur_var", "=", "np", ".", "expand_dims", "(", "np", ".", "var", "(", "cur_lstm_states_vis", "[", "list_lstm_ind", "]", "[", "lstm_ind", "]", ",", "axis", "=", "-", "1", ")", ",", "axis", "=", "-", "1", ")", "\n", "cur_lstm", ".", "append", "(", "np", ".", "concatenate", "(", "(", "cur_mean", ",", "cur_var", ")", ",", "axis", "=", "-", "1", ")", ")", "\n", "", "lstm_state_vis", ".", "append", "(", "cur_lstm", ")", "\n", "\n", "", "start_lstm_pos", "=", "0", "\n", "for", "list_lstm_ind", "in", "range", "(", "len", "(", "cur_lstm_states_vis", ")", ")", ":", "\n", "          ", "cur_lstm_size", "=", "3", "*", "(", "2", "**", "list_lstm_ind", ")", "\n", "for", "lstm_ind", "in", "range", "(", "2", ")", ":", "\n", "            ", "for", "lstm_chan", "in", "range", "(", "2", ")", ":", "\n", "              ", "lstm_image", "[", "lstm_ind", "*", "(", "cur_lstm_size", "+", "3", ")", ":", "lstm_ind", "*", "(", "cur_lstm_size", "+", "3", ")", "+", "cur_lstm_size", ",", "start_lstm_pos", "+", "lstm_chan", "*", "(", "cur_lstm_size", "+", "5", ")", ":", "start_lstm_pos", "+", "lstm_chan", "*", "(", "cur_lstm_size", "+", "5", ")", "+", "cur_lstm_size", "]", "=", "lstm_state_vis", "[", "list_lstm_ind", "]", "[", "lstm_ind", "]", "[", "ind_vis_env", ",", ":", ",", ":", ",", "lstm_chan", "]", "\n", "", "", "start_lstm_pos", "+=", "(", "cur_lstm_size", "*", "2", "+", "10", ")", "\n", "\n", "\n", "", "lstm_image", "=", "(", "lstm_image", "+", "1", ")", "/", "2.0", "\n", "lstm_img_scaled", "=", "np", ".", "kron", "(", "lstm_image", ",", "np", ".", "ones", "(", "(", "scale_factor", ",", "scale_factor", ")", ")", ")", "\n", "lstm_img_scaled", "=", "(", "lstm_img_scaled", "*", "255", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "for", "chan_ind", "in", "range", "(", "3", ")", ":", "\n", "          ", "map_img_vis", "[", "-", "lstm_img_scaled", ".", "shape", "[", "0", "]", ":", ",", ":", ",", "chan_ind", "]", "=", "lstm_img_scaled", "\n", "\n", "", "pred_map_scaled", "=", "np", ".", "kron", "(", "pred_map", "*", "1.0", "/", "np", ".", "amax", "(", "pred_map", ")", ",", "np", ".", "ones", "(", "(", "scale_factor", ",", "scale_factor", ")", ")", ")", "\n", "pred_map_scaled", "=", "(", "pred_map_scaled", "*", "255", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "for", "chan_ind", "in", "range", "(", "3", ")", ":", "\n", "          ", "map_img_vis", "[", ":", "MAP_SIZE_MEM", "*", "10", ",", "(", "MAP_SIZE", "+", "5", "+", "INPUT_SIZE", "+", "5", "+", "MAP_SIZE", "*", "2", "+", "5", ")", "*", "10", ":", "(", "MAP_SIZE", "+", "5", "+", "INPUT_SIZE", "+", "5", "+", "MAP_SIZE", "*", "2", "+", "5", "+", "MAP_SIZE_MEM", ")", "*", "10", ",", "chan_ind", "]", "=", "pred_map_scaled", "\n", "\n", "", "pred_argmax_scaled", "=", "np", ".", "kron", "(", "pred_map_argmax", ".", "astype", "(", "np", ".", "int32", ")", ",", "np", ".", "ones", "(", "(", "scale_factor", ",", "scale_factor", ")", ")", ")", "\n", "pred_argmax_scaled", "=", "(", "pred_argmax_scaled", "*", "255", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "for", "chan_ind", "in", "range", "(", "3", ")", ":", "\n", "          ", "map_img_vis", "[", ":", "MAP_SIZE_MEM", "*", "10", ",", "(", "MAP_SIZE", "+", "5", "+", "INPUT_SIZE", "+", "5", "+", "MAP_SIZE", "*", "2", "+", "5", "+", "MAP_SIZE_MEM", "+", "5", ")", "*", "10", ":", "(", "MAP_SIZE", "+", "5", "+", "INPUT_SIZE", "+", "5", "+", "MAP_SIZE", "*", "2", "+", "5", "+", "MAP_SIZE_MEM", "+", "5", "+", "MAP_SIZE_MEM", ")", "*", "10", ",", "chan_ind", "]", "=", "pred_argmax_scaled", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier.__init__": [[9, 32], ["None"], "methods", ["None"], ["  ", "def", "__init__", "(", "self", ",", "\n", "learning_rate", ",", "\n", "decay", "=", "0.9", ",", "\n", "momentum", "=", "0.0", ",", "\n", "epsilon", "=", "1e-10", ",", "\n", "clip_norm", "=", "40.0", ",", "\n", "device", "=", "\"/cpu:0\"", ",", "\n", "name", "=", "\"RMSPropApplier\"", ")", ":", "\n", "\n", "    ", "self", ".", "_name", "=", "name", "\n", "self", ".", "_learning_rate", "=", "learning_rate", "\n", "self", ".", "_decay", "=", "decay", "\n", "self", ".", "_momentum", "=", "momentum", "\n", "self", ".", "_epsilon", "=", "epsilon", "\n", "self", ".", "_clip_norm", "=", "clip_norm", "\n", "self", ".", "_device", "=", "device", "\n", "\n", "# Tensors for learning rate and momentum.  Created in _prepare.", "\n", "self", ".", "_learning_rate_tensor", "=", "None", "\n", "self", ".", "_decay_tensor", "=", "None", "\n", "self", ".", "_momentum_tensor", "=", "None", "\n", "self", ".", "_epsilon_tensor", "=", "None", "\n", "\n", "self", ".", "_slots", "=", "{", "}", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._create_slots": [[33, 38], ["tensorflow.constant", "rmsprop_applier.RMSPropApplier._get_or_make_slot", "rmsprop_applier.RMSPropApplier._zeros_slot", "v.get_shape"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._get_or_make_slot", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._zeros_slot"], ["\n", "", "def", "_create_slots", "(", "self", ",", "var_list", ")", ":", "\n", "    ", "for", "v", "in", "var_list", ":", "\n", "# 'val' is Variable's intial value tensor.", "\n", "      ", "val", "=", "tf", ".", "constant", "(", "1.0", ",", "dtype", "=", "v", ".", "dtype", ",", "shape", "=", "v", ".", "get_shape", "(", ")", ")", "\n", "self", ".", "_get_or_make_slot", "(", "v", ",", "val", ",", "\"rms\"", ",", "self", ".", "_name", ")", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._prepare": [[39, 47], ["tensorflow.convert_to_tensor", "tensorflow.convert_to_tensor", "tensorflow.convert_to_tensor", "tensorflow.convert_to_tensor"], "methods", ["None"], ["self", ".", "_zeros_slot", "(", "v", ",", "\"momentum\"", ",", "self", ".", "_name", ")", "\n", "\n", "", "", "def", "_prepare", "(", "self", ")", ":", "\n", "      ", "self", ".", "_learning_rate_tensor", "=", "tf", ".", "convert_to_tensor", "(", "self", ".", "_learning_rate", ",", "\n", "name", "=", "\"learning_rate\"", ")", "\n", "self", ".", "_decay_tensor", "=", "tf", ".", "convert_to_tensor", "(", "self", ".", "_decay", ",", "name", "=", "\"decay\"", ")", "\n", "self", ".", "_momentum_tensor", "=", "tf", ".", "convert_to_tensor", "(", "self", ".", "_momentum", ",", "\n", "name", "=", "\"momentum\"", ")", "\n", "self", ".", "_epsilon_tensor", "=", "tf", ".", "convert_to_tensor", "(", "self", ".", "_epsilon", ",", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._slot_dict": [[48, 54], ["rmsprop_applier.RMSPropApplier._slots.get"], "methods", ["None"], ["name", "=", "\"epsilon\"", ")", "\n", "\n", "", "def", "_slot_dict", "(", "self", ",", "slot_name", ")", ":", "\n", "    ", "named_slots", "=", "self", ".", "_slots", ".", "get", "(", "slot_name", ",", "None", ")", "\n", "if", "named_slots", "is", "None", ":", "\n", "      ", "named_slots", "=", "{", "}", "\n", "self", ".", "_slots", "[", "slot_name", "]", "=", "named_slots", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._get_or_make_slot": [[55, 60], ["rmsprop_applier.RMSPropApplier._slot_dict", "tensorflow.python.training.slot_creator.create_slot"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._slot_dict"], ["", "return", "named_slots", "\n", "\n", "", "def", "_get_or_make_slot", "(", "self", ",", "var", ",", "val", ",", "slot_name", ",", "op_name", ")", ":", "\n", "    ", "named_slots", "=", "self", ".", "_slot_dict", "(", "slot_name", ")", "\n", "if", "var", "not", "in", "named_slots", ":", "\n", "      ", "named_slots", "[", "var", "]", "=", "slot_creator", ".", "create_slot", "(", "var", ",", "val", ",", "op_name", ")", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier.get_slot": [[61, 66], ["rmsprop_applier.RMSPropApplier._slots.get", "rmsprop_applier.RMSPropApplier.get"], "methods", ["None"], ["", "return", "named_slots", "[", "var", "]", "\n", "\n", "", "def", "get_slot", "(", "self", ",", "var", ",", "name", ")", ":", "\n", "    ", "named_slots", "=", "self", ".", "_slots", ".", "get", "(", "name", ",", "None", ")", "\n", "if", "not", "named_slots", ":", "\n", "      ", "return", "None", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._zeros_slot": [[67, 72], ["rmsprop_applier.RMSPropApplier._slot_dict", "tensorflow.python.training.slot_creator.create_zeros_slot"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._slot_dict"], ["", "return", "named_slots", ".", "get", "(", "var", ",", "None", ")", "\n", "\n", "", "def", "_zeros_slot", "(", "self", ",", "var", ",", "slot_name", ",", "op_name", ")", ":", "\n", "    ", "named_slots", "=", "self", ".", "_slot_dict", "(", "slot_name", ")", "\n", "if", "var", "not", "in", "named_slots", ":", "\n", "      ", "named_slots", "[", "var", "]", "=", "slot_creator", ".", "create_zeros_slot", "(", "var", ",", "op_name", ")", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._apply_dense": [[73, 84], ["rmsprop_applier.RMSPropApplier.get_slot", "rmsprop_applier.RMSPropApplier.get_slot", "tensorflow.python.training.training_ops.apply_rms_prop"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier.get_slot", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier.get_slot"], ["", "return", "named_slots", "[", "var", "]", "\n", "\n", "# TODO: in RMSProp native code, memcpy() (for CPU) and", "\n", "# cudaMemcpyAsync() (for GPU) are used when updating values,", "\n", "# and values might tend to be overwritten with results from other threads.", "\n", "# (Need to check the learning performance with replacing it)  ", "\n", "", "def", "_apply_dense", "(", "self", ",", "grad", ",", "var", ")", ":", "\n", "    ", "rms", "=", "self", ".", "get_slot", "(", "var", ",", "\"rms\"", ")", "\n", "mom", "=", "self", ".", "get_slot", "(", "var", ",", "\"momentum\"", ")", "\n", "return", "training_ops", ".", "apply_rms_prop", "(", "\n", "var", ",", "rms", ",", "mom", ",", "\n", "self", ".", "_learning_rate_tensor", ",", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier.apply_gradients": [[85, 98], ["tensorflow.device", "tensorflow.control_dependencies", "rmsprop_applier.RMSPropApplier._create_slots", "tensorflow.name_scope", "rmsprop_applier.RMSPropApplier._prepare", "zip", "tensorflow.group", "tensorflow.name_scope", "tensorflow.device", "update_ops.append", "rmsprop_applier.RMSPropApplier._apply_dense"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._create_slots", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._prepare", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.rmsprop_applier.RMSPropApplier._apply_dense"], ["self", ".", "_decay_tensor", ",", "\n", "self", ".", "_momentum_tensor", ",", "\n", "self", ".", "_epsilon_tensor", ",", "\n", "grad", ",", "\n", "use_locking", "=", "False", ")", ".", "op", "\n", "\n", "# Apply accumulated gradients to var.", "\n", "", "def", "apply_gradients", "(", "self", ",", "var_list", ",", "accum_grad_list", ",", "name", "=", "None", ")", ":", "\n", "    ", "update_ops", "=", "[", "]", "\n", "\n", "with", "tf", ".", "device", "(", "self", ".", "_device", ")", ":", "\n", "      ", "with", "tf", ".", "control_dependencies", "(", "None", ")", ":", "\n", "        ", "self", ".", "_create_slots", "(", "var_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model.__init__": [[11, 16], ["None"], "methods", ["None"], ["class", "Model", "(", "object", ")", ":", "\n", "  ", "def", "__init__", "(", "self", ",", "\n", "thread_index", ",", "\n", "device", "=", "\"/cpu:0\"", ")", ":", "\n", "    ", "self", ".", "_thread_index", "=", "thread_index", "\n", "self", ".", "_device", "=", "device", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model.prepare_loss": [[17, 21], ["tensorflow.device", "tensorflow.placeholder", "tensorflow.reduce_sum", "tensorflow.nn.sparse_softmax_cross_entropy_with_logits"], "methods", ["None"], ["\n", "", "def", "prepare_loss", "(", "self", ")", ":", "\n", "    ", "with", "tf", ".", "device", "(", "self", ".", "_device", ")", ":", "\n", "\n", "      ", "self", ".", "locpred_gt", "=", "tf", ".", "placeholder", "(", "\"float\"", ",", "[", "None", ",", "48", "*", "48", "]", ")", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model.get_vars": [[22, 24], ["NotImplementedError"], "methods", ["None"], ["\n", "self", ".", "locpred_loss", "=", "tf", ".", "reduce_sum", "(", "tf", ".", "nn", ".", "sigmoid_cross_entropy_with_logits", "(", "labels", "=", "self", ".", "locpred_gt", ",", "logits", "=", "self", ".", "multigrid_output2", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model._fc_variable": [[25, 33], ["tensorflow.Variable", "tensorflow.Variable", "numpy.sqrt", "tensorflow.random_uniform", "tensorflow.random_uniform"], "methods", ["None"], ["self", ".", "loss", "=", "self", ".", "locpred_loss", "\n", "\n", "", "", "def", "_fc_variable", "(", "self", ",", "weight_shape", ")", ":", "\n", "    ", "input_channels", "=", "weight_shape", "[", "0", "]", "\n", "output_channels", "=", "weight_shape", "[", "1", "]", "\n", "d", "=", "1.0", "/", "np", ".", "sqrt", "(", "input_channels", ")", "\n", "bias_shape", "=", "[", "output_channels", "]", "\n", "weight", "=", "tf", ".", "Variable", "(", "tf", ".", "random_uniform", "(", "weight_shape", ",", "minval", "=", "-", "d", ",", "maxval", "=", "d", ")", ")", "\n", "bias", "=", "tf", ".", "Variable", "(", "tf", ".", "random_uniform", "(", "bias_shape", ",", "minval", "=", "-", "d", ",", "maxval", "=", "d", ")", ")", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model._conv_variable": [[34, 44], ["tensorflow.Variable", "tensorflow.Variable", "numpy.sqrt", "tensorflow.random_uniform", "tensorflow.random_uniform"], "methods", ["None"], ["return", "weight", ",", "bias", "\n", "\n", "", "def", "_conv_variable", "(", "self", ",", "weight_shape", ")", ":", "\n", "    ", "w", "=", "weight_shape", "[", "0", "]", "\n", "h", "=", "weight_shape", "[", "1", "]", "\n", "input_channels", "=", "weight_shape", "[", "2", "]", "\n", "output_channels", "=", "weight_shape", "[", "3", "]", "\n", "d", "=", "1.0", "/", "np", ".", "sqrt", "(", "input_channels", "*", "w", "*", "h", ")", "\n", "bias_shape", "=", "[", "output_channels", "]", "\n", "weight", "=", "tf", ".", "Variable", "(", "tf", ".", "random_uniform", "(", "weight_shape", ",", "minval", "=", "-", "d", ",", "maxval", "=", "d", ")", ")", "\n", "bias", "=", "tf", ".", "Variable", "(", "tf", ".", "random_uniform", "(", "bias_shape", ",", "minval", "=", "-", "d", ",", "maxval", "=", "d", ")", ")", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model._conv2d": [[45, 47], ["tensorflow.nn.conv2d"], "methods", ["None"], ["return", "weight", ",", "bias", "\n", "\n", "", "def", "_conv2d", "(", "self", ",", "x", ",", "W", ",", "stride", ")", ":", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.__init__": [[49, 157], ["model.Model.__init__", "str", "tensorflow.device", "tensorflow.variable_scope", "tensorflow.trainable_variables", "model.MNISTRecallModel._fc_variable", "tensorflow.placeholder", "tensorflow.placeholder", "tensorflow.placeholder", "tensorflow.image.resize_images", "tensorflow.image.resize_images", "tensorflow.image.resize_images", "model.MNISTRecallModel.build_next_layer_arbit", "model.MNISTRecallModel.build_next_layer_arbit", "model.MNISTRecallModel.build_next_layer_arbit", "model.MNISTRecallModel.create_residual_conn_extra", "model.MNISTRecallModel.create_residual_conn_extra", "model.MNISTRecallModel.create_residual_conn_extra", "model.MNISTRecallModel.build_next_layer_arbit", "model.MNISTRecallModel.build_next_layer_arbit", "model.MNISTRecallModel.create_residual_conn_extra", "model.MNISTRecallModel.create_residual_conn_extra", "model.MNISTRecallModel.create_residual_conn_extra", "tensorflow.image.resize_images", "tensorflow.image.resize_images", "tensorflow.image.resize_images", "model.MNISTRecallModel.build_next_layer_convo_arbit", "range", "model.MNISTRecallModel.build_next_layer_convo_arbit", "range", "model.MNISTRecallModel.build_next_layer_convo_arbit", "model.MNISTRecallModel.create_residual_conn", "model.MNISTRecallModel.create_residual_conn", "model.MNISTRecallModel.create_residual_conn", "range", "model.MNISTRecallModel.build_next_layer_convo_arbit", "range", "model.MNISTRecallModel.build_next_layer_convo_arbit", "model.MNISTRecallModel.create_residual_conn", "model.MNISTRecallModel.create_residual_conn", "model.MNISTRecallModel.create_residual_conn", "range", "model.MNISTRecallModel.build_next_layer_convo", "model.MNISTRecallModel.build_next_layer_convo", "model.MNISTRecallModel.build_next_layer_convo", "model.MNISTRecallModel.build_next_layer_convo", "model.MNISTRecallModel.create_residual_conn", "model.MNISTRecallModel.create_residual_conn", "model.MNISTRecallModel.build_next_layer_convo", "tensorflow.reshape", "tensorflow.reshape", "tensorflow.nn.softmax", "scope.reuse_variables", "sorted", "tensorflow.concat", "tensorflow.concat", "tensorflow.concat", "tensorflow.concat", "tensorflow.concat", "tensorflow.matmul", "list", "set", "set", "tensorflow.trainable_variables"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.__init__", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model._fc_variable", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_arbit", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_arbit", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_arbit", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn_extra", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn_extra", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn_extra", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_arbit", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_arbit", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn_extra", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn_extra", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn_extra", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo_arbit", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo_arbit", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo_arbit", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo_arbit", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo_arbit", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo"], ["\n", "\n", "", "", "class", "LocalizationModel", "(", "Model", ")", ":", "\n", "  ", "def", "__init__", "(", "self", ",", "\n", "thread_index", ",", "\n", "device", "=", "\"/cpu:0\"", ")", ":", "\n", "    ", "Model", ".", "__init__", "(", "self", ",", "thread_index", ",", "device", ")", "\n", "\n", "map_size", "=", "INPUT_SIZE", "\n", "flattened_len", "=", "3", "*", "3", "*", "16", "\n", "\n", "scope_name", "=", "\"net_\"", "+", "str", "(", "self", ".", "_thread_index", ")", "\n", "with", "tf", ".", "device", "(", "self", ".", "_device", ")", ",", "tf", ".", "variable_scope", "(", "scope_name", ")", "as", "scope", ":", "\n", "      ", "variables_before", "=", "tf", ".", "trainable_variables", "(", ")", "\n", "self", ".", "ma", "=", "tf", ".", "placeholder", "(", "\"float\"", ",", "[", "None", ",", "map_size", ",", "map_size", ",", "4", "]", ")", "\n", "self", ".", "ma2", "=", "tf", ".", "placeholder", "(", "\"float\"", ",", "[", "None", ",", "map_size", ",", "map_size", ",", "4", "]", ")", "\n", "self", ".", "step_size", "=", "tf", ".", "placeholder", "(", "tf", ".", "float32", ",", "[", "1", "]", ")", "\n", "self", ".", "lstm_state_list", "=", "[", "]", "\n", "self", ".", "lstm_state_ph_list", "=", "[", "]", "\n", "self", ".", "grid_dim_list", "=", "[", "]", "\n", "output_dims", ",", "self", ".", "output_grids1", ",", "lstm_states", ",", "lstm_states_ph", "=", "self", ".", "build_next_layer", "(", "[", "self", ".", "ma", "]", ",", "2", ",", "4", ",", "1", ")", "\n", "self", ".", "lstm_state_list", "=", "self", ".", "lstm_state_list", "+", "lstm_states", "\n", "self", ".", "lstm_state_ph_list", "=", "self", ".", "lstm_state_ph_list", "+", "lstm_states_ph", "\n", "self", ".", "grid_dim_list", "=", "self", ".", "grid_dim_list", "+", "output_dims", "\n", "\n", "output_dims", ",", "self", ".", "output_grids2", ",", "lstm_states", ",", "lstm_states_ph", "=", "self", ".", "build_next_layer", "(", "self", ".", "output_grids1", ",", "2", ",", "4", ",", "2", ")", "\n", "self", ".", "lstm_state_list", "=", "self", ".", "lstm_state_list", "+", "lstm_states", "\n", "self", ".", "lstm_state_ph_list", "=", "self", ".", "lstm_state_ph_list", "+", "lstm_states_ph", "\n", "self", ".", "grid_dim_list", "=", "self", ".", "grid_dim_list", "+", "output_dims", "\n", "\n", "output_dims", ",", "self", ".", "output_grids3", ",", "lstm_states", ",", "lstm_states_ph", "=", "self", ".", "build_next_layer", "(", "self", ".", "output_grids2", ",", "3", ",", "8", ",", "3", ")", "\n", "self", ".", "lstm_state_list", "=", "self", ".", "lstm_state_list", "+", "lstm_states", "\n", "self", ".", "lstm_state_ph_list", "=", "self", ".", "lstm_state_ph_list", "+", "lstm_states_ph", "\n", "self", ".", "grid_dim_list", "=", "self", ".", "grid_dim_list", "+", "output_dims", "\n", "\n", "\n", "self", ".", "output_grids3", "[", "0", "]", "=", "self", ".", "create_residual_conn_extra", "(", "self", ".", "output_grids1", "[", "0", "]", ",", "self", ".", "output_grids3", "[", "0", "]", ",", "4", ",", "8", ")", "\n", "self", ".", "output_grids3", "[", "1", "]", "=", "self", ".", "create_residual_conn_extra", "(", "self", ".", "output_grids1", "[", "1", "]", ",", "self", ".", "output_grids3", "[", "1", "]", ",", "4", ",", "8", ")", "\n", "\n", "output_dims", ",", "self", ".", "output_grids4", ",", "lstm_states", ",", "lstm_states_ph", "=", "self", ".", "build_next_layer", "(", "self", ".", "output_grids3", ",", "3", ",", "8", ",", "4", ")", "\n", "self", ".", "lstm_state_list", "=", "self", ".", "lstm_state_list", "+", "lstm_states", "\n", "self", ".", "lstm_state_ph_list", "=", "self", ".", "lstm_state_ph_list", "+", "lstm_states_ph", "\n", "self", ".", "grid_dim_list", "=", "self", ".", "grid_dim_list", "+", "output_dims", "\n", "\n", "output_dims", ",", "self", ".", "output_grids5", ",", "lstm_states", ",", "lstm_states_ph", "=", "self", ".", "build_next_layer", "(", "self", ".", "output_grids4", ",", "4", ",", "16", ",", "5", ")", "\n", "self", ".", "lstm_state_list", "=", "self", ".", "lstm_state_list", "+", "lstm_states", "\n", "self", ".", "lstm_state_ph_list", "=", "self", ".", "lstm_state_ph_list", "+", "lstm_states_ph", "\n", "self", ".", "grid_dim_list", "=", "self", ".", "grid_dim_list", "+", "output_dims", "\n", "\n", "self", ".", "output_grids5", "[", "0", "]", "=", "self", ".", "create_residual_conn_extra", "(", "self", ".", "output_grids3", "[", "0", "]", ",", "self", ".", "output_grids5", "[", "0", "]", ",", "8", ",", "16", ")", "\n", "self", ".", "output_grids5", "[", "1", "]", "=", "self", ".", "create_residual_conn_extra", "(", "self", ".", "output_grids3", "[", "1", "]", ",", "self", ".", "output_grids5", "[", "1", "]", ",", "8", ",", "16", ")", "\n", "self", ".", "output_grids5", "[", "2", "]", "=", "self", ".", "create_residual_conn_extra", "(", "self", ".", "output_grids3", "[", "2", "]", ",", "self", ".", "output_grids5", "[", "2", "]", ",", "8", ",", "16", ")", "\n", "\n", "output_dims", ",", "self", ".", "output_grids6", ",", "lstm_states", ",", "lstm_states_ph", "=", "self", ".", "build_next_layer", "(", "self", ".", "output_grids5", ",", "4", ",", "16", ",", "6", ")", "\n", "self", ".", "lstm_state_list", "=", "self", ".", "lstm_state_list", "+", "lstm_states", "\n", "self", ".", "lstm_state_ph_list", "=", "self", ".", "lstm_state_ph_list", "+", "lstm_states_ph", "\n", "self", ".", "grid_dim_list", "=", "self", ".", "grid_dim_list", "+", "output_dims", "\n", "\n", "\n", "output_dims", ",", "self", ".", "output_grids7", ",", "lstm_states", ",", "lstm_states_ph", "=", "self", ".", "build_next_layer", "(", "self", ".", "output_grids6", ",", "5", ",", "16", ",", "7", ")", "\n", "self", ".", "lstm_state_list", "=", "self", ".", "lstm_state_list", "+", "lstm_states", "\n", "self", ".", "lstm_state_ph_list", "=", "self", ".", "lstm_state_ph_list", "+", "lstm_states_ph", "\n", "self", ".", "grid_dim_list", "=", "self", ".", "grid_dim_list", "+", "output_dims", "\n", "\n", "self", ".", "output_grids7", "[", "0", "]", "=", "self", ".", "create_residual_conn", "(", "self", ".", "output_grids5", "[", "0", "]", ",", "self", ".", "output_grids7", "[", "0", "]", ")", "\n", "self", ".", "output_grids7", "[", "1", "]", "=", "self", ".", "create_residual_conn", "(", "self", ".", "output_grids5", "[", "1", "]", ",", "self", ".", "output_grids7", "[", "1", "]", ")", "\n", "self", ".", "output_grids7", "[", "2", "]", "=", "self", ".", "create_residual_conn", "(", "self", ".", "output_grids5", "[", "2", "]", ",", "self", ".", "output_grids7", "[", "2", "]", ")", "\n", "self", ".", "output_grids7", "[", "3", "]", "=", "self", ".", "create_residual_conn", "(", "self", ".", "output_grids5", "[", "3", "]", ",", "self", ".", "output_grids7", "[", "3", "]", ")", "\n", "\n", "output_dims", ",", "output_grids1_2", "=", "self", ".", "build_next_layer_convo", "(", "[", "self", ".", "ma2", "]", ",", "2", ",", "4", ",", "4", ",", "1", ")", "\n", "for", "scale_ind", "in", "range", "(", "2", ")", ":", "\n", "        ", "output_grids1_2", "[", "scale_ind", "]", "=", "tf", ".", "concat", "(", "[", "output_grids1_2", "[", "scale_ind", "]", ",", "self", ".", "output_grids1", "[", "scale_ind", "]", "]", ",", "-", "1", ")", "\n", "\n", "", "output_dims", ",", "output_grids2_2", "=", "self", ".", "build_next_layer_convo", "(", "output_grids1_2", ",", "2", ",", "8", ",", "4", ",", "2", ")", "\n", "for", "scale_ind", "in", "range", "(", "2", ")", ":", "\n", "        ", "output_grids2_2", "[", "scale_ind", "]", "=", "tf", ".", "concat", "(", "[", "output_grids2_2", "[", "scale_ind", "]", ",", "self", ".", "output_grids2", "[", "scale_ind", "]", "]", ",", "-", "1", ")", "\n", "\n", "", "output_dims", ",", "output_grids3_2", "=", "self", ".", "build_next_layer_convo", "(", "output_grids2_2", ",", "3", ",", "8", ",", "8", ",", "3", ")", "\n", "output_grids3_2", "[", "0", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids1_2", "[", "0", "]", ",", "output_grids3_2", "[", "0", "]", ")", "\n", "output_grids3_2", "[", "1", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids1_2", "[", "1", "]", ",", "output_grids3_2", "[", "1", "]", ")", "\n", "for", "scale_ind", "in", "range", "(", "3", ")", ":", "\n", "        ", "output_grids3_2", "[", "scale_ind", "]", "=", "tf", ".", "concat", "(", "[", "output_grids3_2", "[", "scale_ind", "]", ",", "self", ".", "output_grids3", "[", "scale_ind", "]", "]", ",", "-", "1", ")", "\n", "\n", "", "output_dims", ",", "output_grids4_2", "=", "self", ".", "build_next_layer_convo", "(", "output_grids3_2", ",", "3", ",", "16", ",", "8", ",", "4", ")", "\n", "for", "scale_ind", "in", "range", "(", "3", ")", ":", "\n", "        ", "output_grids4_2", "[", "scale_ind", "]", "=", "tf", ".", "concat", "(", "[", "output_grids4_2", "[", "scale_ind", "]", ",", "self", ".", "output_grids4", "[", "scale_ind", "]", "]", ",", "-", "1", ")", "\n", "\n", "", "output_dims", ",", "output_grids5_2", "=", "self", ".", "build_next_layer_convo", "(", "output_grids4_2", ",", "4", ",", "16", ",", "16", ",", "5", ")", "\n", "output_grids5_2", "[", "0", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids3_2", "[", "0", "]", ",", "output_grids5_2", "[", "0", "]", ")", "\n", "output_grids5_2", "[", "1", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids3_2", "[", "1", "]", ",", "output_grids5_2", "[", "1", "]", ")", "\n", "output_grids5_2", "[", "2", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids3_2", "[", "2", "]", ",", "output_grids5_2", "[", "2", "]", ")", "\n", "for", "scale_ind", "in", "range", "(", "4", ")", ":", "\n", "        ", "output_grids5_2", "[", "scale_ind", "]", "=", "tf", ".", "concat", "(", "[", "output_grids5_2", "[", "scale_ind", "]", ",", "self", ".", "output_grids5", "[", "scale_ind", "]", "]", ",", "-", "1", ")", "\n", "\n", "", "output_dims", ",", "output_grids6_2", "=", "self", ".", "build_next_layer_convo", "(", "output_grids5_2", ",", "4", ",", "32", ",", "16", ",", "6", ")", "\n", "for", "scale_ind", "in", "range", "(", "4", ")", ":", "\n", "        ", "output_grids6_2", "[", "scale_ind", "]", "=", "tf", ".", "concat", "(", "[", "output_grids6_2", "[", "scale_ind", "]", ",", "self", ".", "output_grids6", "[", "scale_ind", "]", "]", ",", "-", "1", ")", "\n", "\n", "", "output_dims", ",", "output_grids7_2", "=", "self", ".", "build_next_layer_convo", "(", "output_grids6_2", ",", "5", ",", "32", ",", "16", ",", "7", ")", "\n", "for", "scale_ind", "in", "range", "(", "5", ")", ":", "\n", "        ", "output_grids7_2", "[", "scale_ind", "]", "=", "tf", ".", "concat", "(", "[", "output_grids7_2", "[", "scale_ind", "]", ",", "self", ".", "output_grids7", "[", "scale_ind", "]", "]", ",", "-", "1", ")", "\n", "\n", "\n", "", "output_dims", ",", "output_grids8_2", "=", "self", ".", "build_next_layer_convo_reverse", "(", "output_grids7_2", ",", "4", ",", "32", ",", "16", ",", "4", ",", "8", ")", "\n", "output_dims", ",", "output_grids9_2", "=", "self", ".", "build_next_layer_convo_reverse", "(", "output_grids8_2", ",", "4", ",", "16", ",", "16", ",", "4", ",", "9", ")", "\n", "output_dims", ",", "output_grids10_2", "=", "self", ".", "build_next_layer_convo_reverse", "(", "output_grids9_2", ",", "3", ",", "16", ",", "16", ",", "4", ",", "10", ")", "\n", "\n", "output_dims", ",", "output_grids11_2", "=", "self", ".", "build_next_layer_convo_reverse", "(", "output_grids10_2", ",", "3", ",", "16", ",", "16", ",", "4", ",", "11", ")", "\n", "output_grids11_2", "[", "-", "1", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids9_2", "[", "-", "1", "]", ",", "output_grids11_2", "[", "-", "1", "]", ")", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn": [[158, 160], ["None"], "methods", ["None"], ["output_grids11_2", "[", "-", "2", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids9_2", "[", "-", "2", "]", ",", "output_grids11_2", "[", "-", "2", "]", ")", "\n", "output_grids11_2", "[", "-", "3", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids9_2", "[", "-", "3", "]", ",", "output_grids11_2", "[", "-", "3", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.create_residual_conn_extra": [[160, 163], ["tensorflow.pad", "tensorflow.constant"], "methods", ["None"], ["\n", "\n", "output_dims", ",", "output_grids12_2", "=", "self", ".", "build_next_layer_convo_reverse", "(", "output_grids11_2", ",", "2", ",", "16", ",", "16", ",", "4", ",", "12", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo": [[164, 205], ["len", "range", "output_dims.append", "model.MNISTRecallModel._conv_variable", "tensorflow.nn.relu", "tensorflow.contrib.layers.batch_norm", "output_grids.append", "tensorflow.image.resize_images", "tensorflow.layers.max_pooling2d", "str", "tensorflow.concat", "tensorflow.concat", "model.MNISTRecallModel._conv2d", "str"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model._conv_variable", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model._conv2d"], ["output_dims", ",", "output_grids13_2", "=", "self", ".", "build_next_layer_convo_reverse", "(", "output_grids12_2", ",", "2", ",", "16", ",", "16", ",", "4", ",", "13", ")", "\n", "\n", "output_grids13_2", "[", "-", "1", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids11_2", "[", "-", "1", "]", ",", "output_grids13_2", "[", "-", "1", "]", ")", "\n", "output_grids13_2", "[", "-", "2", "]", "=", "self", ".", "create_residual_conn", "(", "output_grids11_2", "[", "-", "2", "]", ",", "output_grids13_2", "[", "-", "2", "]", ")", "\n", "\n", "output_dims", ",", "output_grids14_2", "=", "self", ".", "build_next_layer_convo_reverse_without_activation", "(", "output_grids13_2", ",", "1", ",", "16", ",", "1", ",", "4", ",", "14", ")", "\n", "\n", "self", ".", "multigrid_output2", "=", "tf", ".", "reshape", "(", "output_grids14_2", "[", "0", "]", ",", "[", "-", "1", ",", "48", "*", "48", "]", ")", "\n", "self", ".", "locpred", "=", "tf", ".", "sigmoid", "(", "self", ".", "multigrid_output2", ")", "\n", "\n", "scope", ".", "reuse_variables", "(", ")", "\n", "self", ".", "variables", "=", "sorted", "(", "list", "(", "set", "(", "tf", ".", "trainable_variables", "(", ")", ")", "-", "set", "(", "variables_before", ")", ")", ",", "key", "=", "lambda", "x", ":", "x", ".", "name", ")", "\n", "\n", "", "", "def", "create_residual_conn", "(", "self", ",", "first_elem", ",", "second_elem", ")", ":", "\n", "    ", "return", "first_elem", "+", "second_elem", "\n", "", "def", "create_residual_conn_extra", "(", "self", ",", "first_elem", ",", "second_elem", ",", "first_dim", ",", "second_dim", ")", ":", "\n", "    ", "first_elem_padded", "=", "tf", ".", "pad", "(", "first_elem", ",", "tf", ".", "constant", "(", "[", "[", "0", ",", "0", "]", ",", "[", "0", ",", "0", "]", ",", "[", "0", ",", "0", "]", ",", "[", "0", ",", "second_dim", "-", "first_dim", "]", "]", ")", ",", "\"CONSTANT\"", ")", "\n", "return", "first_elem_padded", "+", "second_elem", "\n", "\n", "", "def", "build_next_layer_convo", "(", "self", ",", "prev_grids", ",", "num_output_grids", ",", "input_feature_chan", ",", "output_feature_chan", ",", "lay_ind", ")", ":", "\n", "    ", "num_input_grids", "=", "len", "(", "prev_grids", ")", "\n", "output_grids", "=", "[", "]", "\n", "output_dims", "=", "[", "]", "\n", "\n", "for", "i", "in", "range", "(", "num_output_grids", ")", ":", "\n", "      ", "sum_input_feature_chan", "=", "0", "\n", "output_dim", "=", "(", "3", "*", "(", "2", "**", "i", ")", ",", "3", "*", "(", "2", "**", "i", ")", ",", "output_feature_chan", ")", "\n", "output_dims", ".", "append", "(", "output_dim", ")", "\n", "concat_grid", "=", "None", "\n", "if", "(", "i", "-", "1", ")", ">=", "0", "and", "(", "i", "-", "1", ")", "<", "num_input_grids", ":", "\n", "        ", "prev_spatial_dim", "=", "(", "prev_grids", "[", "i", "-", "1", "]", ".", "shape", "[", "1", "]", ",", "prev_grids", "[", "i", "-", "1", "]", ".", "shape", "[", "2", "]", ")", "\n", "next_spatial_dim", "=", "(", "prev_spatial_dim", "[", "0", "]", "*", "2", ",", "prev_spatial_dim", "[", "1", "]", "*", "2", ")", "\n", "prev_up", "=", "tf", ".", "image", ".", "resize_images", "(", "prev_grids", "[", "i", "-", "1", "]", ",", "next_spatial_dim", ",", "tf", ".", "image", ".", "ResizeMethod", ".", "NEAREST_NEIGHBOR", ")", "\n", "concat_grid", "=", "prev_up", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "if", "i", ">=", "0", "and", "i", "<", "num_input_grids", ":", "\n", "        ", "if", "concat_grid", "==", "None", ":", "\n", "          ", "concat_grid", "=", "prev_grids", "[", "i", "]", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "else", ":", "\n", "          ", "concat_grid", "=", "tf", ".", "concat", "(", "[", "concat_grid", ",", "prev_grids", "[", "i", "]", "]", ",", "3", ")", "\n", "sum_input_feature_chan", "+=", "input_feature_chan", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_arbit": [[206, 258], ["len", "range", "output_dims.append", "tensorflow.reshape", "tensorflow.contrib.rnn.Conv2DLSTMCell", "tensorflow.placeholder", "tensorflow.placeholder", "tensorflow.contrib.rnn.LSTMStateTuple", "output_grids.append", "lstm_states.append", "lstm_states_ph.append", "tensorflow.image.resize_images", "tensorflow.layers.max_pooling2d", "str", "tensorflow.variable_scope", "tensorflow.nn.dynamic_rnn", "tensorflow.reshape", "tensorflow.contrib.layers.batch_norm", "tensorflow.concat", "tensorflow.concat", "str", "tensorflow.fill"], "methods", ["None"], ["", "", "if", "i", "+", "1", ">=", "0", "and", "i", "+", "1", "<", "num_input_grids", ":", "\n", "        ", "prev_down", "=", "tf", ".", "layers", ".", "max_pooling2d", "(", "prev_grids", "[", "i", "+", "1", "]", ",", "[", "2", ",", "2", "]", ",", "2", ")", "\n", "if", "concat_grid", "==", "None", ":", "\n", "          ", "concat_grid", "=", "prev_down", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "else", ":", "\n", "          ", "concat_grid", "=", "tf", ".", "concat", "(", "[", "concat_grid", ",", "prev_down", "]", ",", "3", ")", "\n", "sum_input_feature_chan", "+=", "input_feature_chan", "\n", "", "", "W_conv1_m", ",", "b_conv1_m", "=", "self", ".", "_conv_variable", "(", "[", "3", ",", "3", ",", "sum_input_feature_chan", ",", "output_feature_chan", "]", ")", "\n", "output_grid", "=", "tf", ".", "nn", ".", "relu", "(", "self", ".", "_conv2d", "(", "concat_grid", ",", "W_conv1_m", ",", "1", ")", "+", "b_conv1_m", ")", "\n", "output_grids", ".", "append", "(", "output_grid", ")", "\n", "", "return", "output_dims", ",", "output_grids", "\n", "\n", "", "def", "build_next_layer_convo_reverse", "(", "self", ",", "prev_grids", ",", "num_output_grids", ",", "input_feature_chan", ",", "output_feature_chan", ",", "largest_scale", ",", "lay_ind", ")", ":", "\n", "    ", "num_input_grids", "=", "len", "(", "prev_grids", ")", "\n", "output_grids", "=", "[", "]", "\n", "output_dims", "=", "[", "]", "\n", "\n", "for", "i", "in", "range", "(", "num_output_grids", ")", ":", "\n", "      ", "j", "=", "(", "num_input_grids", "-", "num_output_grids", ")", "+", "i", "\n", "sum_input_feature_chan", "=", "0", "\n", "scale", "=", "largest_scale", "-", "num_output_grids", "+", "1", "+", "i", "\n", "output_dim", "=", "(", "3", "*", "(", "2", "**", "scale", ")", ",", "3", "*", "(", "2", "**", "scale", ")", ",", "output_feature_chan", ")", "\n", "output_dims", ".", "append", "(", "output_dim", ")", "\n", "concat_grid", "=", "None", "\n", "if", "(", "j", "-", "1", ")", ">=", "0", "and", "(", "j", "-", "1", ")", "<", "num_input_grids", ":", "\n", "        ", "prev_spatial_dim", "=", "(", "prev_grids", "[", "j", "-", "1", "]", ".", "shape", "[", "1", "]", ",", "prev_grids", "[", "j", "-", "1", "]", ".", "shape", "[", "2", "]", ")", "\n", "next_spatial_dim", "=", "(", "prev_spatial_dim", "[", "0", "]", "*", "2", ",", "prev_spatial_dim", "[", "1", "]", "*", "2", ")", "\n", "prev_up", "=", "tf", ".", "image", ".", "resize_images", "(", "prev_grids", "[", "j", "-", "1", "]", ",", "next_spatial_dim", ",", "tf", ".", "image", ".", "ResizeMethod", ".", "NEAREST_NEIGHBOR", ")", "\n", "concat_grid", "=", "prev_up", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "if", "j", ">=", "0", "and", "j", "<", "num_input_grids", ":", "\n", "        ", "if", "concat_grid", "==", "None", ":", "\n", "          ", "concat_grid", "=", "prev_grids", "[", "j", "]", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "else", ":", "\n", "          ", "concat_grid", "=", "tf", ".", "concat", "(", "[", "concat_grid", ",", "prev_grids", "[", "j", "]", "]", ",", "3", ")", "\n", "sum_input_feature_chan", "+=", "input_feature_chan", "\n", "", "", "if", "j", "+", "1", ">=", "0", "and", "j", "+", "1", "<", "num_input_grids", ":", "\n", "        ", "prev_down", "=", "tf", ".", "layers", ".", "max_pooling2d", "(", "prev_grids", "[", "j", "+", "1", "]", ",", "[", "2", ",", "2", "]", ",", "2", ")", "\n", "if", "concat_grid", "==", "None", ":", "\n", "          ", "concat_grid", "=", "prev_down", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "else", ":", "\n", "          ", "concat_grid", "=", "tf", ".", "concat", "(", "[", "concat_grid", ",", "prev_down", "]", ",", "3", ")", "\n", "sum_input_feature_chan", "+=", "input_feature_chan", "\n", "", "", "W_conv1_m", ",", "b_conv1_m", "=", "self", ".", "_conv_variable", "(", "[", "3", ",", "3", ",", "sum_input_feature_chan", ",", "output_feature_chan", "]", ")", "\n", "output_grid", "=", "tf", ".", "nn", ".", "relu", "(", "self", ".", "_conv2d", "(", "concat_grid", ",", "W_conv1_m", ",", "1", ")", "+", "b_conv1_m", ")", "\n", "output_grids", ".", "append", "(", "output_grid", ")", "\n", "", "return", "output_dims", ",", "output_grids", "\n", "\n", "", "def", "build_next_layer_convo_reverse_without_activation", "(", "self", ",", "prev_grids", ",", "num_output_grids", ",", "input_feature_chan", ",", "output_feature_chan", ",", "largest_scale", ",", "lay_ind", ")", ":", "\n", "    ", "num_input_grids", "=", "len", "(", "prev_grids", ")", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.build_next_layer_convo_arbit": [[259, 302], ["len", "range", "output_dims.append", "model.MNISTRecallModel._conv_variable", "tensorflow.nn.relu", "tensorflow.contrib.layers.batch_norm", "output_grids.append", "tensorflow.image.resize_images", "tensorflow.layers.max_pooling2d", "str", "tensorflow.concat", "tensorflow.concat", "model.MNISTRecallModel._conv2d", "str"], "methods", ["home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model._conv_variable", "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.Model._conv2d"], ["output_grids", "=", "[", "]", "\n", "output_dims", "=", "[", "]", "\n", "\n", "for", "i", "in", "range", "(", "num_output_grids", ")", ":", "\n", "      ", "j", "=", "(", "num_input_grids", "-", "num_output_grids", ")", "+", "i", "\n", "sum_input_feature_chan", "=", "0", "\n", "scale", "=", "largest_scale", "-", "num_output_grids", "+", "1", "+", "i", "\n", "output_dim", "=", "(", "3", "*", "(", "2", "**", "scale", ")", ",", "3", "*", "(", "2", "**", "scale", ")", ",", "output_feature_chan", ")", "\n", "output_dims", ".", "append", "(", "output_dim", ")", "\n", "concat_grid", "=", "None", "\n", "if", "(", "j", "-", "1", ")", ">=", "0", "and", "(", "j", "-", "1", ")", "<", "num_input_grids", ":", "\n", "        ", "prev_spatial_dim", "=", "(", "prev_grids", "[", "j", "-", "1", "]", ".", "shape", "[", "1", "]", ",", "prev_grids", "[", "j", "-", "1", "]", ".", "shape", "[", "2", "]", ")", "\n", "next_spatial_dim", "=", "(", "prev_spatial_dim", "[", "0", "]", "*", "2", ",", "prev_spatial_dim", "[", "1", "]", "*", "2", ")", "\n", "prev_up", "=", "tf", ".", "image", ".", "resize_images", "(", "prev_grids", "[", "j", "-", "1", "]", ",", "next_spatial_dim", ",", "tf", ".", "image", ".", "ResizeMethod", ".", "NEAREST_NEIGHBOR", ")", "\n", "concat_grid", "=", "prev_up", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "if", "j", ">=", "0", "and", "j", "<", "num_input_grids", ":", "\n", "        ", "if", "concat_grid", "==", "None", ":", "\n", "          ", "concat_grid", "=", "prev_grids", "[", "j", "]", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "else", ":", "\n", "          ", "concat_grid", "=", "tf", ".", "concat", "(", "[", "concat_grid", ",", "prev_grids", "[", "j", "]", "]", ",", "3", ")", "\n", "sum_input_feature_chan", "+=", "input_feature_chan", "\n", "", "", "if", "j", "+", "1", ">=", "0", "and", "j", "+", "1", "<", "num_input_grids", ":", "\n", "        ", "prev_down", "=", "tf", ".", "layers", ".", "max_pooling2d", "(", "prev_grids", "[", "j", "+", "1", "]", ",", "[", "2", ",", "2", "]", ",", "2", ")", "\n", "if", "concat_grid", "==", "None", ":", "\n", "          ", "concat_grid", "=", "prev_down", "\n", "sum_input_feature_chan", "=", "input_feature_chan", "\n", "", "else", ":", "\n", "          ", "concat_grid", "=", "tf", ".", "concat", "(", "[", "concat_grid", ",", "prev_down", "]", ",", "3", ")", "\n", "sum_input_feature_chan", "+=", "input_feature_chan", "\n", "", "", "W_conv1_m", ",", "b_conv1_m", "=", "self", ".", "_conv_variable", "(", "[", "3", ",", "3", ",", "sum_input_feature_chan", ",", "output_feature_chan", "]", ")", "\n", "output_grid", "=", "(", "self", ".", "_conv2d", "(", "concat_grid", ",", "W_conv1_m", ",", "1", ")", "+", "b_conv1_m", ")", "\n", "output_grids", ".", "append", "(", "output_grid", ")", "\n", "", "return", "output_dims", ",", "output_grids", "\n", "\n", "", "def", "build_next_layer", "(", "self", ",", "prev_grids", ",", "num_output_grids", ",", "output_feature_chan", ",", "lay_ind", ")", ":", "\n", "    ", "num_input_grids", "=", "len", "(", "prev_grids", ")", "\n", "output_grids", "=", "[", "]", "\n", "lstm_states", "=", "[", "]", "\n", "lstm_states_ph", "=", "[", "]", "\n", "output_dims", "=", "[", "]", "\n", "\n", "for", "i", "in", "range", "(", "num_output_grids", ")", ":", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.get_initial_state": [[303, 311], ["range", "len", "lstm_state_out.append", "tensorflow.contrib.rnn.LSTMStateTuple", "numpy.zeros", "numpy.zeros"], "methods", ["None"], ["      ", "output_dim", "=", "(", "3", "*", "(", "2", "**", "i", ")", ",", "3", "*", "(", "2", "**", "i", ")", ",", "output_feature_chan", ")", "\n", "output_dims", ".", "append", "(", "output_dim", ")", "\n", "concat_grid", "=", "None", "\n", "if", "(", "i", "-", "1", ")", ">=", "0", "and", "(", "i", "-", "1", ")", "<", "num_input_grids", ":", "\n", "        ", "prev_spatial_dim", "=", "(", "prev_grids", "[", "i", "-", "1", "]", ".", "shape", "[", "1", "]", ",", "prev_grids", "[", "i", "-", "1", "]", ".", "shape", "[", "2", "]", ")", "\n", "next_spatial_dim", "=", "(", "prev_spatial_dim", "[", "0", "]", "*", "2", ",", "prev_spatial_dim", "[", "1", "]", "*", "2", ")", "\n", "prev_up", "=", "tf", ".", "image", ".", "resize_images", "(", "prev_grids", "[", "i", "-", "1", "]", ",", "next_spatial_dim", ",", "tf", ".", "image", ".", "ResizeMethod", ".", "NEAREST_NEIGHBOR", ")", "\n", "concat_grid", "=", "prev_up", "\n", "", "if", "i", ">=", "0", "and", "i", "<", "num_input_grids", ":", "\n"]], "home.repos.pwc.inspect_result.trihuynh88_multigrid_mem.mnist_recall.model.MNISTRecallModel.get_vars": [[312, 314], ["tensorflow.trainable_variables"], "methods", ["None"], ["        ", "if", "concat_grid", "==", "None", ":", "\n", "          ", "concat_grid", "=", "prev_grids", "[", "i", "]", "\n", "", "else", ":", "\n"]]}