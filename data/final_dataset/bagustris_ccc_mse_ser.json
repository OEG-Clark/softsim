{"home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_improv_paa_ccc.ccc": [[88, 98], ["keras.squeeze", "keras.squeeze", "keras.mean", "keras.mean", "keras.mean", "keras.mean", "keras.square", "keras.square", "keras.constant", "keras.common.epsilon", "keras.square"], "function", ["None"], ["def", "ccc", "(", "gold", ",", "pred", ")", ":", "\n", "    ", "gold", "=", "K", ".", "squeeze", "(", "gold", ",", "axis", "=", "-", "1", ")", "\n", "pred", "=", "K", ".", "squeeze", "(", "pred", ",", "axis", "=", "-", "1", ")", "\n", "gold_mean", "=", "K", ".", "mean", "(", "gold", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "pred_mean", "=", "K", ".", "mean", "(", "pred", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "covariance", "=", "(", "gold", "-", "gold_mean", ")", "*", "(", "pred", "-", "pred_mean", ")", "\n", "gold_var", "=", "K", ".", "mean", "(", "K", ".", "square", "(", "gold", "-", "gold_mean", ")", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "pred_var", "=", "K", ".", "mean", "(", "K", ".", "square", "(", "pred", "-", "pred_mean", ")", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "ccc", "=", "K", ".", "constant", "(", "2.", ")", "*", "covariance", "/", "(", "gold_var", "+", "pred_var", "+", "K", ".", "square", "(", "gold_mean", "-", "pred_mean", ")", "+", "K", ".", "common", ".", "epsilon", "(", ")", ")", "\n", "return", "ccc", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_improv_paa_ccc.ccc_loss": [[100, 104], ["keras.constant", "ser_improv_paa_ccc.ccc"], "function", ["home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_gemaps_ccc.ccc"], ["", "def", "ccc_loss", "(", "gold", ",", "pred", ")", ":", "\n", "# input (num_batches, seq_len, 1)", "\n", "    ", "ccc_loss", "=", "K", ".", "constant", "(", "1.", ")", "-", "ccc", "(", "gold", ",", "pred", ")", "\n", "return", "ccc_loss", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_improv_paa_ccc.api_model": [[107, 124], ["keras.layers.Input", "keras.models.Model", "keras.models.Model.compile", "keras.layers.BatchNormalization", "keras.layers.CuDNNLSTM", "keras.layers.CuDNNLSTM", "keras.layers.CuDNNLSTM", "keras.layers.Dense", "keras.layers.Dense"], "function", ["None"], ["", "def", "api_model", "(", ")", ":", "\n", "    ", "inputs", "=", "Input", "(", "shape", "=", "(", "feat", ".", "shape", "[", "1", "]", ",", "feat", ".", "shape", "[", "2", "]", ")", ",", "name", "=", "'feat_input'", ")", "\n", "net", "=", "BatchNormalization", "(", ")", "(", "inputs", ")", "\n", "#net = Bidirectional(LSTM(64, return_sequences=True, dropout=do, recurrent_dropout=do))(net)", "\n", "net", "=", "CuDNNLSTM", "(", "feat", ".", "shape", "[", "2", "]", ",", "return_sequences", "=", "True", ")", "(", "net", ")", "\n", "net", "=", "CuDNNLSTM", "(", "256", ",", "return_sequences", "=", "True", ")", "(", "net", ")", "\n", "net", "=", "CuDNNLSTM", "(", "256", ",", "return_sequences", "=", "False", ")", "(", "net", ")", "\n", "net", "=", "Dense", "(", "64", ")", "(", "net", ")", "\n", "#net = Dropout(0.1)(net)", "\n", "target_names", "=", "(", "'v'", ",", "'a'", ",", "'d'", ")", "\n", "outputs", "=", "[", "Dense", "(", "1", ",", "name", "=", "name", ",", "activation", "=", "'tanh'", ")", "(", "net", ")", "for", "name", "in", "target_names", "]", "\n", "\n", "model", "=", "Model", "(", "inputs", "=", "inputs", ",", "outputs", "=", "outputs", ")", "#=[out1, out2, out3])", "\n", "model", ".", "compile", "(", "loss", "=", "ccc_loss", ",", "#{'v': ccc_loss, 'a': ccc_loss, 'd': ccc_loss}, ", "\n", "loss_weights", "=", "{", "'v'", ":", "0.3", ",", "'a'", ":", "0.6", ",", "'d'", ":", "0.1", "}", ",", "\n", "optimizer", "=", "'rmsprop'", ",", "metrics", "=", "[", "ccc", ",", "'mse'", "]", ")", "\n", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_paa_mse.ccc": [[69, 79], ["keras.squeeze", "keras.squeeze", "keras.mean", "keras.mean", "keras.mean", "keras.mean", "keras.square", "keras.square", "keras.constant", "keras.common.epsilon", "keras.square"], "function", ["None"], ["", "def", "ccc", "(", "gold", ",", "pred", ")", ":", "\n", "    ", "gold", "=", "K", ".", "squeeze", "(", "gold", ",", "axis", "=", "-", "1", ")", "\n", "pred", "=", "K", ".", "squeeze", "(", "pred", ",", "axis", "=", "-", "1", ")", "\n", "gold_mean", "=", "K", ".", "mean", "(", "gold", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "pred_mean", "=", "K", ".", "mean", "(", "pred", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "covariance", "=", "(", "gold", "-", "gold_mean", ")", "*", "(", "pred", "-", "pred_mean", ")", "\n", "gold_var", "=", "K", ".", "mean", "(", "K", ".", "square", "(", "gold", "-", "gold_mean", ")", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "pred_var", "=", "K", ".", "mean", "(", "K", ".", "square", "(", "pred", "-", "pred_mean", ")", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "ccc", "=", "K", ".", "constant", "(", "2.", ")", "*", "covariance", "/", "(", "gold_var", "+", "pred_var", "+", "K", ".", "square", "(", "gold_mean", "-", "pred_mean", ")", "+", "K", ".", "common", ".", "epsilon", "(", ")", ")", "\n", "return", "ccc", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_paa_mse.ccc_loss": [[81, 85], ["keras.constant", "ser_iemocap_paa_mse.ccc"], "function", ["home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_gemaps_ccc.ccc"], ["", "def", "ccc_loss", "(", "gold", ",", "pred", ")", ":", "\n", "# input (num_batches, seq_len, 1)", "\n", "    ", "ccc_loss", "=", "K", ".", "constant", "(", "1.", ")", "-", "ccc", "(", "gold", ",", "pred", ")", "\n", "return", "ccc_loss", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_paa_mse.api_model": [[88, 108], ["keras.layers.Input", "keras.models.Model", "keras.models.Model.compile", "keras.layers.BatchNormalization", "keras.layers.CuDNNLSTM", "keras.layers.CuDNNLSTM", "keras.layers.CuDNNLSTM", "keras.layers.Dense", "keras.layers.Dense"], "function", ["None"], ["", "def", "api_model", "(", "alpha", ",", "beta", ",", "gamma", ")", ":", "\n", "# speech network", "\n", "    ", "input_speech", "=", "Input", "(", "shape", "=", "(", "feat", ".", "shape", "[", "1", "]", ",", "feat", ".", "shape", "[", "2", "]", ")", ",", "name", "=", "'speech_input'", ")", "\n", "net_speech", "=", "BatchNormalization", "(", ")", "(", "input_speech", ")", "\n", "net_speech", "=", "CuDNNLSTM", "(", "feat", ".", "shape", "[", "2", "]", ",", "return_sequences", "=", "True", ")", "(", "net_speech", ")", "\n", "net_speech", "=", "CuDNNLSTM", "(", "256", ",", "return_sequences", "=", "True", ")", "(", "net_speech", ")", "\n", "net_speech", "=", "CuDNNLSTM", "(", "256", ",", "return_sequences", "=", "False", ")", "(", "net_speech", ")", "\n", "#net_speech = Flatten()(net_speech)", "\n", "net_speech", "=", "Dense", "(", "64", ")", "(", "net_speech", ")", "\n", "#net_speech = Dropout(0.1)(net_speech)", "\n", "\n", "target_names", "=", "(", "'v'", ",", "'a'", ",", "'d'", ")", "\n", "model_combined", "=", "[", "Dense", "(", "1", ",", "name", "=", "name", ",", "activation", "=", "'tanh'", ")", "(", "net_speech", ")", "for", "name", "in", "target_names", "]", "\n", "\n", "model", "=", "Model", "(", "input_speech", ",", "model_combined", ")", "\n", "#model.compile(loss=ccc_loss, optimizer='rmsprop', metrics=[ccc])", "\n", "model", ".", "compile", "(", "loss", "=", "'mse'", ",", "\n", "loss_weights", "=", "{", "'v'", ":", "alpha", ",", "'a'", ":", "beta", ",", "'d'", ":", "gamma", "}", ",", "\n", "optimizer", "=", "'rmsprop'", ",", "metrics", "=", "[", "ccc", ",", "'mse'", "]", ")", "\n", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_improv_paa_mse.ccc": [[88, 98], ["keras.squeeze", "keras.squeeze", "keras.mean", "keras.mean", "keras.mean", "keras.mean", "keras.square", "keras.square", "keras.constant", "keras.common.epsilon", "keras.square"], "function", ["None"], ["def", "ccc", "(", "gold", ",", "pred", ")", ":", "\n", "    ", "gold", "=", "K", ".", "squeeze", "(", "gold", ",", "axis", "=", "-", "1", ")", "\n", "pred", "=", "K", ".", "squeeze", "(", "pred", ",", "axis", "=", "-", "1", ")", "\n", "gold_mean", "=", "K", ".", "mean", "(", "gold", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "pred_mean", "=", "K", ".", "mean", "(", "pred", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "covariance", "=", "(", "gold", "-", "gold_mean", ")", "*", "(", "pred", "-", "pred_mean", ")", "\n", "gold_var", "=", "K", ".", "mean", "(", "K", ".", "square", "(", "gold", "-", "gold_mean", ")", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "pred_var", "=", "K", ".", "mean", "(", "K", ".", "square", "(", "pred", "-", "pred_mean", ")", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "ccc", "=", "K", ".", "constant", "(", "2.", ")", "*", "covariance", "/", "(", "gold_var", "+", "pred_var", "+", "K", ".", "square", "(", "gold_mean", "-", "pred_mean", ")", "+", "K", ".", "common", ".", "epsilon", "(", ")", ")", "\n", "return", "ccc", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_improv_paa_mse.ccc_loss": [[100, 104], ["keras.constant", "ser_improv_paa_mse.ccc"], "function", ["home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_gemaps_ccc.ccc"], ["", "def", "ccc_loss", "(", "gold", ",", "pred", ")", ":", "\n", "# input (num_batches, seq_len, 1)", "\n", "    ", "ccc_loss", "=", "K", ".", "constant", "(", "1.", ")", "-", "ccc", "(", "gold", ",", "pred", ")", "\n", "return", "ccc_loss", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_improv_paa_mse.api_model": [[107, 124], ["keras.layers.Input", "keras.models.Model", "keras.models.Model.compile", "keras.layers.BatchNormalization", "keras.layers.CuDNNLSTM", "keras.layers.CuDNNLSTM", "keras.layers.CuDNNLSTM", "keras.layers.Dense", "keras.layers.Dense"], "function", ["None"], ["", "def", "api_model", "(", ")", ":", "\n", "    ", "inputs", "=", "Input", "(", "shape", "=", "(", "feat", ".", "shape", "[", "1", "]", ",", "feat", ".", "shape", "[", "2", "]", ")", ",", "name", "=", "'feat_input'", ")", "\n", "net", "=", "BatchNormalization", "(", ")", "(", "inputs", ")", "\n", "#net = Bidirectional(LSTM(64, return_sequences=True, dropout=do, recurrent_dropout=do))(net)", "\n", "net", "=", "CuDNNLSTM", "(", "feat", ".", "shape", "[", "2", "]", ",", "return_sequences", "=", "True", ")", "(", "net", ")", "\n", "net", "=", "CuDNNLSTM", "(", "256", ",", "return_sequences", "=", "True", ")", "(", "net", ")", "\n", "net", "=", "CuDNNLSTM", "(", "256", ",", "return_sequences", "=", "False", ")", "(", "net", ")", "\n", "net", "=", "Dense", "(", "64", ")", "(", "net", ")", "\n", "#net = Dropout(0.1)(net)", "\n", "target_names", "=", "(", "'v'", ",", "'a'", ",", "'d'", ")", "\n", "outputs", "=", "[", "Dense", "(", "1", ",", "name", "=", "name", ",", "activation", "=", "'tanh'", ")", "(", "net", ")", "for", "name", "in", "target_names", "]", "\n", "\n", "model", "=", "Model", "(", "inputs", "=", "inputs", ",", "outputs", "=", "outputs", ")", "#=[out1, out2, out3])", "\n", "model", ".", "compile", "(", "loss", "=", "'mse'", ",", "#{'v': ccc_loss, 'a': ccc_loss, 'd': ccc_loss}, ", "\n", "loss_weights", "=", "{", "'v'", ":", "0.3", ",", "'a'", ":", "0.6", ",", "'d'", ":", "0.1", "}", ",", "\n", "optimizer", "=", "'rmsprop'", ",", "metrics", "=", "[", "ccc", ",", "'mse'", "]", ")", "\n", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_gemaps_mse.ccc": [[68, 78], ["keras.squeeze", "keras.squeeze", "keras.mean", "keras.mean", "keras.mean", "keras.mean", "keras.square", "keras.square", "keras.constant", "keras.common.epsilon", "keras.square"], "function", ["None"], ["", "def", "ccc", "(", "gold", ",", "pred", ")", ":", "\n", "    ", "gold", "=", "K", ".", "squeeze", "(", "gold", ",", "axis", "=", "-", "1", ")", "\n", "pred", "=", "K", ".", "squeeze", "(", "pred", ",", "axis", "=", "-", "1", ")", "\n", "gold_mean", "=", "K", ".", "mean", "(", "gold", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "pred_mean", "=", "K", ".", "mean", "(", "pred", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "covariance", "=", "(", "gold", "-", "gold_mean", ")", "*", "(", "pred", "-", "pred_mean", ")", "\n", "gold_var", "=", "K", ".", "mean", "(", "K", ".", "square", "(", "gold", "-", "gold_mean", ")", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "pred_var", "=", "K", ".", "mean", "(", "K", ".", "square", "(", "pred", "-", "pred_mean", ")", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "ccc", "=", "K", ".", "constant", "(", "2.", ")", "*", "covariance", "/", "(", "gold_var", "+", "pred_var", "+", "K", ".", "square", "(", "gold_mean", "-", "pred_mean", ")", "+", "K", ".", "common", ".", "epsilon", "(", ")", ")", "\n", "return", "ccc", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_gemaps_mse.ccc_loss": [[80, 84], ["keras.constant", "ser_iemocap_gemaps_mse.ccc"], "function", ["home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_gemaps_ccc.ccc"], ["", "def", "ccc_loss", "(", "gold", ",", "pred", ")", ":", "\n", "# input (num_batches, seq_len, 1)", "\n", "    ", "ccc_loss", "=", "K", ".", "constant", "(", "1.", ")", "-", "ccc", "(", "gold", ",", "pred", ")", "\n", "return", "ccc_loss", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_gemaps_mse.api_model": [[89, 109], ["keras.layers.Input", "keras.models.Model", "keras.models.Model.compile", "keras.layers.BatchNormalization", "keras.layers.CuDNNLSTM", "keras.layers.CuDNNLSTM", "keras.layers.CuDNNLSTM", "keras.layers.Dense", "keras.layers.Dense"], "function", ["None"], ["def", "api_model", "(", "alpha", ",", "beta", ",", "gamma", ")", ":", "\n", "# speech network", "\n", "    ", "input_speech", "=", "Input", "(", "shape", "=", "(", "feat", ".", "shape", "[", "1", "]", ",", "feat", ".", "shape", "[", "2", "]", ")", ",", "name", "=", "'speech_input'", ")", "\n", "net_speech", "=", "BatchNormalization", "(", ")", "(", "input_speech", ")", "\n", "net_speech", "=", "CuDNNLSTM", "(", "feat", ".", "shape", "[", "2", "]", ",", "return_sequences", "=", "True", ")", "(", "net_speech", ")", "\n", "net_speech", "=", "CuDNNLSTM", "(", "256", ",", "return_sequences", "=", "True", ")", "(", "net_speech", ")", "\n", "net_speech", "=", "CuDNNLSTM", "(", "256", ",", "return_sequences", "=", "False", ")", "(", "net_speech", ")", "\n", "#net_speech = Flatten()(net_speech)", "\n", "net_speech", "=", "Dense", "(", "64", ")", "(", "net_speech", ")", "\n", "#net_speech = Dropout(0.1)(net_speech)", "\n", "\n", "target_names", "=", "(", "'v'", ",", "'a'", ",", "'d'", ")", "\n", "model_combined", "=", "[", "Dense", "(", "1", ",", "name", "=", "name", ",", "activation", "=", "'tanh'", ")", "(", "net_speech", ")", "for", "name", "in", "target_names", "]", "\n", "\n", "model", "=", "Model", "(", "input_speech", ",", "model_combined", ")", "\n", "#model.compile(loss=ccc_loss, optimizer='rmsprop', metrics=[ccc])", "\n", "model", ".", "compile", "(", "loss", "=", "'mse'", ",", "\n", "loss_weights", "=", "{", "'v'", ":", "alpha", ",", "'a'", ":", "beta", ",", "'d'", ":", "gamma", "}", ",", "\n", "optimizer", "=", "'rmsprop'", ",", "metrics", "=", "[", "ccc", ",", "'mse'", "]", ")", "\n", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_paa_ccc.ccc": [[70, 80], ["keras.squeeze", "keras.squeeze", "keras.mean", "keras.mean", "keras.mean", "keras.mean", "keras.square", "keras.square", "keras.constant", "keras.common.epsilon", "keras.square"], "function", ["None"], ["", "def", "ccc", "(", "gold", ",", "pred", ")", ":", "\n", "    ", "gold", "=", "K", ".", "squeeze", "(", "gold", ",", "axis", "=", "-", "1", ")", "\n", "pred", "=", "K", ".", "squeeze", "(", "pred", ",", "axis", "=", "-", "1", ")", "\n", "gold_mean", "=", "K", ".", "mean", "(", "gold", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "pred_mean", "=", "K", ".", "mean", "(", "pred", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "covariance", "=", "(", "gold", "-", "gold_mean", ")", "*", "(", "pred", "-", "pred_mean", ")", "\n", "gold_var", "=", "K", ".", "mean", "(", "K", ".", "square", "(", "gold", "-", "gold_mean", ")", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "pred_var", "=", "K", ".", "mean", "(", "K", ".", "square", "(", "pred", "-", "pred_mean", ")", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "ccc", "=", "K", ".", "constant", "(", "2.", ")", "*", "covariance", "/", "(", "gold_var", "+", "pred_var", "+", "K", ".", "square", "(", "gold_mean", "-", "pred_mean", ")", "+", "K", ".", "common", ".", "epsilon", "(", ")", ")", "\n", "return", "ccc", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_paa_ccc.ccc_loss": [[82, 86], ["keras.constant", "ser_iemocap_paa_ccc.ccc"], "function", ["home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_gemaps_ccc.ccc"], ["", "def", "ccc_loss", "(", "gold", ",", "pred", ")", ":", "\n", "# input (num_batches, seq_len, 1)", "\n", "    ", "ccc_loss", "=", "K", ".", "constant", "(", "1.", ")", "-", "ccc", "(", "gold", ",", "pred", ")", "\n", "return", "ccc_loss", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_paa_ccc.api_model": [[89, 109], ["keras.layers.Input", "keras.models.Model", "keras.models.Model.compile", "keras.layers.BatchNormalization", "keras.layers.CuDNNLSTM", "keras.layers.CuDNNLSTM", "keras.layers.CuDNNLSTM", "keras.layers.Dense", "keras.layers.Dense"], "function", ["None"], ["", "def", "api_model", "(", "alpha", ",", "beta", ",", "gamma", ")", ":", "\n", "# speech network", "\n", "    ", "input_speech", "=", "Input", "(", "shape", "=", "(", "feat", ".", "shape", "[", "1", "]", ",", "feat", ".", "shape", "[", "2", "]", ")", ",", "name", "=", "'speech_input'", ")", "\n", "net_speech", "=", "BatchNormalization", "(", ")", "(", "input_speech", ")", "\n", "net_speech", "=", "CuDNNLSTM", "(", "feat", ".", "shape", "[", "2", "]", ",", "return_sequences", "=", "True", ")", "(", "net_speech", ")", "\n", "net_speech", "=", "CuDNNLSTM", "(", "256", ",", "return_sequences", "=", "True", ")", "(", "net_speech", ")", "\n", "net_speech", "=", "CuDNNLSTM", "(", "256", ",", "return_sequences", "=", "False", ")", "(", "net_speech", ")", "\n", "#net_speech = Flatten()(net_speech)", "\n", "net_speech", "=", "Dense", "(", "64", ")", "(", "net_speech", ")", "\n", "#net_speech = Dropout(0.1)(net_speech)", "\n", "\n", "target_names", "=", "(", "'v'", ",", "'a'", ",", "'d'", ")", "\n", "model_combined", "=", "[", "Dense", "(", "1", ",", "name", "=", "name", ",", "activation", "=", "'tanh'", ")", "(", "net_speech", ")", "for", "name", "in", "target_names", "]", "\n", "\n", "model", "=", "Model", "(", "input_speech", ",", "model_combined", ")", "\n", "#model.compile(loss=ccc_loss, optimizer='rmsprop', metrics=[ccc])", "\n", "model", ".", "compile", "(", "loss", "=", "ccc_loss", ",", "\n", "loss_weights", "=", "{", "'v'", ":", "alpha", ",", "'a'", ":", "beta", ",", "'d'", ":", "gamma", "}", ",", "\n", "optimizer", "=", "'rmsprop'", ",", "metrics", "=", "[", "ccc", ",", "'mse'", "]", ")", "\n", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_improv_gemaps_mse.ccc": [[88, 98], ["keras.squeeze", "keras.squeeze", "keras.mean", "keras.mean", "keras.mean", "keras.mean", "keras.square", "keras.square", "keras.constant", "keras.common.epsilon", "keras.square"], "function", ["None"], ["def", "ccc", "(", "gold", ",", "pred", ")", ":", "\n", "    ", "gold", "=", "K", ".", "squeeze", "(", "gold", ",", "axis", "=", "-", "1", ")", "\n", "pred", "=", "K", ".", "squeeze", "(", "pred", ",", "axis", "=", "-", "1", ")", "\n", "gold_mean", "=", "K", ".", "mean", "(", "gold", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "pred_mean", "=", "K", ".", "mean", "(", "pred", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "covariance", "=", "(", "gold", "-", "gold_mean", ")", "*", "(", "pred", "-", "pred_mean", ")", "\n", "gold_var", "=", "K", ".", "mean", "(", "K", ".", "square", "(", "gold", "-", "gold_mean", ")", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "pred_var", "=", "K", ".", "mean", "(", "K", ".", "square", "(", "pred", "-", "pred_mean", ")", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "ccc", "=", "K", ".", "constant", "(", "2.", ")", "*", "covariance", "/", "(", "gold_var", "+", "pred_var", "+", "K", ".", "square", "(", "gold_mean", "-", "pred_mean", ")", "+", "K", ".", "common", ".", "epsilon", "(", ")", ")", "\n", "return", "ccc", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_improv_gemaps_mse.ccc_loss": [[100, 104], ["keras.constant", "ser_improv_gemaps_mse.ccc"], "function", ["home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_gemaps_ccc.ccc"], ["", "def", "ccc_loss", "(", "gold", ",", "pred", ")", ":", "\n", "# input (num_batches, seq_len, 1)", "\n", "    ", "ccc_loss", "=", "K", ".", "constant", "(", "1.", ")", "-", "ccc", "(", "gold", ",", "pred", ")", "\n", "return", "ccc_loss", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_improv_gemaps_mse.api_model": [[107, 123], ["keras.layers.Input", "keras.models.Model", "keras.models.Model.compile", "keras.layers.BatchNormalization", "keras.layers.CuDNNLSTM", "keras.layers.CuDNNLSTM", "keras.layers.CuDNNLSTM", "keras.layers.Dense", "keras.layers.Dense"], "function", ["None"], ["", "def", "api_model", "(", ")", ":", "\n", "    ", "inputs", "=", "Input", "(", "shape", "=", "(", "feat", ".", "shape", "[", "1", "]", ",", "feat", ".", "shape", "[", "2", "]", ")", ",", "name", "=", "'feat_input'", ")", "\n", "net", "=", "BatchNormalization", "(", ")", "(", "inputs", ")", "\n", "#net = Bidirectional(LSTM(64, return_sequences=True, dropout=do, recurrent_dropout=do))(net)", "\n", "net", "=", "CuDNNLSTM", "(", "feat", ".", "shape", "[", "2", "]", ",", "return_sequences", "=", "True", ")", "(", "net", ")", "\n", "net", "=", "CuDNNLSTM", "(", "256", ",", "return_sequences", "=", "True", ")", "(", "net", ")", "\n", "net", "=", "CuDNNLSTM", "(", "256", ",", "return_sequences", "=", "False", ")", "(", "net", ")", "\n", "net", "=", "Dense", "(", "64", ")", "(", "net", ")", "\n", "target_names", "=", "(", "'v'", ",", "'a'", ",", "'d'", ")", "\n", "outputs", "=", "[", "Dense", "(", "1", ",", "name", "=", "name", ",", "activation", "=", "'tanh'", ")", "(", "net", ")", "for", "name", "in", "target_names", "]", "\n", "\n", "model", "=", "Model", "(", "inputs", "=", "inputs", ",", "outputs", "=", "outputs", ")", "#=[out1, out2, out3])", "\n", "model", ".", "compile", "(", "loss", "=", "'mse'", ",", "#{'v': ccc_loss, 'a': ccc_loss, 'd': ccc_loss}, ", "\n", "loss_weights", "=", "{", "'v'", ":", "0.3", ",", "'a'", ":", "0.6", ",", "'d'", ":", "0.1", "}", ",", "\n", "optimizer", "=", "'rmsprop'", ",", "metrics", "=", "[", "ccc", ",", "'mse'", "]", ")", "\n", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_improv_gemaps_ccc.ccc": [[88, 98], ["keras.squeeze", "keras.squeeze", "keras.mean", "keras.mean", "keras.mean", "keras.mean", "keras.square", "keras.square", "keras.constant", "keras.common.epsilon", "keras.square"], "function", ["None"], ["def", "ccc", "(", "gold", ",", "pred", ")", ":", "\n", "    ", "gold", "=", "K", ".", "squeeze", "(", "gold", ",", "axis", "=", "-", "1", ")", "\n", "pred", "=", "K", ".", "squeeze", "(", "pred", ",", "axis", "=", "-", "1", ")", "\n", "gold_mean", "=", "K", ".", "mean", "(", "gold", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "pred_mean", "=", "K", ".", "mean", "(", "pred", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "covariance", "=", "(", "gold", "-", "gold_mean", ")", "*", "(", "pred", "-", "pred_mean", ")", "\n", "gold_var", "=", "K", ".", "mean", "(", "K", ".", "square", "(", "gold", "-", "gold_mean", ")", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "pred_var", "=", "K", ".", "mean", "(", "K", ".", "square", "(", "pred", "-", "pred_mean", ")", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "ccc", "=", "K", ".", "constant", "(", "2.", ")", "*", "covariance", "/", "(", "gold_var", "+", "pred_var", "+", "K", ".", "square", "(", "gold_mean", "-", "pred_mean", ")", "+", "K", ".", "common", ".", "epsilon", "(", ")", ")", "\n", "return", "ccc", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_improv_gemaps_ccc.ccc_loss": [[100, 104], ["keras.constant", "ser_improv_gemaps_ccc.ccc"], "function", ["home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_gemaps_ccc.ccc"], ["", "def", "ccc_loss", "(", "gold", ",", "pred", ")", ":", "\n", "# input (num_batches, seq_len, 1)", "\n", "    ", "ccc_loss", "=", "K", ".", "constant", "(", "1.", ")", "-", "ccc", "(", "gold", ",", "pred", ")", "\n", "return", "ccc_loss", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_improv_gemaps_ccc.api_model": [[107, 122], ["keras.layers.Input", "keras.models.Model", "keras.models.Model.compile", "keras.layers.BatchNormalization", "keras.layers.CuDNNLSTM", "keras.layers.CuDNNLSTM", "keras.layers.CuDNNLSTM", "keras.layers.Dense", "keras.layers.Dense"], "function", ["None"], ["", "def", "api_model", "(", ")", ":", "\n", "    ", "inputs", "=", "Input", "(", "shape", "=", "(", "feat", ".", "shape", "[", "1", "]", ",", "feat", ".", "shape", "[", "2", "]", ")", ",", "name", "=", "'feat_input'", ")", "\n", "net", "=", "BatchNormalization", "(", ")", "(", "inputs", ")", "\n", "net", "=", "CuDNNLSTM", "(", "feat", ".", "shape", "[", "2", "]", ",", "return_sequences", "=", "True", ")", "(", "net", ")", "\n", "net", "=", "CuDNNLSTM", "(", "256", ",", "return_sequences", "=", "True", ")", "(", "net", ")", "\n", "net", "=", "CuDNNLSTM", "(", "256", ",", "return_sequences", "=", "False", ")", "(", "net", ")", "\n", "net", "=", "Dense", "(", "64", ")", "(", "net", ")", "\n", "target_names", "=", "(", "'v'", ",", "'a'", ",", "'d'", ")", "\n", "outputs", "=", "[", "Dense", "(", "1", ",", "name", "=", "name", ",", "activation", "=", "'tanh'", ")", "(", "net", ")", "for", "name", "in", "target_names", "]", "\n", "\n", "model", "=", "Model", "(", "inputs", "=", "inputs", ",", "outputs", "=", "outputs", ")", "#=[out1, out2, out3])", "\n", "model", ".", "compile", "(", "loss", "=", "ccc_loss", ",", "#{'v': ccc_loss, 'a': ccc_loss, 'd': ccc_loss}, ", "\n", "loss_weights", "=", "{", "'v'", ":", "0.3", ",", "'a'", ":", "0.6", ",", "'d'", ":", "0.1", "}", ",", "\n", "optimizer", "=", "'rmsprop'", ",", "metrics", "=", "[", "ccc", ",", "'mse'", "]", ")", "\n", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_gemaps_ccc.ccc": [[73, 83], ["keras.squeeze", "keras.squeeze", "keras.mean", "keras.mean", "keras.mean", "keras.mean", "keras.square", "keras.square", "keras.constant", "keras.common.epsilon", "keras.square"], "function", ["None"], ["", "def", "ccc", "(", "gold", ",", "pred", ")", ":", "\n", "    ", "gold", "=", "K", ".", "squeeze", "(", "gold", ",", "axis", "=", "-", "1", ")", "\n", "pred", "=", "K", ".", "squeeze", "(", "pred", ",", "axis", "=", "-", "1", ")", "\n", "gold_mean", "=", "K", ".", "mean", "(", "gold", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "pred_mean", "=", "K", ".", "mean", "(", "pred", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "covariance", "=", "(", "gold", "-", "gold_mean", ")", "*", "(", "pred", "-", "pred_mean", ")", "\n", "gold_var", "=", "K", ".", "mean", "(", "K", ".", "square", "(", "gold", "-", "gold_mean", ")", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "pred_var", "=", "K", ".", "mean", "(", "K", ".", "square", "(", "pred", "-", "pred_mean", ")", ",", "axis", "=", "-", "1", ",", "keepdims", "=", "True", ")", "\n", "ccc", "=", "K", ".", "constant", "(", "2.", ")", "*", "covariance", "/", "(", "gold_var", "+", "pred_var", "+", "K", ".", "square", "(", "gold_mean", "-", "pred_mean", ")", "+", "K", ".", "common", ".", "epsilon", "(", ")", ")", "\n", "return", "ccc", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_gemaps_ccc.ccc_loss": [[85, 89], ["keras.constant", "ser_iemocap_gemaps_ccc.ccc"], "function", ["home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_gemaps_ccc.ccc"], ["", "def", "ccc_loss", "(", "gold", ",", "pred", ")", ":", "\n", "# input (num_batches, seq_len, 1)", "\n", "    ", "ccc_loss", "=", "K", ".", "constant", "(", "1.", ")", "-", "ccc", "(", "gold", ",", "pred", ")", "\n", "return", "ccc_loss", "\n", "\n"]], "home.repos.pwc.inspect_result.bagustris_ccc_mse_ser.code.ser_iemocap_gemaps_ccc.api_model": [[94, 114], ["keras.layers.Input", "keras.models.Model", "keras.models.Model.compile", "keras.layers.BatchNormalization", "keras.layers.CuDNNLSTM", "keras.layers.CuDNNLSTM", "keras.layers.CuDNNLSTM", "keras.layers.Dense", "keras.layers.Dense"], "function", ["None"], ["def", "api_model", "(", "alpha", ",", "beta", ",", "gamma", ")", ":", "\n", "# speech network", "\n", "    ", "input_speech", "=", "Input", "(", "shape", "=", "(", "feat", ".", "shape", "[", "1", "]", ",", "feat", ".", "shape", "[", "2", "]", ")", ",", "name", "=", "'speech_input'", ")", "\n", "net_speech", "=", "BatchNormalization", "(", ")", "(", "input_speech", ")", "\n", "net_speech", "=", "CuDNNLSTM", "(", "feat", ".", "shape", "[", "2", "]", ",", "return_sequences", "=", "True", ")", "(", "net_speech", ")", "\n", "net_speech", "=", "CuDNNLSTM", "(", "256", ",", "return_sequences", "=", "True", ")", "(", "net_speech", ")", "\n", "net_speech", "=", "CuDNNLSTM", "(", "256", ",", "return_sequences", "=", "False", ")", "(", "net_speech", ")", "\n", "#net_speech = Flatten()(net_speech)", "\n", "net_speech", "=", "Dense", "(", "64", ")", "(", "net_speech", ")", "\n", "#net_speech = Dropout(0.1)(net_speech)", "\n", "\n", "target_names", "=", "(", "'v'", ",", "'a'", ",", "'d'", ")", "\n", "model_combined", "=", "[", "Dense", "(", "1", ",", "name", "=", "name", ",", "activation", "=", "'tanh'", ")", "(", "net_speech", ")", "for", "name", "in", "target_names", "]", "\n", "\n", "model", "=", "Model", "(", "input_speech", ",", "model_combined", ")", "\n", "#model.compile(loss=ccc_loss, optimizer='rmsprop', metrics=[ccc])", "\n", "model", ".", "compile", "(", "loss", "=", "ccc_loss", ",", "\n", "loss_weights", "=", "{", "'v'", ":", "alpha", ",", "'a'", ":", "beta", ",", "'d'", ":", "gamma", "}", ",", "\n", "optimizer", "=", "'rmsprop'", ",", "metrics", "=", "[", "ccc", ",", "'mse'", "]", ")", "\n", "return", "model", "\n", "\n"]]}