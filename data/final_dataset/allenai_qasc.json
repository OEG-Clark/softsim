{"home.repos.pwc.inspect_result.allenai_qasc.predictors.bert_mcq_predictor.MultipleChoiceQAJsonPredictor._my_json_to_instance": [[16, 36], ["typing.cast", "json_dict.get", "typing.cast.text_to_instance", "choice_context_list.append", "choice.get"], "methods", ["None"], ["def", "_my_json_to_instance", "(", "self", ",", "json_dict", ":", "JsonDict", ")", "->", "Tuple", "[", "Instance", ",", "JsonDict", "]", ":", "\n", "# Make a cast here to satisfy mypy", "\n", "        ", "dataset_reader", "=", "cast", "(", "BertMCQAReader", ",", "self", ".", "_dataset_reader", ")", "\n", "qid", "=", "json_dict", "[", "'id'", "]", "\n", "question_data", "=", "json_dict", "[", "'question'", "]", "\n", "question_text", "=", "question_data", "[", "'stem'", "]", "\n", "choice_text_list", "=", "[", "choice", "[", "'text'", "]", "for", "choice", "in", "question_data", "[", "'choices'", "]", "]", "\n", "choice_labels", "=", "[", "choice", "[", "'label'", "]", "for", "choice", "in", "question_data", "[", "'choices'", "]", "]", "\n", "choice_context_list", "=", "[", "]", "\n", "context", "=", "json_dict", ".", "get", "(", "\"para\"", ",", "None", ")", "\n", "for", "choice", "in", "question_data", "[", "'choices'", "]", ":", "\n", "            ", "choice_context_list", ".", "append", "(", "choice", ".", "get", "(", "\"para\"", ",", "None", ")", ")", "\n", "", "instance", "=", "dataset_reader", ".", "text_to_instance", "(", "qid", ",", "question_text", ",", "choice_text_list", ",", "\n", "context", "=", "context", ",", "\n", "choice_context_list", "=", "choice_context_list", ")", "\n", "extra_info", "=", "{", "\n", "'id'", ":", "qid", ",", "\n", "'choice_labels'", ":", "choice_labels", "\n", "}", "\n", "return", "instance", ",", "extra_info", "\n", "\n"]], "home.repos.pwc.inspect_result.allenai_qasc.predictors.bert_mcq_predictor.MultipleChoiceQAJsonPredictor._json_to_instance": [[37, 41], ["bert_mcq_predictor.MultipleChoiceQAJsonPredictor._my_json_to_instance"], "methods", ["home.repos.pwc.inspect_result.allenai_qasc.predictors.bert_mcq_predictor.MultipleChoiceQAJsonPredictor._my_json_to_instance"], ["", "@", "overrides", "\n", "def", "_json_to_instance", "(", "self", ",", "json_dict", ":", "JsonDict", ")", "->", "Instance", ":", "\n", "        ", "instance", ",", "_", "=", "self", ".", "_my_json_to_instance", "(", "json_dict", ")", "\n", "return", "instance", "\n", "\n"]], "home.repos.pwc.inspect_result.allenai_qasc.predictors.bert_mcq_predictor.MultipleChoiceQAJsonPredictor.predict_json": [[42, 56], ["bert_mcq_predictor.MultipleChoiceQAJsonPredictor._my_json_to_instance", "bert_mcq_predictor.MultipleChoiceQAJsonPredictor._model.forward_on_instance", "max", "allennlp.common.util.sanitize"], "methods", ["home.repos.pwc.inspect_result.allenai_qasc.predictors.bert_mcq_predictor.MultipleChoiceQAJsonPredictor._my_json_to_instance"], ["", "@", "overrides", "\n", "def", "predict_json", "(", "self", ",", "inputs", ":", "JsonDict", ")", "->", "JsonDict", ":", "\n", "        ", "instance", ",", "return_dict", "=", "self", ".", "_my_json_to_instance", "(", "inputs", ")", "\n", "outputs", "=", "self", ".", "_model", ".", "forward_on_instance", "(", "instance", ")", "\n", "\n", "answer_index", "=", "outputs", "[", "'answer_index'", "]", "\n", "answer", "=", "return_dict", "[", "'choice_labels'", "]", "[", "answer_index", "]", "\n", "score", "=", "max", "(", "outputs", "[", "'label_probs'", "]", ")", "\n", "\n", "return_dict", "[", "'answer'", "]", "=", "answer", "\n", "return_dict", "[", "'score'", "]", "=", "score", "\n", "return_dict", "[", "'label_probs'", "]", "=", "outputs", "[", "'label_probs'", "]", "\n", "\n", "return", "sanitize", "(", "return_dict", ")", "", "", "", ""]]}