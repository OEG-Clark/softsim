{"home.repos.pwc.inspect_result.marctom_POTAIS.None.run.RewScale.__init__": [[15, 18], ["gym.RewardWrapper.__init__"], "methods", ["home.repos.pwc.inspect_result.marctom_POTAIS.None.algorithm.AdamOptimizer.__init__"], ["    ", "def", "__init__", "(", "self", ",", "env", ",", "scale", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "env", ")", "\n", "self", ".", "scale", "=", "scale", "\n", "\n"]], "home.repos.pwc.inspect_result.marctom_POTAIS.None.run.RewScale.reward": [[19, 21], ["None"], "methods", ["None"], ["", "def", "reward", "(", "self", ",", "r", ")", ":", "\n", "        ", "return", "r", "*", "self", ".", "scale", "\n", "\n"]], "home.repos.pwc.inspect_result.marctom_POTAIS.None.run.train": [[23, 60], ["logger.configure", "set_global_seeds", "U.make_session().__enter__", "run.RewScale", "learn", "RewScale.close", "mlp_policy.MlpPolicy", "gym.make", "U.make_session"], "function", ["home.repos.pwc.inspect_result.marctom_POTAIS.None.algorithm.learn"], ["", "", "def", "train", "(", "args", ",", "seed", ",", "num", ")", ":", "\n", "    ", "os", ".", "environ", "[", "'CUDA_VISIBLE_DEVICES'", "]", "=", "\"\"", "\n", "\n", "from", "baselines", ".", "common", "import", "tf_util", "as", "U", "\n", "from", "baselines", "import", "logger", "\n", "from", "baselines", ".", "ppo1", "import", "mlp_policy", "\n", "from", "baselines", ".", "common", "import", "set_global_seeds", "\n", "from", "algorithm", "import", "learn", "\n", "\n", "logger", ".", "configure", "(", ")", "\n", "workerseed", "=", "seed", "+", "10000", "*", "num", "\n", "set_global_seeds", "(", "workerseed", ")", "\n", "\n", "U", ".", "make_session", "(", "num_cpu", "=", "1", ")", ".", "__enter__", "(", ")", "\n", "\n", "def", "policy_fn", "(", "name", ",", "ob_space", ",", "ac_space", ")", ":", "\n", "        ", "return", "mlp_policy", ".", "MlpPolicy", "(", "name", "=", "name", ",", "ob_space", "=", "ob_space", ",", "\n", "ac_space", "=", "ac_space", ",", "\n", "hid_size", "=", "64", ",", "num_hid_layers", "=", "2", ")", "\n", "\n", "", "env", "=", "RewScale", "(", "gym", ".", "make", "(", "args", ".", "env", ")", ",", "args", ".", "reward_scale", ")", "\n", "results", "=", "learn", "(", "env", "=", "env", ",", "\n", "policy_fn", "=", "policy_fn", ",", "\n", "max_timesteps", "=", "args", ".", "num_timesteps", ",", "\n", "timesteps_per_actorbatch", "=", "2048", ",", "\n", "clip_param", "=", "args", ".", "clip", ",", "\n", "entcoeff", "=", "0.0", ",", "\n", "optim_epochs", "=", "10", ",", "\n", "optim_stepsize", "=", "args", ".", "lr", ",", "\n", "optim_batchsize", "=", "64", ",", "\n", "gamma", "=", "0.99", ",", "\n", "lam", "=", "0.95", ",", "\n", "alphas", "=", "args", ".", "alphas", ",", "\n", "schedule", "=", "args", ".", "schedule", ",", "\n", "return_mv_avg", "=", "args", ".", "return_mv_avg", ")", "\n", "env", ".", "close", "(", ")", "\n", "return", "results", "\n", "\n"]], "home.repos.pwc.inspect_result.marctom_POTAIS.None.run.main": [[62, 91], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.parse_args", "pathlib.Path().mkdir", "float", "multiprocessing.Pool", "pool.starmap", "open", "min", "pickle.dump", "parser.parse_args.alphas.split", "random.randint", "range", "pathlib.Path", "map", "numpy.vstack", "len"], "function", ["None"], ["", "def", "main", "(", ")", ":", "\n", "    ", "parser", "=", "argparse", ".", "ArgumentParser", "(", ")", "\n", "parser", ".", "add_argument", "(", "'--env'", ",", "required", "=", "True", ",", "type", "=", "str", ")", "\n", "parser", ".", "add_argument", "(", "'--num_seeds'", ",", "default", "=", "1", ",", "type", "=", "int", ")", "\n", "parser", ".", "add_argument", "(", "'--num_timesteps'", ",", "required", "=", "True", ",", "type", "=", "int", ")", "\n", "parser", ".", "add_argument", "(", "'--alphas'", ",", "required", "=", "True", ",", "type", "=", "str", ")", "\n", "parser", ".", "add_argument", "(", "'--reward_scale'", ",", "default", "=", "1", ",", "type", "=", "float", ")", "\n", "parser", ".", "add_argument", "(", "'--clip'", ",", "default", "=", "0.2", ",", "type", "=", "float", ")", "\n", "parser", ".", "add_argument", "(", "'--return_mv_avg'", ",", "default", "=", "200", ",", "type", "=", "int", ")", "\n", "parser", ".", "add_argument", "(", "'--lr'", ",", "default", "=", "3e-4", ",", "type", "=", "float", ")", "\n", "parser", ".", "add_argument", "(", "'--schedule'", ",", "default", "=", "'linear'", ",", "type", "=", "str", ",", "\n", "help", "=", "'Schedule for learning rate, linear or constant'", ")", "\n", "\n", "args", "=", "parser", ".", "parse_args", "(", ")", "\n", "args", ".", "alphas", "=", "[", "float", "(", "b", ")", "for", "b", "in", "args", ".", "alphas", ".", "split", "(", "' '", ")", "]", "\n", "\n", "tasks", "=", "[", "(", "args", ",", "random", ".", "randint", "(", "0", ",", "2", "**", "32", ")", ",", "i", ")", "\n", "for", "i", "in", "range", "(", "args", ".", "num_seeds", ")", "]", "\n", "\n", "with", "mp", ".", "Pool", "(", "args", ".", "num_seeds", ")", "as", "pool", ":", "\n", "        ", "results", "=", "pool", ".", "starmap", "(", "train", ",", "tasks", ")", "\n", "\n", "", "Path", "(", "'results'", ")", ".", "mkdir", "(", "exist_ok", "=", "True", ")", "\n", "name", "=", "'results/results_{}_alphas-{}.pkl'", ".", "format", "(", "\n", "args", ".", "env", ",", "'--'", ".", "join", "(", "map", "(", "str", ",", "args", ".", "alphas", ")", ")", ")", "\n", "with", "open", "(", "name", ",", "'wb'", ")", "as", "f", ":", "\n", "        ", "minlen", "=", "min", "(", "len", "(", "r", ")", "for", "r", "in", "results", ")", "\n", "results", "=", "np", ".", "vstack", "(", "[", "r", "[", ":", "minlen", "]", "for", "r", "in", "results", "]", ")", "/", "args", ".", "reward_scale", "\n", "pickle", ".", "dump", "(", "results", ",", "f", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.marctom_POTAIS.None.algorithm.AdamOptimizer.__init__": [[17, 28], ["sum", "numpy.zeros", "numpy.zeros", "baselines.SetFromFlat", "baselines.GetFlat", "baselines.numel"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "var_list", ",", "beta1", "=", "0.9", ",", "beta2", "=", "0.999", ",", "epsilon", "=", "1e-08", ")", ":", "\n", "        ", "self", ".", "var_list", "=", "var_list", "\n", "self", ".", "beta1", "=", "beta1", "\n", "self", ".", "beta2", "=", "beta2", "\n", "self", ".", "epsilon", "=", "epsilon", "\n", "size", "=", "sum", "(", "U", ".", "numel", "(", "v", ")", "for", "v", "in", "var_list", ")", "\n", "self", ".", "m", "=", "np", ".", "zeros", "(", "size", ",", "'float32'", ")", "\n", "self", ".", "v", "=", "np", ".", "zeros", "(", "size", ",", "'float32'", ")", "\n", "self", ".", "t", "=", "0", "\n", "self", ".", "setfromflat", "=", "U", ".", "SetFromFlat", "(", "var_list", ")", "\n", "self", ".", "getflat", "=", "U", ".", "GetFlat", "(", "var_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.marctom_POTAIS.None.algorithm.AdamOptimizer.update": [[29, 38], ["g.astype.astype.astype", "algorithm.AdamOptimizer.setfromflat", "numpy.sqrt", "numpy.sqrt", "algorithm.AdamOptimizer.getflat"], "methods", ["None"], ["", "def", "update", "(", "self", ",", "g", ",", "stepsize", ")", ":", "\n", "        ", "g", "=", "g", ".", "astype", "(", "'float32'", ")", "\n", "self", ".", "t", "+=", "1", "\n", "a", "=", "stepsize", "*", "np", ".", "sqrt", "(", "1", "-", "self", ".", "beta2", "**", "self", ".", "t", ")", "/", "(", "\n", "1", "-", "self", ".", "beta1", "**", "self", ".", "t", ")", "\n", "self", ".", "m", "=", "self", ".", "beta1", "*", "self", ".", "m", "+", "(", "1", "-", "self", ".", "beta1", ")", "*", "g", "\n", "self", ".", "v", "=", "self", ".", "beta2", "*", "self", ".", "v", "+", "(", "1", "-", "self", ".", "beta2", ")", "*", "(", "g", "*", "g", ")", "\n", "step", "=", "(", "-", "a", ")", "*", "self", ".", "m", "/", "(", "np", ".", "sqrt", "(", "self", ".", "v", ")", "+", "self", ".", "epsilon", ")", "\n", "self", ".", "setfromflat", "(", "self", ".", "getflat", "(", ")", "+", "step", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.marctom_POTAIS.None.algorithm.learn": [[40, 190], ["policy_fn", "policy_fn", "tensorflow.placeholder", "tensorflow.placeholder", "tensorflow.placeholder", "tensorflow.placeholder", "baselines.get_placeholder_cached", "policy_fn.pdtype.sample_placeholder", "policy_fn.pd.kl", "policy_fn.pd.entropy", "tensorflow.reduce_mean", "tensorflow.reduce_mean", "tensorflow.cast", "sum", "tensorflow.exp", "tensorflow.reduce_mean", "policy_fn.get_trainable_variables", "baselines.function", "algorithm.AdamOptimizer", "baselines.function", "baselines.function", "baselines.initialize", "baselines.ppo1.pposgd_simple.traj_segment_generator", "time.time", "collections.deque", "collections.deque", "policy_fn.pd.logp", "policy_fn.pd.logp", "tensorflow.concat", "tensorflow.where", "range", "tensorflow.clip_by_value", "tensorflow.reduce_mean", "tensorflow.square", "baselines.logger.log", "baselines.ppo1.pposgd_simple.traj_segment_generator.__next__", "algorithm.add_vtarg_and_adv", "baselines.common.Dataset", "hasattr", "U.function.", "baselines.logger.log", "baselines.logger.log", "range", "baselines.logger.log", "baselines.common.Dataset.iterate_once", "numpy.vstack().mean", "baselines.logger.log", "baselines.common.zipsame", "baselines.logger.record_tabular", "map", "collections.deque.extend", "collections.deque.extend", "baselines.logger.record_tabular", "results.append", "baselines.logger.record_tabular", "len", "sum", "baselines.logger.record_tabular", "baselines.logger.record_tabular", "baselines.logger.record_tabular", "baselines.logger.record_tabular", "baselines.logger.record_tabular", "baselines.logger.dump_tabular", "tensorflow.zeros_like", "tensorflow.where", "algorithm.learn.get_shift"], "function", ["home.repos.pwc.inspect_result.marctom_POTAIS.None.algorithm.add_vtarg_and_adv"], ["", "", "def", "learn", "(", "env", ",", "policy_fn", ",", "*", ",", "\n", "timesteps_per_actorbatch", ",", "\n", "clip_param", ",", "\n", "entcoeff", ",", "\n", "optim_epochs", ",", "\n", "optim_stepsize", ",", "\n", "optim_batchsize", ",", "\n", "gamma", ",", "\n", "lam", ",", "\n", "max_timesteps", ",", "\n", "alphas", ",", "\n", "schedule", ",", "\n", "return_mv_avg", ",", "\n", "adam_epsilon", "=", "1e-5", ")", ":", "\n", "    ", "ob_space", "=", "env", ".", "observation_space", "\n", "ac_space", "=", "env", ".", "action_space", "\n", "pi", "=", "policy_fn", "(", "\"pi\"", ",", "ob_space", ",", "ac_space", ")", "\n", "oldpi", "=", "policy_fn", "(", "\"oldpi\"", ",", "ob_space", ",", "ac_space", ")", "\n", "atarg", "=", "tf", ".", "placeholder", "(", "dtype", "=", "tf", ".", "float32", ",", "shape", "=", "[", "None", "]", ")", "\n", "new", "=", "tf", ".", "placeholder", "(", "dtype", "=", "tf", ".", "float32", ",", "shape", "=", "[", "None", "]", ")", "\n", "ret", "=", "tf", ".", "placeholder", "(", "dtype", "=", "tf", ".", "float32", ",", "shape", "=", "[", "None", "]", ")", "\n", "\n", "lrmult", "=", "tf", ".", "placeholder", "(", "name", "=", "'lrmult'", ",", "dtype", "=", "tf", ".", "float32", ",", "shape", "=", "[", "]", ")", "\n", "\n", "ob", "=", "U", ".", "get_placeholder_cached", "(", "name", "=", "\"ob\"", ")", "\n", "ac", "=", "pi", ".", "pdtype", ".", "sample_placeholder", "(", "[", "None", "]", ")", "\n", "\n", "kloldnew", "=", "oldpi", ".", "pd", ".", "kl", "(", "pi", ".", "pd", ")", "\n", "ent", "=", "pi", ".", "pd", ".", "entropy", "(", ")", "\n", "meankl", "=", "tf", ".", "reduce_mean", "(", "kloldnew", ")", "\n", "meanent", "=", "tf", ".", "reduce_mean", "(", "ent", ")", "\n", "pol_entpen", "=", "(", "-", "entcoeff", ")", "*", "meanent", "\n", "\n", "log_ratio", "=", "pi", ".", "pd", ".", "logp", "(", "ac", ")", "-", "oldpi", ".", "pd", ".", "logp", "(", "ac", ")", "\n", "\n", "bool_new", "=", "tf", ".", "cast", "(", "new", ",", "tf", ".", "bool", ")", "\n", "\n", "def", "get_shift", "(", "i", ")", ":", "\n", "        ", "shift", "=", "tf", ".", "concat", "(", "[", "tf", ".", "zeros", "(", "(", "i", ",", ")", ")", ",", "log_ratio", "[", ":", "-", "i", "]", "]", ",", "0", ")", "\n", "shift", "=", "tf", ".", "where", "(", "bool_new", ",", "tf", ".", "zeros_like", "(", "shift", ")", ",", "shift", ")", "\n", "for", "_", "in", "range", "(", "1", ",", "i", ")", ":", "\n", "            ", "shift", "=", "tf", ".", "where", "(", "tf", ".", "concat", "(", "[", "tf", ".", "ones", "(", "(", "i", ",", ")", ",", "dtype", "=", "tf", ".", "bool", ")", ",", "bool_new", "[", ":", "-", "i", "]", "]", ",", "0", ")", ",", "\n", "tf", ".", "zeros_like", "(", "shift", ")", ",", "shift", ")", "\n", "", "return", "shift", "\n", "\n", "", "shifts", "=", "[", "log_ratio", "]", "+", "[", "get_shift", "(", "i", ")", "for", "i", "in", "range", "(", "1", ",", "len", "(", "alphas", ")", ")", "]", "\n", "is_log_ratio", "=", "sum", "(", "b", "*", "s", "for", "b", ",", "s", "in", "zip", "(", "alphas", ",", "shifts", ")", ")", "\n", "\n", "ratio", "=", "tf", ".", "exp", "(", "is_log_ratio", ")", "\n", "surr1", "=", "ratio", "*", "atarg", "\n", "surr2", "=", "tf", ".", "clip_by_value", "(", "ratio", ",", "1.0", "-", "clip_param", ",", "1.0", "+", "clip_param", ")", "*", "atarg", "\n", "pol_surr", "=", "-", "tf", ".", "reduce_mean", "(", "tf", ".", "minimum", "(", "surr1", ",", "surr2", ")", ")", "\n", "vf_loss", "=", "tf", ".", "reduce_mean", "(", "tf", ".", "square", "(", "pi", ".", "vpred", "-", "ret", ")", ")", "\n", "total_loss", "=", "pol_surr", "+", "pol_entpen", "+", "vf_loss", "\n", "losses", "=", "[", "pol_surr", ",", "pol_entpen", ",", "vf_loss", ",", "meankl", ",", "meanent", "]", "\n", "loss_names", "=", "[", "\"pol_surr\"", ",", "\"pol_entpen\"", ",", "\"vf_loss\"", ",", "\"kl\"", ",", "\"ent\"", "]", "\n", "\n", "var_list", "=", "pi", ".", "get_trainable_variables", "(", ")", "\n", "lossandgrad", "=", "U", ".", "function", "(", "[", "ob", ",", "ac", ",", "atarg", ",", "ret", ",", "lrmult", ",", "new", "]", ",", "\n", "losses", "+", "[", "U", ".", "flatgrad", "(", "total_loss", ",", "var_list", ")", "]", ")", "\n", "adam", "=", "AdamOptimizer", "(", "var_list", ",", "epsilon", "=", "adam_epsilon", ")", "\n", "\n", "assign_old_eq_new", "=", "U", ".", "function", "(", "[", "]", ",", "[", "]", ",", "updates", "=", "[", "tf", ".", "assign", "(", "oldv", ",", "newv", ")", "\n", "for", "(", "oldv", ",", "newv", ")", "in", "zipsame", "(", "\n", "oldpi", ".", "get_variables", "(", ")", ",", "pi", ".", "get_variables", "(", ")", ")", "]", ")", "\n", "compute_losses", "=", "U", ".", "function", "(", "[", "ob", ",", "ac", ",", "atarg", ",", "ret", ",", "lrmult", ",", "new", "]", ",", "losses", ")", "\n", "\n", "U", ".", "initialize", "(", ")", "\n", "\n", "seg_gen", "=", "traj_segment_generator", "(", "pi", ",", "env", ",", "timesteps_per_actorbatch", ",", "\n", "stochastic", "=", "True", ")", "\n", "\n", "episodes_so_far", "=", "0", "\n", "timesteps_so_far", "=", "0", "\n", "iters_so_far", "=", "0", "\n", "tstart", "=", "time", ".", "time", "(", ")", "\n", "\n", "lenbuffer", "=", "deque", "(", "maxlen", "=", "200", ")", "\n", "rewbuffer", "=", "deque", "(", "maxlen", "=", "return_mv_avg", ")", "\n", "results", "=", "[", "]", "\n", "\n", "while", "True", ":", "\n", "        ", "if", "timesteps_so_far", ">", "max_timesteps", ":", "\n", "            ", "break", "\n", "\n", "", "if", "schedule", "==", "'constant'", ":", "\n", "            ", "cur_lrmult", "=", "1.0", "\n", "", "elif", "schedule", "==", "'linear'", ":", "\n", "            ", "cur_lrmult", "=", "max", "(", "1.0", "-", "float", "(", "timesteps_so_far", ")", "/", "max_timesteps", ",", "0", ")", "\n", "", "else", ":", "\n", "            ", "raise", "NotImplementedError", "(", ")", "\n", "\n", "", "logger", ".", "log", "(", "\"********** Iteration %i ************\"", "%", "iters_so_far", ")", "\n", "\n", "seg", "=", "seg_gen", ".", "__next__", "(", ")", "\n", "add_vtarg_and_adv", "(", "seg", ",", "gamma", ",", "lam", ")", "\n", "ob", ",", "ac", ",", "atarg", ",", "tdlamret", "=", "seg", "[", "\"ob\"", "]", ",", "seg", "[", "\"ac\"", "]", ",", "seg", "[", "\"adv\"", "]", ",", "seg", "[", "\n", "\"tdlamret\"", "]", "\n", "vpredbefore", "=", "seg", "[", "\"vpred\"", "]", "\n", "atarg", "=", "(", "atarg", "-", "atarg", ".", "mean", "(", ")", ")", "/", "atarg", ".", "std", "(", ")", "\n", "d", "=", "Dataset", "(", "\n", "dict", "(", "ob", "=", "ob", ",", "ac", "=", "ac", ",", "atarg", "=", "atarg", ",", "vtarg", "=", "tdlamret", ",", "new", "=", "seg", "[", "\"new\"", "]", ")", ")", "\n", "optim_batchsize", "=", "optim_batchsize", "or", "ob", ".", "shape", "[", "0", "]", "\n", "\n", "if", "hasattr", "(", "pi", ",", "\"ob_rms\"", ")", ":", "pi", ".", "ob_rms", ".", "update", "(", "ob", ")", "\n", "\n", "assign_old_eq_new", "(", ")", "\n", "logger", ".", "log", "(", "\"Optimizing...\"", ")", "\n", "logger", ".", "log", "(", "fmt_row", "(", "13", ",", "loss_names", ")", ")", "\n", "for", "_", "in", "range", "(", "optim_epochs", ")", ":", "\n", "            ", "losses", "=", "[", "]", "\n", "for", "batch", "in", "d", ".", "iterate_once", "(", "optim_batchsize", ")", ":", "\n", "                ", "*", "newlosses", ",", "g", "=", "lossandgrad", "(", "batch", "[", "\"ob\"", "]", ",", "batch", "[", "\"ac\"", "]", ",", "\n", "batch", "[", "\"atarg\"", "]", ",", "batch", "[", "\"vtarg\"", "]", ",", "\n", "cur_lrmult", ",", "batch", "[", "\"new\"", "]", ")", "\n", "adam", ".", "update", "(", "g", ",", "optim_stepsize", "*", "cur_lrmult", ")", "\n", "losses", ".", "append", "(", "newlosses", ")", "\n", "", "logger", ".", "log", "(", "fmt_row", "(", "13", ",", "np", ".", "mean", "(", "losses", ",", "axis", "=", "0", ")", ")", ")", "\n", "\n", "", "logger", ".", "log", "(", "\"Evaluating losses...\"", ")", "\n", "losses", "=", "[", "]", "\n", "for", "batch", "in", "d", ".", "iterate_once", "(", "optim_batchsize", ")", ":", "\n", "            ", "newlosses", "=", "compute_losses", "(", "batch", "[", "\"ob\"", "]", ",", "batch", "[", "\"ac\"", "]", ",", "batch", "[", "\"atarg\"", "]", ",", "\n", "batch", "[", "\"vtarg\"", "]", ",", "cur_lrmult", ",", "batch", "[", "\"new\"", "]", ")", "\n", "losses", ".", "append", "(", "newlosses", ")", "\n", "\n", "", "meanlosses", "=", "np", ".", "vstack", "(", "losses", ")", ".", "mean", "(", "0", ")", "\n", "logger", ".", "log", "(", "fmt_row", "(", "13", ",", "meanlosses", ")", ")", "\n", "for", "(", "lossval", ",", "name", ")", "in", "zipsame", "(", "meanlosses", ",", "loss_names", ")", ":", "\n", "            ", "logger", ".", "record_tabular", "(", "\"loss_\"", "+", "name", ",", "lossval", ")", "\n", "", "logger", ".", "record_tabular", "(", "\"ev_tdlam_before\"", ",", "\n", "explained_variance", "(", "vpredbefore", ",", "tdlamret", ")", ")", "\n", "listoflrpairs", "=", "[", "(", "seg", "[", "\"ep_lens\"", "]", ",", "seg", "[", "\"ep_rets\"", "]", ")", "]", "\n", "lens", ",", "rews", "=", "map", "(", "flatten_lists", ",", "zip", "(", "*", "listoflrpairs", ")", ")", "\n", "lenbuffer", ".", "extend", "(", "lens", ")", "\n", "rewbuffer", ".", "extend", "(", "rews", ")", "\n", "logger", ".", "record_tabular", "(", "\"EpRewMean\"", ",", "np", ".", "mean", "(", "rewbuffer", ")", ")", "\n", "results", ".", "append", "(", "np", ".", "mean", "(", "rewbuffer", ")", ")", "\n", "logger", ".", "record_tabular", "(", "\"EpThisIter\"", ",", "len", "(", "lens", ")", ")", "\n", "episodes_so_far", "+=", "len", "(", "lens", ")", "\n", "timesteps_so_far", "+=", "sum", "(", "lens", ")", "\n", "iters_so_far", "+=", "1", "\n", "logger", ".", "record_tabular", "(", "\"AvgEpisodeLen\"", ",", "np", ".", "mean", "(", "lenbuffer", ")", ")", "\n", "logger", ".", "record_tabular", "(", "\"EpisodesSoFar\"", ",", "episodes_so_far", ")", "\n", "logger", ".", "record_tabular", "(", "\"TimestepsSoFar\"", ",", "timesteps_so_far", ")", "\n", "logger", ".", "record_tabular", "(", "\"TimeElapsed [h]\"", ",", "(", "time", ".", "time", "(", ")", "-", "tstart", ")", "/", "3600", ")", "\n", "logger", ".", "record_tabular", "(", "\"Timesteps/sec\"", ",", "\n", "timesteps_so_far", "/", "(", "time", ".", "time", "(", ")", "-", "tstart", ")", ")", "\n", "logger", ".", "dump_tabular", "(", ")", "\n", "", "return", "results", "\n", "\n"]], "home.repos.pwc.inspect_result.marctom_POTAIS.None.algorithm.add_vtarg_and_adv": [[192, 204], ["numpy.append", "numpy.append", "len", "numpy.empty", "reversed", "range"], "function", ["None"], ["", "def", "add_vtarg_and_adv", "(", "seg", ",", "gamma", ",", "lam", ")", ":", "\n", "    ", "new", "=", "np", ".", "append", "(", "seg", "[", "\"new\"", "]", ",", "0", ")", "\n", "vpred", "=", "np", ".", "append", "(", "seg", "[", "\"vpred\"", "]", ",", "seg", "[", "\"nextvpred\"", "]", ")", "\n", "T", "=", "len", "(", "seg", "[", "\"rew\"", "]", ")", "\n", "seg", "[", "\"adv\"", "]", "=", "gaelam", "=", "np", ".", "empty", "(", "T", ",", "'float32'", ")", "\n", "rew", "=", "seg", "[", "\"rew\"", "]", "\n", "lastgaelam", "=", "0", "\n", "for", "t", "in", "reversed", "(", "range", "(", "T", ")", ")", ":", "\n", "        ", "nonterminal", "=", "1", "-", "new", "[", "t", "+", "1", "]", "\n", "delta", "=", "rew", "[", "t", "]", "+", "gamma", "*", "vpred", "[", "t", "+", "1", "]", "*", "nonterminal", "-", "vpred", "[", "t", "]", "\n", "gaelam", "[", "t", "]", "=", "lastgaelam", "=", "delta", "+", "gamma", "*", "lam", "*", "nonterminal", "*", "lastgaelam", "\n", "", "seg", "[", "\"tdlamret\"", "]", "=", "seg", "[", "\"adv\"", "]", "+", "seg", "[", "\"vpred\"", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.marctom_POTAIS.None.algorithm.flatten_lists": [[206, 208], ["None"], "function", ["None"], ["", "def", "flatten_lists", "(", "listoflists", ")", ":", "\n", "    ", "return", "[", "el", "for", "list_", "in", "listoflists", "for", "el", "in", "list_", "]", "\n", "", ""]]}