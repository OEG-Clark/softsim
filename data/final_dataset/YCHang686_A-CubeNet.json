{"home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.__init__": [[20, 23], ["utility.timer.tic"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.tic"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "self", ".", "acc", "=", "0", "\n", "self", ".", "tic", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.tic": [[24, 26], ["time.time"], "methods", ["None"], ["", "def", "tic", "(", "self", ")", ":", "\n", "        ", "self", ".", "t0", "=", "time", ".", "time", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.toc": [[27, 31], ["time.time", "time.time"], "methods", ["None"], ["", "def", "toc", "(", "self", ",", "restart", "=", "False", ")", ":", "\n", "        ", "diff", "=", "time", ".", "time", "(", ")", "-", "self", ".", "t0", "\n", "if", "restart", ":", "self", ".", "t0", "=", "time", ".", "time", "(", ")", "\n", "return", "diff", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.hold": [[32, 34], ["utility.timer.toc"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.toc"], ["", "def", "hold", "(", "self", ")", ":", "\n", "        ", "self", ".", "acc", "+=", "self", ".", "toc", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.release": [[35, 40], ["None"], "methods", ["None"], ["", "def", "release", "(", "self", ")", ":", "\n", "        ", "ret", "=", "self", ".", "acc", "\n", "self", ".", "acc", "=", "0", "\n", "\n", "return", "ret", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.reset": [[41, 43], ["None"], "methods", ["None"], ["", "def", "reset", "(", "self", ")", ":", "\n", "        ", "self", ".", "acc", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.__init__": [[45, 81], ["torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "datetime.datetime.now().strftime", "os.makedirs", "os.makedirs", "open", "os.path.join", "os.path.join", "os.path.exists", "os.system", "utility.checkpoint.get_path", "os.makedirs", "os.path.exists", "utility.checkpoint.get_path", "open", "f.write", "vars", "f.write", "datetime.datetime.now", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "print", "utility.checkpoint.get_path", "utility.checkpoint.get_path", "utility.checkpoint.get_path", "f.write", "utility.checkpoint.get_path", "len", "getattr"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.get_path", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.get_path", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.get_path", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.get_path", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.get_path", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.get_path"], ["    ", "def", "__init__", "(", "self", ",", "args", ")", ":", "\n", "        ", "self", ".", "args", "=", "args", "\n", "self", ".", "ok", "=", "True", "\n", "self", ".", "log", "=", "torch", ".", "Tensor", "(", ")", "\n", "now", "=", "datetime", ".", "datetime", ".", "now", "(", ")", ".", "strftime", "(", "'%Y-%m-%d-%H:%M:%S'", ")", "\n", "\n", "if", "not", "args", ".", "load", ":", "\n", "            ", "if", "not", "args", ".", "save", ":", "\n", "                ", "args", ".", "save", "=", "now", "\n", "", "self", ".", "dir", "=", "os", ".", "path", ".", "join", "(", "'..'", ",", "'experiment'", ",", "args", ".", "save", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "dir", "=", "os", ".", "path", ".", "join", "(", "'..'", ",", "'experiment'", ",", "args", ".", "load", ")", "\n", "if", "os", ".", "path", ".", "exists", "(", "self", ".", "dir", ")", ":", "\n", "                ", "self", ".", "log", "=", "torch", ".", "load", "(", "self", ".", "get_path", "(", "'psnr_log.pt'", ")", ")", "\n", "print", "(", "'Continue from epoch {}...'", ".", "format", "(", "len", "(", "self", ".", "log", ")", ")", ")", "\n", "", "else", ":", "\n", "                ", "args", ".", "load", "=", "''", "\n", "\n", "", "", "if", "args", ".", "reset", ":", "\n", "            ", "os", ".", "system", "(", "'rm -rf '", "+", "self", ".", "dir", ")", "\n", "args", ".", "load", "=", "''", "\n", "\n", "", "os", ".", "makedirs", "(", "self", ".", "dir", ",", "exist_ok", "=", "True", ")", "\n", "os", ".", "makedirs", "(", "self", ".", "get_path", "(", "'model'", ")", ",", "exist_ok", "=", "True", ")", "\n", "for", "d", "in", "args", ".", "data_test", ":", "\n", "            ", "os", ".", "makedirs", "(", "self", ".", "get_path", "(", "'results-{}'", ".", "format", "(", "d", ")", ")", ",", "exist_ok", "=", "True", ")", "\n", "\n", "", "open_type", "=", "'a'", "if", "os", ".", "path", ".", "exists", "(", "self", ".", "get_path", "(", "'log.txt'", ")", ")", "else", "'w'", "\n", "self", ".", "log_file", "=", "open", "(", "self", ".", "get_path", "(", "'log.txt'", ")", ",", "open_type", ")", "\n", "with", "open", "(", "self", ".", "get_path", "(", "'config.txt'", ")", ",", "open_type", ")", "as", "f", ":", "\n", "            ", "f", ".", "write", "(", "now", "+", "'\\n\\n'", ")", "\n", "for", "arg", "in", "vars", "(", "args", ")", ":", "\n", "                ", "f", ".", "write", "(", "'{}: {}\\n'", ".", "format", "(", "arg", ",", "getattr", "(", "args", ",", "arg", ")", ")", ")", "\n", "", "f", ".", "write", "(", "'\\n'", ")", "\n", "\n", "", "self", ".", "n_processes", "=", "8", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.get_path": [[82, 84], ["os.path.join"], "methods", ["None"], ["", "def", "get_path", "(", "self", ",", "*", "subdir", ")", ":", "\n", "        ", "return", "os", ".", "path", ".", "join", "(", "self", ".", "dir", ",", "*", "subdir", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.save": [[85, 93], ["trainer.model.save", "trainer.loss.save", "trainer.optimizer.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "utility.checkpoint.get_path", "utility.checkpoint.get_path"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.get_path", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.get_path"], ["", "def", "save", "(", "self", ",", "trainer", ",", "epoch", ",", "is_best", "=", "False", ")", ":", "\n", "        ", "trainer", ".", "model", ".", "save", "(", "self", ".", "get_path", "(", "'model'", ")", ",", "epoch", ",", "is_best", "=", "is_best", ")", "\n", "trainer", ".", "loss", ".", "save", "(", "self", ".", "dir", ")", "\n", "#trainer.loss.plot_loss(self.dir, epoch)", "\n", "\n", "#self.plot_psnr(epoch)", "\n", "trainer", ".", "optimizer", ".", "save", "(", "self", ".", "dir", ")", "\n", "torch", ".", "save", "(", "self", ".", "log", ",", "self", ".", "get_path", "(", "'psnr_log.pt'", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.add_log": [[94, 96], ["torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat"], "methods", ["None"], ["", "def", "add_log", "(", "self", ",", "log", ")", ":", "\n", "        ", "self", ".", "log", "=", "torch", ".", "cat", "(", "[", "self", ".", "log", ",", "log", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.write_log": [[97, 103], ["print", "utility.checkpoint.log_file.write", "utility.checkpoint.log_file.close", "open", "utility.checkpoint.get_path"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.get_path"], ["", "def", "write_log", "(", "self", ",", "log", ",", "refresh", "=", "False", ")", ":", "\n", "        ", "print", "(", "log", ")", "\n", "self", ".", "log_file", ".", "write", "(", "log", "+", "'\\n'", ")", "\n", "if", "refresh", ":", "\n", "            ", "self", ".", "log_file", ".", "close", "(", ")", "\n", "self", ".", "log_file", "=", "open", "(", "self", ".", "get_path", "(", "'log.txt'", ")", ",", "'a'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.done": [[104, 106], ["utility.checkpoint.log_file.close"], "methods", ["None"], ["", "", "def", "done", "(", "self", ")", ":", "\n", "        ", "self", ".", "log_file", ".", "close", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.plot_psnr": [[107, 125], ["numpy.linspace", "enumerate", "matplotlib.figure", "matplotlib.figure", "matplotlib.title", "matplotlib.title", "enumerate", "matplotlib.legend", "matplotlib.legend", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.grid", "matplotlib.grid", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "matplotlib.plot", "matplotlib.plot", "utility.checkpoint.get_path", "utility.checkpoint.log[].numpy"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.get_path"], ["", "def", "plot_psnr", "(", "self", ",", "epoch", ")", ":", "\n", "        ", "axis", "=", "np", ".", "linspace", "(", "1", ",", "epoch", ",", "epoch", ")", "\n", "for", "idx_data", ",", "d", "in", "enumerate", "(", "self", ".", "args", ".", "data_test", ")", ":", "\n", "            ", "label", "=", "'SR on {}'", ".", "format", "(", "d", ")", "\n", "fig", "=", "plt", ".", "figure", "(", ")", "\n", "plt", ".", "title", "(", "label", ")", "\n", "for", "idx_scale", ",", "scale", "in", "enumerate", "(", "self", ".", "args", ".", "scale", ")", ":", "\n", "                ", "plt", ".", "plot", "(", "\n", "axis", ",", "\n", "self", ".", "log", "[", ":", ",", "idx_data", ",", "idx_scale", "]", ".", "numpy", "(", ")", ",", "\n", "label", "=", "'Scale {}'", ".", "format", "(", "scale", ")", "\n", ")", "\n", "", "plt", ".", "legend", "(", ")", "\n", "plt", ".", "xlabel", "(", "'Epochs'", ")", "\n", "plt", ".", "ylabel", "(", "'PSNR'", ")", "\n", "plt", ".", "grid", "(", "True", ")", "\n", "plt", ".", "savefig", "(", "self", ".", "get_path", "(", "'test_{}.pdf'", ".", "format", "(", "d", ")", ")", ")", "\n", "plt", ".", "close", "(", "fig", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.begin_background": [[126, 142], ["multiprocessing.Queue", "multiprocessing.Process", "p.start", "range", "queue.empty", "queue.get", "imageio.imwrite", "tensor.numpy"], "methods", ["None"], ["", "", "def", "begin_background", "(", "self", ")", ":", "\n", "        ", "self", ".", "queue", "=", "Queue", "(", ")", "\n", "\n", "def", "bg_target", "(", "queue", ")", ":", "\n", "            ", "while", "True", ":", "\n", "                ", "if", "not", "queue", ".", "empty", "(", ")", ":", "\n", "                    ", "filename", ",", "tensor", "=", "queue", ".", "get", "(", ")", "\n", "if", "filename", "is", "None", ":", "break", "\n", "imageio", ".", "imwrite", "(", "filename", ",", "tensor", ".", "numpy", "(", ")", ")", "\n", "\n", "", "", "", "self", ".", "process", "=", "[", "\n", "Process", "(", "target", "=", "bg_target", ",", "args", "=", "(", "self", ".", "queue", ",", ")", ")", "for", "_", "in", "range", "(", "self", ".", "n_processes", ")", "\n", "]", "\n", "\n", "for", "p", "in", "self", ".", "process", ":", "p", ".", "start", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.end_background": [[143, 147], ["range", "utility.checkpoint.queue.put", "utility.checkpoint.queue.empty", "time.sleep", "p.join"], "methods", ["None"], ["", "def", "end_background", "(", "self", ")", ":", "\n", "        ", "for", "_", "in", "range", "(", "self", ".", "n_processes", ")", ":", "self", ".", "queue", ".", "put", "(", "(", "None", ",", "None", ")", ")", "\n", "while", "not", "self", ".", "queue", ".", "empty", "(", ")", ":", "time", ".", "sleep", "(", "1", ")", "\n", "for", "p", "in", "self", ".", "process", ":", "p", ".", "join", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.save_results": [[148, 160], ["utility.checkpoint.get_path", "zip", "v[].mul", "v[].mul.byte().permute().cpu", "utility.checkpoint.queue.put", "v[].mul.byte().permute", "v[].mul.byte"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.get_path"], ["", "def", "save_results", "(", "self", ",", "dataset", ",", "filename", ",", "save_list", ",", "scale", ")", ":", "\n", "        ", "if", "self", ".", "args", ".", "save_results", ":", "\n", "            ", "filename", "=", "self", ".", "get_path", "(", "\n", "'results-{}'", ".", "format", "(", "dataset", ".", "dataset", ".", "name", ")", ",", "\n", "'{}_x{}_'", ".", "format", "(", "filename", ",", "scale", ")", "\n", ")", "\n", "\n", "postfix", "=", "(", "'SR'", ",", "'HR'", ",", "'LR'", ")", "\n", "for", "v", ",", "p", "in", "zip", "(", "save_list", ",", "postfix", ")", ":", "\n", "                ", "normalized", "=", "v", "[", "0", "]", ".", "mul", "(", "255", "/", "self", ".", "args", ".", "rgb_range", ")", "\n", "tensor_cpu", "=", "normalized", ".", "byte", "(", ")", ".", "permute", "(", "1", ",", "2", ",", "0", ")", ".", "cpu", "(", ")", "\n", "self", ".", "queue", ".", "put", "(", "(", "'{}{}.png'", ".", "format", "(", "filename", ",", "p", ")", ",", "tensor_cpu", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.quantize": [[161, 164], ["img.mul().clamp().round().div", "img.mul().clamp().round", "img.mul().clamp", "img.mul"], "function", ["None"], ["", "", "", "", "def", "quantize", "(", "img", ",", "rgb_range", ")", ":", "\n", "    ", "pixel_range", "=", "255", "/", "rgb_range", "\n", "return", "img", ".", "mul", "(", "pixel_range", ")", ".", "clamp", "(", "0", ",", "255", ")", ".", "round", "(", ")", ".", "div", "(", "pixel_range", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.calc_psnr": [[165, 182], ["valid.pow().mean", "hr.nelement", "math.log10", "diff.mul().sum.size", "diff.mul().sum.mul().sum", "valid.pow", "diff.mul().sum.new_tensor().view", "diff.mul().sum.mul", "diff.mul().sum.new_tensor"], "function", ["None"], ["", "def", "calc_psnr", "(", "sr", ",", "hr", ",", "scale", ",", "rgb_range", ",", "dataset", "=", "None", ")", ":", "\n", "    ", "if", "hr", ".", "nelement", "(", ")", "==", "1", ":", "return", "0", "\n", "\n", "diff", "=", "(", "sr", "-", "hr", ")", "/", "rgb_range", "\n", "if", "dataset", "and", "dataset", ".", "dataset", ".", "benchmark", ":", "\n", "        ", "shave", "=", "scale", "\n", "if", "diff", ".", "size", "(", "1", ")", ">", "1", ":", "\n", "            ", "gray_coeffs", "=", "[", "65.738", ",", "129.057", ",", "25.064", "]", "\n", "convert", "=", "diff", ".", "new_tensor", "(", "gray_coeffs", ")", ".", "view", "(", "1", ",", "3", ",", "1", ",", "1", ")", "/", "256", "\n", "diff", "=", "diff", ".", "mul", "(", "convert", ")", ".", "sum", "(", "dim", "=", "1", ")", "\n", "", "", "else", ":", "\n", "        ", "shave", "=", "scale", "+", "6", "\n", "\n", "", "valid", "=", "diff", "[", "...", ",", "shave", ":", "-", "shave", ",", "shave", ":", "-", "shave", "]", "\n", "mse", "=", "valid", ".", "pow", "(", "2", ")", ".", "mean", "(", ")", "\n", "\n", "return", "-", "10", "*", "math", ".", "log10", "(", "mse", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.make_optimizer": [[183, 237], ["filter", "list", "CustomOptimizer", "CustomOptimizer._register_scheduler", "target.parameters", "map", "args.decay.split", "super().__init__", "scheduler_class", "torch.save", "torch.save", "torch.save", "utility..load_state_dict", "os.path.join", "utility..scheduler.step", "int", "utility..state_dict", "utility..get_dir", "torch.load", "torch.load", "torch.load", "range", "utility..scheduler.get_lr", "utility..get_dir", "utility..scheduler.step"], "function", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.acubenet.ACubeNet.load_state_dict", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.step", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.adversarial.Adversarial.state_dict", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.step"], ["", "def", "make_optimizer", "(", "args", ",", "target", ")", ":", "\n", "    ", "'''\n        make optimizer and scheduler together\n    '''", "\n", "# optimizer", "\n", "trainable", "=", "filter", "(", "lambda", "x", ":", "x", ".", "requires_grad", ",", "target", ".", "parameters", "(", ")", ")", "\n", "kwargs_optimizer", "=", "{", "'lr'", ":", "args", ".", "lr", ",", "'weight_decay'", ":", "args", ".", "weight_decay", "}", "\n", "\n", "if", "args", ".", "optimizer", "==", "'SGD'", ":", "\n", "        ", "optimizer_class", "=", "optim", ".", "SGD", "\n", "kwargs_optimizer", "[", "'momentum'", "]", "=", "args", ".", "momentum", "\n", "", "elif", "args", ".", "optimizer", "==", "'ADAM'", ":", "\n", "        ", "optimizer_class", "=", "optim", ".", "Adam", "\n", "kwargs_optimizer", "[", "'betas'", "]", "=", "args", ".", "betas", "\n", "kwargs_optimizer", "[", "'eps'", "]", "=", "args", ".", "epsilon", "\n", "", "elif", "args", ".", "optimizer", "==", "'RMSprop'", ":", "\n", "        ", "optimizer_class", "=", "optim", ".", "RMSprop", "\n", "kwargs_optimizer", "[", "'eps'", "]", "=", "args", ".", "epsilon", "\n", "\n", "# scheduler", "\n", "", "milestones", "=", "list", "(", "map", "(", "lambda", "x", ":", "int", "(", "x", ")", ",", "args", ".", "decay", ".", "split", "(", "'-'", ")", ")", ")", "\n", "kwargs_scheduler", "=", "{", "'milestones'", ":", "milestones", ",", "'gamma'", ":", "args", ".", "gamma", "}", "\n", "scheduler_class", "=", "lrs", ".", "MultiStepLR", "\n", "\n", "class", "CustomOptimizer", "(", "optimizer_class", ")", ":", "\n", "        ", "def", "__init__", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "            ", "super", "(", "CustomOptimizer", ",", "self", ")", ".", "__init__", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "\n", "", "def", "_register_scheduler", "(", "self", ",", "scheduler_class", ",", "**", "kwargs", ")", ":", "\n", "            ", "self", ".", "scheduler", "=", "scheduler_class", "(", "self", ",", "**", "kwargs", ")", "\n", "\n", "", "def", "save", "(", "self", ",", "save_dir", ")", ":", "\n", "            ", "torch", ".", "save", "(", "self", ".", "state_dict", "(", ")", ",", "self", ".", "get_dir", "(", "save_dir", ")", ")", "\n", "\n", "", "def", "load", "(", "self", ",", "load_dir", ",", "epoch", "=", "1", ")", ":", "\n", "            ", "self", ".", "load_state_dict", "(", "torch", ".", "load", "(", "self", ".", "get_dir", "(", "load_dir", ")", ")", ")", "\n", "if", "epoch", ">", "1", ":", "\n", "                ", "for", "_", "in", "range", "(", "epoch", ")", ":", "self", ".", "scheduler", ".", "step", "(", ")", "\n", "\n", "", "", "def", "get_dir", "(", "self", ",", "dir_path", ")", ":", "\n", "            ", "return", "os", ".", "path", ".", "join", "(", "dir_path", ",", "'optimizer.pt'", ")", "\n", "\n", "", "def", "schedule", "(", "self", ")", ":", "\n", "            ", "self", ".", "scheduler", ".", "step", "(", ")", "\n", "\n", "", "def", "get_lr", "(", "self", ")", ":", "\n", "            ", "return", "self", ".", "scheduler", ".", "get_lr", "(", ")", "[", "0", "]", "\n", "\n", "", "def", "get_last_epoch", "(", "self", ")", ":", "\n", "            ", "return", "self", ".", "scheduler", ".", "last_epoch", "\n", "\n", "", "", "optimizer", "=", "CustomOptimizer", "(", "trainable", ",", "**", "kwargs_optimizer", ")", "\n", "optimizer", ".", "_register_scheduler", "(", "scheduler_class", ",", "**", "kwargs_scheduler", ")", "\n", "return", "optimizer", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.main.main": [[13, 31], ["model.Model.Model", "VideoTester", "trainer.Trainer.test", "data.Data", "model.Model.Model", "trainer.Trainer", "checkpoint.done", "loss.Loss", "trainer.Trainer.terminate", "trainer.Trainer.train", "trainer.Trainer.test"], "function", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.videotester.VideoTester.test", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.done", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.trainer.Trainer.terminate", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.trainer.Trainer.train", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.videotester.VideoTester.test"], ["def", "main", "(", ")", ":", "\n", "    ", "global", "model", "\n", "if", "args", ".", "data_test", "==", "[", "'video'", "]", ":", "\n", "        ", "from", "videotester", "import", "VideoTester", "\n", "model", "=", "model", ".", "Model", "(", "args", ",", "checkpoint", ")", "\n", "t", "=", "VideoTester", "(", "args", ",", "model", ",", "checkpoint", ")", "\n", "t", ".", "test", "(", ")", "\n", "", "else", ":", "\n", "        ", "if", "checkpoint", ".", "ok", ":", "\n", "            ", "loader", "=", "data", ".", "Data", "(", "args", ")", "\n", "_model", "=", "model", ".", "Model", "(", "args", ",", "checkpoint", ")", "\n", "_loss", "=", "loss", ".", "Loss", "(", "args", ",", "checkpoint", ")", "if", "not", "args", ".", "test_only", "else", "None", "\n", "t", "=", "Trainer", "(", "args", ",", "loader", ",", "_model", ",", "_loss", ",", "checkpoint", ")", "\n", "while", "not", "t", ".", "terminate", "(", ")", ":", "\n", "                ", "t", ".", "train", "(", ")", "\n", "t", ".", "test", "(", ")", "\n", "\n", "", "checkpoint", ".", "done", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.trainer.Trainer.__init__": [[12, 27], ["utility.make_optimizer", "trainer.Trainer.optimizer.load", "len"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.make_optimizer", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load"], ["    ", "def", "__init__", "(", "self", ",", "args", ",", "loader", ",", "my_model", ",", "my_loss", ",", "ckp", ")", ":", "\n", "        ", "self", ".", "args", "=", "args", "\n", "self", ".", "scale", "=", "args", ".", "scale", "\n", "\n", "self", ".", "ckp", "=", "ckp", "\n", "self", ".", "loader_train", "=", "loader", ".", "loader_train", "\n", "self", ".", "loader_test", "=", "loader", ".", "loader_test", "\n", "self", ".", "model", "=", "my_model", "\n", "self", ".", "loss", "=", "my_loss", "\n", "self", ".", "optimizer", "=", "utility", ".", "make_optimizer", "(", "args", ",", "self", ".", "model", ")", "\n", "\n", "if", "self", ".", "args", ".", "load", "!=", "''", ":", "\n", "            ", "self", ".", "optimizer", ".", "load", "(", "ckp", ".", "dir", ",", "epoch", "=", "len", "(", "ckp", ".", "log", ")", ")", "\n", "\n", "", "self", ".", "error_last", "=", "1e8", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.trainer.Trainer.train": [[28, 73], ["trainer.Trainer.loss.step", "trainer.Trainer.optimizer.get_lr", "trainer.Trainer.ckp.write_log", "trainer.Trainer.loss.start_log", "trainer.Trainer.model.train", "trainer.Trainer.loader_train.dataset.set_scale", "enumerate", "trainer.Trainer.loss.end_log", "trainer.Trainer.optimizer.schedule", "trainer.Trainer.optimizer.get_last_epoch", "utility.timer", "utility.timer", "trainer.Trainer.prepare", "timer_data.hold", "timer_model.tic", "trainer.Trainer.optimizer.zero_grad", "trainer.Trainer.model", "trainer.Trainer.loss", "trainer.Trainer.backward", "trainer.Trainer.optimizer.step", "timer_model.hold", "timer_data.tic", "len", "decimal.Decimal", "torch.clip_grad_value_", "torch.clip_grad_value_", "trainer.Trainer.ckp.write_log", "trainer.Trainer.model.parameters", "len", "trainer.Trainer.loss.display_loss", "timer_model.release", "timer_data.release"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.step", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.write_log", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.start_log", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.trainer.Trainer.train", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.__init__.MyConcatDataset.set_scale", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.end_log", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.videotester.VideoTester.prepare", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.hold", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.tic", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.step", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.hold", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.tic", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.write_log", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.display_loss", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.release", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.release"], ["", "def", "train", "(", "self", ")", ":", "\n", "        ", "self", ".", "loss", ".", "step", "(", ")", "\n", "epoch", "=", "self", ".", "optimizer", ".", "get_last_epoch", "(", ")", "+", "1", "\n", "lr", "=", "self", ".", "optimizer", ".", "get_lr", "(", ")", "\n", "\n", "self", ".", "ckp", ".", "write_log", "(", "\n", "'[Epoch {}]\\tLearning rate: {:.2e}'", ".", "format", "(", "epoch", ",", "Decimal", "(", "lr", ")", ")", "\n", ")", "\n", "self", ".", "loss", ".", "start_log", "(", ")", "\n", "self", ".", "model", ".", "train", "(", ")", "\n", "\n", "timer_data", ",", "timer_model", "=", "utility", ".", "timer", "(", ")", ",", "utility", ".", "timer", "(", ")", "\n", "# TEMP", "\n", "self", ".", "loader_train", ".", "dataset", ".", "set_scale", "(", "0", ")", "\n", "for", "batch", ",", "(", "lr", ",", "hr", ",", "_", ",", ")", "in", "enumerate", "(", "self", ".", "loader_train", ")", ":", "\n", "            ", "lr", ",", "hr", "=", "self", ".", "prepare", "(", "lr", ",", "hr", ")", "\n", "timer_data", ".", "hold", "(", ")", "\n", "timer_model", ".", "tic", "(", ")", "\n", "\n", "self", ".", "optimizer", ".", "zero_grad", "(", ")", "\n", "sr", "=", "self", ".", "model", "(", "lr", ",", "0", ")", "\n", "loss", "=", "self", ".", "loss", "(", "sr", ",", "hr", ")", "\n", "loss", ".", "backward", "(", ")", "\n", "if", "self", ".", "args", ".", "gclip", ">", "0", ":", "\n", "                ", "utils", ".", "clip_grad_value_", "(", "\n", "self", ".", "model", ".", "parameters", "(", ")", ",", "\n", "self", ".", "args", ".", "gclip", "\n", ")", "\n", "", "self", ".", "optimizer", ".", "step", "(", ")", "\n", "\n", "timer_model", ".", "hold", "(", ")", "\n", "\n", "if", "(", "batch", "+", "1", ")", "%", "self", ".", "args", ".", "print_every", "==", "0", ":", "\n", "                ", "self", ".", "ckp", ".", "write_log", "(", "'[{}/{}]\\t{}\\t{:.1f}+{:.1f}s'", ".", "format", "(", "\n", "(", "batch", "+", "1", ")", "*", "self", ".", "args", ".", "batch_size", ",", "\n", "len", "(", "self", ".", "loader_train", ".", "dataset", ")", ",", "\n", "self", ".", "loss", ".", "display_loss", "(", "batch", ")", ",", "\n", "timer_model", ".", "release", "(", ")", ",", "\n", "timer_data", ".", "release", "(", ")", ")", ")", "\n", "\n", "", "timer_data", ".", "tic", "(", ")", "\n", "\n", "", "self", ".", "loss", ".", "end_log", "(", "len", "(", "self", ".", "loader_train", ")", ")", "\n", "self", ".", "error_last", "=", "self", ".", "loss", ".", "log", "[", "-", "1", ",", "-", "1", "]", "\n", "self", ".", "optimizer", ".", "schedule", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.trainer.Trainer.test": [[74, 130], ["torch.set_grad_enabled", "torch.set_grad_enabled", "torch.set_grad_enabled", "torch.set_grad_enabled", "trainer.Trainer.optimizer.get_last_epoch", "trainer.Trainer.ckp.write_log", "trainer.Trainer.ckp.add_log", "trainer.Trainer.model.eval", "utility.timer", "enumerate", "trainer.Trainer.ckp.write_log", "trainer.Trainer.ckp.write_log", "trainer.Trainer.ckp.write_log", "torch.set_grad_enabled", "torch.set_grad_enabled", "torch.set_grad_enabled", "torch.set_grad_enabled", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "trainer.Trainer.ckp.begin_background", "enumerate", "trainer.Trainer.ckp.end_background", "trainer.Trainer.ckp.save", "len", "len", "d.dataset.set_scale", "tqdm.tqdm.tqdm", "len", "trainer.Trainer.ckp.log.max", "trainer.Trainer.ckp.write_log", "utility.timer.toc", "utility.timer.toc", "trainer.Trainer.prepare", "trainer.Trainer.model", "utility.quantize", "utility.calc_psnr", "save_list.extend", "trainer.Trainer.ckp.save_results"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.write_log", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.add_log", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.write_log", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.write_log", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.write_log", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.begin_background", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.end_background", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.__init__.MyConcatDataset.set_scale", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.write_log", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.toc", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.toc", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.videotester.VideoTester.prepare", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.quantize", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.calc_psnr", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.save_results"], ["", "def", "test", "(", "self", ")", ":", "\n", "        ", "torch", ".", "set_grad_enabled", "(", "False", ")", "\n", "\n", "epoch", "=", "self", ".", "optimizer", ".", "get_last_epoch", "(", ")", "\n", "self", ".", "ckp", ".", "write_log", "(", "'\\nEvaluation:'", ")", "\n", "self", ".", "ckp", ".", "add_log", "(", "\n", "torch", ".", "zeros", "(", "1", ",", "len", "(", "self", ".", "loader_test", ")", ",", "len", "(", "self", ".", "scale", ")", ")", "\n", ")", "\n", "self", ".", "model", ".", "eval", "(", ")", "\n", "\n", "timer_test", "=", "utility", ".", "timer", "(", ")", "\n", "if", "self", ".", "args", ".", "save_results", ":", "self", ".", "ckp", ".", "begin_background", "(", ")", "\n", "for", "idx_data", ",", "d", "in", "enumerate", "(", "self", ".", "loader_test", ")", ":", "\n", "            ", "for", "idx_scale", ",", "scale", "in", "enumerate", "(", "self", ".", "scale", ")", ":", "\n", "                ", "d", ".", "dataset", ".", "set_scale", "(", "idx_scale", ")", "\n", "for", "lr", ",", "hr", ",", "filename", "in", "tqdm", "(", "d", ",", "ncols", "=", "80", ")", ":", "\n", "                    ", "lr", ",", "hr", "=", "self", ".", "prepare", "(", "lr", ",", "hr", ")", "\n", "sr", "=", "self", ".", "model", "(", "lr", ",", "idx_scale", ")", "\n", "sr", "=", "utility", ".", "quantize", "(", "sr", ",", "self", ".", "args", ".", "rgb_range", ")", "\n", "\n", "save_list", "=", "[", "sr", "]", "\n", "self", ".", "ckp", ".", "log", "[", "-", "1", ",", "idx_data", ",", "idx_scale", "]", "+=", "utility", ".", "calc_psnr", "(", "\n", "sr", ",", "hr", ",", "scale", ",", "self", ".", "args", ".", "rgb_range", ",", "dataset", "=", "d", "\n", ")", "\n", "if", "self", ".", "args", ".", "save_gt", ":", "\n", "                        ", "save_list", ".", "extend", "(", "[", "hr", "]", ")", "\n", "\n", "", "if", "self", ".", "args", ".", "save_results", ":", "\n", "                        ", "self", ".", "ckp", ".", "save_results", "(", "d", ",", "filename", "[", "0", "]", ",", "save_list", ",", "scale", ")", "\n", "\n", "", "", "self", ".", "ckp", ".", "log", "[", "-", "1", ",", "idx_data", ",", "idx_scale", "]", "/=", "len", "(", "d", ")", "\n", "best", "=", "self", ".", "ckp", ".", "log", ".", "max", "(", "0", ")", "\n", "self", ".", "ckp", ".", "write_log", "(", "\n", "'[{} x{}]\\tPSNR: {:.3f} (Best: {:.3f} @epoch {})'", ".", "format", "(", "\n", "d", ".", "dataset", ".", "name", ",", "\n", "scale", ",", "\n", "self", ".", "ckp", ".", "log", "[", "-", "1", ",", "idx_data", ",", "idx_scale", "]", ",", "\n", "best", "[", "0", "]", "[", "idx_data", ",", "idx_scale", "]", ",", "\n", "best", "[", "1", "]", "[", "idx_data", ",", "idx_scale", "]", "+", "1", "\n", ")", "\n", ")", "\n", "\n", "", "", "self", ".", "ckp", ".", "write_log", "(", "'Forward: {:.2f}s\\n'", ".", "format", "(", "timer_test", ".", "toc", "(", ")", ")", ")", "\n", "self", ".", "ckp", ".", "write_log", "(", "'Saving...'", ")", "\n", "\n", "if", "self", ".", "args", ".", "save_results", ":", "\n", "            ", "self", ".", "ckp", ".", "end_background", "(", ")", "\n", "\n", "", "if", "not", "self", ".", "args", ".", "test_only", ":", "\n", "            ", "self", ".", "ckp", ".", "save", "(", "self", ",", "epoch", ",", "is_best", "=", "(", "best", "[", "1", "]", "[", "0", ",", "0", "]", "+", "1", "==", "epoch", ")", ")", "\n", "\n", "", "self", ".", "ckp", ".", "write_log", "(", "\n", "'Total: {:.2f}s\\n'", ".", "format", "(", "timer_test", ".", "toc", "(", ")", ")", ",", "refresh", "=", "True", "\n", ")", "\n", "\n", "torch", ".", "set_grad_enabled", "(", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.trainer.Trainer.prepare": [[131, 138], ["torch.device", "torch.device", "torch.device", "torch.device", "tensor.half.half.to", "trainer.Trainer.prepare._prepare"], "methods", ["None"], ["", "def", "prepare", "(", "self", ",", "*", "args", ")", ":", "\n", "        ", "device", "=", "torch", ".", "device", "(", "'cpu'", "if", "self", ".", "args", ".", "cpu", "else", "'cuda'", ")", "\n", "def", "_prepare", "(", "tensor", ")", ":", "\n", "            ", "if", "self", ".", "args", ".", "precision", "==", "'half'", ":", "tensor", "=", "tensor", ".", "half", "(", ")", "\n", "return", "tensor", ".", "to", "(", "device", ")", "\n", "\n", "", "return", "[", "_prepare", "(", "a", ")", "for", "a", "in", "args", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.trainer.Trainer.terminate": [[139, 146], ["trainer.Trainer.test", "trainer.Trainer.optimizer.get_last_epoch"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.videotester.VideoTester.test"], ["", "def", "terminate", "(", "self", ")", ":", "\n", "        ", "if", "self", ".", "args", ".", "test_only", ":", "\n", "            ", "self", ".", "test", "(", ")", "\n", "return", "True", "\n", "", "else", ":", "\n", "            ", "epoch", "=", "self", ".", "optimizer", ".", "get_last_epoch", "(", ")", "+", "1", "\n", "return", "epoch", ">=", "self", ".", "args", ".", "epochs", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.dataloader._MSDataLoaderIter.__init__": [[70, 146], ["iter", "torch.LongTensor().random_().item", "torch.LongTensor().random_().item", "torch.LongTensor().random_().item", "torch.LongTensor().random_().item", "torch.cuda.is_available", "torch.cuda.is_available", "torch.cuda.is_available", "torch.cuda.is_available", "torch.Queue", "torch.Queue", "torch.Event", "torch.Event", "range", "torch.utils.data._utils.signal_handling._set_worker_pids", "torch.utils.data._utils.signal_handling._set_worker_pids", "torch.utils.data._utils.signal_handling._set_SIGCHLD_handler", "torch.utils.data._utils.signal_handling._set_SIGCHLD_handler", "range", "torch.LongTensor().random_", "torch.LongTensor().random_", "torch.LongTensor().random_", "torch.LongTensor().random_", "torch.LongTensor().random_", "torch.LongTensor().random_", "torch.LongTensor().random_", "torch.LongTensor().random_", "torch.Queue", "torch.Queue", "torch.Queue.cancel_join_thread", "torch.Process", "torch.Process", "torch.Process.start", "dataloader._MSDataLoaderIter.index_queues.append", "dataloader._MSDataLoaderIter.workers.append", "torch._six.queue.Queue", "torch._six.queue.Queue", "threading.Thread", "threading.Thread.start", "id", "tuple", "dataloader._MSDataLoaderIter._put_indices", "torch.LongTensor", "torch.LongTensor", "torch.LongTensor", "torch.LongTensor", "torch.LongTensor", "torch.LongTensor", "torch.LongTensor", "torch.LongTensor", "torch.cuda.current_device", "torch.cuda.current_device", "torch.cuda.current_device", "torch.cuda.current_device"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "loader", ")", ":", "\n", "        ", "self", ".", "dataset", "=", "loader", ".", "dataset", "\n", "self", ".", "scale", "=", "loader", ".", "scale", "\n", "self", ".", "collate_fn", "=", "loader", ".", "collate_fn", "\n", "self", ".", "batch_sampler", "=", "loader", ".", "batch_sampler", "\n", "self", ".", "num_workers", "=", "loader", ".", "num_workers", "\n", "self", ".", "pin_memory", "=", "loader", ".", "pin_memory", "and", "torch", ".", "cuda", ".", "is_available", "(", ")", "\n", "self", ".", "timeout", "=", "loader", ".", "timeout", "\n", "\n", "self", ".", "sample_iter", "=", "iter", "(", "self", ".", "batch_sampler", ")", "\n", "\n", "base_seed", "=", "torch", ".", "LongTensor", "(", "1", ")", ".", "random_", "(", ")", ".", "item", "(", ")", "\n", "\n", "if", "self", ".", "num_workers", ">", "0", ":", "\n", "            ", "self", ".", "worker_init_fn", "=", "loader", ".", "worker_init_fn", "\n", "self", ".", "worker_queue_idx", "=", "0", "\n", "self", ".", "worker_result_queue", "=", "multiprocessing", ".", "Queue", "(", ")", "\n", "self", ".", "batches_outstanding", "=", "0", "\n", "self", ".", "worker_pids_set", "=", "False", "\n", "self", ".", "shutdown", "=", "False", "\n", "self", ".", "send_idx", "=", "0", "\n", "self", ".", "rcvd_idx", "=", "0", "\n", "self", ".", "reorder_dict", "=", "{", "}", "\n", "self", ".", "done_event", "=", "multiprocessing", ".", "Event", "(", ")", "\n", "\n", "base_seed", "=", "torch", ".", "LongTensor", "(", "1", ")", ".", "random_", "(", ")", "[", "0", "]", "\n", "\n", "self", ".", "index_queues", "=", "[", "]", "\n", "self", ".", "workers", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "self", ".", "num_workers", ")", ":", "\n", "                ", "index_queue", "=", "multiprocessing", ".", "Queue", "(", ")", "\n", "index_queue", ".", "cancel_join_thread", "(", ")", "\n", "w", "=", "multiprocessing", ".", "Process", "(", "\n", "target", "=", "_ms_loop", ",", "\n", "args", "=", "(", "\n", "self", ".", "dataset", ",", "\n", "index_queue", ",", "\n", "self", ".", "worker_result_queue", ",", "\n", "self", ".", "done_event", ",", "\n", "self", ".", "collate_fn", ",", "\n", "self", ".", "scale", ",", "\n", "base_seed", "+", "i", ",", "\n", "self", ".", "worker_init_fn", ",", "\n", "i", "\n", ")", "\n", ")", "\n", "w", ".", "daemon", "=", "True", "\n", "w", ".", "start", "(", ")", "\n", "self", ".", "index_queues", ".", "append", "(", "index_queue", ")", "\n", "self", ".", "workers", ".", "append", "(", "w", ")", "\n", "\n", "", "if", "self", ".", "pin_memory", ":", "\n", "                ", "self", ".", "data_queue", "=", "queue", ".", "Queue", "(", ")", "\n", "pin_memory_thread", "=", "threading", ".", "Thread", "(", "\n", "target", "=", "_utils", ".", "pin_memory", ".", "_pin_memory_loop", ",", "\n", "args", "=", "(", "\n", "self", ".", "worker_result_queue", ",", "\n", "self", ".", "data_queue", ",", "\n", "torch", ".", "cuda", ".", "current_device", "(", ")", ",", "\n", "self", ".", "done_event", "\n", ")", "\n", ")", "\n", "pin_memory_thread", ".", "daemon", "=", "True", "\n", "pin_memory_thread", ".", "start", "(", ")", "\n", "self", ".", "pin_memory_thread", "=", "pin_memory_thread", "\n", "", "else", ":", "\n", "                ", "self", ".", "data_queue", "=", "self", ".", "worker_result_queue", "\n", "\n", "", "_utils", ".", "signal_handling", ".", "_set_worker_pids", "(", "\n", "id", "(", "self", ")", ",", "tuple", "(", "w", ".", "pid", "for", "w", "in", "self", ".", "workers", ")", "\n", ")", "\n", "_utils", ".", "signal_handling", ".", "_set_SIGCHLD_handler", "(", ")", "\n", "self", ".", "worker_pids_set", "=", "True", "\n", "\n", "for", "_", "in", "range", "(", "2", "*", "self", ".", "num_workers", ")", ":", "\n", "                ", "self", ".", "_put_indices", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.dataloader.MSDataLoader.__init__": [[150, 155], ["torch.utils.data.DataLoader.__init__"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "self", ",", "cfg", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "super", "(", "MSDataLoader", ",", "self", ")", ".", "__init__", "(", "\n", "*", "args", ",", "**", "kwargs", ",", "num_workers", "=", "cfg", ".", "n_threads", "\n", ")", "\n", "self", ".", "scale", "=", "cfg", ".", "scale", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.dataloader.MSDataLoader.__iter__": [[156, 158], ["dataloader._MSDataLoaderIter"], "methods", ["None"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "        ", "return", "_MSDataLoaderIter", "(", "self", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.dataloader._ms_loop": [[22, 67], ["torch.utils.data._utils.signal_handling._set_worker_signal_handlers", "torch.set_num_threads", "torch.set_num_threads", "random.seed", "torch.manual_seed", "torch.manual_seed", "data_queue.cancel_join_thread", "torch.utils.data._utils.worker.ManagerWatchdog", "torch.utils.data._utils.worker.ManagerWatchdog.is_alive", "init_fn", "index_queue.get", "done_event.is_set", "done_event.is_set", "collate_fn", "collate_fn.append", "data_queue.put", "random.randrange", "dataset.set_scale", "data_queue.put", "len", "len", "torch.utils.data._utils.ExceptionWrapper", "sys.exc_info"], "function", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.__init__.MyConcatDataset.set_scale"], ["def", "_ms_loop", "(", "dataset", ",", "index_queue", ",", "data_queue", ",", "done_event", ",", "collate_fn", ",", "scale", ",", "seed", ",", "init_fn", ",", "worker_id", ")", ":", "\n", "    ", "try", ":", "\n", "        ", "collate", ".", "_use_shared_memory", "=", "True", "\n", "signal_handling", ".", "_set_worker_signal_handlers", "(", ")", "\n", "\n", "torch", ".", "set_num_threads", "(", "1", ")", "\n", "random", ".", "seed", "(", "seed", ")", "\n", "torch", ".", "manual_seed", "(", "seed", ")", "\n", "\n", "data_queue", ".", "cancel_join_thread", "(", ")", "\n", "\n", "if", "init_fn", "is", "not", "None", ":", "\n", "            ", "init_fn", "(", "worker_id", ")", "\n", "\n", "", "watchdog", "=", "ManagerWatchdog", "(", ")", "\n", "\n", "while", "watchdog", ".", "is_alive", "(", ")", ":", "\n", "            ", "try", ":", "\n", "                ", "r", "=", "index_queue", ".", "get", "(", "timeout", "=", "MP_STATUS_CHECK_INTERVAL", ")", "\n", "", "except", "queue", ".", "Empty", ":", "\n", "                ", "continue", "\n", "\n", "", "if", "r", "is", "None", ":", "\n", "                ", "assert", "done_event", ".", "is_set", "(", ")", "\n", "return", "\n", "", "elif", "done_event", ".", "is_set", "(", ")", ":", "\n", "                ", "continue", "\n", "\n", "", "idx", ",", "batch_indices", "=", "r", "\n", "try", ":", "\n", "                ", "idx_scale", "=", "0", "\n", "if", "len", "(", "scale", ")", ">", "1", "and", "dataset", ".", "train", ":", "\n", "                    ", "idx_scale", "=", "random", ".", "randrange", "(", "0", ",", "len", "(", "scale", ")", ")", "\n", "dataset", ".", "set_scale", "(", "idx_scale", ")", "\n", "\n", "", "samples", "=", "collate_fn", "(", "[", "dataset", "[", "i", "]", "for", "i", "in", "batch_indices", "]", ")", "\n", "samples", ".", "append", "(", "idx_scale", ")", "\n", "", "except", "Exception", ":", "\n", "                ", "data_queue", ".", "put", "(", "(", "idx", ",", "ExceptionWrapper", "(", "sys", ".", "exc_info", "(", ")", ")", ")", ")", "\n", "", "else", ":", "\n", "                ", "data_queue", ".", "put", "(", "(", "idx", ",", "samples", ")", ")", "\n", "del", "samples", "\n", "\n", "", "", "", "except", "KeyboardInterrupt", ":", "\n", "        ", "pass", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.template.set_template": [[1, 53], ["args.template.find", "args.template.find", "args.template.find", "args.template.find", "args.template.find", "args.template.find", "args.template.find"], "function", ["None"], ["def", "set_template", "(", "args", ")", ":", "\n", "# Set the templates here", "\n", "    ", "if", "args", ".", "template", ".", "find", "(", "'jpeg'", ")", ">=", "0", ":", "\n", "        ", "args", ".", "data_train", "=", "'DIV2K_jpeg'", "\n", "args", ".", "data_test", "=", "'DIV2K_jpeg'", "\n", "args", ".", "epochs", "=", "200", "\n", "args", ".", "decay", "=", "'100'", "\n", "\n", "", "if", "args", ".", "template", ".", "find", "(", "'EDSR_paper'", ")", ">=", "0", ":", "\n", "        ", "args", ".", "model", "=", "'EDSR'", "\n", "args", ".", "n_resblocks", "=", "32", "\n", "args", ".", "n_feats", "=", "256", "\n", "args", ".", "res_scale", "=", "0.1", "\n", "\n", "", "if", "args", ".", "template", ".", "find", "(", "'MDSR'", ")", ">=", "0", ":", "\n", "        ", "args", ".", "model", "=", "'MDSR'", "\n", "args", ".", "patch_size", "=", "48", "\n", "args", ".", "epochs", "=", "650", "\n", "\n", "", "if", "args", ".", "template", ".", "find", "(", "'DDBPN'", ")", ">=", "0", ":", "\n", "        ", "args", ".", "model", "=", "'DDBPN'", "\n", "args", ".", "patch_size", "=", "128", "\n", "args", ".", "scale", "=", "'4'", "\n", "\n", "args", ".", "data_test", "=", "'Set5'", "\n", "\n", "args", ".", "batch_size", "=", "20", "\n", "args", ".", "epochs", "=", "1000", "\n", "args", ".", "decay", "=", "'500'", "\n", "args", ".", "gamma", "=", "0.1", "\n", "args", ".", "weight_decay", "=", "1e-4", "\n", "\n", "args", ".", "loss", "=", "'1*MSE'", "\n", "\n", "", "if", "args", ".", "template", ".", "find", "(", "'GAN'", ")", ">=", "0", ":", "\n", "        ", "args", ".", "epochs", "=", "200", "\n", "args", ".", "lr", "=", "5e-5", "\n", "args", ".", "decay", "=", "'150'", "\n", "\n", "", "if", "args", ".", "template", ".", "find", "(", "'ACubeNet'", ")", ">=", "0", ":", "\n", "        ", "args", ".", "model", "=", "'ACubeNet'", "\n", "args", ".", "n_resgroups", "=", "4", "\n", "args", ".", "n_resblocks", "=", "4", "\n", "args", ".", "n_feats", "=", "64", "\n", "\n", "\n", "", "if", "args", ".", "template", ".", "find", "(", "'VDSR'", ")", ">=", "0", ":", "\n", "        ", "args", ".", "model", "=", "'VDSR'", "\n", "args", ".", "n_resblocks", "=", "20", "\n", "args", ".", "n_feats", "=", "64", "\n", "args", ".", "patch_size", "=", "41", "\n", "args", ".", "lr", "=", "1e-1", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.videotester.VideoTester.__init__": [[13, 21], ["os.path.splitext", "os.path.basename"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "args", ",", "my_model", ",", "ckp", ")", ":", "\n", "        ", "self", ".", "args", "=", "args", "\n", "self", ".", "scale", "=", "args", ".", "scale", "\n", "\n", "self", ".", "ckp", "=", "ckp", "\n", "self", ".", "model", "=", "my_model", "\n", "\n", "self", ".", "filename", ",", "_", "=", "os", ".", "path", ".", "splitext", "(", "os", ".", "path", ".", "basename", "(", "args", ".", "dir_demo", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.videotester.VideoTester.test": [[22, 64], ["torch.set_grad_enabled", "videotester.VideoTester.ckp.write_log", "videotester.VideoTester.model.eval", "utility.timer", "enumerate", "videotester.VideoTester.ckp.write_log", "torch.set_grad_enabled", "cv2.VideoCapture", "int", "cv2.VideoWriter", "tqdm.tqdm.tqdm", "cv2.VideoCapture.release", "cv2.VideoWriter.release", "cv2.VideoCapture.get", "videotester.VideoTester.ckp.get_path", "cv2.VideoWriter_fourcc", "cv2.VideoCapture.get", "range", "cv2.VideoCapture.read", "data.common.set_channel", "data.common.np2Tensor", "videotester.VideoTester.prepare", "videotester.VideoTester.model", "utility.quantize().squeeze", "normalized.byte().permute().cpu().numpy", "cv2.VideoWriter.write", "utility.timer.toc", "int", "int", "lr.unsqueeze", "utility.quantize", "normalized.byte().permute().cpu", "cv2.VideoCapture.get", "cv2.VideoCapture.get", "normalized.byte().permute", "normalized.byte"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.write_log", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.write_log", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.release", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.release", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.get_path", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.common.set_channel", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.common.np2Tensor", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.videotester.VideoTester.prepare", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.toc", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.quantize"], ["", "def", "test", "(", "self", ")", ":", "\n", "        ", "torch", ".", "set_grad_enabled", "(", "False", ")", "\n", "\n", "self", ".", "ckp", ".", "write_log", "(", "'\\nEvaluation on video:'", ")", "\n", "self", ".", "model", ".", "eval", "(", ")", "\n", "\n", "timer_test", "=", "utility", ".", "timer", "(", ")", "\n", "for", "idx_scale", ",", "scale", "in", "enumerate", "(", "self", ".", "scale", ")", ":", "\n", "            ", "vidcap", "=", "cv2", ".", "VideoCapture", "(", "self", ".", "args", ".", "dir_demo", ")", "\n", "total_frames", "=", "int", "(", "vidcap", ".", "get", "(", "cv2", ".", "CAP_PROP_FRAME_COUNT", ")", ")", "\n", "vidwri", "=", "cv2", ".", "VideoWriter", "(", "\n", "self", ".", "ckp", ".", "get_path", "(", "'{}_x{}.avi'", ".", "format", "(", "self", ".", "filename", ",", "scale", ")", ")", ",", "\n", "cv2", ".", "VideoWriter_fourcc", "(", "*", "'XVID'", ")", ",", "\n", "vidcap", ".", "get", "(", "cv2", ".", "CAP_PROP_FPS", ")", ",", "\n", "(", "\n", "int", "(", "scale", "*", "vidcap", ".", "get", "(", "cv2", ".", "CAP_PROP_FRAME_WIDTH", ")", ")", ",", "\n", "int", "(", "scale", "*", "vidcap", ".", "get", "(", "cv2", ".", "CAP_PROP_FRAME_HEIGHT", ")", ")", "\n", ")", "\n", ")", "\n", "\n", "tqdm_test", "=", "tqdm", "(", "range", "(", "total_frames", ")", ",", "ncols", "=", "80", ")", "\n", "for", "_", "in", "tqdm_test", ":", "\n", "                ", "success", ",", "lr", "=", "vidcap", ".", "read", "(", ")", "\n", "if", "not", "success", ":", "break", "\n", "\n", "lr", ",", "=", "common", ".", "set_channel", "(", "lr", ",", "n_channels", "=", "self", ".", "args", ".", "n_colors", ")", "\n", "lr", ",", "=", "common", ".", "np2Tensor", "(", "lr", ",", "rgb_range", "=", "self", ".", "args", ".", "rgb_range", ")", "\n", "lr", ",", "=", "self", ".", "prepare", "(", "lr", ".", "unsqueeze", "(", "0", ")", ")", "\n", "sr", "=", "self", ".", "model", "(", "lr", ",", "idx_scale", ")", "\n", "sr", "=", "utility", ".", "quantize", "(", "sr", ",", "self", ".", "args", ".", "rgb_range", ")", ".", "squeeze", "(", "0", ")", "\n", "\n", "normalized", "=", "sr", "*", "255", "/", "self", ".", "args", ".", "rgb_range", "\n", "ndarr", "=", "normalized", ".", "byte", "(", ")", ".", "permute", "(", "1", ",", "2", ",", "0", ")", ".", "cpu", "(", ")", ".", "numpy", "(", ")", "\n", "vidwri", ".", "write", "(", "ndarr", ")", "\n", "\n", "", "vidcap", ".", "release", "(", ")", "\n", "vidwri", ".", "release", "(", ")", "\n", "\n", "", "self", ".", "ckp", ".", "write_log", "(", "\n", "'Total: {:.2f}s\\n'", ".", "format", "(", "timer_test", ".", "toc", "(", ")", ")", ",", "refresh", "=", "True", "\n", ")", "\n", "torch", ".", "set_grad_enabled", "(", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.videotester.VideoTester.prepare": [[65, 72], ["torch.device", "tensor.half.half.to", "videotester.VideoTester.prepare._prepare"], "methods", ["None"], ["", "def", "prepare", "(", "self", ",", "*", "args", ")", ":", "\n", "        ", "device", "=", "torch", ".", "device", "(", "'cpu'", "if", "self", ".", "args", ".", "cpu", "else", "'cuda'", ")", "\n", "def", "_prepare", "(", "tensor", ")", ":", "\n", "            ", "if", "self", ".", "args", ".", "precision", "==", "'half'", ":", "tensor", "=", "tensor", ".", "half", "(", ")", "\n", "return", "tensor", ".", "to", "(", "device", ")", "\n", "\n", "", "return", "[", "_prepare", "(", "a", ")", "for", "a", "in", "args", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.edsr.MCPN.__init__": [[17, 21], ["torch.Module.__init__", "model.common.MABlock", "model.common.ContextBlock2d"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "self", ",", "channel", ",", "conv", "=", "common", ".", "default_conv", ")", ":", "\n", "        ", "super", "(", "MCPN", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "MA", "=", "common", ".", "MABlock", "(", "conv", ")", "\n", "self", ".", "context", "=", "common", ".", "ContextBlock2d", "(", "channel", ")", "\n", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.edsr.MCPN.forward": [[21, 26], ["edsr.MCPN.MA", "edsr.MCPN.context"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x1", "=", "self", ".", "MA", "(", "x", ")", "\n", "x2", "=", "self", ".", "context", "(", "x", ")", "\n", "x", "=", "x", "+", "x1", "+", "x2", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.edsr.EDSR.__init__": [[30, 65], ["torch.Module.__init__", "torch.ReLU", "model.common.MeanShift", "model.common.MeanShift", "range", "m_body.append", "torch.Sequential", "torch.Sequential", "torch.Sequential", "conv", "m_body.append", "m_body.append", "conv", "model.common.Upsampler", "conv", "model.common.ResBlock", "edsr.MCPN"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "self", ",", "args", ",", "conv", "=", "common", ".", "default_conv", ")", ":", "\n", "        ", "super", "(", "EDSR", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "n_resblocks", "=", "args", ".", "n_resblocks", "\n", "n_feats", "=", "args", ".", "n_feats", "\n", "kernel_size", "=", "3", "\n", "scale", "=", "args", ".", "scale", "[", "0", "]", "\n", "act", "=", "nn", ".", "ReLU", "(", "True", ")", "\n", "url_name", "=", "'r{}f{}x{}'", ".", "format", "(", "n_resblocks", ",", "n_feats", ",", "scale", ")", "\n", "if", "url_name", "in", "url", ":", "\n", "            ", "self", ".", "url", "=", "url", "[", "url_name", "]", "\n", "", "else", ":", "\n", "            ", "self", ".", "url", "=", "None", "\n", "", "self", ".", "sub_mean", "=", "common", ".", "MeanShift", "(", "args", ".", "rgb_range", ")", "\n", "self", ".", "add_mean", "=", "common", ".", "MeanShift", "(", "args", ".", "rgb_range", ",", "sign", "=", "1", ")", "\n", "\n", "# define head module", "\n", "m_head", "=", "[", "conv", "(", "args", ".", "n_colors", ",", "n_feats", ",", "kernel_size", ")", "]", "\n", "# define body module", "\n", "m_body", "=", "[", "]", "\n", "for", "_", "in", "range", "(", "n_resblocks", ")", ":", "\n", "            ", "m_body", ".", "append", "(", "common", ".", "ResBlock", "(", "conv", ",", "n_feats", ",", "kernel_size", ",", "act", "=", "act", ",", "res_scale", "=", "args", ".", "res_scale", ")", ")", "\n", "m_body", ".", "append", "(", "MCPN", "(", "n_feats", ")", ")", "\n", "", "m_body", ".", "append", "(", "conv", "(", "n_feats", ",", "n_feats", ",", "kernel_size", ")", ")", "\n", "#m_k2 = [common.MABlock(conv)]", "\n", "#m_k3 = [common.ContextBlock2d(n_feats)]", "\n", "# define tail module", "\n", "m_tail", "=", "[", "\n", "common", ".", "Upsampler", "(", "conv", ",", "scale", ",", "n_feats", ",", "act", "=", "False", ")", ",", "\n", "conv", "(", "n_feats", ",", "args", ".", "n_colors", ",", "kernel_size", ")", "\n", "]", "\n", "\n", "self", ".", "head", "=", "nn", ".", "Sequential", "(", "*", "m_head", ")", "\n", "self", ".", "body", "=", "nn", ".", "Sequential", "(", "*", "m_body", ")", "\n", "self", ".", "tail", "=", "nn", ".", "Sequential", "(", "*", "m_tail", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.edsr.EDSR.forward": [[67, 82], ["edsr.EDSR.sub_mean", "edsr.EDSR.head", "edsr.EDSR.body", "edsr.EDSR.tail", "edsr.EDSR.add_mean"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "sub_mean", "(", "x", ")", "\n", "x", "=", "self", ".", "head", "(", "x", ")", "\n", "#x = self.k0(x)", "\n", "#x1 = self.k0(x)", "\n", "res", "=", "self", ".", "body", "(", "x", ")", "\n", "\n", "#res = self.k2(res)", "\n", "#res = self.k2(res)", "\n", "res", "=", "res", "+", "x", "\n", "\n", "x", "=", "self", ".", "tail", "(", "res", ")", "\n", "x", "=", "self", ".", "add_mean", "(", "x", ")", "\n", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.edsr.EDSR.load_state_dict": [[83, 101], ["edsr.EDSR.state_dict", "state_dict.items", "isinstance", "own_state[].copy_", "name.find", "KeyError", "name.find", "RuntimeError", "own_state[].size", "param.size"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.adversarial.Adversarial.state_dict"], ["", "def", "load_state_dict", "(", "self", ",", "state_dict", ",", "strict", "=", "True", ")", ":", "\n", "        ", "own_state", "=", "self", ".", "state_dict", "(", ")", "\n", "for", "name", ",", "param", "in", "state_dict", ".", "items", "(", ")", ":", "\n", "            ", "if", "name", "in", "own_state", ":", "\n", "                ", "if", "isinstance", "(", "param", ",", "nn", ".", "Parameter", ")", ":", "\n", "                    ", "param", "=", "param", ".", "data", "\n", "", "try", ":", "\n", "                    ", "own_state", "[", "name", "]", ".", "copy_", "(", "param", ")", "\n", "", "except", "Exception", ":", "\n", "                    ", "if", "name", ".", "find", "(", "'tail'", ")", "==", "-", "1", ":", "\n", "                        ", "raise", "RuntimeError", "(", "'While copying the parameter named {}, '", "\n", "'whose dimensions in the model are {} and '", "\n", "'whose dimensions in the checkpoint are {}.'", "\n", ".", "format", "(", "name", ",", "own_state", "[", "name", "]", ".", "size", "(", ")", ",", "param", ".", "size", "(", ")", ")", ")", "\n", "", "", "", "elif", "strict", ":", "\n", "                ", "if", "name", ".", "find", "(", "'tail'", ")", "==", "-", "1", ":", "\n", "                    ", "raise", "KeyError", "(", "'unexpected key \"{}\" in state_dict'", "\n", ".", "format", "(", "name", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.edsr.make_model": [[14, 16], ["edsr.EDSR"], "function", ["None"], ["def", "make_model", "(", "args", ",", "parent", "=", "False", ")", ":", "\n", "    ", "return", "EDSR", "(", "args", ")", "\n", "", "class", "MCPN", "(", "nn", ".", "Module", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.MeanShift.__init__": [[25, 35], ["torch.Conv2d.__init__", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "common.MeanShift.parameters", "torch.eye().view", "torch.eye().view", "torch.eye().view", "torch.eye().view", "torch.eye().view", "torch.eye().view", "torch.eye().view", "torch.eye().view", "torch.eye().view", "torch.Tensor.view", "torch.Tensor.view", "torch.Tensor.view", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.eye", "torch.eye", "torch.eye", "torch.eye", "torch.eye", "torch.eye", "torch.eye", "torch.eye", "torch.eye"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "\n", "self", ",", "rgb_range", ",", "\n", "rgb_mean", "=", "(", "0.4488", ",", "0.4371", ",", "0.4040", ")", ",", "rgb_std", "=", "(", "1.0", ",", "1.0", ",", "1.0", ")", ",", "sign", "=", "-", "1", ")", ":", "\n", "\n", "        ", "super", "(", "MeanShift", ",", "self", ")", ".", "__init__", "(", "3", ",", "3", ",", "kernel_size", "=", "1", ")", "\n", "std", "=", "torch", ".", "Tensor", "(", "rgb_std", ")", "\n", "self", ".", "weight", ".", "data", "=", "torch", ".", "eye", "(", "3", ")", ".", "view", "(", "3", ",", "3", ",", "1", ",", "1", ")", "/", "std", ".", "view", "(", "3", ",", "1", ",", "1", ",", "1", ")", "\n", "self", ".", "bias", ".", "data", "=", "sign", "*", "rgb_range", "*", "torch", ".", "Tensor", "(", "rgb_mean", ")", "/", "std", "\n", "for", "p", "in", "self", ".", "parameters", "(", ")", ":", "\n", "            ", "p", ".", "requires_grad", "=", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.BasicBlock.__init__": [[37, 48], ["torch.ReLU", "torch.ReLU", "torch.ReLU", "torch.Sequential.__init__", "conv", "m.append", "m.append", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.BatchNorm2d"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "\n", "self", ",", "conv", ",", "in_channels", ",", "out_channels", ",", "kernel_size", ",", "stride", "=", "1", ",", "bias", "=", "False", ",", "\n", "bn", "=", "True", ",", "act", "=", "nn", ".", "ReLU", "(", "True", ")", ")", ":", "\n", "\n", "        ", "m", "=", "[", "conv", "(", "in_channels", ",", "out_channels", ",", "kernel_size", ",", "bias", "=", "bias", ")", "]", "\n", "if", "bn", ":", "\n", "            ", "m", ".", "append", "(", "nn", ".", "BatchNorm2d", "(", "out_channels", ")", ")", "\n", "", "if", "act", "is", "not", "None", ":", "\n", "            ", "m", ".", "append", "(", "act", ")", "\n", "\n", "", "super", "(", "BasicBlock", ",", "self", ")", ".", "__init__", "(", "*", "m", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.ResBlock.__init__": [[50, 64], ["torch.ReLU", "torch.ReLU", "torch.ReLU", "torch.Module.__init__", "range", "torch.Sequential", "torch.Sequential", "torch.Sequential", "m.append", "conv", "m.append", "m.append", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.BatchNorm2d"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "\n", "self", ",", "conv", ",", "n_feats", ",", "kernel_size", ",", "\n", "bias", "=", "True", ",", "bn", "=", "False", ",", "act", "=", "nn", ".", "ReLU", "(", "True", ")", ",", "res_scale", "=", "1", ")", ":", "\n", "\n", "        ", "super", "(", "ResBlock", ",", "self", ")", ".", "__init__", "(", ")", "\n", "m", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "2", ")", ":", "\n", "            ", "m", ".", "append", "(", "conv", "(", "n_feats", ",", "n_feats", ",", "kernel_size", ",", "bias", "=", "bias", ")", ")", "\n", "if", "bn", ":", "\n", "                ", "m", ".", "append", "(", "nn", ".", "BatchNorm2d", "(", "n_feats", ")", ")", "\n", "", "if", "i", "==", "0", ":", "\n", "                ", "m", ".", "append", "(", "act", ")", "\n", "", "", "self", ".", "body", "=", "nn", ".", "Sequential", "(", "*", "m", ")", "\n", "self", ".", "res_scale", "=", "res_scale", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.ResBlock.forward": [[65, 70], ["common.ResBlock.body().mul", "common.ResBlock.body"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "res", "=", "self", ".", "body", "(", "x", ")", ".", "mul", "(", "self", ".", "res_scale", ")", "\n", "res", "+=", "x", "\n", "\n", "return", "res", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.MABlock.__init__": [[72, 84], ["torch.ReLU", "torch.ReLU", "torch.ReLU", "torch.Module.__init__", "torch.AdaptiveAvgPool2d", "torch.AdaptiveAvgPool2d", "torch.AdaptiveAvgPool2d", "torch.nn.parameter.Parameter", "torch.nn.parameter.Parameter", "torch.nn.parameter.Parameter", "torch.Softmax", "torch.Softmax", "torch.Softmax", "m.append", "m.append", "m.append", "torch.Sequential", "torch.Sequential", "torch.Sequential", "common.MABlock.reset_parameters", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "conv", "conv"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.ContextBlock2d.reset_parameters"], ["    ", "def", "__init__", "(", "self", ",", "conv", ",", "kernel_size", "=", "3", ",", "bias", "=", "True", ",", "act", "=", "nn", ".", "ReLU", "(", "True", ")", ")", ":", "\n", "        ", "super", "(", "MABlock", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "avg_pool", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "1", ")", "\n", "self", ".", "k1", "=", "Parameter", "(", "torch", ".", "zeros", "(", "1", ")", ")", "\n", "#self.contrast = stdv_channels", "\n", "self", ".", "softmax", "=", "nn", ".", "Softmax", "(", "dim", "=", "1", ")", "\n", "m", "=", "[", "]", "\n", "m", ".", "append", "(", "conv", "(", "1", ",", "1", ",", "kernel_size", ",", "bias", "=", "bias", ")", ")", "\n", "m", ".", "append", "(", "act", ")", "\n", "m", ".", "append", "(", "conv", "(", "1", ",", "1", ",", "kernel_size", ",", "bias", "=", "bias", ")", ")", "\n", "self", ".", "body", "=", "nn", ".", "Sequential", "(", "*", "m", ")", "\n", "self", ".", "reset_parameters", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.MABlock.reset_parameters": [[85, 87], ["common.last_zero_init"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.last_zero_init"], ["", "def", "reset_parameters", "(", "self", ")", ":", "\n", "        ", "last_zero_init", "(", "self", ".", "body", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.MABlock.NCA": [[88, 104], ["x.size", "common.MABlock.avg_pool", "common.MABlock.softmax", "px.view.view.view", "input_x.unsqueeze.unsqueeze.view", "input_x.unsqueeze.unsqueeze.unsqueeze", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "context.view.view.view"], "methods", ["None"], ["", "def", "NCA", "(", "self", ",", "x", ")", ":", "\n", "        ", "batch", ",", "channel", ",", "height", ",", "width", "=", "x", ".", "size", "(", ")", "\n", "input_x", "=", "x", "\n", "\n", "#self.max_pool = nn.AdaptiveMaxPool2d(1)", "\n", "\n", "Apx", "=", "self", ".", "avg_pool", "(", "input_x", ")", "\n", "#Vpx = self.contrast(input_x)", "\n", "px", "=", "Apx", "\n", "px", "=", "self", ".", "softmax", "(", "px", ")", "# N*c*1*1", "\n", "px", "=", "px", ".", "view", "(", "batch", ",", "1", ",", "channel", ",", "1", ")", "# N*1*c*1", "\n", "input_x", "=", "input_x", ".", "view", "(", "batch", ",", "height", "*", "width", ",", "channel", ")", "# N*HW*c", "\n", "input_x", "=", "input_x", ".", "unsqueeze", "(", "1", ")", "# N*1*HW*c", "\n", "context", "=", "torch", ".", "matmul", "(", "input_x", ",", "px", ")", "# N*1*HW*1", "\n", "context", "=", "context", ".", "view", "(", "batch", ",", "1", ",", "height", ",", "width", ")", "# N*1*H*W", "\n", "return", "context", "\n", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.MABlock.forward": [[104, 109], ["common.MABlock.NCA", "common.MABlock.body"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.MABlock.NCA"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "context", "=", "self", ".", "NCA", "(", "x", ")", "\n", "context", "=", "self", ".", "body", "(", "context", ")", "\n", "#x = x + context", "\n", "return", "self", ".", "k1", "*", "context", "\n", "", "", "class", "ContextBlock2d", "(", "nn", ".", "Module", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.ContextBlock2d.__init__": [[111, 125], ["torch.Module.__init__", "torch.nn.parameter.Parameter", "torch.nn.parameter.Parameter", "torch.nn.parameter.Parameter", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.Softmax", "torch.Softmax", "torch.Softmax", "torch.Sequential", "torch.Sequential", "torch.Sequential", "common.ContextBlock2d.reset_parameters", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.ReLU", "torch.ReLU", "torch.ReLU", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.ContextBlock2d.reset_parameters"], ["    ", "def", "__init__", "(", "self", ",", "inplanes", ")", ":", "\n", "        ", "super", "(", "ContextBlock2d", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "inplanes", "=", "inplanes", "\n", "self", ".", "planes", "=", "inplanes", "//", "16", "\n", "self", ".", "k2", "=", "Parameter", "(", "torch", ".", "zeros", "(", "1", ")", ")", "\n", "self", ".", "conv_mask", "=", "nn", ".", "Conv2d", "(", "inplanes", ",", "1", ",", "kernel_size", "=", "1", ")", "\n", "self", ".", "softmax", "=", "nn", ".", "Softmax", "(", "dim", "=", "2", ")", "\n", "self", ".", "channel_add_conv", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "self", ".", "inplanes", ",", "self", ".", "planes", ",", "kernel_size", "=", "1", ")", ",", "\n", "#nn.LayerNorm([self.planes, 1, 1]),", "\n", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", ",", "\n", "nn", ".", "Conv2d", "(", "self", ".", "planes", ",", "self", ".", "inplanes", ",", "kernel_size", "=", "1", ")", "\n", ")", "\n", "self", ".", "reset_parameters", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.ContextBlock2d.reset_parameters": [[126, 130], ["mmcv.cnn.kaiming_init", "common.last_zero_init"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.last_zero_init"], ["", "def", "reset_parameters", "(", "self", ")", ":", "\n", "        ", "kaiming_init", "(", "self", ".", "conv_mask", ",", "mode", "=", "'fan_in'", ")", "\n", "self", ".", "conv_mask", ".", "inited", "=", "True", "\n", "last_zero_init", "(", "self", ".", "channel_add_conv", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.ContextBlock2d.spatial_pool": [[131, 151], ["x.size", "input_x.unsqueeze.unsqueeze.view", "input_x.unsqueeze.unsqueeze.unsqueeze", "common.ContextBlock2d.conv_mask", "context_mask.unsqueeze.unsqueeze.view", "common.ContextBlock2d.softmax", "context_mask.unsqueeze.unsqueeze.unsqueeze", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "context.view.view.view"], "methods", ["None"], ["", "def", "spatial_pool", "(", "self", ",", "x", ")", ":", "\n", "        ", "batch", ",", "channel", ",", "height", ",", "width", "=", "x", ".", "size", "(", ")", "\n", "input_x", "=", "x", "\n", "# [N, C, H * W]", "\n", "input_x", "=", "input_x", ".", "view", "(", "batch", ",", "channel", ",", "height", "*", "width", ")", "\n", "# [N, 1, C, H * W]", "\n", "input_x", "=", "input_x", ".", "unsqueeze", "(", "1", ")", "\n", "# [N, 1, H, W]", "\n", "context_mask", "=", "self", ".", "conv_mask", "(", "x", ")", "\n", "# [N, 1, H * W]", "\n", "context_mask", "=", "context_mask", ".", "view", "(", "batch", ",", "1", ",", "height", "*", "width", ")", "\n", "# [N, 1, H * W]", "\n", "context_mask", "=", "self", ".", "softmax", "(", "context_mask", ")", "\n", "# [N, 1, H * W, 1]", "\n", "context_mask", "=", "context_mask", ".", "unsqueeze", "(", "3", ")", "\n", "# [N, 1, C, 1]", "\n", "context", "=", "torch", ".", "matmul", "(", "input_x", ",", "context_mask", ")", "\n", "# [N, C, 1, 1]", "\n", "context", "=", "context", ".", "view", "(", "batch", ",", "channel", ",", "1", ",", "1", ")", "\n", "return", "context", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.ContextBlock2d.forward": [[152, 161], ["common.ContextBlock2d.spatial_pool", "common.ContextBlock2d.channel_add_conv"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.ContextBlock2d.spatial_pool"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "# [N, C, 1, 1]", "\n", "        ", "context", "=", "self", ".", "spatial_pool", "(", "x", ")", "\n", "out", "=", "x", "\n", "# [N, C, 1, 1]", "\n", "channel_add_term", "=", "self", ".", "channel_add_conv", "(", "context", ")", "\n", "#out = out + channel_add_term", "\n", "\n", "return", "self", ".", "k2", "*", "channel_add_term", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.AFF.__init__": [[163, 170], ["torch.ReLU", "torch.ReLU", "torch.ReLU", "torch.Module.__init__", "torch.nn.parameter.Parameter", "torch.nn.parameter.Parameter", "torch.nn.parameter.Parameter", "torch.Softmax", "torch.Softmax", "torch.Softmax", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "self", ",", "inchannels", ",", "conv", ",", "kernel_size", "=", "3", ",", "bias", "=", "True", ",", "act", "=", "nn", ".", "ReLU", "(", "True", ")", ")", ":", "\n", "        ", "super", "(", "AFF", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "k3", "=", "Parameter", "(", "torch", ".", "zeros", "(", "1", ")", ")", "\n", "#self.avg_pool = nn.AdaptiveAvgPool2d(1)", "\n", "#self.conv_mask = nn.Conv2d(inplanes, 1, kernel_size=1)", "\n", "self", ".", "softmax", "=", "nn", ".", "Softmax", "(", "dim", "=", "-", "2", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.AFF.NBA": [[172, 181], ["x.size", "common.AFF.softmax", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "context.view.view.view"], "methods", ["None"], ["", "def", "NBA", "(", "self", ",", "x", ",", "y", ")", ":", "\n", "        ", "batch", ",", "channel", ",", "height", ",", "width", ",", "blocks", "=", "x", ".", "size", "(", ")", "\n", "input_x", "=", "x", "#N*C*H*W*K", "\n", "#input_y = y #N*1*1*K*1", "\n", "y", "=", "self", ".", "softmax", "(", "y", ")", "\n", "context", "=", "torch", ".", "matmul", "(", "input_x", ",", "y", ")", "#N*C*H*W*1", "\n", "context", "=", "context", ".", "view", "(", "batch", ",", "channel", ",", "height", ",", "width", ")", "#N*C*H*W", "\n", "\n", "return", "context", "\n", "", "def", "forward", "(", "self", ",", "x", ",", "y", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.AFF.forward": [[181, 184], ["common.AFF.NBA"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.AFF.NBA"], ["", "def", "forward", "(", "self", ",", "x", ",", "y", ")", ":", "\n", "        ", "out1", "=", "self", ".", "NBA", "(", "x", ",", "y", ")", "\n", "return", "self", ".", "k3", "*", "out1", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.Upsampler.__init__": [[186, 213], ["torch.Sequential.__init__", "range", "int", "m.append", "m.append", "m.append", "m.append", "math.log", "conv", "torch.PixelShuffle", "torch.PixelShuffle", "torch.PixelShuffle", "m.append", "m.append", "conv", "torch.PixelShuffle", "torch.PixelShuffle", "torch.PixelShuffle", "m.append", "m.append", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.ReLU", "torch.ReLU", "torch.ReLU", "m.append", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.ReLU", "torch.ReLU", "torch.ReLU", "m.append", "torch.PReLU", "torch.PReLU", "torch.PReLU", "torch.PReLU", "torch.PReLU", "torch.PReLU"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "self", ",", "conv", ",", "scale", ",", "n_feats", ",", "bn", "=", "False", ",", "act", "=", "False", ",", "bias", "=", "True", ")", ":", "\n", "\n", "        ", "m", "=", "[", "]", "\n", "if", "(", "scale", "&", "(", "scale", "-", "1", ")", ")", "==", "0", ":", "# Is scale = 2^n?", "\n", "            ", "for", "_", "in", "range", "(", "int", "(", "math", ".", "log", "(", "scale", ",", "2", ")", ")", ")", ":", "\n", "                ", "m", ".", "append", "(", "conv", "(", "n_feats", ",", "4", "*", "n_feats", ",", "3", ",", "bias", ")", ")", "\n", "m", ".", "append", "(", "nn", ".", "PixelShuffle", "(", "2", ")", ")", "\n", "if", "bn", ":", "\n", "                    ", "m", ".", "append", "(", "nn", ".", "BatchNorm2d", "(", "n_feats", ")", ")", "\n", "", "if", "act", "==", "'relu'", ":", "\n", "                    ", "m", ".", "append", "(", "nn", ".", "ReLU", "(", "True", ")", ")", "\n", "", "elif", "act", "==", "'prelu'", ":", "\n", "                    ", "m", ".", "append", "(", "nn", ".", "PReLU", "(", "n_feats", ")", ")", "\n", "\n", "", "", "", "elif", "scale", "==", "3", ":", "\n", "            ", "m", ".", "append", "(", "conv", "(", "n_feats", ",", "9", "*", "n_feats", ",", "3", ",", "bias", ")", ")", "\n", "m", ".", "append", "(", "nn", ".", "PixelShuffle", "(", "3", ")", ")", "\n", "if", "bn", ":", "\n", "                ", "m", ".", "append", "(", "nn", ".", "BatchNorm2d", "(", "n_feats", ")", ")", "\n", "", "if", "act", "==", "'relu'", ":", "\n", "                ", "m", ".", "append", "(", "nn", ".", "ReLU", "(", "True", ")", ")", "\n", "", "elif", "act", "==", "'prelu'", ":", "\n", "                ", "m", ".", "append", "(", "nn", ".", "PReLU", "(", "n_feats", ")", ")", "\n", "", "", "else", ":", "\n", "            ", "raise", "NotImplementedError", "\n", "\n", "", "super", "(", "Upsampler", ",", "self", ")", ".", "__init__", "(", "*", "m", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.default_conv": [[9, 13], ["torch.Conv2d"], "function", ["None"], ["def", "default_conv", "(", "in_channels", ",", "out_channels", ",", "kernel_size", ",", "bias", "=", "True", ")", ":", "\n", "    ", "return", "nn", ".", "Conv2d", "(", "\n", "in_channels", ",", "out_channels", ",", "kernel_size", ",", "\n", "padding", "=", "(", "kernel_size", "//", "2", ")", ",", "bias", "=", "bias", ")", "\n", "", "def", "last_zero_init", "(", "m", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.common.last_zero_init": [[13, 20], ["isinstance", "mmcv.cnn.constant_init", "mmcv.cnn.constant_init"], "function", ["None"], ["", "def", "last_zero_init", "(", "m", ")", ":", "\n", "    ", "if", "isinstance", "(", "m", ",", "nn", ".", "Sequential", ")", ":", "\n", "        ", "constant_init", "(", "m", "[", "-", "1", "]", ",", "val", "=", "0", ")", "\n", "m", "[", "-", "1", "]", ".", "inited", "=", "True", "\n", "", "else", ":", "\n", "        ", "constant_init", "(", "m", ",", "val", "=", "0", ")", "\n", "m", ".", "inited", "=", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.rdn.RDB_Conv.__init__": [[14, 21], ["torch.Module.__init__", "torch.Sequential", "torch.Sequential", "torch.Conv2d", "torch.Conv2d", "torch.ReLU", "torch.ReLU"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "self", ",", "inChannels", ",", "growRate", ",", "kSize", "=", "3", ")", ":", "\n", "        ", "super", "(", "RDB_Conv", ",", "self", ")", ".", "__init__", "(", ")", "\n", "Cin", "=", "inChannels", "\n", "G", "=", "growRate", "\n", "self", ".", "conv", "=", "nn", ".", "Sequential", "(", "*", "[", "\n", "nn", ".", "Conv2d", "(", "Cin", ",", "G", ",", "kSize", ",", "padding", "=", "(", "kSize", "-", "1", ")", "//", "2", ",", "stride", "=", "1", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", "\n", "]", ")", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.rdn.RDB_Conv.forward": [[23, 26], ["rdn.RDB_Conv.conv", "torch.cat", "torch.cat", "torch.cat", "torch.cat"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "out", "=", "self", ".", "conv", "(", "x", ")", "\n", "return", "torch", ".", "cat", "(", "(", "x", ",", "out", ")", ",", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.rdn.RDB.__init__": [[28, 41], ["torch.Module.__init__", "range", "torch.Sequential", "torch.Sequential", "torch.Conv2d", "torch.Conv2d", "convs.append", "rdn.RDB_Conv"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "self", ",", "growRate0", ",", "growRate", ",", "nConvLayers", ",", "kSize", "=", "3", ")", ":", "\n", "        ", "super", "(", "RDB", ",", "self", ")", ".", "__init__", "(", ")", "\n", "G0", "=", "growRate0", "\n", "G", "=", "growRate", "\n", "C", "=", "nConvLayers", "\n", "\n", "convs", "=", "[", "]", "\n", "for", "c", "in", "range", "(", "C", ")", ":", "\n", "            ", "convs", ".", "append", "(", "RDB_Conv", "(", "G0", "+", "c", "*", "G", ",", "G", ")", ")", "\n", "", "self", ".", "convs", "=", "nn", ".", "Sequential", "(", "*", "convs", ")", "\n", "\n", "# Local Feature Fusion", "\n", "self", ".", "LFF", "=", "nn", ".", "Conv2d", "(", "G0", "+", "C", "*", "G", ",", "G0", ",", "1", ",", "padding", "=", "0", ",", "stride", "=", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.rdn.RDB.forward": [[42, 44], ["rdn.RDB.LFF", "rdn.RDB.convs"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "self", ".", "LFF", "(", "self", ".", "convs", "(", "x", ")", ")", "+", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.rdn.RDN.__init__": [[46, 92], ["torch.Module.__init__", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.ModuleList", "torch.ModuleList", "range", "torch.Sequential", "torch.Sequential", "rdn.RDN.RDBs.append", "torch.Sequential", "torch.Sequential", "rdn.RDB", "torch.Sequential", "torch.Sequential", "ValueError", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.PixelShuffle", "torch.PixelShuffle", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.PixelShuffle", "torch.PixelShuffle", "torch.Conv2d", "torch.Conv2d", "torch.PixelShuffle", "torch.PixelShuffle", "torch.Conv2d", "torch.Conv2d"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "self", ",", "args", ")", ":", "\n", "        ", "super", "(", "RDN", ",", "self", ")", ".", "__init__", "(", ")", "\n", "r", "=", "args", ".", "scale", "[", "0", "]", "\n", "G0", "=", "args", ".", "G0", "\n", "kSize", "=", "args", ".", "RDNkSize", "\n", "\n", "# number of RDB blocks, conv layers, out channels", "\n", "self", ".", "D", ",", "C", ",", "G", "=", "{", "\n", "'A'", ":", "(", "20", ",", "6", ",", "32", ")", ",", "\n", "'B'", ":", "(", "16", ",", "8", ",", "64", ")", ",", "\n", "}", "[", "args", ".", "RDNconfig", "]", "\n", "\n", "# Shallow feature extraction net", "\n", "self", ".", "SFENet1", "=", "nn", ".", "Conv2d", "(", "args", ".", "n_colors", ",", "G0", ",", "kSize", ",", "padding", "=", "(", "kSize", "-", "1", ")", "//", "2", ",", "stride", "=", "1", ")", "\n", "self", ".", "SFENet2", "=", "nn", ".", "Conv2d", "(", "G0", ",", "G0", ",", "kSize", ",", "padding", "=", "(", "kSize", "-", "1", ")", "//", "2", ",", "stride", "=", "1", ")", "\n", "\n", "# Redidual dense blocks and dense feature fusion", "\n", "self", ".", "RDBs", "=", "nn", ".", "ModuleList", "(", ")", "\n", "for", "i", "in", "range", "(", "self", ".", "D", ")", ":", "\n", "            ", "self", ".", "RDBs", ".", "append", "(", "\n", "RDB", "(", "growRate0", "=", "G0", ",", "growRate", "=", "G", ",", "nConvLayers", "=", "C", ")", "\n", ")", "\n", "\n", "# Global Feature Fusion", "\n", "", "self", ".", "GFF", "=", "nn", ".", "Sequential", "(", "*", "[", "\n", "nn", ".", "Conv2d", "(", "self", ".", "D", "*", "G0", ",", "G0", ",", "1", ",", "padding", "=", "0", ",", "stride", "=", "1", ")", ",", "\n", "nn", ".", "Conv2d", "(", "G0", ",", "G0", ",", "kSize", ",", "padding", "=", "(", "kSize", "-", "1", ")", "//", "2", ",", "stride", "=", "1", ")", "\n", "]", ")", "\n", "\n", "# Up-sampling net", "\n", "if", "r", "==", "2", "or", "r", "==", "3", ":", "\n", "            ", "self", ".", "UPNet", "=", "nn", ".", "Sequential", "(", "*", "[", "\n", "nn", ".", "Conv2d", "(", "G0", ",", "G", "*", "r", "*", "r", ",", "kSize", ",", "padding", "=", "(", "kSize", "-", "1", ")", "//", "2", ",", "stride", "=", "1", ")", ",", "\n", "nn", ".", "PixelShuffle", "(", "r", ")", ",", "\n", "nn", ".", "Conv2d", "(", "G", ",", "args", ".", "n_colors", ",", "kSize", ",", "padding", "=", "(", "kSize", "-", "1", ")", "//", "2", ",", "stride", "=", "1", ")", "\n", "]", ")", "\n", "", "elif", "r", "==", "4", ":", "\n", "            ", "self", ".", "UPNet", "=", "nn", ".", "Sequential", "(", "*", "[", "\n", "nn", ".", "Conv2d", "(", "G0", ",", "G", "*", "4", ",", "kSize", ",", "padding", "=", "(", "kSize", "-", "1", ")", "//", "2", ",", "stride", "=", "1", ")", ",", "\n", "nn", ".", "PixelShuffle", "(", "2", ")", ",", "\n", "nn", ".", "Conv2d", "(", "G", ",", "G", "*", "4", ",", "kSize", ",", "padding", "=", "(", "kSize", "-", "1", ")", "//", "2", ",", "stride", "=", "1", ")", ",", "\n", "nn", ".", "PixelShuffle", "(", "2", ")", ",", "\n", "nn", ".", "Conv2d", "(", "G", ",", "args", ".", "n_colors", ",", "kSize", ",", "padding", "=", "(", "kSize", "-", "1", ")", "//", "2", ",", "stride", "=", "1", ")", "\n", "]", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "\"scale must be 2 or 3 or 4.\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.rdn.RDN.forward": [[93, 106], ["rdn.RDN.SFENet1", "rdn.RDN.SFENet2", "range", "rdn.RDN.GFF", "rdn.RDN.UPNet", "RDBs_out.append", "torch.cat", "torch.cat", "torch.cat", "torch.cat"], "methods", ["None"], ["", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "f__1", "=", "self", ".", "SFENet1", "(", "x", ")", "\n", "x", "=", "self", ".", "SFENet2", "(", "f__1", ")", "\n", "\n", "RDBs_out", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "self", ".", "D", ")", ":", "\n", "            ", "x", "=", "self", ".", "RDBs", "[", "i", "]", "(", "x", ")", "\n", "RDBs_out", ".", "append", "(", "x", ")", "\n", "\n", "", "x", "=", "self", ".", "GFF", "(", "torch", ".", "cat", "(", "RDBs_out", ",", "1", ")", ")", "\n", "x", "+=", "f__1", "\n", "\n", "return", "self", ".", "UPNet", "(", "x", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.rdn.make_model": [[10, 12], ["rdn.RDN"], "function", ["None"], ["def", "make_model", "(", "args", ",", "parent", "=", "False", ")", ":", "\n", "    ", "return", "RDN", "(", "args", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.acubenet.MCPN.__init__": [[12, 16], ["torch.Module.__init__", "model.common.MABlock", "model.common.ContextBlock2d"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["self", ".", "MA", "=", "common", ".", "MABlock", "(", "conv", ")", "\n", "self", ".", "context", "=", "common", ".", "ContextBlock2d", "(", "channel", ")", "\n", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x1", "=", "self", ".", "MA", "(", "x", ")", "\n", "x2", "=", "self", ".", "context", "(", "x", ")", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.acubenet.MCPN.forward": [[16, 21], ["acubenet.MCPN.MA", "acubenet.MCPN.context"], "methods", ["None"], ["x2", "=", "self", ".", "context", "(", "x", ")", "\n", "x", "=", "x", "+", "x1", "+", "x2", "\n", "return", "x", "\n", "\n", "\n", "## Residual Dual Attention Unit (RDAU)", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.acubenet.RDAU.__init__": [[25, 34], ["torch.ReLU", "torch.ReLU", "torch.Module.__init__", "modules_body.append", "modules_body.append", "torch.Sequential", "torch.Sequential", "model.common.ResBlock", "acubenet.MCPN"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["bias", "=", "True", ",", "bn", "=", "False", ",", "act", "=", "nn", ".", "ReLU", "(", "True", ")", ",", "res_scale", "=", "1", ")", ":", "\n", "\n", "        ", "super", "(", "RDAU", ",", "self", ")", ".", "__init__", "(", ")", "\n", "modules_body", "=", "[", "]", "\n", "modules_body", ".", "append", "(", "common", ".", "ResBlock", "(", "conv", ",", "n_feat", ",", "kernel_size", "=", "3", ",", "act", "=", "act", ",", "res_scale", "=", "1", ")", ")", "\n", "modules_body", ".", "append", "(", "MCPN", "(", "n_feat", ")", ")", "\n", "self", ".", "body", "=", "nn", ".", "Sequential", "(", "*", "modules_body", ")", "\n", "\n", "\n", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.acubenet.RDAU.forward": [[36, 41], ["acubenet.RDAU.body"], "methods", ["None"], ["#res = self.body(x).mul(self.res_scale)", "\n", "#res += x", "\n", "return", "res", "\n", "\n", "## Residual Dual Attention Group (RDAG)", "\n", "", "", "class", "RDAG", "(", "nn", ".", "Module", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.acubenet.RDAG.__init__": [[44, 53], ["torch.Module.__init__", "modules_body.append", "torch.Sequential", "torch.Sequential", "acubenet.RDAU", "conv", "range", "torch.ReLU", "torch.ReLU"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["modules_body", "=", "[", "]", "\n", "modules_body", "=", "[", "\n", "RDAU", "(", "\n", "conv", ",", "n_feat", ",", "kernel_size", ",", "reduction", ",", "bias", "=", "True", ",", "bn", "=", "False", ",", "act", "=", "nn", ".", "ReLU", "(", "True", ")", ",", "res_scale", "=", "1", ")", "for", "_", "in", "range", "(", "n_resblocks", ")", "]", "\n", "modules_body", ".", "append", "(", "conv", "(", "n_feat", ",", "n_feat", ",", "kernel_size", ")", ")", "\n", "self", ".", "body", "=", "nn", ".", "Sequential", "(", "*", "modules_body", ")", "\n", "\n", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "res", "=", "self", ".", "body", "(", "x", ")", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.acubenet.RDAG.forward": [[54, 58], ["acubenet.RDAG.body"], "methods", ["None"], ["res", "+=", "x", "\n", "return", "res", "\n", "\n", "## Attention Cube Network (ACubeNet)", "\n", "", "", "class", "ACubeNet", "(", "nn", ".", "Module", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.acubenet.ACubeNet.__init__": [[61, 100], ["torch.Module.__init__", "torch.ReLU", "torch.ReLU", "model.common.AFF", "torch.AdaptiveAvgPool2d", "torch.AdaptiveAvgPool2d", "torch.ModuleList", "torch.ModuleList", "range", "torch.ModuleList", "torch.ModuleList", "range", "m_VFF.append", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "conv", "acubenet.ACubeNet.body.append", "acubenet.ACubeNet.sq.append", "conv", "conv", "acubenet.RDAG", "conv"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["\n", "n_resgroups", "=", "args", ".", "n_resgroups", "\n", "n_resblocks", "=", "args", ".", "n_resblocks", "\n", "n_feats", "=", "args", ".", "n_feats", "\n", "kernel_size", "=", "3", "\n", "reduction", "=", "args", ".", "reduction", "\n", "scale", "=", "args", ".", "scale", "[", "0", "]", "\n", "act", "=", "nn", ".", "ReLU", "(", "True", ")", "\n", "self", ".", "aff", "=", "common", ".", "AFF", "(", "n_feats", ",", "conv", ")", "\n", "self", ".", "avg_pool", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "1", ")", "\n", "\n", "# RGB mean for DIV2K", "\n", "self", ".", "sub_mean", "=", "common", ".", "MeanShift", "(", "args", ".", "rgb_range", ")", "\n", "\n", "# define head module", "\n", "modules_head", "=", "[", "conv", "(", "args", ".", "n_colors", ",", "n_feats", ",", "kernel_size", ")", "]", "\n", "\n", "# define body module", "\n", "self", ".", "body", "=", "nn", ".", "ModuleList", "(", ")", "\n", "for", "_", "in", "range", "(", "n_resgroups", ")", ":", "\n", "            ", "self", ".", "body", ".", "append", "(", "RDAG", "(", "conv", ",", "n_feats", ",", "kernel_size", ",", "reduction", ",", "act", "=", "act", ",", "res_scale", "=", "args", ".", "res_scale", ",", "n_resblocks", "=", "n_resblocks", ")", ")", "\n", "\n", "", "self", ".", "sq", "=", "nn", ".", "ModuleList", "(", ")", "\n", "for", "_", "in", "range", "(", "n_resgroups", ")", ":", "\n", "            ", "self", ".", "sq", ".", "append", "(", "conv", "(", "n_feats", ",", "1", ",", "kernel_size", "=", "1", ")", ")", "\n", "\n", "", "m_VFF", "=", "[", "]", "\n", "m_VFF", ".", "append", "(", "conv", "(", "n_feats", ",", "n_feats", ",", "kernel_size", ")", ")", "\n", "\n", "# define tail module", "\n", "modules_tail", "=", "[", "\n", "common", ".", "Upsampler", "(", "conv", ",", "scale", ",", "n_feats", ",", "act", "=", "False", ")", ",", "\n", "conv", "(", "n_feats", ",", "args", ".", "n_colors", ",", "kernel_size", ")", "]", "\n", "\n", "self", ".", "add_mean", "=", "common", ".", "MeanShift", "(", "args", ".", "rgb_range", ",", "sign", "=", "1", ")", "\n", "\n", "self", ".", "head", "=", "nn", ".", "Sequential", "(", "*", "modules_head", ")", "\n", "self", ".", "VFF", "=", "nn", ".", "Sequential", "(", "*", "m_VFF", ")", "\n", "self", ".", "tail", "=", "nn", ".", "Sequential", "(", "*", "modules_tail", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.acubenet.ACubeNet.forward": [[101, 130], ["acubenet.ACubeNet.head", "range", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "acubenet.ACubeNet.aff", "acubenet.ACubeNet.VFF", "acubenet.ACubeNet.tail", "acubenet.ACubeNet.avg_pool", "z.unsqueeze.unsqueeze.unsqueeze", "y.unsqueeze", "RBs_up.append", "RBs_sq.append"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "sub_mean", "(", "x", ")", "\n", "x", "=", "self", ".", "head", "(", "x", ")", "\n", "y", "=", "x", "\n", "RBs_sq", "=", "[", "]", "\n", "RBs_up", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "4", ")", ":", "\n", "            ", "y", "=", "self", ".", "body", "[", "i", "]", "(", "y", ")", "#N*C*H*W", "\n", "z", "=", "self", ".", "avg_pool", "(", "y", ")", "#N*C*1*1", "\n", "z", "=", "self", ".", "sq", "[", "i", "]", "(", "z", ")", "#N*1*1*1", "\n", "z", "=", "z", ".", "unsqueeze", "(", "-", "2", ")", "#N*1*1*1*1", "\n", "t", "=", "y", ".", "unsqueeze", "(", "-", "1", ")", "#N*C*H*W*1", "\n", "#RBs_out.append(y) #K_N*C*H*W", "\n", "RBs_up", ".", "append", "(", "t", ")", "#K_N*C*H*W*1", "\n", "RBs_sq", ".", "append", "(", "z", ")", "#K_N*1*1*1*1", "\n", "\n", "", "output1", "=", "torch", ".", "cat", "(", "RBs_up", ",", "dim", "=", "-", "1", ")", "#N*C*H*W*K", "\n", "output2", "=", "torch", ".", "cat", "(", "RBs_sq", ",", "dim", "=", "-", "2", ")", "#N*1*1*K*1", "\n", "out", "=", "self", ".", "aff", "(", "output1", ",", "output2", ")", "#N*C*H*W", "\n", "\n", "y", "=", "y", "+", "out", "\n", "res", "=", "self", ".", "VFF", "(", "y", ")", "\n", "\n", "res", "+=", "x", "\n", "\n", "x", "=", "self", ".", "tail", "(", "res", ")", "\n", "x", "=", "self", ".", "add_mean", "(", "x", ")", "\n", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.acubenet.ACubeNet.load_state_dict": [[131, 156], ["acubenet.ACubeNet.state_dict", "state_dict.items", "isinstance", "set", "set", "len", "KeyError", "own_state[].copy_", "acubenet.ACubeNet.keys", "state_dict.keys", "name.find", "KeyError", "name.find", "print", "RuntimeError", "own_state[].size", "param.size"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.adversarial.Adversarial.state_dict"], ["", "def", "load_state_dict", "(", "self", ",", "state_dict", ",", "strict", "=", "False", ")", ":", "\n", "        ", "own_state", "=", "self", ".", "state_dict", "(", ")", "\n", "for", "name", ",", "param", "in", "state_dict", ".", "items", "(", ")", ":", "\n", "            ", "if", "name", "in", "own_state", ":", "\n", "                ", "if", "isinstance", "(", "param", ",", "nn", ".", "Parameter", ")", ":", "\n", "                    ", "param", "=", "param", ".", "data", "\n", "", "try", ":", "\n", "                    ", "own_state", "[", "name", "]", ".", "copy_", "(", "param", ")", "\n", "", "except", "Exception", ":", "\n", "                    ", "if", "name", ".", "find", "(", "'tail'", ")", ">=", "0", ":", "\n", "                        ", "print", "(", "'Replace pre-trained upsampler to new one...'", ")", "\n", "", "else", ":", "\n", "                        ", "raise", "RuntimeError", "(", "'While copying the parameter named {}, '", "\n", "'whose dimensions in the model are {} and '", "\n", "'whose dimensions in the checkpoint are {}.'", "\n", ".", "format", "(", "name", ",", "own_state", "[", "name", "]", ".", "size", "(", ")", ",", "param", ".", "size", "(", ")", ")", ")", "\n", "", "", "", "elif", "strict", ":", "\n", "                ", "if", "name", ".", "find", "(", "'tail'", ")", "==", "-", "1", ":", "\n", "                    ", "raise", "KeyError", "(", "'unexpected key \"{}\" in state_dict'", "\n", ".", "format", "(", "name", ")", ")", "\n", "\n", "", "", "", "if", "strict", ":", "\n", "            ", "missing", "=", "set", "(", "own_state", ".", "keys", "(", ")", ")", "-", "set", "(", "state_dict", ".", "keys", "(", ")", ")", "\n", "if", "len", "(", "missing", ")", ">", "0", ":", "\n", "                ", "raise", "KeyError", "(", "'missing keys in state_dict: \"{}\"'", ".", "format", "(", "missing", ")", ")", "\n", "", "", "", "", ""]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.acubenet.make_model": [[9, 11], ["acubenet.ACubeNet"], "function", ["None"], ["", "class", "MCPN", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "channel", ",", "conv", "=", "common", ".", "default_conv", ")", ":", "\n", "        ", "super", "(", "MCPN", ",", "self", ")", ".", "__init__", "(", ")", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.mdsr.MDSR.__init__": [[14, 50], ["torch.Module.__init__", "torch.ReLU", "model.common.MeanShift", "model.common.MeanShift", "torch.ModuleList", "m_body.append", "torch.ModuleList", "torch.Sequential", "torch.Sequential", "torch.Sequential", "conv", "model.common.ResBlock", "conv", "conv", "torch.Sequential", "range", "model.common.Upsampler", "model.common.ResBlock", "model.common.ResBlock"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "self", ",", "args", ",", "conv", "=", "common", ".", "default_conv", ")", ":", "\n", "        ", "super", "(", "MDSR", ",", "self", ")", ".", "__init__", "(", ")", "\n", "n_resblocks", "=", "args", ".", "n_resblocks", "\n", "n_feats", "=", "args", ".", "n_feats", "\n", "kernel_size", "=", "3", "\n", "act", "=", "nn", ".", "ReLU", "(", "True", ")", "\n", "self", ".", "scale_idx", "=", "0", "\n", "self", ".", "url", "=", "url", "[", "'r{}f{}'", ".", "format", "(", "n_resblocks", ",", "n_feats", ")", "]", "\n", "self", ".", "sub_mean", "=", "common", ".", "MeanShift", "(", "args", ".", "rgb_range", ")", "\n", "self", ".", "add_mean", "=", "common", ".", "MeanShift", "(", "args", ".", "rgb_range", ",", "sign", "=", "1", ")", "\n", "\n", "m_head", "=", "[", "conv", "(", "args", ".", "n_colors", ",", "n_feats", ",", "kernel_size", ")", "]", "\n", "\n", "self", ".", "pre_process", "=", "nn", ".", "ModuleList", "(", "[", "\n", "nn", ".", "Sequential", "(", "\n", "common", ".", "ResBlock", "(", "conv", ",", "n_feats", ",", "5", ",", "act", "=", "act", ")", ",", "\n", "common", ".", "ResBlock", "(", "conv", ",", "n_feats", ",", "5", ",", "act", "=", "act", ")", "\n", ")", "for", "_", "in", "args", ".", "scale", "\n", "]", ")", "\n", "\n", "m_body", "=", "[", "\n", "common", ".", "ResBlock", "(", "\n", "conv", ",", "n_feats", ",", "kernel_size", ",", "act", "=", "act", "\n", ")", "for", "_", "in", "range", "(", "n_resblocks", ")", "\n", "]", "\n", "m_body", ".", "append", "(", "conv", "(", "n_feats", ",", "n_feats", ",", "kernel_size", ")", ")", "\n", "\n", "self", ".", "upsample", "=", "nn", ".", "ModuleList", "(", "[", "\n", "common", ".", "Upsampler", "(", "conv", ",", "s", ",", "n_feats", ",", "act", "=", "False", ")", "for", "s", "in", "args", ".", "scale", "\n", "]", ")", "\n", "\n", "m_tail", "=", "[", "conv", "(", "n_feats", ",", "args", ".", "n_colors", ",", "kernel_size", ")", "]", "\n", "\n", "self", ".", "head", "=", "nn", ".", "Sequential", "(", "*", "m_head", ")", "\n", "self", ".", "body", "=", "nn", ".", "Sequential", "(", "*", "m_body", ")", "\n", "self", ".", "tail", "=", "nn", ".", "Sequential", "(", "*", "m_tail", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.mdsr.MDSR.forward": [[51, 64], ["mdsr.MDSR.sub_mean", "mdsr.MDSR.head", "mdsr.MDSR.body", "mdsr.MDSR.tail", "mdsr.MDSR.add_mean"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "sub_mean", "(", "x", ")", "\n", "x", "=", "self", ".", "head", "(", "x", ")", "\n", "x", "=", "self", ".", "pre_process", "[", "self", ".", "scale_idx", "]", "(", "x", ")", "\n", "\n", "res", "=", "self", ".", "body", "(", "x", ")", "\n", "res", "+=", "x", "\n", "\n", "x", "=", "self", ".", "upsample", "[", "self", ".", "scale_idx", "]", "(", "res", ")", "\n", "x", "=", "self", ".", "tail", "(", "x", ")", "\n", "x", "=", "self", ".", "add_mean", "(", "x", ")", "\n", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.mdsr.MDSR.set_scale": [[65, 67], ["None"], "methods", ["None"], ["", "def", "set_scale", "(", "self", ",", "scale_idx", ")", ":", "\n", "        ", "self", ".", "scale_idx", "=", "scale_idx", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.mdsr.make_model": [[10, 12], ["mdsr.MDSR"], "function", ["None"], ["def", "make_model", "(", "args", ",", "parent", "=", "False", ")", ":", "\n", "    ", "return", "MDSR", "(", "args", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.vdsr.VDSR.__init__": [[14, 38], ["torch.Module.__init__", "model.common.MeanShift", "model.common.MeanShift", "m_body.append", "range", "m_body.append", "torch.Sequential", "torch.Sequential", "model.common.BasicBlock", "vdsr.VDSR.__init__.basic_block"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "self", ",", "args", ",", "conv", "=", "common", ".", "default_conv", ")", ":", "\n", "        ", "super", "(", "VDSR", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "n_resblocks", "=", "args", ".", "n_resblocks", "\n", "n_feats", "=", "args", ".", "n_feats", "\n", "kernel_size", "=", "3", "\n", "self", ".", "url", "=", "url", "[", "'r{}f{}'", ".", "format", "(", "n_resblocks", ",", "n_feats", ")", "]", "\n", "self", ".", "sub_mean", "=", "common", ".", "MeanShift", "(", "args", ".", "rgb_range", ")", "\n", "self", ".", "add_mean", "=", "common", ".", "MeanShift", "(", "args", ".", "rgb_range", ",", "sign", "=", "1", ")", "\n", "\n", "def", "basic_block", "(", "in_channels", ",", "out_channels", ",", "act", ")", ":", "\n", "            ", "return", "common", ".", "BasicBlock", "(", "\n", "conv", ",", "in_channels", ",", "out_channels", ",", "kernel_size", ",", "\n", "bias", "=", "True", ",", "bn", "=", "False", ",", "act", "=", "act", "\n", ")", "\n", "\n", "# define body module", "\n", "", "m_body", "=", "[", "]", "\n", "m_body", ".", "append", "(", "basic_block", "(", "args", ".", "n_colors", ",", "n_feats", ",", "nn", ".", "ReLU", "(", "True", ")", ")", ")", "\n", "for", "_", "in", "range", "(", "n_resblocks", "-", "2", ")", ":", "\n", "            ", "m_body", ".", "append", "(", "basic_block", "(", "n_feats", ",", "n_feats", ",", "nn", ".", "ReLU", "(", "True", ")", ")", ")", "\n", "", "m_body", ".", "append", "(", "basic_block", "(", "n_feats", ",", "args", ".", "n_colors", ",", "None", ")", ")", "\n", "\n", "self", ".", "body", "=", "nn", ".", "Sequential", "(", "*", "m_body", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.vdsr.VDSR.forward": [[39, 46], ["vdsr.VDSR.sub_mean", "vdsr.VDSR.body", "vdsr.VDSR.add_mean"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "sub_mean", "(", "x", ")", "\n", "res", "=", "self", ".", "body", "(", "x", ")", "\n", "res", "+=", "x", "\n", "x", "=", "self", ".", "add_mean", "(", "res", ")", "\n", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.vdsr.make_model": [[10, 12], ["vdsr.VDSR"], "function", ["None"], ["def", "make_model", "(", "args", ",", "parent", "=", "False", ")", ":", "\n", "    ", "return", "VDSR", "(", "args", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.__init__.Model.__init__": [[10, 37], ["torch.Module.__init__", "print", "torch.device", "torch.device", "torch.device", "torch.device", "torch.device", "torch.device", "torch.device", "torch.device", "torch.device", "torch.device", "torch.device", "torch.device", "torch.device", "torch.device", "torch.device", "torch.device", "importlib.import_module", "importlib.import_module.make_model().to", "__init__.Model.load", "print", "__init__.Model.model.half", "ckp.get_path", "args.model.lower", "importlib.import_module.make_model"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.checkpoint.get_path", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.ddbpn.make_model"], ["    ", "def", "__init__", "(", "self", ",", "args", ",", "ckp", ")", ":", "\n", "        ", "super", "(", "Model", ",", "self", ")", ".", "__init__", "(", ")", "\n", "print", "(", "'Making model...'", ")", "\n", "\n", "self", ".", "scale", "=", "args", ".", "scale", "\n", "self", ".", "idx_scale", "=", "0", "\n", "self", ".", "input_large", "=", "(", "args", ".", "model", "==", "'VDSR'", ")", "\n", "self", ".", "self_ensemble", "=", "args", ".", "self_ensemble", "\n", "self", ".", "chop", "=", "args", ".", "chop", "\n", "self", ".", "precision", "=", "args", ".", "precision", "\n", "self", ".", "cpu", "=", "args", ".", "cpu", "\n", "self", ".", "device", "=", "torch", ".", "device", "(", "'cpu'", "if", "args", ".", "cpu", "else", "'cuda'", ")", "\n", "self", ".", "n_GPUs", "=", "args", ".", "n_GPUs", "\n", "self", ".", "save_models", "=", "args", ".", "save_models", "\n", "\n", "module", "=", "import_module", "(", "'model.'", "+", "args", ".", "model", ".", "lower", "(", ")", ")", "\n", "self", ".", "model", "=", "module", ".", "make_model", "(", "args", ")", ".", "to", "(", "self", ".", "device", ")", "\n", "if", "args", ".", "precision", "==", "'half'", ":", "\n", "            ", "self", ".", "model", ".", "half", "(", ")", "\n", "\n", "", "self", ".", "load", "(", "\n", "ckp", ".", "get_path", "(", "'model'", ")", ",", "\n", "pre_train", "=", "args", ".", "pre_train", ",", "\n", "resume", "=", "args", ".", "resume", ",", "\n", "cpu", "=", "args", ".", "cpu", "\n", ")", "\n", "print", "(", "self", ".", "model", ",", "file", "=", "ckp", ".", "log_file", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.__init__.Model.forward": [[38, 58], ["hasattr", "__init__.Model.model.set_scale", "torch.data_parallel", "torch.data_parallel", "torch.data_parallel", "torch.data_parallel", "__init__.Model.model", "__init__.Model.forward_x8", "forward_function", "range"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.__init__.MyConcatDataset.set_scale", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.__init__.Model.forward_x8"], ["", "def", "forward", "(", "self", ",", "x", ",", "idx_scale", ")", ":", "\n", "        ", "self", ".", "idx_scale", "=", "idx_scale", "\n", "if", "hasattr", "(", "self", ".", "model", ",", "'set_scale'", ")", ":", "\n", "            ", "self", ".", "model", ".", "set_scale", "(", "idx_scale", ")", "\n", "\n", "", "if", "self", ".", "training", ":", "\n", "            ", "if", "self", ".", "n_GPUs", ">", "1", ":", "\n", "                ", "return", "P", ".", "data_parallel", "(", "self", ".", "model", ",", "x", ",", "range", "(", "self", ".", "n_GPUs", ")", ")", "\n", "", "else", ":", "\n", "                ", "return", "self", ".", "model", "(", "x", ")", "\n", "", "", "else", ":", "\n", "            ", "if", "self", ".", "chop", ":", "\n", "                ", "forward_function", "=", "self", ".", "forward_chop", "\n", "", "else", ":", "\n", "                ", "forward_function", "=", "self", ".", "model", ".", "forward", "\n", "\n", "", "if", "self", ".", "self_ensemble", ":", "\n", "                ", "return", "self", ".", "forward_x8", "(", "x", ",", "forward_function", "=", "forward_function", ")", "\n", "", "else", ":", "\n", "                ", "return", "forward_function", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.__init__.Model.save": [[59, 71], ["os.path.join", "save_dirs.append", "save_dirs.append", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "os.path.join", "os.path.join", "__init__.Model.model.state_dict"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.adversarial.Adversarial.state_dict"], ["", "", "", "def", "save", "(", "self", ",", "apath", ",", "epoch", ",", "is_best", "=", "False", ")", ":", "\n", "        ", "save_dirs", "=", "[", "os", ".", "path", ".", "join", "(", "apath", ",", "'model_latest.pt'", ")", "]", "\n", "\n", "if", "is_best", ":", "\n", "            ", "save_dirs", ".", "append", "(", "os", ".", "path", ".", "join", "(", "apath", ",", "'model_best.pt'", ")", ")", "\n", "", "if", "self", ".", "save_models", ":", "\n", "            ", "save_dirs", ".", "append", "(", "\n", "os", ".", "path", ".", "join", "(", "apath", ",", "'model_{}.pt'", ".", "format", "(", "epoch", ")", ")", "\n", ")", "\n", "\n", "", "for", "s", "in", "save_dirs", ":", "\n", "            ", "torch", ".", "save", "(", "self", ".", "model", ".", "state_dict", "(", ")", ",", "s", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.__init__.Model.load": [[72, 104], ["torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "__init__.Model.model.load_state_dict", "os.path.join", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "print", "os.path.join", "os.makedirs", "torch.utils.model_zoo.load_url", "torch.utils.model_zoo.load_url", "torch.utils.model_zoo.load_url", "torch.utils.model_zoo.load_url", "torch.utils.model_zoo.load_url", "torch.utils.model_zoo.load_url", "torch.utils.model_zoo.load_url", "torch.utils.model_zoo.load_url", "torch.utils.model_zoo.load_url", "torch.utils.model_zoo.load_url", "torch.utils.model_zoo.load_url", "torch.utils.model_zoo.load_url", "torch.utils.model_zoo.load_url", "torch.utils.model_zoo.load_url", "torch.utils.model_zoo.load_url", "torch.utils.model_zoo.load_url", "os.path.join", "print", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.acubenet.ACubeNet.load_state_dict", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load"], ["", "", "def", "load", "(", "self", ",", "apath", ",", "pre_train", "=", "''", ",", "resume", "=", "-", "1", ",", "cpu", "=", "False", ")", ":", "\n", "        ", "load_from", "=", "None", "\n", "kwargs", "=", "{", "}", "\n", "if", "cpu", ":", "\n", "            ", "kwargs", "=", "{", "'map_location'", ":", "lambda", "storage", ",", "loc", ":", "storage", "}", "\n", "\n", "", "if", "resume", "==", "-", "1", ":", "\n", "            ", "load_from", "=", "torch", ".", "load", "(", "\n", "os", ".", "path", ".", "join", "(", "apath", ",", "'model_latest.pt'", ")", ",", "\n", "**", "kwargs", "\n", ")", "\n", "", "elif", "resume", "==", "0", ":", "\n", "            ", "if", "pre_train", "==", "'download'", ":", "\n", "                ", "print", "(", "'Download the model'", ")", "\n", "dir_model", "=", "os", ".", "path", ".", "join", "(", "'..'", ",", "'models'", ")", "\n", "os", ".", "makedirs", "(", "dir_model", ",", "exist_ok", "=", "True", ")", "\n", "load_from", "=", "torch", ".", "utils", ".", "model_zoo", ".", "load_url", "(", "\n", "self", ".", "model", ".", "url", ",", "\n", "model_dir", "=", "dir_model", ",", "\n", "**", "kwargs", "\n", ")", "\n", "", "elif", "pre_train", ":", "\n", "                ", "print", "(", "'Load the model from {}'", ".", "format", "(", "pre_train", ")", ")", "\n", "load_from", "=", "torch", ".", "load", "(", "pre_train", ",", "**", "kwargs", ")", "\n", "", "", "else", ":", "\n", "            ", "load_from", "=", "torch", ".", "load", "(", "\n", "os", ".", "path", ".", "join", "(", "apath", ",", "'model_{}.pt'", ".", "format", "(", "resume", ")", ")", ",", "\n", "**", "kwargs", "\n", ")", "\n", "\n", "", "if", "load_from", ":", "\n", "            ", "self", ".", "model", ".", "load_state_dict", "(", "load_from", ",", "strict", "=", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.__init__.Model.forward_chop": [[105, 163], ["min", "slice", "slice", "slice", "slice", "slice", "slice", "slice", "slice", "slice", "slice", "zip", "args[].size", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "range", "zip", "[].size", "y_chop[].new", "len", "torch.data_parallel", "torch.data_parallel", "torch.data_parallel", "torch.data_parallel", "__init__.Model.forward_chop", "range", "isinstance", "zip", "isinstance", "zip", "y_chop.extend", "y_chop.append", "_y.chunk", "_y.chunk"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.__init__.Model.forward_chop"], ["", "", "def", "forward_chop", "(", "self", ",", "*", "args", ",", "shave", "=", "10", ",", "min_size", "=", "160000", ")", ":", "\n", "        ", "scale", "=", "1", "if", "self", ".", "input_large", "else", "self", ".", "scale", "[", "self", ".", "idx_scale", "]", "\n", "n_GPUs", "=", "min", "(", "self", ".", "n_GPUs", ",", "4", ")", "\n", "# height, width", "\n", "h", ",", "w", "=", "args", "[", "0", "]", ".", "size", "(", ")", "[", "-", "2", ":", "]", "\n", "\n", "top", "=", "slice", "(", "0", ",", "h", "//", "2", "+", "shave", ")", "\n", "bottom", "=", "slice", "(", "h", "-", "h", "//", "2", "-", "shave", ",", "h", ")", "\n", "left", "=", "slice", "(", "0", ",", "w", "//", "2", "+", "shave", ")", "\n", "right", "=", "slice", "(", "w", "-", "w", "//", "2", "-", "shave", ",", "w", ")", "\n", "x_chops", "=", "[", "torch", ".", "cat", "(", "[", "\n", "a", "[", "...", ",", "top", ",", "left", "]", ",", "\n", "a", "[", "...", ",", "top", ",", "right", "]", ",", "\n", "a", "[", "...", ",", "bottom", ",", "left", "]", ",", "\n", "a", "[", "...", ",", "bottom", ",", "right", "]", "\n", "]", ")", "for", "a", "in", "args", "]", "\n", "\n", "y_chops", "=", "[", "]", "\n", "if", "h", "*", "w", "<", "4", "*", "min_size", ":", "\n", "            ", "for", "i", "in", "range", "(", "0", ",", "4", ",", "n_GPUs", ")", ":", "\n", "                ", "x", "=", "[", "x_chop", "[", "i", ":", "(", "i", "+", "n_GPUs", ")", "]", "for", "x_chop", "in", "x_chops", "]", "\n", "y", "=", "P", ".", "data_parallel", "(", "self", ".", "model", ",", "*", "x", ",", "range", "(", "n_GPUs", ")", ")", "\n", "if", "not", "isinstance", "(", "y", ",", "list", ")", ":", "y", "=", "[", "y", "]", "\n", "if", "not", "y_chops", ":", "\n", "                    ", "y_chops", "=", "[", "[", "c", "for", "c", "in", "_y", ".", "chunk", "(", "n_GPUs", ",", "dim", "=", "0", ")", "]", "for", "_y", "in", "y", "]", "\n", "", "else", ":", "\n", "                    ", "for", "y_chop", ",", "_y", "in", "zip", "(", "y_chops", ",", "y", ")", ":", "\n", "                        ", "y_chop", ".", "extend", "(", "_y", ".", "chunk", "(", "n_GPUs", ",", "dim", "=", "0", ")", ")", "\n", "", "", "", "", "else", ":", "\n", "            ", "for", "p", "in", "zip", "(", "*", "x_chops", ")", ":", "\n", "                ", "y", "=", "self", ".", "forward_chop", "(", "*", "p", ",", "shave", "=", "shave", ",", "min_size", "=", "min_size", ")", "\n", "if", "not", "isinstance", "(", "y", ",", "list", ")", ":", "y", "=", "[", "y", "]", "\n", "if", "not", "y_chops", ":", "\n", "                    ", "y_chops", "=", "[", "[", "_y", "]", "for", "_y", "in", "y", "]", "\n", "", "else", ":", "\n", "                    ", "for", "y_chop", ",", "_y", "in", "zip", "(", "y_chops", ",", "y", ")", ":", "y_chop", ".", "append", "(", "_y", ")", "\n", "\n", "", "", "", "h", "*=", "scale", "\n", "w", "*=", "scale", "\n", "top", "=", "slice", "(", "0", ",", "h", "//", "2", ")", "\n", "bottom", "=", "slice", "(", "h", "-", "h", "//", "2", ",", "h", ")", "\n", "bottom_r", "=", "slice", "(", "h", "//", "2", "-", "h", ",", "None", ")", "\n", "left", "=", "slice", "(", "0", ",", "w", "//", "2", ")", "\n", "right", "=", "slice", "(", "w", "-", "w", "//", "2", ",", "w", ")", "\n", "right_r", "=", "slice", "(", "w", "//", "2", "-", "w", ",", "None", ")", "\n", "\n", "# batch size, number of color channels", "\n", "b", ",", "c", "=", "y_chops", "[", "0", "]", "[", "0", "]", ".", "size", "(", ")", "[", ":", "-", "2", "]", "\n", "y", "=", "[", "y_chop", "[", "0", "]", ".", "new", "(", "b", ",", "c", ",", "h", ",", "w", ")", "for", "y_chop", "in", "y_chops", "]", "\n", "for", "y_chop", ",", "_y", "in", "zip", "(", "y_chops", ",", "y", ")", ":", "\n", "            ", "_y", "[", "...", ",", "top", ",", "left", "]", "=", "y_chop", "[", "0", "]", "[", "...", ",", "top", ",", "left", "]", "\n", "_y", "[", "...", ",", "top", ",", "right", "]", "=", "y_chop", "[", "1", "]", "[", "...", ",", "top", ",", "right_r", "]", "\n", "_y", "[", "...", ",", "bottom", ",", "left", "]", "=", "y_chop", "[", "2", "]", "[", "...", ",", "bottom_r", ",", "left", "]", "\n", "_y", "[", "...", ",", "bottom", ",", "right", "]", "=", "y_chop", "[", "3", "]", "[", "...", ",", "bottom_r", ",", "right_r", "]", "\n", "\n", "", "if", "len", "(", "y", ")", "==", "1", ":", "y", "=", "y", "[", "0", "]", "\n", "\n", "return", "y", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.__init__.Model.forward_x8": [[164, 210], ["zip", "v.float.float.data.cpu().numpy", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "list_x.append", "forward_function", "range", "torch.cat().mean", "torch.cat().mean", "torch.cat().mean", "torch.cat().mean", "torch.cat().mean", "torch.cat().mean", "torch.cat().mean", "torch.cat().mean", "torch.cat().mean", "torch.cat().mean", "torch.cat().mean", "torch.cat().mean", "torch.cat().mean", "torch.cat().mean", "torch.cat().mean", "torch.cat().mean", "len", "v.float.float.float", "v2np[].copy", "ret.half.half.half", "x.extend", "isinstance", "zip", "len", "v.float.float.data.cpu", "v2np[].copy", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "_list_y.append", "__init__.Model.forward_x8._transform"], "methods", ["None"], ["", "def", "forward_x8", "(", "self", ",", "*", "args", ",", "forward_function", "=", "None", ")", ":", "\n", "        ", "def", "_transform", "(", "v", ",", "op", ")", ":", "\n", "            ", "if", "self", ".", "precision", "!=", "'single'", ":", "v", "=", "v", ".", "float", "(", ")", "\n", "\n", "v2np", "=", "v", ".", "data", ".", "cpu", "(", ")", ".", "numpy", "(", ")", "\n", "if", "op", "==", "'v'", ":", "\n", "                ", "tfnp", "=", "v2np", "[", ":", ",", ":", ",", ":", ",", ":", ":", "-", "1", "]", ".", "copy", "(", ")", "\n", "", "elif", "op", "==", "'h'", ":", "\n", "                ", "tfnp", "=", "v2np", "[", ":", ",", ":", ",", ":", ":", "-", "1", ",", ":", "]", ".", "copy", "(", ")", "\n", "", "elif", "op", "==", "'t'", ":", "\n", "                ", "tfnp", "=", "v2np", ".", "transpose", "(", "(", "0", ",", "1", ",", "3", ",", "2", ")", ")", ".", "copy", "(", ")", "\n", "\n", "", "ret", "=", "torch", ".", "Tensor", "(", "tfnp", ")", ".", "to", "(", "self", ".", "device", ")", "\n", "if", "self", ".", "precision", "==", "'half'", ":", "ret", "=", "ret", ".", "half", "(", ")", "\n", "\n", "return", "ret", "\n", "\n", "", "list_x", "=", "[", "]", "\n", "for", "a", "in", "args", ":", "\n", "            ", "x", "=", "[", "a", "]", "\n", "for", "tf", "in", "'v'", ",", "'h'", ",", "'t'", ":", "x", ".", "extend", "(", "[", "_transform", "(", "_x", ",", "tf", ")", "for", "_x", "in", "x", "]", ")", "\n", "\n", "list_x", ".", "append", "(", "x", ")", "\n", "\n", "", "list_y", "=", "[", "]", "\n", "for", "x", "in", "zip", "(", "*", "list_x", ")", ":", "\n", "            ", "y", "=", "forward_function", "(", "*", "x", ")", "\n", "if", "not", "isinstance", "(", "y", ",", "list", ")", ":", "y", "=", "[", "y", "]", "\n", "if", "not", "list_y", ":", "\n", "                ", "list_y", "=", "[", "[", "_y", "]", "for", "_y", "in", "y", "]", "\n", "", "else", ":", "\n", "                ", "for", "_list_y", ",", "_y", "in", "zip", "(", "list_y", ",", "y", ")", ":", "_list_y", ".", "append", "(", "_y", ")", "\n", "\n", "", "", "for", "_list_y", "in", "list_y", ":", "\n", "            ", "for", "i", "in", "range", "(", "len", "(", "_list_y", ")", ")", ":", "\n", "                ", "if", "i", ">", "3", ":", "\n", "                    ", "_list_y", "[", "i", "]", "=", "_transform", "(", "_list_y", "[", "i", "]", ",", "'t'", ")", "\n", "", "if", "i", "%", "4", ">", "1", ":", "\n", "                    ", "_list_y", "[", "i", "]", "=", "_transform", "(", "_list_y", "[", "i", "]", ",", "'h'", ")", "\n", "", "if", "(", "i", "%", "4", ")", "%", "2", "==", "1", ":", "\n", "                    ", "_list_y", "[", "i", "]", "=", "_transform", "(", "_list_y", "[", "i", "]", ",", "'v'", ")", "\n", "\n", "", "", "", "y", "=", "[", "torch", ".", "cat", "(", "_y", ",", "dim", "=", "0", ")", ".", "mean", "(", "dim", "=", "0", ",", "keepdim", "=", "True", ")", "for", "_y", "in", "list_y", "]", "\n", "if", "len", "(", "y", ")", "==", "1", ":", "y", "=", "y", "[", "0", "]", "\n", "\n", "return", "y", "\n", "", "", ""]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.ddbpn.DenseProjection.__init__": [[30, 53], ["torch.Module.__init__", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "ddbpn.projection_conv", "torch.PReLU", "torch.PReLU", "ddbpn.projection_conv", "torch.PReLU", "torch.PReLU", "ddbpn.projection_conv", "torch.PReLU", "torch.PReLU", "torch.Conv2d", "torch.Conv2d", "torch.PReLU", "torch.PReLU"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.ddbpn.projection_conv", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.ddbpn.projection_conv", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.ddbpn.projection_conv"], ["    ", "def", "__init__", "(", "self", ",", "in_channels", ",", "nr", ",", "scale", ",", "up", "=", "True", ",", "bottleneck", "=", "True", ")", ":", "\n", "        ", "super", "(", "DenseProjection", ",", "self", ")", ".", "__init__", "(", ")", "\n", "if", "bottleneck", ":", "\n", "            ", "self", ".", "bottleneck", "=", "nn", ".", "Sequential", "(", "*", "[", "\n", "nn", ".", "Conv2d", "(", "in_channels", ",", "nr", ",", "1", ")", ",", "\n", "nn", ".", "PReLU", "(", "nr", ")", "\n", "]", ")", "\n", "inter_channels", "=", "nr", "\n", "", "else", ":", "\n", "            ", "self", ".", "bottleneck", "=", "None", "\n", "inter_channels", "=", "in_channels", "\n", "\n", "", "self", ".", "conv_1", "=", "nn", ".", "Sequential", "(", "*", "[", "\n", "projection_conv", "(", "inter_channels", ",", "nr", ",", "scale", ",", "up", ")", ",", "\n", "nn", ".", "PReLU", "(", "nr", ")", "\n", "]", ")", "\n", "self", ".", "conv_2", "=", "nn", ".", "Sequential", "(", "*", "[", "\n", "projection_conv", "(", "nr", ",", "inter_channels", ",", "scale", ",", "not", "up", ")", ",", "\n", "nn", ".", "PReLU", "(", "inter_channels", ")", "\n", "]", ")", "\n", "self", ".", "conv_3", "=", "nn", ".", "Sequential", "(", "*", "[", "\n", "projection_conv", "(", "inter_channels", ",", "nr", ",", "scale", ",", "up", ")", ",", "\n", "nn", ".", "PReLU", "(", "nr", ")", "\n", "]", ")", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.ddbpn.DenseProjection.forward": [[55, 67], ["ddbpn.DenseProjection.conv_1", "ddbpn.DenseProjection.conv_2", "ddbpn.DenseProjection.sub", "ddbpn.DenseProjection.conv_3", "ddbpn.DenseProjection.add", "ddbpn.DenseProjection.bottleneck"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "if", "self", ".", "bottleneck", "is", "not", "None", ":", "\n", "            ", "x", "=", "self", ".", "bottleneck", "(", "x", ")", "\n", "\n", "", "a_0", "=", "self", ".", "conv_1", "(", "x", ")", "\n", "b_0", "=", "self", ".", "conv_2", "(", "a_0", ")", "\n", "e", "=", "b_0", ".", "sub", "(", "x", ")", "\n", "a_1", "=", "self", ".", "conv_3", "(", "e", ")", "\n", "\n", "out", "=", "a_0", ".", "add", "(", "a_1", ")", "\n", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.ddbpn.DDBPN.__init__": [[69, 111], ["torch.Module.__init__", "model.common.MeanShift", "torch.Sequential", "torch.Sequential", "torch.ModuleList", "torch.ModuleList", "torch.ModuleList", "torch.ModuleList", "range", "range", "torch.Sequential", "torch.Sequential", "model.common.MeanShift", "torch.Conv2d", "torch.Conv2d", "torch.PReLU", "torch.PReLU", "torch.Conv2d", "torch.Conv2d", "torch.PReLU", "torch.PReLU", "ddbpn.DDBPN.upmodules.append", "ddbpn.DDBPN.downmodules.append", "torch.Conv2d", "torch.Conv2d", "ddbpn.DenseProjection", "ddbpn.DenseProjection"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "self", ",", "args", ")", ":", "\n", "        ", "super", "(", "DDBPN", ",", "self", ")", ".", "__init__", "(", ")", "\n", "scale", "=", "args", ".", "scale", "[", "0", "]", "\n", "\n", "n0", "=", "128", "\n", "nr", "=", "32", "\n", "self", ".", "depth", "=", "6", "\n", "\n", "rgb_mean", "=", "(", "0.4488", ",", "0.4371", ",", "0.4040", ")", "\n", "rgb_std", "=", "(", "1.0", ",", "1.0", ",", "1.0", ")", "\n", "self", ".", "sub_mean", "=", "common", ".", "MeanShift", "(", "args", ".", "rgb_range", ",", "rgb_mean", ",", "rgb_std", ")", "\n", "initial", "=", "[", "\n", "nn", ".", "Conv2d", "(", "args", ".", "n_colors", ",", "n0", ",", "3", ",", "padding", "=", "1", ")", ",", "\n", "nn", ".", "PReLU", "(", "n0", ")", ",", "\n", "nn", ".", "Conv2d", "(", "n0", ",", "nr", ",", "1", ")", ",", "\n", "nn", ".", "PReLU", "(", "nr", ")", "\n", "]", "\n", "self", ".", "initial", "=", "nn", ".", "Sequential", "(", "*", "initial", ")", "\n", "\n", "self", ".", "upmodules", "=", "nn", ".", "ModuleList", "(", ")", "\n", "self", ".", "downmodules", "=", "nn", ".", "ModuleList", "(", ")", "\n", "channels", "=", "nr", "\n", "for", "i", "in", "range", "(", "self", ".", "depth", ")", ":", "\n", "            ", "self", ".", "upmodules", ".", "append", "(", "\n", "DenseProjection", "(", "channels", ",", "nr", ",", "scale", ",", "True", ",", "i", ">", "1", ")", "\n", ")", "\n", "if", "i", "!=", "0", ":", "\n", "                ", "channels", "+=", "nr", "\n", "\n", "", "", "channels", "=", "nr", "\n", "for", "i", "in", "range", "(", "self", ".", "depth", "-", "1", ")", ":", "\n", "            ", "self", ".", "downmodules", ".", "append", "(", "\n", "DenseProjection", "(", "channels", ",", "nr", ",", "scale", ",", "False", ",", "i", "!=", "0", ")", "\n", ")", "\n", "channels", "+=", "nr", "\n", "\n", "", "reconstruction", "=", "[", "\n", "nn", ".", "Conv2d", "(", "self", ".", "depth", "*", "nr", ",", "args", ".", "n_colors", ",", "3", ",", "padding", "=", "1", ")", "\n", "]", "\n", "self", ".", "reconstruction", "=", "nn", ".", "Sequential", "(", "*", "reconstruction", ")", "\n", "\n", "self", ".", "add_mean", "=", "common", ".", "MeanShift", "(", "args", ".", "rgb_range", ",", "rgb_mean", ",", "rgb_std", ",", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.ddbpn.DDBPN.forward": [[112, 131], ["ddbpn.DDBPN.sub_mean", "ddbpn.DDBPN.initial", "range", "h_list.append", "ddbpn.DDBPN.reconstruction", "ddbpn.DDBPN.add_mean", "h_list.append", "l_list.append", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "sub_mean", "(", "x", ")", "\n", "x", "=", "self", ".", "initial", "(", "x", ")", "\n", "\n", "h_list", "=", "[", "]", "\n", "l_list", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "self", ".", "depth", "-", "1", ")", ":", "\n", "            ", "if", "i", "==", "0", ":", "\n", "                ", "l", "=", "x", "\n", "", "else", ":", "\n", "                ", "l", "=", "torch", ".", "cat", "(", "l_list", ",", "dim", "=", "1", ")", "\n", "", "h_list", ".", "append", "(", "self", ".", "upmodules", "[", "i", "]", "(", "l", ")", ")", "\n", "l_list", ".", "append", "(", "self", ".", "downmodules", "[", "i", "]", "(", "torch", ".", "cat", "(", "h_list", ",", "dim", "=", "1", ")", ")", ")", "\n", "\n", "", "h_list", ".", "append", "(", "self", ".", "upmodules", "[", "-", "1", "]", "(", "torch", ".", "cat", "(", "l_list", ",", "dim", "=", "1", ")", ")", ")", "\n", "out", "=", "self", ".", "reconstruction", "(", "torch", ".", "cat", "(", "h_list", ",", "dim", "=", "1", ")", ")", "\n", "out", "=", "self", ".", "add_mean", "(", "out", ")", "\n", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.ddbpn.make_model": [[10, 12], ["ddbpn.DDBPN"], "function", ["None"], ["def", "make_model", "(", "args", ",", "parent", "=", "False", ")", ":", "\n", "    ", "return", "DDBPN", "(", "args", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.ddbpn.projection_conv": [[13, 27], ["conv_f"], "function", ["None"], ["", "def", "projection_conv", "(", "in_channels", ",", "out_channels", ",", "scale", ",", "up", "=", "True", ")", ":", "\n", "    ", "kernel_size", ",", "stride", ",", "padding", "=", "{", "\n", "2", ":", "(", "6", ",", "2", ",", "2", ")", ",", "\n", "4", ":", "(", "8", ",", "4", ",", "2", ")", ",", "\n", "8", ":", "(", "12", ",", "8", ",", "2", ")", "\n", "}", "[", "scale", "]", "\n", "if", "up", ":", "\n", "        ", "conv_f", "=", "nn", ".", "ConvTranspose2d", "\n", "", "else", ":", "\n", "        ", "conv_f", "=", "nn", ".", "Conv2d", "\n", "\n", "", "return", "conv_f", "(", "\n", "in_channels", ",", "out_channels", ",", "kernel_size", ",", "\n", "stride", "=", "stride", ",", "padding", "=", "padding", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.demo.Demo.__init__": [[12, 25], ["os.listdir", "demo.Demo.filelist.sort", "demo.Demo.filelist.append", "f.find", "f.find", "os.path.join"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "args", ",", "name", "=", "'Demo'", ",", "train", "=", "False", ",", "benchmark", "=", "False", ")", ":", "\n", "        ", "self", ".", "args", "=", "args", "\n", "self", ".", "name", "=", "name", "\n", "self", ".", "scale", "=", "args", ".", "scale", "\n", "self", ".", "idx_scale", "=", "0", "\n", "self", ".", "train", "=", "False", "\n", "self", ".", "benchmark", "=", "benchmark", "\n", "\n", "self", ".", "filelist", "=", "[", "]", "\n", "for", "f", "in", "os", ".", "listdir", "(", "args", ".", "dir_demo", ")", ":", "\n", "            ", "if", "f", ".", "find", "(", "'.png'", ")", ">=", "0", "or", "f", ".", "find", "(", "'.jp'", ")", ">=", "0", ":", "\n", "                ", "self", ".", "filelist", ".", "append", "(", "os", ".", "path", ".", "join", "(", "args", ".", "dir_demo", ",", "f", ")", ")", "\n", "", "", "self", ".", "filelist", ".", "sort", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.demo.Demo.__getitem__": [[26, 33], ["imageio.imread", "torch.common.set_channel", "torch.common.np2Tensor", "os.path.splitext", "os.path.basename"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.common.set_channel", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.common.np2Tensor"], ["", "def", "__getitem__", "(", "self", ",", "idx", ")", ":", "\n", "        ", "filename", "=", "os", ".", "path", ".", "splitext", "(", "os", ".", "path", ".", "basename", "(", "self", ".", "filelist", "[", "idx", "]", ")", ")", "[", "0", "]", "\n", "lr", "=", "imageio", ".", "imread", "(", "self", ".", "filelist", "[", "idx", "]", ")", "\n", "lr", ",", "=", "common", ".", "set_channel", "(", "lr", ",", "n_channels", "=", "self", ".", "args", ".", "n_colors", ")", "\n", "lr_t", ",", "=", "common", ".", "np2Tensor", "(", "lr", ",", "rgb_range", "=", "self", ".", "args", ".", "rgb_range", ")", "\n", "\n", "return", "lr_t", ",", "-", "1", ",", "filename", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.demo.Demo.__len__": [[34, 36], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "filelist", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.demo.Demo.set_scale": [[37, 39], ["None"], "methods", ["None"], ["", "def", "set_scale", "(", "self", ",", "idx_scale", ")", ":", "\n", "        ", "self", ".", "idx_scale", "=", "idx_scale", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.srdata.SRData.__init__": [[14, 67], ["srdata.SRData._set_filesystem", "srdata.SRData._scan", "args.ext.find", "os.path.join", "os.makedirs", "args.ext.find", "args.ext.find", "os.makedirs", "enumerate", "len", "len", "max", "srdata.SRData.dir_hr.replace", "os.makedirs", "h.replace", "b.replace.replace.replace", "srdata.SRData.images_hr.append", "srdata.SRData._check_and_load", "os.path.join", "l.replace", "b.replace.replace.replace", "srdata.SRData.images_lr[].append", "srdata.SRData._check_and_load", "srdata.SRData.dir_lr.replace"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.div2k.DIV2K._set_filesystem", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.div2k.DIV2K._scan", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.srdata.SRData._check_and_load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.srdata.SRData._check_and_load"], ["    ", "def", "__init__", "(", "self", ",", "args", ",", "name", "=", "''", ",", "train", "=", "True", ",", "benchmark", "=", "False", ")", ":", "\n", "        ", "self", ".", "args", "=", "args", "\n", "self", ".", "name", "=", "name", "\n", "self", ".", "train", "=", "train", "\n", "self", ".", "split", "=", "'train'", "if", "train", "else", "'test'", "\n", "self", ".", "do_eval", "=", "True", "\n", "self", ".", "benchmark", "=", "benchmark", "\n", "self", ".", "input_large", "=", "(", "args", ".", "model", "==", "'VDSR'", ")", "\n", "self", ".", "scale", "=", "args", ".", "scale", "\n", "self", ".", "idx_scale", "=", "0", "\n", "\n", "self", ".", "_set_filesystem", "(", "args", ".", "dir_data", ")", "\n", "if", "args", ".", "ext", ".", "find", "(", "'img'", ")", "<", "0", ":", "\n", "            ", "path_bin", "=", "os", ".", "path", ".", "join", "(", "self", ".", "apath", ",", "'bin'", ")", "\n", "os", ".", "makedirs", "(", "path_bin", ",", "exist_ok", "=", "True", ")", "\n", "\n", "", "list_hr", ",", "list_lr", "=", "self", ".", "_scan", "(", ")", "\n", "if", "args", ".", "ext", ".", "find", "(", "'img'", ")", ">=", "0", "or", "benchmark", ":", "\n", "            ", "self", ".", "images_hr", ",", "self", ".", "images_lr", "=", "list_hr", ",", "list_lr", "\n", "", "elif", "args", ".", "ext", ".", "find", "(", "'sep'", ")", ">=", "0", ":", "\n", "            ", "os", ".", "makedirs", "(", "\n", "self", ".", "dir_hr", ".", "replace", "(", "self", ".", "apath", ",", "path_bin", ")", ",", "\n", "exist_ok", "=", "True", "\n", ")", "\n", "for", "s", "in", "self", ".", "scale", ":", "\n", "                ", "os", ".", "makedirs", "(", "\n", "os", ".", "path", ".", "join", "(", "\n", "self", ".", "dir_lr", ".", "replace", "(", "self", ".", "apath", ",", "path_bin", ")", ",", "\n", "'X{}'", ".", "format", "(", "s", ")", "\n", ")", ",", "\n", "exist_ok", "=", "True", "\n", ")", "\n", "\n", "", "self", ".", "images_hr", ",", "self", ".", "images_lr", "=", "[", "]", ",", "[", "[", "]", "for", "_", "in", "self", ".", "scale", "]", "\n", "for", "h", "in", "list_hr", ":", "\n", "                ", "b", "=", "h", ".", "replace", "(", "self", ".", "apath", ",", "path_bin", ")", "\n", "b", "=", "b", ".", "replace", "(", "self", ".", "ext", "[", "0", "]", ",", "'.pt'", ")", "\n", "self", ".", "images_hr", ".", "append", "(", "b", ")", "\n", "self", ".", "_check_and_load", "(", "args", ".", "ext", ",", "h", ",", "b", ",", "verbose", "=", "True", ")", "\n", "", "for", "i", ",", "ll", "in", "enumerate", "(", "list_lr", ")", ":", "\n", "                ", "for", "l", "in", "ll", ":", "\n", "                    ", "b", "=", "l", ".", "replace", "(", "self", ".", "apath", ",", "path_bin", ")", "\n", "b", "=", "b", ".", "replace", "(", "self", ".", "ext", "[", "1", "]", ",", "'.pt'", ")", "\n", "self", ".", "images_lr", "[", "i", "]", ".", "append", "(", "b", ")", "\n", "self", ".", "_check_and_load", "(", "args", ".", "ext", ",", "l", ",", "b", ",", "verbose", "=", "True", ")", "\n", "", "", "", "if", "train", ":", "\n", "            ", "n_patches", "=", "args", ".", "batch_size", "*", "args", ".", "test_every", "\n", "n_images", "=", "len", "(", "args", ".", "data_train", ")", "*", "len", "(", "self", ".", "images_hr", ")", "\n", "if", "n_images", "==", "0", ":", "\n", "                ", "self", ".", "repeat", "=", "0", "\n", "", "else", ":", "\n", "                ", "self", ".", "repeat", "=", "max", "(", "n_patches", "//", "n_images", ",", "1", ")", "\n", "\n", "# Below functions as used to prepare images", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.srdata.SRData._scan": [[69, 84], ["sorted", "glob.glob", "os.path.splitext", "enumerate", "os.path.join", "os.path.basename", "names_lr[].append", "os.path.join"], "methods", ["None"], ["        ", "names_hr", "=", "sorted", "(", "\n", "glob", ".", "glob", "(", "os", ".", "path", ".", "join", "(", "self", ".", "dir_hr", ",", "'*'", "+", "self", ".", "ext", "[", "0", "]", ")", ")", "\n", ")", "\n", "names_lr", "=", "[", "[", "]", "for", "_", "in", "self", ".", "scale", "]", "\n", "for", "f", "in", "names_hr", ":", "\n", "            ", "filename", ",", "_", "=", "os", ".", "path", ".", "splitext", "(", "os", ".", "path", ".", "basename", "(", "f", ")", ")", "\n", "for", "si", ",", "s", "in", "enumerate", "(", "self", ".", "scale", ")", ":", "\n", "                ", "names_lr", "[", "si", "]", ".", "append", "(", "os", ".", "path", ".", "join", "(", "\n", "self", ".", "dir_lr", ",", "'X{}/{}x{}{}'", ".", "format", "(", "\n", "s", ",", "filename", ",", "s", ",", "self", ".", "ext", "[", "1", "]", "\n", ")", "\n", ")", ")", "\n", "\n", "", "", "return", "names_hr", ",", "names_lr", "\n", "\n", "", "def", "_set_filesystem", "(", "self", ",", "dir_data", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.srdata.SRData._set_filesystem": [[85, 91], ["os.path.join", "os.path.join", "os.path.join"], "methods", ["None"], ["        ", "self", ".", "apath", "=", "os", ".", "path", ".", "join", "(", "dir_data", ",", "self", ".", "name", ")", "\n", "self", ".", "dir_hr", "=", "os", ".", "path", ".", "join", "(", "self", ".", "apath", ",", "'HR'", ")", "\n", "self", ".", "dir_lr", "=", "os", ".", "path", ".", "join", "(", "self", ".", "apath", ",", "'LR_bicubic'", ")", "\n", "if", "self", ".", "input_large", ":", "self", ".", "dir_lr", "+=", "'L'", "\n", "self", ".", "ext", "=", "(", "'.png'", ",", "'.png'", ")", "\n", "\n", "", "def", "_check_and_load", "(", "self", ",", "ext", ",", "img", ",", "f", ",", "verbose", "=", "True", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.srdata.SRData._check_and_load": [[92, 98], ["os.path.isfile", "ext.find", "print", "open", "pickle.dump", "imageio.imread"], "methods", ["None"], ["        ", "if", "not", "os", ".", "path", ".", "isfile", "(", "f", ")", "or", "ext", ".", "find", "(", "'reset'", ")", ">=", "0", ":", "\n", "            ", "if", "verbose", ":", "\n", "                ", "print", "(", "'Making a binary: {}'", ".", "format", "(", "f", ")", ")", "\n", "", "with", "open", "(", "f", ",", "'wb'", ")", "as", "_f", ":", "\n", "                ", "pickle", ".", "dump", "(", "imageio", ".", "imread", "(", "img", ")", ",", "_f", ")", "\n", "\n", "", "", "", "def", "__getitem__", "(", "self", ",", "idx", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.srdata.SRData.__getitem__": [[99, 106], ["srdata.SRData._load_file", "srdata.SRData.get_patch", "torch.common.set_channel", "torch.common.np2Tensor"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.srdata.SRData._load_file", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.common.get_patch", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.common.set_channel", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.common.np2Tensor"], ["        ", "lr", ",", "hr", ",", "filename", "=", "self", ".", "_load_file", "(", "idx", ")", "\n", "pair", "=", "self", ".", "get_patch", "(", "lr", ",", "hr", ")", "\n", "pair", "=", "common", ".", "set_channel", "(", "*", "pair", ",", "n_channels", "=", "self", ".", "args", ".", "n_colors", ")", "\n", "pair_t", "=", "common", ".", "np2Tensor", "(", "*", "pair", ",", "rgb_range", "=", "self", ".", "args", ".", "rgb_range", ")", "\n", "\n", "return", "pair_t", "[", "0", "]", ",", "pair_t", "[", "1", "]", ",", "filename", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.srdata.SRData.__len__": [[107, 112], ["len", "len"], "methods", ["None"], ["        ", "if", "self", ".", "train", ":", "\n", "            ", "return", "len", "(", "self", ".", "images_hr", ")", "*", "self", ".", "repeat", "\n", "", "else", ":", "\n", "            ", "return", "len", "(", "self", ".", "images_hr", ")", "\n", "\n", "", "", "def", "_get_index", "(", "self", ",", "idx", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.srdata.SRData._get_index": [[113, 118], ["len"], "methods", ["None"], ["        ", "if", "self", ".", "train", ":", "\n", "            ", "return", "idx", "%", "len", "(", "self", ".", "images_hr", ")", "\n", "", "else", ":", "\n", "            ", "return", "idx", "\n", "\n", "", "", "def", "_load_file", "(", "self", ",", "idx", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.srdata.SRData._load_file": [[119, 135], ["srdata.SRData._get_index", "os.path.splitext", "os.path.basename", "imageio.imread", "imageio.imread", "srdata.SRData.args.ext.find", "open", "pickle.load", "open", "pickle.load"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.srdata.SRData._get_index", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load"], ["        ", "idx", "=", "self", ".", "_get_index", "(", "idx", ")", "\n", "f_hr", "=", "self", ".", "images_hr", "[", "idx", "]", "\n", "f_lr", "=", "self", ".", "images_lr", "[", "self", ".", "idx_scale", "]", "[", "idx", "]", "\n", "\n", "filename", ",", "_", "=", "os", ".", "path", ".", "splitext", "(", "os", ".", "path", ".", "basename", "(", "f_hr", ")", ")", "\n", "if", "self", ".", "args", ".", "ext", "==", "'img'", "or", "self", ".", "benchmark", ":", "\n", "            ", "hr", "=", "imageio", ".", "imread", "(", "f_hr", ")", "\n", "lr", "=", "imageio", ".", "imread", "(", "f_lr", ")", "\n", "", "elif", "self", ".", "args", ".", "ext", ".", "find", "(", "'sep'", ")", ">=", "0", ":", "\n", "            ", "with", "open", "(", "f_hr", ",", "'rb'", ")", "as", "_f", ":", "\n", "                ", "hr", "=", "pickle", ".", "load", "(", "_f", ")", "\n", "", "with", "open", "(", "f_lr", ",", "'rb'", ")", "as", "_f", ":", "\n", "                ", "lr", "=", "pickle", ".", "load", "(", "_f", ")", "\n", "\n", "", "", "return", "lr", ",", "hr", ",", "filename", "\n", "\n", "", "def", "get_patch", "(", "self", ",", "lr", ",", "hr", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.srdata.SRData.get_patch": [[136, 152], ["torch.common.get_patch", "torch.common.augment"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.common.get_patch", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.common.augment"], ["        ", "scale", "=", "self", ".", "scale", "[", "self", ".", "idx_scale", "]", "\n", "if", "self", ".", "train", ":", "\n", "            ", "lr", ",", "hr", "=", "common", ".", "get_patch", "(", "\n", "lr", ",", "hr", ",", "\n", "patch_size", "=", "self", ".", "args", ".", "patch_size", ",", "\n", "scale", "=", "scale", ",", "\n", "multi", "=", "(", "len", "(", "self", ".", "scale", ")", ">", "1", ")", ",", "\n", "input_large", "=", "self", ".", "input_large", "\n", ")", "\n", "if", "not", "self", ".", "args", ".", "no_augment", ":", "lr", ",", "hr", "=", "common", ".", "augment", "(", "lr", ",", "hr", ")", "\n", "", "else", ":", "\n", "            ", "ih", ",", "iw", "=", "lr", ".", "shape", "[", ":", "2", "]", "\n", "hr", "=", "hr", "[", "0", ":", "ih", "*", "scale", ",", "0", ":", "iw", "*", "scale", "]", "\n", "\n", "", "return", "lr", ",", "hr", "\n", "\n", "", "def", "set_scale", "(", "self", ",", "idx_scale", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.srdata.SRData.set_scale": [[153, 155], ["None"], "methods", ["None"], ["        ", "if", "not", "self", ".", "input_large", ":", "\n", "            ", "self", ".", "idx_scale", "=", "idx_scale", "\n", "", "else", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.div2kjpeg.DIV2KJPEG.__init__": [[6, 10], ["int", "data.div2k.DIV2K.__init__", "name.replace"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "self", ",", "args", ",", "name", "=", "''", ",", "train", "=", "True", ",", "benchmark", "=", "False", ")", ":", "\n", "        ", "self", ".", "q_factor", "=", "int", "(", "name", ".", "replace", "(", "'DIV2K-Q'", ",", "''", ")", ")", "\n", "super", "(", "DIV2KJPEG", ",", "self", ")", ".", "__init__", "(", "\n", "args", ",", "name", "=", "name", ",", "train", "=", "train", ",", "benchmark", "=", "benchmark", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.div2kjpeg.DIV2KJPEG._set_filesystem": [[12, 20], ["os.path.join", "os.path.join", "os.path.join"], "methods", ["None"], ["", "def", "_set_filesystem", "(", "self", ",", "dir_data", ")", ":", "\n", "        ", "self", ".", "apath", "=", "os", ".", "path", ".", "join", "(", "dir_data", ",", "'DIV2K'", ")", "\n", "self", ".", "dir_hr", "=", "os", ".", "path", ".", "join", "(", "self", ".", "apath", ",", "'DIV2K_train_HR'", ")", "\n", "self", ".", "dir_lr", "=", "os", ".", "path", ".", "join", "(", "\n", "self", ".", "apath", ",", "'DIV2K_Q{}'", ".", "format", "(", "self", ".", "q_factor", ")", "\n", ")", "\n", "if", "self", ".", "input_large", ":", "self", ".", "dir_lr", "+=", "'L'", "\n", "self", ".", "ext", "=", "(", "'.png'", ",", "'.jpg'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.common.get_patch": [[8, 33], ["random.randrange", "random.randrange"], "function", ["None"], ["\n", "def", "default_conv", "(", "in_channels", ",", "out_channels", ",", "kernel_size", ",", "bias", "=", "True", ")", ":", "\n", "    ", "return", "nn", ".", "Conv2d", "(", "\n", "in_channels", ",", "out_channels", ",", "kernel_size", ",", "\n", "padding", "=", "(", "kernel_size", "//", "2", ")", ",", "bias", "=", "bias", ")", "\n", "", "def", "last_zero_init", "(", "m", ")", ":", "\n", "    ", "if", "isinstance", "(", "m", ",", "nn", ".", "Sequential", ")", ":", "\n", "        ", "constant_init", "(", "m", "[", "-", "1", "]", ",", "val", "=", "0", ")", "\n", "m", "[", "-", "1", "]", ".", "inited", "=", "True", "\n", "", "else", ":", "\n", "        ", "constant_init", "(", "m", ",", "val", "=", "0", ")", "\n", "m", ".", "inited", "=", "True", "\n", "\n", "\n", "\n", "\n", "", "", "class", "MeanShift", "(", "nn", ".", "Conv2d", ")", ":", "\n", "    ", "def", "__init__", "(", "\n", "self", ",", "rgb_range", ",", "\n", "rgb_mean", "=", "(", "0.4488", ",", "0.4371", ",", "0.4040", ")", ",", "rgb_std", "=", "(", "1.0", ",", "1.0", ",", "1.0", ")", ",", "sign", "=", "-", "1", ")", ":", "\n", "\n", "        ", "super", "(", "MeanShift", ",", "self", ")", ".", "__init__", "(", "3", ",", "3", ",", "kernel_size", "=", "1", ")", "\n", "std", "=", "torch", ".", "Tensor", "(", "rgb_std", ")", "\n", "self", ".", "weight", ".", "data", "=", "torch", ".", "eye", "(", "3", ")", ".", "view", "(", "3", ",", "3", ",", "1", ",", "1", ")", "/", "std", ".", "view", "(", "3", ",", "1", ",", "1", ",", "1", ")", "\n", "self", ".", "bias", ".", "data", "=", "sign", "*", "rgb_range", "*", "torch", ".", "Tensor", "(", "rgb_mean", ")", "/", "std", "\n", "for", "p", "in", "self", ".", "parameters", "(", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.common.set_channel": [[34, 48], ["common.set_channel._set_channel"], "function", ["None"], ["            ", "p", ".", "requires_grad", "=", "False", "\n", "\n", "", "", "", "class", "BasicBlock", "(", "nn", ".", "Sequential", ")", ":", "\n", "    ", "def", "__init__", "(", "\n", "self", ",", "conv", ",", "in_channels", ",", "out_channels", ",", "kernel_size", ",", "stride", "=", "1", ",", "bias", "=", "False", ",", "\n", "bn", "=", "True", ",", "act", "=", "nn", ".", "ReLU", "(", "True", ")", ")", ":", "\n", "\n", "        ", "m", "=", "[", "conv", "(", "in_channels", ",", "out_channels", ",", "kernel_size", ",", "bias", "=", "bias", ")", "]", "\n", "if", "bn", ":", "\n", "            ", "m", ".", "append", "(", "nn", ".", "BatchNorm2d", "(", "out_channels", ")", ")", "\n", "", "if", "act", "is", "not", "None", ":", "\n", "            ", "m", ".", "append", "(", "act", ")", "\n", "\n", "", "super", "(", "BasicBlock", ",", "self", ")", ".", "__init__", "(", "*", "m", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.common.np2Tensor": [[49, 58], ["numpy.ascontiguousarray", "torch.from_numpy().float", "torch.from_numpy().float.mul_", "common.np2Tensor._np2Tensor"], "function", ["None"], ["", "", "class", "ResBlock", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "\n", "self", ",", "conv", ",", "n_feats", ",", "kernel_size", ",", "\n", "bias", "=", "True", ",", "bn", "=", "False", ",", "act", "=", "nn", ".", "ReLU", "(", "True", ")", ",", "res_scale", "=", "1", ")", ":", "\n", "\n", "        ", "super", "(", "ResBlock", ",", "self", ")", ".", "__init__", "(", ")", "\n", "m", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "2", ")", ":", "\n", "            ", "m", ".", "append", "(", "conv", "(", "n_feats", ",", "n_feats", ",", "kernel_size", ",", "bias", "=", "bias", ")", ")", "\n", "if", "bn", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.common.augment": [[59, 72], ["common.augment._augment"], "function", ["None"], ["                ", "m", ".", "append", "(", "nn", ".", "BatchNorm2d", "(", "n_feats", ")", ")", "\n", "", "if", "i", "==", "0", ":", "\n", "                ", "m", ".", "append", "(", "act", ")", "\n", "", "", "self", ".", "body", "=", "nn", ".", "Sequential", "(", "*", "m", ")", "\n", "self", ".", "res_scale", "=", "res_scale", "\n", "\n", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "res", "=", "self", ".", "body", "(", "x", ")", ".", "mul", "(", "self", ".", "res_scale", ")", "\n", "res", "+=", "x", "\n", "\n", "return", "res", "\n", "\n", "", "", "class", "MABlock", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "conv", ",", "kernel_size", "=", "3", ",", "bias", "=", "True", ",", "act", "=", "nn", ".", "ReLU", "(", "True", ")", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.video.Video.__init__": [[13, 26], ["os.path.splitext", "cv2.VideoCapture", "int", "os.path.basename", "video.Video.vidcap.get"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "args", ",", "name", "=", "'Video'", ",", "train", "=", "False", ",", "benchmark", "=", "False", ")", ":", "\n", "        ", "self", ".", "args", "=", "args", "\n", "self", ".", "name", "=", "name", "\n", "self", ".", "scale", "=", "args", ".", "scale", "\n", "self", ".", "idx_scale", "=", "0", "\n", "self", ".", "train", "=", "False", "\n", "self", ".", "do_eval", "=", "False", "\n", "self", ".", "benchmark", "=", "benchmark", "\n", "\n", "self", ".", "filename", ",", "_", "=", "os", ".", "path", ".", "splitext", "(", "os", ".", "path", ".", "basename", "(", "args", ".", "dir_demo", ")", ")", "\n", "self", ".", "vidcap", "=", "cv2", ".", "VideoCapture", "(", "args", ".", "dir_demo", ")", "\n", "self", ".", "n_frames", "=", "0", "\n", "self", ".", "total_frames", "=", "int", "(", "self", ".", "vidcap", ".", "get", "(", "cv2", ".", "CAP_PROP_FRAME_COUNT", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.video.Video.__getitem__": [[27, 38], ["video.Video.vidcap.read", "torch.common.set_channel", "torch.common.np2Tensor", "vidcap.release"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.common.set_channel", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.common.np2Tensor", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.timer.release"], ["", "def", "__getitem__", "(", "self", ",", "idx", ")", ":", "\n", "        ", "success", ",", "lr", "=", "self", ".", "vidcap", ".", "read", "(", ")", "\n", "if", "success", ":", "\n", "            ", "self", ".", "n_frames", "+=", "1", "\n", "lr", ",", "=", "common", ".", "set_channel", "(", "lr", ",", "n_channels", "=", "self", ".", "args", ".", "n_colors", ")", "\n", "lr_t", ",", "=", "common", ".", "np2Tensor", "(", "lr", ",", "rgb_range", "=", "self", ".", "args", ".", "rgb_range", ")", "\n", "\n", "return", "lr_t", ",", "-", "1", ",", "'{}_{:0>5}'", ".", "format", "(", "self", ".", "filename", ",", "self", ".", "n_frames", ")", "\n", "", "else", ":", "\n", "            ", "vidcap", ".", "release", "(", ")", "\n", "return", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.video.Video.__len__": [[39, 41], ["None"], "methods", ["None"], ["", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "total_frames", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.video.Video.set_scale": [[42, 44], ["None"], "methods", ["None"], ["", "def", "set_scale", "(", "self", ",", "idx_scale", ")", ":", "\n", "        ", "self", ".", "idx_scale", "=", "idx_scale", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.benchmark.Benchmark.__init__": [[12, 15], ["data.srdata.SRData.__init__"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "self", ",", "args", ",", "name", "=", "''", ",", "train", "=", "True", ",", "benchmark", "=", "True", ")", ":", "\n", "        ", "super", "(", "Benchmark", ",", "self", ")", ".", "__init__", "(", "\n", "args", ",", "name", "=", "name", ",", "train", "=", "train", ",", "benchmark", "=", "True", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.benchmark.Benchmark._set_filesystem": [[17, 25], ["os.path.join", "os.path.join", "os.path.join", "os.path.join"], "methods", ["None"], ["", "def", "_set_filesystem", "(", "self", ",", "dir_data", ")", ":", "\n", "        ", "self", ".", "apath", "=", "os", ".", "path", ".", "join", "(", "dir_data", ",", "'benchmark'", ",", "self", ".", "name", ")", "\n", "self", ".", "dir_hr", "=", "os", ".", "path", ".", "join", "(", "self", ".", "apath", ",", "'HR'", ")", "\n", "if", "self", ".", "input_large", ":", "\n", "            ", "self", ".", "dir_lr", "=", "os", ".", "path", ".", "join", "(", "self", ".", "apath", ",", "'LR_bicubicL'", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "dir_lr", "=", "os", ".", "path", ".", "join", "(", "self", ".", "apath", ",", "'LR_bicubic'", ")", "\n", "", "self", ".", "ext", "=", "(", "''", ",", "'.png'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.div2k.DIV2K.__init__": [[5, 18], ["list", "data.srdata.SRData.__init__", "r.split", "map", "args.data_range.split", "len", "int"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "self", ",", "args", ",", "name", "=", "'DIV2K'", ",", "train", "=", "True", ",", "benchmark", "=", "False", ")", ":", "\n", "        ", "data_range", "=", "[", "r", ".", "split", "(", "'-'", ")", "for", "r", "in", "args", ".", "data_range", ".", "split", "(", "'/'", ")", "]", "\n", "if", "train", ":", "\n", "            ", "data_range", "=", "data_range", "[", "0", "]", "\n", "", "else", ":", "\n", "            ", "if", "args", ".", "test_only", "and", "len", "(", "data_range", ")", "==", "1", ":", "\n", "                ", "data_range", "=", "data_range", "[", "0", "]", "\n", "", "else", ":", "\n", "                ", "data_range", "=", "data_range", "[", "1", "]", "\n", "\n", "", "", "self", ".", "begin", ",", "self", ".", "end", "=", "list", "(", "map", "(", "lambda", "x", ":", "int", "(", "x", ")", ",", "data_range", ")", ")", "\n", "super", "(", "DIV2K", ",", "self", ")", ".", "__init__", "(", "\n", "args", ",", "name", "=", "name", ",", "train", "=", "train", ",", "benchmark", "=", "benchmark", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.div2k.DIV2K._scan": [[20, 26], ["super()._scan"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.div2k.DIV2K._scan"], ["", "def", "_scan", "(", "self", ")", ":", "\n", "        ", "names_hr", ",", "names_lr", "=", "super", "(", "DIV2K", ",", "self", ")", ".", "_scan", "(", ")", "\n", "names_hr", "=", "names_hr", "[", "self", ".", "begin", "-", "1", ":", "self", ".", "end", "]", "\n", "names_lr", "=", "[", "n", "[", "self", ".", "begin", "-", "1", ":", "self", ".", "end", "]", "for", "n", "in", "names_lr", "]", "\n", "\n", "return", "names_hr", ",", "names_lr", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.div2k.DIV2K._set_filesystem": [[27, 32], ["super()._set_filesystem", "os.path.join", "os.path.join"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.div2k.DIV2K._set_filesystem"], ["", "def", "_set_filesystem", "(", "self", ",", "dir_data", ")", ":", "\n", "        ", "super", "(", "DIV2K", ",", "self", ")", ".", "_set_filesystem", "(", "dir_data", ")", "\n", "self", ".", "dir_hr", "=", "os", ".", "path", ".", "join", "(", "self", ".", "apath", ",", "'DIV2K_train_HR'", ")", "\n", "self", ".", "dir_lr", "=", "os", ".", "path", ".", "join", "(", "self", ".", "apath", ",", "'DIV2K_train_LR_bicubic'", ")", "\n", "if", "self", ".", "input_large", ":", "self", ".", "dir_lr", "+=", "'L'", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.sr291.SR291.__init__": [[4, 6], ["data.srdata.SRData.__init__"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "self", ",", "args", ",", "name", "=", "'SR291'", ",", "train", "=", "True", ",", "benchmark", "=", "False", ")", ":", "\n", "        ", "super", "(", "SR291", ",", "self", ")", ".", "__init__", "(", "args", ",", "name", "=", "name", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.__init__.MyConcatDataset.__init__": [[8, 11], ["torch.utils.data.ConcatDataset.__init__"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["\n", "class", "Model", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "args", ",", "ckp", ")", ":", "\n", "        ", "super", "(", "Model", ",", "self", ")", ".", "__init__", "(", ")", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.__init__.MyConcatDataset.set_scale": [[12, 15], ["hasattr", "d.set_scale"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.__init__.MyConcatDataset.set_scale"], ["print", "(", "'Making model...'", ")", "\n", "\n", "self", ".", "scale", "=", "args", ".", "scale", "\n", "self", ".", "idx_scale", "=", "0", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.data.__init__.Data.__init__": [[17, 51], ["torch.utils.data.dataloader.DataLoader", "__init__.Data.loader_test.append", "importlib.import_module", "datasets.append", "__init__.MyConcatDataset", "importlib.import_module", "importlib.import_module", "torch.utils.data.dataloader.DataLoader", "getattr", "getattr", "d.find", "module_name.lower", "getattr", "d.find", "module_name.lower"], "methods", ["None"], ["self", ".", "self_ensemble", "=", "args", ".", "self_ensemble", "\n", "self", ".", "chop", "=", "args", ".", "chop", "\n", "self", ".", "precision", "=", "args", ".", "precision", "\n", "self", ".", "cpu", "=", "args", ".", "cpu", "\n", "self", ".", "device", "=", "torch", ".", "device", "(", "'cpu'", "if", "args", ".", "cpu", "else", "'cuda'", ")", "\n", "self", ".", "n_GPUs", "=", "args", ".", "n_GPUs", "\n", "self", ".", "save_models", "=", "args", ".", "save_models", "\n", "\n", "module", "=", "import_module", "(", "'model.'", "+", "args", ".", "model", ".", "lower", "(", ")", ")", "\n", "self", ".", "model", "=", "module", ".", "make_model", "(", "args", ")", ".", "to", "(", "self", ".", "device", ")", "\n", "if", "args", ".", "precision", "==", "'half'", ":", "\n", "            ", "self", ".", "model", ".", "half", "(", ")", "\n", "\n", "", "self", ".", "load", "(", "\n", "ckp", ".", "get_path", "(", "'model'", ")", ",", "\n", "pre_train", "=", "args", ".", "pre_train", ",", "\n", "resume", "=", "args", ".", "resume", ",", "\n", "cpu", "=", "args", ".", "cpu", "\n", ")", "\n", "print", "(", "self", ".", "model", ",", "file", "=", "ckp", ".", "log_file", ")", "\n", "\n", "", "def", "forward", "(", "self", ",", "x", ",", "idx_scale", ")", ":", "\n", "        ", "self", ".", "idx_scale", "=", "idx_scale", "\n", "if", "hasattr", "(", "self", ".", "model", ",", "'set_scale'", ")", ":", "\n", "            ", "self", ".", "model", ".", "set_scale", "(", "idx_scale", ")", "\n", "\n", "", "if", "self", ".", "training", ":", "\n", "            ", "if", "self", ".", "n_GPUs", ">", "1", ":", "\n", "                ", "return", "P", ".", "data_parallel", "(", "self", ".", "model", ",", "x", ",", "range", "(", "self", ".", "n_GPUs", ")", ")", "\n", "", "else", ":", "\n", "                ", "return", "self", ".", "model", "(", "x", ")", "\n", "", "", "else", ":", "\n", "            ", "if", "self", ".", "chop", ":", "\n", "                ", "forward_function", "=", "self", ".", "forward_chop", "\n", "", "else", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.discriminator.Discriminator.__init__": [[9, 49], ["torch.Module.__init__", "range", "torch.Sequential", "torch.Sequential", "torch.Sequential", "discriminator.Discriminator.__init__._block"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["def", "__init__", "(", "self", ",", "args", ")", ":", "\n", "        ", "super", "(", "Discriminator", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "in_channels", "=", "args", ".", "n_colors", "\n", "out_channels", "=", "64", "\n", "depth", "=", "7", "\n", "\n", "def", "_block", "(", "_in_channels", ",", "_out_channels", ",", "stride", "=", "1", ")", ":", "\n", "            ", "return", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "\n", "_in_channels", ",", "\n", "_out_channels", ",", "\n", "3", ",", "\n", "padding", "=", "1", ",", "\n", "stride", "=", "stride", ",", "\n", "bias", "=", "False", "\n", ")", ",", "\n", "nn", ".", "BatchNorm2d", "(", "_out_channels", ")", ",", "\n", "nn", ".", "LeakyReLU", "(", "negative_slope", "=", "0.2", ",", "inplace", "=", "True", ")", "\n", ")", "\n", "\n", "", "m_features", "=", "[", "_block", "(", "in_channels", ",", "out_channels", ")", "]", "\n", "for", "i", "in", "range", "(", "depth", ")", ":", "\n", "            ", "in_channels", "=", "out_channels", "\n", "if", "i", "%", "2", "==", "1", ":", "\n", "                ", "stride", "=", "1", "\n", "out_channels", "*=", "2", "\n", "", "else", ":", "\n", "                ", "stride", "=", "2", "\n", "", "m_features", ".", "append", "(", "_block", "(", "in_channels", ",", "out_channels", ",", "stride", "=", "stride", ")", ")", "\n", "\n", "", "patch_size", "=", "args", ".", "patch_size", "//", "(", "2", "**", "(", "(", "depth", "+", "1", ")", "//", "2", ")", ")", "\n", "m_classifier", "=", "[", "\n", "nn", ".", "Linear", "(", "out_channels", "*", "patch_size", "**", "2", ",", "1024", ")", ",", "\n", "nn", ".", "LeakyReLU", "(", "negative_slope", "=", "0.2", ",", "inplace", "=", "True", ")", ",", "\n", "nn", ".", "Linear", "(", "1024", ",", "1", ")", "\n", "]", "\n", "\n", "self", ".", "features", "=", "nn", ".", "Sequential", "(", "*", "m_features", ")", "\n", "self", ".", "classifier", "=", "nn", ".", "Sequential", "(", "*", "m_classifier", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.discriminator.Discriminator.forward": [[50, 55], ["discriminator.Discriminator.features", "discriminator.Discriminator.classifier", "discriminator.Discriminator.view", "discriminator.Discriminator.size"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "features", "=", "self", ".", "features", "(", "x", ")", "\n", "output", "=", "self", ".", "classifier", "(", "features", ".", "view", "(", "features", ".", "size", "(", "0", ")", ",", "-", "1", ")", ")", "\n", "\n", "return", "output", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.vgg.VGG.__init__": [[9, 23], ["torch.Module.__init__", "model.common.MeanShift", "vgg.VGG.parameters", "torchvision.vgg19", "conv_index.find", "torch.Sequential", "torch.Sequential", "torch.Sequential", "conv_index.find", "torch.Sequential", "torch.Sequential", "torch.Sequential"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__"], ["    ", "def", "__init__", "(", "self", ",", "conv_index", ",", "rgb_range", "=", "1", ")", ":", "\n", "        ", "super", "(", "VGG", ",", "self", ")", ".", "__init__", "(", ")", "\n", "vgg_features", "=", "models", ".", "vgg19", "(", "pretrained", "=", "True", ")", ".", "features", "\n", "modules", "=", "[", "m", "for", "m", "in", "vgg_features", "]", "\n", "if", "conv_index", ".", "find", "(", "'22'", ")", ">=", "0", ":", "\n", "            ", "self", ".", "vgg", "=", "nn", ".", "Sequential", "(", "*", "modules", "[", ":", "8", "]", ")", "\n", "", "elif", "conv_index", ".", "find", "(", "'54'", ")", ">=", "0", ":", "\n", "            ", "self", ".", "vgg", "=", "nn", ".", "Sequential", "(", "*", "modules", "[", ":", "35", "]", ")", "\n", "\n", "", "vgg_mean", "=", "(", "0.485", ",", "0.456", ",", "0.406", ")", "\n", "vgg_std", "=", "(", "0.229", "*", "rgb_range", ",", "0.224", "*", "rgb_range", ",", "0.225", "*", "rgb_range", ")", "\n", "self", ".", "sub_mean", "=", "common", ".", "MeanShift", "(", "rgb_range", ",", "vgg_mean", ",", "vgg_std", ")", "\n", "for", "p", "in", "self", ".", "parameters", "(", ")", ":", "\n", "            ", "p", ".", "requires_grad", "=", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.vgg.VGG.forward": [[24, 37], ["vgg.VGG.forward._forward"], "methods", ["None"], ["", "", "def", "forward", "(", "self", ",", "sr", ",", "hr", ")", ":", "\n", "        ", "def", "_forward", "(", "x", ")", ":", "\n", "            ", "x", "=", "self", ".", "sub_mean", "(", "x", ")", "\n", "x", "=", "self", ".", "vgg", "(", "x", ")", "\n", "return", "x", "\n", "\n", "", "vgg_sr", "=", "_forward", "(", "sr", ")", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "vgg_hr", "=", "_forward", "(", "hr", ".", "detach", "(", ")", ")", "\n", "\n", "", "loss", "=", "F", ".", "mse_loss", "(", "vgg_sr", ",", "vgg_hr", ")", "\n", "\n", "return", "loss", "\n", "", "", ""]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.adversarial.Adversarial.__init__": [[13, 34], ["torch.Module.__init__", "loss.discriminator.Discriminator", "utility.make_optimizer", "types.SimpleNamespace"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.src.utility.make_optimizer"], ["    ", "def", "__init__", "(", "self", ",", "args", ",", "gan_type", ")", ":", "\n", "        ", "super", "(", "Adversarial", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "gan_type", "=", "gan_type", "\n", "self", ".", "gan_k", "=", "args", ".", "gan_k", "\n", "self", ".", "dis", "=", "discriminator", ".", "Discriminator", "(", "args", ")", "\n", "if", "gan_type", "==", "'WGAN_GP'", ":", "\n", "# see https://arxiv.org/pdf/1704.00028.pdf pp.4", "\n", "            ", "optim_dict", "=", "{", "\n", "'optimizer'", ":", "'ADAM'", ",", "\n", "'betas'", ":", "(", "0", ",", "0.9", ")", ",", "\n", "'epsilon'", ":", "1e-8", ",", "\n", "'lr'", ":", "1e-5", ",", "\n", "'weight_decay'", ":", "args", ".", "weight_decay", ",", "\n", "'decay'", ":", "args", ".", "decay", ",", "\n", "'gamma'", ":", "args", ".", "gamma", "\n", "}", "\n", "optim_args", "=", "SimpleNamespace", "(", "**", "optim_dict", ")", "\n", "", "else", ":", "\n", "            ", "optim_args", "=", "args", "\n", "\n", "", "self", ".", "optimizer", "=", "utility", ".", "make_optimizer", "(", "optim_args", ",", "self", ".", "dis", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.adversarial.Adversarial.forward": [[35, 94], ["fake.detach", "range", "adversarial.Adversarial.dis", "adversarial.Adversarial.optimizer.zero_grad", "adversarial.Adversarial.dis", "adversarial.Adversarial.dis", "adversarial.Adversarial.item", "adversarial.Adversarial.backward", "adversarial.Adversarial.optimizer.step", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.binary_cross_entropy_with_logits", "torch.binary_cross_entropy_with_logits", "torch.binary_cross_entropy_with_logits", "torch.binary_cross_entropy_with_logits", "adversarial.Adversarial.bce", "adversarial.Adversarial.dis.parameters", "adversarial.Adversarial.gan_type.find", "adversarial.Adversarial.gan_type.find", "p.data.clamp_", "adversarial.Adversarial.mean", "adversarial.Adversarial.bce", "adversarial.Adversarial.gan_type.find", "torch.rand_like().view", "torch.rand_like().view", "torch.rand_like().view", "torch.rand_like().view", "torch.rand_like().view", "torch.rand_like().view", "torch.rand_like().view", "torch.rand_like().view", "torch.rand_like().view", "torch.rand_like().view", "torch.rand_like().view", "torch.rand_like().view", "torch.rand_like().view", "torch.rand_like().view", "torch.rand_like().view", "torch.rand_like().view", "adversarial.Adversarial.dis", "gradients.view.view.view", "gradients.view.view.norm", "adversarial.Adversarial.bce", "adversarial.Adversarial.mean", "adversarial.Adversarial.mean", "fake.detach.mul", "real.mul", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "gradients.view.view.size", "gradients.view.norm.sub().pow().mean", "adversarial.Adversarial.mean", "adversarial.Adversarial.mean", "torch.rand_like", "torch.rand_like", "torch.rand_like", "torch.rand_like", "torch.rand_like", "torch.rand_like", "torch.rand_like", "torch.rand_like", "torch.rand_like", "torch.rand_like", "torch.rand_like", "torch.rand_like", "torch.rand_like", "torch.rand_like", "torch.rand_like", "torch.rand_like", "adversarial.Adversarial.sum", "gradients.view.norm.sub().pow", "gradients.view.norm.sub"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.step", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.adversarial.Adversarial.bce", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.adversarial.Adversarial.bce", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.adversarial.Adversarial.bce"], ["", "def", "forward", "(", "self", ",", "fake", ",", "real", ")", ":", "\n", "# updating discriminator...", "\n", "        ", "self", ".", "loss", "=", "0", "\n", "fake_detach", "=", "fake", ".", "detach", "(", ")", "# do not backpropagate through G", "\n", "for", "_", "in", "range", "(", "self", ".", "gan_k", ")", ":", "\n", "            ", "self", ".", "optimizer", ".", "zero_grad", "(", ")", "\n", "# d: B x 1 tensor", "\n", "d_fake", "=", "self", ".", "dis", "(", "fake_detach", ")", "\n", "d_real", "=", "self", ".", "dis", "(", "real", ")", "\n", "retain_graph", "=", "False", "\n", "if", "self", ".", "gan_type", "==", "'GAN'", ":", "\n", "                ", "loss_d", "=", "self", ".", "bce", "(", "d_real", ",", "d_fake", ")", "\n", "", "elif", "self", ".", "gan_type", ".", "find", "(", "'WGAN'", ")", ">=", "0", ":", "\n", "                ", "loss_d", "=", "(", "d_fake", "-", "d_real", ")", ".", "mean", "(", ")", "\n", "if", "self", ".", "gan_type", ".", "find", "(", "'GP'", ")", ">=", "0", ":", "\n", "                    ", "epsilon", "=", "torch", ".", "rand_like", "(", "fake", ")", ".", "view", "(", "-", "1", ",", "1", ",", "1", ",", "1", ")", "\n", "hat", "=", "fake_detach", ".", "mul", "(", "1", "-", "epsilon", ")", "+", "real", ".", "mul", "(", "epsilon", ")", "\n", "hat", ".", "requires_grad", "=", "True", "\n", "d_hat", "=", "self", ".", "dis", "(", "hat", ")", "\n", "gradients", "=", "torch", ".", "autograd", ".", "grad", "(", "\n", "outputs", "=", "d_hat", ".", "sum", "(", ")", ",", "inputs", "=", "hat", ",", "\n", "retain_graph", "=", "True", ",", "create_graph", "=", "True", ",", "only_inputs", "=", "True", "\n", ")", "[", "0", "]", "\n", "gradients", "=", "gradients", ".", "view", "(", "gradients", ".", "size", "(", "0", ")", ",", "-", "1", ")", "\n", "gradient_norm", "=", "gradients", ".", "norm", "(", "2", ",", "dim", "=", "1", ")", "\n", "gradient_penalty", "=", "10", "*", "gradient_norm", ".", "sub", "(", "1", ")", ".", "pow", "(", "2", ")", ".", "mean", "(", ")", "\n", "loss_d", "+=", "gradient_penalty", "\n", "# from ESRGAN: Enhanced Super-Resolution Generative Adversarial Networks", "\n", "", "", "elif", "self", ".", "gan_type", "==", "'RGAN'", ":", "\n", "                ", "better_real", "=", "d_real", "-", "d_fake", ".", "mean", "(", "dim", "=", "0", ",", "keepdim", "=", "True", ")", "\n", "better_fake", "=", "d_fake", "-", "d_real", ".", "mean", "(", "dim", "=", "0", ",", "keepdim", "=", "True", ")", "\n", "loss_d", "=", "self", ".", "bce", "(", "better_real", ",", "better_fake", ")", "\n", "retain_graph", "=", "True", "\n", "\n", "# Discriminator update", "\n", "", "self", ".", "loss", "+=", "loss_d", ".", "item", "(", ")", "\n", "loss_d", ".", "backward", "(", "retain_graph", "=", "retain_graph", ")", "\n", "self", ".", "optimizer", ".", "step", "(", ")", "\n", "\n", "if", "self", ".", "gan_type", "==", "'WGAN'", ":", "\n", "                ", "for", "p", "in", "self", ".", "dis", ".", "parameters", "(", ")", ":", "\n", "                    ", "p", ".", "data", ".", "clamp_", "(", "-", "1", ",", "1", ")", "\n", "\n", "", "", "", "self", ".", "loss", "/=", "self", ".", "gan_k", "\n", "\n", "# updating generator...", "\n", "d_fake_bp", "=", "self", ".", "dis", "(", "fake", ")", "# for backpropagation, use fake as it is", "\n", "if", "self", ".", "gan_type", "==", "'GAN'", ":", "\n", "            ", "label_real", "=", "torch", ".", "ones_like", "(", "d_fake_bp", ")", "\n", "loss_g", "=", "F", ".", "binary_cross_entropy_with_logits", "(", "d_fake_bp", ",", "label_real", ")", "\n", "", "elif", "self", ".", "gan_type", ".", "find", "(", "'WGAN'", ")", ">=", "0", ":", "\n", "            ", "loss_g", "=", "-", "d_fake_bp", ".", "mean", "(", ")", "\n", "", "elif", "self", ".", "gan_type", "==", "'RGAN'", ":", "\n", "            ", "better_real", "=", "d_real", "-", "d_fake_bp", ".", "mean", "(", "dim", "=", "0", ",", "keepdim", "=", "True", ")", "\n", "better_fake", "=", "d_fake_bp", "-", "d_real", ".", "mean", "(", "dim", "=", "0", ",", "keepdim", "=", "True", ")", "\n", "loss_g", "=", "self", ".", "bce", "(", "better_fake", ",", "better_real", ")", "\n", "\n", "# Generator loss", "\n", "", "return", "loss_g", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.adversarial.Adversarial.state_dict": [[95, 100], ["adversarial.Adversarial.dis.state_dict", "adversarial.Adversarial.optimizer.state_dict", "dict"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.adversarial.Adversarial.state_dict", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.adversarial.Adversarial.state_dict"], ["", "def", "state_dict", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "state_discriminator", "=", "self", ".", "dis", ".", "state_dict", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "state_optimizer", "=", "self", ".", "optimizer", ".", "state_dict", "(", ")", "\n", "\n", "return", "dict", "(", "**", "state_discriminator", ",", "**", "state_optimizer", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.adversarial.Adversarial.bce": [[101, 108], ["torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.binary_cross_entropy_with_logits", "torch.binary_cross_entropy_with_logits", "torch.binary_cross_entropy_with_logits", "torch.binary_cross_entropy_with_logits", "torch.binary_cross_entropy_with_logits", "torch.binary_cross_entropy_with_logits", "torch.binary_cross_entropy_with_logits", "torch.binary_cross_entropy_with_logits"], "methods", ["None"], ["", "def", "bce", "(", "self", ",", "real", ",", "fake", ")", ":", "\n", "        ", "label_real", "=", "torch", ".", "ones_like", "(", "real", ")", "\n", "label_fake", "=", "torch", ".", "zeros_like", "(", "fake", ")", "\n", "bce_real", "=", "F", ".", "binary_cross_entropy_with_logits", "(", "real", ",", "label_real", ")", "\n", "bce_fake", "=", "F", ".", "binary_cross_entropy_with_logits", "(", "fake", ",", "label_fake", ")", "\n", "bce_loss", "=", "bce_real", "+", "bce_fake", "\n", "return", "bce_loss", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__": [[15, 68], ["super().__init__", "print", "torch.ModuleList", "torch.ModuleList", "torch.ModuleList", "args.loss.split", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.device", "torch.device", "torch.device", "torch.device", "torch.device", "torch.device", "torch.device", "torch.device", "torch.device", "__init__.Loss.loss_module.to", "loss.split", "__init__.Loss.loss.append", "len", "__init__.Loss.loss.append", "__init__.Loss.loss_module.half", "torch.DataParallel", "torch.DataParallel", "torch.DataParallel", "__init__.Loss.load", "torch.MSELoss", "torch.MSELoss", "torch.MSELoss", "loss_type.find", "__init__.Loss.loss.append", "print", "__init__.Loss.loss_module.append", "range", "torch.L1Loss", "torch.L1Loss", "torch.L1Loss", "float", "loss_type.find", "importlib.import_module", "getattr", "loss_type.find", "importlib.import_module", "getattr"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.__init__", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load"], ["self", ".", "idx_scale", "=", "0", "\n", "self", ".", "input_large", "=", "(", "args", ".", "model", "==", "'VDSR'", ")", "\n", "self", ".", "self_ensemble", "=", "args", ".", "self_ensemble", "\n", "self", ".", "chop", "=", "args", ".", "chop", "\n", "self", ".", "precision", "=", "args", ".", "precision", "\n", "self", ".", "cpu", "=", "args", ".", "cpu", "\n", "self", ".", "device", "=", "torch", ".", "device", "(", "'cpu'", "if", "args", ".", "cpu", "else", "'cuda'", ")", "\n", "self", ".", "n_GPUs", "=", "args", ".", "n_GPUs", "\n", "self", ".", "save_models", "=", "args", ".", "save_models", "\n", "\n", "module", "=", "import_module", "(", "'model.'", "+", "args", ".", "model", ".", "lower", "(", ")", ")", "\n", "self", ".", "model", "=", "module", ".", "make_model", "(", "args", ")", ".", "to", "(", "self", ".", "device", ")", "\n", "if", "args", ".", "precision", "==", "'half'", ":", "\n", "            ", "self", ".", "model", ".", "half", "(", ")", "\n", "\n", "", "self", ".", "load", "(", "\n", "ckp", ".", "get_path", "(", "'model'", ")", ",", "\n", "pre_train", "=", "args", ".", "pre_train", ",", "\n", "resume", "=", "args", ".", "resume", ",", "\n", "cpu", "=", "args", ".", "cpu", "\n", ")", "\n", "print", "(", "self", ".", "model", ",", "file", "=", "ckp", ".", "log_file", ")", "\n", "\n", "", "def", "forward", "(", "self", ",", "x", ",", "idx_scale", ")", ":", "\n", "        ", "self", ".", "idx_scale", "=", "idx_scale", "\n", "if", "hasattr", "(", "self", ".", "model", ",", "'set_scale'", ")", ":", "\n", "            ", "self", ".", "model", ".", "set_scale", "(", "idx_scale", ")", "\n", "\n", "", "if", "self", ".", "training", ":", "\n", "            ", "if", "self", ".", "n_GPUs", ">", "1", ":", "\n", "                ", "return", "P", ".", "data_parallel", "(", "self", ".", "model", ",", "x", ",", "range", "(", "self", ".", "n_GPUs", ")", ")", "\n", "", "else", ":", "\n", "                ", "return", "self", ".", "model", "(", "x", ")", "\n", "", "", "else", ":", "\n", "            ", "if", "self", ".", "chop", ":", "\n", "                ", "forward_function", "=", "self", ".", "forward_chop", "\n", "", "else", ":", "\n", "                ", "forward_function", "=", "self", ".", "model", ".", "forward", "\n", "\n", "", "if", "self", ".", "self_ensemble", ":", "\n", "                ", "return", "self", ".", "forward_x8", "(", "x", ",", "forward_function", "=", "forward_function", ")", "\n", "", "else", ":", "\n", "                ", "return", "forward_function", "(", "x", ")", "\n", "\n", "", "", "", "def", "save", "(", "self", ",", "apath", ",", "epoch", ",", "is_best", "=", "False", ")", ":", "\n", "        ", "save_dirs", "=", "[", "os", ".", "path", ".", "join", "(", "apath", ",", "'model_latest.pt'", ")", "]", "\n", "\n", "if", "is_best", ":", "\n", "            ", "save_dirs", ".", "append", "(", "os", ".", "path", ".", "join", "(", "apath", ",", "'model_best.pt'", ")", ")", "\n", "", "if", "self", ".", "save_models", ":", "\n", "            ", "save_dirs", ".", "append", "(", "\n", "os", ".", "path", ".", "join", "(", "apath", ",", "'model_{}.pt'", ".", "format", "(", "epoch", ")", ")", "\n", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.forward": [[69, 85], ["enumerate", "sum", "len", "sum.item", "losses.append", "effective_loss.item"], "methods", ["None"], ["", "for", "s", "in", "save_dirs", ":", "\n", "            ", "torch", ".", "save", "(", "self", ".", "model", ".", "state_dict", "(", ")", ",", "s", ")", "\n", "\n", "", "", "def", "load", "(", "self", ",", "apath", ",", "pre_train", "=", "''", ",", "resume", "=", "-", "1", ",", "cpu", "=", "False", ")", ":", "\n", "        ", "load_from", "=", "None", "\n", "kwargs", "=", "{", "}", "\n", "if", "cpu", ":", "\n", "            ", "kwargs", "=", "{", "'map_location'", ":", "lambda", "storage", ",", "loc", ":", "storage", "}", "\n", "\n", "", "if", "resume", "==", "-", "1", ":", "\n", "            ", "load_from", "=", "torch", ".", "load", "(", "\n", "os", ".", "path", ".", "join", "(", "apath", ",", "'model_latest.pt'", ")", ",", "\n", "**", "kwargs", "\n", ")", "\n", "", "elif", "resume", "==", "0", ":", "\n", "            ", "if", "pre_train", "==", "'download'", ":", "\n", "                ", "print", "(", "'Download the model'", ")", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.step": [[86, 90], ["__init__.Loss.get_loss_module", "hasattr", "l.scheduler.step"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.get_loss_module", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.step"], ["dir_model", "=", "os", ".", "path", ".", "join", "(", "'..'", ",", "'models'", ")", "\n", "os", ".", "makedirs", "(", "dir_model", ",", "exist_ok", "=", "True", ")", "\n", "load_from", "=", "torch", ".", "utils", ".", "model_zoo", ".", "load_url", "(", "\n", "self", ".", "model", ".", "url", ",", "\n", "model_dir", "=", "dir_model", ",", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.start_log": [[91, 93], ["torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "len"], "methods", ["None"], ["**", "kwargs", "\n", ")", "\n", "", "elif", "pre_train", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.end_log": [[94, 96], ["__init__.Loss.log[].div_"], "methods", ["None"], ["                ", "print", "(", "'Load the model from {}'", ".", "format", "(", "pre_train", ")", ")", "\n", "load_from", "=", "torch", ".", "load", "(", "pre_train", ",", "**", "kwargs", ")", "\n", "", "", "else", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.display_loss": [[97, 104], ["zip", "log.append"], "methods", ["None"], ["            ", "load_from", "=", "torch", ".", "load", "(", "\n", "os", ".", "path", ".", "join", "(", "apath", ",", "'model_{}.pt'", ".", "format", "(", "resume", ")", ")", ",", "\n", "**", "kwargs", "\n", ")", "\n", "\n", "", "if", "load_from", ":", "\n", "            ", "self", ".", "model", ".", "load_state_dict", "(", "load_from", ",", "strict", "=", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.plot_loss": [[105, 118], ["numpy.linspace", "enumerate", "matplotlib.figure", "matplotlib.figure", "matplotlib.title", "matplotlib.title", "matplotlib.plot", "matplotlib.plot", "matplotlib.legend", "matplotlib.legend", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.grid", "matplotlib.grid", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "__init__.Loss.log[].numpy"], "methods", ["None"], ["", "", "def", "forward_chop", "(", "self", ",", "*", "args", ",", "shave", "=", "10", ",", "min_size", "=", "160000", ")", ":", "\n", "        ", "scale", "=", "1", "if", "self", ".", "input_large", "else", "self", ".", "scale", "[", "self", ".", "idx_scale", "]", "\n", "n_GPUs", "=", "min", "(", "self", ".", "n_GPUs", ",", "4", ")", "\n", "# height, width", "\n", "h", ",", "w", "=", "args", "[", "0", "]", ".", "size", "(", ")", "[", "-", "2", ":", "]", "\n", "\n", "top", "=", "slice", "(", "0", ",", "h", "//", "2", "+", "shave", ")", "\n", "bottom", "=", "slice", "(", "h", "-", "h", "//", "2", "-", "shave", ",", "h", ")", "\n", "left", "=", "slice", "(", "0", ",", "w", "//", "2", "+", "shave", ")", "\n", "right", "=", "slice", "(", "w", "-", "w", "//", "2", "-", "shave", ",", "w", ")", "\n", "x_chops", "=", "[", "torch", ".", "cat", "(", "[", "\n", "a", "[", "...", ",", "top", ",", "left", "]", ",", "\n", "a", "[", "...", ",", "top", ",", "right", "]", ",", "\n", "a", "[", "...", ",", "bottom", ",", "left", "]", ",", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.get_loss_module": [[119, 124], ["None"], "methods", ["None"], ["a", "[", "...", ",", "bottom", ",", "right", "]", "\n", "]", ")", "for", "a", "in", "args", "]", "\n", "\n", "y_chops", "=", "[", "]", "\n", "if", "h", "*", "w", "<", "4", "*", "min_size", ":", "\n", "            ", "for", "i", "in", "range", "(", "0", ",", "4", ",", "n_GPUs", ")", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save": [[125, 128], ["torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "torch.save", "__init__.Loss.state_dict", "os.path.join", "os.path.join"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.save", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.adversarial.Adversarial.state_dict"], ["                ", "x", "=", "[", "x_chop", "[", "i", ":", "(", "i", "+", "n_GPUs", ")", "]", "for", "x_chop", "in", "x_chops", "]", "\n", "y", "=", "P", ".", "data_parallel", "(", "self", ".", "model", ",", "*", "x", ",", "range", "(", "n_GPUs", ")", ")", "\n", "if", "not", "isinstance", "(", "y", ",", "list", ")", ":", "y", "=", "[", "y", "]", "\n", "if", "not", "y_chops", ":", "\n"]], "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load": [[129, 143], ["__init__.Loss.load_state_dict", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "__init__.Loss.get_loss_module", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "torch.load", "os.path.join", "hasattr", "os.path.join", "range", "len", "l.scheduler.step"], "methods", ["home.repos.pwc.inspect_result.YCHang686_A-CubeNet.model.acubenet.ACubeNet.load_state_dict", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.get_loss_module", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.load", "home.repos.pwc.inspect_result.YCHang686_A-CubeNet.loss.__init__.Loss.step"], ["                    ", "y_chops", "=", "[", "[", "c", "for", "c", "in", "_y", ".", "chunk", "(", "n_GPUs", ",", "dim", "=", "0", ")", "]", "for", "_y", "in", "y", "]", "\n", "", "else", ":", "\n", "                    ", "for", "y_chop", ",", "_y", "in", "zip", "(", "y_chops", ",", "y", ")", ":", "\n", "                        ", "y_chop", ".", "extend", "(", "_y", ".", "chunk", "(", "n_GPUs", ",", "dim", "=", "0", ")", ")", "\n", "", "", "", "", "else", ":", "\n", "            ", "for", "p", "in", "zip", "(", "*", "x_chops", ")", ":", "\n", "                ", "y", "=", "self", ".", "forward_chop", "(", "*", "p", ",", "shave", "=", "shave", ",", "min_size", "=", "min_size", ")", "\n", "if", "not", "isinstance", "(", "y", ",", "list", ")", ":", "y", "=", "[", "y", "]", "\n", "if", "not", "y_chops", ":", "\n", "                    ", "y_chops", "=", "[", "[", "_y", "]", "for", "_y", "in", "y", "]", "\n", "", "else", ":", "\n", "                    ", "for", "y_chop", ",", "_y", "in", "zip", "(", "y_chops", ",", "y", ")", ":", "y_chop", ".", "append", "(", "_y", ")", "\n", "\n", "", "", "", "h", "*=", "scale", "\n", "w", "*=", "scale", "\n"]]}