{"home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.RigidSurreal_Shrec_API.SHREC_pkl.__init__": [[23, 33], ["open", "json.load", "len"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "dir_", "=", "'../../../dataset_corr_all/data_pkl_202007220823/data_pkl_202007220823'", ")", ":", "\n", "        ", "self", ".", "ratio_list", "=", "[", "0.02", ",", "0.04", ",", "0.06", ",", "0.08", ",", "0.10", ",", "0.12", ",", "0.14", ",", "0.16", ",", "0.18", ",", "0.20", "]", "\n", "self", ".", "sample", "=", "None", "\n", "self", ".", "pclabel", "=", "None", "\n", "\n", "self", ".", "pkl_DIR", "=", "dir_", "\n", "with", "open", "(", "'{}/SHREC_430sample_dict.txt'", ".", "format", "(", "self", ".", "pkl_DIR", ")", ",", "'r'", ")", "as", "fp", ":", "\n", "            ", "sample_list", "=", "json", ".", "load", "(", "fp", ")", "\n", "self", ".", "sample_list", "=", "sample_list", "\n", "self", ".", "len", "=", "len", "(", "sample_list", ")", "#430 pairs", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.RigidSurreal_Shrec_API.SHREC_pkl.__getitem__": [[34, 65], ["int", "RigidSurreal_Shrec_API.SHREC_pkl.sample_list.get", "str", "open", "pickle.load", "open", "pickle.load", "str_each_ratio.replace", "str().replace", "str"], "methods", ["None"], ["", "", "def", "__getitem__", "(", "self", ",", "idx", ")", ":", "\n", "        ", "batch_num", "=", "int", "(", "idx", "/", "10", ")", "\n", "in_batch_idx", "=", "idx", "%", "10", "#0-0 9-9 10-0 19-9", "\n", "val_l", "=", "self", ".", "sample_list", ".", "get", "(", "str", "(", "idx", ")", ")", "\n", "pkl_dir", "=", "self", ".", "pkl_DIR", "+", "val_l", "[", "0", "]", "\n", "\n", "pclabel_pkl_Dir", "=", "self", ".", "pkl_DIR", "+", "val_l", "[", "5", "]", "\n", "with", "open", "(", "pkl_dir", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "self", ".", "sample", "=", "pickle", ".", "load", "(", "f", ")", "\n", "", "with", "open", "(", "pclabel_pkl_Dir", ",", "'rb'", ")", "as", "f1", ":", "\n", "            ", "self", ".", "pclabel", "=", "pickle", ".", "load", "(", "f1", ")", "\n", "\n", "", "self", ".", "pc1", "=", "self", ".", "sample", "[", "'pc1'", "]", "[", "in_batch_idx", "]", "\n", "self", ".", "pc2", "=", "self", ".", "sample", "[", "'pc2'", "]", "[", "in_batch_idx", "]", "\n", "\n", "self", ".", "p_raw", "=", "self", ".", "sample", "[", "'p_raw'", "]", "[", "in_batch_idx", "]", "\n", "\n", "\n", "return_dict", "=", "{", "\n", "'src_flat'", ":", "self", ".", "pc1", ",", "\n", "'tgt_flat'", ":", "self", ".", "pc2", ",", "\n", "'label_flat'", ":", "self", ".", "pclabel", "[", "'label_0_00'", "]", ",", "#1024 1024", "\n", "}", "\n", "\n", "for", "each_ratio", "in", "self", ".", "ratio_list", ":", "\n", "            ", "str_each_ratio", "=", "(", "'%.2f'", "%", "each_ratio", ")", "\n", "key_name_", "=", "'label_'", "+", "str_each_ratio", ".", "replace", "(", "'.'", ",", "'_'", ")", "\n", "key_name", "=", "'sl_'", "+", "str", "(", "each_ratio", ")", ".", "replace", "(", "'.'", ",", "''", ")", "\n", "return_dict", "[", "key_name", "]", "=", "self", ".", "pclabel", "[", "key_name_", "]", "\n", "\n", "", "return", "return_dict", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.RigidSurreal_Shrec_API.SHREC_pkl.__len__": [[66, 68], ["None"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "len", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.RigidSurreal_Shrec_API.rigid_SURREAL_for_Ours_full_permute.__init__": [[76, 90], ["list", "h5py.File", "len", "range"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "args", ",", "file_name", ",", "transform", "=", "None", ",", "soft_label", "=", "False", ",", "show", "=", "False", ",", "pick_out", "=", "None", ",", "train", "=", "None", ",", "npoints", "=", "None", ",", "ratio_list", "=", "[", "0.02", ",", "0.04", ",", "0.06", ",", "0.08", ",", "0.10", "]", ",", "gaussian_noise", "=", "False", ",", "partition", "=", "'train'", ",", "factor", "=", "4", ")", ":", "\n", "        ", "self", ".", "args", "=", "args", "\n", "self", ".", "gaussian_noise", "=", "gaussian_noise", "\n", "self", ".", "partition", "=", "partition", "\n", "self", ".", "factor", "=", "factor", "\n", "self", ".", "ratio_list", "=", "ratio_list", "\n", "self", ".", "file_name", "=", "file_name", "\n", "self", ".", "xyz2", "=", "None", "\n", "with", "h5py", ".", "File", "(", "self", ".", "file_name", ",", "'r'", ")", "as", "file", ":", "\n", "            ", "self", ".", "len", "=", "len", "(", "file", "[", "\"xyz2\"", "]", ")", "\n", "", "self", ".", "pair_len", "=", "self", ".", "len", "//", "2", "\n", "self", ".", "L", "=", "list", "(", "range", "(", "0", ",", "self", ".", "len", ")", ")", "\n", "self", ".", "epoch", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.RigidSurreal_Shrec_API.rigid_SURREAL_for_Ours_full_permute.permuted_transfrom": [[92, 106], ["numpy.eye", "numpy.eye.copy", "numpy.array_equal", "numpy.dot", "len", "numpy.random.seed", "numpy.random.shuffle"], "methods", ["None"], ["", "def", "permuted_transfrom", "(", "self", ",", "xyz1", ",", "index", ",", "random_fix", "=", "True", ")", ":", "#N1x3", "\n", "        ", "assert", "(", "len", "(", "xyz1", ".", "shape", ")", "==", "2", ")", "\n", "assert", "(", "xyz1", ".", "shape", "[", "1", "]", "==", "3", ")", "\n", "npoint", "=", "xyz1", ".", "shape", "[", "0", "]", "\n", "I", "=", "np", ".", "eye", "(", "npoint", ")", "#N2xN1", "\n", "p", "=", "I", ".", "copy", "(", ")", "\n", "while", "(", "np", ".", "array_equal", "(", "p", ",", "I", ")", ")", ":", "\n", "            ", "if", "random_fix", "==", "True", ":", "\n", "                ", "np", ".", "random", ".", "seed", "(", "index", ")", "\n", "np", ".", "random", ".", "shuffle", "(", "p", ")", "#N2xN1 ", "\n", "\n", "", "", "permuted_xyz1", "=", "np", ".", "dot", "(", "p", ",", "xyz1", ")", "#N2xN1 N1x3 = N2x3", "\n", "label", "=", "p", "#N1xN2", "\n", "return", "label", ",", "permuted_xyz1", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.RigidSurreal_Shrec_API.rigid_SURREAL_for_Ours_full_permute.__getitem__": [[107, 118], ["numpy.array", "RigidSurreal_Shrec_API.rigid_SURREAL_for_Ours_full_permute.rigid_transform_to_make_pair", "torch.from_numpy().float", "h5py.File", "torch.from_numpy"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.RigidSurreal_Shrec_API.rigid_SURREAL_for_Ours_full_permute.rigid_transform_to_make_pair"], ["", "def", "__getitem__", "(", "self", ",", "item", ")", ":", "\n", "        ", "if", "(", "self", ".", "xyz2", "==", "None", ")", ":", "\n", "            ", "self", ".", "xyz2", "=", "h5py", ".", "File", "(", "self", ".", "file_name", ",", "'r'", ")", "[", "\"xyz2\"", "]", "\n", "\n", "", "pointcloud", "=", "np", ".", "array", "(", "self", ".", "xyz2", "[", "item", "]", ")", "#<N=1024, F=3>", "\n", "\n", "src", ",", "target", ",", "rotation_ab", ",", "translation_ab", ",", "rotation_ba", ",", "translation_ba", ",", "euler_ab", ",", "euler_ba", ",", "corr_matrix_label", "=", "self", ".", "rigid_transform_to_make_pair", "(", "pointcloud", ",", "item", ")", "\n", "corr_matrix_label", "=", "torch", ".", "from_numpy", "(", "corr_matrix_label", ")", ".", "float", "(", ")", "\n", "\n", "return", "corr_matrix_label", ",", "src", ",", "target", ",", "item", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.RigidSurreal_Shrec_API.rigid_SURREAL_for_Ours_full_permute.rigid_transform_to_make_pair": [[119, 180], ["numpy.cos", "numpy.cos", "numpy.cos", "numpy.sin", "numpy.sin", "numpy.sin", "numpy.array", "numpy.array", "numpy.array", "numpy.array.dot().dot", "numpy.array", "scipy.spatial.transform.Rotation.from_euler", "numpy.asarray", "jitter_pointcloud", "numpy.random.seed", "R_ba.dot", "numpy.expand_dims", "numpy.random.seed", "numpy.random.permutation", "numpy.random.seed", "RigidSurreal_Shrec_API.rigid_SURREAL_for_Ours_full_permute.permuted_transfrom", "numpy.random.permutation.astype", "pointcloud2.astype", "np.array.dot().dot.astype", "numpy.array.astype", "R_ba.astype", "translation_ba.astype", "numpy.asarray.astype", "euler_ba.astype", "numpy.random.uniform", "numpy.random.uniform", "numpy.random.uniform", "numpy.array.dot", "numpy.random.uniform", "numpy.random.uniform", "numpy.random.uniform", "scipy.spatial.transform.Rotation.from_euler.apply", "numpy.random.permutation", "int", "numpy.random.seed", "numpy.random.permutation", "numpy.random.seed", "RigidSurreal_Shrec_API.rigid_SURREAL_for_Ours_full_permute.permuted_transfrom", "time.time", "numpy.random.permutation"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.permuted_transfrom", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.permuted_transfrom"], ["", "def", "rigid_transform_to_make_pair", "(", "self", ",", "pointcloud", ",", "item", ")", ":", "#input=<N, F=3>", "\n", "        ", "if", "self", ".", "gaussian_noise", ":", "\n", "            ", "pointcloud", "=", "jitter_pointcloud", "(", "pointcloud", ")", "\n", "", "if", "self", ".", "partition", "!=", "'train'", ":", "\n", "            ", "np", ".", "random", ".", "seed", "(", "item", ")", "\n", "", "anglex", "=", "np", ".", "random", ".", "uniform", "(", ")", "*", "np", ".", "pi", "/", "self", ".", "factor", "\n", "angley", "=", "np", ".", "random", ".", "uniform", "(", ")", "*", "np", ".", "pi", "/", "self", ".", "factor", "\n", "anglez", "=", "np", ".", "random", ".", "uniform", "(", ")", "*", "np", ".", "pi", "/", "self", ".", "factor", "\n", "\n", "cosx", "=", "np", ".", "cos", "(", "anglex", ")", "\n", "cosy", "=", "np", ".", "cos", "(", "angley", ")", "\n", "cosz", "=", "np", ".", "cos", "(", "anglez", ")", "\n", "sinx", "=", "np", ".", "sin", "(", "anglex", ")", "\n", "siny", "=", "np", ".", "sin", "(", "angley", ")", "\n", "sinz", "=", "np", ".", "sin", "(", "anglez", ")", "\n", "\n", "Rx", "=", "np", ".", "array", "(", "[", "[", "1", ",", "0", ",", "0", "]", ",", "\n", "[", "0", ",", "cosx", ",", "-", "sinx", "]", ",", "\n", "[", "0", ",", "sinx", ",", "cosx", "]", "]", ")", "\n", "Ry", "=", "np", ".", "array", "(", "[", "[", "cosy", ",", "0", ",", "siny", "]", ",", "\n", "[", "0", ",", "1", ",", "0", "]", ",", "\n", "[", "-", "siny", ",", "0", ",", "cosy", "]", "]", ")", "\n", "Rz", "=", "np", ".", "array", "(", "[", "[", "cosz", ",", "-", "sinz", ",", "0", "]", ",", "\n", "[", "sinz", ",", "cosz", ",", "0", "]", ",", "\n", "[", "0", ",", "0", ",", "1", "]", "]", ")", "\n", "R_ab", "=", "Rx", ".", "dot", "(", "Ry", ")", ".", "dot", "(", "Rz", ")", "#R_ab=<3,3>", "\n", "R_ba", "=", "R_ab", ".", "T", "#R_ba=<3,3>", "\n", "translation_ab", "=", "np", ".", "array", "(", "[", "np", ".", "random", ".", "uniform", "(", "-", "0.5", ",", "0.5", ")", ",", "np", ".", "random", ".", "uniform", "(", "-", "0.5", ",", "0.5", ")", ",", "\n", "np", ".", "random", ".", "uniform", "(", "-", "0.5", ",", "0.5", ")", "]", ")", "#array([ 0.28535858,  0.27997581, -0.22740739])", "\n", "translation_ba", "=", "-", "R_ba", ".", "dot", "(", "translation_ab", ")", "#array([-0.43694427, -0.10139442,  0.10163157])", "\n", "\n", "pointcloud1", "=", "pointcloud", ".", "T", "#pointcloud1=<3,1024> pointcloud=<1024,3>", "\n", "\n", "\n", "rotation_ab", "=", "Rotation", ".", "from_euler", "(", "'zyx'", ",", "[", "anglez", ",", "angley", ",", "anglex", "]", ")", "\n", "pointcloud2", "=", "rotation_ab", ".", "apply", "(", "pointcloud1", ".", "T", ")", ".", "T", "+", "np", ".", "expand_dims", "(", "translation_ab", ",", "axis", "=", "1", ")", "#pointcloud2=<3,1024>", "\n", "\n", "\n", "euler_ab", "=", "np", ".", "asarray", "(", "[", "anglez", ",", "angley", ",", "anglex", "]", ")", "\n", "euler_ba", "=", "-", "euler_ab", "[", ":", ":", "-", "1", "]", "\n", "\n", "if", "self", ".", "partition", "!=", "'train'", ":", "\n", "            ", "np", ".", "random", ".", "seed", "(", "item", ")", "\n", "pointcloud1", "=", "np", ".", "random", ".", "permutation", "(", "pointcloud1", ".", "T", ")", "#pointcloud1=<1024,3>", "\n", "np", ".", "random", ".", "seed", "(", "item", ")", "\n", "pointcloud2", "=", "np", ".", "random", ".", "permutation", "(", "pointcloud2", ".", "T", ")", ".", "T", "#pointcloud2=<3,1024>", "\n", "corr_matrix_label", ",", "permuted_pointcloud", "=", "self", ".", "permuted_transfrom", "(", "pointcloud1", ",", "item", ")", "#corr_matrix_label=<N1=1024,N2=1024> permuted_pointcloud=<1024,3>", "\n", "pointcloud1", "=", "permuted_pointcloud", ".", "T", "#pointcloud1=<3,1024>", "\n", "", "elif", "self", ".", "partition", "==", "'train'", ":", "\n", "            ", "now", "=", "int", "(", "time", ".", "time", "(", ")", ")", "\n", "np", ".", "random", ".", "seed", "(", "now", ")", "\n", "pointcloud1", "=", "np", ".", "random", ".", "permutation", "(", "pointcloud1", ".", "T", ")", "#pointcloud1=<1024,3>", "\n", "np", ".", "random", ".", "seed", "(", "now", ")", "\n", "pointcloud2", "=", "np", ".", "random", ".", "permutation", "(", "pointcloud2", ".", "T", ")", ".", "T", "#pointcloud2=<3,1024>", "\n", "corr_matrix_label", ",", "permuted_pointcloud", "=", "self", ".", "permuted_transfrom", "(", "pointcloud1", ",", "now", ")", "#corr_matrix_label=<N1=1024,N2=1024> permuted_pointcloud=<1024,3>", "\n", "pointcloud1", "=", "permuted_pointcloud", ".", "T", "#pointcloud1=<3,1024>", "\n", "\n", "\n", "", "return", "pointcloud1", ".", "astype", "(", "'float32'", ")", ",", "pointcloud2", ".", "astype", "(", "'float32'", ")", ",", "R_ab", ".", "astype", "(", "'float32'", ")", ",", "translation_ab", ".", "astype", "(", "'float32'", ")", ",", "R_ba", ".", "astype", "(", "'float32'", ")", ",", "translation_ba", ".", "astype", "(", "'float32'", ")", ",", "euler_ab", ".", "astype", "(", "'float32'", ")", ",", "euler_ba", ".", "astype", "(", "'float32'", ")", ",", "corr_matrix_label", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.RigidSurreal_Shrec_API.rigid_SURREAL_for_Ours_full_permute.__len__": [[181, 183], ["None"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "len", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.RigidSurreal_Shrec_API.UnsDeepCorr_eval_SHREC_API": [[70, 73], ["RigidSurreal_Shrec_API.SHREC_pkl"], "function", ["None"], ["", "", "def", "UnsDeepCorr_eval_SHREC_API", "(", ")", ":", "\n", "    ", "test_dataset", "=", "SHREC_pkl", "(", ")", "\n", "return", "test_dataset", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.RigidSurreal_Shrec_API.get_rigid_surreal_datasets_Ours": [[184, 196], ["RigidSurreal_Shrec_API.rigid_SURREAL_for_Ours_full_permute", "RigidSurreal_Shrec_API.rigid_SURREAL_for_Ours_full_permute", "torch.utils.data.DataLoader", "torch.utils.data.DataLoader", "int", "int"], "function", ["None"], ["", "", "def", "get_rigid_surreal_datasets_Ours", "(", "args", ")", ":", "\n", "\n", "    ", "train_dataset", "=", "rigid_SURREAL_for_Ours_full_permute", "(", "args", ",", "'../../../dataset_corr_all/data_training_230000_1024_3.h5'", ",", "partition", "=", "'train'", ",", "gaussian_noise", "=", "args", ".", "gaussian_noise", ",", "factor", "=", "args", ".", "factor", ")", "\n", "\n", "test_dataset", "=", "rigid_SURREAL_for_Ours_full_permute", "(", "args", ",", "'../../../dataset_corr_all/data_test_200_1024_3.h5'", ",", "partition", "=", "'test'", ",", "gaussian_noise", "=", "args", ".", "gaussian_noise", ",", "factor", "=", "args", ".", "factor", ")", "\n", "train_loader", "=", "torch", ".", "utils", ".", "data", ".", "DataLoader", "(", "train_dataset", ",", "batch_size", "=", "args", ".", "batchSize", ",", "\n", "shuffle", "=", "True", ",", "num_workers", "=", "int", "(", "args", ".", "workers", ")", ",", "drop_last", "=", "True", ")", "\n", "test_loader", "=", "torch", ".", "utils", ".", "data", ".", "DataLoader", "(", "test_dataset", ",", "batch_size", "=", "args", ".", "batchSize", ",", "\n", "shuffle", "=", "False", ",", "num_workers", "=", "int", "(", "args", ".", "workers", ")", ")", "\n", "return", "train_dataset", ",", "test_dataset", ",", "train_loader", ",", "test_loader", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.Encoder.__init__": [[17, 43], ["pytorch_lightning.LightningModule.__init__", "torch.nn.BatchNorm2d", "torch.nn.BatchNorm2d", "torch.nn.BatchNorm2d", "torch.nn.BatchNorm2d", "torch.nn.BatchNorm2d", "torch.nn.BatchNorm2d", "torch.nn.BatchNorm2d", "torch.nn.BatchNorm2d", "torch.nn.GroupNorm", "torch.nn.GroupNorm", "torch.nn.GroupNorm", "torch.nn.GroupNorm", "torch.nn.GroupNorm", "torch.nn.GroupNorm", "torch.nn.GroupNorm", "torch.nn.GroupNorm", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Conv2d", "torch.nn.Conv2d", "torch.nn.LeakyReLU", "torch.nn.LeakyReLU", "torch.nn.Conv2d", "torch.nn.Conv2d", "torch.nn.LeakyReLU", "torch.nn.LeakyReLU", "torch.nn.Conv2d", "torch.nn.Conv2d", "torch.nn.LeakyReLU", "torch.nn.LeakyReLU", "torch.nn.Conv2d", "torch.nn.Conv2d", "torch.nn.LeakyReLU", "torch.nn.LeakyReLU", "torch.nn.Conv1d", "torch.nn.Conv1d", "torch.nn.LeakyReLU", "torch.nn.LeakyReLU", "torch.nn.Conv1d", "torch.nn.Conv1d", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.Conv1d", "torch.nn.Conv1d", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.Conv1d", "torch.nn.Conv1d", "torch.nn.ReLU", "torch.nn.ReLU"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.HumanDataModule.__init__"], ["    ", "def", "__init__", "(", "self", ",", "enc_emb_dim", "=", "128", ",", "enc_glb_dim", "=", "1024", ",", "k_nn", "=", "20", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "k", "=", "k_nn", "\n", "self", ".", "bn1", "=", "nn", ".", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "bn2", "=", "nn", ".", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "bn3", "=", "nn", ".", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "bn4", "=", "nn", ".", "BatchNorm2d", "(", "256", ")", "\n", "self", ".", "bn5", "=", "nn", ".", "GroupNorm", "(", "32", ",", "512", ")", "\n", "self", ".", "bn6", "=", "nn", ".", "GroupNorm", "(", "32", ",", "512", ")", "\n", "self", ".", "bn7", "=", "nn", ".", "GroupNorm", "(", "32", ",", "256", ")", "\n", "self", ".", "bn8", "=", "nn", ".", "GroupNorm", "(", "32", ",", "enc_emb_dim", ")", "\n", "self", ".", "conv1", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "6", ",", "64", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", ",", "self", ".", "bn1", ",", "nn", ".", "LeakyReLU", "(", "negative_slope", "=", "0.2", ")", ")", "\n", "self", ".", "conv2", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "64", "*", "2", ",", "64", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", ",", "self", ".", "bn2", ",", "nn", ".", "LeakyReLU", "(", "negative_slope", "=", "0.2", ")", ")", "\n", "self", ".", "conv3", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "64", "*", "2", ",", "128", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", ",", "self", ".", "bn3", ",", "nn", ".", "LeakyReLU", "(", "negative_slope", "=", "0.2", ")", ")", "\n", "self", ".", "conv4", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "128", "*", "2", ",", "256", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", ",", "self", ".", "bn4", ",", "nn", ".", "LeakyReLU", "(", "negative_slope", "=", "0.2", ")", ")", "\n", "self", ".", "conv5", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv1d", "(", "512", ",", "enc_glb_dim", "//", "2", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", ",", "self", ".", "bn5", ",", "nn", ".", "LeakyReLU", "(", "negative_slope", "=", "0.2", ")", ")", "\n", "self", ".", "mlp", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv1d", "(", "64", "+", "64", "+", "128", "+", "256", "+", "enc_glb_dim", ",", "512", ",", "1", ")", ",", "\n", "self", ".", "bn6", ",", "\n", "nn", ".", "ReLU", "(", ")", ",", "\n", "nn", ".", "Conv1d", "(", "512", ",", "256", ",", "1", ")", ",", "\n", "self", ".", "bn7", ",", "\n", "nn", ".", "ReLU", "(", ")", ",", "\n", "nn", ".", "Conv1d", "(", "256", ",", "enc_emb_dim", ",", "1", ")", ",", "\n", "self", ".", "bn8", ",", "\n", "nn", ".", "ReLU", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.Encoder._get_graph_feature": [[44, 69], ["x.view().repeat.view().repeat.size", "x.view().repeat.view().repeat.size", "x.view().repeat.view().repeat.view", "knn.view", "x.view().repeat.view().repeat.size", "x.view().repeat.view().repeat.transpose().contiguous", "torch.cat().permute().contiguous.view", "torch.cat().permute().contiguous.view", "x.view().repeat.view().repeat.view().repeat", "torch.cat().permute().contiguous", "torch.cat().permute().contiguous", "torch.cat().permute().contiguous", "torch.cat().permute().contiguous", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "lit_corrnet3d_clean.Encoder._get_graph_feature.knn"], "methods", ["None"], ["", "def", "_get_graph_feature", "(", "self", ",", "x", ",", "k", "=", "20", ",", "idx", "=", "None", ")", ":", "\n", "\n", "        ", "def", "knn", "(", "x", ",", "k", ")", ":", "\n", "            ", "inner", "=", "-", "2", "*", "torch", ".", "matmul", "(", "x", ".", "transpose", "(", "2", ",", "1", ")", ",", "x", ")", "\n", "xx", "=", "torch", ".", "sum", "(", "x", "**", "2", ",", "dim", "=", "1", ",", "keepdim", "=", "True", ")", "\n", "pairwise_distance", "=", "-", "xx", "-", "inner", "-", "xx", ".", "transpose", "(", "2", ",", "1", ")", "\n", "idx", "=", "pairwise_distance", ".", "topk", "(", "k", "=", "k", ",", "dim", "=", "-", "1", ")", "[", "1", "]", "\n", "return", "idx", "\n", "\n", "", "batch_size", "=", "x", ".", "size", "(", "0", ")", "\n", "num_points", "=", "x", ".", "size", "(", "2", ")", "\n", "x", "=", "x", ".", "view", "(", "batch_size", ",", "-", "1", ",", "num_points", ")", "\n", "if", "idx", "is", "None", ":", "\n", "            ", "idx", "=", "knn", "(", "x", ",", "k", "=", "k", ")", "\n", "", "device", "=", "idx", ".", "device", "\n", "idx_base", "=", "torch", ".", "arange", "(", "0", ",", "batch_size", ",", "device", "=", "device", ")", ".", "view", "(", "-", "1", ",", "1", ",", "1", ")", "*", "num_points", "\n", "idx", "=", "idx", "+", "idx_base", "\n", "idx", "=", "idx", ".", "view", "(", "-", "1", ")", "\n", "_", ",", "num_dims", ",", "_", "=", "x", ".", "size", "(", ")", "\n", "x", "=", "x", ".", "transpose", "(", "2", ",", "1", ")", ".", "contiguous", "(", ")", "\n", "feature", "=", "x", ".", "view", "(", "batch_size", "*", "num_points", ",", "-", "1", ")", "[", "idx", ",", ":", "]", "\n", "feature", "=", "feature", ".", "view", "(", "batch_size", ",", "num_points", ",", "k", ",", "num_dims", ")", "\n", "x", "=", "x", ".", "view", "(", "batch_size", ",", "num_points", ",", "1", ",", "num_dims", ")", ".", "repeat", "(", "1", ",", "1", ",", "k", ",", "1", ")", "\n", "feature", "=", "torch", ".", "cat", "(", "(", "feature", "-", "x", ",", "x", ")", ",", "dim", "=", "3", ")", ".", "permute", "(", "0", ",", "3", ",", "1", ",", "2", ")", ".", "contiguous", "(", ")", "\n", "return", "feature", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.Encoder.forward": [[70, 97], ["torch.cat.size", "torch.cat.size", "torch.cat.size", "torch.cat.size", "lit_corrnet3d_clean.Encoder._get_graph_feature", "lit_corrnet3d_clean.Encoder.conv1", "lit_corrnet3d_clean.Encoder._get_graph_feature", "lit_corrnet3d_clean.Encoder.conv2", "lit_corrnet3d_clean.Encoder._get_graph_feature", "lit_corrnet3d_clean.Encoder.conv3", "lit_corrnet3d_clean.Encoder._get_graph_feature", "lit_corrnet3d_clean.Encoder.conv4", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "lit_corrnet3d_clean.Encoder.conv5", "torch.adaptive_max_pool1d().view", "torch.adaptive_max_pool1d().view", "torch.adaptive_avg_pool1d().view", "torch.adaptive_avg_pool1d().view", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "global_vector.unsqueeze().expand", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "lit_corrnet3d_clean.Encoder.mlp", "torch.cat.max", "torch.cat.max", "torch.cat.max", "torch.cat.max", "torch.cat.max", "torch.cat.max", "torch.cat.max", "torch.cat.max", "global_vector.unsqueeze", "torch.adaptive_max_pool1d", "torch.adaptive_max_pool1d", "torch.adaptive_avg_pool1d", "torch.adaptive_avg_pool1d", "global_vector.unsqueeze"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.Encoder._get_graph_feature", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.Encoder._get_graph_feature", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.Encoder._get_graph_feature", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.Encoder._get_graph_feature"], ["", "def", "forward", "(", "self", ",", "transpose_xyz", ")", ":", "\n", "        ", "x", "=", "transpose_xyz", "\n", "batch_size", "=", "x", ".", "size", "(", "0", ")", "\n", "num_points", "=", "x", ".", "size", "(", "2", ")", "\n", "x", "=", "self", ".", "_get_graph_feature", "(", "x", ",", "self", ".", "k", ")", "\n", "x", "=", "self", ".", "conv1", "(", "x", ")", "\n", "x1", "=", "x", ".", "max", "(", "dim", "=", "-", "1", ",", "keepdim", "=", "False", ")", "[", "0", "]", "\n", "x", "=", "self", ".", "_get_graph_feature", "(", "x1", ",", "self", ".", "k", ")", "\n", "x", "=", "self", ".", "conv2", "(", "x", ")", "\n", "x2", "=", "x", ".", "max", "(", "dim", "=", "-", "1", ",", "keepdim", "=", "False", ")", "[", "0", "]", "\n", "x", "=", "self", ".", "_get_graph_feature", "(", "x2", ",", "self", ".", "k", ")", "\n", "x", "=", "self", ".", "conv3", "(", "x", ")", "\n", "x3", "=", "x", ".", "max", "(", "dim", "=", "-", "1", ",", "keepdim", "=", "False", ")", "[", "0", "]", "\n", "x", "=", "self", ".", "_get_graph_feature", "(", "x3", ",", "self", ".", "k", ")", "\n", "x", "=", "self", ".", "conv4", "(", "x", ")", "\n", "x4", "=", "x", ".", "max", "(", "dim", "=", "-", "1", ",", "keepdim", "=", "False", ")", "[", "0", "]", "\n", "x", "=", "torch", ".", "cat", "(", "(", "x1", ",", "x2", ",", "x3", ",", "x4", ")", ",", "dim", "=", "1", ")", "\n", "local_concat", "=", "x", "\n", "x", "=", "self", ".", "conv5", "(", "x", ")", "\n", "x1", "=", "F", ".", "adaptive_max_pool1d", "(", "x", ",", "1", ")", ".", "view", "(", "batch_size", ",", "-", "1", ")", "\n", "x2", "=", "F", ".", "adaptive_avg_pool1d", "(", "x", ",", "1", ")", ".", "view", "(", "batch_size", ",", "-", "1", ")", "\n", "x", "=", "torch", ".", "cat", "(", "(", "x1", ",", "x2", ")", ",", "1", ")", "\n", "global_vector", "=", "x", "\n", "repeat_glb_feat", "=", "global_vector", ".", "unsqueeze", "(", "-", "1", ")", ".", "expand", "(", "batch_size", ",", "global_vector", ".", "shape", "[", "1", "]", ",", "num_points", ")", "\n", "x", "=", "torch", ".", "cat", "(", "(", "local_concat", ",", "repeat_glb_feat", ")", ",", "1", ")", "\n", "embedding_feat", "=", "self", ".", "mlp", "(", "x", ")", "\n", "return", "embedding_feat", ",", "global_vector", ".", "unsqueeze", "(", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.norm.__init__": [[99, 102], ["pytorch_lightning.LightningModule.__init__"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.HumanDataModule.__init__"], ["    ", "def", "__init__", "(", "self", ",", "axis", "=", "2", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "axis", "=", "axis", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.norm.forward": [[103, 108], ["torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.std", "torch.std", "torch.std", "torch.std"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "mean", "=", "torch", ".", "mean", "(", "x", ",", "self", ".", "axis", ",", "keepdim", "=", "True", ")", "\n", "std", "=", "torch", ".", "std", "(", "x", ",", "self", ".", "axis", ",", "keepdim", "=", "True", ")", "\n", "x", "=", "(", "x", "-", "mean", ")", "/", "(", "std", "+", "1e-6", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.Gradient.forward": [[110, 113], ["None"], "methods", ["None"], ["    ", "@", "staticmethod", "\n", "def", "forward", "(", "ctx", ",", "input", ")", ":", "\n", "        ", "return", "input", "*", "8", "\n", "", "@", "staticmethod", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.Gradient.backward": [[113, 116], ["None"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "backward", "(", "ctx", ",", "grad_output", ")", ":", "\n", "        ", "return", "grad_output", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.GroupingOperation.forward": [[118, 124], ["idx.size", "features.size", "pointnet2_ops.group_points"], "methods", ["None"], ["    ", "@", "staticmethod", "\n", "def", "forward", "(", "ctx", ",", "features", ",", "idx", ")", ":", "\n", "        ", "B", ",", "nfeatures", ",", "nsample", "=", "idx", ".", "size", "(", ")", "\n", "_", ",", "C", ",", "N", "=", "features", ".", "size", "(", ")", "\n", "ctx", ".", "for_backwards", "=", "(", "idx", ",", "N", ")", "\n", "return", "_ext", ".", "group_points", "(", "features", ",", "idx", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.GroupingOperation.backward": [[125, 130], ["pointnet2_ops.group_points_grad", "grad_out.contiguous"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "backward", "(", "ctx", ",", "grad_out", ")", ":", "\n", "        ", "idx", ",", "N", "=", "ctx", ".", "for_backwards", "\n", "grad_features", "=", "_ext", ".", "group_points_grad", "(", "grad_out", ".", "contiguous", "(", ")", ",", "idx", ",", "N", ")", "\n", "return", "grad_features", ",", "None", "\n", "", "", "grouping_operation", "=", "GroupingOperation", ".", "apply", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.Modified_softmax.__init__": [[133, 137], ["pytorch_lightning.LightningModule.__init__", "lit_corrnet3d_clean.norm"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.HumanDataModule.__init__"], ["    ", "def", "__init__", "(", "self", ",", "axis", "=", "1", ")", ":", "\n", "        ", "super", "(", "Modified_softmax", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "axis", "=", "axis", "\n", "self", ".", "norm", "=", "norm", "(", "axis", "=", "axis", ")", "\n", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.Modified_softmax.forward": [[137, 142], ["lit_corrnet3d_clean.Modified_softmax.norm", "Gradient.apply", "torch.softmax", "torch.softmax"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "norm", "(", "x", ")", "\n", "x", "=", "Gradient", ".", "apply", "(", "x", ")", "\n", "x", "=", "F", ".", "softmax", "(", "x", ",", "dim", "=", "self", ".", "axis", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D.__init__": [[145, 194], ["pytorch_lightning.LightningModule.__init__", "lit_corrnet3d_clean.LitCorrNet3D.save_hyperparameters", "lit_corrnet3d_clean.Encoder", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Conv1d", "torch.nn.Conv1d", "torch.nn.ReLU", "torch.nn.ReLU", "lit_corrnet3d_clean.norm", "torch.nn.Conv1d", "torch.nn.Conv1d", "lit_corrnet3d_clean.Modified_softmax", "torch.nn.Conv1d", "torch.nn.Conv1d", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.Conv1d", "torch.nn.Conv1d", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.Conv1d", "torch.nn.Conv1d", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.Conv1d", "torch.nn.Conv1d", "torch.nn.Tanh", "torch.nn.Tanh"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.HumanDataModule.__init__"], ["def", "__init__", "(", "\n", "self", ",", "\n", "input_pts", ":", "int", ",", "\n", "k_nn", ":", "int", ",", "\n", "# enc_type: str = 'resnet18',", "\n", "# first_conv: bool = False,", "\n", "# maxpool1: bool = False,", "\n", "enc_emb_dim", ":", "int", "=", "128", ",", "\n", "enc_glb_dim", ":", "int", "=", "1024", ",", "\n", "ls_coeff", ":", "list", "=", "[", "10.0", ",", "1.0", ",", "0.1", "]", ",", "\n", "dec_in_dim", ":", "int", "=", "1024", "+", "3", ",", "\n", "lr", ":", "float", "=", "1e-4", ",", "\n", "**", "kwargs", "\n", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "save_hyperparameters", "(", ")", "\n", "self", ".", "lr", "=", "lr", "\n", "self", ".", "input_pts", "=", "input_pts", "\n", "self", ".", "enc_emb_dim", "=", "enc_emb_dim", "\n", "self", ".", "enc_glb_dim", "=", "enc_glb_dim", "\n", "self", ".", "dec_in_dim", "=", "enc_glb_dim", "+", "3", "\n", "self", ".", "rec_coeff", "=", "ls_coeff", "[", "0", "]", "\n", "self", ".", "rank_coeff", "=", "ls_coeff", "[", "1", "]", "\n", "self", ".", "mfd_coeff", "=", "ls_coeff", "[", "2", "]", "\n", "self", ".", "k_nn", "=", "k_nn", "\n", "\n", "self", ".", "encoder", "=", "Encoder", "(", "self", ".", "enc_emb_dim", ",", "self", ".", "enc_glb_dim", ",", "self", ".", "k_nn", ")", "\n", "self", ".", "DeSmooth", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv1d", "(", "in_channels", "=", "self", ".", "input_pts", ",", "out_channels", "=", "self", ".", "input_pts", "+", "128", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ",", "\n", "norm", "(", "axis", "=", "1", ")", ",", "\n", "nn", ".", "Conv1d", "(", "in_channels", "=", "self", ".", "input_pts", "+", "128", ",", "out_channels", "=", "self", ".", "input_pts", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "bias", "=", "False", ")", ",", "\n", "Modified_softmax", "(", "axis", "=", "2", ")", "\n", ")", "\n", "self", ".", "decoder", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv1d", "(", "in_channels", "=", "self", ".", "dec_in_dim", ",", "out_channels", "=", "self", ".", "dec_in_dim", ",", "kernel_size", "=", "1", ")", ",", "\n", "nn", ".", "BatchNorm1d", "(", "self", ".", "dec_in_dim", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ",", "\n", "nn", ".", "Conv1d", "(", "in_channels", "=", "self", ".", "dec_in_dim", ",", "out_channels", "=", "self", ".", "dec_in_dim", "//", "2", ",", "kernel_size", "=", "1", ")", ",", "\n", "nn", ".", "BatchNorm1d", "(", "self", ".", "dec_in_dim", "//", "2", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ",", "\n", "nn", ".", "Conv1d", "(", "in_channels", "=", "self", ".", "dec_in_dim", "//", "2", ",", "out_channels", "=", "self", ".", "dec_in_dim", "//", "4", ",", "kernel_size", "=", "1", ")", ",", "\n", "nn", ".", "BatchNorm1d", "(", "self", ".", "dec_in_dim", "//", "4", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ",", "\n", "nn", ".", "Conv1d", "(", "in_channels", "=", "self", ".", "dec_in_dim", "//", "4", ",", "out_channels", "=", "3", ",", "kernel_size", "=", "1", ")", ",", "\n", "nn", ".", "Tanh", "(", ")", ",", "\n", ")", "\n", "self", ".", "train_loss_last_step", "=", "[", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._corr_to_list": [[195, 201], ["torch.nonzero", "torch.nonzero", "torch.nonzero", "torch.nonzero", "torch.nonzero.tolist", "torch.nonzero.tolist", "corr_matrix.clone().detach", "single_corr_list.append", "tuple", "corr_matrix.clone"], "methods", ["None"], ["", "def", "_corr_to_list", "(", "self", ",", "corr_matrix", ")", ":", "\n", "        ", "single_corr_list", "=", "[", "]", "\n", "pair", "=", "torch", ".", "nonzero", "(", "corr_matrix", ".", "clone", "(", ")", ".", "detach", "(", ")", ")", "#N1xN2", "\n", "for", "each", "in", "pair", ".", "tolist", "(", ")", ":", "\n", "            ", "single_corr_list", ".", "append", "(", "tuple", "(", "each", ")", ")", "\n", "", "return", "single_corr_list", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._label_ACC_percentage_for_inference": [[202, 217], ["range", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mul", "torch.mul", "torch.mul", "torch.mul", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "b_acc.append", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "hit.float", "torch.tensor().float", "torch.tensor().float", "torch.tensor().float", "torch.tensor().float", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor"], "methods", ["None"], ["", "def", "_label_ACC_percentage_for_inference", "(", "self", ",", "label_in", ",", "label_gt", ")", ":", "\n", "        ", "assert", "(", "label_in", ".", "shape", "==", "label_gt", ".", "shape", ")", "\n", "bsize", "=", "label_in", ".", "shape", "[", "0", "]", "\n", "b_acc", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "bsize", ")", ":", "\n", "\n", "            ", "element_product", "=", "torch", ".", "mul", "(", "label_in", "[", "i", "]", ",", "label_gt", "[", "i", "]", ")", "\n", "N1", "=", "label_in", "[", "i", "]", ".", "shape", "[", "0", "]", "\n", "sum_row", "=", "torch", ".", "sum", "(", "element_product", ",", "dim", "=", "-", "1", ")", "#N1x1", "\n", "\n", "hit", "=", "(", "sum_row", "!=", "0", ")", ".", "sum", "(", ")", "\n", "acc", "=", "hit", ".", "float", "(", ")", "/", "torch", ".", "tensor", "(", "N1", ")", ".", "float", "(", ")", "\n", "b_acc", ".", "append", "(", "acc", "*", "100.0", ")", "\n", "", "mean", "=", "torch", ".", "mean", "(", "torch", ".", "stack", "(", "b_acc", ")", ")", "\n", "return", "mean", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._prob_to_corr_test": [[218, 226], ["torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.argmax", "torch.argmax", "torch.argmax", "torch.argmax", "range", "range"], "methods", ["None"], ["", "def", "_prob_to_corr_test", "(", "self", ",", "prob_matrix", ")", ":", "\n", "        ", "c", "=", "torch", ".", "zeros_like", "(", "input", "=", "prob_matrix", ")", "\n", "idx", "=", "torch", ".", "argmax", "(", "input", "=", "prob_matrix", ",", "dim", "=", "2", ",", "keepdim", "=", "True", ")", "\n", "for", "bsize", "in", "range", "(", "c", ".", "shape", "[", "0", "]", ")", ":", "\n", "            ", "for", "each_row", "in", "range", "(", "c", ".", "shape", "[", "1", "]", ")", ":", "\n", "                ", "c", "[", "bsize", "]", "[", "each_row", "]", "[", "idx", "[", "bsize", "]", "[", "each_row", "]", "]", "=", "1.0", "\n", "\n", "", "", "return", "c", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._KFNN": [[229, 248], ["lit_corrnet3d_clean.LitCorrNet3D._KFNN.batched_pairwise_dist"], "methods", ["None"], ["", "def", "_KFNN", "(", "self", ",", "x", ",", "y", ",", "k", "=", "10", ")", ":", "\n", "        ", "def", "batched_pairwise_dist", "(", "a", ",", "b", ")", ":", "\n", "            ", "x", ",", "y", "=", "a", ".", "float", "(", ")", ",", "b", ".", "float", "(", ")", "\n", "bs", ",", "num_points_x", ",", "points_dim", "=", "x", ".", "size", "(", ")", "\n", "bs", ",", "num_points_y", ",", "points_dim", "=", "y", ".", "size", "(", ")", "\n", "assert", "(", "num_points_x", "==", "1024", "or", "num_points_x", "==", "256", ")", "\n", "\n", "xx", "=", "torch", ".", "pow", "(", "x", ",", "2", ")", ".", "sum", "(", "2", ")", "\n", "yy", "=", "torch", ".", "pow", "(", "y", ",", "2", ")", ".", "sum", "(", "2", ")", "\n", "zz", "=", "torch", ".", "bmm", "(", "x", ",", "y", ".", "transpose", "(", "2", ",", "1", ")", ")", "\n", "rx", "=", "xx", ".", "unsqueeze", "(", "1", ")", ".", "expand", "(", "bs", ",", "num_points_y", ",", "num_points_x", ")", "\n", "ry", "=", "yy", ".", "unsqueeze", "(", "1", ")", ".", "expand", "(", "bs", ",", "num_points_x", ",", "num_points_y", ")", "\n", "P", "=", "rx", ".", "transpose", "(", "2", ",", "1", ")", "+", "ry", "-", "2", "*", "zz", "\n", "return", "P", "\n", "\n", "", "pairwise_distance", "=", "batched_pairwise_dist", "(", "x", ".", "permute", "(", "0", ",", "2", ",", "1", ")", ",", "y", ".", "permute", "(", "0", ",", "2", ",", "1", ")", ")", "\n", "similarity", "=", "-", "pairwise_distance", "\n", "idx", "=", "similarity", ".", "topk", "(", "k", "=", "k", ",", "dim", "=", "-", "1", ")", "[", "1", "]", "\n", "return", "pairwise_distance", ",", "idx", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D.pretrained_weights_available": [[249, 252], ["list", "LitCorrNet3D.pretrained_urls.keys"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "pretrained_weights_available", "(", ")", ":", "\n", "        ", "return", "list", "(", "LitCorrNet3D", ".", "pretrained_urls", ".", "keys", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D.from_pretrained": [[253, 257], ["lit_corrnet3d_clean.LitCorrNet3D.load_from_checkpoint", "KeyError", "str"], "methods", ["None"], ["", "def", "from_pretrained", "(", "self", ",", "checkpoint_name", ")", ":", "\n", "        ", "if", "checkpoint_name", "not", "in", "LitCorrNet3D", ".", "pretrained_urls", ":", "\n", "            ", "raise", "KeyError", "(", "str", "(", "checkpoint_name", ")", "+", "' not present in pretrained weights.'", ")", "\n", "", "return", "self", ".", "load_from_checkpoint", "(", "LitCorrNet3D", ".", "pretrained_urls", "[", "checkpoint_name", "]", ",", "strict", "=", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D.forward": [[258, 265], ["lit_corrnet3d_clean.LitCorrNet3D.encoder", "lit_corrnet3d_clean.LitCorrNet3D.encoder", "lit_corrnet3d_clean.LitCorrNet3D._KFNN", "lit_corrnet3d_clean.LitCorrNet3D.DeSmooth().transpose().contiguous", "xyz1.transpose", "xyz2.transpose", "lit_corrnet3d_clean.LitCorrNet3D.DeSmooth().transpose", "lit_corrnet3d_clean.LitCorrNet3D.DeSmooth", "similarity.transpose().contiguous", "similarity.transpose"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._KFNN"], ["", "def", "forward", "(", "self", ",", "xyz1", ",", "xyz2", ")", ":", "\n", "        ", "HIER_feat1", ",", "pooling_feat1", "=", "self", ".", "encoder", "(", "transpose_xyz", "=", "xyz1", ".", "transpose", "(", "1", ",", "2", ")", ")", "\n", "HIER_feat2", ",", "pooling_feat2", "=", "self", ".", "encoder", "(", "transpose_xyz", "=", "xyz2", ".", "transpose", "(", "1", ",", "2", ")", ")", "\n", "pairwise_distance", ",", "_", "=", "self", ".", "_KFNN", "(", "HIER_feat1", ",", "HIER_feat2", ")", "\n", "similarity", "=", "1", "/", "(", "pairwise_distance", "+", "1e-6", ")", "\n", "p", "=", "self", ".", "DeSmooth", "(", "similarity", ".", "transpose", "(", "1", ",", "2", ")", ".", "contiguous", "(", ")", ")", ".", "transpose", "(", "1", ",", "2", ")", ".", "contiguous", "(", ")", "\n", "return", "p", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._run_step": [[266, 283], ["lit_corrnet3d_clean.LitCorrNet3D.encoder", "lit_corrnet3d_clean.LitCorrNet3D.encoder", "lit_corrnet3d_clean.LitCorrNet3D._KFNN", "lit_corrnet3d_clean.LitCorrNet3D.DeSmooth().transpose().contiguous", "torch.bmm", "torch.bmm", "torch.bmm", "torch.bmm", "pooling_feat1.expand", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.bmm", "torch.bmm", "torch.bmm", "torch.bmm", "pooling_feat2.expand", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "xyz2.transpose", "lit_corrnet3d_clean.LitCorrNet3D.transpose().contiguous", "pooling_feat1.size", "pooling_feat1.size", "torch.bmm.size", "torch.bmm.size", "lit_corrnet3d_clean.LitCorrNet3D.decoder", "xyz1.transpose", "pooling_feat2.size", "pooling_feat2.size", "torch.bmm.size", "torch.bmm.size", "lit_corrnet3d_clean.LitCorrNet3D.decoder", "xyz1.transpose", "xyz2.transpose", "lit_corrnet3d_clean.LitCorrNet3D.DeSmooth().transpose", "lit_corrnet3d_clean.LitCorrNet3D.transpose", "lit_corrnet3d_clean.LitCorrNet3D.DeSmooth", "similarity.transpose().contiguous", "similarity.transpose"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._KFNN"], ["", "def", "_run_step", "(", "self", ",", "xyz1", ",", "xyz2", ")", ":", "\n", "        ", "HIER_feat1", ",", "pooling_feat1", "=", "self", ".", "encoder", "(", "transpose_xyz", "=", "xyz1", ".", "transpose", "(", "1", ",", "2", ")", ")", "\n", "HIER_feat2", ",", "pooling_feat2", "=", "self", ".", "encoder", "(", "transpose_xyz", "=", "xyz2", ".", "transpose", "(", "1", ",", "2", ")", ")", "\n", "pairwise_distance", ",", "_", "=", "self", ".", "_KFNN", "(", "HIER_feat1", ",", "HIER_feat2", ")", "\n", "similarity", "=", "1", "/", "(", "pairwise_distance", "+", "1e-6", ")", "\n", "p", "=", "self", ".", "DeSmooth", "(", "similarity", ".", "transpose", "(", "1", ",", "2", ")", ".", "contiguous", "(", ")", ")", ".", "transpose", "(", "1", ",", "2", ")", ".", "contiguous", "(", ")", "\n", "rand_grid_a", "=", "torch", ".", "bmm", "(", "xyz2", ".", "transpose", "(", "1", ",", "2", ")", ",", "p", ".", "transpose", "(", "2", ",", "1", ")", ".", "contiguous", "(", ")", ")", "\n", "ya", "=", "pooling_feat1", ".", "expand", "(", "pooling_feat1", ".", "size", "(", "0", ")", ",", "pooling_feat1", ".", "size", "(", "1", ")", ",", "rand_grid_a", ".", "size", "(", "2", ")", ")", "\n", "ya", "=", "torch", ".", "cat", "(", "(", "rand_grid_a", ",", "ya", ")", ",", "1", ")", "\n", "out_a", "=", "2", "*", "self", ".", "decoder", "(", "ya", ")", "\n", "\n", "rand_grid_b", "=", "torch", ".", "bmm", "(", "xyz1", ".", "transpose", "(", "1", ",", "2", ")", ",", "p", ")", "\n", "yb", "=", "pooling_feat2", ".", "expand", "(", "pooling_feat2", ".", "size", "(", "0", ")", ",", "pooling_feat2", ".", "size", "(", "1", ")", ",", "rand_grid_b", ".", "size", "(", "2", ")", ")", "\n", "yb", "=", "torch", ".", "cat", "(", "(", "rand_grid_b", ",", "yb", ")", ",", "1", ")", "\n", "out_b", "=", "2", "*", "self", ".", "decoder", "(", "yb", ")", "\n", "\n", "return", "p", ",", "out_a", ",", "out_b", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._batch_frobenius_norm": [[284, 287], ["torch.norm", "torch.norm", "torch.norm", "torch.norm"], "methods", ["None"], ["", "def", "_batch_frobenius_norm", "(", "self", ",", "matrix1", ",", "matrix2", ")", ":", "\n", "        ", "loss_F", "=", "torch", ".", "norm", "(", "(", "matrix1", "-", "matrix2", ")", ",", "dim", "=", "(", "1", ",", "2", ")", ")", "\n", "return", "loss_F", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._knn_point": [[288, 292], ["knn_cuda.KNN", "knn_cuda.KNN."], "methods", ["None"], ["", "def", "_knn_point", "(", "self", ",", "nsample", ",", "ref", ",", "query", ")", ":", "\n", "        ", "knn", "=", "KNN", "(", "k", "=", "nsample", ",", "transpose_mode", "=", "True", ")", "\n", "dist", ",", "indx", "=", "knn", "(", "ref", ",", "query", ")", "\n", "return", "dist", ",", "indx", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._get_manifold_loss": [[293, 319], ["lit_corrnet3d_clean.LitCorrNet3D._knn_point", "grouping_operation().permute", "grouping_operation().permute", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.mul", "torch.mul", "torch.mul", "torch.mul", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "grouping_operation", "grouping_operation", "torch.mul", "torch.mul", "torch.mul", "torch.mul", "xyz1.transpose().contiguous", "idx.int", "pred_flow.transpose().contiguous", "idx.int", "xyz1.transpose", "pred_flow.transpose"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._knn_point"], ["", "def", "_get_manifold_loss", "(", "self", ",", "pred_flow", ",", "xyz1", ",", "K_FOR_KNN", ")", ":", "\n", "        ", "batch_size", "=", "xyz1", ".", "shape", "[", "0", "]", "\n", "N", "=", "xyz1", ".", "shape", "[", "1", "]", "\n", "if", "K_FOR_KNN", "==", "None", ":", "\n", "            ", "K_FOR_KNN", "=", "5", "\n", "", "else", ":", "\n", "            ", "K_FOR_KNN", "=", "K_FOR_KNN", "\n", "", "my_k", "=", "K_FOR_KNN", "\n", "val", ",", "idx", "=", "self", ".", "_knn_point", "(", "nsample", "=", "my_k", ",", "ref", "=", "xyz1", ",", "query", "=", "xyz1", ")", "\n", "grouped_xyz1", "=", "grouping_operation", "(", "xyz1", ".", "transpose", "(", "1", ",", "2", ")", ".", "contiguous", "(", ")", ",", "idx", ".", "int", "(", ")", ")", ".", "permute", "(", "0", ",", "2", ",", "3", ",", "1", ")", "\n", "grouped_flow", "=", "grouping_operation", "(", "pred_flow", ".", "transpose", "(", "1", ",", "2", ")", ".", "contiguous", "(", ")", ",", "idx", ".", "int", "(", ")", ")", ".", "permute", "(", "0", ",", "2", ",", "3", ",", "1", ")", "\n", "grouped_xyz1diff", "=", "grouped_xyz1", "-", "torch", ".", "unsqueeze", "(", "xyz1", ",", "2", ")", "\n", "grouped_flowdiff", "=", "grouped_flow", "-", "torch", ".", "unsqueeze", "(", "pred_flow", ",", "2", ")", "\n", "dist_square", "=", "torch", ".", "sum", "(", "input", "=", "grouped_xyz1diff", "**", "2", ",", "dim", "=", "-", "1", ")", "\n", "GAUSSIAN_HEAT_KERNEL_T", "=", "8.0", "\n", "gaussian_heat_kernel", "=", "torch", ".", "exp", "(", "-", "dist_square", "/", "GAUSSIAN_HEAT_KERNEL_T", ")", "\n", "flow_square", "=", "torch", ".", "sum", "(", "input", "=", "grouped_flowdiff", "**", "2", ",", "dim", "=", "-", "1", ")", "\n", "USE_GUASSIAN_MANIFOLD", "=", "True", "\n", "if", "USE_GUASSIAN_MANIFOLD", "==", "False", ":", "\n", "            ", "manifold_loss", "=", "torch", ".", "mul", "(", "1.0", "/", "(", "dist_square", "+", "1e-10", ")", ",", "flow_square", ")", "\n", "", "elif", "USE_GUASSIAN_MANIFOLD", "==", "True", ":", "\n", "            ", "manifold_loss", "=", "torch", ".", "mul", "(", "gaussian_heat_kernel", ",", "flow_square", ")", "\n", "", "manifold_loss", "=", "torch", ".", "sum", "(", "input", "=", "manifold_loss", ",", "dim", "=", "-", "1", ")", "/", "my_k", "\n", "manifold_loss", "=", "torch", ".", "sum", "(", "input", "=", "manifold_loss", ",", "dim", "=", "-", "1", ")", "/", "N", "\n", "manifold_loss", "=", "torch", ".", "sum", "(", "input", "=", "manifold_loss", ",", "dim", "=", "-", "1", ")", "/", "batch_size", "\n", "return", "manifold_loss", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._run_loss": [[320, 340], ["torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.eye", "torch.eye", "torch.eye", "torch.eye", "I_N1.unsqueeze().repeat.unsqueeze().repeat.unsqueeze().repeat", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.bmm", "torch.bmm", "torch.bmm", "torch.bmm", "lit_corrnet3d_clean.LitCorrNet3D._get_manifold_loss", "torch.bmm", "torch.bmm", "torch.bmm", "torch.bmm", "lit_corrnet3d_clean.LitCorrNet3D._get_manifold_loss", "lit_corrnet3d_clean.LitCorrNet3D._batch_frobenius_norm", "lit_corrnet3d_clean.LitCorrNet3D._batch_frobenius_norm", "lit_corrnet3d_clean.LitCorrNet3D._batch_frobenius_norm", "xyz2.transpose().contiguous", "xyz1.transpose().contiguous", "p.transpose().contiguous", "xyz1.transpose().contiguous", "xyz2.transpose().contiguous", "I_N1.unsqueeze().repeat.unsqueeze().repeat.unsqueeze", "torch.bmm", "torch.bmm", "torch.bmm", "torch.bmm", "I_N1.unsqueeze().repeat.unsqueeze().repeat.float", "p.transpose().contiguous", "xyz2.transpose", "xyz1.transpose", "p.transpose", "xyz1.transpose", "xyz2.transpose", "p.transpose"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._get_manifold_loss", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._get_manifold_loss", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._batch_frobenius_norm", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._batch_frobenius_norm", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._batch_frobenius_norm"], ["", "def", "_run_loss", "(", "self", ",", "txyz1", ",", "txyz2", ",", "p", ",", "out_a", ",", "out_b", ")", ":", "\n", "        ", "xyz1", "=", "txyz1", "\n", "xyz2", "=", "txyz2", "\n", "bmean_loss_F1", "=", "torch", ".", "mean", "(", "self", ".", "_batch_frobenius_norm", "(", "xyz1", ",", "out_a", ")", ")", "\n", "bmean_loss_F2", "=", "torch", ".", "mean", "(", "self", ".", "_batch_frobenius_norm", "(", "xyz2", ",", "out_b", ")", ")", "\n", "I_N1", "=", "torch", ".", "eye", "(", "n", "=", "xyz1", ".", "shape", "[", "2", "]", ",", "device", "=", "self", ".", "device", ")", "\n", "bsize", "=", "xyz1", ".", "shape", "[", "0", "]", "\n", "I_N1", "=", "I_N1", ".", "unsqueeze", "(", "0", ")", ".", "repeat", "(", "bsize", ",", "1", ",", "1", ")", "\n", "bmean_P_rankLoss", "=", "torch", ".", "mean", "(", "self", ".", "_batch_frobenius_norm", "(", "torch", ".", "bmm", "(", "p", ",", "p", ".", "transpose", "(", "2", ",", "1", ")", ".", "contiguous", "(", ")", ")", ",", "I_N1", ".", "float", "(", ")", ")", ")", "\n", "pred_corr", "=", "torch", ".", "bmm", "(", "p", ",", "xyz2", ".", "transpose", "(", "2", ",", "1", ")", ".", "contiguous", "(", ")", ")", "\n", "\n", "manifold_loss", "=", "self", ".", "_get_manifold_loss", "(", "pred_corr", ",", "xyz1", ".", "transpose", "(", "2", ",", "1", ")", ".", "contiguous", "(", ")", ",", "K_FOR_KNN", "=", "10", ")", "\n", "pred_corr2", "=", "torch", ".", "bmm", "(", "p", ".", "transpose", "(", "2", ",", "1", ")", ".", "contiguous", "(", ")", ",", "xyz1", ".", "transpose", "(", "2", ",", "1", ")", ".", "contiguous", "(", ")", ")", "\n", "manifold_loss_2", "=", "self", ".", "_get_manifold_loss", "(", "pred_corr2", ",", "xyz2", ".", "transpose", "(", "2", ",", "1", ")", ".", "contiguous", "(", ")", ",", "K_FOR_KNN", "=", "10", ")", "\n", "\n", "rec_term", "=", "(", "bmean_loss_F1", "+", "bmean_loss_F2", ")", "\n", "rank_term", "=", "bmean_P_rankLoss", "\n", "mfd_term", "=", "(", "manifold_loss", "+", "manifold_loss_2", ")", "\n", "\n", "return", "rec_term", ",", "rank_term", ",", "mfd_term", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D.step": [[341, 355], ["lit_corrnet3d_clean.LitCorrNet3D._run_step", "lit_corrnet3d_clean.LitCorrNet3D._run_loss", "lit_corrnet3d_clean.LitCorrNet3D.train_loss_last_step.append", "pinput1.transpose", "input2.transpose", "loss.item", "str", "str", "str"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._run_step", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._run_loss"], ["", "def", "step", "(", "self", ",", "batch", ",", "batch_idx", ")", ":", "\n", "        ", "label", ",", "pinput1", ",", "input2", ",", "index_", "=", "batch", "\n", "\n", "p", ",", "out_a", ",", "out_b", "=", "self", ".", "_run_step", "(", "pinput1", ",", "input2", ")", "\n", "rec_term", ",", "rank_term", ",", "mfd_term", "=", "self", ".", "_run_loss", "(", "pinput1", ".", "transpose", "(", "2", ",", "1", ")", ",", "input2", ".", "transpose", "(", "2", ",", "1", ")", ",", "p", ",", "out_a", ",", "out_b", ")", "\n", "\n", "loss", "=", "self", ".", "rec_coeff", "*", "rec_term", "+", "self", ".", "rank_coeff", "*", "rank_term", "+", "self", ".", "mfd_coeff", "*", "mfd_term", "\n", "logs", "=", "{", "\n", "\"rec_loss(x{})\"", ".", "format", "(", "str", "(", "self", ".", "rec_coeff", ")", ")", ":", "rec_term", ",", "\n", "\"rank_loss(x{})\"", ".", "format", "(", "str", "(", "self", ".", "rank_coeff", ")", ")", ":", "rank_term", ",", "\n", "\"mfd_loss(x{})\"", ".", "format", "(", "str", "(", "self", ".", "mfd_coeff", ")", ")", ":", "mfd_term", "\n", "}", "\n", "self", ".", "train_loss_last_step", ".", "append", "(", "loss", ".", "item", "(", ")", ")", "#if use loss, then gpu leak in the 1st epoch for pytorch-lightning ", "\n", "return", "loss", ",", "logs", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D.training_step": [[356, 361], ["lit_corrnet3d_clean.LitCorrNet3D.step", "lit_corrnet3d_clean.LitCorrNet3D.log_dict", "lit_corrnet3d_clean.LitCorrNet3D.log", "loss.item", "logs.items"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D.step"], ["", "def", "training_step", "(", "self", ",", "batch", ",", "batch_idx", ")", ":", "\n", "        ", "loss", ",", "logs", "=", "self", ".", "step", "(", "batch", ",", "batch_idx", ")", "\n", "self", ".", "log_dict", "(", "{", "f\"train_{k}\"", ":", "v", "for", "k", ",", "v", "in", "logs", ".", "items", "(", ")", "}", ",", "on_step", "=", "False", ",", "on_epoch", "=", "True", ")", "\n", "self", ".", "log", "(", "name", "=", "'train_loss'", ",", "value", "=", "loss", ".", "item", "(", ")", ",", "on_step", "=", "False", ",", "on_epoch", "=", "True", ")", "\n", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D.validation_step": [[362, 368], ["lit_corrnet3d_clean.LitCorrNet3D.step", "lit_corrnet3d_clean.LitCorrNet3D.log_dict", "lit_corrnet3d_clean.LitCorrNet3D.log", "loss.item", "logs.items"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D.step"], ["", "def", "validation_step", "(", "self", ",", "val_batch", ",", "batch_idx", ")", ":", "\n", "\n", "        ", "loss", ",", "logs", "=", "self", ".", "step", "(", "val_batch", ",", "batch_idx", ")", "\n", "self", ".", "log_dict", "(", "{", "f\"val_{k}\"", ":", "v", "for", "k", ",", "v", "in", "logs", ".", "items", "(", ")", "}", ")", "\n", "self", ".", "log", "(", "name", "=", "'val_loss'", ",", "value", "=", "loss", ".", "item", "(", ")", ",", "on_step", "=", "True", ",", "on_epoch", "=", "True", ")", "\n", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D.test_step": [[370, 397], ["lit_corrnet3d_clean.LitCorrNet3D._run_step", "numpy.savetxt", "numpy.savetxt", "numpy.savetxt", "numpy.savetxt", "lit_corrnet3d_clean.LitCorrNet3D._prob_to_corr_test", "lit_corrnet3d_clean.LitCorrNet3D._label_ACC_percentage_for_inference", "range", "lit_corrnet3d_clean.LitCorrNet3D.log_dict", "s_label.append", "os.path.join", "pinput1[].cpu", "os.path.join", "input2[].cpu", "os.path.join", "out_a[].transpose().cpu", "os.path.join", "out_b[].transpose().cpu", "len", "lit_corrnet3d_clean.LitCorrNet3D._label_ACC_percentage_for_inference", "str().replace", "out_a[].transpose", "out_b[].transpose", "logs.items", "str", "str"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._run_step", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._prob_to_corr_test", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._label_ACC_percentage_for_inference", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D._label_ACC_percentage_for_inference"], ["", "def", "test_step", "(", "self", ",", "test_batch", ",", "batch_idx", ")", ":", "\n", "        ", "data_dict", "=", "test_batch", "\n", "label", "=", "data_dict", "[", "'label_flat'", "]", "\n", "pinput1", "=", "data_dict", "[", "'src_flat'", "]", "\n", "input2", "=", "data_dict", "[", "'tgt_flat'", "]", "\n", "s_label", "=", "[", "]", "\n", "ratio_list", "=", "[", "0.02", ",", "0.04", ",", "0.06", ",", "0.08", ",", "0.10", ",", "0.12", ",", "0.14", ",", "0.16", ",", "0.18", ",", "0.20", "]", "\n", "for", "each_ratio", "in", "ratio_list", ":", "\n", "            ", "key_name", "=", "'sl_'", "+", "str", "(", "each_ratio", ")", ".", "replace", "(", "'.'", ",", "''", ")", "\n", "s_label", ".", "append", "(", "data_dict", "[", "key_name", "]", ")", "\n", "", "p", ",", "out_a", ",", "out_b", "=", "self", ".", "_run_step", "(", "pinput1", ",", "input2", ")", "\n", "\n", "np", ".", "savetxt", "(", "os", ".", "path", ".", "join", "(", "self", ".", "logger", ".", "log_dir", ",", "'pinput1.xyz'", ")", ",", "pinput1", "[", "0", "]", ".", "cpu", "(", ")", ")", "\n", "np", ".", "savetxt", "(", "os", ".", "path", ".", "join", "(", "self", ".", "logger", ".", "log_dir", ",", "'input2.xyz'", ")", ",", "input2", "[", "0", "]", ".", "cpu", "(", ")", ")", "\n", "np", ".", "savetxt", "(", "os", ".", "path", ".", "join", "(", "self", ".", "logger", ".", "log_dir", ",", "'out_a.xyz'", ")", ",", "out_a", "[", "0", "]", ".", "transpose", "(", "1", ",", "0", ")", ".", "cpu", "(", ")", ")", "\n", "np", ".", "savetxt", "(", "os", ".", "path", ".", "join", "(", "self", ".", "logger", ".", "log_dir", ",", "'out_b.xyz'", ")", ",", "out_b", "[", "0", "]", ".", "transpose", "(", "1", ",", "0", ")", ".", "cpu", "(", ")", ")", "\n", "\n", "corr_tensor", "=", "self", ".", "_prob_to_corr_test", "(", "p", ")", "\n", "\n", "acc_000", "=", "self", ".", "_label_ACC_percentage_for_inference", "(", "corr_tensor", ",", "label", ")", "\n", "logs", "=", "{", "\n", "\"acc_0.00\"", ":", "acc_000", "\n", "}", "\n", "for", "k_", "in", "range", "(", "len", "(", "ratio_list", ")", ")", ":", "\n", "            ", "logs", "[", "\"acc_\"", "+", "str", "(", "ratio_list", "[", "k_", "]", ")", "]", "=", "self", ".", "_label_ACC_percentage_for_inference", "(", "corr_tensor", ",", "s_label", "[", "k_", "]", ")", "\n", "", "self", ".", "log_dict", "(", "{", "f\"test_{k}\"", ":", "v", "for", "k", ",", "v", "in", "logs", ".", "items", "(", ")", "}", ",", "on_step", "=", "False", ",", "on_epoch", "=", "True", ")", "\n", "return", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D.configure_optimizers": [[398, 400], ["torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "lit_corrnet3d_clean.LitCorrNet3D.parameters"], "methods", ["None"], ["", "def", "configure_optimizers", "(", "self", ")", ":", "\n", "        ", "return", "torch", ".", "optim", ".", "Adam", "(", "self", ".", "parameters", "(", ")", ",", "lr", "=", "self", ".", "lr", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D.add_model_specific_args": [[401, 424], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "add_model_specific_args", "(", "parent_parser", ")", ":", "\n", "        ", "parser", "=", "ArgumentParser", "(", "parents", "=", "[", "parent_parser", "]", ",", "add_help", "=", "False", ")", "\n", "parser", ".", "add_argument", "(", "\"--lr\"", ",", "type", "=", "float", ",", "default", "=", "1e-4", ")", "\n", "parser", ".", "add_argument", "(", "\n", "\"--enc_emb_dim\"", ",", "\n", "type", "=", "int", ",", "\n", "default", "=", "128", ",", "\n", "help", "=", "\"\"", "\n", ")", "\n", "parser", ".", "add_argument", "(", "\n", "\"--enc_glb_dim\"", ",", "\n", "type", "=", "int", ",", "\n", "default", "=", "1024", ",", "\n", "help", "=", "\"\"", "\n", ")", "\n", "parser", ".", "add_argument", "(", "'--ls_coeff'", ",", "type", "=", "float", ",", "nargs", "=", "'+'", ",", "default", "=", "[", "10.0", ",", "1.0", ",", "0.1", "]", ")", "\n", "parser", ".", "add_argument", "(", "'--k_nn'", ",", "type", "=", "int", ",", "default", "=", "20", ")", "\n", "parser", ".", "add_argument", "(", "\"--dec_in_dim\"", ",", "type", "=", "int", ",", "default", "=", "1024", "+", "3", ")", "\n", "parser", ".", "add_argument", "(", "\"--num_workers\"", ",", "type", "=", "int", ",", "default", "=", "8", ")", "\n", "parser", ".", "add_argument", "(", "\"--data_dir\"", ",", "type", "=", "str", ",", "default", "=", "None", ")", "\n", "parser", ".", "add_argument", "(", "\"--test_data_dir\"", ",", "type", "=", "str", ",", "default", "=", "None", ")", "\n", "return", "parser", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.cli_main": [[425, 446], ["pytorch_lightning.seed_everything", "argparse.ArgumentParser", "pl.Trainer.add_argparse_args.add_argument", "pl.Trainer.add_argparse_args.add_argument", "pl.Trainer.add_argparse_args.parse_known_args", "lit_corrnet3d_clean.LitCorrNet3D.add_model_specific_args", "pytorch_lightning.Trainer.add_argparse_args", "pl.Trainer.add_argparse_args.parse_args", "dm_human.from_argparse_args", "lit_corrnet3d_clean.LitCorrNet3D", "pytorch_lightning.Trainer.from_argparse_args", "pl.Trainer.from_argparse_args.fit", "pl.Trainer.from_argparse_args.test", "vars", "str"], "function", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D.add_model_specific_args"], ["", "", "def", "cli_main", "(", "args", "=", "None", ")", ":", "\n", "    ", "from", "lit_dataset_clean", "import", "HumanDataModule", "\n", "from", "pytorch_lightning", ".", "callbacks", "import", "ModelCheckpoint", "\n", "pl", ".", "seed_everything", "(", ")", "\n", "parser", "=", "ArgumentParser", "(", ")", "\n", "parser", ".", "add_argument", "(", "\"--dataset\"", ",", "default", "=", "\"human\"", ",", "type", "=", "str", ",", "choices", "=", "[", "\"human\"", ",", "\"stl10\"", ",", "\"imagenet\"", "]", ")", "\n", "parser", ".", "add_argument", "(", "\"--batch_size\"", ",", "type", "=", "int", ",", "default", "=", "20", ")", "\n", "script_args", ",", "_", "=", "parser", ".", "parse_known_args", "(", "args", ")", "\n", "if", "script_args", ".", "dataset", "==", "\"human\"", ":", "\n", "        ", "dm_human", "=", "HumanDataModule", "\n", "", "parser", "=", "LitCorrNet3D", ".", "add_model_specific_args", "(", "parser", ")", "\n", "parser", "=", "pl", ".", "Trainer", ".", "add_argparse_args", "(", "parser", ")", "\n", "args", "=", "parser", ".", "parse_args", "(", "args", ")", "\n", "dm", "=", "dm_human", ".", "from_argparse_args", "(", "args", ")", "\n", "args", ".", "input_pts", "=", "1024", "\n", "model", "=", "LitCorrNet3D", "(", "**", "vars", "(", "args", ")", ")", "\n", "trainer", "=", "pl", ".", "Trainer", ".", "from_argparse_args", "(", "args", ",", "gpus", "=", "str", "(", "args", ".", "gpus", ")", ",", "benchmark", "=", "True", ",", "deterministic", "=", "True", ")", "#gpu", "\n", "model", ".", "hparams", ".", "lr", "=", "0.02089296130854041", "\n", "trainer", ".", "fit", "(", "model", ",", "dm", ")", "\n", "trainer", ".", "test", "(", "model", ")", "\n", "return", "dm", ",", "model", ",", "trainer", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.cli_main_test_": [[447, 475], ["pytorch_lightning.seed_everything", "argparse.ArgumentParser", "pl.Trainer.add_argparse_args.add_argument", "pl.Trainer.add_argparse_args.add_argument", "lit_corrnet3d_clean.LitCorrNet3D.add_model_specific_args", "pytorch_lightning.Trainer.add_argparse_args", "pl.Trainer.add_argparse_args.parse_args", "testset_pytable_with_soft_label", "print", "print", "torch.utils.data.DataLoader", "torch.utils.data.DataLoader", "lit_corrnet3d_clean.LitCorrNet3D", "print", "LitCorrNet3D.load_from_checkpoint", "pytorch_lightning.Trainer.from_argparse_args", "pl.Trainer.from_argparse_args.test", "len", "vars", "str", "parser.parse_args.ckpt_user.split", "parser.parse_args.ckpt_user.split"], "function", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_corrnet3d_clean.LitCorrNet3D.add_model_specific_args"], ["", "def", "cli_main_test_", "(", "args", "=", "None", ")", ":", "\n", "    ", "from", "lit_dataset_clean", "import", "testset_pytable_with_soft_label", "\n", "pl", ".", "seed_everything", "(", ")", "\n", "parser", "=", "ArgumentParser", "(", ")", "\n", "parser", ".", "add_argument", "(", "\"--ckpt_user\"", ",", "type", "=", "str", ")", "\n", "parser", ".", "add_argument", "(", "\"--batch_size\"", ",", "type", "=", "int", ",", "default", "=", "20", ")", "\n", "parser", "=", "LitCorrNet3D", ".", "add_model_specific_args", "(", "parser", ")", "\n", "parser", "=", "pl", ".", "Trainer", ".", "add_argparse_args", "(", "parser", ")", "\n", "args", "=", "parser", ".", "parse_args", "(", "args", ")", "\n", "args", ".", "input_pts", "=", "1024", "\n", "test_dataset_3dcoded", "=", "testset_pytable_with_soft_label", "(", "\n", "test_h5file_name", "=", "args", ".", "test_data_dir", ",", "\n", "outname", "=", "'nonrigid_surreal'", ",", "\n", "show", "=", "False", ")", "\n", "print", "(", "'len of test: '", ",", "len", "(", "test_dataset_3dcoded", ")", ")", "\n", "print", "(", "'bsize: '", ",", "args", ".", "batch_size", ")", "\n", "testloader", "=", "torch", ".", "utils", ".", "data", ".", "DataLoader", "(", "test_dataset_3dcoded", ",", "batch_size", "=", "args", ".", "batch_size", ",", "\n", "shuffle", "=", "False", ",", "num_workers", "=", "args", ".", "num_workers", ")", "\n", "model", "=", "LitCorrNet3D", "(", "**", "vars", "(", "args", ")", ")", "\n", "hparafiledir", "=", "args", ".", "ckpt_user", ".", "split", "(", "'/'", ")", "[", "0", "]", "+", "'/'", "+", "args", ".", "ckpt_user", ".", "split", "(", "'/'", ")", "[", "1", "]", "+", "'/'", "+", "'hparams.yaml'", "\n", "print", "(", "hparafiledir", ")", "\n", "model_test", "=", "model", ".", "load_from_checkpoint", "(", "\n", "args", ".", "ckpt_user", ",", "\n", "hparams_file", "=", "hparafiledir", ")", "\n", "trainer", "=", "pl", ".", "Trainer", ".", "from_argparse_args", "(", "args", ",", "gpus", "=", "str", "(", "args", ".", "gpus", ")", ",", "benchmark", "=", "True", ")", "\n", "trainer", ".", "test", "(", "model", "=", "model_test", ",", "test_dataloaders", "=", "testloader", ")", "\n", "\n", "return", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.__init__": [[19, 33], ["list", "h5py.File", "len", "range"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "file_name", ",", "transform", "=", "None", ",", "soft_label", "=", "False", ",", "show", "=", "False", ",", "pick_out", "=", "None", ",", "train", "=", "None", ",", "npoints", "=", "None", ",", "ratio_list", "=", "[", "0.02", ",", "0.04", ",", "0.06", ",", "0.08", ",", "0.10", "]", ",", "partition", "=", "'train'", ")", ":", "\n", "        ", "self", ".", "partition", "=", "partition", "\n", "self", ".", "ratio_list", "=", "ratio_list", "\n", "\n", "self", ".", "file_name", "=", "file_name", "\n", "self", ".", "transform", "=", "transform", "\n", "self", ".", "soft_label", "=", "soft_label", "\n", "self", ".", "xyz2", "=", "None", "\n", "with", "h5py", ".", "File", "(", "self", ".", "file_name", ",", "'r'", ")", "as", "file", ":", "\n", "            ", "self", ".", "len", "=", "len", "(", "file", "[", "\"xyz2\"", "]", ")", "\n", "", "self", ".", "pair_len", "=", "self", ".", "len", "//", "2", "\n", "self", ".", "L", "=", "list", "(", "range", "(", "0", ",", "self", ".", "len", ")", ")", "\n", "self", ".", "epoch", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.get_index_pairs": [[34, 39], ["random.seed", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.L.pop", "random.randrange", "range", "len"], "methods", ["None"], ["", "def", "get_index_pairs", "(", "self", ",", "index", ")", ":", "\n", "        ", "random", ".", "seed", "(", "index", ")", "\n", "t1", "=", "[", "self", ".", "L", ".", "pop", "(", "random", ".", "randrange", "(", "len", "(", "self", ".", "L", ")", ")", ")", "for", "_", "in", "range", "(", "2", ")", "]", "\n", "assert", "(", "t1", "[", "0", "]", "!=", "t1", "[", "1", "]", ")", "\n", "return", "t1", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.update_epoch": [[40, 47], ["print", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.update_L_at_new_epoch", "print"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.update_L_at_new_epoch"], ["", "def", "update_epoch", "(", "self", ",", "epoch", ")", ":", "\n", "        ", "if", "self", ".", "epoch", "!=", "epoch", ":", "\n", "            ", "print", "(", "'update epoch and L'", ")", "\n", "self", ".", "epoch", "=", "epoch", "\n", "self", ".", "update_L_at_new_epoch", "(", ")", "\n", "", "elif", "self", ".", "epoch", "==", "epoch", ":", "\n", "            ", "print", "(", "'same epoch and keep poping L'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.update_L": [[48, 51], ["len", "list", "range"], "methods", ["None"], ["", "", "def", "update_L", "(", "self", ")", ":", "\n", "        ", "if", "len", "(", "self", ".", "L", ")", "==", "0", ":", "\n", "            ", "self", ".", "L", "=", "list", "(", "range", "(", "0", ",", "self", ".", "len", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.update_L_at_new_epoch": [[52, 54], ["list", "range"], "methods", ["None"], ["", "", "def", "update_L_at_new_epoch", "(", "self", ")", ":", "\n", "        ", "self", ".", "L", "=", "list", "(", "range", "(", "0", ",", "self", ".", "len", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.permuted_transfrom": [[55, 72], ["numpy.eye", "numpy.eye.copy", "numpy.array_equal", "numpy.dot", "len", "numpy.random.seed", "numpy.random.shuffle"], "methods", ["None"], ["", "def", "permuted_transfrom", "(", "self", ",", "xyz1", ",", "index", ",", "random_fix", "=", "True", ")", ":", "#N1x3", "\n", "        ", "assert", "(", "len", "(", "xyz1", ".", "shape", ")", "==", "2", ")", "\n", "assert", "(", "xyz1", ".", "shape", "[", "1", "]", "==", "3", ")", "\n", "npoint", "=", "xyz1", ".", "shape", "[", "0", "]", "\n", "\n", "I", "=", "np", ".", "eye", "(", "npoint", ")", "#N2xN1", "\n", "p", "=", "I", ".", "copy", "(", ")", "\n", "while", "(", "np", ".", "array_equal", "(", "p", ",", "I", ")", ")", ":", "\n", "            ", "if", "random_fix", "==", "True", ":", "\n", "\n", "                ", "np", ".", "random", ".", "seed", "(", "index", ")", "\n", "np", ".", "random", ".", "shuffle", "(", "p", ")", "#N2xN1 ", "\n", "\n", "", "", "permuted_xyz1", "=", "np", ".", "dot", "(", "p", ",", "xyz1", ")", "#N2xN1 N1x3 = N2x3", "\n", "\n", "label", "=", "p", "#N1xN2", "\n", "return", "label", ",", "permuted_xyz1", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.full_permute": [[73, 92], ["numpy.random.seed", "numpy.random.permutation", "numpy.random.seed", "numpy.random.permutation", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.permuted_transfrom", "int", "numpy.random.seed", "numpy.random.permutation", "numpy.random.seed", "numpy.random.permutation", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.permuted_transfrom", "time.time", "time.time", "time.time", "time.time"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.permuted_transfrom", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.permuted_transfrom"], ["", "def", "full_permute", "(", "self", ",", "pointcloud1", ",", "pointcloud2", ",", "item", ")", ":", "#input two np point cloud", "\n", "        ", "assert", "(", "pointcloud1", ".", "shape", "[", "1", "]", "==", "3", ")", "\n", "assert", "(", "pointcloud2", ".", "shape", "[", "1", "]", "==", "3", ")", "\n", "#unordered permutation", "\n", "if", "self", ".", "partition", "!=", "'train'", ":", "\n", "            ", "np", ".", "random", ".", "seed", "(", "item", ")", "\n", "pointcloud1", "=", "np", ".", "random", ".", "permutation", "(", "pointcloud1", ")", "#pointcloud1=<1024,3>", "\n", "np", ".", "random", ".", "seed", "(", "item", ")", "\n", "pointcloud2", "=", "np", ".", "random", ".", "permutation", "(", "pointcloud2", ")", "#pointcloud2=<1024,3>", "\n", "corr_matrix_label", ",", "permuted_pointcloud", "=", "self", ".", "permuted_transfrom", "(", "pointcloud1", ",", "item", ")", "#corr_matrix_label=<N1=1024,N2=1024> permuted_pointcloud=<1024,3>", "\n", "", "elif", "self", ".", "partition", "==", "'train'", ":", "\n", "            ", "now", "=", "int", "(", "time", ".", "time", "(", ")", ")", "\n", "np", ".", "random", ".", "seed", "(", "now", ")", "\n", "pointcloud1", "=", "np", ".", "random", ".", "permutation", "(", "pointcloud1", ")", "#pointcloud1=<1024,3>", "\n", "np", ".", "random", ".", "seed", "(", "now", ")", "\n", "pointcloud2", "=", "np", ".", "random", ".", "permutation", "(", "pointcloud2", ")", "#pointcloud2=<1024,3>", "\n", "corr_matrix_label", ",", "permuted_pointcloud", "=", "self", ".", "permuted_transfrom", "(", "pointcloud1", ",", "now", ")", "#corr_matrix_label=<N1=1024,N2=1024> permuted_pointcloud=<1024,3>", "\n", "\n", "", "return", "corr_matrix_label", ",", "permuted_pointcloud", ",", "pointcloud2", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.__getitem__": [[93, 128], ["lit_dataset_clean.SURREAL_pair_without_replace_full_permute.update_L", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.get_index_pairs", "numpy.array", "numpy.array", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.full_permute", "torch.from_numpy().float", "torch.from_numpy().float", "torch.from_numpy().float", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.clone", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.clone", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.transform", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.transform", "h5py.File", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "s_label_list.append", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.make_soft_label"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.update_L", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.get_index_pairs", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.full_permute", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.make_soft_label"], ["", "def", "__getitem__", "(", "self", ",", "which_pair", ")", ":", "#permuted for input1", "\n", "        ", "if", "(", "self", ".", "xyz2", "==", "None", ")", ":", "\n", "# print(\"here once\")", "\n", "            ", "self", ".", "xyz2", "=", "h5py", ".", "File", "(", "self", ".", "file_name", ",", "'r'", ")", "[", "\"xyz2\"", "]", "\n", "\n", "", "self", ".", "update_L", "(", ")", "\n", "t", "=", "self", ".", "get_index_pairs", "(", "which_pair", ")", "\n", "index1", "=", "t", "[", "0", "]", "\n", "index2", "=", "t", "[", "1", "]", "\n", "assert", "(", "index1", "!=", "index2", ")", "\n", "\n", "input1_ori", "=", "np", ".", "array", "(", "self", ".", "xyz2", "[", "index1", "]", ")", "\n", "input2_ori", "=", "np", ".", "array", "(", "self", ".", "xyz2", "[", "index2", "]", ")", "\n", "\n", "corr_matrix_label", ",", "permuted_input1", ",", "input2", "=", "self", ".", "full_permute", "(", "input1_ori", ",", "input2_ori", ",", "which_pair", ")", "\n", "\n", "input1", "=", "torch", ".", "from_numpy", "(", "permuted_input1", ")", ".", "float", "(", ")", "\n", "corr_matrix_label", "=", "torch", ".", "from_numpy", "(", "corr_matrix_label", ")", ".", "float", "(", ")", "\n", "input2", "=", "torch", ".", "from_numpy", "(", "input2", ")", ".", "float", "(", ")", "\n", "\n", "if", "self", ".", "transform", ":", "\n", "            ", "input1_", "=", "input1", ".", "clone", "(", ")", "\n", "input2_", "=", "input2", ".", "clone", "(", ")", "\n", "input1", "=", "self", ".", "transform", "(", "input1_", ")", "\n", "input2", "=", "self", ".", "transform", "(", "input2_", ")", "\n", "\n", "", "if", "self", ".", "soft_label", ":", "\n", "            ", "s_label_list", "=", "[", "]", "\n", "# for each_ratio in [0.02, 0.04, 0.06, 0.08, 0.10, 0.12, 0.14, 0.16, 0.18, 0.20]:", "\n", "for", "each_ratio", "in", "self", ".", "ratio_list", ":", "\n", "                ", "s_label_list", ".", "append", "(", "self", ".", "make_soft_label", "(", "corr_matrix_label", ",", "input2", ",", "ratio", "=", "each_ratio", ")", ")", "\n", "\n", "", "return", "corr_matrix_label", ",", "input1", ",", "input2", ",", "which_pair", ",", "s_label_list", "\n", "\n", "", "return", "corr_matrix_label", ",", "input1", ",", "input2", ",", "which_pair", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.square_distance": [[129, 136], ["torch.sum().view", "torch.sum().view", "torch.matmul", "dst.permute", "torch.sum", "torch.sum"], "methods", ["None"], ["", "def", "square_distance", "(", "self", ",", "src", ",", "dst", ")", ":", "\n", "        ", "N", ",", "_", "=", "src", ".", "shape", "\n", "M", ",", "_", "=", "dst", ".", "shape", "\n", "dist", "=", "-", "2", "*", "torch", ".", "matmul", "(", "src", ",", "dst", ".", "permute", "(", "1", ",", "0", ")", ")", "\n", "dist", "+=", "torch", ".", "sum", "(", "src", "**", "2", ",", "-", "1", ")", ".", "view", "(", "N", ",", "1", ")", "\n", "dist", "+=", "torch", ".", "sum", "(", "dst", "**", "2", ",", "-", "1", ")", ".", "view", "(", "1", ",", "M", ")", "\n", "return", "dist", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.make_soft_label": [[137, 163], ["label_origin.clone", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.square_distance", "torch.max", "range", "torch.sqrt", "torch.nonzero", "add_idx.ndimension", "torch.nonzero.squeeze"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.square_distance"], ["", "def", "make_soft_label", "(", "self", ",", "label_origin", ",", "xyz2", ",", "ratio", "=", "0.5", ")", ":", "\n", "        ", "if", "ratio", "==", "0.0", ":", "\n", "            ", "return", "label_origin", "\n", "", "else", ":", "\n", "            ", "label", "=", "label_origin", ".", "clone", "(", ")", "\n", "\n", "dist", "=", "self", ".", "square_distance", "(", "xyz2", ",", "xyz2", ")", "\n", "\n", "max_square_radius", "=", "torch", ".", "max", "(", "dist", ")", "\n", "\n", "radius", "=", "ratio", "*", "torch", ".", "sqrt", "(", "max_square_radius", ")", "\n", "\n", "for", "row", "in", "range", "(", "label", ".", "shape", "[", "0", "]", ")", ":", "\n", "                ", "idx", "=", "torch", ".", "nonzero", "(", "label", "[", "row", "]", ")", "\n", "\n", "dist_row", "=", "dist", "[", "idx", ".", "squeeze", "(", ")", "]", "\n", "add_idx", "=", "(", "dist_row", "<=", "radius", "**", "2", ")", ".", "nonzero", "(", ")", ".", "squeeze", "(", ")", "\n", "\n", "if", "add_idx", ".", "ndimension", "(", ")", "==", "0", ":", "\n", "                    ", "add_idx", "=", "[", "add_idx", "]", "\n", "\n", "", "for", "i", "in", "add_idx", ":", "\n", "                    ", "label", "[", "row", "]", "[", "i", "]", "=", "1.0", "\n", "\n", "", "", "soft_label", "=", "label", "\n", "return", "soft_label", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.label_ACC_percentage": [[164, 177], ["range", "torch.mean", "torch.mul", "torch.sum", "b_acc.append", "torch.stack", "hit.float", "torch.tensor().float", "torch.tensor"], "methods", ["None"], ["", "", "def", "label_ACC_percentage", "(", "self", ",", "label_in", ",", "label_gt", ")", ":", "\n", "        ", "assert", "(", "label_in", ".", "shape", "==", "label_gt", ".", "shape", ")", "\n", "bsize", "=", "label_in", ".", "shape", "[", "0", "]", "\n", "b_acc", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "bsize", ")", ":", "\n", "            ", "element_product", "=", "torch", ".", "mul", "(", "label_in", "[", "i", "]", ",", "label_gt", "[", "i", "]", ")", "\n", "N1", "=", "label_in", "[", "i", "]", ".", "shape", "[", "0", "]", "\n", "sum_row", "=", "torch", ".", "sum", "(", "element_product", ",", "dim", "=", "-", "1", ")", "\n", "hit", "=", "(", "sum_row", "!=", "0", ")", ".", "sum", "(", ")", "\n", "acc", "=", "hit", ".", "float", "(", ")", "/", "torch", ".", "tensor", "(", "N1", ")", ".", "float", "(", ")", "\n", "b_acc", ".", "append", "(", "acc", "*", "100.0", ")", "\n", "", "mean", "=", "torch", ".", "mean", "(", "torch", ".", "stack", "(", "b_acc", ")", ")", "\n", "return", "mean", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.label_ACC_percentage_for_inference": [[178, 194], ["range", "torch.mean", "torch.mul", "torch.sum", "b_acc.append", "torch.stack", "hit.float", "torch.tensor().float", "torch.tensor"], "methods", ["None"], ["", "def", "label_ACC_percentage_for_inference", "(", "self", ",", "label_in", ",", "label_gt", ",", "pinput1", ",", "input2", ",", "name", ",", "sample_n_to_visualize", "=", "None", ")", ":", "\n", "        ", "assert", "(", "label_in", ".", "shape", "==", "label_gt", ".", "shape", ")", "\n", "bsize", "=", "label_in", ".", "shape", "[", "0", "]", "\n", "b_acc", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "bsize", ")", ":", "\n", "\n", "            ", "element_product", "=", "torch", ".", "mul", "(", "label_in", "[", "i", "]", ",", "label_gt", "[", "i", "]", ")", "\n", "N1", "=", "label_in", "[", "i", "]", ".", "shape", "[", "0", "]", "\n", "sum_row", "=", "torch", ".", "sum", "(", "element_product", ",", "dim", "=", "-", "1", ")", "#N1x1", "\n", "\n", "\n", "hit", "=", "(", "sum_row", "!=", "0", ")", ".", "sum", "(", ")", "\n", "acc", "=", "hit", ".", "float", "(", ")", "/", "torch", ".", "tensor", "(", "N1", ")", ".", "float", "(", ")", "\n", "b_acc", ".", "append", "(", "acc", "*", "100.0", ")", "\n", "", "mean", "=", "torch", ".", "mean", "(", "torch", ".", "stack", "(", "b_acc", ")", ")", "\n", "return", "mean", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.corr_to_list": [[195, 206], ["torch.nonzero.tolist", "torch.nonzero", "single_corr_list.append", "corr_matrix.clone().detach", "torch.nonzero", "tuple", "corr_matrix.clone().detach", "corr_matrix.clone", "corr_matrix.clone"], "methods", ["None"], ["", "def", "corr_to_list", "(", "self", ",", "corr_matrix", ")", ":", "\n", "        ", "''' Input:    correspondence matrix c (N1xN2,{0,1}-value)\n            Output:   correspondence list N1->N2= [\u2026,(i,j),\u2026]'''", "\n", "single_corr_list", "=", "[", "]", "\n", "try", ":", "\n", "            ", "pair", "=", "torch", ".", "nonzero", "(", "corr_matrix", ".", "clone", "(", ")", ".", "detach", "(", ")", ",", "as_tuple", "=", "False", ")", "#N1xN2", "\n", "", "except", ":", "\n", "            ", "pair", "=", "torch", ".", "nonzero", "(", "corr_matrix", ".", "clone", "(", ")", ".", "detach", "(", ")", ")", "#N1xN2", "\n", "", "for", "each", "in", "pair", ".", "tolist", "(", ")", ":", "\n", "            ", "single_corr_list", ".", "append", "(", "tuple", "(", "each", ")", ")", "\n", "", "return", "single_corr_list", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.get_corr_list": [[207, 212], ["lit_dataset_clean.SURREAL_pair_without_replace_full_permute.__getitem__", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.corr_to_list"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.testset_pytable_with_soft_label.__getitem__", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.testset_pytable_with_soft_label.corr_to_list"], ["", "def", "get_corr_list", "(", "self", ",", "index", ",", "mode", ")", ":", "\n", "        ", "if", "mode", "==", "'permuted'", ":", "\n", "            ", "corr_matrix_label", ",", "permuted_input1", ",", "input2", ",", "_", "=", "self", ".", "__getitem__", "(", "index", ")", "\n", "single_corr_list", "=", "self", ".", "corr_to_list", "(", "corr_matrix_label", ")", "\n", "return", "single_corr_list", ",", "permuted_input1", ",", "input2", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.__len__": [[213, 215], ["None"], "methods", ["None"], ["", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "pair_len", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.make_test_h5_with_label": [[216, 252], ["tables.Float32Col", "tables.Float32Col", "tables.Float32Col", "DESC_DICT.__setitem__", "tables.open_file", "h5file.create_table", "tqdm", "str().replace", "tables.Float32Col", "range", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.__getitem__", "input1.view().numpy", "input2.view().numpy", "corr_matrix_label.view().numpy", "tqdm", "h5file.create_table.row.append", "h5file.create_table.flush", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.__len__", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.make_soft_label", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.view().numpy", "str", "input1.view", "input2.view", "corr_matrix_label.view", "str().replace", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute.view", "str"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.testset_pytable_with_soft_label.__getitem__", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.testset_pytable_with_soft_label.__len__", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.SURREAL_pair_without_replace_full_permute.make_soft_label"], ["", "def", "make_test_h5_with_label", "(", "self", ")", ":", "\n", "        ", "self", ".", "ratio_list", "=", "[", "0.02", ",", "0.04", ",", "0.06", ",", "0.08", ",", "0.10", ",", "0.12", ",", "0.14", ",", "0.16", ",", "0.18", ",", "0.20", "]", "\n", "self", ".", "soft_label", "=", "False", "\n", "\n", "self", ".", "partition", "=", "'test'", "\n", "\n", "DESC_DICT", "=", "{", "\n", "'src_flat'", ":", "pytables", ".", "Float32Col", "(", "1024", "*", "3", ")", ",", "\n", "'tgt_flat'", ":", "pytables", ".", "Float32Col", "(", "1024", "*", "3", ")", ",", "\n", "'label_flat'", ":", "pytables", ".", "Float32Col", "(", "1024", "*", "1024", ")", "\n", "}", "\n", "for", "each_ratio", "in", "self", ".", "ratio_list", ":", "#soft labels", "\n", "            ", "key_name", "=", "'sl_'", "+", "str", "(", "each_ratio", ")", ".", "replace", "(", "'.'", ",", "''", ")", "\n", "DESC_DICT", ".", "__setitem__", "(", "key_name", ",", "pytables", ".", "Float32Col", "(", "1024", "*", "1024", ")", ")", "\n", "\n", "", "with", "pytables", ".", "open_file", "(", "'testset_with_soft_for_SURREAL_pair_without_replace_full_permute.h5'", ",", "mode", "=", "\"w\"", ")", "as", "h5file", ":", "\n", "            ", "table", "=", "h5file", ".", "create_table", "(", "'/'", ",", "'data'", ",", "DESC_DICT", ")", "\n", "\n", "for", "idx", "in", "tqdm", "(", "range", "(", "self", ".", "__len__", "(", ")", ")", ")", ":", "\n", "                ", "corr_matrix_label", ",", "input1", ",", "input2", ",", "which_pair", "=", "self", ".", "__getitem__", "(", "idx", ")", "\n", "\n", "src_flat", "=", "input1", ".", "view", "(", "1", ",", "-", "1", ")", ".", "numpy", "(", ")", "\n", "tgt_flat", "=", "input2", ".", "view", "(", "1", ",", "-", "1", ")", ".", "numpy", "(", ")", "\n", "label_flat", "=", "corr_matrix_label", ".", "view", "(", "1", ",", "-", "1", ")", ".", "numpy", "(", ")", "\n", "\n", "table", ".", "row", "[", "'src_flat'", "]", "=", "src_flat", "\n", "table", ".", "row", "[", "'tgt_flat'", "]", "=", "tgt_flat", "\n", "table", ".", "row", "[", "'label_flat'", "]", "=", "label_flat", "\n", "\n", "for", "each_ratio", "in", "tqdm", "(", "self", ".", "ratio_list", ")", ":", "\n", "                    ", "key_name", "=", "'sl_'", "+", "str", "(", "each_ratio", ")", ".", "replace", "(", "'.'", ",", "''", ")", "\n", "val", "=", "self", ".", "make_soft_label", "(", "corr_matrix_label", ",", "input2", ",", "ratio", "=", "each_ratio", ")", "#torch.Size([1024, 1024])", "\n", "val_flat", "=", "val", ".", "view", "(", "1", ",", "-", "1", ")", ".", "numpy", "(", ")", "#[1,1024x1024]", "\n", "table", ".", "row", "[", "key_name", "]", "=", "val_flat", "\n", "", "table", ".", "row", ".", "append", "(", ")", "\n", "table", ".", "flush", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.testset_pytable_with_soft_label.__init__": [[255, 274], ["isinstance", "print", "len", "tables.open_file", "tables.open_file", "len", "tables.open_file", "len", "len", "h5file.get_node", "h5file1.get_node", "h5file2.get_node"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "test_h5file_name", ",", "show", "=", "False", ",", "outname", "=", "None", ")", ":", "\n", "\n", "        ", "self", ".", "outname", "=", "outname", "\n", "self", ".", "ratio_list", "=", "[", "0.02", ",", "0.04", ",", "0.06", ",", "0.08", ",", "0.10", ",", "0.12", ",", "0.14", ",", "0.16", ",", "0.18", ",", "0.20", "]", "\n", "self", ".", "test_h5file_name", "=", "test_h5file_name", "\n", "\n", "self", ".", "return_dict", "=", "{", "}", "\n", "if", "isinstance", "(", "test_h5file_name", ",", "list", ")", "and", "len", "(", "test_h5file_name", ")", "==", "2", ":", "\n", "            ", "self", ".", "data", "=", "None", "\n", "print", "(", "'two pytable files for dcp inference'", ")", "\n", "with", "pytables", ".", "open_file", "(", "test_h5file_name", "[", "0", "]", ",", "mode", "=", "\"r\"", ")", "as", "h5file1", ":", "\n", "                ", "with", "pytables", ".", "open_file", "(", "test_h5file_name", "[", "1", "]", ",", "mode", "=", "\"r\"", ")", "as", "h5file2", ":", "\n", "                    ", "self", ".", "len1", "=", "len", "(", "h5file1", ".", "get_node", "(", "'/data'", ")", ")", "\n", "self", ".", "len2", "=", "len", "(", "h5file2", ".", "get_node", "(", "'/data'", ")", ")", "\n", "self", ".", "len", "=", "self", ".", "len1", "+", "self", ".", "len2", "\n", "", "", "", "else", ":", "\n", "            ", "self", ".", "data", "=", "None", "\n", "with", "pytables", ".", "open_file", "(", "test_h5file_name", ",", "mode", "=", "\"r\"", ")", "as", "h5file", ":", "\n", "                ", "self", ".", "len", "=", "len", "(", "h5file", ".", "get_node", "(", "'/data'", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.testset_pytable_with_soft_label.__getitem__": [[275, 360], ["isinstance", "print", "lit_dataset_clean.testset_pytable_with_soft_label.digest_data", "len", "range", "lit_dataset_clean.testset_pytable_with_soft_label.digest_data", "tables.open_file().get_node", "tables.open_file().get_node", "range", "lit_dataset_clean.testset_pytable_with_soft_label.digest_data", "tables.open_file().get_node", "tables.open_file", "tables.open_file", "tables.open_file"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.testset_pytable_with_soft_label.digest_data", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.testset_pytable_with_soft_label.digest_data", "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.testset_pytable_with_soft_label.digest_data"], ["", "", "", "def", "__getitem__", "(", "self", ",", "idx", ")", ":", "\n", "        ", "if", "isinstance", "(", "self", ".", "test_h5file_name", ",", "list", ")", "and", "len", "(", "self", ".", "test_h5file_name", ")", "==", "2", ":", "\n", "            ", "print", "(", "'two pytable files for dcp inference'", ")", "\n", "if", "idx", "in", "range", "(", "0", ",", "self", ".", "len1", ")", ":", "\n", "                ", "if", "(", "self", ".", "data", "==", "None", ")", ":", "\n", "                    ", "self", ".", "data", "=", "pytables", ".", "open_file", "(", "self", ".", "test_h5file_name", "[", "0", "]", ",", "mode", "=", "\"r\"", ")", ".", "get_node", "(", "'/data'", ")", "\n", "", "data_dict", "=", "self", ".", "digest_data", "(", "idx", ")", "\n", "", "elif", "idx", "in", "range", "(", "self", ".", "len1", ",", "self", ".", "len1", "+", "self", ".", "len2", ")", ":", "\n", "                ", "if", "(", "self", ".", "data", "==", "None", ")", ":", "\n", "                    ", "self", ".", "data", "=", "pytables", ".", "open_file", "(", "self", ".", "test_h5file_name", "[", "1", "]", ",", "mode", "=", "\"r\"", ")", ".", "get_node", "(", "'/data'", ")", "\n", "", "data_dict", "=", "self", ".", "digest_data", "(", "idx", "-", "self", ".", "len2", ")", "\n", "\n", "", "try", ":", "\n", "                ", "return", "{", "\n", "'src_flat'", ":", "data_dict", "[", "'src_flat'", "]", ",", "\n", "'tgt_flat'", ":", "data_dict", "[", "'tgt_flat'", "]", ",", "\n", "'label_flat'", ":", "data_dict", "[", "'label_flat'", "]", ",", "\n", "'scores_flat'", ":", "data_dict", "[", "'scores_flat'", "]", ",", "\n", "'sl_002'", ":", "data_dict", "[", "'sl_002'", "]", ",", "\n", "'sl_004'", ":", "data_dict", "[", "'sl_004'", "]", ",", "\n", "'sl_006'", ":", "data_dict", "[", "'sl_006'", "]", ",", "\n", "'sl_008'", ":", "data_dict", "[", "'sl_008'", "]", ",", "\n", "'sl_01'", ":", "data_dict", "[", "'sl_01'", "]", ",", "\n", "'sl_012'", ":", "data_dict", "[", "'sl_012'", "]", ",", "\n", "'sl_014'", ":", "data_dict", "[", "'sl_014'", "]", ",", "\n", "'sl_016'", ":", "data_dict", "[", "'sl_016'", "]", ",", "\n", "'sl_018'", ":", "data_dict", "[", "'sl_018'", "]", ",", "\n", "'sl_02'", ":", "data_dict", "[", "'sl_02'", "]", ",", "\n", "}", "\n", "", "except", ":", "\n", "                ", "return", "{", "\n", "'src_flat'", ":", "data_dict", "[", "'src_flat'", "]", ",", "\n", "'tgt_flat'", ":", "data_dict", "[", "'tgt_flat'", "]", ",", "\n", "'label_flat'", ":", "data_dict", "[", "'label_flat'", "]", ",", "\n", "'sl_002'", ":", "data_dict", "[", "'sl_002'", "]", ",", "\n", "'sl_004'", ":", "data_dict", "[", "'sl_004'", "]", ",", "\n", "'sl_006'", ":", "data_dict", "[", "'sl_006'", "]", ",", "\n", "'sl_008'", ":", "data_dict", "[", "'sl_008'", "]", ",", "\n", "'sl_01'", ":", "data_dict", "[", "'sl_01'", "]", ",", "\n", "'sl_012'", ":", "data_dict", "[", "'sl_012'", "]", ",", "\n", "'sl_014'", ":", "data_dict", "[", "'sl_014'", "]", ",", "\n", "'sl_016'", ":", "data_dict", "[", "'sl_016'", "]", ",", "\n", "'sl_018'", ":", "data_dict", "[", "'sl_018'", "]", ",", "\n", "'sl_02'", ":", "data_dict", "[", "'sl_02'", "]", ",", "\n", "}", "\n", "\n", "", "", "else", ":", "\n", "            ", "if", "(", "self", ".", "data", "==", "None", ")", ":", "\n", "                ", "self", ".", "data", "=", "pytables", ".", "open_file", "(", "self", ".", "test_h5file_name", ",", "mode", "=", "\"r\"", ")", ".", "get_node", "(", "'/data'", ")", "\n", "", "data_dict", "=", "self", ".", "digest_data", "(", "idx", ")", "\n", "\n", "try", ":", "\n", "                ", "return", "{", "\n", "'src_flat'", ":", "data_dict", "[", "'src_flat'", "]", ",", "\n", "'tgt_flat'", ":", "data_dict", "[", "'tgt_flat'", "]", ",", "\n", "'label_flat'", ":", "data_dict", "[", "'label_flat'", "]", ",", "\n", "'scores_flat'", ":", "data_dict", "[", "'scores_flat'", "]", ",", "\n", "'sl_002'", ":", "data_dict", "[", "'sl_002'", "]", ",", "\n", "'sl_004'", ":", "data_dict", "[", "'sl_004'", "]", ",", "\n", "'sl_006'", ":", "data_dict", "[", "'sl_006'", "]", ",", "\n", "'sl_008'", ":", "data_dict", "[", "'sl_008'", "]", ",", "\n", "'sl_01'", ":", "data_dict", "[", "'sl_01'", "]", ",", "\n", "'sl_012'", ":", "data_dict", "[", "'sl_012'", "]", ",", "\n", "'sl_014'", ":", "data_dict", "[", "'sl_014'", "]", ",", "\n", "'sl_016'", ":", "data_dict", "[", "'sl_016'", "]", ",", "\n", "'sl_018'", ":", "data_dict", "[", "'sl_018'", "]", ",", "\n", "'sl_02'", ":", "data_dict", "[", "'sl_02'", "]", ",", "\n", "}", "\n", "", "except", ":", "\n", "\n", "                ", "return", "{", "\n", "'src_flat'", ":", "data_dict", "[", "'src_flat'", "]", ",", "\n", "'tgt_flat'", ":", "data_dict", "[", "'tgt_flat'", "]", ",", "\n", "'label_flat'", ":", "data_dict", "[", "'label_flat'", "]", ",", "\n", "\n", "'sl_002'", ":", "data_dict", "[", "'sl_002'", "]", ",", "\n", "'sl_004'", ":", "data_dict", "[", "'sl_004'", "]", ",", "\n", "'sl_006'", ":", "data_dict", "[", "'sl_006'", "]", ",", "\n", "'sl_008'", ":", "data_dict", "[", "'sl_008'", "]", ",", "\n", "'sl_01'", ":", "data_dict", "[", "'sl_01'", "]", ",", "\n", "'sl_012'", ":", "data_dict", "[", "'sl_012'", "]", ",", "\n", "'sl_014'", ":", "data_dict", "[", "'sl_014'", "]", ",", "\n", "'sl_016'", ":", "data_dict", "[", "'sl_016'", "]", ",", "\n", "'sl_018'", ":", "data_dict", "[", "'sl_018'", "]", ",", "\n", "'sl_02'", ":", "data_dict", "[", "'sl_02'", "]", ",", "\n", "}", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.testset_pytable_with_soft_label.__len__": [[362, 364], ["None"], "methods", ["None"], ["", "", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "len", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.testset_pytable_with_soft_label.digest_data": [[365, 383], ["key_set.append", "str().replace", "[].reshape", "[].reshape", "str", "[].reshape"], "methods", ["None"], ["", "def", "digest_data", "(", "self", ",", "idx", ")", ":", "\n", "        ", "assert", "(", "self", ".", "data", "!=", "None", ")", "\n", "key_set", "=", "[", "'src_flat'", ",", "'tgt_flat'", ",", "'label_flat'", ",", "'scores_flat'", "]", "#diff for each", "\n", "for", "each_ratio", "in", "self", ".", "ratio_list", ":", "\n", "            ", "key_name", "=", "'sl_'", "+", "str", "(", "each_ratio", ")", ".", "replace", "(", "'.'", ",", "''", ")", "\n", "key_set", ".", "append", "(", "key_name", ")", "\n", "", "for", "name_", "in", "key_set", ":", "\n", "\n", "            ", "if", "name_", "==", "'src_flat'", "or", "name_", "==", "'tgt_flat'", ":", "\n", "                ", "self", ".", "return_dict", "[", "name_", "]", "=", "self", ".", "data", "[", "idx", "]", "[", "name_", "]", ".", "reshape", "(", "[", "1024", ",", "3", "]", ")", "\n", "", "else", ":", "#label, scores, soft label 0.01 0.02...0.20", "\n", "                ", "if", "name_", "==", "'scores_flat'", ":", "\n", "                    ", "try", ":", "\n", "                        ", "self", ".", "return_dict", "[", "name_", "]", "=", "self", ".", "data", "[", "idx", "]", "[", "name_", "]", ".", "reshape", "(", "[", "1024", ",", "1024", "]", ")", "\n", "", "except", ":", "\n", "                        ", "continue", "\n", "", "", "self", ".", "return_dict", "[", "name_", "]", "=", "self", ".", "data", "[", "idx", "]", "[", "name_", "]", ".", "reshape", "(", "[", "1024", ",", "1024", "]", ")", "\n", "", "", "return", "self", ".", "return_dict", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.testset_pytable_with_soft_label.corr_to_list": [[385, 396], ["torch.nonzero.tolist", "torch.nonzero", "single_corr_list.append", "corr_matrix.clone().detach", "torch.nonzero", "tuple", "corr_matrix.clone().detach", "corr_matrix.clone", "corr_matrix.clone"], "methods", ["None"], ["", "def", "corr_to_list", "(", "self", ",", "corr_matrix", ")", ":", "\n", "        ", "''' Input:    correspondence matrix c (N1xN2,{0,1}-value)\n            Output:   correspondence list N1->N2= [\u2026,(i,j),\u2026]'''", "\n", "single_corr_list", "=", "[", "]", "\n", "try", ":", "\n", "            ", "pair", "=", "torch", ".", "nonzero", "(", "corr_matrix", ".", "clone", "(", ")", ".", "detach", "(", ")", ",", "as_tuple", "=", "False", ")", "#N1xN2", "\n", "", "except", ":", "\n", "            ", "pair", "=", "torch", ".", "nonzero", "(", "corr_matrix", ".", "clone", "(", ")", ".", "detach", "(", ")", ")", "#N1xN2", "\n", "", "for", "each", "in", "pair", ".", "tolist", "(", ")", ":", "\n", "            ", "single_corr_list", ".", "append", "(", "tuple", "(", "each", ")", ")", "\n", "", "return", "single_corr_list", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.testset_pytable_with_soft_label.label_ACC_percentage_for_inference": [[397, 422], ["range", "torch.mean", "torch.mul", "torch.sum", "torch.nonzero().squeeze", "label_in[].clone", "lit_dataset_clean.testset_pytable_with_soft_label.corr_to_list", "b_acc.append", "torch.stack", "torch.nonzero().squeeze.ndimension", "hit.float", "torch.tensor().float", "torch.nonzero", "str", "torch.tensor"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.testset_pytable_with_soft_label.corr_to_list"], ["", "def", "label_ACC_percentage_for_inference", "(", "self", ",", "label_in", ",", "label_gt", ",", "pinput1", ",", "input2", ",", "name", ",", "sample_n_to_visualize", "=", "None", ")", ":", "\n", "        ", "assert", "(", "label_in", ".", "shape", "==", "label_gt", ".", "shape", ")", "\n", "bsize", "=", "label_in", ".", "shape", "[", "0", "]", "\n", "b_acc", "=", "[", "]", "\n", "\n", "for", "i", "in", "range", "(", "bsize", ")", ":", "\n", "\n", "            ", "element_product", "=", "torch", ".", "mul", "(", "label_in", "[", "i", "]", ",", "label_gt", "[", "i", "]", ")", "\n", "N1", "=", "label_in", "[", "i", "]", ".", "shape", "[", "0", "]", "\n", "sum_row", "=", "torch", ".", "sum", "(", "element_product", ",", "dim", "=", "-", "1", ")", "#N1x1", "\n", "\n", "'''inference visualize using open3d'''", "\n", "idx", "=", "torch", ".", "nonzero", "(", "sum_row", ")", ".", "squeeze", "(", ")", "\n", "if", "idx", ".", "ndimension", "(", ")", "==", "0", ":", "#make idx always ndimension==1", "\n", "                ", "idx", "=", "[", "idx", "]", "\n", "", "p2p_corr_matrix", "=", "label_in", "[", "i", "]", ".", "clone", "(", ")", "\n", "single_all_corr_list", "=", "self", ".", "corr_to_list", "(", "p2p_corr_matrix", ")", "\n", "name_out", "=", "name", "+", "'_'", "+", "str", "(", "i", ")", "+", "'_out.png'", "\n", "\n", "\n", "hit", "=", "(", "sum_row", "!=", "0", ")", ".", "sum", "(", ")", "\n", "acc", "=", "hit", ".", "float", "(", ")", "/", "torch", ".", "tensor", "(", "N1", ")", ".", "float", "(", ")", "\n", "b_acc", ".", "append", "(", "acc", "*", "100.0", ")", "\n", "", "mean", "=", "torch", ".", "mean", "(", "torch", ".", "stack", "(", "b_acc", ")", ")", "\n", "return", "mean", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.HumanDataModule.__init__": [[426, 472], ["pytorch_lightning.LightningDataModule.__init__", "lit_dataset_clean.SURREAL_pair_without_replace_full_permute", "lit_dataset_clean.testset_pytable_with_soft_label", "round", "len", "torch.utils.data.dataset.random_split", "os.getcwd", "os.getcwd", "os.getcwd", "os.getcwd", "os.getcwd", "os.getcwd", "os.getcwd", "os.getcwd", "len", "len", "torch.Generator().manual_seed", "torch.Generator"], "methods", ["home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.HumanDataModule.__init__"], ["def", "__init__", "(", "\n", "self", ",", "\n", "data_dir", ":", "str", ",", "\n", "test_data_dir", ":", "str", ",", "\n", "val_split", ":", "float", "=", "0.2", ",", "\n", "# test_split: float = 0.1,", "\n", "num_workers", ":", "int", "=", "16", ",", "\n", "batch_size", ":", "int", "=", "32", ",", "\n", "seed", ":", "int", "=", "42", ",", "\n", "shuffle", ":", "bool", "=", "False", ",", "\n", "pin_memory", ":", "bool", "=", "False", ",", "\n", "drop_last", ":", "bool", "=", "False", ",", "\n", "*", "args", ",", "\n", "**", "kwargs", ",", "\n", ")", ":", "\n", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "self", ".", "data_dir", "=", "data_dir", "if", "data_dir", "is", "not", "None", "else", "os", ".", "getcwd", "(", ")", "\n", "self", ".", "test_data_dir", "=", "test_data_dir", "if", "test_data_dir", "is", "not", "None", "else", "os", ".", "getcwd", "(", ")", "\n", "self", ".", "batch_size", "=", "batch_size", "\n", "self", ".", "num_workers", "=", "num_workers", "\n", "self", ".", "seed", "=", "seed", "\n", "self", ".", "shuffle", "=", "shuffle", "\n", "self", ".", "pin_memory", "=", "pin_memory", "\n", "self", ".", "drop_last", "=", "drop_last", "\n", "\n", "surreal_dataset", "=", "SURREAL_pair_without_replace_full_permute", "(", "\n", "partition", "=", "'train'", ",", "\n", "file_name", "=", "self", ".", "data_dir", ",", "\n", "train", "=", "True", ",", "\n", "npoints", "=", "1024", ",", "\n", "pick_out", "=", "230000", ",", "\n", "transform", "=", "None", ")", "\n", "test_dataset_3dcoded", "=", "testset_pytable_with_soft_label", "(", "\n", "test_h5file_name", "=", "self", ".", "test_data_dir", ",", "\n", "outname", "=", "'nonrigid_surreal'", ",", "\n", "show", "=", "False", ")", "\n", "val_len", "=", "round", "(", "val_split", "*", "len", "(", "surreal_dataset", ")", ")", "\n", "train_len", "=", "len", "(", "surreal_dataset", ")", "-", "val_len", "\n", "test_len", "=", "len", "(", "test_dataset_3dcoded", ")", "\n", "\n", "self", ".", "trainset", ",", "self", ".", "valset", "=", "random_split", "(", "\n", "surreal_dataset", ",", "\n", "lengths", "=", "[", "train_len", ",", "val_len", "]", ",", "\n", "generator", "=", "torch", ".", "Generator", "(", ")", ".", "manual_seed", "(", "self", ".", "seed", ")", ")", "\n", "self", ".", "testset", "=", "test_dataset_3dcoded", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.HumanDataModule.train_dataloader": [[473, 483], ["torch.utils.data.DataLoader"], "methods", ["None"], ["", "def", "train_dataloader", "(", "self", ")", ":", "\n", "        ", "loader", "=", "DataLoader", "(", "\n", "self", ".", "trainset", ",", "\n", "batch_size", "=", "self", ".", "batch_size", ",", "\n", "shuffle", "=", "self", ".", "shuffle", ",", "\n", "num_workers", "=", "self", ".", "num_workers", ",", "\n", "drop_last", "=", "self", ".", "drop_last", ",", "\n", "pin_memory", "=", "self", ".", "pin_memory", ",", "\n", ")", "\n", "return", "loader", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.HumanDataModule.val_dataloader": [[484, 494], ["torch.utils.data.DataLoader"], "methods", ["None"], ["", "def", "val_dataloader", "(", "self", ")", ":", "\n", "        ", "loader", "=", "DataLoader", "(", "\n", "self", ".", "valset", ",", "\n", "batch_size", "=", "self", ".", "batch_size", ",", "\n", "shuffle", "=", "False", ",", "\n", "num_workers", "=", "self", ".", "num_workers", ",", "\n", "drop_last", "=", "self", ".", "drop_last", ",", "\n", "pin_memory", "=", "self", ".", "pin_memory", "\n", ")", "\n", "return", "loader", "\n", "\n"]], "home.repos.pwc.inspect_result.ZENGYIMING-EAMON_CorrNet3D.None.lit_dataset_clean.HumanDataModule.test_dataloader": [[495, 505], ["torch.utils.data.DataLoader"], "methods", ["None"], ["", "def", "test_dataloader", "(", "self", ")", ":", "\n", "        ", "loader", "=", "DataLoader", "(", "\n", "self", ".", "testset", ",", "\n", "batch_size", "=", "self", ".", "batch_size", ",", "\n", "shuffle", "=", "False", ",", "\n", "num_workers", "=", "self", ".", "num_workers", ",", "\n", "drop_last", "=", "self", ".", "drop_last", ",", "\n", "pin_memory", "=", "self", ".", "pin_memory", ",", "\n", ")", "\n", "return", "loader", "\n", "\n"]]}