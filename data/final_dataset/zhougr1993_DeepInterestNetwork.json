{"home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.utils.2_remap_id.build_map": [[16, 21], ["sorted", "dict", "df[].map", "df[].unique().tolist", "zip", "range", "df[].unique", "len"], "function", ["None"], ["", "def", "build_map", "(", "df", ",", "col_name", ")", ":", "\n", "  ", "key", "=", "sorted", "(", "df", "[", "col_name", "]", ".", "unique", "(", ")", ".", "tolist", "(", ")", ")", "\n", "m", "=", "dict", "(", "zip", "(", "key", ",", "range", "(", "len", "(", "key", ")", ")", ")", ")", "\n", "df", "[", "col_name", "]", "=", "df", "[", "col_name", "]", ".", "map", "(", "lambda", "x", ":", "m", "[", "x", "]", ")", "\n", "return", "m", ",", "key", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.utils.1_convert_pd.to_df": [[4, 13], ["open", "pandas.DataFrame.from_dict", "eval"], "function", ["None"], ["def", "to_df", "(", "file_path", ")", ":", "\n", "  ", "with", "open", "(", "file_path", ",", "'r'", ")", "as", "fin", ":", "\n", "    ", "df", "=", "{", "}", "\n", "i", "=", "0", "\n", "for", "line", "in", "fin", ":", "\n", "      ", "df", "[", "i", "]", "=", "eval", "(", "line", ")", "\n", "i", "+=", "1", "\n", "", "df", "=", "pd", ".", "DataFrame", ".", "from_dict", "(", "df", ",", "orient", "=", "'index'", ")", "\n", "return", "df", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.wide_deep.input.DataInput.__init__": [[4, 12], ["len", "len"], "methods", ["None"], ["  ", "def", "__init__", "(", "self", ",", "data", ",", "batch_size", ")", ":", "\n", "\n", "    ", "self", ".", "batch_size", "=", "batch_size", "\n", "self", ".", "data", "=", "data", "\n", "self", ".", "epoch_size", "=", "len", "(", "self", ".", "data", ")", "//", "self", ".", "batch_size", "\n", "if", "self", ".", "epoch_size", "*", "self", ".", "batch_size", "<", "len", "(", "self", ".", "data", ")", ":", "\n", "      ", "self", ".", "epoch_size", "+=", "1", "\n", "", "self", ".", "i", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.wide_deep.input.DataInput.__iter__": [[13, 15], ["None"], "methods", ["None"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "    ", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.wide_deep.input.DataInput.next": [[16, 42], ["max", "numpy.zeros", "u.append", "i.append", "y.append", "sl.append", "range", "min", "len", "len", "len", "len"], "methods", ["None"], ["", "def", "next", "(", "self", ")", ":", "\n", "\n", "    ", "if", "self", ".", "i", "==", "self", ".", "epoch_size", ":", "\n", "      ", "raise", "StopIteration", "\n", "\n", "", "ts", "=", "self", ".", "data", "[", "self", ".", "i", "*", "self", ".", "batch_size", ":", "min", "(", "(", "self", ".", "i", "+", "1", ")", "*", "self", ".", "batch_size", ",", "\n", "len", "(", "self", ".", "data", ")", ")", "]", "\n", "self", ".", "i", "+=", "1", "\n", "\n", "u", ",", "i", ",", "y", ",", "sl", "=", "[", "]", ",", "[", "]", ",", "[", "]", ",", "[", "]", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "u", ".", "append", "(", "t", "[", "0", "]", ")", "\n", "i", ".", "append", "(", "t", "[", "2", "]", ")", "\n", "y", ".", "append", "(", "t", "[", "3", "]", ")", "\n", "sl", ".", "append", "(", "len", "(", "t", "[", "1", "]", ")", ")", "\n", "", "max_sl", "=", "max", "(", "sl", ")", "\n", "\n", "hist_i", "=", "np", ".", "zeros", "(", "[", "len", "(", "ts", ")", ",", "max_sl", "]", ",", "np", ".", "int64", ")", "\n", "\n", "k", "=", "0", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "for", "l", "in", "range", "(", "len", "(", "t", "[", "1", "]", ")", ")", ":", "\n", "        ", "hist_i", "[", "k", "]", "[", "l", "]", "=", "t", "[", "1", "]", "[", "l", "]", "\n", "", "k", "+=", "1", "\n", "\n", "", "return", "self", ".", "i", ",", "(", "u", ",", "i", ",", "y", ",", "hist_i", ",", "sl", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.wide_deep.input.DataInputTest.__init__": [[44, 52], ["len", "len"], "methods", ["None"], ["  ", "def", "__init__", "(", "self", ",", "data", ",", "batch_size", ")", ":", "\n", "\n", "    ", "self", ".", "batch_size", "=", "batch_size", "\n", "self", ".", "data", "=", "data", "\n", "self", ".", "epoch_size", "=", "len", "(", "self", ".", "data", ")", "//", "self", ".", "batch_size", "\n", "if", "self", ".", "epoch_size", "*", "self", ".", "batch_size", "<", "len", "(", "self", ".", "data", ")", ":", "\n", "      ", "self", ".", "epoch_size", "+=", "1", "\n", "", "self", ".", "i", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.wide_deep.input.DataInputTest.__iter__": [[53, 55], ["None"], "methods", ["None"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "    ", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.wide_deep.input.DataInputTest.next": [[56, 82], ["max", "numpy.zeros", "u.append", "i.append", "j.append", "sl.append", "range", "min", "len", "len", "len", "len"], "methods", ["None"], ["", "def", "next", "(", "self", ")", ":", "\n", "\n", "    ", "if", "self", ".", "i", "==", "self", ".", "epoch_size", ":", "\n", "      ", "raise", "StopIteration", "\n", "\n", "", "ts", "=", "self", ".", "data", "[", "self", ".", "i", "*", "self", ".", "batch_size", ":", "min", "(", "(", "self", ".", "i", "+", "1", ")", "*", "self", ".", "batch_size", ",", "\n", "len", "(", "self", ".", "data", ")", ")", "]", "\n", "self", ".", "i", "+=", "1", "\n", "\n", "u", ",", "i", ",", "j", ",", "sl", "=", "[", "]", ",", "[", "]", ",", "[", "]", ",", "[", "]", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "u", ".", "append", "(", "t", "[", "0", "]", ")", "\n", "i", ".", "append", "(", "t", "[", "2", "]", "[", "0", "]", ")", "\n", "j", ".", "append", "(", "t", "[", "2", "]", "[", "1", "]", ")", "\n", "sl", ".", "append", "(", "len", "(", "t", "[", "1", "]", ")", ")", "\n", "", "max_sl", "=", "max", "(", "sl", ")", "\n", "\n", "hist_i", "=", "np", ".", "zeros", "(", "[", "len", "(", "ts", ")", ",", "max_sl", "]", ",", "np", ".", "int64", ")", "\n", "\n", "k", "=", "0", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "for", "l", "in", "range", "(", "len", "(", "t", "[", "1", "]", ")", ")", ":", "\n", "        ", "hist_i", "[", "k", "]", "[", "l", "]", "=", "t", "[", "1", "]", "[", "l", "]", "\n", "", "k", "+=", "1", "\n", "\n", "", "return", "self", ".", "i", ",", "(", "u", ",", "i", ",", "j", ",", "hist_i", ",", "sl", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.wide_deep.train.calc_auc": [[26, 55], ["sorted", "len"], "function", ["None"], ["def", "calc_auc", "(", "raw_arr", ")", ":", "\n", "    ", "\"\"\"Summary\n\n    Args:\n        raw_arr (TYPE): Description\n\n    Returns:\n        TYPE: Description\n    \"\"\"", "\n", "# sort by pred value, from small to big", "\n", "arr", "=", "sorted", "(", "raw_arr", ",", "key", "=", "lambda", "d", ":", "d", "[", "2", "]", ")", "\n", "\n", "auc", "=", "0.0", "\n", "fp1", ",", "tp1", ",", "fp2", ",", "tp2", "=", "0.0", ",", "0.0", ",", "0.0", ",", "0.0", "\n", "for", "record", "in", "arr", ":", "\n", "        ", "fp2", "+=", "record", "[", "0", "]", "# noclick", "\n", "tp2", "+=", "record", "[", "1", "]", "# click", "\n", "auc", "+=", "(", "fp2", "-", "fp1", ")", "*", "(", "tp2", "+", "tp1", ")", "\n", "fp1", ",", "tp1", "=", "fp2", ",", "tp2", "\n", "\n", "# if all nonclick or click, disgard", "\n", "", "threshold", "=", "len", "(", "arr", ")", "-", "1e-3", "\n", "if", "tp2", ">", "threshold", "or", "fp2", ">", "threshold", ":", "\n", "        ", "return", "-", "0.5", "\n", "\n", "", "if", "tp2", "*", "fp2", ">", "0.0", ":", "# normal auc", "\n", "        ", "return", "(", "1.0", "-", "auc", "/", "(", "2.0", "*", "tp2", "*", "fp2", ")", ")", "\n", "", "else", ":", "\n", "        ", "return", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.wide_deep.train._auc_arr": [[56, 69], ["score_p.tolist", "score_n.tolist", "score_arr.append", "score_arr.append"], "function", ["None"], ["", "", "def", "_auc_arr", "(", "score", ")", ":", "\n", "  ", "score_p", "=", "score", "[", ":", ",", "0", "]", "\n", "score_n", "=", "score", "[", ":", ",", "1", "]", "\n", "#print \"============== p =============\"", "\n", "#print score_p", "\n", "#print \"============== n =============\"", "\n", "#print score_n", "\n", "score_arr", "=", "[", "]", "\n", "for", "s", "in", "score_p", ".", "tolist", "(", ")", ":", "\n", "    ", "score_arr", ".", "append", "(", "[", "0", ",", "1", ",", "s", "]", ")", "\n", "", "for", "s", "in", "score_n", ".", "tolist", "(", ")", ":", "\n", "    ", "score_arr", ".", "append", "(", "[", "1", ",", "0", ",", "s", "]", ")", "\n", "", "return", "score_arr", "\n", "", "def", "_eval", "(", "sess", ",", "model", ")", ":", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.wide_deep.train._eval": [[69, 83], ["input.DataInputTest", "train.calc_auc", "model.eval", "train._auc_arr", "len", "model.save", "len"], "function", ["home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.deepFM.train.calc_auc", "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.deepFM.train._auc_arr"], ["", "def", "_eval", "(", "sess", ",", "model", ")", ":", "\n", "  ", "auc_sum", "=", "0.0", "\n", "score_arr", "=", "[", "]", "\n", "for", "_", ",", "uij", "in", "DataInputTest", "(", "test_set", ",", "test_batch_size", ")", ":", "\n", "    ", "auc_", ",", "score_", "=", "model", ".", "eval", "(", "sess", ",", "uij", ")", "\n", "score_arr", "+=", "_auc_arr", "(", "score_", ")", "\n", "auc_sum", "+=", "auc_", "*", "len", "(", "uij", "[", "0", "]", ")", "\n", "", "test_gauc", "=", "auc_sum", "/", "len", "(", "test_set", ")", "\n", "Auc", "=", "calc_auc", "(", "score_arr", ")", "\n", "global", "best_auc", "\n", "if", "best_auc", "<", "test_gauc", ":", "\n", "    ", "best_auc", "=", "test_gauc", "\n", "model", ".", "save", "(", "sess", ",", "'save_path/ckpt'", ")", "\n", "", "return", "test_gauc", ",", "Auc", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.base_model.input.DataInput.__init__": [[4, 12], ["len", "len"], "methods", ["None"], ["  ", "def", "__init__", "(", "self", ",", "data", ",", "batch_size", ")", ":", "\n", "\n", "    ", "self", ".", "batch_size", "=", "batch_size", "\n", "self", ".", "data", "=", "data", "\n", "self", ".", "epoch_size", "=", "len", "(", "self", ".", "data", ")", "//", "self", ".", "batch_size", "\n", "if", "self", ".", "epoch_size", "*", "self", ".", "batch_size", "<", "len", "(", "self", ".", "data", ")", ":", "\n", "      ", "self", ".", "epoch_size", "+=", "1", "\n", "", "self", ".", "i", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.base_model.input.DataInput.__iter__": [[13, 15], ["None"], "methods", ["None"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "    ", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.base_model.input.DataInput.next": [[16, 42], ["max", "numpy.zeros", "u.append", "i.append", "y.append", "sl.append", "range", "min", "len", "len", "len", "len"], "methods", ["None"], ["", "def", "next", "(", "self", ")", ":", "\n", "\n", "    ", "if", "self", ".", "i", "==", "self", ".", "epoch_size", ":", "\n", "      ", "raise", "StopIteration", "\n", "\n", "", "ts", "=", "self", ".", "data", "[", "self", ".", "i", "*", "self", ".", "batch_size", ":", "min", "(", "(", "self", ".", "i", "+", "1", ")", "*", "self", ".", "batch_size", ",", "\n", "len", "(", "self", ".", "data", ")", ")", "]", "\n", "self", ".", "i", "+=", "1", "\n", "\n", "u", ",", "i", ",", "y", ",", "sl", "=", "[", "]", ",", "[", "]", ",", "[", "]", ",", "[", "]", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "u", ".", "append", "(", "t", "[", "0", "]", ")", "\n", "i", ".", "append", "(", "t", "[", "2", "]", ")", "\n", "y", ".", "append", "(", "t", "[", "3", "]", ")", "\n", "sl", ".", "append", "(", "len", "(", "t", "[", "1", "]", ")", ")", "\n", "", "max_sl", "=", "max", "(", "sl", ")", "\n", "\n", "hist_i", "=", "np", ".", "zeros", "(", "[", "len", "(", "ts", ")", ",", "max_sl", "]", ",", "np", ".", "int64", ")", "\n", "\n", "k", "=", "0", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "for", "l", "in", "range", "(", "len", "(", "t", "[", "1", "]", ")", ")", ":", "\n", "        ", "hist_i", "[", "k", "]", "[", "l", "]", "=", "t", "[", "1", "]", "[", "l", "]", "\n", "", "k", "+=", "1", "\n", "\n", "", "return", "self", ".", "i", ",", "(", "u", ",", "i", ",", "y", ",", "hist_i", ",", "sl", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.base_model.input.DataInputTest.__init__": [[44, 52], ["len", "len"], "methods", ["None"], ["  ", "def", "__init__", "(", "self", ",", "data", ",", "batch_size", ")", ":", "\n", "\n", "    ", "self", ".", "batch_size", "=", "batch_size", "\n", "self", ".", "data", "=", "data", "\n", "self", ".", "epoch_size", "=", "len", "(", "self", ".", "data", ")", "//", "self", ".", "batch_size", "\n", "if", "self", ".", "epoch_size", "*", "self", ".", "batch_size", "<", "len", "(", "self", ".", "data", ")", ":", "\n", "      ", "self", ".", "epoch_size", "+=", "1", "\n", "", "self", ".", "i", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.base_model.input.DataInputTest.__iter__": [[53, 55], ["None"], "methods", ["None"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "    ", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.base_model.input.DataInputTest.next": [[56, 82], ["max", "numpy.zeros", "u.append", "i.append", "j.append", "sl.append", "range", "min", "len", "len", "len", "len"], "methods", ["None"], ["", "def", "next", "(", "self", ")", ":", "\n", "\n", "    ", "if", "self", ".", "i", "==", "self", ".", "epoch_size", ":", "\n", "      ", "raise", "StopIteration", "\n", "\n", "", "ts", "=", "self", ".", "data", "[", "self", ".", "i", "*", "self", ".", "batch_size", ":", "min", "(", "(", "self", ".", "i", "+", "1", ")", "*", "self", ".", "batch_size", ",", "\n", "len", "(", "self", ".", "data", ")", ")", "]", "\n", "self", ".", "i", "+=", "1", "\n", "\n", "u", ",", "i", ",", "j", ",", "sl", "=", "[", "]", ",", "[", "]", ",", "[", "]", ",", "[", "]", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "u", ".", "append", "(", "t", "[", "0", "]", ")", "\n", "i", ".", "append", "(", "t", "[", "2", "]", "[", "0", "]", ")", "\n", "j", ".", "append", "(", "t", "[", "2", "]", "[", "1", "]", ")", "\n", "sl", ".", "append", "(", "len", "(", "t", "[", "1", "]", ")", ")", "\n", "", "max_sl", "=", "max", "(", "sl", ")", "\n", "\n", "hist_i", "=", "np", ".", "zeros", "(", "[", "len", "(", "ts", ")", ",", "max_sl", "]", ",", "np", ".", "int64", ")", "\n", "\n", "k", "=", "0", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "for", "l", "in", "range", "(", "len", "(", "t", "[", "1", "]", ")", ")", ":", "\n", "        ", "hist_i", "[", "k", "]", "[", "l", "]", "=", "t", "[", "1", "]", "[", "l", "]", "\n", "", "k", "+=", "1", "\n", "\n", "", "return", "self", ".", "i", ",", "(", "u", ",", "i", ",", "j", ",", "hist_i", ",", "sl", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.base_model.train.calc_auc": [[26, 55], ["sorted", "len"], "function", ["None"], ["def", "calc_auc", "(", "raw_arr", ")", ":", "\n", "    ", "\"\"\"Summary\n\n    Args:\n        raw_arr (TYPE): Description\n\n    Returns:\n        TYPE: Description\n    \"\"\"", "\n", "# sort by pred value, from small to big", "\n", "arr", "=", "sorted", "(", "raw_arr", ",", "key", "=", "lambda", "d", ":", "d", "[", "2", "]", ")", "\n", "\n", "auc", "=", "0.0", "\n", "fp1", ",", "tp1", ",", "fp2", ",", "tp2", "=", "0.0", ",", "0.0", ",", "0.0", ",", "0.0", "\n", "for", "record", "in", "arr", ":", "\n", "        ", "fp2", "+=", "record", "[", "0", "]", "# noclick", "\n", "tp2", "+=", "record", "[", "1", "]", "# click", "\n", "auc", "+=", "(", "fp2", "-", "fp1", ")", "*", "(", "tp2", "+", "tp1", ")", "\n", "fp1", ",", "tp1", "=", "fp2", ",", "tp2", "\n", "\n", "# if all nonclick or click, disgard", "\n", "", "threshold", "=", "len", "(", "arr", ")", "-", "1e-3", "\n", "if", "tp2", ">", "threshold", "or", "fp2", ">", "threshold", ":", "\n", "        ", "return", "-", "0.5", "\n", "\n", "", "if", "tp2", "*", "fp2", ">", "0.0", ":", "# normal auc", "\n", "        ", "return", "(", "1.0", "-", "auc", "/", "(", "2.0", "*", "tp2", "*", "fp2", ")", ")", "\n", "", "else", ":", "\n", "        ", "return", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.base_model.train._auc_arr": [[56, 69], ["score_p.tolist", "score_n.tolist", "score_arr.append", "score_arr.append"], "function", ["None"], ["", "", "def", "_auc_arr", "(", "score", ")", ":", "\n", "  ", "score_p", "=", "score", "[", ":", ",", "0", "]", "\n", "score_n", "=", "score", "[", ":", ",", "1", "]", "\n", "#print \"============== p =============\"", "\n", "#print score_p", "\n", "#print \"============== n =============\"", "\n", "#print score_n", "\n", "score_arr", "=", "[", "]", "\n", "for", "s", "in", "score_p", ".", "tolist", "(", ")", ":", "\n", "    ", "score_arr", ".", "append", "(", "[", "0", ",", "1", ",", "s", "]", ")", "\n", "", "for", "s", "in", "score_n", ".", "tolist", "(", ")", ":", "\n", "    ", "score_arr", ".", "append", "(", "[", "1", ",", "0", ",", "s", "]", ")", "\n", "", "return", "score_arr", "\n", "", "def", "_eval", "(", "sess", ",", "model", ")", ":", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.base_model.train._eval": [[69, 83], ["input.DataInputTest", "train.calc_auc", "model.eval", "train._auc_arr", "len", "model.save", "len"], "function", ["home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.deepFM.train.calc_auc", "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.deepFM.train._auc_arr"], ["", "def", "_eval", "(", "sess", ",", "model", ")", ":", "\n", "  ", "auc_sum", "=", "0.0", "\n", "score_arr", "=", "[", "]", "\n", "for", "_", ",", "uij", "in", "DataInputTest", "(", "test_set", ",", "test_batch_size", ")", ":", "\n", "    ", "auc_", ",", "score_", "=", "model", ".", "eval", "(", "sess", ",", "uij", ")", "\n", "score_arr", "+=", "_auc_arr", "(", "score_", ")", "\n", "auc_sum", "+=", "auc_", "*", "len", "(", "uij", "[", "0", "]", ")", "\n", "", "test_gauc", "=", "auc_sum", "/", "len", "(", "test_set", ")", "\n", "Auc", "=", "calc_auc", "(", "score_arr", ")", "\n", "global", "best_auc", "\n", "if", "best_auc", "<", "test_gauc", ":", "\n", "    ", "best_auc", "=", "test_gauc", "\n", "model", ".", "save", "(", "sess", ",", "'save_path/ckpt'", ")", "\n", "", "return", "test_gauc", ",", "Auc", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.pnn.input.DataInput.__init__": [[4, 12], ["len", "len"], "methods", ["None"], ["  ", "def", "__init__", "(", "self", ",", "data", ",", "batch_size", ")", ":", "\n", "\n", "    ", "self", ".", "batch_size", "=", "batch_size", "\n", "self", ".", "data", "=", "data", "\n", "self", ".", "epoch_size", "=", "len", "(", "self", ".", "data", ")", "//", "self", ".", "batch_size", "\n", "if", "self", ".", "epoch_size", "*", "self", ".", "batch_size", "<", "len", "(", "self", ".", "data", ")", ":", "\n", "      ", "self", ".", "epoch_size", "+=", "1", "\n", "", "self", ".", "i", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.pnn.input.DataInput.__iter__": [[13, 15], ["None"], "methods", ["None"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "    ", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.pnn.input.DataInput.next": [[16, 42], ["max", "numpy.zeros", "u.append", "i.append", "y.append", "sl.append", "range", "min", "len", "len", "len", "len"], "methods", ["None"], ["", "def", "next", "(", "self", ")", ":", "\n", "\n", "    ", "if", "self", ".", "i", "==", "self", ".", "epoch_size", ":", "\n", "      ", "raise", "StopIteration", "\n", "\n", "", "ts", "=", "self", ".", "data", "[", "self", ".", "i", "*", "self", ".", "batch_size", ":", "min", "(", "(", "self", ".", "i", "+", "1", ")", "*", "self", ".", "batch_size", ",", "\n", "len", "(", "self", ".", "data", ")", ")", "]", "\n", "self", ".", "i", "+=", "1", "\n", "\n", "u", ",", "i", ",", "y", ",", "sl", "=", "[", "]", ",", "[", "]", ",", "[", "]", ",", "[", "]", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "u", ".", "append", "(", "t", "[", "0", "]", ")", "\n", "i", ".", "append", "(", "t", "[", "2", "]", ")", "\n", "y", ".", "append", "(", "t", "[", "3", "]", ")", "\n", "sl", ".", "append", "(", "len", "(", "t", "[", "1", "]", ")", ")", "\n", "", "max_sl", "=", "max", "(", "sl", ")", "\n", "\n", "hist_i", "=", "np", ".", "zeros", "(", "[", "len", "(", "ts", ")", ",", "max_sl", "]", ",", "np", ".", "int64", ")", "\n", "\n", "k", "=", "0", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "for", "l", "in", "range", "(", "len", "(", "t", "[", "1", "]", ")", ")", ":", "\n", "        ", "hist_i", "[", "k", "]", "[", "l", "]", "=", "t", "[", "1", "]", "[", "l", "]", "\n", "", "k", "+=", "1", "\n", "\n", "", "return", "self", ".", "i", ",", "(", "u", ",", "i", ",", "y", ",", "hist_i", ",", "sl", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.pnn.input.DataInputTest.__init__": [[44, 52], ["len", "len"], "methods", ["None"], ["  ", "def", "__init__", "(", "self", ",", "data", ",", "batch_size", ")", ":", "\n", "\n", "    ", "self", ".", "batch_size", "=", "batch_size", "\n", "self", ".", "data", "=", "data", "\n", "self", ".", "epoch_size", "=", "len", "(", "self", ".", "data", ")", "//", "self", ".", "batch_size", "\n", "if", "self", ".", "epoch_size", "*", "self", ".", "batch_size", "<", "len", "(", "self", ".", "data", ")", ":", "\n", "      ", "self", ".", "epoch_size", "+=", "1", "\n", "", "self", ".", "i", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.pnn.input.DataInputTest.__iter__": [[53, 55], ["None"], "methods", ["None"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "    ", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.pnn.input.DataInputTest.next": [[56, 82], ["max", "numpy.zeros", "u.append", "i.append", "j.append", "sl.append", "range", "min", "len", "len", "len", "len"], "methods", ["None"], ["", "def", "next", "(", "self", ")", ":", "\n", "\n", "    ", "if", "self", ".", "i", "==", "self", ".", "epoch_size", ":", "\n", "      ", "raise", "StopIteration", "\n", "\n", "", "ts", "=", "self", ".", "data", "[", "self", ".", "i", "*", "self", ".", "batch_size", ":", "min", "(", "(", "self", ".", "i", "+", "1", ")", "*", "self", ".", "batch_size", ",", "\n", "len", "(", "self", ".", "data", ")", ")", "]", "\n", "self", ".", "i", "+=", "1", "\n", "\n", "u", ",", "i", ",", "j", ",", "sl", "=", "[", "]", ",", "[", "]", ",", "[", "]", ",", "[", "]", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "u", ".", "append", "(", "t", "[", "0", "]", ")", "\n", "i", ".", "append", "(", "t", "[", "2", "]", "[", "0", "]", ")", "\n", "j", ".", "append", "(", "t", "[", "2", "]", "[", "1", "]", ")", "\n", "sl", ".", "append", "(", "len", "(", "t", "[", "1", "]", ")", ")", "\n", "", "max_sl", "=", "max", "(", "sl", ")", "\n", "\n", "hist_i", "=", "np", ".", "zeros", "(", "[", "len", "(", "ts", ")", ",", "max_sl", "]", ",", "np", ".", "int64", ")", "\n", "\n", "k", "=", "0", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "for", "l", "in", "range", "(", "len", "(", "t", "[", "1", "]", ")", ")", ":", "\n", "        ", "hist_i", "[", "k", "]", "[", "l", "]", "=", "t", "[", "1", "]", "[", "l", "]", "\n", "", "k", "+=", "1", "\n", "\n", "", "return", "self", ".", "i", ",", "(", "u", ",", "i", ",", "j", ",", "hist_i", ",", "sl", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.pnn.train.calc_auc": [[26, 55], ["sorted", "len"], "function", ["None"], ["def", "calc_auc", "(", "raw_arr", ")", ":", "\n", "    ", "\"\"\"Summary\n\n    Args:\n        raw_arr (TYPE): Description\n\n    Returns:\n        TYPE: Description\n    \"\"\"", "\n", "# sort by pred value, from small to big", "\n", "arr", "=", "sorted", "(", "raw_arr", ",", "key", "=", "lambda", "d", ":", "d", "[", "2", "]", ")", "\n", "\n", "auc", "=", "0.0", "\n", "fp1", ",", "tp1", ",", "fp2", ",", "tp2", "=", "0.0", ",", "0.0", ",", "0.0", ",", "0.0", "\n", "for", "record", "in", "arr", ":", "\n", "        ", "fp2", "+=", "record", "[", "0", "]", "# noclick", "\n", "tp2", "+=", "record", "[", "1", "]", "# click", "\n", "auc", "+=", "(", "fp2", "-", "fp1", ")", "*", "(", "tp2", "+", "tp1", ")", "\n", "fp1", ",", "tp1", "=", "fp2", ",", "tp2", "\n", "\n", "# if all nonclick or click, disgard", "\n", "", "threshold", "=", "len", "(", "arr", ")", "-", "1e-3", "\n", "if", "tp2", ">", "threshold", "or", "fp2", ">", "threshold", ":", "\n", "        ", "return", "-", "0.5", "\n", "\n", "", "if", "tp2", "*", "fp2", ">", "0.0", ":", "# normal auc", "\n", "        ", "return", "(", "1.0", "-", "auc", "/", "(", "2.0", "*", "tp2", "*", "fp2", ")", ")", "\n", "", "else", ":", "\n", "        ", "return", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.pnn.train._auc_arr": [[56, 69], ["score_p.tolist", "score_n.tolist", "score_arr.append", "score_arr.append"], "function", ["None"], ["", "", "def", "_auc_arr", "(", "score", ")", ":", "\n", "  ", "score_p", "=", "score", "[", ":", ",", "0", "]", "\n", "score_n", "=", "score", "[", ":", ",", "1", "]", "\n", "#print \"============== p =============\"", "\n", "#print score_p", "\n", "#print \"============== n =============\"", "\n", "#print score_n", "\n", "score_arr", "=", "[", "]", "\n", "for", "s", "in", "score_p", ".", "tolist", "(", ")", ":", "\n", "    ", "score_arr", ".", "append", "(", "[", "0", ",", "1", ",", "s", "]", ")", "\n", "", "for", "s", "in", "score_n", ".", "tolist", "(", ")", ":", "\n", "    ", "score_arr", ".", "append", "(", "[", "1", ",", "0", ",", "s", "]", ")", "\n", "", "return", "score_arr", "\n", "", "def", "_eval", "(", "sess", ",", "model", ")", ":", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.pnn.train._eval": [[69, 83], ["input.DataInputTest", "train.calc_auc", "model.eval", "train._auc_arr", "len", "model.save", "len"], "function", ["home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.deepFM.train.calc_auc", "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.deepFM.train._auc_arr"], ["", "def", "_eval", "(", "sess", ",", "model", ")", ":", "\n", "  ", "auc_sum", "=", "0.0", "\n", "score_arr", "=", "[", "]", "\n", "for", "_", ",", "uij", "in", "DataInputTest", "(", "test_set", ",", "test_batch_size", ")", ":", "\n", "    ", "auc_", ",", "score_", "=", "model", ".", "eval", "(", "sess", ",", "uij", ")", "\n", "score_arr", "+=", "_auc_arr", "(", "score_", ")", "\n", "auc_sum", "+=", "auc_", "*", "len", "(", "uij", "[", "0", "]", ")", "\n", "", "test_gauc", "=", "auc_sum", "/", "len", "(", "test_set", ")", "\n", "Auc", "=", "calc_auc", "(", "score_arr", ")", "\n", "global", "best_auc", "\n", "if", "best_auc", "<", "test_gauc", ":", "\n", "    ", "best_auc", "=", "test_gauc", "\n", "model", ".", "save", "(", "sess", ",", "'save_path/ckpt'", ")", "\n", "", "return", "test_gauc", ",", "Auc", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.deepFM.input.DataInput.__init__": [[4, 12], ["len", "len"], "methods", ["None"], ["  ", "def", "__init__", "(", "self", ",", "data", ",", "batch_size", ")", ":", "\n", "\n", "    ", "self", ".", "batch_size", "=", "batch_size", "\n", "self", ".", "data", "=", "data", "\n", "self", ".", "epoch_size", "=", "len", "(", "self", ".", "data", ")", "//", "self", ".", "batch_size", "\n", "if", "self", ".", "epoch_size", "*", "self", ".", "batch_size", "<", "len", "(", "self", ".", "data", ")", ":", "\n", "      ", "self", ".", "epoch_size", "+=", "1", "\n", "", "self", ".", "i", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.deepFM.input.DataInput.__iter__": [[13, 15], ["None"], "methods", ["None"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "    ", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.deepFM.input.DataInput.next": [[16, 42], ["max", "numpy.zeros", "u.append", "i.append", "y.append", "sl.append", "range", "min", "len", "len", "len", "len"], "methods", ["None"], ["", "def", "next", "(", "self", ")", ":", "\n", "\n", "    ", "if", "self", ".", "i", "==", "self", ".", "epoch_size", ":", "\n", "      ", "raise", "StopIteration", "\n", "\n", "", "ts", "=", "self", ".", "data", "[", "self", ".", "i", "*", "self", ".", "batch_size", ":", "min", "(", "(", "self", ".", "i", "+", "1", ")", "*", "self", ".", "batch_size", ",", "\n", "len", "(", "self", ".", "data", ")", ")", "]", "\n", "self", ".", "i", "+=", "1", "\n", "\n", "u", ",", "i", ",", "y", ",", "sl", "=", "[", "]", ",", "[", "]", ",", "[", "]", ",", "[", "]", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "u", ".", "append", "(", "t", "[", "0", "]", ")", "\n", "i", ".", "append", "(", "t", "[", "2", "]", ")", "\n", "y", ".", "append", "(", "t", "[", "3", "]", ")", "\n", "sl", ".", "append", "(", "len", "(", "t", "[", "1", "]", ")", ")", "\n", "", "max_sl", "=", "max", "(", "sl", ")", "\n", "\n", "hist_i", "=", "np", ".", "zeros", "(", "[", "len", "(", "ts", ")", ",", "max_sl", "]", ",", "np", ".", "int64", ")", "\n", "\n", "k", "=", "0", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "for", "l", "in", "range", "(", "len", "(", "t", "[", "1", "]", ")", ")", ":", "\n", "        ", "hist_i", "[", "k", "]", "[", "l", "]", "=", "t", "[", "1", "]", "[", "l", "]", "\n", "", "k", "+=", "1", "\n", "\n", "", "return", "self", ".", "i", ",", "(", "u", ",", "i", ",", "y", ",", "hist_i", ",", "sl", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.deepFM.input.DataInputTest.__init__": [[44, 52], ["len", "len"], "methods", ["None"], ["  ", "def", "__init__", "(", "self", ",", "data", ",", "batch_size", ")", ":", "\n", "\n", "    ", "self", ".", "batch_size", "=", "batch_size", "\n", "self", ".", "data", "=", "data", "\n", "self", ".", "epoch_size", "=", "len", "(", "self", ".", "data", ")", "//", "self", ".", "batch_size", "\n", "if", "self", ".", "epoch_size", "*", "self", ".", "batch_size", "<", "len", "(", "self", ".", "data", ")", ":", "\n", "      ", "self", ".", "epoch_size", "+=", "1", "\n", "", "self", ".", "i", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.deepFM.input.DataInputTest.__iter__": [[53, 55], ["None"], "methods", ["None"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "    ", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.deepFM.input.DataInputTest.next": [[56, 82], ["max", "numpy.zeros", "u.append", "i.append", "j.append", "sl.append", "range", "min", "len", "len", "len", "len"], "methods", ["None"], ["", "def", "next", "(", "self", ")", ":", "\n", "\n", "    ", "if", "self", ".", "i", "==", "self", ".", "epoch_size", ":", "\n", "      ", "raise", "StopIteration", "\n", "\n", "", "ts", "=", "self", ".", "data", "[", "self", ".", "i", "*", "self", ".", "batch_size", ":", "min", "(", "(", "self", ".", "i", "+", "1", ")", "*", "self", ".", "batch_size", ",", "\n", "len", "(", "self", ".", "data", ")", ")", "]", "\n", "self", ".", "i", "+=", "1", "\n", "\n", "u", ",", "i", ",", "j", ",", "sl", "=", "[", "]", ",", "[", "]", ",", "[", "]", ",", "[", "]", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "u", ".", "append", "(", "t", "[", "0", "]", ")", "\n", "i", ".", "append", "(", "t", "[", "2", "]", "[", "0", "]", ")", "\n", "j", ".", "append", "(", "t", "[", "2", "]", "[", "1", "]", ")", "\n", "sl", ".", "append", "(", "len", "(", "t", "[", "1", "]", ")", ")", "\n", "", "max_sl", "=", "max", "(", "sl", ")", "\n", "\n", "hist_i", "=", "np", ".", "zeros", "(", "[", "len", "(", "ts", ")", ",", "max_sl", "]", ",", "np", ".", "int64", ")", "\n", "\n", "k", "=", "0", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "for", "l", "in", "range", "(", "len", "(", "t", "[", "1", "]", ")", ")", ":", "\n", "        ", "hist_i", "[", "k", "]", "[", "l", "]", "=", "t", "[", "1", "]", "[", "l", "]", "\n", "", "k", "+=", "1", "\n", "\n", "", "return", "self", ".", "i", ",", "(", "u", ",", "i", ",", "j", ",", "hist_i", ",", "sl", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.deepFM.train.calc_auc": [[26, 55], ["sorted", "len"], "function", ["None"], ["def", "calc_auc", "(", "raw_arr", ")", ":", "\n", "    ", "\"\"\"Summary\n\n    Args:\n        raw_arr (TYPE): Description\n\n    Returns:\n        TYPE: Description\n    \"\"\"", "\n", "# sort by pred value, from small to big", "\n", "arr", "=", "sorted", "(", "raw_arr", ",", "key", "=", "lambda", "d", ":", "d", "[", "2", "]", ")", "\n", "\n", "auc", "=", "0.0", "\n", "fp1", ",", "tp1", ",", "fp2", ",", "tp2", "=", "0.0", ",", "0.0", ",", "0.0", ",", "0.0", "\n", "for", "record", "in", "arr", ":", "\n", "        ", "fp2", "+=", "record", "[", "0", "]", "# noclick", "\n", "tp2", "+=", "record", "[", "1", "]", "# click", "\n", "auc", "+=", "(", "fp2", "-", "fp1", ")", "*", "(", "tp2", "+", "tp1", ")", "\n", "fp1", ",", "tp1", "=", "fp2", ",", "tp2", "\n", "\n", "# if all nonclick or click, disgard", "\n", "", "threshold", "=", "len", "(", "arr", ")", "-", "1e-3", "\n", "if", "tp2", ">", "threshold", "or", "fp2", ">", "threshold", ":", "\n", "        ", "return", "-", "0.5", "\n", "\n", "", "if", "tp2", "*", "fp2", ">", "0.0", ":", "# normal auc", "\n", "        ", "return", "(", "1.0", "-", "auc", "/", "(", "2.0", "*", "tp2", "*", "fp2", ")", ")", "\n", "", "else", ":", "\n", "        ", "return", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.deepFM.train._auc_arr": [[56, 69], ["score_p.tolist", "score_n.tolist", "score_arr.append", "score_arr.append"], "function", ["None"], ["", "", "def", "_auc_arr", "(", "score", ")", ":", "\n", "  ", "score_p", "=", "score", "[", ":", ",", "0", "]", "\n", "score_n", "=", "score", "[", ":", ",", "1", "]", "\n", "#print \"============== p =============\"", "\n", "#print score_p", "\n", "#print \"============== n =============\"", "\n", "#print score_n", "\n", "score_arr", "=", "[", "]", "\n", "for", "s", "in", "score_p", ".", "tolist", "(", ")", ":", "\n", "    ", "score_arr", ".", "append", "(", "[", "0", ",", "1", ",", "s", "]", ")", "\n", "", "for", "s", "in", "score_n", ".", "tolist", "(", ")", ":", "\n", "    ", "score_arr", ".", "append", "(", "[", "1", ",", "0", ",", "s", "]", ")", "\n", "", "return", "score_arr", "\n", "", "def", "_eval", "(", "sess", ",", "model", ")", ":", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.deepFM.train._eval": [[69, 83], ["input.DataInputTest", "train.calc_auc", "model.eval", "train._auc_arr", "len", "model.save", "len"], "function", ["home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.deepFM.train.calc_auc", "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.deepFM.train._auc_arr"], ["", "def", "_eval", "(", "sess", ",", "model", ")", ":", "\n", "  ", "auc_sum", "=", "0.0", "\n", "score_arr", "=", "[", "]", "\n", "for", "_", ",", "uij", "in", "DataInputTest", "(", "test_set", ",", "test_batch_size", ")", ":", "\n", "    ", "auc_", ",", "score_", "=", "model", ".", "eval", "(", "sess", ",", "uij", ")", "\n", "score_arr", "+=", "_auc_arr", "(", "score_", ")", "\n", "auc_sum", "+=", "auc_", "*", "len", "(", "uij", "[", "0", "]", ")", "\n", "", "test_gauc", "=", "auc_sum", "/", "len", "(", "test_set", ")", "\n", "Auc", "=", "calc_auc", "(", "score_arr", ")", "\n", "global", "best_auc", "\n", "if", "best_auc", "<", "test_gauc", ":", "\n", "    ", "best_auc", "=", "test_gauc", "\n", "model", ".", "save", "(", "sess", ",", "'save_path/ckpt'", ")", "\n", "", "return", "test_gauc", ",", "Auc", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.din.input.DataInput.__init__": [[4, 12], ["len", "len"], "methods", ["None"], ["  ", "def", "__init__", "(", "self", ",", "data", ",", "batch_size", ")", ":", "\n", "\n", "    ", "self", ".", "batch_size", "=", "batch_size", "\n", "self", ".", "data", "=", "data", "\n", "self", ".", "epoch_size", "=", "len", "(", "self", ".", "data", ")", "//", "self", ".", "batch_size", "\n", "if", "self", ".", "epoch_size", "*", "self", ".", "batch_size", "<", "len", "(", "self", ".", "data", ")", ":", "\n", "      ", "self", ".", "epoch_size", "+=", "1", "\n", "", "self", ".", "i", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.din.input.DataInput.__iter__": [[13, 15], ["None"], "methods", ["None"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "    ", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.din.input.DataInput.next": [[16, 42], ["max", "numpy.zeros", "u.append", "i.append", "y.append", "sl.append", "range", "min", "len", "len", "len", "len"], "methods", ["None"], ["", "def", "next", "(", "self", ")", ":", "\n", "\n", "    ", "if", "self", ".", "i", "==", "self", ".", "epoch_size", ":", "\n", "      ", "raise", "StopIteration", "\n", "\n", "", "ts", "=", "self", ".", "data", "[", "self", ".", "i", "*", "self", ".", "batch_size", ":", "min", "(", "(", "self", ".", "i", "+", "1", ")", "*", "self", ".", "batch_size", ",", "\n", "len", "(", "self", ".", "data", ")", ")", "]", "\n", "self", ".", "i", "+=", "1", "\n", "\n", "u", ",", "i", ",", "y", ",", "sl", "=", "[", "]", ",", "[", "]", ",", "[", "]", ",", "[", "]", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "u", ".", "append", "(", "t", "[", "0", "]", ")", "\n", "i", ".", "append", "(", "t", "[", "2", "]", ")", "\n", "y", ".", "append", "(", "t", "[", "3", "]", ")", "\n", "sl", ".", "append", "(", "len", "(", "t", "[", "1", "]", ")", ")", "\n", "", "max_sl", "=", "max", "(", "sl", ")", "\n", "\n", "hist_i", "=", "np", ".", "zeros", "(", "[", "len", "(", "ts", ")", ",", "max_sl", "]", ",", "np", ".", "int64", ")", "\n", "\n", "k", "=", "0", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "for", "l", "in", "range", "(", "len", "(", "t", "[", "1", "]", ")", ")", ":", "\n", "        ", "hist_i", "[", "k", "]", "[", "l", "]", "=", "t", "[", "1", "]", "[", "l", "]", "\n", "", "k", "+=", "1", "\n", "\n", "", "return", "self", ".", "i", ",", "(", "u", ",", "i", ",", "y", ",", "hist_i", ",", "sl", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.din.input.DataInputTest.__init__": [[44, 52], ["len", "len"], "methods", ["None"], ["  ", "def", "__init__", "(", "self", ",", "data", ",", "batch_size", ")", ":", "\n", "\n", "    ", "self", ".", "batch_size", "=", "batch_size", "\n", "self", ".", "data", "=", "data", "\n", "self", ".", "epoch_size", "=", "len", "(", "self", ".", "data", ")", "//", "self", ".", "batch_size", "\n", "if", "self", ".", "epoch_size", "*", "self", ".", "batch_size", "<", "len", "(", "self", ".", "data", ")", ":", "\n", "      ", "self", ".", "epoch_size", "+=", "1", "\n", "", "self", ".", "i", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.din.input.DataInputTest.__iter__": [[53, 55], ["None"], "methods", ["None"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "    ", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.din.input.DataInputTest.next": [[56, 82], ["max", "numpy.zeros", "u.append", "i.append", "j.append", "sl.append", "range", "min", "len", "len", "len", "len"], "methods", ["None"], ["", "def", "next", "(", "self", ")", ":", "\n", "\n", "    ", "if", "self", ".", "i", "==", "self", ".", "epoch_size", ":", "\n", "      ", "raise", "StopIteration", "\n", "\n", "", "ts", "=", "self", ".", "data", "[", "self", ".", "i", "*", "self", ".", "batch_size", ":", "min", "(", "(", "self", ".", "i", "+", "1", ")", "*", "self", ".", "batch_size", ",", "\n", "len", "(", "self", ".", "data", ")", ")", "]", "\n", "self", ".", "i", "+=", "1", "\n", "\n", "u", ",", "i", ",", "j", ",", "sl", "=", "[", "]", ",", "[", "]", ",", "[", "]", ",", "[", "]", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "u", ".", "append", "(", "t", "[", "0", "]", ")", "\n", "i", ".", "append", "(", "t", "[", "2", "]", "[", "0", "]", ")", "\n", "j", ".", "append", "(", "t", "[", "2", "]", "[", "1", "]", ")", "\n", "sl", ".", "append", "(", "len", "(", "t", "[", "1", "]", ")", ")", "\n", "", "max_sl", "=", "max", "(", "sl", ")", "\n", "\n", "hist_i", "=", "np", ".", "zeros", "(", "[", "len", "(", "ts", ")", ",", "max_sl", "]", ",", "np", ".", "int64", ")", "\n", "\n", "k", "=", "0", "\n", "for", "t", "in", "ts", ":", "\n", "      ", "for", "l", "in", "range", "(", "len", "(", "t", "[", "1", "]", ")", ")", ":", "\n", "        ", "hist_i", "[", "k", "]", "[", "l", "]", "=", "t", "[", "1", "]", "[", "l", "]", "\n", "", "k", "+=", "1", "\n", "\n", "", "return", "self", ".", "i", ",", "(", "u", ",", "i", ",", "j", ",", "hist_i", ",", "sl", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.din.Dice.dice": [[3, 30], ["list", "list", "tensorflow.reduce_mean", "tensorflow.reshape", "tensorflow.reduce_mean", "tensorflow.sqrt", "tensorflow.reshape", "tensorflow.layers.batch_normalization", "tensorflow.sigmoid", "tensorflow.variable_scope", "tensorflow.get_variable", "tensorflow.get_variable", "_x.get_shape", "range", "len", "len", "tensorflow.square", "_x.get_shape", "tensorflow.constant_initializer", "_x.get_shape", "tensorflow.constant_initializer"], "function", ["None"], ["def", "dice", "(", "_x", ",", "axis", "=", "-", "1", ",", "epsilon", "=", "0.000000001", ",", "name", "=", "''", ")", ":", "\n", "  ", "with", "tf", ".", "variable_scope", "(", "name_or_scope", "=", "''", ",", "reuse", "=", "tf", ".", "AUTO_REUSE", ")", ":", "\n", "    ", "alphas", "=", "tf", ".", "get_variable", "(", "'alpha'", "+", "name", ",", "_x", ".", "get_shape", "(", ")", "[", "-", "1", "]", ",", "\n", "initializer", "=", "tf", ".", "constant_initializer", "(", "0.0", ")", ",", "\n", "dtype", "=", "tf", ".", "float32", ")", "\n", "beta", "=", "tf", ".", "get_variable", "(", "'beta'", "+", "name", ",", "_x", ".", "get_shape", "(", ")", "[", "-", "1", "]", ",", "\n", "initializer", "=", "tf", ".", "constant_initializer", "(", "0.0", ")", ",", "\n", "dtype", "=", "tf", ".", "float32", ")", "\n", "", "input_shape", "=", "list", "(", "_x", ".", "get_shape", "(", ")", ")", "\n", "\n", "reduction_axes", "=", "list", "(", "range", "(", "len", "(", "input_shape", ")", ")", ")", "\n", "del", "reduction_axes", "[", "axis", "]", "\n", "broadcast_shape", "=", "[", "1", "]", "*", "len", "(", "input_shape", ")", "\n", "broadcast_shape", "[", "axis", "]", "=", "input_shape", "[", "axis", "]", "\n", "\n", "# case: train mode (uses stats of the current batch)", "\n", "mean", "=", "tf", ".", "reduce_mean", "(", "_x", ",", "axis", "=", "reduction_axes", ")", "\n", "brodcast_mean", "=", "tf", ".", "reshape", "(", "mean", ",", "broadcast_shape", ")", "\n", "std", "=", "tf", ".", "reduce_mean", "(", "tf", ".", "square", "(", "_x", "-", "brodcast_mean", ")", "+", "epsilon", ",", "axis", "=", "reduction_axes", ")", "\n", "std", "=", "tf", ".", "sqrt", "(", "std", ")", "\n", "brodcast_std", "=", "tf", ".", "reshape", "(", "std", ",", "broadcast_shape", ")", "\n", "x_normed", "=", "tf", ".", "layers", ".", "batch_normalization", "(", "_x", ",", "center", "=", "False", ",", "scale", "=", "False", ",", "name", "=", "name", ",", "reuse", "=", "tf", ".", "AUTO_REUSE", ")", "\n", "# x_normed = (_x - brodcast_mean) / (brodcast_std + epsilon)", "\n", "x_p", "=", "tf", ".", "sigmoid", "(", "beta", "*", "x_normed", ")", "\n", "\n", "\n", "return", "alphas", "*", "(", "1.0", "-", "x_p", ")", "*", "_x", "+", "x_p", "*", "_x", "\n", "\n"]], "home.repos.pwc.inspect_result.zhougr1993_DeepInterestNetwork.din.Dice.parametric_relu": [[31, 40], ["tensorflow.nn.relu", "tensorflow.variable_scope", "tensorflow.get_variable", "_x.get_shape", "tensorflow.constant_initializer", "abs"], "function", ["None"], ["", "def", "parametric_relu", "(", "_x", ")", ":", "\n", "  ", "with", "tf", ".", "variable_scope", "(", "name_or_scope", "=", "''", ",", "reuse", "=", "tf", ".", "AUTO_REUSE", ")", ":", "\n", "    ", "alphas", "=", "tf", ".", "get_variable", "(", "'alpha'", ",", "_x", ".", "get_shape", "(", ")", "[", "-", "1", "]", ",", "\n", "initializer", "=", "tf", ".", "constant_initializer", "(", "0.0", ")", ",", "\n", "dtype", "=", "tf", ".", "float32", ")", "\n", "", "pos", "=", "tf", ".", "nn", ".", "relu", "(", "_x", ")", "\n", "neg", "=", "alphas", "*", "(", "_x", "-", "abs", "(", "_x", ")", ")", "*", "0.5", "\n", "\n", "return", "pos", "+", "neg", "\n", "", ""]]}