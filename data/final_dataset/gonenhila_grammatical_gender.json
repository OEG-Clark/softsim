{"home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.create_pairs_word2vecf.print_pairs": [[35, 99], ["print", "print", "codecs.open", "codecs.open", "tqdm.tqdm", "l.strip().lower().split.strip().lower().split", "enumerate", "l.strip().lower().split.strip().lower", "max", "l.strip().lower().split.strip", "f_out.write", "f_out.write", "f_out.write", "f_out.write", "f_out.write", "random.shuffle", "f_out.write", "f_out.write", "f_out.write", "random.shuffle", "f_out.write", "f_out.write", "f_out.write", "f_out.write", "f_out.write", "to_lemma_dict.get", "to_male_dict.get", "to_lemma_dict.get", "to_male_dict.get", "f_out.write", "to_female_dict.get", "to_female_dict.get", "to_neut_dict.get"], "function", ["None"], ["def", "print_pairs", "(", "lang", ",", "vocab", ",", "to_male_dict", "=", "None", ",", "to_female_dict", "=", "None", ",", "to_lemma_dict", "=", "None", ",", "to_neut_dict", "=", "None", ",", "to_options_dict", "=", "None", ")", ":", "\n", "    ", "\"\"\"\n    print pairs into file, required for training word2vecf\n    supports the different types of lemmatizations, as discussed in the paper\n    \"\"\"", "\n", "print", "(", "'printing output ...'", ")", "\n", "j", "=", "0", "\n", "with", "codecs", ".", "open", "(", "args", ".", "input", ",", "'r'", ",", "'utf-8'", ")", "as", "f", ",", "codecs", ".", "open", "(", "args", ".", "output", ",", "'w'", ",", "'utf-8'", ")", "as", "f_out", ":", "\n", "        ", "for", "l", "in", "tqdm", "(", "f", ")", ":", "\n", "            ", "l", "=", "l", ".", "strip", "(", ")", ".", "lower", "(", ")", ".", "split", "(", ")", "\n", "for", "i", ",", "w", "in", "enumerate", "(", "l", ")", ":", "\n", "                ", "if", "w", "in", "vocab", ":", "\n", "                    ", "start", "=", "max", "(", "0", ",", "i", "-", "args", ".", "win", ")", "\n", "end", "=", "i", "+", "args", ".", "win", "+", "1", "\n", "for", "c", "in", "l", "[", "start", ":", "end", "]", ":", "\n", "                        ", "if", "w", "!=", "c", "and", "c", "in", "vocab", ":", "\n", "                            ", "if", "lang", "==", "'it'", ":", "\n", "                                ", "if", "c", "in", "to_male_dict", "and", "to_male_dict", "[", "c", "]", "==", "None", "or", "c", "in", "to_female_dict", "and", "to_female_dict", "[", "c", "]", "==", "None", ":", "\n", "                                    ", "continue", "\n", "", "if", "args", ".", "lemmatize", "==", "'basic'", ":", "\n", "                                    ", "if", "args", ".", "different", ":", "\n", "                                        ", "if", "c", "in", "to_options_dict", ":", "\n", "                                            ", "opts", "=", "to_options_dict", "[", "c", "]", "\n", "shuffle", "(", "opts", ")", "\n", "f_out", ".", "write", "(", "w", "+", "' '", "+", "opts", "[", "0", "]", "+", "'\\n'", ")", "\n", "", "else", ":", "\n", "                                            ", "f_out", ".", "write", "(", "w", "+", "' '", "+", "c", "+", "'\\n'", ")", "\n", "", "", "else", ":", "\n", "                                        ", "f_out", ".", "write", "(", "w", "+", "' '", "+", "to_lemma_dict", ".", "get", "(", "c", ",", "c", ")", "+", "'\\n'", ")", "\n", "", "", "elif", "args", ".", "lemmatize", "==", "'to_masc'", ":", "\n", "                                    ", "f_out", ".", "write", "(", "w", "+", "' '", "+", "to_male_dict", ".", "get", "(", "c", ",", "c", ")", "+", "'\\n'", ")", "\n", "", "elif", "args", ".", "lemmatize", "==", "'to_fem'", ":", "\n", "                                    ", "f_out", ".", "write", "(", "w", "+", "' '", "+", "to_female_dict", ".", "get", "(", "c", ",", "c", ")", "+", "'\\n'", ")", "\n", "", "elif", "not", "args", ".", "lemmatize", ":", "\n", "                                    ", "f_out", ".", "write", "(", "w", "+", "' '", "+", "c", "+", "'\\n'", ")", "\n", "\n", "", "", "if", "lang", "==", "'de'", ":", "\n", "                                ", "if", "args", ".", "lemmatize", "==", "'basic'", ":", "\n", "                                    ", "if", "args", ".", "different", ":", "\n", "                                        ", "if", "c", "in", "to_options_dict", ":", "\n", "                                            ", "opts", "=", "to_options_dict", "[", "c", "]", "\n", "shuffle", "(", "opts", ")", "\n", "f_out", ".", "write", "(", "w", "+", "' '", "+", "opts", "[", "0", "]", "+", "'\\n'", ")", "\n", "", "else", ":", "\n", "                                            ", "f_out", ".", "write", "(", "w", "+", "' '", "+", "c", "+", "'\\n'", ")", "\n", "", "", "else", ":", "\n", "                                        ", "f_out", ".", "write", "(", "w", "+", "' '", "+", "to_lemma_dict", ".", "get", "(", "c", ",", "c", ")", "+", "'\\n'", ")", "\n", "", "", "elif", "args", ".", "lemmatize", "==", "'to_masc'", ":", "\n", "                                    ", "f_out", ".", "write", "(", "w", "+", "' '", "+", "to_male_dict", ".", "get", "(", "c", ",", "c", ")", "+", "'\\n'", ")", "\n", "", "elif", "args", ".", "lemmatize", "==", "'to_fem'", ":", "\n", "                                    ", "if", "c", "in", "to_female_dict", "and", "to_female_dict", "[", "c", "]", "==", "None", ":", "\n", "                                        ", "continue", "\n", "", "f_out", ".", "write", "(", "w", "+", "' '", "+", "to_female_dict", ".", "get", "(", "c", ",", "c", ")", "+", "'\\n'", ")", "\n", "", "elif", "args", ".", "lemmatize", "==", "'to_neut'", ":", "\n", "                                    ", "if", "c", "in", "to_neut_dict", "and", "to_neut_dict", "[", "c", "]", "==", "None", ":", "\n", "                                        ", "continue", "\n", "", "f_out", ".", "write", "(", "w", "+", "' '", "+", "to_neut_dict", ".", "get", "(", "c", ",", "c", ")", "+", "'\\n'", ")", "\n", "", "elif", "not", "args", ".", "lemmatize", ":", "\n", "                                    ", "f_out", ".", "write", "(", "w", "+", "' '", "+", "c", "+", "'\\n'", ")", "\n", "\n", "", "", "if", "lang", "==", "'en'", ":", "\n", "                                ", "f_out", ".", "write", "(", "w", "+", "' '", "+", "c", "+", "'\\n'", ")", "\n", "\n", "", "", "", "", "", "", "", "print", "(", "'done'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.create_pairs_word2vecf.extract_features": [[101, 106], ["print", "print", "dir", "getattr", "a.startswith"], "function", ["None"], ["", "def", "extract_features", "(", "anlyss", ")", ":", "\n", "    ", "atts", "=", "[", "a", "for", "a", "in", "dir", "(", "anlyss", ")", "if", "not", "a", ".", "startswith", "(", "'__'", ")", "]", "\n", "for", "att", "in", "atts", ":", "\n", "        ", "print", "(", "'att'", ",", "att", ")", "\n", "print", "(", "getattr", "(", "anlyss", ",", "att", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.create_pairs_word2vecf.extract_lemmas": [[108, 147], ["collections.defaultdict", "collections.defaultdict", "demorphy.Analyzer", "collections.defaultdict", "collections.defaultdict", "open", "l.strip().split.strip().split", "demorphy.Analyzer.analyze", "len", "l[].split", "set", "words[].append", "lemmas[].append", "len", "ast.literal_eval", "words[].append", "lemmas[].append", "l.strip().split.strip", "len", "set", "atts[].split", "str", "atts[].split"], "function", ["None"], ["", "", "def", "extract_lemmas", "(", "lang", ")", ":", "\n", "    ", "\"\"\"\n    Returns dictionaries of the lemmas and words in language 'lang' (with the respective features)\n    \"\"\"", "\n", "if", "lang", "==", "'it'", ":", "\n", "        ", "words", "=", "defaultdict", "(", "list", ")", "\n", "lemmas", "=", "defaultdict", "(", "list", ")", "\n", "with", "open", "(", "'../data/lemmatizer_unique.txt'", ",", "'r'", ",", "encoding", "=", "'latin-1'", ")", "as", "f", ":", "\n", "            ", "for", "l", "in", "f", ":", "\n", "                ", "l", "=", "l", ".", "strip", "(", ")", ".", "split", "(", "'\\t'", ")", "\n", "if", "len", "(", "l", ")", "==", "3", ":", "\n", "                    ", "atts", "=", "l", "[", "2", "]", ".", "split", "(", "':'", ")", "\n", "if", "len", "(", "atts", ")", ">", "1", ":", "\n", "                        ", "features", "=", "set", "(", "atts", "[", "1", "]", ".", "split", "(", "'+'", ")", ")", "\n", "", "else", ":", "\n", "                        ", "features", "=", "None", "\n", "", "pos", "=", "set", "(", "atts", "[", "0", "]", ".", "split", "(", "'-'", ")", ")", "\n", "words", "[", "l", "[", "0", "]", "]", ".", "append", "(", "(", "l", "[", "1", "]", ",", "pos", ",", "features", ")", ")", "\n", "lemmas", "[", "l", "[", "1", "]", "]", ".", "append", "(", "(", "l", "[", "0", "]", ",", "pos", ",", "features", ")", ")", "\n", "\n", "", "", "", "", "if", "lang", "==", "'de'", ":", "\n", "        ", "analyzer", "=", "Analyzer", "(", "char_subs_allowed", "=", "True", ")", "\n", "\n", "words", "=", "defaultdict", "(", "list", ")", "\n", "lemmas", "=", "defaultdict", "(", "list", ")", "\n", "for", "w", "in", "vocab", ":", "\n", "            ", "try", ":", "\n", "                ", "s", "=", "analyzer", ".", "analyze", "(", "w", ")", "\n", "", "except", ":", "\n", "                ", "continue", "\n", "", "else", ":", "\n", "                ", "if", "len", "(", "s", ")", "==", "0", ":", "\n", "                    ", "continue", "\n", "", "for", "anlyss", "in", "s", ":", "\n", "                    ", "features", "=", "ast", ".", "literal_eval", "(", "str", "(", "anlyss", ")", ")", "\n", "words", "[", "w", "]", ".", "append", "(", "(", "features", "[", "'LEMMA'", "]", ",", "features", ")", ")", "\n", "lemmas", "[", "features", "[", "'LEMMA'", "]", "]", ".", "append", "(", "(", "w", ",", "features", ")", ")", "\n", "\n", "", "", "", "", "return", "words", ",", "lemmas", "\n", "\n"]], "home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.create_pairs_word2vecf.create_vocab": [[149, 165], ["collections.defaultdict", "open", "tqdm.tqdm", "l.strip().lower().split", "enumerate", "l.strip().lower", "l.strip"], "function", ["None"], ["", "def", "create_vocab", "(", ")", ":", "\n", "    ", "i", "=", "0", "\n", "freq", "=", "defaultdict", "(", "int", ")", "\n", "with", "open", "(", "args", ".", "input", ",", "'r'", ",", "encoding", "=", "\"utf-8\"", ")", "as", "f", ":", "\n", "        ", "for", "l", "in", "tqdm", "(", "f", ")", ":", "\n", "            ", "for", "w", "in", "l", ".", "strip", "(", ")", ".", "lower", "(", ")", ".", "split", "(", ")", ":", "\n", "                ", "freq", "[", "w", "]", "+=", "1", "\n", "\n", "", "", "", "vocab", "=", "{", "}", "\n", "for", "w", "in", "freq", ":", "\n", "        ", "if", "freq", "[", "w", "]", ">", "50", ":", "\n", "            ", "vocab", "[", "w", "]", "=", "freq", "[", "w", "]", "\n", "\n", "", "", "w2i", "=", "{", "w", ":", "i", "for", "i", ",", "w", "in", "enumerate", "(", "vocab", ")", "}", "\n", "\n", "return", "vocab", ",", "w2i", "\n", "\n"]], "home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.create_pairs_word2vecf.return_oppos_gender": [[167, 234], ["list", "len", "len", "set", "random.shuffle", "len", "min", "len", "from_gender.upper", "options.append", "options.append", "abs", "feat.union().difference", "pos.union().difference", "len", "len", "options.append", "feat.union", "pos.union", "from_gender.upper", "valid.append", "valid.append", "to_gender.upper"], "function", ["None"], ["", "def", "return_oppos_gender", "(", "word", ",", "words", ",", "lemmas", ",", "to_gender", ",", "from_gender", ",", "lang", ")", ":", "\n", "    ", "\"\"\"\n    Returns a word with the opposite gender (with same other features)\n    \"\"\"", "\n", "\n", "options", "=", "[", "]", "\n", "\n", "if", "lang", "==", "'it'", ":", "\n", "\n", "        ", "for", "(", "lemma", ",", "pos", ",", "feat", ")", "in", "words", "[", "word", "]", ":", "\n", "            ", "if", "feat", "and", "from_gender", "in", "feat", ":", "\n", "#this is from-gender according to feat", "\n", "                ", "for", "(", "w_new", ",", "pos_new", ",", "feat_new", ")", "in", "lemmas", "[", "lemma", "]", ":", "\n", "                    ", "if", "pos", "==", "pos_new", "and", "feat", ".", "union", "(", "{", "to_gender", "}", ")", ".", "difference", "(", "{", "from_gender", "}", ")", "==", "feat_new", ":", "\n", "                        ", "options", ".", "append", "(", "w_new", ")", "\n", "", "", "", "if", "len", "(", "pos", ")", ">", "1", "and", "from_gender", ".", "upper", "(", ")", "in", "pos", ":", "\n", "#this is from-gender according to pos", "\n", "                ", "for", "(", "w_new", ",", "pos_new", ",", "feat_new", ")", "in", "lemmas", "[", "lemma", "]", ":", "\n", "                    ", "if", "feat", "==", "feat_new", "and", "pos", ".", "union", "(", "{", "to_gender", ".", "upper", "(", ")", "}", ")", ".", "difference", "(", "{", "from_gender", ".", "upper", "(", ")", "}", ")", "==", "pos_new", ":", "\n", "                        ", "options", ".", "append", "(", "w_new", ")", "\n", "", "", "", "", "if", "word", "in", "manual_mapping_gender", ":", "\n", "            ", "options", "=", "manual_mapping_gender", "[", "word", "]", "\n", "\n", "", "", "if", "lang", "==", "'de'", ":", "\n", "\n", "        ", "for", "lemma", ",", "features", "in", "words", "[", "word", "]", ":", "\n", "            ", "if", "'GENDER'", "in", "features", "and", "features", "[", "'GENDER'", "]", "in", "from_gender", ":", "\n", "                ", "for", "w_new", ",", "features_new", "in", "lemmas", "[", "lemma", "]", ":", "\n", "\n", "                    ", "if", "'GENDER'", "in", "features_new", "and", "features_new", "[", "'GENDER'", "]", "==", "to_gender", "and", "len", "(", "features_new", ")", "==", "len", "(", "features", ")", ":", "\n", "\n", "                        ", "valid", "=", "[", "]", "\n", "for", "attr", "in", "[", "'CATEGORY'", ",", "'NUMERUS'", ",", "'PERSON'", ",", "'PTB_TAG'", ",", "'TENSE'", "]", ":", "\n", "                            ", "if", "attr", "in", "features", ":", "\n", "                                ", "if", "attr", "not", "in", "features_new", ":", "\n", "                                    ", "valid", ".", "append", "(", "False", ")", "\n", "", "elif", "features", "[", "attr", "]", "!=", "features_new", "[", "attr", "]", ":", "\n", "                                    ", "valid", ".", "append", "(", "False", ")", "\n", "", "", "", "if", "False", "not", "in", "valid", ":", "\n", "                            ", "options", ".", "append", "(", "w_new", ")", "\n", "\n", "", "", "", "", "", "", "if", "len", "(", "options", ")", "==", "0", ":", "\n", "        ", "return", "None", "\n", "", "if", "len", "(", "options", ")", "==", "1", ":", "\n", "        ", "return", "options", "[", "0", "]", "\n", "", "if", "word", "in", "options", ":", "\n", "        ", "return", "word", "\n", "\n", "", "options_common", "=", "list", "(", "set", "(", "[", "opt", "for", "opt", "in", "options", "if", "opt", "in", "vocab", "]", ")", ")", "\n", "if", "len", "(", "options_common", ")", "==", "0", "and", "word", "in", "vocab", ":", "\n", "        ", "return", "options", "[", "0", "]", "\n", "\n", "", "options", "=", "options_common", "\n", "\n", "# If need to chose at random - do so", "\n", "if", "args", ".", "rand", ":", "\n", "        ", "shuffle", "(", "options", ")", "\n", "return", "options", "[", "0", "]", "\n", "\n", "# else: choose according to frequency", "\n", "", "freqs", "=", "{", "}", "\n", "for", "opt", "in", "options", ":", "\n", "        ", "freqs", "[", "vocab", "[", "opt", "]", "]", "=", "opt", "\n", "\n", "# return the option with the closest freq to word", "\n", "", "return", "freqs", "[", "min", "(", "freqs", ",", "key", "=", "lambda", "x", ":", "abs", "(", "x", "-", "vocab", "[", "word", "]", ")", ")", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.create_pairs_word2vecf.is_gendered": [[236, 257], ["len", "from_gender.upper"], "function", ["None"], ["", "def", "is_gendered", "(", "word", ",", "words", ",", "from_gender", ",", "lang", ")", ":", "\n", "    ", "\"\"\"\n    Checks if a given word is gendered or not\n    \"\"\"", "\n", "if", "lang", "==", "'it'", ":", "\n", "        ", "for", "(", "lemma", ",", "pos", ",", "feat", ")", "in", "words", "[", "word", "]", ":", "\n", "            ", "if", "'NOUN'", "in", "pos", ":", "\n", "                ", "return", "False", "\n", "", "if", "feat", "and", "from_gender", "in", "feat", ":", "\n", "                ", "return", "True", "\n", "", "if", "len", "(", "pos", ")", ">", "1", "and", "from_gender", ".", "upper", "(", ")", "in", "pos", ":", "\n", "                ", "return", "True", "\n", "\n", "", "", "", "if", "lang", "==", "'de'", ":", "\n", "        ", "for", "lemma", ",", "features", "in", "words", "[", "word", "]", ":", "\n", "            ", "if", "features", "[", "'CATEGORY'", "]", "==", "'NN'", ":", "\n", "                ", "return", "False", "\n", "", "if", "'GENDER'", "in", "features", "and", "features", "[", "'GENDER'", "]", "in", "from_gender", ":", "\n", "                ", "return", "True", "\n", "\n", "", "", "", "return", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.create_pairs_word2vecf.extract_all_genders": [[259, 268], ["list", "set", "genders.append"], "function", ["None"], ["", "def", "extract_all_genders", "(", "word", ",", "words", ")", ":", "\n", "\n", "    ", "genders", "=", "[", "]", "\n", "for", "lemma", ",", "features", "in", "words", "[", "word", "]", ":", "\n", "        ", "if", "features", "[", "'CATEGORY'", "]", "==", "'NN'", ":", "\n", "            ", "return", "[", "]", "\n", "", "if", "'GENDER'", "in", "features", "and", "features", "[", "'GENDER'", "]", "not", "in", "genders", "and", "features", "[", "'GENDER'", "]", "in", "[", "'fem'", ",", "'masc'", ",", "'neut'", "]", ":", "\n", "            ", "genders", ".", "append", "(", "features", "[", "'GENDER'", "]", ")", "\n", "", "", "return", "list", "(", "set", "(", "genders", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.create_pairs_word2vecf.create_gender_dict": [[274, 299], ["tqdm.tqdm", "from_gender.remove", "ValueError", "create_pairs_word2vecf.is_gendered", "create_pairs_word2vecf.return_oppos_gender", "ValueError"], "function", ["home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.create_pairs_word2vecf.is_gendered", "home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.create_pairs_word2vecf.return_oppos_gender"], ["", "def", "create_gender_dict", "(", "words", ",", "lemmas", ",", "to_gender", ",", "lang", ")", ":", "\n", "    ", "gender_dict", "=", "{", "}", "\n", "\n", "if", "lang", "==", "'it'", ":", "\n", "\n", "        ", "if", "to_gender", "==", "'f'", ":", "\n", "            ", "from_gender", "=", "'m'", "\n", "", "elif", "to_gender", "==", "'m'", ":", "\n", "            ", "from_gender", "=", "'f'", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'gender is not valid'", ")", "\n", "", "", "if", "lang", "==", "'de'", ":", "\n", "        ", "if", "to_gender", "not", "in", "[", "'fem'", ",", "'masc'", ",", "'neut'", "]", ":", "\n", "            ", "raise", "ValueError", "(", "'gender is not valid'", ")", "\n", "", "from_gender", "=", "[", "'masc'", ",", "'fem'", ",", "'neut'", "]", "\n", "from_gender", ".", "remove", "(", "to_gender", ")", "\n", "\n", "", "for", "w", "in", "tqdm", "(", "words", ")", ":", "\n", "        ", "if", "w", "in", "vocab", "and", "is_gendered", "(", "w", ",", "words", ",", "from_gender", ",", "lang", ")", ":", "\n", "            ", "value", "=", "return_oppos_gender", "(", "w", ",", "words", ",", "lemmas", ",", "to_gender", ",", "from_gender", ",", "lang", ")", "\n", "if", "value", ":", "\n", "                ", "gender_dict", "[", "w", "]", "=", "value", "\n", "", "else", ":", "\n", "                ", "gender_dict", "[", "w", "]", "=", "None", "\n", "", "", "", "return", "gender_dict", "\n", "\n"]], "home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.create_pairs_word2vecf.create_hybrid_dict": [[301, 328], ["tqdm.tqdm", "ValueError", "create_pairs_word2vecf.extract_all_genders", "len", "len", "len"], "function", ["home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.create_pairs_word2vecf.extract_all_genders"], ["", "def", "create_hybrid_dict", "(", "words", ",", "to_gender", ")", ":", "\n", "    ", "gender_dict", "=", "{", "}", "\n", "\n", "if", "to_gender", "not", "in", "[", "'fem'", ",", "'masc'", ",", "'neut'", "]", ":", "\n", "        ", "raise", "ValueError", "(", "'gender is not valid'", ")", "\n", "\n", "", "for", "w", "in", "tqdm", "(", "words", ")", ":", "\n", "        ", "if", "w", "in", "vocab", ":", "\n", "            ", "genders", "=", "extract_all_genders", "(", "w", ",", "words", ")", "\n", "if", "len", "(", "genders", ")", "==", "0", ":", "\n", "                ", "continue", "\n", "", "if", "len", "(", "genders", ")", "==", "1", "and", "to_gender", "in", "genders", ":", "\n", "                ", "continue", "\n", "", "if", "len", "(", "genders", ")", ">", "1", ":", "\n", "                ", "if", "to_gender", "in", "genders", ":", "\n", "#take lemma", "\n", "                    ", "gender_dict", "[", "w", "]", "=", "to_lemma_dict", "[", "w", "]", "\n", "", "else", ":", "\n", "                    ", "if", "to_gender", "==", "'masc'", ":", "\n", "                        ", "to_gender_dict", "=", "to_male_dict", "\n", "", "elif", "to_gender", "==", "'fem'", ":", "\n", "                        ", "to_gender_dict", "=", "to_female_dict", "\n", "", "elif", "to_gender", "==", "'neut'", ":", "\n", "                        ", "to_gender_dict", "=", "to_neut_dict", "\n", "", "gender_dict", "[", "w", "]", "=", "to_gender_dict", "[", "w", "]", "\n", "\n", "", "", "", "", "return", "gender_dict", "\n", "\n"]], "home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.create_pairs_word2vecf.create_lemma_dict": [[330, 356], ["tqdm.tqdm", "len", "sorted.append", "sorted.append", "sorted", "random.shuffle"], "function", ["None"], ["", "def", "create_lemma_dict", "(", "words", ",", "lang", ")", ":", "\n", "    ", "lemma_dict", "=", "{", "}", "\n", "\n", "for", "w", "in", "tqdm", "(", "words", ")", ":", "\n", "        ", "if", "w", "in", "vocab", ":", "\n", "            ", "options", "=", "[", "]", "\n", "if", "lang", "==", "'it'", ":", "\n", "                ", "for", "(", "lemma", ",", "pos", ",", "feat", ")", "in", "words", "[", "w", "]", ":", "\n", "                    ", "options", ".", "append", "(", "lemma", ")", "\n", "", "", "if", "lang", "==", "'de'", ":", "\n", "                ", "for", "lemma", ",", "features", "in", "words", "[", "w", "]", ":", "\n", "                    ", "options", ".", "append", "(", "lemma", ")", "\n", "", "", "if", "len", "(", "options", ")", ">", "0", ":", "\n", "                ", "if", "args", ".", "first", ":", "\n", "                    ", "options", "=", "sorted", "(", "options", ")", "\n", "", "else", ":", "\n", "                    ", "shuffle", "(", "options", ")", "\n", "", "value", "=", "options", "[", "0", "]", "\n", "lemma_dict", "[", "w", "]", "=", "value", "\n", "", "else", ":", "\n", "                ", "lemma_dict", "[", "w", "]", "=", "None", "\n", "", "", "if", "lang", "==", "'it'", "and", "args", ".", "plus", ":", "\n", "            ", "if", "w", "in", "manual_mapping_lemma", ":", "\n", "                ", "lemma_dict", "[", "w", "]", "=", "manual_mapping_lemma", "[", "w", "]", "\n", "\n", "", "", "", "return", "lemma_dict", "\n", "\n"]], "home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.create_pairs_word2vecf.create_options_dict": [[358, 378], ["tqdm.tqdm", "len", "list", "options.append", "options.append", "set", "set"], "function", ["None"], ["", "def", "create_options_dict", "(", "words", ",", "lang", ")", ":", "\n", "    ", "lemma_dict", "=", "{", "}", "\n", "\n", "count", "=", "0", "\n", "for", "w", "in", "tqdm", "(", "words", ")", ":", "\n", "        ", "if", "w", "in", "vocab", ":", "\n", "            ", "options", "=", "[", "]", "\n", "if", "lang", "==", "'it'", ":", "\n", "                ", "for", "(", "lemma", ",", "pos", ",", "feat", ")", "in", "words", "[", "w", "]", ":", "\n", "                    ", "options", ".", "append", "(", "lemma", ")", "\n", "", "", "if", "lang", "==", "'de'", ":", "\n", "                ", "for", "lemma", ",", "features", "in", "words", "[", "w", "]", ":", "\n", "                    ", "options", ".", "append", "(", "lemma", ")", "\n", "", "", "if", "len", "(", "set", "(", "options", ")", ")", ">", "0", ":", "\n", "                ", "lemma_dict", "[", "w", "]", "=", "list", "(", "set", "(", "options", ")", ")", "\n", "", "", "if", "lang", "==", "'it'", "and", "args", ".", "plus", ":", "\n", "            ", "if", "w", "in", "manual_mapping_lemma", ":", "\n", "                ", "lemma_dict", "[", "w", "]", "=", "[", "manual_mapping_lemma", "[", "w", "]", "]", "\n", "\n", "", "", "", "return", "lemma_dict", "\n", "\n"]], "home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.save_embeds.load_embeddings_from_w2vf": [[6, 16], ["print", "numpy.load", "codecs.open", "f_embed.read().split", "enumerate", "f_embed.read"], "function", ["None"], ["def", "load_embeddings_from_w2vf", "(", "filename", ")", ":", "\n", "    ", "print", "(", "'loading w2vf...'", ")", "\n", "\n", "wv", "=", "np", ".", "load", "(", "filename", "+", "'.npy'", ")", "\n", "with", "codecs", ".", "open", "(", "filename", "+", "'.vocab'", ",", "'r'", ",", "'utf-8'", ")", "as", "f_embed", ":", "\n", "        ", "vocab", "=", "f_embed", ".", "read", "(", ")", ".", "split", "(", ")", "\n", "\n", "", "w2i", "=", "{", "w", ":", "i", "for", "i", ",", "w", "in", "enumerate", "(", "vocab", ")", "}", "\n", "\n", "return", "vocab", ",", "wv", ",", "w2i", "\n", "\n"]], "home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.save_embeds.normalize": [[18, 23], ["numpy.apply_along_axis"], "function", ["None"], ["", "def", "normalize", "(", "wv", ")", ":", "\n", "# normalize vectors", "\n", "    ", "norms", "=", "np", ".", "apply_along_axis", "(", "LA", ".", "norm", ",", "1", ",", "wv", ")", "\n", "wv", "=", "wv", "/", "norms", "[", ":", ",", "np", ".", "newaxis", "]", "\n", "return", "wv", "\n", "\n"]], "home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.save_embeds.load_and_normalize": [[25, 32], ["save_embeds.load_embeddings_from_w2vf", "save_embeds.normalize", "print"], "function", ["home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.save_embeds.load_embeddings_from_w2vf", "home.repos.pwc.inspect_result.gonenhila_grammatical_gender.source.save_embeds.normalize"], ["", "def", "load_and_normalize", "(", "lang", ",", "filename", ",", "vocab", ",", "wv", ",", "w2i", ")", ":", "\n", "    ", "vocab_curr", ",", "wv_curr", ",", "w2i_curr", "=", "load_embeddings_from_w2vf", "(", "filename", ")", "\n", "wv_curr", "=", "normalize", "(", "wv_curr", ")", "\n", "vocab", "[", "lang", "]", "=", "vocab_curr", "\n", "wv", "[", "lang", "]", "=", "wv_curr", "\n", "w2i", "[", "lang", "]", "=", "w2i_curr", "\n", "print", "(", "'done'", ")", "\n", "", ""]]}