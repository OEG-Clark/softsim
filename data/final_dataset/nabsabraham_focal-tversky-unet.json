{"home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.unet": [[35, 72], ["keras.layers.Input", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "keras.layers.concatenate", "keras.layers.concatenate", "keras.layers.concatenate", "keras.layers.concatenate", "keras.models.Model", "keras.models.Model.compile", "keras.layers.MaxPooling2D", "keras.layers.MaxPooling2D", "keras.layers.MaxPooling2D", "keras.layers.MaxPooling2D", "keras.layers.Conv2D", "keras.layers.Conv2D", "keras.layers.Conv2D", "keras.layers.Conv2D", "keras.layers.Conv2D", "keras.layers.Conv2D", "keras.layers.Conv2D", "keras.layers.Conv2D", "keras.layers.Conv2D", "keras.layers.Conv2D", "keras.layers.Conv2DTranspose", "keras.layers.Conv2DTranspose", "keras.layers.Conv2DTranspose", "keras.layers.Conv2DTranspose"], "function", ["home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D"], ["def", "unet", "(", "opt", ",", "input_size", ",", "lossfxn", ")", ":", "\n", "\n", "    ", "inputs", "=", "Input", "(", "shape", "=", "input_size", ")", "\n", "conv1", "=", "UnetConv2D", "(", "inputs", ",", "32", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv1'", ")", "\n", "pool1", "=", "MaxPooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ")", "(", "conv1", ")", "\n", "\n", "conv2", "=", "UnetConv2D", "(", "pool1", ",", "64", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv2'", ")", "\n", "pool2", "=", "MaxPooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ")", "(", "conv2", ")", "\n", "\n", "conv3", "=", "UnetConv2D", "(", "pool2", ",", "128", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv3'", ")", "\n", "pool3", "=", "MaxPooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ")", "(", "conv3", ")", "\n", "\n", "conv4", "=", "UnetConv2D", "(", "pool3", ",", "256", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv4'", ")", "\n", "pool4", "=", "MaxPooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ")", "(", "conv4", ")", "\n", "\n", "conv5", "=", "Conv2D", "(", "512", ",", "(", "3", ",", "3", ")", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ",", "padding", "=", "'same'", ")", "(", "pool4", ")", "\n", "conv5", "=", "Conv2D", "(", "512", ",", "(", "3", ",", "3", ")", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ",", "padding", "=", "'same'", ")", "(", "conv5", ")", "\n", "\n", "up6", "=", "concatenate", "(", "[", "Conv2DTranspose", "(", "256", ",", "(", "2", ",", "2", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "kernel_initializer", "=", "kinit", ",", "padding", "=", "'same'", ")", "(", "conv5", ")", ",", "conv4", "]", ",", "axis", "=", "3", ")", "\n", "conv6", "=", "Conv2D", "(", "256", ",", "(", "3", ",", "3", ")", ",", "activation", "=", "'relu'", ",", "padding", "=", "'same'", ")", "(", "up6", ")", "\n", "conv6", "=", "Conv2D", "(", "256", ",", "(", "3", ",", "3", ")", ",", "activation", "=", "'relu'", ",", "padding", "=", "'same'", ")", "(", "conv6", ")", "\n", "\n", "up7", "=", "concatenate", "(", "[", "Conv2DTranspose", "(", "128", ",", "(", "2", ",", "2", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "padding", "=", "'same'", ")", "(", "conv6", ")", ",", "conv3", "]", ",", "axis", "=", "3", ")", "\n", "conv7", "=", "Conv2D", "(", "128", ",", "(", "3", ",", "3", ")", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ",", "padding", "=", "'same'", ")", "(", "up7", ")", "\n", "conv7", "=", "Conv2D", "(", "128", ",", "(", "3", ",", "3", ")", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ",", "padding", "=", "'same'", ")", "(", "conv7", ")", "\n", "\n", "up8", "=", "concatenate", "(", "[", "Conv2DTranspose", "(", "64", ",", "(", "2", ",", "2", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "kernel_initializer", "=", "kinit", ",", "padding", "=", "'same'", ")", "(", "conv7", ")", ",", "conv2", "]", ",", "axis", "=", "3", ")", "\n", "conv8", "=", "Conv2D", "(", "64", ",", "(", "3", ",", "3", ")", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ",", "padding", "=", "'same'", ")", "(", "up8", ")", "\n", "\n", "up9", "=", "concatenate", "(", "[", "Conv2DTranspose", "(", "32", ",", "(", "2", ",", "2", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "kernel_initializer", "=", "kinit", ",", "padding", "=", "'same'", ")", "(", "conv8", ")", ",", "conv1", "]", ",", "axis", "=", "3", ")", "\n", "conv9", "=", "Conv2D", "(", "32", ",", "(", "3", ",", "3", ")", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ",", "padding", "=", "'same'", ")", "(", "up9", ")", "\n", "conv9", "=", "Conv2D", "(", "32", ",", "(", "3", ",", "3", ")", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ",", "padding", "=", "'same'", ")", "(", "conv9", ")", "\n", "conv10", "=", "Conv2D", "(", "1", ",", "(", "1", ",", "1", ")", ",", "activation", "=", "'sigmoid'", ",", "name", "=", "'final'", ")", "(", "conv9", ")", "\n", "\n", "model", "=", "Model", "(", "inputs", "=", "[", "inputs", "]", ",", "outputs", "=", "[", "conv10", "]", ")", "\n", "model", ".", "compile", "(", "optimizer", "=", "opt", ",", "loss", "=", "lossfxn", ",", "metrics", "=", "[", "losses", ".", "dsc", ",", "losses", ".", "tp", ",", "losses", ".", "tn", "]", ")", "\n", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.expend_as": [[73, 76], ["keras.layers.Lambda", "keras.backend.repeat_elements"], "function", ["None"], ["", "def", "expend_as", "(", "tensor", ",", "rep", ",", "name", ")", ":", "\n", "\t", "my_repeat", "=", "Lambda", "(", "lambda", "x", ",", "repnum", ":", "K", ".", "repeat_elements", "(", "x", ",", "repnum", ",", "axis", "=", "3", ")", ",", "arguments", "=", "{", "'repnum'", ":", "rep", "}", ",", "name", "=", "'psi_up'", "+", "name", ")", "(", "tensor", ")", "\n", "return", "my_repeat", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.AttnGatingBlock": [[78, 108], ["keras.backend.int_shape", "keras.backend.int_shape", "keras.backend.int_shape", "keras.layers.add", "keras.backend.int_shape", "newmodels.expend_as", "keras.layers.multiply", "keras.layers.Conv2D", "keras.layers.Conv2D", "keras.layers.Conv2DTranspose", "keras.layers.Activation", "keras.layers.Conv2D", "keras.layers.Activation", "keras.layers.UpSampling2D", "keras.layers.Conv2D", "keras.layers.normalization.BatchNormalization"], "function", ["home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.expend_as"], ["", "def", "AttnGatingBlock", "(", "x", ",", "g", ",", "inter_shape", ",", "name", ")", ":", "\n", "    ", "''' take g which is the spatially smaller signal, do a conv to get the same\n    number of feature channels as x (bigger spatially)\n    do a conv on x to also get same geature channels (theta_x)\n    then, upsample g to be same size as x \n    add x and g (concat_xg)\n    relu, 1x1 conv, then sigmoid then upsample the final - this gives us attn coefficients'''", "\n", "\n", "shape_x", "=", "K", ".", "int_shape", "(", "x", ")", "# 32", "\n", "shape_g", "=", "K", ".", "int_shape", "(", "g", ")", "# 16", "\n", "\n", "theta_x", "=", "Conv2D", "(", "inter_shape", ",", "(", "2", ",", "2", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "padding", "=", "'same'", ",", "name", "=", "'xl'", "+", "name", ")", "(", "x", ")", "# 16", "\n", "shape_theta_x", "=", "K", ".", "int_shape", "(", "theta_x", ")", "\n", "\n", "phi_g", "=", "Conv2D", "(", "inter_shape", ",", "(", "1", ",", "1", ")", ",", "padding", "=", "'same'", ")", "(", "g", ")", "\n", "upsample_g", "=", "Conv2DTranspose", "(", "inter_shape", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "shape_theta_x", "[", "1", "]", "//", "shape_g", "[", "1", "]", ",", "shape_theta_x", "[", "2", "]", "//", "shape_g", "[", "2", "]", ")", ",", "padding", "=", "'same'", ",", "name", "=", "'g_up'", "+", "name", ")", "(", "phi_g", ")", "# 16", "\n", "\n", "concat_xg", "=", "add", "(", "[", "upsample_g", ",", "theta_x", "]", ")", "\n", "act_xg", "=", "Activation", "(", "'relu'", ")", "(", "concat_xg", ")", "\n", "psi", "=", "Conv2D", "(", "1", ",", "(", "1", ",", "1", ")", ",", "padding", "=", "'same'", ",", "name", "=", "'psi'", "+", "name", ")", "(", "act_xg", ")", "\n", "sigmoid_xg", "=", "Activation", "(", "'sigmoid'", ")", "(", "psi", ")", "\n", "shape_sigmoid", "=", "K", ".", "int_shape", "(", "sigmoid_xg", ")", "\n", "upsample_psi", "=", "UpSampling2D", "(", "size", "=", "(", "shape_x", "[", "1", "]", "//", "shape_sigmoid", "[", "1", "]", ",", "shape_x", "[", "2", "]", "//", "shape_sigmoid", "[", "2", "]", ")", ")", "(", "sigmoid_xg", ")", "# 32", "\n", "\n", "upsample_psi", "=", "expend_as", "(", "upsample_psi", ",", "shape_x", "[", "3", "]", ",", "name", ")", "\n", "y", "=", "multiply", "(", "[", "upsample_psi", ",", "x", "]", ",", "name", "=", "'q_attn'", "+", "name", ")", "\n", "\n", "result", "=", "Conv2D", "(", "shape_x", "[", "3", "]", ",", "(", "1", ",", "1", ")", ",", "padding", "=", "'same'", ",", "name", "=", "'q_attn_conv'", "+", "name", ")", "(", "y", ")", "\n", "result_bn", "=", "BatchNormalization", "(", "name", "=", "'q_attn_bn'", "+", "name", ")", "(", "result", ")", "\n", "return", "result_bn", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D": [[109, 120], ["keras.layers.Conv2D", "keras.layers.Activation", "keras.layers.Conv2D", "keras.layers.Activation", "keras.layers.normalization.BatchNormalization", "keras.layers.normalization.BatchNormalization"], "function", ["None"], ["", "def", "UnetConv2D", "(", "input", ",", "outdim", ",", "is_batchnorm", ",", "name", ")", ":", "\n", "\t", "x", "=", "Conv2D", "(", "outdim", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "1", ",", "1", ")", ",", "kernel_initializer", "=", "kinit", ",", "padding", "=", "\"same\"", ",", "name", "=", "name", "+", "'_1'", ")", "(", "input", ")", "\n", "if", "is_batchnorm", ":", "\n", "\t\t", "x", "=", "BatchNormalization", "(", "name", "=", "name", "+", "'_1_bn'", ")", "(", "x", ")", "\n", "", "x", "=", "Activation", "(", "'relu'", ",", "name", "=", "name", "+", "'_1_act'", ")", "(", "x", ")", "\n", "\n", "x", "=", "Conv2D", "(", "outdim", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "1", ",", "1", ")", ",", "kernel_initializer", "=", "kinit", ",", "padding", "=", "\"same\"", ",", "name", "=", "name", "+", "'_2'", ")", "(", "x", ")", "\n", "if", "is_batchnorm", ":", "\n", "\t\t", "x", "=", "BatchNormalization", "(", "name", "=", "name", "+", "'_2_bn'", ")", "(", "x", ")", "\n", "", "x", "=", "Activation", "(", "'relu'", ",", "name", "=", "name", "+", "'_2_act'", ")", "(", "x", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetGatingSignal": [[122, 130], ["keras.backend.int_shape", "keras.layers.Conv2D", "keras.layers.Activation", "keras.layers.normalization.BatchNormalization"], "function", ["None"], ["", "def", "UnetGatingSignal", "(", "input", ",", "is_batchnorm", ",", "name", ")", ":", "\n", "    ", "''' this is simply 1x1 convolution, bn, activation '''", "\n", "shape", "=", "K", ".", "int_shape", "(", "input", ")", "\n", "x", "=", "Conv2D", "(", "shape", "[", "3", "]", "*", "1", ",", "(", "1", ",", "1", ")", ",", "strides", "=", "(", "1", ",", "1", ")", ",", "padding", "=", "\"same\"", ",", "kernel_initializer", "=", "kinit", ",", "name", "=", "name", "+", "'_conv'", ")", "(", "input", ")", "\n", "if", "is_batchnorm", ":", "\n", "        ", "x", "=", "BatchNormalization", "(", "name", "=", "name", "+", "'_bn'", ")", "(", "x", ")", "\n", "", "x", "=", "Activation", "(", "'relu'", ",", "name", "=", "name", "+", "'_act'", ")", "(", "x", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.attn_unet": [[132, 168], ["keras.layers.Input", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "newmodels.UnetGatingSignal", "newmodels.AttnGatingBlock", "keras.layers.concatenate", "newmodels.UnetGatingSignal", "newmodels.AttnGatingBlock", "keras.layers.concatenate", "newmodels.UnetGatingSignal", "newmodels.AttnGatingBlock", "keras.layers.concatenate", "keras.layers.concatenate", "keras.models.Model", "keras.models.Model.compile", "keras.layers.MaxPooling2D", "keras.layers.MaxPooling2D", "keras.layers.MaxPooling2D", "keras.layers.MaxPooling2D", "keras.layers.Conv2D", "keras.layers.Conv2DTranspose", "keras.layers.Conv2DTranspose", "keras.layers.Conv2DTranspose", "keras.layers.Conv2DTranspose"], "function", ["home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetGatingSignal", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.AttnGatingBlock", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetGatingSignal", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.AttnGatingBlock", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetGatingSignal", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.AttnGatingBlock"], ["", "def", "attn_unet", "(", "opt", ",", "input_size", ",", "lossfxn", ")", ":", "\n", "    ", "inputs", "=", "Input", "(", "shape", "=", "input_size", ")", "\n", "conv1", "=", "UnetConv2D", "(", "inputs", ",", "32", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv1'", ")", "\n", "pool1", "=", "MaxPooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ")", "(", "conv1", ")", "\n", "\n", "conv2", "=", "UnetConv2D", "(", "pool1", ",", "32", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv2'", ")", "\n", "pool2", "=", "MaxPooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ")", "(", "conv2", ")", "\n", "\n", "conv3", "=", "UnetConv2D", "(", "pool2", ",", "64", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv3'", ")", "\n", "#conv3 = Dropout(0.2,name='drop_conv3')(conv3)", "\n", "pool3", "=", "MaxPooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ")", "(", "conv3", ")", "\n", "\n", "conv4", "=", "UnetConv2D", "(", "pool3", ",", "64", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv4'", ")", "\n", "#conv4 = Dropout(0.2, name='drop_conv4')(conv4)", "\n", "pool4", "=", "MaxPooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ")", "(", "conv4", ")", "\n", "\n", "center", "=", "UnetConv2D", "(", "pool4", ",", "128", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'center'", ")", "\n", "\n", "g1", "=", "UnetGatingSignal", "(", "center", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'g1'", ")", "\n", "attn1", "=", "AttnGatingBlock", "(", "conv4", ",", "g1", ",", "128", ",", "'_1'", ")", "\n", "up1", "=", "concatenate", "(", "[", "Conv2DTranspose", "(", "32", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "padding", "=", "'same'", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ")", "(", "center", ")", ",", "attn1", "]", ",", "name", "=", "'up1'", ")", "\n", "\n", "g2", "=", "UnetGatingSignal", "(", "up1", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'g2'", ")", "\n", "attn2", "=", "AttnGatingBlock", "(", "conv3", ",", "g2", ",", "64", ",", "'_2'", ")", "\n", "up2", "=", "concatenate", "(", "[", "Conv2DTranspose", "(", "64", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "padding", "=", "'same'", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ")", "(", "up1", ")", ",", "attn2", "]", ",", "name", "=", "'up2'", ")", "\n", "\n", "g3", "=", "UnetGatingSignal", "(", "up1", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'g3'", ")", "\n", "attn3", "=", "AttnGatingBlock", "(", "conv2", ",", "g3", ",", "32", ",", "'_3'", ")", "\n", "up3", "=", "concatenate", "(", "[", "Conv2DTranspose", "(", "32", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "padding", "=", "'same'", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ")", "(", "up2", ")", ",", "attn3", "]", ",", "name", "=", "'up3'", ")", "\n", "\n", "up4", "=", "concatenate", "(", "[", "Conv2DTranspose", "(", "32", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "padding", "=", "'same'", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ")", "(", "up3", ")", ",", "conv1", "]", ",", "name", "=", "'up4'", ")", "\n", "out", "=", "Conv2D", "(", "1", ",", "(", "1", ",", "1", ")", ",", "activation", "=", "'sigmoid'", ",", "kernel_initializer", "=", "kinit", ",", "name", "=", "'final'", ")", "(", "up4", ")", "\n", "\n", "model", "=", "Model", "(", "inputs", "=", "[", "inputs", "]", ",", "outputs", "=", "[", "out", "]", ")", "\n", "model", ".", "compile", "(", "optimizer", "=", "opt", ",", "loss", "=", "lossfxn", ",", "metrics", "=", "[", "losses", ".", "dsc", ",", "losses", ".", "tp", ",", "losses", ".", "tn", "]", ")", "\n", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.attn_reg_ds": [[171, 229], ["keras.layers.Input", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "newmodels.UnetGatingSignal", "newmodels.AttnGatingBlock", "keras.layers.concatenate", "newmodels.UnetGatingSignal", "newmodels.AttnGatingBlock", "keras.layers.concatenate", "newmodels.UnetGatingSignal", "newmodels.AttnGatingBlock", "keras.layers.concatenate", "keras.layers.concatenate", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "keras.models.Model", "keras.models.Model.compile", "keras.layers.MaxPooling2D", "keras.layers.MaxPooling2D", "keras.layers.MaxPooling2D", "keras.layers.MaxPooling2D", "keras.layers.Conv2D", "keras.layers.Conv2D", "keras.layers.Conv2D", "keras.layers.Conv2D", "keras.layers.Conv2DTranspose", "keras.layers.Conv2DTranspose", "keras.layers.Conv2DTranspose", "keras.layers.Conv2DTranspose"], "function", ["home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetGatingSignal", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.AttnGatingBlock", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetGatingSignal", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.AttnGatingBlock", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetGatingSignal", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.AttnGatingBlock", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D"], ["", "def", "attn_reg_ds", "(", "opt", ",", "input_size", ",", "lossfxn", ")", ":", "\n", "\n", "    ", "img_input", "=", "Input", "(", "shape", "=", "input_size", ",", "name", "=", "'input_scale1'", ")", "\n", "\n", "conv1", "=", "UnetConv2D", "(", "img_input", ",", "32", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv1'", ")", "\n", "pool1", "=", "MaxPooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ")", "(", "conv1", ")", "\n", "\n", "conv2", "=", "UnetConv2D", "(", "pool1", ",", "64", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv2'", ")", "\n", "pool2", "=", "MaxPooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ")", "(", "conv2", ")", "\n", "\n", "conv3", "=", "UnetConv2D", "(", "pool2", ",", "128", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv3'", ")", "\n", "#conv3 = Dropout(0.2,name='drop_conv3')(conv3)", "\n", "pool3", "=", "MaxPooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ")", "(", "conv3", ")", "\n", "\n", "conv4", "=", "UnetConv2D", "(", "pool3", ",", "64", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv4'", ")", "\n", "#conv4 = Dropout(0.2, name='drop_conv4')(conv4)", "\n", "pool4", "=", "MaxPooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ")", "(", "conv4", ")", "\n", "\n", "center", "=", "UnetConv2D", "(", "pool4", ",", "512", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'center'", ")", "\n", "\n", "g1", "=", "UnetGatingSignal", "(", "center", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'g1'", ")", "\n", "attn1", "=", "AttnGatingBlock", "(", "conv4", ",", "g1", ",", "128", ",", "'_1'", ")", "\n", "up1", "=", "concatenate", "(", "[", "Conv2DTranspose", "(", "32", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "padding", "=", "'same'", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ")", "(", "center", ")", ",", "attn1", "]", ",", "name", "=", "'up1'", ")", "\n", "\n", "g2", "=", "UnetGatingSignal", "(", "up1", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'g2'", ")", "\n", "attn2", "=", "AttnGatingBlock", "(", "conv3", ",", "g2", ",", "64", ",", "'_2'", ")", "\n", "up2", "=", "concatenate", "(", "[", "Conv2DTranspose", "(", "64", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "padding", "=", "'same'", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ")", "(", "up1", ")", ",", "attn2", "]", ",", "name", "=", "'up2'", ")", "\n", "\n", "g3", "=", "UnetGatingSignal", "(", "up1", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'g3'", ")", "\n", "attn3", "=", "AttnGatingBlock", "(", "conv2", ",", "g3", ",", "32", ",", "'_3'", ")", "\n", "up3", "=", "concatenate", "(", "[", "Conv2DTranspose", "(", "32", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "padding", "=", "'same'", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ")", "(", "up2", ")", ",", "attn3", "]", ",", "name", "=", "'up3'", ")", "\n", "\n", "up4", "=", "concatenate", "(", "[", "Conv2DTranspose", "(", "32", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "padding", "=", "'same'", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ")", "(", "up3", ")", ",", "conv1", "]", ",", "name", "=", "'up4'", ")", "\n", "\n", "conv6", "=", "UnetConv2D", "(", "up1", ",", "256", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv6'", ")", "\n", "conv7", "=", "UnetConv2D", "(", "up2", ",", "128", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv7'", ")", "\n", "conv8", "=", "UnetConv2D", "(", "up3", ",", "64", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv8'", ")", "\n", "conv9", "=", "UnetConv2D", "(", "up4", ",", "32", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv9'", ")", "\n", "\n", "out6", "=", "Conv2D", "(", "1", ",", "(", "1", ",", "1", ")", ",", "activation", "=", "'sigmoid'", ",", "name", "=", "'pred1'", ")", "(", "conv6", ")", "\n", "out7", "=", "Conv2D", "(", "1", ",", "(", "1", ",", "1", ")", ",", "activation", "=", "'sigmoid'", ",", "name", "=", "'pred2'", ")", "(", "conv7", ")", "\n", "out8", "=", "Conv2D", "(", "1", ",", "(", "1", ",", "1", ")", ",", "activation", "=", "'sigmoid'", ",", "name", "=", "'pred3'", ")", "(", "conv8", ")", "\n", "out9", "=", "Conv2D", "(", "1", ",", "(", "1", ",", "1", ")", ",", "activation", "=", "'sigmoid'", ",", "name", "=", "'final'", ")", "(", "conv9", ")", "\n", "\n", "model", "=", "Model", "(", "inputs", "=", "[", "img_input", "]", ",", "outputs", "=", "[", "out6", ",", "out7", ",", "out8", ",", "out9", "]", ")", "\n", "\n", "loss", "=", "{", "'pred1'", ":", "lossfxn", ",", "\n", "'pred2'", ":", "lossfxn", ",", "\n", "'pred3'", ":", "lossfxn", ",", "\n", "'final'", ":", "lossfxn", "}", "\n", "\n", "loss_weights", "=", "{", "'pred1'", ":", "1", ",", "\n", "'pred2'", ":", "1", ",", "\n", "'pred3'", ":", "1", ",", "\n", "'final'", ":", "1", "}", "\n", "model", ".", "compile", "(", "optimizer", "=", "opt", ",", "loss", "=", "loss", ",", "loss_weights", "=", "loss_weights", ",", "\n", "metrics", "=", "[", "losses", ".", "dsc", "]", ")", "\n", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.attn_reg": [[233, 298], ["keras.layers.Input", "newmodels.UnetConv2D", "keras.layers.concatenate", "newmodels.UnetConv2D", "keras.layers.concatenate", "newmodels.UnetConv2D", "keras.layers.concatenate", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "newmodels.UnetGatingSignal", "newmodels.AttnGatingBlock", "keras.layers.concatenate", "newmodels.UnetGatingSignal", "newmodels.AttnGatingBlock", "keras.layers.concatenate", "newmodels.UnetGatingSignal", "newmodels.AttnGatingBlock", "keras.layers.concatenate", "keras.layers.concatenate", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "newmodels.UnetConv2D", "keras.models.Model", "keras.models.Model.compile", "keras.layers.AveragePooling2D", "keras.layers.AveragePooling2D", "keras.layers.AveragePooling2D", "keras.layers.MaxPooling2D", "keras.layers.Conv2D", "keras.layers.MaxPooling2D", "keras.layers.Conv2D", "keras.layers.MaxPooling2D", "keras.layers.Conv2D", "keras.layers.MaxPooling2D", "keras.layers.Conv2D", "keras.layers.Conv2D", "keras.layers.Conv2D", "keras.layers.Conv2D", "keras.layers.Conv2DTranspose", "keras.layers.Conv2DTranspose", "keras.layers.Conv2DTranspose", "keras.layers.Conv2DTranspose"], "function", ["home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetGatingSignal", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.AttnGatingBlock", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetGatingSignal", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.AttnGatingBlock", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetGatingSignal", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.AttnGatingBlock", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.newmodels.UnetConv2D"], ["", "def", "attn_reg", "(", "opt", ",", "input_size", ",", "lossfxn", ")", ":", "\n", "\n", "    ", "img_input", "=", "Input", "(", "shape", "=", "input_size", ",", "name", "=", "'input_scale1'", ")", "\n", "scale_img_2", "=", "AveragePooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ",", "name", "=", "'input_scale2'", ")", "(", "img_input", ")", "\n", "scale_img_3", "=", "AveragePooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ",", "name", "=", "'input_scale3'", ")", "(", "scale_img_2", ")", "\n", "scale_img_4", "=", "AveragePooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ",", "name", "=", "'input_scale4'", ")", "(", "scale_img_3", ")", "\n", "\n", "conv1", "=", "UnetConv2D", "(", "img_input", ",", "32", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv1'", ")", "\n", "pool1", "=", "MaxPooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ")", "(", "conv1", ")", "\n", "\n", "input2", "=", "Conv2D", "(", "64", ",", "(", "3", ",", "3", ")", ",", "padding", "=", "'same'", ",", "activation", "=", "'relu'", ",", "name", "=", "'conv_scale2'", ")", "(", "scale_img_2", ")", "\n", "input2", "=", "concatenate", "(", "[", "input2", ",", "pool1", "]", ",", "axis", "=", "3", ")", "\n", "conv2", "=", "UnetConv2D", "(", "input2", ",", "64", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv2'", ")", "\n", "pool2", "=", "MaxPooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ")", "(", "conv2", ")", "\n", "\n", "input3", "=", "Conv2D", "(", "128", ",", "(", "3", ",", "3", ")", ",", "padding", "=", "'same'", ",", "activation", "=", "'relu'", ",", "name", "=", "'conv_scale3'", ")", "(", "scale_img_3", ")", "\n", "input3", "=", "concatenate", "(", "[", "input3", ",", "pool2", "]", ",", "axis", "=", "3", ")", "\n", "conv3", "=", "UnetConv2D", "(", "input3", ",", "128", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv3'", ")", "\n", "pool3", "=", "MaxPooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ")", "(", "conv3", ")", "\n", "\n", "input4", "=", "Conv2D", "(", "256", ",", "(", "3", ",", "3", ")", ",", "padding", "=", "'same'", ",", "activation", "=", "'relu'", ",", "name", "=", "'conv_scale4'", ")", "(", "scale_img_4", ")", "\n", "input4", "=", "concatenate", "(", "[", "input4", ",", "pool3", "]", ",", "axis", "=", "3", ")", "\n", "conv4", "=", "UnetConv2D", "(", "input4", ",", "64", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv4'", ")", "\n", "pool4", "=", "MaxPooling2D", "(", "pool_size", "=", "(", "2", ",", "2", ")", ")", "(", "conv4", ")", "\n", "\n", "center", "=", "UnetConv2D", "(", "pool4", ",", "512", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'center'", ")", "\n", "\n", "g1", "=", "UnetGatingSignal", "(", "center", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'g1'", ")", "\n", "attn1", "=", "AttnGatingBlock", "(", "conv4", ",", "g1", ",", "128", ",", "'_1'", ")", "\n", "up1", "=", "concatenate", "(", "[", "Conv2DTranspose", "(", "32", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "padding", "=", "'same'", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ")", "(", "center", ")", ",", "attn1", "]", ",", "name", "=", "'up1'", ")", "\n", "\n", "g2", "=", "UnetGatingSignal", "(", "up1", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'g2'", ")", "\n", "attn2", "=", "AttnGatingBlock", "(", "conv3", ",", "g2", ",", "64", ",", "'_2'", ")", "\n", "up2", "=", "concatenate", "(", "[", "Conv2DTranspose", "(", "64", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "padding", "=", "'same'", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ")", "(", "up1", ")", ",", "attn2", "]", ",", "name", "=", "'up2'", ")", "\n", "\n", "g3", "=", "UnetGatingSignal", "(", "up1", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'g3'", ")", "\n", "attn3", "=", "AttnGatingBlock", "(", "conv2", ",", "g3", ",", "32", ",", "'_3'", ")", "\n", "up3", "=", "concatenate", "(", "[", "Conv2DTranspose", "(", "32", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "padding", "=", "'same'", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ")", "(", "up2", ")", ",", "attn3", "]", ",", "name", "=", "'up3'", ")", "\n", "\n", "up4", "=", "concatenate", "(", "[", "Conv2DTranspose", "(", "32", ",", "(", "3", ",", "3", ")", ",", "strides", "=", "(", "2", ",", "2", ")", ",", "padding", "=", "'same'", ",", "activation", "=", "'relu'", ",", "kernel_initializer", "=", "kinit", ")", "(", "up3", ")", ",", "conv1", "]", ",", "name", "=", "'up4'", ")", "\n", "\n", "conv6", "=", "UnetConv2D", "(", "up1", ",", "256", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv6'", ")", "\n", "conv7", "=", "UnetConv2D", "(", "up2", ",", "128", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv7'", ")", "\n", "conv8", "=", "UnetConv2D", "(", "up3", ",", "64", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv8'", ")", "\n", "conv9", "=", "UnetConv2D", "(", "up4", ",", "32", ",", "is_batchnorm", "=", "True", ",", "name", "=", "'conv9'", ")", "\n", "\n", "out6", "=", "Conv2D", "(", "1", ",", "(", "1", ",", "1", ")", ",", "activation", "=", "'sigmoid'", ",", "name", "=", "'pred1'", ")", "(", "conv6", ")", "\n", "out7", "=", "Conv2D", "(", "1", ",", "(", "1", ",", "1", ")", ",", "activation", "=", "'sigmoid'", ",", "name", "=", "'pred2'", ")", "(", "conv7", ")", "\n", "out8", "=", "Conv2D", "(", "1", ",", "(", "1", ",", "1", ")", ",", "activation", "=", "'sigmoid'", ",", "name", "=", "'pred3'", ")", "(", "conv8", ")", "\n", "out9", "=", "Conv2D", "(", "1", ",", "(", "1", ",", "1", ")", ",", "activation", "=", "'sigmoid'", ",", "name", "=", "'final'", ")", "(", "conv9", ")", "\n", "\n", "model", "=", "Model", "(", "inputs", "=", "[", "img_input", "]", ",", "outputs", "=", "[", "out6", ",", "out7", ",", "out8", ",", "out9", "]", ")", "\n", "\n", "loss", "=", "{", "'pred1'", ":", "lossfxn", ",", "\n", "'pred2'", ":", "lossfxn", ",", "\n", "'pred3'", ":", "lossfxn", ",", "\n", "'final'", ":", "losses", ".", "tversky_loss", "}", "\n", "\n", "loss_weights", "=", "{", "'pred1'", ":", "1", ",", "\n", "'pred2'", ":", "1", ",", "\n", "'pred3'", ":", "1", ",", "\n", "'final'", ":", "1", "}", "\n", "model", ".", "compile", "(", "optimizer", "=", "opt", ",", "loss", "=", "loss", ",", "loss_weights", "=", "loss_weights", ",", "\n", "metrics", "=", "[", "losses", ".", "dsc", "]", ")", "\n", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.utils.plot": [[11, 42], ["matplotlib.figure", "numpy.arange", "matplotlib.plot", "matplotlib.plot", "matplotlib.grid", "matplotlib.legend", "matplotlib.title", "matplotlib.xlabel", "matplotlib.ylabel", "matplotlib.figure", "matplotlib.plot", "matplotlib.plot", "matplotlib.grid", "matplotlib.legend", "matplotlib.title", "matplotlib.xlabel", "matplotlib.ylabel", "len"], "function", ["home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.utils.plot", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.utils.plot", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.utils.plot", "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.utils.plot"], ["def", "plot", "(", "hist", ",", "epochnum", ",", "batchnum", ",", "name", ",", "is_attnnet", "=", "0", ")", ":", "\n", "    ", "plt", ".", "figure", "(", ")", "\n", "\n", "if", "is_attnnet", "==", "True", ":", "\n", "        ", "train_loss", "=", "hist", "[", "'final_loss'", "]", "\n", "val_loss", "=", "hist", "[", "'val_final_loss'", "]", "\n", "acc", "=", "hist", "[", "'final_dsc'", "]", "\n", "val_acc", "=", "hist", "[", "'val_final_dsc'", "]", "\n", "", "else", ":", "\n", "        ", "train_loss", "=", "hist", "[", "'loss'", "]", "\n", "val_loss", "=", "hist", "[", "'val_loss'", "]", "\n", "acc", "=", "hist", "[", "'dsc'", "]", "\n", "val_acc", "=", "hist", "[", "'val_dsc'", "]", "\n", "\n", "", "epochs", "=", "np", ".", "arange", "(", "1", ",", "len", "(", "train_loss", ")", "+", "1", ",", "1", ")", "\n", "plt", ".", "plot", "(", "epochs", ",", "train_loss", ",", "'b'", ",", "label", "=", "'Training Loss'", ")", "\n", "plt", ".", "plot", "(", "epochs", ",", "val_loss", ",", "'r'", ",", "label", "=", "'Validation Loss'", ")", "\n", "plt", ".", "grid", "(", "color", "=", "'gray'", ",", "linestyle", "=", "'--'", ")", "\n", "plt", ".", "legend", "(", ")", "\n", "plt", ".", "title", "(", "'LOSS Model={}, Epochs={}, Batch={}'", ".", "format", "(", "name", ",", "epochnum", ",", "batchnum", ")", ")", "\n", "plt", ".", "xlabel", "(", "'Epochs'", ")", "\n", "plt", ".", "ylabel", "(", "'Loss'", ")", "\n", "\n", "plt", ".", "figure", "(", ")", "\n", "plt", ".", "plot", "(", "epochs", ",", "acc", ",", "'b'", ",", "label", "=", "'Training Dice Coefficient'", ")", "\n", "plt", ".", "plot", "(", "epochs", ",", "val_acc", ",", "'r'", ",", "label", "=", "'Validation Dice Coefficient'", ")", "\n", "plt", ".", "grid", "(", "color", "=", "'gray'", ",", "linestyle", "=", "'--'", ")", "\n", "plt", ".", "legend", "(", ")", "\n", "plt", ".", "title", "(", "'DSC Model={}, Epochs={}, Batch={}'", ".", "format", "(", "name", ",", "epochnum", ",", "batchnum", ")", ")", "\n", "plt", ".", "xlabel", "(", "'Epochs'", ")", "\n", "plt", ".", "ylabel", "(", "'Dice'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.utils.check_preds": [[44, 51], ["numpy.ndarray.flatten", "numpy.ndarray.flatten", "numpy.sum", "numpy.round", "numpy.clip", "numpy.clip", "numpy.sum", "numpy.sum"], "function", ["None"], ["", "def", "check_preds", "(", "ypred", ",", "ytrue", ")", ":", "\n", "    ", "smooth", "=", "1", "\n", "pred", "=", "np", ".", "ndarray", ".", "flatten", "(", "np", ".", "clip", "(", "ypred", ",", "0", ",", "1", ")", ")", "\n", "gt", "=", "np", ".", "ndarray", ".", "flatten", "(", "np", ".", "clip", "(", "ytrue", ",", "0", ",", "1", ")", ")", "\n", "intersection", "=", "np", ".", "sum", "(", "pred", "*", "gt", ")", "\n", "union", "=", "np", ".", "sum", "(", "pred", ")", "+", "np", ".", "sum", "(", "gt", ")", "\n", "return", "np", ".", "round", "(", "(", "2", "*", "intersection", "+", "smooth", ")", "/", "(", "union", "+", "smooth", ")", ",", "decimals", "=", "5", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.utils.confusion": [[52, 61], ["numpy.round", "numpy.round", "numpy.clip", "numpy.clip", "numpy.sum", "numpy.sum", "numpy.sum", "numpy.sum"], "function", ["None"], ["", "def", "confusion", "(", "y_true", ",", "y_pred", ")", ":", "\n", "    ", "smooth", "=", "1", "\n", "y_pred_pos", "=", "np", ".", "round", "(", "np", ".", "clip", "(", "y_pred", ",", "0", ",", "1", ")", ")", "\n", "y_pred_neg", "=", "1", "-", "y_pred_pos", "\n", "y_pos", "=", "np", ".", "round", "(", "np", ".", "clip", "(", "y_true", ",", "0", ",", "1", ")", ")", "\n", "y_neg", "=", "1", "-", "y_pos", "\n", "tp", "=", "(", "np", ".", "sum", "(", "y_pos", "*", "y_pred_pos", ")", "+", "smooth", ")", "/", "(", "np", ".", "sum", "(", "y_pos", ")", "+", "smooth", ")", "\n", "tn", "=", "(", "np", ".", "sum", "(", "y_neg", "*", "y_pred_neg", ")", "+", "smooth", ")", "/", "(", "np", ".", "sum", "(", "y_neg", ")", "+", "smooth", ")", "\n", "return", "[", "tp", ",", "tn", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.utils.auc": [[62, 76], ["numpy.round", "numpy.round", "numpy.sum", "numpy.sum", "numpy.sum", "numpy.sum", "numpy.clip", "numpy.clip"], "function", ["None"], ["", "def", "auc", "(", "y_true", ",", "y_pred", ")", ":", "\n", "    ", "smooth", "=", "1", "\n", "y_pred_pos", "=", "np", ".", "round", "(", "np", ".", "clip", "(", "y_pred", ",", "0", ",", "1", ")", ")", "\n", "y_pred_neg", "=", "1", "-", "y_pred_pos", "\n", "y_pos", "=", "np", ".", "round", "(", "np", ".", "clip", "(", "y_true", ",", "0", ",", "1", ")", ")", "\n", "y_neg", "=", "1", "-", "y_pos", "\n", "tp", "=", "np", ".", "sum", "(", "y_pos", "*", "y_pred_pos", ")", "\n", "tn", "=", "np", ".", "sum", "(", "y_neg", "*", "y_pred_neg", ")", "\n", "fp", "=", "np", ".", "sum", "(", "y_neg", "*", "y_pred_pos", ")", "\n", "fn", "=", "np", ".", "sum", "(", "y_pos", "*", "y_pred_neg", ")", "\n", "tpr", "=", "(", "tp", "+", "smooth", ")", "/", "(", "tp", "+", "fn", "+", "smooth", ")", "#recall", "\n", "tnr", "=", "(", "tn", "+", "smooth", ")", "/", "(", "tn", "+", "fp", "+", "smooth", ")", "\n", "prec", "=", "(", "tp", "+", "smooth", ")", "/", "(", "tp", "+", "fp", "+", "smooth", ")", "#precision", "\n", "return", "[", "tpr", ",", "tnr", ",", "prec", "]", "", "", ""]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.losses.dsc": [[8, 15], ["keras.flatten", "keras.flatten", "keras.sum", "keras.sum", "keras.sum"], "function", ["None"], ["def", "dsc", "(", "y_true", ",", "y_pred", ")", ":", "\n", "    ", "smooth", "=", "1.", "\n", "y_true_f", "=", "K", ".", "flatten", "(", "y_true", ")", "\n", "y_pred_f", "=", "K", ".", "flatten", "(", "y_pred", ")", "\n", "intersection", "=", "K", ".", "sum", "(", "y_true_f", "*", "y_pred_f", ")", "\n", "score", "=", "(", "2.", "*", "intersection", "+", "smooth", ")", "/", "(", "K", ".", "sum", "(", "y_true_f", ")", "+", "K", ".", "sum", "(", "y_pred_f", ")", "+", "smooth", ")", "\n", "return", "score", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.losses.dice_loss": [[16, 19], ["losses.dsc"], "function", ["home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.losses.dsc"], ["", "def", "dice_loss", "(", "y_true", ",", "y_pred", ")", ":", "\n", "    ", "loss", "=", "1", "-", "dsc", "(", "y_true", ",", "y_pred", ")", "\n", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.losses.bce_dice_loss": [[20, 23], ["keras.losses.binary_crossentropy", "losses.dice_loss"], "function", ["home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.losses.dice_loss"], ["", "def", "bce_dice_loss", "(", "y_true", ",", "y_pred", ")", ":", "\n", "    ", "loss", "=", "binary_crossentropy", "(", "y_true", ",", "y_pred", ")", "+", "dice_loss", "(", "y_true", ",", "y_pred", ")", "\n", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.losses.confusion": [[24, 36], ["keras.clip", "keras.clip", "keras.sum", "keras.sum", "keras.sum"], "function", ["None"], ["", "def", "confusion", "(", "y_true", ",", "y_pred", ")", ":", "\n", "    ", "smooth", "=", "1", "\n", "y_pred_pos", "=", "K", ".", "clip", "(", "y_pred", ",", "0", ",", "1", ")", "\n", "y_pred_neg", "=", "1", "-", "y_pred_pos", "\n", "y_pos", "=", "K", ".", "clip", "(", "y_true", ",", "0", ",", "1", ")", "\n", "y_neg", "=", "1", "-", "y_pos", "\n", "tp", "=", "K", ".", "sum", "(", "y_pos", "*", "y_pred_pos", ")", "\n", "fp", "=", "K", ".", "sum", "(", "y_neg", "*", "y_pred_pos", ")", "\n", "fn", "=", "K", ".", "sum", "(", "y_pos", "*", "y_pred_neg", ")", "\n", "prec", "=", "(", "tp", "+", "smooth", ")", "/", "(", "tp", "+", "fp", "+", "smooth", ")", "\n", "recall", "=", "(", "tp", "+", "smooth", ")", "/", "(", "tp", "+", "fn", "+", "smooth", ")", "\n", "return", "prec", ",", "recall", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.losses.tp": [[37, 43], ["keras.round", "keras.round", "keras.clip", "keras.clip", "keras.sum", "keras.sum"], "function", ["None"], ["", "def", "tp", "(", "y_true", ",", "y_pred", ")", ":", "\n", "    ", "smooth", "=", "1", "\n", "y_pred_pos", "=", "K", ".", "round", "(", "K", ".", "clip", "(", "y_pred", ",", "0", ",", "1", ")", ")", "\n", "y_pos", "=", "K", ".", "round", "(", "K", ".", "clip", "(", "y_true", ",", "0", ",", "1", ")", ")", "\n", "tp", "=", "(", "K", ".", "sum", "(", "y_pos", "*", "y_pred_pos", ")", "+", "smooth", ")", "/", "(", "K", ".", "sum", "(", "y_pos", ")", "+", "smooth", ")", "\n", "return", "tp", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.losses.tn": [[44, 52], ["keras.round", "keras.round", "keras.clip", "keras.clip", "keras.sum", "keras.sum"], "function", ["None"], ["", "def", "tn", "(", "y_true", ",", "y_pred", ")", ":", "\n", "    ", "smooth", "=", "1", "\n", "y_pred_pos", "=", "K", ".", "round", "(", "K", ".", "clip", "(", "y_pred", ",", "0", ",", "1", ")", ")", "\n", "y_pred_neg", "=", "1", "-", "y_pred_pos", "\n", "y_pos", "=", "K", ".", "round", "(", "K", ".", "clip", "(", "y_true", ",", "0", ",", "1", ")", ")", "\n", "y_neg", "=", "1", "-", "y_pos", "\n", "tn", "=", "(", "K", ".", "sum", "(", "y_neg", "*", "y_pred_neg", ")", "+", "smooth", ")", "/", "(", "K", ".", "sum", "(", "y_neg", ")", "+", "smooth", ")", "\n", "return", "tn", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.losses.tversky": [[53, 61], ["keras.flatten", "keras.flatten", "keras.sum", "keras.sum", "keras.sum"], "function", ["None"], ["", "def", "tversky", "(", "y_true", ",", "y_pred", ")", ":", "\n", "    ", "y_true_pos", "=", "K", ".", "flatten", "(", "y_true", ")", "\n", "y_pred_pos", "=", "K", ".", "flatten", "(", "y_pred", ")", "\n", "true_pos", "=", "K", ".", "sum", "(", "y_true_pos", "*", "y_pred_pos", ")", "\n", "false_neg", "=", "K", ".", "sum", "(", "y_true_pos", "*", "(", "1", "-", "y_pred_pos", ")", ")", "\n", "false_pos", "=", "K", ".", "sum", "(", "(", "1", "-", "y_true_pos", ")", "*", "y_pred_pos", ")", "\n", "alpha", "=", "0.7", "\n", "return", "(", "true_pos", "+", "smooth", ")", "/", "(", "true_pos", "+", "alpha", "*", "false_neg", "+", "(", "1", "-", "alpha", ")", "*", "false_pos", "+", "smooth", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.losses.tversky_loss": [[62, 64], ["losses.tversky"], "function", ["home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.losses.tversky"], ["", "def", "tversky_loss", "(", "y_true", ",", "y_pred", ")", ":", "\n", "    ", "return", "1", "-", "tversky", "(", "y_true", ",", "y_pred", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.losses.focal_tversky": [[65, 69], ["losses.tversky", "keras.pow"], "function", ["home.repos.pwc.inspect_result.nabsabraham_focal-tversky-unet.None.losses.tversky"], ["", "def", "focal_tversky", "(", "y_true", ",", "y_pred", ")", ":", "\n", "    ", "pt_1", "=", "tversky", "(", "y_true", ",", "y_pred", ")", "\n", "gamma", "=", "0.75", "\n", "return", "K", ".", "pow", "(", "(", "1", "-", "pt_1", ")", ",", "gamma", ")", "\n", "", ""]]}