{"home.repos.pwc.inspect_result.sadafsk_fl_rd.None.main.train_validation_split": [[111, 119], ["len", "int"], "function", ["None"], ["def", "train_validation_split", "(", "X_train", ",", "Y_train", ")", ":", "\n", "    ", "train_length", "=", "len", "(", "X_train", ")", "\n", "validation_length", "=", "int", "(", "train_length", "/", "4", ")", "\n", "X_validation", "=", "X_train", "[", ":", "validation_length", "]", "\n", "X_train", "=", "X_train", "[", "validation_length", ":", "]", "\n", "Y_validation", "=", "Y_train", "[", ":", "validation_length", "]", "\n", "Y_train", "=", "Y_train", "[", "validation_length", ":", "]", "\n", "return", "X_train", ",", "Y_train", ",", "X_validation", ",", "Y_validation", "\n", "\n"]], "home.repos.pwc.inspect_result.sadafsk_fl_rd.None.main.top_k_sparsificate_model_weights_tf": [[124, 140], ["tmp_list.sort", "el.reshape().tolist", "el.reshape", "range", "new_weights.append", "len", "el.reshape.reshape", "el.reshape", "abs", "int", "abs"], "function", ["None"], ["", "def", "top_k_sparsificate_model_weights_tf", "(", "weights", ",", "fraction", ")", ":", "\n", "    ", "tmp_list", "=", "[", "]", "\n", "for", "el", "in", "weights", ":", "\n", "        ", "lay_list", "=", "el", ".", "reshape", "(", "(", "-", "1", ")", ")", ".", "tolist", "(", ")", "\n", "tmp_list", "=", "tmp_list", "+", "[", "abs", "(", "el", ")", "for", "el", "in", "lay_list", "]", "\n", "", "tmp_list", ".", "sort", "(", "reverse", "=", "True", ")", "\n", "k_th_element", "=", "tmp_list", "[", "int", "(", "fraction", "*", "552874", ")", "-", "1", "]", "# 552874 is the number of parameters of the CNNs!", "\n", "new_weights", "=", "[", "]", "\n", "for", "el", "in", "weights", ":", "\n", "        ", "original_shape", "=", "el", ".", "shape", "\n", "reshaped_el", "=", "el", ".", "reshape", "(", "(", "-", "1", ")", ")", "\n", "for", "i", "in", "range", "(", "len", "(", "reshaped_el", ")", ")", ":", "\n", "            ", "if", "abs", "(", "reshaped_el", "[", "i", "]", ")", "<", "k_th_element", ":", "\n", "                ", "reshaped_el", "[", "i", "]", "=", "0.0", "\n", "", "", "new_weights", ".", "append", "(", "reshaped_el", ".", "reshape", "(", "original_shape", ")", ")", "\n", "", "return", "new_weights", "\n", "\n"]], "home.repos.pwc.inspect_result.sadafsk_fl_rd.None.main.pdf_gennorm": [[143, 145], ["stats.gennorm.pdf"], "function", ["None"], ["", "def", "pdf_gennorm", "(", "x", ",", "a", ",", "m", ",", "b", ")", ":", "\n", "  ", "return", "stats", ".", "gennorm", ".", "pdf", "(", "x", ",", "a", ",", "m", ",", "b", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.sadafsk_fl_rd.None.main.update_centers_magnitude_distance": [[148, 177], ["stats.gennorm.fit", "numpy.random.uniform", "numpy.concatenate", "numpy.zeros", "range", "numpy.copy", "numpy.copy", "range", "min", "max", "min", "numpy.divide", "range", "numpy.divide", "range", "abs", "abs", "len", "len", "scipy.integrate.quad", "scipy.integrate.quad", "numpy.divide", "scipy.integrate.quad", "scipy.integrate.quad", "len", "len", "scipy.integrate.quad", "scipy.integrate.quad", "len", "main.pdf_gennorm", "main.pdf_gennorm", "main.pdf_gennorm", "main.pdf_gennorm", "main.pdf_gennorm", "main.pdf_gennorm", "len", "len"], "function", ["home.repos.pwc.inspect_result.sadafsk_fl_rd.None.main.pdf_gennorm", "home.repos.pwc.inspect_result.sadafsk_fl_rd.None.main.pdf_gennorm", "home.repos.pwc.inspect_result.sadafsk_fl_rd.None.main.pdf_gennorm", "home.repos.pwc.inspect_result.sadafsk_fl_rd.None.main.pdf_gennorm", "home.repos.pwc.inspect_result.sadafsk_fl_rd.None.main.pdf_gennorm", "home.repos.pwc.inspect_result.sadafsk_fl_rd.None.main.pdf_gennorm"], ["", "def", "update_centers_magnitude_distance", "(", "data", ",", "R", ",", "iterations_kmeans", ")", ":", "\n", "    ", "a", ",", "m", ",", "b", "=", "stats", ".", "gennorm", ".", "fit", "(", "data", ")", "\n", "xmin", ",", "xmax", "=", "min", "(", "data", ")", ",", "max", "(", "data", ")", "\n", "random_array", "=", "np", ".", "random", ".", "uniform", "(", "0", ",", "min", "(", "abs", "(", "xmin", ")", ",", "abs", "(", "xmax", ")", ")", ",", "2", "**", "(", "R", "-", "1", ")", ")", "\n", "centers_init", "=", "np", ".", "concatenate", "(", "(", "-", "random_array", ",", "random_array", ")", ")", "\n", "thresholds_init", "=", "np", ".", "zeros", "(", "len", "(", "centers_init", ")", "-", "1", ")", "\n", "for", "i", "in", "range", "(", "len", "(", "centers_init", ")", "-", "1", ")", ":", "\n", "        ", "thresholds_init", "[", "i", "]", "=", "0.5", "*", "(", "centers_init", "[", "i", "]", "+", "centers_init", "[", "i", "+", "1", "]", ")", "\n", "\n", "", "centers_update", "=", "np", ".", "copy", "(", "centers_init", ")", "\n", "thresholds_update", "=", "np", ".", "copy", "(", "thresholds_init", ")", "\n", "for", "i", "in", "range", "(", "iterations_kmeans", ")", ":", "\n", "        ", "integ_nom", "=", "quad", "(", "lambda", "x", ":", "x", "**", "3", "*", "pdf_gennorm", "(", "x", ",", "a", ",", "m", ",", "b", ")", ",", "-", "np", ".", "inf", ",", "thresholds_update", "[", "0", "]", ")", "[", "0", "]", "\n", "integ_denom", "=", "quad", "(", "lambda", "x", ":", "x", "**", "2", "*", "pdf_gennorm", "(", "x", ",", "a", ",", "m", ",", "b", ")", ",", "-", "np", ".", "inf", ",", "thresholds_update", "[", "0", "]", ")", "[", "0", "]", "\n", "centers_update", "[", "0", "]", "=", "np", ".", "divide", "(", "integ_nom", ",", "integ_denom", ")", "\n", "for", "j", "in", "range", "(", "len", "(", "centers_init", ")", "-", "2", ")", ":", "\n", "            ", "integ_nom_update", "=", "quad", "(", "lambda", "x", ":", "x", "**", "3", "*", "pdf_gennorm", "(", "x", ",", "a", ",", "m", ",", "b", ")", ",", "thresholds_update", "[", "j", "]", ",", "thresholds_update", "[", "j", "+", "1", "]", ")", "[", "0", "]", "\n", "integ_denom_update", "=", "quad", "(", "lambda", "x", ":", "x", "**", "2", "*", "pdf_gennorm", "(", "x", ",", "a", ",", "m", ",", "b", ")", ",", "thresholds_update", "[", "j", "]", ",", "thresholds_update", "[", "j", "+", "1", "]", ")", "[", "0", "]", "\n", "centers_update", "[", "j", "+", "1", "]", "=", "np", ".", "divide", "(", "integ_nom_update", ",", "integ_denom_update", ")", "\n", "", "integ_nom_final", "=", "quad", "(", "lambda", "x", ":", "x", "**", "3", "*", "pdf_gennorm", "(", "x", ",", "a", ",", "m", ",", "b", ")", ",", "thresholds_update", "[", "len", "(", "thresholds_update", ")", "-", "1", "]", ",", "np", ".", "inf", ")", "[", "0", "]", "\n", "integ_denom_final", "=", "quad", "(", "lambda", "x", ":", "x", "**", "2", "*", "pdf_gennorm", "(", "x", ",", "a", ",", "m", ",", "b", ")", ",", "thresholds_update", "[", "len", "(", "thresholds_update", ")", "-", "1", "]", ",", "np", ".", "inf", ")", "[", "0", "]", "\n", "centers_update", "[", "len", "(", "centers_update", ")", "-", "1", "]", "=", "np", ".", "divide", "(", "integ_nom_final", ",", "integ_denom_final", ")", "\n", "for", "j", "in", "range", "(", "len", "(", "thresholds_update", ")", ")", ":", "\n", "            ", "thresholds_update", "[", "j", "]", "=", "0.5", "*", "(", "centers_update", "[", "j", "]", "+", "centers_update", "[", "j", "+", "1", "]", ")", "\n", "", "return", "thresholds_update", ",", "centers_update", "\n", "\n"]], "home.repos.pwc.inspect_result.sadafsk_fl_rd.None.utils_quantize.compress_uni_scalar": [[33, 50], ["seq.max", "seq.min", "seq.copy", "np.round().astype", "np.round"], "function", ["None"], ["def", "compress_uni_scalar", "(", "seq", ",", "R", ")", ":", "\n", "\n", "  ", "uni_max", "=", "seq", ".", "max", "(", ")", "\n", "uni_min", "=", "seq", ".", "min", "(", ")", "\n", "\n", "#number of quantization levels at users", "\n", "\n", "seq_enc", "=", "seq", ".", "copy", "(", ")", "\n", "\n", "seq_enc", "=", "np", ".", "round", "(", "(", "2", "**", "R", ")", "*", "(", "seq_enc", "-", "uni_min", ")", "/", "(", "uni_max", "-", "uni_min", ")", ",", "decimals", "=", "0", ")", ".", "astype", "(", "int", ")", "\n", "\n", "#  seq_tmp=(seq_tmp-uni_min)/(uni_max-uni_min)", "\n", "#  seq_tmp=(2**R)*(seq_tmp-uni_min)/(uni_max-uni_min)", "\n", "#  print(seq_tmp.max(),seq_tmp.min())", "\n", "#  ", "\n", "\n", "return", "seq_enc", ",", "uni_max", ",", "uni_min", "\n", "\n"]], "home.repos.pwc.inspect_result.sadafsk_fl_rd.None.utils_quantize.decompress_uni_scalar": [[52, 58], ["None"], "function", ["None"], ["", "def", "decompress_uni_scalar", "(", "seq_enc", ",", "R", ",", "uni_max", ",", "uni_min", ")", ":", "\n", "\n", "# quantized_points = weights_min+((weights_max-weights_min)/QL[user])*(np.round((weights[i]-weights_min)*QL[user]/(weights_max-weights_min)))", "\n", "  ", "seq_dec", "=", "seq_enc", "/", "2", "**", "R", "*", "(", "uni_max", "-", "uni_min", ")", "+", "uni_min", "\n", "\n", "return", "seq_dec", "\n", "\n"]], "home.repos.pwc.inspect_result.sadafsk_fl_rd.None.utils_quantize.gaussian_compress": [[59, 119], ["np.array", "len", "np.divide", "print", "np.mean", "np.var", "np.divide", "np.zeros", "range", "np.divide.astype", "np.power", "np.shape", "tensorflow.where", "tensorflow.where", "np.put", "np.put", "np.divide.astype", "len"], "function", ["None"], ["", "def", "gaussian_compress", "(", "seq", ",", "R", ")", ":", "\n", "  ", "gaussian_vector", "=", "np", ".", "array", "(", "[", "-", "4.6196578", ",", "-", "4.20406252", ",", "-", "3.94402975", ",", "-", "3.75079307", ",", "-", "3.5953369", ",", "-", "3.46436624", ",", "\n", "-", "3.35063227", ",", "-", "3.2497293", ",", "-", "3.15877116", ",", "-", "3.0757602", ",", "-", "2.99925406", ",", "-", "2.92817589", ",", "\n", "-", "2.86169959", ",", "-", "2.7991769", ",", "-", "2.74008942", ",", "-", "2.68401579", ",", "-", "2.63060866", ",", "-", "2.5795782", ",", "\n", "-", "2.5306799", ",", "-", "2.48370554", ",", "-", "2.43847626", ",", "-", "2.39483721", ",", "-", "2.35265344", ",", "-", "2.31180655", ",", "\n", "-", "2.27219208", ",", "-", "2.23371738", ",", "-", "2.19629984", ",", "-", "2.15986555", ",", "-", "2.12434801", ",", "-", "2.08968723", ",", "\n", "-", "2.05582886", ",", "-", "2.02272351", ",", "-", "1.99032614", ",", "-", "1.95859558", ",", "-", "1.92749408", ",", "-", "1.89698692", ",", "\n", "-", "1.86704212", ",", "-", "1.83763012", ",", "-", "1.80872358", ",", "-", "1.78029712", ",", "-", "1.75232714", ",", "-", "1.72479169", ",", "\n", "-", "1.69767026", ",", "-", "1.67094371", ",", "-", "1.6445941", ",", "-", "1.61860462", ",", "-", "1.5929595", ",", "-", "1.56764388", ",", "\n", "-", "1.54264381", ",", "-", "1.5179461", ",", "-", "1.49353831", ",", "-", "1.4694087", ",", "-", "1.44554614", ",", "-", "1.42194008", ",", "\n", "-", "1.39858054", ",", "-", "1.37545804", ",", "-", "1.35256354", ",", "-", "1.32988848", ",", "-", "1.30742468", ",", "-", "1.28516437", ",", "\n", "-", "1.26310011", ",", "-", "1.24122482", ",", "-", "1.21953171", ",", "-", "1.19801432", ",", "-", "1.17666642", ",", "-", "1.1554821", ",", "\n", "-", "1.13445564", ",", "-", "1.11358158", ",", "-", "1.09285468", ",", "-", "1.07226989", ",", "-", "1.05182237", ",", "-", "1.03150746", ",", "\n", "-", "1.01132066", ",", "-", "0.99125765", ",", "-", "0.97131425", ",", "-", "0.95148645", ",", "-", "0.93177036", ",", "-", "0.91216223", ",", "\n", "-", "0.89265843", ",", "-", "0.87325546", ",", "-", "0.85394992", ",", "-", "0.83473853", ",", "-", "0.8156181", ",", "-", "0.79658554", ",", "\n", "-", "0.77763786", ",", "-", "0.75877215", ",", "-", "0.73998559", ",", "-", "0.72127543", ",", "-", "0.70263901", ",", "-", "0.68407373", ",", "\n", "-", "0.66557706", ",", "-", "0.64714654", ",", "-", "0.62877977", ",", "-", "0.6104744", ",", "-", "0.59222817", ",", "-", "0.57403882", ",", "\n", "-", "0.55590419", ",", "-", "0.53782214", ",", "-", "0.51979059", ",", "-", "0.50180749", ",", "-", "0.48387086", ",", "-", "0.46597872", ",", "\n", "-", "0.44812917", ",", "-", "0.4303203", ",", "-", "0.41255028", ",", "-", "0.39481728", ",", "-", "0.37711951", ",", "-", "0.35945521", ",", "\n", "-", "0.34182265", ",", "-", "0.32422013", ",", "-", "0.30664595", ",", "-", "0.28909847", ",", "-", "0.27157603", ",", "-", "0.25407702", ",", "\n", "-", "0.23659984", ",", "-", "0.2191429", ",", "-", "0.20170463", ",", "-", "0.18428348", ",", "-", "0.16687792", ",", "-", "0.1494864", ",", "\n", "-", "0.13210741", ",", "-", "0.11473945", ",", "-", "0.09738101", ",", "-", "0.08003061", ",", "-", "0.06268674", ",", "-", "0.04534794", ",", "\n", "-", "0.02801273", ",", "-", "0.01067962", ",", "0.00665285", ",", "0.02398615", ",", "0.04132176", ",", "0.05866116", ",", "\n", "0.07600582", ",", "0.09335722", ",", "0.11071686", ",", "0.12808621", ",", "0.14546679", ",", "0.1628601", ",", "\n", "0.18026766", ",", "0.197691", ",", "0.21513166", ",", "0.23259119", ",", "0.25007116", ",", "0.26757317", ",", "\n", "0.2850988", ",", "0.30264968", ",", "0.32022745", ",", "0.33783377", ",", "0.35547032", ",", "0.37313882", ",", "\n", "0.39084099", ",", "0.4085786", ",", "0.42635343", ",", "0.4441673", ",", "0.46202207", ",", "0.47991963", ",", "\n", "0.49786188", ",", "0.5158508", ",", "0.53388839", ",", "0.55197667", ",", "0.57011774", ",", "0.58831374", ",", "\n", "0.60656683", ",", "0.62487926", ",", "0.6432533", ",", "0.6616913", ",", "0.68019565", ",", "0.69876883", ",", "\n", "0.71741336", ",", "0.73613183", ",", "0.75492692", ",", "0.77380137", ",", "0.79275801", ",", "0.81179973", ",", "\n", "0.83092955", ",", "0.85015054", ",", "0.86946589", ",", "0.88887889", ",", "0.90839294", ",", "0.92801154", ",", "\n", "0.94773831", ",", "0.96757702", ",", "0.98753154", ",", "1.0076059", ",", "1.02780428", ",", "1.04813099", ",", "\n", "1.06859054", ",", "1.08918758", ",", "1.10992696", ",", "1.13081373", ",", "1.15185314", ",", "1.17305064", ",", "\n", "1.19441195", ",", "1.215943", ",", "1.23764999", ",", "1.25953941", ",", "1.28161805", ",", "1.30389298", ",", "\n", "1.32637164", ",", "1.34906181", ",", "1.37197168", ",", "1.3951098", ",", "1.41848522", ",", "1.44210741", ",", "\n", "1.46598637", ",", "1.49013265", ",", "1.51455738", ",", "1.5392723", ",", "1.56428986", ",", "1.58962324", ",", "\n", "1.61528642", ",", "1.64129425", ",", "1.6676625", ",", "1.694408", ",", "1.72154868", ",", "1.7491037", ",", "\n", "1.77709356", ",", "1.80554024", ",", "1.83446733", ",", "1.86390022", ",", "1.89386626", ",", "1.92439503", ",", "\n", "1.95551852", ",", "1.98727144", ",", "2.01969157", ",", "2.0528201", ",", "2.08670208", ",", "2.12138691", ",", "\n", "2.15692896", ",", "2.19338826", ",", "2.23083129", ",", "2.26933204", ",", "2.3089731", ",", "2.34984718", ",", "\n", "2.39205876", ",", "2.43572629", ",", "2.48098477", ",", "2.52798909", ",", "2.57691818", ",", "2.62798033", ",", "\n", "2.68142012", ",", "2.7375275", ",", "2.79664992", ",", "2.85920888", ",", "2.92572296", ",", "2.99684061", ",", "\n", "3.07338823", ",", "3.156443", ",", "3.24744772", ",", "3.3484007", ",", "3.46218897", ",", "3.59321959", ",", "\n", "3.74874351", ",", "3.94205964", ",", "4.20219183", ",", "4.61793112", "]", ")", "\n", "l", "=", "len", "(", "gaussian_vector", ")", "\n", "step", "=", "np", ".", "divide", "(", "l", ",", "2", "**", "R", ")", "\n", "print", "(", "step", ".", "astype", "(", "int", ")", ")", "\n", "gaussian_vector_stepped", "=", "gaussian_vector", "[", "0", ":", "l", ":", "step", ".", "astype", "(", "'int'", ")", "]", "\n", "mu", "=", "np", ".", "mean", "(", "seq", ")", "\n", "s", "=", "np", ".", "var", "(", "seq", ")", "\n", "seq_scaled", "=", "np", ".", "divide", "(", "seq", "-", "mu", ",", "np", ".", "power", "(", "s", ",", "0.5", ")", ")", "\n", "seq_compressed", "=", "np", ".", "zeros", "(", "np", ".", "shape", "(", "seq_scaled", ")", ")", "\n", "for", "i", "in", "range", "(", "len", "(", "gaussian_vector_stepped", ")", "-", "1", ")", ":", "\n", "    ", "diff1", "=", "seq_scaled", "-", "gaussian_vector_stepped", "[", "i", "]", "\n", "diff2", "=", "seq_scaled", "-", "gaussian_vector_stepped", "[", "i", "+", "1", "]", "\n", "indices1", "=", "tf", ".", "where", "(", "(", "diff1", ">=", "0", ")", "&", "(", "diff2", "<=", "0", ")", "&", "(", "(", "diff1", "+", "diff2", ")", "<=", "0", ")", ")", "\n", "indices2", "=", "tf", ".", "where", "(", "(", "diff1", ">=", "0", ")", "&", "(", "diff2", "<=", "0", ")", "&", "(", "(", "diff1", "+", "diff2", ")", ">=", "0", ")", ")", "\n", "np", ".", "put", "(", "seq_compressed", ",", "indices1", ",", "gaussian_vector_stepped", "[", "i", "]", ")", "\n", "np", ".", "put", "(", "seq_compressed", ",", "indices2", ",", "gaussian_vector_stepped", "[", "i", "+", "1", "]", ")", "\n", "return", "seq_compressed", ",", "mu", ",", "s", "\n", "\n"]], "home.repos.pwc.inspect_result.sadafsk_fl_rd.None.utils_quantize.decompress_gaussian": [[120, 123], ["np.multiply", "np.power"], "function", ["None"], ["", "", "def", "decompress_gaussian", "(", "seq_compressed", ",", "mu", ",", "s", ")", ":", "\n", "    ", "seq_dec", "=", "np", ".", "multiply", "(", "seq_compressed", ",", "np", ".", "power", "(", "s", ",", "0.5", ")", ")", "+", "mu", "\n", "return", "seq_dec", "\n", "\n"]], "home.repos.pwc.inspect_result.sadafsk_fl_rd.None.utils_quantize.optimal_compress": [[124, 132], ["np.mean", "np.var", "np.divide", "np.divide", "np.random.normal", "np.power", "np.power", "np.power", "len", "np.multiply"], "function", ["None"], ["", "def", "optimal_compress", "(", "seq", ",", "R", ")", ":", "\n", "    ", "mu", "=", "np", ".", "mean", "(", "seq", ")", "\n", "s", "=", "np", ".", "var", "(", "seq", ")", "\n", "noise_var", "=", "np", ".", "divide", "(", "1", ",", "np", ".", "power", "(", "2", ",", "np", ".", "multiply", "(", "2", ",", "R", ")", ")", ")", "\n", "seq_scaled", "=", "np", ".", "divide", "(", "seq", "-", "mu", ",", "np", ".", "power", "(", "s", ",", "0.5", ")", ")", "\n", "noise", "=", "np", ".", "random", ".", "normal", "(", "0", ",", "np", ".", "power", "(", "noise_var", ",", "0.5", ")", ",", "len", "(", "seq_scaled", ")", ")", "\n", "seq_compressed", "=", "seq_scaled", "+", "noise", "\n", "return", "seq_compressed", ",", "mu", ",", "s", "\n", "\n"]]}