{"home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.convnet.Convnet.__init__": [[24, 33], ["torch.Module.__init__", "torch.Sequential", "torch.Sequential", "torch.Sequential", "convnet.conv_block", "convnet.conv_block", "convnet.conv_block", "convnet.conv_block"], "methods", ["home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.utils.Timer.__init__", "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.convnet.conv_block", "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.convnet.conv_block", "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.convnet.conv_block", "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.convnet.conv_block"], ["    ", "def", "__init__", "(", "self", ",", "x_dim", "=", "3", ",", "hid_dim", "=", "64", ",", "z_dim", "=", "64", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "encoder", "=", "nn", ".", "Sequential", "(", "\n", "conv_block", "(", "x_dim", ",", "hid_dim", ")", ",", "\n", "conv_block", "(", "hid_dim", ",", "hid_dim", ")", ",", "\n", "conv_block", "(", "hid_dim", ",", "hid_dim", ")", ",", "\n", "conv_block", "(", "hid_dim", ",", "z_dim", ")", ",", "\n", ")", "\n", "self", ".", "out_channels", "=", "1600", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.convnet.Convnet.forward": [[34, 37], ["convnet.Convnet.encoder", "convnet.Convnet.view", "convnet.Convnet.size"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "encoder", "(", "x", ")", "\n", "return", "x", ".", "view", "(", "x", ".", "size", "(", "0", ")", ",", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.convnet.Registrator.__init__": [[39, 50], ["torch.Module.__init__", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.BatchNorm1d", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU"], "methods", ["home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.utils.Timer.__init__"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", "Registrator", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "fc_params_support", "=", "nn", ".", "Sequential", "(", "\n", "torch", ".", "nn", ".", "Linear", "(", "1600", ",", "512", ")", ",", "\n", "torch", ".", "nn", ".", "BatchNorm1d", "(", "512", ")", ",", "\n", "torch", ".", "nn", ".", "ReLU", "(", ")", ",", "\n", ")", "\n", "self", ".", "fc_params_query", "=", "nn", ".", "Sequential", "(", "\n", "torch", ".", "nn", ".", "Linear", "(", "1600", ",", "512", ")", ",", "\n", "torch", ".", "nn", ".", "BatchNorm1d", "(", "512", ")", ",", "\n", "torch", ".", "nn", ".", "ReLU", "(", ")", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.convnet.Registrator.forward": [[52, 56], ["convnet.Registrator.fc_params_support", "convnet.Registrator.fc_params_query"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "support_set", ",", "query_set", ")", ":", "\n", "        ", "support_set_2", "=", "self", ".", "fc_params_support", "(", "support_set", ")", "\n", "query_set_2", "=", "self", ".", "fc_params_query", "(", "query_set", ")", "\n", "return", "support_set_2", ",", "query_set_2", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.convnet.conv_block": [[6, 12], ["torch.Sequential", "torch.Conv2d", "torch.BatchNorm2d", "torch.ReLU", "torch.MaxPool2d"], "function", ["None"], ["def", "conv_block", "(", "in_channels", ",", "out_channels", ")", ":", "\n", "    ", "return", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "in_channels", ",", "out_channels", ",", "3", ",", "padding", "=", "1", ")", ",", "\n", "nn", ".", "BatchNorm2d", "(", "out_channels", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ",", "\n", "nn", ".", "MaxPool2d", "(", "2", ")", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.convnet.conv_block_1d": [[14, 19], ["torch.Sequential", "torch.Conv1d", "torch.BatchNorm1d", "torch.ReLU"], "function", ["None"], ["", "def", "conv_block_1d", "(", "in_channels", ",", "out_channels", ")", ":", "\n", "    ", "return", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv1d", "(", "in_channels", ",", "out_channels", ",", "1", ",", "padding", "=", "0", ")", ",", "\n", "nn", ".", "BatchNorm1d", "(", "out_channels", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler.__init__": [[8, 19], ["numpy.array", "range", "numpy.argwhere().reshape", "torch.from_numpy", "samplers.CategoriesSampler.m_ind.append", "max", "numpy.argwhere"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "label", ",", "n_batch", ",", "n_cls", ",", "n_per", ")", ":", "\n", "        ", "self", ".", "n_batch", "=", "n_batch", "\n", "self", ".", "n_cls", "=", "n_cls", "\n", "self", ".", "n_per", "=", "n_per", "\n", "\n", "label", "=", "np", ".", "array", "(", "label", ")", "\n", "self", ".", "m_ind", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "max", "(", "label", ")", "+", "1", ")", ":", "\n", "            ", "ind", "=", "np", ".", "argwhere", "(", "label", "==", "i", ")", ".", "reshape", "(", "-", "1", ")", "\n", "ind", "=", "torch", ".", "from_numpy", "(", "ind", ")", "\n", "self", ".", "m_ind", ".", "append", "(", "ind", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler.__len__": [[20, 22], ["None"], "methods", ["None"], ["", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "n_batch", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler.__iter__": [[23, 33], ["range", "torch.stack().t().reshape", "torch.randperm", "torch.stack().t().reshape.append", "len", "torch.randperm", "torch.stack().t", "len", "torch.stack"], "methods", ["None"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "        ", "for", "i_batch", "in", "range", "(", "self", ".", "n_batch", ")", ":", "\n", "            ", "batch", "=", "[", "]", "\n", "classes", "=", "torch", ".", "randperm", "(", "len", "(", "self", ".", "m_ind", ")", ")", "[", ":", "self", ".", "n_cls", "]", "\n", "for", "c", "in", "classes", ":", "\n", "                ", "l", "=", "self", ".", "m_ind", "[", "c", "]", "\n", "pos", "=", "torch", ".", "randperm", "(", "len", "(", "l", ")", ")", "[", ":", "self", ".", "n_per", "]", "\n", "batch", ".", "append", "(", "l", "[", "pos", "]", ")", "\n", "", "batch", "=", "torch", ".", "stack", "(", "batch", ")", ".", "t", "(", ")", ".", "reshape", "(", "-", "1", ")", "\n", "yield", "batch", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler_train.__init__": [[37, 50], ["numpy.array", "range", "numpy.argwhere().reshape", "torch.from_numpy", "samplers.CategoriesSampler_train.m_ind.append", "max", "numpy.argwhere"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "label", ",", "n_batch", ",", "n_cls", ",", "n_shot", ",", "n_query", ",", "n_base_class", ")", ":", "\n", "        ", "self", ".", "n_batch", "=", "n_batch", "\n", "self", ".", "n_cls", "=", "n_cls", "\n", "self", ".", "n_shot", "=", "n_shot", "\n", "self", ".", "n_query", "=", "n_query", "\n", "self", ".", "n_base_class", "=", "n_base_class", "\n", "\n", "label", "=", "np", ".", "array", "(", "label", ")", "\n", "self", ".", "m_ind", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "max", "(", "label", ")", "+", "1", ")", ":", "\n", "            ", "ind", "=", "np", ".", "argwhere", "(", "label", "==", "i", ")", ".", "reshape", "(", "-", "1", ")", "\n", "ind", "=", "torch", ".", "from_numpy", "(", "ind", ")", "\n", "self", ".", "m_ind", ".", "append", "(", "ind", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler_train.__len__": [[51, 53], ["None"], "methods", ["None"], ["", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "n_batch", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler_train.__iter__": [[54, 74], ["range", "classes.sort", "torch.stack().t().reshape", "torch.randperm", "len", "torch.randperm", "torch.stack().t().reshape.append", "torch.randperm", "torch.stack().t().reshape.append", "torch.stack().t", "len", "torch.cat", "torch.stack", "torch.zeros().type", "torch.zeros"], "methods", ["None"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "        ", "for", "i_batch", "in", "range", "(", "self", ".", "n_batch", ")", ":", "\n", "            ", "batch", "=", "[", "]", "\n", "query_batch", "=", "[", "]", "\n", "shot_batch", "=", "[", "]", "\n", "classes", "=", "torch", ".", "randperm", "(", "len", "(", "self", ".", "m_ind", ")", ")", "[", ":", "self", ".", "n_cls", "]", "\n", "classes", ",", "order", "=", "classes", ".", "sort", "(", ")", "\n", "for", "c", "in", "classes", ":", "\n", "                ", "if", "c", "<", "self", ".", "n_base_class", ":", "\n", "                    ", "l", "=", "self", ".", "m_ind", "[", "c", "]", "\n", "tmp", "=", "torch", ".", "randperm", "(", "len", "(", "l", ")", ")", "\n", "batch", ".", "append", "(", "l", "[", "tmp", "[", ":", "self", ".", "n_shot", "+", "self", ".", "n_query", "]", "]", ")", "\n", "\n", "", "else", ":", "\n", "                    ", "l", "=", "self", ".", "m_ind", "[", "c", "]", "\n", "tmp", "=", "torch", ".", "randperm", "(", "self", ".", "n_shot", ")", "\n", "batch", ".", "append", "(", "torch", ".", "cat", "(", "(", "l", "[", "tmp", "]", ",", "torch", ".", "zeros", "(", "self", ".", "n_query", ")", ".", "type", "(", "torch", ".", "LongTensor", ")", ")", ")", ")", "\n", "\n", "", "", "batch", "=", "torch", ".", "stack", "(", "batch", ")", ".", "t", "(", ")", ".", "reshape", "(", "-", "1", ")", "\n", "yield", "batch", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler_train_repeat.__init__": [[78, 91], ["numpy.array", "range", "numpy.argwhere().reshape", "torch.from_numpy", "samplers.CategoriesSampler_train_repeat.m_ind.append", "max", "numpy.argwhere"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "label", ",", "n_batch", ",", "n_cls", ",", "n_shot", ",", "n_query", ",", "n_base_class", ")", ":", "\n", "        ", "self", ".", "n_batch", "=", "n_batch", "\n", "self", ".", "n_cls", "=", "n_cls", "\n", "self", ".", "n_shot", "=", "n_shot", "\n", "self", ".", "n_query", "=", "n_query", "\n", "self", ".", "n_base_class", "=", "n_base_class", "\n", "\n", "label", "=", "np", ".", "array", "(", "label", ")", "\n", "self", ".", "m_ind", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "max", "(", "label", ")", "+", "1", ")", ":", "\n", "            ", "ind", "=", "np", ".", "argwhere", "(", "label", "==", "i", ")", ".", "reshape", "(", "-", "1", ")", "\n", "ind", "=", "torch", ".", "from_numpy", "(", "ind", ")", "\n", "self", ".", "m_ind", ".", "append", "(", "ind", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler_train_repeat.__len__": [[92, 94], ["None"], "methods", ["None"], ["", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "n_batch", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler_train_repeat.__iter__": [[95, 119], ["range", "classes.sort", "torch.stack().t().reshape", "torch.randperm", "len", "torch.randperm", "torch.stack().t().reshape.append", "torch.randperm", "torch.stack().t().reshape.append", "torch.stack().t", "len", "torch.cat", "torch.randperm", "torch.stack", "a.repeat", "b.repeat"], "methods", ["None"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "        ", "for", "i_batch", "in", "range", "(", "self", ".", "n_batch", ")", ":", "\n", "            ", "batch", "=", "[", "]", "\n", "query_batch", "=", "[", "]", "\n", "shot_batch", "=", "[", "]", "\n", "classes", "=", "torch", ".", "randperm", "(", "len", "(", "self", ".", "m_ind", ")", ")", "[", ":", "self", ".", "n_cls", "]", "\n", "classes", ",", "order", "=", "classes", ".", "sort", "(", ")", "\n", "\n", "for", "c", "in", "classes", ":", "\n", "                ", "if", "c", "<", "self", ".", "n_base_class", ":", "\n", "                    ", "l", "=", "self", ".", "m_ind", "[", "c", "]", "\n", "tmp", "=", "torch", ".", "randperm", "(", "len", "(", "l", ")", ")", "\n", "batch", ".", "append", "(", "l", "[", "tmp", "[", ":", "self", ".", "n_shot", "+", "self", ".", "n_query", "]", "]", ")", "\n", "\n", "", "else", ":", "\n", "                    ", "l", "=", "self", ".", "m_ind", "[", "c", "]", "\n", "tmp", "=", "torch", ".", "randperm", "(", "self", ".", "n_shot", ")", "\n", "novel_query", "=", "torch", ".", "randperm", "(", "self", ".", "n_shot", "-", "1", ")", "[", "0", "]", "+", "1", "\n", "a", "=", "tmp", "[", ":", "self", ".", "n_shot", "-", "novel_query", "]", "\n", "b", "=", "tmp", "[", "self", ".", "n_shot", "-", "novel_query", ":", "]", "\n", "batch", ".", "append", "(", "torch", ".", "cat", "(", "(", "l", "[", "a", ".", "repeat", "(", "15", ")", "[", ":", "self", ".", "n_shot", "]", "]", ",", "l", "[", "b", ".", "repeat", "(", "15", ")", "[", ":", "self", ".", "n_query", "]", "]", ")", ")", ")", "\n", "\n", "", "", "batch", "=", "torch", ".", "stack", "(", "batch", ")", ".", "t", "(", ")", ".", "reshape", "(", "-", "1", ")", "\n", "yield", "batch", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler_train_100way.__init__": [[123, 136], ["numpy.array", "range", "numpy.argwhere().reshape", "torch.from_numpy", "samplers.CategoriesSampler_train_100way.m_ind.append", "max", "numpy.argwhere"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "label", ",", "n_batch", ",", "n_cls", ",", "n_shot", ",", "n_query", ",", "n_base_class", ")", ":", "\n", "        ", "self", ".", "n_batch", "=", "n_batch", "\n", "self", ".", "n_cls", "=", "n_cls", "\n", "self", ".", "n_shot", "=", "n_shot", "\n", "self", ".", "n_query", "=", "n_query", "\n", "self", ".", "n_base_class", "=", "n_base_class", "\n", "\n", "label", "=", "np", ".", "array", "(", "label", ")", "\n", "self", ".", "m_ind", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "max", "(", "label", ")", "+", "1", ")", ":", "\n", "            ", "ind", "=", "np", ".", "argwhere", "(", "label", "==", "i", ")", ".", "reshape", "(", "-", "1", ")", "\n", "ind", "=", "torch", ".", "from_numpy", "(", "ind", ")", "\n", "self", ".", "m_ind", ".", "append", "(", "ind", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler_train_100way.__len__": [[137, 139], ["None"], "methods", ["None"], ["", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "n_batch", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler_train_100way.__iter__": [[140, 164], ["range", "classes.sort", "torch.stack().t().reshape", "torch.randperm", "len", "torch.randperm", "torch.stack().t().reshape.append", "torch.randperm", "torch.stack().t().reshape.append", "torch.stack().t", "torch.cat", "len", "torch.randperm", "torch.stack", "a.repeat", "b.repeat"], "methods", ["None"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "        ", "for", "i_batch", "in", "range", "(", "self", ".", "n_batch", ")", ":", "\n", "            ", "batch", "=", "[", "]", "\n", "query_batch", "=", "[", "]", "\n", "shot_batch", "=", "[", "]", "\n", "classes", "=", "torch", ".", "randperm", "(", "len", "(", "self", ".", "m_ind", ")", ")", "[", ":", "self", ".", "n_cls", "]", "\n", "classes", ",", "order", "=", "classes", ".", "sort", "(", ")", "\n", "\n", "for", "c", "in", "classes", ":", "\n", "                ", "if", "c", "<", "self", ".", "n_base_class", ":", "\n", "                    ", "l", "=", "self", ".", "m_ind", "[", "c", "]", "\n", "tmp", "=", "torch", ".", "randperm", "(", "len", "(", "l", ")", "-", "100", ")", "\n", "batch", ".", "append", "(", "l", "[", "tmp", "[", ":", "self", ".", "n_shot", "+", "self", ".", "n_query", "]", "]", ")", "\n", "\n", "", "else", ":", "\n", "                    ", "l", "=", "self", ".", "m_ind", "[", "c", "]", "\n", "tmp", "=", "torch", ".", "randperm", "(", "self", ".", "n_shot", ")", "\n", "novel_query", "=", "torch", ".", "randperm", "(", "self", ".", "n_shot", "-", "1", ")", "[", "0", "]", "+", "1", "\n", "a", "=", "tmp", "[", ":", "self", ".", "n_shot", "-", "novel_query", "]", "\n", "b", "=", "tmp", "[", "self", ".", "n_shot", "-", "novel_query", ":", "]", "\n", "batch", ".", "append", "(", "torch", ".", "cat", "(", "(", "l", "[", "a", ".", "repeat", "(", "15", ")", "[", ":", "self", ".", "n_shot", "]", "]", ",", "l", "[", "b", ".", "repeat", "(", "15", ")", "[", ":", "self", ".", "n_query", "]", "]", ")", ")", ")", "\n", "\n", "", "", "batch", "=", "torch", ".", "stack", "(", "batch", ")", ".", "t", "(", ")", ".", "reshape", "(", "-", "1", ")", "\n", "yield", "batch", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler_val_100way.__init__": [[167, 179], ["numpy.array", "range", "numpy.argwhere().reshape", "torch.from_numpy", "samplers.CategoriesSampler_val_100way.m_ind.append", "max", "numpy.argwhere"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "label", ",", "n_batch", ",", "n_cls", ",", "n_shot", ",", "n_query", ")", ":", "\n", "        ", "self", ".", "n_batch", "=", "n_batch", "\n", "self", ".", "n_cls", "=", "n_cls", "\n", "self", ".", "n_shot", "=", "n_shot", "\n", "self", ".", "n_query", "=", "n_query", "\n", "\n", "label", "=", "np", ".", "array", "(", "label", ")", "\n", "self", ".", "m_ind", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "max", "(", "label", ")", "+", "1", ")", ":", "\n", "            ", "ind", "=", "np", ".", "argwhere", "(", "label", "==", "i", ")", ".", "reshape", "(", "-", "1", ")", "\n", "ind", "=", "torch", ".", "from_numpy", "(", "ind", ")", "\n", "self", ".", "m_ind", ".", "append", "(", "ind", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler_val_100way.__len__": [[180, 182], ["None"], "methods", ["None"], ["", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "n_batch", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler_val_100way.__iter__": [[183, 194], ["range", "torch.stack().t().reshape", "torch.randperm", "torch.stack().t().reshape.append", "len", "torch.randperm", "torch.stack().t", "torch.stack"], "methods", ["None"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "        ", "for", "i_batch", "in", "range", "(", "self", ".", "n_batch", ")", ":", "\n", "            ", "batch", "=", "[", "]", "\n", "classes", "=", "torch", ".", "randperm", "(", "len", "(", "self", ".", "m_ind", ")", ")", "[", ":", "self", ".", "n_cls", "]", "\n", "for", "c", "in", "classes", ":", "\n", "                ", "l", "=", "self", ".", "m_ind", "[", "c", "]", "\n", "#pos = torch.cat([torch.Tensor(range(0,self.n_shot)).type(torch.LongTensor), self.n_shot+torch.randperm(len(l)-self.n_shot)[:self.n_query]])", "\n", "tmp", "=", "torch", ".", "randperm", "(", "100", ")", "+", "500", "\n", "batch", ".", "append", "(", "l", "[", "tmp", "]", ")", "\n", "", "batch", "=", "torch", ".", "stack", "(", "batch", ")", ".", "t", "(", ")", ".", "reshape", "(", "-", "1", ")", "\n", "yield", "batch", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler_val.__init__": [[200, 212], ["numpy.array", "range", "numpy.argwhere().reshape", "torch.from_numpy", "samplers.CategoriesSampler_val.m_ind.append", "max", "numpy.argwhere"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "label", ",", "n_batch", ",", "n_cls", ",", "n_shot", ",", "n_query", ")", ":", "\n", "        ", "self", ".", "n_batch", "=", "n_batch", "\n", "self", ".", "n_cls", "=", "n_cls", "\n", "self", ".", "n_shot", "=", "n_shot", "\n", "self", ".", "n_query", "=", "n_query", "\n", "\n", "label", "=", "np", ".", "array", "(", "label", ")", "\n", "self", ".", "m_ind", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "max", "(", "label", ")", "+", "1", ")", ":", "\n", "            ", "ind", "=", "np", ".", "argwhere", "(", "label", "==", "i", ")", ".", "reshape", "(", "-", "1", ")", "\n", "ind", "=", "torch", ".", "from_numpy", "(", "ind", ")", "\n", "self", ".", "m_ind", ".", "append", "(", "ind", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler_val.__len__": [[213, 215], ["None"], "methods", ["None"], ["", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "n_batch", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.samplers.CategoriesSampler_val.__iter__": [[216, 226], ["range", "torch.stack().t().reshape", "torch.randperm", "torch.cat", "torch.stack().t().reshape.append", "len", "torch.stack().t", "torch.Tensor().type", "torch.stack", "torch.Tensor", "torch.randperm", "range", "len"], "methods", ["None"], ["", "def", "__iter__", "(", "self", ")", ":", "\n", "        ", "for", "i_batch", "in", "range", "(", "self", ".", "n_batch", ")", ":", "\n", "            ", "batch", "=", "[", "]", "\n", "classes", "=", "torch", ".", "randperm", "(", "len", "(", "self", ".", "m_ind", ")", ")", "[", ":", "self", ".", "n_cls", "]", "\n", "for", "c", "in", "classes", ":", "\n", "                ", "l", "=", "self", ".", "m_ind", "[", "c", "]", "\n", "pos", "=", "torch", ".", "cat", "(", "[", "torch", ".", "Tensor", "(", "range", "(", "0", ",", "self", ".", "n_shot", ")", ")", ".", "type", "(", "torch", ".", "LongTensor", ")", ",", "self", ".", "n_shot", "+", "torch", ".", "randperm", "(", "len", "(", "l", ")", "-", "self", ".", "n_shot", ")", "[", ":", "self", ".", "n_query", "]", "]", ")", "\n", "batch", ".", "append", "(", "l", "[", "pos", "]", ")", "\n", "", "batch", "=", "torch", ".", "stack", "(", "batch", ")", ".", "t", "(", ")", ".", "reshape", "(", "-", "1", ")", "\n", "yield", "batch", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.mini_imagenet_drop500.MiniImageNet2.__init__": [[15, 57], ["os.join", "int", "print", "range", "torchvision.transforms.Compose", "torchvision.transforms.Compose", "lines.extend", "l.split", "os.join", "data.append", "label.append", "x.strip", "len", "mini_imagenet_drop500.MiniImageNet2.wnids.append", "torchvision.transforms.Resize", "torchvision.transforms.RandomHorizontalFlip", "torchvision.transforms.RandomCrop", "torchvision.transforms.ToTensor", "torchvision.transforms.Normalize", "torchvision.transforms.Resize", "torchvision.transforms.CenterCrop", "torchvision.transforms.ToTensor", "torchvision.transforms.Normalize", "open().readlines", "open"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "setname", ")", ":", "\n", "        ", "csv_path", "=", "osp", ".", "join", "(", "ROOT_PATH", ",", "setname", "+", "'.csv'", ")", "\n", "lines_total", "=", "[", "x", ".", "strip", "(", ")", "for", "x", "in", "open", "(", "csv_path", ",", "'r'", ")", ".", "readlines", "(", ")", "]", "[", "1", ":", "]", "\n", "lines", "=", "[", "]", "\n", "tlen", "=", "int", "(", "len", "(", "lines_total", ")", "/", "600", ")", "\n", "print", "(", "tlen", ")", "\n", "for", "i", "in", "range", "(", "tlen", ")", ":", "\n", "            ", "lines", ".", "extend", "(", "lines_total", "[", "i", "*", "600", "+", "500", ":", "(", "i", "+", "1", ")", "*", "600", "]", ")", "\n", "\n", "", "data", "=", "[", "]", "\n", "label", "=", "[", "]", "\n", "lb", "=", "-", "1", "\n", "\n", "self", ".", "wnids", "=", "[", "]", "\n", "\n", "for", "l", "in", "lines", ":", "\n", "            ", "name", ",", "wnid", "=", "l", ".", "split", "(", "','", ")", "\n", "path", "=", "osp", ".", "join", "(", "ROOT_PATH", ",", "'images'", ",", "name", ")", "\n", "if", "wnid", "not", "in", "self", ".", "wnids", ":", "\n", "                ", "self", ".", "wnids", ".", "append", "(", "wnid", ")", "\n", "lb", "+=", "1", "\n", "", "data", ".", "append", "(", "path", ")", "\n", "label", ".", "append", "(", "lb", ")", "\n", "\n", "", "self", ".", "data", "=", "data", "\n", "self", ".", "label", "=", "label", "\n", "\n", "self", ".", "transform_train", "=", "transforms", ".", "Compose", "(", "[", "\n", "transforms", ".", "Resize", "(", "90", ")", ",", "\n", "#transforms.ColorJitter(brightness=0.3, contrast=0.3, saturation=0.3),", "\n", "transforms", ".", "RandomHorizontalFlip", "(", ")", ",", "\n", "transforms", ".", "RandomCrop", "(", "84", ",", "padding", "=", "4", ")", ",", "\n", "transforms", ".", "ToTensor", "(", ")", ",", "\n", "transforms", ".", "Normalize", "(", "mean", "=", "[", "0.485", ",", "0.456", ",", "0.406", "]", ",", "\n", "std", "=", "[", "0.229", ",", "0.224", ",", "0.225", "]", ")", "\n", "]", ")", "\n", "self", ".", "transform_test", "=", "transforms", ".", "Compose", "(", "[", "\n", "transforms", ".", "Resize", "(", "84", ")", ",", "\n", "transforms", ".", "CenterCrop", "(", "84", ")", ",", "\n", "transforms", ".", "ToTensor", "(", ")", ",", "\n", "transforms", ".", "Normalize", "(", "mean", "=", "[", "0.485", ",", "0.456", ",", "0.406", "]", ",", "\n", "std", "=", "[", "0.229", ",", "0.224", ",", "0.225", "]", ")", "\n", "]", ")", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.mini_imagenet_drop500.MiniImageNet2.__len__": [[59, 61], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "data", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.mini_imagenet_drop500.MiniImageNet2.__getitem__": [[62, 68], ["mini_imagenet_drop500.MiniImageNet2.transform_train", "mini_imagenet_drop500.MiniImageNet2.transform_test", "torch.cat", "PIL.Image.open().convert", "PIL.Image.open().convert", "PIL.Image.open", "PIL.Image.open"], "methods", ["None"], ["", "def", "__getitem__", "(", "self", ",", "i", ")", ":", "\n", "        ", "path", ",", "label", "=", "self", ".", "data", "[", "i", "]", ",", "self", ".", "label", "[", "i", "]", "\n", "image1", "=", "self", ".", "transform_train", "(", "Image", ".", "open", "(", "path", ")", ".", "convert", "(", "'RGB'", ")", ")", "\n", "image2", "=", "self", ".", "transform_test", "(", "Image", ".", "open", "(", "path", ")", ".", "convert", "(", "'RGB'", ")", ")", "\n", "image", "=", "torch", ".", "cat", "(", "[", "image1", ",", "image2", "]", ")", "\n", "return", "image", ",", "label", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.mini_imagenet.MiniImageNet.__init__": [[14, 50], ["os.join", "torchvision.transforms.Compose", "torchvision.transforms.Compose", "l.split", "os.join", "data.append", "label.append", "x.strip", "mini_imagenet.MiniImageNet.wnids.append", "torchvision.transforms.Resize", "torchvision.transforms.RandomHorizontalFlip", "torchvision.transforms.RandomCrop", "torchvision.transforms.ToTensor", "torchvision.transforms.Normalize", "torchvision.transforms.Resize", "torchvision.transforms.CenterCrop", "torchvision.transforms.ToTensor", "torchvision.transforms.Normalize", "open().readlines", "open"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "setname", ")", ":", "\n", "        ", "csv_path", "=", "osp", ".", "join", "(", "ROOT_PATH", ",", "setname", "+", "'.csv'", ")", "\n", "lines", "=", "[", "x", ".", "strip", "(", ")", "for", "x", "in", "open", "(", "csv_path", ",", "'r'", ")", ".", "readlines", "(", ")", "]", "[", "1", ":", "]", "\n", "\n", "data", "=", "[", "]", "\n", "label", "=", "[", "]", "\n", "lb", "=", "-", "1", "\n", "\n", "self", ".", "wnids", "=", "[", "]", "\n", "\n", "for", "l", "in", "lines", ":", "\n", "            ", "name", ",", "wnid", "=", "l", ".", "split", "(", "','", ")", "\n", "path", "=", "osp", ".", "join", "(", "ROOT_PATH", ",", "'images'", ",", "name", ")", "\n", "if", "wnid", "not", "in", "self", ".", "wnids", ":", "\n", "                ", "self", ".", "wnids", ".", "append", "(", "wnid", ")", "\n", "lb", "+=", "1", "\n", "", "data", ".", "append", "(", "path", ")", "\n", "label", ".", "append", "(", "lb", ")", "\n", "\n", "", "self", ".", "data", "=", "data", "\n", "self", ".", "label", "=", "label", "\n", "\n", "self", ".", "transform_train", "=", "transforms", ".", "Compose", "(", "[", "\n", "transforms", ".", "Resize", "(", "90", ")", ",", "\n", "transforms", ".", "RandomHorizontalFlip", "(", ")", ",", "\n", "transforms", ".", "RandomCrop", "(", "84", ",", "padding", "=", "4", ")", ",", "\n", "transforms", ".", "ToTensor", "(", ")", ",", "\n", "transforms", ".", "Normalize", "(", "mean", "=", "[", "0.485", ",", "0.456", ",", "0.406", "]", ",", "\n", "std", "=", "[", "0.229", ",", "0.224", ",", "0.225", "]", ")", "\n", "]", ")", "\n", "self", ".", "transform_test", "=", "transforms", ".", "Compose", "(", "[", "\n", "transforms", ".", "Resize", "(", "84", ")", ",", "\n", "transforms", ".", "CenterCrop", "(", "84", ")", ",", "\n", "transforms", ".", "ToTensor", "(", ")", ",", "\n", "transforms", ".", "Normalize", "(", "mean", "=", "[", "0.485", ",", "0.456", ",", "0.406", "]", ",", "\n", "std", "=", "[", "0.229", ",", "0.224", ",", "0.225", "]", ")", "\n", "]", ")", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.mini_imagenet.MiniImageNet.__len__": [[52, 54], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "data", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.mini_imagenet.MiniImageNet.__getitem__": [[55, 61], ["mini_imagenet.MiniImageNet.transform_train", "mini_imagenet.MiniImageNet.transform_test", "torch.cat", "PIL.Image.open().convert", "PIL.Image.open().convert", "PIL.Image.open", "PIL.Image.open"], "methods", ["None"], ["", "def", "__getitem__", "(", "self", ",", "i", ")", ":", "\n", "        ", "path", ",", "label", "=", "self", ".", "data", "[", "i", "]", ",", "self", ".", "label", "[", "i", "]", "\n", "image1", "=", "self", ".", "transform_train", "(", "Image", ".", "open", "(", "path", ")", ".", "convert", "(", "'RGB'", ")", ")", "\n", "image2", "=", "self", ".", "transform_test", "(", "Image", ".", "open", "(", "path", ")", ".", "convert", "(", "'RGB'", ")", ")", "\n", "image", "=", "torch", ".", "cat", "(", "[", "image1", ",", "image2", "]", ")", "\n", "return", "image", ",", "label", "\n", "", "", ""]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.utils.Averager.__init__": [[25, 28], ["None"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "self", ".", "n", "=", "0", "\n", "self", ".", "v", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.utils.Averager.add": [[29, 32], ["None"], "methods", ["None"], ["", "def", "add", "(", "self", ",", "x", ")", ":", "\n", "        ", "self", ".", "v", "=", "(", "self", ".", "v", "*", "self", ".", "n", "+", "x", ")", "/", "(", "self", ".", "n", "+", "1", ")", "\n", "self", ".", "n", "+=", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.utils.Averager.item": [[33, 35], ["None"], "methods", ["None"], ["", "def", "item", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "v", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.utils.Timer.__init__": [[57, 59], ["time.time"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "self", ".", "o", "=", "time", ".", "time", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.utils.Timer.measure": [[60, 68], ["int", "time.time", "round"], "methods", ["None"], ["", "def", "measure", "(", "self", ",", "p", "=", "1", ")", ":", "\n", "        ", "x", "=", "(", "time", ".", "time", "(", ")", "-", "self", ".", "o", ")", "/", "p", "\n", "x", "=", "int", "(", "x", ")", "\n", "if", "x", ">=", "3600", ":", "\n", "            ", "return", "'{:.1f}h'", ".", "format", "(", "x", "/", "3600", ")", "\n", "", "if", "x", ">=", "60", ":", "\n", "            ", "return", "'{}m'", ".", "format", "(", "round", "(", "x", "/", "60", ")", ")", "\n", "", "return", "'{}s'", ".", "format", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.utils.set_gpu": [[9, 12], ["print"], "function", ["None"], ["def", "set_gpu", "(", "x", ")", ":", "\n", "    ", "os", ".", "environ", "[", "'CUDA_VISIBLE_DEVICES'", "]", "=", "x", "\n", "print", "(", "'using gpu:'", ",", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.utils.ensure_path": [[14, 21], ["os.path.exists", "os.mkdir", "input", "shutil.rmtree", "os.mkdir"], "function", ["None"], ["", "def", "ensure_path", "(", "path", ")", ":", "\n", "    ", "if", "os", ".", "path", ".", "exists", "(", "path", ")", ":", "\n", "        ", "if", "input", "(", "'{} exists, remove? ([y]/n)'", ".", "format", "(", "path", ")", ")", "!=", "'n'", ":", "\n", "            ", "shutil", ".", "rmtree", "(", "path", ")", "\n", "os", ".", "mkdir", "(", "path", ")", "\n", "", "", "else", ":", "\n", "        ", "os", ".", "mkdir", "(", "path", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.utils.count_acc": [[37, 40], ["torch.argmax"], "function", ["None"], ["", "", "def", "count_acc", "(", "logits", ",", "label", ")", ":", "\n", "    ", "pred", "=", "torch", ".", "argmax", "(", "logits", ",", "dim", "=", "1", ")", "\n", "return", "(", "pred", "==", "label", ")", ".", "type", "(", "torch", ".", "cuda", ".", "FloatTensor", ")", ".", "mean", "(", ")", ".", "item", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.utils.dot_metric": [[42, 44], ["torch.mm", "b.t"], "function", ["None"], ["", "def", "dot_metric", "(", "a", ",", "b", ")", ":", "\n", "    ", "return", "torch", ".", "mm", "(", "a", ",", "b", ".", "t", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.utils.euclidean_metric": [[46, 53], ["a.unsqueeze().expand.unsqueeze().expand", "b.unsqueeze().expand.unsqueeze().expand", "a.unsqueeze().expand.unsqueeze", "b.unsqueeze().expand.unsqueeze"], "function", ["None"], ["", "def", "euclidean_metric", "(", "a", ",", "b", ")", ":", "\n", "    ", "n", "=", "a", ".", "shape", "[", "0", "]", "\n", "m", "=", "b", ".", "shape", "[", "0", "]", "\n", "a", "=", "a", ".", "unsqueeze", "(", "1", ")", ".", "expand", "(", "n", ",", "m", ",", "-", "1", ")", "\n", "b", "=", "b", ".", "unsqueeze", "(", "0", ")", ".", "expand", "(", "n", ",", "m", ",", "-", "1", ")", "\n", "logits", "=", "-", "(", "(", "a", "-", "b", ")", "**", "2", ")", ".", "sum", "(", "dim", "=", "2", ")", "\n", "return", "logits", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.utils.pprint": [[70, 72], ["_utils_pp.pprint"], "function", ["home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.utils.pprint"], ["def", "pprint", "(", "x", ")", ":", "\n", "    ", "_utils_pp", ".", "pprint", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.tiangeluo_fsl-global.None.utils.l2_loss": [[74, 76], ["len"], "function", ["None"], ["", "def", "l2_loss", "(", "pred", ",", "label", ")", ":", "\n", "    ", "return", "(", "(", "pred", "-", "label", ")", "**", "2", ")", ".", "sum", "(", ")", "/", "len", "(", "pred", ")", "/", "2", "\n", "\n"]]}