{"home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.ensembling_train.lr_poly": [[41, 43], ["float"], "function", ["None"], ["def", "lr_poly", "(", "base_lr", ",", "iter", ",", "max_iter", ",", "power", ")", ":", "\n", "    ", "return", "base_lr", "*", "(", "(", "1", "-", "float", "(", "iter", ")", "/", "max_iter", ")", "**", "(", "power", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.ensembling_train.adjust_learning_rate": [[44, 48], ["ensembling_train.lr_poly"], "function", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.train.lr_poly"], ["", "def", "adjust_learning_rate", "(", "optimizer", ",", "i_iter", ")", ":", "\n", "    ", "lr", "=", "lr_poly", "(", "learning_rate", ",", "i_iter", ",", "num_steps", ",", "power", ")", "\n", "optimizer", ".", "param_groups", "[", "0", "]", "[", "'lr'", "]", "=", "lr", "\n", "return", "lr", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.mcdropout_train.lr_poly": [[41, 43], ["float"], "function", ["None"], ["def", "lr_poly", "(", "base_lr", ",", "iter", ",", "max_iter", ",", "power", ")", ":", "\n", "    ", "return", "base_lr", "*", "(", "(", "1", "-", "float", "(", "iter", ")", "/", "max_iter", ")", "**", "(", "power", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.mcdropout_train.adjust_learning_rate": [[44, 48], ["mcdropout_train.lr_poly"], "function", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.train.lr_poly"], ["", "def", "adjust_learning_rate", "(", "optimizer", ",", "i_iter", ")", ":", "\n", "    ", "lr", "=", "lr_poly", "(", "learning_rate", ",", "i_iter", ",", "num_steps", ",", "power", ")", "\n", "optimizer", ".", "param_groups", "[", "0", "]", "[", "'lr'", "]", "=", "lr", "\n", "return", "lr", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.mcdropout_train_syn.lr_poly": [[41, 43], ["float"], "function", ["None"], ["def", "lr_poly", "(", "base_lr", ",", "iter", ",", "max_iter", ",", "power", ")", ":", "\n", "    ", "return", "base_lr", "*", "(", "(", "1", "-", "float", "(", "iter", ")", "/", "max_iter", ")", "**", "(", "power", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.mcdropout_train_syn.adjust_learning_rate": [[44, 48], ["mcdropout_train_syn.lr_poly"], "function", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.train.lr_poly"], ["", "def", "adjust_learning_rate", "(", "optimizer", ",", "i_iter", ")", ":", "\n", "    ", "lr", "=", "lr_poly", "(", "learning_rate", ",", "i_iter", ",", "num_steps", ",", "power", ")", "\n", "optimizer", ".", "param_groups", "[", "0", "]", "[", "'lr'", "]", "=", "lr", "\n", "return", "lr", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.ensembling_train_syn.lr_poly": [[41, 43], ["float"], "function", ["None"], ["def", "lr_poly", "(", "base_lr", ",", "iter", ",", "max_iter", ",", "power", ")", ":", "\n", "    ", "return", "base_lr", "*", "(", "(", "1", "-", "float", "(", "iter", ")", "/", "max_iter", ")", "**", "(", "power", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.ensembling_train_syn.adjust_learning_rate": [[44, 48], ["ensembling_train_syn.lr_poly"], "function", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.train.lr_poly"], ["", "def", "adjust_learning_rate", "(", "optimizer", ",", "i_iter", ")", ":", "\n", "    ", "lr", "=", "lr_poly", "(", "learning_rate", ",", "i_iter", ",", "num_steps", ",", "power", ")", "\n", "optimizer", ".", "param_groups", "[", "0", "]", "[", "'lr'", "]", "=", "lr", "\n", "return", "lr", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.DatasetCityscapesAugmentation.__init__": [[30, 61], ["print", "print", "i_id.strip().split", "os.join", "os.join", "os.join", "os.join", "datasets.DatasetCityscapesAugmentation.files.append", "open", "len", "int", "len", "os.splitext", "os.splitext", "i_id.strip", "numpy.ceil", "os.basename", "os.basename", "float", "len"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetCityscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n", "\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.DatasetCityscapesAugmentation.__len__": [[62, 64], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.DatasetCityscapesAugmentation.__getitem__": [[65, 106], ["cv2.imread", "cv2.imread", "datasets.id2trainId", "datasets.generate_scale_label", "numpy.asarray", "max", "max", "random.randint", "random.randint", "numpy.asarray", "numpy.asarray", "image.transpose.transpose.transpose", "cv2.copyMakeBorder", "cv2.copyMakeBorder", "image.transpose.transpose.copy", "numpy.asarray.copy", "numpy.array", "numpy.random.choice"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.id2trainId", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.generate_scale_label"], ["", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n", "image", ",", "label", "=", "generate_scale_label", "(", "image", ",", "label", ")", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n", "\n", "mean", "=", "(", "102.9801", ",", "115.9465", ",", "122.7717", ")", "\n", "image", "=", "image", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", "\n", "image", "-=", "mean", "\n", "\n", "img_h", ",", "img_w", "=", "label", ".", "shape", "\n", "pad_h", "=", "max", "(", "self", ".", "crop_h", "-", "img_h", ",", "0", ")", "\n", "pad_w", "=", "max", "(", "self", ".", "crop_w", "-", "img_w", ",", "0", ")", "\n", "if", "pad_h", ">", "0", "or", "pad_w", ">", "0", ":", "\n", "            ", "img_pad", "=", "cv2", ".", "copyMakeBorder", "(", "image", ",", "0", ",", "pad_h", ",", "0", ",", "\n", "pad_w", ",", "cv2", ".", "BORDER_CONSTANT", ",", "\n", "value", "=", "(", "0.0", ",", "0.0", ",", "0.0", ")", ")", "\n", "label_pad", "=", "cv2", ".", "copyMakeBorder", "(", "label", ",", "0", ",", "pad_h", ",", "0", ",", "\n", "pad_w", ",", "cv2", ".", "BORDER_CONSTANT", ",", "\n", "value", "=", "(", "self", ".", "ignore_label", ",", ")", ")", "\n", "", "else", ":", "\n", "            ", "img_pad", ",", "label_pad", "=", "image", ",", "label", "\n", "\n", "", "img_h", ",", "img_w", "=", "label_pad", ".", "shape", "\n", "h_off", "=", "random", ".", "randint", "(", "0", ",", "img_h", "-", "self", ".", "crop_h", ")", "\n", "w_off", "=", "random", ".", "randint", "(", "0", ",", "img_w", "-", "self", ".", "crop_w", ")", "\n", "image", "=", "np", ".", "asarray", "(", "img_pad", "[", "h_off", ":", "h_off", "+", "self", ".", "crop_h", ",", "w_off", ":", "w_off", "+", "self", ".", "crop_w", "]", ",", "np", ".", "float32", ")", "\n", "label", "=", "np", ".", "asarray", "(", "label_pad", "[", "h_off", ":", "h_off", "+", "self", ".", "crop_h", ",", "w_off", ":", "w_off", "+", "self", ".", "crop_w", "]", ",", "np", ".", "float32", ")", "\n", "image", "=", "image", ".", "transpose", "(", "(", "2", ",", "0", ",", "1", ")", ")", "\n", "\n", "flip", "=", "np", ".", "random", ".", "choice", "(", "2", ")", "*", "2", "-", "1", "\n", "image", "=", "image", "[", ":", ",", ":", ",", ":", ":", "flip", "]", "\n", "label", "=", "label", "[", ":", ",", ":", ":", "flip", "]", "\n", "\n", "return", "image", ".", "copy", "(", ")", ",", "label", ".", "copy", "(", ")", ",", "np", ".", "array", "(", "size", ")", ",", "name", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.DatasetCityscapesEval.__init__": [[108, 135], ["print", "i_id.strip().split", "os.join", "os.join", "os.join", "os.join", "datasets.DatasetCityscapesEval.files.append", "open", "len", "os.splitext", "os.splitext", "i_id.strip", "os.basename", "os.basename"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesEval - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n", "\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.DatasetCityscapesEval.__len__": [[136, 138], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.DatasetCityscapesEval.__getitem__": [[139, 161], ["cv2.imread", "cv2.imread", "datasets.id2trainId", "numpy.asarray", "image.transpose.transpose.transpose", "os.path.exists", "os.path.exists", "os.path.exists", "os.path.exists", "datasets.DatasetCityscapesEval.__getitem__", "image.transpose.transpose.copy", "id2trainId.copy", "numpy.array"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.id2trainId", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__getitem__"], ["", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "datafiles", "[", "\"img\"", "]", ")", ":", "# (26 out of 25000 images are missing)", "\n", "            ", "return", "self", ".", "__getitem__", "(", "0", ")", "\n", "\n", "", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n", "\n", "mean", "=", "(", "102.9801", ",", "115.9465", ",", "122.7717", ")", "\n", "image", "=", "image", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", "\n", "image", "-=", "mean", "\n", "\n", "image", "=", "image", ".", "transpose", "(", "(", "2", ",", "0", ",", "1", ")", ")", "\n", "\n", "return", "image", ".", "copy", "(", ")", ",", "label", ".", "copy", "(", ")", ",", "np", ".", "array", "(", "size", ")", ",", "name", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.DatasetCityscapesEvalSeq.__init__": [[163, 183], ["os.listdir", "os.listdir", "os.listdir", "os.listdir", "len", "print", "datasets.DatasetCityscapesEvalSeq.examples.append", "file_name.split"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "data_path", ",", "sequence", "=", "\"00\"", ")", ":", "\n", "        ", "self", ".", "data_path", "=", "data_path", "\n", "\n", "self", ".", "img_dir", "=", "self", ".", "data_path", "+", "\"/leftImg8bit/demoVideo/stuttgart_\"", "+", "sequence", "+", "\"/\"", "\n", "\n", "self", ".", "examples", "=", "[", "]", "\n", "\n", "file_names", "=", "os", ".", "listdir", "(", "self", ".", "img_dir", ")", "\n", "for", "file_name", "in", "file_names", ":", "\n", "            ", "img_id", "=", "file_name", ".", "split", "(", "\"_leftImg8bit.png\"", ")", "[", "0", "]", "\n", "\n", "img_path", "=", "self", ".", "img_dir", "+", "file_name", "\n", "\n", "example", "=", "{", "}", "\n", "example", "[", "\"img_path\"", "]", "=", "img_path", "\n", "example", "[", "\"img_id\"", "]", "=", "img_id", "\n", "self", ".", "examples", ".", "append", "(", "example", ")", "\n", "\n", "", "self", ".", "num_examples", "=", "len", "(", "self", ".", "examples", ")", "\n", "print", "(", "\"DatasetCityscapesEvalSeq - num examples: %d\"", "%", "self", ".", "num_examples", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.DatasetCityscapesEvalSeq.__len__": [[184, 186], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "examples", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.DatasetCityscapesEvalSeq.__getitem__": [[187, 201], ["cv2.imread", "numpy.asarray", "image.transpose.transpose.transpose", "image.transpose.transpose.copy", "numpy.array"], "methods", ["None"], ["", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "examples", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img_path\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"img_id\"", "]", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n", "\n", "mean", "=", "(", "102.9801", ",", "115.9465", ",", "122.7717", ")", "\n", "image", "=", "image", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", "\n", "image", "-=", "mean", "\n", "\n", "image", "=", "image", ".", "transpose", "(", "(", "2", ",", "0", ",", "1", ")", ")", "\n", "\n", "return", "image", ".", "copy", "(", ")", ",", "np", ".", "array", "(", "size", ")", ",", "name", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.DatasetSynscapesAugmentation.__init__": [[211, 246], ["print", "print", "datasets.DatasetSynscapesAugmentation.files.append", "open", "pickle.load", "Exception", "len", "int", "len", "open", "pickle.load", "numpy.ceil", "float", "len"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "root", ",", "root_meta", ",", "type", "=", "\"train\"", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "root_meta", "=", "root_meta", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "if", "type", "==", "\"train\"", ":", "\n", "            ", "with", "open", "(", "root_meta", "+", "\"/train_img_ids.pkl\"", ",", "\"rb\"", ")", "as", "file", ":", "# (needed for python3)", "\n", "                ", "self", ".", "img_ids", "=", "pickle", ".", "load", "(", "file", ")", "\n", "", "", "elif", "type", "==", "\"val\"", ":", "\n", "            ", "with", "open", "(", "root_meta", "+", "\"/val_img_ids.pkl\"", ",", "\"rb\"", ")", "as", "file", ":", "# (needed for python3)", "\n", "                ", "self", ".", "img_ids", "=", "pickle", ".", "load", "(", "file", ")", "\n", "", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "\"type must be either 'train' or 'val'!\"", ")", "\n", "\n", "", "print", "(", "\"DatasetSynscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetSynscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "img_id", "in", "self", ".", "img_ids", ":", "\n", "            ", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "self", ".", "root", "+", "\"/img/rgb-2k/\"", "+", "img_id", "+", "\".png\"", ",", "\n", "\"label\"", ":", "self", ".", "root_meta", "+", "\"/gtFine/\"", "+", "img_id", "+", "\".png\"", ",", "\n", "\"name\"", ":", "img_id", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.DatasetSynscapesAugmentation.__len__": [[247, 249], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.DatasetSynscapesAugmentation.__getitem__": [[250, 294], ["cv2.imread", "cv2.imread", "datasets.id2trainId", "datasets.generate_scale_label", "numpy.asarray", "max", "max", "random.randint", "random.randint", "numpy.asarray", "numpy.asarray", "image.transpose.transpose.transpose", "os.path.exists", "os.path.exists", "os.path.exists", "os.path.exists", "datasets.DatasetSynscapesAugmentation.__getitem__", "cv2.copyMakeBorder", "cv2.copyMakeBorder", "image.transpose.transpose.copy", "numpy.asarray.copy", "numpy.array", "numpy.random.choice"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.id2trainId", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.generate_scale_label", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__getitem__"], ["", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "datafiles", "[", "\"img\"", "]", ")", ":", "# (26 out of 25000 images are missing)", "\n", "            ", "return", "self", ".", "__getitem__", "(", "0", ")", "\n", "\n", "", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n", "image", ",", "label", "=", "generate_scale_label", "(", "image", ",", "label", ")", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n", "\n", "mean", "=", "(", "102.9801", ",", "115.9465", ",", "122.7717", ")", "\n", "image", "=", "image", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", "\n", "image", "-=", "mean", "\n", "\n", "img_h", ",", "img_w", "=", "label", ".", "shape", "\n", "pad_h", "=", "max", "(", "self", ".", "crop_h", "-", "img_h", ",", "0", ")", "\n", "pad_w", "=", "max", "(", "self", ".", "crop_w", "-", "img_w", ",", "0", ")", "\n", "if", "pad_h", ">", "0", "or", "pad_w", ">", "0", ":", "\n", "            ", "img_pad", "=", "cv2", ".", "copyMakeBorder", "(", "image", ",", "0", ",", "pad_h", ",", "0", ",", "\n", "pad_w", ",", "cv2", ".", "BORDER_CONSTANT", ",", "\n", "value", "=", "(", "0.0", ",", "0.0", ",", "0.0", ")", ")", "\n", "label_pad", "=", "cv2", ".", "copyMakeBorder", "(", "label", ",", "0", ",", "pad_h", ",", "0", ",", "\n", "pad_w", ",", "cv2", ".", "BORDER_CONSTANT", ",", "\n", "value", "=", "(", "self", ".", "ignore_label", ",", ")", ")", "\n", "", "else", ":", "\n", "            ", "img_pad", ",", "label_pad", "=", "image", ",", "label", "\n", "\n", "", "img_h", ",", "img_w", "=", "label_pad", ".", "shape", "\n", "h_off", "=", "random", ".", "randint", "(", "0", ",", "img_h", "-", "self", ".", "crop_h", ")", "\n", "w_off", "=", "random", ".", "randint", "(", "0", ",", "img_w", "-", "self", ".", "crop_w", ")", "\n", "image", "=", "np", ".", "asarray", "(", "img_pad", "[", "h_off", ":", "h_off", "+", "self", ".", "crop_h", ",", "w_off", ":", "w_off", "+", "self", ".", "crop_w", "]", ",", "np", ".", "float32", ")", "\n", "label", "=", "np", ".", "asarray", "(", "label_pad", "[", "h_off", ":", "h_off", "+", "self", ".", "crop_h", ",", "w_off", ":", "w_off", "+", "self", ".", "crop_w", "]", ",", "np", ".", "float32", ")", "\n", "image", "=", "image", ".", "transpose", "(", "(", "2", ",", "0", ",", "1", ")", ")", "\n", "\n", "flip", "=", "np", ".", "random", ".", "choice", "(", "2", ")", "*", "2", "-", "1", "\n", "image", "=", "image", "[", ":", ",", ":", ",", ":", ":", "flip", "]", "\n", "label", "=", "label", "[", ":", ",", ":", ":", "flip", "]", "\n", "\n", "return", "image", ".", "copy", "(", ")", ",", "label", ".", "copy", "(", ")", ",", "np", ".", "array", "(", "size", ")", ",", "name", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.DatasetSynscapesEval.__init__": [[296, 327], ["print", "datasets.DatasetSynscapesEval.files.append", "open", "pickle.load", "Exception", "len", "open", "pickle.load"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "root", ",", "root_meta", ",", "type", "=", "\"val\"", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "root_meta", "=", "root_meta", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "if", "type", "==", "\"train\"", ":", "\n", "            ", "with", "open", "(", "root_meta", "+", "\"/train_img_ids.pkl\"", ",", "\"rb\"", ")", "as", "file", ":", "# (needed for python3)", "\n", "                ", "self", ".", "img_ids", "=", "pickle", ".", "load", "(", "file", ")", "\n", "", "", "elif", "type", "==", "\"val\"", ":", "\n", "            ", "with", "open", "(", "root_meta", "+", "\"/val_img_ids.pkl\"", ",", "\"rb\"", ")", "as", "file", ":", "# (needed for python3)", "\n", "                ", "self", ".", "img_ids", "=", "pickle", ".", "load", "(", "file", ")", "\n", "", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "\"type must be either 'train' or 'val'!\"", ")", "\n", "\n", "", "print", "(", "\"DatasetSynscapesEval - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "img_id", "in", "self", ".", "img_ids", ":", "\n", "            ", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "self", ".", "root", "+", "\"/img/rgb-2k/\"", "+", "img_id", "+", "\".png\"", ",", "\n", "\"label\"", ":", "self", ".", "root_meta", "+", "\"/gtFine/\"", "+", "img_id", "+", "\".png\"", ",", "\n", "\"name\"", ":", "img_id", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.DatasetSynscapesEval.__len__": [[328, 330], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.DatasetSynscapesEval.__getitem__": [[331, 353], ["cv2.imread", "cv2.imread", "datasets.id2trainId", "numpy.asarray", "image.transpose.transpose.transpose", "os.path.exists", "os.path.exists", "os.path.exists", "os.path.exists", "datasets.DatasetSynscapesEval.__getitem__", "image.transpose.transpose.copy", "id2trainId.copy", "numpy.array"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.id2trainId", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__getitem__"], ["", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "datafiles", "[", "\"img\"", "]", ")", ":", "# (26 out of 25000 images are missing)", "\n", "            ", "return", "self", ".", "__getitem__", "(", "0", ")", "\n", "\n", "", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n", "\n", "mean", "=", "(", "102.9801", ",", "115.9465", ",", "122.7717", ")", "\n", "image", "=", "image", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", "\n", "image", "-=", "mean", "\n", "\n", "image", "=", "image", ".", "transpose", "(", "(", "2", ",", "0", ",", "1", ")", ")", "\n", "\n", "return", "image", ".", "copy", "(", ")", ",", "label", ".", "copy", "(", ")", ",", "np", ".", "array", "(", "size", ")", ",", "name", "\n", "", "", ""]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.generate_scale_label": [[14, 19], ["cv2.resize", "cv2.resize", "random.randint"], "function", ["None"], ["def", "generate_scale_label", "(", "image", ",", "label", ")", ":", "\n", "    ", "f_scale", "=", "0.5", "+", "random", ".", "randint", "(", "0", ",", "16", ")", "/", "10.0", "\n", "image", "=", "cv2", ".", "resize", "(", "image", ",", "None", ",", "fx", "=", "f_scale", ",", "fy", "=", "f_scale", ",", "interpolation", "=", "cv2", ".", "INTER_LINEAR", ")", "\n", "label", "=", "cv2", ".", "resize", "(", "label", ",", "None", ",", "fx", "=", "f_scale", ",", "fy", "=", "f_scale", ",", "interpolation", "=", "cv2", ".", "INTER_NEAREST", ")", "\n", "return", "image", ",", "label", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.segmentation.datasets.id2trainId": [[20, 25], ["label.copy", "id_to_trainid.items"], "function", ["None"], ["", "def", "id2trainId", "(", "label", ",", "id_to_trainid", ")", ":", "\n", "    ", "label_copy", "=", "label", ".", "copy", "(", ")", "\n", "for", "k", ",", "v", "in", "id_to_trainid", ".", "items", "(", ")", ":", "\n", "        ", "label_copy", "[", "label", "==", "k", "]", "=", "v", "\n", "", "return", "label_copy", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.AllReduce.forward": [[33, 44], ["sorted", "torch.reduce_add_coalesced", "torch.reduce_add_coalesced", "torch.broadcast_coalesced", "torch.broadcast_coalesced", "tuple", "inputs[].get_device", "range", "range", "len", "len", "i[].get_device"], "methods", ["None"], ["    ", "@", "staticmethod", "\n", "def", "forward", "(", "ctx", ",", "num_inputs", ",", "*", "inputs", ")", ":", "\n", "        ", "ctx", ".", "num_inputs", "=", "num_inputs", "\n", "ctx", ".", "target_gpus", "=", "[", "inputs", "[", "i", "]", ".", "get_device", "(", ")", "for", "i", "in", "range", "(", "0", ",", "len", "(", "inputs", ")", ",", "num_inputs", ")", "]", "\n", "inputs", "=", "[", "inputs", "[", "i", ":", "i", "+", "num_inputs", "]", "\n", "for", "i", "in", "range", "(", "0", ",", "len", "(", "inputs", ")", ",", "num_inputs", ")", "]", "\n", "# sort before reduce sum", "\n", "inputs", "=", "sorted", "(", "inputs", ",", "key", "=", "lambda", "i", ":", "i", "[", "0", "]", ".", "get_device", "(", ")", ")", "\n", "results", "=", "comm", ".", "reduce_add_coalesced", "(", "inputs", ",", "ctx", ".", "target_gpus", "[", "0", "]", ")", "\n", "outputs", "=", "comm", ".", "broadcast_coalesced", "(", "results", ",", "ctx", ".", "target_gpus", ")", "\n", "return", "tuple", "(", "[", "t", "for", "tensors", "in", "outputs", "for", "t", "in", "tensors", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.AllReduce.backward": [[45, 53], ["torch.reduce_add_coalesced", "torch.reduce_add_coalesced", "torch.broadcast_coalesced", "torch.broadcast_coalesced", "tuple", "range", "len", "torch.autograd.Variable", "torch.autograd.Variable"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "backward", "(", "ctx", ",", "*", "inputs", ")", ":", "\n", "        ", "inputs", "=", "[", "i", ".", "data", "for", "i", "in", "inputs", "]", "\n", "inputs", "=", "[", "inputs", "[", "i", ":", "i", "+", "ctx", ".", "num_inputs", "]", "\n", "for", "i", "in", "range", "(", "0", ",", "len", "(", "inputs", ")", ",", "ctx", ".", "num_inputs", ")", "]", "\n", "results", "=", "comm", ".", "reduce_add_coalesced", "(", "inputs", ",", "ctx", ".", "target_gpus", "[", "0", "]", ")", "\n", "outputs", "=", "comm", ".", "broadcast_coalesced", "(", "results", ",", "ctx", ".", "target_gpus", ")", "\n", "return", "(", "None", ",", ")", "+", "tuple", "(", "[", "Variable", "(", "t", ")", "for", "tensors", "in", "outputs", "for", "t", "in", "tensors", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.Reduce.forward": [[56, 61], ["sorted", "torch.reduce_add", "torch.reduce_add", "inputs[].get_device", "range", "len", "i.get_device"], "methods", ["None"], ["    ", "@", "staticmethod", "\n", "def", "forward", "(", "ctx", ",", "*", "inputs", ")", ":", "\n", "        ", "ctx", ".", "target_gpus", "=", "[", "inputs", "[", "i", "]", ".", "get_device", "(", ")", "for", "i", "in", "range", "(", "len", "(", "inputs", ")", ")", "]", "\n", "inputs", "=", "sorted", "(", "inputs", ",", "key", "=", "lambda", "i", ":", "i", ".", "get_device", "(", ")", ")", "\n", "return", "comm", ".", "reduce_add", "(", "inputs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.Reduce.backward": [[62, 65], ["torch.nn.parallel._functions.Broadcast.apply", "torch.nn.parallel._functions.Broadcast.apply"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "backward", "(", "ctx", ",", "gradOutput", ")", ":", "\n", "        ", "return", "Broadcast", ".", "apply", "(", "ctx", ".", "target_gpus", ",", "gradOutput", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.DataParallelModel.gather": [[96, 98], ["None"], "methods", ["None"], ["def", "gather", "(", "self", ",", "outputs", ",", "output_device", ")", ":", "\n", "        ", "return", "outputs", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.DataParallelModel.replicate": [[99, 103], ["super().replicate", "parallel.execute_replication_callbacks"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.DataParallelModel.replicate", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.execute_replication_callbacks"], ["", "def", "replicate", "(", "self", ",", "module", ",", "device_ids", ")", ":", "\n", "        ", "modules", "=", "super", "(", "DataParallelModel", ",", "self", ")", ".", "replicate", "(", "module", ",", "device_ids", ")", "\n", "execute_replication_callbacks", "(", "modules", ")", "\n", "return", "modules", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.DataParallelCriterion.forward": [[125, 137], ["parallel.DataParallelCriterion.scatter", "parallel.DataParallelCriterion.replicate", "tuple", "parallel._criterion_parallel_apply", "parallel.DataParallelCriterion.module", "len", "parallel.DataParallelCriterion.module", "Reduce.apply", "len", "len"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.DataParallelModel.replicate", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel._criterion_parallel_apply"], ["def", "forward", "(", "self", ",", "inputs", ",", "*", "targets", ",", "**", "kwargs", ")", ":", "\n", "# input should be already scatterd", "\n", "# scattering the targets instead", "\n", "        ", "if", "not", "self", ".", "device_ids", ":", "\n", "            ", "return", "self", ".", "module", "(", "inputs", ",", "*", "targets", ",", "**", "kwargs", ")", "\n", "", "targets", ",", "kwargs", "=", "self", ".", "scatter", "(", "targets", ",", "kwargs", ",", "self", ".", "device_ids", ")", "\n", "if", "len", "(", "self", ".", "device_ids", ")", "==", "1", ":", "\n", "            ", "return", "self", ".", "module", "(", "inputs", ",", "*", "targets", "[", "0", "]", ",", "**", "kwargs", "[", "0", "]", ")", "\n", "", "replicas", "=", "self", ".", "replicate", "(", "self", ".", "module", ",", "self", ".", "device_ids", "[", ":", "len", "(", "inputs", ")", "]", ")", "\n", "targets", "=", "tuple", "(", "targets_per_gpu", "[", "0", "]", "for", "targets_per_gpu", "in", "targets", ")", "# fix bug", "\n", "outputs", "=", "_criterion_parallel_apply", "(", "replicas", ",", "inputs", ",", "targets", ",", "kwargs", ")", "\n", "return", "Reduce", ".", "apply", "(", "*", "outputs", ")", "/", "len", "(", "outputs", ")", "\n", "#return self.gather(outputs, self.output_device).mean()", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.allreduce": [[26, 31], ["AllReduce.apply"], "function", ["None"], ["def", "allreduce", "(", "*", "inputs", ")", ":", "\n", "    ", "\"\"\"Cross GPU all reduce autograd operation for calculate mean and\n    variance in SyncBN.\n    \"\"\"", "\n", "return", "AllReduce", ".", "apply", "(", "*", "inputs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel._criterion_parallel_apply": [[140, 193], ["threading.Lock", "range", "len", "len", "len", "len", "torch.is_grad_enabled", "torch.is_grad_enabled", "len", "parallel._criterion_parallel_apply._worker"], "function", ["None"], ["", "", "def", "_criterion_parallel_apply", "(", "modules", ",", "inputs", ",", "targets", ",", "kwargs_tup", "=", "None", ",", "devices", "=", "None", ")", ":", "\n", "    ", "assert", "len", "(", "modules", ")", "==", "len", "(", "inputs", ")", "\n", "assert", "len", "(", "targets", ")", "==", "len", "(", "inputs", ")", "\n", "if", "kwargs_tup", ":", "\n", "        ", "assert", "len", "(", "modules", ")", "==", "len", "(", "kwargs_tup", ")", "\n", "", "else", ":", "\n", "        ", "kwargs_tup", "=", "(", "{", "}", ",", ")", "*", "len", "(", "modules", ")", "\n", "", "if", "devices", "is", "not", "None", ":", "\n", "        ", "assert", "len", "(", "modules", ")", "==", "len", "(", "devices", ")", "\n", "", "else", ":", "\n", "        ", "devices", "=", "[", "None", "]", "*", "len", "(", "modules", ")", "\n", "\n", "", "lock", "=", "threading", ".", "Lock", "(", ")", "\n", "results", "=", "{", "}", "\n", "if", "torch_ver", "!=", "\"0.3\"", ":", "\n", "        ", "grad_enabled", "=", "torch", ".", "is_grad_enabled", "(", ")", "\n", "\n", "", "def", "_worker", "(", "i", ",", "module", ",", "input", ",", "target", ",", "kwargs", ",", "device", "=", "None", ")", ":", "\n", "        ", "if", "torch_ver", "!=", "\"0.3\"", ":", "\n", "            ", "torch", ".", "set_grad_enabled", "(", "grad_enabled", ")", "\n", "", "if", "device", "is", "None", ":", "\n", "            ", "device", "=", "get_a_var", "(", "input", ")", ".", "get_device", "(", ")", "\n", "", "try", ":", "\n", "            ", "with", "torch", ".", "cuda", ".", "device", "(", "device", ")", ":", "\n", "                ", "output", "=", "module", "(", "input", ",", "target", ",", "**", "kwargs", ")", "\n", "# output = module(*(input + target), **kwargs)", "\n", "", "with", "lock", ":", "\n", "                ", "results", "[", "i", "]", "=", "output", "\n", "", "", "except", "Exception", "as", "e", ":", "\n", "            ", "with", "lock", ":", "\n", "                ", "results", "[", "i", "]", "=", "e", "\n", "\n", "", "", "", "if", "len", "(", "modules", ")", ">", "1", ":", "\n", "        ", "threads", "=", "[", "threading", ".", "Thread", "(", "target", "=", "_worker", ",", "\n", "args", "=", "(", "i", ",", "module", ",", "input", ",", "target", ",", "\n", "kwargs", ",", "device", ")", ",", ")", "\n", "for", "i", ",", "(", "module", ",", "input", ",", "target", ",", "kwargs", ",", "device", ")", "in", "\n", "enumerate", "(", "zip", "(", "modules", ",", "inputs", ",", "targets", ",", "kwargs_tup", ",", "devices", ")", ")", "]", "\n", "\n", "for", "thread", "in", "threads", ":", "\n", "            ", "thread", ".", "start", "(", ")", "\n", "", "for", "thread", "in", "threads", ":", "\n", "            ", "thread", ".", "join", "(", ")", "\n", "", "", "else", ":", "\n", "        ", "_worker", "(", "0", ",", "modules", "[", "0", "]", ",", "inputs", "[", "0", "]", ",", "kwargs_tup", "[", "0", "]", ",", "devices", "[", "0", "]", ")", "\n", "\n", "", "outputs", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "len", "(", "inputs", ")", ")", ":", "\n", "        ", "output", "=", "results", "[", "i", "]", "\n", "if", "isinstance", "(", "output", ",", "Exception", ")", ":", "\n", "            ", "raise", "output", "\n", "", "outputs", ".", "append", "(", "output", ")", "\n", "", "return", "outputs", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.execute_replication_callbacks": [[203, 225], ["len", "enumerate", "list", "parallel.CallbackContext", "enumerate", "master_copy.modules", "range", "module.modules", "hasattr", "m.__data_parallel_replicate__"], "function", ["None"], ["", "def", "execute_replication_callbacks", "(", "modules", ")", ":", "\n", "    ", "\"\"\"\n    Execute an replication callback `__data_parallel_replicate__` on each module created\n    by original replication.\n\n    The callback will be invoked with arguments `__data_parallel_replicate__(ctx, copy_id)`\n\n    Note that, as all modules are isomorphism, we assign each sub-module with a context\n    (shared among multiple copies of this module on different devices).\n    Through this context, different copies can share some information.\n\n    We guarantee that the callback on the master copy (the first copy) will be called ahead\n    of calling the callback of any slave copies.\n    \"\"\"", "\n", "master_copy", "=", "modules", "[", "0", "]", "\n", "nr_modules", "=", "len", "(", "list", "(", "master_copy", ".", "modules", "(", ")", ")", ")", "\n", "ctxs", "=", "[", "CallbackContext", "(", ")", "for", "_", "in", "range", "(", "nr_modules", ")", "]", "\n", "\n", "for", "i", ",", "module", "in", "enumerate", "(", "modules", ")", ":", "\n", "        ", "for", "j", ",", "m", "in", "enumerate", "(", "module", ".", "modules", "(", ")", ")", ":", "\n", "            ", "if", "hasattr", "(", "m", ",", "'__data_parallel_replicate__'", ")", ":", "\n", "                ", "m", ".", "__data_parallel_replicate__", "(", "ctxs", "[", "j", "]", ",", "i", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.patch_replication_callback": [[227, 252], ["isinstance", "functools.wraps", "old_replicate", "parallel.execute_replication_callbacks"], "function", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.execute_replication_callbacks"], ["", "", "", "", "def", "patch_replication_callback", "(", "data_parallel", ")", ":", "\n", "    ", "\"\"\"\n    Monkey-patch an existing `DataParallel` object. Add the replication callback.\n    Useful when you have customized `DataParallel` implementation.\n\n    Examples:\n        > sync_bn = SynchronizedBatchNorm1d(10, eps=1e-5, affine=False)\n        > sync_bn = DataParallel(sync_bn, device_ids=[0, 1])\n        > patch_replication_callback(sync_bn)\n        # this is equivalent to\n        > sync_bn = SynchronizedBatchNorm1d(10, eps=1e-5, affine=False)\n        > sync_bn = DataParallelWithCallback(sync_bn, device_ids=[0, 1])\n    \"\"\"", "\n", "\n", "assert", "isinstance", "(", "data_parallel", ",", "DataParallel", ")", "\n", "\n", "old_replicate", "=", "data_parallel", ".", "replicate", "\n", "\n", "@", "functools", ".", "wraps", "(", "old_replicate", ")", "\n", "def", "new_replicate", "(", "module", ",", "device_ids", ")", ":", "\n", "        ", "modules", "=", "old_replicate", "(", "module", ",", "device_ids", ")", "\n", "execute_replication_callbacks", "(", "modules", ")", "\n", "return", "modules", "\n", "\n", "", "data_parallel", ".", "replicate", "=", "new_replicate", "", "", ""]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.utils.label_img_2_color": [[7, 35], ["numpy.zeros", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array"], "function", ["None"], ["def", "label_img_2_color", "(", "img", ")", ":", "\n", "    ", "img_height", ",", "img_width", "=", "img", ".", "shape", "\n", "\n", "img_color", "=", "np", ".", "zeros", "(", "(", "img_height", ",", "img_width", ",", "3", ")", ",", "dtype", "=", "np", ".", "uint8", ")", "\n", "\n", "img_color", "[", "img", "==", "0", "]", "=", "np", ".", "array", "(", "[", "128", ",", "64", ",", "128", "]", ")", "\n", "img_color", "[", "img", "==", "1", "]", "=", "np", ".", "array", "(", "[", "244", ",", "35", ",", "232", "]", ")", "\n", "img_color", "[", "img", "==", "2", "]", "=", "np", ".", "array", "(", "[", "70", ",", "70", ",", "70", "]", ")", "\n", "img_color", "[", "img", "==", "3", "]", "=", "np", ".", "array", "(", "[", "102", ",", "102", ",", "156", "]", ")", "\n", "img_color", "[", "img", "==", "4", "]", "=", "np", ".", "array", "(", "[", "190", ",", "153", ",", "153", "]", ")", "\n", "img_color", "[", "img", "==", "5", "]", "=", "np", ".", "array", "(", "[", "153", ",", "153", ",", "153", "]", ")", "\n", "img_color", "[", "img", "==", "6", "]", "=", "np", ".", "array", "(", "[", "250", ",", "170", ",", "30", "]", ")", "\n", "img_color", "[", "img", "==", "7", "]", "=", "np", ".", "array", "(", "[", "220", ",", "220", ",", "0", "]", ")", "\n", "img_color", "[", "img", "==", "8", "]", "=", "np", ".", "array", "(", "[", "107", ",", "142", ",", "35", "]", ")", "\n", "img_color", "[", "img", "==", "9", "]", "=", "np", ".", "array", "(", "[", "152", ",", "251", ",", "152", "]", ")", "\n", "img_color", "[", "img", "==", "10", "]", "=", "np", ".", "array", "(", "[", "70", ",", "130", ",", "180", "]", ")", "\n", "img_color", "[", "img", "==", "11", "]", "=", "np", ".", "array", "(", "[", "220", ",", "20", ",", "60", "]", ")", "\n", "img_color", "[", "img", "==", "12", "]", "=", "np", ".", "array", "(", "[", "255", ",", "0", ",", "0", "]", ")", "\n", "img_color", "[", "img", "==", "13", "]", "=", "np", ".", "array", "(", "[", "0", ",", "0", ",", "142", "]", ")", "\n", "img_color", "[", "img", "==", "14", "]", "=", "np", ".", "array", "(", "[", "0", ",", "0", ",", "70", "]", ")", "\n", "img_color", "[", "img", "==", "15", "]", "=", "np", ".", "array", "(", "[", "0", ",", "60", ",", "100", "]", ")", "\n", "img_color", "[", "img", "==", "16", "]", "=", "np", ".", "array", "(", "[", "0", ",", "80", ",", "100", "]", ")", "\n", "img_color", "[", "img", "==", "17", "]", "=", "np", ".", "array", "(", "[", "0", ",", "0", ",", "230", "]", ")", "\n", "img_color", "[", "img", "==", "18", "]", "=", "np", ".", "array", "(", "[", "119", ",", "11", ",", "32", "]", ")", "\n", "\n", "img_color", "[", "img", "==", "255", "]", "=", "np", ".", "array", "(", "[", "0", ",", "0", ",", "0", "]", ")", "\n", "\n", "return", "img_color", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.utils.get_confusion_matrix": [[36, 55], ["numpy.bincount", "numpy.zeros", "range", "range", "len"], "function", ["None"], ["", "def", "get_confusion_matrix", "(", "gt_label", ",", "pred_label", ",", "class_num", ")", ":", "\n", "        ", "\"\"\"\n        Calcute the confusion matrix by given label and pred\n        :param gt_label: the ground truth label\n        :param pred_label: the pred label\n        :param class_num: the nunber of class\n        :return: the confusion matrix\n        \"\"\"", "\n", "index", "=", "(", "gt_label", "*", "class_num", "+", "pred_label", ")", ".", "astype", "(", "'int32'", ")", "\n", "label_count", "=", "np", ".", "bincount", "(", "index", ")", "\n", "confusion_matrix", "=", "np", ".", "zeros", "(", "(", "class_num", ",", "class_num", ")", ")", "\n", "\n", "for", "i_label", "in", "range", "(", "class_num", ")", ":", "\n", "            ", "for", "i_pred_label", "in", "range", "(", "class_num", ")", ":", "\n", "                ", "cur_index", "=", "i_label", "*", "class_num", "+", "i_pred_label", "\n", "if", "cur_index", "<", "len", "(", "label_count", ")", ":", "\n", "                    ", "confusion_matrix", "[", "i_label", ",", "i_pred_label", "]", "=", "label_count", "[", "cur_index", "]", "\n", "\n", "", "", "", "return", "confusion_matrix", "\n", "", ""]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.criterion.CriterionCrossEntropy.__init__": [[9, 14], ["torch.Module.__init__", "torch.FloatTensor", "torch.FloatTensor", "torch.FloatTensor", "torch.FloatTensor", "torch.nn.CrossEntropyLoss", "torch.nn.CrossEntropyLoss", "torch.nn.CrossEntropyLoss", "torch.nn.CrossEntropyLoss"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__"], ["    ", "def", "__init__", "(", "self", ",", "ignore_index", "=", "255", ")", ":", "\n", "        ", "super", "(", "CriterionCrossEntropy", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "ignore_index", "=", "ignore_index", "\n", "weight", "=", "torch", ".", "FloatTensor", "(", "[", "0.8373", ",", "0.918", ",", "0.866", ",", "1.0345", ",", "1.0166", ",", "0.9969", ",", "0.9754", ",", "1.0489", ",", "0.8786", ",", "1.0023", ",", "0.9539", ",", "0.9843", ",", "1.1116", ",", "0.9037", ",", "1.0865", ",", "1.0955", ",", "1.0865", ",", "1.1529", ",", "1.0507", "]", ")", "\n", "self", ".", "criterion", "=", "torch", ".", "nn", ".", "CrossEntropyLoss", "(", "weight", "=", "weight", ",", "ignore_index", "=", "ignore_index", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.criterion.CriterionCrossEntropy.forward": [[15, 22], ["torch.nn.functional.upsample", "torch.nn.functional.upsample", "criterion.CriterionCrossEntropy.criterion", "target.size", "target.size"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "preds", ",", "target", ")", ":", "\n", "        ", "h", ",", "w", "=", "target", ".", "size", "(", "1", ")", ",", "target", ".", "size", "(", "2", ")", "\n", "scale_pred", "=", "F", ".", "upsample", "(", "input", "=", "preds", ",", "size", "=", "(", "h", ",", "w", ")", ",", "mode", "=", "'bilinear'", ",", "align_corners", "=", "True", ")", "\n", "\n", "loss", "=", "self", ".", "criterion", "(", "scale_pred", ",", "target", ")", "\n", "\n", "return", "loss", "\n", "", "", ""]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions.InPlaceABN.forward": [[76, 114], ["functions._count_samples", "x.contiguous.contiguous.contiguous", "_backend.forward", "functions._act_forward", "ctx.save_for_backward", "weight.contiguous", "x.contiguous.contiguous.new_empty", "bias.contiguous", "x.contiguous.contiguous.new_empty", "_backend.mean_var", "running_mean.mul_().add_", "running_var.mul_().add_", "ctx.mark_dirty", "ctx.mark_dirty", "running_mean.contiguous", "running_var.contiguous", "running_mean.mul_", "running_var.mul_"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions._count_samples", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.criterion.MAE.forward", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions._act_forward"], ["    ", "@", "staticmethod", "\n", "def", "forward", "(", "ctx", ",", "x", ",", "weight", ",", "bias", ",", "running_mean", ",", "running_var", ",", "\n", "training", "=", "True", ",", "momentum", "=", "0.1", ",", "eps", "=", "1e-05", ",", "activation", "=", "ACT_LEAKY_RELU", ",", "slope", "=", "0.01", ")", ":", "\n", "# Save context", "\n", "        ", "ctx", ".", "training", "=", "training", "\n", "ctx", ".", "momentum", "=", "momentum", "\n", "ctx", ".", "eps", "=", "eps", "\n", "ctx", ".", "activation", "=", "activation", "\n", "ctx", ".", "slope", "=", "slope", "\n", "ctx", ".", "affine", "=", "weight", "is", "not", "None", "and", "bias", "is", "not", "None", "\n", "\n", "# Prepare inputs", "\n", "count", "=", "_count_samples", "(", "x", ")", "\n", "x", "=", "x", ".", "contiguous", "(", ")", "\n", "weight", "=", "weight", ".", "contiguous", "(", ")", "if", "ctx", ".", "affine", "else", "x", ".", "new_empty", "(", "0", ")", "\n", "bias", "=", "bias", ".", "contiguous", "(", ")", "if", "ctx", ".", "affine", "else", "x", ".", "new_empty", "(", "0", ")", "\n", "\n", "if", "ctx", ".", "training", ":", "\n", "            ", "mean", ",", "var", "=", "_backend", ".", "mean_var", "(", "x", ")", "\n", "\n", "# Update running stats", "\n", "running_mean", ".", "mul_", "(", "(", "1", "-", "ctx", ".", "momentum", ")", ")", ".", "add_", "(", "ctx", ".", "momentum", "*", "mean", ")", "\n", "running_var", ".", "mul_", "(", "(", "1", "-", "ctx", ".", "momentum", ")", ")", ".", "add_", "(", "ctx", ".", "momentum", "*", "var", "*", "count", "/", "(", "count", "-", "1", ")", ")", "\n", "\n", "# Mark in-place modified tensors", "\n", "ctx", ".", "mark_dirty", "(", "x", ",", "running_mean", ",", "running_var", ")", "\n", "", "else", ":", "\n", "            ", "mean", ",", "var", "=", "running_mean", ".", "contiguous", "(", ")", ",", "running_var", ".", "contiguous", "(", ")", "\n", "ctx", ".", "mark_dirty", "(", "x", ")", "\n", "\n", "# BN forward + activation", "\n", "", "_backend", ".", "forward", "(", "x", ",", "mean", ",", "var", ",", "weight", ",", "bias", ",", "ctx", ".", "affine", ",", "ctx", ".", "eps", ")", "\n", "_act_forward", "(", "ctx", ",", "x", ")", "\n", "\n", "# Output", "\n", "ctx", ".", "var", "=", "var", "\n", "ctx", ".", "save_for_backward", "(", "x", ",", "var", ",", "weight", ",", "bias", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions.InPlaceABN.backward": [[115, 136], ["dz.contiguous.contiguous.contiguous", "functions._act_backward", "_backend.backward", "_backend.edz_eydz", "dz.contiguous.contiguous.new_zeros", "dz.contiguous.contiguous.new_zeros", "dz.contiguous.contiguous.size", "dz.contiguous.contiguous.size"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions._act_backward", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions.InPlaceABNSync.backward"], ["", "@", "staticmethod", "\n", "@", "once_differentiable", "\n", "def", "backward", "(", "ctx", ",", "dz", ")", ":", "\n", "        ", "z", ",", "var", ",", "weight", ",", "bias", "=", "ctx", ".", "saved_tensors", "\n", "dz", "=", "dz", ".", "contiguous", "(", ")", "\n", "\n", "# Undo activation", "\n", "_act_backward", "(", "ctx", ",", "z", ",", "dz", ")", "\n", "\n", "if", "ctx", ".", "training", ":", "\n", "            ", "edz", ",", "eydz", "=", "_backend", ".", "edz_eydz", "(", "z", ",", "dz", ",", "weight", ",", "bias", ",", "ctx", ".", "affine", ",", "ctx", ".", "eps", ")", "\n", "", "else", ":", "\n", "# TODO: implement simplified CUDA backward for inference mode", "\n", "            ", "edz", "=", "dz", ".", "new_zeros", "(", "dz", ".", "size", "(", "1", ")", ")", "\n", "eydz", "=", "dz", ".", "new_zeros", "(", "dz", ".", "size", "(", "1", ")", ")", "\n", "\n", "", "dx", ",", "dweight", ",", "dbias", "=", "_backend", ".", "backward", "(", "z", ",", "dz", ",", "var", ",", "weight", ",", "bias", ",", "edz", ",", "eydz", ",", "ctx", ".", "affine", ",", "ctx", ".", "eps", ")", "\n", "dweight", "=", "dweight", "if", "ctx", ".", "affine", "else", "None", "\n", "dbias", "=", "dbias", "if", "ctx", ".", "affine", "else", "None", "\n", "\n", "return", "dx", ",", "dweight", ",", "dbias", ",", "None", ",", "None", ",", "None", ",", "None", ",", "None", ",", "None", ",", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions.InPlaceABNSync.forward": [[139, 200], ["cls._parse_extra", "x.contiguous.contiguous.contiguous", "_backend.forward", "functions._act_forward", "ctx.save_for_backward", "functions._count_samples", "weight.contiguous", "x.contiguous.contiguous.new_empty", "bias.contiguous", "x.contiguous.contiguous.new_empty", "_backend.mean_var", "running_mean.mul_().add_", "running_var.mul_().add_", "ctx.mark_dirty", "ctx.mark_dirty", "range", "torch.gather", "torch.gather", "torch.gather", "torch.gather", "torch.gather.mean", "torch.broadcast_coalesced", "torch.broadcast_coalesced", "zip", "ctx.master_queue.put", "ctx.worker_queue.get", "ctx.worker_queue.task_done", "running_mean.contiguous", "running_var.contiguous", "ctx.master_queue.get", "ctx.master_queue.task_done", "torch.gather.append", "torch.gather.append", "queue.put", "running_mean.mul_", "running_var.mul_", "comm.gather.mean.unsqueeze", "var.unsqueeze", "mean_w.unsqueeze", "var_w.unsqueeze", "comm.gather.mean.get_device"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions.InPlaceABNSync._parse_extra", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.criterion.MAE.forward", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions._act_forward", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions._count_samples", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.DataParallelModel.gather", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.DataParallelModel.gather", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.DataParallelModel.gather", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.utils.parallel.DataParallelModel.gather"], ["    ", "@", "classmethod", "\n", "def", "forward", "(", "cls", ",", "ctx", ",", "x", ",", "weight", ",", "bias", ",", "running_mean", ",", "running_var", ",", "\n", "extra", ",", "training", "=", "True", ",", "momentum", "=", "0.1", ",", "eps", "=", "1e-05", ",", "activation", "=", "ACT_LEAKY_RELU", ",", "slope", "=", "0.01", ")", ":", "\n", "# Save context", "\n", "        ", "cls", ".", "_parse_extra", "(", "ctx", ",", "extra", ")", "\n", "ctx", ".", "training", "=", "training", "\n", "ctx", ".", "momentum", "=", "momentum", "\n", "ctx", ".", "eps", "=", "eps", "\n", "ctx", ".", "activation", "=", "activation", "\n", "ctx", ".", "slope", "=", "slope", "\n", "ctx", ".", "affine", "=", "weight", "is", "not", "None", "and", "bias", "is", "not", "None", "\n", "\n", "# Prepare inputs", "\n", "count", "=", "_count_samples", "(", "x", ")", "*", "(", "ctx", ".", "master_queue", ".", "maxsize", "+", "1", ")", "\n", "x", "=", "x", ".", "contiguous", "(", ")", "\n", "weight", "=", "weight", ".", "contiguous", "(", ")", "if", "ctx", ".", "affine", "else", "x", ".", "new_empty", "(", "0", ")", "\n", "bias", "=", "bias", ".", "contiguous", "(", ")", "if", "ctx", ".", "affine", "else", "x", ".", "new_empty", "(", "0", ")", "\n", "\n", "if", "ctx", ".", "training", ":", "\n", "            ", "mean", ",", "var", "=", "_backend", ".", "mean_var", "(", "x", ")", "\n", "\n", "if", "ctx", ".", "is_master", ":", "\n", "                ", "means", ",", "vars", "=", "[", "mean", ".", "unsqueeze", "(", "0", ")", "]", ",", "[", "var", ".", "unsqueeze", "(", "0", ")", "]", "\n", "for", "_", "in", "range", "(", "ctx", ".", "master_queue", ".", "maxsize", ")", ":", "\n", "                    ", "mean_w", ",", "var_w", "=", "ctx", ".", "master_queue", ".", "get", "(", ")", "\n", "ctx", ".", "master_queue", ".", "task_done", "(", ")", "\n", "means", ".", "append", "(", "mean_w", ".", "unsqueeze", "(", "0", ")", ")", "\n", "vars", ".", "append", "(", "var_w", ".", "unsqueeze", "(", "0", ")", ")", "\n", "\n", "", "means", "=", "comm", ".", "gather", "(", "means", ")", "\n", "vars", "=", "comm", ".", "gather", "(", "vars", ")", "\n", "\n", "mean", "=", "means", ".", "mean", "(", "0", ")", "\n", "var", "=", "(", "vars", "+", "(", "mean", "-", "means", ")", "**", "2", ")", ".", "mean", "(", "0", ")", "\n", "\n", "tensors", "=", "comm", ".", "broadcast_coalesced", "(", "(", "mean", ",", "var", ")", ",", "[", "mean", ".", "get_device", "(", ")", "]", "+", "ctx", ".", "worker_ids", ")", "\n", "for", "ts", ",", "queue", "in", "zip", "(", "tensors", "[", "1", ":", "]", ",", "ctx", ".", "worker_queues", ")", ":", "\n", "                    ", "queue", ".", "put", "(", "ts", ")", "\n", "", "", "else", ":", "\n", "                ", "ctx", ".", "master_queue", ".", "put", "(", "(", "mean", ",", "var", ")", ")", "\n", "mean", ",", "var", "=", "ctx", ".", "worker_queue", ".", "get", "(", ")", "\n", "ctx", ".", "worker_queue", ".", "task_done", "(", ")", "\n", "\n", "# Update running stats", "\n", "", "running_mean", ".", "mul_", "(", "(", "1", "-", "ctx", ".", "momentum", ")", ")", ".", "add_", "(", "ctx", ".", "momentum", "*", "mean", ")", "\n", "running_var", ".", "mul_", "(", "(", "1", "-", "ctx", ".", "momentum", ")", ")", ".", "add_", "(", "ctx", ".", "momentum", "*", "var", "*", "count", "/", "(", "count", "-", "1", ")", ")", "\n", "\n", "# Mark in-place modified tensors", "\n", "ctx", ".", "mark_dirty", "(", "x", ",", "running_mean", ",", "running_var", ")", "\n", "", "else", ":", "\n", "            ", "mean", ",", "var", "=", "running_mean", ".", "contiguous", "(", ")", ",", "running_var", ".", "contiguous", "(", ")", "\n", "ctx", ".", "mark_dirty", "(", "x", ")", "\n", "\n", "# BN forward + activation", "\n", "", "_backend", ".", "forward", "(", "x", ",", "mean", ",", "var", ",", "weight", ",", "bias", ",", "ctx", ".", "affine", ",", "ctx", ".", "eps", ")", "\n", "_act_forward", "(", "ctx", ",", "x", ")", "\n", "\n", "# Output", "\n", "ctx", ".", "var", "=", "var", "\n", "ctx", ".", "save_for_backward", "(", "x", ",", "var", ",", "weight", ",", "bias", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions.InPlaceABNSync.backward": [[201, 240], ["dz.contiguous.contiguous.contiguous", "functions._act_backward", "_backend.backward", "_backend.edz_eydz", "dz.contiguous.contiguous.new_zeros", "dz.contiguous.contiguous.new_zeros", "range", "torch.broadcast_coalesced", "torch.broadcast_coalesced", "zip", "ctx.master_queue.put", "ctx.worker_queue.get", "ctx.worker_queue.task_done", "dz.contiguous.contiguous.size", "dz.contiguous.contiguous.size", "len", "ctx.master_queue.get", "ctx.master_queue.task_done", "edzs.append", "eydzs.append", "torch.reduce_add", "torch.reduce_add", "torch.reduce_add", "torch.reduce_add", "queue.put", "dz.contiguous.new_zeros.get_device"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions._act_backward", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions.InPlaceABNSync.backward"], ["", "@", "staticmethod", "\n", "@", "once_differentiable", "\n", "def", "backward", "(", "ctx", ",", "dz", ")", ":", "\n", "        ", "z", ",", "var", ",", "weight", ",", "bias", "=", "ctx", ".", "saved_tensors", "\n", "dz", "=", "dz", ".", "contiguous", "(", ")", "\n", "\n", "# Undo activation", "\n", "_act_backward", "(", "ctx", ",", "z", ",", "dz", ")", "\n", "\n", "if", "ctx", ".", "training", ":", "\n", "            ", "edz", ",", "eydz", "=", "_backend", ".", "edz_eydz", "(", "z", ",", "dz", ",", "weight", ",", "bias", ",", "ctx", ".", "affine", ",", "ctx", ".", "eps", ")", "\n", "\n", "if", "ctx", ".", "is_master", ":", "\n", "                ", "edzs", ",", "eydzs", "=", "[", "edz", "]", ",", "[", "eydz", "]", "\n", "for", "_", "in", "range", "(", "len", "(", "ctx", ".", "worker_queues", ")", ")", ":", "\n", "                    ", "edz_w", ",", "eydz_w", "=", "ctx", ".", "master_queue", ".", "get", "(", ")", "\n", "ctx", ".", "master_queue", ".", "task_done", "(", ")", "\n", "edzs", ".", "append", "(", "edz_w", ")", "\n", "eydzs", ".", "append", "(", "eydz_w", ")", "\n", "\n", "", "edz", "=", "comm", ".", "reduce_add", "(", "edzs", ")", "/", "(", "ctx", ".", "master_queue", ".", "maxsize", "+", "1", ")", "\n", "eydz", "=", "comm", ".", "reduce_add", "(", "eydzs", ")", "/", "(", "ctx", ".", "master_queue", ".", "maxsize", "+", "1", ")", "\n", "\n", "tensors", "=", "comm", ".", "broadcast_coalesced", "(", "(", "edz", ",", "eydz", ")", ",", "[", "edz", ".", "get_device", "(", ")", "]", "+", "ctx", ".", "worker_ids", ")", "\n", "for", "ts", ",", "queue", "in", "zip", "(", "tensors", "[", "1", ":", "]", ",", "ctx", ".", "worker_queues", ")", ":", "\n", "                    ", "queue", ".", "put", "(", "ts", ")", "\n", "", "", "else", ":", "\n", "                ", "ctx", ".", "master_queue", ".", "put", "(", "(", "edz", ",", "eydz", ")", ")", "\n", "edz", ",", "eydz", "=", "ctx", ".", "worker_queue", ".", "get", "(", ")", "\n", "ctx", ".", "worker_queue", ".", "task_done", "(", ")", "\n", "", "", "else", ":", "\n", "            ", "edz", "=", "dz", ".", "new_zeros", "(", "dz", ".", "size", "(", "1", ")", ")", "\n", "eydz", "=", "dz", ".", "new_zeros", "(", "dz", ".", "size", "(", "1", ")", ")", "\n", "\n", "", "dx", ",", "dweight", ",", "dbias", "=", "_backend", ".", "backward", "(", "z", ",", "dz", ",", "var", ",", "weight", ",", "bias", ",", "edz", ",", "eydz", ",", "ctx", ".", "affine", ",", "ctx", ".", "eps", ")", "\n", "dweight", "=", "dweight", "if", "ctx", ".", "affine", "else", "None", "\n", "dbias", "=", "dbias", "if", "ctx", ".", "affine", "else", "None", "\n", "\n", "return", "dx", ",", "dweight", ",", "dbias", ",", "None", ",", "None", ",", "None", ",", "None", ",", "None", ",", "None", ",", "None", ",", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions.InPlaceABNSync._parse_extra": [[241, 251], ["None"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "_parse_extra", "(", "ctx", ",", "extra", ")", ":", "\n", "        ", "ctx", ".", "is_master", "=", "extra", "[", "\"is_master\"", "]", "\n", "if", "ctx", ".", "is_master", ":", "\n", "            ", "ctx", ".", "master_queue", "=", "extra", "[", "\"master_queue\"", "]", "\n", "ctx", ".", "worker_queues", "=", "extra", "[", "\"worker_queues\"", "]", "\n", "ctx", ".", "worker_ids", "=", "extra", "[", "\"worker_ids\"", "]", "\n", "", "else", ":", "\n", "            ", "ctx", ".", "master_queue", "=", "extra", "[", "\"master_queue\"", "]", "\n", "ctx", ".", "worker_queue", "=", "extra", "[", "\"worker_queue\"", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions._check": [[25, 29], ["fn", "RuntimeError"], "function", ["None"], ["def", "_check", "(", "fn", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "    ", "success", "=", "fn", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "if", "not", "success", ":", "\n", "        ", "raise", "RuntimeError", "(", "\"CUDA Error encountered in {}\"", ".", "format", "(", "fn", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions._broadcast_shape": [[31, 39], ["enumerate", "x.size", "out_size.append", "out_size.append"], "function", ["None"], ["", "", "def", "_broadcast_shape", "(", "x", ")", ":", "\n", "    ", "out_size", "=", "[", "]", "\n", "for", "i", ",", "s", "in", "enumerate", "(", "x", ".", "size", "(", ")", ")", ":", "\n", "        ", "if", "i", "!=", "1", ":", "\n", "            ", "out_size", ".", "append", "(", "1", ")", "\n", "", "else", ":", "\n", "            ", "out_size", ".", "append", "(", "s", ")", "\n", "", "", "return", "out_size", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions._reduce": [[41, 47], ["len", "x.sum", "x.contiguous().view().sum().sum", "x.size", "x.size", "x.contiguous().view().sum", "x.contiguous().view", "x.contiguous"], "function", ["None"], ["", "def", "_reduce", "(", "x", ")", ":", "\n", "    ", "if", "len", "(", "x", ".", "size", "(", ")", ")", "==", "2", ":", "\n", "        ", "return", "x", ".", "sum", "(", "dim", "=", "0", ")", "\n", "", "else", ":", "\n", "        ", "n", ",", "c", "=", "x", ".", "size", "(", ")", "[", "0", ":", "2", "]", "\n", "return", "x", ".", "contiguous", "(", ")", ".", "view", "(", "(", "n", ",", "c", ",", "-", "1", ")", ")", ".", "sum", "(", "2", ")", ".", "sum", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions._count_samples": [[49, 55], ["enumerate", "x.size"], "function", ["None"], ["", "", "def", "_count_samples", "(", "x", ")", ":", "\n", "    ", "count", "=", "1", "\n", "for", "i", ",", "s", "in", "enumerate", "(", "x", ".", "size", "(", ")", ")", ":", "\n", "        ", "if", "i", "!=", "1", ":", "\n", "            ", "count", "*=", "s", "\n", "", "", "return", "count", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions._act_forward": [[57, 64], ["_backend.leaky_relu_forward", "_backend.elu_forward"], "function", ["None"], ["", "def", "_act_forward", "(", "ctx", ",", "x", ")", ":", "\n", "    ", "if", "ctx", ".", "activation", "==", "ACT_LEAKY_RELU", ":", "\n", "        ", "_backend", ".", "leaky_relu_forward", "(", "x", ",", "ctx", ".", "slope", ")", "\n", "", "elif", "ctx", ".", "activation", "==", "ACT_ELU", ":", "\n", "        ", "_backend", ".", "elu_forward", "(", "x", ")", "\n", "", "elif", "ctx", ".", "activation", "==", "ACT_NONE", ":", "\n", "        ", "pass", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.functions._act_backward": [[66, 73], ["_backend.leaky_relu_backward", "_backend.elu_backward"], "function", ["None"], ["", "", "def", "_act_backward", "(", "ctx", ",", "x", ",", "dx", ")", ":", "\n", "    ", "if", "ctx", ".", "activation", "==", "ACT_LEAKY_RELU", ":", "\n", "        ", "_backend", ".", "leaky_relu_backward", "(", "x", ",", "dx", ",", "ctx", ".", "slope", ")", "\n", "", "elif", "ctx", ".", "activation", "==", "ACT_ELU", ":", "\n", "        ", "_backend", ".", "elu_backward", "(", "x", ",", "dx", ")", "\n", "", "elif", "ctx", ".", "activation", "==", "ACT_NONE", ":", "\n", "        ", "pass", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.bn.ABN.__init__": [[23, 57], ["torch.Module.__init__", "bn.ABN.register_buffer", "bn.ABN.register_buffer", "bn.ABN.reset_parameters", "torch.Parameter", "torch.Parameter", "torch.Parameter", "torch.Parameter", "torch.Parameter", "torch.Parameter", "bn.ABN.register_parameter", "bn.ABN.register_parameter", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.bn.ABN.reset_parameters"], ["def", "__init__", "(", "self", ",", "num_features", ",", "eps", "=", "1e-5", ",", "momentum", "=", "0.1", ",", "affine", "=", "True", ",", "activation", "=", "\"leaky_relu\"", ",", "slope", "=", "0.01", ")", ":", "\n", "        ", "\"\"\"Creates an Activated Batch Normalization module\n\n        Parameters\n        ----------\n        num_features : int\n            Number of feature channels in the input and output.\n        eps : float\n            Small constant to prevent numerical issues.\n        momentum : float\n            Momentum factor applied to compute running statistics as.\n        affine : bool\n            If `True` apply learned scale and shift transformation after normalization.\n        activation : str\n            Name of the activation functions, one of: `leaky_relu`, `elu` or `none`.\n        slope : float\n            Negative slope for the `leaky_relu` activation.\n        \"\"\"", "\n", "super", "(", "ABN", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "num_features", "=", "num_features", "\n", "self", ".", "affine", "=", "affine", "\n", "self", ".", "eps", "=", "eps", "\n", "self", ".", "momentum", "=", "momentum", "\n", "self", ".", "activation", "=", "activation", "\n", "self", ".", "slope", "=", "slope", "\n", "if", "self", ".", "affine", ":", "\n", "            ", "self", ".", "weight", "=", "nn", ".", "Parameter", "(", "torch", ".", "ones", "(", "num_features", ")", ")", "\n", "self", ".", "bias", "=", "nn", ".", "Parameter", "(", "torch", ".", "zeros", "(", "num_features", ")", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "register_parameter", "(", "'weight'", ",", "None", ")", "\n", "self", ".", "register_parameter", "(", "'bias'", ",", "None", ")", "\n", "", "self", ".", "register_buffer", "(", "'running_mean'", ",", "torch", ".", "zeros", "(", "num_features", ")", ")", "\n", "self", ".", "register_buffer", "(", "'running_var'", ",", "torch", ".", "ones", "(", "num_features", ")", ")", "\n", "self", ".", "reset_parameters", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.bn.ABN.reset_parameters": [[58, 64], ["torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_"], "methods", ["None"], ["", "def", "reset_parameters", "(", "self", ")", ":", "\n", "        ", "nn", ".", "init", ".", "constant_", "(", "self", ".", "running_mean", ",", "0", ")", "\n", "nn", ".", "init", ".", "constant_", "(", "self", ".", "running_var", ",", "1", ")", "\n", "if", "self", ".", "affine", ":", "\n", "            ", "nn", ".", "init", ".", "constant_", "(", "self", ".", "weight", ",", "1", ")", "\n", "nn", ".", "init", ".", "constant_", "(", "self", ".", "bias", ",", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.bn.ABN.forward": [[65, 77], ["torch.batch_norm", "torch.batch_norm", "torch.batch_norm", "torch.relu", "torch.relu", "torch.relu", "torch.leaky_relu", "torch.leaky_relu", "torch.leaky_relu", "torch.elu", "torch.elu", "torch.elu"], "methods", ["None"], ["", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "functional", ".", "batch_norm", "(", "x", ",", "self", ".", "running_mean", ",", "self", ".", "running_var", ",", "self", ".", "weight", ",", "self", ".", "bias", ",", "\n", "self", ".", "training", ",", "self", ".", "momentum", ",", "self", ".", "eps", ")", "\n", "\n", "if", "self", ".", "activation", "==", "ACT_RELU", ":", "\n", "            ", "return", "functional", ".", "relu", "(", "x", ",", "inplace", "=", "True", ")", "\n", "", "elif", "self", ".", "activation", "==", "ACT_LEAKY_RELU", ":", "\n", "            ", "return", "functional", ".", "leaky_relu", "(", "x", ",", "negative_slope", "=", "self", ".", "slope", ",", "inplace", "=", "True", ")", "\n", "", "elif", "self", ".", "activation", "==", "ACT_ELU", ":", "\n", "            ", "return", "functional", ".", "elu", "(", "x", ",", "inplace", "=", "True", ")", "\n", "", "else", ":", "\n", "            ", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.bn.ABN.__repr__": [[78, 86], ["rep.format"], "methods", ["None"], ["", "", "def", "__repr__", "(", "self", ")", ":", "\n", "        ", "rep", "=", "'{name}({num_features}, eps={eps}, momentum={momentum},'", "' affine={affine}, activation={activation}'", "\n", "if", "self", ".", "activation", "==", "\"leaky_relu\"", ":", "\n", "            ", "rep", "+=", "', slope={slope})'", "\n", "", "else", ":", "\n", "            ", "rep", "+=", "')'", "\n", "", "return", "rep", ".", "format", "(", "name", "=", "self", ".", "__class__", ".", "__name__", ",", "**", "self", ".", "__dict__", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.bn.InPlaceABN.__init__": [[91, 110], ["bn.ABN.__init__"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__"], ["def", "__init__", "(", "self", ",", "num_features", ",", "eps", "=", "1e-5", ",", "momentum", "=", "0.1", ",", "affine", "=", "True", ",", "activation", "=", "\"leaky_relu\"", ",", "slope", "=", "0.01", ")", ":", "\n", "        ", "\"\"\"Creates an InPlace Activated Batch Normalization module\n\n        Parameters\n        ----------\n        num_features : int\n            Number of feature channels in the input and output.\n        eps : float\n            Small constant to prevent numerical issues.\n        momentum : float\n            Momentum factor applied to compute running statistics as.\n        affine : bool\n            If `True` apply learned scale and shift transformation after normalization.\n        activation : str\n            Name of the activation functions, one of: `leaky_relu`, `elu` or `none`.\n        slope : float\n            Negative slope for the `leaky_relu` activation.\n        \"\"\"", "\n", "super", "(", "InPlaceABN", ",", "self", ")", ".", "__init__", "(", "num_features", ",", "eps", ",", "momentum", ",", "affine", ",", "activation", ",", "slope", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.bn.InPlaceABN.forward": [[111, 114], ["inplace_abn"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "inplace_abn", "(", "x", ",", "self", ".", "weight", ",", "self", ".", "bias", ",", "self", ".", "running_mean", ",", "self", ".", "running_var", ",", "\n", "self", ".", "training", ",", "self", ".", "momentum", ",", "self", ".", "eps", ",", "self", ".", "activation", ",", "self", ".", "slope", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.bn.InPlaceABNSync.__init__": [[122, 150], ["bn.ABN.__init__", "Queue", "list", "len", "Queue", "range", "torch.cuda.device_count", "torch.cuda.device_count", "torch.cuda.device_count", "torch.cuda.device_count", "torch.cuda.device_count", "torch.cuda.device_count", "torch.cuda.device_count", "torch.cuda.device_count", "torch.cuda.device_count"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__"], ["def", "__init__", "(", "self", ",", "num_features", ",", "devices", "=", "None", ",", "eps", "=", "1e-5", ",", "momentum", "=", "0.1", ",", "affine", "=", "True", ",", "activation", "=", "\"leaky_relu\"", ",", "\n", "slope", "=", "0.01", ")", ":", "\n", "        ", "\"\"\"Creates a synchronized, InPlace Activated Batch Normalization module\n\n        Parameters\n        ----------\n        num_features : int\n            Number of feature channels in the input and output.\n        devices : list of int or None\n            IDs of the GPUs that will run the replicas of this module.\n        eps : float\n            Small constant to prevent numerical issues.\n        momentum : float\n            Momentum factor applied to compute running statistics as.\n        affine : bool\n            If `True` apply learned scale and shift transformation after normalization.\n        activation : str\n            Name of the activation functions, one of: `leaky_relu`, `elu` or `none`.\n        slope : float\n            Negative slope for the `leaky_relu` activation.\n        \"\"\"", "\n", "super", "(", "InPlaceABNSync", ",", "self", ")", ".", "__init__", "(", "num_features", ",", "eps", ",", "momentum", ",", "affine", ",", "activation", ",", "slope", ")", "\n", "self", ".", "devices", "=", "devices", "if", "devices", "else", "list", "(", "range", "(", "torch", ".", "cuda", ".", "device_count", "(", ")", ")", ")", "\n", "\n", "# Initialize queues", "\n", "self", ".", "worker_ids", "=", "self", ".", "devices", "[", "1", ":", "]", "\n", "self", ".", "master_queue", "=", "Queue", "(", "len", "(", "self", ".", "worker_ids", ")", ")", "\n", "self", ".", "worker_queues", "=", "[", "Queue", "(", "1", ")", "for", "_", "in", "self", ".", "worker_ids", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.bn.InPlaceABNSync.forward": [[151, 170], ["inplace_abn_sync", "x.get_device", "bn.InPlaceABNSync.worker_ids.index", "x.get_device"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "if", "x", ".", "get_device", "(", ")", "==", "self", ".", "devices", "[", "0", "]", ":", "\n", "# Master mode", "\n", "            ", "extra", "=", "{", "\n", "\"is_master\"", ":", "True", ",", "\n", "\"master_queue\"", ":", "self", ".", "master_queue", ",", "\n", "\"worker_queues\"", ":", "self", ".", "worker_queues", ",", "\n", "\"worker_ids\"", ":", "self", ".", "worker_ids", "\n", "}", "\n", "", "else", ":", "\n", "# Worker mode", "\n", "            ", "extra", "=", "{", "\n", "\"is_master\"", ":", "False", ",", "\n", "\"master_queue\"", ":", "self", ".", "master_queue", ",", "\n", "\"worker_queue\"", ":", "self", ".", "worker_queues", "[", "self", ".", "worker_ids", ".", "index", "(", "x", ".", "get_device", "(", ")", ")", "]", "\n", "}", "\n", "\n", "", "return", "inplace_abn_sync", "(", "x", ",", "self", ".", "weight", ",", "self", ".", "bias", ",", "self", ".", "running_mean", ",", "self", ".", "running_var", ",", "\n", "extra", ",", "self", ".", "training", ",", "self", ".", "momentum", ",", "self", ".", "eps", ",", "self", ".", "activation", ",", "self", ".", "slope", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.inplace_abn.bn.InPlaceABNSync.__repr__": [[171, 179], ["rep.format"], "methods", ["None"], ["", "def", "__repr__", "(", "self", ")", ":", "\n", "        ", "rep", "=", "'{name}({num_features}, eps={eps}, momentum={momentum},'", "' affine={affine}, devices={devices}, activation={activation}'", "\n", "if", "self", ".", "activation", "==", "\"leaky_relu\"", ":", "\n", "            ", "rep", "+=", "', slope={slope})'", "\n", "", "else", ":", "\n", "            ", "rep", "+=", "')'", "\n", "", "return", "rep", ".", "format", "(", "name", "=", "self", ".", "__class__", ".", "__name__", ",", "**", "self", ".", "__dict__", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.aspp.ASPP.__init__": [[17, 37], ["torch.Module.__init__", "torch.AdaptiveAvgPool2d", "torch.AdaptiveAvgPool2d", "torch.AdaptiveAvgPool2d", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "bn.InPlaceABNSync", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "bn.InPlaceABNSync", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "bn.InPlaceABNSync", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "bn.InPlaceABNSync", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "bn.InPlaceABNSync", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "bn.InPlaceABNSync", "torch.Dropout2d", "torch.Dropout2d", "torch.Dropout2d"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", "ASPP", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "avg_pool", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "1", ")", "\n", "\n", "self", ".", "conv_img", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "4", "*", "512", ",", "512", ",", "kernel_size", "=", "1", ",", "padding", "=", "0", ",", "dilation", "=", "1", ",", "bias", "=", "False", ")", ",", "\n", "InPlaceABNSync", "(", "512", ")", ")", "\n", "\n", "self", ".", "conv1", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "4", "*", "512", ",", "512", ",", "kernel_size", "=", "1", ",", "padding", "=", "0", ",", "dilation", "=", "1", ",", "bias", "=", "False", ")", ",", "\n", "InPlaceABNSync", "(", "512", ")", ")", "\n", "self", ".", "conv2", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "4", "*", "512", ",", "512", ",", "kernel_size", "=", "3", ",", "padding", "=", "12", ",", "dilation", "=", "12", ",", "bias", "=", "False", ")", ",", "\n", "InPlaceABNSync", "(", "512", ")", ")", "\n", "self", ".", "conv3", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "4", "*", "512", ",", "512", ",", "kernel_size", "=", "3", ",", "padding", "=", "24", ",", "dilation", "=", "24", ",", "bias", "=", "False", ")", ",", "\n", "InPlaceABNSync", "(", "512", ")", ")", "\n", "self", ".", "conv4", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "4", "*", "512", ",", "512", ",", "kernel_size", "=", "3", ",", "padding", "=", "36", ",", "dilation", "=", "36", ",", "bias", "=", "False", ")", ",", "\n", "InPlaceABNSync", "(", "512", ")", ")", "\n", "\n", "self", ".", "conv_bn_dropout", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "5", "*", "512", ",", "512", ",", "kernel_size", "=", "1", ",", "padding", "=", "0", ",", "dilation", "=", "1", ",", "bias", "=", "False", ")", ",", "\n", "InPlaceABNSync", "(", "512", ")", ",", "\n", "nn", ".", "Dropout2d", "(", "0.1", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.aspp.ASPP.forward": [[38, 57], ["aspp.ASPP.avg_pool", "aspp.ASPP.conv_img", "torch.upsample", "torch.upsample", "torch.upsample", "aspp.ASPP.conv1", "aspp.ASPP.conv2", "aspp.ASPP.conv3", "aspp.ASPP.conv4", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "aspp.ASPP.conv_bn_dropout", "feature_map.size", "feature_map.size"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "feature_map", ")", ":", "\n", "# (feature_map has shape (batch_size, 4*512, h/8, w/8))", "\n", "\n", "        ", "feature_map_h", "=", "feature_map", ".", "size", "(", ")", "[", "2", "]", "# (== h/8)", "\n", "feature_map_w", "=", "feature_map", ".", "size", "(", ")", "[", "3", "]", "# (== w/8)", "\n", "\n", "out_img", "=", "self", ".", "avg_pool", "(", "feature_map", ")", "# (shape: (batch_size, 4*512, 1, 1))", "\n", "out_img", "=", "self", ".", "conv_img", "(", "out_img", ")", "# (shape: (batch_size, 512, 1, 1))", "\n", "out_img", "=", "F", ".", "upsample", "(", "out_img", ",", "size", "=", "(", "feature_map_h", ",", "feature_map_w", ")", ",", "mode", "=", "\"bilinear\"", ",", "align_corners", "=", "True", ")", "# (shape: (batch_size, 512, h/8, w/8))", "\n", "\n", "out_1x1", "=", "self", ".", "conv1", "(", "feature_map", ")", "# (shape: (batch_size, 512, h/8, w/8))", "\n", "out_3x3_1", "=", "self", ".", "conv2", "(", "feature_map", ")", "# (shape: (batch_size, 512, h/8, w/8))", "\n", "out_3x3_2", "=", "self", ".", "conv3", "(", "feature_map", ")", "# (shape: (batch_size, 512, h/8, w/8))", "\n", "out_3x3_3", "=", "self", ".", "conv4", "(", "feature_map", ")", "# (shape: (batch_size, 512, h/8, w/8))", "\n", "\n", "out", "=", "torch", ".", "cat", "(", "[", "out_img", ",", "out_1x1", ",", "out_3x3_1", ",", "out_3x3_2", ",", "out_3x3_3", "]", ",", "1", ")", "# (shape: (batch_size, 5*512, h/8, w/8))", "\n", "out", "=", "self", ".", "conv_bn_dropout", "(", "out", ")", "# (shape: (batch_size, 512, h/8, w/8))", "\n", "\n", "return", "out", "\n", "", "", ""]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.resnet_block.Bottleneck.__init__": [[21, 34], ["torch.Module.__init__", "torch.Conv2d", "torch.Conv2d", "BatchNorm2d", "torch.Conv2d", "torch.Conv2d", "BatchNorm2d", "torch.Conv2d", "torch.Conv2d", "BatchNorm2d", "torch.ReLU", "torch.ReLU", "torch.ReLU", "torch.ReLU"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__"], ["def", "__init__", "(", "self", ",", "inplanes", ",", "planes", ",", "stride", "=", "1", ",", "dilation", "=", "1", ",", "downsample", "=", "None", ",", "fist_dilation", "=", "1", ",", "multi_grid", "=", "1", ")", ":", "\n", "        ", "super", "(", "Bottleneck", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "inplanes", ",", "planes", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "planes", ")", "\n", "self", ".", "conv2", "=", "nn", ".", "Conv2d", "(", "planes", ",", "planes", ",", "kernel_size", "=", "3", ",", "stride", "=", "stride", ",", "padding", "=", "dilation", "*", "multi_grid", ",", "dilation", "=", "dilation", "*", "multi_grid", ",", "bias", "=", "False", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "planes", ")", "\n", "self", ".", "conv3", "=", "nn", ".", "Conv2d", "(", "planes", ",", "planes", "*", "4", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "planes", "*", "4", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "relu_inplace", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "self", ".", "downsample", "=", "downsample", "\n", "self", ".", "dilation", "=", "dilation", "\n", "self", ".", "stride", "=", "stride", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.resnet_block.Bottleneck.forward": [[35, 56], ["resnet_block.Bottleneck.conv1", "resnet_block.Bottleneck.bn1", "resnet_block.Bottleneck.relu", "resnet_block.Bottleneck.conv2", "resnet_block.Bottleneck.bn2", "resnet_block.Bottleneck.relu", "resnet_block.Bottleneck.conv3", "resnet_block.Bottleneck.bn3", "resnet_block.Bottleneck.relu_inplace", "resnet_block.Bottleneck.downsample"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "residual", "=", "x", "\n", "\n", "out", "=", "self", ".", "conv1", "(", "x", ")", "\n", "out", "=", "self", ".", "bn1", "(", "out", ")", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "out", "=", "self", ".", "conv2", "(", "out", ")", "\n", "out", "=", "self", ".", "bn2", "(", "out", ")", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "out", "=", "self", ".", "conv3", "(", "out", ")", "\n", "out", "=", "self", ".", "bn3", "(", "out", ")", "\n", "\n", "if", "self", ".", "downsample", "is", "not", "None", ":", "\n", "            ", "residual", "=", "self", ".", "downsample", "(", "x", ")", "\n", "\n", "", "out", "=", "out", "+", "residual", "\n", "out", "=", "self", ".", "relu_inplace", "(", "out", ")", "\n", "\n", "return", "out", "\n", "", "", ""]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.resnet_block.conv3x3": [[16, 18], ["torch.Conv2d"], "function", ["None"], ["def", "conv3x3", "(", "in_planes", ",", "out_planes", ",", "stride", "=", "1", ")", ":", "\n", "    ", "return", "nn", ".", "Conv2d", "(", "in_planes", ",", "out_planes", ",", "kernel_size", "=", "3", ",", "stride", "=", "stride", ",", "padding", "=", "1", ",", "bias", "=", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.model.ResNet.__init__": [[23, 47], ["print", "torch.Module.__init__", "resnet_block.conv3x3", "BatchNorm2d", "torch.ReLU", "torch.ReLU", "resnet_block.conv3x3", "BatchNorm2d", "torch.ReLU", "torch.ReLU", "resnet_block.conv3x3", "BatchNorm2d", "torch.ReLU", "torch.ReLU", "torch.MaxPool2d", "torch.MaxPool2d", "model.ResNet._make_layer", "model.ResNet._make_layer", "model.ResNet._make_layer", "model.ResNet._make_layer", "aspp.ASPP", "torch.Conv2d", "torch.Conv2d"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.resnet_block.conv3x3", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.resnet_block.conv3x3", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.resnet_block.conv3x3", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.model_mcdropout.ResNet._make_layer", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.model_mcdropout.ResNet._make_layer", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.model_mcdropout.ResNet._make_layer", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.model_mcdropout.ResNet._make_layer"], ["    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.model.ResNet._make_layer": [[48, 64], ["layers.append", "range", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "block", "layers.append", "torch.Conv2d", "torch.Conv2d", "BatchNorm2d", "isinstance", "block", "generate_multi_grid", "generate_multi_grid", "len"], "methods", ["None"], ["", "def", "_make_layer", "(", "self", ",", "block", ",", "planes", ",", "blocks", ",", "stride", "=", "1", ",", "dilation", "=", "1", ",", "multi_grid", "=", "1", ")", ":", "\n", "        ", "downsample", "=", "None", "\n", "\n", "if", "stride", "!=", "1", "or", "self", ".", "inplanes", "!=", "planes", "*", "block", ".", "expansion", ":", "\n", "            ", "downsample", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "self", ".", "inplanes", ",", "planes", "*", "block", ".", "expansion", ",", "kernel_size", "=", "1", ",", "stride", "=", "stride", ",", "bias", "=", "False", ")", ",", "\n", "BatchNorm2d", "(", "planes", "*", "block", ".", "expansion", ",", "affine", "=", "True", ")", ")", "\n", "\n", "", "layers", "=", "[", "]", "\n", "generate_multi_grid", "=", "lambda", "index", ",", "grids", ":", "grids", "[", "index", "%", "len", "(", "grids", ")", "]", "if", "isinstance", "(", "grids", ",", "tuple", ")", "else", "1", "\n", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "stride", ",", "dilation", "=", "dilation", ",", "downsample", "=", "downsample", ",", "multi_grid", "=", "generate_multi_grid", "(", "0", ",", "multi_grid", ")", ")", ")", "\n", "self", ".", "inplanes", "=", "planes", "*", "block", ".", "expansion", "\n", "\n", "for", "i", "in", "range", "(", "1", ",", "blocks", ")", ":", "\n", "            ", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "dilation", "=", "dilation", ",", "multi_grid", "=", "generate_multi_grid", "(", "i", ",", "multi_grid", ")", ")", ")", "\n", "\n", "", "return", "nn", ".", "Sequential", "(", "*", "layers", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.model.ResNet.forward": [[65, 80], ["model.ResNet.relu1", "model.ResNet.relu2", "model.ResNet.relu3", "model.ResNet.maxpool", "model.ResNet.layer1", "model.ResNet.layer2", "model.ResNet.layer3", "model.ResNet.layer4", "model.ResNet.aspp", "model.ResNet.cls", "model.ResNet.bn1", "model.ResNet.bn2", "model.ResNet.bn3", "model.ResNet.conv1", "model.ResNet.conv2", "model.ResNet.conv3"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "# (x has shape: (batch_size, 3, h, w))", "\n", "\n", "        ", "x", "=", "self", ".", "relu1", "(", "self", ".", "bn1", "(", "self", ".", "conv1", "(", "x", ")", ")", ")", "# (shape: (batch_size, 64, h/2, w/2))", "\n", "x", "=", "self", ".", "relu2", "(", "self", ".", "bn2", "(", "self", ".", "conv2", "(", "x", ")", ")", ")", "# (shape: (batch_size, 64, h/2, w/2))", "\n", "x", "=", "self", ".", "relu3", "(", "self", ".", "bn3", "(", "self", ".", "conv3", "(", "x", ")", ")", ")", "# (shape: (batch_size, 128, h/2, w/2))", "\n", "x", "=", "self", ".", "maxpool", "(", "x", ")", "# (shape: (batch_size, 128, h/4, w/4))", "\n", "x", "=", "self", ".", "layer1", "(", "x", ")", "# (shape: (batch_size, 256, h/4, w/4))", "\n", "x", "=", "self", ".", "layer2", "(", "x", ")", "# (shape: (batch_size, 512, h/8, w/8))", "\n", "x", "=", "self", ".", "layer3", "(", "x", ")", "# (shape: (batch_size, 1024, h/8, w/8))", "\n", "x", "=", "self", ".", "layer4", "(", "x", ")", "# (shape: (batch_size, 2048, h/8, w/8))", "\n", "x", "=", "self", ".", "aspp", "(", "x", ")", "# (shape: (batch_size, 512, h/8, h/8))", "\n", "x", "=", "self", ".", "cls", "(", "x", ")", "# (shape: (batch_size, num_classes, h/8, w/8))", "\n", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.model.get_model": [[81, 84], ["model.ResNet"], "function", ["None"], ["", "", "def", "get_model", "(", "num_classes", "=", "19", ")", ":", "\n", "    ", "model", "=", "ResNet", "(", "Bottleneck", ",", "[", "3", ",", "4", ",", "23", ",", "3", "]", ",", "num_classes", ")", "\n", "return", "model", "\n", "", ""]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.model_mcdropout.ResNet.__init__": [[23, 47], ["print", "torch.Module.__init__", "resnet_block.conv3x3", "BatchNorm2d", "torch.ReLU", "torch.ReLU", "resnet_block.conv3x3", "BatchNorm2d", "torch.ReLU", "torch.ReLU", "resnet_block.conv3x3", "BatchNorm2d", "torch.ReLU", "torch.ReLU", "torch.MaxPool2d", "torch.MaxPool2d", "model_mcdropout.ResNet._make_layer", "model_mcdropout.ResNet._make_layer", "model_mcdropout.ResNet._make_layer", "model_mcdropout.ResNet._make_layer", "aspp.ASPP", "torch.Conv2d", "torch.Conv2d"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.resnet_block.conv3x3", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.resnet_block.conv3x3", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.resnet_block.conv3x3", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.model_mcdropout.ResNet._make_layer", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.model_mcdropout.ResNet._make_layer", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.model_mcdropout.ResNet._make_layer", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.model_mcdropout.ResNet._make_layer"], ["    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model_mcdropout.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.model_mcdropout.ResNet._make_layer": [[48, 64], ["layers.append", "range", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "block", "layers.append", "torch.Conv2d", "torch.Conv2d", "BatchNorm2d", "isinstance", "block", "generate_multi_grid", "generate_multi_grid", "len"], "methods", ["None"], ["", "def", "_make_layer", "(", "self", ",", "block", ",", "planes", ",", "blocks", ",", "stride", "=", "1", ",", "dilation", "=", "1", ",", "multi_grid", "=", "1", ")", ":", "\n", "        ", "downsample", "=", "None", "\n", "\n", "if", "stride", "!=", "1", "or", "self", ".", "inplanes", "!=", "planes", "*", "block", ".", "expansion", ":", "\n", "            ", "downsample", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "self", ".", "inplanes", ",", "planes", "*", "block", ".", "expansion", ",", "kernel_size", "=", "1", ",", "stride", "=", "stride", ",", "bias", "=", "False", ")", ",", "\n", "BatchNorm2d", "(", "planes", "*", "block", ".", "expansion", ",", "affine", "=", "True", ")", ")", "\n", "\n", "", "layers", "=", "[", "]", "\n", "generate_multi_grid", "=", "lambda", "index", ",", "grids", ":", "grids", "[", "index", "%", "len", "(", "grids", ")", "]", "if", "isinstance", "(", "grids", ",", "tuple", ")", "else", "1", "\n", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "stride", ",", "dilation", "=", "dilation", ",", "downsample", "=", "downsample", ",", "multi_grid", "=", "generate_multi_grid", "(", "0", ",", "multi_grid", ")", ")", ")", "\n", "self", ".", "inplanes", "=", "planes", "*", "block", ".", "expansion", "\n", "\n", "for", "i", "in", "range", "(", "1", ",", "blocks", ")", ":", "\n", "            ", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "dilation", "=", "dilation", ",", "multi_grid", "=", "generate_multi_grid", "(", "i", ",", "multi_grid", ")", ")", ")", "\n", "\n", "", "return", "nn", ".", "Sequential", "(", "*", "layers", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.model_mcdropout.ResNet.forward": [[65, 84], ["model_mcdropout.ResNet.relu1", "model_mcdropout.ResNet.relu2", "model_mcdropout.ResNet.relu3", "model_mcdropout.ResNet.maxpool", "model_mcdropout.ResNet.layer1", "torch.nn.functional.dropout", "torch.nn.functional.dropout", "model_mcdropout.ResNet.layer2", "torch.nn.functional.dropout", "torch.nn.functional.dropout", "model_mcdropout.ResNet.layer3", "torch.nn.functional.dropout", "torch.nn.functional.dropout", "model_mcdropout.ResNet.layer4", "torch.nn.functional.dropout", "torch.nn.functional.dropout", "model_mcdropout.ResNet.aspp", "model_mcdropout.ResNet.cls", "model_mcdropout.ResNet.bn1", "model_mcdropout.ResNet.bn2", "model_mcdropout.ResNet.bn3", "model_mcdropout.ResNet.conv1", "model_mcdropout.ResNet.conv2", "model_mcdropout.ResNet.conv3"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "# (x has shape: (batch_size, 3, h, w))", "\n", "\n", "        ", "x", "=", "self", ".", "relu1", "(", "self", ".", "bn1", "(", "self", ".", "conv1", "(", "x", ")", ")", ")", "# (shape: (batch_size, 64, h/2, w/2))", "\n", "x", "=", "self", ".", "relu2", "(", "self", ".", "bn2", "(", "self", ".", "conv2", "(", "x", ")", ")", ")", "# (shape: (batch_size, 64, h/2, w/2))", "\n", "x", "=", "self", ".", "relu3", "(", "self", ".", "bn3", "(", "self", ".", "conv3", "(", "x", ")", ")", ")", "# (shape: (batch_size, 128, h/2, w/2))", "\n", "x", "=", "self", ".", "maxpool", "(", "x", ")", "# (shape: (batch_size, 128, h/4, w/4))", "\n", "x", "=", "self", ".", "layer1", "(", "x", ")", "# (shape: (batch_size, 256, h/4, w/4))", "\n", "x", "=", "F", ".", "dropout", "(", "x", ",", "p", "=", "0.5", ",", "training", "=", "True", ")", "# (shape: (batch_size, 256, h/4, w/4))", "\n", "x", "=", "self", ".", "layer2", "(", "x", ")", "# (shape: (batch_size, 512, h/8, w/8))", "\n", "x", "=", "F", ".", "dropout", "(", "x", ",", "p", "=", "0.5", ",", "training", "=", "True", ")", "# (shape: (batch_size, 512, h/8, w/8))", "\n", "x", "=", "self", ".", "layer3", "(", "x", ")", "# (shape: (batch_size, 1024, h/8, w/8))", "\n", "x", "=", "F", ".", "dropout", "(", "x", ",", "p", "=", "0.5", ",", "training", "=", "True", ")", "# (shape: (batch_size, 1024, h/8, w/8))", "\n", "x", "=", "self", ".", "layer4", "(", "x", ")", "# (shape: (batch_size, 2048, h/8, w/8))", "\n", "x", "=", "F", ".", "dropout", "(", "x", ",", "p", "=", "0.5", ",", "training", "=", "True", ")", "# (shape: (batch_size, 2048, h/8, w/8))", "\n", "x", "=", "self", ".", "aspp", "(", "x", ")", "# (shape: (batch_size, 512, h/8, h/8))", "\n", "x", "=", "self", ".", "cls", "(", "x", ")", "# (shape: (batch_size, num_classes, h/8, w/8))", "\n", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.models.model_mcdropout.get_model": [[85, 88], ["model_mcdropout.ResNet"], "function", ["None"], ["", "", "def", "get_model", "(", "num_classes", "=", "19", ")", ":", "\n", "    ", "model", "=", "ResNet", "(", "Bottleneck", ",", "[", "3", ",", "4", ",", "23", ",", "3", "]", ",", "num_classes", ")", "\n", "return", "model", "\n", "", ""]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-256.train.SGD.__init__": [[12, 26], ["dict", "torch.optim.optimizer.Optimizer.__init__", "ValueError", "ValueError", "ValueError", "ValueError"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__"], ["def", "__init__", "(", "self", ",", "params", ",", "lr", "=", "required", ",", "momentum", "=", "0", ",", "dampening", "=", "0", ",", "\n", "weight_decay", "=", "0", ",", "nesterov", "=", "False", ")", ":", "\n", "        ", "if", "lr", "is", "not", "required", "and", "lr", "<", "0.0", ":", "\n", "            ", "raise", "ValueError", "(", "\"Invalid learning rate: {}\"", ".", "format", "(", "lr", ")", ")", "\n", "", "if", "momentum", "<", "0.0", ":", "\n", "            ", "raise", "ValueError", "(", "\"Invalid momentum value: {}\"", ".", "format", "(", "momentum", ")", ")", "\n", "", "if", "weight_decay", "<", "0.0", ":", "\n", "            ", "raise", "ValueError", "(", "\"Invalid weight_decay value: {}\"", ".", "format", "(", "weight_decay", ")", ")", "\n", "\n", "", "defaults", "=", "dict", "(", "lr", "=", "lr", ",", "momentum", "=", "momentum", ",", "dampening", "=", "dampening", ",", "\n", "weight_decay", "=", "weight_decay", ",", "nesterov", "=", "nesterov", ")", "\n", "if", "nesterov", "and", "(", "momentum", "<=", "0", "or", "dampening", "!=", "0", ")", ":", "\n", "            ", "raise", "ValueError", "(", "\"Nesterov momentum requires a momentum and zero dampening\"", ")", "\n", "", "super", "(", "SGD", ",", "self", ")", ".", "__init__", "(", "params", ",", "defaults", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-256.train.SGD.__setstate__": [[27, 31], ["super().__setstate__", "group.setdefault"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-64.train.SGD.__setstate__"], ["", "def", "__setstate__", "(", "self", ",", "state", ")", ":", "\n", "        ", "super", "(", "SGD", ",", "self", ")", ".", "__setstate__", "(", "state", ")", "\n", "for", "group", "in", "self", ".", "param_groups", ":", "\n", "            ", "group", ".", "setdefault", "(", "'nesterov'", ",", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-256.train.SGD.step": [[32, 71], ["closure", "d_p.add.add.mul_", "p.data.add_", "d_p.add.add.add_", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "d_p.add.add.add", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_"], "methods", ["None"], ["", "", "def", "step", "(", "self", ",", "closure", "=", "None", ")", ":", "\n", "        ", "\"\"\"Performs a single optimization step.\n        Arguments:\n            closure (callable, optional): A closure that reevaluates the model\n                and returns the loss.\n        \"\"\"", "\n", "loss", "=", "None", "\n", "if", "closure", "is", "not", "None", ":", "\n", "            ", "loss", "=", "closure", "(", ")", "\n", "\n", "", "for", "group", "in", "self", ".", "param_groups", ":", "\n", "            ", "weight_decay", "=", "group", "[", "'weight_decay'", "]", "\n", "momentum", "=", "group", "[", "'momentum'", "]", "\n", "dampening", "=", "group", "[", "'dampening'", "]", "\n", "nesterov", "=", "group", "[", "'nesterov'", "]", "\n", "\n", "for", "p", "in", "group", "[", "'params'", "]", ":", "\n", "                ", "if", "p", ".", "grad", "is", "None", ":", "\n", "                    ", "continue", "\n", "", "d_p", "=", "p", ".", "grad", ".", "data", "\n", "if", "weight_decay", "!=", "0", ":", "\n", "                    ", "d_p", ".", "add_", "(", "weight_decay", ",", "p", ".", "data", ")", "\n", "", "d_p", ".", "mul_", "(", "(", "-", "1.0", ")", "*", "group", "[", "'lr'", "]", ")", "###################################", "\n", "if", "momentum", "!=", "0", ":", "\n", "                    ", "param_state", "=", "self", ".", "state", "[", "p", "]", "\n", "if", "'momentum_buffer'", "not", "in", "param_state", ":", "\n", "                        ", "buf", "=", "param_state", "[", "'momentum_buffer'", "]", "=", "torch", ".", "zeros_like", "(", "p", ".", "data", ")", "\n", "buf", ".", "mul_", "(", "momentum", ")", ".", "add_", "(", "d_p", ")", "\n", "", "else", ":", "\n", "                        ", "buf", "=", "param_state", "[", "'momentum_buffer'", "]", "\n", "buf", ".", "mul_", "(", "momentum", ")", ".", "add_", "(", "1", "-", "dampening", ",", "d_p", ")", "\n", "", "if", "nesterov", ":", "\n", "                        ", "d_p", "=", "d_p", ".", "add", "(", "momentum", ",", "buf", ")", "\n", "", "else", ":", "\n", "                        ", "d_p", "=", "buf", "##############################################", "\n", "\n", "", "", "p", ".", "data", ".", "add_", "(", "d_p", ")", "\n", "\n", "", "", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-256.model.ToyNet.__init__": [[13, 27], ["torch.Module.__init__", "model.ToyNet.create_model_dirs", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.create_model_dirs"], ["BASE_DIR", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "sys", ".", "path", ".", "append", "(", "BASE_DIR", ")", "\n", "from", "resnet_block", "import", "conv3x3", ",", "Bottleneck", "\n", "from", "aspp", "import", "ASPP", "\n", "\n", "sys", ".", "path", ".", "append", "(", "os", ".", "path", ".", "join", "(", "BASE_DIR", ",", "'../inplace_abn'", ")", ")", "\n", "from", "bn", "import", "InPlaceABNSync", "\n", "BatchNorm2d", "=", "functools", ".", "partial", "(", "InPlaceABNSync", ",", "activation", "=", "'none'", ")", "\n", "\n", "class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-256.model.ToyNet.forward": [[28, 36], ["torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "model.ToyNet.fc3", "model.ToyNet.fc1", "model.ToyNet.fc2"], "methods", ["None"], ["self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-256.model.ToyNet.create_model_dirs": [[37, 46], ["os.path.exists", "os.makedirs", "os.path.exists", "os.makedirs", "os.makedirs"], "methods", ["None"], ["self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-256.datasets.ToyDataset.__init__": [[18, 62], ["range", "numpy.array", "numpy.zeros", "numpy.array", "numpy.array", "print", "print", "matplotlib.figure", "matplotlib.figure", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.xlim", "matplotlib.xlim", "matplotlib.ylim", "matplotlib.ylim", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "range", "len", "open", "pickle.load", "open", "pickle.load", "datasets.ToyDataset.examples.append", "x_1_train.append", "x_2_train.append", "numpy.array.append", "len"], "methods", ["None"], ["return", "image", ",", "label", "\n", "\n", "", "def", "id2trainId", "(", "label", ",", "id_to_trainid", ")", ":", "\n", "    ", "label_copy", "=", "label", ".", "copy", "(", ")", "\n", "for", "k", ",", "v", "in", "id_to_trainid", ".", "items", "(", ")", ":", "\n", "        ", "label_copy", "[", "label", "==", "k", "]", "=", "v", "\n", "", "return", "label_copy", "\n", "\n", "################################################################################", "\n", "# Cityscapes", "\n", "################################################################################", "\n", "", "class", "DatasetCityscapesAugmentation", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetCityscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n", "\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-256.datasets.ToyDataset.__getitem__": [[63, 70], ["None"], "methods", ["None"], ["        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-256.datasets.ToyDataset.__len__": [[71, 73], ["None"], "methods", ["None"], ["\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-256.datasets.ToyDatasetEval.__init__": [[54, 65], ["numpy.linspace", "range", "len", "datasets.ToyDatasetEval.examples.append"], "methods", ["None"], ["\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-256.datasets.ToyDatasetEval.__getitem__": [[66, 72], ["None"], "methods", ["None"], ["        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-256.datasets.ToyDatasetEval.__len__": [[73, 75], ["None"], "methods", ["None"], ["name", "=", "datafiles", "[", "\"name\"", "]", "\n", "image", ",", "label", "=", "generate_scale_label", "(", "image", ",", "label", ")", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-Adam.model.ToyNet.__init__": [[13, 31], ["torch.Module.__init__", "model.ToyNet.create_model_dirs", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.create_model_dirs"], ["BASE_DIR", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "sys", ".", "path", ".", "append", "(", "BASE_DIR", ")", "\n", "from", "resnet_block", "import", "conv3x3", ",", "Bottleneck", "\n", "from", "aspp", "import", "ASPP", "\n", "\n", "sys", ".", "path", ".", "append", "(", "os", ".", "path", ".", "join", "(", "BASE_DIR", ",", "'../inplace_abn'", ")", ")", "\n", "from", "bn", "import", "InPlaceABNSync", "\n", "BatchNorm2d", "=", "functools", ".", "partial", "(", "InPlaceABNSync", ",", "activation", "=", "'none'", ")", "\n", "\n", "class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-Adam.model.ToyNet.forward": [[32, 46], ["torch.relu", "torch.relu", "torch.relu", "torch.dropout", "torch.dropout", "torch.dropout", "torch.relu", "torch.relu", "torch.relu", "model.ToyNet.fc3_mean", "torch.relu", "torch.relu", "torch.relu", "torch.dropout", "torch.dropout", "torch.dropout", "torch.relu", "torch.relu", "torch.relu", "model.ToyNet.fc3_var", "model.ToyNet.fc1_mean", "model.ToyNet.fc2_mean", "model.ToyNet.fc1_var", "model.ToyNet.fc2_var"], "methods", ["None"], ["self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-Adam.model.ToyNet.create_model_dirs": [[47, 56], ["os.path.exists", "os.makedirs", "os.path.exists", "os.makedirs", "os.makedirs"], "methods", ["None"], ["\n", "", "def", "_make_layer", "(", "self", ",", "block", ",", "planes", ",", "blocks", ",", "stride", "=", "1", ",", "dilation", "=", "1", ",", "multi_grid", "=", "1", ")", ":", "\n", "        ", "downsample", "=", "None", "\n", "\n", "if", "stride", "!=", "1", "or", "self", ".", "inplanes", "!=", "planes", "*", "block", ".", "expansion", ":", "\n", "            ", "downsample", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "self", ".", "inplanes", ",", "planes", "*", "block", ".", "expansion", ",", "kernel_size", "=", "1", ",", "stride", "=", "stride", ",", "bias", "=", "False", ")", ",", "\n", "BatchNorm2d", "(", "planes", "*", "block", ".", "expansion", ",", "affine", "=", "True", ")", ")", "\n", "\n", "", "layers", "=", "[", "]", "\n", "generate_multi_grid", "=", "lambda", "index", ",", "grids", ":", "grids", "[", "index", "%", "len", "(", "grids", ")", "]", "if", "isinstance", "(", "grids", ",", "tuple", ")", "else", "1", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-Adam.datasets.ToyDataset.__init__": [[18, 41], ["matplotlib.figure", "matplotlib.figure", "matplotlib.plot", "matplotlib.plot", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "range", "len", "open", "pickle.load", "open", "pickle.load", "datasets.ToyDataset.examples.append"], "methods", ["None"], ["return", "image", ",", "label", "\n", "\n", "", "def", "id2trainId", "(", "label", ",", "id_to_trainid", ")", ":", "\n", "    ", "label_copy", "=", "label", ".", "copy", "(", ")", "\n", "for", "k", ",", "v", "in", "id_to_trainid", ".", "items", "(", ")", ":", "\n", "        ", "label_copy", "[", "label", "==", "k", "]", "=", "v", "\n", "", "return", "label_copy", "\n", "\n", "################################################################################", "\n", "# Cityscapes", "\n", "################################################################################", "\n", "", "class", "DatasetCityscapesAugmentation", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetCityscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-Adam.datasets.ToyDataset.__getitem__": [[42, 49], ["None"], "methods", ["None"], ["self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-Adam.datasets.ToyDataset.__len__": [[50, 52], ["None"], "methods", ["None"], ["\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-Adam.datasets.ToyDatasetEval.__init__": [[54, 65], ["numpy.linspace", "range", "len", "datasets.ToyDatasetEval.examples.append"], "methods", ["None"], ["\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-Adam.datasets.ToyDatasetEval.__getitem__": [[66, 72], ["None"], "methods", ["None"], ["        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-Adam.datasets.ToyDatasetEval.__len__": [[73, 75], ["None"], "methods", ["None"], ["name", "=", "datafiles", "[", "\"name\"", "]", "\n", "image", ",", "label", "=", "generate_scale_label", "(", "image", ",", "label", ")", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-256.model.ToyNet.__init__": [[13, 27], ["torch.Module.__init__", "model.ToyNet.create_model_dirs", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.create_model_dirs"], ["BASE_DIR", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "sys", ".", "path", ".", "append", "(", "BASE_DIR", ")", "\n", "from", "resnet_block", "import", "conv3x3", ",", "Bottleneck", "\n", "from", "aspp", "import", "ASPP", "\n", "\n", "sys", ".", "path", ".", "append", "(", "os", ".", "path", ".", "join", "(", "BASE_DIR", ",", "'../inplace_abn'", ")", ")", "\n", "from", "bn", "import", "InPlaceABNSync", "\n", "BatchNorm2d", "=", "functools", ".", "partial", "(", "InPlaceABNSync", ",", "activation", "=", "'none'", ")", "\n", "\n", "class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-256.model.ToyNet.forward": [[28, 36], ["torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "model.ToyNet.fc3", "model.ToyNet.fc1", "model.ToyNet.fc2"], "methods", ["None"], ["self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-256.model.ToyNet.create_model_dirs": [[37, 46], ["os.path.exists", "os.makedirs", "os.path.exists", "os.makedirs", "os.makedirs"], "methods", ["None"], ["self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-256.datasets.ToyDataset.__init__": [[18, 62], ["range", "numpy.array", "numpy.zeros", "numpy.array", "numpy.array", "print", "print", "matplotlib.figure", "matplotlib.figure", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.xlim", "matplotlib.xlim", "matplotlib.ylim", "matplotlib.ylim", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "range", "len", "open", "pickle.load", "open", "pickle.load", "datasets.ToyDataset.examples.append", "x_1_train.append", "x_2_train.append", "numpy.array.append", "len"], "methods", ["None"], ["return", "image", ",", "label", "\n", "\n", "", "def", "id2trainId", "(", "label", ",", "id_to_trainid", ")", ":", "\n", "    ", "label_copy", "=", "label", ".", "copy", "(", ")", "\n", "for", "k", ",", "v", "in", "id_to_trainid", ".", "items", "(", ")", ":", "\n", "        ", "label_copy", "[", "label", "==", "k", "]", "=", "v", "\n", "", "return", "label_copy", "\n", "\n", "################################################################################", "\n", "# Cityscapes", "\n", "################################################################################", "\n", "", "class", "DatasetCityscapesAugmentation", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetCityscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n", "\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-256.datasets.ToyDataset.__getitem__": [[63, 70], ["None"], "methods", ["None"], ["        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-256.datasets.ToyDataset.__len__": [[71, 73], ["None"], "methods", ["None"], ["\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-256.datasets.ToyDatasetEval.__init__": [[54, 65], ["numpy.linspace", "range", "len", "datasets.ToyDatasetEval.examples.append"], "methods", ["None"], ["\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-256.datasets.ToyDatasetEval.__getitem__": [[66, 72], ["None"], "methods", ["None"], ["        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-256.datasets.ToyDatasetEval.__len__": [[73, 75], ["None"], "methods", ["None"], ["name", "=", "datafiles", "[", "\"name\"", "]", "\n", "image", ",", "label", "=", "generate_scale_label", "(", "image", ",", "label", ")", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGDMOM.train.lr_poly": [[32, 34], ["float"], "function", ["None"], ["", "", "def", "step", "(", "self", ",", "closure", "=", "None", ")", ":", "\n", "        "]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGDMOM.train.adjust_learning_rate": [[35, 39], ["train.lr_poly"], "function", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.train.lr_poly"], ["\n", "loss", "=", "None", "\n", "if", "closure", "is", "not", "None", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGDMOM.model.ToyNet.__init__": [[13, 27], ["torch.Module.__init__", "model.ToyNet.create_model_dirs", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.create_model_dirs"], ["BASE_DIR", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "sys", ".", "path", ".", "append", "(", "BASE_DIR", ")", "\n", "from", "resnet_block", "import", "conv3x3", ",", "Bottleneck", "\n", "from", "aspp", "import", "ASPP", "\n", "\n", "sys", ".", "path", ".", "append", "(", "os", ".", "path", ".", "join", "(", "BASE_DIR", ",", "'../inplace_abn'", ")", ")", "\n", "from", "bn", "import", "InPlaceABNSync", "\n", "BatchNorm2d", "=", "functools", ".", "partial", "(", "InPlaceABNSync", ",", "activation", "=", "'none'", ")", "\n", "\n", "class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGDMOM.model.ToyNet.forward": [[28, 36], ["torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "model.ToyNet.fc3", "model.ToyNet.fc1", "model.ToyNet.fc2"], "methods", ["None"], ["self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGDMOM.model.ToyNet.create_model_dirs": [[37, 46], ["os.path.exists", "os.makedirs", "os.path.exists", "os.makedirs", "os.makedirs"], "methods", ["None"], ["self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGDMOM.datasets.ToyDataset.__init__": [[18, 62], ["range", "numpy.array", "numpy.zeros", "numpy.array", "numpy.array", "print", "print", "matplotlib.figure", "matplotlib.figure", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.xlim", "matplotlib.xlim", "matplotlib.ylim", "matplotlib.ylim", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "range", "len", "open", "pickle.load", "open", "pickle.load", "datasets.ToyDataset.examples.append", "x_1_train.append", "x_2_train.append", "numpy.array.append", "len"], "methods", ["None"], ["return", "image", ",", "label", "\n", "\n", "", "def", "id2trainId", "(", "label", ",", "id_to_trainid", ")", ":", "\n", "    ", "label_copy", "=", "label", ".", "copy", "(", ")", "\n", "for", "k", ",", "v", "in", "id_to_trainid", ".", "items", "(", ")", ":", "\n", "        ", "label_copy", "[", "label", "==", "k", "]", "=", "v", "\n", "", "return", "label_copy", "\n", "\n", "################################################################################", "\n", "# Cityscapes", "\n", "################################################################################", "\n", "", "class", "DatasetCityscapesAugmentation", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetCityscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n", "\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGDMOM.datasets.ToyDataset.__getitem__": [[63, 70], ["None"], "methods", ["None"], ["        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGDMOM.datasets.ToyDataset.__len__": [[71, 73], ["None"], "methods", ["None"], ["\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGDMOM.datasets.ToyDatasetEval.__init__": [[54, 65], ["numpy.linspace", "range", "len", "datasets.ToyDatasetEval.examples.append"], "methods", ["None"], ["\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGDMOM.datasets.ToyDatasetEval.__getitem__": [[66, 72], ["None"], "methods", ["None"], ["        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGDMOM.datasets.ToyDatasetEval.__len__": [[73, 75], ["None"], "methods", ["None"], ["name", "=", "datafiles", "[", "\"name\"", "]", "\n", "image", ",", "label", "=", "generate_scale_label", "(", "image", ",", "label", ")", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam.model.ToyNet.__init__": [[13, 27], ["torch.Module.__init__", "model.ToyNet.create_model_dirs", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.create_model_dirs"], ["BASE_DIR", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "sys", ".", "path", ".", "append", "(", "BASE_DIR", ")", "\n", "from", "resnet_block", "import", "conv3x3", ",", "Bottleneck", "\n", "from", "aspp", "import", "ASPP", "\n", "\n", "sys", ".", "path", ".", "append", "(", "os", ".", "path", ".", "join", "(", "BASE_DIR", ",", "'../inplace_abn'", ")", ")", "\n", "from", "bn", "import", "InPlaceABNSync", "\n", "BatchNorm2d", "=", "functools", ".", "partial", "(", "InPlaceABNSync", ",", "activation", "=", "'none'", ")", "\n", "\n", "class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam.model.ToyNet.forward": [[28, 36], ["torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "model.ToyNet.fc3", "model.ToyNet.fc1", "model.ToyNet.fc2"], "methods", ["None"], ["self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam.model.ToyNet.create_model_dirs": [[37, 46], ["os.path.exists", "os.makedirs", "os.path.exists", "os.makedirs", "os.makedirs"], "methods", ["None"], ["self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam.datasets.ToyDataset.__init__": [[18, 62], ["range", "numpy.array", "numpy.zeros", "numpy.array", "numpy.array", "print", "print", "matplotlib.figure", "matplotlib.figure", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.xlim", "matplotlib.xlim", "matplotlib.ylim", "matplotlib.ylim", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "range", "len", "open", "pickle.load", "open", "pickle.load", "datasets.ToyDataset.examples.append", "x_1_train.append", "x_2_train.append", "numpy.array.append", "len"], "methods", ["None"], ["return", "image", ",", "label", "\n", "\n", "", "def", "id2trainId", "(", "label", ",", "id_to_trainid", ")", ":", "\n", "    ", "label_copy", "=", "label", ".", "copy", "(", ")", "\n", "for", "k", ",", "v", "in", "id_to_trainid", ".", "items", "(", ")", ":", "\n", "        ", "label_copy", "[", "label", "==", "k", "]", "=", "v", "\n", "", "return", "label_copy", "\n", "\n", "################################################################################", "\n", "# Cityscapes", "\n", "################################################################################", "\n", "", "class", "DatasetCityscapesAugmentation", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetCityscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n", "\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam.datasets.ToyDataset.__getitem__": [[63, 70], ["None"], "methods", ["None"], ["        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam.datasets.ToyDataset.__len__": [[71, 73], ["None"], "methods", ["None"], ["\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam.datasets.ToyDatasetEval.__init__": [[54, 65], ["numpy.linspace", "range", "len", "datasets.ToyDatasetEval.examples.append"], "methods", ["None"], ["\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam.datasets.ToyDatasetEval.__getitem__": [[66, 72], ["None"], "methods", ["None"], ["        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam.datasets.ToyDatasetEval.__len__": [[73, 75], ["None"], "methods", ["None"], ["name", "=", "datafiles", "[", "\"name\"", "]", "\n", "image", ",", "label", "=", "generate_scale_label", "(", "image", ",", "label", ")", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-64.train.SGD.__init__": [[12, 26], ["dict", "torch.optim.optimizer.Optimizer.__init__", "ValueError", "ValueError", "ValueError", "ValueError"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__"], ["def", "__init__", "(", "self", ",", "params", ",", "lr", "=", "required", ",", "momentum", "=", "0", ",", "dampening", "=", "0", ",", "\n", "weight_decay", "=", "0", ",", "nesterov", "=", "False", ")", ":", "\n", "        ", "if", "lr", "is", "not", "required", "and", "lr", "<", "0.0", ":", "\n", "            ", "raise", "ValueError", "(", "\"Invalid learning rate: {}\"", ".", "format", "(", "lr", ")", ")", "\n", "", "if", "momentum", "<", "0.0", ":", "\n", "            ", "raise", "ValueError", "(", "\"Invalid momentum value: {}\"", ".", "format", "(", "momentum", ")", ")", "\n", "", "if", "weight_decay", "<", "0.0", ":", "\n", "            ", "raise", "ValueError", "(", "\"Invalid weight_decay value: {}\"", ".", "format", "(", "weight_decay", ")", ")", "\n", "\n", "", "defaults", "=", "dict", "(", "lr", "=", "lr", ",", "momentum", "=", "momentum", ",", "dampening", "=", "dampening", ",", "\n", "weight_decay", "=", "weight_decay", ",", "nesterov", "=", "nesterov", ")", "\n", "if", "nesterov", "and", "(", "momentum", "<=", "0", "or", "dampening", "!=", "0", ")", ":", "\n", "            ", "raise", "ValueError", "(", "\"Nesterov momentum requires a momentum and zero dampening\"", ")", "\n", "", "super", "(", "SGD", ",", "self", ")", ".", "__init__", "(", "params", ",", "defaults", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-64.train.SGD.__setstate__": [[27, 31], ["super().__setstate__", "group.setdefault"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-64.train.SGD.__setstate__"], ["", "def", "__setstate__", "(", "self", ",", "state", ")", ":", "\n", "        ", "super", "(", "SGD", ",", "self", ")", ".", "__setstate__", "(", "state", ")", "\n", "for", "group", "in", "self", ".", "param_groups", ":", "\n", "            ", "group", ".", "setdefault", "(", "'nesterov'", ",", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-64.train.SGD.step": [[32, 71], ["closure", "d_p.add.add.mul_", "p.data.add_", "d_p.add.add.add_", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "torch.zeros_like.mul_().add_", "d_p.add.add.add", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_", "torch.zeros_like.mul_"], "methods", ["None"], ["", "", "def", "step", "(", "self", ",", "closure", "=", "None", ")", ":", "\n", "        ", "\"\"\"Performs a single optimization step.\n        Arguments:\n            closure (callable, optional): A closure that reevaluates the model\n                and returns the loss.\n        \"\"\"", "\n", "loss", "=", "None", "\n", "if", "closure", "is", "not", "None", ":", "\n", "            ", "loss", "=", "closure", "(", ")", "\n", "\n", "", "for", "group", "in", "self", ".", "param_groups", ":", "\n", "            ", "weight_decay", "=", "group", "[", "'weight_decay'", "]", "\n", "momentum", "=", "group", "[", "'momentum'", "]", "\n", "dampening", "=", "group", "[", "'dampening'", "]", "\n", "nesterov", "=", "group", "[", "'nesterov'", "]", "\n", "\n", "for", "p", "in", "group", "[", "'params'", "]", ":", "\n", "                ", "if", "p", ".", "grad", "is", "None", ":", "\n", "                    ", "continue", "\n", "", "d_p", "=", "p", ".", "grad", ".", "data", "\n", "if", "weight_decay", "!=", "0", ":", "\n", "                    ", "d_p", ".", "add_", "(", "weight_decay", ",", "p", ".", "data", ")", "\n", "", "d_p", ".", "mul_", "(", "(", "-", "1.0", ")", "*", "group", "[", "'lr'", "]", ")", "###################################", "\n", "if", "momentum", "!=", "0", ":", "\n", "                    ", "param_state", "=", "self", ".", "state", "[", "p", "]", "\n", "if", "'momentum_buffer'", "not", "in", "param_state", ":", "\n", "                        ", "buf", "=", "param_state", "[", "'momentum_buffer'", "]", "=", "torch", ".", "zeros_like", "(", "p", ".", "data", ")", "\n", "buf", ".", "mul_", "(", "momentum", ")", ".", "add_", "(", "d_p", ")", "\n", "", "else", ":", "\n", "                        ", "buf", "=", "param_state", "[", "'momentum_buffer'", "]", "\n", "buf", ".", "mul_", "(", "momentum", ")", ".", "add_", "(", "1", "-", "dampening", ",", "d_p", ")", "\n", "", "if", "nesterov", ":", "\n", "                        ", "d_p", "=", "d_p", ".", "add", "(", "momentum", ",", "buf", ")", "\n", "", "else", ":", "\n", "                        ", "d_p", "=", "buf", "##############################################", "\n", "\n", "", "", "p", ".", "data", ".", "add_", "(", "d_p", ")", "\n", "\n", "", "", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-64.model.ToyNet.__init__": [[13, 27], ["torch.Module.__init__", "model.ToyNet.create_model_dirs", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.create_model_dirs"], ["BASE_DIR", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "sys", ".", "path", ".", "append", "(", "BASE_DIR", ")", "\n", "from", "resnet_block", "import", "conv3x3", ",", "Bottleneck", "\n", "from", "aspp", "import", "ASPP", "\n", "\n", "sys", ".", "path", ".", "append", "(", "os", ".", "path", ".", "join", "(", "BASE_DIR", ",", "'../inplace_abn'", ")", ")", "\n", "from", "bn", "import", "InPlaceABNSync", "\n", "BatchNorm2d", "=", "functools", ".", "partial", "(", "InPlaceABNSync", ",", "activation", "=", "'none'", ")", "\n", "\n", "class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-64.model.ToyNet.forward": [[28, 36], ["torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "model.ToyNet.fc3", "model.ToyNet.fc1", "model.ToyNet.fc2"], "methods", ["None"], ["self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-64.model.ToyNet.create_model_dirs": [[37, 46], ["os.path.exists", "os.makedirs", "os.path.exists", "os.makedirs", "os.makedirs"], "methods", ["None"], ["self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-64.datasets.ToyDataset.__init__": [[18, 62], ["range", "numpy.array", "numpy.zeros", "numpy.array", "numpy.array", "print", "print", "matplotlib.figure", "matplotlib.figure", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.xlim", "matplotlib.xlim", "matplotlib.ylim", "matplotlib.ylim", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "range", "len", "open", "pickle.load", "open", "pickle.load", "datasets.ToyDataset.examples.append", "x_1_train.append", "x_2_train.append", "numpy.array.append", "len"], "methods", ["None"], ["return", "image", ",", "label", "\n", "\n", "", "def", "id2trainId", "(", "label", ",", "id_to_trainid", ")", ":", "\n", "    ", "label_copy", "=", "label", ".", "copy", "(", ")", "\n", "for", "k", ",", "v", "in", "id_to_trainid", ".", "items", "(", ")", ":", "\n", "        ", "label_copy", "[", "label", "==", "k", "]", "=", "v", "\n", "", "return", "label_copy", "\n", "\n", "################################################################################", "\n", "# Cityscapes", "\n", "################################################################################", "\n", "", "class", "DatasetCityscapesAugmentation", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetCityscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n", "\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-64.datasets.ToyDataset.__getitem__": [[63, 70], ["None"], "methods", ["None"], ["        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-64.datasets.ToyDataset.__len__": [[71, 73], ["None"], "methods", ["None"], ["\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-64.datasets.ToyDatasetEval.__init__": [[54, 65], ["numpy.linspace", "range", "len", "datasets.ToyDatasetEval.examples.append"], "methods", ["None"], ["\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-64.datasets.ToyDatasetEval.__getitem__": [[66, 72], ["None"], "methods", ["None"], ["        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGHMC-64.datasets.ToyDatasetEval.__len__": [[73, 75], ["None"], "methods", ["None"], ["name", "=", "datafiles", "[", "\"name\"", "]", "\n", "image", ",", "label", "=", "generate_scale_label", "(", "image", ",", "label", ")", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Deterministic.model.ToyNet.__init__": [[13, 27], ["torch.Module.__init__", "model.ToyNet.create_model_dirs", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.create_model_dirs"], ["BASE_DIR", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "sys", ".", "path", ".", "append", "(", "BASE_DIR", ")", "\n", "from", "resnet_block", "import", "conv3x3", ",", "Bottleneck", "\n", "from", "aspp", "import", "ASPP", "\n", "\n", "sys", ".", "path", ".", "append", "(", "os", ".", "path", ".", "join", "(", "BASE_DIR", ",", "'../inplace_abn'", ")", ")", "\n", "from", "bn", "import", "InPlaceABNSync", "\n", "BatchNorm2d", "=", "functools", ".", "partial", "(", "InPlaceABNSync", ",", "activation", "=", "'none'", ")", "\n", "\n", "class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Deterministic.model.ToyNet.forward": [[28, 36], ["torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "model.ToyNet.fc3_mean", "model.ToyNet.fc1_mean", "model.ToyNet.fc2_mean"], "methods", ["None"], ["self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Deterministic.model.ToyNet.create_model_dirs": [[37, 46], ["os.path.exists", "os.makedirs", "os.path.exists", "os.makedirs", "os.makedirs"], "methods", ["None"], ["self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Deterministic.datasets.ToyDataset.__init__": [[18, 41], ["matplotlib.figure", "matplotlib.figure", "matplotlib.plot", "matplotlib.plot", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "range", "len", "open", "pickle.load", "open", "pickle.load", "datasets.ToyDataset.examples.append"], "methods", ["None"], ["return", "image", ",", "label", "\n", "\n", "", "def", "id2trainId", "(", "label", ",", "id_to_trainid", ")", ":", "\n", "    ", "label_copy", "=", "label", ".", "copy", "(", ")", "\n", "for", "k", ",", "v", "in", "id_to_trainid", ".", "items", "(", ")", ":", "\n", "        ", "label_copy", "[", "label", "==", "k", "]", "=", "v", "\n", "", "return", "label_copy", "\n", "\n", "################################################################################", "\n", "# Cityscapes", "\n", "################################################################################", "\n", "", "class", "DatasetCityscapesAugmentation", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetCityscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Deterministic.datasets.ToyDataset.__getitem__": [[42, 49], ["None"], "methods", ["None"], ["self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Deterministic.datasets.ToyDataset.__len__": [[50, 52], ["None"], "methods", ["None"], ["\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Deterministic.datasets.ToyDatasetEval.__init__": [[54, 65], ["numpy.linspace", "range", "len", "datasets.ToyDatasetEval.examples.append"], "methods", ["None"], ["\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Deterministic.datasets.ToyDatasetEval.__getitem__": [[66, 72], ["None"], "methods", ["None"], ["        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Deterministic.datasets.ToyDatasetEval.__len__": [[73, 75], ["None"], "methods", ["None"], ["name", "=", "datafiles", "[", "\"name\"", "]", "\n", "image", ",", "label", "=", "generate_scale_label", "(", "image", ",", "label", ")", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam.model.ToyNet.__init__": [[13, 27], ["torch.Module.__init__", "model.ToyNet.create_model_dirs", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.create_model_dirs"], ["BASE_DIR", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "sys", ".", "path", ".", "append", "(", "BASE_DIR", ")", "\n", "from", "resnet_block", "import", "conv3x3", ",", "Bottleneck", "\n", "from", "aspp", "import", "ASPP", "\n", "\n", "sys", ".", "path", ".", "append", "(", "os", ".", "path", ".", "join", "(", "BASE_DIR", ",", "'../inplace_abn'", ")", ")", "\n", "from", "bn", "import", "InPlaceABNSync", "\n", "BatchNorm2d", "=", "functools", ".", "partial", "(", "InPlaceABNSync", ",", "activation", "=", "'none'", ")", "\n", "\n", "class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam.model.ToyNet.forward": [[28, 36], ["torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "model.ToyNet.fc3", "model.ToyNet.fc1", "model.ToyNet.fc2"], "methods", ["None"], ["self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam.model.ToyNet.create_model_dirs": [[37, 46], ["os.path.exists", "os.makedirs", "os.path.exists", "os.makedirs", "os.makedirs"], "methods", ["None"], ["self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam.datasets.ToyDataset.__init__": [[87, 131], ["range", "numpy.array", "numpy.zeros", "numpy.array", "numpy.array", "print", "print", "matplotlib.figure", "matplotlib.figure", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.xlim", "matplotlib.xlim", "matplotlib.ylim", "matplotlib.ylim", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "range", "len", "open", "pickle.load", "open", "pickle.load", "datasets.ToyDataset.examples.append", "x_1_train.append", "x_2_train.append", "numpy.array.append", "len"], "methods", ["None"], ["value", "=", "(", "0.0", ",", "0.0", ",", "0.0", ")", ")", "\n", "label_pad", "=", "cv2", ".", "copyMakeBorder", "(", "label", ",", "0", ",", "pad_h", ",", "0", ",", "\n", "pad_w", ",", "cv2", ".", "BORDER_CONSTANT", ",", "\n", "value", "=", "(", "self", ".", "ignore_label", ",", ")", ")", "\n", "", "else", ":", "\n", "            ", "img_pad", ",", "label_pad", "=", "image", ",", "label", "\n", "\n", "", "img_h", ",", "img_w", "=", "label_pad", ".", "shape", "\n", "h_off", "=", "random", ".", "randint", "(", "0", ",", "img_h", "-", "self", ".", "crop_h", ")", "\n", "w_off", "=", "random", ".", "randint", "(", "0", ",", "img_w", "-", "self", ".", "crop_w", ")", "\n", "image", "=", "np", ".", "asarray", "(", "img_pad", "[", "h_off", ":", "h_off", "+", "self", ".", "crop_h", ",", "w_off", ":", "w_off", "+", "self", ".", "crop_w", "]", ",", "np", ".", "float32", ")", "\n", "label", "=", "np", ".", "asarray", "(", "label_pad", "[", "h_off", ":", "h_off", "+", "self", ".", "crop_h", ",", "w_off", ":", "w_off", "+", "self", ".", "crop_w", "]", ",", "np", ".", "float32", ")", "\n", "image", "=", "image", ".", "transpose", "(", "(", "2", ",", "0", ",", "1", ")", ")", "\n", "\n", "flip", "=", "np", ".", "random", ".", "choice", "(", "2", ")", "*", "2", "-", "1", "\n", "image", "=", "image", "[", ":", ",", ":", ",", ":", ":", "flip", "]", "\n", "label", "=", "label", "[", ":", ",", ":", ":", "flip", "]", "\n", "\n", "return", "image", ".", "copy", "(", ")", ",", "label", ".", "copy", "(", ")", ",", "np", ".", "array", "(", "size", ")", ",", "name", "\n", "\n", "", "", "class", "DatasetCityscapesEval", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesEval - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n", "\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam.datasets.ToyDataset.__getitem__": [[132, 139], ["None"], "methods", ["None"], ["14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam.datasets.ToyDataset.__len__": [[140, 142], ["None"], "methods", ["None"], ["        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam.datasets.ToyDatasetEval.__init__": [[54, 65], ["numpy.linspace", "range", "len", "datasets.ToyDatasetEval.examples.append"], "methods", ["None"], ["\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam.datasets.ToyDatasetEval.__getitem__": [[66, 72], ["None"], "methods", ["None"], ["        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam.datasets.ToyDatasetEval.__len__": [[73, 75], ["None"], "methods", ["None"], ["name", "=", "datafiles", "[", "\"name\"", "]", "\n", "image", ",", "label", "=", "generate_scale_label", "(", "image", ",", "label", ")", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGD.train.lr_poly": [[38, 40], ["float"], "function", ["None"], ["loss", "=", "None", "\n", "if", "closure", "is", "not", "None", ":", "\n", "            ", "loss", "=", "closure", "(", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGD.train.adjust_learning_rate": [[41, 45], ["train.lr_poly"], "function", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.train.lr_poly"], ["\n", "", "for", "group", "in", "self", ".", "param_groups", ":", "\n", "            ", "weight_decay", "=", "group", "[", "'weight_decay'", "]", "\n", "momentum", "=", "group", "[", "'momentum'", "]", "\n", "dampening", "=", "group", "[", "'dampening'", "]", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGD.model.ToyNet.__init__": [[13, 27], ["torch.Module.__init__", "model.ToyNet.create_model_dirs", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.create_model_dirs"], ["BASE_DIR", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "sys", ".", "path", ".", "append", "(", "BASE_DIR", ")", "\n", "from", "resnet_block", "import", "conv3x3", ",", "Bottleneck", "\n", "from", "aspp", "import", "ASPP", "\n", "\n", "sys", ".", "path", ".", "append", "(", "os", ".", "path", ".", "join", "(", "BASE_DIR", ",", "'../inplace_abn'", ")", ")", "\n", "from", "bn", "import", "InPlaceABNSync", "\n", "BatchNorm2d", "=", "functools", ".", "partial", "(", "InPlaceABNSync", ",", "activation", "=", "'none'", ")", "\n", "\n", "class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGD.model.ToyNet.forward": [[28, 37], ["torch.relu", "torch.relu", "torch.relu", "torch.dropout", "torch.dropout", "torch.dropout", "torch.relu", "torch.relu", "torch.relu", "model.ToyNet.fc3", "model.ToyNet.fc1", "model.ToyNet.fc2"], "methods", ["None"], ["self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGD.model.ToyNet.create_model_dirs": [[38, 47], ["os.path.exists", "os.makedirs", "os.path.exists", "os.makedirs", "os.makedirs"], "methods", ["None"], ["\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGD.datasets.ToyDataset.__init__": [[18, 62], ["range", "numpy.array", "numpy.zeros", "numpy.array", "numpy.array", "print", "print", "matplotlib.figure", "matplotlib.figure", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.xlim", "matplotlib.xlim", "matplotlib.ylim", "matplotlib.ylim", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "range", "len", "open", "pickle.load", "open", "pickle.load", "datasets.ToyDataset.examples.append", "x_1_train.append", "x_2_train.append", "numpy.array.append", "len"], "methods", ["None"], ["return", "image", ",", "label", "\n", "\n", "", "def", "id2trainId", "(", "label", ",", "id_to_trainid", ")", ":", "\n", "    ", "label_copy", "=", "label", ".", "copy", "(", ")", "\n", "for", "k", ",", "v", "in", "id_to_trainid", ".", "items", "(", ")", ":", "\n", "        ", "label_copy", "[", "label", "==", "k", "]", "=", "v", "\n", "", "return", "label_copy", "\n", "\n", "################################################################################", "\n", "# Cityscapes", "\n", "################################################################################", "\n", "", "class", "DatasetCityscapesAugmentation", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetCityscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n", "\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGD.datasets.ToyDataset.__getitem__": [[63, 70], ["None"], "methods", ["None"], ["        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGD.datasets.ToyDataset.__len__": [[71, 73], ["None"], "methods", ["None"], ["\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGD.datasets.ToyDatasetEval.__init__": [[54, 65], ["numpy.linspace", "range", "len", "datasets.ToyDatasetEval.examples.append"], "methods", ["None"], ["\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGD.datasets.ToyDatasetEval.__getitem__": [[66, 72], ["None"], "methods", ["None"], ["        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGD.datasets.ToyDatasetEval.__len__": [[73, 75], ["None"], "methods", ["None"], ["name", "=", "datafiles", "[", "\"name\"", "]", "\n", "image", ",", "label", "=", "generate_scale_label", "(", "image", ",", "label", ")", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-64.model.ToyNet.__init__": [[13, 27], ["torch.Module.__init__", "model.ToyNet.create_model_dirs", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.create_model_dirs"], ["BASE_DIR", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "sys", ".", "path", ".", "append", "(", "BASE_DIR", ")", "\n", "from", "resnet_block", "import", "conv3x3", ",", "Bottleneck", "\n", "from", "aspp", "import", "ASPP", "\n", "\n", "sys", ".", "path", ".", "append", "(", "os", ".", "path", ".", "join", "(", "BASE_DIR", ",", "'../inplace_abn'", ")", ")", "\n", "from", "bn", "import", "InPlaceABNSync", "\n", "BatchNorm2d", "=", "functools", ".", "partial", "(", "InPlaceABNSync", ",", "activation", "=", "'none'", ")", "\n", "\n", "class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-64.model.ToyNet.forward": [[28, 36], ["torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "model.ToyNet.fc3", "model.ToyNet.fc1", "model.ToyNet.fc2"], "methods", ["None"], ["self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-64.model.ToyNet.create_model_dirs": [[37, 46], ["os.path.exists", "os.makedirs", "os.path.exists", "os.makedirs", "os.makedirs"], "methods", ["None"], ["self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-64.datasets.ToyDataset.__init__": [[18, 62], ["range", "numpy.array", "numpy.zeros", "numpy.array", "numpy.array", "print", "print", "matplotlib.figure", "matplotlib.figure", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.xlim", "matplotlib.xlim", "matplotlib.ylim", "matplotlib.ylim", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "range", "len", "open", "pickle.load", "open", "pickle.load", "datasets.ToyDataset.examples.append", "x_1_train.append", "x_2_train.append", "numpy.array.append", "len"], "methods", ["None"], ["return", "image", ",", "label", "\n", "\n", "", "def", "id2trainId", "(", "label", ",", "id_to_trainid", ")", ":", "\n", "    ", "label_copy", "=", "label", ".", "copy", "(", ")", "\n", "for", "k", ",", "v", "in", "id_to_trainid", ".", "items", "(", ")", ":", "\n", "        ", "label_copy", "[", "label", "==", "k", "]", "=", "v", "\n", "", "return", "label_copy", "\n", "\n", "################################################################################", "\n", "# Cityscapes", "\n", "################################################################################", "\n", "", "class", "DatasetCityscapesAugmentation", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetCityscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n", "\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-64.datasets.ToyDataset.__getitem__": [[63, 70], ["None"], "methods", ["None"], ["        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-64.datasets.ToyDataset.__len__": [[71, 73], ["None"], "methods", ["None"], ["\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-64.datasets.ToyDatasetEval.__init__": [[54, 65], ["numpy.linspace", "range", "len", "datasets.ToyDatasetEval.examples.append"], "methods", ["None"], ["\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-64.datasets.ToyDatasetEval.__getitem__": [[66, 72], ["None"], "methods", ["None"], ["        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.SGLD-64.datasets.ToyDatasetEval.__len__": [[73, 75], ["None"], "methods", ["None"], ["name", "=", "datafiles", "[", "\"name\"", "]", "\n", "image", ",", "label", "=", "generate_scale_label", "(", "image", ",", "label", ")", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.HMC.model_pyro.model": [[14, 35], ["pyro.distributions.Normal", "pyro.distributions.Normal", "pyro.distributions.Normal", "pyro.distributions.Normal", "pyro.distributions.Normal", "pyro.distributions.Normal", "pyro.distributions.Normal", "pyro.distributions.Normal", "pyro.distributions.Normal", "pyro.distributions.Normal", "pyro.distributions.Normal", "pyro.distributions.Normal", "pyro.random_module", "pyro.random_module", "pyro.random_module.", "lifted_module.", "pyro.sample", "pyro.sample", "pyro.distributions.Categorical", "pyro.distributions.Categorical", "torch.zeros_like", "torch.zeros_like", "torch.ones_like", "torch.ones_like", "torch.zeros_like", "torch.zeros_like", "torch.ones_like", "torch.ones_like", "torch.zeros_like", "torch.zeros_like", "torch.ones_like", "torch.ones_like", "torch.zeros_like", "torch.zeros_like", "torch.ones_like", "torch.ones_like", "torch.zeros_like", "torch.zeros_like", "torch.ones_like", "torch.ones_like", "torch.zeros_like", "torch.zeros_like", "torch.ones_like", "torch.ones_like"], "function", ["None"], ["    ", "fc1_mean_weight_prior", "=", "pyro", ".", "distributions", ".", "Normal", "(", "loc", "=", "torch", ".", "zeros_like", "(", "det_net", ".", "fc1_mean", ".", "weight", ")", ",", "scale", "=", "torch", ".", "ones_like", "(", "det_net", ".", "fc1_mean", ".", "weight", ")", ")", "\n", "fc1_mean_bias_prior", "=", "pyro", ".", "distributions", ".", "Normal", "(", "loc", "=", "torch", ".", "zeros_like", "(", "det_net", ".", "fc1_mean", ".", "bias", ")", ",", "scale", "=", "torch", ".", "ones_like", "(", "det_net", ".", "fc1_mean", ".", "bias", ")", ")", "\n", "\n", "fc2_mean_weight_prior", "=", "pyro", ".", "distributions", ".", "Normal", "(", "loc", "=", "torch", ".", "zeros_like", "(", "det_net", ".", "fc2_mean", ".", "weight", ")", ",", "scale", "=", "torch", ".", "ones_like", "(", "det_net", ".", "fc2_mean", ".", "weight", ")", ")", "\n", "fc2_mean_bias_prior", "=", "pyro", ".", "distributions", ".", "Normal", "(", "loc", "=", "torch", ".", "zeros_like", "(", "det_net", ".", "fc2_mean", ".", "bias", ")", ",", "scale", "=", "torch", ".", "ones_like", "(", "det_net", ".", "fc2_mean", ".", "bias", ")", ")", "\n", "\n", "fc3_mean_weight_prior", "=", "pyro", ".", "distributions", ".", "Normal", "(", "loc", "=", "torch", ".", "zeros_like", "(", "det_net", ".", "fc3_mean", ".", "weight", ")", ",", "scale", "=", "torch", ".", "ones_like", "(", "det_net", ".", "fc3_mean", ".", "weight", ")", ")", "\n", "fc3_mean_bias_prior", "=", "pyro", ".", "distributions", ".", "Normal", "(", "loc", "=", "torch", ".", "zeros_like", "(", "det_net", ".", "fc3_mean", ".", "bias", ")", ",", "scale", "=", "torch", ".", "ones_like", "(", "det_net", ".", "fc3_mean", ".", "bias", ")", ")", "\n", "\n", "fc1_var_weight_prior", "=", "pyro", ".", "distributions", ".", "Normal", "(", "loc", "=", "torch", ".", "zeros_like", "(", "det_net", ".", "fc1_var", ".", "weight", ")", ",", "scale", "=", "torch", ".", "ones_like", "(", "det_net", ".", "fc1_var", ".", "weight", ")", ")", "\n", "fc1_var_bias_prior", "=", "pyro", ".", "distributions", ".", "Normal", "(", "loc", "=", "torch", ".", "zeros_like", "(", "det_net", ".", "fc1_var", ".", "bias", ")", ",", "scale", "=", "torch", ".", "ones_like", "(", "det_net", ".", "fc1_var", ".", "bias", ")", ")", "\n", "\n", "fc2_var_weight_prior", "=", "pyro", ".", "distributions", ".", "Normal", "(", "loc", "=", "torch", ".", "zeros_like", "(", "det_net", ".", "fc2_var", ".", "weight", ")", ",", "scale", "=", "torch", ".", "ones_like", "(", "det_net", ".", "fc2_var", ".", "weight", ")", ")", "\n", "fc2_var_bias_prior", "=", "pyro", ".", "distributions", ".", "Normal", "(", "loc", "=", "torch", ".", "zeros_like", "(", "det_net", ".", "fc2_var", ".", "bias", ")", ",", "scale", "=", "torch", ".", "ones_like", "(", "det_net", ".", "fc2_var", ".", "bias", ")", ")", "\n", "\n", "fc3_var_weight_prior", "=", "pyro", ".", "distributions", ".", "Normal", "(", "loc", "=", "torch", ".", "zeros_like", "(", "det_net", ".", "fc3_var", ".", "weight", ")", ",", "scale", "=", "torch", ".", "ones_like", "(", "det_net", ".", "fc3_var", ".", "weight", ")", ")", "\n", "fc3_var_bias_prior", "=", "pyro", ".", "distributions", ".", "Normal", "(", "loc", "=", "torch", ".", "zeros_like", "(", "det_net", ".", "fc3_var", ".", "bias", ")", ",", "scale", "=", "torch", ".", "ones_like", "(", "det_net", ".", "fc3_var", ".", "bias", ")", ")", "\n", "\n", "priors", "=", "{", "\"fc1_mean.weight\"", ":", "fc1_mean_weight_prior", ",", "\"fc1_mean.bias\"", ":", "fc1_mean_bias_prior", ",", "\n", "\"fc2_mean.weight\"", ":", "fc2_mean_weight_prior", ",", "\"fc2_mean.bias\"", ":", "fc2_mean_bias_prior", ",", "\n", "\"fc3_mean.weight\"", ":", "fc3_mean_weight_prior", ",", "\"fc3_mean.bias\"", ":", "fc3_mean_bias_prior", ",", "\n", "\"fc1_var.weight\"", ":", "fc1_var_weight_prior", ",", "\"fc1_var.bias\"", ":", "fc1_var_bias_prior", ",", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.HMC.model_pytorch.ToyNet.__init__": [[13, 27], ["torch.Module.__init__", "model_pytorch.ToyNet.create_model_dirs", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.create_model_dirs"], ["    ", "def", "__init__", "(", "self", ",", "model_id", ",", "project_dir", ")", ":", "\n", "        ", "super", "(", "ToyNet", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "model_id", "=", "model_id", "\n", "self", ".", "project_dir", "=", "project_dir", "\n", "self", ".", "create_model_dirs", "(", ")", "\n", "\n", "input_dim", "=", "1", "\n", "hidden_dim", "=", "10", "\n", "output_dim", "=", "1", "\n", "\n", "self", ".", "fc1_mean", "=", "nn", ".", "Linear", "(", "input_dim", ",", "hidden_dim", ")", "\n", "self", ".", "fc2_mean", "=", "nn", ".", "Linear", "(", "hidden_dim", ",", "hidden_dim", ")", "\n", "self", ".", "fc3_mean", "=", "nn", ".", "Linear", "(", "hidden_dim", ",", "output_dim", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.HMC.model_pytorch.ToyNet.forward": [[28, 36], ["torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "model_pytorch.ToyNet.fc3", "model_pytorch.ToyNet.fc1", "model_pytorch.ToyNet.fc2"], "methods", ["None"], ["self", ".", "fc1_var", "=", "nn", ".", "Linear", "(", "input_dim", ",", "hidden_dim", ")", "\n", "self", ".", "fc2_var", "=", "nn", ".", "Linear", "(", "hidden_dim", ",", "hidden_dim", ")", "\n", "self", ".", "fc3_var", "=", "nn", ".", "Linear", "(", "hidden_dim", ",", "output_dim", ")", "\n", "\n", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "# (x has shape (batch_size, input_dim))", "\n", "\n", "        ", "mean", "=", "F", ".", "relu", "(", "self", ".", "fc1_mean", "(", "x", ")", ")", "# (shape: (batch_size, hidden_dim))", "\n", "mean", "=", "F", ".", "relu", "(", "self", ".", "fc2_mean", "(", "mean", ")", ")", "# (shape: (batch_size, hidden_dim))", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.HMC.model_pytorch.ToyNet.create_model_dirs": [[37, 46], ["os.path.exists", "os.makedirs", "os.path.exists", "os.makedirs", "os.makedirs"], "methods", ["None"], ["mean", "=", "self", ".", "fc3_mean", "(", "mean", ")", "# (shape: batch_size, output_dim))", "\n", "\n", "var", "=", "F", ".", "relu", "(", "self", ".", "fc1_var", "(", "x", ")", ")", "# (shape: (batch_size, hidden_dim))", "\n", "var", "=", "F", ".", "relu", "(", "self", ".", "fc2_var", "(", "var", ")", ")", "# (shape: (batch_size, hidden_dim))", "\n", "var", "=", "self", ".", "fc3_var", "(", "var", ")", "# (shape: batch_size, output_dim))", "\n", "\n", "return", "(", "mean", ",", "var", ")", "\n", "\n", "", "def", "create_model_dirs", "(", "self", ")", ":", "\n", "        ", "self", ".", "logs_dir", "=", "self", ".", "project_dir", "+", "\"/training_logs\"", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.HMC.datasets.ToyDataset.__init__": [[18, 62], ["range", "numpy.array", "numpy.zeros", "numpy.array", "numpy.array", "print", "print", "matplotlib.figure", "matplotlib.figure", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.xlim", "matplotlib.xlim", "matplotlib.ylim", "matplotlib.ylim", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "range", "len", "open", "pickle.load", "open", "pickle.load", "datasets.ToyDataset.examples.append", "x_1_train.append", "x_2_train.append", "numpy.array.append", "len"], "methods", ["None"], ["return", "image", ",", "label", "\n", "\n", "", "def", "id2trainId", "(", "label", ",", "id_to_trainid", ")", ":", "\n", "    ", "label_copy", "=", "label", ".", "copy", "(", ")", "\n", "for", "k", ",", "v", "in", "id_to_trainid", ".", "items", "(", ")", ":", "\n", "        ", "label_copy", "[", "label", "==", "k", "]", "=", "v", "\n", "", "return", "label_copy", "\n", "\n", "################################################################################", "\n", "# Cityscapes", "\n", "################################################################################", "\n", "", "class", "DatasetCityscapesAugmentation", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetCityscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n", "\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.HMC.datasets.ToyDataset.__getitem__": [[63, 70], ["None"], "methods", ["None"], ["        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.HMC.datasets.ToyDataset.__len__": [[71, 73], ["None"], "methods", ["None"], ["\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.HMC.datasets.ToyDatasetEval.__init__": [[75, 86], ["numpy.linspace", "range", "len", "datasets.ToyDatasetEval.examples.append"], "methods", ["None"], ["image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n", "\n", "mean", "=", "(", "102.9801", ",", "115.9465", ",", "122.7717", ")", "\n", "image", "=", "image", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", "\n", "image", "-=", "mean", "\n", "\n", "img_h", ",", "img_w", "=", "label", ".", "shape", "\n", "pad_h", "=", "max", "(", "self", ".", "crop_h", "-", "img_h", ",", "0", ")", "\n", "pad_w", "=", "max", "(", "self", ".", "crop_w", "-", "img_w", ",", "0", ")", "\n", "if", "pad_h", ">", "0", "or", "pad_w", ">", "0", ":", "\n", "            ", "img_pad", "=", "cv2", ".", "copyMakeBorder", "(", "image", ",", "0", ",", "pad_h", ",", "0", ",", "\n", "pad_w", ",", "cv2", ".", "BORDER_CONSTANT", ",", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.HMC.datasets.ToyDatasetEval.__getitem__": [[87, 93], ["None"], "methods", ["None"], ["value", "=", "(", "0.0", ",", "0.0", ",", "0.0", ")", ")", "\n", "label_pad", "=", "cv2", ".", "copyMakeBorder", "(", "label", ",", "0", ",", "pad_h", ",", "0", ",", "\n", "pad_w", ",", "cv2", ".", "BORDER_CONSTANT", ",", "\n", "value", "=", "(", "self", ".", "ignore_label", ",", ")", ")", "\n", "", "else", ":", "\n", "            ", "img_pad", ",", "label_pad", "=", "image", ",", "label", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.HMC.datasets.ToyDatasetEval.__len__": [[94, 96], ["None"], "methods", ["None"], ["", "img_h", ",", "img_w", "=", "label_pad", ".", "shape", "\n", "h_off", "=", "random", ".", "randint", "(", "0", ",", "img_h", "-", "self", ".", "crop_h", ")", "\n", "w_off", "=", "random", ".", "randint", "(", "0", ",", "img_w", "-", "self", ".", "crop_w", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGDMOM.train.lr_poly": [[40, 42], ["float"], "function", ["None"], ["            ", "loss", "=", "closure", "(", ")", "\n", "\n", "", "for", "group", "in", "self", ".", "param_groups", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGDMOM.train.adjust_learning_rate": [[43, 47], ["train.lr_poly"], "function", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.train.lr_poly"], ["            ", "weight_decay", "=", "group", "[", "'weight_decay'", "]", "\n", "momentum", "=", "group", "[", "'momentum'", "]", "\n", "dampening", "=", "group", "[", "'dampening'", "]", "\n", "nesterov", "=", "group", "[", "'nesterov'", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGDMOM.model.ToyNet.__init__": [[13, 27], ["torch.Module.__init__", "model.ToyNet.create_model_dirs", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.create_model_dirs"], ["BASE_DIR", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "sys", ".", "path", ".", "append", "(", "BASE_DIR", ")", "\n", "from", "resnet_block", "import", "conv3x3", ",", "Bottleneck", "\n", "from", "aspp", "import", "ASPP", "\n", "\n", "sys", ".", "path", ".", "append", "(", "os", ".", "path", ".", "join", "(", "BASE_DIR", ",", "'../inplace_abn'", ")", ")", "\n", "from", "bn", "import", "InPlaceABNSync", "\n", "BatchNorm2d", "=", "functools", ".", "partial", "(", "InPlaceABNSync", ",", "activation", "=", "'none'", ")", "\n", "\n", "class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGDMOM.model.ToyNet.forward": [[28, 37], ["torch.relu", "torch.relu", "torch.relu", "torch.dropout", "torch.dropout", "torch.dropout", "torch.relu", "torch.relu", "torch.relu", "model.ToyNet.fc3", "model.ToyNet.fc1", "model.ToyNet.fc2"], "methods", ["None"], ["self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGDMOM.model.ToyNet.create_model_dirs": [[38, 47], ["os.path.exists", "os.makedirs", "os.path.exists", "os.makedirs", "os.makedirs"], "methods", ["None"], ["\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGDMOM.datasets.ToyDataset.__init__": [[18, 62], ["range", "numpy.array", "numpy.zeros", "numpy.array", "numpy.array", "print", "print", "matplotlib.figure", "matplotlib.figure", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.xlim", "matplotlib.xlim", "matplotlib.ylim", "matplotlib.ylim", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "range", "len", "open", "pickle.load", "open", "pickle.load", "datasets.ToyDataset.examples.append", "x_1_train.append", "x_2_train.append", "numpy.array.append", "len"], "methods", ["None"], ["return", "image", ",", "label", "\n", "\n", "", "def", "id2trainId", "(", "label", ",", "id_to_trainid", ")", ":", "\n", "    ", "label_copy", "=", "label", ".", "copy", "(", ")", "\n", "for", "k", ",", "v", "in", "id_to_trainid", ".", "items", "(", ")", ":", "\n", "        ", "label_copy", "[", "label", "==", "k", "]", "=", "v", "\n", "", "return", "label_copy", "\n", "\n", "################################################################################", "\n", "# Cityscapes", "\n", "################################################################################", "\n", "", "class", "DatasetCityscapesAugmentation", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetCityscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n", "\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGDMOM.datasets.ToyDataset.__getitem__": [[63, 70], ["None"], "methods", ["None"], ["        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGDMOM.datasets.ToyDataset.__len__": [[71, 73], ["None"], "methods", ["None"], ["\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGDMOM.datasets.ToyDatasetEval.__init__": [[54, 65], ["numpy.linspace", "range", "len", "datasets.ToyDatasetEval.examples.append"], "methods", ["None"], ["\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGDMOM.datasets.ToyDatasetEval.__getitem__": [[66, 72], ["None"], "methods", ["None"], ["        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-02-SGDMOM.datasets.ToyDatasetEval.__len__": [[73, 75], ["None"], "methods", ["None"], ["name", "=", "datafiles", "[", "\"name\"", "]", "\n", "image", ",", "label", "=", "generate_scale_label", "(", "image", ",", "label", ")", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam-Fixed.model.ToyNet.__init__": [[13, 31], ["torch.Module.__init__", "model.ToyNet.create_model_dirs", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.create_model_dirs"], ["BASE_DIR", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "sys", ".", "path", ".", "append", "(", "BASE_DIR", ")", "\n", "from", "resnet_block", "import", "conv3x3", ",", "Bottleneck", "\n", "from", "aspp", "import", "ASPP", "\n", "\n", "sys", ".", "path", ".", "append", "(", "os", ".", "path", ".", "join", "(", "BASE_DIR", ",", "'../inplace_abn'", ")", ")", "\n", "from", "bn", "import", "InPlaceABNSync", "\n", "BatchNorm2d", "=", "functools", ".", "partial", "(", "InPlaceABNSync", ",", "activation", "=", "'none'", ")", "\n", "\n", "class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam-Fixed.model.ToyNet.forward": [[32, 44], ["torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "model.ToyNet.fc3_mean", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "model.ToyNet.fc3_var", "model.ToyNet.fc1_mean", "model.ToyNet.fc2_mean", "model.ToyNet.fc1_var", "model.ToyNet.fc2_var"], "methods", ["None"], ["self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam-Fixed.model.ToyNet.create_model_dirs": [[45, 54], ["os.path.exists", "os.makedirs", "os.path.exists", "os.makedirs", "os.makedirs"], "methods", ["None"], ["\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n", "\n", "", "def", "_make_layer", "(", "self", ",", "block", ",", "planes", ",", "blocks", ",", "stride", "=", "1", ",", "dilation", "=", "1", ",", "multi_grid", "=", "1", ")", ":", "\n", "        ", "downsample", "=", "None", "\n", "\n", "if", "stride", "!=", "1", "or", "self", ".", "inplanes", "!=", "planes", "*", "block", ".", "expansion", ":", "\n", "            ", "downsample", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "self", ".", "inplanes", ",", "planes", "*", "block", ".", "expansion", ",", "kernel_size", "=", "1", ",", "stride", "=", "stride", ",", "bias", "=", "False", ")", ",", "\n", "BatchNorm2d", "(", "planes", "*", "block", ".", "expansion", ",", "affine", "=", "True", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam-Fixed.datasets.ToyDataset.__init__": [[18, 41], ["matplotlib.figure", "matplotlib.figure", "matplotlib.plot", "matplotlib.plot", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "range", "len", "open", "pickle.load", "open", "pickle.load", "datasets.ToyDataset.examples.append"], "methods", ["None"], ["return", "image", ",", "label", "\n", "\n", "", "def", "id2trainId", "(", "label", ",", "id_to_trainid", ")", ":", "\n", "    ", "label_copy", "=", "label", ".", "copy", "(", ")", "\n", "for", "k", ",", "v", "in", "id_to_trainid", ".", "items", "(", ")", ":", "\n", "        ", "label_copy", "[", "label", "==", "k", "]", "=", "v", "\n", "", "return", "label_copy", "\n", "\n", "################################################################################", "\n", "# Cityscapes", "\n", "################################################################################", "\n", "", "class", "DatasetCityscapesAugmentation", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetCityscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam-Fixed.datasets.ToyDataset.__getitem__": [[42, 49], ["None"], "methods", ["None"], ["self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam-Fixed.datasets.ToyDataset.__len__": [[50, 52], ["None"], "methods", ["None"], ["\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam-Fixed.datasets.ToyDatasetEval.__init__": [[54, 65], ["numpy.linspace", "range", "len", "datasets.ToyDatasetEval.examples.append"], "methods", ["None"], ["\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam-Fixed.datasets.ToyDatasetEval.__getitem__": [[66, 72], ["None"], "methods", ["None"], ["        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-Adam-Fixed.datasets.ToyDatasetEval.__len__": [[73, 75], ["None"], "methods", ["None"], ["name", "=", "datafiles", "[", "\"name\"", "]", "\n", "image", ",", "label", "=", "generate_scale_label", "(", "image", ",", "label", ")", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.train.lr_poly": [[30, 32], ["float"], "function", ["None"], ["            ", "group", ".", "setdefault", "(", "'nesterov'", ",", "False", ")", "\n", "\n", "", "", "def", "step", "(", "self", ",", "closure", "=", "None", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.train.adjust_learning_rate": [[33, 37], ["train.lr_poly"], "function", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.train.lr_poly"], ["        ", "\"\"\"Performs a single optimization step.\n        Arguments:\n            closure (callable, optional): A closure that reevaluates the model\n                and returns the loss.\n        \"\"\"", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.model.ToyNet.__init__": [[13, 27], ["torch.Module.__init__", "model.ToyNet.create_model_dirs", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.create_model_dirs"], ["BASE_DIR", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "sys", ".", "path", ".", "append", "(", "BASE_DIR", ")", "\n", "from", "resnet_block", "import", "conv3x3", ",", "Bottleneck", "\n", "from", "aspp", "import", "ASPP", "\n", "\n", "sys", ".", "path", ".", "append", "(", "os", ".", "path", ".", "join", "(", "BASE_DIR", ",", "'../inplace_abn'", ")", ")", "\n", "from", "bn", "import", "InPlaceABNSync", "\n", "BatchNorm2d", "=", "functools", ".", "partial", "(", "InPlaceABNSync", ",", "activation", "=", "'none'", ")", "\n", "\n", "class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.model.ToyNet.forward": [[28, 36], ["torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "model.ToyNet.fc3", "model.ToyNet.fc1", "model.ToyNet.fc2"], "methods", ["None"], ["self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.model.ToyNet.create_model_dirs": [[37, 46], ["os.path.exists", "os.makedirs", "os.path.exists", "os.makedirs", "os.makedirs"], "methods", ["None"], ["self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.datasets.ToyDataset.__init__": [[18, 62], ["range", "numpy.array", "numpy.zeros", "numpy.array", "numpy.array", "print", "print", "matplotlib.figure", "matplotlib.figure", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.xlim", "matplotlib.xlim", "matplotlib.ylim", "matplotlib.ylim", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "range", "len", "open", "pickle.load", "open", "pickle.load", "datasets.ToyDataset.examples.append", "x_1_train.append", "x_2_train.append", "numpy.array.append", "len"], "methods", ["None"], ["return", "image", ",", "label", "\n", "\n", "", "def", "id2trainId", "(", "label", ",", "id_to_trainid", ")", ":", "\n", "    ", "label_copy", "=", "label", ".", "copy", "(", ")", "\n", "for", "k", ",", "v", "in", "id_to_trainid", ".", "items", "(", ")", ":", "\n", "        ", "label_copy", "[", "label", "==", "k", "]", "=", "v", "\n", "", "return", "label_copy", "\n", "\n", "################################################################################", "\n", "# Cityscapes", "\n", "################################################################################", "\n", "", "class", "DatasetCityscapesAugmentation", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetCityscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n", "\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.datasets.ToyDataset.__getitem__": [[63, 70], ["None"], "methods", ["None"], ["        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.datasets.ToyDataset.__len__": [[71, 73], ["None"], "methods", ["None"], ["\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.datasets.ToyDatasetEval.__init__": [[54, 65], ["numpy.linspace", "range", "len", "datasets.ToyDatasetEval.examples.append"], "methods", ["None"], ["\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.datasets.ToyDatasetEval.__getitem__": [[66, 72], ["None"], "methods", ["None"], ["        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-MAP-SGD.datasets.ToyDatasetEval.__len__": [[73, 75], ["None"], "methods", ["None"], ["name", "=", "datafiles", "[", "\"name\"", "]", "\n", "image", ",", "label", "=", "generate_scale_label", "(", "image", ",", "label", ")", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-01-Adam.model.ToyNet.__init__": [[13, 27], ["torch.Module.__init__", "model.ToyNet.create_model_dirs", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.create_model_dirs"], ["BASE_DIR", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "sys", ".", "path", ".", "append", "(", "BASE_DIR", ")", "\n", "from", "resnet_block", "import", "conv3x3", ",", "Bottleneck", "\n", "from", "aspp", "import", "ASPP", "\n", "\n", "sys", ".", "path", ".", "append", "(", "os", ".", "path", ".", "join", "(", "BASE_DIR", ",", "'../inplace_abn'", ")", ")", "\n", "from", "bn", "import", "InPlaceABNSync", "\n", "BatchNorm2d", "=", "functools", ".", "partial", "(", "InPlaceABNSync", ",", "activation", "=", "'none'", ")", "\n", "\n", "class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-01-Adam.model.ToyNet.forward": [[28, 37], ["torch.relu", "torch.relu", "torch.relu", "torch.dropout", "torch.dropout", "torch.dropout", "torch.relu", "torch.relu", "torch.relu", "model.ToyNet.fc3", "model.ToyNet.fc1", "model.ToyNet.fc2"], "methods", ["None"], ["self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-01-Adam.model.ToyNet.create_model_dirs": [[38, 47], ["os.path.exists", "os.makedirs", "os.path.exists", "os.makedirs", "os.makedirs"], "methods", ["None"], ["\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-01-Adam.datasets.ToyDataset.__init__": [[18, 62], ["range", "numpy.array", "numpy.zeros", "numpy.array", "numpy.array", "print", "print", "matplotlib.figure", "matplotlib.figure", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.xlim", "matplotlib.xlim", "matplotlib.ylim", "matplotlib.ylim", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "range", "len", "open", "pickle.load", "open", "pickle.load", "datasets.ToyDataset.examples.append", "x_1_train.append", "x_2_train.append", "numpy.array.append", "len"], "methods", ["None"], ["return", "image", ",", "label", "\n", "\n", "", "def", "id2trainId", "(", "label", ",", "id_to_trainid", ")", ":", "\n", "    ", "label_copy", "=", "label", ".", "copy", "(", ")", "\n", "for", "k", ",", "v", "in", "id_to_trainid", ".", "items", "(", ")", ":", "\n", "        ", "label_copy", "[", "label", "==", "k", "]", "=", "v", "\n", "", "return", "label_copy", "\n", "\n", "################################################################################", "\n", "# Cityscapes", "\n", "################################################################################", "\n", "", "class", "DatasetCityscapesAugmentation", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetCityscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n", "\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-01-Adam.datasets.ToyDataset.__getitem__": [[63, 70], ["None"], "methods", ["None"], ["        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.MC-Dropout-MAP-01-Adam.datasets.ToyDataset.__len__": [[71, 73], ["None"], "methods", ["None"], ["\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.__init__": [[13, 27], ["torch.Module.__init__", "model.ToyNet.create_model_dirs", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.create_model_dirs"], ["BASE_DIR", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "sys", ".", "path", ".", "append", "(", "BASE_DIR", ")", "\n", "from", "resnet_block", "import", "conv3x3", ",", "Bottleneck", "\n", "from", "aspp", "import", "ASPP", "\n", "\n", "sys", ".", "path", ".", "append", "(", "os", ".", "path", ".", "join", "(", "BASE_DIR", ",", "'../inplace_abn'", ")", ")", "\n", "from", "bn", "import", "InPlaceABNSync", "\n", "BatchNorm2d", "=", "functools", ".", "partial", "(", "InPlaceABNSync", ",", "activation", "=", "'none'", ")", "\n", "\n", "class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.forward": [[28, 36], ["torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "model.ToyNet.fc3", "model.ToyNet.fc1", "model.ToyNet.fc2"], "methods", ["None"], ["self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.model.ToyNet.create_model_dirs": [[37, 46], ["os.path.exists", "os.makedirs", "os.path.exists", "os.makedirs", "os.makedirs"], "methods", ["None"], ["self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.datasets.ToyDataset.__init__": [[18, 62], ["range", "numpy.array", "numpy.zeros", "numpy.array", "numpy.array", "print", "print", "matplotlib.figure", "matplotlib.figure", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.plot", "matplotlib.ylabel", "matplotlib.ylabel", "matplotlib.xlabel", "matplotlib.xlabel", "matplotlib.xlim", "matplotlib.xlim", "matplotlib.ylim", "matplotlib.ylim", "matplotlib.savefig", "matplotlib.savefig", "matplotlib.close", "matplotlib.close", "range", "len", "open", "pickle.load", "open", "pickle.load", "datasets.ToyDataset.examples.append", "x_1_train.append", "x_2_train.append", "numpy.array.append", "len"], "methods", ["None"], ["return", "image", ",", "label", "\n", "\n", "", "def", "id2trainId", "(", "label", ",", "id_to_trainid", ")", ":", "\n", "    ", "label_copy", "=", "label", ".", "copy", "(", ")", "\n", "for", "k", ",", "v", "in", "id_to_trainid", ".", "items", "(", ")", ":", "\n", "        ", "label_copy", "[", "label", "==", "k", "]", "=", "v", "\n", "", "return", "label_copy", "\n", "\n", "################################################################################", "\n", "# Cityscapes", "\n", "################################################################################", "\n", "", "class", "DatasetCityscapesAugmentation", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetCityscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n", "\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.datasets.ToyDataset.__getitem__": [[63, 70], ["None"], "methods", ["None"], ["        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.Ensemble-Adam-Fixed.datasets.ToyDataset.__len__": [[71, 73], ["None"], "methods", ["None"], ["\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model.DepthCompletionNet.__init__": [[55, 89], ["torch.Module.__init__", "print", "model.conv_bn_relu", "model.conv_bn_relu", "model.conv_bn_relu", "model.convt_bn_relu", "model.convt_bn_relu", "model.convt_bn_relu", "model.convt_bn_relu", "model.convt_bn_relu", "model.conv_bn_relu", "model.conv_bn_relu", "pretrained_model.apply"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.conv_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.conv_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.conv_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.convt_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.convt_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.convt_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.convt_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.convt_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.conv_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.conv_bn_relu"], ["", "layers", "=", "[", "]", "\n", "generate_multi_grid", "=", "lambda", "index", ",", "grids", ":", "grids", "[", "index", "%", "len", "(", "grids", ")", "]", "if", "isinstance", "(", "grids", ",", "tuple", ")", "else", "1", "\n", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "stride", ",", "dilation", "=", "dilation", ",", "downsample", "=", "downsample", ",", "multi_grid", "=", "generate_multi_grid", "(", "0", ",", "multi_grid", ")", ")", ")", "\n", "self", ".", "inplanes", "=", "planes", "*", "block", ".", "expansion", "\n", "\n", "for", "i", "in", "range", "(", "1", ",", "blocks", ")", ":", "\n", "            ", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "dilation", "=", "dilation", ",", "multi_grid", "=", "generate_multi_grid", "(", "i", ",", "multi_grid", ")", ")", ")", "\n", "\n", "", "return", "nn", ".", "Sequential", "(", "*", "layers", ")", "\n", "\n", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "# (x has shape: (batch_size, 3, h, w))", "\n", "\n", "        ", "x", "=", "self", ".", "relu1", "(", "self", ".", "bn1", "(", "self", ".", "conv1", "(", "x", ")", ")", ")", "# (shape: (batch_size, 64, h/2, w/2))", "\n", "x", "=", "self", ".", "relu2", "(", "self", ".", "bn2", "(", "self", ".", "conv2", "(", "x", ")", ")", ")", "# (shape: (batch_size, 64, h/2, w/2))", "\n", "x", "=", "self", ".", "relu3", "(", "self", ".", "bn3", "(", "self", ".", "conv3", "(", "x", ")", ")", ")", "# (shape: (batch_size, 128, h/2, w/2))", "\n", "x", "=", "self", ".", "maxpool", "(", "x", ")", "# (shape: (batch_size, 128, h/4, w/4))", "\n", "x", "=", "self", ".", "layer1", "(", "x", ")", "# (shape: (batch_size, 256, h/4, w/4))", "\n", "x", "=", "self", ".", "layer2", "(", "x", ")", "# (shape: (batch_size, 512, h/8, w/8))", "\n", "x", "=", "self", ".", "layer3", "(", "x", ")", "# (shape: (batch_size, 1024, h/8, w/8))", "\n", "x", "=", "self", ".", "layer4", "(", "x", ")", "# (shape: (batch_size, 2048, h/8, w/8))", "\n", "x", "=", "self", ".", "aspp", "(", "x", ")", "# (shape: (batch_size, 512, h/8, h/8))", "\n", "x", "=", "self", ".", "cls", "(", "x", ")", "# (shape: (batch_size, num_classes, h/8, w/8))", "\n", "\n", "return", "x", "\n", "\n", "", "", "def", "get_model", "(", "num_classes", "=", "19", ")", ":", "\n", "    ", "model", "=", "ResNet", "(", "Bottleneck", ",", "[", "3", ",", "4", ",", "23", ",", "3", "]", ",", "num_classes", ")", "\n", "return", "model", "\n", "", ""]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model.DepthCompletionNet.forward": [[90, 130], ["torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "model.DepthCompletionNet.conv1_d", "model.DepthCompletionNet.conv1_img", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "model.DepthCompletionNet.conv2", "model.DepthCompletionNet.conv3", "model.DepthCompletionNet.conv4", "model.DepthCompletionNet.conv5", "model.DepthCompletionNet.conv6", "model.DepthCompletionNet.convt5", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "model.DepthCompletionNet.convt4", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "model.DepthCompletionNet.convt3", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "model.DepthCompletionNet.convt2", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "model.DepthCompletionNet.convt1", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "model.DepthCompletionNet.convtf_mean", "model.DepthCompletionNet.convtf_var"], "methods", ["None"], []], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model.init_weights": [[9, 21], ["isinstance", "isinstance", "m.weight.data.normal_", "isinstance", "m.bias.data.zero_", "m.weight.data.normal_", "isinstance", "m.bias.data.zero_", "m.weight.data.fill_", "m.bias.data.zero_"], "function", ["None"], ["import", "numpy", "as", "np", "\n", "from", "torch", ".", "autograd", "import", "Variable", "\n", "import", "functools", "\n", "\n", "BASE_DIR", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "sys", ".", "path", ".", "append", "(", "BASE_DIR", ")", "\n", "from", "resnet_block", "import", "conv3x3", ",", "Bottleneck", "\n", "from", "aspp", "import", "ASPP", "\n", "\n", "sys", ".", "path", ".", "append", "(", "os", ".", "path", ".", "join", "(", "BASE_DIR", ",", "'../inplace_abn'", ")", ")", "\n", "from", "bn", "import", "InPlaceABNSync", "\n", "BatchNorm2d", "=", "functools", ".", "partial", "(", "InPlaceABNSync", ",", "activation", "=", "'none'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model.conv_bn_relu": [[22, 37], ["nn.Sequential.append", "torch.Sequential", "nn.Sequential.modules", "torch.Conv2d", "nn.Sequential.append", "nn.Sequential.append", "model.init_weights", "torch.BatchNorm2d", "torch.LeakyReLU"], "function", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.init_weights"], ["class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model.convt_bn_relu": [[38, 53], ["nn.Sequential.append", "torch.Sequential", "nn.Sequential.modules", "torch.ConvTranspose2d", "nn.Sequential.append", "nn.Sequential.append", "model.init_weights", "torch.BatchNorm2d", "torch.LeakyReLU"], "function", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.init_weights"], ["\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n", "\n", "", "def", "_make_layer", "(", "self", ",", "block", ",", "planes", ",", "blocks", ",", "stride", "=", "1", ",", "dilation", "=", "1", ",", "multi_grid", "=", "1", ")", ":", "\n", "        ", "downsample", "=", "None", "\n", "\n", "if", "stride", "!=", "1", "or", "self", ".", "inplanes", "!=", "planes", "*", "block", ".", "expansion", ":", "\n", "            ", "downsample", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "self", ".", "inplanes", ",", "planes", "*", "block", ".", "expansion", ",", "kernel_size", "=", "1", ",", "stride", "=", "stride", ",", "bias", "=", "False", ")", ",", "\n", "BatchNorm2d", "(", "planes", "*", "block", ".", "expansion", ",", "affine", "=", "True", ")", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.DepthCompletionNet.__init__": [[55, 89], ["torch.Module.__init__", "print", "model_mcdropout.conv_bn_relu", "model_mcdropout.conv_bn_relu", "model_mcdropout.conv_bn_relu", "model_mcdropout.convt_bn_relu", "model_mcdropout.convt_bn_relu", "model_mcdropout.convt_bn_relu", "model_mcdropout.convt_bn_relu", "model_mcdropout.convt_bn_relu", "model_mcdropout.conv_bn_relu", "model_mcdropout.conv_bn_relu", "pretrained_model.apply"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.conv_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.conv_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.conv_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.convt_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.convt_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.convt_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.convt_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.convt_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.conv_bn_relu", "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.conv_bn_relu"], ["", "layers", "=", "[", "]", "\n", "generate_multi_grid", "=", "lambda", "index", ",", "grids", ":", "grids", "[", "index", "%", "len", "(", "grids", ")", "]", "if", "isinstance", "(", "grids", ",", "tuple", ")", "else", "1", "\n", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "stride", ",", "dilation", "=", "dilation", ",", "downsample", "=", "downsample", ",", "multi_grid", "=", "generate_multi_grid", "(", "0", ",", "multi_grid", ")", ")", ")", "\n", "self", ".", "inplanes", "=", "planes", "*", "block", ".", "expansion", "\n", "\n", "for", "i", "in", "range", "(", "1", ",", "blocks", ")", ":", "\n", "            ", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "dilation", "=", "dilation", ",", "multi_grid", "=", "generate_multi_grid", "(", "i", ",", "multi_grid", ")", ")", ")", "\n", "\n", "", "return", "nn", ".", "Sequential", "(", "*", "layers", ")", "\n", "\n", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "# (x has shape: (batch_size, 3, h, w))", "\n", "\n", "        ", "x", "=", "self", ".", "relu1", "(", "self", ".", "bn1", "(", "self", ".", "conv1", "(", "x", ")", ")", ")", "# (shape: (batch_size, 64, h/2, w/2))", "\n", "x", "=", "self", ".", "relu2", "(", "self", ".", "bn2", "(", "self", ".", "conv2", "(", "x", ")", ")", ")", "# (shape: (batch_size, 64, h/2, w/2))", "\n", "x", "=", "self", ".", "relu3", "(", "self", ".", "bn3", "(", "self", ".", "conv3", "(", "x", ")", ")", ")", "# (shape: (batch_size, 128, h/2, w/2))", "\n", "x", "=", "self", ".", "maxpool", "(", "x", ")", "# (shape: (batch_size, 128, h/4, w/4))", "\n", "x", "=", "self", ".", "layer1", "(", "x", ")", "# (shape: (batch_size, 256, h/4, w/4))", "\n", "x", "=", "F", ".", "dropout", "(", "x", ",", "p", "=", "0.5", ",", "training", "=", "True", ")", "# (shape: (batch_size, 256, h/4, w/4))", "\n", "x", "=", "self", ".", "layer2", "(", "x", ")", "# (shape: (batch_size, 512, h/8, w/8))", "\n", "x", "=", "F", ".", "dropout", "(", "x", ",", "p", "=", "0.5", ",", "training", "=", "True", ")", "# (shape: (batch_size, 512, h/8, w/8))", "\n", "x", "=", "self", ".", "layer3", "(", "x", ")", "# (shape: (batch_size, 1024, h/8, w/8))", "\n", "x", "=", "F", ".", "dropout", "(", "x", ",", "p", "=", "0.5", ",", "training", "=", "True", ")", "# (shape: (batch_size, 1024, h/8, w/8))", "\n", "x", "=", "self", ".", "layer4", "(", "x", ")", "# (shape: (batch_size, 2048, h/8, w/8))", "\n", "x", "=", "F", ".", "dropout", "(", "x", ",", "p", "=", "0.5", ",", "training", "=", "True", ")", "# (shape: (batch_size, 2048, h/8, w/8))", "\n", "x", "=", "self", ".", "aspp", "(", "x", ")", "# (shape: (batch_size, 512, h/8, h/8))", "\n", "x", "=", "self", ".", "cls", "(", "x", ")", "# (shape: (batch_size, num_classes, h/8, w/8))", "\n", "\n", "return", "x", "\n", "\n", "", "", "def", "get_model", "(", "num_classes", "=", "19", ")", ":", "\n", "    ", "model", "=", "ResNet", "(", "Bottleneck", ",", "[", "3", ",", "4", ",", "23", ",", "3", "]", ",", "num_classes", ")", "\n", "return", "model", "\n", "", ""]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.DepthCompletionNet.forward": [[90, 137], ["torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "model_mcdropout.DepthCompletionNet.conv1_d", "model_mcdropout.DepthCompletionNet.conv1_img", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "model_mcdropout.DepthCompletionNet.conv2", "model_mcdropout.DepthCompletionNet.conv3", "model_mcdropout.DepthCompletionNet.conv4", "torch.dropout", "torch.dropout", "torch.dropout", "model_mcdropout.DepthCompletionNet.conv5", "torch.dropout", "torch.dropout", "torch.dropout", "model_mcdropout.DepthCompletionNet.conv6", "torch.dropout", "torch.dropout", "torch.dropout", "model_mcdropout.DepthCompletionNet.convt5", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.dropout", "torch.dropout", "torch.dropout", "model_mcdropout.DepthCompletionNet.convt4", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.dropout", "torch.dropout", "torch.dropout", "model_mcdropout.DepthCompletionNet.convt3", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.dropout", "torch.dropout", "torch.dropout", "model_mcdropout.DepthCompletionNet.convt2", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.dropout", "torch.dropout", "torch.dropout", "model_mcdropout.DepthCompletionNet.convt1", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "model_mcdropout.DepthCompletionNet.convtf_mean", "model_mcdropout.DepthCompletionNet.convtf_var"], "methods", ["None"], []], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.init_weights": [[9, 21], ["isinstance", "isinstance", "m.weight.data.normal_", "isinstance", "m.bias.data.zero_", "m.weight.data.normal_", "isinstance", "m.bias.data.zero_", "m.weight.data.fill_", "m.bias.data.zero_"], "function", ["None"], ["import", "numpy", "as", "np", "\n", "from", "torch", ".", "autograd", "import", "Variable", "\n", "import", "functools", "\n", "\n", "BASE_DIR", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "sys", ".", "path", ".", "append", "(", "BASE_DIR", ")", "\n", "from", "resnet_block", "import", "conv3x3", ",", "Bottleneck", "\n", "from", "aspp", "import", "ASPP", "\n", "\n", "sys", ".", "path", ".", "append", "(", "os", ".", "path", ".", "join", "(", "BASE_DIR", ",", "'../inplace_abn'", ")", ")", "\n", "from", "bn", "import", "InPlaceABNSync", "\n", "BatchNorm2d", "=", "functools", ".", "partial", "(", "InPlaceABNSync", ",", "activation", "=", "'none'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.conv_bn_relu": [[22, 37], ["nn.Sequential.append", "torch.Sequential", "nn.Sequential.modules", "torch.Conv2d", "nn.Sequential.append", "nn.Sequential.append", "model_mcdropout.init_weights", "torch.BatchNorm2d", "torch.LeakyReLU"], "function", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.init_weights"], ["class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", ")", ":", "\n", "        ", "print", "(", "\"model_mcdropout.py\"", ")", "\n", "\n", "self", ".", "inplanes", "=", "128", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv1", "=", "conv3x3", "(", "3", ",", "64", ",", "stride", "=", "2", ")", "\n", "self", ".", "bn1", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "64", ",", "64", ")", "\n", "self", ".", "bn2", "=", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu2", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "conv3", "=", "conv3x3", "(", "64", ",", "128", ")", "\n", "self", ".", "bn3", "=", "BatchNorm2d", "(", "128", ")", "\n", "self", ".", "relu3", "=", "nn", ".", "ReLU", "(", "inplace", "=", "False", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "ceil_mode", "=", "True", ")", "# NOTE! (ceil_mode=True will do that x (batch_size, 128, h/4, w/4) e.g. has shape (batch_size, 128, 33, 33) instead of (batch_size, 128, 32, 32) if h == w == 256)", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.convt_bn_relu": [[38, 53], ["nn.Sequential.append", "torch.Sequential", "nn.Sequential.modules", "torch.ConvTranspose2d", "nn.Sequential.append", "nn.Sequential.append", "model_mcdropout.init_weights", "torch.BatchNorm2d", "torch.LeakyReLU"], "function", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.model_mcdropout.init_weights"], ["\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "1", ",", "dilation", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "1", ",", "dilation", "=", "4", ",", "multi_grid", "=", "(", "1", ",", "1", ",", "1", ")", ")", "\n", "\n", "self", ".", "aspp", "=", "ASPP", "(", ")", "\n", "\n", "self", ".", "cls", "=", "nn", ".", "Conv2d", "(", "512", ",", "num_classes", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", "\n", "\n", "", "def", "_make_layer", "(", "self", ",", "block", ",", "planes", ",", "blocks", ",", "stride", "=", "1", ",", "dilation", "=", "1", ",", "multi_grid", "=", "1", ")", ":", "\n", "        ", "downsample", "=", "None", "\n", "\n", "if", "stride", "!=", "1", "or", "self", ".", "inplanes", "!=", "planes", "*", "block", ".", "expansion", ":", "\n", "            ", "downsample", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "self", ".", "inplanes", ",", "planes", "*", "block", ".", "expansion", ",", "kernel_size", "=", "1", ",", "stride", "=", "stride", ",", "bias", "=", "False", ")", ",", "\n", "BatchNorm2d", "(", "planes", "*", "block", ".", "expansion", ",", "affine", "=", "True", ")", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.criterion.MaskedL2.__init__": [[8, 12], ["torch.Module.__init__", "print"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__"], ["class", "CriterionCrossEntropy", "(", "nn", ".", "Module", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "ignore_index", "=", "255", ")", ":", "\n", "        ", "super", "(", "CriterionCrossEntropy", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "ignore_index", "=", "ignore_index", "\n", "weight", "=", "torch", ".", "FloatTensor", "(", "[", "0.8373", ",", "0.918", ",", "0.866", ",", "1.0345", ",", "1.0166", ",", "0.9969", ",", "0.9754", ",", "1.0489", ",", "0.8786", ",", "1.0023", ",", "0.9539", ",", "0.9843", ",", "1.1116", ",", "0.9037", ",", "1.0865", ",", "1.0955", ",", "1.0865", ",", "1.1529", ",", "1.0507", "]", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.criterion.MaskedL2.forward": [[13, 27], ["torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.pow", "torch.pow", "torch.pow", "torch.pow"], "methods", ["None"], ["self", ".", "criterion", "=", "torch", ".", "nn", ".", "CrossEntropyLoss", "(", "weight", "=", "weight", ",", "ignore_index", "=", "ignore_index", ")", "\n", "\n", "", "def", "forward", "(", "self", ",", "preds", ",", "target", ")", ":", "\n", "        ", "h", ",", "w", "=", "target", ".", "size", "(", "1", ")", ",", "target", ".", "size", "(", "2", ")", "\n", "scale_pred", "=", "F", ".", "upsample", "(", "input", "=", "preds", ",", "size", "=", "(", "h", ",", "w", ")", ",", "mode", "=", "'bilinear'", ",", "align_corners", "=", "True", ")", "\n", "\n", "loss", "=", "self", ".", "criterion", "(", "scale_pred", ",", "target", ")", "\n", "\n", "return", "loss", "\n", "", "", ""]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.criterion.MaskedL2Gauss.__init__": [[29, 33], ["torch.Module.__init__", "print"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__"], []], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.criterion.MaskedL2Gauss.forward": [[34, 50], ["torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.pow", "torch.pow", "torch.pow", "torch.pow"], "methods", ["None"], []], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.criterion.RMSE.__init__": [[52, 54], ["torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__"], []], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.criterion.RMSE.forward": [[55, 73], ["torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.pow", "torch.pow", "torch.pow", "torch.pow"], "methods", ["None"], []], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.criterion.MAE.__init__": [[75, 77], ["torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__"], []], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.criterion.MAE.forward": [[78, 96], ["torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.abs", "torch.abs", "torch.abs", "torch.abs"], "methods", ["None"], []], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetKITTIAugmentation.__init__": [[15, 57], ["os.listdir", "print", "print", "os.listdir", "os.listdir", "datasets.DatasetKITTIAugmentation.examples.append", "datasets.DatasetKITTIAugmentation.examples.append", "len", "int", "len", "numpy.ceil", "float", "len"], "methods", ["None"], ["    ", "f_scale", "=", "0.5", "+", "random", ".", "randint", "(", "0", ",", "16", ")", "/", "10.0", "\n", "image", "=", "cv2", ".", "resize", "(", "image", ",", "None", ",", "fx", "=", "f_scale", ",", "fy", "=", "f_scale", ",", "interpolation", "=", "cv2", ".", "INTER_LINEAR", ")", "\n", "label", "=", "cv2", ".", "resize", "(", "label", ",", "None", ",", "fx", "=", "f_scale", ",", "fy", "=", "f_scale", ",", "interpolation", "=", "cv2", ".", "INTER_NEAREST", ")", "\n", "return", "image", ",", "label", "\n", "\n", "", "def", "id2trainId", "(", "label", ",", "id_to_trainid", ")", ":", "\n", "    ", "label_copy", "=", "label", ".", "copy", "(", ")", "\n", "for", "k", ",", "v", "in", "id_to_trainid", ".", "items", "(", ")", ":", "\n", "        ", "label_copy", "[", "label", "==", "k", "]", "=", "v", "\n", "", "return", "label_copy", "\n", "\n", "################################################################################", "\n", "# Cityscapes", "\n", "################################################################################", "\n", "", "class", "DatasetCityscapesAugmentation", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n", "                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetCityscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n", "\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetKITTIAugmentation.__len__": [[58, 60], ["len"], "methods", ["None"], ["14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetKITTIAugmentation.__getitem__": [[61, 191], ["cv2.imread", "cv2.imread", "cv2.imread", "numpy.random.randint", "random.randint", "random.randint", "cv2.flip.astype", "cv2.flip.astype", "cv2.cvtColor", "cv2.flip.astype", "cv2.flip", "cv2.flip", "cv2.flip", "cv2.flip.copy", "cv2.flip.copy", "cv2.flip.copy", "int", "int", "int", "int", "int", "int"], "methods", ["None"], ["\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n", "image", ",", "label", "=", "generate_scale_label", "(", "image", ",", "label", ")", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n", "\n", "mean", "=", "(", "102.9801", ",", "115.9465", ",", "122.7717", ")", "\n", "image", "=", "image", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", "\n", "image", "-=", "mean", "\n", "\n", "img_h", ",", "img_w", "=", "label", ".", "shape", "\n", "pad_h", "=", "max", "(", "self", ".", "crop_h", "-", "img_h", ",", "0", ")", "\n", "pad_w", "=", "max", "(", "self", ".", "crop_w", "-", "img_w", ",", "0", ")", "\n", "if", "pad_h", ">", "0", "or", "pad_w", ">", "0", ":", "\n", "            ", "img_pad", "=", "cv2", ".", "copyMakeBorder", "(", "image", ",", "0", ",", "pad_h", ",", "0", ",", "\n", "pad_w", ",", "cv2", ".", "BORDER_CONSTANT", ",", "\n", "value", "=", "(", "0.0", ",", "0.0", ",", "0.0", ")", ")", "\n", "label_pad", "=", "cv2", ".", "copyMakeBorder", "(", "label", ",", "0", ",", "pad_h", ",", "0", ",", "\n", "pad_w", ",", "cv2", ".", "BORDER_CONSTANT", ",", "\n", "value", "=", "(", "self", ".", "ignore_label", ",", ")", ")", "\n", "", "else", ":", "\n", "            ", "img_pad", ",", "label_pad", "=", "image", ",", "label", "\n", "\n", "", "img_h", ",", "img_w", "=", "label_pad", ".", "shape", "\n", "h_off", "=", "random", ".", "randint", "(", "0", ",", "img_h", "-", "self", ".", "crop_h", ")", "\n", "w_off", "=", "random", ".", "randint", "(", "0", ",", "img_w", "-", "self", ".", "crop_w", ")", "\n", "image", "=", "np", ".", "asarray", "(", "img_pad", "[", "h_off", ":", "h_off", "+", "self", ".", "crop_h", ",", "w_off", ":", "w_off", "+", "self", ".", "crop_w", "]", ",", "np", ".", "float32", ")", "\n", "label", "=", "np", ".", "asarray", "(", "label_pad", "[", "h_off", ":", "h_off", "+", "self", ".", "crop_h", ",", "w_off", ":", "w_off", "+", "self", ".", "crop_w", "]", ",", "np", ".", "float32", ")", "\n", "image", "=", "image", ".", "transpose", "(", "(", "2", ",", "0", ",", "1", ")", ")", "\n", "\n", "flip", "=", "np", ".", "random", ".", "choice", "(", "2", ")", "*", "2", "-", "1", "\n", "image", "=", "image", "[", ":", ",", ":", ",", ":", ":", "flip", "]", "\n", "label", "=", "label", "[", ":", ",", ":", ":", "flip", "]", "\n", "\n", "return", "image", ".", "copy", "(", ")", ",", "label", ".", "copy", "(", ")", ",", "np", ".", "array", "(", "size", ")", ",", "name", "\n", "\n", "", "", "class", "DatasetCityscapesEval", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "list_path", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "list_path", "=", "list_path", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "self", ".", "img_ids", "=", "[", "i_id", ".", "strip", "(", ")", ".", "split", "(", ")", "for", "i_id", "in", "open", "(", "list_path", ")", "]", "\n", "print", "(", "\"DatasetCityscapesEval - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "item", "in", "self", ".", "img_ids", ":", "\n", "            ", "image_path", ",", "label_path", "=", "item", "\n", "name", "=", "osp", ".", "splitext", "(", "osp", ".", "basename", "(", "label_path", ")", ")", "[", "0", "]", "\n", "img_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "image_path", ")", "\n", "label_file", "=", "osp", ".", "join", "(", "self", ".", "root", ",", "label_path", ")", "\n", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "img_file", ",", "\n", "\"label\"", ":", "label_file", ",", "\n", "\"name\"", ":", "name", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "datafiles", "[", "\"img\"", "]", ")", ":", "# (26 out of 25000 images are missing)", "\n", "            ", "return", "self", ".", "__getitem__", "(", "0", ")", "\n", "\n", "", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n", "\n", "mean", "=", "(", "102.9801", ",", "115.9465", ",", "122.7717", ")", "\n", "image", "=", "image", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", "\n", "image", "-=", "mean", "\n", "\n", "image", "=", "image", ".", "transpose", "(", "(", "2", ",", "0", ",", "1", ")", ")", "\n", "\n", "return", "image", ".", "copy", "(", ")", ",", "label", ".", "copy", "(", ")", ",", "np", ".", "array", "(", "size", ")", ",", "name", "\n", "\n", "", "", "class", "DatasetCityscapesEvalSeq", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "data_path", ",", "sequence", "=", "\"00\"", ")", ":", "\n", "        ", "self", ".", "data_path", "=", "data_path", "\n", "\n", "self", ".", "img_dir", "=", "self", ".", "data_path", "+", "\"/leftImg8bit/demoVideo/stuttgart_\"", "+", "sequence", "+", "\"/\"", "\n", "\n", "self", ".", "examples", "=", "[", "]", "\n", "\n", "file_names", "=", "os", ".", "listdir", "(", "self", ".", "img_dir", ")", "\n", "for", "file_name", "in", "file_names", ":", "\n", "            ", "img_id", "=", "file_name", ".", "split", "(", "\"_leftImg8bit.png\"", ")", "[", "0", "]", "\n", "\n", "img_path", "=", "self", ".", "img_dir", "+", "file_name", "\n", "\n", "example", "=", "{", "}", "\n", "example", "[", "\"img_path\"", "]", "=", "img_path", "\n", "example", "[", "\"img_id\"", "]", "=", "img_id", "\n", "self", ".", "examples", ".", "append", "(", "example", ")", "\n", "\n", "", "self", ".", "num_examples", "=", "len", "(", "self", ".", "examples", ")", "\n", "print", "(", "\"DatasetCityscapesEvalSeq - num examples: %d\"", "%", "self", ".", "num_examples", ")", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "examples", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "examples", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img_path\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"img_id\"", "]", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetKITTIVal.__init__": [[193, 224], ["os.listdir", "print", "img_id.split", "datasets.DatasetKITTIVal.examples.append", "len"], "methods", ["None"], ["\n", "mean", "=", "(", "102.9801", ",", "115.9465", ",", "122.7717", ")", "\n", "image", "=", "image", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", "\n", "image", "-=", "mean", "\n", "\n", "image", "=", "image", ".", "transpose", "(", "(", "2", ",", "0", ",", "1", ")", ")", "\n", "\n", "return", "image", ".", "copy", "(", ")", ",", "np", ".", "array", "(", "size", ")", ",", "name", "\n", "\n", "\n", "\n", "\n", "\n", "\n", "################################################################################", "\n", "# Synscapes", "\n", "################################################################################", "\n", "", "", "class", "DatasetSynscapesAugmentation", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "root_meta", ",", "type", "=", "\"train\"", ",", "max_iters", "=", "None", ",", "crop_size", "=", "(", "512", ",", "512", ")", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "root_meta", "=", "root_meta", "\n", "self", ".", "crop_h", ",", "self", ".", "crop_w", "=", "crop_size", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "if", "type", "==", "\"train\"", ":", "\n", "            ", "with", "open", "(", "root_meta", "+", "\"/train_img_ids.pkl\"", ",", "\"rb\"", ")", "as", "file", ":", "# (needed for python3)", "\n", "                ", "self", ".", "img_ids", "=", "pickle", ".", "load", "(", "file", ")", "\n", "", "", "elif", "type", "==", "\"val\"", ":", "\n", "            ", "with", "open", "(", "root_meta", "+", "\"/val_img_ids.pkl\"", ",", "\"rb\"", ")", "as", "file", ":", "# (needed for python3)", "\n", "                ", "self", ".", "img_ids", "=", "pickle", ".", "load", "(", "file", ")", "\n", "", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "\"type must be either 'train' or 'val'!\"", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetKITTIVal.__len__": [[225, 227], ["len"], "methods", ["None"], ["\n", "", "print", "(", "\"DatasetSynscapesAugmentation - num unique examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "if", "not", "max_iters", "==", "None", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetKITTIVal.__getitem__": [[228, 284], ["cv2.imread", "cv2.imread", "cv2.imread", "sparse.astype.astype.astype", "target.astype.astype.astype", "cv2.cvtColor", "img.astype.astype.astype", "img.astype.astype.copy", "sparse.astype.astype.copy", "target.astype.astype.copy"], "methods", ["None"], ["                ", "self", ".", "img_ids", "=", "self", ".", "img_ids", "*", "int", "(", "np", ".", "ceil", "(", "float", "(", "max_iters", ")", "/", "len", "(", "self", ".", "img_ids", ")", ")", ")", "\n", "", "print", "(", "\"DatasetSynscapesAugmentation - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "img_id", "in", "self", ".", "img_ids", ":", "\n", "            ", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "self", ".", "root", "+", "\"/img/rgb-2k/\"", "+", "img_id", "+", "\".png\"", ",", "\n", "\"label\"", ":", "self", ".", "root_meta", "+", "\"/gtFine/\"", "+", "img_id", "+", "\".png\"", ",", "\n", "\"name\"", ":", "img_id", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "datafiles", "[", "\"img\"", "]", ")", ":", "# (26 out of 25000 images are missing)", "\n", "            ", "return", "self", ".", "__getitem__", "(", "0", ")", "\n", "\n", "", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n", "image", ",", "label", "=", "generate_scale_label", "(", "image", ",", "label", ")", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n", "\n", "mean", "=", "(", "102.9801", ",", "115.9465", ",", "122.7717", ")", "\n", "image", "=", "image", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", "\n", "image", "-=", "mean", "\n", "\n", "img_h", ",", "img_w", "=", "label", ".", "shape", "\n", "pad_h", "=", "max", "(", "self", ".", "crop_h", "-", "img_h", ",", "0", ")", "\n", "pad_w", "=", "max", "(", "self", ".", "crop_w", "-", "img_w", ",", "0", ")", "\n", "if", "pad_h", ">", "0", "or", "pad_w", ">", "0", ":", "\n", "            ", "img_pad", "=", "cv2", ".", "copyMakeBorder", "(", "image", ",", "0", ",", "pad_h", ",", "0", ",", "\n", "pad_w", ",", "cv2", ".", "BORDER_CONSTANT", ",", "\n", "value", "=", "(", "0.0", ",", "0.0", ",", "0.0", ")", ")", "\n", "label_pad", "=", "cv2", ".", "copyMakeBorder", "(", "label", ",", "0", ",", "pad_h", ",", "0", ",", "\n", "pad_w", ",", "cv2", ".", "BORDER_CONSTANT", ",", "\n", "value", "=", "(", "self", ".", "ignore_label", ",", ")", ")", "\n", "", "else", ":", "\n", "            ", "img_pad", ",", "label_pad", "=", "image", ",", "label", "\n", "\n", "", "img_h", ",", "img_w", "=", "label_pad", ".", "shape", "\n", "h_off", "=", "random", ".", "randint", "(", "0", ",", "img_h", "-", "self", ".", "crop_h", ")", "\n", "w_off", "=", "random", ".", "randint", "(", "0", ",", "img_w", "-", "self", ".", "crop_w", ")", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetKITTIValSeq.__init__": [[286, 313], ["os.listdir", "print", "seq.split", "datasets.DatasetKITTIValSeq.examples.append", "len"], "methods", ["None"], ["label", "=", "np", ".", "asarray", "(", "label_pad", "[", "h_off", ":", "h_off", "+", "self", ".", "crop_h", ",", "w_off", ":", "w_off", "+", "self", ".", "crop_w", "]", ",", "np", ".", "float32", ")", "\n", "image", "=", "image", ".", "transpose", "(", "(", "2", ",", "0", ",", "1", ")", ")", "\n", "\n", "flip", "=", "np", ".", "random", ".", "choice", "(", "2", ")", "*", "2", "-", "1", "\n", "image", "=", "image", "[", ":", ",", ":", ",", ":", ":", "flip", "]", "\n", "label", "=", "label", "[", ":", ",", ":", ":", "flip", "]", "\n", "\n", "return", "image", ".", "copy", "(", ")", ",", "label", ".", "copy", "(", ")", ",", "np", ".", "array", "(", "size", ")", ",", "name", "\n", "\n", "", "", "class", "DatasetSynscapesEval", "(", "data", ".", "Dataset", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "root", ",", "root_meta", ",", "type", "=", "\"val\"", ",", "ignore_label", "=", "255", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "root_meta", "=", "root_meta", "\n", "self", ".", "ignore_label", "=", "ignore_label", "\n", "\n", "if", "type", "==", "\"train\"", ":", "\n", "            ", "with", "open", "(", "root_meta", "+", "\"/train_img_ids.pkl\"", ",", "\"rb\"", ")", "as", "file", ":", "# (needed for python3)", "\n", "                ", "self", ".", "img_ids", "=", "pickle", ".", "load", "(", "file", ")", "\n", "", "", "elif", "type", "==", "\"val\"", ":", "\n", "            ", "with", "open", "(", "root_meta", "+", "\"/val_img_ids.pkl\"", ",", "\"rb\"", ")", "as", "file", ":", "# (needed for python3)", "\n", "                ", "self", ".", "img_ids", "=", "pickle", ".", "load", "(", "file", ")", "\n", "", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "\"type must be either 'train' or 'val'!\"", ")", "\n", "\n", "", "print", "(", "\"DatasetSynscapesEval - num examples: %d\"", "%", "len", "(", "self", ".", "img_ids", ")", ")", "\n", "\n", "self", ".", "files", "=", "[", "]", "\n", "for", "img_id", "in", "self", ".", "img_ids", ":", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetKITTIValSeq.__len__": [[314, 316], ["len"], "methods", ["None"], ["            ", "self", ".", "files", ".", "append", "(", "{", "\n", "\"img\"", ":", "self", ".", "root", "+", "\"/img/rgb-2k/\"", "+", "img_id", "+", "\".png\"", ",", "\n", "\"label\"", ":", "self", ".", "root_meta", "+", "\"/gtFine/\"", "+", "img_id", "+", "\".png\"", ",", "\n"]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetKITTIValSeq.__getitem__": [[317, 400], ["cv2.imread", "cv2.imread", "cv2.imread", "sparse.astype.astype.astype", "target.astype.astype.astype", "cv2.cvtColor", "img_gray.astype.astype.astype", "img_gray.astype.astype.copy", "sparse.astype.astype.copy", "target.astype.astype.copy", "int", "int", "int", "int", "int", "int"], "methods", ["None"], ["\"name\"", ":", "img_id", ",", "\n", "\"weight\"", ":", "1", "\n", "}", ")", "\n", "\n", "", "self", ".", "id_to_trainid", "=", "{", "-", "1", ":", "ignore_label", ",", "0", ":", "ignore_label", ",", "1", ":", "ignore_label", ",", "2", ":", "ignore_label", ",", "\n", "3", ":", "ignore_label", ",", "4", ":", "ignore_label", ",", "5", ":", "ignore_label", ",", "6", ":", "ignore_label", ",", "\n", "7", ":", "0", ",", "8", ":", "1", ",", "9", ":", "ignore_label", ",", "10", ":", "ignore_label", ",", "11", ":", "2", ",", "12", ":", "3", ",", "13", ":", "4", ",", "\n", "14", ":", "ignore_label", ",", "15", ":", "ignore_label", ",", "16", ":", "ignore_label", ",", "17", ":", "5", ",", "\n", "18", ":", "ignore_label", ",", "19", ":", "6", ",", "20", ":", "7", ",", "21", ":", "8", ",", "22", ":", "9", ",", "23", ":", "10", ",", "24", ":", "11", ",", "25", ":", "12", ",", "26", ":", "13", ",", "27", ":", "14", ",", "\n", "28", ":", "15", ",", "29", ":", "ignore_label", ",", "30", ":", "ignore_label", ",", "31", ":", "16", ",", "32", ":", "17", ",", "33", ":", "18", "}", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "files", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "datafiles", "=", "self", ".", "files", "[", "index", "]", "\n", "image", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"img\"", "]", ",", "cv2", ".", "IMREAD_COLOR", ")", "\n", "label", "=", "cv2", ".", "imread", "(", "datafiles", "[", "\"label\"", "]", ",", "cv2", ".", "IMREAD_GRAYSCALE", ")", "\n", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "datafiles", "[", "\"img\"", "]", ")", ":", "# (26 out of 25000 images are missing)", "\n", "            ", "return", "self", ".", "__getitem__", "(", "0", ")", "\n", "\n", "", "label", "=", "id2trainId", "(", "label", ",", "self", ".", "id_to_trainid", ")", "\n", "\n", "size", "=", "image", ".", "shape", "\n", "name", "=", "datafiles", "[", "\"name\"", "]", "\n", "\n", "image", "=", "np", ".", "asarray", "(", "image", ",", "np", ".", "float32", ")", "\n", "\n", "mean", "=", "(", "102.9801", ",", "115.9465", ",", "122.7717", ")", "\n", "image", "=", "image", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", "\n", "image", "-=", "mean", "\n", "\n", "image", "=", "image", ".", "transpose", "(", "(", "2", ",", "0", ",", "1", ")", ")", "\n", "\n", "return", "image", ".", "copy", "(", ")", ",", "label", ".", "copy", "(", ")", ",", "np", ".", "array", "(", "size", ")", ",", "name", "\n", "", "", ""]], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIAugmentation.__init__": [[410, 441], ["print", "print", "os.listdir", "len", "int", "len", "datasets.DatasetVirtualKITTIAugmentation.examples.append", "numpy.ceil", "float", "len"], "methods", ["None"], []], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIAugmentation.__len__": [[442, 444], ["len"], "methods", ["None"], []], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIAugmentation.__getitem__": [[445, 587], ["cv2.imread", "cv2.imread", "numpy.random.randint", "random.randint", "random.randint", "cv2.flip.astype", "cv2.cvtColor", "cv2.flip.copy", "target.astype.astype.copy", "numpy.random.binomial", "cv2.flip.astype", "sparse.astype.astype.astype", "target.astype.astype.astype", "cv2.flip", "cv2.flip", "cv2.flip.copy", "sparse.astype.astype.copy", "target.astype.astype.copy", "int", "int", "int", "int"], "methods", ["None"], []], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIVal.__init__": [[589, 615], ["print", "os.listdir", "len", "datasets.DatasetVirtualKITTIVal.examples.append"], "methods", ["None"], []], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIVal.__len__": [[616, 618], ["len"], "methods", ["None"], []], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIVal.__getitem__": [[619, 726], ["cv2.imread", "cv2.imread", "gt.astype.astype.astype", "cv2.cvtColor", "gt.astype.astype.copy", "target.astype.astype.copy", "numpy.random.binomial", "img.astype.astype.astype", "sparse.astype.astype.astype", "target.astype.astype.astype", "img.astype.astype.copy", "sparse.astype.astype.copy", "target.astype.astype.copy", "int", "int", "int", "int"], "methods", ["None"], []], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__init__": [[728, 748], ["os.listdir", "print", "datasets.DatasetVirtualKITTIValSeq.examples.append", "len"], "methods", ["None"], []], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__len__": [[749, 751], ["len"], "methods", ["None"], []], "home.repos.pwc.inspect_result.fregu856_evaluating_bdl.depthCompletion.datasets.DatasetVirtualKITTIValSeq.__getitem__": [[752, 859], ["cv2.imread", "cv2.imread", "gt.astype.astype.astype", "cv2.cvtColor", "gt.astype.astype.copy", "target.astype.astype.copy", "numpy.random.binomial", "img_gray.astype.astype.astype", "sparse.astype.astype.astype", "target.astype.astype.astype", "img_gray.astype.astype.copy", "sparse.astype.astype.copy", "target.astype.astype.copy", "int", "int", "int", "int"], "methods", ["None"], []]}