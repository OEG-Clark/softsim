{"home.repos.pwc.inspect_result.venomnomnom_genderbias.None.outputbias.lookup_gender": [[57, 62], ["list"], "function", ["None"], ["def", "lookup_gender", "(", "isbn", ")", ":", "\n", "  ", "author_details", "=", "author_credentials", ".", "loc", "[", "author_credentials", "[", "'isbn'", "]", "==", "isbn", "]", "\n", "if", "author_details", ".", "empty", ":", "\n", "    ", "return", "None", "\n", "", "return", "list", "(", "author_details", "[", "'gender'", "]", ")", "[", "0", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.venomnomnom_genderbias.None.outputbias.GeometricMean": [[63, 67], ["scipy.stats.mstats.gmean", "len"], "function", ["None"], ["", "def", "GeometricMean", "(", "number_list", ")", ":", "\n", "  ", "if", "len", "(", "number_list", ")", "==", "0", ":", "\n", "    ", "return", "-", "1", "\n", "", "return", "gmean", "(", "number_list", ")", "\n", "# product = 1.0", "\n"]], "home.repos.pwc.inspect_result.venomnomnom_genderbias.None.outputbias.judge_recommendation_data_segment": [[73, 111], ["outputbias.GeometricMean", "outputbias.GeometricMean", "numpy.log", "outputbias.lookup_gender", "len", "len", "male_author_books_score.append", "len", "len", "len", "len", "len", "len", "len", "len", "female_author_books_score.append", "print"], "function", ["home.repos.pwc.inspect_result.venomnomnom_genderbias.None.inputbias.GeometricMean", "home.repos.pwc.inspect_result.venomnomnom_genderbias.None.inputbias.GeometricMean", "home.repos.pwc.inspect_result.venomnomnom_genderbias.None.inputbias.lookup_gender"], ["", "def", "judge_recommendation_data_segment", "(", "data_segment", ")", ":", "\n", "  ", "male_author_books_score", "=", "[", "]", "\n", "female_author_books_score", "=", "[", "]", "\n", "# male_author_books_score = 0.0", "\n", "# female_author_books_score = 0.0", "\n", "for", "ind", "in", "data_segment", ".", "index", ":", "\n", "    ", "gender", "=", "lookup_gender", "(", "data_segment", "[", "'item'", "]", "[", "ind", "]", ")", "\n", "if", "gender", "==", "'male'", ":", "\n", "      ", "male_author_books_score", ".", "append", "(", "data_segment", "[", "'score'", "]", "[", "ind", "]", ")", "\n", "#male_author_books_score = male_author_books_score + 1.0", "\n", "", "elif", "gender", "==", "'female'", ":", "\n", "      ", "female_author_books_score", ".", "append", "(", "data_segment", "[", "'score'", "]", "[", "ind", "]", ")", "\n", "#female_author_books_score = female_author_books_score + 1.0", "\n", "", "else", ":", "\n", "      ", "print", "(", "'Gender identification failed for item: '", ",", "data_segment", "[", "'item'", "]", "[", "ind", "]", ")", "\n", "", "", "if", "not", "male_author_books_score", ":", "\n", "    ", "return", "len", "(", "male_author_books_score", ")", ",", "len", "(", "female_author_books_score", ")", ",", "np", ".", "nan", ",", "np", ".", "nan", "\n", "", "if", "not", "female_author_books_score", ":", "\n", "    ", "return", "len", "(", "male_author_books_score", ")", ",", "len", "(", "female_author_books_score", ")", ",", "np", ".", "nan", ",", "np", ".", "nan", "\n", "# average_score_male_author_books = sum(male_author_books_score)/len(male_author_books_score)", "\n", "# average_score_female_author_books = sum(female_author_books_score)/len(female_author_books_score)", "\n", "# average_score_male_author_books = average_score_male_author_books #+ 1.0", "\n", "# average_score_female_author_books = average_score_female_author_books #+ 1.0", "\n", "", "gmean_rating_male_author_books", "=", "GeometricMean", "(", "male_author_books_score", ")", "\n", "gmean_rating_female_author_books", "=", "GeometricMean", "(", "female_author_books_score", ")", "\n", "# ratio_male_female = average_score_male_author_books/average_score_female_author_books", "\n", "# male_author_books_score = male_author_books_score + 1", "\n", "# female_author_books_score = female_author_books_score + 1", "\n", "# ratio_male_female = male_author_books_score +1.0 / female_author_books_score +1.0", "\n", "if", "gmean_rating_male_author_books", "==", "-", "1", ":", "\n", "    ", "return", "len", "(", "male_author_books_ratings", ")", ",", "len", "(", "female_author_books_ratings", ")", ",", "np", ".", "nan", ",", "np", ".", "nan", "\n", "", "if", "gmean_rating_female_author_books", "==", "-", "1", ":", "\n", "    ", "return", "len", "(", "male_author_books_ratings", ")", ",", "len", "(", "female_author_books_ratings", ")", ",", "np", ".", "nan", ",", "np", ".", "nan", "\n", "", "ratio_male_female", "=", "gmean_rating_male_author_books", "/", "gmean_rating_female_author_books", "\n", "bias_score", "=", "np", ".", "log", "(", "ratio_male_female", ")", "\n", "#return len(male_author_books_score),len(female_author_books_score),ratio_male_female,bias_score", "\n", "#print('male score: ',male_author_books_score, 'female score: ', female_author_books_score)", "\n", "return", "len", "(", "male_author_books_score", ")", ",", "len", "(", "female_author_books_score", ")", ",", "ratio_male_female", ",", "bias_score", "\n", "\n"]], "home.repos.pwc.inspect_result.venomnomnom_genderbias.None.inputbias.lookup_gender": [[49, 56], ["list"], "function", ["None"], ["def", "lookup_gender", "(", "isbn", ")", ":", "\n", "  ", "author_details", "=", "author_credentials", ".", "loc", "[", "author_credentials", "[", "'isbn'", "]", "==", "isbn", "]", "\n", "if", "author_details", ".", "empty", ":", "\n", "# print(f\"None --- {isbn}\")", "\n", "    ", "return", "None", "\n", "# print(f\"{list(author_details['gender'])[0]} --- {isbn}\")", "\n", "", "return", "list", "(", "author_details", "[", "'gender'", "]", ")", "[", "0", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.venomnomnom_genderbias.None.inputbias.GeometricMean": [[57, 61], ["scipy.stats.mstats.gmean", "len"], "function", ["None"], ["", "def", "GeometricMean", "(", "number_list", ")", ":", "\n", "  ", "if", "len", "(", "number_list", ")", "==", "0", ":", "\n", "    ", "return", "-", "1", "\n", "", "return", "gmean", "(", "number_list", ")", "\n", "# product = 1.0", "\n"]], "home.repos.pwc.inspect_result.venomnomnom_genderbias.None.inputbias.judge_user_data_segment": [[67, 97], ["inputbias.GeometricMean", "inputbias.GeometricMean", "numpy.log", "inputbias.lookup_gender", "len", "len", "male_author_books_ratings.append", "len", "len", "len", "len", "len", "len", "len", "len", "female_author_books_ratings.append", "print"], "function", ["home.repos.pwc.inspect_result.venomnomnom_genderbias.None.inputbias.GeometricMean", "home.repos.pwc.inspect_result.venomnomnom_genderbias.None.inputbias.GeometricMean", "home.repos.pwc.inspect_result.venomnomnom_genderbias.None.inputbias.lookup_gender"], ["", "def", "judge_user_data_segment", "(", "data_segment", ")", ":", "\n", "  ", "male_author_books_ratings", "=", "[", "]", "\n", "female_author_books_ratings", "=", "[", "]", "\n", "for", "ind", "in", "data_segment", ".", "index", ":", "\n", "    ", "gender", "=", "lookup_gender", "(", "data_segment", "[", "'item'", "]", "[", "ind", "]", ")", "\n", "if", "gender", "==", "'male'", ":", "\n", "      ", "male_author_books_ratings", ".", "append", "(", "data_segment", "[", "'rating'", "]", "[", "ind", "]", ")", "\n", "", "elif", "gender", "==", "'female'", ":", "\n", "      ", "female_author_books_ratings", ".", "append", "(", "data_segment", "[", "'rating'", "]", "[", "ind", "]", ")", "\n", "", "else", ":", "\n", "      ", "return", "np", ".", "nan", ",", "np", ".", "nan", ",", "np", ".", "nan", ",", "np", ".", "nan", "\n", "print", "(", "'Gender identification failed for isbn: '", ",", "data_segment", "[", "'item'", "]", "[", "ind", "]", ")", "\n", "", "", "if", "not", "male_author_books_ratings", ":", "\n", "    ", "return", "len", "(", "male_author_books_ratings", ")", ",", "len", "(", "female_author_books_ratings", ")", ",", "np", ".", "nan", ",", "np", ".", "nan", "\n", "", "if", "not", "female_author_books_ratings", ":", "\n", "    ", "return", "len", "(", "male_author_books_ratings", ")", ",", "len", "(", "female_author_books_ratings", ")", ",", "np", ".", "nan", ",", "np", ".", "nan", "\n", "# average_rating_male_author_books = sum(male_author_books_ratings)/len(male_author_books_ratings)", "\n", "# average_rating_female_author_books = sum(female_author_books_ratings)/len(female_author_books_ratings)", "\n", "# sum_rating_male_author_books = sum(male_author_books_ratings) + 0.01", "\n", "# sum_rating_female_author_books = sum(female_author_books_ratings) + 1.0", "\n", "", "gmean_rating_male_author_books", "=", "GeometricMean", "(", "male_author_books_ratings", ")", "\n", "gmean_rating_female_author_books", "=", "GeometricMean", "(", "female_author_books_ratings", ")", "\n", "if", "gmean_rating_male_author_books", "==", "-", "1", ":", "\n", "    ", "return", "len", "(", "male_author_books_ratings", ")", ",", "len", "(", "female_author_books_ratings", ")", ",", "np", ".", "nan", ",", "np", ".", "nan", "\n", "", "if", "gmean_rating_female_author_books", "==", "-", "1", ":", "\n", "    ", "return", "len", "(", "male_author_books_ratings", ")", ",", "len", "(", "female_author_books_ratings", ")", ",", "np", ".", "nan", ",", "np", ".", "nan", "\n", "", "ratio_male_female", "=", "gmean_rating_male_author_books", "/", "gmean_rating_female_author_books", "\n", "bias_score", "=", "np", ".", "log", "(", "ratio_male_female", ")", "\n", "# bias_score = ratio_male_female", "\n", "return", "len", "(", "male_author_books_ratings", ")", ",", "len", "(", "female_author_books_ratings", ")", ",", "ratio_male_female", ",", "bias_score", "\n", "\n"]], "home.repos.pwc.inspect_result.venomnomnom_genderbias.None.extract5core.removeElements": [[19, 22], ["collections.Counter"], "function", ["None"], ["def", "removeElements", "(", "lst", ",", "k", ")", ":", "\n", "    ", "counted", "=", "Counter", "(", "lst", ")", "\n", "return", "[", "el", "for", "el", "in", "lst", "if", "counted", "[", "el", "]", ">=", "k", "]", "\n", "\n"]]}