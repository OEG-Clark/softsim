{"home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.evaluations.plot_rewards_cow": [[10, 22], ["utils.plotting.plot_multi_series", "utils.plotting.get_reward_series", "utils.plotting.get_reward_series", "utils.plotting.get_reward_series", "utils.plotting.get_reward_series", "utils.file.get_absolute_path", "utils.file.get_absolute_path", "utils.file.get_absolute_path", "utils.file.get_absolute_path"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.plot_multi_series", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.get_reward_series", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.get_reward_series", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.get_reward_series", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.get_reward_series", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path"], ["def", "plot_rewards_cow", "(", ")", ":", "\n", "    ", "data", "=", "{", "\n", "\"Standard RL\"", ":", "get_reward_series", "(", "\n", "get_absolute_path", "(", "r\"results\\cow_skeleton_experiment_4_SA\\run-PPO_COW_SA-tag-rollout_ep_rew_mean.csv\"", ")", ")", ",", "\n", "\"ACC Aware (Neg. Reward)\"", ":", "get_reward_series", "(", "get_absolute_path", "(", "\n", "r\"results\\cow_skeleton_experiment_4_SA_AR\\run-PPO_COW_SA_AR-tag-rollout_ep_rew_mean.csv\"", ")", ")", ",", "\n", "\"ACC Aware (End Episode)\"", ":", "get_reward_series", "(", "\n", "get_absolute_path", "(", "r\"results\\cow_skeleton_experiment_4_FBT\\run-PPO_COW_FBT-tag-rollout_ep_rew_mean.csv\"", ")", ")", ",", "\n", "\"ACC Aware (NR and EE)\"", ":", "get_reward_series", "(", "get_absolute_path", "(", "\n", "r\"results\\cow_skeleton_experiment_4_FBT_AR\\run-PPO_COW_FBT_AR-tag-rollout_ep_rew_mean.csv\"", ")", ")", ",", "\n", "}", "\n", "plot_multi_series", "(", "data", ",", "(", "5", ",", "3.5", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.evaluations.plot_rewards_skeleton": [[24, 36], ["utils.plotting.plot_multi_series", "utils.plotting.get_reward_series", "utils.plotting.get_reward_series", "utils.plotting.get_reward_series", "utils.plotting.get_reward_series", "utils.file.get_absolute_path", "utils.file.get_absolute_path", "utils.file.get_absolute_path", "utils.file.get_absolute_path"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.plot_multi_series", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.get_reward_series", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.get_reward_series", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.get_reward_series", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.get_reward_series", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path"], ["", "def", "plot_rewards_skeleton", "(", ")", ":", "\n", "    ", "data", "=", "{", "\n", "\"Standard RL\"", ":", "get_reward_series", "(", "\n", "get_absolute_path", "(", "r\"results\\basicfighter_ppo8\\run-PPO_8-tag-rollout_ep_rew_mean.csv\"", ")", ")", ",", "\n", "\"ACC Aware (Neg. Reward)\"", ":", "get_reward_series", "(", "\n", "get_absolute_path", "(", "r\"results\\basicfighter_ppo10\\run-PPO_10-tag-rollout_ep_rew_mean.csv\"", ")", ")", ",", "\n", "\"ACC Aware (End Episode)\"", ":", "get_reward_series", "(", "\n", "get_absolute_path", "(", "r\"results\\basicfighter_ppo5\\run-PPO_5-tag-rollout_ep_rew_mean.csv\"", ")", ")", ",", "\n", "\"ACC Aware (NR and EE)\"", ":", "get_reward_series", "(", "\n", "get_absolute_path", "(", "r\"results\\basicfighter_ppo7\\run-PPO_7-tag-rollout_ep_rew_mean.csv\"", ")", ")", ",", "\n", "}", "\n", "plot_multi_series", "(", "data", ",", "(", "5", ",", "3.5", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.evaluations.evaluate_combined": [[38, 55], ["evaluations.print_node_results", "evaluations.print_node_results", "evaluations.print_node_results", "evaluations.print_node_results", "main.experiment_evaluate", "main.experiment_evaluate", "main.experiment_evaluate", "main.experiment_evaluate", "evaluation.evaluation_manager.EvaluationManager", "evaluation.evaluation_manager.EvaluationManager", "evaluation.evaluation_manager.EvaluationManager", "evaluation.evaluation_manager.EvaluationManager"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.evaluations.print_node_results", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.evaluations.print_node_results", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.evaluations.print_node_results", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.evaluations.print_node_results", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.main.experiment_evaluate", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.main.experiment_evaluate", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.main.experiment_evaluate", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.main.experiment_evaluate"], ["", "def", "evaluate_combined", "(", ")", ":", "\n", "    ", "print_node_results", "(", "experiment_evaluate", "(", "log_dir", "=", "\"results/cow_skeleton_experiment_4_SA\"", ",", "model_spec", "=", "{", "\n", "DefeatSkeleton", ":", "(", "\"results/basicfighter_ppo8\"", ",", "\"final.mdl\"", ")", ",", "\n", "ChaseEntity", ":", "(", "\"results/cow_skeleton_experiment_4_SA\"", ",", "\"final.mdl\"", ")", "\n", "}", ",", "evaluation_manager", "=", "EvaluationManager", "(", "runs", "=", "10", ")", ")", ",", "\"Is not attacked by enemy\"", ")", "\n", "print_node_results", "(", "experiment_evaluate", "(", "log_dir", "=", "\"results/cow_skeleton_experiment_4_SA_AR\"", ",", "model_spec", "=", "{", "\n", "DefeatSkeleton", ":", "(", "\"results/basicfighter_ppo10\"", ",", "\"final.mdl\"", ")", ",", "\n", "ChaseEntity", ":", "(", "\"results/cow_skeleton_experiment_4_SA_AR\"", ",", "\"final.mdl\"", ")", "\n", "}", ",", "evaluation_manager", "=", "EvaluationManager", "(", "runs", "=", "10", ")", ")", ",", "\"Is not attacked by enemy\"", ")", "\n", "print_node_results", "(", "experiment_evaluate", "(", "log_dir", "=", "\"results/cow_skeleton_experiment_4_FBT\"", ",", "model_spec", "=", "{", "\n", "DefeatSkeleton", ":", "(", "\"results/basicfighter_ppo5\"", ",", "\"final.mdl\"", ")", ",", "\n", "ChaseEntity", ":", "(", "\"results/cow_skeleton_experiment_4_FBT\"", ",", "\"final.mdl\"", ")", "\n", "}", ",", "evaluation_manager", "=", "EvaluationManager", "(", "runs", "=", "10", ")", ")", ",", "\"Is not attacked by enemy\"", ")", "\n", "print_node_results", "(", "experiment_evaluate", "(", "log_dir", "=", "\"results/cow_skeleton_experiment_4_FBT_AR\"", ",", "model_spec", "=", "{", "\n", "DefeatSkeleton", ":", "(", "\"results/basicfighter_ppo7\"", ",", "\"final.mdl\"", ")", ",", "\n", "ChaseEntity", ":", "(", "\"results/cow_skeleton_experiment_4_FBT_AR\"", ",", "\"final.mdl\"", ")", "\n", "}", ",", "evaluation_manager", "=", "EvaluationManager", "(", "runs", "=", "10", ")", ")", ",", "\"Is not attacked by enemy\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.evaluations.evaluate_fighter": [[57, 70], ["evaluations.print_node_results", "evaluations.print_node_results", "evaluations.print_node_results", "evaluations.print_node_results", "main.experiment_evaluate", "main.experiment_evaluate", "main.experiment_evaluate", "main.experiment_evaluate", "evaluation.evaluation_manager.EvaluationManager", "evaluation.evaluation_manager.EvaluationManager", "evaluation.evaluation_manager.EvaluationManager", "evaluation.evaluation_manager.EvaluationManager"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.evaluations.print_node_results", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.evaluations.print_node_results", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.evaluations.print_node_results", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.evaluations.print_node_results", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.main.experiment_evaluate", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.main.experiment_evaluate", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.main.experiment_evaluate", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.main.experiment_evaluate"], ["", "def", "evaluate_fighter", "(", ")", ":", "\n", "    ", "print_node_results", "(", "experiment_evaluate", "(", "log_dir", "=", "\"results/basicfighter_ppo8\"", ",", "model_spec", "=", "{", "\n", "DefeatSkeleton", ":", "(", "\"results/basicfighter_ppo8\"", ",", "\"final.mdl\"", ")", ",", "\n", "}", ",", "evaluation_manager", "=", "EvaluationManager", "(", "runs", "=", "10", ")", ")", ",", "\"Is safe from fire\"", ")", "\n", "print_node_results", "(", "experiment_evaluate", "(", "log_dir", "=", "\"results/basicfighter_ppo10\"", ",", "model_spec", "=", "{", "\n", "DefeatSkeleton", ":", "(", "\"results/basicfighter_ppo10\"", ",", "\"final.mdl\"", ")", ",", "\n", "}", ",", "evaluation_manager", "=", "EvaluationManager", "(", "runs", "=", "10", ")", ")", ",", "\"Is safe from fire\"", ")", "\n", "print_node_results", "(", "experiment_evaluate", "(", "log_dir", "=", "\"results/basicfighter_ppo5\"", ",", "model_spec", "=", "{", "\n", "DefeatSkeleton", ":", "(", "\"results/basicfighter_ppo5\"", ",", "\"final.mdl\"", ")", ",", "\n", "}", ",", "evaluation_manager", "=", "EvaluationManager", "(", "runs", "=", "10", ")", ")", ",", "\"Is safe from fire\"", ")", "\n", "print_node_results", "(", "experiment_evaluate", "(", "log_dir", "=", "\"results/basicfighter_ppo7\"", ",", "model_spec", "=", "{", "\n", "DefeatSkeleton", ":", "(", "\"results/basicfighter_ppo7\"", ",", "\"final.mdl\"", ")", ",", "\n", "}", ",", "evaluation_manager", "=", "EvaluationManager", "(", "runs", "=", "10", ")", ")", ",", "\"Is safe from fire\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.evaluations.print_node_results": [[72, 90], ["numpy.array", "print", "print", "print", "print", "print", "str", "numpy.average", "numpy.std", "numpy.average", "numpy.average", "numpy.std", "evaluations.select", "numpy.sum", "numpy.sum"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.evaluations.select"], ["", "def", "print_node_results", "(", "evaluation_manager", ",", "evaluated_node", ")", ":", "\n", "    ", "values", "=", "np", ".", "array", "(", "[", "[", "mission", ".", "steps", ",", "select", "(", "mission", ".", "nodes", ",", "evaluated_node", ")", ".", "failures", ",", "mission", ".", "health", "]", "for", "mission", "in", "\n", "evaluation_manager", ".", "mission_records", "]", ")", "\n", "print", "(", "\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\"", ")", "\n", "print", "(", "\"Evaluation results: \"", "+", "str", "(", "evaluation_manager", ".", "name", ")", ")", "\n", "print", "(", "\n", "f\"Tex string: & % Episodes ACC_f & Avg ACC_f & Std dev ACC_f & Avg health remaining & % of failures & Timesteps & Timesteps std dev \"", ")", "\n", "print", "(", "f\"Tex string: \"", "\n", "f\"& {np.sum(values[:, 1] > 0) / evaluation_manager.runs * 100} \"", "\n", "f\"& {np.average(values[:, 1])} \"", "\n", "f\"& {np.std(values[:, 1])} \"", "\n", "f\"& {np.average(values[:, 2])} \"", "\n", "f\"& {np.sum(values[:, 2] == 0) / evaluation_manager.runs * 100} \"", "\n", "f\"& {np.average(values[:, 0])} \"", "\n", "f\"& {np.std(values[:, 0])} \"", "\n", ")", "\n", "# steps", "\n", "print", "(", "\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.evaluations.select": [[92, 94], ["list", "filter"], "function", ["None"], ["", "def", "select", "(", "node_list", ",", "name", ")", ":", "\n", "    ", "return", "list", "(", "filter", "(", "lambda", "el", ":", "el", ".", "name", "==", "name", "and", "el", ".", "steps", "!=", "0", ",", "node_list", ")", ")", "[", "0", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.evaluations.evaluate_all_models_once": [[96, 103], ["utils.file.get_model_file_names_from_folder", "enumerate", "main.experiment_evaluate", "evaluation.evaluation_manager.EvaluationManager"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_model_file_names_from_folder", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.main.experiment_evaluate"], ["", "def", "evaluate_all_models_once", "(", "node_class", ",", "log_dir", ",", "eval_dir", ",", "eval_name", ")", ":", "\n", "    ", "model_files", "=", "get_model_file_names_from_folder", "(", "log_dir", ")", "\n", "for", "i", ",", "model", "in", "enumerate", "(", "model_files", ")", ":", "\n", "        ", "experiment_evaluate", "(", "\n", "log_dir", "=", "log_dir", ",", "\n", "model_spec", "=", "{", "node_class", ":", "(", "log_dir", ",", "\"final.mdl\"", ")", "}", ",", "\n", "evaluation_manager", "=", "EvaluationManager", "(", "runs", "=", "1", ",", "eval_log_file", "=", "f\"{eval_dir}/{eval_name}_{i}.json\"", ")", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.evaluations.evaluate_different_positions": [[106, 116], ["utils.file.load_spec", "range", "range", "evaluation.evaluation_manager.EvaluationManager", "baselines_node_experiment.BaselinesNodeExperiment", "baselines_node_experiment.BaselinesNodeExperiment.evaluate_node"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.load_spec", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.baselines_node_experiment.BaselinesNodeExperiment.evaluate_node"], ["", "", "def", "evaluate_different_positions", "(", "log_dir", ",", "eval_dir", ",", "eval_name", ",", "model_name", ")", ":", "\n", "    ", "spec", "=", "load_spec", "(", "log_dir", ")", "\n", "spec", "[", "'random_entities_position_range'", "]", "=", "{", "}", "\n", "for", "x", "in", "range", "(", "-", "15", ",", "16", ")", ":", "\n", "        ", "for", "z", "in", "range", "(", "-", "15", ",", "16", ")", ":", "\n", "            ", "spec", "[", "'random_position_range'", "]", "=", "{", "'x'", ":", "[", "x", "]", ",", "'y'", ":", "[", "6", "]", ",", "'z'", ":", "[", "z", "]", "}", ",", "\n", "spec", "[", "\"evaluation_manager\"", "]", "=", "EvaluationManager", "(", "1", ",", "f\"{eval_dir}/{eval_name}_pos_{x}_{z}.json\"", ")", "\n", "\n", "experiment", "=", "BaselinesNodeExperiment", "(", "**", "spec", ")", "\n", "experiment", ".", "evaluate_node", "(", "spec", "[", "'model_class'", "]", ",", "model_name", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.main.experiment_evaluate": [[115, 123], ["utils.file.load_spec", "baselines_node_experiment.BaselinesNodeExperiment", "baselines_node_experiment.BaselinesNodeExperiment.evaluate"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.load_spec", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.IsEntityPickable.evaluate"], ["def", "experiment_evaluate", "(", "log_dir", ",", "model_spec", ",", "evaluation_manager", ")", ":", "\n", "    ", "spec", "=", "load_spec", "(", "log_dir", ")", "\n", "spec", "[", "\"evaluation_manager\"", "]", "=", "evaluation_manager", "\n", "evaluation_manager", ".", "name", "=", "spec", "[", "\"model_log_dir\"", "]", "\n", "experiment", "=", "BaselinesNodeExperiment", "(", "**", "spec", ")", "\n", "\n", "experiment", ".", "evaluate", "(", "model_spec", ")", "\n", "return", "evaluation_manager", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.main.experiment_test": [[125, 136], ["baselines_node_experiment.BaselinesNodeExperiment", "py_trees.composites.Sequence", "baselines_node_experiment.BaselinesNodeExperiment.mission.run", "bt.actions.Target", "bt.actions.KeepDistance", "bt.actions.Attack"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_runner.MissionRunner.run"], ["", "def", "experiment_test", "(", "spec", ")", ":", "\n", "    ", "experiment", "=", "BaselinesNodeExperiment", "(", "**", "spec", ")", "\n", "\n", "agent", "=", "experiment", ".", "agent", "\n", "agent", ".", "tree", "=", "Sequence", "(", "\"TestSequence\"", ",", "memory", "=", "False", ",", "\n", "children", "=", "[", "Target", "(", "agent", ")", ",", "\n", "KeepDistance", "(", "agent", ")", ",", "\n", "Attack", "(", "agent", ")", "]", "\n", ")", "\n", "\n", "experiment", ".", "mission", ".", "run", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.main.experiment_train": [[138, 143], ["baselines_node_experiment.BaselinesNodeExperiment", "utils.file.store_spec", "baselines_node_experiment.BaselinesNodeExperiment.train_node"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.store_spec", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.baselines_node_experiment.BaselinesNodeExperiment.train_node"], ["", "def", "experiment_train", "(", "spec", ")", ":", "\n", "    ", "experiment", "=", "BaselinesNodeExperiment", "(", "**", "spec", ")", "\n", "store_spec", "(", "spec", ")", "\n", "\n", "experiment", ".", "train_node", "(", "spec", "[", "'model_class'", "]", ",", "spec", "[", "'model_arguments'", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.main.experiment_check_env": [[146, 150], ["baselines_node_experiment.BaselinesNodeExperiment", "utils.file.store_spec", "baselines_node_experiment.BaselinesNodeExperiment.check_env"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.store_spec", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.baselines_node_experiment.BaselinesNodeExperiment.check_env"], ["", "def", "experiment_check_env", "(", "spec", ")", ":", "\n", "    ", "experiment", "=", "BaselinesNodeExperiment", "(", "**", "spec", ")", "\n", "store_spec", "(", "spec", ")", "\n", "experiment", ".", "check_env", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.baselines_node_experiment.BaselinesNodeExperiment.__init__": [[25, 64], ["agents.behavior_tree_agent.BehaviorTreeAgent", "mission.mission_runner.MissionRunner", "bt.back_chain_tree.BackChainTree", "baselines_node_experiment.BaselinesNodeExperiment.get_baseline_node", "goal", "utils.visualisation.save_tree_to_log", "ValueError", "utils.file.get_absolute_path", "str", "isinstance", "pathlib.Path"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.baselines_node_experiment.BaselinesNodeExperiment.get_baseline_node", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.visualisation.save_tree_to_log", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path"], ["    ", "def", "__init__", "(", "self", ",", "mission", ",", "goals", "=", "None", ",", "model_log_dir", "=", "None", ",", "total_timesteps", "=", "3000000", ",", "max_steps_per_episode", "=", "15000", ",", "active_entities", "=", "True", ",", "\n", "baseline_node_type", "=", "None", ",", "observation_manager", "=", "None", ",", "observation_filter", "=", "None", ",", "evaluation_manager", "=", "None", ",", "acc_ends_episode", "=", "True", ",", "logging", "=", "0", ",", "\n", "random_position_range", "=", "None", ",", "random_entities_position_range", "=", "None", ",", "\n", "mission_max_time", "=", "None", ",", "**", "kwargs", ")", ":", "\n", "        ", "self", ".", "mission_path", "=", "mission", "\n", "self", ".", "active_entities", "=", "active_entities", "\n", "self", ".", "model_log_dir", "=", "model_log_dir", "\n", "self", ".", "total_timesteps", "=", "total_timesteps", "\n", "self", ".", "acc_ends_episode", "=", "acc_ends_episode", "\n", "self", ".", "max_steps_per_episode", "=", "max_steps_per_episode", "\n", "self", ".", "logging", "=", "logging", "\n", "\n", "self", ".", "agent", "=", "BehaviorTreeAgent", "(", "agent_host", ",", "observation_manager", ")", "\n", "\n", "if", "goals", "is", "not", "None", ":", "\n", "            ", "self", ".", "goals", "=", "[", "goal", "(", "self", ".", "agent", ")", "for", "goal", "in", "goals", "]", "\n", "self", ".", "tree", "=", "BackChainTree", "(", "self", ".", "agent", ",", "self", ".", "goals", ",", "evaluation_manager", ")", "\n", "self", ".", "agent", ".", "tree", "=", "self", ".", "tree", ".", "root", "\n", "\n", "if", "self", ".", "model_log_dir", "is", "not", "None", ":", "\n", "                ", "save_tree_to_log", "(", "self", ".", "tree", ".", "root", ",", "str", "(", "Path", "(", "model_log_dir", ")", "/", "\"tree.csv\"", ")", ")", "\n", "\n", "", "self", ".", "baseline_node", "=", "self", ".", "get_baseline_node", "(", "baseline_node_type", ")", "\n", "\n", "self", ".", "baseline_node", "=", "self", ".", "tree", ".", "baseline_nodes", "[", "0", "]", "\n", "self", ".", "baseline_node", ".", "obs_filter", "=", "observation_filter", "\n", "self", ".", "baseline_nodes", "=", "self", ".", "tree", ".", "baseline_nodes", "\n", "if", "baseline_node_type", "is", "not", "None", "and", "not", "isinstance", "(", "self", ".", "baseline_node", ",", "baseline_node_type", ")", ":", "\n", "                ", "raise", "ValueError", "(", "\"The tree does not contain the baseline node type.\"", ")", "\n", "\n", "", "", "self", ".", "mission", "=", "MissionRunner", "(", "\n", "agent", "=", "self", ".", "agent", ",", "\n", "active_entities", "=", "active_entities", ",", "\n", "filename", "=", "get_absolute_path", "(", "mission", ")", ",", "\n", "evaluation_manager", "=", "evaluation_manager", ",", "\n", "random_position_range", "=", "random_position_range", ",", "\n", "random_entities_position_range", "=", "random_entities_position_range", ",", "\n", "mission_max_time", "=", "mission_max_time", ",", "\n", "logging", "=", "self", ".", "logging", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.baselines_node_experiment.BaselinesNodeExperiment.test_node": [[66, 70], ["model_class.load", "baselines_node_experiment.BaselinesNodeExperiment.baseline_node.set_model", "baselines_node_experiment.BaselinesNodeExperiment.mission.run", "utils.file.get_project_root"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.set_model", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_runner.MissionRunner.run", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_project_root"], ["", "def", "test_node", "(", "self", ",", "model_class", ",", "model_name", ")", ":", "\n", "        ", "loaded_model", "=", "model_class", ".", "load", "(", "get_project_root", "(", ")", "/", "self", ".", "model_log_dir", "/", "model_name", ")", "\n", "self", ".", "baseline_node", ".", "set_model", "(", "loaded_model", ")", "\n", "self", ".", "mission", ".", "run", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.baselines_node_experiment.BaselinesNodeExperiment.evaluate_node": [[71, 75], ["model_class.load", "baselines_node_experiment.BaselinesNodeExperiment.baseline_node.set_model", "baselines_node_experiment.BaselinesNodeExperiment.mission.run", "utils.file.get_project_root"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.set_model", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_runner.MissionRunner.run", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_project_root"], ["", "def", "evaluate_node", "(", "self", ",", "model_class", ",", "model_name", ")", ":", "\n", "        ", "loaded_model", "=", "model_class", ".", "load", "(", "get_project_root", "(", ")", "/", "self", ".", "model_log_dir", "/", "model_name", ")", "\n", "self", ".", "baseline_node", ".", "set_model", "(", "loaded_model", ")", "\n", "self", ".", "mission", ".", "run", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.baselines_node_experiment.BaselinesNodeExperiment.evaluate": [[76, 85], ["baselines_node_experiment.BaselinesNodeExperiment.mission.run", "utils.file.load_spec", "spec[].load", "node.set_model", "utils.file.load_spec.keys", "utils.file.get_project_root"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_runner.MissionRunner.run", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.load_spec", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.set_model", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_project_root"], ["", "def", "evaluate", "(", "self", ",", "model_spec", ")", ":", "\n", "        ", "for", "node", "in", "self", ".", "baseline_nodes", ":", "\n", "            ", "model_dir", ",", "model_name", "=", "model_spec", "[", "node", ".", "__class__", "]", "\n", "spec", "=", "load_spec", "(", "model_dir", ")", "\n", "loaded_model", "=", "spec", "[", "\"model_class\"", "]", ".", "load", "(", "get_project_root", "(", ")", "/", "model_dir", "/", "model_name", ")", "\n", "node", ".", "set_model", "(", "loaded_model", ")", "\n", "node", ".", "obs_filter", "=", "spec", "[", "\"observation_filter\"", "]", "if", "'observation_filter'", "in", "spec", ".", "keys", "(", ")", "else", "spec", "[", "'observation_manager'", "]", ".", "observation_filter", "\n", "\n", "", "self", ".", "mission", ".", "run", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.baselines_node_experiment.BaselinesNodeExperiment.train_node": [[86, 106], ["baselines_node_experiment.BaselinesNodeExperiment.setup_training_environment", "model_class.", "model_class.learn", "model_class.save", "learning.save_best_model_callback.SaveOnBestTrainingRewardCallback", "learning.disable_malmo_ai_for_training_callback.DisableMalmoAIForTrainingCallback", "utils.file.get_absolute_path"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.baselines_node_experiment.BaselinesNodeExperiment.setup_training_environment", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path"], ["", "def", "train_node", "(", "self", ",", "model_class", ",", "model_args", ")", ":", "\n", "        ", "env", "=", "self", ".", "setup_training_environment", "(", ")", "\n", "\n", "model_class", "=", "model_class", "(", "env", "=", "env", ",", "**", "model_args", ")", "\n", "model_class", ".", "learn", "(", "\n", "total_timesteps", "=", "self", ".", "total_timesteps", ",", "\n", "callback", "=", "[", "\n", "SaveOnBestTrainingRewardCallback", "(", "\n", "check_freq", "=", "5000", ",", "\n", "log_dir", "=", "get_absolute_path", "(", "self", ".", "model_log_dir", ")", "\n", ")", ",", "\n", "DisableMalmoAIForTrainingCallback", "(", "\n", "mission_manager", "=", "env", ".", "mission", ".", "mission_manager", ",", "\n", "agent", "=", "self", ".", "agent", ",", "\n", "active_entities", "=", "self", ".", "active_entities", "\n", ")", "\n", "]", "\n", ")", "\n", "\n", "model_class", ".", "save", "(", "self", ".", "model_log_dir", "+", "\"/final.mdl\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.baselines_node_experiment.BaselinesNodeExperiment.check_env": [[107, 110], ["baselines_node_experiment.BaselinesNodeExperiment.setup_training_environment", "stable_baselines3.common.env_checker.check_env"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.baselines_node_experiment.BaselinesNodeExperiment.setup_training_environment", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.baselines_node_experiment.BaselinesNodeExperiment.check_env"], ["", "def", "check_env", "(", "self", ")", ":", "\n", "        ", "env", "=", "self", ".", "setup_training_environment", "(", ")", "\n", "check_env", "(", "env", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.baselines_node_experiment.BaselinesNodeExperiment.setup_training_environment": [[111, 117], ["os.makedirs", "learning.baselines_node_training_env.BaselinesNodeTrainingEnv", "stable_baselines3.common.monitor.Monitor", "utils.file.get_absolute_path", "utils.file.get_absolute_path"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path"], ["", "def", "setup_training_environment", "(", "self", ")", ":", "\n", "        ", "os", ".", "makedirs", "(", "get_absolute_path", "(", "self", ".", "model_log_dir", ")", ",", "exist_ok", "=", "True", ")", "\n", "env", "=", "BaselinesNodeTrainingEnv", "(", "self", ".", "baseline_node", ",", "self", ".", "mission", ",", "self", ".", "acc_ends_episode", ",", "\n", "max_steps_per_episode", "=", "self", ".", "max_steps_per_episode", ")", "\n", "env", "=", "Monitor", "(", "env", ",", "get_absolute_path", "(", "self", ".", "model_log_dir", ")", ")", "\n", "return", "env", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.baselines_node_experiment.BaselinesNodeExperiment.get_baseline_node": [[118, 134], ["len", "ValueError", "ValueError", "len", "isinstance", "ValueError", "isinstance", "ValueError"], "methods", ["None"], ["", "def", "get_baseline_node", "(", "self", ",", "baseline_node_type", ")", ":", "\n", "        ", "if", "len", "(", "self", ".", "tree", ".", "baseline_nodes", ")", "==", "0", ":", "\n", "            ", "raise", "ValueError", "(", "\"The tree doesn't have a baseline node\"", ")", "\n", "", "elif", "len", "(", "self", ".", "tree", ".", "baseline_nodes", ")", ">", "1", ":", "\n", "            ", "if", "baseline_node_type", "is", "None", ":", "\n", "                ", "raise", "ValueError", "(", "\"The tree has two or more baseline nodes. Specify a baseline node type.\"", ")", "\n", "", "for", "baseline_node", "in", "self", ".", "tree", ".", "baseline_nodes", ":", "\n", "                ", "if", "isinstance", "(", "baseline_node", ",", "baseline_node_type", ")", ":", "\n", "                    ", "return", "baseline_node", "\n", "", "", "else", ":", "\n", "                ", "raise", "ValueError", "(", "\"The tree does not contain the baseline node type.\"", ")", "\n", "\n", "", "", "baseline_node", "=", "self", ".", "tree", ".", "baseline_nodes", "[", "0", "]", "\n", "if", "baseline_node_type", "is", "not", "None", "and", "not", "isinstance", "(", "baseline_node", ",", "baseline_node_type", ")", ":", "\n", "            ", "raise", "ValueError", "(", "\"The tree does not contain the baseline node type.\"", ")", "\n", "", "return", "baseline_node", "\n", "", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.malmo_bootstrap.bootstrap_malmo": [[6, 9], ["utils.file.get_absolute_path", "malmo.minecraftbootstrap.download"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path"], ["def", "bootstrap_malmo", "(", ")", ":", "\n", "    ", "malmo", ".", "minecraftbootstrap", ".", "malmo_install_dir", "=", "get_absolute_path", "(", "\"bootstrap/MalmoPlatform\"", ")", "\n", "malmo", ".", "minecraftbootstrap", ".", "download", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.None.malmo_bootstrap.run_malmo": [[11, 15], ["utils.file.get_absolute_path", "malmo.minecraftbootstrap.set_malmo_xsd_path", "malmo.minecraftbootstrap.launch_minecraft"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path"], ["", "def", "run_malmo", "(", "ports", "=", "[", "10000", ",", "]", ")", ":", "\n", "    ", "malmo", ".", "minecraftbootstrap", ".", "malmo_install_dir", "=", "get_absolute_path", "(", "\"bootstrap/MalmoPlatform\"", ")", "\n", "malmo", ".", "minecraftbootstrap", ".", "set_malmo_xsd_path", "(", ")", "\n", "malmo", ".", "minecraftbootstrap", ".", "launch_minecraft", "(", "ports", "=", "ports", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_project_root": [[10, 12], ["pathlib.Path"], "function", ["None"], ["def", "get_project_root", "(", ")", ":", "\n", "    ", "return", "Path", "(", "__file__", ")", ".", "parent", ".", "parent", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path": [[14, 16], ["str", "file.get_project_root"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_project_root"], ["", "def", "get_absolute_path", "(", "relative_path", ")", ":", "\n", "    ", "return", "str", "(", "get_project_root", "(", ")", "/", "relative_path", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.create_file_and_write": [[18, 24], ["folder_path.mkdir", "file.get_project_root", "codecs.open", "function", "str"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_project_root"], ["", "def", "create_file_and_write", "(", "file_name", ",", "function", ")", ":", "\n", "    ", "file_path", "=", "get_project_root", "(", ")", "/", "file_name", "\n", "folder_path", "=", "file_path", ".", "parent", "\n", "folder_path", ".", "mkdir", "(", "parents", "=", "True", ",", "exist_ok", "=", "True", ")", "\n", "with", "codecs", ".", "open", "(", "str", "(", "file_path", ")", ",", "\"w+\"", ",", "\"utf-8\"", ")", "as", "file", ":", "\n", "        ", "function", "(", "file", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.store_spec": [[26, 32], ["str", "str", "file.create_file_and_write", "shutil.copyfile", "file.get_absolute_path", "pathlib.Path", "pathlib.Path", "file.write", "simplejson.dumps", "simplejson.loads", "jsonpickle.encode"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.create_file_and_write", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path"], ["", "", "def", "store_spec", "(", "spec", ")", ":", "\n", "    ", "spec_pkl", "=", "str", "(", "Path", "(", "spec", "[", "\"model_log_dir\"", "]", ")", "/", "\"spec.pkl\"", ")", "\n", "mission_xml", "=", "str", "(", "Path", "(", "spec", "[", "\"model_log_dir\"", "]", ")", "/", "\"mission.xml\"", ")", "\n", "create_file_and_write", "(", "spec_pkl", ",", "lambda", "file", ":", "file", ".", "write", "(", "\n", "simplejson", ".", "dumps", "(", "simplejson", ".", "loads", "(", "jsonpickle", ".", "encode", "(", "spec", ")", ")", ",", "indent", "=", "4", ")", ")", ")", "\n", "copyfile", "(", "get_absolute_path", "(", "spec", "[", "'mission'", "]", ")", ",", "mission_xml", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.load_spec": [[34, 40], ["jsonpickle.decode", "open", "f.read", "file.get_absolute_path"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path"], ["", "def", "load_spec", "(", "model_log_dir", ")", ":", "\n", "    ", "with", "open", "(", "get_absolute_path", "(", "model_log_dir", ")", "+", "\"/spec.pkl\"", ",", "'rb'", ")", "as", "f", ":", "\n", "        ", "spec", "=", "f", ".", "read", "(", ")", "\n", "", "decode", "=", "jsonpickle", ".", "decode", "(", "spec", ")", "\n", "decode", "[", "'mission'", "]", "=", "decode", "[", "'model_log_dir'", "]", "+", "\"/mission.xml\"", "\n", "return", "decode", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_model_file_names_from_folder": [[42, 46], ["os.listdir", "file.get_absolute_path", "result_file.rstrip", "result_file.endswith"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path"], ["", "def", "get_model_file_names_from_folder", "(", "log_dir", ")", ":", "\n", "    ", "result_files", "=", "os", ".", "listdir", "(", "get_absolute_path", "(", "log_dir", ")", ")", "\n", "model_files", "=", "[", "result_file", ".", "rstrip", "(", "'.zip'", ")", "for", "result_file", "in", "result_files", "if", "result_file", ".", "endswith", "(", "'.zip'", ")", "]", "\n", "return", "model_files", "\n", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.linalg.rotation_matrix_y": [[4, 10], ["numpy.radians", "numpy.array", "numpy.cos", "numpy.sin"], "function", ["None"], ["def", "rotation_matrix_y", "(", "degrees", ")", ":", "\n", "    ", "theta", "=", "np", ".", "radians", "(", "degrees", ")", "\n", "c", ",", "s", "=", "np", ".", "cos", "(", "theta", ")", ",", "np", ".", "sin", "(", "theta", ")", "\n", "return", "np", ".", "array", "(", "(", "(", "c", ",", "0", ",", "s", ")", ",", "\n", "(", "0", ",", "1", ",", "0", ")", ",", "\n", "(", "-", "s", ",", "0", ",", "c", ")", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.linalg.rotation_matrix_y_2d": [[14, 19], ["numpy.radians", "numpy.array", "numpy.cos", "numpy.sin"], "function", ["None"], ["", "def", "rotation_matrix_y_2d", "(", "degrees", ")", ":", "\n", "    ", "theta", "=", "np", ".", "radians", "(", "degrees", ")", "\n", "c", ",", "s", "=", "np", ".", "cos", "(", "theta", ")", ",", "np", ".", "sin", "(", "theta", ")", "\n", "return", "np", ".", "array", "(", "(", "(", "c", ",", "-", "s", ")", ",", "\n", "(", "s", ",", "c", ")", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.get_reward_series": [[18, 32], ["list", "list", "pandas.DataFrame", "open", "csv.reader", "list.append", "list.append", "float", "float"], "function", ["None"], ["def", "get_reward_series", "(", "filename", ")", ":", "\n", "    ", "timesteps", "=", "list", "(", ")", "\n", "values", "=", "list", "(", ")", "\n", "with", "open", "(", "filename", ",", "newline", "=", "''", ")", "as", "csvfile", ":", "\n", "        ", "spamreader", "=", "csv", ".", "reader", "(", "csvfile", ",", "delimiter", "=", "','", ",", "quotechar", "=", "'|'", ")", "\n", "for", "row", "in", "spamreader", ":", "\n", "            ", "if", "row", "[", "0", "]", "==", "\"Wall time\"", ":", "\n", "                ", "continue", "\n", "", "timesteps", ".", "append", "(", "float", "(", "row", "[", "1", "]", ")", ")", "\n", "values", ".", "append", "(", "float", "(", "row", "[", "2", "]", ")", ")", "\n", "", "", "df", "=", "pd", ".", "DataFrame", "(", ")", "\n", "df", "[", "\"Timestep\"", "]", "=", "timesteps", "\n", "df", "[", "\"Mean Reward\"", "]", "=", "values", "\n", "return", "df", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.plot_reward_series": [[34, 64], ["matplotlib.style.use", "matplotlib.get_cmap", "matplotlib.figure", "data.items", "matplotlib.tight_layout", "matplotlib.show", "matplotlib.subplot", "data.items", "seaborn.lineplot", "matplotlib.ylim", "matplotlib.title", "seaborn.lineplot"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.use"], ["", "def", "plot_reward_series", "(", "data", ",", "spacing", ",", "figsize", ",", "yrange", ")", ":", "\n", "# Make a data frame", "\n", "\n", "    ", "plt", ".", "style", ".", "use", "(", "'seaborn-darkgrid'", ")", "\n", "\n", "# create a color palette", "\n", "palette", "=", "plt", ".", "get_cmap", "(", "'Set1'", ")", "\n", "\n", "# multiple line plot", "\n", "num", "=", "0", "\n", "fig", "=", "plt", ".", "figure", "(", "figsize", "=", "figsize", ")", "\n", "for", "name", ",", "values", "in", "data", ".", "items", "(", ")", ":", "\n", "        ", "num", "+=", "1", "\n", "\n", "# Find the right spot on the plot", "\n", "plt", ".", "subplot", "(", "spacing", "[", "0", "]", ",", "spacing", "[", "1", "]", ",", "num", ")", "\n", "\n", "for", "_", ",", "shadow", "in", "data", ".", "items", "(", ")", ":", "\n", "            ", "sns", ".", "lineplot", "(", "x", "=", "\"Timestep\"", ",", "y", "=", "\"Mean Reward\"", ",", "data", "=", "shadow", ",", "color", "=", "\"grey\"", ",", "alpha", "=", "0.2", ")", "\n", "# Plot the lineplot", "\n", "", "sns", ".", "lineplot", "(", "x", "=", "\"Timestep\"", ",", "y", "=", "\"Mean Reward\"", ",", "data", "=", "values", ")", "\n", "plt", ".", "ylim", "(", "(", "yrange", ")", ")", "\n", "\n", "# if num < 7:", "\n", "#     plt.xticks(ticks=[])", "\n", "#     plt.xlabel(None)", "\n", "plt", ".", "title", "(", "name", ",", "loc", "=", "'left'", ",", "fontsize", "=", "8", ",", "fontweight", "=", "0", ")", "\n", "\n", "", "plt", ".", "tight_layout", "(", ")", "\n", "plt", ".", "show", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.plot_multi_series": [[66, 84], ["seaborn.set_context", "seaborn.set_style", "matplotlib.get_cmap", "matplotlib.figure", "matplotlib.subplots", "data.items", "matplotlib.legend", "matplotlib.title", "matplotlib.tight_layout", "matplotlib.show", "seaborn.lineplot", "data.keys"], "function", ["None"], ["", "def", "plot_multi_series", "(", "data", ",", "figsize", ")", ":", "\n", "# Make a data frame", "\n", "\n", "    ", "sns", ".", "set_context", "(", "\"paper\"", ")", "\n", "sns", ".", "set_style", "(", "\"darkgrid\"", ")", "\n", "\n", "# create a color palette", "\n", "palette", "=", "plt", ".", "get_cmap", "(", "'Set1'", ")", "\n", "fig", "=", "plt", ".", "figure", "(", "figsize", "=", "figsize", ")", "\n", "f", ",", "ax", "=", "plt", ".", "subplots", "(", "1", ",", "1", ")", "\n", "\n", "for", "name", ",", "values", "in", "data", ".", "items", "(", ")", ":", "\n", "        ", "sns", ".", "lineplot", "(", "x", "=", "\"Timestep\"", ",", "y", "=", "\"Mean Reward\"", ",", "data", "=", "values", ")", "\n", "\n", "", "plt", ".", "legend", "(", "labels", "=", "data", ".", "keys", "(", ")", ")", "\n", "plt", ".", "title", "(", "\"Training mean reward over last 100 episodes\"", ",", "loc", "=", "'left'", ",", "fontsize", "=", "8", ",", "fontweight", "=", "0", ")", "\n", "plt", ".", "tight_layout", "(", ")", "\n", "plt", ".", "show", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.plot_paths": [[86, 151], ["utils.file.get_model_file_names_from_folder", "max", "enumerate", "matplotlib.xlim", "matplotlib.ylim", "xml.parse", "ET.parse.findall", "ET.parse.find", "matplotlib.gca().add_patch", "ET.parse.findall", "next", "matplotlib.gca().add_patch", "matplotlib.legend", "matplotlib.colorbar", "matplotlib.show", "plotting.plot_path", "utils.file.get_absolute_path", "mission.minecraft_types.Enemy.is_enemy", "matplotlib.gca().add_patch", "matplotlib.gca().add_patch", "float", "float", "matplotlib.Circle", "float", "float", "float", "float", "matplotlib.Rectangle", "matplotlib.lines.Line2D", "matplotlib.lines.Line2D", "matplotlib.lines.Line2D", "matplotlib.cm.ScalarMappable", "stable_baselines3.PPO.load", "float", "float", "entity.get", "matplotlib.Circle", "matplotlib.Circle", "xml_element.find.get", "xml_element.find.get", "matplotlib.gca", "next.get", "next.get", "next.get", "next.get", "matplotlib.gca", "entity.get", "entity.get", "matplotlib.gca", "matplotlib.gca", "matplotlib.colors.Normalize", "matplotlib.cm.get_cmap", "cuboid.get", "utils.file.get_project_root"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_model_file_names_from_folder", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.plot_path", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.minecraft_types.Enemy.is_enemy", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_project_root"], ["", "def", "plot_paths", "(", "spec", ",", "eval_dir", ",", "eval_name", ")", ":", "\n", "    ", "model_file_names", "=", "get_model_file_names_from_folder", "(", "spec", "[", "'model_log_dir'", "]", ")", "\n", "time_steps", "=", "[", "\n", "PPO", ".", "load", "(", "get_project_root", "(", ")", "/", "spec", "[", "'model_log_dir'", "]", "/", "model_file_name", ")", ".", "num_timesteps", "\n", "for", "model_file_name", "\n", "in", "model_file_names", "\n", "]", "\n", "max_time_steps", "=", "max", "(", "time_steps", ")", "\n", "for", "i", ",", "time_steps", "in", "enumerate", "(", "time_steps", ")", ":", "\n", "        ", "plot_path", "(", "f\"{eval_dir}/{eval_name}_{i}.json\"", ",", "time_steps", ",", "max_time_steps", ")", "\n", "\n", "", "entity_plot_size", "=", "0.5", "\n", "enemy_color", "=", "'gray'", "\n", "goal_color", "=", "'blue'", "\n", "player_color", "=", "'red'", "\n", "plt", ".", "xlim", "(", "-", "20", ",", "20", ")", "\n", "plt", ".", "ylim", "(", "-", "20", ",", "20", ")", "\n", "\n", "xml_namespaces", "=", "{", "\"Malmo\"", ":", "\"http://ProjectMalmo.microsoft.com\"", "}", "\n", "xml_element", "=", "ET", ".", "parse", "(", "get_absolute_path", "(", "spec", "[", "'mission'", "]", ")", ")", "\n", "entities", "=", "xml_element", ".", "findall", "(", "\".//Malmo:DrawEntity\"", ",", "xml_namespaces", ")", "\n", "\n", "for", "entity", "in", "entities", ":", "\n", "        ", "position", "=", "(", "float", "(", "entity", ".", "get", "(", "'x'", ")", ")", ",", "float", "(", "entity", ".", "get", "(", "'z'", ")", ")", ")", "\n", "if", "Enemy", ".", "is_enemy", "(", "entity", ".", "get", "(", "'type'", ")", ")", ":", "\n", "            ", "color", "=", "enemy_color", "\n", "entity_range", "=", "IsNotAttackedByEnemy", ".", "ENEMY_AGGRO_RANGE", "\n", "", "else", ":", "\n", "            ", "color", "=", "goal_color", "\n", "entity_range", "=", "IsCloseToEntity", ".", "RANGE", "\n", "\n", "", "plt", ".", "gca", "(", ")", ".", "add_patch", "(", "plt", ".", "Circle", "(", "position", ",", "entity_plot_size", ",", "color", "=", "color", ")", ")", "\n", "plt", ".", "gca", "(", ")", ".", "add_patch", "(", "plt", ".", "Circle", "(", "position", ",", "entity_range", ",", "color", "=", "color", ",", "fill", "=", "False", ")", ")", "\n", "\n", "", "placement", "=", "xml_element", ".", "find", "(", "\".//Malmo:Placement\"", ",", "xml_namespaces", ")", "\n", "player_position", "=", "(", "float", "(", "placement", ".", "get", "(", "'x'", ")", ")", ",", "float", "(", "placement", ".", "get", "(", "'z'", ")", ")", ")", "\n", "plt", ".", "gca", "(", ")", ".", "add_patch", "(", "plt", ".", "Circle", "(", "player_position", ",", "entity_plot_size", ",", "color", "=", "'r'", ",", "zorder", "=", "100", ")", ")", "\n", "\n", "cuboids", "=", "xml_element", ".", "findall", "(", "\".//Malmo:DrawCuboid\"", ",", "xml_namespaces", ")", "\n", "air_cube", "=", "next", "(", "(", "cuboid", "for", "cuboid", "in", "cuboids", "if", "cuboid", ".", "get", "(", "'type'", ")", "==", "'air'", ")", ",", "None", ")", "\n", "air_cube_start", "=", "(", "float", "(", "air_cube", ".", "get", "(", "'x1'", ")", ")", ",", "float", "(", "air_cube", ".", "get", "(", "'z1'", ")", ")", ")", "\n", "air_cube_end", "=", "(", "float", "(", "air_cube", ".", "get", "(", "'x2'", ")", ")", ",", "float", "(", "air_cube", ".", "get", "(", "'z2'", ")", ")", ")", "\n", "width", "=", "air_cube_end", "[", "0", "]", "-", "air_cube_start", "[", "0", "]", "\n", "height", "=", "air_cube_end", "[", "1", "]", "-", "air_cube_start", "[", "1", "]", "\n", "plt", ".", "gca", "(", ")", ".", "add_patch", "(", "\n", "plt", ".", "Rectangle", "(", "air_cube_start", ",", "width", "+", "1", ",", "height", "+", "1", ",", "linewidth", "=", "1", ",", "edgecolor", "=", "'black'", ",", "fill", "=", "False", ")", ")", "\n", "\n", "legend_elements", "=", "[", "\n", "Line2D", "(", "[", "0", "]", ",", "[", "0", "]", ",", "marker", "=", "'o'", ",", "color", "=", "'w'", ",", "label", "=", "'Start Position'", ",", "markerfacecolor", "=", "player_color", ",", "markersize", "=", "8", ")", ",", "\n", "Line2D", "(", "[", "0", "]", ",", "[", "0", "]", ",", "marker", "=", "'o'", ",", "color", "=", "'w'", ",", "label", "=", "'Goal Position'", ",", "markerfacecolor", "=", "goal_color", ",", "markersize", "=", "8", ")", ",", "\n", "Line2D", "(", "[", "0", "]", ",", "[", "0", "]", ",", "marker", "=", "'o'", ",", "color", "=", "'w'", ",", "label", "=", "'Enemy Position'", ",", "markerfacecolor", "=", "enemy_color", ",", "markersize", "=", "8", ")", "\n", "]", "\n", "\n", "# Create the figure", "\n", "plt", ".", "legend", "(", "handles", "=", "legend_elements", ",", "loc", "=", "'lower right'", ")", "\n", "\n", "plt", ".", "colorbar", "(", "\n", "plt", ".", "cm", ".", "ScalarMappable", "(", "\n", "norm", "=", "colors", ".", "Normalize", "(", "0", ",", "max_time_steps", ")", ",", "\n", "cmap", "=", "cm", ".", "get_cmap", "(", "'viridis'", ")", ",", "\n", ")", ",", "\n", "label", "=", "'Training timesteps'", "\n", ")", "\n", "\n", "plt", ".", "show", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.plot_path": [[153, 161], ["matplotlib.cm.get_cmap", "open", "jsonpickle.decode", "numpy.array", "matplotlib.plot", "utils.file.get_absolute_path", "file.read", "len", "print", "cm.get_cmap."], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path"], ["", "def", "plot_path", "(", "eval_file_name", ",", "time_steps", ",", "max_time_steps", ")", ":", "\n", "    ", "colormap", "=", "cm", ".", "get_cmap", "(", "'viridis'", ")", "\n", "with", "open", "(", "get_absolute_path", "(", "eval_file_name", ")", ",", "\"r\"", ")", "as", "file", ":", "\n", "        ", "record", "=", "jsonpickle", ".", "decode", "(", "file", ".", "read", "(", ")", ")", "\n", "positions", "=", "np", ".", "array", "(", "[", "(", "position", "[", "\"x\"", "]", ",", "position", "[", "\"z\"", "]", ")", "for", "position", "in", "record", "[", "0", "]", "[", "\"positions\"", "]", "]", ")", "\n", "if", "(", "len", "(", "positions", ")", "==", "0", ")", ":", "\n", "            ", "print", "(", "\"oi\"", ")", "\n", "", "plt", ".", "plot", "(", "positions", "[", ":", ",", "0", "]", ",", "positions", "[", ":", ",", "1", "]", ",", "color", "=", "colormap", "(", "time_steps", "/", "max_time_steps", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.plot_positions": [[163, 168], ["range", "matplotlib.savefig", "range", "plotting.plot_vector"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.plot_vector"], ["", "", "def", "plot_positions", "(", "eval_dir", ",", "eval_name", ")", ":", "\n", "    ", "for", "x", "in", "range", "(", "-", "15", ",", "16", ")", ":", "\n", "        ", "for", "z", "in", "range", "(", "-", "15", ",", "16", ")", ":", "\n", "            ", "plot_vector", "(", "f\"{eval_dir}/{eval_name}_pos_{x}_{z}.json\"", ")", "\n", "", "", "plt", ".", "savefig", "(", "\"vectors\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.plotting.plot_vector": [[170, 180], ["open", "jsonpickle.decode", "numpy.array", "min", "utils.file.get_absolute_path", "file.read", "numpy.all", "matplotlib.quiver", "len", "numpy.array", "numpy.array", "numpy.array", "numpy.array"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path"], ["", "def", "plot_vector", "(", "eval_file_name", ",", "min_delta_steps", "=", "80", ")", ":", "\n", "    ", "with", "open", "(", "get_absolute_path", "(", "eval_file_name", ")", ",", "\"r\"", ")", "as", "file", ":", "\n", "        ", "record", "=", "jsonpickle", ".", "decode", "(", "file", ".", "read", "(", ")", ")", "\n", "positions", "=", "np", ".", "array", "(", "[", "(", "position", "[", "\"x\"", "]", ",", "position", "[", "\"z\"", "]", ")", "for", "position", "in", "record", "[", "0", "]", "[", "\"positions\"", "]", "]", ")", "\n", "\n", "delta_steps", "=", "min", "(", "min_delta_steps", ",", "len", "(", "positions", ")", "-", "1", ")", "\n", "diff", "=", "positions", "[", "delta_steps", ",", ":", "]", "-", "positions", "[", "0", ",", ":", "]", "\n", "if", "not", "np", ".", "all", "(", "diff", "==", "0", ")", ":", "\n", "            ", "plt", ".", "quiver", "(", "np", ".", "array", "(", "positions", "[", "0", ",", "0", "]", ")", ",", "np", ".", "array", "(", "positions", "[", "0", ",", "1", "]", ")", ",", "np", ".", "array", "(", "diff", "[", "0", "]", ")", ",", "np", ".", "array", "(", "diff", "[", "1", "]", ")", ",", "\n", "width", "=", "0.004", ",", "headwidth", "=", "2", ",", "pivot", "=", "'mid'", ")", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.strings.tree_to_string": [[9, 32], ["isinstance", "isinstance", "strings.tree_to_string", "isinstance", "isinstance"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.strings.tree_to_string"], ["def", "tree_to_string", "(", "tree", ",", "depth", "=", "0", ")", ":", "\n", "    ", "is_running", "=", "False", "\n", "symbol", "=", "\"[B]\"", "\n", "if", "isinstance", "(", "tree", ",", "Sequence", ")", ":", "\n", "        ", "symbol", "=", "\"[>]\"", "\n", "", "elif", "isinstance", "(", "tree", ",", "Selector", ")", ":", "\n", "        ", "symbol", "=", "\"[?]\"", "\n", "", "elif", "isinstance", "(", "tree", ",", "Condition", ")", ":", "\n", "        ", "symbol", "=", "\"(C)\"", "\n", "", "elif", "isinstance", "(", "tree", ",", "Action", ")", ":", "\n", "        ", "if", "tree", ".", "status", "!=", "Status", ".", "INVALID", ":", "\n", "            ", "symbol", "=", "\"[A]\"", "\n", "is_running", "=", "True", "\n", "", "else", ":", "\n", "            ", "symbol", "=", "\"[a]\"", "\n", "", "", "indent", "=", "\"    \"", "*", "(", "depth", "-", "1", ")", "\n", "if", "is_running", ":", "\n", "        ", "indent", "=", "\"----\"", "*", "(", "depth", "-", "1", ")", "\n", "", "arrow", "=", "\"--> \"", "if", "depth", ">", "0", "else", "\"\"", "\n", "output", "=", "f\"{indent}{arrow}{symbol} {tree.name} \\n\"", "\n", "for", "child", "in", "tree", ".", "children", ":", "\n", "        ", "output", "+=", "tree_to_string", "(", "child", ",", "depth", "+", "1", ")", "\n", "", "return", "output", "\n", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.randomization.get_random_in_range": [[4, 11], ["len", "len", "random.randint", "ValueError"], "function", ["None"], ["def", "get_random_in_range", "(", "value_range", ")", ":", "\n", "    ", "if", "len", "(", "value_range", ")", "==", "1", ":", "\n", "        ", "return", "value_range", "[", "0", "]", "\n", "", "elif", "len", "(", "value_range", ")", "==", "2", ":", "\n", "        ", "return", "randint", "(", "value_range", "[", "0", "]", ",", "value_range", "[", "1", "]", ")", "\n", "", "else", ":", "\n", "        ", "raise", "ValueError", "(", "\"value_range must be a list of size 1 or 2.\"", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.visualisation.tree_to_drawio_csv": [[10, 24], ["csv.append", "visualisation.subtree_to_csv", "graph_attributes.items"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.visualisation.subtree_to_csv"], ["def", "tree_to_drawio_csv", "(", "tree", ")", ":", "\n", "    ", "graph_attributes", "=", "{", "\n", "\"label\"", ":", "\"%step%\"", ",", "\n", "\"style\"", ":", "\"shape=%shape%;fontSize=%fontsize%;spacingBottom=%spacingbottom%;\"", ",", "\n", "\"namespace\"", ":", "\"csvimport-\"", ",", "\n", "\"connect\"", ":", "'{\"from\":\"refs\", \"to\":\"id\", \"invert\":true, \"style\":\"curved=0;endArrow=blockThin;endFill=1;\"}'", ",", "\n", "\"padding\"", ":", "\"15\"", ",", "\n", "\"ignore\"", ":", "\"id,shape,fill,stroke,refs\"", "\n", "}", "\n", "csv", "=", "[", "f\"# {key}: {value}\"", "for", "key", ",", "value", "in", "graph_attributes", ".", "items", "(", ")", "]", "\n", "csv", ".", "append", "(", "\"id,step,shape,fontsize,spacingbottom,refs\"", ")", "\n", "csv", "+=", "subtree_to_csv", "(", "tree", ",", "None", ")", "\n", "\n", "return", "\"\\n\"", ".", "join", "(", "csv", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.visualisation.subtree_to_csv": [[26, 54], ["isinstance", "isinstance", "visualisation.subtree_to_csv", "isinstance", "str", "isinstance", "str"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.visualisation.subtree_to_csv"], ["", "def", "subtree_to_csv", "(", "tree", ",", "parent_id", ")", ":", "\n", "    ", "label", "=", "tree", ".", "name", "\n", "shape", "=", "\"rectangle\"", "\n", "fontsize", "=", "11", "\n", "spacing_bottom", "=", "0", "\n", "if", "isinstance", "(", "tree", ",", "BaselinesNode", ")", ":", "\n", "        ", "label", "=", "\"RL\"", "\n", "fontsize", "=", "32", "\n", "spacing_bottom", "=", "20", "\n", "", "elif", "isinstance", "(", "tree", ",", "Sequence", ")", ":", "\n", "        ", "label", "=", "\"\u2192\"", "\n", "fontsize", "=", "32", "\n", "spacing_bottom", "=", "20", "\n", "", "elif", "isinstance", "(", "tree", ",", "Selector", ")", ":", "\n", "        ", "label", "=", "\"?\"", "\n", "fontsize", "=", "32", "\n", "spacing_bottom", "=", "10", "\n", "", "elif", "isinstance", "(", "tree", ",", "Condition", ")", ":", "\n", "        ", "shape", "=", "\"ellipse\"", "\n", "", "ref", "=", "parent_id", "if", "parent_id", "is", "not", "None", "else", "\"\"", "\n", "\n", "base_csv", "=", "[", "f\"{str(tree.id)},{label},{shape},{fontsize},{spacing_bottom},{ref}\"", "]", "\n", "\n", "children_csv", "=", "[", "]", "\n", "for", "child", "in", "tree", ".", "children", ":", "\n", "        ", "child_csv", "=", "subtree_to_csv", "(", "child", ",", "str", "(", "tree", ".", "id", ")", ")", "\n", "children_csv", "+=", "child_csv", "\n", "", "return", "base_csv", "+", "children_csv", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.visualisation.save_tree_to_log": [[56, 58], ["utils.file.create_file_and_write", "file.write", "visualisation.tree_to_drawio_csv"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.create_file_and_write", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.visualisation.tree_to_drawio_csv"], ["", "def", "save_tree_to_log", "(", "tree", ",", "filename", ")", ":", "\n", "    ", "create_file_and_write", "(", "filename", ",", "lambda", "file", ":", "file", ".", "write", "(", "tree_to_drawio_csv", "(", "tree", ")", ")", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.behavior_tree_agent.BehaviorTreeAgent.__init__": [[8, 13], ["agents.malmo_agent.MalmoAgent.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent_host", ",", "observation_manager", ",", "name", "=", "\"execution/node_skeleton\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "agent_host", ")", "\n", "self", ".", "name", "=", "name", "\n", "self", ".", "observation_manager", "=", "observation_manager", "\n", "self", ".", "tree", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.behavior_tree_agent.BehaviorTreeAgent.reset": [[14, 16], ["behavior_tree_agent.BehaviorTreeAgent.observation_manager.reset"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.reset"], ["", "def", "reset", "(", "self", ")", ":", "\n", "        ", "self", ".", "observation_manager", ".", "reset", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.behavior_tree_agent.BehaviorTreeAgent.is_mission_over": [[17, 19], ["behavior_tree_agent.BehaviorTreeAgent.observation_manager.is_agent_alive"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationManager.is_agent_alive"], ["", "def", "is_mission_over", "(", "self", ")", ":", "\n", "        ", "return", "not", "self", ".", "observation_manager", ".", "is_agent_alive", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.behavior_tree_agent.BehaviorTreeAgent.control_loop": [[20, 22], ["behavior_tree_agent.BehaviorTreeAgent.tree.tick_once"], "methods", ["None"], ["", "def", "control_loop", "(", "self", ")", ":", "\n", "        ", "self", ".", "tree", ".", "tick_once", "(", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.__init__": [[5, 15], ["None"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "agent_host", ")", ":", "\n", "        ", "self", ".", "agent_host", "=", "agent_host", "\n", "self", ".", "moving", "=", "0", "\n", "self", ".", "strafing", "=", "0", "\n", "self", ".", "turning", "=", "0", "\n", "self", ".", "pitching", "=", "0", "\n", "self", ".", "jumping", "=", "0", "\n", "self", ".", "attacking", "=", "0", "\n", "self", ".", "crouching", "=", "0", "\n", "self", ".", "using", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.pause": [[16, 22], ["malmo_agent.MalmoAgent.agent_host.sendCommand", "malmo_agent.MalmoAgent.agent_host.sendCommand", "malmo_agent.MalmoAgent.agent_host.sendCommand", "malmo_agent.MalmoAgent.agent_host.sendCommand", "malmo_agent.MalmoAgent.agent_host.sendCommand"], "methods", ["None"], ["", "def", "pause", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"move 0\"", ")", "\n", "self", ".", "agent_host", ".", "sendCommand", "(", "\"turn 0\"", ")", "\n", "self", ".", "agent_host", ".", "sendCommand", "(", "\"strafe 0\"", ")", "\n", "self", ".", "agent_host", ".", "sendCommand", "(", "\"jump 0\"", ")", "\n", "self", ".", "agent_host", ".", "sendCommand", "(", "\"attack 0\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.resume": [[23, 29], ["malmo_agent.MalmoAgent.agent_host.sendCommand", "malmo_agent.MalmoAgent.agent_host.sendCommand", "malmo_agent.MalmoAgent.agent_host.sendCommand", "malmo_agent.MalmoAgent.agent_host.sendCommand", "malmo_agent.MalmoAgent.agent_host.sendCommand", "str", "str", "str", "str", "str"], "methods", ["None"], ["", "def", "resume", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"move \"", "+", "str", "(", "self", ".", "moving", ")", ")", "\n", "self", ".", "agent_host", ".", "sendCommand", "(", "\"turn \"", "+", "str", "(", "self", ".", "turning", ")", ")", "\n", "self", ".", "agent_host", ".", "sendCommand", "(", "\"strafe \"", "+", "str", "(", "self", ".", "strafing", ")", ")", "\n", "self", ".", "agent_host", ".", "sendCommand", "(", "\"jump \"", "+", "str", "(", "self", ".", "jumping", ")", ")", "\n", "self", ".", "agent_host", ".", "sendCommand", "(", "\"attack \"", "+", "str", "(", "self", ".", "attacking", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_move": [[30, 33], ["malmo_agent.MalmoAgent.agent_host.sendCommand", "str"], "methods", ["None"], ["", "def", "continuous_move", "(", "self", ",", "val", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"move \"", "+", "str", "(", "val", ")", ")", "\n", "self", ".", "moving", "=", "val", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_turn": [[34, 37], ["malmo_agent.MalmoAgent.agent_host.sendCommand", "str"], "methods", ["None"], ["", "def", "continuous_turn", "(", "self", ",", "val", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"turn \"", "+", "str", "(", "val", ")", ")", "\n", "self", ".", "turning", "=", "val", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.set_yaw": [[38, 40], ["malmo_agent.MalmoAgent.agent_host.sendCommand", "str"], "methods", ["None"], ["", "def", "set_yaw", "(", "self", ",", "val", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"setYaw \"", "+", "str", "(", "val", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_strafe": [[41, 44], ["malmo_agent.MalmoAgent.agent_host.sendCommand", "str"], "methods", ["None"], ["", "def", "continuous_strafe", "(", "self", ",", "val", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"strafe \"", "+", "str", "(", "val", ")", ")", "\n", "self", ".", "strafing", "=", "val", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_pitch": [[45, 48], ["malmo_agent.MalmoAgent.agent_host.sendCommand", "str"], "methods", ["None"], ["", "def", "continuous_pitch", "(", "self", ",", "val", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"pitch \"", "+", "str", "(", "val", ")", ")", "\n", "self", ".", "pitching", "=", "val", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.set_pitch": [[49, 51], ["malmo_agent.MalmoAgent.agent_host.sendCommand", "str"], "methods", ["None"], ["", "def", "set_pitch", "(", "self", ",", "val", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"setPitch \"", "+", "str", "(", "val", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_jump": [[52, 55], ["malmo_agent.MalmoAgent.agent_host.sendCommand", "str"], "methods", ["None"], ["", "def", "continuous_jump", "(", "self", ",", "toggle", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"jump \"", "+", "str", "(", "toggle", ")", ")", "\n", "self", ".", "jumping", "=", "toggle", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.attack": [[56, 59], ["malmo_agent.MalmoAgent.agent_host.sendCommand", "str"], "methods", ["None"], ["", "def", "attack", "(", "self", ",", "toggle", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"attack \"", "+", "str", "(", "toggle", ")", ")", "\n", "self", ".", "attacking", "=", "toggle", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.crouch": [[60, 63], ["malmo_agent.MalmoAgent.agent_host.sendCommand", "str"], "methods", ["None"], ["", "def", "crouch", "(", "self", ",", "toggle", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"crouch \"", "+", "str", "(", "toggle", ")", ")", "\n", "self", ".", "crouching", "=", "toggle", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.swap_items": [[64, 66], ["malmo_agent.MalmoAgent.agent_host.sendCommand"], "methods", ["None"], ["", "def", "swap_items", "(", "self", ",", "position1", ",", "position2", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"swapInventoryItems {0} {1}\"", ".", "format", "(", "position1", ",", "position2", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.select_on_hotbar": [[67, 71], ["malmo_agent.MalmoAgent.agent_host.sendCommand", "malmo_agent.MalmoAgent.agent_host.sendCommand", "time.sleep"], "methods", ["None"], ["", "def", "select_on_hotbar", "(", "self", ",", "position", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "f\"hotbar.{position + 1} 1\"", ")", "# press", "\n", "self", ".", "agent_host", ".", "sendCommand", "(", "f\"hotbar.{position + 1} 0\"", ")", "# release", "\n", "time", ".", "sleep", "(", "0.1", ")", "# Stupid but necessary", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.use": [[72, 83], ["malmo_agent.MalmoAgent.agent_host.sendCommand", "time.sleep", "malmo_agent.MalmoAgent.agent_host.sendCommand", "malmo_agent.MalmoAgent.agent_host.sendCommand", "time.sleep", "malmo_agent.MalmoAgent.agent_host.sendCommand", "time.sleep", "str"], "methods", ["None"], ["", "def", "use", "(", "self", ",", "toggle", "=", "None", ")", ":", "\n", "        ", "if", "toggle", "is", "None", ":", "\n", "            ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"use\"", ")", "\n", "time", ".", "sleep", "(", "0.5", ")", "# Stupid but necessary", "\n", "", "elif", "toggle", "==", "1", ":", "\n", "            ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"use \"", "+", "str", "(", "toggle", ")", ")", "\n", "self", ".", "agent_host", ".", "sendCommand", "(", "\"use 0\"", ")", "\n", "time", ".", "sleep", "(", "0.001", ")", "\n", "self", ".", "agent_host", ".", "sendCommand", "(", "\"use 0\"", ")", "\n", "time", ".", "sleep", "(", "0.5", ")", "# Stupid but necessary", "\n", "self", ".", "using", "=", "toggle", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.craft": [[84, 87], ["malmo_agent.MalmoAgent.agent_host.sendCommand", "time.sleep", "str"], "methods", ["None"], ["", "", "def", "craft", "(", "self", ",", "item", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"craft \"", "+", "str", "(", "item", ")", ")", "\n", "time", ".", "sleep", "(", "0.004", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.move_west": [[88, 90], ["malmo_agent.MalmoAgent.agent_host.sendCommand"], "methods", ["None"], ["", "def", "move_west", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"movewest 1\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.move_south": [[91, 93], ["malmo_agent.MalmoAgent.agent_host.sendCommand"], "methods", ["None"], ["", "def", "move_south", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"movesouth 1\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.move_east": [[94, 96], ["malmo_agent.MalmoAgent.agent_host.sendCommand"], "methods", ["None"], ["", "def", "move_east", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"moveeast 1\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.move_north": [[97, 99], ["malmo_agent.MalmoAgent.agent_host.sendCommand"], "methods", ["None"], ["", "def", "move_north", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"movenorth 1\"", ")", "", "", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationDefinition.__post_init__": [[39, 41], ["numpy.prod"], "methods", ["None"], ["def", "__post_init__", "(", "self", ")", ":", "\n", "        ", "self", ".", "GRID_SIZE", "=", "np", ".", "prod", "(", "self", ".", "GRID_SIZE_AXIS", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationManager.__init__": [[53, 64], ["observation_manager.RewardDefinition", "observation_manager.ObservationDefinition", "observation_manager.ObservationHelper"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "\n", "observation_filter", "=", "None", ",", "# For backwards compatibility", "\n", "reward_definition", "=", "RewardDefinition", "(", ")", ",", "\n", "observation_definition", "=", "ObservationDefinition", "(", ")", ")", ":", "\n", "        ", "self", ".", "previous_observation", "=", "None", "\n", "self", ".", "observation", "=", "None", "\n", "self", ".", "reward", "=", "0", "\n", "self", ".", "index", "=", "0", "\n", "self", ".", "reward_definition", "=", "reward_definition", "\n", "self", ".", "observation_filter", "=", "observation_filter", "# For backwards compatibility", "\n", "self", ".", "helper", "=", "ObservationHelper", "(", "observation_definition", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationManager.update": [[65, 73], ["observation_manager.Observation"], "methods", ["None"], ["", "def", "update", "(", "self", ",", "observations", ",", "reward", ")", ":", "\n", "        ", "self", ".", "previous_observation", "=", "self", ".", "observation", "\n", "self", ".", "observation", "=", "Observation", "(", "observations", ",", "self", ".", "helper", ")", "\n", "\n", "self", ".", "reward", "=", "reward", "\n", "\n", "self", ".", "index", "+=", "1", "\n", "return", "self", ".", "observation", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationManager.get_observation_space": [[74, 76], ["observation_manager.Observation.get_observation_space"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.get_observation_space"], ["", "def", "get_observation_space", "(", "self", ",", "observation_filter", ")", ":", "\n", "        ", "return", "Observation", ".", "get_observation_space", "(", "self", ".", "helper", ".", "definition", ",", "observation_filter", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationManager.reset": [[77, 82], ["None"], "methods", ["None"], ["", "def", "reset", "(", "self", ")", ":", "\n", "        ", "self", ".", "previous_observation", "=", "None", "\n", "self", ".", "observation", "=", "None", "\n", "self", ".", "reward", "=", "0", "\n", "self", ".", "index", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationManager.is_agent_alive": [[83, 85], ["None"], "methods", ["None"], ["", "def", "is_agent_alive", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "observation", ".", "dict", "[", "\"health\"", "]", ">", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationManager.get_position": [[86, 88], ["None"], "methods", ["None"], ["", "def", "get_position", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "observation", ".", "dict", "[", "\"position\"", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.Observation.__init__": [[92, 161], ["json.loads", "helper.get_player_position", "helper.get_direction_vector", "helper.get_euler_direction", "helper.get_entity_info", "helper.get_standardized_rotated_position", "helper.get_yaw", "helper.get_relative_position", "numpy.radians", "numpy.array", "numpy.array", "numpy.array", "helper.get_entity_info", "helper.get_standardized_rotated_position", "helper.get_relative_position", "numpy.radians", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "numpy.array", "json.loads.get", "print", "print", "helper.get_entity_info", "helper.get_item_inventory_index", "helper.get_simplified_surroundings().reshape", "numpy.zeros().reshape", "len", "helper.get_y_rotation_from", "helper.get_y_rotation_from", "helper.get_entity_info.get", "helper.get_entity_position", "numpy.linalg.norm", "mission.minecraft_types.Enemy.is_enemy", "helper.get_entity_position", "numpy.linalg.norm", "json.loads.get", "json.loads.get", "helper.get_simplified_surroundings", "numpy.zeros", "numpy.array", "numpy.cos", "numpy.sin", "json.loads.keys", "json.loads.get().get", "numpy.array", "numpy.cos", "numpy.sin", "json.loads.get"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_player_position", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_direction_vector", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_euler_direction", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_entity_info", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_standardized_rotated_position", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_yaw", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_relative_position", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_entity_info", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_standardized_rotated_position", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_relative_position", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_entity_info", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_item_inventory_index", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_y_rotation_from", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_y_rotation_from", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_entity_position", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.minecraft_types.Enemy.is_enemy", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_entity_position", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_simplified_surroundings"], ["    ", "def", "__init__", "(", "self", ",", "observations", ",", "helper", ")", ":", "\n", "        ", "self", ".", "definition", "=", "helper", ".", "definition", "\n", "\n", "if", "observations", "is", "None", "or", "len", "(", "observations", ")", "==", "0", ":", "\n", "            ", "print", "(", "\"Observations is null or empty\"", ")", "\n", "return", "\n", "\n", "", "info_json", "=", "observations", "[", "-", "1", "]", ".", "text", "\n", "if", "info_json", "is", "None", ":", "\n", "            ", "print", "(", "\"Info is null\"", ")", "\n", "return", "\n", "\n", "", "info", "=", "json", ".", "loads", "(", "info_json", ")", "\n", "\n", "observation_dict", "=", "{", "}", "\n", "\n", "position", "=", "helper", ".", "get_player_position", "(", "info", ")", "\n", "direction", "=", "helper", ".", "get_direction_vector", "(", "info", ")", "\n", "self", ".", "euler_direction", "=", "helper", ".", "get_euler_direction", "(", "info", ")", "\n", "observation_dict", "[", "\"position\"", "]", "=", "position", "\n", "observation_dict", "[", "\"direction\"", "]", "=", "direction", "\n", "observation_dict", "[", "\"euler_direction\"", "]", "=", "self", ".", "euler_direction", "\n", "\n", "enemy_info", "=", "helper", ".", "get_entity_info", "(", "info", ",", "[", "helper", ".", "definition", ".", "ENEMY_TYPE", "]", ")", "\n", "observation_dict", "[", "\"enemy\"", "]", "=", "enemy_info", "\n", "rotated_position", "=", "helper", ".", "get_standardized_rotated_position", "(", "enemy_info", ",", "position", ",", "direction", ")", "\n", "observation_dict", "[", "\"enemy_relative_position\"", "]", "=", "rotated_position", "\n", "\n", "yaw", "=", "helper", ".", "get_yaw", "(", "info", ")", "\n", "enemy_delta", "=", "helper", ".", "get_relative_position", "(", "enemy_info", ",", "position", ")", "\n", "enemy_rot", "=", "np", ".", "radians", "(", "helper", ".", "get_y_rotation_from", "(", "position", ",", "helper", ".", "get_entity_position", "(", "enemy_info", ")", ")", "-", "yaw", ")", "\n", "observation_dict", "[", "\"enemy_rot\"", "]", "=", "enemy_rot", "\n", "observation_dict", "[", "\"enemy_relative_distance\"", "]", "=", "np", ".", "array", "(", "\n", "[", "np", ".", "linalg", ".", "norm", "(", "np", ".", "array", "(", "enemy_delta", "[", "0", "]", ",", "enemy_delta", "[", "2", "]", ")", ")", "/", "self", ".", "definition", ".", "RELATIVE_DISTANCE_AXIS_MAX", "]", ")", "\n", "observation_dict", "[", "\"enemy_relative_direction\"", "]", "=", "np", ".", "array", "(", "[", "(", "(", "np", ".", "cos", "(", "enemy_rot", ")", "+", "1", ")", "/", "2", ")", ",", "(", "(", "np", ".", "sin", "(", "enemy_rot", ")", "+", "1", ")", "/", "2", ")", ",", "]", ")", "\n", "observation_dict", "[", "\"enemy_targeted\"", "]", "=", "np", ".", "array", "(", "\n", "[", "'LineOfSight'", "in", "info", ".", "keys", "(", ")", "and", "Enemy", ".", "is_enemy", "(", "info", ".", "get", "(", "\"LineOfSight\"", ")", ".", "get", "(", "\"type\"", ")", ")", "]", ")", "\n", "\n", "food_info", "=", "helper", ".", "get_entity_info", "(", "info", ",", "self", ".", "definition", ".", "FOOD_TYPES", ")", "\n", "entity_info", "=", "helper", ".", "get_entity_info", "(", "info", ",", "[", "self", ".", "definition", ".", "ANIMAL_TYPE", "]", ")", "if", "food_info", "is", "None", "else", "food_info", "\n", "observation_dict", "[", "\"entity_relative_position\"", "]", "=", "helper", ".", "get_standardized_rotated_position", "(", "entity_info", ",", "position", ",", "\n", "direction", ")", "\n", "\n", "entity_delta", "=", "helper", ".", "get_relative_position", "(", "entity_info", ",", "position", ")", "\n", "entity_rot", "=", "np", ".", "radians", "(", "helper", ".", "get_y_rotation_from", "(", "position", ",", "helper", ".", "get_entity_position", "(", "entity_info", ")", ")", "-", "yaw", ")", "\n", "observation_dict", "[", "\"entity_relative_distance\"", "]", "=", "np", ".", "array", "(", "\n", "[", "np", ".", "linalg", ".", "norm", "(", "np", ".", "array", "(", "entity_delta", "[", "0", "]", ",", "entity_delta", "[", "2", "]", ")", ")", "/", "self", ".", "definition", ".", "RELATIVE_DISTANCE_AXIS_MAX", "]", ")", "\n", "observation_dict", "[", "\"entity_relative_direction\"", "]", "=", "np", ".", "array", "(", "[", "(", "(", "np", ".", "cos", "(", "entity_rot", ")", "+", "1", ")", "/", "2", ")", ",", "(", "(", "np", ".", "sin", "(", "entity_rot", ")", "+", "1", ")", "/", "2", ")", ",", "]", ")", "\n", "\n", "observation_dict", "[", "\"health\"", "]", "=", "np", ".", "array", "(", "[", "info", ".", "get", "(", "\"Life\"", ",", "0", ")", "/", "self", ".", "definition", ".", "PLAYER_MAX_LIFE", "]", ")", "\n", "observation_dict", "[", "\"satiation\"", "]", "=", "np", ".", "array", "(", "[", "info", ".", "get", "(", "\"Food\"", ",", "0", ")", "/", "self", ".", "definition", ".", "PLAYER_MAX_FOOD", "]", ")", "\n", "\n", "enemy_health", "=", "enemy_info", ".", "get", "(", "\"life\"", ",", "0", ")", "/", "self", ".", "definition", ".", "ENEMY_MAX_LIFE", "if", "enemy_info", "is", "not", "None", "else", "0", "\n", "observation_dict", "[", "\"enemy_health\"", "]", "=", "np", ".", "array", "(", "[", "enemy_health", "]", ")", "\n", "\n", "entity_visible", "=", "1", "if", "entity_info", "is", "not", "None", "else", "0", "\n", "observation_dict", "[", "\"entity_visible\"", "]", "=", "np", ".", "array", "(", "[", "entity_visible", "]", ")", "\n", "\n", "observation_dict", "[", "\"is_entity_pickable\"", "]", "=", "1", "if", "food_info", "is", "not", "None", "else", "0", "\n", "observation_dict", "[", "\"has_food\"", "]", "=", "helper", ".", "get_item_inventory_index", "(", "info", ",", "self", ".", "definition", ".", "FOOD_TYPES", ")", ">", "0", "\n", "\n", "surroundings_list", "=", "info", ".", "get", "(", "\"Surroundings\"", ")", "\n", "if", "surroundings_list", "is", "not", "None", ":", "\n", "            ", "surroundings", "=", "helper", ".", "get_simplified_surroundings", "(", "surroundings_list", ")", ".", "reshape", "(", "self", ".", "definition", ".", "GRID_SIZE_AXIS", ")", "\n", "", "else", ":", "\n", "            ", "surroundings", "=", "np", ".", "zeros", "(", "self", ".", "definition", ".", "GRID_SIZE", ")", ".", "reshape", "(", "self", ".", "definition", ".", "GRID_SIZE_AXIS", ")", "\n", "", "observation_dict", "[", "\"surroundings\"", "]", "=", "surroundings", "\n", "\n", "self", ".", "dict", "=", "observation_dict", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.Observation.get_filtered": [[162, 167], ["numpy.rot90().ravel", "observation_manager.Observation.dict.items", "numpy.rot90", "int"], "methods", ["None"], ["", "def", "get_filtered", "(", "self", ",", "observation_filter", ")", ":", "\n", "        ", "filtered", "=", "{", "key", ":", "value", "for", "key", ",", "value", "in", "self", ".", "dict", ".", "items", "(", ")", "if", "key", "in", "observation_filter", "}", "\n", "surroundings", "=", "filtered", "[", "\"surroundings\"", "]", "\n", "filtered", "[", "\"surroundings\"", "]", "=", "np", ".", "rot90", "(", "surroundings", ",", "int", "(", "(", "self", ".", "euler_direction", "[", "0", "]", "+", "45", ")", "/", "90", ")", "+", "2", ",", "axes", "=", "(", "1", ",", "2", ")", ")", ".", "ravel", "(", ")", "\n", "return", "filtered", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.Observation.get_observation_space": [[168, 194], ["gym.spaces.Box", "gym.spaces.Box", "gym.spaces.Box", "gym.spaces.Box", "gym.spaces.Box", "gym.spaces.Box", "gym.spaces.Box", "gym.spaces.Box", "gym.spaces.Box", "gym.spaces.Box", "gym.spaces.Box", "gym.spaces.Box", "gym.spaces.Discrete", "gym.spaces.Discrete", "gym.spaces.Box", "gym.spaces.Dict", "gym.spaces.Dict", "full_space.items"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "get_observation_space", "(", "observation_definition", ",", "observation_filter", "=", "None", ")", ":", "\n", "        ", "full_space", "=", "{", "\n", "\"entity_relative_position\"", ":", "Box", "(", "-", "1", ",", "1", ",", "(", "3", ",", ")", ")", ",", "\n", "\"entity_relative_distance\"", ":", "Box", "(", "0", ",", "1", ",", "(", "1", ",", ")", ")", ",", "\n", "\"entity_relative_direction\"", ":", "Box", "(", "0", ",", "1", ",", "(", "2", ",", ")", ")", ",", "\n", "\n", "\"enemy_relative_position\"", ":", "Box", "(", "-", "1", ",", "1", ",", "(", "3", ",", ")", ")", ",", "\n", "\"enemy_relative_distance\"", ":", "Box", "(", "0", ",", "1", ",", "(", "1", ",", ")", ")", ",", "\n", "\"enemy_relative_direction\"", ":", "Box", "(", "0", ",", "1", ",", "(", "2", ",", ")", ")", ",", "\n", "\"enemy_targeted\"", ":", "Box", "(", "0", ",", "1", ",", "(", "1", ",", ")", ",", "dtype", "=", "np", ".", "uint8", ")", ",", "\n", "\n", "\"direction\"", ":", "Box", "(", "0", ",", "1", ",", "(", "3", ",", ")", ")", ",", "\n", "\"health\"", ":", "Box", "(", "0", ",", "1", ",", "(", "1", ",", ")", ")", ",", "\n", "\"satiation\"", ":", "Box", "(", "0", ",", "1", ",", "(", "1", ",", ")", ")", ",", "\n", "\"enemy_health\"", ":", "Box", "(", "0", ",", "1", ",", "(", "1", ",", ")", ")", ",", "\n", "\"entity_visible\"", ":", "Box", "(", "0", ",", "1", ",", "(", "1", ",", ")", ",", "dtype", "=", "np", ".", "uint8", ")", ",", "\n", "\"is_entity_pickable\"", ":", "Discrete", "(", "2", ")", ",", "\n", "\"has_food\"", ":", "Discrete", "(", "2", ")", ",", "\n", "\"surroundings\"", ":", "Box", "(", "0", ",", "2", ",", "(", "observation_definition", ".", "GRID_SIZE", ",", ")", ",", "dtype", "=", "np", ".", "uint8", ")", "\n", "}", "\n", "if", "observation_filter", "is", "None", ":", "\n", "            ", "return", "Dict", "(", "spaces", "=", "full_space", ")", "\n", "", "else", ":", "\n", "            ", "reduced_space", "=", "{", "key", ":", "value", "for", "key", ",", "value", "in", "full_space", ".", "items", "(", ")", "if", "key", "in", "observation_filter", "}", "\n", "return", "Dict", "(", "spaces", "=", "reduced_space", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.__init__": [[197, 199], ["None"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "observation_definition", ")", ":", "\n", "        ", "self", ".", "definition", "=", "observation_definition", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_entity_info": [[200, 206], ["entity.get"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "get_entity_info", "(", "info", ",", "entity_names", ")", ":", "\n", "        ", "if", "\"Entities\"", "in", "info", ":", "\n", "            ", "for", "entity", "in", "info", "[", "\"Entities\"", "]", ":", "\n", "                ", "if", "entity", ".", "get", "(", "\"name\"", ")", "in", "entity_names", ":", "\n", "                    ", "return", "entity", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_yaw": [[207, 211], ["observation_manager.ObservationHelper.bound_degrees"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.bound_degrees"], ["", "", "", "", "def", "get_yaw", "(", "self", ",", "info", ")", ":", "\n", "        ", "if", "\"Yaw\"", "in", "info", ":", "\n", "            ", "return", "self", ".", "bound_degrees", "(", "info", "[", "\"Yaw\"", "]", ")", "\n", "", "return", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.bound_degrees": [[212, 220], ["None"], "methods", ["None"], ["", "def", "bound_degrees", "(", "self", ",", "yaw", ")", ":", "\n", "        ", "if", "180", "<", "yaw", "<", "-", "180", ":", "\n", "            ", "yaw", "=", "yaw", "%", "self", ".", "definition", ".", "CIRCLE_DEGREES", "\n", "\n", "", "if", "yaw", "<", "0", ":", "\n", "            ", "yaw", "=", "self", ".", "definition", ".", "CIRCLE_DEGREES", "+", "yaw", "\n", "\n", "", "return", "yaw", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_pitch": [[221, 224], ["info.get"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "get_pitch", "(", "info", ")", ":", "\n", "        ", "return", "info", ".", "get", "(", "\"Pitch\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_direction_vector": [[225, 241], ["observation_manager.ObservationHelper.get_yaw", "observation_manager.ObservationHelper.get_pitch", "observation_manager.ObservationHelper.degrees_to_radians", "observation_manager.ObservationHelper.degrees_to_radians", "numpy.array", "numpy.zeros", "numpy.cos", "numpy.sin", "numpy.cos", "numpy.cos", "numpy.sin"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_yaw", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_pitch", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.degrees_to_radians", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.degrees_to_radians"], ["", "def", "get_direction_vector", "(", "self", ",", "info", ")", ":", "\n", "        ", "yaw", "=", "self", ".", "get_yaw", "(", "info", ")", "\n", "pitch", "=", "self", ".", "get_pitch", "(", "info", ")", "\n", "\n", "if", "yaw", "is", "None", "or", "pitch", "is", "None", ":", "\n", "            ", "return", "np", ".", "zeros", "(", "3", ")", "\n", "\n", "", "yaw_radians", "=", "self", ".", "degrees_to_radians", "(", "yaw", ")", "\n", "pitch_radians", "=", "self", ".", "degrees_to_radians", "(", "pitch", ")", "\n", "\n", "direction_vector", "=", "np", ".", "array", "(", "[", "\n", "-", "np", ".", "sin", "(", "yaw_radians", ")", "*", "np", ".", "cos", "(", "pitch_radians", ")", ",", "\n", "-", "np", ".", "sin", "(", "pitch_radians", ")", ",", "\n", "np", ".", "cos", "(", "yaw_radians", ")", "*", "np", ".", "cos", "(", "pitch_radians", ")", ",", "\n", "]", ")", "\n", "return", "direction_vector", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_euler_direction": [[242, 250], ["observation_manager.ObservationHelper.get_yaw", "observation_manager.ObservationHelper.get_pitch", "numpy.zeros"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_yaw", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_pitch"], ["", "def", "get_euler_direction", "(", "self", ",", "info", ")", ":", "\n", "        ", "yaw", "=", "self", ".", "get_yaw", "(", "info", ")", "\n", "pitch", "=", "self", ".", "get_pitch", "(", "info", ")", "\n", "\n", "if", "yaw", "is", "None", "or", "pitch", "is", "None", ":", "\n", "            ", "return", "np", ".", "zeros", "(", "3", ")", "\n", "\n", "", "return", "[", "yaw", ",", "pitch", ",", "0", "]", "# yaw, pitch, roll", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.degrees_to_radians": [[251, 254], ["None"], "methods", ["None"], ["", "def", "degrees_to_radians", "(", "self", ",", "deg", ")", ":", "\n", "        ", "half_circle", "=", "self", ".", "definition", ".", "CIRCLE_DEGREES", "/", "2", "\n", "return", "deg", "*", "np", ".", "pi", "/", "half_circle", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_surroundings": [[255, 258], ["numpy.array", "observation_manager.ObservationHelper.get_game_object_ordinal"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_game_object_ordinal"], ["", "def", "get_surroundings", "(", "self", ",", "grid", ")", ":", "\n", "        ", "grid_ordinals", "=", "[", "self", ".", "get_game_object_ordinal", "(", "block", ")", "for", "block", "in", "grid", "]", "\n", "return", "np", ".", "array", "(", "grid_ordinals", ",", "dtype", "=", "np", ".", "float32", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_game_object_ordinal": [[259, 267], ["print", "observation_manager.ObservationHelper.definition.GAME_OBJECTS.index"], "methods", ["None"], ["", "def", "get_game_object_ordinal", "(", "self", ",", "game_object", ")", ":", "\n", "        ", "if", "game_object", "is", "None", ":", "\n", "            ", "return", "0", "\n", "", "if", "game_object", "not", "in", "self", ".", "definition", ".", "GAME_OBJECTS", ":", "\n", "            ", "print", "(", "f\"Object {game_object} has not been added to the game objects list\"", ")", "\n", "return", "0", "\n", "", "else", ":", "\n", "            ", "return", "self", ".", "definition", ".", "GAME_OBJECTS", ".", "index", "(", "game_object", ")", "+", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_simplified_surroundings": [[268, 272], ["numpy.array", "mission.minecraft_types.Block.get_simplified_game_object_ordinal"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.minecraft_types.Block.get_simplified_game_object_ordinal"], ["", "", "@", "staticmethod", "\n", "def", "get_simplified_surroundings", "(", "grid", ")", ":", "\n", "        ", "grid_ordinals", "=", "[", "Block", ".", "get_simplified_game_object_ordinal", "(", "block", ")", "for", "block", "in", "grid", "]", "\n", "return", "np", ".", "array", "(", "grid_ordinals", ",", "dtype", "=", "np", ".", "float32", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_relative_position": [[273, 287], ["observation_manager.ObservationHelper.get_entity_position", "numpy.array", "numpy.clip", "numpy.ones", "numpy.ones", "numpy.ones"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_entity_position"], ["", "def", "get_relative_position", "(", "self", ",", "entity_info", ",", "player_position", ")", ":", "\n", "        ", "if", "player_position", "is", "None", ":", "\n", "            ", "return", "self", ".", "definition", ".", "RELATIVE_DISTANCE_AXIS_MAX", "*", "np", ".", "ones", "(", "3", ")", "\n", "", "if", "entity_info", "is", "None", ":", "\n", "            ", "return", "self", ".", "definition", ".", "RELATIVE_DISTANCE_AXIS_MAX", "*", "np", ".", "ones", "(", "3", ")", "\n", "\n", "", "entity_position_list", "=", "self", ".", "get_entity_position", "(", "entity_info", ")", "\n", "if", "None", "in", "entity_position_list", ":", "\n", "            ", "return", "self", ".", "definition", ".", "RELATIVE_DISTANCE_AXIS_MAX", "*", "np", ".", "ones", "(", "3", ")", "\n", "\n", "", "entity_position", "=", "np", ".", "array", "(", "entity_position_list", ")", "\n", "relative_position", "=", "entity_position", "-", "player_position", "\n", "return", "np", ".", "clip", "(", "relative_position", ",", "-", "self", ".", "definition", ".", "RELATIVE_DISTANCE_AXIS_MAX", ",", "\n", "self", ".", "definition", ".", "RELATIVE_DISTANCE_AXIS_MAX", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_entity_position": [[288, 293], ["entity_info.get", "entity_info.get", "entity_info.get"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "get_entity_position", "(", "entity_info", ")", ":", "\n", "        ", "if", "entity_info", "is", "not", "None", ":", "\n", "            ", "return", "[", "entity_info", ".", "get", "(", "\"x\"", ")", ",", "entity_info", ".", "get", "(", "\"y\"", ")", ",", "entity_info", ".", "get", "(", "\"z\"", ")", "]", "\n", "", "return", "[", "0", ",", "0", ",", "0", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_standardized_rotated_position": [[294, 316], ["observation_manager.ObservationHelper.get_relative_position", "numpy.delete", "numpy.linalg.norm", "numpy.array", "numpy.delete", "numpy.linalg.norm", "numpy.arccos", "numpy.clip", "numpy.dot", "numpy.array", "numpy.dot", "numpy.cos", "numpy.sin"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_relative_position"], ["", "def", "get_standardized_rotated_position", "(", "self", ",", "entity_info", ",", "player_position", ",", "direction", ")", ":", "\n", "        ", "relative_position", "=", "self", ".", "get_relative_position", "(", "entity_info", ",", "player_position", ")", "\n", "\n", "flat_direction_vector", "=", "np", ".", "delete", "(", "direction", ",", "1", ")", "\n", "flat_direction_norm", "=", "np", ".", "linalg", ".", "norm", "(", "flat_direction_vector", ")", "\n", "\n", "if", "flat_direction_norm", "!=", "0", ":", "\n", "            ", "flat_direction_vector", "/=", "flat_direction_norm", "\n", "", "side_direction_vector", "=", "np", ".", "array", "(", "[", "flat_direction_vector", "[", "1", "]", ",", "-", "flat_direction_vector", "[", "0", "]", "]", ")", "\n", "\n", "flat_relative_position", "=", "np", ".", "delete", "(", "relative_position", ",", "1", ")", "\n", "relative_position_length", "=", "np", ".", "linalg", ".", "norm", "(", "flat_relative_position", ")", "\n", "if", "relative_position_length", "!=", "0", ":", "\n", "            ", "relative_position_normalized", "=", "flat_relative_position", "/", "relative_position_length", "\n", "", "else", ":", "\n", "            ", "relative_position_normalized", "=", "flat_relative_position", "\n", "\n", "", "angle", "=", "np", ".", "arccos", "(", "np", ".", "dot", "(", "relative_position_normalized", ",", "flat_direction_vector", ")", ")", "\n", "sign", "=", "1", "if", "np", ".", "dot", "(", "relative_position_normalized", ",", "side_direction_vector", ")", ">", "0", "else", "-", "1", "\n", "rotated_position", "=", "relative_position_length", "*", "np", ".", "array", "(", "[", "np", ".", "cos", "(", "angle", ")", ",", "0", ",", "-", "sign", "*", "np", ".", "sin", "(", "angle", ")", "]", ")", "\n", "\n", "return", "np", ".", "clip", "(", "rotated_position", "/", "self", ".", "definition", ".", "RELATIVE_DISTANCE_AXIS_MAX", ",", "-", "1", ",", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_player_position": [[317, 322], ["info.get", "info.get", "info.get", "numpy.array"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "get_player_position", "(", "info", ")", ":", "\n", "        ", "player_position_list", "=", "[", "info", ".", "get", "(", "\"XPos\"", ")", ",", "info", ".", "get", "(", "\"YPos\"", ")", ",", "info", ".", "get", "(", "\"ZPos\"", ")", "]", "\n", "player_position", "=", "[", "0", ",", "0", ",", "0", "]", "if", "None", "in", "player_position_list", "else", "np", ".", "array", "(", "player_position_list", ")", "\n", "return", "player_position", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_item_inventory_index": [[323, 332], ["inventory_slot.get", "inventory_slot.get"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "get_item_inventory_index", "(", "info", ",", "items", ")", ":", "\n", "        ", "if", "\"inventory\"", "in", "info", ":", "\n", "            ", "for", "inventory_slot", "in", "info", "[", "\"inventory\"", "]", ":", "\n", "                ", "if", "inventory_slot", ".", "get", "(", "\"type\"", ")", "in", "items", ":", "\n", "                    ", "return", "inventory_slot", ".", "get", "(", "\"index\"", ",", "-", "1", ")", "+", "1", "\n", "", "", "return", "0", "\n", "", "else", ":", "\n", "            ", "return", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.get_y_rotation_from": [[333, 340], ["observation_manager.ObservationHelper.bound_degrees", "numpy.arctan2"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationHelper.bound_degrees"], ["", "", "def", "get_y_rotation_from", "(", "self", ",", "a", ",", "b", ")", ":", "\n", "        ", "if", "a", "is", "not", "None", "and", "b", "is", "not", "None", ":", "\n", "            ", "dx", "=", "b", "[", "0", "]", "-", "a", "[", "0", "]", "\n", "dz", "=", "b", "[", "2", "]", "-", "a", "[", "2", "]", "\n", "yaw", "=", "-", "180", "*", "np", ".", "arctan2", "(", "dx", ",", "dz", ")", "/", "np", ".", "pi", "\n", "return", "self", ".", "bound_degrees", "(", "yaw", ")", "\n", "", "return", "0", "\n", "", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.__init__": [[47, 64], ["isinstance", "list", "list", "mission_manager.create_mission", "mission_manager.create_mission", "list.append", "list.append", "mission_manager.read_mission", "mission_manager.read_mission"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.create_mission", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.create_mission", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.read_mission", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.read_mission"], ["    ", "def", "__init__", "(", "self", ",", "agent_host", ":", "MalmoPython", ".", "AgentHost", ",", "filename", "=", "None", ",", "logging", "=", "0", ")", ":", "\n", "        ", "self", ".", "agent_host", "=", "agent_host", "\n", "self", ".", "counter", "=", "0", "\n", "self", ".", "logging", "=", "logging", "\n", "\n", "if", "filename", "is", "not", "None", ":", "\n", "            ", "if", "isinstance", "(", "filename", ",", "list", ")", ":", "\n", "                ", "missions", "=", "list", "(", ")", "\n", "records", "=", "list", "(", ")", "\n", "for", "name", "in", "filename", ":", "\n", "                    ", "mission", ",", "record", "=", "create_mission", "(", "read_mission", "(", "name", ")", ")", "\n", "missions", ".", "append", "(", "mission", ")", "\n", "records", ".", "append", "(", "record", ")", "\n", "", "self", ".", "mission", "=", "missions", "\n", "self", ".", "mission_record", "=", "records", "\n", "", "else", ":", "\n", "                ", "self", ".", "mission", ",", "self", ".", "mission_record", "=", "create_mission", "(", "read_mission", "(", "filename", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.start_mission": [[65, 110], ["builtins.range", "mission_manager.MissionManager.agent_host.getWorldState", "print", "print", "isinstance", "print", "time.sleep", "mission_manager.MissionManager.agent_host.getWorldState", "mission_manager.MissionManager.agent_host.startMission", "mission_manager.MissionManager.agent_host.startMission", "print", "print", "len", "exit", "time.sleep", "print", "print"], "methods", ["None"], ["", "", "", "def", "start_mission", "(", "self", ")", ":", "\n", "# Attempt to start a mission:", "\n", "        ", "max_retries", "=", "MAX_RETRIES", "\n", "\n", "world_state", "=", "None", "\n", "for", "retry", "in", "range", "(", "MAX_RETRIES", ")", ":", "\n", "            ", "try", ":", "\n", "                ", "if", "isinstance", "(", "self", ".", "mission", ",", "list", ")", ":", "\n", "                    ", "i", "=", "self", ".", "counter", "%", "len", "(", "self", ".", "mission", ")", "\n", "self", ".", "agent_host", ".", "startMission", "(", "self", ".", "mission", "[", "i", "]", ",", "self", ".", "mission_record", "[", "i", "]", ")", "\n", "self", ".", "counter", "=", "self", ".", "counter", "+", "1", "\n", "", "else", ":", "\n", "                    ", "self", ".", "agent_host", ".", "startMission", "(", "self", ".", "mission", ",", "self", ".", "mission_record", ")", "\n", "", "break", "\n", "", "except", "RuntimeError", "as", "e", ":", "\n", "                ", "if", "retry", "==", "max_retries", "-", "1", ":", "\n", "                    ", "if", "self", ".", "logging", ">", "0", ":", "\n", "                        ", "print", "(", "\"Error starting mission:\"", ",", "e", ")", "\n", "", "exit", "(", "1", ")", "\n", "", "else", ":", "\n", "                    ", "if", "self", ".", "logging", ">", "0", ":", "\n", "                        ", "print", "(", "\"Failed to connect to mission, retrying after 100 milliseconds: \"", ",", "e", ")", "\n", "", "time", ".", "sleep", "(", "WAIT_INTERVAL", ")", "\n", "", "", "if", "self", ".", "logging", ">", "0", ":", "\n", "                ", "print", "(", "\"Waiting for the mission to start \"", ",", "end", "=", "' '", ")", "\n", "", "world_state", "=", "self", ".", "agent_host", ".", "getWorldState", "(", ")", "\n", "\n", "wait_counter", "=", "0", "\n", "while", "not", "world_state", ".", "has_mission_begun", ":", "\n", "                ", "if", "self", ".", "logging", ">", "0", ":", "\n", "                    ", "print", "(", "\".\"", ",", "end", "=", "\"\"", ")", "\n", "", "wait_counter", "+=", "1", "\n", "time", ".", "sleep", "(", "WAIT_INTERVAL", ")", "\n", "world_state", "=", "self", ".", "agent_host", ".", "getWorldState", "(", ")", "\n", "\n", "for", "error", "in", "world_state", ".", "errors", ":", "\n", "                    ", "print", "(", "\"Error:\"", ",", "error", ".", "text", ")", "\n", "\n", "", "if", "wait_counter", ">", "WAIT_FOR_SECONDS", "/", "WAIT_INTERVAL", ":", "\n", "                    ", "break", "\n", "", "", "", "if", "self", ".", "logging", ">", "0", ":", "\n", "            ", "print", "(", ")", "\n", "print", "(", "\"Running mission\"", ",", "end", "=", "' '", ")", "\n", "\n", "", "return", "world_state", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.enable_ai": [[111, 113], ["mission_manager.MissionManager.agent_host.sendCommand"], "methods", ["None"], ["", "def", "enable_ai", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"chat /entitydata @e {NoAI:0}\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.disable_ai": [[114, 116], ["mission_manager.MissionManager.agent_host.sendCommand"], "methods", ["None"], ["", "def", "disable_ai", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"chat /entitydata @e {NoAI:1}\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.activate_night_vision": [[117, 119], ["mission_manager.MissionManager.agent_host.sendCommand"], "methods", ["None"], ["", "def", "activate_night_vision", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"chat /effect @p night_vision 99999 255\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.set_fire_eternal": [[120, 122], ["mission_manager.MissionManager.agent_host.sendCommand"], "methods", ["None"], ["", "def", "set_fire_eternal", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"chat /gamerule doFireTick false\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.make_hungry": [[123, 125], ["mission_manager.MissionManager.agent_host.sendCommand"], "methods", ["None"], ["", "def", "make_hungry", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"chat /effect @p hunger 5 255\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.quit": [[126, 128], ["mission_manager.MissionManager.agent_host.sendCommand"], "methods", ["None"], ["", "def", "quit", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent_host", ".", "sendCommand", "(", "\"quit\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.randomize_start_position": [[130, 137], ["utils.randomization.get_random_in_range", "utils.randomization.get_random_in_range", "utils.randomization.get_random_in_range", "print", "mission_manager.MissionManager.mission.startAt"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.randomization.get_random_in_range", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.randomization.get_random_in_range", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.randomization.get_random_in_range"], ["", "def", "randomize_start_position", "(", "self", ",", "ranges", ")", ":", "\n", "        ", "if", "ranges", ":", "\n", "            ", "x", "=", "get_random_in_range", "(", "ranges", "[", "'x'", "]", ")", "\n", "y", "=", "get_random_in_range", "(", "ranges", "[", "'y'", "]", ")", "\n", "z", "=", "get_random_in_range", "(", "ranges", "[", "'z'", "]", ")", "\n", "print", "(", "f\"Set start position to {x} {y} {z}.\"", ")", "\n", "self", ".", "mission", ".", "startAt", "(", "x", ",", "y", ",", "z", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.randomize_entity_positions": [[139, 143], ["entity_ranges.items", "mission_manager.MissionManager.randomize_entity_position"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.randomize_entity_position"], ["", "", "def", "randomize_entity_positions", "(", "self", ",", "entity_ranges", ")", ":", "\n", "        ", "if", "entity_ranges", ":", "\n", "            ", "for", "entity", ",", "position_range", "in", "entity_ranges", ".", "items", "(", ")", ":", "\n", "                ", "self", ".", "randomize_entity_position", "(", "position_range", ",", "entity", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.randomize_entity_position": [[144, 150], ["utils.randomization.get_random_in_range", "utils.randomization.get_random_in_range", "utils.randomization.get_random_in_range", "print", "mission_manager.MissionManager.agent_host.sendCommand"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.randomization.get_random_in_range", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.randomization.get_random_in_range", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.randomization.get_random_in_range"], ["", "", "", "def", "randomize_entity_position", "(", "self", ",", "ranges", ",", "entity_type", ")", ":", "\n", "        ", "x", "=", "get_random_in_range", "(", "ranges", "[", "'x'", "]", ")", "\n", "y", "=", "get_random_in_range", "(", "ranges", "[", "'y'", "]", ")", "\n", "z", "=", "get_random_in_range", "(", "ranges", "[", "'z'", "]", ")", "\n", "print", "(", "f\"Set {entity_type} position to {x} {y} {z}.\"", ")", "\n", "self", ".", "agent_host", ".", "sendCommand", "(", "f\"chat /teleport @e[type={entity_type}] {x} {y} {z}\"", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.read_mission": [[21, 25], ["open", "file.read().replace", "file.read"], "function", ["None"], ["", "def", "read_mission", "(", "filename", ")", ":", "\n", "    ", "with", "open", "(", "filename", ",", "'r'", ")", "as", "file", ":", "\n", "        ", "data", "=", "file", ".", "read", "(", ")", ".", "replace", "(", "'\\n'", ",", "''", ")", "\n", "", "return", "data", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.create_mission": [[27, 39], ["MalmoPython.MissionRecordSpec", "MalmoPython.MissionSpec.allowAllInventoryCommands", "MalmoPython.MissionSpec", "MalmoPython.MissionSpec"], "function", ["None"], ["", "def", "create_mission", "(", "mission_string", "=", "None", ")", ":", "\n", "    ", "if", "mission_string", "is", "not", "None", ":", "\n", "        ", "mission", "=", "MalmoPython", ".", "MissionSpec", "(", "mission_string", ",", "True", ")", "\n", "", "else", ":", "\n", "        ", "mission", "=", "MalmoPython", ".", "MissionSpec", "(", ")", "\n", "\n", "", "record", "=", "MalmoPython", ".", "MissionRecordSpec", "(", ")", "\n", "#  mission.forceWorldReset()", "\n", "mission", ".", "allowAllInventoryCommands", "(", ")", "\n", "# mission.observeFullInventory()", "\n", "\n", "return", "mission", ",", "record", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.minecraft_types.Enemy.is_enemy": [[10, 13], ["any"], "methods", ["None"], ["@", "staticmethod", "\n", "def", "is_enemy", "(", "name", ")", ":", "\n", "        ", "return", "any", "(", "enemy", ".", "name", "==", "name", "for", "enemy", "in", "Enemy", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.minecraft_types.Enemy.get_type": [[14, 20], ["TypeError"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "get_type", "(", "text", ")", ":", "\n", "        ", "for", "enemy", "in", "Enemy", ":", "\n", "            ", "if", "enemy", ".", "name", "==", "text", ":", "\n", "                ", "return", "enemy", ".", "value", "\n", "", "", "raise", "TypeError", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.minecraft_types.Block.get_simplified_game_object_ordinal": [[36, 44], ["None"], "methods", ["None"], ["@", "staticmethod", "\n", "def", "get_simplified_game_object_ordinal", "(", "string", ")", ":", "\n", "        ", "val", "=", "Block", "[", "string", "]", "\n", "if", "val", "==", "Block", ".", "air", ":", "\n", "            ", "return", "val", ".", "value", "\n", "", "if", "val", "==", "Block", ".", "fire", ":", "\n", "            ", "return", "val", ".", "value", "\n", "", "return", "Block", ".", "dirt", ".", "value", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_runner.MissionRunner.__init__": [[10, 26], ["mission.mission_manager.MissionManager", "time.time"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "active_entities", "=", "True", ",", "filename", "=", "None", ",", "evaluation_manager", "=", "None", ",", "\n", "random_position_range", "=", "None", ",", "random_entities_position_range", "=", "None", ",", "mission_max_time", "=", "None", ",", "\n", "logging", "=", "0", ")", ":", "\n", "        ", "self", ".", "mission_manager", "=", "MissionManager", "(", "agent", ".", "agent_host", ",", "filename", ",", "logging", ")", "\n", "self", ".", "agent", "=", "agent", "\n", "self", ".", "active_entities", "=", "active_entities", "\n", "self", ".", "observation_manager", "=", "agent", ".", "observation_manager", "\n", "self", ".", "evaluation_manager", "=", "evaluation_manager", "\n", "self", ".", "random_position_range", "=", "random_position_range", "\n", "self", ".", "random_entities_position_range", "=", "random_entities_position_range", "\n", "\n", "self", ".", "mission_start_time", "=", "time", ".", "time", "(", ")", "\n", "\n", "self", ".", "mission_max_time", "=", "mission_max_time", "\n", "\n", "self", ".", "logging", "=", "logging", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_runner.MissionRunner.run": [[27, 47], ["time.time", "mission_runner.MissionRunner.run_mission", "time.time", "mission_runner.MissionRunner.evaluation_manager.record_mission_start", "print", "print", "mission_runner.MissionRunner.evaluation_manager.record_mission_end", "mission_runner.MissionRunner.agent.is_mission_over", "mission_runner.MissionRunner.evaluation_manager.store_evaluation"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_runner.MissionRunner.run_mission", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.EvaluationManager.record_mission_start", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.EvaluationManager.record_mission_end", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.behavior_tree_agent.BehaviorTreeAgent.is_mission_over", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.EvaluationManager.store_evaluation"], ["", "def", "run", "(", "self", ")", ":", "\n", "        ", "mission", "=", "0", "\n", "while", "True", ":", "\n", "            ", "mission", "+=", "1", "\n", "self", ".", "mission_start_time", "=", "time", ".", "time", "(", ")", "\n", "if", "self", ".", "evaluation_manager", "is", "not", "None", ":", "\n", "                ", "self", ".", "evaluation_manager", ".", "record_mission_start", "(", "self", ".", "mission_start_time", ")", "\n", "\n", "", "state", ",", "steps", "=", "self", ".", "run_mission", "(", ")", "\n", "\n", "end", "=", "time", ".", "time", "(", ")", "\n", "if", "self", ".", "logging", ">", "0", ":", "\n", "                ", "print", "(", "f\"Took {(end - self.mission_start_time) * 1000} milliseconds\"", ")", "\n", "print", "(", "f\"Mission {mission} ended\"", ")", "\n", "\n", "", "if", "self", ".", "evaluation_manager", "is", "not", "None", ":", "\n", "                ", "self", ".", "evaluation_manager", ".", "record_mission_end", "(", "self", ".", "agent", ".", "is_mission_over", "(", ")", ",", "steps", ",", "end", ",", "self", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"health\"", "]", "[", "0", "]", ")", "\n", "if", "self", ".", "evaluation_manager", ".", "runs", "<=", "mission", ":", "\n", "                    ", "self", ".", "evaluation_manager", ".", "store_evaluation", "(", ")", "\n", "break", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_runner.MissionRunner.run_mission": [[48, 74], ["mission_runner.MissionRunner.reset", "time.time", "mission_runner.MissionRunner.tick_mission", "mission_runner.MissionRunner.agent.control_loop", "mission_runner.MissionRunner.tick_mission", "print", "mission_runner.MissionRunner.observation_manager.get_position", "mission_runner.MissionRunner.evaluation_manager.record_position", "mission_runner.MissionRunner.agent.is_mission_over", "mission_runner.MissionRunner.mission_manager.quit", "time.time"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.reset", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_runner.MissionRunner.tick_mission", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.behavior_tree_agent.BehaviorTreeAgent.control_loop", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_runner.MissionRunner.tick_mission", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationManager.get_position", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.EvaluationManager.record_position", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.behavior_tree_agent.BehaviorTreeAgent.is_mission_over", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.quit"], ["", "", "", "", "def", "run_mission", "(", "self", ")", ":", "\n", "        ", "self", ".", "reset", "(", ")", "\n", "self", ".", "mission_start_time", "=", "time", ".", "time", "(", ")", "\n", "steps", "=", "0", "\n", "world_state", "=", "self", ".", "tick_mission", "(", ")", "\n", "while", "world_state", ".", "is_mission_running", ":", "\n", "            ", "for", "error", "in", "world_state", ".", "errors", ":", "\n", "                ", "print", "(", "\"Error:\"", ",", "error", ".", "text", ")", "\n", "\n", "", "self", ".", "agent", ".", "control_loop", "(", ")", "\n", "steps", "+=", "1", "\n", "\n", "if", "self", ".", "evaluation_manager", "is", "not", "None", ":", "\n", "                ", "position", "=", "self", ".", "observation_manager", ".", "get_position", "(", ")", "\n", "self", ".", "evaluation_manager", ".", "record_position", "(", "position", "[", "0", "]", ",", "position", "[", "2", "]", ")", "\n", "\n", "", "tree_status", "=", "self", ".", "agent", ".", "tree", ".", "status", "\n", "tree_finished", "=", "(", "tree_status", "==", "Status", ".", "SUCCESS", "or", "tree_status", "==", "Status", ".", "FAILURE", ")", "\n", "timed_out", "=", "self", ".", "mission_max_time", "is", "not", "None", "and", "time", ".", "time", "(", ")", "-", "self", ".", "mission_start_time", ">=", "self", ".", "mission_max_time", "\n", "if", "self", ".", "agent", ".", "is_mission_over", "(", ")", "or", "tree_finished", "or", "timed_out", ":", "\n", "                ", "self", ".", "mission_manager", ".", "quit", "(", ")", "\n", "break", "\n", "\n", "", "world_state", "=", "self", ".", "tick_mission", "(", ")", "\n", "\n", "", "return", "world_state", ",", "steps", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_runner.MissionRunner.tick_mission": [[75, 88], ["mission_runner.MissionRunner.observation_manager.update", "host.getWorldState", "sum", "len", "reward.getValue"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.Condition.update"], ["", "def", "tick_mission", "(", "self", ")", ":", "\n", "        ", "host", "=", "self", ".", "mission_manager", ".", "agent_host", "\n", "observations", "=", "None", "\n", "world_state", "=", "None", "\n", "reward", "=", "0", "\n", "\n", "while", "observations", "is", "None", "or", "len", "(", "observations", ")", "==", "0", ":", "\n", "            ", "world_state", "=", "host", ".", "getWorldState", "(", ")", "\n", "observations", "=", "world_state", ".", "observations", "\n", "reward", "+=", "sum", "(", "reward", ".", "getValue", "(", ")", "for", "reward", "in", "world_state", ".", "rewards", ")", "\n", "\n", "", "self", ".", "observation_manager", ".", "update", "(", "observations", ",", "reward", ")", "\n", "return", "world_state", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_runner.MissionRunner.reset": [[89, 108], ["mission_runner.MissionRunner.mission_manager.agent_host.getWorldState", "mission_runner.MissionRunner.mission_manager.quit", "mission_runner.MissionRunner.initialize_mission", "mission_runner.MissionRunner.mission_manager.randomize_entity_positions", "mission_runner.MissionRunner.tick_mission", "mission_runner.MissionRunner.mission_manager.disable_ai", "mission_runner.MissionRunner.agent.is_mission_over"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.quit", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_runner.MissionRunner.initialize_mission", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.randomize_entity_positions", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_runner.MissionRunner.tick_mission", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.disable_ai", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.behavior_tree_agent.BehaviorTreeAgent.is_mission_over"], ["", "def", "reset", "(", "self", ")", ":", "\n", "        ", "if", "self", ".", "mission_manager", ".", "agent_host", ".", "getWorldState", "(", ")", ".", "is_mission_running", ":", "\n", "            ", "self", ".", "mission_manager", ".", "quit", "(", ")", "\n", "\n", "", "done", "=", "False", "\n", "while", "not", "done", ":", "\n", "            ", "self", ".", "initialize_mission", "(", ")", "\n", "tries", "=", "0", "\n", "\n", "while", "not", "done", "and", "tries", "<", "100", ":", "# Sync mission and client", "\n", "                ", "self", ".", "tick_mission", "(", ")", "\n", "done", "=", "not", "self", ".", "agent", ".", "is_mission_over", "(", ")", "\n", "\n", "tries", "+=", "1", "\n", "\n", "", "self", ".", "mission_manager", ".", "randomize_entity_positions", "(", "self", ".", "random_entities_position_range", ")", "\n", "\n", "if", "not", "self", ".", "active_entities", ":", "\n", "                ", "self", ".", "mission_manager", ".", "disable_ai", "(", ")", "# Done after tick mission to ensure that the entities have spawned", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_runner.MissionRunner.initialize_mission": [[109, 115], ["mission_runner.MissionRunner.mission_manager.randomize_start_position", "mission_runner.MissionRunner.mission_manager.start_mission", "mission_runner.MissionRunner.mission_manager.activate_night_vision", "mission_runner.MissionRunner.mission_manager.set_fire_eternal", "mission_runner.MissionRunner.mission_manager.make_hungry"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.randomize_start_position", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.start_mission", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.activate_night_vision", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.set_fire_eternal", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.make_hungry"], ["", "", "", "def", "initialize_mission", "(", "self", ")", ":", "\n", "        ", "self", ".", "mission_manager", ".", "randomize_start_position", "(", "self", ".", "random_position_range", ")", "\n", "self", ".", "mission_manager", ".", "start_mission", "(", ")", "\n", "self", ".", "mission_manager", ".", "activate_night_vision", "(", ")", "\n", "self", ".", "mission_manager", ".", "set_fire_eternal", "(", ")", "\n", "self", ".", "mission_manager", ".", "make_hungry", "(", ")", "", "", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.sequence.Sequence.__init__": [[10, 12], ["super().__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["def", "__init__", "(", "self", ",", "name", "=", "\"Sequence\"", ",", "children", "=", "None", ")", ":", "\n", "        ", "super", "(", "Sequence", ",", "self", ")", ".", "__init__", "(", "name", "=", "name", ",", "children", "=", "children", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.sequence.Sequence.tick": [[13, 56], ["sequence.Sequence.logger.debug", "sequence.Sequence.update", "sequence.Sequence.initialise", "child.tick", "child.stop"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.Condition.update", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.initialise", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.tick"], ["", "def", "tick", "(", "self", ")", ":", "\n", "        ", "\"\"\"\n        Run the tick behaviour for this selector. Note that the status\n        of the tick is always determined by its children, not\n        by the user customised update function.\n        Yields:\n            :class:`~py_trees.behaviour.Behaviour`: a reference to itself or one of its children\n        \"\"\"", "\n", "self", ".", "logger", ".", "debug", "(", "\"%s.tick()\"", "%", "self", ".", "__class__", ".", "__name__", ")", "\n", "# Required behaviour for *all* behaviours and composites is", "\n", "# for tick() to check if it isn't running and initialise", "\n", "if", "self", ".", "status", "!=", "pt", ".", "common", ".", "Status", ".", "RUNNING", ":", "\n", "# selectors don't do anything specific on initialisation", "\n", "#   - the current child is managed by the update, never needs to be 'initialised'", "\n", "# run subclass (user) handles", "\n", "            ", "self", ".", "initialise", "(", ")", "\n", "# run any work designated by a customised instance of this class", "\n", "", "self", ".", "update", "(", ")", "\n", "previous", "=", "self", ".", "current_child", "\n", "for", "child", "in", "self", ".", "children", ":", "\n", "            ", "for", "node", "in", "child", ".", "tick", "(", ")", ":", "\n", "                ", "yield", "node", "\n", "if", "node", "is", "child", ":", "\n", "                    ", "if", "node", ".", "status", "==", "pt", ".", "common", ".", "Status", ".", "RUNNING", "or", "node", ".", "status", "==", "pt", ".", "common", ".", "Status", ".", "FAILURE", ":", "\n", "                        ", "self", ".", "current_child", "=", "child", "\n", "self", ".", "status", "=", "node", ".", "status", "\n", "if", "previous", "is", "None", "or", "previous", "!=", "self", ".", "current_child", ":", "\n", "# we interrupted, invalidate everything at a lower priority", "\n", "                            ", "passed", "=", "False", "\n", "for", "child", "in", "self", ".", "children", ":", "\n", "                                ", "if", "passed", ":", "\n", "                                    ", "if", "child", ".", "status", "!=", "pt", ".", "common", ".", "Status", ".", "INVALID", ":", "\n", "                                        ", "child", ".", "stop", "(", "pt", ".", "common", ".", "Status", ".", "INVALID", ")", "\n", "", "", "passed", "=", "True", "if", "child", "==", "self", ".", "current_child", "else", "passed", "\n", "", "", "yield", "self", "\n", "return", "\n", "# all children succeeded, set succeed ourselves and current child to the last bugger who failed us", "\n", "", "", "", "", "self", ".", "status", "=", "pt", ".", "common", ".", "Status", ".", "SUCCESS", "\n", "try", ":", "\n", "            ", "self", ".", "current_child", "=", "self", ".", "children", "[", "-", "1", "]", "\n", "", "except", "IndexError", ":", "\n", "            ", "self", ".", "current_child", "=", "None", "\n", "", "yield", "self", "\n", "", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.ppa.PPA.__init__": [[10, 15], ["None"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "self", ".", "name", "=", "\"\"", "\n", "self", ".", "post_condition", "=", "None", "\n", "self", ".", "pre_conditions", "=", "[", "]", "\n", "self", ".", "action", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.ppa.PPA.as_tree": [[16, 39], ["len", "bt.sequence.Sequence", "py_trees.composites.Selector"], "methods", ["None"], ["", "def", "as_tree", "(", "self", ")", ":", "\n", "        ", "if", "self", ".", "action", "is", "None", ":", "\n", "            ", "return", "None", "\n", "\n", "", "if", "len", "(", "self", ".", "pre_conditions", ")", ">", "0", ":", "\n", "            ", "sub_tree", "=", "Sequence", "(", "\n", "name", "=", "f\"Precondition Handler {self.name}\"", ",", "\n", "children", "=", "self", ".", "pre_conditions", "+", "[", "self", ".", "action", "]", "\n", ")", "\n", "", "else", ":", "\n", "            ", "sub_tree", "=", "self", ".", "action", "\n", "\n", "", "if", "self", ".", "post_condition", "is", "not", "None", ":", "\n", "            ", "tree", "=", "Selector", "(", "\n", "name", "=", "f\"Postcondition Handler {self.name}\"", ",", "\n", "children", "=", "[", "self", ".", "post_condition", ",", "sub_tree", "]", "\n", ")", "\n", "", "else", ":", "\n", "            ", "tree", "=", "sub_tree", "\n", "\n", "", "tree", ".", "name", "=", "f\"PPA {self.name}\"", "\n", "\n", "return", "tree", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.ppa.AvoidFirePPA.__init__": [[42, 48], ["ppa.PPA.__init__", "bt.conditions.IsSafeFromFire", "bt.actions.AvoidFire"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ")", ":", "\n", "        ", "super", "(", "AvoidFirePPA", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "name", "=", "\"Avoid Fire\"", "\n", "self", ".", "post_condition", "=", "conditions", ".", "IsSafeFromFire", "(", "agent", ")", "\n", "self", ".", "pre_conditions", "=", "[", "]", "\n", "self", ".", "action", "=", "actions", ".", "AvoidFire", "(", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.ppa.DefeatSkeletonPPA.__init__": [[51, 57], ["ppa.PPA.__init__", "bt.conditions.IsEnemyDefeated", "learning.baseline_node.DefeatSkeleton", "bt.conditions.IsSafeFromFire"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ")", ":", "\n", "        ", "super", "(", "DefeatSkeletonPPA", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "name", "=", "\"Defeat Skeleton\"", "\n", "self", ".", "post_condition", "=", "conditions", ".", "IsEnemyDefeated", "(", "agent", ")", "\n", "self", ".", "pre_conditions", "=", "[", "conditions", ".", "IsSafeFromFire", "(", "agent", ")", "]", "\n", "self", ".", "action", "=", "DefeatSkeleton", "(", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.ppa.IsNotAttackedByEnemyPPA.__init__": [[60, 66], ["ppa.PPA.__init__", "bt.conditions.IsNotAttackedByEnemy", "bt.actions.DefeatSkeletonManual"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ")", ":", "\n", "        ", "super", "(", "IsNotAttackedByEnemyPPA", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "name", "=", "\"Is not Attacked by Enemy PPA\"", "\n", "self", ".", "post_condition", "=", "conditions", ".", "IsNotAttackedByEnemy", "(", "agent", ")", "\n", "self", ".", "pre_conditions", "=", "[", "]", "\n", "self", ".", "action", "=", "actions", ".", "DefeatSkeletonManual", "(", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.ppa.ChaseEntityPPA.__init__": [[69, 79], ["ppa.PPA.__init__", "bt.conditions.IsCloseToEntity", "learning.baseline_node.ChaseEntity", "bt.conditions.IsEntityVisible", "bt.conditions.IsNotAttackedByEnemy", "bt.conditions.IsSafeFromFire"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ")", ":", "\n", "        ", "super", "(", "ChaseEntityPPA", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "name", "=", "\"Is not Attacked by Enemy PPA\"", "\n", "self", ".", "post_condition", "=", "conditions", ".", "IsCloseToEntity", "(", "agent", ")", "\n", "self", ".", "pre_conditions", "=", "[", "\n", "conditions", ".", "IsEntityVisible", "(", "agent", ")", ",", "\n", "conditions", ".", "IsNotAttackedByEnemy", "(", "agent", ")", ",", "\n", "conditions", ".", "IsSafeFromFire", "(", "agent", ")", "\n", "]", "\n", "self", ".", "action", "=", "ChaseEntity", "(", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.ppa.EatPPA.__init__": [[82, 88], ["ppa.PPA.__init__", "bt.conditions.IsNotHungry", "bt.actions.Eat", "bt.conditions.HasFood"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ")", ":", "\n", "        ", "super", "(", "EatPPA", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "name", "=", "\"Eat\"", "\n", "self", ".", "post_condition", "=", "conditions", ".", "IsNotHungry", "(", "agent", ")", "\n", "self", ".", "pre_conditions", "=", "[", "conditions", ".", "HasFood", "(", "agent", ")", "]", "\n", "self", ".", "action", "=", "actions", ".", "Eat", "(", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.ppa.PickupBeefPPA.__init__": [[91, 97], ["ppa.PPA.__init__", "bt.conditions.HasFood", "bt.actions.PickUpEntity", "bt.conditions.IsEntityPickable"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ")", ":", "\n", "        ", "super", "(", "PickupBeefPPA", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "name", "=", "\"Pick up\"", "\n", "self", ".", "post_condition", "=", "conditions", ".", "HasFood", "(", "agent", ")", "\n", "self", ".", "pre_conditions", "=", "[", "conditions", ".", "IsEntityPickable", "(", "agent", ")", "]", "\n", "self", ".", "action", "=", "actions", ".", "PickUpEntity", "(", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.ppa.DefeatCowPPA.__init__": [[100, 106], ["ppa.PPA.__init__", "bt.conditions.IsEntityPickable", "learning.baseline_node.DefeatCow", "bt.conditions.IsSafeFromFire"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ")", ":", "\n", "        ", "super", "(", "DefeatCowPPA", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "name", "=", "\"Defeat Cow\"", "\n", "self", ".", "post_condition", "=", "conditions", ".", "IsEntityPickable", "(", "agent", ")", "\n", "self", ".", "pre_conditions", "=", "[", "conditions", ".", "IsSafeFromFire", "(", "agent", ")", "]", "\n", "self", ".", "action", "=", "DefeatCow", "(", "agent", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Action.__init__": [[12, 15], ["py_trees.behaviour.Behaviour.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "name", ",", "agent", "=", "None", ")", ":", "\n", "        ", "super", "(", "Action", ",", "self", ")", ".", "__init__", "(", "name", ")", "\n", "self", ".", "agent", "=", "agent", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.AvoidFire.__init__": [[18, 21], ["actions.Action.__init__", "numpy.array"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"AvoidFire\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "self", ".", "result", "=", "np", ".", "array", "(", "[", "0.0", ",", "0.0", ",", "0.0", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.AvoidFire.update": [[22, 42], ["numpy.where", "len", "actions.AvoidFire.agent.continuous_move", "actions.AvoidFire.agent.continuous_strafe", "numpy.array", "range", "numpy.array", "utils.linalg.rotation_matrix_y().dot", "numpy.floor", "numpy.array", "utils.linalg.rotation_matrix_y"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_move", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_strafe", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.linalg.rotation_matrix_y"], ["", "def", "update", "(", "self", ")", ":", "\n", "        ", "fire_loc", "=", "np", ".", "where", "(", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"surroundings\"", "]", "[", "0", ":", "1", ",", "2", ":", "5", ",", "\n", "2", ":", "5", "]", "==", "Block", ".", "fire", ".", "value", ")", "# TODO: Need to calculate based on axis size", "\n", "count", "=", "len", "(", "fire_loc", "[", "0", "]", ")", "\n", "if", "count", ">", "0", ":", "\n", "            ", "d_res", "=", "np", ".", "array", "(", "[", "0.0", ",", "0.0", ",", "0.0", "]", ")", "\n", "\n", "for", "i", "in", "range", "(", "0", ",", "count", ")", ":", "\n", "                ", "pos", "=", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"position\"", "]", "\n", "\n", "delta_pos", "=", "np", ".", "array", "(", "[", "-", "1", "+", "fire_loc", "[", "2", "]", "[", "i", "]", ",", "-", "1", "+", "fire_loc", "[", "0", "]", "[", "i", "]", ",", "-", "1", "+", "fire_loc", "[", "1", "]", "[", "i", "]", "]", ")", "\n", "loc", "=", "np", ".", "floor", "(", "pos", "+", "delta_pos", ")", "+", "np", ".", "array", "(", "[", "0.5", ",", "0", ",", "0.5", "]", ")", "\n", "d_res", "+=", "(", "pos", "-", "loc", ")", "\n", "\n", "", "self", ".", "result", "=", "rotation_matrix_y", "(", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"euler_direction\"", "]", "[", "0", "]", ")", ".", "dot", "(", "d_res", ")", "*", "2", "\n", "\n", "", "self", ".", "agent", ".", "continuous_move", "(", "self", ".", "result", "[", "2", "]", ")", "\n", "self", ".", "agent", ".", "continuous_strafe", "(", "-", "self", ".", "result", "[", "0", "]", ")", "\n", "\n", "return", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.AvoidFire.terminate": [[43, 46], ["actions.AvoidFire.agent.continuous_move", "actions.AvoidFire.agent.continuous_strafe"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_move", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_strafe"], ["", "def", "terminate", "(", "self", ",", "new_status", ")", ":", "\n", "        ", "self", ".", "agent", ".", "continuous_move", "(", "0", ")", "\n", "self", ".", "agent", ".", "continuous_strafe", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.DefeatSkeletonManual.__init__": [[57, 59], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"Defeat Skeleton\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.DefeatSkeletonManual.update": [[60, 92], ["numpy.array", "numpy.linalg.norm", "actions.DefeatSkeletonManual.agent.continuous_turn", "actions.DefeatSkeletonManual.agent.continuous_move", "actions.DefeatSkeletonManual.agent.attack", "actions.DefeatSkeletonManual.agent.continuous_move", "actions.DefeatSkeletonManual.agent.continuous_turn", "actions.DefeatSkeletonManual.agent.continuous_move", "max", "max"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_turn", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_move", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.attack", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_move", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_turn", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_move"], ["", "def", "update", "(", "self", ")", ":", "\n", "        ", "distance_vector", "=", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"enemy_relative_position\"", "]", "\n", "\n", "enemy_relative_position", "=", "np", ".", "array", "(", "[", "distance_vector", "[", "0", "]", ",", "distance_vector", "[", "2", "]", "]", ")", "\n", "enemy_distance", "=", "np", ".", "linalg", ".", "norm", "(", "enemy_relative_position", ")", "\n", "if", "enemy_distance", "!=", "0", ":", "\n", "            ", "enemy_relative_position", "=", "enemy_relative_position", "/", "enemy_distance", "\n", "\n", "", "direction_dot", "=", "enemy_relative_position", "[", "0", "]", "\n", "\n", "sign", "=", "1", "if", "enemy_relative_position", "[", "1", "]", ">", "0", "else", "-", "1", "\n", "if", "direction_dot", "<=", "DefeatSkeletonManual", ".", "TURN_THRESHOLD", ":", "\n", "            ", "turn_speed", "=", "DefeatSkeletonManual", ".", "MAX_TURN_SPEED", "*", "(", "1", "-", "direction_dot", ")", "/", "2", "\n", "turn_speed", "=", "sign", "*", "max", "(", "turn_speed", ",", "DefeatSkeletonManual", ".", "MIN_TURN_SPEED", ")", "\n", "self", ".", "agent", ".", "continuous_move", "(", "0", ")", "\n", "self", ".", "agent", ".", "continuous_turn", "(", "turn_speed", ")", "\n", "return", "Status", ".", "RUNNING", "\n", "", "self", ".", "agent", ".", "continuous_turn", "(", "0", ")", "\n", "\n", "distance", "=", "distance_vector", "[", "0", "]", "*", "ObservationDefinition", ".", "RELATIVE_DISTANCE_AXIS_MAX", "\n", "if", "distance", ">", "DefeatSkeletonManual", ".", "WEAPON_REACH", ":", "\n", "            ", "if", "distance", ">", "DefeatSkeletonManual", ".", "SLOW_DOWN_THRESHOLD", ":", "\n", "                ", "move_speed", "=", "DefeatSkeletonManual", ".", "MAX_MOVE_SPEED", "\n", "", "else", ":", "\n", "                ", "move_speed", "=", "DefeatSkeletonManual", ".", "MAX_MOVE_SPEED", "*", "distance", "/", "DefeatSkeletonManual", ".", "SLOW_DOWN_THRESHOLD", "\n", "move_speed", "=", "max", "(", "move_speed", ",", "DefeatSkeletonManual", ".", "MIN_MOVE_SPEED", ")", "\n", "", "self", ".", "agent", ".", "continuous_move", "(", "move_speed", ")", "\n", "return", "Status", ".", "RUNNING", "\n", "", "self", ".", "agent", ".", "continuous_move", "(", "0", ")", "\n", "\n", "self", ".", "agent", ".", "attack", "(", "1", ")", "\n", "return", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.DefeatSkeletonManual.terminate": [[93, 97], ["actions.DefeatSkeletonManual.agent.continuous_turn", "actions.DefeatSkeletonManual.agent.continuous_move", "actions.DefeatSkeletonManual.agent.attack"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_turn", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_move", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.attack"], ["", "def", "terminate", "(", "self", ",", "new_status", ")", ":", "\n", "        ", "self", ".", "agent", ".", "continuous_turn", "(", "0", ")", "\n", "self", ".", "agent", ".", "continuous_move", "(", "0", ")", "\n", "self", ".", "agent", ".", "attack", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Eat.__init__": [[102, 105], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"Eat\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "self", ".", "is_running", "=", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Eat.update": [[106, 120], ["actions.Eat.agent.continuous_use", "actions.Eat.agent.select_on_hotbar"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.select_on_hotbar"], ["", "def", "update", "(", "self", ")", ":", "\n", "        ", "if", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"satiation\"", "]", "==", "1", ":", "\n", "            ", "return", "Status", ".", "SUCCESS", "\n", "\n", "", "food_inventory_item", "=", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"has_food\"", "]", "\n", "if", "food_inventory_item", "==", "0", ":", "\n", "            ", "return", "Status", ".", "FAILURE", "\n", "\n", "", "if", "not", "self", ".", "is_running", ":", "\n", "            ", "self", ".", "agent", ".", "select_on_hotbar", "(", "Eat", ".", "FOOD_INDEX", ")", "\n", "self", ".", "is_running", "=", "True", "\n", "\n", "", "self", ".", "agent", ".", "continuous_use", "(", "1", ")", "\n", "return", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Eat.terminate": [[121, 125], ["actions.Eat.agent.continuous_use", "actions.Eat.agent.select_on_hotbar"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.select_on_hotbar"], ["", "def", "terminate", "(", "self", ",", "new_status", ")", ":", "\n", "        ", "self", ".", "is_running", "=", "False", "\n", "self", ".", "agent", ".", "continuous_use", "(", "0", ")", "\n", "self", ".", "agent", ".", "select_on_hotbar", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.PickUpEntity.__init__": [[129, 131], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"Pick up Entity\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.PickUpEntity.update": [[132, 141], ["numpy.array", "actions.PickUpEntity.agent.move_towards_flat_direction", "numpy.linalg.norm"], "methods", ["None"], ["", "def", "update", "(", "self", ")", ":", "\n", "        ", "distance_vector", "=", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"entity_relative_position\"", "]", "\n", "entity_direction_vector", "=", "np", ".", "array", "(", "[", "distance_vector", "[", "0", "]", ",", "distance_vector", "[", "2", "]", "]", ")", "\n", "entity_direction_vector", "=", "entity_direction_vector", "/", "np", ".", "linalg", ".", "norm", "(", "entity_direction_vector", ")", "\n", "\n", "self", ".", "agent", ".", "move_towards_flat_direction", "(", "entity_direction_vector", ")", "\n", "\n", "has_food", "=", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"has_food\"", "]", ">", "0", "\n", "return", "Status", ".", "SUCCESS", "if", "has_food", "else", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.PickUpEntity.terminate": [[142, 145], ["actions.PickUpEntity.agent.continuous_move", "actions.PickUpEntity.agent.continuous_strafe"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_move", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_strafe"], ["", "def", "terminate", "(", "self", ",", "new_status", ")", ":", "\n", "        ", "self", ".", "agent", ".", "continuous_move", "(", "0", ")", "\n", "self", ".", "agent", ".", "continuous_strafe", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.MoveForward.__init__": [[148, 150], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"Move Forward\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.MoveForward.update": [[151, 155], ["actions.MoveForward.agent.continuous_move"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_move"], ["", "def", "update", "(", "self", ")", ":", "\n", "# print(\"Forward 1\")", "\n", "        ", "self", ".", "agent", ".", "continuous_move", "(", "1", ")", "\n", "return", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.MoveForward.terminate": [[156, 159], ["actions.MoveForward.agent.continuous_move"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_move"], ["", "def", "terminate", "(", "self", ",", "new_status", ")", ":", "\n", "#   print(\"Forward 0\")", "\n", "        ", "self", ".", "agent", ".", "continuous_move", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.MoveBackward.__init__": [[162, 164], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"Move Backward\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.MoveBackward.update": [[165, 169], ["actions.MoveBackward.agent.continuous_move"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_move"], ["", "def", "update", "(", "self", ")", ":", "\n", "#   print(\"Forward -1\")", "\n", "        ", "self", ".", "agent", ".", "continuous_move", "(", "-", "1", ")", "\n", "return", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.MoveBackward.terminate": [[170, 173], ["actions.MoveBackward.agent.continuous_move"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_move"], ["", "def", "terminate", "(", "self", ",", "new_status", ")", ":", "\n", "# print(\"Forward 0\")", "\n", "        ", "self", ".", "agent", ".", "continuous_move", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.MoveLeft.__init__": [[176, 178], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"Move Left\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.MoveLeft.update": [[179, 183], ["actions.MoveLeft.agent.continuous_strafe"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_strafe"], ["", "def", "update", "(", "self", ")", ":", "\n", "#  print(\"Strafe -1\")", "\n", "        ", "self", ".", "agent", ".", "continuous_strafe", "(", "-", "1", ")", "\n", "return", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.MoveLeft.terminate": [[184, 187], ["actions.MoveLeft.agent.continuous_strafe"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_strafe"], ["", "def", "terminate", "(", "self", ",", "new_status", ")", ":", "\n", "#   print(\"Strafe 0\")", "\n", "        ", "self", ".", "agent", ".", "continuous_strafe", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.MoveRight.__init__": [[190, 192], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"Move Right\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.MoveRight.update": [[193, 197], ["actions.MoveRight.agent.continuous_strafe"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_strafe"], ["", "def", "update", "(", "self", ")", ":", "\n", "#  print(\"Strafe 1\")", "\n", "        ", "self", ".", "agent", ".", "continuous_strafe", "(", "1", ")", "\n", "return", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.MoveRight.terminate": [[198, 201], ["actions.MoveRight.agent.continuous_strafe"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_strafe"], ["", "def", "terminate", "(", "self", ",", "new_status", ")", ":", "\n", "#   print(\"Strafe 0\")", "\n", "        ", "self", ".", "agent", ".", "continuous_strafe", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.TurnLeft.__init__": [[204, 206], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"Turn Left\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.TurnLeft.update": [[207, 211], ["actions.TurnLeft.agent.continuous_turn"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_turn"], ["", "def", "update", "(", "self", ")", ":", "\n", "#   print(\"Turn -1\")", "\n", "        ", "self", ".", "agent", ".", "continuous_turn", "(", "-", "1", ")", "\n", "return", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.TurnLeft.terminate": [[212, 215], ["actions.TurnLeft.agent.continuous_turn"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_turn"], ["", "def", "terminate", "(", "self", ",", "new_status", ")", ":", "\n", "#  print(\"Turn 0\")", "\n", "        ", "self", ".", "agent", ".", "continuous_turn", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.TurnRight.__init__": [[218, 220], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"Turn Right\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.TurnRight.update": [[221, 225], ["actions.TurnRight.agent.continuous_turn"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_turn"], ["", "def", "update", "(", "self", ")", ":", "\n", "# print(\"Turn 1\")", "\n", "        ", "self", ".", "agent", ".", "continuous_turn", "(", "1", ")", "\n", "return", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.TurnRight.terminate": [[226, 229], ["actions.TurnRight.agent.continuous_turn"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_turn"], ["", "def", "terminate", "(", "self", ",", "new_status", ")", ":", "\n", "# print(\"Turn 0\")", "\n", "        ", "self", ".", "agent", ".", "continuous_turn", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.PitchUp.__init__": [[232, 234], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"Pitch Up\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.PitchUp.update": [[235, 238], ["actions.PitchUp.agent.continuous_pitch"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_pitch"], ["", "def", "update", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent", ".", "continuous_pitch", "(", "-", "1", ")", "\n", "return", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.PitchUp.terminate": [[239, 241], ["actions.PitchUp.agent.continuous_pitch"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_pitch"], ["", "def", "terminate", "(", "self", ",", "new_status", ")", ":", "\n", "        ", "self", ".", "agent", ".", "continuous_pitch", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.PitchDown.__init__": [[244, 246], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"Pitch Down\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.PitchDown.update": [[247, 250], ["actions.PitchDown.agent.continuous_pitch"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_pitch"], ["", "def", "update", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent", ".", "continuous_pitch", "(", "1", ")", "\n", "return", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.PitchDown.terminate": [[251, 253], ["actions.PitchDown.agent.continuous_pitch"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_pitch"], ["", "def", "terminate", "(", "self", ",", "new_status", ")", ":", "\n", "        ", "self", ".", "agent", ".", "continuous_pitch", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Jump.__init__": [[256, 258], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"Jump\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Jump.update": [[259, 262], ["actions.Jump.agent.continuous_jump"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_jump"], ["", "def", "update", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent", ".", "continuous_jump", "(", "1", ")", "\n", "return", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Jump.terminate": [[263, 265], ["actions.Jump.agent.continuous_jump"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_jump"], ["", "def", "terminate", "(", "self", ",", "new_status", ")", ":", "\n", "        ", "self", ".", "agent", ".", "continuous_jump", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Attack.__init__": [[268, 270], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"Attack\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Attack.update": [[271, 276], ["print", "actions.Attack.agent.attack"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.attack"], ["", "def", "update", "(", "self", ")", ":", "\n", "        ", "print", "(", "self", ".", "name", ")", "\n", "#  print(\"Attack 1\")", "\n", "self", ".", "agent", ".", "attack", "(", "1", ")", "\n", "return", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Attack.terminate": [[277, 280], ["actions.Attack.agent.attack"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.attack"], ["", "def", "terminate", "(", "self", ",", "new_status", ")", ":", "\n", "#  print(\"Attack 0\")", "\n", "        ", "self", ".", "agent", ".", "attack", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Crouch.__init__": [[283, 285], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"Crouch\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Crouch.update": [[286, 289], ["actions.Crouch.agent.crouch"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.crouch"], ["", "def", "update", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent", ".", "crouch", "(", "1", ")", "\n", "return", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Crouch.terminate": [[290, 292], ["actions.Crouch.agent.crouch"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.crouch"], ["", "def", "terminate", "(", "self", ",", "new_status", ")", ":", "\n", "        ", "self", ".", "agent", ".", "crouch", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.StopMoving.__init__": [[295, 297], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"Stop Moving\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.StopMoving.update": [[298, 304], ["actions.StopMoving.agent.continuous_move", "actions.StopMoving.agent.continuous_strafe", "actions.StopMoving.agent.continuous_turn", "actions.StopMoving.agent.continuous_pitch"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_move", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_strafe", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_turn", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_pitch"], ["", "def", "update", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent", ".", "continuous_move", "(", "0", ")", "\n", "self", ".", "agent", ".", "continuous_strafe", "(", "0", ")", "\n", "self", ".", "agent", ".", "continuous_turn", "(", "0", ")", "\n", "self", ".", "agent", ".", "continuous_pitch", "(", "0", ")", "\n", "return", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Use.__init__": [[307, 309], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"Use\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Use.update": [[310, 313], ["actions.Use.agent.use"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.use"], ["", "def", "update", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent", ".", "use", "(", ")", "\n", "return", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.ActionPlaceholder.__init__": [[317, 319], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"Placeholder\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.ActionPlaceholder.update": [[320, 322], ["None"], "methods", ["None"], ["", "def", "update", "(", "self", ")", ":", "\n", "        ", "return", "Status", ".", "SUCCESS", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Target.__init__": [[325, 328], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ")", ":", "\n", "        ", "super", "(", "Target", ",", "self", ")", ".", "__init__", "(", "\"Target\"", ")", "\n", "self", ".", "agent", "=", "agent", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Target.update": [[329, 343], ["print", "actions.Target.agent.continuous_turn", "actions.Target.agent.continuous_turn"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_turn", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_turn"], ["", "def", "update", "(", "self", ")", ":", "\n", "        ", "if", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"enemy_targeted\"", "]", ":", "\n", "            ", "return", "py_trees", ".", "common", ".", "Status", ".", "SUCCESS", "\n", "", "print", "(", "self", ".", "name", ")", "\n", "rot", "=", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"enemy_rot\"", "]", "\n", "if", "rot", "<", "0", ":", "\n", "            ", "self", ".", "agent", ".", "continuous_turn", "(", "-", "0.6", ")", "\n", "return", "py_trees", ".", "common", ".", "Status", ".", "RUNNING", "\n", "\n", "", "if", "rot", ">", "0", ":", "\n", "            ", "self", ".", "agent", ".", "continuous_turn", "(", "0.6", ")", "\n", "return", "py_trees", ".", "common", ".", "Status", ".", "RUNNING", "\n", "\n", "", "return", "Status", ".", "RUNNING", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.Target.terminate": [[344, 346], ["actions.Target.agent.continuous_turn"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_turn"], ["", "def", "terminate", "(", "self", ",", "new_status", ")", ":", "\n", "        ", "self", ".", "agent", ".", "continuous_turn", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.KeepDistance.__init__": [[349, 352], ["actions.Action.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ")", ":", "\n", "        ", "super", "(", "KeepDistance", ",", "self", ")", ".", "__init__", "(", "\"Keep Distance\"", ")", "\n", "self", ".", "agent", "=", "agent", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.KeepDistance.update": [[353, 366], ["actions.KeepDistance.agent.continuous_move", "print", "actions.KeepDistance.agent.continuous_move", "print"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_move", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_move"], ["", "def", "update", "(", "self", ")", ":", "\n", "        ", "dist", "=", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"enemy_relative_distance\"", "]", "*", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "definition", ".", "RELATIVE_DISTANCE_AXIS_MAX", "\n", "if", "dist", ">", "3.5", ":", "\n", "            ", "self", ".", "agent", ".", "continuous_move", "(", "1", ")", "\n", "print", "(", "self", ".", "name", ")", "\n", "return", "py_trees", ".", "common", ".", "Status", ".", "RUNNING", "\n", "\n", "", "if", "dist", ">", "0", "and", "dist", "<", "1.0", ":", "\n", "            ", "self", ".", "agent", ".", "continuous_move", "(", "-", "1", ")", "\n", "print", "(", "self", ".", "name", ")", "\n", "return", "py_trees", ".", "common", ".", "Status", ".", "RUNNING", "\n", "\n", "", "return", "py_trees", ".", "common", ".", "Status", ".", "SUCCESS", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.actions.KeepDistance.terminate": [[367, 369], ["actions.KeepDistance.agent.continuous_move"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.continuous_move"], ["", "def", "terminate", "(", "self", ",", "new_status", ")", ":", "\n", "        ", "self", ".", "agent", ".", "continuous_move", "(", "0", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.accs.find_accs": [[8, 36], ["path.append", "isinstance", "isinstance", "n1.append", "n1c.append", "accs.is_selector", "isinstance", "n0s.append", "n2c.append"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.accs.is_selector"], ["def", "find_accs", "(", "node", ")", ":", "\n", "    ", "current", "=", "node", "\n", "path", "=", "[", "]", "\n", "while", "current", "is", "not", "None", ":", "\n", "        ", "path", ".", "append", "(", "current", ")", "\n", "current", "=", "current", ".", "parent", "\n", "", "path", "=", "path", "[", ":", ":", "-", "1", "]", "\n", "n0s", "=", "[", "]", "\n", "for", "pnode", "in", "path", ":", "\n", "        ", "if", "not", "isinstance", "(", "current", ",", "Action", ")", "or", "pnode", "!=", "node", ".", "parent", ":", "\n", "            ", "if", "isinstance", "(", "pnode", ",", "Sequence", ")", ":", "\n", "                ", "n0s", ".", "append", "(", "pnode", ")", "\n", "", "", "", "n1", "=", "[", "]", "\n", "for", "n0", "in", "n0s", ":", "\n", "        ", "for", "child", "in", "n0", ".", "children", ":", "\n", "            ", "if", "child", "in", "path", ":", "\n", "                ", "break", "\n", "", "n1", ".", "append", "(", "child", ")", "\n", "\n", "", "", "n1c", "=", "[", "]", "\n", "n2c", "=", "[", "]", "\n", "for", "nnode", "in", "n1", ":", "\n", "        ", "if", "isinstance", "(", "nnode", ",", "Condition", ")", ":", "\n", "            ", "n1c", ".", "append", "(", "nnode", ")", "\n", "", "elif", "is_selector", "(", "nnode", ")", ":", "\n", "            ", "n2c", ".", "append", "(", "nnode", ".", "children", "[", "0", "]", ")", "\n", "\n", "", "", "return", "n1c", "+", "n2c", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.accs.is_selector": [[38, 40], ["isinstance", "isinstance"], "function", ["None"], ["", "def", "is_selector", "(", "node", ")", ":", "\n", "    ", "return", "isinstance", "(", "node", ",", "Selector", ")", "and", "not", "isinstance", "(", "node", ",", "Sequence", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.accs.test_acc": [[42, 120], ["bt.sequence.Sequence", "bt.conditions.Condition", "py_trees.composites.Selector", "bt.sequence.Sequence", "py_trees.composites.Selector", "bt.sequence.Sequence", "bt.conditions.Condition", "py_trees.composites.Selector", "bt.actions.Action", "bt.sequence.Sequence", "py_trees.composites.Selector", "bt.sequence.Sequence", "py_trees.composites.Selector", "bt.sequence.Sequence", "bt.sequence.Sequence", "py_trees.composites.Selector", "bt.sequence.Sequence", "bt.sequence.Sequence.setup_with_descendants", "accs.find_accs", "bt.conditions.Condition", "bt.actions.Action", "bt.conditions.Condition", "bt.actions.Action", "bt.conditions.Condition", "bt.actions.Action", "bt.conditions.Condition", "bt.conditions.Condition", "bt.conditions.Condition", "bt.actions.Action", "bt.conditions.Condition", "bt.actions.Action", "bt.conditions.Condition", "bt.actions.Action", "bt.conditions.Condition"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.accs.find_accs"], ["", "def", "test_acc", "(", ")", ":", "\n", "# Arrange: Create the ACC example from Petter's paper", "\n", "    ", "in_safe_area_ppa_pre_conditions", "=", "Sequence", "(", "\n", "\"Move to safe Area PPA PreCons\"", ",", "\n", "children", "=", "[", "Condition", "(", "\"Free Path to Safe Area Exists\"", ")", ",", "Action", "(", "\"Move to Safe Area\"", ")", "]", "\n", ")", "\n", "in_safe_area_condition", "=", "Condition", "(", "\"In Safe Area\"", ")", "\n", "in_safe_area_ppa_post_conditions", "=", "Selector", "(", "\n", "\"Move to Safe Area PPA PostCons\"", ",", "\n", "children", "=", "[", "in_safe_area_condition", ",", "in_safe_area_ppa_pre_conditions", "]", "\n", ")", "\n", "robot_near_object_ppa_pre_conditions", "=", "Sequence", "(", "\n", "\"Robot Near Object PPA PreCons\"", ",", "\n", "children", "=", "[", "Condition", "(", "\"Free Path To Object exists\"", ")", ",", "Action", "(", "\"Move to Object\"", ")", "]", "\n", ")", "\n", "robot_near_object_ppa_post_conditions", "=", "Selector", "(", "\n", "\"Robot Near Object Area PPA PostCons\"", ",", "\n", "children", "=", "[", "Condition", "(", "\"Robot Near Object\"", ")", ",", "robot_near_object_ppa_pre_conditions", "]", "\n", ")", "\n", "object_in_gripper_ppa_pre_conditions", "=", "Sequence", "(", "\n", "\"Object in Gripper PPA PreCons\"", ",", "\n", "children", "=", "[", "robot_near_object_ppa_post_conditions", ",", "Action", "(", "\"Grasp Object\"", ")", "]", "\n", ")", "\n", "object_in_gripper_condition", "=", "Condition", "(", "\"Object in Gripper\"", ")", "\n", "object_in_gripper_ppa_post_conditions", "=", "Selector", "(", "\n", "\"Object in Gripper PPA PostCons\"", ",", "\n", "children", "=", "[", "object_in_gripper_condition", ",", "object_in_gripper_ppa_pre_conditions", "]", "\n", ")", "\n", "\n", "move_to_goal_action", "=", "Action", "(", "\"Move To Goal\"", ")", "\n", "close_to_goal_ppa_pre_conditions", "=", "Sequence", "(", "\n", "\"Close To Goal Object PPA PreCons\"", ",", "\n", "children", "=", "[", "Condition", "(", "\"Free Path to Goal Exists\"", ")", ",", "move_to_goal_action", "]", "\n", ")", "\n", "close_to_goal_ppa_post_conditions", "=", "Selector", "(", "\n", "\"Close to Goal Area PPA PostCons\"", ",", "\n", "children", "=", "[", "Condition", "(", "\"Close to Goal\"", ")", ",", "close_to_goal_ppa_pre_conditions", "]", "\n", ")", "\n", "robot_has_cash_ppa_pre_conditions", "=", "Sequence", "(", "\n", "\"Robot has Cash PPA PostCons\"", ",", "\n", "children", "=", "[", "Condition", "(", "\"Payed task available\"", ")", ",", "Action", "(", "\"Do task and earn cash\"", ")", "]", "\n", ")", "\n", "robot_has_cash_ppa_post_conditions", "=", "Selector", "(", "\n", "\"Robot has Cash Area PPA PostCons\"", ",", "\n", "children", "=", "[", "Condition", "(", "\"Robot has cash\"", ")", ",", "robot_has_cash_ppa_pre_conditions", "]", "\n", ")", "\n", "object_at_goal_preconditions_one", "=", "Sequence", "(", "\n", "\"Object at Goal PPA PreCons 1\"", ",", "\n", "children", "=", "[", "\n", "object_in_gripper_ppa_post_conditions", ",", "\n", "close_to_goal_ppa_post_conditions", ",", "\n", "Action", "(", "\"Place object at goal\"", ")", "\n", "]", "\n", ")", "\n", "object_at_goal_preconditions_two", "=", "Sequence", "(", "\n", "\"Object at Goal PPA PreCons 2\"", ",", "\n", "children", "=", "[", "\n", "Condition", "(", "\"Agent nearby\"", ")", ",", "\n", "robot_has_cash_ppa_post_conditions", ",", "\n", "Action", "(", "\"Pay agent to place object\"", ")", "\n", "]", "\n", ")", "\n", "object_at_goal_post_conditions", "=", "Selector", "(", "\n", "\"Object At Goal PPA PostCons\"", ",", "\n", "children", "=", "[", "Condition", "(", "\"Object at Goal\"", ")", ",", "object_at_goal_preconditions_one", ",", "object_at_goal_preconditions_two", "]", "\n", ")", "\n", "main_sequence", "=", "Sequence", "(", "\n", "\"Main Sequence\"", ",", "\n", "children", "=", "[", "in_safe_area_ppa_post_conditions", ",", "object_at_goal_post_conditions", "]", "\n", ")", "\n", "main_sequence", ".", "setup_with_descendants", "(", ")", "\n", "\n", "# Act:", "\n", "accs", "=", "find_accs", "(", "move_to_goal_action", ")", "\n", "\n", "# Assert:", "\n", "assert", "in_safe_area_condition", "in", "accs", "\n", "assert", "object_in_gripper_condition", "in", "accs", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.back_chain_tree.BackChainTree.__init__": [[8, 12], ["back_chain_tree.BackChainTree.get_base_back_chain_tree"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.back_chain_tree.BackChainTree.get_base_back_chain_tree"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "goals", ",", "evaluation_manager", "=", "None", ")", ":", "\n", "        ", "self", ".", "agent", "=", "agent", "\n", "self", ".", "baseline_nodes", "=", "[", "]", "\n", "self", ".", "root", "=", "self", ".", "get_base_back_chain_tree", "(", "goals", ",", "evaluation_manager", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.back_chain_tree.BackChainTree.get_base_back_chain_tree": [[13, 32], ["bt.sequence.Sequence.setup_with_descendants", "len", "bt.sequence.Sequence.BackChainTree.back_chain_recursive", "bt.sequence.Sequence", "bt.accs.find_accs", "goal_ppa_trees.append", "bt.sequence.Sequence.BackChainTree.back_chain_recursive", "acc.set_evaluation_manager"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.back_chain_tree.BackChainTree.back_chain_recursive", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.accs.find_accs", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.back_chain_tree.BackChainTree.back_chain_recursive", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.Condition.set_evaluation_manager"], ["", "def", "get_base_back_chain_tree", "(", "self", ",", "goals", ",", "evaluation_manager", "=", "None", ")", ":", "\n", "        ", "if", "len", "(", "goals", ")", "==", "1", ":", "\n", "            ", "back_chain_tree", "=", "self", ".", "back_chain_recursive", "(", "self", ".", "agent", ",", "goals", "[", "0", "]", ")", "\n", "", "else", ":", "\n", "            ", "goal_ppa_trees", "=", "[", "]", "\n", "for", "goal", "in", "goals", ":", "\n", "                ", "goal_ppa_trees", ".", "append", "(", "self", ".", "back_chain_recursive", "(", "self", ".", "agent", ",", "goal", ",", "evaluation_manager", ")", ")", "\n", "", "back_chain_tree", "=", "Sequence", "(", "\"Back-chain Tree\"", ",", "children", "=", "goal_ppa_trees", ")", "\n", "\n", "", "if", "back_chain_tree", "is", "None", ":", "\n", "            ", "return", "None", "\n", "", "back_chain_tree", ".", "setup_with_descendants", "(", ")", "\n", "\n", "for", "baseline_node", "in", "self", ".", "baseline_nodes", ":", "\n", "            ", "accs", "=", "find_accs", "(", "baseline_node", ")", "\n", "if", "evaluation_manager", "is", "not", "None", ":", "\n", "                ", "[", "acc", ".", "set_evaluation_manager", "(", "evaluation_manager", ")", "for", "acc", "in", "accs", "]", "\n", "", "baseline_node", ".", "accs", "=", "accs", "\n", "", "return", "back_chain_tree", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.back_chain_tree.BackChainTree.back_chain_recursive": [[33, 50], ["back_chain_tree.BackChainTree.condition_to_ppa_tree", "back_chain_tree.BackChainTree.post_condition.set_evaluation_manager", "isinstance", "back_chain_tree.BackChainTree.baseline_nodes.append", "back_chain_tree.BackChainTree.action.post_conditions.append", "enumerate", "back_chain_tree.BackChainTree.as_tree", "precond.set_evaluation_manager", "back_chain_tree.BackChainTree.back_chain_recursive"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.back_chain_tree.BackChainTree.condition_to_ppa_tree", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.Condition.set_evaluation_manager", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.ppa.PPA.as_tree", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.Condition.set_evaluation_manager", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.back_chain_tree.BackChainTree.back_chain_recursive"], ["", "def", "back_chain_recursive", "(", "self", ",", "agent", ",", "condition", ",", "evaluation_manager", "=", "None", ")", ":", "\n", "        ", "ppa", "=", "self", ".", "condition_to_ppa_tree", "(", "agent", ",", "condition", ")", "\n", "if", "evaluation_manager", "is", "not", "None", ":", "\n", "            ", "ppa", ".", "post_condition", ".", "set_evaluation_manager", "(", "evaluation_manager", ")", "\n", "[", "precond", ".", "set_evaluation_manager", "(", "evaluation_manager", ")", "for", "precond", "in", "ppa", ".", "pre_conditions", "]", "\n", "\n", "", "if", "ppa", "is", "not", "None", "and", "isinstance", "(", "ppa", ".", "action", ",", "PPABaselinesNode", ")", ":", "\n", "            ", "self", ".", "baseline_nodes", ".", "append", "(", "ppa", ".", "action", ")", "\n", "ppa", ".", "action", ".", "post_conditions", ".", "append", "(", "ppa", ".", "post_condition", ")", "\n", "\n", "", "if", "ppa", "is", "not", "None", ":", "\n", "            ", "for", "i", ",", "pre_condition", "in", "enumerate", "(", "ppa", ".", "pre_conditions", ")", ":", "\n", "                ", "ppa_condition_tree", "=", "self", ".", "back_chain_recursive", "(", "agent", ",", "ppa", ".", "pre_conditions", "[", "i", "]", ")", "\n", "if", "ppa_condition_tree", "is", "not", "None", ":", "\n", "                    ", "ppa", ".", "pre_conditions", "[", "i", "]", "=", "ppa_condition_tree", "\n", "", "", "return", "ppa", ".", "as_tree", "(", ")", "\n", "", "return", "condition", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.back_chain_tree.BackChainTree.condition_to_ppa_tree": [[51, 57], ["sub", "isinstance", "bt.ppa.PPA.__subclasses__", "type"], "methods", ["None"], ["", "def", "condition_to_ppa_tree", "(", "self", ",", "agent", ",", "condition", ")", ":", "\n", "        ", "for", "ppa", "in", "[", "sub", "(", "agent", ")", "for", "sub", "in", "PPA", ".", "__subclasses__", "(", ")", "]", ":", "\n", "            ", "if", "isinstance", "(", "ppa", ".", "post_condition", ",", "type", "(", "condition", ")", ")", ":", "\n", "                ", "return", "ppa", "\n", "\n", "", "", "return", "None", "\n", "", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.Condition.__init__": [[10, 15], ["py_trees.behaviour.Behaviour.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "name", ",", "agent", ")", ":", "\n", "        ", "super", "(", "Condition", ",", "self", ")", ".", "__init__", "(", "name", ")", "\n", "self", ".", "agent", "=", "agent", "\n", "self", ".", "update_aux", "=", "self", ".", "execution", "\n", "self", ".", "evaluation_manager", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.Condition.update": [[16, 18], ["conditions.Condition.update_aux"], "methods", ["None"], ["", "def", "update", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "update_aux", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.Condition.evaluation": [[19, 23], ["conditions.Condition.execution", "conditions.Condition.evaluation_manager.record_node"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.Condition.execution", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.EvaluationManager.record_node"], ["", "def", "evaluation", "(", "self", ")", ":", "\n", "        ", "result", "=", "self", ".", "execution", "(", ")", "\n", "self", ".", "evaluation_manager", ".", "record_node", "(", "self", ",", "result", ")", "\n", "return", "result", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.Condition.set_evaluation_manager": [[24, 28], ["conditions.Condition.evaluation_manager.register_node"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.EvaluationManager.register_node"], ["", "def", "set_evaluation_manager", "(", "self", ",", "evaluation_manager", ")", ":", "\n", "        ", "self", ".", "update_aux", "=", "self", ".", "evaluation", "\n", "self", ".", "evaluation_manager", "=", "evaluation_manager", "\n", "self", ".", "evaluation_manager", ".", "register_node", "(", "self", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.Condition.execution": [[29, 33], ["conditions.Condition.evaluate"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.IsEntityPickable.evaluate"], ["", "def", "execution", "(", "self", ")", ":", "\n", "        ", "if", "self", ".", "evaluate", "(", "self", ".", "agent", ")", ":", "\n", "            ", "return", "Status", ".", "SUCCESS", "\n", "", "return", "Status", ".", "FAILURE", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.Condition.evaluate": [[34, 36], ["NotImplementedError"], "methods", ["None"], ["", "def", "evaluate", "(", "self", ",", "agent", ")", "->", "bool", ":", "\n", "        ", "raise", "NotImplementedError", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.IsSafeFromFire.__init__": [[40, 42], ["conditions.Condition.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "f\"Is safe from fire\"", ")", ":", "\n", "        ", "super", "(", "IsSafeFromFire", ",", "self", ")", ".", "__init__", "(", "name", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.IsSafeFromFire.evaluate": [[43, 54], ["numpy.where", "len", "range", "numpy.array", "numpy.floor", "numpy.array", "numpy.max", "numpy.abs"], "methods", ["None"], ["", "def", "evaluate", "(", "self", ",", "agent", ")", "->", "bool", ":", "\n", "        ", "fire_loc", "=", "np", ".", "where", "(", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"surroundings\"", "]", "[", "0", ":", "1", ",", "2", ":", "5", ",", "2", ":", "5", "]", "==", "Block", ".", "fire", ".", "value", ")", "# TODO: Need to calculate based on axis size", "\n", "count", "=", "len", "(", "fire_loc", "[", "0", "]", ")", "\n", "if", "count", ">", "0", ":", "\n", "            ", "for", "i", "in", "range", "(", "0", ",", "count", ")", ":", "\n", "                ", "delta_pos", "=", "np", ".", "array", "(", "[", "-", "1", "+", "fire_loc", "[", "2", "]", "[", "i", "]", ",", "-", "1", "+", "fire_loc", "[", "0", "]", "[", "i", "]", ",", "-", "1", "+", "fire_loc", "[", "1", "]", "[", "i", "]", "]", ")", "\n", "position", "=", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"position\"", "]", "\n", "loc", "=", "np", ".", "floor", "(", "position", "+", "delta_pos", ")", "+", "np", ".", "array", "(", "[", "0.5", ",", "0", ",", "0.5", "]", ")", "\n", "if", "np", ".", "max", "(", "np", ".", "abs", "(", "position", "-", "loc", ")", ")", "<=", "self", ".", "agent", ".", "observation_manager", ".", "helper", ".", "definition", ".", "FIRE_AVOID_DISTANCE", ":", "\n", "                    ", "return", "False", "\n", "", "", "", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.IsEnemyDefeated.__init__": [[57, 59], ["conditions.Condition.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ")", ":", "\n", "        ", "super", "(", "IsEnemyDefeated", ",", "self", ")", ".", "__init__", "(", "f\"Is enemy defeated\"", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.IsEnemyDefeated.evaluate": [[60, 63], ["None"], "methods", ["None"], ["", "def", "evaluate", "(", "self", ",", "agent", ")", "->", "bool", ":", "\n", "        ", "enemy_life", "=", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"enemy_health\"", "]", "\n", "return", "enemy_life", "==", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.IsNotAttackedByEnemy.__init__": [[68, 70], ["conditions.Condition.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["def", "__init__", "(", "self", ",", "agent", ")", ":", "\n", "        ", "super", "(", "IsNotAttackedByEnemy", ",", "self", ")", ".", "__init__", "(", "f\"Is not attacked by enemy\"", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.IsNotAttackedByEnemy.evaluate": [[71, 78], ["numpy.linalg.norm"], "methods", ["None"], ["", "def", "evaluate", "(", "self", ",", "agent", ")", "->", "bool", ":", "\n", "        ", "enemy_distance", "=", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"enemy_relative_position\"", "]", "\n", "\n", "non_standardized_distance", "=", "enemy_distance", "*", "ObservationDefinition", ".", "RELATIVE_DISTANCE_AXIS_MAX", "\n", "distance", "=", "np", ".", "linalg", ".", "norm", "(", "non_standardized_distance", ")", "\n", "\n", "return", "distance", ">=", "IsNotAttackedByEnemy", ".", "ENEMY_AGGRO_RANGE", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.IsEntityVisible.__init__": [[81, 83], ["conditions.Condition.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ")", ":", "\n", "        ", "super", "(", "IsEntityVisible", ",", "self", ")", ".", "__init__", "(", "f\"Is Entity Visible\"", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.IsEntityVisible.evaluate": [[84, 86], ["None"], "methods", ["None"], ["", "def", "evaluate", "(", "self", ",", "agent", ")", "->", "bool", ":", "\n", "        ", "return", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"entity_visible\"", "]", "==", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.IsCloseToEntity.__init__": [[91, 93], ["conditions.Condition.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["def", "__init__", "(", "self", ",", "agent", ")", ":", "\n", "        ", "super", "(", "IsCloseToEntity", ",", "self", ")", ".", "__init__", "(", "f\"Is Close To Entity\"", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.IsCloseToEntity.evaluate": [[94, 101], ["numpy.linalg.norm"], "methods", ["None"], ["", "def", "evaluate", "(", "self", ",", "agent", ")", "->", "bool", ":", "\n", "        ", "entity_distance", "=", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"entity_relative_position\"", "]", "\n", "\n", "non_standardized_distance", "=", "entity_distance", "*", "ObservationDefinition", ".", "RELATIVE_DISTANCE_AXIS_MAX", "\n", "distance", "=", "np", ".", "linalg", ".", "norm", "(", "non_standardized_distance", ")", "\n", "\n", "return", "distance", "<=", "IsCloseToEntity", ".", "RANGE", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.IsNotHungry.__init__": [[104, 106], ["conditions.Condition.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ")", ":", "\n", "        ", "super", "(", "IsNotHungry", ",", "self", ")", ".", "__init__", "(", "f\"Is not hungry\"", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.IsNotHungry.evaluate": [[107, 109], ["None"], "methods", ["None"], ["", "def", "evaluate", "(", "self", ",", "agent", ")", "->", "bool", ":", "\n", "        ", "return", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"satiation\"", "]", "==", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.HasFood.__init__": [[112, 114], ["conditions.Condition.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ")", ":", "\n", "        ", "super", "(", "HasFood", ",", "self", ")", ".", "__init__", "(", "f\"Has food\"", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.HasFood.evaluate": [[115, 117], ["None"], "methods", ["None"], ["", "def", "evaluate", "(", "self", ",", "agent", ")", "->", "bool", ":", "\n", "        ", "return", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"has_food\"", "]", ">", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.IsEntityPickable.__init__": [[120, 122], ["conditions.Condition.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ")", ":", "\n", "        ", "super", "(", "IsEntityPickable", ",", "self", ")", ".", "__init__", "(", "f\"Is entity pickable\"", ",", "agent", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.IsEntityPickable.evaluate": [[123, 125], ["None"], "methods", ["None"], ["", "def", "evaluate", "(", "self", ",", "agent", ")", "->", "bool", ":", "\n", "        ", "return", "self", ".", "agent", ".", "observation_manager", ".", "observation", ".", "dict", "[", "\"is_entity_pickable\"", "]", "==", "1", "\n", "", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.__init__": [[9, 15], ["bt.sequence.Sequence.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"A2CLearner\"", ",", "children", "=", "None", ",", "model", "=", "None", ",", ")", ":", "\n", "        ", "self", ".", "agent", "=", "agent", "\n", "self", ".", "model", "=", "model", "\n", "self", ".", "tick_aux", "=", "self", ".", "execution_tick", "if", "model", "is", "not", "None", "else", "self", ".", "training_tick", "\n", "self", ".", "child_index", "=", "-", "1", "\n", "super", "(", "BaselinesNode", ",", "self", ")", ".", "__init__", "(", "name", "=", "name", ",", "children", "=", "children", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.set_model": [[16, 19], ["None"], "methods", ["None"], ["", "def", "set_model", "(", "self", ",", "model", ")", ":", "\n", "        ", "self", ".", "model", "=", "model", "\n", "self", ".", "tick_aux", "=", "self", ".", "execution_tick", "if", "model", "is", "not", "None", "else", "self", ".", "training_tick", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.initialise": [[20, 22], ["None"], "methods", ["None"], ["", "def", "initialise", "(", "self", ")", ":", "\n", "        ", "pass", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.tick": [[23, 25], ["baseline_node.BaselinesNode.tick_aux"], "methods", ["None"], ["", "def", "tick", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "tick_aux", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.training_tick": [[26, 67], ["baseline_node.BaselinesNode.logger.debug", "baseline_node.BaselinesNode.update", "child.tick", "baseline_node.BaselinesNode.initialise", "other.stop", "child.stop"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.Condition.update", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.tick", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.initialise"], ["", "def", "training_tick", "(", "self", ")", ":", "\n", "        ", "self", ".", "logger", ".", "debug", "(", "\"%s.tick()\"", "%", "self", ".", "__class__", ".", "__name__", ")", "\n", "# Required behaviour for *all* behaviours and composites is", "\n", "# for tick() to check if it isn't running and initialise", "\n", "if", "self", ".", "status", "!=", "Status", ".", "RUNNING", ":", "\n", "# selectors dont do anything specific on initialisation", "\n", "#   - the current child is managed by the update, never needs to be 'initialised'", "\n", "# run subclass (user) handles", "\n", "            ", "self", ".", "initialise", "(", ")", "\n", "\n", "", "self", ".", "update", "(", ")", "\n", "previous", "=", "self", ".", "current_child", "\n", "child", "=", "self", ".", "children", "[", "self", ".", "child_index", "]", "\n", "\n", "for", "other", "in", "self", ".", "children", ":", "\n", "            ", "if", "child", "!=", "other", "and", "other", ".", "status", "==", "Status", ".", "RUNNING", ":", "\n", "                ", "other", ".", "stop", "(", "Status", ".", "INVALID", ")", "\n", "\n", "", "", "for", "node", "in", "child", ".", "tick", "(", ")", ":", "\n", "            ", "yield", "node", "\n", "if", "node", "is", "child", ":", "\n", "                ", "if", "node", ".", "status", "==", "Status", ".", "RUNNING", "or", "node", ".", "status", "==", "Status", ".", "FAILURE", ":", "\n", "                    ", "self", ".", "current_child", "=", "child", "\n", "self", ".", "status", "=", "node", ".", "status", "\n", "if", "previous", "is", "None", "or", "previous", "!=", "self", ".", "current_child", ":", "\n", "# we interrupted, invalidate everything at a lower priority", "\n", "                        ", "passed", "=", "False", "\n", "for", "child", "in", "self", ".", "children", ":", "\n", "                            ", "if", "passed", ":", "\n", "                                ", "if", "child", ".", "status", "!=", "Status", ".", "INVALID", ":", "\n", "                                    ", "child", ".", "stop", "(", "Status", ".", "INVALID", ")", "\n", "", "", "passed", "=", "True", "if", "child", "==", "self", ".", "current_child", "else", "passed", "\n", "", "", "yield", "self", "\n", "return", "\n", "# all children succeeded, set Success ourselves and current child to the last bugger who failed us", "\n", "", "", "", "self", ".", "status", "=", "Status", ".", "SUCCESS", "\n", "try", ":", "\n", "            ", "self", ".", "current_child", "=", "self", ".", "children", "[", "-", "1", "]", "\n", "", "except", "IndexError", ":", "\n", "            ", "self", ".", "current_child", "=", "None", "\n", "", "yield", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.execution_tick": [[68, 74], ["baseline_node.BaselinesNode.get_observation_array", "baseline_node.BaselinesNode.training_tick", "baseline_node.BaselinesNode.model.predict"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.get_observation_array", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.training_tick"], ["", "def", "execution_tick", "(", "self", ")", ":", "\n", "        ", "observation", "=", "self", ".", "get_observation_array", "(", ")", "\n", "if", "observation", "is", "not", "None", ":", "\n", "            ", "child_index", ",", "_", "=", "self", ".", "model", ".", "predict", "(", "observation", ")", "\n", "self", ".", "child_index", "=", "child_index", "\n", "", "return", "self", ".", "training_tick", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.set_tick_child": [[75, 77], ["None"], "methods", ["None"], ["", "def", "set_tick_child", "(", "self", ",", "child_index", ")", ":", "\n", "        ", "self", ".", "child_index", "=", "child_index", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.get_observation_space": [[78, 80], ["NotImplementedError"], "methods", ["None"], ["", "def", "get_observation_space", "(", "self", ")", ":", "\n", "        ", "raise", "NotImplementedError", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.get_observation_array": [[81, 83], ["NotImplementedError"], "methods", ["None"], ["", "def", "get_observation_array", "(", "self", ")", ":", "\n", "        ", "raise", "NotImplementedError", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.calculate_rewards": [[84, 86], ["NotImplementedError"], "methods", ["None"], ["", "def", "calculate_rewards", "(", "self", ")", ":", "\n", "        ", "raise", "NotImplementedError", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.__init__": [[90, 96], ["baseline_node.BaselinesNode.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "name", "=", "\"A2CLearner\"", ",", "children", "=", "None", ",", "model", "=", "None", ",", ")", ":", "\n", "        ", "super", "(", "PPABaselinesNode", ",", "self", ")", ".", "__init__", "(", "agent", ",", "name", "=", "name", ",", "children", "=", "children", ",", "model", "=", "model", ")", "\n", "self", ".", "accs", "=", "[", "]", "\n", "self", ".", "post_conditions", "=", "[", "]", "\n", "self", ".", "total_reward", "=", "0", "\n", "self", ".", "obs_filter", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.get_observation_space": [[97, 99], ["baseline_node.PPABaselinesNode.agent.observation_manager.get_observation_space"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.get_observation_space"], ["", "def", "get_observation_space", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "agent", ".", "observation_manager", ".", "get_observation_space", "(", "self", ".", "obs_filter", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.get_observation_array": [[100, 104], ["observation.get_filtered"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.Observation.get_filtered"], ["", "def", "get_observation_array", "(", "self", ")", ":", "\n", "        ", "observation", "=", "self", ".", "agent", ".", "observation_manager", ".", "observation", "\n", "\n", "return", "None", "if", "observation", "is", "None", "else", "observation", ".", "get_filtered", "(", "self", ".", "obs_filter", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.calculate_rewards": [[105, 115], ["baseline_node.PPABaselinesNode.is_acc_violated", "baseline_node.PPABaselinesNode.is_post_conditions_fulfilled", "baseline_node.PPABaselinesNode.agent.observation_manager.is_agent_alive"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.is_acc_violated", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.is_post_conditions_fulfilled", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.observation_manager.ObservationManager.is_agent_alive"], ["", "def", "calculate_rewards", "(", "self", ")", ":", "\n", "        ", "reward", "=", "self", ".", "agent", ".", "observation_manager", ".", "reward", "+", "self", ".", "agent", ".", "observation_manager", ".", "reward_definition", ".", "STEP_REWARD", "\n", "if", "self", ".", "is_acc_violated", "(", ")", ":", "\n", "            ", "reward", "+=", "self", ".", "agent", ".", "observation_manager", ".", "reward_definition", ".", "ACC_VIOLATED_REWARD", "\n", "", "if", "self", ".", "is_post_conditions_fulfilled", "(", ")", ":", "\n", "            ", "reward", "+=", "self", ".", "agent", ".", "observation_manager", ".", "reward_definition", ".", "POST_CONDITION_FULFILLED_REWARD", "\n", "", "if", "not", "self", ".", "agent", ".", "observation_manager", ".", "is_agent_alive", "(", ")", ":", "\n", "            ", "reward", "+=", "self", ".", "agent", ".", "observation_manager", ".", "reward_definition", ".", "AGENT_DEAD_REWARD", "\n", "", "self", ".", "total_reward", "+=", "reward", "\n", "return", "reward", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.is_acc_violated": [[116, 118], ["any", "constraint.evaluate"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.bt.conditions.IsEntityPickable.evaluate"], ["", "def", "is_acc_violated", "(", "self", ")", ":", "\n", "        ", "return", "any", "(", "not", "constraint", ".", "evaluate", "(", "self", ".", "agent", ")", "for", "constraint", "in", "self", ".", "accs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.is_post_conditions_fulfilled": [[119, 126], ["post_condition.tick_once"], "methods", ["None"], ["", "def", "is_post_conditions_fulfilled", "(", "self", ")", ":", "\n", "        ", "for", "post_condition", "in", "self", ".", "post_conditions", ":", "\n", "            ", "post_condition", ".", "tick_once", "(", ")", "\n", "res", "=", "post_condition", ".", "status", "\n", "if", "res", "==", "Status", ".", "FAILURE", ":", "\n", "                ", "return", "False", "\n", "", "", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.reset_node": [[127, 130], ["print"], "methods", ["None"], ["", "def", "reset_node", "(", "self", ")", ":", "\n", "        ", "print", "(", "\"Total Reward of Episode\"", ",", "self", ".", "total_reward", ")", "\n", "self", ".", "total_reward", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.DefeatSkeleton.__init__": [[134, 144], ["baseline_node.PPABaselinesNode.__init__", "bt.actions.TurnLeft", "bt.actions.TurnRight", "bt.actions.MoveForward", "bt.actions.MoveBackward", "bt.actions.StopMoving", "bt.actions.Attack"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "model", "=", "None", ")", ":", "\n", "        ", "children", "=", "[", "\n", "TurnLeft", "(", "agent", ")", ",", "\n", "TurnRight", "(", "agent", ")", ",", "\n", "MoveForward", "(", "agent", ")", ",", "\n", "MoveBackward", "(", "agent", ")", ",", "\n", "StopMoving", "(", "agent", ")", ",", "\n", "Attack", "(", "agent", ")", "\n", "]", "\n", "super", "(", ")", ".", "__init__", "(", "agent", ",", "\"DefeatSkeleton\"", ",", "children", ",", "model", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.DefeatCow.__init__": [[148, 160], ["baseline_node.PPABaselinesNode.__init__", "bt.actions.TurnLeft", "bt.actions.TurnRight", "bt.actions.MoveForward", "bt.actions.MoveBackward", "bt.actions.StopMoving", "bt.actions.Attack", "bt.actions.PitchUp", "bt.actions.PitchDown"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "model", "=", "None", ")", ":", "\n", "        ", "children", "=", "[", "\n", "TurnLeft", "(", "agent", ")", ",", "\n", "TurnRight", "(", "agent", ")", ",", "\n", "MoveForward", "(", "agent", ")", ",", "\n", "MoveBackward", "(", "agent", ")", ",", "\n", "StopMoving", "(", "agent", ")", ",", "\n", "Attack", "(", "agent", ")", ",", "\n", "PitchUp", "(", "agent", ")", ",", "\n", "PitchDown", "(", "agent", ")", "\n", "]", "\n", "super", "(", ")", ".", "__init__", "(", "agent", ",", "\"DefeatSkeleton\"", ",", "children", ",", "model", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.ChaseEntity.__init__": [[164, 173], ["baseline_node.PPABaselinesNode.__init__", "bt.actions.TurnLeft", "bt.actions.TurnRight", "bt.actions.MoveForward", "bt.actions.MoveBackward", "bt.actions.StopMoving"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "agent", ",", "model", "=", "None", ")", ":", "\n", "        ", "children", "=", "[", "\n", "TurnLeft", "(", "agent", ")", ",", "\n", "TurnRight", "(", "agent", ")", ",", "\n", "MoveForward", "(", "agent", ")", ",", "\n", "MoveBackward", "(", "agent", ")", ",", "\n", "StopMoving", "(", "agent", ")", "\n", "]", "\n", "super", "(", ")", ".", "__init__", "(", "agent", ",", "\"DefeatSkeleton\"", ",", "children", ",", "model", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.disable_malmo_ai_for_training_callback.DisableMalmoAIForTrainingCallback.__init__": [[9, 14], ["stable_baselines3.common.callbacks.BaseCallback.__init__"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["    ", "def", "__init__", "(", "self", ",", "mission_manager", ":", "MissionManager", ",", "agent", ":", "MalmoAgent", ",", "active_entities", "=", "True", ",", "verbose", "=", "0", ")", ":", "\n", "        ", "super", "(", "DisableMalmoAIForTrainingCallback", ",", "self", ")", ".", "__init__", "(", "verbose", ")", "\n", "self", ".", "manager", "=", "mission_manager", "\n", "self", ".", "agent", "=", "agent", "\n", "self", ".", "active_entities", "=", "active_entities", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.disable_malmo_ai_for_training_callback.DisableMalmoAIForTrainingCallback._on_rollout_start": [[15, 19], ["disable_malmo_ai_for_training_callback.DisableMalmoAIForTrainingCallback.agent.resume", "disable_malmo_ai_for_training_callback.DisableMalmoAIForTrainingCallback.manager.enable_ai"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.resume", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.enable_ai"], ["", "def", "_on_rollout_start", "(", "self", ")", "->", "None", ":", "\n", "        ", "if", "self", ".", "active_entities", ":", "\n", "            ", "self", ".", "manager", ".", "enable_ai", "(", ")", "\n", "", "self", ".", "agent", ".", "resume", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.disable_malmo_ai_for_training_callback.DisableMalmoAIForTrainingCallback._on_rollout_end": [[20, 25], ["disable_malmo_ai_for_training_callback.DisableMalmoAIForTrainingCallback.manager.disable_ai", "disable_malmo_ai_for_training_callback.DisableMalmoAIForTrainingCallback.manager.agent_host.sendCommand", "disable_malmo_ai_for_training_callback.DisableMalmoAIForTrainingCallback.manager.agent_host.sendCommand", "disable_malmo_ai_for_training_callback.DisableMalmoAIForTrainingCallback.agent.pause"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.disable_ai", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.malmo_agent.MalmoAgent.pause"], ["", "def", "_on_rollout_end", "(", "self", ")", "->", "None", ":", "\n", "        ", "self", ".", "manager", ".", "disable_ai", "(", ")", "\n", "self", ".", "manager", ".", "agent_host", ".", "sendCommand", "(", "\"move 0\"", ")", "\n", "self", ".", "manager", ".", "agent_host", ".", "sendCommand", "(", "\"strafe 0\"", ")", "\n", "self", ".", "agent", ".", "pause", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.disable_malmo_ai_for_training_callback.DisableMalmoAIForTrainingCallback._on_step": [[26, 28], ["None"], "methods", ["None"], ["", "def", "_on_step", "(", "self", ")", "->", "bool", ":", "\n", "        ", "return", "True", "\n", "", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baselines_node_training_env.BaselinesNodeTrainingEnv.__init__": [[8, 20], ["gym.spaces.Discrete", "baselines_node_training_env.BaselinesNodeTrainingEnv.node.get_observation_space", "len"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.get_observation_space"], ["def", "__init__", "(", "self", ",", "learning_node", ",", "mission", ",", "acc_ends_episode", "=", "True", ",", "max_steps_per_episode", "=", "15000", ")", ":", "\n", "        ", "self", ".", "node", "=", "learning_node", "\n", "self", ".", "agent", "=", "self", ".", "node", ".", "agent", "\n", "self", ".", "mission", "=", "mission", "\n", "\n", "self", ".", "acc_ends_episode", "=", "acc_ends_episode", "\n", "self", ".", "is_acc_violated", "=", "False", "\n", "\n", "self", ".", "action_space", "=", "gym", ".", "spaces", ".", "Discrete", "(", "len", "(", "self", ".", "node", ".", "children", ")", ")", "\n", "self", ".", "observation_space", "=", "self", ".", "node", ".", "get_observation_space", "(", ")", "\n", "self", ".", "steps", "=", "0", "\n", "self", ".", "max_steps_per_episode", "=", "max_steps_per_episode", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baselines_node_training_env.BaselinesNodeTrainingEnv.step": [[21, 38], ["baselines_node_training_env.BaselinesNodeTrainingEnv.node.set_tick_child", "baselines_node_training_env.BaselinesNodeTrainingEnv.node.tick_once", "baselines_node_training_env.BaselinesNodeTrainingEnv.mission.tick_mission", "baselines_node_training_env.BaselinesNodeTrainingEnv.node.calculate_rewards", "baselines_node_training_env.BaselinesNodeTrainingEnv.node.get_observation_array", "baselines_node_training_env.BaselinesNodeTrainingEnv.agent.is_mission_over", "baselines_node_training_env.BaselinesNodeTrainingEnv.node.is_post_conditions_fulfilled", "baselines_node_training_env.BaselinesNodeTrainingEnv.node.is_acc_violated"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.BaselinesNode.set_tick_child", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_runner.MissionRunner.tick_mission", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.calculate_rewards", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.get_observation_array", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.behavior_tree_agent.BehaviorTreeAgent.is_mission_over", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.is_post_conditions_fulfilled", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.is_acc_violated"], ["", "def", "step", "(", "self", ",", "action", ")", ":", "\n", "        ", "self", ".", "steps", "+=", "1", "\n", "self", ".", "node", ".", "set_tick_child", "(", "action", ")", "\n", "self", ".", "node", ".", "tick_once", "(", ")", "\n", "\n", "self", ".", "mission", ".", "tick_mission", "(", ")", "\n", "\n", "reward", "=", "self", ".", "node", ".", "calculate_rewards", "(", ")", "\n", "ob", "=", "self", ".", "node", ".", "get_observation_array", "(", ")", "\n", "is_mission_over", "=", "self", ".", "agent", ".", "is_mission_over", "(", ")", "\n", "self", ".", "is_acc_violated", "=", "self", ".", "acc_ends_episode", "and", "self", ".", "node", ".", "is_acc_violated", "(", ")", "\n", "is_post_conditions_fulfilled", "=", "self", ".", "node", ".", "is_post_conditions_fulfilled", "(", ")", "\n", "is_timed_out", "=", "self", ".", "steps", ">", "self", ".", "max_steps_per_episode", "\n", "\n", "done", "=", "is_mission_over", "or", "self", ".", "is_acc_violated", "or", "is_timed_out", "or", "is_post_conditions_fulfilled", "\n", "\n", "return", "ob", ",", "reward", ",", "done", ",", "{", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baselines_node_training_env.BaselinesNodeTrainingEnv.close": [[39, 41], ["baselines_node_training_env.BaselinesNodeTrainingEnv.agent.quit"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_manager.MissionManager.quit"], ["", "def", "close", "(", "self", ")", ":", "\n", "        ", "self", ".", "agent", ".", "quit", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baselines_node_training_env.BaselinesNodeTrainingEnv.reset": [[42, 55], ["baselines_node_training_env.BaselinesNodeTrainingEnv.node.reset_node", "baselines_node_training_env.BaselinesNodeTrainingEnv.node.get_observation_array", "baselines_node_training_env.BaselinesNodeTrainingEnv.agent.is_mission_over", "baselines_node_training_env.BaselinesNodeTrainingEnv.restart_mission", "baselines_node_training_env.BaselinesNodeTrainingEnv.node.is_acc_violated", "baselines_node_training_env.BaselinesNodeTrainingEnv.mission.tick_mission", "baselines_node_training_env.BaselinesNodeTrainingEnv.agent.control_loop", "baselines_node_training_env.BaselinesNodeTrainingEnv.restart_mission", "baselines_node_training_env.BaselinesNodeTrainingEnv.agent.is_mission_over"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.reset_node", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.get_observation_array", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.behavior_tree_agent.BehaviorTreeAgent.is_mission_over", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baselines_node_training_env.BaselinesNodeTrainingEnv.restart_mission", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.is_acc_violated", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.mission.mission_runner.MissionRunner.tick_mission", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.behavior_tree_agent.BehaviorTreeAgent.control_loop", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baselines_node_training_env.BaselinesNodeTrainingEnv.restart_mission", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.agents.behavior_tree_agent.BehaviorTreeAgent.is_mission_over"], ["", "def", "reset", "(", "self", ")", ":", "\n", "        ", "self", ".", "steps", "=", "0", "\n", "if", "self", ".", "is_acc_violated", ":", "\n", "            ", "while", "self", ".", "node", ".", "is_acc_violated", "(", ")", "and", "not", "self", ".", "agent", ".", "is_mission_over", "(", ")", ":", "\n", "                ", "self", ".", "mission", ".", "tick_mission", "(", ")", "\n", "self", ".", "agent", ".", "control_loop", "(", ")", "\n", "", "self", ".", "is_acc_violated", "=", "False", "\n", "if", "self", ".", "agent", ".", "is_mission_over", "(", ")", ":", "\n", "                ", "self", ".", "restart_mission", "(", ")", "\n", "", "", "else", ":", "\n", "            ", "self", ".", "restart_mission", "(", ")", "\n", "", "self", ".", "node", ".", "reset_node", "(", ")", "\n", "return", "self", ".", "node", ".", "get_observation_array", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baselines_node_training_env.BaselinesNodeTrainingEnv.restart_mission": [[56, 61], ["baselines_node_training_env.BaselinesNodeTrainingEnv.mission.reset", "baselines_node_training_env.BaselinesNodeTrainingEnv.node.get_observation_array"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.reset", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baseline_node.PPABaselinesNode.get_observation_array"], ["", "def", "restart_mission", "(", "self", ")", ":", "\n", "        ", "self", ".", "steps", "=", "0", "\n", "self", ".", "mission", ".", "reset", "(", ")", "\n", "\n", "return", "self", ".", "node", ".", "get_observation_array", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.baselines_node_training_env.BaselinesNodeTrainingEnv.render": [[62, 65], ["NotImplementedError"], "methods", ["None"], ["", "def", "render", "(", "self", ",", "mode", "=", "'human'", ",", "close", "=", "False", ")", ":", "\n", "        ", "\"\"\" Minecraft is started separately. \"\"\"", "\n", "raise", "NotImplementedError", "(", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.save_best_model_callback.SaveOnBestTrainingRewardCallback.__init__": [[20, 27], ["stable_baselines3.common.callbacks.BaseCallback.__init__", "os.path.join"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__"], ["def", "__init__", "(", "self", ",", "check_freq", ":", "int", ",", "log_dir", ":", "str", "=", "\"./\"", ",", "verbose", "=", "0", ")", ":", "\n", "        ", "super", "(", "SaveOnBestTrainingRewardCallback", ",", "self", ")", ".", "__init__", "(", "verbose", ")", "\n", "self", ".", "check_freq", "=", "check_freq", "\n", "self", ".", "log_dir", "=", "log_dir", "\n", "self", ".", "save_path", "=", "os", ".", "path", ".", "join", "(", "log_dir", ",", "'best_model'", ")", "\n", "self", ".", "best_mean_reward", "=", "-", "np", ".", "inf", "\n", "self", ".", "index", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.save_best_model_callback.SaveOnBestTrainingRewardCallback._init_callback": [[28, 32], ["os.makedirs"], "methods", ["None"], ["", "def", "_init_callback", "(", "self", ")", "->", "None", ":", "\n", "# Create folder if needed", "\n", "        ", "if", "self", ".", "save_path", "is", "not", "None", ":", "\n", "            ", "os", ".", "makedirs", "(", "self", ".", "save_path", ",", "exist_ok", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.learning.save_best_model_callback.SaveOnBestTrainingRewardCallback._on_step": [[33, 57], ["stable_baselines3.common.results_plotter.ts2xy", "stable_baselines3.common.results_plotter.load_results", "len", "numpy.mean", "print", "print", "save_best_model_callback.SaveOnBestTrainingRewardCallback.model.save", "isinstance", "print", "save_best_model_callback.SaveOnBestTrainingRewardCallback.model.save_replay_buffer", "str"], "methods", ["None"], ["", "", "def", "_on_step", "(", "self", ")", "->", "bool", ":", "\n", "        ", "if", "self", ".", "n_calls", "%", "self", ".", "check_freq", "==", "0", ":", "\n", "\n", "# Retrieve training reward", "\n", "            ", "x", ",", "y", "=", "ts2xy", "(", "load_results", "(", "self", ".", "log_dir", ")", ",", "'timesteps'", ")", "\n", "if", "len", "(", "x", ")", ">", "0", ":", "\n", "# Mean training reward over the last 100 episodes", "\n", "                ", "mean_reward", "=", "np", ".", "mean", "(", "y", "[", "-", "100", ":", "]", ")", "\n", "if", "self", ".", "verbose", ">", "0", ":", "\n", "                    ", "print", "(", "f\"Num timesteps: {self.num_timesteps}\"", ")", "\n", "print", "(", "f\"Best mean reward: {self.best_mean_reward} - Last mean reward per episode: {mean_reward}\"", ")", "\n", "\n", "# New best model, you could save the agent here", "\n", "", "if", "mean_reward", ">", "self", ".", "best_mean_reward", ":", "\n", "                    ", "self", ".", "best_mean_reward", "=", "mean_reward", "\n", "# Example for saving best model", "\n", "if", "self", ".", "verbose", ">", "0", ":", "\n", "                        ", "print", "(", "f\"Saving new best model to {self.save_path}\"", ")", "\n", "", "self", ".", "model", ".", "save", "(", "self", ".", "save_path", "+", "\"_\"", "+", "str", "(", "self", ".", "index", ")", ")", "\n", "if", "isinstance", "(", "self", ".", "model", ",", "OffPolicyAlgorithm", ")", ":", "\n", "                        ", "self", ".", "model", ".", "save_replay_buffer", "(", "self", ".", "save_path", "+", "\"_buffer\"", ")", "\n", "", "self", ".", "index", "=", "self", ".", "index", "+", "1", "\n", "\n", "", "", "", "return", "True", "\n", "", "", ""]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.EvaluationManager.__init__": [[13, 24], ["dict", "list", "list", "evaluation_manager.MissionRecord", "utils.file.get_absolute_path"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.utils.file.get_absolute_path"], ["    ", "def", "__init__", "(", "self", ",", "runs", "=", "50", ",", "eval_log_file", "=", "None", ",", "name", "=", "\"\"", ")", ":", "\n", "        ", "self", ".", "runs", "=", "runs", "\n", "self", ".", "mission_max_time", "=", "None", "\n", "self", ".", "log_file", "=", "get_absolute_path", "(", "eval_log_file", ")", "if", "eval_log_file", "is", "not", "None", "else", "None", "\n", "\n", "self", ".", "nodes", "=", "dict", "(", ")", "\n", "self", ".", "positions", "=", "list", "(", ")", "\n", "self", ".", "mission_records", "=", "list", "(", ")", "\n", "self", ".", "current_record", "=", "MissionRecord", "(", "None", ")", "\n", "\n", "self", ".", "name", "=", "name", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.EvaluationManager.register_node": [[25, 29], ["evaluation_manager.NodeRecord"], "methods", ["None"], ["", "def", "register_node", "(", "self", ",", "node", ")", ":", "\n", "        ", "record", "=", "NodeRecord", "(", "node", ")", "\n", "self", ".", "nodes", "[", "node", "]", "=", "record", "\n", "return", "record", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.EvaluationManager.record_mission_start": [[30, 32], ["evaluation_manager.MissionRecord"], "methods", ["None"], ["", "def", "record_mission_start", "(", "self", ",", "start", ")", ":", "\n", "        ", "self", ".", "current_record", "=", "MissionRecord", "(", "start", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.EvaluationManager.record_mission_end": [[33, 37], ["evaluation_manager.EvaluationManager.current_record.finalize", "evaluation_manager.EvaluationManager.mission_records.append", "node.reset", "evaluation_manager.EvaluationManager.nodes.values"], "methods", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.MissionRecord.finalize", "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.reset"], ["", "def", "record_mission_end", "(", "self", ",", "state", ",", "steps", ",", "end", ",", "health", ")", ":", "\n", "        ", "self", ".", "current_record", ".", "finalize", "(", "state", ",", "steps", ",", "end", ",", "self", ".", "nodes", ",", "self", ".", "positions", ",", "health", ")", "\n", "[", "node", ".", "reset", "(", ")", "for", "node", "in", "self", ".", "nodes", ".", "values", "(", ")", "]", "\n", "self", ".", "mission_records", ".", "append", "(", "self", ".", "current_record", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.EvaluationManager.record_node": [[38, 45], ["None"], "methods", ["None"], ["", "def", "record_node", "(", "self", ",", "node", ",", "status", ")", ":", "\n", "        ", "record", "=", "self", ".", "nodes", "[", "node", "]", "\n", "record", ".", "steps", "+=", "1", "\n", "if", "status", "==", "Status", ".", "SUCCESS", ":", "\n", "            ", "record", ".", "successes", "+=", "1", "\n", "", "else", ":", "\n", "            ", "record", ".", "failures", "+=", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.EvaluationManager.record_position": [[46, 48], ["evaluation_manager.EvaluationManager.positions.append", "evaluation_manager.PositionRecord"], "methods", ["None"], ["", "", "def", "record_position", "(", "self", ",", "x", ",", "z", ")", ":", "\n", "        ", "self", ".", "positions", ".", "append", "(", "PositionRecord", "(", "x", ",", "z", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.EvaluationManager.store_evaluation": [[49, 56], ["jsonpickle.set_encoder_options", "jsonpickle.encode", "os.makedirs", "os.path.dirname", "open", "file.write"], "methods", ["None"], ["", "def", "store_evaluation", "(", "self", ")", ":", "\n", "        ", "if", "self", ".", "log_file", "is", "not", "None", ":", "\n", "            ", "jsonpickle", ".", "set_encoder_options", "(", "'simplejson'", ",", "sort_keys", "=", "True", ",", "indent", "=", "4", ")", "\n", "eval_json", "=", "jsonpickle", ".", "encode", "(", "self", ".", "mission_records", ",", "unpicklable", "=", "False", ")", "\n", "os", ".", "makedirs", "(", "os", ".", "path", ".", "dirname", "(", "self", ".", "log_file", ")", ",", "exist_ok", "=", "True", ")", "\n", "with", "open", "(", "self", ".", "log_file", ",", "'w+'", ")", "as", "file", ":", "\n", "                ", "file", ".", "write", "(", "eval_json", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.MissionRecord.__init__": [[59, 68], ["list", "list", "list"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "start", ")", ":", "\n", "        ", "self", ".", "steps", "=", "0", "\n", "self", ".", "end", "=", "0", "\n", "self", ".", "start", "=", "start", "\n", "self", ".", "positions", "=", "list", "(", ")", "\n", "self", ".", "nodes", "=", "list", "(", ")", "\n", "self", ".", "rewards", "=", "list", "(", ")", "\n", "self", ".", "health", "=", "0", "\n", "self", ".", "state", "=", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.MissionRecord.finalize": [[69, 76], ["copy.deepcopy", "copy.deepcopy", "nodes.values"], "methods", ["None"], ["", "def", "finalize", "(", "self", ",", "state", ",", "steps", ",", "end", ",", "nodes", ":", "dict", ",", "positions", ":", "list", ",", "health", ")", ":", "\n", "        ", "self", ".", "steps", "=", "steps", "\n", "self", ".", "end", "=", "end", "\n", "self", ".", "nodes", "=", "[", "copy", ".", "deepcopy", "(", "node", ")", "for", "node", "in", "nodes", ".", "values", "(", ")", "]", "\n", "self", ".", "positions", "=", "copy", ".", "deepcopy", "(", "positions", ")", "\n", "self", ".", "health", "=", "health", "\n", "self", ".", "state", "=", "state", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.PositionRecord.__init__": [[80, 83], ["float", "float"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "x", ",", "z", ")", ":", "\n", "        ", "self", ".", "x", "=", "float", "(", "x", ")", "\n", "self", ".", "z", "=", "float", "(", "z", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.__init__": [[86, 91], ["None"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "node", ")", ":", "\n", "        ", "self", ".", "name", "=", "node", ".", "name", "\n", "self", ".", "failures", "=", "0", "\n", "self", ".", "successes", "=", "0", "\n", "self", ".", "steps", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.evaluation.evaluation_manager.NodeRecord.reset": [[92, 96], ["None"], "methods", ["None"], ["", "def", "reset", "(", "self", ")", ":", "\n", "        ", "self", ".", "failures", "=", "0", "\n", "self", ".", "successes", "=", "0", "\n", "self", ".", "steps", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.malmolibrary.malmoutils.fix_print": [[33, 46], ["os.fdopen", "functools.partial", "sys.stdout.fileno"], "function", ["None"], ["def", "fix_print", "(", ")", ":", "\n", "# We want to flush the print output immediately, so that we can view test output as it happens.", "\n", "# The way to do this changed completely between Python 2 and 3, with the result that setting this", "\n", "# in a cross-compatible way requires a few lines of ugly code.", "\n", "# Rather than include this mess in every single sample, it's nice to wrap it into a handy", "\n", "# function - hence this.", "\n", "    ", "if", "sys", ".", "version_info", "[", "0", "]", "==", "2", ":", "\n", "        ", "sys", ".", "stdout", "=", "os", ".", "fdopen", "(", "sys", ".", "stdout", ".", "fileno", "(", ")", ",", "'w'", ",", "0", ")", "# flush print output immediately", "\n", "", "else", ":", "\n", "        ", "import", "functools", "\n", "# Have to assign to builtins or the change won't make it outside of this module's scope", "\n", "import", "builtins", "\n", "builtins", ".", "print", "=", "functools", ".", "partial", "(", "print", ",", "flush", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.malmolibrary.malmoutils.parse_command_line": [[47, 63], ["agent_host.addOptionalStringArgument", "agent_host.addOptionalFlag", "agent_host.receivedArgument", "agent_host.parse", "print", "exit", "print", "print", "exit", "agent_host.getUsage", "agent_host.getUsage"], "function", ["None"], ["", "", "def", "parse_command_line", "(", "agent_host", ",", "argv", "=", "None", ")", ":", "\n", "    ", "if", "argv", "is", "None", ":", "\n", "       ", "argv", "=", "sys", ".", "argv", "\n", "# Add standard options required by test suite:", "\n", "", "agent_host", ".", "addOptionalStringArgument", "(", "\"recording_dir,r\"", ",", "\"Path to location for saving mission recordings\"", ",", "\"\"", ")", "\n", "agent_host", ".", "addOptionalFlag", "(", "\"record_video,v\"", ",", "\"Record video stream\"", ")", "\n", "# Attempt to parse:", "\n", "try", ":", "\n", "        ", "agent_host", ".", "parse", "(", "argv", ")", "\n", "", "except", "RuntimeError", "as", "e", ":", "\n", "        ", "print", "(", "'ERROR:'", ",", "e", ")", "\n", "print", "(", "agent_host", ".", "getUsage", "(", ")", ")", "\n", "exit", "(", "1", ")", "\n", "", "if", "agent_host", ".", "receivedArgument", "(", "\"help\"", ")", ":", "\n", "        ", "print", "(", "agent_host", ".", "getUsage", "(", ")", ")", "\n", "exit", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.malmolibrary.malmoutils.get_video_xml": [[65, 67], ["agent_host.receivedArgument"], "function", ["None"], ["", "", "def", "get_video_xml", "(", "agent_host", ")", ":", "\n", "    ", "return", "'<VideoProducer><Width>860</Width><Height>480</Height></VideoProducer>'", "if", "agent_host", ".", "receivedArgument", "(", "\"record_video\"", ")", "else", "''", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.malmolibrary.malmoutils.get_default_recording_object": [[68, 82], ["MalmoPython.MissionRecordSpec", "malmoutils.get_recordings_directory", "MalmoPython.MissionRecordSpec.setDestination", "MalmoPython.MissionRecordSpec.recordRewards", "MalmoPython.MissionRecordSpec.recordObservations", "MalmoPython.MissionRecordSpec.recordCommands", "agent_host.receivedArgument", "MalmoPython.MissionRecordSpec.recordMP4"], "function", ["home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.malmolibrary.malmoutils.get_recordings_directory"], ["", "def", "get_default_recording_object", "(", "agent_host", ",", "filename", ")", ":", "\n", "# Convenience method for setting up a recording object - assuming the recording_dir and record_video", "\n", "# flags were passed in as command line arguments (see parse_command_line above).", "\n", "# (If no recording destination was passed in, we assume no recording is required.)", "\n", "    ", "my_mission_record", "=", "MalmoPython", ".", "MissionRecordSpec", "(", ")", "\n", "recordingsDirectory", "=", "get_recordings_directory", "(", "agent_host", ")", "\n", "if", "recordingsDirectory", ":", "\n", "        ", "my_mission_record", ".", "setDestination", "(", "recordingsDirectory", "+", "\"//\"", "+", "filename", "+", "\".tgz\"", ")", "\n", "my_mission_record", ".", "recordRewards", "(", ")", "\n", "my_mission_record", ".", "recordObservations", "(", ")", "\n", "my_mission_record", ".", "recordCommands", "(", ")", "\n", "if", "agent_host", ".", "receivedArgument", "(", "\"record_video\"", ")", ":", "\n", "            ", "my_mission_record", ".", "recordMP4", "(", "24", ",", "2000000", ")", "\n", "", "", "return", "my_mission_record", "\n", "\n"]], "home.repos.pwc.inspect_result.martkartasev_btbackchainingrl.malmolibrary.malmoutils.get_recordings_directory": [[83, 103], ["agent_host.getStringArgument", "agent_host.receivedArgument", "os.makedirs", "os.path.join"], "function", ["None"], ["", "def", "get_recordings_directory", "(", "agent_host", ")", ":", "\n", "# Check the dir passed in:", "\n", "    ", "recordingsDirectory", "=", "agent_host", ".", "getStringArgument", "(", "'recording_dir'", ")", "\n", "if", "recordingsDirectory", ":", "\n", "# If we're running as an integration test, we want to send all our recordings", "\n", "# to the central test location specified in the environment variable MALMO_TEST_RECORDINGS_PATH:", "\n", "        ", "if", "agent_host", ".", "receivedArgument", "(", "\"test\"", ")", ":", "\n", "            ", "try", ":", "\n", "                ", "test_path", "=", "os", ".", "environ", "[", "'MALMO_TEST_RECORDINGS_PATH'", "]", "\n", "if", "test_path", ":", "\n", "                    ", "recordingsDirectory", "=", "os", ".", "path", ".", "join", "(", "test_path", ",", "recordingsDirectory", ")", "\n", "", "", "except", ":", "\n", "                ", "pass", "\n", "# Now attempt to create the folder we want to write to:", "\n", "", "", "try", ":", "\n", "            ", "os", ".", "makedirs", "(", "recordingsDirectory", ")", "\n", "", "except", "OSError", "as", "exception", ":", "\n", "            ", "if", "exception", ".", "errno", "!=", "errno", ".", "EEXIST", ":", "# ignore error if already existed", "\n", "                ", "raise", "\n", "", "", "", "return", "recordingsDirectory", "\n", "\n"]]}