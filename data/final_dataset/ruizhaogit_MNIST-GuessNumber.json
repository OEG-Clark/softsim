{"home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.mnist_util.read": [[10, 40], ["range", "os.path.join", "os.path.join", "open", "struct.unpack", "numpy.fromfile", "open", "struct.unpack", "numpy.fromfile().reshape", "len", "os.path.join", "os.path.join", "flbl.read", "fimg.read", "len", "get_img", "numpy.fromfile"], "function", ["home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.mnist_util.read", "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.mnist_util.read"], ["def", "read", "(", "dataset", "=", "\"training\"", ",", "path", "=", "\".\"", ")", ":", "\n", "    ", "\"\"\"\n    Python function for importing the MNIST data set.  It returns an iterator\n    of 2-tuples with the first element being the label and the second element\n    being a numpy.uint8 2D array of pixel data for the given image.\n    \"\"\"", "\n", "\n", "if", "dataset", "is", "\"training\"", ":", "\n", "        ", "fname_img", "=", "os", ".", "path", ".", "join", "(", "path", ",", "'train-images-idx3-ubyte'", ")", "\n", "fname_lbl", "=", "os", ".", "path", ".", "join", "(", "path", ",", "'train-labels-idx1-ubyte'", ")", "\n", "", "elif", "dataset", "is", "\"testing\"", ":", "\n", "        ", "fname_img", "=", "os", ".", "path", ".", "join", "(", "path", ",", "'t10k-images-idx3-ubyte'", ")", "\n", "fname_lbl", "=", "os", ".", "path", ".", "join", "(", "path", ",", "'t10k-labels-idx1-ubyte'", ")", "\n", "", "else", ":", "\n", "        ", "raise", "(", "ValueError", ",", "\"dataset must be 'testing' or 'training'\"", ")", "\n", "\n", "# Load everything in some numpy arrays", "\n", "", "with", "open", "(", "fname_lbl", ",", "'rb'", ")", "as", "flbl", ":", "\n", "        ", "magic", ",", "num", "=", "struct", ".", "unpack", "(", "\">II\"", ",", "flbl", ".", "read", "(", "8", ")", ")", "\n", "lbl", "=", "np", ".", "fromfile", "(", "flbl", ",", "dtype", "=", "np", ".", "int8", ")", "\n", "\n", "", "with", "open", "(", "fname_img", ",", "'rb'", ")", "as", "fimg", ":", "\n", "        ", "magic", ",", "num", ",", "rows", ",", "cols", "=", "struct", ".", "unpack", "(", "\">IIII\"", ",", "fimg", ".", "read", "(", "16", ")", ")", "\n", "img", "=", "np", ".", "fromfile", "(", "fimg", ",", "dtype", "=", "np", ".", "uint8", ")", ".", "reshape", "(", "len", "(", "lbl", ")", ",", "rows", ",", "cols", ")", "\n", "\n", "", "get_img", "=", "lambda", "idx", ":", "(", "lbl", "[", "idx", "]", ",", "img", "[", "idx", "]", ")", "\n", "\n", "# Create an iterator which returns each image in turn", "\n", "for", "i", "in", "range", "(", "len", "(", "lbl", ")", ")", ":", "# xrange in python 2.7, range in python 3.6", "\n", "        ", "yield", "get_img", "(", "i", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.generateGridImg": [[22, 40], ["range", "img.append", "range", "len", "len", "numpy.random.randint", "img[].append", "dict", "numpy.random.randint", "numpy.random.randint", "numpy.random.randint", "set", "len", "len", "len", "frozenset", "d.items"], "function", ["None"], ["def", "generateGridImg", "(", "size", "=", "3", ")", ":", "\n", "    ", "while", "True", ":", "\n", "        ", "img", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "size", ")", ":", "\n", "            ", "img", ".", "append", "(", "[", "]", ")", "\n", "for", "j", "in", "range", "(", "size", ")", ":", "\n", "                ", "cell", "=", "{", "}", "\n", "cell", "[", "'number'", "]", "=", "np", ".", "random", ".", "randint", "(", "10", ")", "\n", "cell", "[", "'color'", "]", "=", "colors", "[", "np", ".", "random", ".", "randint", "(", "len", "(", "colors", ")", ")", "]", "\n", "cell", "[", "'bgcolor'", "]", "=", "bgcolors", "[", "np", ".", "random", ".", "randint", "(", "len", "(", "bgcolors", ")", ")", "]", "\n", "cell", "[", "'style'", "]", "=", "styles", "[", "np", ".", "random", ".", "randint", "(", "len", "(", "styles", ")", ")", "]", "\n", "img", "[", "i", "]", ".", "append", "(", "cell", ")", "\n", "", "", "img_flat", "=", "[", "x", "for", "sublist", "in", "img", "for", "x", "in", "sublist", "]", "\n", "## check if all numbers are unique in the image", "\n", "if", "len", "(", "img_flat", ")", "==", "len", "(", "[", "dict", "(", "s", ")", "for", "s", "in", "set", "(", "frozenset", "(", "d", ".", "items", "(", ")", ")", "for", "d", "in", "img_flat", ")", "]", ")", ":", "\n", "            ", "break", "\n", "\n", "", "", "return", "img", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.printGridImg": [[43, 50], ["range", "len", "print", "range", "print", "len", "print"], "function", ["None"], ["", "def", "printGridImg", "(", "img", ")", ":", "\n", "    ", "for", "i", "in", "range", "(", "len", "(", "img", ")", ")", ":", "\n", "        ", "for", "k", "in", "img", "[", "0", "]", "[", "0", "]", ":", "\n", "            ", "for", "j", "in", "range", "(", "len", "(", "img", "[", "i", "]", ")", ")", ":", "\n", "                ", "print", "(", "k", ",", "img", "[", "i", "]", "[", "j", "]", "[", "k", "]", ",", "'\\t'", ",", "end", "=", "''", ")", "\n", "", "print", "(", ")", "\n", "", "print", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.initTargetMap": [[53, 60], ["range", "targetMap.append", "range", "targetMap[].append"], "function", ["None"], ["", "", "def", "initTargetMap", "(", "size", "=", "3", ")", ":", "\n", "    ", "targetMap", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "size", ")", ":", "\n", "        ", "targetMap", ".", "append", "(", "[", "]", ")", "\n", "for", "j", "in", "range", "(", "size", ")", ":", "\n", "            ", "targetMap", "[", "i", "]", ".", "append", "(", "True", ")", "\n", "", "", "return", "targetMap", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.getChecklist": [[63, 73], ["set", "range", "len", "range", "len", "checklist[].add"], "function", ["None"], ["", "def", "getChecklist", "(", "gridImg", ",", "targetMap", ")", ":", "\n", "    ", "checklist", "=", "{", "}", "\n", "for", "k", "in", "properties", ":", "\n", "        ", "checklist", "[", "k", "]", "=", "set", "(", ")", "\n", "for", "i", "in", "range", "(", "len", "(", "gridImg", ")", ")", ":", "\n", "            ", "for", "j", "in", "range", "(", "len", "(", "gridImg", "[", "i", "]", ")", ")", ":", "\n", "                ", "if", "targetMap", "[", "i", "]", "[", "j", "]", ":", "\n", "                    ", "checklist", "[", "k", "]", ".", "add", "(", "gridImg", "[", "i", "]", "[", "j", "]", "[", "k", "]", ")", "\n", "\n", "", "", "", "", "return", "checklist", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.updateChecklist": [[76, 86], ["set", "range", "len", "range", "len", "len", "checklist[].add"], "function", ["None"], ["", "def", "updateChecklist", "(", "checklist", ",", "gridImg", ",", "targetMap", ",", "reinit", "=", "False", ")", ":", "\n", "    ", "for", "k", "in", "checklist", ":", "\n", "        ", "if", "not", "reinit", "and", "len", "(", "checklist", "[", "k", "]", ")", "==", "0", ":", "\n", "            ", "continue", "\n", "\n", "", "checklist", "[", "k", "]", "=", "set", "(", ")", "\n", "for", "i", "in", "range", "(", "len", "(", "gridImg", ")", ")", ":", "\n", "            ", "for", "j", "in", "range", "(", "len", "(", "gridImg", "[", "i", "]", ")", ")", ":", "\n", "                ", "if", "targetMap", "[", "i", "]", "[", "j", "]", ":", "\n", "                    ", "checklist", "[", "k", "]", ".", "add", "(", "gridImg", "[", "i", "]", "[", "j", "]", "[", "k", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.noChecklist": [[89, 94], ["len"], "function", ["None"], ["", "", "", "", "", "def", "noChecklist", "(", "checklist", ")", ":", "\n", "    ", "for", "k", "in", "checklist", ":", "\n", "        ", "if", "len", "(", "checklist", "[", "k", "]", ")", "!=", "0", ":", "\n", "            ", "return", "False", "\n", "", "", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.getTargets": [[97, 105], ["range", "len", "range", "len", "targetIndices.append"], "function", ["None"], ["", "def", "getTargets", "(", "gridImg", ",", "targetMap", ",", "prop", ")", ":", "\n", "    ", "count", "=", "0", "\n", "targetIndices", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "len", "(", "gridImg", ")", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "len", "(", "gridImg", "[", "i", "]", ")", ")", ":", "\n", "            ", "if", "targetMap", "[", "i", "]", "[", "j", "]", ":", "\n", "                ", "targetIndices", ".", "append", "(", "(", "i", ",", "j", ")", ")", "\n", "", "", "", "return", "targetIndices", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.countTargets": [[108, 117], ["range", "len", "range", "len", "targetIndices.append"], "function", ["None"], ["", "def", "countTargets", "(", "gridImg", ",", "targetMap", ",", "prop", ",", "val", ")", ":", "\n", "    ", "count", "=", "0", "\n", "targetIndices", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "len", "(", "gridImg", ")", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "len", "(", "gridImg", "[", "i", "]", ")", ")", ":", "\n", "            ", "if", "targetMap", "[", "i", "]", "[", "j", "]", "and", "gridImg", "[", "i", "]", "[", "j", "]", "[", "prop", "]", "==", "val", ":", "\n", "                ", "count", "+=", "1", "\n", "targetIndices", ".", "append", "(", "(", "i", ",", "j", ")", ")", "\n", "", "", "", "return", "count", ",", "targetIndices", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.moveTarget": [[120, 136], ["list", "tuple"], "function", ["None"], ["", "def", "moveTarget", "(", "gridImg", ",", "targetMap", ",", "index", ",", "direction", ")", ":", "\n", "    ", "new_index", "=", "list", "(", "index", ")", "\n", "\n", "if", "direction", "==", "0", ":", "\n", "        ", "new_index", "[", "0", "]", "-=", "1", "\n", "", "elif", "direction", "==", "1", ":", "\n", "        ", "new_index", "[", "0", "]", "+=", "1", "\n", "", "elif", "direction", "==", "2", ":", "\n", "        ", "new_index", "[", "1", "]", "-=", "1", "\n", "", "elif", "direction", "==", "3", ":", "\n", "        ", "new_index", "[", "1", "]", "+=", "1", "\n", "\n", "", "targetMap", "[", "index", "[", "0", "]", "]", "[", "index", "[", "1", "]", "]", "=", "False", "\n", "targetMap", "[", "new_index", "[", "0", "]", "]", "[", "new_index", "[", "1", "]", "]", "=", "True", "\n", "\n", "return", "tuple", "(", "new_index", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.selectSubTargetMap": [[139, 148], ["range", "len", "range", "len"], "function", ["None"], ["", "def", "selectSubTargetMap", "(", "gridImg", ",", "targetMap", ",", "prop", ",", "val", ",", "reverse", "=", "False", ")", ":", "\n", "    ", "count", "=", "0", "\n", "targetIndices", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "len", "(", "gridImg", ")", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "len", "(", "gridImg", "[", "i", "]", ")", ")", ":", "\n", "            ", "if", "targetMap", "[", "i", "]", "[", "j", "]", "and", "gridImg", "[", "i", "]", "[", "j", "]", "[", "prop", "]", "!=", "val", "and", "not", "reverse", ":", "\n", "                ", "targetMap", "[", "i", "]", "[", "j", "]", "=", "False", "\n", "", "elif", "targetMap", "[", "i", "]", "[", "j", "]", "and", "gridImg", "[", "i", "]", "[", "j", "]", "[", "prop", "]", "==", "val", "and", "reverse", ":", "\n", "                ", "targetMap", "[", "i", "]", "[", "j", "]", "=", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.reinitTargetMap": [[150, 154], ["range", "len", "range", "len"], "function", ["None"], ["", "", "", "", "def", "reinitTargetMap", "(", "targetMap", ")", ":", "\n", "    ", "for", "i", "in", "range", "(", "len", "(", "targetMap", ")", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "len", "(", "targetMap", "[", "i", "]", ")", ")", ":", "\n", "            ", "targetMap", "[", "i", "]", "[", "j", "]", "=", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.initTarNum": [[158, 163], ["numpy.random.randint", "numpy.random.randint", "len", "len"], "function", ["None"], ["", "", "", "def", "initTarNum", "(", "gridImg", ")", ":", "\n", "    ", "i", "=", "np", ".", "random", ".", "randint", "(", "len", "(", "gridImg", ")", ")", "\n", "j", "=", "np", ".", "random", ".", "randint", "(", "len", "(", "gridImg", ")", ")", "\n", "tarNumIndice", "=", "(", "i", ",", "j", ")", "\n", "return", "tarNumIndice", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.getNumMap": [[164, 171], ["range", "len", "range", "len"], "function", ["None"], ["", "def", "getNumMap", "(", "targetMap", ")", ":", "\n", "    ", "count", "=", "0", "\n", "for", "i", "in", "range", "(", "len", "(", "targetMap", ")", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "len", "(", "targetMap", "[", "i", "]", ")", ")", ":", "\n", "            ", "if", "targetMap", "[", "i", "]", "[", "j", "]", "==", "True", ":", "\n", "                ", "count", "=", "count", "+", "1", "\n", "", "", "", "return", "count", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.genQA_a": [[173, 230], ["numpy.random.multinomial().argmax", "generate_dataset.countTargets", "numpy.random.multinomial().argmax", "generate_dataset.selectSubTargetMap", "generate_dataset.updateChecklist", "set", "generate_dataset.selectSubTargetMap", "generate_dataset.updateChecklist", "tuple", "len", "numpy.random.multinomial", "numpy.random.randint", "numpy.random.multinomial", "list", "numpy.random.randint", "list", "len", "numpy.random.randint", "numpy.random.randint", "list", "len", "len", "numpy.random.randint", "numpy.random.randint", "list", "len", "len", "numpy.random.randint", "numpy.random.randint", "len", "len"], "function", ["home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.countTargets", "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.selectSubTargetMap", "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.updateChecklist", "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.selectSubTargetMap", "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.updateChecklist"], ["", "def", "genQA_a", "(", "gridImg", ",", "targetMap", ",", "checklist", ",", "tarNum", ",", "subset", "=", "False", ")", ":", "\n", "    ", "while", "True", ":", "\n", "        ", "prop_class", "=", "np", ".", "random", ".", "multinomial", "(", "1", ",", "[", "0.4", ",", "0.25", ",", "0.25", ",", "0.1", "]", ")", ".", "argmax", "(", ")", "\n", "if", "len", "(", "checklist", "[", "properties", "[", "prop_class", "]", "]", ")", "!=", "0", ":", "\n", "            ", "break", "\n", "\n", "", "", "possible_no", "=", "np", ".", "random", ".", "multinomial", "(", "1", ",", "[", "0.98", ",", "0.02", "]", ")", ".", "argmax", "(", ")", "\n", "template", "=", "'Is it %s ?'", "\n", "\n", "\n", "if", "prop_class", "==", "0", ":", "# number", "\n", "        ", "if", "possible_no", "==", "1", ":", "\n", "            ", "num", "=", "np", ".", "random", ".", "randint", "(", "10", ")", "\n", "", "else", ":", "\n", "            ", "num", "=", "list", "(", "checklist", "[", "'number'", "]", ")", "[", "np", ".", "random", ".", "randint", "(", "len", "(", "checklist", "[", "'number'", "]", ")", ")", "]", "\n", "", "template", "=", "template", "%", "'%s in the image'", "\n", "question", "=", "template", "%", "(", "\"%d\"", "%", "num", ")", "\n", "val", "=", "num", "\n", "\n", "", "elif", "prop_class", "==", "1", ":", "# color", "\n", "        ", "if", "possible_no", "==", "1", ":", "\n", "            ", "color", "=", "colors", "[", "np", ".", "random", ".", "randint", "(", "len", "(", "colors", ")", ")", "]", "\n", "", "else", ":", "\n", "            ", "color", "=", "list", "(", "checklist", "[", "'color'", "]", ")", "[", "np", ".", "random", ".", "randint", "(", "len", "(", "checklist", "[", "'color'", "]", ")", ")", "]", "\n", "", "question", "=", "template", "%", "(", "'a digit in %s'", "%", "color", ")", "\n", "val", "=", "color", "\n", "\n", "", "elif", "prop_class", "==", "2", ":", "# bgcolor", "\n", "        ", "if", "possible_no", "==", "1", ":", "\n", "            ", "bgcolor", "=", "bgcolors", "[", "np", ".", "random", ".", "randint", "(", "len", "(", "bgcolors", ")", ")", "]", "\n", "", "else", ":", "\n", "            ", "bgcolor", "=", "list", "(", "checklist", "[", "'bgcolor'", "]", ")", "[", "np", ".", "random", ".", "randint", "(", "len", "(", "checklist", "[", "'bgcolor'", "]", ")", ")", "]", "\n", "", "question", "=", "template", "%", "(", "'in a %s background'", "%", "bgcolor", ")", "\n", "val", "=", "bgcolor", "\n", "\n", "", "elif", "prop_class", "==", "3", ":", "# style", "\n", "        ", "if", "possible_no", "==", "1", ":", "\n", "            ", "style", "=", "styles", "[", "np", ".", "random", ".", "randint", "(", "len", "(", "styles", ")", ")", "]", "\n", "", "else", ":", "\n", "            ", "style", "=", "list", "(", "checklist", "[", "'style'", "]", ")", "[", "np", ".", "random", ".", "randint", "(", "len", "(", "checklist", "[", "'style'", "]", ")", ")", "]", "\n", "", "if", "style", "==", "'flat'", ":", "\n", "            ", "question", "=", "template", "%", "'a flat style digit'", "\n", "", "elif", "style", "==", "'stroke'", ":", "\n", "            ", "question", "=", "template", "%", "'a stroke style digit'", "\n", "", "val", "=", "style", "\n", "", "count", ",", "targetIndices", "=", "countTargets", "(", "gridImg", ",", "targetMap", ",", "properties", "[", "prop_class", "]", ",", "val", ")", "\n", "if", "not", "(", "tarNum", "in", "targetIndices", ")", ":", "\n", "        ", "answer", "=", "'no'", "\n", "selectSubTargetMap", "(", "gridImg", ",", "targetMap", ",", "properties", "[", "prop_class", "]", ",", "val", ",", "True", ")", "\n", "updateChecklist", "(", "checklist", ",", "gridImg", ",", "targetMap", ")", "\n", "", "else", ":", "\n", "        ", "answer", "=", "'yes'", "\n", "checklist", "[", "properties", "[", "prop_class", "]", "]", "=", "set", "(", ")", "\n", "selectSubTargetMap", "(", "gridImg", ",", "targetMap", ",", "properties", "[", "prop_class", "]", ",", "val", ")", "\n", "updateChecklist", "(", "checklist", ",", "gridImg", ",", "targetMap", ")", "\n", "\n", "", "return", "question", ",", "answer", ",", "(", "'Qa'", ",", "prop_class", ",", "val", ")", ",", "tuple", "(", "targetIndices", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.generateSeqQA": [[234, 252], ["generate_dataset.initTargetMap", "generate_dataset.getChecklist", "len", "generate_dataset.genQA_a", "QASequence.append", "len", "len", "generate_dataset.getNumMap"], "function", ["home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.initTargetMap", "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.getChecklist", "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.genQA_a", "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.getNumMap"], ["", "def", "generateSeqQA", "(", "gridImg", ",", "tarNum", ",", "maxlen", "=", "10", ")", ":", "\n", "    ", "targetMap", "=", "initTargetMap", "(", "len", "(", "gridImg", ")", ")", "\n", "checklist", "=", "getChecklist", "(", "gridImg", ",", "targetMap", ")", "\n", "\n", "state", "=", "1", "\n", "QASequence", "=", "[", "]", "\n", "prev_state", "=", "None", "\n", "prev_index", "=", "None", "\n", "while", "True", ":", "\n", "        ", "QAInfo", "=", "{", "}", "\n", "QAInfo", "[", "'question'", "]", ",", "QAInfo", "[", "'answer'", "]", ",", "_", ",", "_", "=", "genQA_a", "(", "gridImg", ",", "targetMap", ",", "checklist", ",", "tarNum", ")", "\n", "\n", "QASequence", ".", "append", "(", "QAInfo", ")", "\n", "if", "getNumMap", "(", "targetMap", ")", "==", "1", ":", "\n", "            ", "break", "\n", "", "", "if", "len", "(", "QASequence", ")", ">", "data", "[", "'maxlen'", "]", ":", "\n", "        ", "data", "[", "'maxlen'", "]", "=", "len", "(", "QASequence", ")", "\n", "", "return", "QASequence", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.getNumPools": [[262, 282], ["mnist_util.read", "sorted", "range", "numPools.append", "range", "numPools.append", "operator.itemgetter", "len", "x[].astype"], "function", ["home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.mnist_util.read"], ["def", "getNumPools", "(", ")", ":", "\n", "    ", "pools", "=", "{", "}", "\n", "for", "dataset", "in", "[", "'training'", ",", "'testing'", "]", ":", "\n", "        ", "mnist", "=", "read", "(", "path", "=", "'data/mnist'", ")", "\n", "mnist", "=", "sorted", "(", "mnist", ",", "key", "=", "op", ".", "itemgetter", "(", "0", ")", ")", "\n", "mnist", "=", "[", "(", "x", "[", "0", "]", ",", "x", "[", "1", "]", ".", "astype", "(", "'float32'", ")", "/", "255", ")", "for", "x", "in", "mnist", "]", "\n", "\n", "numPools", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "9", ")", ":", "\n", "            ", "count", "=", "0", "\n", "for", "j", "in", "range", "(", "len", "(", "mnist", ")", ")", ":", "\n", "                ", "if", "mnist", "[", "j", "]", "[", "0", "]", "!=", "i", ":", "\n", "                    ", "break", "\n", "", "count", "+=", "1", "\n", "", "numPools", ".", "append", "(", "mnist", "[", ":", "count", "]", ")", "\n", "mnist", "=", "mnist", "[", "count", ":", "]", "\n", "", "numPools", ".", "append", "(", "mnist", ")", "\n", "\n", "pools", "[", "dataset", "]", "=", "numPools", "\n", "", "return", "pools", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.realizeSingleNumber": [[302, 316], ["numpy.random.randint", "num_sample.reshape", "numpy.ones", "len", "scipy.ndimage.morphology.grey_dilation().reshape", "scipy.ndimage.morphology.grey_dilation"], "function", ["None"], ["", "def", "realizeSingleNumber", "(", "info", ",", "size", "=", "28", ",", "dataset", "=", "'training'", ")", ":", "\n", "    ", "palette", "=", "np", ".", "ones", "(", "(", "size", ",", "size", ",", "3", ")", ",", "dtype", "=", "'float32'", ")", "*", "colorMap", "[", "info", "[", "'bgcolor'", "]", "]", "\n", "\n", "num_sample_idx", "=", "np", ".", "random", ".", "randint", "(", "len", "(", "numPools", "[", "dataset", "]", "[", "info", "[", "'number'", "]", "]", ")", ")", "\n", "num_sample", "=", "numPools", "[", "dataset", "]", "[", "info", "[", "'number'", "]", "]", "[", "num_sample_idx", "]", "[", "1", "]", "\n", "\n", "if", "info", "[", "'style'", "]", "==", "'stroke'", ":", "\n", "        ", "mask", "=", "grey_dilation", "(", "num_sample", ",", "(", "3", ",", "3", ")", ")", ".", "reshape", "(", "(", "size", ",", "size", ",", "1", ")", ")", "\n", "palette", "=", "palette", "*", "(", "1", "-", "mask", ")", "\n", "\n", "", "mask", "=", "num_sample", ".", "reshape", "(", "(", "size", ",", "size", ",", "1", ")", ")", "\n", "palette", "=", "palette", "*", "(", "1", "-", "mask", ")", "+", "(", "mask", "*", "colorMap", "[", "info", "[", "'color'", "]", "]", ")", "*", "mask", "\n", "\n", "return", "palette", "\n", "\n"]], "home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.realizeGrid": [[319, 325], ["numpy.zeros", "range", "len", "range", "len", "generate_dataset.realizeSingleNumber", "len", "len"], "function", ["home.repos.pwc.inspect_result.ruizhaogit_MNIST-GuessNumber.None.generate_dataset.realizeSingleNumber"], ["", "def", "realizeGrid", "(", "gridImg", ",", "size", "=", "28", ",", "dataset", "=", "'training'", ")", ":", "\n", "    ", "img", "=", "np", ".", "zeros", "(", "(", "size", "*", "len", "(", "gridImg", ")", ",", "size", "*", "len", "(", "gridImg", ")", ",", "3", ")", ")", "\n", "for", "i", "in", "range", "(", "len", "(", "gridImg", ")", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "len", "(", "gridImg", "[", "i", "]", ")", ")", ":", "\n", "            ", "img", "[", "i", "*", "size", ":", "(", "i", "+", "1", ")", "*", "size", ",", "j", "*", "size", ":", "(", "j", "+", "1", ")", "*", "size", ",", ":", "]", "=", "realizeSingleNumber", "(", "gridImg", "[", "i", "]", "[", "j", "]", ",", "size", "=", "size", ",", "dataset", "=", "dataset", ")", "\n", "", "", "return", "img", "\n", "\n"]]}