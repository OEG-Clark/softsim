{"home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.SalObjDataset.__init__": [[85, 105], ["sorted", "sorted", "sorted", "torch.SalObjDataset.filter_files", "len", "torchvision.Compose", "torchvision.Compose", "torchvision.Compose", "os.listdir", "f.endswith", "os.listdir", "os.listdir", "torchvision.Resize", "torchvision.ToTensor", "torchvision.Normalize", "torchvision.Resize", "torchvision.ToTensor", "torchvision.Resize", "torchvision.ToTensor", "f.endswith", "f.endswith", "f.endswith", "f.endswith"], "methods", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.SalObjDataset.filter_files"], ["    ", "def", "__init__", "(", "self", ",", "image_root", ",", "gt_root", ",", "depth_root", ",", "trainsize", ")", ":", "\n", "        ", "self", ".", "trainsize", "=", "trainsize", "\n", "self", ".", "images", "=", "[", "image_root", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "image_root", ")", "if", "f", ".", "endswith", "(", "'.jpg'", ")", "]", "\n", "self", ".", "gts", "=", "[", "gt_root", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "gt_root", ")", "if", "f", ".", "endswith", "(", "'.jpg'", ")", "\n", "or", "f", ".", "endswith", "(", "'.png'", ")", "]", "\n", "self", ".", "depths", "=", "[", "depth_root", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "depth_root", ")", "if", "f", ".", "endswith", "(", "'.bmp'", ")", "\n", "or", "f", ".", "endswith", "(", "'.png'", ")", "]", "\n", "self", ".", "images", "=", "sorted", "(", "self", ".", "images", ")", "\n", "self", ".", "gts", "=", "sorted", "(", "self", ".", "gts", ")", "\n", "self", ".", "depths", "=", "sorted", "(", "self", ".", "depths", ")", "\n", "self", ".", "filter_files", "(", ")", "\n", "self", ".", "size", "=", "len", "(", "self", ".", "images", ")", "\n", "self", ".", "img_transform", "=", "transforms", ".", "Compose", "(", "[", "\n", "transforms", ".", "Resize", "(", "(", "self", ".", "trainsize", ",", "self", ".", "trainsize", ")", ")", ",", "\n", "transforms", ".", "ToTensor", "(", ")", ",", "\n", "transforms", ".", "Normalize", "(", "[", "0.485", ",", "0.456", ",", "0.406", "]", ",", "[", "0.229", ",", "0.224", ",", "0.225", "]", ")", "]", ")", "\n", "self", ".", "gt_transform", "=", "transforms", ".", "Compose", "(", "[", "\n", "transforms", ".", "Resize", "(", "(", "self", ".", "trainsize", ",", "self", ".", "trainsize", ")", ")", ",", "\n", "transforms", ".", "ToTensor", "(", ")", "]", ")", "\n", "self", ".", "depths_transform", "=", "transforms", ".", "Compose", "(", "[", "transforms", ".", "Resize", "(", "(", "self", ".", "trainsize", ",", "self", ".", "trainsize", ")", ")", ",", "transforms", ".", "ToTensor", "(", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.SalObjDataset.__getitem__": [[106, 121], ["torch.SalObjDataset.rgb_loader", "torch.SalObjDataset.binary_loader", "torch.SalObjDataset.binary_loader", "data.cv_random_flip", "data.randomCrop", "data.randomRotation", "data.colorEnhance", "data.randomPeper", "torch.SalObjDataset.img_transform", "torch.SalObjDataset.gt_transform", "torch.SalObjDataset.depths_transform"], "methods", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.test_dataset.rgb_loader", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.test_dataset.binary_loader", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.test_dataset.binary_loader", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.cv_random_flip", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.randomCrop", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.randomRotation", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.colorEnhance", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.randomPeper"], ["", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "image", "=", "self", ".", "rgb_loader", "(", "self", ".", "images", "[", "index", "]", ")", "\n", "gt", "=", "self", ".", "binary_loader", "(", "self", ".", "gts", "[", "index", "]", ")", "\n", "depth", "=", "self", ".", "binary_loader", "(", "self", ".", "depths", "[", "index", "]", ")", "\n", "image", ",", "gt", ",", "depth", "=", "cv_random_flip", "(", "image", ",", "gt", ",", "depth", ")", "\n", "image", ",", "gt", ",", "depth", "=", "randomCrop", "(", "image", ",", "gt", ",", "depth", ")", "\n", "image", ",", "gt", ",", "depth", "=", "randomRotation", "(", "image", ",", "gt", ",", "depth", ")", "\n", "image", "=", "colorEnhance", "(", "image", ")", "\n", "# gt=randomGaussian(gt)", "\n", "gt", "=", "randomPeper", "(", "gt", ")", "\n", "image", "=", "self", ".", "img_transform", "(", "image", ")", "\n", "gt", "=", "self", ".", "gt_transform", "(", "gt", ")", "\n", "depth", "=", "self", ".", "depths_transform", "(", "depth", ")", "\n", "\n", "return", "image", ",", "gt", ",", "depth", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.SalObjDataset.filter_files": [[122, 138], ["zip", "PIL.Image.open", "PIL.Image.open", "PIL.Image.open", "len", "len", "len", "len", "images.append", "gts.append", "depths.append"], "methods", ["None"], ["", "def", "filter_files", "(", "self", ")", ":", "\n", "        ", "assert", "len", "(", "self", ".", "images", ")", "==", "len", "(", "self", ".", "gts", ")", "and", "len", "(", "self", ".", "gts", ")", "==", "len", "(", "self", ".", "images", ")", "\n", "images", "=", "[", "]", "\n", "gts", "=", "[", "]", "\n", "depths", "=", "[", "]", "\n", "for", "img_path", ",", "gt_path", ",", "depth_path", "in", "zip", "(", "self", ".", "images", ",", "self", ".", "gts", ",", "self", ".", "depths", ")", ":", "\n", "            ", "img", "=", "Image", ".", "open", "(", "img_path", ")", "\n", "gt", "=", "Image", ".", "open", "(", "gt_path", ")", "\n", "depth", "=", "Image", ".", "open", "(", "depth_path", ")", "\n", "if", "img", ".", "size", "==", "gt", ".", "size", "and", "gt", ".", "size", "==", "depth", ".", "size", ":", "\n", "                ", "images", ".", "append", "(", "img_path", ")", "\n", "gts", ".", "append", "(", "gt_path", ")", "\n", "depths", ".", "append", "(", "depth_path", ")", "\n", "", "", "self", ".", "images", "=", "images", "\n", "self", ".", "gts", "=", "gts", "\n", "self", ".", "depths", "=", "depths", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.SalObjDataset.rgb_loader": [[139, 143], ["open", "PIL.Image.open", "PIL.Image.open.convert"], "methods", ["None"], ["", "def", "rgb_loader", "(", "self", ",", "path", ")", ":", "\n", "        ", "with", "open", "(", "path", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "img", "=", "Image", ".", "open", "(", "f", ")", "\n", "return", "img", ".", "convert", "(", "'RGB'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.SalObjDataset.binary_loader": [[144, 148], ["open", "PIL.Image.open", "PIL.Image.open.convert"], "methods", ["None"], ["", "", "def", "binary_loader", "(", "self", ",", "path", ")", ":", "\n", "        ", "with", "open", "(", "path", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "img", "=", "Image", ".", "open", "(", "f", ")", "\n", "return", "img", ".", "convert", "(", "'L'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.SalObjDataset.resize": [[149, 158], ["max", "max", "img.resize", "gt.resize", "depth.resize"], "methods", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.SalObjDataset.resize", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.SalObjDataset.resize", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.SalObjDataset.resize"], ["", "", "def", "resize", "(", "self", ",", "img", ",", "gt", ",", "depth", ")", ":", "\n", "        ", "assert", "img", ".", "size", "==", "gt", ".", "size", "and", "gt", ".", "size", "==", "depth", ".", "size", "\n", "w", ",", "h", "=", "img", ".", "size", "\n", "if", "h", "<", "self", ".", "trainsize", "or", "w", "<", "self", ".", "trainsize", ":", "\n", "            ", "h", "=", "max", "(", "h", ",", "self", ".", "trainsize", ")", "\n", "w", "=", "max", "(", "w", ",", "self", ".", "trainsize", ")", "\n", "return", "img", ".", "resize", "(", "(", "w", ",", "h", ")", ",", "Image", ".", "BILINEAR", ")", ",", "gt", ".", "resize", "(", "(", "w", ",", "h", ")", ",", "Image", ".", "NEAREST", ")", ",", "depth", ".", "resize", "(", "(", "w", ",", "h", ")", ",", "Image", ".", "NEAREST", ")", "\n", "", "else", ":", "\n", "            ", "return", "img", ",", "gt", ",", "depth", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.SalObjDataset.__len__": [[159, 161], ["None"], "methods", ["None"], ["", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "size", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.test_dataset.__init__": [[175, 196], ["sorted", "sorted", "sorted", "torchvision.Compose", "torchvision.ToTensor", "torchvision.Compose", "len", "os.listdir", "f.endswith", "os.listdir", "os.listdir", "torchvision.Resize", "torchvision.ToTensor", "torchvision.Normalize", "torchvision.Resize", "torchvision.ToTensor", "f.endswith", "f.endswith", "f.endswith", "f.endswith"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "image_root", ",", "gt_root", ",", "depth_root", ",", "testsize", ")", ":", "\n", "        ", "self", ".", "testsize", "=", "testsize", "\n", "self", ".", "images", "=", "[", "image_root", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "image_root", ")", "if", "f", ".", "endswith", "(", "'.jpg'", ")", "]", "\n", "self", ".", "gts", "=", "[", "gt_root", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "gt_root", ")", "if", "f", ".", "endswith", "(", "'.jpg'", ")", "\n", "or", "f", ".", "endswith", "(", "'.png'", ")", "]", "\n", "self", ".", "depths", "=", "[", "depth_root", "+", "f", "for", "f", "in", "os", ".", "listdir", "(", "depth_root", ")", "if", "f", ".", "endswith", "(", "'.bmp'", ")", "\n", "or", "f", ".", "endswith", "(", "'.png'", ")", "]", "\n", "self", ".", "images", "=", "sorted", "(", "self", ".", "images", ")", "\n", "self", ".", "gts", "=", "sorted", "(", "self", ".", "gts", ")", "\n", "self", ".", "depths", "=", "sorted", "(", "self", ".", "depths", ")", "\n", "self", ".", "transform", "=", "transforms", ".", "Compose", "(", "[", "\n", "transforms", ".", "Resize", "(", "(", "self", ".", "testsize", ",", "self", ".", "testsize", ")", ")", ",", "\n", "transforms", ".", "ToTensor", "(", ")", ",", "\n", "transforms", ".", "Normalize", "(", "[", "0.485", ",", "0.456", ",", "0.406", "]", ",", "[", "0.229", ",", "0.224", ",", "0.225", "]", ")", "]", ")", "\n", "self", ".", "gt_transform", "=", "transforms", ".", "ToTensor", "(", ")", "\n", "# self.gt_transform = transforms.Compose([", "\n", "#     transforms.Resize((self.trainsize, self.trainsize)),", "\n", "#     transforms.ToTensor()])", "\n", "self", ".", "depths_transform", "=", "transforms", ".", "Compose", "(", "[", "transforms", ".", "Resize", "(", "(", "self", ".", "testsize", ",", "self", ".", "testsize", ")", ")", ",", "transforms", ".", "ToTensor", "(", ")", "]", ")", "\n", "self", ".", "size", "=", "len", "(", "self", ".", "images", ")", "\n", "self", ".", "index", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.test_dataset.load_data": [[197, 211], ["torch.test_dataset.rgb_loader", "torch.test_dataset.transform().unsqueeze", "torch.test_dataset.binary_loader", "torch.test_dataset.binary_loader", "torch.test_dataset.depths_transform().unsqueeze", "torch.test_dataset.rgb_loader", "image_for_post.resize.resize.resize", "name.endswith", "torch.test_dataset.images[].split", "numpy.array", "torch.test_dataset.transform", "torch.test_dataset.depths_transform", "name.split"], "methods", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.test_dataset.rgb_loader", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.test_dataset.binary_loader", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.test_dataset.binary_loader", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.test_dataset.rgb_loader", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.SalObjDataset.resize"], ["", "def", "load_data", "(", "self", ")", ":", "\n", "        ", "image", "=", "self", ".", "rgb_loader", "(", "self", ".", "images", "[", "self", ".", "index", "]", ")", "\n", "image", "=", "self", ".", "transform", "(", "image", ")", ".", "unsqueeze", "(", "0", ")", "\n", "gt", "=", "self", ".", "binary_loader", "(", "self", ".", "gts", "[", "self", ".", "index", "]", ")", "\n", "depth", "=", "self", ".", "binary_loader", "(", "self", ".", "depths", "[", "self", ".", "index", "]", ")", "\n", "depth", "=", "self", ".", "depths_transform", "(", "depth", ")", ".", "unsqueeze", "(", "0", ")", "\n", "name", "=", "self", ".", "images", "[", "self", ".", "index", "]", ".", "split", "(", "'/'", ")", "[", "-", "1", "]", "\n", "image_for_post", "=", "self", ".", "rgb_loader", "(", "self", ".", "images", "[", "self", ".", "index", "]", ")", "\n", "image_for_post", "=", "image_for_post", ".", "resize", "(", "gt", ".", "size", ")", "\n", "if", "name", ".", "endswith", "(", "'.jpg'", ")", ":", "\n", "            ", "name", "=", "name", ".", "split", "(", "'.jpg'", ")", "[", "0", "]", "+", "'.png'", "\n", "", "self", ".", "index", "+=", "1", "\n", "self", ".", "index", "=", "self", ".", "index", "%", "self", ".", "size", "\n", "return", "image", ",", "gt", ",", "depth", ",", "name", ",", "np", ".", "array", "(", "image_for_post", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.test_dataset.rgb_loader": [[212, 216], ["open", "PIL.Image.open", "PIL.Image.open.convert"], "methods", ["None"], ["", "def", "rgb_loader", "(", "self", ",", "path", ")", ":", "\n", "        ", "with", "open", "(", "path", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "img", "=", "Image", ".", "open", "(", "f", ")", "\n", "return", "img", ".", "convert", "(", "'RGB'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.test_dataset.binary_loader": [[217, 221], ["open", "PIL.Image.open", "PIL.Image.open.convert"], "methods", ["None"], ["", "", "def", "binary_loader", "(", "self", ",", "path", ")", ":", "\n", "        ", "with", "open", "(", "path", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "img", "=", "Image", ".", "open", "(", "f", ")", "\n", "return", "img", ".", "convert", "(", "'L'", ")", "\n", "", "", "def", "__len__", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.test_dataset.__len__": [[221, 223], ["None"], "methods", ["None"], ["", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "size", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.cv_random_flip": [[10, 24], ["random.randint", "img.transpose.transpose", "label.transpose.transpose", "depth.transpose.transpose"], "function", ["None"], ["def", "cv_random_flip", "(", "img", ",", "label", ",", "depth", ")", ":", "\n", "    ", "flip_flag", "=", "random", ".", "randint", "(", "0", ",", "1", ")", "\n", "# flip_flag2= random.randint(0,1)", "\n", "#left right flip", "\n", "if", "flip_flag", "==", "1", ":", "\n", "        ", "img", "=", "img", ".", "transpose", "(", "Image", ".", "FLIP_LEFT_RIGHT", ")", "\n", "label", "=", "label", ".", "transpose", "(", "Image", ".", "FLIP_LEFT_RIGHT", ")", "\n", "depth", "=", "depth", ".", "transpose", "(", "Image", ".", "FLIP_LEFT_RIGHT", ")", "\n", "#top bottom flip", "\n", "# if flip_flag2==1:", "\n", "#     img = img.transpose(Image.FLIP_TOP_BOTTOM)", "\n", "#     label = label.transpose(Image.FLIP_TOP_BOTTOM)", "\n", "#     depth = depth.transpose(Image.FLIP_TOP_BOTTOM)", "\n", "", "return", "img", ",", "label", ",", "depth", "\n", "", "def", "randomCrop", "(", "image", ",", "label", ",", "depth", ")", ":", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.randomCrop": [[24, 34], ["numpy.random.randint", "numpy.random.randint", "image.crop", "label.crop", "depth.crop"], "function", ["None"], ["", "def", "randomCrop", "(", "image", ",", "label", ",", "depth", ")", ":", "\n", "    ", "border", "=", "30", "\n", "image_width", "=", "image", ".", "size", "[", "0", "]", "\n", "image_height", "=", "image", ".", "size", "[", "1", "]", "\n", "crop_win_width", "=", "np", ".", "random", ".", "randint", "(", "image_width", "-", "border", ",", "image_width", ")", "\n", "crop_win_height", "=", "np", ".", "random", ".", "randint", "(", "image_height", "-", "border", ",", "image_height", ")", "\n", "random_region", "=", "(", "\n", "(", "image_width", "-", "crop_win_width", ")", ">>", "1", ",", "(", "image_height", "-", "crop_win_height", ")", ">>", "1", ",", "(", "image_width", "+", "crop_win_width", ")", ">>", "1", ",", "\n", "(", "image_height", "+", "crop_win_height", ")", ">>", "1", ")", "\n", "return", "image", ".", "crop", "(", "random_region", ")", ",", "label", ".", "crop", "(", "random_region", ")", ",", "depth", ".", "crop", "(", "random_region", ")", "\n", "", "def", "randomRotation", "(", "image", ",", "label", ",", "depth", ")", ":", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.randomRotation": [[34, 42], ["random.random", "numpy.random.randint", "image.rotate.rotate", "label.rotate.rotate", "depth.rotate.rotate"], "function", ["None"], ["", "def", "randomRotation", "(", "image", ",", "label", ",", "depth", ")", ":", "\n", "    ", "mode", "=", "Image", ".", "BICUBIC", "\n", "if", "random", ".", "random", "(", ")", ">", "0.8", ":", "\n", "        ", "random_angle", "=", "np", ".", "random", ".", "randint", "(", "-", "15", ",", "15", ")", "\n", "image", "=", "image", ".", "rotate", "(", "random_angle", ",", "mode", ")", "\n", "label", "=", "label", ".", "rotate", "(", "random_angle", ",", "mode", ")", "\n", "depth", "=", "depth", ".", "rotate", "(", "random_angle", ",", "mode", ")", "\n", "", "return", "image", ",", "label", ",", "depth", "\n", "", "def", "colorEnhance", "(", "image", ")", ":", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.colorEnhance": [[42, 52], ["PIL.ImageEnhance.Brightness().enhance", "PIL.ImageEnhance.Contrast().enhance", "PIL.ImageEnhance.Color().enhance", "PIL.ImageEnhance.Sharpness().enhance", "random.randint", "random.randint", "random.randint", "random.randint", "PIL.ImageEnhance.Brightness", "PIL.ImageEnhance.Contrast", "PIL.ImageEnhance.Color", "PIL.ImageEnhance.Sharpness"], "function", ["None"], ["", "def", "colorEnhance", "(", "image", ")", ":", "\n", "    ", "bright_intensity", "=", "random", ".", "randint", "(", "5", ",", "15", ")", "/", "10.0", "\n", "image", "=", "ImageEnhance", ".", "Brightness", "(", "image", ")", ".", "enhance", "(", "bright_intensity", ")", "\n", "contrast_intensity", "=", "random", ".", "randint", "(", "5", ",", "15", ")", "/", "10.0", "\n", "image", "=", "ImageEnhance", ".", "Contrast", "(", "image", ")", ".", "enhance", "(", "contrast_intensity", ")", "\n", "color_intensity", "=", "random", ".", "randint", "(", "0", ",", "20", ")", "/", "10.0", "\n", "image", "=", "ImageEnhance", ".", "Color", "(", "image", ")", ".", "enhance", "(", "color_intensity", ")", "\n", "sharp_intensity", "=", "random", ".", "randint", "(", "0", ",", "30", ")", "/", "10.0", "\n", "image", "=", "ImageEnhance", ".", "Sharpness", "(", "image", ")", ".", "enhance", "(", "sharp_intensity", ")", "\n", "return", "image", "\n", "", "def", "randomGaussian", "(", "image", ",", "mean", "=", "0.1", ",", "sigma", "=", "0.35", ")", ":", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.randomGaussian": [[52, 62], ["numpy.asarray", "data.randomGaussian.gaussianNoisy"], "function", ["None"], ["", "def", "randomGaussian", "(", "image", ",", "mean", "=", "0.1", ",", "sigma", "=", "0.35", ")", ":", "\n", "    ", "def", "gaussianNoisy", "(", "im", ",", "mean", "=", "mean", ",", "sigma", "=", "sigma", ")", ":", "\n", "        ", "for", "_i", "in", "range", "(", "len", "(", "im", ")", ")", ":", "\n", "            ", "im", "[", "_i", "]", "+=", "random", ".", "gauss", "(", "mean", ",", "sigma", ")", "\n", "", "return", "im", "\n", "", "img", "=", "np", ".", "asarray", "(", "image", ")", "\n", "width", ",", "height", "=", "img", ".", "shape", "\n", "img", "=", "gaussianNoisy", "(", "img", "[", ":", "]", ".", "flatten", "(", ")", ",", "mean", ",", "sigma", ")", "\n", "img", "=", "img", ".", "reshape", "(", "[", "width", ",", "height", "]", ")", "\n", "return", "Image", ".", "fromarray", "(", "np", ".", "uint8", "(", "img", ")", ")", "\n", "", "def", "randomPeper", "(", "img", ")", ":", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.randomPeper": [[62, 80], ["numpy.array", "int", "range", "PIL.Image.fromarray", "random.randint", "random.randint", "random.randint"], "function", ["None"], ["", "def", "randomPeper", "(", "img", ")", ":", "\n", "\n", "    ", "img", "=", "np", ".", "array", "(", "img", ")", "\n", "noiseNum", "=", "int", "(", "0.0015", "*", "img", ".", "shape", "[", "0", "]", "*", "img", ".", "shape", "[", "1", "]", ")", "\n", "for", "i", "in", "range", "(", "noiseNum", ")", ":", "\n", "\n", "        ", "randX", "=", "random", ".", "randint", "(", "0", ",", "img", ".", "shape", "[", "0", "]", "-", "1", ")", "\n", "\n", "randY", "=", "random", ".", "randint", "(", "0", ",", "img", ".", "shape", "[", "1", "]", "-", "1", ")", "\n", "\n", "if", "random", ".", "randint", "(", "0", ",", "1", ")", "==", "0", ":", "\n", "\n", "            ", "img", "[", "randX", ",", "randY", "]", "=", "0", "\n", "\n", "", "else", ":", "\n", "\n", "            ", "img", "[", "randX", ",", "randY", "]", "=", "255", "\n", "", "", "return", "Image", ".", "fromarray", "(", "img", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.get_loader": [[163, 172], ["data.SalObjDataset", "torch.DataLoader"], "function", ["None"], ["", "", "def", "get_loader", "(", "image_root", ",", "gt_root", ",", "depth_root", ",", "batchsize", ",", "trainsize", ",", "shuffle", "=", "True", ",", "num_workers", "=", "12", ",", "pin_memory", "=", "True", ")", ":", "\n", "\n", "    ", "dataset", "=", "SalObjDataset", "(", "image_root", ",", "gt_root", ",", "depth_root", ",", "trainsize", ")", "\n", "data_loader", "=", "data", ".", "DataLoader", "(", "dataset", "=", "dataset", ",", "\n", "batch_size", "=", "batchsize", ",", "\n", "shuffle", "=", "shuffle", ",", "\n", "num_workers", "=", "num_workers", ",", "\n", "pin_memory", "=", "pin_memory", ")", "\n", "return", "data_loader", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.BBSNet_train.train": [[68, 123], ["model.train", "enumerate", "logging.info", "writer.add_scalar", "optimizer.zero_grad", "images.cuda.cuda", "gts.cuda.cuda", "depths.cuda.cuda", "model", "CE", "CE", "loss.backward", "utils.clip_gradient", "optimizer.step", "torch.save", "torch.save", "torch.save", "print", "torch.save", "torch.save", "torch.save", "print", "print", "logging.info", "writer.add_scalar", "torchvision.utils.make_grid", "writer.add_image", "torchvision.utils.make_grid", "writer.add_image", "s1[].clone", "res.sigmoid().data.cpu().numpy().squeeze.sigmoid().data.cpu().numpy().squeeze", "writer.add_image", "s2[].clone", "res.sigmoid().data.cpu().numpy().squeeze.sigmoid().data.cpu().numpy().squeeze", "writer.add_image", "model.state_dict", "os.path.exists", "os.makedirs", "model.state_dict", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "datetime.datetime.now", "images[].clone().cpu", "gts[].clone().cpu", "res.sigmoid().data.cpu().numpy().squeeze.sigmoid().data.cpu().numpy", "res.sigmoid().data.cpu().numpy().squeeze.min", "res.sigmoid().data.cpu().numpy().squeeze.sigmoid().data.cpu().numpy", "res.sigmoid().data.cpu().numpy().squeeze.min", "res.sigmoid().data.cpu().numpy().squeeze.max", "res.sigmoid().data.cpu().numpy().squeeze.min", "res.sigmoid().data.cpu().numpy().squeeze.max", "res.sigmoid().data.cpu().numpy().squeeze.min", "images[].clone", "gts[].clone", "res.sigmoid().data.cpu().numpy().squeeze.sigmoid().data.cpu", "res.sigmoid().data.cpu().numpy().squeeze.sigmoid().data.cpu", "res.sigmoid().data.cpu().numpy().squeeze.sigmoid", "res.sigmoid().data.cpu().numpy().squeeze.sigmoid"], "function", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.BBSNet_train.train", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.utils.clip_gradient"], ["def", "train", "(", "train_loader", ",", "model", ",", "optimizer", ",", "epoch", ",", "save_path", ")", ":", "\n", "    ", "global", "step", "\n", "model", ".", "train", "(", ")", "\n", "loss_all", "=", "0", "\n", "epoch_step", "=", "0", "\n", "try", ":", "\n", "        ", "for", "i", ",", "(", "images", ",", "gts", ",", "depths", ")", "in", "enumerate", "(", "train_loader", ",", "start", "=", "1", ")", ":", "\n", "            ", "optimizer", ".", "zero_grad", "(", ")", "\n", "\n", "images", "=", "images", ".", "cuda", "(", ")", "\n", "gts", "=", "gts", ".", "cuda", "(", ")", "\n", "depths", "=", "depths", ".", "cuda", "(", ")", "\n", "\n", "s1", ",", "s2", "=", "model", "(", "images", ",", "depths", ")", "\n", "loss1", "=", "CE", "(", "s1", ",", "gts", ")", "\n", "loss2", "=", "CE", "(", "s2", ",", "gts", ")", "\n", "loss", "=", "loss1", "+", "loss2", "\n", "loss", ".", "backward", "(", ")", "\n", "\n", "clip_gradient", "(", "optimizer", ",", "opt", ".", "clip", ")", "\n", "optimizer", ".", "step", "(", ")", "\n", "step", "+=", "1", "\n", "epoch_step", "+=", "1", "\n", "loss_all", "+=", "loss", ".", "data", "\n", "if", "i", "%", "100", "==", "0", "or", "i", "==", "total_step", "or", "i", "==", "1", ":", "\n", "                ", "print", "(", "'{} Epoch [{:03d}/{:03d}], Step [{:04d}/{:04d}], Loss1: {:.4f} Loss2: {:0.4f}'", ".", "\n", "format", "(", "datetime", ".", "now", "(", ")", ",", "epoch", ",", "opt", ".", "epoch", ",", "i", ",", "total_step", ",", "loss1", ".", "data", ",", "loss2", ".", "data", ")", ")", "\n", "logging", ".", "info", "(", "'#TRAIN#:Epoch [{:03d}/{:03d}], Step [{:04d}/{:04d}], Loss1: {:.4f} Loss2: {:0.4f}'", ".", "\n", "format", "(", "epoch", ",", "opt", ".", "epoch", ",", "i", ",", "total_step", ",", "loss1", ".", "data", ",", "loss2", ".", "data", ")", ")", "\n", "writer", ".", "add_scalar", "(", "'Loss'", ",", "loss", ".", "data", ",", "global_step", "=", "step", ")", "\n", "grid_image", "=", "make_grid", "(", "images", "[", "0", "]", ".", "clone", "(", ")", ".", "cpu", "(", ")", ".", "data", ",", "1", ",", "normalize", "=", "True", ")", "\n", "writer", ".", "add_image", "(", "'RGB'", ",", "grid_image", ",", "step", ")", "\n", "grid_image", "=", "make_grid", "(", "gts", "[", "0", "]", ".", "clone", "(", ")", ".", "cpu", "(", ")", ".", "data", ",", "1", ",", "normalize", "=", "True", ")", "\n", "writer", ".", "add_image", "(", "'Ground_truth'", ",", "grid_image", ",", "step", ")", "\n", "res", "=", "s1", "[", "0", "]", ".", "clone", "(", ")", "\n", "res", "=", "res", ".", "sigmoid", "(", ")", ".", "data", ".", "cpu", "(", ")", ".", "numpy", "(", ")", ".", "squeeze", "(", ")", "\n", "res", "=", "(", "res", "-", "res", ".", "min", "(", ")", ")", "/", "(", "res", ".", "max", "(", ")", "-", "res", ".", "min", "(", ")", "+", "1e-8", ")", "\n", "writer", ".", "add_image", "(", "'s1'", ",", "torch", ".", "tensor", "(", "res", ")", ",", "step", ",", "dataformats", "=", "'HW'", ")", "\n", "res", "=", "s2", "[", "0", "]", ".", "clone", "(", ")", "\n", "res", "=", "res", ".", "sigmoid", "(", ")", ".", "data", ".", "cpu", "(", ")", ".", "numpy", "(", ")", ".", "squeeze", "(", ")", "\n", "res", "=", "(", "res", "-", "res", ".", "min", "(", ")", ")", "/", "(", "res", ".", "max", "(", ")", "-", "res", ".", "min", "(", ")", "+", "1e-8", ")", "\n", "writer", ".", "add_image", "(", "'s2'", ",", "torch", ".", "tensor", "(", "res", ")", ",", "step", ",", "dataformats", "=", "'HW'", ")", "\n", "\n", "", "", "loss_all", "/=", "epoch_step", "\n", "logging", ".", "info", "(", "'#TRAIN#:Epoch [{:03d}/{:03d}], Loss_AVG: {:.4f}'", ".", "format", "(", "epoch", ",", "opt", ".", "epoch", ",", "loss_all", ")", ")", "\n", "writer", ".", "add_scalar", "(", "'Loss-epoch'", ",", "loss_all", ",", "global_step", "=", "epoch", ")", "\n", "if", "(", "epoch", ")", "%", "5", "==", "0", ":", "\n", "            ", "torch", ".", "save", "(", "model", ".", "state_dict", "(", ")", ",", "save_path", "+", "'BBSNet_epoch_{}.pth'", ".", "format", "(", "epoch", ")", ")", "\n", "", "", "except", "KeyboardInterrupt", ":", "\n", "        ", "print", "(", "'Keyboard Interrupt: save model and exit.'", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "save_path", ")", ":", "\n", "            ", "os", ".", "makedirs", "(", "save_path", ")", "\n", "", "torch", ".", "save", "(", "model", ".", "state_dict", "(", ")", ",", "save_path", "+", "'BBSNet_epoch_{}.pth'", ".", "format", "(", "epoch", "+", "1", ")", ")", "\n", "print", "(", "'save checkpoints successfully!'", ")", "\n", "raise", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.BBSNet_train.test": [[125, 153], ["model.eval", "torch.no_grad", "torch.no_grad", "torch.no_grad", "range", "writer.add_scalar", "print", "logging.info", "test_loader.load_data", "numpy.asarray", "image.cuda.cuda", "depth.cuda.cuda", "model", "torch.upsample", "res.sigmoid().data.cpu().numpy().squeeze.sigmoid().data.cpu().numpy().squeeze", "torch.tensor", "torch.tensor", "torch.tensor", "np.asarray.max", "torch.save", "torch.save", "torch.save", "print", "res.sigmoid().data.cpu().numpy().squeeze.sigmoid().data.cpu().numpy", "res.sigmoid().data.cpu().numpy().squeeze.min", "numpy.sum", "model.state_dict", "res.sigmoid().data.cpu().numpy().squeeze.max", "res.sigmoid().data.cpu().numpy().squeeze.min", "numpy.abs", "res.sigmoid().data.cpu().numpy().squeeze.sigmoid().data.cpu", "res.sigmoid().data.cpu().numpy().squeeze.sigmoid"], "function", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.data.test_dataset.load_data"], ["", "", "def", "test", "(", "test_loader", ",", "model", ",", "epoch", ",", "save_path", ")", ":", "\n", "    ", "global", "best_mae", ",", "best_epoch", "\n", "model", ".", "eval", "(", ")", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "        ", "mae_sum", "=", "0", "\n", "for", "i", "in", "range", "(", "test_loader", ".", "size", ")", ":", "\n", "            ", "image", ",", "gt", ",", "depth", ",", "name", ",", "img_for_post", "=", "test_loader", ".", "load_data", "(", ")", "\n", "gt", "=", "np", ".", "asarray", "(", "gt", ",", "np", ".", "float32", ")", "\n", "gt", "/=", "(", "gt", ".", "max", "(", ")", "+", "1e-8", ")", "\n", "image", "=", "image", ".", "cuda", "(", ")", "\n", "depth", "=", "depth", ".", "cuda", "(", ")", "\n", "_", ",", "res", "=", "model", "(", "image", ",", "depth", ")", "\n", "res", "=", "F", ".", "upsample", "(", "res", ",", "size", "=", "gt", ".", "shape", ",", "mode", "=", "'bilinear'", ",", "align_corners", "=", "False", ")", "\n", "res", "=", "res", ".", "sigmoid", "(", ")", ".", "data", ".", "cpu", "(", ")", ".", "numpy", "(", ")", ".", "squeeze", "(", ")", "\n", "res", "=", "(", "res", "-", "res", ".", "min", "(", ")", ")", "/", "(", "res", ".", "max", "(", ")", "-", "res", ".", "min", "(", ")", "+", "1e-8", ")", "\n", "mae_sum", "+=", "np", ".", "sum", "(", "np", ".", "abs", "(", "res", "-", "gt", ")", ")", "*", "1.0", "/", "(", "gt", ".", "shape", "[", "0", "]", "*", "gt", ".", "shape", "[", "1", "]", ")", "\n", "", "mae", "=", "mae_sum", "/", "test_loader", ".", "size", "\n", "writer", ".", "add_scalar", "(", "'MAE'", ",", "torch", ".", "tensor", "(", "mae", ")", ",", "global_step", "=", "epoch", ")", "\n", "print", "(", "'Epoch: {} MAE: {} ####  bestMAE: {} bestEpoch: {}'", ".", "format", "(", "epoch", ",", "mae", ",", "best_mae", ",", "best_epoch", ")", ")", "\n", "if", "epoch", "==", "1", ":", "\n", "            ", "best_mae", "=", "mae", "\n", "", "else", ":", "\n", "            ", "if", "mae", "<", "best_mae", ":", "\n", "                ", "best_mae", "=", "mae", "\n", "best_epoch", "=", "epoch", "\n", "torch", ".", "save", "(", "model", ".", "state_dict", "(", ")", ",", "save_path", "+", "'BBSNet_epoch_best.pth'", ")", "\n", "print", "(", "'best epoch:{}'", ".", "format", "(", "epoch", ")", ")", "\n", "", "", "logging", ".", "info", "(", "'#TEST#:Epoch:{} MAE:{} bestEpoch:{} bestMAE:{}'", ".", "format", "(", "epoch", ",", "mae", ",", "best_epoch", ",", "best_mae", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.utils.clip_gradient": [[1, 6], ["param.grad.data.clamp_"], "function", ["None"], ["def", "clip_gradient", "(", "optimizer", ",", "grad_clip", ")", ":", "\n", "    ", "for", "group", "in", "optimizer", ".", "param_groups", ":", "\n", "        ", "for", "param", "in", "group", "[", "'params'", "]", ":", "\n", "            ", "if", "param", ".", "grad", "is", "not", "None", ":", "\n", "                ", "param", ".", "grad", ".", "data", ".", "clamp_", "(", "-", "grad_clip", ",", "grad_clip", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.None.utils.adjust_lr": [[8, 14], ["None"], "function", ["None"], ["", "", "", "", "def", "adjust_lr", "(", "optimizer", ",", "init_lr", ",", "epoch", ",", "decay_rate", "=", "0.1", ",", "decay_epoch", "=", "30", ")", ":", "\n", "    ", "decay", "=", "decay_rate", "**", "(", "epoch", "//", "decay_epoch", ")", "\n", "for", "param_group", "in", "optimizer", ".", "param_groups", ":", "\n", "        ", "param_group", "[", "'lr'", "]", "=", "decay", "*", "init_lr", "\n", "lr", "=", "param_group", "[", "'lr'", "]", "\n", "", "return", "lr", "\n", "", ""]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.ResNet.BasicBlock.__init__": [[14, 23], ["torch.Module.__init__", "ResNet.conv3x3", "torch.BatchNorm2d", "torch.ReLU", "ResNet.conv3x3", "torch.BatchNorm2d"], "methods", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet.__init__", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.conv3x3", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.conv3x3"], ["def", "__init__", "(", "self", ",", "inplanes", ",", "planes", ",", "stride", "=", "1", ",", "downsample", "=", "None", ")", ":", "\n", "        ", "super", "(", "BasicBlock", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv1", "=", "conv3x3", "(", "inplanes", ",", "planes", ",", "stride", ")", "\n", "self", ".", "bn1", "=", "nn", ".", "BatchNorm2d", "(", "planes", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "planes", ",", "planes", ")", "\n", "self", ".", "bn2", "=", "nn", ".", "BatchNorm2d", "(", "planes", ")", "\n", "self", ".", "downsample", "=", "downsample", "\n", "self", ".", "stride", "=", "stride", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.ResNet.BasicBlock.forward": [[24, 41], ["ResNet.BasicBlock.conv1", "ResNet.BasicBlock.bn1", "ResNet.BasicBlock.relu", "ResNet.BasicBlock.conv2", "ResNet.BasicBlock.bn2", "ResNet.BasicBlock.relu", "ResNet.BasicBlock.downsample"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "residual", "=", "x", "\n", "\n", "out", "=", "self", ".", "conv1", "(", "x", ")", "\n", "out", "=", "self", ".", "bn1", "(", "out", ")", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "out", "=", "self", ".", "conv2", "(", "out", ")", "\n", "out", "=", "self", ".", "bn2", "(", "out", ")", "\n", "\n", "if", "self", ".", "downsample", "is", "not", "None", ":", "\n", "            ", "residual", "=", "self", ".", "downsample", "(", "x", ")", "\n", "\n", "", "out", "+=", "residual", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.ResNet.Bottleneck.__init__": [[46, 58], ["torch.Module.__init__", "torch.Conv2d", "torch.BatchNorm2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.ReLU"], "methods", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet.__init__"], ["def", "__init__", "(", "self", ",", "inplanes", ",", "planes", ",", "stride", "=", "1", ",", "downsample", "=", "None", ")", ":", "\n", "        ", "super", "(", "Bottleneck", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "inplanes", ",", "planes", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "bn1", "=", "nn", ".", "BatchNorm2d", "(", "planes", ")", "\n", "self", ".", "conv2", "=", "nn", ".", "Conv2d", "(", "planes", ",", "planes", ",", "kernel_size", "=", "3", ",", "stride", "=", "stride", ",", "\n", "padding", "=", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "bn2", "=", "nn", ".", "BatchNorm2d", "(", "planes", ")", "\n", "self", ".", "conv3", "=", "nn", ".", "Conv2d", "(", "planes", ",", "planes", "*", "4", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "bn3", "=", "nn", ".", "BatchNorm2d", "(", "planes", "*", "4", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "self", ".", "downsample", "=", "downsample", "\n", "self", ".", "stride", "=", "stride", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.ResNet.Bottleneck.forward": [[59, 80], ["ResNet.Bottleneck.conv1", "ResNet.Bottleneck.bn1", "ResNet.Bottleneck.relu", "ResNet.Bottleneck.conv2", "ResNet.Bottleneck.bn2", "ResNet.Bottleneck.relu", "ResNet.Bottleneck.conv3", "ResNet.Bottleneck.bn3", "ResNet.Bottleneck.relu", "ResNet.Bottleneck.downsample"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "residual", "=", "x", "\n", "\n", "out", "=", "self", ".", "conv1", "(", "x", ")", "\n", "out", "=", "self", ".", "bn1", "(", "out", ")", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "out", "=", "self", ".", "conv2", "(", "out", ")", "\n", "out", "=", "self", ".", "bn2", "(", "out", ")", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "out", "=", "self", ".", "conv3", "(", "out", ")", "\n", "out", "=", "self", ".", "bn3", "(", "out", ")", "\n", "\n", "if", "self", ".", "downsample", "is", "not", "None", ":", "\n", "            ", "residual", "=", "self", ".", "downsample", "(", "x", ")", "\n", "\n", "", "out", "+=", "residual", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.ResNet.ResNet50.__init__": [[83, 116], ["torch.Module.__init__", "torch.BatchNorm2d", "torch.ReLU", "torch.MaxPool2d", "ResNet.ResNet50._make_layer", "ResNet.ResNet50._make_layer", "ResNet.ResNet50._make_layer", "ResNet.ResNet50._make_layer", "ResNet.ResNet50.modules", "torch.Conv2d", "isinstance", "torch.Conv2d", "m.weight.data.normal_", "isinstance", "torch.Conv2d", "torch.Conv2d", "math.sqrt", "m.weight.data.fill_", "m.bias.data.zero_"], "methods", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet.__init__", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.ResNet.ResNet50._make_layer", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.ResNet.ResNet50._make_layer", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.ResNet.ResNet50._make_layer", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.ResNet.ResNet50._make_layer"], ["    ", "def", "__init__", "(", "self", ",", "mode", "=", "'rgb'", ")", ":", "\n", "        ", "self", ".", "inplanes", "=", "64", "\n", "super", "(", "ResNet50", ",", "self", ")", ".", "__init__", "(", ")", "\n", "if", "(", "mode", "==", "'rgb'", ")", ":", "\n", "            ", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "3", ",", "64", ",", "kernel_size", "=", "7", ",", "stride", "=", "2", ",", "padding", "=", "3", ",", "\n", "bias", "=", "False", ")", "\n", "", "elif", "(", "mode", "==", "'rgbd'", ")", ":", "\n", "            ", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "1", ",", "64", ",", "kernel_size", "=", "7", ",", "stride", "=", "2", ",", "padding", "=", "3", ",", "\n", "bias", "=", "False", ")", "\n", "", "elif", "(", "mode", "==", "\"share\"", ")", ":", "\n", "            ", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "3", ",", "64", ",", "kernel_size", "=", "7", ",", "stride", "=", "2", ",", "padding", "=", "3", ",", "\n", "bias", "=", "False", ")", "\n", "self", ".", "conv1_d", "=", "nn", ".", "Conv2d", "(", "1", ",", "64", ",", "kernel_size", "=", "7", ",", "stride", "=", "2", ",", "padding", "=", "3", ",", "\n", "bias", "=", "False", ")", "\n", "", "else", ":", "\n", "            ", "raise", "\n", "", "self", ".", "bn1", "=", "nn", ".", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ")", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "64", ",", "3", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "128", ",", "4", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3_1", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "256", ",", "6", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer4_1", "=", "self", ".", "_make_layer", "(", "Bottleneck", ",", "512", ",", "3", ",", "stride", "=", "2", ")", "\n", "\n", "self", ".", "inplanes", "=", "512", "\n", "\n", "for", "m", "in", "self", ".", "modules", "(", ")", ":", "\n", "            ", "if", "isinstance", "(", "m", ",", "nn", ".", "Conv2d", ")", ":", "\n", "                ", "n", "=", "m", ".", "kernel_size", "[", "0", "]", "*", "m", ".", "kernel_size", "[", "1", "]", "*", "m", ".", "out_channels", "\n", "m", ".", "weight", ".", "data", ".", "normal_", "(", "0", ",", "math", ".", "sqrt", "(", "2.", "/", "n", ")", ")", "\n", "", "elif", "isinstance", "(", "m", ",", "nn", ".", "BatchNorm2d", ")", ":", "\n", "                ", "m", ".", "weight", ".", "data", ".", "fill_", "(", "1", ")", "\n", "m", ".", "bias", ".", "data", ".", "zero_", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.ResNet.ResNet50._make_layer": [[117, 133], ["layers.append", "range", "torch.Sequential", "torch.Sequential", "block", "layers.append", "torch.Conv2d", "torch.BatchNorm2d", "block"], "methods", ["None"], ["", "", "", "def", "_make_layer", "(", "self", ",", "block", ",", "planes", ",", "blocks", ",", "stride", "=", "1", ")", ":", "\n", "        ", "downsample", "=", "None", "\n", "if", "stride", "!=", "1", "or", "self", ".", "inplanes", "!=", "planes", "*", "block", ".", "expansion", ":", "\n", "            ", "downsample", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "self", ".", "inplanes", ",", "planes", "*", "block", ".", "expansion", ",", "\n", "kernel_size", "=", "1", ",", "stride", "=", "stride", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm2d", "(", "planes", "*", "block", ".", "expansion", ")", ",", "\n", ")", "\n", "\n", "", "layers", "=", "[", "]", "\n", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "stride", ",", "downsample", ")", ")", "\n", "self", ".", "inplanes", "=", "planes", "*", "block", ".", "expansion", "\n", "for", "i", "in", "range", "(", "1", ",", "blocks", ")", ":", "\n", "            ", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ")", ")", "\n", "\n", "", "return", "nn", ".", "Sequential", "(", "*", "layers", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.ResNet.ResNet50.forward": [[134, 146], ["ResNet.ResNet50.conv1", "ResNet.ResNet50.bn1", "ResNet.ResNet50.relu", "ResNet.ResNet50.maxpool", "ResNet.ResNet50.layer1", "ResNet.ResNet50.layer2", "ResNet.ResNet50.layer3_1", "ResNet.ResNet50.layer4_1"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "conv1", "(", "x", ")", "\n", "x", "=", "self", ".", "bn1", "(", "x", ")", "\n", "x", "=", "self", ".", "relu", "(", "x", ")", "\n", "x", "=", "self", ".", "maxpool", "(", "x", ")", "\n", "\n", "x", "=", "self", ".", "layer1", "(", "x", ")", "\n", "x", "=", "self", ".", "layer2", "(", "x", ")", "\n", "x1", "=", "self", ".", "layer3_1", "(", "x", ")", "\n", "x1", "=", "self", ".", "layer4_1", "(", "x1", ")", "\n", "\n", "return", "x1", ",", "x1", "\n", "", "", ""]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.ResNet.conv3x3": [[5, 9], ["torch.Conv2d"], "function", ["None"], ["def", "conv3x3", "(", "in_planes", ",", "out_planes", ",", "stride", "=", "1", ")", ":", "\n", "    ", "\"\"\"3x3 convolution with padding\"\"\"", "\n", "return", "nn", ".", "Conv2d", "(", "in_planes", ",", "out_planes", ",", "kernel_size", "=", "3", ",", "stride", "=", "stride", ",", "\n", "padding", "=", "1", ",", "bias", "=", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.TransBasicBlock.__init__": [[14, 28], ["torch.Module.__init__", "BBSNet_model.conv3x3", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.ReLU", "torch.ReLU", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.ConvTranspose2d", "torch.ConvTranspose2d", "BBSNet_model.conv3x3"], "methods", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet.__init__", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.conv3x3", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.conv3x3"], ["def", "__init__", "(", "self", ",", "inplanes", ",", "planes", ",", "stride", "=", "1", ",", "upsample", "=", "None", ",", "**", "kwargs", ")", ":", "\n", "        ", "super", "(", "TransBasicBlock", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv1", "=", "conv3x3", "(", "inplanes", ",", "inplanes", ")", "\n", "self", ".", "bn1", "=", "nn", ".", "BatchNorm2d", "(", "inplanes", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "if", "upsample", "is", "not", "None", "and", "stride", "!=", "1", ":", "\n", "            ", "self", ".", "conv2", "=", "nn", ".", "ConvTranspose2d", "(", "inplanes", ",", "planes", ",", "\n", "kernel_size", "=", "3", ",", "stride", "=", "stride", ",", "padding", "=", "1", ",", "\n", "output_padding", "=", "1", ",", "bias", "=", "False", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "conv2", "=", "conv3x3", "(", "inplanes", ",", "planes", ",", "stride", ")", "\n", "", "self", ".", "bn2", "=", "nn", ".", "BatchNorm2d", "(", "planes", ")", "\n", "self", ".", "upsample", "=", "upsample", "\n", "self", ".", "stride", "=", "stride", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.TransBasicBlock.forward": [[29, 46], ["BBSNet_model.TransBasicBlock.conv1", "BBSNet_model.TransBasicBlock.bn1", "BBSNet_model.TransBasicBlock.relu", "BBSNet_model.TransBasicBlock.conv2", "BBSNet_model.TransBasicBlock.bn2", "BBSNet_model.TransBasicBlock.relu", "BBSNet_model.TransBasicBlock.upsample"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "residual", "=", "x", "\n", "\n", "out", "=", "self", ".", "conv1", "(", "x", ")", "\n", "out", "=", "self", ".", "bn1", "(", "out", ")", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "out", "=", "self", ".", "conv2", "(", "out", ")", "\n", "out", "=", "self", ".", "bn2", "(", "out", ")", "\n", "\n", "if", "self", ".", "upsample", "is", "not", "None", ":", "\n", "            ", "residual", "=", "self", ".", "upsample", "(", "x", ")", "\n", "\n", "", "out", "+=", "residual", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "return", "out", "\n", "", "", "class", "ChannelAttention", "(", "nn", ".", "Module", ")", ":", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.ChannelAttention.__init__": [[47, 57], ["torch.Module.__init__", "torch.AdaptiveMaxPool2d", "torch.AdaptiveMaxPool2d", "torch.Conv2d", "torch.Conv2d", "torch.ReLU", "torch.ReLU", "torch.Conv2d", "torch.Conv2d", "torch.Sigmoid", "torch.Sigmoid"], "methods", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet.__init__"], ["    ", "def", "__init__", "(", "self", ",", "in_planes", ",", "ratio", "=", "16", ")", ":", "\n", "        ", "super", "(", "ChannelAttention", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "max_pool", "=", "nn", ".", "AdaptiveMaxPool2d", "(", "1", ")", "\n", "\n", "self", ".", "fc1", "=", "nn", ".", "Conv2d", "(", "in_planes", ",", "in_planes", "//", "16", ",", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "relu1", "=", "nn", ".", "ReLU", "(", ")", "\n", "self", ".", "fc2", "=", "nn", ".", "Conv2d", "(", "in_planes", "//", "16", ",", "in_planes", ",", "1", ",", "bias", "=", "False", ")", "\n", "\n", "self", ".", "sigmoid", "=", "nn", ".", "Sigmoid", "(", ")", "\n", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.ChannelAttention.forward": [[57, 61], ["BBSNet_model.ChannelAttention.fc2", "BBSNet_model.ChannelAttention.sigmoid", "BBSNet_model.ChannelAttention.relu1", "BBSNet_model.ChannelAttention.fc1", "BBSNet_model.ChannelAttention.max_pool"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "max_out", "=", "self", ".", "fc2", "(", "self", ".", "relu1", "(", "self", ".", "fc1", "(", "self", ".", "max_pool", "(", "x", ")", ")", ")", ")", "\n", "out", "=", "max_out", "\n", "return", "self", ".", "sigmoid", "(", "out", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.SpatialAttention.__init__": [[63, 71], ["torch.Module.__init__", "torch.Conv2d", "torch.Conv2d", "torch.Sigmoid", "torch.Sigmoid"], "methods", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet.__init__"], ["    ", "def", "__init__", "(", "self", ",", "kernel_size", "=", "7", ")", ":", "\n", "        ", "super", "(", "SpatialAttention", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "assert", "kernel_size", "in", "(", "3", ",", "7", ")", ",", "'kernel size must be 3 or 7'", "\n", "padding", "=", "3", "if", "kernel_size", "==", "7", "else", "1", "\n", "\n", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "1", ",", "1", ",", "kernel_size", ",", "padding", "=", "padding", ",", "bias", "=", "False", ")", "\n", "self", ".", "sigmoid", "=", "nn", ".", "Sigmoid", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.SpatialAttention.forward": [[72, 77], ["torch.max", "torch.max", "torch.max", "torch.max", "BBSNet_model.SpatialAttention.conv1", "BBSNet_model.SpatialAttention.sigmoid"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "max_out", ",", "_", "=", "torch", ".", "max", "(", "x", ",", "dim", "=", "1", ",", "keepdim", "=", "True", ")", "\n", "x", "=", "max_out", "\n", "x", "=", "self", ".", "conv1", "(", "x", ")", "\n", "return", "self", ".", "sigmoid", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BasicConv2d.__init__": [[79, 86], ["torch.Module.__init__", "torch.Conv2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.ReLU", "torch.ReLU"], "methods", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet.__init__"], ["    ", "def", "__init__", "(", "self", ",", "in_planes", ",", "out_planes", ",", "kernel_size", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "dilation", "=", "1", ")", ":", "\n", "        ", "super", "(", "BasicConv2d", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv", "=", "nn", ".", "Conv2d", "(", "in_planes", ",", "out_planes", ",", "\n", "kernel_size", "=", "kernel_size", ",", "stride", "=", "stride", ",", "\n", "padding", "=", "padding", ",", "dilation", "=", "dilation", ",", "bias", "=", "False", ")", "\n", "self", ".", "bn", "=", "nn", ".", "BatchNorm2d", "(", "out_planes", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BasicConv2d.forward": [[87, 91], ["BBSNet_model.BasicConv2d.conv", "BBSNet_model.BasicConv2d.bn"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "conv", "(", "x", ")", "\n", "x", "=", "self", ".", "bn", "(", "x", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.GCM.__init__": [[94, 120], ["torch.Module.__init__", "torch.ReLU", "torch.ReLU", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d"], "methods", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet.__init__"], ["    ", "def", "__init__", "(", "self", ",", "in_channel", ",", "out_channel", ")", ":", "\n", "        ", "super", "(", "GCM", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "True", ")", "\n", "self", ".", "branch0", "=", "nn", ".", "Sequential", "(", "\n", "BasicConv2d", "(", "in_channel", ",", "out_channel", ",", "1", ")", ",", "\n", ")", "\n", "self", ".", "branch1", "=", "nn", ".", "Sequential", "(", "\n", "BasicConv2d", "(", "in_channel", ",", "out_channel", ",", "1", ")", ",", "\n", "BasicConv2d", "(", "out_channel", ",", "out_channel", ",", "kernel_size", "=", "(", "1", ",", "3", ")", ",", "padding", "=", "(", "0", ",", "1", ")", ")", ",", "\n", "BasicConv2d", "(", "out_channel", ",", "out_channel", ",", "kernel_size", "=", "(", "3", ",", "1", ")", ",", "padding", "=", "(", "1", ",", "0", ")", ")", ",", "\n", "BasicConv2d", "(", "out_channel", ",", "out_channel", ",", "3", ",", "padding", "=", "3", ",", "dilation", "=", "3", ")", "\n", ")", "\n", "self", ".", "branch2", "=", "nn", ".", "Sequential", "(", "\n", "BasicConv2d", "(", "in_channel", ",", "out_channel", ",", "1", ")", ",", "\n", "BasicConv2d", "(", "out_channel", ",", "out_channel", ",", "kernel_size", "=", "(", "1", ",", "5", ")", ",", "padding", "=", "(", "0", ",", "2", ")", ")", ",", "\n", "BasicConv2d", "(", "out_channel", ",", "out_channel", ",", "kernel_size", "=", "(", "5", ",", "1", ")", ",", "padding", "=", "(", "2", ",", "0", ")", ")", ",", "\n", "BasicConv2d", "(", "out_channel", ",", "out_channel", ",", "3", ",", "padding", "=", "5", ",", "dilation", "=", "5", ")", "\n", ")", "\n", "self", ".", "branch3", "=", "nn", ".", "Sequential", "(", "\n", "BasicConv2d", "(", "in_channel", ",", "out_channel", ",", "1", ")", ",", "\n", "BasicConv2d", "(", "out_channel", ",", "out_channel", ",", "kernel_size", "=", "(", "1", ",", "7", ")", ",", "padding", "=", "(", "0", ",", "3", ")", ")", ",", "\n", "BasicConv2d", "(", "out_channel", ",", "out_channel", ",", "kernel_size", "=", "(", "7", ",", "1", ")", ",", "padding", "=", "(", "3", ",", "0", ")", ")", ",", "\n", "BasicConv2d", "(", "out_channel", ",", "out_channel", ",", "3", ",", "padding", "=", "7", ",", "dilation", "=", "7", ")", "\n", ")", "\n", "self", ".", "conv_cat", "=", "BasicConv2d", "(", "4", "*", "out_channel", ",", "out_channel", ",", "3", ",", "padding", "=", "1", ")", "\n", "self", ".", "conv_res", "=", "BasicConv2d", "(", "in_channel", ",", "out_channel", ",", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.GCM.forward": [[121, 131], ["BBSNet_model.GCM.branch0", "BBSNet_model.GCM.branch1", "BBSNet_model.GCM.branch2", "BBSNet_model.GCM.branch3", "BBSNet_model.GCM.conv_cat", "BBSNet_model.GCM.relu", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "BBSNet_model.GCM.conv_res"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x0", "=", "self", ".", "branch0", "(", "x", ")", "\n", "x1", "=", "self", ".", "branch1", "(", "x", ")", "\n", "x2", "=", "self", ".", "branch2", "(", "x", ")", "\n", "x3", "=", "self", ".", "branch3", "(", "x", ")", "\n", "\n", "x_cat", "=", "self", ".", "conv_cat", "(", "torch", ".", "cat", "(", "(", "x0", ",", "x1", ",", "x2", ",", "x3", ")", ",", "1", ")", ")", "\n", "\n", "x", "=", "self", ".", "relu", "(", "x_cat", "+", "self", ".", "conv_res", "(", "x", ")", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.aggregation_init.__init__": [[135, 150], ["torch.Module.__init__", "torch.ReLU", "torch.ReLU", "torch.Upsample", "torch.Upsample", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "torch.Conv2d", "torch.Conv2d"], "methods", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet.__init__"], ["    ", "def", "__init__", "(", "self", ",", "channel", ")", ":", "\n", "        ", "super", "(", "aggregation_init", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "True", ")", "\n", "\n", "self", ".", "upsample", "=", "nn", ".", "Upsample", "(", "scale_factor", "=", "2", ",", "mode", "=", "'bilinear'", ",", "align_corners", "=", "True", ")", "\n", "self", ".", "conv_upsample1", "=", "BasicConv2d", "(", "channel", ",", "channel", ",", "3", ",", "padding", "=", "1", ")", "\n", "self", ".", "conv_upsample2", "=", "BasicConv2d", "(", "channel", ",", "channel", ",", "3", ",", "padding", "=", "1", ")", "\n", "self", ".", "conv_upsample3", "=", "BasicConv2d", "(", "channel", ",", "channel", ",", "3", ",", "padding", "=", "1", ")", "\n", "self", ".", "conv_upsample4", "=", "BasicConv2d", "(", "channel", ",", "channel", ",", "3", ",", "padding", "=", "1", ")", "\n", "self", ".", "conv_upsample5", "=", "BasicConv2d", "(", "2", "*", "channel", ",", "2", "*", "channel", ",", "3", ",", "padding", "=", "1", ")", "\n", "\n", "self", ".", "conv_concat2", "=", "BasicConv2d", "(", "2", "*", "channel", ",", "2", "*", "channel", ",", "3", ",", "padding", "=", "1", ")", "\n", "self", ".", "conv_concat3", "=", "BasicConv2d", "(", "3", "*", "channel", ",", "3", "*", "channel", ",", "3", ",", "padding", "=", "1", ")", "\n", "self", ".", "conv4", "=", "BasicConv2d", "(", "3", "*", "channel", ",", "3", "*", "channel", ",", "3", ",", "padding", "=", "1", ")", "\n", "self", ".", "conv5", "=", "nn", ".", "Conv2d", "(", "3", "*", "channel", ",", "1", ",", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.aggregation_init.forward": [[151, 167], ["torch.cat", "torch.cat", "torch.cat", "torch.cat", "BBSNet_model.aggregation_init.conv_concat2", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "BBSNet_model.aggregation_init.conv_concat3", "BBSNet_model.aggregation_init.conv4", "BBSNet_model.aggregation_init.conv5", "BBSNet_model.aggregation_init.conv_upsample1", "BBSNet_model.aggregation_init.upsample", "BBSNet_model.aggregation_init.conv_upsample2", "BBSNet_model.aggregation_init.conv_upsample3", "BBSNet_model.aggregation_init.conv_upsample4", "BBSNet_model.aggregation_init.conv_upsample5", "BBSNet_model.aggregation_init.upsample", "BBSNet_model.aggregation_init.upsample", "BBSNet_model.aggregation_init.upsample", "BBSNet_model.aggregation_init.upsample", "BBSNet_model.aggregation_init.upsample"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x1", ",", "x2", ",", "x3", ")", ":", "\n", "        ", "x1_1", "=", "x1", "\n", "x2_1", "=", "self", ".", "conv_upsample1", "(", "self", ".", "upsample", "(", "x1", ")", ")", "*", "x2", "\n", "x3_1", "=", "self", ".", "conv_upsample2", "(", "self", ".", "upsample", "(", "self", ".", "upsample", "(", "x1", ")", ")", ")", "*", "self", ".", "conv_upsample3", "(", "self", ".", "upsample", "(", "x2", ")", ")", "*", "x3", "\n", "\n", "x2_2", "=", "torch", ".", "cat", "(", "(", "x2_1", ",", "self", ".", "conv_upsample4", "(", "self", ".", "upsample", "(", "x1_1", ")", ")", ")", ",", "1", ")", "\n", "x2_2", "=", "self", ".", "conv_concat2", "(", "x2_2", ")", "\n", "\n", "x3_2", "=", "torch", ".", "cat", "(", "(", "x3_1", ",", "self", ".", "conv_upsample5", "(", "self", ".", "upsample", "(", "x2_2", ")", ")", ")", ",", "1", ")", "\n", "x3_2", "=", "self", ".", "conv_concat3", "(", "x3_2", ")", "\n", "\n", "x", "=", "self", ".", "conv4", "(", "x3_2", ")", "\n", "x", "=", "self", ".", "conv5", "(", "x", ")", "\n", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.aggregation_final.__init__": [[171, 184], ["torch.Module.__init__", "torch.ReLU", "torch.ReLU", "torch.Upsample", "torch.Upsample", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d", "BBSNet_model.BasicConv2d"], "methods", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet.__init__"], ["    ", "def", "__init__", "(", "self", ",", "channel", ")", ":", "\n", "        ", "super", "(", "aggregation_final", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "True", ")", "\n", "\n", "self", ".", "upsample", "=", "nn", ".", "Upsample", "(", "scale_factor", "=", "2", ",", "mode", "=", "'bilinear'", ",", "align_corners", "=", "True", ")", "\n", "self", ".", "conv_upsample1", "=", "BasicConv2d", "(", "channel", ",", "channel", ",", "3", ",", "padding", "=", "1", ")", "\n", "self", ".", "conv_upsample2", "=", "BasicConv2d", "(", "channel", ",", "channel", ",", "3", ",", "padding", "=", "1", ")", "\n", "self", ".", "conv_upsample3", "=", "BasicConv2d", "(", "channel", ",", "channel", ",", "3", ",", "padding", "=", "1", ")", "\n", "self", ".", "conv_upsample4", "=", "BasicConv2d", "(", "channel", ",", "channel", ",", "3", ",", "padding", "=", "1", ")", "\n", "self", ".", "conv_upsample5", "=", "BasicConv2d", "(", "2", "*", "channel", ",", "2", "*", "channel", ",", "3", ",", "padding", "=", "1", ")", "\n", "\n", "self", ".", "conv_concat2", "=", "BasicConv2d", "(", "2", "*", "channel", ",", "2", "*", "channel", ",", "3", ",", "padding", "=", "1", ")", "\n", "self", ".", "conv_concat3", "=", "BasicConv2d", "(", "3", "*", "channel", ",", "3", "*", "channel", ",", "3", ",", "padding", "=", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.aggregation_final.forward": [[185, 198], ["torch.cat", "torch.cat", "torch.cat", "torch.cat", "BBSNet_model.aggregation_final.conv_concat2", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "BBSNet_model.aggregation_final.conv_concat3", "BBSNet_model.aggregation_final.conv_upsample1", "BBSNet_model.aggregation_final.upsample", "BBSNet_model.aggregation_final.conv_upsample2", "BBSNet_model.aggregation_final.conv_upsample3", "BBSNet_model.aggregation_final.conv_upsample4", "BBSNet_model.aggregation_final.conv_upsample5", "BBSNet_model.aggregation_final.upsample", "BBSNet_model.aggregation_final.upsample"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x1", ",", "x2", ",", "x3", ")", ":", "\n", "        ", "x1_1", "=", "x1", "\n", "x2_1", "=", "self", ".", "conv_upsample1", "(", "self", ".", "upsample", "(", "x1", ")", ")", "*", "x2", "\n", "x3_1", "=", "self", ".", "conv_upsample2", "(", "self", ".", "upsample", "(", "x1", ")", ")", "*", "self", ".", "conv_upsample3", "(", "x2", ")", "*", "x3", "\n", "\n", "x2_2", "=", "torch", ".", "cat", "(", "(", "x2_1", ",", "self", ".", "conv_upsample4", "(", "self", ".", "upsample", "(", "x1_1", ")", ")", ")", ",", "1", ")", "\n", "x2_2", "=", "self", ".", "conv_concat2", "(", "x2_2", ")", "\n", "\n", "x3_2", "=", "torch", ".", "cat", "(", "(", "x3_1", ",", "self", ".", "conv_upsample5", "(", "x2_2", ")", ")", ",", "1", ")", "\n", "x3_2", "=", "self", ".", "conv_concat3", "(", "x3_2", ")", "\n", "\n", "return", "x3_2", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.Refine.__init__": [[201, 204], ["torch.Module.__init__", "torch.Upsample", "torch.Upsample"], "methods", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet.__init__"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", "Refine", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "upsample2", "=", "nn", ".", "Upsample", "(", "scale_factor", "=", "2", ",", "mode", "=", "'bilinear'", ",", "align_corners", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.Refine.forward": [[205, 212], ["torch.mul", "torch.mul", "torch.mul", "torch.mul", "torch.mul", "torch.mul", "torch.mul", "torch.mul", "torch.mul", "torch.mul", "torch.mul", "torch.mul", "BBSNet_model.Refine.upsample2", "BBSNet_model.Refine.upsample2"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "attention", ",", "x1", ",", "x2", ",", "x3", ")", ":", "\n", "#Note that there is an error in the manuscript. In the paper, the refinement strategy is depicted as \"\"f'=f*S1\"\", it should be \"\"f'=f+f*S1\"\".", "\n", "        ", "x1", "=", "x1", "+", "torch", ".", "mul", "(", "x1", ",", "self", ".", "upsample2", "(", "attention", ")", ")", "\n", "x2", "=", "x2", "+", "torch", ".", "mul", "(", "x2", ",", "self", ".", "upsample2", "(", "attention", ")", ")", "\n", "x3", "=", "x3", "+", "torch", ".", "mul", "(", "x3", ",", "attention", ")", "\n", "\n", "return", "x1", ",", "x2", ",", "x3", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet.__init__": [[215, 268], ["torch.Module.__init__", "ResNet.ResNet50", "ResNet.ResNet50", "BBSNet_model.GCM", "BBSNet_model.GCM", "BBSNet_model.GCM", "BBSNet_model.aggregation_init", "BBSNet_model.GCM", "BBSNet_model.GCM", "BBSNet_model.GCM", "BBSNet_model.aggregation_final", "torch.Upsample", "torch.Upsample", "torch.Upsample", "torch.Upsample", "torch.Upsample", "torch.Upsample", "BBSNet_model.Refine", "BBSNet_model.ChannelAttention", "BBSNet_model.ChannelAttention", "BBSNet_model.ChannelAttention", "BBSNet_model.ChannelAttention", "BBSNet_model.ChannelAttention", "BBSNet_model.SpatialAttention", "BBSNet_model.SpatialAttention", "BBSNet_model.SpatialAttention", "BBSNet_model.SpatialAttention", "BBSNet_model.SpatialAttention", "BBSNet_model.BBSNet._make_transpose", "BBSNet_model.BBSNet._make_transpose", "BBSNet_model.BBSNet._make_agant_layer", "BBSNet_model.BBSNet._make_agant_layer", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "BBSNet_model.BBSNet.initialize_weights"], "methods", ["home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet.__init__", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet._make_transpose", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet._make_transpose", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet._make_agant_layer", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet._make_agant_layer", "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet.initialize_weights"], ["    ", "def", "__init__", "(", "self", ",", "channel", "=", "32", ")", ":", "\n", "        ", "super", "(", "BBSNet", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "#Backbone model", "\n", "self", ".", "resnet", "=", "ResNet50", "(", "'rgb'", ")", "\n", "self", ".", "resnet_depth", "=", "ResNet50", "(", "'rgbd'", ")", "\n", "\n", "#Decoder 1", "\n", "self", ".", "rfb2_1", "=", "GCM", "(", "512", ",", "channel", ")", "\n", "self", ".", "rfb3_1", "=", "GCM", "(", "1024", ",", "channel", ")", "\n", "self", ".", "rfb4_1", "=", "GCM", "(", "2048", ",", "channel", ")", "\n", "self", ".", "agg1", "=", "aggregation_init", "(", "channel", ")", "\n", "\n", "#Decoder 2", "\n", "self", ".", "rfb0_2", "=", "GCM", "(", "64", ",", "channel", ")", "\n", "self", ".", "rfb1_2", "=", "GCM", "(", "256", ",", "channel", ")", "\n", "self", ".", "rfb5_2", "=", "GCM", "(", "512", ",", "channel", ")", "\n", "self", ".", "agg2", "=", "aggregation_final", "(", "channel", ")", "\n", "\n", "#upsample function", "\n", "self", ".", "upsample", "=", "nn", ".", "Upsample", "(", "scale_factor", "=", "8", ",", "mode", "=", "'bilinear'", ",", "align_corners", "=", "True", ")", "\n", "self", ".", "upsample4", "=", "nn", ".", "Upsample", "(", "scale_factor", "=", "4", ",", "mode", "=", "'bilinear'", ",", "align_corners", "=", "True", ")", "\n", "self", ".", "upsample2", "=", "nn", ".", "Upsample", "(", "scale_factor", "=", "2", ",", "mode", "=", "'bilinear'", ",", "align_corners", "=", "True", ")", "\n", "\n", "#Refinement flow", "\n", "self", ".", "HA", "=", "Refine", "(", ")", "\n", "\n", "#Components of DEM module", "\n", "self", ".", "atten_depth_channel_0", "=", "ChannelAttention", "(", "64", ")", "\n", "self", ".", "atten_depth_channel_1", "=", "ChannelAttention", "(", "256", ")", "\n", "self", ".", "atten_depth_channel_2", "=", "ChannelAttention", "(", "512", ")", "\n", "self", ".", "atten_depth_channel_3_1", "=", "ChannelAttention", "(", "1024", ")", "\n", "self", ".", "atten_depth_channel_4_1", "=", "ChannelAttention", "(", "2048", ")", "\n", "\n", "self", ".", "atten_depth_spatial_0", "=", "SpatialAttention", "(", ")", "\n", "self", ".", "atten_depth_spatial_1", "=", "SpatialAttention", "(", ")", "\n", "self", ".", "atten_depth_spatial_2", "=", "SpatialAttention", "(", ")", "\n", "self", ".", "atten_depth_spatial_3_1", "=", "SpatialAttention", "(", ")", "\n", "self", ".", "atten_depth_spatial_4_1", "=", "SpatialAttention", "(", ")", "\n", "\n", "#Components of PTM module", "\n", "self", ".", "inplanes", "=", "32", "*", "2", "\n", "self", ".", "deconv1", "=", "self", ".", "_make_transpose", "(", "TransBasicBlock", ",", "32", "*", "2", ",", "3", ",", "stride", "=", "2", ")", "\n", "self", ".", "inplanes", "=", "32", "\n", "self", ".", "deconv2", "=", "self", ".", "_make_transpose", "(", "TransBasicBlock", ",", "32", ",", "3", ",", "stride", "=", "2", ")", "\n", "self", ".", "agant1", "=", "self", ".", "_make_agant_layer", "(", "32", "*", "3", ",", "32", "*", "2", ")", "\n", "self", ".", "agant2", "=", "self", ".", "_make_agant_layer", "(", "32", "*", "2", ",", "32", ")", "\n", "self", ".", "out0_conv", "=", "nn", ".", "Conv2d", "(", "32", "*", "3", ",", "1", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "bias", "=", "True", ")", "\n", "self", ".", "out1_conv", "=", "nn", ".", "Conv2d", "(", "32", "*", "2", ",", "1", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "bias", "=", "True", ")", "\n", "self", ".", "out2_conv", "=", "nn", ".", "Conv2d", "(", "32", "*", "1", ",", "1", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "bias", "=", "True", ")", "\n", "\n", "if", "self", ".", "training", ":", "\n", "            ", "self", ".", "initialize_weights", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet.forward": [[269, 347], ["BBSNet_model.BBSNet.resnet.conv1", "BBSNet_model.BBSNet.resnet.bn1", "BBSNet_model.BBSNet.resnet.relu", "BBSNet_model.BBSNet.resnet.maxpool", "BBSNet_model.BBSNet.resnet_depth.conv1", "BBSNet_model.BBSNet.resnet_depth.bn1", "BBSNet_model.BBSNet.resnet_depth.relu", "BBSNet_model.BBSNet.resnet_depth.maxpool", "BBSNet_model.BBSNet.mul", "temp.mul.mul.mul", "BBSNet_model.BBSNet.resnet.layer1", "BBSNet_model.BBSNet.resnet_depth.layer1", "BBSNet_model.BBSNet.mul", "temp.mul.mul.mul", "BBSNet_model.BBSNet.resnet.layer2", "BBSNet_model.BBSNet.resnet_depth.layer2", "BBSNet_model.BBSNet.mul", "temp.mul.mul.mul", "BBSNet_model.BBSNet.resnet.layer3_1", "BBSNet_model.BBSNet.resnet_depth.layer3_1", "BBSNet_model.BBSNet.mul", "temp.mul.mul.mul", "BBSNet_model.BBSNet.resnet.layer4_1", "BBSNet_model.BBSNet.resnet_depth.layer4_1", "BBSNet_model.BBSNet.mul", "temp.mul.mul.mul", "BBSNet_model.BBSNet.rfb2_1", "BBSNet_model.BBSNet.rfb3_1", "BBSNet_model.BBSNet.rfb4_1", "BBSNet_model.BBSNet.agg1", "BBSNet_model.BBSNet.HA", "BBSNet_model.BBSNet.rfb0_2", "BBSNet_model.BBSNet.rfb1_2", "BBSNet_model.BBSNet.rfb5_2", "BBSNet_model.BBSNet.agg2", "BBSNet_model.BBSNet.agant1", "BBSNet_model.BBSNet.deconv1", "BBSNet_model.BBSNet.agant2", "BBSNet_model.BBSNet.deconv2", "BBSNet_model.BBSNet.out2_conv", "BBSNet_model.BBSNet.atten_depth_channel_0", "BBSNet_model.BBSNet.atten_depth_spatial_0", "BBSNet_model.BBSNet.atten_depth_channel_1", "BBSNet_model.BBSNet.atten_depth_spatial_1", "BBSNet_model.BBSNet.atten_depth_channel_2", "BBSNet_model.BBSNet.atten_depth_spatial_2", "BBSNet_model.BBSNet.atten_depth_channel_3_1", "BBSNet_model.BBSNet.atten_depth_spatial_3_1", "BBSNet_model.BBSNet.atten_depth_channel_4_1", "BBSNet_model.BBSNet.atten_depth_spatial_4_1", "BBSNet_model.BBSNet.sigmoid", "BBSNet_model.BBSNet.upsample"], "methods", ["None"], ["", "", "def", "forward", "(", "self", ",", "x", ",", "x_depth", ")", ":", "\n", "        ", "x", "=", "self", ".", "resnet", ".", "conv1", "(", "x", ")", "\n", "x", "=", "self", ".", "resnet", ".", "bn1", "(", "x", ")", "\n", "x", "=", "self", ".", "resnet", ".", "relu", "(", "x", ")", "\n", "x", "=", "self", ".", "resnet", ".", "maxpool", "(", "x", ")", "\n", "\n", "x_depth", "=", "self", ".", "resnet_depth", ".", "conv1", "(", "x_depth", ")", "\n", "x_depth", "=", "self", ".", "resnet_depth", ".", "bn1", "(", "x_depth", ")", "\n", "x_depth", "=", "self", ".", "resnet_depth", ".", "relu", "(", "x_depth", ")", "\n", "x_depth", "=", "self", ".", "resnet_depth", ".", "maxpool", "(", "x_depth", ")", "\n", "\n", "#layer0 merge", "\n", "temp", "=", "x_depth", ".", "mul", "(", "self", ".", "atten_depth_channel_0", "(", "x_depth", ")", ")", "\n", "temp", "=", "temp", ".", "mul", "(", "self", ".", "atten_depth_spatial_0", "(", "temp", ")", ")", "\n", "x", "=", "x", "+", "temp", "\n", "#layer0 merge end", "\n", "\n", "x1", "=", "self", ".", "resnet", ".", "layer1", "(", "x", ")", "# 256 x 64 x 64", "\n", "x1_depth", "=", "self", ".", "resnet_depth", ".", "layer1", "(", "x_depth", ")", "\n", "\n", "#layer1 merge", "\n", "temp", "=", "x1_depth", ".", "mul", "(", "self", ".", "atten_depth_channel_1", "(", "x1_depth", ")", ")", "\n", "temp", "=", "temp", ".", "mul", "(", "self", ".", "atten_depth_spatial_1", "(", "temp", ")", ")", "\n", "x1", "=", "x1", "+", "temp", "\n", "#layer1 merge end", "\n", "\n", "x2", "=", "self", ".", "resnet", ".", "layer2", "(", "x1", ")", "# 512 x 32 x 32", "\n", "x2_depth", "=", "self", ".", "resnet_depth", ".", "layer2", "(", "x1_depth", ")", "\n", "\n", "#layer2 merge", "\n", "temp", "=", "x2_depth", ".", "mul", "(", "self", ".", "atten_depth_channel_2", "(", "x2_depth", ")", ")", "\n", "temp", "=", "temp", ".", "mul", "(", "self", ".", "atten_depth_spatial_2", "(", "temp", ")", ")", "\n", "x2", "=", "x2", "+", "temp", "\n", "#layer2 merge end", "\n", "\n", "x2_1", "=", "x2", "\n", "\n", "x3_1", "=", "self", ".", "resnet", ".", "layer3_1", "(", "x2_1", ")", "# 1024 x 16 x 16", "\n", "x3_1_depth", "=", "self", ".", "resnet_depth", ".", "layer3_1", "(", "x2_depth", ")", "\n", "\n", "#layer3_1 merge", "\n", "temp", "=", "x3_1_depth", ".", "mul", "(", "self", ".", "atten_depth_channel_3_1", "(", "x3_1_depth", ")", ")", "\n", "temp", "=", "temp", ".", "mul", "(", "self", ".", "atten_depth_spatial_3_1", "(", "temp", ")", ")", "\n", "x3_1", "=", "x3_1", "+", "temp", "\n", "#layer3_1 merge end", "\n", "\n", "x4_1", "=", "self", ".", "resnet", ".", "layer4_1", "(", "x3_1", ")", "# 2048 x 8 x 8", "\n", "x4_1_depth", "=", "self", ".", "resnet_depth", ".", "layer4_1", "(", "x3_1_depth", ")", "\n", "\n", "#layer4_1 merge", "\n", "temp", "=", "x4_1_depth", ".", "mul", "(", "self", ".", "atten_depth_channel_4_1", "(", "x4_1_depth", ")", ")", "\n", "temp", "=", "temp", ".", "mul", "(", "self", ".", "atten_depth_spatial_4_1", "(", "temp", ")", ")", "\n", "x4_1", "=", "x4_1", "+", "temp", "\n", "#layer4_1 merge end", "\n", "\n", "#produce initial saliency map by decoder1", "\n", "x2_1", "=", "self", ".", "rfb2_1", "(", "x2_1", ")", "\n", "x3_1", "=", "self", ".", "rfb3_1", "(", "x3_1", ")", "\n", "x4_1", "=", "self", ".", "rfb4_1", "(", "x4_1", ")", "\n", "attention_map", "=", "self", ".", "agg1", "(", "x4_1", ",", "x3_1", ",", "x2_1", ")", "\n", "\n", "#Refine low-layer features by initial map", "\n", "x", ",", "x1", ",", "x5", "=", "self", ".", "HA", "(", "attention_map", ".", "sigmoid", "(", ")", ",", "x", ",", "x1", ",", "x2", ")", "\n", "\n", "#produce final saliency map by decoder2", "\n", "x0_2", "=", "self", ".", "rfb0_2", "(", "x", ")", "\n", "x1_2", "=", "self", ".", "rfb1_2", "(", "x1", ")", "\n", "x5_2", "=", "self", ".", "rfb5_2", "(", "x5", ")", "\n", "y", "=", "self", ".", "agg2", "(", "x5_2", ",", "x1_2", ",", "x0_2", ")", "#*4", "\n", "\n", "#PTM module", "\n", "y", "=", "self", ".", "agant1", "(", "y", ")", "\n", "y", "=", "self", ".", "deconv1", "(", "y", ")", "\n", "y", "=", "self", ".", "agant2", "(", "y", ")", "\n", "y", "=", "self", ".", "deconv2", "(", "y", ")", "\n", "y", "=", "self", ".", "out2_conv", "(", "y", ")", "\n", "\n", "return", "self", ".", "upsample", "(", "attention_map", ")", ",", "y", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet._make_agant_layer": [[348, 356], ["torch.Sequential", "torch.Sequential", "torch.Conv2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.ReLU", "torch.ReLU"], "methods", ["None"], ["", "def", "_make_agant_layer", "(", "self", ",", "inplanes", ",", "planes", ")", ":", "\n", "        ", "layers", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "inplanes", ",", "planes", ",", "kernel_size", "=", "1", ",", "\n", "stride", "=", "1", ",", "padding", "=", "0", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm2d", "(", "planes", ")", ",", "\n", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", ")", "\n", "return", "layers", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet._make_transpose": [[357, 382], ["range", "layers.append", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "layers.append", "block", "torch.ConvTranspose2d", "torch.ConvTranspose2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.Sequential", "torch.Sequential", "block", "torch.Conv2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.BatchNorm2d"], "methods", ["None"], ["", "def", "_make_transpose", "(", "self", ",", "block", ",", "planes", ",", "blocks", ",", "stride", "=", "1", ")", ":", "\n", "        ", "upsample", "=", "None", "\n", "if", "stride", "!=", "1", ":", "\n", "            ", "upsample", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "ConvTranspose2d", "(", "self", ".", "inplanes", ",", "planes", ",", "\n", "kernel_size", "=", "2", ",", "stride", "=", "stride", ",", "\n", "padding", "=", "0", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm2d", "(", "planes", ")", ",", "\n", ")", "\n", "", "elif", "self", ".", "inplanes", "!=", "planes", ":", "\n", "            ", "upsample", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "self", ".", "inplanes", ",", "planes", ",", "\n", "kernel_size", "=", "1", ",", "stride", "=", "stride", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm2d", "(", "planes", ")", ",", "\n", ")", "\n", "\n", "", "layers", "=", "[", "]", "\n", "\n", "for", "i", "in", "range", "(", "1", ",", "blocks", ")", ":", "\n", "            ", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "self", ".", "inplanes", ")", ")", "\n", "\n", "", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "stride", ",", "upsample", ")", ")", "\n", "self", ".", "inplanes", "=", "planes", "\n", "\n", "return", "nn", ".", "Sequential", "(", "*", "layers", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.BBSNet.initialize_weights": [[384, 420], ["torchvision.resnet50", "torchvision.resnet50.state_dict", "BBSNet_model.BBSNet.resnet.state_dict().items", "BBSNet_model.BBSNet.resnet.load_state_dict", "BBSNet_model.BBSNet.resnet_depth.state_dict().items", "BBSNet_model.BBSNet.resnet_depth.load_state_dict", "len", "len", "len", "len", "BBSNet_model.BBSNet.resnet.state_dict", "models.resnet50.state_dict.keys", "all_params.keys", "BBSNet_model.BBSNet.resnet.state_dict().keys", "BBSNet_model.BBSNet.resnet_depth.state_dict", "torch.nn.init.normal_", "torch.nn.init.normal_", "torch.nn.init.normal_", "torch.nn.init.normal_", "all_params.keys", "BBSNet_model.BBSNet.resnet_depth.state_dict().keys", "models.resnet50.state_dict.keys", "BBSNet_model.BBSNet.resnet.state_dict", "BBSNet_model.BBSNet.resnet_depth.state_dict", "k.split", "k.split", "k.split", "k.split", "k.split", "k.split", "k.split", "k.split"], "methods", ["None"], ["", "def", "initialize_weights", "(", "self", ")", ":", "\n", "        ", "res50", "=", "models", ".", "resnet50", "(", "pretrained", "=", "True", ")", "\n", "pretrained_dict", "=", "res50", ".", "state_dict", "(", ")", "\n", "all_params", "=", "{", "}", "\n", "for", "k", ",", "v", "in", "self", ".", "resnet", ".", "state_dict", "(", ")", ".", "items", "(", ")", ":", "\n", "            ", "if", "k", "in", "pretrained_dict", ".", "keys", "(", ")", ":", "\n", "                ", "v", "=", "pretrained_dict", "[", "k", "]", "\n", "all_params", "[", "k", "]", "=", "v", "\n", "", "elif", "'_1'", "in", "k", ":", "\n", "                ", "name", "=", "k", ".", "split", "(", "'_1'", ")", "[", "0", "]", "+", "k", ".", "split", "(", "'_1'", ")", "[", "1", "]", "\n", "v", "=", "pretrained_dict", "[", "name", "]", "\n", "all_params", "[", "k", "]", "=", "v", "\n", "", "elif", "'_2'", "in", "k", ":", "\n", "                ", "name", "=", "k", ".", "split", "(", "'_2'", ")", "[", "0", "]", "+", "k", ".", "split", "(", "'_2'", ")", "[", "1", "]", "\n", "v", "=", "pretrained_dict", "[", "name", "]", "\n", "all_params", "[", "k", "]", "=", "v", "\n", "", "", "assert", "len", "(", "all_params", ".", "keys", "(", ")", ")", "==", "len", "(", "self", ".", "resnet", ".", "state_dict", "(", ")", ".", "keys", "(", ")", ")", "\n", "self", ".", "resnet", ".", "load_state_dict", "(", "all_params", ")", "\n", "\n", "all_params", "=", "{", "}", "\n", "for", "k", ",", "v", "in", "self", ".", "resnet_depth", ".", "state_dict", "(", ")", ".", "items", "(", ")", ":", "\n", "            ", "if", "k", "==", "'conv1.weight'", ":", "\n", "                ", "all_params", "[", "k", "]", "=", "torch", ".", "nn", ".", "init", ".", "normal_", "(", "v", ",", "mean", "=", "0", ",", "std", "=", "1", ")", "\n", "", "elif", "k", "in", "pretrained_dict", ".", "keys", "(", ")", ":", "\n", "                ", "v", "=", "pretrained_dict", "[", "k", "]", "\n", "all_params", "[", "k", "]", "=", "v", "\n", "", "elif", "'_1'", "in", "k", ":", "\n", "                ", "name", "=", "k", ".", "split", "(", "'_1'", ")", "[", "0", "]", "+", "k", ".", "split", "(", "'_1'", ")", "[", "1", "]", "\n", "v", "=", "pretrained_dict", "[", "name", "]", "\n", "all_params", "[", "k", "]", "=", "v", "\n", "", "elif", "'_2'", "in", "k", ":", "\n", "                ", "name", "=", "k", ".", "split", "(", "'_2'", ")", "[", "0", "]", "+", "k", ".", "split", "(", "'_2'", ")", "[", "1", "]", "\n", "v", "=", "pretrained_dict", "[", "name", "]", "\n", "all_params", "[", "k", "]", "=", "v", "\n", "", "", "assert", "len", "(", "all_params", ".", "keys", "(", ")", ")", "==", "len", "(", "self", ".", "resnet_depth", ".", "state_dict", "(", ")", ".", "keys", "(", ")", ")", "\n", "self", ".", "resnet_depth", ".", "load_state_dict", "(", "all_params", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.zyjwuyan_BBS-Net.models.BBSNet_model.conv3x3": [[7, 11], ["torch.Conv2d"], "function", ["None"], ["def", "conv3x3", "(", "in_planes", ",", "out_planes", ",", "stride", "=", "1", ")", ":", "\n", "    ", "\"3x3 convolution with padding\"", "\n", "return", "nn", ".", "Conv2d", "(", "in_planes", ",", "out_planes", ",", "kernel_size", "=", "3", ",", "stride", "=", "stride", ",", "\n", "padding", "=", "1", ",", "bias", "=", "False", ")", "\n", "", "class", "TransBasicBlock", "(", "nn", ".", "Module", ")", ":", "\n"]]}