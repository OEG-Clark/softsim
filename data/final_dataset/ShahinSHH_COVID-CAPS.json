{"home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.test_binary.Capsule.__init__": [[43, 59], ["tensorflow.keras.layers.Layer.__init__", "tensorflow.keras.activations.get"], "methods", ["home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.Capsule.__init__"], ["    ", "def", "__init__", "(", "self", ",", "\n", "num_capsule", ",", "\n", "dim_capsule", ",", "\n", "routings", "=", "3", ",", "\n", "share_weights", "=", "True", ",", "\n", "activation", "=", "'squash'", ",", "\n", "**", "kwargs", ")", ":", "\n", "        ", "super", "(", "Capsule", ",", "self", ")", ".", "__init__", "(", "**", "kwargs", ")", "\n", "self", ".", "num_capsule", "=", "num_capsule", "\n", "self", ".", "dim_capsule", "=", "dim_capsule", "\n", "self", ".", "routings", "=", "routings", "\n", "self", ".", "share_weights", "=", "share_weights", "\n", "if", "activation", "==", "'squash'", ":", "\n", "            ", "self", ".", "activation", "=", "squash", "\n", "", "else", ":", "\n", "            ", "self", ".", "activation", "=", "activations", ".", "get", "(", "activation", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.test_binary.Capsule.get_config": [[60, 72], ["super().get_config().copy", "super().get_config().copy.update", "super().get_config"], "methods", ["home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.Capsule.get_config"], ["", "", "def", "get_config", "(", "self", ")", ":", "\n", "        ", "config", "=", "super", "(", ")", ".", "get_config", "(", ")", ".", "copy", "(", ")", "\n", "config", ".", "update", "(", "{", "\n", "'num_capsule'", ":", "self", ".", "num_capsule", ",", "\n", "'dim_capsule'", ":", "self", ".", "dim_capsule", ",", "\n", "'routings'", ":", "self", ".", "routings", ",", "\n", "'share_weight'", ":", "self", ".", "share_weights", ",", "\n", "\n", "\n", "\n", "}", ")", "\n", "return", "config", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.test_binary.Capsule.build": [[73, 90], ["test_binary.Capsule.add_weight", "test_binary.Capsule.add_weight"], "methods", ["None"], ["", "def", "build", "(", "self", ",", "input_shape", ")", ":", "\n", "        ", "input_dim_capsule", "=", "input_shape", "[", "-", "1", "]", "\n", "if", "self", ".", "share_weights", ":", "\n", "            ", "self", ".", "kernel", "=", "self", ".", "add_weight", "(", "\n", "name", "=", "'capsule_kernel'", ",", "\n", "shape", "=", "(", "1", ",", "input_dim_capsule", ",", "\n", "self", ".", "num_capsule", "*", "self", ".", "dim_capsule", ")", ",", "\n", "initializer", "=", "'glorot_uniform'", ",", "\n", "trainable", "=", "True", ")", "\n", "", "else", ":", "\n", "            ", "input_num_capsule", "=", "input_shape", "[", "-", "2", "]", "\n", "self", ".", "kernel", "=", "self", ".", "add_weight", "(", "\n", "name", "=", "'capsule_kernel'", ",", "\n", "shape", "=", "(", "input_num_capsule", ",", "input_dim_capsule", ",", "\n", "self", ".", "num_capsule", "*", "self", ".", "dim_capsule", ")", ",", "\n", "initializer", "=", "'glorot_uniform'", ",", "\n", "trainable", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.test_binary.Capsule.call": [[91, 116], ["tensorflow.keras.backend.reshape", "tensorflow.keras.backend.permute_dimensions", "tensorflow.keras.backend.zeros_like", "range", "tensorflow.keras.backend.conv1d", "tensorflow.keras.backend.local_conv1d", "tensorflow.keras.backend.shape", "tensorflow.keras.backend.shape", "test_binary.softmax", "test_binary.Capsule.activation", "keras.backend.batch_dot", "keras.backend.batch_dot", "tensorflow.keras.backend.backend", "tensorflow.keras.backend.sum"], "methods", ["home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.softmax"], ["", "", "def", "call", "(", "self", ",", "inputs", ")", ":", "\n", "\n", "\n", "        ", "if", "self", ".", "share_weights", ":", "\n", "            ", "hat_inputs", "=", "K", ".", "conv1d", "(", "inputs", ",", "self", ".", "kernel", ")", "\n", "", "else", ":", "\n", "            ", "hat_inputs", "=", "K", ".", "local_conv1d", "(", "inputs", ",", "self", ".", "kernel", ",", "[", "1", "]", ",", "[", "1", "]", ")", "\n", "\n", "", "batch_size", "=", "K", ".", "shape", "(", "inputs", ")", "[", "0", "]", "\n", "input_num_capsule", "=", "K", ".", "shape", "(", "inputs", ")", "[", "1", "]", "\n", "hat_inputs", "=", "K", ".", "reshape", "(", "hat_inputs", ",", "\n", "(", "batch_size", ",", "input_num_capsule", ",", "\n", "self", ".", "num_capsule", ",", "self", ".", "dim_capsule", ")", ")", "\n", "hat_inputs", "=", "K", ".", "permute_dimensions", "(", "hat_inputs", ",", "(", "0", ",", "2", ",", "1", ",", "3", ")", ")", "\n", "\n", "b", "=", "K", ".", "zeros_like", "(", "hat_inputs", "[", ":", ",", ":", ",", ":", ",", "0", "]", ")", "\n", "for", "i", "in", "range", "(", "self", ".", "routings", ")", ":", "\n", "            ", "c", "=", "softmax", "(", "b", ",", "1", ")", "\n", "o", "=", "self", ".", "activation", "(", "keras", ".", "backend", ".", "batch_dot", "(", "c", ",", "hat_inputs", ",", "[", "2", ",", "2", "]", ")", ")", "\n", "if", "i", "<", "self", ".", "routings", "-", "1", ":", "\n", "                ", "b", "=", "keras", ".", "backend", ".", "batch_dot", "(", "o", ",", "hat_inputs", ",", "[", "2", ",", "3", "]", ")", "\n", "if", "K", ".", "backend", "(", ")", "==", "'theano'", ":", "\n", "                    ", "o", "=", "K", ".", "sum", "(", "o", ",", "axis", "=", "1", ")", "\n", "\n", "", "", "", "return", "o", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.test_binary.Capsule.compute_output_shape": [[117, 119], ["None"], "methods", ["None"], ["", "def", "compute_output_shape", "(", "self", ",", "input_shape", ")", ":", "\n", "        ", "return", "(", "None", ",", "self", ".", "num_capsule", ",", "self", ".", "dim_capsule", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.test_binary.squash": [[21, 25], ["tensorflow.keras.backend.sum", "tensorflow.keras.backend.epsilon", "tensorflow.keras.backend.sqrt", "tensorflow.keras.backend.square"], "function", ["None"], ["def", "squash", "(", "x", ",", "axis", "=", "-", "1", ")", ":", "\n", "    ", "s_squared_norm", "=", "K", ".", "sum", "(", "K", ".", "square", "(", "x", ")", ",", "axis", ",", "keepdims", "=", "True", ")", "+", "K", ".", "epsilon", "(", ")", "\n", "scale", "=", "K", ".", "sqrt", "(", "s_squared_norm", ")", "/", "(", "1", "+", "s_squared_norm", ")", "\n", "return", "scale", "*", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.test_binary.softmax": [[27, 31], ["tensorflow.keras.backend.exp", "tensorflow.keras.backend.sum", "tensorflow.keras.backend.max"], "function", ["None"], ["", "def", "softmax", "(", "x", ",", "axis", "=", "-", "1", ")", ":", "\n", "\n", "    ", "ex", "=", "K", ".", "exp", "(", "x", "-", "K", ".", "max", "(", "x", ",", "axis", "=", "axis", ",", "keepdims", "=", "True", ")", ")", "\n", "return", "ex", "/", "K", ".", "sum", "(", "ex", ",", "axis", "=", "axis", ",", "keepdims", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.test_binary.margin_loss": [[33, 38], ["tensorflow.keras.backend.sum", "tensorflow.keras.backend.square", "tensorflow.keras.backend.square", "tensorflow.keras.backend.relu", "tensorflow.keras.backend.relu"], "function", ["None"], ["", "def", "margin_loss", "(", "y_true", ",", "y_pred", ")", ":", "\n", "\n", "    ", "lamb", ",", "margin", "=", "0.5", ",", "0.1", "\n", "return", "K", ".", "sum", "(", "(", "y_true", "*", "K", ".", "square", "(", "K", ".", "relu", "(", "1", "-", "margin", "-", "y_pred", ")", ")", "+", "lamb", "*", "(", "\n", "1", "-", "y_true", ")", "*", "K", ".", "square", "(", "K", ".", "relu", "(", "y_pred", "-", "margin", ")", ")", ")", ",", "axis", "=", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.pre-train.Capsule.__init__": [[41, 57], ["tensorflow.keras.layers.Layer.__init__", "tensorflow.keras.activations.get"], "methods", ["home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.Capsule.__init__"], ["    ", "def", "__init__", "(", "self", ",", "\n", "num_capsule", ",", "\n", "dim_capsule", ",", "\n", "routings", "=", "3", ",", "\n", "share_weights", "=", "True", ",", "\n", "activation", "=", "'squash'", ",", "\n", "**", "kwargs", ")", ":", "\n", "        ", "super", "(", "Capsule", ",", "self", ")", ".", "__init__", "(", "**", "kwargs", ")", "\n", "self", ".", "num_capsule", "=", "num_capsule", "\n", "self", ".", "dim_capsule", "=", "dim_capsule", "\n", "self", ".", "routings", "=", "routings", "\n", "self", ".", "share_weights", "=", "share_weights", "\n", "if", "activation", "==", "'squash'", ":", "\n", "            ", "self", ".", "activation", "=", "squash", "\n", "", "else", ":", "\n", "            ", "self", ".", "activation", "=", "activations", ".", "get", "(", "activation", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.pre-train.Capsule.get_config": [[58, 70], ["super().get_config().copy", "super().get_config().copy.update", "super().get_config"], "methods", ["home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.Capsule.get_config"], ["", "", "def", "get_config", "(", "self", ")", ":", "\n", "        ", "config", "=", "super", "(", ")", ".", "get_config", "(", ")", ".", "copy", "(", ")", "\n", "config", ".", "update", "(", "{", "\n", "'num_capsule'", ":", "self", ".", "num_capsule", ",", "\n", "'dim_capsule'", ":", "self", ".", "dim_capsule", ",", "\n", "'routings'", ":", "self", ".", "routings", ",", "\n", "'share_weight'", ":", "self", ".", "share_weights", ",", "\n", "\n", "\n", "\n", "}", ")", "\n", "return", "config", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.pre-train.Capsule.build": [[71, 88], ["pre-train.Capsule.add_weight", "pre-train.Capsule.add_weight"], "methods", ["None"], ["", "def", "build", "(", "self", ",", "input_shape", ")", ":", "\n", "        ", "input_dim_capsule", "=", "input_shape", "[", "-", "1", "]", "\n", "if", "self", ".", "share_weights", ":", "\n", "            ", "self", ".", "kernel", "=", "self", ".", "add_weight", "(", "\n", "name", "=", "'capsule_kernel'", ",", "\n", "shape", "=", "(", "1", ",", "input_dim_capsule", ",", "\n", "self", ".", "num_capsule", "*", "self", ".", "dim_capsule", ")", ",", "\n", "initializer", "=", "'glorot_uniform'", ",", "\n", "trainable", "=", "True", ")", "\n", "", "else", ":", "\n", "            ", "input_num_capsule", "=", "input_shape", "[", "-", "2", "]", "\n", "self", ".", "kernel", "=", "self", ".", "add_weight", "(", "\n", "name", "=", "'capsule_kernel'", ",", "\n", "shape", "=", "(", "input_num_capsule", ",", "input_dim_capsule", ",", "\n", "self", ".", "num_capsule", "*", "self", ".", "dim_capsule", ")", ",", "\n", "initializer", "=", "'glorot_uniform'", ",", "\n", "trainable", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.pre-train.Capsule.call": [[89, 114], ["tensorflow.keras.backend.reshape", "tensorflow.keras.backend.permute_dimensions", "tensorflow.keras.backend.zeros_like", "range", "tensorflow.keras.backend.conv1d", "tensorflow.keras.backend.local_conv1d", "tensorflow.keras.backend.shape", "tensorflow.keras.backend.shape", "pre-train.softmax", "pre-train.Capsule.activation", "keras.backend.batch_dot", "keras.backend.batch_dot", "tensorflow.keras.backend.backend", "tensorflow.keras.backend.sum"], "methods", ["home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.softmax"], ["", "", "def", "call", "(", "self", ",", "inputs", ")", ":", "\n", "\n", "\n", "        ", "if", "self", ".", "share_weights", ":", "\n", "            ", "hat_inputs", "=", "K", ".", "conv1d", "(", "inputs", ",", "self", ".", "kernel", ")", "\n", "", "else", ":", "\n", "            ", "hat_inputs", "=", "K", ".", "local_conv1d", "(", "inputs", ",", "self", ".", "kernel", ",", "[", "1", "]", ",", "[", "1", "]", ")", "\n", "\n", "", "batch_size", "=", "K", ".", "shape", "(", "inputs", ")", "[", "0", "]", "\n", "input_num_capsule", "=", "K", ".", "shape", "(", "inputs", ")", "[", "1", "]", "\n", "hat_inputs", "=", "K", ".", "reshape", "(", "hat_inputs", ",", "\n", "(", "batch_size", ",", "input_num_capsule", ",", "\n", "self", ".", "num_capsule", ",", "self", ".", "dim_capsule", ")", ")", "\n", "hat_inputs", "=", "K", ".", "permute_dimensions", "(", "hat_inputs", ",", "(", "0", ",", "2", ",", "1", ",", "3", ")", ")", "\n", "\n", "b", "=", "K", ".", "zeros_like", "(", "hat_inputs", "[", ":", ",", ":", ",", ":", ",", "0", "]", ")", "\n", "for", "i", "in", "range", "(", "self", ".", "routings", ")", ":", "\n", "            ", "c", "=", "softmax", "(", "b", ",", "1", ")", "\n", "o", "=", "self", ".", "activation", "(", "keras", ".", "backend", ".", "batch_dot", "(", "c", ",", "hat_inputs", ",", "[", "2", ",", "2", "]", ")", ")", "\n", "if", "i", "<", "self", ".", "routings", "-", "1", ":", "\n", "                ", "b", "=", "keras", ".", "backend", ".", "batch_dot", "(", "o", ",", "hat_inputs", ",", "[", "2", ",", "3", "]", ")", "\n", "if", "K", ".", "backend", "(", ")", "==", "'theano'", ":", "\n", "                    ", "o", "=", "K", ".", "sum", "(", "o", ",", "axis", "=", "1", ")", "\n", "\n", "", "", "", "return", "o", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.pre-train.Capsule.compute_output_shape": [[115, 117], ["None"], "methods", ["None"], ["", "def", "compute_output_shape", "(", "self", ",", "input_shape", ")", ":", "\n", "        ", "return", "(", "None", ",", "self", ".", "num_capsule", ",", "self", ".", "dim_capsule", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.pre-train.squash": [[19, 23], ["tensorflow.keras.backend.sum", "tensorflow.keras.backend.epsilon", "tensorflow.keras.backend.sqrt", "tensorflow.keras.backend.square"], "function", ["None"], ["def", "squash", "(", "x", ",", "axis", "=", "-", "1", ")", ":", "\n", "    ", "s_squared_norm", "=", "K", ".", "sum", "(", "K", ".", "square", "(", "x", ")", ",", "axis", ",", "keepdims", "=", "True", ")", "+", "K", ".", "epsilon", "(", ")", "\n", "scale", "=", "K", ".", "sqrt", "(", "s_squared_norm", ")", "/", "(", "1", "+", "s_squared_norm", ")", "\n", "return", "scale", "*", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.pre-train.softmax": [[25, 29], ["tensorflow.keras.backend.exp", "tensorflow.keras.backend.sum", "tensorflow.keras.backend.max"], "function", ["None"], ["", "def", "softmax", "(", "x", ",", "axis", "=", "-", "1", ")", ":", "\n", "\n", "    ", "ex", "=", "K", ".", "exp", "(", "x", "-", "K", ".", "max", "(", "x", ",", "axis", "=", "axis", ",", "keepdims", "=", "True", ")", ")", "\n", "return", "ex", "/", "K", ".", "sum", "(", "ex", ",", "axis", "=", "axis", ",", "keepdims", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.pre-train.margin_loss": [[31, 36], ["tensorflow.keras.backend.sum", "tensorflow.keras.backend.square", "tensorflow.keras.backend.square", "tensorflow.keras.backend.relu", "tensorflow.keras.backend.relu"], "function", ["None"], ["", "def", "margin_loss", "(", "y_true", ",", "y_pred", ")", ":", "\n", "\n", "    ", "lamb", ",", "margin", "=", "0.5", ",", "0.1", "\n", "return", "K", ".", "sum", "(", "(", "y_true", "*", "K", ".", "square", "(", "K", ".", "relu", "(", "1", "-", "margin", "-", "y_pred", ")", ")", "+", "lamb", "*", "(", "\n", "1", "-", "y_true", ")", "*", "K", ".", "square", "(", "K", ".", "relu", "(", "y_pred", "-", "margin", ")", ")", ")", ",", "axis", "=", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary.Capsule.__init__": [[44, 60], ["tensorflow.keras.layers.Layer.__init__", "tensorflow.keras.activations.get"], "methods", ["home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.Capsule.__init__"], ["    ", "def", "__init__", "(", "self", ",", "\n", "num_capsule", ",", "\n", "dim_capsule", ",", "\n", "routings", "=", "3", ",", "\n", "share_weights", "=", "True", ",", "\n", "activation", "=", "'squash'", ",", "\n", "**", "kwargs", ")", ":", "\n", "        ", "super", "(", "Capsule", ",", "self", ")", ".", "__init__", "(", "**", "kwargs", ")", "\n", "self", ".", "num_capsule", "=", "num_capsule", "\n", "self", ".", "dim_capsule", "=", "dim_capsule", "\n", "self", ".", "routings", "=", "routings", "\n", "self", ".", "share_weights", "=", "share_weights", "\n", "if", "activation", "==", "'squash'", ":", "\n", "            ", "self", ".", "activation", "=", "squash", "\n", "", "else", ":", "\n", "            ", "self", ".", "activation", "=", "activations", ".", "get", "(", "activation", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary.Capsule.get_config": [[61, 73], ["super().get_config().copy", "super().get_config().copy.update", "super().get_config"], "methods", ["home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.Capsule.get_config"], ["", "", "def", "get_config", "(", "self", ")", ":", "\n", "        ", "config", "=", "super", "(", ")", ".", "get_config", "(", ")", ".", "copy", "(", ")", "\n", "config", ".", "update", "(", "{", "\n", "'num_capsule'", ":", "self", ".", "num_capsule", ",", "\n", "'dim_capsule'", ":", "self", ".", "dim_capsule", ",", "\n", "'routings'", ":", "self", ".", "routings", ",", "\n", "'share_weight'", ":", "self", ".", "share_weights", ",", "\n", "\n", "\n", "\n", "}", ")", "\n", "return", "config", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary.Capsule.build": [[74, 91], ["binary.Capsule.add_weight", "binary.Capsule.add_weight"], "methods", ["None"], ["", "def", "build", "(", "self", ",", "input_shape", ")", ":", "\n", "        ", "input_dim_capsule", "=", "input_shape", "[", "-", "1", "]", "\n", "if", "self", ".", "share_weights", ":", "\n", "            ", "self", ".", "kernel", "=", "self", ".", "add_weight", "(", "\n", "name", "=", "'capsule_kernel'", ",", "\n", "shape", "=", "(", "1", ",", "input_dim_capsule", ",", "\n", "self", ".", "num_capsule", "*", "self", ".", "dim_capsule", ")", ",", "\n", "initializer", "=", "'glorot_uniform'", ",", "\n", "trainable", "=", "True", ")", "\n", "", "else", ":", "\n", "            ", "input_num_capsule", "=", "input_shape", "[", "-", "2", "]", "\n", "self", ".", "kernel", "=", "self", ".", "add_weight", "(", "\n", "name", "=", "'capsule_kernel'", ",", "\n", "shape", "=", "(", "input_num_capsule", ",", "input_dim_capsule", ",", "\n", "self", ".", "num_capsule", "*", "self", ".", "dim_capsule", ")", ",", "\n", "initializer", "=", "'glorot_uniform'", ",", "\n", "trainable", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary.Capsule.call": [[92, 117], ["tensorflow.keras.backend.reshape", "tensorflow.keras.backend.permute_dimensions", "tensorflow.keras.backend.zeros_like", "range", "tensorflow.keras.backend.conv1d", "tensorflow.keras.backend.local_conv1d", "tensorflow.keras.backend.shape", "tensorflow.keras.backend.shape", "binary.softmax", "binary.Capsule.activation", "keras.backend.batch_dot", "keras.backend.batch_dot", "tensorflow.keras.backend.backend", "tensorflow.keras.backend.sum"], "methods", ["home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.softmax"], ["", "", "def", "call", "(", "self", ",", "inputs", ")", ":", "\n", "\n", "\n", "        ", "if", "self", ".", "share_weights", ":", "\n", "            ", "hat_inputs", "=", "K", ".", "conv1d", "(", "inputs", ",", "self", ".", "kernel", ")", "\n", "", "else", ":", "\n", "            ", "hat_inputs", "=", "K", ".", "local_conv1d", "(", "inputs", ",", "self", ".", "kernel", ",", "[", "1", "]", ",", "[", "1", "]", ")", "\n", "\n", "", "batch_size", "=", "K", ".", "shape", "(", "inputs", ")", "[", "0", "]", "\n", "input_num_capsule", "=", "K", ".", "shape", "(", "inputs", ")", "[", "1", "]", "\n", "hat_inputs", "=", "K", ".", "reshape", "(", "hat_inputs", ",", "\n", "(", "batch_size", ",", "input_num_capsule", ",", "\n", "self", ".", "num_capsule", ",", "self", ".", "dim_capsule", ")", ")", "\n", "hat_inputs", "=", "K", ".", "permute_dimensions", "(", "hat_inputs", ",", "(", "0", ",", "2", ",", "1", ",", "3", ")", ")", "\n", "\n", "b", "=", "K", ".", "zeros_like", "(", "hat_inputs", "[", ":", ",", ":", ",", ":", ",", "0", "]", ")", "\n", "for", "i", "in", "range", "(", "self", ".", "routings", ")", ":", "\n", "            ", "c", "=", "softmax", "(", "b", ",", "1", ")", "\n", "o", "=", "self", ".", "activation", "(", "keras", ".", "backend", ".", "batch_dot", "(", "c", ",", "hat_inputs", ",", "[", "2", ",", "2", "]", ")", ")", "\n", "if", "i", "<", "self", ".", "routings", "-", "1", ":", "\n", "                ", "b", "=", "keras", ".", "backend", ".", "batch_dot", "(", "o", ",", "hat_inputs", ",", "[", "2", ",", "3", "]", ")", "\n", "if", "K", ".", "backend", "(", ")", "==", "'theano'", ":", "\n", "                    ", "o", "=", "K", ".", "sum", "(", "o", ",", "axis", "=", "1", ")", "\n", "\n", "", "", "", "return", "o", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary.Capsule.compute_output_shape": [[118, 120], ["None"], "methods", ["None"], ["", "def", "compute_output_shape", "(", "self", ",", "input_shape", ")", ":", "\n", "        ", "return", "(", "None", ",", "self", ".", "num_capsule", ",", "self", ".", "dim_capsule", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary.squash": [[22, 26], ["tensorflow.keras.backend.sum", "tensorflow.keras.backend.epsilon", "tensorflow.keras.backend.sqrt", "tensorflow.keras.backend.square"], "function", ["None"], ["def", "squash", "(", "x", ",", "axis", "=", "-", "1", ")", ":", "\n", "    ", "s_squared_norm", "=", "K", ".", "sum", "(", "K", ".", "square", "(", "x", ")", ",", "axis", ",", "keepdims", "=", "True", ")", "+", "K", ".", "epsilon", "(", ")", "\n", "scale", "=", "K", ".", "sqrt", "(", "s_squared_norm", ")", "/", "(", "1", "+", "s_squared_norm", ")", "\n", "return", "scale", "*", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary.softmax": [[28, 32], ["tensorflow.keras.backend.exp", "tensorflow.keras.backend.sum", "tensorflow.keras.backend.max"], "function", ["None"], ["", "def", "softmax", "(", "x", ",", "axis", "=", "-", "1", ")", ":", "\n", "\n", "    ", "ex", "=", "K", ".", "exp", "(", "x", "-", "K", ".", "max", "(", "x", ",", "axis", "=", "axis", ",", "keepdims", "=", "True", ")", ")", "\n", "return", "ex", "/", "K", ".", "sum", "(", "ex", ",", "axis", "=", "axis", ",", "keepdims", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary.margin_loss": [[34, 39], ["tensorflow.keras.backend.sum", "tensorflow.keras.backend.square", "tensorflow.keras.backend.square", "tensorflow.keras.backend.relu", "tensorflow.keras.backend.relu"], "function", ["None"], ["", "def", "margin_loss", "(", "y_true", ",", "y_pred", ")", ":", "\n", "\n", "    ", "lamb", ",", "margin", "=", "0.5", ",", "0.1", "\n", "return", "K", ".", "sum", "(", "(", "y_true", "*", "K", ".", "square", "(", "K", ".", "relu", "(", "1", "-", "margin", "-", "y_pred", ")", ")", "+", "lamb", "*", "(", "\n", "1", "-", "y_true", ")", "*", "K", ".", "square", "(", "K", ".", "relu", "(", "y_pred", "-", "margin", ")", ")", ")", ",", "axis", "=", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.xray14_preprocess.replaceMultiple": [[14, 23], ["mainString.replace.replace"], "function", ["None"], ["def", "replaceMultiple", "(", "mainString", ",", "toBeReplaces", ",", "newString", ")", ":", "#replacement of multiple characters to use in the createPostName function", "\n", "# Iterate over the strings to be replaced", "\n", "    ", "for", "elem", "in", "toBeReplaces", ":", "\n", "# Check if string is in the main string", "\n", "        ", "if", "elem", "in", "mainString", ":", "\n", "# Replace the string", "\n", "            ", "mainString", "=", "mainString", ".", "replace", "(", "elem", ",", "newString", ")", "\n", "\n", "", "", "return", "mainString", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.xray14_preprocess.preprocess_data": [[25, 52], ["os.makedirs", "[].str.split", "[].str.split", "[].str.split", "[].str.split.apply().to_numpy", "[].str.split.apply().to_numpy", "[].str.split.apply().to_numpy", "numpy.hstack", "img_path.replace", "xray14_preprocess.replaceMultiple", "matplotlib.imread", "skimage.transform.resize", "matplotlib.imsave", "[].str.split.apply", "[].str.split.apply", "[].str.split.apply", "print", "len", "len", "len", "max", "len", "pandas.read_csv", "pandas.read_csv", "pandas.read_csv", "int", "len"], "function", ["home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.xray14_preprocess.replaceMultiple"], ["", "def", "preprocess_data", "(", "n_to_process", "=", "-", "1", ",", "img_shape", "=", "(", "224", ",", "224", ")", ")", ":", "\n", "\n", "\t", "os", ".", "makedirs", "(", "f'./database_preprocessed/'", ",", "exist_ok", "=", "True", ")", "\n", "\n", "train_data", "=", "pd", ".", "read_csv", "(", "r'./dataset//train_1.txt'", ",", "header", "=", "None", ",", "index_col", "=", "None", ")", "[", "0", "]", ".", "str", ".", "split", "(", "' '", ",", "1", ")", "\n", "val_data", "=", "pd", ".", "read_csv", "(", "r'./dataset/val_1.txt'", ",", "header", "=", "None", ",", "index_col", "=", "None", ")", "[", "0", "]", ".", "str", ".", "split", "(", "' '", ",", "1", ")", "\n", "test_data", "=", "pd", ".", "read_csv", "(", "r'./dataset/test_1.txt'", ",", "header", "=", "None", ",", "index_col", "=", "None", ")", "[", "0", "]", ".", "str", ".", "split", "(", "' '", ",", "1", ")", "\n", "\n", "# number of samples to process", "\n", "train_data", "=", "train_data", "if", "(", "n_to_process", "==", "-", "1", "or", "n_to_process", ">", "len", "(", "train_data", ")", ")", "else", "train_data", "[", ":", "n_to_process", "]", "\n", "val_data", "=", "val_data", "if", "(", "n_to_process", "==", "-", "1", "or", "n_to_process", ">", "len", "(", "val_data", ")", ")", "else", "val_data", "[", ":", "n_to_process", "]", "\n", "test_data", "=", "test_data", "if", "(", "n_to_process", "==", "-", "1", "or", "n_to_process", ">", "len", "(", "test_data", ")", ")", "else", "test_data", "[", ":", "n_to_process", "]", "\n", "\n", "\n", "train_paths", "=", "train_data", ".", "apply", "(", "lambda", "x", ":", "r'./database/'", "+", "x", "[", "0", "]", ")", ".", "to_numpy", "(", ")", "\n", "val_paths", "=", "val_data", ".", "apply", "(", "lambda", "x", ":", "r'./database/'", "+", "x", "[", "0", "]", ")", ".", "to_numpy", "(", ")", "\n", "test_paths", "=", "test_data", ".", "apply", "(", "lambda", "x", ":", "r'./database/'", "+", "x", "[", "0", "]", ")", ".", "to_numpy", "(", ")", "\n", "all_paths", "=", "np", ".", "hstack", "(", "(", "train_paths", ",", "val_paths", ",", "test_paths", ")", ")", "\n", "\n", "i", "=", "0", "\n", "for", "img_path", "in", "all_paths", ":", "\n", "\t\t", "i", "+=", "1", "\n", "if", "i", "%", "max", "(", "1", ",", "int", "(", "len", "(", "all_paths", ")", "/", "1000", ")", ")", "==", "0", ":", "print", "(", "i", ",", "'/'", ",", "len", "(", "all_paths", ")", ")", "\n", "new_path", "=", "img_path", ".", "replace", "(", "'database'", ",", "'database_preprocessed'", ")", ";", "new_path", "=", "replaceMultiple", "(", "new_path", ",", "[", "'images_001/'", ",", "'images_002/'", ",", "'images_003/'", ",", "'images_004/'", ",", "'images_005/'", ",", "'images_006/'", ",", "'images_007/'", ",", "'images_008/'", ",", "'images_009/'", ",", "'images_010/'", ",", "'images_011/'", ",", "'images_012/'", "]", ",", "''", ")", "\n", "img", "=", "plt", ".", "imread", "(", "img_path", ")", "\n", "img", "=", "transform", ".", "resize", "(", "img", ",", "img_shape", ",", "anti_aliasing", "=", "True", ")", "\n", "plt", ".", "imsave", "(", "fname", "=", "new_path", ",", "arr", "=", "img", ",", "cmap", "=", "'gray'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.Capsule.__init__": [[44, 60], ["tensorflow.keras.layers.Layer.__init__", "tensorflow.keras.activations.get"], "methods", ["home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.Capsule.__init__"], ["    ", "def", "__init__", "(", "self", ",", "\n", "num_capsule", ",", "\n", "dim_capsule", ",", "\n", "routings", "=", "3", ",", "\n", "share_weights", "=", "True", ",", "\n", "activation", "=", "'squash'", ",", "\n", "**", "kwargs", ")", ":", "\n", "        ", "super", "(", "Capsule", ",", "self", ")", ".", "__init__", "(", "**", "kwargs", ")", "\n", "self", ".", "num_capsule", "=", "num_capsule", "\n", "self", ".", "dim_capsule", "=", "dim_capsule", "\n", "self", ".", "routings", "=", "routings", "\n", "self", ".", "share_weights", "=", "share_weights", "\n", "if", "activation", "==", "'squash'", ":", "\n", "            ", "self", ".", "activation", "=", "squash", "\n", "", "else", ":", "\n", "            ", "self", ".", "activation", "=", "activations", ".", "get", "(", "activation", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.Capsule.get_config": [[61, 73], ["super().get_config().copy", "super().get_config().copy.update", "super().get_config"], "methods", ["home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.Capsule.get_config"], ["", "", "def", "get_config", "(", "self", ")", ":", "\n", "        ", "config", "=", "super", "(", ")", ".", "get_config", "(", ")", ".", "copy", "(", ")", "\n", "config", ".", "update", "(", "{", "\n", "'num_capsule'", ":", "self", ".", "num_capsule", ",", "\n", "'dim_capsule'", ":", "self", ".", "dim_capsule", ",", "\n", "'routings'", ":", "self", ".", "routings", ",", "\n", "'share_weight'", ":", "self", ".", "share_weights", ",", "\n", "\n", "\n", "\n", "}", ")", "\n", "return", "config", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.Capsule.build": [[74, 91], ["binary_after.Capsule.add_weight", "binary_after.Capsule.add_weight"], "methods", ["None"], ["", "def", "build", "(", "self", ",", "input_shape", ")", ":", "\n", "        ", "input_dim_capsule", "=", "input_shape", "[", "-", "1", "]", "\n", "if", "self", ".", "share_weights", ":", "\n", "            ", "self", ".", "kernel", "=", "self", ".", "add_weight", "(", "\n", "name", "=", "'capsule_kernel'", ",", "\n", "shape", "=", "(", "1", ",", "input_dim_capsule", ",", "\n", "self", ".", "num_capsule", "*", "self", ".", "dim_capsule", ")", ",", "\n", "initializer", "=", "'glorot_uniform'", ",", "\n", "trainable", "=", "True", ")", "\n", "", "else", ":", "\n", "            ", "input_num_capsule", "=", "input_shape", "[", "-", "2", "]", "\n", "self", ".", "kernel", "=", "self", ".", "add_weight", "(", "\n", "name", "=", "'capsule_kernel'", ",", "\n", "shape", "=", "(", "input_num_capsule", ",", "input_dim_capsule", ",", "\n", "self", ".", "num_capsule", "*", "self", ".", "dim_capsule", ")", ",", "\n", "initializer", "=", "'glorot_uniform'", ",", "\n", "trainable", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.Capsule.call": [[92, 117], ["tensorflow.keras.backend.reshape", "tensorflow.keras.backend.permute_dimensions", "tensorflow.keras.backend.zeros_like", "range", "tensorflow.keras.backend.conv1d", "tensorflow.keras.backend.local_conv1d", "tensorflow.keras.backend.shape", "tensorflow.keras.backend.shape", "binary_after.softmax", "binary_after.Capsule.activation", "keras.backend.batch_dot", "keras.backend.batch_dot", "tensorflow.keras.backend.backend", "tensorflow.keras.backend.sum"], "methods", ["home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.softmax"], ["", "", "def", "call", "(", "self", ",", "inputs", ")", ":", "\n", "\n", "\n", "        ", "if", "self", ".", "share_weights", ":", "\n", "            ", "hat_inputs", "=", "K", ".", "conv1d", "(", "inputs", ",", "self", ".", "kernel", ")", "\n", "", "else", ":", "\n", "            ", "hat_inputs", "=", "K", ".", "local_conv1d", "(", "inputs", ",", "self", ".", "kernel", ",", "[", "1", "]", ",", "[", "1", "]", ")", "\n", "\n", "", "batch_size", "=", "K", ".", "shape", "(", "inputs", ")", "[", "0", "]", "\n", "input_num_capsule", "=", "K", ".", "shape", "(", "inputs", ")", "[", "1", "]", "\n", "hat_inputs", "=", "K", ".", "reshape", "(", "hat_inputs", ",", "\n", "(", "batch_size", ",", "input_num_capsule", ",", "\n", "self", ".", "num_capsule", ",", "self", ".", "dim_capsule", ")", ")", "\n", "hat_inputs", "=", "K", ".", "permute_dimensions", "(", "hat_inputs", ",", "(", "0", ",", "2", ",", "1", ",", "3", ")", ")", "\n", "\n", "b", "=", "K", ".", "zeros_like", "(", "hat_inputs", "[", ":", ",", ":", ",", ":", ",", "0", "]", ")", "\n", "for", "i", "in", "range", "(", "self", ".", "routings", ")", ":", "\n", "            ", "c", "=", "softmax", "(", "b", ",", "1", ")", "\n", "o", "=", "self", ".", "activation", "(", "keras", ".", "backend", ".", "batch_dot", "(", "c", ",", "hat_inputs", ",", "[", "2", ",", "2", "]", ")", ")", "\n", "if", "i", "<", "self", ".", "routings", "-", "1", ":", "\n", "                ", "b", "=", "keras", ".", "backend", ".", "batch_dot", "(", "o", ",", "hat_inputs", ",", "[", "2", ",", "3", "]", ")", "\n", "if", "K", ".", "backend", "(", ")", "==", "'theano'", ":", "\n", "                    ", "o", "=", "K", ".", "sum", "(", "o", ",", "axis", "=", "1", ")", "\n", "\n", "", "", "", "return", "o", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.Capsule.compute_output_shape": [[118, 120], ["None"], "methods", ["None"], ["", "def", "compute_output_shape", "(", "self", ",", "input_shape", ")", ":", "\n", "        ", "return", "(", "None", ",", "self", ".", "num_capsule", ",", "self", ".", "dim_capsule", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.squash": [[22, 26], ["tensorflow.keras.backend.sum", "tensorflow.keras.backend.epsilon", "tensorflow.keras.backend.sqrt", "tensorflow.keras.backend.square"], "function", ["None"], ["def", "squash", "(", "x", ",", "axis", "=", "-", "1", ")", ":", "\n", "    ", "s_squared_norm", "=", "K", ".", "sum", "(", "K", ".", "square", "(", "x", ")", ",", "axis", ",", "keepdims", "=", "True", ")", "+", "K", ".", "epsilon", "(", ")", "\n", "scale", "=", "K", ".", "sqrt", "(", "s_squared_norm", ")", "/", "(", "1", "+", "s_squared_norm", ")", "\n", "return", "scale", "*", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.softmax": [[28, 32], ["tensorflow.keras.backend.exp", "tensorflow.keras.backend.sum", "tensorflow.keras.backend.max"], "function", ["None"], ["", "def", "softmax", "(", "x", ",", "axis", "=", "-", "1", ")", ":", "\n", "\n", "    ", "ex", "=", "K", ".", "exp", "(", "x", "-", "K", ".", "max", "(", "x", ",", "axis", "=", "axis", ",", "keepdims", "=", "True", ")", ")", "\n", "return", "ex", "/", "K", ".", "sum", "(", "ex", ",", "axis", "=", "axis", ",", "keepdims", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.ShahinSHH_COVID-CAPS.None.binary_after.margin_loss": [[34, 39], ["tensorflow.keras.backend.sum", "tensorflow.keras.backend.square", "tensorflow.keras.backend.square", "tensorflow.keras.backend.relu", "tensorflow.keras.backend.relu"], "function", ["None"], ["", "def", "margin_loss", "(", "y_true", ",", "y_pred", ")", ":", "\n", "\n", "    ", "lamb", ",", "margin", "=", "0.5", ",", "0.1", "\n", "return", "K", ".", "sum", "(", "(", "y_true", "*", "K", ".", "square", "(", "K", ".", "relu", "(", "1", "-", "margin", "-", "y_pred", ")", ")", "+", "lamb", "*", "(", "\n", "1", "-", "y_true", ")", "*", "K", ".", "square", "(", "K", ".", "relu", "(", "y_pred", "-", "margin", ")", ")", ")", ",", "axis", "=", "-", "1", ")", "\n", "\n"]]}