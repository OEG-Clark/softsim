{"home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.None.MinMaxRegression._getAplus": [[9, 19], ["scipy.linalg.eig", "numpy.real", "numpy.real", "numpy.matrix", "numpy.matrix", "numpy.diag", "numpy.maximum"], "function", ["None"], ["def", "_getAplus", "(", "A", ")", ":", "\n", "    ", "eigval", ",", "eigvec", "=", "scipy", ".", "linalg", ".", "eig", "(", "A", ")", "\n", "\n", "eigval", "=", "np", ".", "real", "(", "eigval", ")", "\n", "eigvec", "=", "np", ".", "real", "(", "eigvec", ")", "\n", "\n", "Q", "=", "np", ".", "matrix", "(", "eigvec", ")", "\n", "xdiag", "=", "np", ".", "matrix", "(", "np", ".", "diag", "(", "np", ".", "maximum", "(", "eigval", ",", "0", ")", ")", ")", "\n", "\n", "return", "Q", "*", "xdiag", "*", "Q", ".", "T", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.None.MinMaxRegression.get_test_index": [[21, 25], ["int", "test_data[].notnull", "test_data[].isnull"], "function", ["None"], ["", "def", "get_test_index", "(", "df", ",", "test_size", "=", "0.10", ")", ":", "\n", "    ", "train_data", "=", "df", ".", "iloc", "[", ":", "int", "(", "(", "1", "-", "test_size", ")", "*", "df", ".", "shape", "[", "0", "]", ")", "]", "\n", "test_data", "=", "df", ".", "iloc", "[", "train_data", ".", "shape", "[", "0", "]", ":", "]", "\n", "return", "train_data", ".", "index", ",", "test_data", "[", "test_data", "[", "\"Y\"", "]", ".", "notnull", "(", ")", "]", ".", "index", ",", "test_data", "[", "test_data", "[", "\"Y\"", "]", ".", "isnull", "(", ")", "]", ".", "index", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.None.MinMaxRegression.get_test_index2": [[27, 31], ["int"], "function", ["None"], ["", "def", "get_test_index2", "(", "df", ",", "test_size", "=", "0.10", ")", ":", "\n", "    ", "train_data", "=", "df", ".", "iloc", "[", ":", "int", "(", "(", "1", "-", "test_size", ")", "*", "df", ".", "shape", "[", "0", "]", ")", "]", "\n", "test_data", "=", "df", ".", "iloc", "[", "train_data", ".", "shape", "[", "0", "]", ":", "]", "\n", "return", "train_data", ",", "test_data", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.None.Regression.get_test_index": [[6, 10], ["int", "test_data[].notnull", "test_data[].isnull"], "function", ["None"], ["def", "get_test_index", "(", "df", ",", "test_size", "=", "0.15", ")", ":", "\n", "    ", "train_data", "=", "df", ".", "iloc", "[", ":", "int", "(", "(", "1", "-", "test_size", ")", "*", "df", ".", "shape", "[", "0", "]", ")", "]", "\n", "test_data", "=", "df", ".", "iloc", "[", "train_data", ".", "shape", "[", "0", "]", ":", "]", "\n", "return", "train_data", ".", "index", ",", "test_data", "[", "test_data", "[", "\"Y\"", "]", ".", "notnull", "(", ")", "]", ".", "index", ",", "test_data", "[", "test_data", "[", "\"Y\"", "]", ".", "isnull", "(", ")", "]", ".", "index", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.None.Regression.get_test_index2": [[12, 16], ["int"], "function", ["None"], ["", "def", "get_test_index2", "(", "df", ",", "test_size", "=", "0.10", ")", ":", "\n", "    ", "train_data", "=", "df", ".", "iloc", "[", ":", "int", "(", "(", "1", "-", "test_size", ")", "*", "df", ".", "shape", "[", "0", "]", ")", "]", "\n", "test_data", "=", "df", ".", "iloc", "[", "train_data", ".", "shape", "[", "0", "]", ":", "]", "\n", "return", "train_data", ",", "test_data", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.None.strong3.new_alpha_val": [[10, 17], ["numpy.zeros", "range"], "function", ["None"], ["def", "new_alpha_val", "(", "old_alpha", ",", "k", ")", ":", "\n", "    ", "new_alpha", "=", "np", ".", "zeros", "(", "old_alpha", ".", "shape", ")", "\n", "for", "ind", "in", "range", "(", "alpha_num", ")", ":", "\n", "        ", "old_ind", "=", "(", "k", "-", "ind", ")", "%", "alpha_num", "\n", "new_alpha", "[", "ind", "]", "[", "0", "]", "=", "old_alpha", "[", "old_ind", "]", "[", "0", "]", "\n", "\n", "", "return", "new_alpha", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.None.EstimatingConfidenceIntervals.get_test_index": [[7, 11], ["int", "test_data[].notnull", "test_data[].isnull"], "function", ["None"], ["def", "get_test_index", "(", "df", ",", "test_size", "=", "0.10", ")", ":", "\n", "    ", "train_data", "=", "df", ".", "iloc", "[", ":", "int", "(", "(", "1", "-", "test_size", ")", "*", "df", ".", "shape", "[", "0", "]", ")", "]", "\n", "test_data", "=", "df", ".", "iloc", "[", "train_data", ".", "shape", "[", "0", "]", ":", "]", "\n", "return", "train_data", ".", "index", ",", "test_data", "[", "test_data", "[", "\"Y\"", "]", ".", "notnull", "(", ")", "]", ".", "index", ",", "test_data", "[", "test_data", "[", "\"Y\"", "]", ".", "isnull", "(", ")", "]", ".", "index", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.None.EstimatingConfidenceIntervals.get_test_index2": [[13, 17], ["int"], "function", ["None"], ["", "def", "get_test_index2", "(", "df", ",", "test_size", "=", "0.10", ")", ":", "\n", "    ", "train_data", "=", "df", ".", "iloc", "[", ":", "int", "(", "(", "1", "-", "test_size", ")", "*", "df", ".", "shape", "[", "0", "]", ")", "]", "\n", "test_data", "=", "df", ".", "iloc", "[", "train_data", ".", "shape", "[", "0", "]", ":", "]", "\n", "return", "train_data", ",", "test_data", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.RIFLE.RobustImputer.RobustImputer.__init__": [[9, 19], ["None"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "self", ".", "interval_length_constant", "=", "1", "\n", "self", ".", "bootstrap_proportion", "=", "1", "\n", "self", ".", "number_of_bootstrap_estimations", "=", "30", "\n", "self", ".", "with_replacement", "=", "True", "\n", "self", ".", "validation_data_proportion", "=", "0.1", "\n", "self", ".", "data", "=", "None", "\n", "self", ".", "transformed_data", "=", "None", "\n", "self", ".", "confidence_matrix", "=", "None", "\n", "self", ".", "imputed_data", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.RIFLE.RobustImputer.RobustImputer.read_and_scale": [[20, 28], ["pandas.read_csv", "sklearn.preprocessing.StandardScaler", "sklearn.preprocessing.StandardScaler.fit", "sklearn.preprocessing.StandardScaler.transform", "pandas.DataFrame"], "methods", ["None"], ["", "def", "read_and_scale", "(", "self", ",", "filename", ")", ":", "\n", "        ", "self", ".", "data", "=", "pd", ".", "read_csv", "(", "filename", ")", "\n", "\n", "sc", "=", "StandardScaler", "(", ")", "\n", "sc", ".", "fit", "(", "self", ".", "data", ")", "\n", "\n", "transformed", "=", "sc", ".", "transform", "(", "self", ".", "data", ")", "\n", "self", ".", "transformed_data", "=", "pd", ".", "DataFrame", "(", "transformed", ",", "columns", "=", "self", ".", "data", ".", "columns", ",", "index", "=", "self", ".", "data", ".", "index", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.RIFLE.RobustImputer.RobustImputer.scale_data": [[29, 36], ["sklearn.preprocessing.StandardScaler", "sklearn.preprocessing.StandardScaler.fit", "sklearn.preprocessing.StandardScaler.transform", "pandas.DataFrame"], "methods", ["None"], ["", "def", "scale_data", "(", "self", ",", "data", ")", ":", "\n", "        ", "self", ".", "data", "=", "data", "\n", "sc", "=", "StandardScaler", "(", ")", "\n", "sc", ".", "fit", "(", "self", ".", "data", ")", "\n", "\n", "transformed", "=", "sc", ".", "transform", "(", "self", ".", "data", ")", "\n", "self", ".", "transformed_data", "=", "pd", ".", "DataFrame", "(", "transformed", ",", "columns", "=", "data", ".", "columns", ",", "index", "=", "data", ".", "index", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.RIFLE.RobustImputer.RobustImputer.estimate_confidence_intervals": [[37, 78], ["numpy.zeros", "range", "range", "range", "range", "len", "int", "range", "numpy.std", "columns.max", "numpy.array", "estimation_array.append", "columns[].notnull().all", "intersections.sample", "numpy.inner", "columns[].notnull"], "methods", ["None"], ["", "def", "estimate_confidence_intervals", "(", "self", ")", ":", "\n", "\n", "        ", "data", "=", "self", ".", "transformed_data", "\n", "dimension", "=", "data", ".", "shape", "[", "1", "]", "\n", "confidence_matrix", "=", "np", ".", "zeros", "(", "shape", "=", "(", "dimension", ",", "dimension", ")", ")", "\n", "\n", "cols", "=", "data", ".", "columns", "\n", "\n", "for", "i", "in", "range", "(", "dimension", ")", ":", "\n", "            ", "for", "j", "in", "range", "(", "i", ",", "dimension", ")", ":", "\n", "                ", "feature_i", "=", "cols", "[", "i", "]", "\n", "feature_j", "=", "cols", "[", "j", "]", "\n", "columns", "=", "data", "[", "[", "feature_i", ",", "feature_j", "]", "]", "\n", "intersections", "=", "columns", "[", "columns", "[", "[", "feature_i", ",", "feature_j", "]", "]", ".", "notnull", "(", ")", ".", "all", "(", "axis", "=", "1", ")", "]", "\n", "\n", "intersection_num", "=", "len", "(", "intersections", ")", "\n", "\n", "sample_size", "=", "int", "(", "intersection_num", "*", "self", ".", "bootstrap_proportion", ")", "\n", "\n", "if", "sample_size", "<", "2", ":", "\n", "                    ", "max_vals", "=", "columns", ".", "max", "(", ")", "\n", "max1", "=", "max_vals", "[", "feature_i", "]", "\n", "max2", "=", "max_vals", "[", "feature_j", "]", "\n", "confidence_matrix", "[", "i", "]", "[", "j", "]", "=", "max1", "*", "max2", "\n", "continue", "\n", "\n", "", "estimation_array", "=", "[", "]", "\n", "for", "ind", "in", "range", "(", "self", ".", "number_of_bootstrap_estimations", ")", ":", "\n", "                    ", "current_sample", "=", "np", ".", "array", "(", "intersections", ".", "sample", "(", "n", "=", "sample_size", ",", "replace", "=", "self", ".", "with_replacement", ")", ")", "\n", "f1", "=", "current_sample", "[", ":", ",", "0", "]", "\n", "f2", "=", "current_sample", "[", ":", ",", "1", "]", "\n", "inner_prod", "=", "np", ".", "inner", "(", "f1", ",", "f2", ")", "/", "sample_size", "\n", "estimation_array", ".", "append", "(", "inner_prod", ")", "\n", "\n", "", "confidence_matrix", "[", "i", "]", "[", "j", "]", "=", "np", ".", "std", "(", "estimation_array", ")", "\n", "\n", "", "", "for", "j", "in", "range", "(", "dimension", ")", ":", "\n", "            ", "for", "i", "in", "range", "(", "j", "+", "1", ",", "dimension", ")", ":", "\n", "                ", "confidence_matrix", "[", "i", "]", "[", "j", "]", "=", "confidence_matrix", "[", "j", "]", "[", "i", "]", "\n", "\n", "", "", "self", ".", "confidence_matrix", "=", "confidence_matrix", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.RIFLE.RobustImputer.RobustImputer.impute_data": [[79, 212], ["data.drop", "data[].to_numpy", "int", "numpy.delete", "numpy.delete", "numpy.delete", "numpy.nan_to_num.isna", "mask_X.to_numpy.to_numpy.to_numpy", "numpy.nan_to_num.isna", "mask_Y_test.to_numpy.to_numpy.to_numpy", "numpy.dot", "numpy.dot", "numpy.where", "numpy.where", "numpy.nan_to_num.to_numpy", "numpy.nan_to_num", "numpy.nan_to_num.to_numpy", "numpy.nan_to_num", "range", "numpy.nonzero", "numpy.ones", "numpy.ones", "numpy.dot", "numpy.dot", "len", "list", "list", "numpy.nan_to_num", "numpy.identity", "numpy.dot", "range", "numpy.dot", "predicts.append", "numpy.isnan", "predicts.append", "numpy.nonzero", "numpy.sum", "numpy.argwhere", "numpy.reshape", "len", "numpy.dot", "numpy.dot", "math.sqrt", "numpy.linalg.inv", "numpy.clip", "numpy.clip", "numpy.dot", "numpy.ones", "numpy.isnan", "numpy.ones", "set", "set", "numpy.linalg.inv", "numpy.dot", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.identity"], "methods", ["None"], ["", "def", "impute_data", "(", "self", ",", "column_index", ")", ":", "\n", "        ", "data", "=", "self", ".", "transformed_data", "\n", "confidence_intervals", "=", "self", ".", "confidence_matrix", "\n", "\n", "data_columns", "=", "data", ".", "columns", "\n", "\n", "y_column", "=", "data_columns", "[", "column_index", "]", "\n", "X", "=", "data", ".", "drop", "(", "[", "y_column", "]", ",", "axis", "=", "1", ")", "\n", "Y", "=", "data", "[", "[", "y_column", "]", "]", "\n", "\n", "y_list", "=", "data", "[", "y_column", "]", ".", "to_numpy", "(", ")", "\n", "Y_not_nan", "=", "np", ".", "nonzero", "(", "np", ".", "ones", "(", "y_list", ".", "shape", ")", "-", "np", ".", "isnan", "(", "y_list", ")", ")", "[", "0", "]", "\n", "\n", "data_points", "=", "data", ".", "shape", "[", "0", "]", "\n", "validation_threshold", "=", "int", "(", "self", ".", "validation_data_proportion", "*", "data", ".", "shape", "[", "1", "]", ")", "\n", "\n", "currentDelta", "=", "np", ".", "delete", "(", "confidence_intervals", ",", "column_index", ",", "0", ")", "\n", "currentDelta", "=", "np", ".", "delete", "(", "currentDelta", ",", "column_index", ",", "1", ")", "\n", "\n", "delta", "=", "confidence_intervals", "[", "column_index", "]", "\n", "delta", "=", "np", ".", "delete", "(", "delta", ",", "column_index", ",", "0", ")", "\n", "delta", "=", "delta", "[", ":", ",", "np", ".", "newaxis", "]", "\n", "\n", "mask_X", "=", "X", ".", "isna", "(", ")", "\n", "mask_X", "=", "mask_X", ".", "to_numpy", "(", ")", "\n", "mask_X", "=", "np", ".", "ones", "(", "shape", "=", "mask_X", ".", "shape", ")", "-", "mask_X", "\n", "\n", "mask_Y_test", "=", "Y", ".", "isna", "(", ")", "\n", "mask_Y_test", "=", "mask_Y_test", ".", "to_numpy", "(", ")", "\n", "mask_Y", "=", "np", ".", "ones", "(", "shape", "=", "mask_Y_test", ".", "shape", ")", "-", "mask_Y_test", "\n", "\n", "mask_gram", "=", "np", ".", "dot", "(", "mask_X", ".", "T", ",", "mask_X", ")", "\n", "cov_gram", "=", "np", ".", "dot", "(", "mask_X", ".", "T", ",", "mask_Y", ")", "\n", "\n", "mask_gram", "=", "np", ".", "where", "(", "mask_gram", "==", "0", ",", "1", ",", "mask_gram", ")", "\n", "cov_gram", "=", "np", ".", "where", "(", "cov_gram", "==", "0", ",", "1", ",", "cov_gram", ")", "\n", "\n", "X", "=", "X", ".", "to_numpy", "(", ")", "\n", "X", "=", "np", ".", "nan_to_num", "(", "X", ")", "\n", "\n", "Y", "=", "Y", ".", "to_numpy", "(", ")", "\n", "Y", "=", "np", ".", "nan_to_num", "(", "Y", ")", "\n", "\n", "C", "=", "np", ".", "dot", "(", "X", ".", "T", ",", "X", ")", "/", "mask_gram", "\n", "b", "=", "np", ".", "dot", "(", "X", ".", "T", ",", "Y", ")", "/", "cov_gram", "\n", "\n", "C_min", "=", "C", "-", "self", ".", "interval_length_constant", "*", "currentDelta", "\n", "C_max", "=", "C", "+", "self", ".", "interval_length_constant", "*", "currentDelta", "\n", "\n", "b_min", "=", "b", "-", "self", ".", "interval_length_constant", "*", "delta", "\n", "b_max", "=", "b", "+", "self", ".", "interval_length_constant", "*", "delta", "\n", "\n", "predicts", "=", "[", "]", "\n", "\n", "for", "i", "in", "range", "(", "len", "(", "mask_X", ")", ")", ":", "\n", "\n", "            ", "if", "not", "np", ".", "isnan", "(", "data", "[", "[", "y_column", "]", "]", ".", "loc", "[", "i", "]", "[", "0", "]", ")", ":", "\n", "                ", "predicts", ".", "append", "(", "data", "[", "[", "y_column", "]", "]", ".", "loc", "[", "i", "]", "[", "0", "]", ")", "\n", "continue", "\n", "\n", "", "row_i", "=", "mask_X", "[", "i", "]", "\n", "nonzeros", "=", "np", ".", "nonzero", "(", "row_i", ")", "[", "0", "]", "\n", "nonzeros", "=", "list", "(", "nonzeros", ")", "\n", "\n", "currentMask", "=", "mask_X", "[", ":", ",", "nonzeros", "]", "\n", "number_of_non_zeros", "=", "currentMask", ".", "shape", "[", "1", "]", "*", "np", ".", "ones", "(", "currentMask", ".", "shape", "[", "0", "]", ")", "-", "np", ".", "sum", "(", "currentMask", ",", "axis", "=", "1", ")", "\n", "\n", "size", "=", "0", "\n", "counter", "=", "0", "\n", "indices", "=", "None", "\n", "while", "size", "<", "data_points", "//", "10", ":", "\n", "                ", "indices", "=", "np", ".", "argwhere", "(", "number_of_non_zeros", "<", "validation_threshold", "+", "counter", ")", "\n", "indices", "=", "np", ".", "reshape", "(", "indices", ",", "(", "indices", ".", "shape", "[", "0", "]", ",", ")", ")", "\n", "size", "=", "len", "(", "indices", ")", "\n", "counter", "+=", "1", "\n", "\n", "", "validation_indices", "=", "list", "(", "set", "(", "indices", ")", "&", "set", "(", "Y_not_nan", ")", ")", "\n", "\n", "currentC", "=", "C", "[", "nonzeros", ",", ":", "]", "\n", "currentC", "=", "currentC", "[", ":", ",", "nonzeros", "]", "\n", "\n", "currentB", "=", "b", "[", "nonzeros", ",", ":", "]", "\n", "lam_list", "=", "[", "0.1", ",", "0.2", ",", "0.3", ",", "0.4", ",", "0.5", ",", "0.8", ",", "1", ",", "1.5", ",", "2", ",", "3", ",", "4", ",", "5", ",", "6", ",", "7", ",", "8", ",", "9", ",", "10", ",", "20", ",", "50", ",", "100", "]", "\n", "\n", "# Optimizing CurrentC and currentB", "\n", "X_validation", "=", "X", "[", "validation_indices", ",", ":", "]", "\n", "X_validation", "=", "X_validation", "[", ":", ",", "nonzeros", "]", "\n", "X_validation", "=", "np", ".", "nan_to_num", "(", "X_validation", ")", "\n", "Y_validation", "=", "Y", "[", "validation_indices", ",", ":", "]", "\n", "\n", "best_lam", "=", "1", "\n", "best_rmse", "=", "1000000", "\n", "for", "lam", "in", "lam_list", ":", "\n", "                ", "theta", "=", "np", ".", "dot", "(", "np", ".", "linalg", ".", "inv", "(", "currentC", "+", "lam", "*", "np", ".", "identity", "(", "currentC", ".", "shape", "[", "0", "]", ")", ")", ",", "currentB", ")", "\n", "Y_predicted", "=", "np", ".", "dot", "(", "X_validation", ",", "theta", ")", "\n", "mse", "=", "np", ".", "linalg", ".", "norm", "(", "Y_validation", "-", "Y_predicted", ")", "**", "2", "/", "Y_validation", ".", "shape", "[", "0", "]", "\n", "rmse", "=", "sqrt", "(", "mse", ")", "\n", "if", "rmse", "<", "best_rmse", ":", "\n", "                    ", "best_rmse", "=", "rmse", "\n", "best_lam", "=", "lam", "\n", "\n", "", "", "data_i", "=", "X", "[", "i", "]", "\n", "data_i", "=", "data_i", "[", ":", ",", "np", ".", "newaxis", "]", "\n", "data_i", "=", "data_i", "[", "nonzeros", ",", ":", "]", "\n", "\n", "step_size", "=", "best_lam", "/", "100", "\n", "number_of_iterations", "=", "2000", "\n", "\n", "currentCmin", "=", "C_min", "[", "nonzeros", ",", ":", "]", "\n", "currentCmin", "=", "currentCmin", "[", ":", ",", "nonzeros", "]", "\n", "\n", "currentCmax", "=", "C_max", "[", "nonzeros", ",", ":", "]", "\n", "currentCmax", "=", "currentCmax", "[", ":", ",", "nonzeros", "]", "\n", "\n", "currentBmin", "=", "b_min", "[", "nonzeros", ",", ":", "]", "\n", "currentBmax", "=", "b_max", "[", "nonzeros", ",", ":", "]", "\n", "ident", "=", "np", ".", "identity", "(", "currentCmax", ".", "shape", "[", "0", "]", ")", "\n", "\n", "theta", "=", "np", ".", "dot", "(", "np", ".", "linalg", ".", "inv", "(", "currentC", "+", "best_lam", "*", "ident", ")", ",", "currentB", ")", "\n", "\n", "for", "k", "in", "range", "(", "number_of_iterations", ")", ":", "\n", "                ", "currentC", "+=", "step_size", "*", "np", ".", "dot", "(", "theta", ",", "theta", ".", "T", ")", "\n", "currentC", "=", "np", ".", "clip", "(", "currentC", ",", "currentCmin", ",", "currentCmax", ")", "\n", "\n", "currentB", "+=", "-", "2", "*", "step_size", "*", "theta", "\n", "currentB", "=", "np", ".", "clip", "(", "currentB", ",", "currentBmin", ",", "currentBmax", ")", "\n", "\n", "theta", "=", "np", ".", "dot", "(", "np", ".", "linalg", ".", "inv", "(", "currentC", "+", "best_lam", "*", "ident", ")", ",", "currentB", ")", "\n", "\n", "", "y_predict", "=", "np", ".", "dot", "(", "data_i", ".", "T", ",", "theta", ")", "\n", "predicts", ".", "append", "(", "y_predict", "[", "0", "]", "[", "0", "]", ")", "\n", "\n", "", "return", "predicts", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.RIFLE.RobustImputer.RobustImputer.impute": [[213, 227], ["original_data.std", "original_data.mean", "range", "print", "RobustImputer.RobustImputer.impute_data"], "methods", ["home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.RIFLE.RobustImputer.RobustImputer.impute_data"], ["", "def", "impute", "(", "self", ")", ":", "\n", "        ", "original_data", "=", "self", ".", "data", "\n", "standard_deviations", "=", "original_data", ".", "std", "(", ")", "\n", "means", "=", "original_data", ".", "mean", "(", ")", "\n", "data_cols", "=", "original_data", ".", "columns", "\n", "\n", "for", "column_ind", "in", "range", "(", "original_data", ".", "shape", "[", "1", "]", ")", ":", "\n", "            ", "print", "(", "data_cols", "[", "column_ind", "]", "+", "\" is imputed.\"", ")", "\n", "predictions", "=", "self", ".", "impute_data", "(", "column_ind", ")", "\n", "predictions", "=", "[", "x", "*", "standard_deviations", "[", "column_ind", "]", "+", "means", "[", "column_ind", "]", "for", "x", "in", "predictions", "]", "\n", "\n", "original_data", "[", "data_cols", "[", "column_ind", "]", "]", "=", "predictions", "\n", "\n", "", "self", ".", "imputed_data", "=", "original_data", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.RIFLE.RobustImputer.RobustImputer.write_to_csv": [[228, 230], ["RobustImputer.RobustImputer.imputed_data.to_csv"], "methods", ["None"], ["", "def", "write_to_csv", "(", "self", ",", "output_filename", ")", ":", "\n", "        ", "self", ".", "imputed_data", ".", "to_csv", "(", "output_filename", ",", "index", "=", "False", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.TrainVsTest.GenerateTestandTrain.read_dataset": [[8, 11], ["pandas.read_csv"], "function", ["None"], ["def", "read_dataset", "(", "filename", ")", ":", "\n", "    ", "data", "=", "pd", ".", "read_csv", "(", "filename", ")", "\n", "return", "data", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.TrainVsTest.GenerateTestandTrain.split_data": [[13, 17], ["None"], "function", ["None"], ["", "def", "split_data", "(", "data", ")", ":", "\n", "    ", "X", "=", "data", ".", "drop", "[", "data", ".", "columns", "[", "-", "1", "]", "]", "\n", "Y", "=", "data", "[", "[", "data", ".", "columns", "[", "-", "1", "]", "]", "]", "\n", "return", "X", ",", "Y", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.TrainVsTest.GenerateTestandTrain.sample_data": [[19, 21], ["input_data.sample"], "function", ["None"], ["", "def", "sample_data", "(", "input_data", ",", "sample_num", "=", "500", ")", ":", "\n", "    ", "return", "input_data", ".", "sample", "(", "sample_num", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.TrainVsTest.GenerateTestandTrain.generate_MCAR_data": [[23, 52], ["print", "data.copy", "numpy.ones", "range", "print", "print", "numpy.multiply", "pandas.DataFrame", "range", "data.copy.to_numpy", "random.random"], "function", ["None"], ["", "def", "generate_MCAR_data", "(", "data", ",", "prob_vector", ",", "no_y", "=", "True", ")", ":", "\n", "    ", "print", "(", "\"Shape of data: \"", ",", "data", ".", "shape", ")", "\n", "original_data", "=", "data", ".", "copy", "(", ")", "\n", "\n", "cols", "=", "data", ".", "columns", "\n", "\n", "total", "=", "0", "\n", "missing_count", "=", "0", "\n", "\n", "mask", "=", "np", ".", "ones", "(", "shape", "=", "data", ".", "shape", ")", "\n", "\n", "for", "i", "in", "range", "(", "data", ".", "shape", "[", "0", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "data", ".", "shape", "[", "1", "]", ")", ":", "# Column", "\n", "\n", "            ", "total", "+=", "1", "\n", "\n", "if", "random", ".", "random", "(", ")", ">", "prob_vector", "[", "j", "]", ":", "\n", "                ", "mask", "[", "i", "]", "[", "j", "]", "=", "0", "\n", "missing_count", "+=", "1", "\n", "\n", "", "", "", "print", "(", "\"percentage of missing values: \"", ",", "missing_count", "/", "total", ")", "\n", "print", "(", "mask", ")", "\n", "\n", "mask", "[", "mask", "==", "0", "]", "=", "'nan'", "\n", "\n", "final_data", "=", "np", ".", "multiply", "(", "mask", ",", "original_data", ".", "to_numpy", "(", ")", ")", "\n", "\n", "pd_data", "=", "pd", ".", "DataFrame", "(", "final_data", ",", "columns", "=", "cols", ")", "\n", "return", "pd_data", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.TrainVsTest.MCAR.generate_mcar_data": [[6, 33], ["print", "data.copy", "numpy.ones", "range", "print", "print", "numpy.multiply", "numpy.ones", "range", "random.random"], "function", ["None"], ["def", "generate_mcar_data", "(", "data", ",", "prob", "=", "0.5", ")", ":", "\n", "    ", "print", "(", "\"shape of data: \"", ",", "data", ".", "shape", ")", "\n", "original_data", "=", "data", ".", "copy", "(", ")", "\n", "\n", "total", "=", "0", "\n", "missing_count", "=", "0", "\n", "\n", "mask_prob", "=", "prob", "*", "np", ".", "ones", "(", "shape", "=", "data", ".", "shape", ")", "\n", "mask", "=", "np", ".", "ones", "(", "shape", "=", "data", ".", "shape", ")", "\n", "\n", "for", "i", "in", "range", "(", "data", ".", "shape", "[", "0", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "data", ".", "shape", "[", "1", "]", ")", ":", "# column", "\n", "\n", "            ", "total", "+=", "1", "\n", "\n", "if", "random", ".", "random", "(", ")", "<", "mask_prob", "[", "i", "]", "[", "j", "]", ":", "\n", "                ", "mask", "[", "i", "]", "[", "j", "]", "=", "0", "\n", "missing_count", "+=", "1", "\n", "\n", "", "", "", "print", "(", "\"percentage of missing values: \"", ",", "missing_count", "/", "total", ")", "\n", "print", "(", "mask", ")", "\n", "\n", "mask", "[", "mask", "==", "0", "]", "=", "'nan'", "\n", "\n", "final_data", "=", "np", ".", "multiply", "(", "mask", ",", "original_data", ")", "\n", "\n", "return", "final_data", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Classification.RobustLogisticRegression.sigmoid": [[6, 8], ["numpy.exp"], "function", ["None"], ["def", "sigmoid", "(", "X", ")", ":", "\n", "    ", "return", "1.0", "/", "(", "1", "+", "np", ".", "exp", "(", "-", "X", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Classification.RobustLogisticRegression.is_pos_def": [[10, 13], ["print", "numpy.all", "numpy.linalg.eigvals", "numpy.linalg.eigvals"], "function", ["None"], ["", "def", "is_pos_def", "(", "x", ")", ":", "\n", "    ", "print", "(", "np", ".", "linalg", ".", "eigvals", "(", "x", ")", ")", "\n", "return", "np", ".", "all", "(", "np", ".", "linalg", ".", "eigvals", "(", "x", ")", ">", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Classification.RobustLogisticRegression.find_mean_and_covariance": [[15, 52], ["numpy.zeros", "numpy.zeros", "range", "range", "range", "range", "range", "column.mean", "intersections.sample().to_numpy", "f1.mean", "f2.mean", "list", "numpy.inner", "columns[].notnull().all", "intersections.sample", "columns[].notnull"], "function", ["None"], ["", "def", "find_mean_and_covariance", "(", "data_set", ",", "sample_num", "=", "-", "1", ")", ":", "\n", "    ", "if", "sample_num", "==", "-", "1", ":", "\n", "        ", "sample_num", "=", "data_set", ".", "shape", "[", "0", "]", "\n", "\n", "", "cov_matrix", "=", "np", ".", "zeros", "(", "shape", "=", "(", "data_set", ".", "shape", "[", "1", "]", ",", "data_set", ".", "shape", "[", "1", "]", ")", ")", "\n", "mu", "=", "np", ".", "zeros", "(", "shape", "=", "(", "data_set", ".", "shape", "[", "1", "]", ",", ")", ")", "\n", "\n", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "i", "+", "1", ")", ":", "\n", "            ", "feature_i", "=", "data_set", ".", "columns", "[", "i", "]", "\n", "feature_j", "=", "data_set", ".", "columns", "[", "j", "]", "\n", "\n", "columns", "=", "data_set", "[", "[", "feature_i", ",", "feature_j", "]", "]", "\n", "\n", "intersections", "=", "columns", "[", "columns", "[", "[", "feature_i", ",", "feature_j", "]", "]", ".", "notnull", "(", ")", ".", "all", "(", "axis", "=", "1", ")", "]", "\n", "sample", "=", "intersections", ".", "sample", "(", "sample_num", ",", "replace", "=", "True", ")", ".", "to_numpy", "(", ")", "\n", "\n", "f1", "=", "sample", "[", ":", ",", "0", "]", "\n", "f2", "=", "sample", "[", ":", ",", "1", "]", "\n", "\n", "inner_prod", "=", "np", ".", "inner", "(", "f1", ",", "f2", ")", "/", "sample_num", "\n", "f1_mean", "=", "f1", ".", "mean", "(", ")", "\n", "f2_mean", "=", "f2", ".", "mean", "(", ")", "\n", "cov_estimation", "=", "inner_prod", "-", "f1_mean", "*", "f2_mean", "\n", "cov_matrix", "[", "i", "]", "[", "j", "]", "=", "cov_estimation", "\n", "\n", "", "", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "i", ")", ":", "\n", "            ", "cov_matrix", "[", "i", "]", "[", "j", "]", "=", "cov_matrix", "[", "j", "]", "[", "i", "]", "\n", "\n", "", "", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "feature_i", "=", "data_set", ".", "columns", "[", "i", "]", "\n", "column", "=", "data_set", "[", "[", "feature_i", "]", "]", "\n", "mean", "=", "column", ".", "mean", "(", ")", "\n", "mu", "[", "i", "]", "=", "list", "(", "mean", ")", "[", "0", "]", "\n", "\n", "", "return", "mu", ",", "cov_matrix", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Nomao.RobustLogisticRegression.sigmoid": [[10, 12], ["numpy.exp"], "function", ["None"], ["", "def", "is_pos_def", "(", "x", ")", ":", "\n", "    ", "print", "(", "np", ".", "linalg", ".", "eigvals", "(", "x", ")", ")", "\n", "return", "np", ".", "all", "(", "np", ".", "linalg", ".", "eigvals", "(", "x", ")", ">", "0", ")", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Nomao.RobustLogisticRegression.find_mean_and_covariance": [[14, 53], ["numpy.zeros", "numpy.zeros", "range", "range", "range", "range", "range", "column.mean", "intersections.sample().to_numpy", "f1.mean", "f2.mean", "list", "numpy.inner", "columns[].notnull().all", "intersections.sample", "columns[].notnull"], "function", ["None"], ["\n", "", "def", "find_mean_and_covariance", "(", "data_set", ",", "sample_num", "=", "-", "1", ")", ":", "\n", "    ", "if", "sample_num", "==", "-", "1", ":", "\n", "        ", "sample_num", "=", "data_set", ".", "shape", "[", "0", "]", "\n", "\n", "", "cov_matrix", "=", "np", ".", "zeros", "(", "shape", "=", "(", "data_set", ".", "shape", "[", "1", "]", ",", "data_set", ".", "shape", "[", "1", "]", ")", ")", "\n", "mu", "=", "np", ".", "zeros", "(", "shape", "=", "(", "data_set", ".", "shape", "[", "1", "]", ",", ")", ")", "\n", "\n", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "i", "+", "1", ")", ":", "\n", "            ", "feature_i", "=", "data_set", ".", "columns", "[", "i", "]", "\n", "feature_j", "=", "data_set", ".", "columns", "[", "j", "]", "\n", "\n", "columns", "=", "data_set", "[", "[", "feature_i", ",", "feature_j", "]", "]", "\n", "\n", "intersections", "=", "columns", "[", "columns", "[", "[", "feature_i", ",", "feature_j", "]", "]", ".", "notnull", "(", ")", ".", "all", "(", "axis", "=", "1", ")", "]", "\n", "sample", "=", "intersections", ".", "sample", "(", "sample_num", ",", "replace", "=", "True", ")", ".", "to_numpy", "(", ")", "\n", "\n", "f1", "=", "sample", "[", ":", ",", "0", "]", "\n", "f2", "=", "sample", "[", ":", ",", "1", "]", "\n", "\n", "inner_prod", "=", "np", ".", "inner", "(", "f1", ",", "f2", ")", "/", "sample_num", "\n", "f1_mean", "=", "f1", ".", "mean", "(", ")", "\n", "f2_mean", "=", "f2", ".", "mean", "(", ")", "\n", "cov_estimation", "=", "inner_prod", "-", "f1_mean", "*", "f2_mean", "\n", "cov_matrix", "[", "i", "]", "[", "j", "]", "=", "cov_estimation", "\n", "\n", "", "", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "i", ")", ":", "\n", "            ", "cov_matrix", "[", "i", "]", "[", "j", "]", "=", "cov_matrix", "[", "j", "]", "[", "i", "]", "\n", "\n", "", "", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "feature_i", "=", "data_set", ".", "columns", "[", "i", "]", "\n", "column", "=", "data_set", "[", "[", "feature_i", "]", "]", "\n", "mean", "=", "column", ".", "mean", "(", ")", "\n", "mu", "[", "i", "]", "=", "list", "(", "mean", ")", "[", "0", "]", "\n", "\n", "", "return", "mu", ",", "cov_matrix", "\n", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Magic.RobustLogisticRegression.sigmoid": [[10, 12], ["numpy.exp"], "function", ["None"], ["", "def", "is_pos_def", "(", "x", ")", ":", "\n", "    ", "print", "(", "np", ".", "linalg", ".", "eigvals", "(", "x", ")", ")", "\n", "return", "np", ".", "all", "(", "np", ".", "linalg", ".", "eigvals", "(", "x", ")", ">", "0", ")", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Magic.RobustLogisticRegression.find_mean_and_covariance": [[14, 53], ["numpy.zeros", "numpy.zeros", "range", "range", "range", "range", "range", "column.mean", "intersections.sample().to_numpy", "f1.mean", "f2.mean", "list", "numpy.inner", "columns[].notnull().all", "intersections.sample", "columns[].notnull"], "function", ["None"], ["\n", "", "def", "find_mean_and_covariance", "(", "data_set", ",", "sample_num", "=", "-", "1", ")", ":", "\n", "    ", "if", "sample_num", "==", "-", "1", ":", "\n", "        ", "sample_num", "=", "data_set", ".", "shape", "[", "0", "]", "\n", "\n", "", "cov_matrix", "=", "np", ".", "zeros", "(", "shape", "=", "(", "data_set", ".", "shape", "[", "1", "]", ",", "data_set", ".", "shape", "[", "1", "]", ")", ")", "\n", "mu", "=", "np", ".", "zeros", "(", "shape", "=", "(", "data_set", ".", "shape", "[", "1", "]", ",", ")", ")", "\n", "\n", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "i", "+", "1", ")", ":", "\n", "            ", "feature_i", "=", "data_set", ".", "columns", "[", "i", "]", "\n", "feature_j", "=", "data_set", ".", "columns", "[", "j", "]", "\n", "\n", "columns", "=", "data_set", "[", "[", "feature_i", ",", "feature_j", "]", "]", "\n", "\n", "intersections", "=", "columns", "[", "columns", "[", "[", "feature_i", ",", "feature_j", "]", "]", ".", "notnull", "(", ")", ".", "all", "(", "axis", "=", "1", ")", "]", "\n", "sample", "=", "intersections", ".", "sample", "(", "sample_num", ",", "replace", "=", "True", ")", ".", "to_numpy", "(", ")", "\n", "\n", "f1", "=", "sample", "[", ":", ",", "0", "]", "\n", "f2", "=", "sample", "[", ":", ",", "1", "]", "\n", "\n", "inner_prod", "=", "np", ".", "inner", "(", "f1", ",", "f2", ")", "/", "sample_num", "\n", "f1_mean", "=", "f1", ".", "mean", "(", ")", "\n", "f2_mean", "=", "f2", ".", "mean", "(", ")", "\n", "cov_estimation", "=", "inner_prod", "-", "f1_mean", "*", "f2_mean", "\n", "cov_matrix", "[", "i", "]", "[", "j", "]", "=", "cov_estimation", "\n", "\n", "", "", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "i", ")", ":", "\n", "            ", "cov_matrix", "[", "i", "]", "[", "j", "]", "=", "cov_matrix", "[", "j", "]", "[", "i", "]", "\n", "\n", "", "", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "feature_i", "=", "data_set", ".", "columns", "[", "i", "]", "\n", "column", "=", "data_set", "[", "[", "feature_i", "]", "]", "\n", "mean", "=", "column", ".", "mean", "(", ")", "\n", "mu", "[", "i", "]", "=", "list", "(", "mean", ")", "[", "0", "]", "\n", "\n", "", "return", "mu", ",", "cov_matrix", "\n", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Magic.RLR.sigmoid": [[9, 11], ["numpy.exp"], "function", ["None"], ["def", "sigmoid", "(", "inp", ")", ":", "\n", "    ", "return", "1.0", "/", "(", "1.0", "+", "np", ".", "exp", "(", "-", "inp", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Magic.RLR.find_mean_and_covariance": [[13, 52], ["numpy.zeros", "numpy.zeros", "range", "range", "range", "range", "range", "column.mean", "intersections.sample().to_numpy", "f1.mean", "f2.mean", "list", "numpy.inner", "columns[].notnull().all", "intersections.sample", "columns[].notnull"], "function", ["None"], ["", "def", "find_mean_and_covariance", "(", "data_set", ",", "sample_num", "=", "-", "1", ")", ":", "\n", "    ", "if", "sample_num", "==", "-", "1", ":", "\n", "        ", "sample_num", "=", "data_set", ".", "shape", "[", "0", "]", "\n", "\n", "", "cov_matrix", "=", "np", ".", "zeros", "(", "shape", "=", "(", "data_set", ".", "shape", "[", "1", "]", ",", "data_set", ".", "shape", "[", "1", "]", ")", ")", "\n", "mu", "=", "np", ".", "zeros", "(", "shape", "=", "(", "data_set", ".", "shape", "[", "1", "]", ",", ")", ")", "\n", "\n", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "i", "+", "1", ")", ":", "\n", "            ", "feature_i", "=", "data_set", ".", "columns", "[", "i", "]", "\n", "feature_j", "=", "data_set", ".", "columns", "[", "j", "]", "\n", "\n", "columns", "=", "data_set", "[", "[", "feature_i", ",", "feature_j", "]", "]", "\n", "\n", "intersections", "=", "columns", "[", "columns", "[", "[", "feature_i", ",", "feature_j", "]", "]", ".", "notnull", "(", ")", ".", "all", "(", "axis", "=", "1", ")", "]", "\n", "\n", "if", "intersections", ".", "shape", "[", "0", "]", "<", "2", ":", "\n", "                ", "pass", "\n", "", "sample", "=", "intersections", ".", "sample", "(", "sample_num", ",", "replace", "=", "True", ")", ".", "to_numpy", "(", ")", "\n", "f1", "=", "sample", "[", ":", ",", "0", "]", "\n", "f2", "=", "sample", "[", ":", ",", "1", "]", "\n", "\n", "inner_prod", "=", "np", ".", "inner", "(", "f1", ",", "f2", ")", "/", "sample_num", "\n", "f1_mean", "=", "f1", ".", "mean", "(", ")", "\n", "f2_mean", "=", "f2", ".", "mean", "(", ")", "\n", "cov_estimation", "=", "inner_prod", "-", "f1_mean", "*", "f2_mean", "\n", "cov_matrix", "[", "i", "]", "[", "j", "]", "=", "cov_estimation", "\n", "\n", "", "", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "i", ")", ":", "\n", "            ", "cov_matrix", "[", "i", "]", "[", "j", "]", "=", "cov_matrix", "[", "j", "]", "[", "i", "]", "\n", "\n", "", "", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "feature_i", "=", "data_set", ".", "columns", "[", "i", "]", "\n", "column", "=", "data_set", "[", "[", "feature_i", "]", "]", "\n", "mean", "=", "column", ".", "mean", "(", ")", "\n", "mu", "[", "i", "]", "=", "list", "(", "mean", ")", "[", "0", "]", "\n", "\n", "", "return", "mu", ",", "cov_matrix", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Magic.RobustLR.sigmoid": [[9, 11], ["numpy.exp"], "function", ["None"], ["predicts1", "=", "[", "]", "\n", "predicts2", "=", "[", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Magic.RobustLR.find_mean_and_covariance": [[13, 52], ["numpy.zeros", "numpy.zeros", "range", "range", "range", "range", "range", "column.mean", "intersections.sample().to_numpy", "f1.mean", "f2.mean", "list", "numpy.inner", "columns[].notnull().all", "intersections.sample", "columns[].notnull"], "function", ["None"], ["avg2", "=", "0", "\n", "\n", "rmse_avg1", "=", "0", "\n", "rmse_avg2", "=", "0", "\n", "\n", "data", "=", "pd", ".", "read_csv", "(", "'missing_Beta_MCAR_85_10_300.csv'", ")", "\n", "test_data", "=", "pd", ".", "read_csv", "(", "\"test_Beta_MCAR_85_2000_300.csv\"", ")", "\n", "\n", "data_points", "=", "data", ".", "shape", "[", "0", "]", "\n", "dimension", "=", "data", ".", "shape", "[", "1", "]", "\n", "validation_threshold", "=", "dimension", "//", "5", "\n", "\n", "print", "(", "validation_threshold", ")", "\n", "X", "=", "data", "[", "data", ".", "columns", "[", ":", "-", "1", "]", "]", "\n", "\n", "test_X", "=", "test_data", "[", "data", ".", "columns", "[", ":", "-", "1", "]", "]", "\n", "\n", "number_of_test_points", "=", "test_X", ".", "shape", "[", "0", "]", "\n", "\n", "nulls", "=", "X", ".", "isnull", "(", ")", ".", "sum", "(", ")", "\n", "\n", "null_cols", "=", "[", "]", "\n", "columns2", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "len", "(", "nulls", ")", ")", ":", "\n", "    ", "if", "nulls", "[", "i", "]", ">=", "X", ".", "shape", "[", "0", "]", "-", "1", ":", "\n", "        ", "columns2", ".", "append", "(", "X", ".", "columns", "[", "i", "]", ")", "\n", "\n", "", "", "X", "=", "X", ".", "drop", "(", "columns2", ",", "axis", "=", "1", ")", "\n", "test_X", "=", "test_X", ".", "drop", "(", "columns2", ",", "axis", "=", "1", ")", "\n", "\n", "mask_X", "=", "X", ".", "isna", "(", ")", "\n", "mask_X", "=", "mask_X", ".", "to_numpy", "(", ")", "\n", "mask_X", "=", "np", ".", "ones", "(", "shape", "=", "mask_X", ".", "shape", ")", "-", "mask_X", "\n", "\n", "mask_X_test", "=", "test_X", ".", "isna", "(", ")", "\n", "mask_X_test", "=", "mask_X_test", ".", "to_numpy", "(", ")", "\n", "mask_X_test", "=", "np", ".", "ones", "(", "shape", "=", "mask_X_test", ".", "shape", ")", "-", "mask_X_test", "\n", "\n", "Y", "=", "data", "[", "[", "'critical_temp'", "]", "]", "\n", "test_Y", "=", "test_data", "[", "[", "'critical_temp'", "]", "]", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.CreditCard.RobustLogisticRegression.sigmoid": [[7, 9], ["numpy.exp"], "function", ["None"], ["    ", "return", "1.0", "/", "(", "1", "+", "np", ".", "exp", "(", "-", "X", ")", ")", "\n", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.CreditCard.RobustLogisticRegression.find_mean_and_covariance": [[11, 50], ["numpy.zeros", "numpy.zeros", "range", "range", "range", "range", "range", "column.mean", "intersections.sample().to_numpy", "f1.mean", "f2.mean", "list", "numpy.inner", "columns[].notnull().all", "intersections.sample", "columns[].notnull"], "function", ["None"], ["    ", "print", "(", "np", ".", "linalg", ".", "eigvals", "(", "x", ")", ")", "\n", "return", "np", ".", "all", "(", "np", ".", "linalg", ".", "eigvals", "(", "x", ")", ">", "0", ")", "\n", "\n", "\n", "", "def", "find_mean_and_covariance", "(", "data_set", ",", "sample_num", "=", "-", "1", ")", ":", "\n", "    ", "if", "sample_num", "==", "-", "1", ":", "\n", "        ", "sample_num", "=", "data_set", ".", "shape", "[", "0", "]", "\n", "\n", "", "cov_matrix", "=", "np", ".", "zeros", "(", "shape", "=", "(", "data_set", ".", "shape", "[", "1", "]", ",", "data_set", ".", "shape", "[", "1", "]", ")", ")", "\n", "mu", "=", "np", ".", "zeros", "(", "shape", "=", "(", "data_set", ".", "shape", "[", "1", "]", ",", ")", ")", "\n", "\n", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "i", "+", "1", ")", ":", "\n", "            ", "feature_i", "=", "data_set", ".", "columns", "[", "i", "]", "\n", "feature_j", "=", "data_set", ".", "columns", "[", "j", "]", "\n", "\n", "columns", "=", "data_set", "[", "[", "feature_i", ",", "feature_j", "]", "]", "\n", "\n", "intersections", "=", "columns", "[", "columns", "[", "[", "feature_i", ",", "feature_j", "]", "]", ".", "notnull", "(", ")", ".", "all", "(", "axis", "=", "1", ")", "]", "\n", "sample", "=", "intersections", ".", "sample", "(", "sample_num", ",", "replace", "=", "True", ")", ".", "to_numpy", "(", ")", "\n", "\n", "f1", "=", "sample", "[", ":", ",", "0", "]", "\n", "f2", "=", "sample", "[", ":", ",", "1", "]", "\n", "\n", "inner_prod", "=", "np", ".", "inner", "(", "f1", ",", "f2", ")", "/", "sample_num", "\n", "f1_mean", "=", "f1", ".", "mean", "(", ")", "\n", "f2_mean", "=", "f2", ".", "mean", "(", ")", "\n", "cov_estimation", "=", "inner_prod", "-", "f1_mean", "*", "f2_mean", "\n", "cov_matrix", "[", "i", "]", "[", "j", "]", "=", "cov_estimation", "\n", "\n", "", "", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "i", ")", ":", "\n", "            ", "cov_matrix", "[", "i", "]", "[", "j", "]", "=", "cov_matrix", "[", "j", "]", "[", "i", "]", "\n", "\n", "", "", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "feature_i", "=", "data_set", ".", "columns", "[", "i", "]", "\n", "column", "=", "data_set", "[", "[", "feature_i", "]", "]", "\n", "mean", "=", "column", ".", "mean", "(", ")", "\n", "mu", "[", "i", "]", "=", "list", "(", "mean", ")", "[", "0", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Avila.RobustLogisticRegression.sigmoid": [[9, 11], ["numpy.exp"], "function", ["None"], ["\n", "", "def", "is_pos_def", "(", "x", ")", ":", "\n", "    ", "print", "(", "np", ".", "linalg", ".", "eigvals", "(", "x", ")", ")", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Avila.RobustLogisticRegression.find_mean_and_covariance": [[13, 52], ["numpy.zeros", "numpy.zeros", "range", "range", "range", "range", "range", "column.mean", "intersections.sample().to_numpy", "f1.mean", "f2.mean", "list", "numpy.inner", "columns[].notnull().all", "intersections.sample", "columns[].notnull"], "function", ["None"], ["\n", "\n", "", "def", "find_mean_and_covariance", "(", "data_set", ",", "sample_num", "=", "-", "1", ")", ":", "\n", "    ", "if", "sample_num", "==", "-", "1", ":", "\n", "        ", "sample_num", "=", "data_set", ".", "shape", "[", "0", "]", "\n", "\n", "", "cov_matrix", "=", "np", ".", "zeros", "(", "shape", "=", "(", "data_set", ".", "shape", "[", "1", "]", ",", "data_set", ".", "shape", "[", "1", "]", ")", ")", "\n", "mu", "=", "np", ".", "zeros", "(", "shape", "=", "(", "data_set", ".", "shape", "[", "1", "]", ",", ")", ")", "\n", "\n", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "i", "+", "1", ")", ":", "\n", "            ", "feature_i", "=", "data_set", ".", "columns", "[", "i", "]", "\n", "feature_j", "=", "data_set", ".", "columns", "[", "j", "]", "\n", "\n", "columns", "=", "data_set", "[", "[", "feature_i", ",", "feature_j", "]", "]", "\n", "\n", "intersections", "=", "columns", "[", "columns", "[", "[", "feature_i", ",", "feature_j", "]", "]", ".", "notnull", "(", ")", ".", "all", "(", "axis", "=", "1", ")", "]", "\n", "sample", "=", "intersections", ".", "sample", "(", "sample_num", ",", "replace", "=", "True", ")", ".", "to_numpy", "(", ")", "\n", "\n", "f1", "=", "sample", "[", ":", ",", "0", "]", "\n", "f2", "=", "sample", "[", ":", ",", "1", "]", "\n", "\n", "inner_prod", "=", "np", ".", "inner", "(", "f1", ",", "f2", ")", "/", "sample_num", "\n", "f1_mean", "=", "f1", ".", "mean", "(", ")", "\n", "f2_mean", "=", "f2", ".", "mean", "(", ")", "\n", "cov_estimation", "=", "inner_prod", "-", "f1_mean", "*", "f2_mean", "\n", "cov_matrix", "[", "i", "]", "[", "j", "]", "=", "cov_estimation", "\n", "\n", "", "", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "i", ")", ":", "\n", "            ", "cov_matrix", "[", "i", "]", "[", "j", "]", "=", "cov_matrix", "[", "j", "]", "[", "i", "]", "\n", "\n", "", "", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "feature_i", "=", "data_set", ".", "columns", "[", "i", "]", "\n", "column", "=", "data_set", "[", "[", "feature_i", "]", "]", "\n", "mean", "=", "column", ".", "mean", "(", ")", "\n", "mu", "[", "i", "]", "=", "list", "(", "mean", ")", "[", "0", "]", "\n", "\n", "", "return", "mu", ",", "cov_matrix", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Avila.CommonVarianceExactMu.sigmoid": [[10, 12], ["numpy.exp"], "function", ["None"], ["def", "sigmoid", "(", "inp", ")", ":", "\n", "    ", "return", "1.0", "/", "(", "1.0", "+", "np", ".", "exp", "(", "-", "inp", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Avila.CommonVarianceExactMu.find_covariance": [[14, 46], ["numpy.zeros", "range", "range", "range", "range", "intersections.sample().to_numpy", "f1.mean", "f2.mean", "numpy.inner", "columns[].notnull().all", "intersections.sample", "columns[].notnull"], "function", ["None"], ["", "def", "find_covariance", "(", "data_set", ",", "sample_num", "=", "-", "1", ")", ":", "\n", "    ", "if", "sample_num", "==", "-", "1", ":", "\n", "        ", "sample_num", "=", "data_set", ".", "shape", "[", "0", "]", "\n", "\n", "", "cov_matrix", "=", "np", ".", "zeros", "(", "shape", "=", "(", "data_set", ".", "shape", "[", "1", "]", ",", "data_set", ".", "shape", "[", "1", "]", ")", ")", "\n", "\n", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "i", "+", "1", ")", ":", "\n", "            ", "feature_i", "=", "data_set", ".", "columns", "[", "i", "]", "\n", "feature_j", "=", "data_set", ".", "columns", "[", "j", "]", "\n", "\n", "columns", "=", "data_set", "[", "[", "feature_i", ",", "feature_j", "]", "]", "\n", "\n", "intersections", "=", "columns", "[", "columns", "[", "[", "feature_i", ",", "feature_j", "]", "]", ".", "notnull", "(", ")", ".", "all", "(", "axis", "=", "1", ")", "]", "\n", "\n", "if", "intersections", ".", "shape", "[", "0", "]", "<", "2", ":", "\n", "                ", "pass", "\n", "", "sample", "=", "intersections", ".", "sample", "(", "sample_num", ",", "replace", "=", "True", ")", ".", "to_numpy", "(", ")", "\n", "f1", "=", "sample", "[", ":", ",", "0", "]", "\n", "f2", "=", "sample", "[", ":", ",", "1", "]", "\n", "\n", "inner_prod", "=", "np", ".", "inner", "(", "f1", ",", "f2", ")", "/", "sample_num", "\n", "f1_mean", "=", "f1", ".", "mean", "(", ")", "\n", "f2_mean", "=", "f2", ".", "mean", "(", ")", "\n", "cov_estimation", "=", "inner_prod", "-", "f1_mean", "*", "f2_mean", "\n", "cov_matrix", "[", "i", "]", "[", "j", "]", "=", "cov_estimation", "\n", "\n", "", "", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "i", ")", ":", "\n", "            ", "cov_matrix", "[", "i", "]", "[", "j", "]", "=", "cov_matrix", "[", "j", "]", "[", "i", "]", "\n", "\n", "", "", "return", "cov_matrix", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Avila.CommonVarianceExactMu.find_mean": [[48, 68], ["range", "numpy.array().reshape", "numpy.array().reshape", "range", "np.array().reshape.append", "np.array().reshape.append", "current_column.sample", "means_array.append", "min", "max", "numpy.array", "numpy.array", "current_column.sample.mean"], "function", ["None"], ["", "def", "find_mean", "(", "data_set", ",", "frac", "=", "1", ")", ":", "\n", "    ", "n", ",", "d", "=", "data_set", ".", "shape", "\n", "\n", "estimation_num", "=", "100", "\n", "mu_min", "=", "[", "]", "\n", "mu_max", "=", "[", "]", "\n", "for", "column_index", "in", "range", "(", "d", ")", ":", "\n", "        ", "current_column", "=", "data_set", "[", "data_set", ".", "columns", "[", "column_index", "]", "]", "\n", "means_array", "=", "[", "]", "\n", "for", "_", "in", "range", "(", "estimation_num", ")", ":", "\n", "            ", "new_sample", "=", "current_column", ".", "sample", "(", "frac", "=", "frac", ",", "replace", "=", "True", ")", "\n", "means_array", ".", "append", "(", "new_sample", ".", "mean", "(", ")", ")", "\n", "\n", "", "mu_min", ".", "append", "(", "min", "(", "means_array", ")", ")", "\n", "mu_max", ".", "append", "(", "max", "(", "means_array", ")", ")", "\n", "\n", "", "mu_min", "=", "np", ".", "array", "(", "mu_min", ")", ".", "reshape", "(", "(", "d", ",", "1", ")", ")", "\n", "mu_max", "=", "np", ".", "array", "(", "mu_max", ")", ".", "reshape", "(", "(", "d", ",", "1", ")", ")", "\n", "\n", "return", "mu_min", ",", "mu_max", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Avila.CommonVariance.sigmoid": [[10, 12], ["numpy.exp"], "function", ["None"], ["def", "sigmoid", "(", "inp", ")", ":", "\n", "    ", "return", "1.0", "/", "(", "1.0", "+", "np", ".", "exp", "(", "-", "inp", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Avila.CommonVariance.find_covariance": [[14, 46], ["numpy.zeros", "range", "range", "range", "range", "intersections.sample().to_numpy", "f1.mean", "f2.mean", "numpy.inner", "columns[].notnull().all", "intersections.sample", "columns[].notnull"], "function", ["None"], ["", "def", "find_covariance", "(", "data_set", ",", "sample_num", "=", "-", "1", ")", ":", "\n", "    ", "if", "sample_num", "==", "-", "1", ":", "\n", "        ", "sample_num", "=", "data_set", ".", "shape", "[", "0", "]", "\n", "\n", "", "cov_matrix", "=", "np", ".", "zeros", "(", "shape", "=", "(", "data_set", ".", "shape", "[", "1", "]", ",", "data_set", ".", "shape", "[", "1", "]", ")", ")", "\n", "\n", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "i", "+", "1", ")", ":", "\n", "            ", "feature_i", "=", "data_set", ".", "columns", "[", "i", "]", "\n", "feature_j", "=", "data_set", ".", "columns", "[", "j", "]", "\n", "\n", "columns", "=", "data_set", "[", "[", "feature_i", ",", "feature_j", "]", "]", "\n", "\n", "intersections", "=", "columns", "[", "columns", "[", "[", "feature_i", ",", "feature_j", "]", "]", ".", "notnull", "(", ")", ".", "all", "(", "axis", "=", "1", ")", "]", "\n", "\n", "if", "intersections", ".", "shape", "[", "0", "]", "<", "2", ":", "\n", "                ", "pass", "\n", "", "sample", "=", "intersections", ".", "sample", "(", "sample_num", ",", "replace", "=", "True", ")", ".", "to_numpy", "(", ")", "\n", "f1", "=", "sample", "[", ":", ",", "0", "]", "\n", "f2", "=", "sample", "[", ":", ",", "1", "]", "\n", "\n", "inner_prod", "=", "np", ".", "inner", "(", "f1", ",", "f2", ")", "/", "sample_num", "\n", "f1_mean", "=", "f1", ".", "mean", "(", ")", "\n", "f2_mean", "=", "f2", ".", "mean", "(", ")", "\n", "cov_estimation", "=", "inner_prod", "-", "f1_mean", "*", "f2_mean", "\n", "cov_matrix", "[", "i", "]", "[", "j", "]", "=", "cov_estimation", "\n", "\n", "", "", "for", "i", "in", "range", "(", "data_set", ".", "shape", "[", "1", "]", ")", ":", "\n", "        ", "for", "j", "in", "range", "(", "i", ")", ":", "\n", "            ", "cov_matrix", "[", "i", "]", "[", "j", "]", "=", "cov_matrix", "[", "j", "]", "[", "i", "]", "\n", "\n", "", "", "return", "cov_matrix", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.Avila.CommonVariance.find_mean": [[48, 60], ["range", "current_column.sample", "mu.append", "current_column.sample.mean"], "function", ["None"], ["", "def", "find_mean", "(", "data_set", ",", "frac", "=", "1", ")", ":", "\n", "    ", "n", ",", "d", "=", "data_set", ".", "shape", "\n", "\n", "mu", "=", "[", "]", "\n", "for", "column_index", "in", "range", "(", "d", ")", ":", "\n", "        ", "current_column", "=", "data_set", "[", "data_set", ".", "columns", "[", "column_index", "]", "]", "\n", "new_sample", "=", "current_column", ".", "sample", "(", "frac", "=", "frac", ",", "replace", "=", "True", ")", "\n", "mu", ".", "append", "(", "new_sample", ".", "mean", "(", ")", ")", "\n", "\n", "# mu = np.array(mu).reshape((d, 1))", "\n", "\n", "", "return", "mu", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.RIFLE_via_ADMM.ADMM.get_near_psd": [[7, 13], ["numpy.linalg.eigh", "eigvec.dot().dot", "eigvec.dot", "numpy.diag"], "function", ["None"], ["def", "get_near_psd", "(", "A", ")", ":", "\n", "    ", "B", "=", "(", "A", "+", "A", ".", "T", ")", "/", "2", "\n", "eigval", ",", "eigvec", "=", "np", ".", "linalg", ".", "eigh", "(", "B", ")", "\n", "eigval", "[", "eigval", "<", "0", "]", "=", "0", "\n", "\n", "return", "eigvec", ".", "dot", "(", "np", ".", "diag", "(", "eigval", ")", ")", ".", "dot", "(", "eigvec", ".", "T", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.RIFLE_via_ADMM.ADMM.is_pos_semidef": [[15, 17], ["numpy.all", "numpy.linalg.eigvals"], "function", ["None"], ["", "def", "is_pos_semidef", "(", "x", ")", ":", "\n", "    ", "return", "np", ".", "all", "(", "np", ".", "linalg", ".", "eigvals", "(", "x", ")", ">=", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.RIFLE_via_ADMM.ADMM_Synthetic.get_near_psd": [[13, 19], ["numpy.linalg.eigh", "numpy.dot", "numpy.dot", "numpy.diag"], "function", ["None"], ["def", "get_near_psd", "(", "A_matrix", ")", ":", "\n", "    ", "A_sym", "=", "(", "A_matrix", "+", "A_matrix", ".", "T", ")", "/", "2", "\n", "eigval", ",", "eigvec", "=", "np", ".", "linalg", ".", "eigh", "(", "A_sym", ")", "\n", "eigval", "[", "eigval", "<", "0", "]", "=", "0", "\n", "\n", "return", "np", ".", "dot", "(", "eigvec", ",", "np", ".", "dot", "(", "np", ".", "diag", "(", "eigval", ")", ",", "eigvec", ".", "T", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.RIFLE_via_ADMM.ADMM_Synthetic.is_pos_semidef": [[21, 23], ["numpy.all", "numpy.linalg.eigvals"], "function", ["None"], ["", "def", "is_pos_semidef", "(", "x", ")", ":", "\n", "    ", "return", "np", ".", "all", "(", "np", ".", "linalg", ".", "eigvals", "(", "x", ")", ">=", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.RIFLE_via_ADMM.Alternating_Projection_Checking.get_near_psd": [[7, 13], ["numpy.linalg.eigh", "eigvec.dot().dot", "eigvec.dot", "numpy.diag"], "function", ["None"], ["def", "get_near_psd", "(", "A", ")", ":", "\n", "    ", "B", "=", "(", "A", "+", "A", ".", "T", ")", "/", "2", "\n", "eigval", ",", "eigvec", "=", "np", ".", "linalg", ".", "eigh", "(", "B", ")", "\n", "eigval", "[", "eigval", "<", "0", "]", "=", "0", "\n", "\n", "return", "eigvec", ".", "dot", "(", "np", ".", "diag", "(", "eigval", ")", ")", ".", "dot", "(", "eigvec", ".", "T", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.optimization-for-data-driven-science_rifle.RIFLE_via_ADMM.Alternating_Projection_Checking.is_pos_semidef": [[15, 17], ["numpy.all", "numpy.linalg.eigvals"], "function", ["None"], ["", "def", "is_pos_semidef", "(", "x", ")", ":", "\n", "    ", "return", "np", ".", "all", "(", "np", ".", "linalg", ".", "eigvals", "(", "x", ")", ">=", "0", ")", "\n", "\n"]]}