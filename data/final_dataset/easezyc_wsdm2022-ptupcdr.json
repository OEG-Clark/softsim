{"home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.LookupEmbedding.__init__": [[7, 11], ["super().__init__", "torch.nn.Embedding", "torch.nn.Embedding", "torch.nn.Embedding", "torch.nn.Embedding", "torch.nn.Embedding", "torch.nn.Embedding", "torch.nn.Embedding", "torch.nn.Embedding"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.__init__"], ["    ", "def", "__init__", "(", "self", ",", "uid_all", ",", "iid_all", ",", "emb_dim", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "uid_embedding", "=", "torch", ".", "nn", ".", "Embedding", "(", "uid_all", ",", "emb_dim", ")", "\n", "self", ".", "iid_embedding", "=", "torch", ".", "nn", ".", "Embedding", "(", "iid_all", "+", "1", ",", "emb_dim", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.LookupEmbedding.forward": [[12, 17], ["models.LookupEmbedding.uid_embedding", "models.LookupEmbedding.iid_embedding", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "x[].unsqueeze", "x[].unsqueeze"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "uid_emb", "=", "self", ".", "uid_embedding", "(", "x", "[", ":", ",", "0", "]", ".", "unsqueeze", "(", "1", ")", ")", "\n", "iid_emb", "=", "self", ".", "iid_embedding", "(", "x", "[", ":", ",", "1", "]", ".", "unsqueeze", "(", "1", ")", ")", "\n", "emb", "=", "torch", ".", "cat", "(", "[", "uid_emb", ",", "iid_emb", "]", ",", "dim", "=", "1", ")", "\n", "return", "emb", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.MetaNet.__init__": [[20, 27], ["super().__init__", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Softmax", "torch.nn.Softmax", "torch.nn.Softmax", "torch.nn.Softmax", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Sequential", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.__init__"], ["    ", "def", "__init__", "(", "self", ",", "emb_dim", ",", "meta_dim", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "event_K", "=", "torch", ".", "nn", ".", "Sequential", "(", "torch", ".", "nn", ".", "Linear", "(", "emb_dim", ",", "emb_dim", ")", ",", "torch", ".", "nn", ".", "ReLU", "(", ")", ",", "\n", "torch", ".", "nn", ".", "Linear", "(", "emb_dim", ",", "1", ",", "False", ")", ")", "\n", "self", ".", "event_softmax", "=", "torch", ".", "nn", ".", "Softmax", "(", "dim", "=", "1", ")", "\n", "self", ".", "decoder", "=", "torch", ".", "nn", ".", "Sequential", "(", "torch", ".", "nn", ".", "Linear", "(", "emb_dim", ",", "meta_dim", ")", ",", "torch", ".", "nn", ".", "ReLU", "(", ")", ",", "\n", "torch", ".", "nn", ".", "Linear", "(", "meta_dim", ",", "emb_dim", "*", "emb_dim", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.MetaNet.forward": [[28, 36], ["models.MetaNet.event_K", "models.MetaNet.event_softmax", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "models.MetaNet.decoder", "models.MetaNet.squeeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze", "torch.unsqueeze"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "emb_fea", ",", "seq_index", ")", ":", "\n", "        ", "mask", "=", "(", "seq_index", "==", "0", ")", ".", "float", "(", ")", "\n", "event_K", "=", "self", ".", "event_K", "(", "emb_fea", ")", "\n", "t", "=", "event_K", "-", "torch", ".", "unsqueeze", "(", "mask", ",", "2", ")", "*", "1e8", "\n", "att", "=", "self", ".", "event_softmax", "(", "t", ")", "\n", "his_fea", "=", "torch", ".", "sum", "(", "att", "*", "emb_fea", ",", "1", ")", "\n", "output", "=", "self", ".", "decoder", "(", "his_fea", ")", "\n", "return", "output", ".", "squeeze", "(", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.GMFBase.__init__": [[39, 44], ["super().__init__", "models.LookupEmbedding", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.__init__"], ["    ", "def", "__init__", "(", "self", ",", "uid_all", ",", "iid_all", ",", "emb_dim", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "emb_dim", "=", "emb_dim", "\n", "self", ".", "embedding", "=", "LookupEmbedding", "(", "uid_all", ",", "iid_all", ",", "emb_dim", ")", "\n", "self", ".", "linear", "=", "torch", ".", "nn", ".", "Linear", "(", "emb_dim", ",", "1", ",", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.GMFBase.forward": [[45, 50], ["models.GMFBase.embedding.forward", "models.GMFBase.linear", "models.GMFBase.squeeze"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "emb", "=", "self", ".", "embedding", ".", "forward", "(", "x", ")", "\n", "x", "=", "emb", "[", ":", ",", "0", ",", ":", "]", "*", "emb", "[", ":", ",", "1", ",", ":", "]", "\n", "x", "=", "self", ".", "linear", "(", "x", ")", "\n", "return", "x", ".", "squeeze", "(", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBase.__init__": [[53, 58], ["super().__init__", "models.LookupEmbedding", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.__init__"], ["    ", "def", "__init__", "(", "self", ",", "uid_all", ",", "iid_all", ",", "emb_dim", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "emb_dim", "=", "emb_dim", "\n", "self", ".", "embedding", "=", "LookupEmbedding", "(", "uid_all", ",", "iid_all", ",", "emb_dim", ")", "\n", "self", ".", "linear", "=", "torch", ".", "nn", ".", "Linear", "(", "emb_dim", ",", "emb_dim", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBase.forward": [[59, 63], ["models.DNNBase.embedding.forward", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "models.DNNBase.linear"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "emb", "=", "self", ".", "embedding", ".", "forward", "(", "x", ")", "\n", "x", "=", "torch", ".", "sum", "(", "self", ".", "linear", "(", "emb", "[", ":", ",", "0", ",", ":", "]", ")", "*", "emb", "[", ":", ",", "1", ",", ":", "]", ",", "1", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.MFBasedModel.__init__": [[66, 75], ["super().__init__", "models.LookupEmbedding", "models.LookupEmbedding", "models.LookupEmbedding", "models.MetaNet", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.__init__"], ["    ", "def", "__init__", "(", "self", ",", "uid_all", ",", "iid_all", ",", "num_fields", ",", "emb_dim", ",", "meta_dim_0", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "num_fields", "=", "num_fields", "\n", "self", ".", "emb_dim", "=", "emb_dim", "\n", "self", ".", "src_model", "=", "LookupEmbedding", "(", "uid_all", ",", "iid_all", ",", "emb_dim", ")", "\n", "self", ".", "tgt_model", "=", "LookupEmbedding", "(", "uid_all", ",", "iid_all", ",", "emb_dim", ")", "\n", "self", ".", "aug_model", "=", "LookupEmbedding", "(", "uid_all", ",", "iid_all", ",", "emb_dim", ")", "\n", "self", ".", "meta_net", "=", "MetaNet", "(", "emb_dim", ",", "meta_dim_0", ")", "\n", "self", ".", "mapping", "=", "torch", ".", "nn", ".", "Linear", "(", "emb_dim", ",", "emb_dim", ",", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.MFBasedModel.forward": [[76, 109], ["models.MFBasedModel.src_model.forward", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "models.MFBasedModel.tgt_model.forward", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "models.MFBasedModel.aug_model.forward", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "models.MFBasedModel.tgt_model.iid_embedding", "models.MFBasedModel.src_model.uid_embedding", "models.MFBasedModel.src_model.iid_embedding", "models.MFBasedModel.meta_net.forward().view", "torch.bmm", "torch.bmm", "torch.bmm", "torch.bmm", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "x[].unsqueeze", "x[].unsqueeze", "models.MFBasedModel.src_model.uid_embedding().squeeze", "models.MFBasedModel.mapping.forward", "models.MFBasedModel.tgt_model.uid_embedding().squeeze", "models.MFBasedModel.meta_net.forward", "models.MFBasedModel.mapping.forward", "models.MFBasedModel.tgt_model.forward", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "models.MFBasedModel.src_model.uid_embedding", "models.MFBasedModel.tgt_model.uid_embedding", "models.MFBasedModel.src_model.uid_embedding().squeeze", "torch.sum.unsqueeze", "torch.sum.unsqueeze", "torch.sum.unsqueeze", "torch.sum.unsqueeze", "models.MFBasedModel.src_model.uid_embedding", "x[].unsqueeze"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward"], ["", "def", "forward", "(", "self", ",", "x", ",", "stage", ")", ":", "\n", "        ", "if", "stage", "==", "'train_src'", ":", "\n", "            ", "emb", "=", "self", ".", "src_model", ".", "forward", "(", "x", ")", "\n", "x", "=", "torch", ".", "sum", "(", "emb", "[", ":", ",", "0", ",", ":", "]", "*", "emb", "[", ":", ",", "1", ",", ":", "]", ",", "dim", "=", "1", ")", "\n", "return", "x", "\n", "", "elif", "stage", "in", "[", "'train_tgt'", ",", "'test_tgt'", "]", ":", "\n", "            ", "emb", "=", "self", ".", "tgt_model", ".", "forward", "(", "x", ")", "\n", "x", "=", "torch", ".", "sum", "(", "emb", "[", ":", ",", "0", ",", ":", "]", "*", "emb", "[", ":", ",", "1", ",", ":", "]", ",", "dim", "=", "1", ")", "\n", "return", "x", "\n", "", "elif", "stage", "in", "[", "'train_aug'", ",", "'test_aug'", "]", ":", "\n", "            ", "emb", "=", "self", ".", "aug_model", ".", "forward", "(", "x", ")", "\n", "x", "=", "torch", ".", "sum", "(", "emb", "[", ":", ",", "0", ",", ":", "]", "*", "emb", "[", ":", ",", "1", ",", ":", "]", ",", "dim", "=", "1", ")", "\n", "return", "x", "\n", "", "elif", "stage", "in", "[", "'train_meta'", ",", "'test_meta'", "]", ":", "\n", "            ", "iid_emb", "=", "self", ".", "tgt_model", ".", "iid_embedding", "(", "x", "[", ":", ",", "1", "]", ".", "unsqueeze", "(", "1", ")", ")", "\n", "uid_emb_src", "=", "self", ".", "src_model", ".", "uid_embedding", "(", "x", "[", ":", ",", "0", "]", ".", "unsqueeze", "(", "1", ")", ")", "\n", "ufea", "=", "self", ".", "src_model", ".", "iid_embedding", "(", "x", "[", ":", ",", "2", ":", "]", ")", "\n", "mapping", "=", "self", ".", "meta_net", ".", "forward", "(", "ufea", ",", "x", "[", ":", ",", "2", ":", "]", ")", ".", "view", "(", "-", "1", ",", "self", ".", "emb_dim", ",", "self", ".", "emb_dim", ")", "\n", "uid_emb", "=", "torch", ".", "bmm", "(", "uid_emb_src", ",", "mapping", ")", "\n", "emb", "=", "torch", ".", "cat", "(", "[", "uid_emb", ",", "iid_emb", "]", ",", "1", ")", "\n", "output", "=", "torch", ".", "sum", "(", "emb", "[", ":", ",", "0", ",", ":", "]", "*", "emb", "[", ":", ",", "1", ",", ":", "]", ",", "dim", "=", "1", ")", "\n", "return", "output", "\n", "", "elif", "stage", "==", "'train_map'", ":", "\n", "            ", "src_emb", "=", "self", ".", "src_model", ".", "uid_embedding", "(", "x", ".", "unsqueeze", "(", "1", ")", ")", ".", "squeeze", "(", ")", "\n", "src_emb", "=", "self", ".", "mapping", ".", "forward", "(", "src_emb", ")", "\n", "tgt_emb", "=", "self", ".", "tgt_model", ".", "uid_embedding", "(", "x", ".", "unsqueeze", "(", "1", ")", ")", ".", "squeeze", "(", ")", "\n", "return", "src_emb", ",", "tgt_emb", "\n", "", "elif", "stage", "==", "'test_map'", ":", "\n", "            ", "uid_emb", "=", "self", ".", "mapping", ".", "forward", "(", "self", ".", "src_model", ".", "uid_embedding", "(", "x", "[", ":", ",", "0", "]", ".", "unsqueeze", "(", "1", ")", ")", ".", "squeeze", "(", ")", ")", "\n", "emb", "=", "self", ".", "tgt_model", ".", "forward", "(", "x", ")", "\n", "emb", "[", ":", ",", "0", ",", ":", "]", "=", "uid_emb", "\n", "x", "=", "torch", ".", "sum", "(", "emb", "[", ":", ",", "0", ",", ":", "]", "*", "emb", "[", ":", ",", "1", ",", ":", "]", ",", "dim", "=", "1", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.GMFBasedModel.__init__": [[112, 121], ["super().__init__", "models.GMFBase", "models.GMFBase", "models.GMFBase", "models.MetaNet", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.__init__"], ["    ", "def", "__init__", "(", "self", ",", "uid_all", ",", "iid_all", ",", "num_fields", ",", "emb_dim", ",", "meta_dim", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "num_fields", "=", "num_fields", "\n", "self", ".", "emb_dim", "=", "emb_dim", "\n", "self", ".", "src_model", "=", "GMFBase", "(", "uid_all", ",", "iid_all", ",", "emb_dim", ")", "\n", "self", ".", "tgt_model", "=", "GMFBase", "(", "uid_all", ",", "iid_all", ",", "emb_dim", ")", "\n", "self", ".", "aug_model", "=", "GMFBase", "(", "uid_all", ",", "iid_all", ",", "emb_dim", ")", "\n", "self", ".", "meta_net", "=", "MetaNet", "(", "emb_dim", ",", "meta_dim", ")", "\n", "self", ".", "mapping", "=", "torch", ".", "nn", ".", "Linear", "(", "emb_dim", ",", "emb_dim", ",", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.GMFBasedModel.forward": [[122, 152], ["models.GMFBasedModel.src_model.forward", "models.GMFBasedModel.tgt_model.forward", "models.GMFBasedModel.aug_model.forward", "models.GMFBasedModel.tgt_model.embedding.iid_embedding", "models.GMFBasedModel.src_model.embedding.uid_embedding", "models.GMFBasedModel.src_model.embedding.iid_embedding", "models.GMFBasedModel.meta_net.forward().view", "torch.bmm", "torch.bmm", "torch.bmm", "torch.bmm", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "models.GMFBasedModel.tgt_model.linear", "models.GMFBasedModel.squeeze", "x[].unsqueeze", "x[].unsqueeze", "models.GMFBasedModel.src_model.embedding.uid_embedding().squeeze", "models.GMFBasedModel.mapping.forward", "models.GMFBasedModel.tgt_model.embedding.uid_embedding().squeeze", "models.GMFBasedModel.meta_net.forward", "models.GMFBasedModel.mapping.forward", "models.GMFBasedModel.tgt_model.embedding.iid_embedding", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "models.GMFBasedModel.tgt_model.linear", "models.GMFBasedModel.squeeze", "models.GMFBasedModel.src_model.embedding.uid_embedding", "models.GMFBasedModel.tgt_model.embedding.uid_embedding", "models.GMFBasedModel.src_model.embedding.uid_embedding", "x[].unsqueeze", "models.GMFBasedModel.unsqueeze", "models.GMFBasedModel.unsqueeze", "x[].unsqueeze"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward"], ["", "def", "forward", "(", "self", ",", "x", ",", "stage", ")", ":", "\n", "        ", "if", "stage", "==", "'train_src'", ":", "\n", "            ", "x", "=", "self", ".", "src_model", ".", "forward", "(", "x", ")", "\n", "return", "x", "\n", "", "elif", "stage", "in", "[", "'train_tgt'", ",", "'test_tgt'", "]", ":", "\n", "            ", "x", "=", "self", ".", "tgt_model", ".", "forward", "(", "x", ")", "\n", "return", "x", "\n", "", "elif", "stage", "in", "[", "'train_aug'", ",", "'test_aug'", "]", ":", "\n", "            ", "x", "=", "self", ".", "aug_model", ".", "forward", "(", "x", ")", "\n", "return", "x", "\n", "", "elif", "stage", "in", "[", "'test_meta'", ",", "'train_meta'", "]", ":", "\n", "            ", "iid_emb", "=", "self", ".", "tgt_model", ".", "embedding", ".", "iid_embedding", "(", "x", "[", ":", ",", "1", "]", ".", "unsqueeze", "(", "1", ")", ")", "\n", "uid_emb_src", "=", "self", ".", "src_model", ".", "embedding", ".", "uid_embedding", "(", "x", "[", ":", ",", "0", "]", ".", "unsqueeze", "(", "1", ")", ")", "\n", "ufea", "=", "self", ".", "src_model", ".", "embedding", ".", "iid_embedding", "(", "x", "[", ":", ",", "2", ":", "]", ")", "\n", "mapping", "=", "self", ".", "meta_net", ".", "forward", "(", "ufea", ",", "x", "[", ":", ",", "2", ":", "]", ")", ".", "view", "(", "-", "1", ",", "self", ".", "emb_dim", ",", "self", ".", "emb_dim", ")", "\n", "uid_emb", "=", "torch", ".", "bmm", "(", "uid_emb_src", ",", "mapping", ")", "\n", "emb", "=", "torch", ".", "cat", "(", "[", "uid_emb", ",", "iid_emb", "]", ",", "1", ")", "\n", "output", "=", "self", ".", "tgt_model", ".", "linear", "(", "emb", "[", ":", ",", "0", ",", ":", "]", "*", "emb", "[", ":", ",", "1", ",", ":", "]", ")", "\n", "return", "output", ".", "squeeze", "(", "1", ")", "\n", "", "elif", "stage", "==", "'train_map'", ":", "\n", "            ", "src_emb", "=", "self", ".", "src_model", ".", "embedding", ".", "uid_embedding", "(", "x", ".", "unsqueeze", "(", "1", ")", ")", ".", "squeeze", "(", ")", "\n", "src_emb", "=", "self", ".", "mapping", ".", "forward", "(", "src_emb", ")", "\n", "tgt_emb", "=", "self", ".", "tgt_model", ".", "embedding", ".", "uid_embedding", "(", "x", ".", "unsqueeze", "(", "1", ")", ")", ".", "squeeze", "(", ")", "\n", "return", "src_emb", ",", "tgt_emb", "\n", "", "elif", "stage", "==", "'test_map'", ":", "\n", "            ", "uid_emb", "=", "self", ".", "mapping", ".", "forward", "(", "self", ".", "src_model", ".", "embedding", ".", "uid_embedding", "(", "x", "[", ":", ",", "0", "]", ".", "unsqueeze", "(", "1", ")", ")", ")", "\n", "iid_emb", "=", "self", ".", "tgt_model", ".", "embedding", ".", "iid_embedding", "(", "x", "[", ":", ",", "1", "]", ".", "unsqueeze", "(", "1", ")", ")", "\n", "emb", "=", "torch", ".", "cat", "(", "[", "uid_emb", ",", "iid_emb", "]", ",", "1", ")", "\n", "x", "=", "self", ".", "tgt_model", ".", "linear", "(", "emb", "[", ":", ",", "0", ",", ":", "]", "*", "emb", "[", ":", ",", "1", ",", ":", "]", ")", "\n", "return", "x", ".", "squeeze", "(", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.__init__": [[155, 164], ["super().__init__", "models.DNNBase", "models.DNNBase", "models.DNNBase", "models.MetaNet", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Linear"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.__init__"], ["    ", "def", "__init__", "(", "self", ",", "uid_all", ",", "iid_all", ",", "num_fields", ",", "emb_dim", ",", "meta_dim", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "num_fields", "=", "num_fields", "\n", "self", ".", "emb_dim", "=", "emb_dim", "\n", "self", ".", "src_model", "=", "DNNBase", "(", "uid_all", ",", "iid_all", ",", "emb_dim", ")", "\n", "self", ".", "tgt_model", "=", "DNNBase", "(", "uid_all", ",", "iid_all", ",", "emb_dim", ")", "\n", "self", ".", "aug_model", "=", "DNNBase", "(", "uid_all", ",", "iid_all", ",", "emb_dim", ")", "\n", "self", ".", "meta_net", "=", "MetaNet", "(", "emb_dim", ",", "meta_dim", ")", "\n", "self", ".", "mapping", "=", "torch", ".", "nn", ".", "Linear", "(", "emb_dim", ",", "emb_dim", ",", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward": [[165, 195], ["models.DNNBasedModel.src_model.forward", "models.DNNBasedModel.tgt_model.forward", "models.DNNBasedModel.aug_model.forward", "models.DNNBasedModel.tgt_model.embedding.iid_embedding", "models.DNNBasedModel.src_model.linear", "models.DNNBasedModel.src_model.embedding.iid_embedding", "models.DNNBasedModel.meta_net.forward().view", "torch.bmm", "torch.bmm", "torch.bmm", "torch.bmm", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "x[].unsqueeze", "models.DNNBasedModel.src_model.embedding.uid_embedding", "models.DNNBasedModel.src_model.linear", "models.DNNBasedModel.mapping.forward", "models.DNNBasedModel.tgt_model.linear", "x[].unsqueeze", "models.DNNBasedModel.meta_net.forward", "models.DNNBasedModel.src_model.embedding.uid_embedding().squeeze", "models.DNNBasedModel.tgt_model.embedding.uid_embedding().squeeze", "models.DNNBasedModel.mapping.forward", "models.DNNBasedModel.tgt_model.embedding.iid_embedding", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "models.DNNBasedModel.src_model.linear", "x[].unsqueeze", "models.DNNBasedModel.src_model.embedding.uid_embedding", "models.DNNBasedModel.tgt_model.embedding.uid_embedding", "models.DNNBasedModel.src_model.embedding.uid_embedding", "torch.sum.unsqueeze", "torch.sum.unsqueeze", "torch.sum.unsqueeze", "torch.sum.unsqueeze", "x[].unsqueeze"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.models.DNNBasedModel.forward"], ["", "def", "forward", "(", "self", ",", "x", ",", "stage", ")", ":", "\n", "        ", "if", "stage", "==", "'train_src'", ":", "\n", "            ", "x", "=", "self", ".", "src_model", ".", "forward", "(", "x", ")", "\n", "return", "x", "\n", "", "elif", "stage", "in", "[", "'train_tgt'", ",", "'test_tgt'", "]", ":", "\n", "            ", "x", "=", "self", ".", "tgt_model", ".", "forward", "(", "x", ")", "\n", "return", "x", "\n", "", "elif", "stage", "in", "[", "'train_aug'", ",", "'test_aug'", "]", ":", "\n", "            ", "x", "=", "self", ".", "aug_model", ".", "forward", "(", "x", ")", "\n", "return", "x", "\n", "", "elif", "stage", "in", "[", "'test_meta'", ",", "'train_meta'", "]", ":", "\n", "            ", "iid_emb", "=", "self", ".", "tgt_model", ".", "embedding", ".", "iid_embedding", "(", "x", "[", ":", ",", "1", "]", ".", "unsqueeze", "(", "1", ")", ")", "\n", "uid_emb_src", "=", "self", ".", "src_model", ".", "linear", "(", "self", ".", "src_model", ".", "embedding", ".", "uid_embedding", "(", "x", "[", ":", ",", "0", "]", ".", "unsqueeze", "(", "1", ")", ")", ")", "\n", "ufea", "=", "self", ".", "src_model", ".", "embedding", ".", "iid_embedding", "(", "x", "[", ":", ",", "2", ":", "]", ")", "\n", "mapping", "=", "self", ".", "meta_net", ".", "forward", "(", "ufea", ",", "x", "[", ":", ",", "2", ":", "]", ")", ".", "view", "(", "-", "1", ",", "self", ".", "emb_dim", ",", "self", ".", "emb_dim", ")", "\n", "uid_emb", "=", "torch", ".", "bmm", "(", "uid_emb_src", ",", "mapping", ")", "\n", "emb", "=", "torch", ".", "cat", "(", "[", "uid_emb", ",", "iid_emb", "]", ",", "1", ")", "\n", "output", "=", "torch", ".", "sum", "(", "emb", "[", ":", ",", "0", ",", ":", "]", "*", "emb", "[", ":", ",", "1", ",", ":", "]", ",", "1", ")", "\n", "return", "output", "\n", "", "elif", "stage", "==", "'train_map'", ":", "\n", "            ", "src_emb", "=", "self", ".", "src_model", ".", "linear", "(", "self", ".", "src_model", ".", "embedding", ".", "uid_embedding", "(", "x", ".", "unsqueeze", "(", "1", ")", ")", ".", "squeeze", "(", ")", ")", "\n", "src_emb", "=", "self", ".", "mapping", ".", "forward", "(", "src_emb", ")", "\n", "tgt_emb", "=", "self", ".", "tgt_model", ".", "linear", "(", "self", ".", "tgt_model", ".", "embedding", ".", "uid_embedding", "(", "x", ".", "unsqueeze", "(", "1", ")", ")", ".", "squeeze", "(", ")", ")", "\n", "return", "src_emb", ",", "tgt_emb", "\n", "", "elif", "stage", "==", "'test_map'", ":", "\n", "            ", "uid_emb", "=", "self", ".", "mapping", ".", "forward", "(", "self", ".", "src_model", ".", "linear", "(", "self", ".", "src_model", ".", "embedding", ".", "uid_embedding", "(", "x", "[", ":", ",", "0", "]", ".", "unsqueeze", "(", "1", ")", ")", ")", ")", "\n", "iid_emb", "=", "self", ".", "tgt_model", ".", "embedding", ".", "iid_embedding", "(", "x", "[", ":", ",", "1", "]", ".", "unsqueeze", "(", "1", ")", ")", "\n", "emb", "=", "torch", ".", "cat", "(", "[", "uid_emb", ",", "iid_emb", "]", ",", "1", ")", "\n", "x", "=", "torch", ".", "sum", "(", "emb", "[", ":", ",", "0", ",", ":", "]", "*", "emb", "[", ":", ",", "1", ",", ":", "]", ",", "1", ")", "\n", "return", "x", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.preprocessing.DataPreprocessingMid.__init__": [[9, 14], ["None"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "\n", "root", ",", "\n", "dealing", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "dealing", "=", "dealing", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.preprocessing.DataPreprocessingMid.main": [[15, 26], ["print", "pandas.DataFrame", "print", "pandas.DataFrame.to_csv", "gzip.open", "tqdm.tqdm", "json.loads", "pandas.DataFrame.append"], "methods", ["None"], ["", "def", "main", "(", "self", ")", ":", "\n", "        ", "print", "(", "'Parsing '", "+", "self", ".", "dealing", "+", "' Mid...'", ")", "\n", "re", "=", "[", "]", "\n", "with", "gzip", ".", "open", "(", "self", ".", "root", "+", "'raw/reviews_'", "+", "self", ".", "dealing", "+", "'_5.json.gz'", ",", "'rb'", ")", "as", "f", ":", "\n", "            ", "for", "line", "in", "tqdm", ".", "tqdm", "(", "f", ",", "smoothing", "=", "0", ",", "mininterval", "=", "1.0", ")", ":", "\n", "                ", "line", "=", "json", ".", "loads", "(", "line", ")", "\n", "re", ".", "append", "(", "[", "line", "[", "'reviewerID'", "]", ",", "line", "[", "'asin'", "]", ",", "line", "[", "'overall'", "]", "]", ")", "\n", "", "", "re", "=", "pd", ".", "DataFrame", "(", "re", ",", "columns", "=", "[", "'uid'", ",", "'iid'", ",", "'y'", "]", ")", "\n", "print", "(", "self", ".", "dealing", "+", "' Mid Done.'", ")", "\n", "re", ".", "to_csv", "(", "self", ".", "root", "+", "'mid/'", "+", "self", ".", "dealing", "+", "'.csv'", ",", "index", "=", "0", ")", "\n", "return", "re", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.preprocessing.DataPreprocessingReady.__init__": [[28, 37], ["None"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "\n", "root", ",", "\n", "src_tgt_pairs", ",", "\n", "task", ",", "\n", "ratio", ")", ":", "\n", "        ", "self", ".", "root", "=", "root", "\n", "self", ".", "src", "=", "src_tgt_pairs", "[", "task", "]", "[", "'src'", "]", "\n", "self", ".", "tgt", "=", "src_tgt_pairs", "[", "task", "]", "[", "'tgt'", "]", "\n", "self", ".", "ratio", "=", "ratio", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.preprocessing.DataPreprocessingReady.read_mid": [[38, 42], ["pandas.read_csv"], "methods", ["None"], ["", "def", "read_mid", "(", "self", ",", "field", ")", ":", "\n", "        ", "path", "=", "self", ".", "root", "+", "'mid/'", "+", "field", "+", "'.csv'", "\n", "re", "=", "pd", ".", "read_csv", "(", "path", ")", "\n", "return", "re", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.preprocessing.DataPreprocessingReady.mapper": [[43, 57], ["print", "print", "print", "dict", "dict", "dict", "src.uid.map", "src.iid.map", "tgt.uid.map", "tgt.iid.map", "set", "set", "set", "set", "zip", "zip", "zip", "len", "len", "len", "len", "len", "len", "len", "len", "range", "set", "range", "set", "range", "set", "set", "set", "set", "len", "len", "len", "set", "set", "len", "len", "set", "set"], "methods", ["None"], ["", "def", "mapper", "(", "self", ",", "src", ",", "tgt", ")", ":", "\n", "        ", "print", "(", "'Source inters: {}, uid: {}, iid: {}.'", ".", "format", "(", "len", "(", "src", ")", ",", "len", "(", "set", "(", "src", ".", "uid", ")", ")", ",", "len", "(", "set", "(", "src", ".", "iid", ")", ")", ")", ")", "\n", "print", "(", "'Target inters: {}, uid: {}, iid: {}.'", ".", "format", "(", "len", "(", "tgt", ")", ",", "len", "(", "set", "(", "tgt", ".", "uid", ")", ")", ",", "len", "(", "set", "(", "tgt", ".", "iid", ")", ")", ")", ")", "\n", "co_uid", "=", "set", "(", "src", ".", "uid", ")", "&", "set", "(", "tgt", ".", "uid", ")", "\n", "all_uid", "=", "set", "(", "src", ".", "uid", ")", "|", "set", "(", "tgt", ".", "uid", ")", "\n", "print", "(", "'All uid: {}, Co uid: {}.'", ".", "format", "(", "len", "(", "all_uid", ")", ",", "len", "(", "co_uid", ")", ")", ")", "\n", "uid_dict", "=", "dict", "(", "zip", "(", "all_uid", ",", "range", "(", "len", "(", "all_uid", ")", ")", ")", ")", "\n", "iid_dict_src", "=", "dict", "(", "zip", "(", "set", "(", "src", ".", "iid", ")", ",", "range", "(", "len", "(", "set", "(", "src", ".", "iid", ")", ")", ")", ")", ")", "\n", "iid_dict_tgt", "=", "dict", "(", "zip", "(", "set", "(", "tgt", ".", "iid", ")", ",", "range", "(", "len", "(", "set", "(", "src", ".", "iid", ")", ")", ",", "len", "(", "set", "(", "src", ".", "iid", ")", ")", "+", "len", "(", "set", "(", "tgt", ".", "iid", ")", ")", ")", ")", ")", "\n", "src", ".", "uid", "=", "src", ".", "uid", ".", "map", "(", "uid_dict", ")", "\n", "src", ".", "iid", "=", "src", ".", "iid", ".", "map", "(", "iid_dict_src", ")", "\n", "tgt", ".", "uid", "=", "tgt", ".", "uid", ".", "map", "(", "uid_dict", ")", "\n", "tgt", ".", "iid", "=", "tgt", ".", "iid", ".", "map", "(", "iid_dict_tgt", ")", "\n", "return", "src", ",", "tgt", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.preprocessing.DataPreprocessingReady.get_history": [[58, 64], ["tqdm.tqdm", "data[].iid.values.tolist"], "methods", ["None"], ["", "def", "get_history", "(", "self", ",", "data", ",", "uid_set", ")", ":", "\n", "        ", "pos_seq_dict", "=", "{", "}", "\n", "for", "uid", "in", "tqdm", ".", "tqdm", "(", "uid_set", ")", ":", "\n", "            ", "pos", "=", "data", "[", "(", "data", ".", "uid", "==", "uid", ")", "&", "(", "data", ".", "y", ">", "3", ")", "]", ".", "iid", ".", "values", ".", "tolist", "(", ")", "\n", "pos_seq_dict", "[", "uid", "]", "=", "pos", "\n", "", "return", "pos_seq_dict", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.preprocessing.DataPreprocessingReady.split": [[65, 79], ["print", "set", "set", "set", "preprocessing.DataPreprocessingReady.get_history", "train_meta[].map", "test[].map", "src.uid.unique", "tgt.uid.unique", "random.sample", "len", "round", "tgt[].isin", "tgt[].isin", "tgt[].isin", "set", "set", "len"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.preprocessing.DataPreprocessingReady.get_history"], ["", "def", "split", "(", "self", ",", "src", ",", "tgt", ")", ":", "\n", "        ", "print", "(", "'All iid: {}.'", ".", "format", "(", "len", "(", "set", "(", "src", ".", "iid", ")", "|", "set", "(", "tgt", ".", "iid", ")", ")", ")", ")", "\n", "src_users", "=", "set", "(", "src", ".", "uid", ".", "unique", "(", ")", ")", "\n", "tgt_users", "=", "set", "(", "tgt", ".", "uid", ".", "unique", "(", ")", ")", "\n", "co_users", "=", "src_users", "&", "tgt_users", "\n", "test_users", "=", "set", "(", "random", ".", "sample", "(", "co_users", ",", "round", "(", "self", ".", "ratio", "[", "1", "]", "*", "len", "(", "co_users", ")", ")", ")", ")", "\n", "train_src", "=", "src", "\n", "train_tgt", "=", "tgt", "[", "tgt", "[", "'uid'", "]", ".", "isin", "(", "tgt_users", "-", "test_users", ")", "]", "\n", "test", "=", "tgt", "[", "tgt", "[", "'uid'", "]", ".", "isin", "(", "test_users", ")", "]", "\n", "pos_seq_dict", "=", "self", ".", "get_history", "(", "src", ",", "co_users", ")", "\n", "train_meta", "=", "tgt", "[", "tgt", "[", "'uid'", "]", ".", "isin", "(", "co_users", "-", "test_users", ")", "]", "\n", "train_meta", "[", "'pos_seq'", "]", "=", "train_meta", "[", "'uid'", "]", ".", "map", "(", "pos_seq_dict", ")", "\n", "test", "[", "'pos_seq'", "]", "=", "test", "[", "'uid'", "]", ".", "map", "(", "pos_seq_dict", ")", "\n", "return", "train_src", ",", "train_tgt", ",", "train_meta", ",", "test", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.preprocessing.DataPreprocessingReady.save": [[80, 90], ["print", "train_src.to_csv", "train_tgt.to_csv", "train_meta.to_csv", "test.to_csv", "os.path.exists", "os.makedirs", "str", "int", "str", "int"], "methods", ["None"], ["", "def", "save", "(", "self", ",", "train_src", ",", "train_tgt", ",", "train_meta", ",", "test", ")", ":", "\n", "        ", "output_root", "=", "self", ".", "root", "+", "'ready/_'", "+", "str", "(", "int", "(", "self", ".", "ratio", "[", "0", "]", "*", "10", ")", ")", "+", "'_'", "+", "str", "(", "int", "(", "self", ".", "ratio", "[", "1", "]", "*", "10", ")", ")", "+", "'/tgt_'", "+", "self", ".", "tgt", "+", "'_src_'", "+", "self", ".", "src", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "output_root", ")", ":", "\n", "            ", "os", ".", "makedirs", "(", "output_root", ")", "\n", "", "print", "(", "output_root", ")", "\n", "train_src", ".", "to_csv", "(", "output_root", "+", "'/train_src.csv'", ",", "sep", "=", "','", ",", "header", "=", "None", ",", "index", "=", "False", ")", "\n", "train_tgt", ".", "to_csv", "(", "output_root", "+", "'/train_tgt.csv'", ",", "sep", "=", "','", ",", "header", "=", "None", ",", "index", "=", "False", ")", "\n", "train_meta", ".", "to_csv", "(", "output_root", "+", "'/train_meta.csv'", ",", "sep", "=", "','", ",", "header", "=", "None", ",", "index", "=", "False", ")", "\n", "test", ".", "to_csv", "(", "output_root", "+", "'/test.csv'", ",", "sep", "=", "','", ",", "header", "=", "None", ",", "index", "=", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.preprocessing.DataPreprocessingReady.main": [[91, 97], ["preprocessing.DataPreprocessingReady.read_mid", "preprocessing.DataPreprocessingReady.read_mid", "preprocessing.DataPreprocessingReady.mapper", "preprocessing.DataPreprocessingReady.split", "preprocessing.DataPreprocessingReady.save"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.preprocessing.DataPreprocessingReady.read_mid", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.preprocessing.DataPreprocessingReady.read_mid", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.preprocessing.DataPreprocessingReady.mapper", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.preprocessing.DataPreprocessingReady.split", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.preprocessing.DataPreprocessingReady.save"], ["", "def", "main", "(", "self", ")", ":", "\n", "        ", "src", "=", "self", ".", "read_mid", "(", "self", ".", "src", ")", "\n", "tgt", "=", "self", ".", "read_mid", "(", "self", ".", "tgt", ")", "\n", "src", ",", "tgt", "=", "self", ".", "mapper", "(", "src", ",", "tgt", ")", "\n", "train_src", ",", "train_tgt", ",", "train_meta", ",", "test", "=", "self", ".", "split", "(", "src", ",", "tgt", ")", "\n", "self", ".", "save", "(", "train_src", ",", "train_tgt", ",", "train_meta", ",", "test", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.__init__": [[11, 48], ["str", "int", "str", "int"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "\n", "config", "\n", ")", ":", "\n", "        ", "self", ".", "use_cuda", "=", "config", "[", "'use_cuda'", "]", "\n", "self", ".", "base_model", "=", "config", "[", "'base_model'", "]", "\n", "self", ".", "root", "=", "config", "[", "'root'", "]", "\n", "self", ".", "ratio", "=", "config", "[", "'ratio'", "]", "\n", "self", ".", "task", "=", "config", "[", "'task'", "]", "\n", "self", ".", "src", "=", "config", "[", "'src_tgt_pairs'", "]", "[", "self", ".", "task", "]", "[", "'src'", "]", "\n", "self", ".", "tgt", "=", "config", "[", "'src_tgt_pairs'", "]", "[", "self", ".", "task", "]", "[", "'tgt'", "]", "\n", "self", ".", "uid_all", "=", "config", "[", "'src_tgt_pairs'", "]", "[", "self", ".", "task", "]", "[", "'uid'", "]", "\n", "self", ".", "iid_all", "=", "config", "[", "'src_tgt_pairs'", "]", "[", "self", ".", "task", "]", "[", "'iid'", "]", "\n", "self", ".", "batchsize_src", "=", "config", "[", "'src_tgt_pairs'", "]", "[", "self", ".", "task", "]", "[", "'batchsize_src'", "]", "\n", "self", ".", "batchsize_tgt", "=", "config", "[", "'src_tgt_pairs'", "]", "[", "self", ".", "task", "]", "[", "'batchsize_tgt'", "]", "\n", "self", ".", "batchsize_meta", "=", "config", "[", "'src_tgt_pairs'", "]", "[", "self", ".", "task", "]", "[", "'batchsize_meta'", "]", "\n", "self", ".", "batchsize_map", "=", "config", "[", "'src_tgt_pairs'", "]", "[", "self", ".", "task", "]", "[", "'batchsize_map'", "]", "\n", "self", ".", "batchsize_test", "=", "config", "[", "'src_tgt_pairs'", "]", "[", "self", ".", "task", "]", "[", "'batchsize_test'", "]", "\n", "self", ".", "batchsize_aug", "=", "self", ".", "batchsize_src", "\n", "\n", "self", ".", "epoch", "=", "config", "[", "'epoch'", "]", "\n", "self", ".", "emb_dim", "=", "config", "[", "'emb_dim'", "]", "\n", "self", ".", "meta_dim", "=", "config", "[", "'meta_dim'", "]", "\n", "self", ".", "num_fields", "=", "config", "[", "'num_fields'", "]", "\n", "self", ".", "lr", "=", "config", "[", "'lr'", "]", "\n", "self", ".", "wd", "=", "config", "[", "'wd'", "]", "\n", "\n", "self", ".", "input_root", "=", "self", ".", "root", "+", "'ready/_'", "+", "str", "(", "int", "(", "self", ".", "ratio", "[", "0", "]", "*", "10", ")", ")", "+", "'_'", "+", "str", "(", "int", "(", "self", ".", "ratio", "[", "1", "]", "*", "10", ")", ")", "+", "'/tgt_'", "+", "self", ".", "tgt", "+", "'_src_'", "+", "self", ".", "src", "\n", "self", ".", "src_path", "=", "self", ".", "input_root", "+", "'/train_src.csv'", "\n", "self", ".", "tgt_path", "=", "self", ".", "input_root", "+", "'/train_tgt.csv'", "\n", "self", ".", "meta_path", "=", "self", ".", "input_root", "+", "'/train_meta.csv'", "\n", "self", ".", "test_path", "=", "self", ".", "input_root", "+", "'/test.csv'", "\n", "\n", "self", ".", "results", "=", "{", "'tgt_mae'", ":", "10", ",", "'tgt_rmse'", ":", "10", ",", "\n", "'aug_mae'", ":", "10", ",", "'aug_rmse'", ":", "10", ",", "\n", "'emcdr_mae'", ":", "10", ",", "'emcdr_rmse'", ":", "10", ",", "\n", "'ptupcdr_mae'", ":", "10", ",", "'ptupcdr_rmse'", ":", "10", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.seq_extractor": [[49, 57], ["x.rstrip().lstrip().split.rstrip().lstrip().split.rstrip().lstrip().split", "range", "numpy.array", "len", "x.rstrip().lstrip().split.rstrip().lstrip().split.rstrip().lstrip", "int", "x.rstrip().lstrip().split.rstrip().lstrip().split.rstrip"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.preprocessing.DataPreprocessingReady.split"], ["", "def", "seq_extractor", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "x", ".", "rstrip", "(", "']'", ")", ".", "lstrip", "(", "'['", ")", ".", "split", "(", "', '", ")", "\n", "for", "i", "in", "range", "(", "len", "(", "x", ")", ")", ":", "\n", "            ", "try", ":", "\n", "                ", "x", "[", "i", "]", "=", "int", "(", "x", "[", "i", "]", ")", "\n", "", "except", ":", "\n", "                ", "x", "[", "i", "]", "=", "self", ".", "iid_all", "\n", "", "", "return", "np", ".", "array", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.read_log_data": [[58, 90], ["pandas.read_csv", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.utils.data.TensorDataset", "torch.utils.data.TensorDataset", "torch.utils.data.DataLoader", "torch.utils.data.DataLoader", "pandas.read_csv", "tensorflow.keras.preprocessing.sequence.pad_sequences", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.utils.data.TensorDataset", "torch.utils.data.TensorDataset", "torch.utils.data.DataLoader", "torch.utils.data.DataLoader", "X.cuda.cuda.cuda", "y.cuda.cuda.cuda", "pandas.read_csv.pos_seq.map", "X.cuda.cuda.cuda", "y.cuda.cuda.cuda"], "methods", ["None"], ["", "def", "read_log_data", "(", "self", ",", "path", ",", "batchsize", ",", "history", "=", "False", ")", ":", "\n", "        ", "if", "not", "history", ":", "\n", "            ", "cols", "=", "[", "'uid'", ",", "'iid'", ",", "'y'", "]", "\n", "x_col", "=", "[", "'uid'", ",", "'iid'", "]", "\n", "y_col", "=", "[", "'y'", "]", "\n", "data", "=", "pd", ".", "read_csv", "(", "path", ",", "header", "=", "None", ")", "\n", "data", ".", "columns", "=", "cols", "\n", "X", "=", "torch", ".", "tensor", "(", "data", "[", "x_col", "]", ".", "values", ",", "dtype", "=", "torch", ".", "long", ")", "\n", "y", "=", "torch", ".", "tensor", "(", "data", "[", "y_col", "]", ".", "values", ",", "dtype", "=", "torch", ".", "long", ")", "\n", "if", "self", ".", "use_cuda", ":", "\n", "                ", "X", "=", "X", ".", "cuda", "(", ")", "\n", "y", "=", "y", ".", "cuda", "(", ")", "\n", "", "dataset", "=", "TensorDataset", "(", "X", ",", "y", ")", "\n", "data_iter", "=", "DataLoader", "(", "dataset", ",", "batchsize", ",", "shuffle", "=", "True", ")", "\n", "return", "data_iter", "\n", "", "else", ":", "\n", "            ", "data", "=", "pd", ".", "read_csv", "(", "path", ",", "header", "=", "None", ")", "\n", "cols", "=", "[", "'uid'", ",", "'iid'", ",", "'y'", ",", "'pos_seq'", "]", "\n", "x_col", "=", "[", "'uid'", ",", "'iid'", "]", "\n", "y_col", "=", "[", "'y'", "]", "\n", "data", ".", "columns", "=", "cols", "\n", "pos_seq", "=", "keras", ".", "preprocessing", ".", "sequence", ".", "pad_sequences", "(", "data", ".", "pos_seq", ".", "map", "(", "self", ".", "seq_extractor", ")", ",", "maxlen", "=", "20", ",", "padding", "=", "'post'", ")", "\n", "pos_seq", "=", "torch", ".", "tensor", "(", "pos_seq", ",", "dtype", "=", "torch", ".", "long", ")", "\n", "id_fea", "=", "torch", ".", "tensor", "(", "data", "[", "x_col", "]", ".", "values", ",", "dtype", "=", "torch", ".", "long", ")", "\n", "X", "=", "torch", ".", "cat", "(", "[", "id_fea", ",", "pos_seq", "]", ",", "dim", "=", "1", ")", "\n", "y", "=", "torch", ".", "tensor", "(", "data", "[", "y_col", "]", ".", "values", ",", "dtype", "=", "torch", ".", "long", ")", "\n", "if", "self", ".", "use_cuda", ":", "\n", "                ", "X", "=", "X", ".", "cuda", "(", ")", "\n", "y", "=", "y", ".", "cuda", "(", ")", "\n", "", "dataset", "=", "TensorDataset", "(", "X", ",", "y", ")", "\n", "data_iter", "=", "DataLoader", "(", "dataset", ",", "batchsize", ",", "shuffle", "=", "True", ")", "\n", "return", "data_iter", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.read_map_data": [[91, 103], ["pandas.read_csv", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.utils.data.TensorDataset", "torch.utils.data.TensorDataset", "torch.utils.data.DataLoader", "torch.utils.data.DataLoader", "data[].unique", "numpy.array", "X.cuda.cuda.cuda", "y.cuda.cuda.cuda", "range"], "methods", ["None"], ["", "", "def", "read_map_data", "(", "self", ")", ":", "\n", "        ", "cols", "=", "[", "'uid'", ",", "'iid'", ",", "'y'", ",", "'pos_seq'", "]", "\n", "data", "=", "pd", ".", "read_csv", "(", "self", ".", "meta_path", ",", "header", "=", "None", ")", "\n", "data", ".", "columns", "=", "cols", "\n", "X", "=", "torch", ".", "tensor", "(", "data", "[", "'uid'", "]", ".", "unique", "(", ")", ",", "dtype", "=", "torch", ".", "long", ")", "\n", "y", "=", "torch", ".", "tensor", "(", "np", ".", "array", "(", "range", "(", "X", ".", "shape", "[", "0", "]", ")", ")", ",", "dtype", "=", "torch", ".", "long", ")", "\n", "if", "self", ".", "use_cuda", ":", "\n", "            ", "X", "=", "X", ".", "cuda", "(", ")", "\n", "y", "=", "y", ".", "cuda", "(", ")", "\n", "", "dataset", "=", "TensorDataset", "(", "X", ",", "y", ")", "\n", "data_iter", "=", "DataLoader", "(", "dataset", ",", "self", ".", "batchsize_map", ",", "shuffle", "=", "True", ")", "\n", "return", "data_iter", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.read_aug_data": [[104, 126], ["pandas.read_csv", "pandas.read_csv", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.utils.data.TensorDataset", "torch.utils.data.TensorDataset", "torch.utils.data.DataLoader", "torch.utils.data.DataLoader", "X.cuda.cuda.cuda", "y.cuda.cuda.cuda"], "methods", ["None"], ["", "def", "read_aug_data", "(", "self", ")", ":", "\n", "        ", "cols_train", "=", "[", "'uid'", ",", "'iid'", ",", "'y'", "]", "\n", "x_col", "=", "[", "'uid'", ",", "'iid'", "]", "\n", "y_col", "=", "[", "'y'", "]", "\n", "src", "=", "pd", ".", "read_csv", "(", "self", ".", "src_path", ",", "header", "=", "None", ")", "\n", "src", ".", "columns", "=", "cols_train", "\n", "tgt", "=", "pd", ".", "read_csv", "(", "self", ".", "tgt_path", ",", "header", "=", "None", ")", "\n", "tgt", ".", "columns", "=", "cols_train", "\n", "\n", "X_src", "=", "torch", ".", "tensor", "(", "src", "[", "x_col", "]", ".", "values", ",", "dtype", "=", "torch", ".", "long", ")", "\n", "y_src", "=", "torch", ".", "tensor", "(", "src", "[", "y_col", "]", ".", "values", ",", "dtype", "=", "torch", ".", "long", ")", "\n", "X_tgt", "=", "torch", ".", "tensor", "(", "tgt", "[", "x_col", "]", ".", "values", ",", "dtype", "=", "torch", ".", "long", ")", "\n", "y_tgt", "=", "torch", ".", "tensor", "(", "tgt", "[", "y_col", "]", ".", "values", ",", "dtype", "=", "torch", ".", "long", ")", "\n", "X", "=", "torch", ".", "cat", "(", "[", "X_src", ",", "X_tgt", "]", ")", "\n", "y", "=", "torch", ".", "cat", "(", "[", "y_src", ",", "y_tgt", "]", ")", "\n", "if", "self", ".", "use_cuda", ":", "\n", "            ", "X", "=", "X", ".", "cuda", "(", ")", "\n", "y", "=", "y", ".", "cuda", "(", ")", "\n", "", "dataset", "=", "TensorDataset", "(", "X", ",", "y", ")", "\n", "data_iter", "=", "DataLoader", "(", "dataset", ",", "self", ".", "batchsize_aug", ",", "shuffle", "=", "True", ")", "\n", "\n", "return", "data_iter", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.get_data": [[127, 148], ["print", "run.Run.read_log_data", "print", "run.Run.read_log_data", "print", "run.Run.read_log_data", "print", "run.Run.read_map_data", "print", "run.Run.read_aug_data", "print", "run.Run.read_log_data", "print", "len", "len", "len", "len", "len", "len"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.read_log_data", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.read_log_data", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.read_log_data", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.read_map_data", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.read_aug_data", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.read_log_data"], ["", "def", "get_data", "(", "self", ")", ":", "\n", "        ", "print", "(", "'========Reading data========'", ")", "\n", "data_src", "=", "self", ".", "read_log_data", "(", "self", ".", "src_path", ",", "self", ".", "batchsize_src", ")", "\n", "print", "(", "'src {} iter / batchsize = {} '", ".", "format", "(", "len", "(", "data_src", ")", ",", "self", ".", "batchsize_src", ")", ")", "\n", "\n", "data_tgt", "=", "self", ".", "read_log_data", "(", "self", ".", "tgt_path", ",", "self", ".", "batchsize_tgt", ")", "\n", "print", "(", "'tgt {} iter / batchsize = {} '", ".", "format", "(", "len", "(", "data_tgt", ")", ",", "self", ".", "batchsize_tgt", ")", ")", "\n", "\n", "data_meta", "=", "self", ".", "read_log_data", "(", "self", ".", "meta_path", ",", "self", ".", "batchsize_meta", ",", "history", "=", "True", ")", "\n", "print", "(", "'meta {} iter / batchsize = {} '", ".", "format", "(", "len", "(", "data_meta", ")", ",", "self", ".", "batchsize_meta", ")", ")", "\n", "\n", "data_map", "=", "self", ".", "read_map_data", "(", ")", "\n", "print", "(", "'map {} iter / batchsize = {} '", ".", "format", "(", "len", "(", "data_map", ")", ",", "self", ".", "batchsize_map", ")", ")", "\n", "\n", "data_aug", "=", "self", ".", "read_aug_data", "(", ")", "\n", "print", "(", "'aug {} iter / batchsize = {} '", ".", "format", "(", "len", "(", "data_aug", ")", ",", "self", ".", "batchsize_aug", ")", ")", "\n", "\n", "data_test", "=", "self", ".", "read_log_data", "(", "self", ".", "test_path", ",", "self", ".", "batchsize_test", ",", "history", "=", "True", ")", "\n", "print", "(", "'test {} iter / batchsize = {} '", ".", "format", "(", "len", "(", "data_test", ")", ",", "self", ".", "batchsize_test", ")", ")", "\n", "\n", "return", "data_src", ",", "data_tgt", ",", "data_meta", ",", "data_map", ",", "data_aug", ",", "data_test", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.get_model": [[149, 159], ["models.MFBasedModel", "models.GMFBasedModel.cuda", "models.DNNBasedModel", "models.GMFBasedModel", "ValueError"], "methods", ["None"], ["", "def", "get_model", "(", "self", ")", ":", "\n", "        ", "if", "self", ".", "base_model", "==", "'MF'", ":", "\n", "            ", "model", "=", "MFBasedModel", "(", "self", ".", "uid_all", ",", "self", ".", "iid_all", ",", "self", ".", "num_fields", ",", "self", ".", "emb_dim", ",", "self", ".", "meta_dim", ")", "\n", "", "elif", "self", ".", "base_model", "==", "'DNN'", ":", "\n", "            ", "model", "=", "DNNBasedModel", "(", "self", ".", "uid_all", ",", "self", ".", "iid_all", ",", "self", ".", "num_fields", ",", "self", ".", "emb_dim", ",", "self", ".", "meta_dim", ")", "\n", "", "elif", "self", ".", "base_model", "==", "'GMF'", ":", "\n", "            ", "model", "=", "GMFBasedModel", "(", "self", ".", "uid_all", ",", "self", ".", "iid_all", ",", "self", ".", "num_fields", ",", "self", ".", "emb_dim", ",", "self", ".", "meta_dim", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'Unknown base model: '", "+", "self", ".", "base_model", ")", "\n", "", "return", "model", ".", "cuda", "(", ")", "if", "self", ".", "use_cuda", "else", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.get_optimizer": [[160, 167], ["torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "torch.optim.Adam", "model.src_model.parameters", "model.tgt_model.parameters", "model.meta_net.parameters", "model.aug_model.parameters", "model.mapping.parameters"], "methods", ["None"], ["", "def", "get_optimizer", "(", "self", ",", "model", ")", ":", "\n", "        ", "optimizer_src", "=", "torch", ".", "optim", ".", "Adam", "(", "params", "=", "model", ".", "src_model", ".", "parameters", "(", ")", ",", "lr", "=", "self", ".", "lr", ",", "weight_decay", "=", "self", ".", "wd", ")", "\n", "optimizer_tgt", "=", "torch", ".", "optim", ".", "Adam", "(", "params", "=", "model", ".", "tgt_model", ".", "parameters", "(", ")", ",", "lr", "=", "self", ".", "lr", ",", "weight_decay", "=", "self", ".", "wd", ")", "\n", "optimizer_meta", "=", "torch", ".", "optim", ".", "Adam", "(", "params", "=", "model", ".", "meta_net", ".", "parameters", "(", ")", ",", "lr", "=", "self", ".", "lr", ",", "weight_decay", "=", "self", ".", "wd", ")", "\n", "optimizer_aug", "=", "torch", ".", "optim", ".", "Adam", "(", "params", "=", "model", ".", "aug_model", ".", "parameters", "(", ")", ",", "lr", "=", "self", ".", "lr", ",", "weight_decay", "=", "self", ".", "wd", ")", "\n", "optimizer_map", "=", "torch", ".", "optim", ".", "Adam", "(", "params", "=", "model", ".", "mapping", ".", "parameters", "(", ")", ",", "lr", "=", "self", ".", "lr", ",", "weight_decay", "=", "self", ".", "wd", ")", "\n", "return", "optimizer_src", ",", "optimizer_tgt", ",", "optimizer_meta", ",", "optimizer_aug", ",", "optimizer_map", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.eval_mae": [[168, 182], ["print", "model.eval", "torch.nn.L1Loss", "torch.nn.L1Loss", "torch.nn.L1Loss", "torch.nn.L1Loss", "torch.nn.MSELoss", "torch.nn.MSELoss", "torch.nn.MSELoss", "torch.nn.MSELoss", "torch.tensor().float", "torch.tensor().float", "torch.tensor().float", "torch.tensor().float", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "list", "list", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "tqdm.tqdm", "torch.nn.L1Loss.item", "torch.nn.L1Loss.item", "torch.sqrt().item", "torch.sqrt().item", "torch.sqrt().item", "torch.sqrt().item", "model", "torch.tensor().float.extend", "torch.tensor().float.extend", "torch.tensor.extend", "torch.tensor.extend", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "y.squeeze().tolist", "model.tolist", "torch.nn.L1Loss.", "torch.nn.L1Loss.", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.nn.MSELoss.", "torch.nn.MSELoss.", "y.squeeze"], "methods", ["None"], ["", "def", "eval_mae", "(", "self", ",", "model", ",", "data_loader", ",", "stage", ")", ":", "\n", "        ", "print", "(", "'Evaluating MAE:'", ")", "\n", "model", ".", "eval", "(", ")", "\n", "targets", ",", "predicts", "=", "list", "(", ")", ",", "list", "(", ")", "\n", "loss", "=", "torch", ".", "nn", ".", "L1Loss", "(", ")", "\n", "mse_loss", "=", "torch", ".", "nn", ".", "MSELoss", "(", ")", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "for", "X", ",", "y", "in", "tqdm", ".", "tqdm", "(", "data_loader", ",", "smoothing", "=", "0", ",", "mininterval", "=", "1.0", ")", ":", "\n", "                ", "pred", "=", "model", "(", "X", ",", "stage", ")", "\n", "targets", ".", "extend", "(", "y", ".", "squeeze", "(", "1", ")", ".", "tolist", "(", ")", ")", "\n", "predicts", ".", "extend", "(", "pred", ".", "tolist", "(", ")", ")", "\n", "", "", "targets", "=", "torch", ".", "tensor", "(", "targets", ")", ".", "float", "(", ")", "\n", "predicts", "=", "torch", ".", "tensor", "(", "predicts", ")", "\n", "return", "loss", "(", "targets", ",", "predicts", ")", ".", "item", "(", ")", ",", "torch", ".", "sqrt", "(", "mse_loss", "(", "targets", ",", "predicts", ")", ")", ".", "item", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.train": [[183, 196], ["print", "model.train", "tqdm.tqdm", "model.zero_grad", "criterion.backward", "optimizer.step", "model", "criterion", "model", "criterion", "y.squeeze().float", "y.squeeze"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.train"], ["", "def", "train", "(", "self", ",", "data_loader", ",", "model", ",", "criterion", ",", "optimizer", ",", "epoch", ",", "stage", ",", "mapping", "=", "False", ")", ":", "\n", "        ", "print", "(", "'Training Epoch {}:'", ".", "format", "(", "epoch", "+", "1", ")", ")", "\n", "model", ".", "train", "(", ")", "\n", "for", "X", ",", "y", "in", "tqdm", ".", "tqdm", "(", "data_loader", ",", "smoothing", "=", "0", ",", "mininterval", "=", "1.0", ")", ":", "\n", "            ", "if", "mapping", ":", "\n", "                ", "src_emb", ",", "tgt_emb", "=", "model", "(", "X", ",", "stage", ")", "\n", "loss", "=", "criterion", "(", "src_emb", ",", "tgt_emb", ")", "\n", "", "else", ":", "\n", "                ", "pred", "=", "model", "(", "X", ",", "stage", ")", "\n", "loss", "=", "criterion", "(", "pred", ",", "y", ".", "squeeze", "(", ")", ".", "float", "(", ")", ")", "\n", "", "model", ".", "zero_grad", "(", ")", "\n", "loss", ".", "backward", "(", ")", "\n", "optimizer", ".", "step", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.update_results": [[197, 202], ["None"], "methods", ["None"], ["", "", "def", "update_results", "(", "self", ",", "mae", ",", "rmse", ",", "phase", ")", ":", "\n", "        ", "if", "mae", "<", "self", ".", "results", "[", "phase", "+", "'_mae'", "]", ":", "\n", "            ", "self", ".", "results", "[", "phase", "+", "'_mae'", "]", "=", "mae", "\n", "", "if", "rmse", "<", "self", ".", "results", "[", "phase", "+", "'_rmse'", "]", ":", "\n", "            ", "self", ".", "results", "[", "phase", "+", "'_rmse'", "]", "=", "rmse", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.TgtOnly": [[203, 210], ["print", "range", "run.Run.train", "run.Run.eval_mae", "run.Run.update_results", "print"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.train", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.eval_mae", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.update_results"], ["", "", "def", "TgtOnly", "(", "self", ",", "model", ",", "data_tgt", ",", "data_test", ",", "criterion", ",", "optimizer", ")", ":", "\n", "        ", "print", "(", "'=========TgtOnly========'", ")", "\n", "for", "i", "in", "range", "(", "self", ".", "epoch", ")", ":", "\n", "            ", "self", ".", "train", "(", "data_tgt", ",", "model", ",", "criterion", ",", "optimizer", ",", "i", ",", "stage", "=", "'train_tgt'", ")", "\n", "mae", ",", "rmse", "=", "self", ".", "eval_mae", "(", "model", ",", "data_test", ",", "stage", "=", "'test_tgt'", ")", "\n", "self", ".", "update_results", "(", "mae", ",", "rmse", ",", "'tgt'", ")", "\n", "print", "(", "'MAE: {} RMSE: {}'", ".", "format", "(", "mae", ",", "rmse", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.DataAug": [[211, 218], ["print", "range", "run.Run.train", "run.Run.eval_mae", "run.Run.update_results", "print"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.train", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.eval_mae", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.update_results"], ["", "", "def", "DataAug", "(", "self", ",", "model", ",", "data_aug", ",", "data_test", ",", "criterion", ",", "optimizer", ")", ":", "\n", "        ", "print", "(", "'=========DataAug========'", ")", "\n", "for", "i", "in", "range", "(", "self", ".", "epoch", ")", ":", "\n", "            ", "self", ".", "train", "(", "data_aug", ",", "model", ",", "criterion", ",", "optimizer", ",", "i", ",", "stage", "=", "'train_aug'", ")", "\n", "mae", ",", "rmse", "=", "self", ".", "eval_mae", "(", "model", ",", "data_test", ",", "stage", "=", "'test_aug'", ")", "\n", "self", ".", "update_results", "(", "mae", ",", "rmse", ",", "'aug'", ")", "\n", "print", "(", "'MAE: {} RMSE: {}'", ".", "format", "(", "mae", ",", "rmse", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.CDR": [[219, 236], ["print", "range", "print", "range", "print", "range", "run.Run.train", "run.Run.train", "run.Run.eval_mae", "run.Run.update_results", "print", "run.Run.train", "run.Run.eval_mae", "run.Run.update_results", "print"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.train", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.train", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.eval_mae", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.update_results", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.train", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.eval_mae", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.update_results"], ["", "", "def", "CDR", "(", "self", ",", "model", ",", "data_src", ",", "data_map", ",", "data_meta", ",", "data_test", ",", "\n", "criterion", ",", "optimizer_src", ",", "optimizer_map", ",", "optimizer_meta", ")", ":", "\n", "        ", "print", "(", "'=====CDR Pretraining====='", ")", "\n", "for", "i", "in", "range", "(", "self", ".", "epoch", ")", ":", "\n", "            ", "self", ".", "train", "(", "data_src", ",", "model", ",", "criterion", ",", "optimizer_src", ",", "i", ",", "stage", "=", "'train_src'", ")", "\n", "", "print", "(", "'==========EMCDR=========='", ")", "\n", "for", "i", "in", "range", "(", "self", ".", "epoch", ")", ":", "\n", "            ", "self", ".", "train", "(", "data_map", ",", "model", ",", "criterion", ",", "optimizer_map", ",", "i", ",", "stage", "=", "'train_map'", ",", "mapping", "=", "True", ")", "\n", "mae", ",", "rmse", "=", "self", ".", "eval_mae", "(", "model", ",", "data_test", ",", "stage", "=", "'test_map'", ")", "\n", "self", ".", "update_results", "(", "mae", ",", "rmse", ",", "'emcdr'", ")", "\n", "print", "(", "'MAE: {} RMSE: {}'", ".", "format", "(", "mae", ",", "rmse", ")", ")", "\n", "", "print", "(", "'==========PTUPCDR=========='", ")", "\n", "for", "i", "in", "range", "(", "self", ".", "epoch", ")", ":", "\n", "            ", "self", ".", "train", "(", "data_meta", ",", "model", ",", "criterion", ",", "optimizer_meta", ",", "i", ",", "stage", "=", "'train_meta'", ")", "\n", "mae", ",", "rmse", "=", "self", ".", "eval_mae", "(", "model", ",", "data_test", ",", "stage", "=", "'test_meta'", ")", "\n", "self", ".", "update_results", "(", "mae", ",", "rmse", ",", "'ptupcdr'", ")", "\n", "print", "(", "'MAE: {} RMSE: {}'", ".", "format", "(", "mae", ",", "rmse", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.main": [[237, 247], ["run.Run.get_model", "run.Run.get_data", "run.Run.get_optimizer", "torch.nn.MSELoss", "torch.nn.MSELoss", "torch.nn.MSELoss", "torch.nn.MSELoss", "run.Run.TgtOnly", "run.Run.DataAug", "run.Run.CDR", "print"], "methods", ["home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.get_model", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.get_data", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.get_optimizer", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.TgtOnly", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.DataAug", "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.run.Run.CDR"], ["", "", "def", "main", "(", "self", ")", ":", "\n", "        ", "model", "=", "self", ".", "get_model", "(", ")", "\n", "data_src", ",", "data_tgt", ",", "data_meta", ",", "data_map", ",", "data_aug", ",", "data_test", "=", "self", ".", "get_data", "(", ")", "\n", "optimizer_src", ",", "optimizer_tgt", ",", "optimizer_meta", ",", "optimizer_aug", ",", "optimizer_map", "=", "self", ".", "get_optimizer", "(", "model", ")", "\n", "criterion", "=", "torch", ".", "nn", ".", "MSELoss", "(", ")", "\n", "self", ".", "TgtOnly", "(", "model", ",", "data_tgt", ",", "data_test", ",", "criterion", ",", "optimizer_tgt", ")", "\n", "self", ".", "DataAug", "(", "model", ",", "data_aug", ",", "data_test", ",", "criterion", ",", "optimizer_aug", ")", "\n", "self", ".", "CDR", "(", "model", ",", "data_src", ",", "data_map", ",", "data_meta", ",", "data_test", ",", "\n", "criterion", ",", "optimizer_src", ",", "optimizer_map", ",", "optimizer_meta", ")", "\n", "print", "(", "self", ".", "results", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.easezyc_wsdm2022-ptupcdr.None.entry.prepare": [[11, 37], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.parse_args", "random.seed", "numpy.random.seed", "torch.manual_seed", "torch.cuda.manual_seed", "open", "json.load"], "function", ["None"], ["def", "prepare", "(", "config_path", ")", ":", "\n", "    ", "parser", "=", "argparse", ".", "ArgumentParser", "(", ")", "\n", "parser", ".", "add_argument", "(", "'--process_data_mid'", ",", "default", "=", "0", ")", "\n", "parser", ".", "add_argument", "(", "'--process_data_ready'", ",", "default", "=", "0", ")", "\n", "parser", ".", "add_argument", "(", "'--task'", ",", "default", "=", "'1'", ")", "\n", "parser", ".", "add_argument", "(", "'--base_model'", ",", "default", "=", "'MF'", ")", "\n", "parser", ".", "add_argument", "(", "'--seed'", ",", "type", "=", "int", ",", "default", "=", "2020", ")", "\n", "parser", ".", "add_argument", "(", "'--ratio'", ",", "default", "=", "[", "0.8", ",", "0.2", "]", ")", "\n", "parser", ".", "add_argument", "(", "'--gpu'", ",", "default", "=", "'0'", ")", "\n", "parser", ".", "add_argument", "(", "'--epoch'", ",", "type", "=", "int", ",", "default", "=", "10", ")", "\n", "parser", ".", "add_argument", "(", "'--lr'", ",", "type", "=", "float", ",", "default", "=", "0.01", ")", "\n", "args", "=", "parser", ".", "parse_args", "(", ")", "\n", "\n", "random", ".", "seed", "(", "args", ".", "seed", ")", "\n", "np", ".", "random", ".", "seed", "(", "args", ".", "seed", ")", "\n", "torch", ".", "manual_seed", "(", "args", ".", "seed", ")", "\n", "torch", ".", "cuda", ".", "manual_seed", "(", "args", ".", "seed", ")", "\n", "\n", "with", "open", "(", "config_path", ",", "'r'", ")", "as", "f", ":", "\n", "        ", "config", "=", "json", ".", "load", "(", "f", ")", "\n", "config", "[", "'base_model'", "]", "=", "args", ".", "base_model", "\n", "config", "[", "'task'", "]", "=", "args", ".", "task", "\n", "config", "[", "'ratio'", "]", "=", "args", ".", "ratio", "\n", "config", "[", "'epoch'", "]", "=", "args", ".", "epoch", "\n", "config", "[", "'lr'", "]", "=", "args", ".", "lr", "\n", "", "return", "args", ",", "config", "\n", "\n"]]}