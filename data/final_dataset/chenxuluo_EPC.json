{"home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.resize_like": [[11, 17], ["tensorflow.image.resize_nearest_neighbor", "inputs.get_shape", "inputs.get_shape", "ref.get_shape", "ref.get_shape"], "function", ["None"], ["def", "resize_like", "(", "inputs", ",", "ref", ")", ":", "\n", "\t", "iH", ",", "iW", "=", "inputs", ".", "get_shape", "(", ")", "[", "1", "]", ",", "inputs", ".", "get_shape", "(", ")", "[", "2", "]", "\n", "rH", ",", "rW", "=", "ref", ".", "get_shape", "(", ")", "[", "1", "]", ",", "ref", ".", "get_shape", "(", ")", "[", "2", "]", "\n", "if", "iH", "==", "rH", "and", "iW", "==", "rW", ":", "\n", "\t\t", "return", "inputs", "\n", "", "return", "tf", ".", "image", ".", "resize_nearest_neighbor", "(", "inputs", ",", "[", "rH", ".", "value", ",", "rW", ".", "value", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.pose_exp_net": [[19, 72], ["tensorflow.concat", "int", "tensorflow.variable_scope", "tensorflow.arg_scope", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.contrib.layers.python.layers.utils.convert_collection_to_dict", "tensorflow.variable_scope", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.reduce_mean", "src_image_stack.get_shape", "tensorflow.l2_regularizer", "tensorflow.reshape", "tensorflow.variable_scope", "tensorflow.conv2d_transpose", "tensorflow.conv2d_transpose", "tensorflow.conv2d", "tensorflow.conv2d_transpose", "tensorflow.conv2d", "tensorflow.conv2d_transpose", "tensorflow.conv2d", "tensorflow.conv2d_transpose", "tensorflow.conv2d"], "function", ["None"], ["", "def", "pose_exp_net", "(", "tgt_image", ",", "src_image_stack", ",", "do_exp", "=", "True", ",", "is_training", "=", "True", ",", "reuse", "=", "tf", ".", "AUTO_REUSE", ")", ":", "\n", "\t", "inputs", "=", "tf", ".", "concat", "(", "[", "tgt_image", ",", "src_image_stack", "]", ",", "axis", "=", "3", ")", "\n", "num_source", "=", "int", "(", "src_image_stack", ".", "get_shape", "(", ")", "[", "3", "]", ".", "value", "//", "3", ")", "\n", "with", "tf", ".", "variable_scope", "(", "'pose_exp_net'", ",", "reuse", "=", "reuse", ")", "as", "sc", ":", "\n", "\t\t", "end_points_collection", "=", "sc", ".", "original_name_scope", "+", "'_end_points'", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "conv2d_transpose", "]", ",", "\n", "normalizer_fn", "=", "None", ",", "\n", "weights_regularizer", "=", "slim", ".", "l2_regularizer", "(", "0.05", ")", ",", "\n", "activation_fn", "=", "tf", ".", "nn", ".", "relu", ",", "\n", "outputs_collections", "=", "end_points_collection", ")", ":", "\n", "# cnv1 to cnv5b are shared between pose and explainability prediction", "\n", "\t\t\t", "cnv1", "=", "slim", ".", "conv2d", "(", "inputs", ",", "16", ",", "[", "7", ",", "7", "]", ",", "stride", "=", "2", ",", "scope", "=", "'cnv1'", ")", "\n", "cnv2", "=", "slim", ".", "conv2d", "(", "cnv1", ",", "32", ",", "[", "5", ",", "5", "]", ",", "stride", "=", "2", ",", "scope", "=", "'cnv2'", ")", "\n", "cnv3", "=", "slim", ".", "conv2d", "(", "cnv2", ",", "64", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'cnv3'", ")", "\n", "cnv4", "=", "slim", ".", "conv2d", "(", "cnv3", ",", "128", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'cnv4'", ")", "\n", "cnv5", "=", "slim", ".", "conv2d", "(", "cnv4", ",", "256", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'cnv5'", ")", "\n", "# Pose specific layers", "\n", "with", "tf", ".", "variable_scope", "(", "'pose'", ")", ":", "\n", "\t\t\t\t", "cnv6", "=", "slim", ".", "conv2d", "(", "cnv5", ",", "256", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'cnv6'", ")", "\n", "cnv7", "=", "slim", ".", "conv2d", "(", "cnv6", ",", "256", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'cnv7'", ")", "\n", "pose_pred", "=", "slim", ".", "conv2d", "(", "cnv7", ",", "6", "*", "num_source", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'pred'", ",", "\n", "stride", "=", "1", ",", "normalizer_fn", "=", "None", ",", "activation_fn", "=", "None", ")", "\n", "pose_avg", "=", "tf", ".", "reduce_mean", "(", "pose_pred", ",", "[", "1", ",", "2", "]", ")", "\n", "# Empirically we found that scaling by a small constant ", "\n", "# facilitates training.", "\n", "pose_final", "=", "0.01", "*", "tf", ".", "reshape", "(", "pose_avg", ",", "[", "-", "1", ",", "num_source", ",", "6", "]", ")", "\n", "# Exp mask specific layers", "\n", "", "if", "do_exp", ":", "\n", "\t\t\t\t", "with", "tf", ".", "variable_scope", "(", "'exp'", ")", ":", "\n", "\t\t\t\t\t", "upcnv5", "=", "slim", ".", "conv2d_transpose", "(", "cnv5", ",", "256", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'upcnv5'", ")", "\n", "\n", "upcnv4", "=", "slim", ".", "conv2d_transpose", "(", "upcnv5", ",", "128", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'upcnv4'", ")", "\n", "mask4", "=", "slim", ".", "conv2d", "(", "upcnv4", ",", "num_source", "*", "2", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'mask4'", ",", "\n", "normalizer_fn", "=", "None", ",", "activation_fn", "=", "None", ")", "\n", "\n", "upcnv3", "=", "slim", ".", "conv2d_transpose", "(", "upcnv4", ",", "64", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'upcnv3'", ")", "\n", "mask3", "=", "slim", ".", "conv2d", "(", "upcnv3", ",", "num_source", "*", "2", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'mask3'", ",", "\n", "normalizer_fn", "=", "None", ",", "activation_fn", "=", "None", ")", "\n", "\n", "upcnv2", "=", "slim", ".", "conv2d_transpose", "(", "upcnv3", ",", "32", ",", "[", "5", ",", "5", "]", ",", "stride", "=", "2", ",", "scope", "=", "'upcnv2'", ")", "\n", "mask2", "=", "slim", ".", "conv2d", "(", "upcnv2", ",", "num_source", "*", "2", ",", "[", "5", ",", "5", "]", ",", "stride", "=", "1", ",", "scope", "=", "'mask2'", ",", "\n", "normalizer_fn", "=", "None", ",", "activation_fn", "=", "None", ")", "\n", "\n", "upcnv1", "=", "slim", ".", "conv2d_transpose", "(", "upcnv2", ",", "16", ",", "[", "7", ",", "7", "]", ",", "stride", "=", "2", ",", "scope", "=", "'upcnv1'", ")", "\n", "mask1", "=", "slim", ".", "conv2d", "(", "upcnv1", ",", "num_source", "*", "2", ",", "[", "7", ",", "7", "]", ",", "stride", "=", "1", ",", "scope", "=", "'mask1'", ",", "\n", "normalizer_fn", "=", "None", ",", "activation_fn", "=", "None", ")", "\n", "", "", "else", ":", "\n", "\t\t\t\t", "mask1", "=", "None", "\n", "mask2", "=", "None", "\n", "mask3", "=", "None", "\n", "mask4", "=", "None", "\n", "", "end_points", "=", "utils", ".", "convert_collection_to_dict", "(", "end_points_collection", ")", "\n", "return", "pose_final", ",", "[", "mask1", ",", "mask2", ",", "mask3", ",", "mask4", "]", ",", "end_points", "\n", "\n"]], "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.disp_net": [[75, 145], ["tensorflow.variable_scope", "tgt_image.get_shape", "tgt_image.get_shape", "tensorflow.arg_scope", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d_transpose", "nets.resize_like", "tensorflow.concat", "tensorflow.conv2d", "tensorflow.conv2d_transpose", "nets.resize_like", "tensorflow.concat", "tensorflow.conv2d", "tensorflow.conv2d_transpose", "nets.resize_like", "tensorflow.concat", "tensorflow.conv2d", "tensorflow.conv2d_transpose", "tensorflow.concat", "tensorflow.conv2d", "tensorflow.image.resize_bilinear", "tensorflow.conv2d_transpose", "tensorflow.concat", "tensorflow.conv2d", "tensorflow.image.resize_bilinear", "tensorflow.conv2d_transpose", "tensorflow.concat", "tensorflow.conv2d", "tensorflow.image.resize_bilinear", "tensorflow.conv2d_transpose", "tensorflow.concat", "tensorflow.conv2d", "tensorflow.contrib.layers.python.layers.utils.convert_collection_to_dict", "tensorflow.l2_regularizer", "tensorflow.conv2d", "numpy.int", "numpy.int", "tensorflow.conv2d", "numpy.int", "numpy.int", "tensorflow.conv2d", "tensorflow.conv2d"], "function", ["home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.resize_like", "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.resize_like", "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.resize_like"], ["", "", "", "def", "disp_net", "(", "tgt_image", ",", "is_training", "=", "True", ",", "reuse", "=", "tf", ".", "AUTO_REUSE", ")", ":", "\n", "\t", "H", "=", "tgt_image", ".", "get_shape", "(", ")", "[", "1", "]", ".", "value", "\n", "W", "=", "tgt_image", ".", "get_shape", "(", ")", "[", "2", "]", ".", "value", "\n", "with", "tf", ".", "variable_scope", "(", "'depth_net'", ",", "reuse", "=", "reuse", ")", "as", "sc", ":", "\n", "\t\t", "end_points_collection", "=", "sc", ".", "original_name_scope", "+", "'_end_points'", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "conv2d_transpose", "]", ",", "\n", "normalizer_fn", "=", "None", ",", "\n", "weights_regularizer", "=", "slim", ".", "l2_regularizer", "(", "0.05", ")", ",", "\n", "activation_fn", "=", "tf", ".", "nn", ".", "relu", ",", "trainable", "=", "is_training", ",", "\n", "outputs_collections", "=", "end_points_collection", ")", ":", "\n", "\t\t\t", "cnv1", "=", "slim", ".", "conv2d", "(", "tgt_image", ",", "32", ",", "[", "7", ",", "7", "]", ",", "stride", "=", "2", ",", "scope", "=", "'cnv1'", ")", "\n", "cnv1b", "=", "slim", ".", "conv2d", "(", "cnv1", ",", "32", ",", "[", "7", ",", "7", "]", ",", "stride", "=", "1", ",", "scope", "=", "'cnv1b'", ")", "\n", "cnv2", "=", "slim", ".", "conv2d", "(", "cnv1b", ",", "64", ",", "[", "5", ",", "5", "]", ",", "stride", "=", "2", ",", "scope", "=", "'cnv2'", ")", "\n", "cnv2b", "=", "slim", ".", "conv2d", "(", "cnv2", ",", "64", ",", "[", "5", ",", "5", "]", ",", "stride", "=", "1", ",", "scope", "=", "'cnv2b'", ")", "\n", "cnv3", "=", "slim", ".", "conv2d", "(", "cnv2b", ",", "128", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'cnv3'", ")", "\n", "cnv3b", "=", "slim", ".", "conv2d", "(", "cnv3", ",", "128", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'cnv3b'", ")", "\n", "cnv4", "=", "slim", ".", "conv2d", "(", "cnv3b", ",", "256", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'cnv4'", ")", "\n", "cnv4b", "=", "slim", ".", "conv2d", "(", "cnv4", ",", "256", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'cnv4b'", ")", "\n", "cnv5", "=", "slim", ".", "conv2d", "(", "cnv4b", ",", "512", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'cnv5'", ")", "\n", "cnv5b", "=", "slim", ".", "conv2d", "(", "cnv5", ",", "512", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'cnv5b'", ")", "\n", "cnv6", "=", "slim", ".", "conv2d", "(", "cnv5b", ",", "512", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'cnv6'", ")", "\n", "cnv6b", "=", "slim", ".", "conv2d", "(", "cnv6", ",", "512", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'cnv6b'", ")", "\n", "cnv7", "=", "slim", ".", "conv2d", "(", "cnv6b", ",", "512", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'cnv7'", ")", "\n", "cnv7b", "=", "slim", ".", "conv2d", "(", "cnv7", ",", "512", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'cnv7b'", ")", "\n", "\n", "upcnv7", "=", "slim", ".", "conv2d_transpose", "(", "cnv7b", ",", "512", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'upcnv7'", ")", "\n", "# There might be dimension mismatch due to uneven down/up-sampling", "\n", "upcnv7", "=", "resize_like", "(", "upcnv7", ",", "cnv6b", ")", "\n", "i7_in", "=", "tf", ".", "concat", "(", "[", "upcnv7", ",", "cnv6b", "]", ",", "axis", "=", "3", ")", "\n", "icnv7", "=", "slim", ".", "conv2d", "(", "i7_in", ",", "512", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'icnv7'", ")", "\n", "\n", "upcnv6", "=", "slim", ".", "conv2d_transpose", "(", "icnv7", ",", "512", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'upcnv6'", ")", "\n", "upcnv6", "=", "resize_like", "(", "upcnv6", ",", "cnv5b", ")", "\n", "i6_in", "=", "tf", ".", "concat", "(", "[", "upcnv6", ",", "cnv5b", "]", ",", "axis", "=", "3", ")", "\n", "icnv6", "=", "slim", ".", "conv2d", "(", "i6_in", ",", "512", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'icnv6'", ")", "\n", "\n", "upcnv5", "=", "slim", ".", "conv2d_transpose", "(", "icnv6", ",", "256", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'upcnv5'", ")", "\n", "upcnv5", "=", "resize_like", "(", "upcnv5", ",", "cnv4b", ")", "\n", "i5_in", "=", "tf", ".", "concat", "(", "[", "upcnv5", ",", "cnv4b", "]", ",", "axis", "=", "3", ")", "\n", "icnv5", "=", "slim", ".", "conv2d", "(", "i5_in", ",", "256", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'icnv5'", ")", "\n", "\n", "upcnv4", "=", "slim", ".", "conv2d_transpose", "(", "icnv5", ",", "128", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'upcnv4'", ")", "\n", "i4_in", "=", "tf", ".", "concat", "(", "[", "upcnv4", ",", "cnv3b", "]", ",", "axis", "=", "3", ")", "\n", "icnv4", "=", "slim", ".", "conv2d", "(", "i4_in", ",", "128", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'icnv4'", ")", "\n", "disp4", "=", "DISP_SCALING", "*", "slim", ".", "conv2d", "(", "icnv4", ",", "1", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "\n", "activation_fn", "=", "tf", ".", "sigmoid", ",", "normalizer_fn", "=", "None", ",", "scope", "=", "'disp4'", ")", "+", "MIN_DISP", "\n", "disp4_up", "=", "tf", ".", "image", ".", "resize_bilinear", "(", "disp4", ",", "[", "np", ".", "int", "(", "H", "/", "4", ")", ",", "np", ".", "int", "(", "W", "/", "4", ")", "]", ")", "\n", "\n", "upcnv3", "=", "slim", ".", "conv2d_transpose", "(", "icnv4", ",", "64", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'upcnv3'", ")", "\n", "i3_in", "=", "tf", ".", "concat", "(", "[", "upcnv3", ",", "cnv2b", ",", "disp4_up", "]", ",", "axis", "=", "3", ")", "\n", "icnv3", "=", "slim", ".", "conv2d", "(", "i3_in", ",", "64", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'icnv3'", ")", "\n", "disp3", "=", "DISP_SCALING", "*", "slim", ".", "conv2d", "(", "icnv3", ",", "1", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "\n", "activation_fn", "=", "tf", ".", "sigmoid", ",", "normalizer_fn", "=", "None", ",", "scope", "=", "'disp3'", ")", "+", "MIN_DISP", "\n", "disp3_up", "=", "tf", ".", "image", ".", "resize_bilinear", "(", "disp3", ",", "[", "np", ".", "int", "(", "H", "/", "2", ")", ",", "np", ".", "int", "(", "W", "/", "2", ")", "]", ")", "\n", "\n", "upcnv2", "=", "slim", ".", "conv2d_transpose", "(", "icnv3", ",", "32", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'upcnv2'", ")", "\n", "i2_in", "=", "tf", ".", "concat", "(", "[", "upcnv2", ",", "cnv1b", ",", "disp3_up", "]", ",", "axis", "=", "3", ")", "\n", "icnv2", "=", "slim", ".", "conv2d", "(", "i2_in", ",", "32", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'icnv2'", ")", "\n", "disp2", "=", "DISP_SCALING", "*", "slim", ".", "conv2d", "(", "icnv2", ",", "1", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "\n", "activation_fn", "=", "tf", ".", "sigmoid", ",", "normalizer_fn", "=", "None", ",", "scope", "=", "'disp2'", ")", "+", "MIN_DISP", "\n", "disp2_up", "=", "tf", ".", "image", ".", "resize_bilinear", "(", "disp2", ",", "[", "H", ",", "W", "]", ")", "\n", "\n", "upcnv1", "=", "slim", ".", "conv2d_transpose", "(", "icnv2", ",", "16", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'upcnv1'", ")", "\n", "i1_in", "=", "tf", ".", "concat", "(", "[", "upcnv1", ",", "disp2_up", "]", ",", "axis", "=", "3", ")", "\n", "icnv1", "=", "slim", ".", "conv2d", "(", "i1_in", ",", "16", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'icnv1'", ")", "\n", "disp1", "=", "DISP_SCALING", "*", "slim", ".", "conv2d", "(", "icnv1", ",", "1", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "\n", "activation_fn", "=", "tf", ".", "sigmoid", ",", "normalizer_fn", "=", "None", ",", "scope", "=", "'disp1'", ")", "+", "MIN_DISP", "\n", "\n", "end_points", "=", "utils", ".", "convert_collection_to_dict", "(", "end_points_collection", ")", "\n", "return", "[", "disp1", ",", "disp2", ",", "disp3", ",", "disp4", "]", ",", "end_points", "\n", "\n"]], "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.leaky_relu": [[149, 151], ["tensorflow.nn.leaky_relu"], "function", ["home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.leaky_relu"], ["", "", "", "def", "leaky_relu", "(", "x", ",", "alpha", "=", "0.1", ")", ":", "\n", "\t", "return", "tf", ".", "nn", ".", "leaky_relu", "(", "x", ",", "alpha", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.feature_pyramid": [[153, 175], ["tensorflow.variable_scope", "tensorflow.arg_scope", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.l2_regularizer"], "function", ["None"], ["", "def", "feature_pyramid", "(", "image", ",", "reuse", "=", "tf", ".", "AUTO_REUSE", ",", "is_training", "=", "True", ")", ":", "\n", "\t", "with", "tf", ".", "variable_scope", "(", "'feature_net'", ")", ":", "\n", "\t\t", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "conv2d_transpose", "]", ",", "\n", "normalizer_fn", "=", "None", ",", "\n", "weights_regularizer", "=", "slim", ".", "l2_regularizer", "(", "0.0004", ")", ",", "\n", "activation_fn", "=", "leaky_relu", ",", "\n", "variables_collections", "=", "[", "\"flownet\"", "]", ",", "\n", "reuse", "=", "reuse", ",", "trainable", "=", "is_training", ")", ":", "\n", "\t\t\t", "cnv1", "=", "slim", ".", "conv2d", "(", "image", ",", "16", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "\"cnv1\"", ")", "\n", "cnv2", "=", "slim", ".", "conv2d", "(", "cnv1", ",", "16", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "\"cnv2\"", ")", "\n", "cnv3", "=", "slim", ".", "conv2d", "(", "cnv2", ",", "32", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "\"cnv3\"", ")", "\n", "cnv4", "=", "slim", ".", "conv2d", "(", "cnv3", ",", "32", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "\"cnv4\"", ")", "\n", "cnv5", "=", "slim", ".", "conv2d", "(", "cnv4", ",", "64", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "\"cnv5\"", ")", "\n", "cnv6", "=", "slim", ".", "conv2d", "(", "cnv5", ",", "64", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "\"cnv6\"", ")", "\n", "cnv7", "=", "slim", ".", "conv2d", "(", "cnv6", ",", "96", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "\"cnv7\"", ")", "\n", "cnv8", "=", "slim", ".", "conv2d", "(", "cnv7", ",", "96", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "\"cnv8\"", ")", "\n", "cnv9", "=", "slim", ".", "conv2d", "(", "cnv8", ",", "128", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "\"cnv9\"", ")", "\n", "cnv10", "=", "slim", ".", "conv2d", "(", "cnv9", ",", "128", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "\"cnv10\"", ")", "\n", "cnv11", "=", "slim", ".", "conv2d", "(", "cnv10", ",", "192", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "\"cnv11\"", ")", "\n", "cnv12", "=", "slim", ".", "conv2d", "(", "cnv11", ",", "192", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "\"cnv12\"", ")", "\n", "\n", "return", "cnv2", ",", "cnv4", ",", "cnv6", ",", "cnv8", ",", "cnv10", ",", "cnv12", "\n", "\n"]], "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.cost_volumn": [[176, 185], ["map", "tensorflow.pad", "range", "tensorflow.concat", "range", "feature1.get_shape", "cv.append", "tensorflow.reduce_mean"], "function", ["None"], ["", "", "", "def", "cost_volumn", "(", "feature1", ",", "feature2", ",", "d", "=", "4", ")", ":", "\n", "\t", "batch_size", ",", "H", ",", "W", ",", "feature_num", "=", "map", "(", "int", ",", "feature1", ".", "get_shape", "(", ")", "[", "0", ":", "4", "]", ")", "\n", "feature2", "=", "tf", ".", "pad", "(", "feature2", ",", "[", "[", "0", ",", "0", "]", ",", "[", "d", ",", "d", "]", ",", "[", "d", ",", "d", "]", ",", "[", "0", ",", "0", "]", "]", ",", "\"CONSTANT\"", ")", "\n", "cv", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "2", "*", "d", "+", "1", ")", ":", "\n", "\t\t", "for", "j", "in", "range", "(", "2", "*", "d", "+", "1", ")", ":", "\n", "\t\t\t", "cv", ".", "append", "(", "tf", ".", "reduce_mean", "(", "feature1", "*", "feature2", "[", ":", ",", "i", ":", "(", "i", "+", "H", ")", ",", "j", ":", "(", "j", "+", "W", ")", ",", ":", "]", ",", "axis", "=", "3", ",", "keepdims", "=", "True", ")", ")", "\n", "\n", "", "", "return", "tf", ".", "concat", "(", "cv", ",", "axis", "=", "3", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.optical_flow_decoder_dc": [[186, 200], ["tensorflow.arg_scope", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.concat", "tensorflow.concat", "tensorflow.concat", "tensorflow.concat", "tensorflow.l2_regularizer", "str", "str", "str", "str", "str", "str"], "function", ["None"], ["", "def", "optical_flow_decoder_dc", "(", "inputs", ",", "level", ",", "is_training", "=", "True", ")", ":", "\n", "\t", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "conv2d_transpose", "]", ",", "\n", "normalizer_fn", "=", "None", ",", "\n", "weights_regularizer", "=", "slim", ".", "l2_regularizer", "(", "0.0004", ")", ",", "\n", "activation_fn", "=", "leaky_relu", ",", "\n", "trainable", "=", "is_training", ")", ":", "\n", "\t\t", "cnv1", "=", "slim", ".", "conv2d", "(", "inputs", ",", "128", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "\"cnv1_fd_\"", "+", "str", "(", "level", ")", ")", "\n", "cnv2", "=", "slim", ".", "conv2d", "(", "cnv1", ",", "128", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "\"cnv2_fd_\"", "+", "str", "(", "level", ")", ")", "\n", "cnv3", "=", "slim", ".", "conv2d", "(", "tf", ".", "concat", "(", "[", "cnv1", ",", "cnv2", "]", ",", "axis", "=", "3", ")", ",", "96", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "\"cnv3_fd_\"", "+", "str", "(", "level", ")", ")", "\n", "cnv4", "=", "slim", ".", "conv2d", "(", "tf", ".", "concat", "(", "[", "cnv2", ",", "cnv3", "]", ",", "axis", "=", "3", ")", ",", "64", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "\"cnv4_fd_\"", "+", "str", "(", "level", ")", ")", "\n", "cnv5", "=", "slim", ".", "conv2d", "(", "tf", ".", "concat", "(", "[", "cnv3", ",", "cnv4", "]", ",", "axis", "=", "3", ")", ",", "32", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "\"cnv5_fd_\"", "+", "str", "(", "level", ")", ")", "\n", "flow", "=", "slim", ".", "conv2d", "(", "tf", ".", "concat", "(", "[", "cnv4", ",", "cnv5", "]", ",", "axis", "=", "3", ")", ",", "2", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "\"cnv6_fd_\"", "+", "str", "(", "level", ")", ",", "activation_fn", "=", "None", ")", "\n", "\n", "return", "flow", ",", "cnv5", "\n", "\n"]], "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.context_net": [[201, 217], ["tensorflow.arg_scope", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.conv2d", "tensorflow.l2_regularizer"], "function", ["None"], ["", "", "def", "context_net", "(", "inputs", ",", "is_training", "=", "True", ")", ":", "\n", "\t", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "conv2d_transpose", "]", ",", "\n", "normalizer_fn", "=", "None", ",", "\n", "weights_regularizer", "=", "slim", ".", "l2_regularizer", "(", "0.0004", ")", ",", "\n", "trainable", "=", "is_training", ",", "\n", "activation_fn", "=", "leaky_relu", ")", ":", "\n", "\t\t", "cnv1", "=", "slim", ".", "conv2d", "(", "inputs", ",", "128", ",", "[", "3", ",", "3", "]", ",", "rate", "=", "1", ",", "scope", "=", "\"cnv1_cn\"", ")", "\n", "cnv2", "=", "slim", ".", "conv2d", "(", "cnv1", ",", "128", ",", "[", "3", ",", "3", "]", ",", "rate", "=", "2", ",", "scope", "=", "\"cnv2_cn\"", ")", "\n", "cnv3", "=", "slim", ".", "conv2d", "(", "cnv2", ",", "128", ",", "[", "3", ",", "3", "]", ",", "rate", "=", "4", ",", "scope", "=", "\"cnv3_cn\"", ")", "\n", "cnv4", "=", "slim", ".", "conv2d", "(", "cnv3", ",", "96", ",", "[", "3", ",", "3", "]", ",", "rate", "=", "8", ",", "scope", "=", "\"cnv4_cn\"", ")", "\n", "cnv5", "=", "slim", ".", "conv2d", "(", "cnv4", ",", "64", ",", "[", "3", ",", "3", "]", ",", "rate", "=", "16", ",", "scope", "=", "\"cnv5_cn\"", ")", "\n", "cnv6", "=", "slim", ".", "conv2d", "(", "cnv5", ",", "32", ",", "[", "3", ",", "3", "]", ",", "rate", "=", "1", ",", "scope", "=", "\"cnv6_cn\"", ")", "\n", "\n", "flow", "=", "slim", ".", "conv2d", "(", "cnv6", ",", "2", ",", "[", "3", ",", "3", "]", ",", "rate", "=", "1", ",", "scope", "=", "\"cnv7_cn\"", ",", "activation_fn", "=", "None", ")", "\n", "\n", "return", "flow", "\n", "\n"]], "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.construct_model_pwc_full": [[218, 261], ["tensorflow.variable_scope", "map", "nets.cost_volumn", "nets.optical_flow_decoder_dc", "utils.transformer_flow", "nets.cost_volumn", "nets.optical_flow_decoder_dc", "utils.transformer_flow", "nets.cost_volumn", "nets.optical_flow_decoder_dc", "utils.transformer_flow", "nets.cost_volumn", "nets.optical_flow_decoder_dc", "utils.transformer_flow", "nets.cost_volumn", "nets.optical_flow_decoder_dc", "tensorflow.image.resize_bilinear", "tensorflow.image.resize_bilinear", "tensorflow.image.resize_bilinear", "tensorflow.image.resize_bilinear", "tensorflow.image.resize_bilinear", "tensorflow.concat", "tensorflow.image.resize_bilinear", "tensorflow.concat", "tensorflow.image.resize_bilinear", "tensorflow.concat", "tensorflow.image.resize_bilinear", "tensorflow.concat", "nets.context_net", "image1.get_shape", "int", "int", "int", "int", "int", "int", "int", "int", "tensorflow.concat", "int", "int", "int", "int", "int", "int", "int", "int", "int", "int", "int", "int", "int", "int"], "function", ["home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.cost_volumn", "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.optical_flow_decoder_dc", "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.cost_volumn", "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.optical_flow_decoder_dc", "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.cost_volumn", "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.optical_flow_decoder_dc", "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.cost_volumn", "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.optical_flow_decoder_dc", "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.cost_volumn", "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.optical_flow_decoder_dc", "home.repos.pwc.inspect_result.chenxuluo_EPC.None.nets.context_net"], ["", "", "def", "construct_model_pwc_full", "(", "image1", ",", "image2", ",", "feature1", ",", "feature2", ",", "is_training", "=", "True", ",", "reuse", "=", "tf", ".", "AUTO_REUSE", ")", ":", "\n", "\t", "with", "tf", ".", "variable_scope", "(", "'flow_net'", ",", "reuse", "=", "reuse", ")", ":", "\n", "\t\t", "batch_size", ",", "H", ",", "W", ",", "color_channels", "=", "map", "(", "int", ",", "image1", ".", "get_shape", "(", ")", "[", "0", ":", "4", "]", ")", "\n", "\n", "\n", "feature1_1", ",", "feature1_2", ",", "feature1_3", ",", "feature1_4", ",", "feature1_5", ",", "feature1_6", "=", "feature1", "\n", "feature2_1", ",", "feature2_2", ",", "feature2_3", ",", "feature2_4", ",", "feature2_5", ",", "feature2_6", "=", "feature2", "\n", "\n", "cv6", "=", "cost_volumn", "(", "feature1_6", ",", "feature2_6", ",", "d", "=", "4", ")", "\n", "flow6", ",", "_", "=", "optical_flow_decoder_dc", "(", "cv6", ",", "level", "=", "6", ",", "is_training", "=", "is_training", ")", "\n", "\n", "flow6to5", "=", "tf", ".", "image", ".", "resize_bilinear", "(", "flow6", ",", "[", "int", "(", "H", "/", "(", "2", "**", "5", ")", ")", ",", "int", "(", "(", "W", "/", "(", "2", "**", "5", ")", ")", ")", "]", ")", "*", "2.0", "\n", "feature2_5w", "=", "transformer_flow", "(", "feature2_5", ",", "flow6to5", ",", "[", "int", "(", "H", "/", "(", "2", "**", "5", ")", ")", ",", "int", "(", "(", "W", "/", "(", "2", "**", "5", ")", ")", ")", "]", ")", "\n", "cv5", "=", "cost_volumn", "(", "feature1_5", ",", "feature2_5w", ",", "d", "=", "4", ")", "\n", "flow5", ",", "_", "=", "optical_flow_decoder_dc", "(", "tf", ".", "concat", "(", "[", "cv5", ",", "feature1_5", ",", "flow6to5", "]", ",", "axis", "=", "3", ")", ",", "level", "=", "5", ",", "is_training", "=", "is_training", ")", "\n", "flow5", "=", "flow5", "+", "flow6to5", "\n", "\n", "flow5to4", "=", "tf", ".", "image", ".", "resize_bilinear", "(", "flow5", ",", "[", "int", "(", "H", "/", "(", "2", "**", "4", ")", ")", ",", "int", "(", "(", "W", "/", "(", "2", "**", "4", ")", ")", ")", "]", ")", "*", "2.0", "\n", "feature2_4w", "=", "transformer_flow", "(", "feature2_4", ",", "flow5to4", ",", "[", "int", "(", "H", "/", "(", "2", "**", "4", ")", ")", ",", "int", "(", "(", "W", "/", "(", "2", "**", "4", ")", ")", ")", "]", ")", "\n", "cv4", "=", "cost_volumn", "(", "feature1_4", ",", "feature2_4w", ",", "d", "=", "4", ")", "\n", "flow4", ",", "_", "=", "optical_flow_decoder_dc", "(", "tf", ".", "concat", "(", "[", "cv4", ",", "feature1_4", ",", "flow5to4", "]", ",", "axis", "=", "3", ")", ",", "level", "=", "4", ",", "is_training", "=", "is_training", ")", "\n", "flow4", "=", "flow4", "+", "flow5to4", "\n", "\n", "flow4to3", "=", "tf", ".", "image", ".", "resize_bilinear", "(", "flow4", ",", "[", "int", "(", "H", "/", "(", "2", "**", "3", ")", ")", ",", "int", "(", "(", "W", "/", "(", "2", "**", "3", ")", ")", ")", "]", ")", "*", "2.0", "\n", "feature2_3w", "=", "transformer_flow", "(", "feature2_3", ",", "flow4to3", ",", "[", "int", "(", "H", "/", "(", "2", "**", "3", ")", ")", ",", "int", "(", "(", "W", "/", "(", "2", "**", "3", ")", ")", ")", "]", ")", "\n", "cv3", "=", "cost_volumn", "(", "feature1_3", ",", "feature2_3w", ",", "d", "=", "4", ")", "\n", "flow3", ",", "_", "=", "optical_flow_decoder_dc", "(", "tf", ".", "concat", "(", "[", "cv3", ",", "feature1_3", ",", "flow4to3", "]", ",", "axis", "=", "3", ")", ",", "level", "=", "3", ",", "is_training", "=", "is_training", ")", "\n", "flow3", "=", "flow3", "+", "flow4to3", "\n", "\n", "flow3to2", "=", "tf", ".", "image", ".", "resize_bilinear", "(", "flow3", ",", "[", "int", "(", "H", "/", "(", "2", "**", "2", ")", ")", ",", "int", "(", "(", "W", "/", "(", "2", "**", "2", ")", ")", ")", "]", ")", "*", "2.0", "\n", "feature2_2w", "=", "transformer_flow", "(", "feature2_2", ",", "flow3to2", ",", "[", "int", "(", "H", "/", "(", "2", "**", "2", ")", ")", ",", "int", "(", "(", "W", "/", "(", "2", "**", "2", ")", ")", ")", "]", ")", "\n", "cv2", "=", "cost_volumn", "(", "feature1_2", ",", "feature2_2w", ",", "d", "=", "4", ")", "\n", "flow2_raw", ",", "f2", "=", "optical_flow_decoder_dc", "(", "tf", ".", "concat", "(", "[", "cv2", ",", "feature1_2", ",", "flow3to2", "]", ",", "axis", "=", "3", ")", ",", "level", "=", "2", ",", "is_training", "=", "is_training", ")", "\n", "flow2_raw", "=", "flow2_raw", "+", "flow3to2", "\n", "\n", "flow2", "=", "context_net", "(", "tf", ".", "concat", "(", "[", "flow2_raw", ",", "f2", "]", ",", "axis", "=", "3", ")", ",", "is_training", "=", "is_training", ")", "+", "flow2_raw", "\n", "\n", "flow0_enlarge", "=", "tf", ".", "image", ".", "resize_bilinear", "(", "flow2", "*", "4.0", ",", "[", "H", ",", "W", "]", ")", "\n", "flow1_enlarge", "=", "tf", ".", "image", ".", "resize_bilinear", "(", "flow3", "*", "4.0", ",", "[", "int", "(", "H", "/", "(", "2", "**", "1", ")", ")", ",", "int", "(", "(", "W", "/", "(", "2", "**", "1", ")", ")", ")", "]", ")", "\n", "flow2_enlarge", "=", "tf", ".", "image", ".", "resize_bilinear", "(", "flow4", "*", "4.0", ",", "[", "int", "(", "H", "/", "(", "2", "**", "2", ")", ")", ",", "int", "(", "(", "W", "/", "(", "2", "**", "2", ")", ")", ")", "]", ")", "\n", "flow3_enlarge", "=", "tf", ".", "image", ".", "resize_bilinear", "(", "flow5", "*", "4.0", ",", "[", "int", "(", "H", "/", "(", "2", "**", "3", ")", ")", ",", "int", "(", "(", "W", "/", "(", "2", "**", "3", ")", ")", ")", "]", ")", "\n", "\n", "return", "flow0_enlarge", ",", "flow1_enlarge", ",", "flow2_enlarge", ",", "flow3_enlarge", "", "", "", ""]]}