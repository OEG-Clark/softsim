{"home.repos.pwc.inspect_result.styx97_PolarizationAAAI2021.None.find_alignment.normalized": [[13, 18], ["numpy.atleast_1d", "numpy.linalg.norm", "numpy.expand_dims"], "function", ["None"], ["def", "normalized", "(", "a", ",", "axis", "=", "-", "1", ",", "order", "=", "2", ")", ":", "\n", "    ", "\"\"\"Utility function to normalize the rows of a numpy array.\"\"\"", "\n", "l2", "=", "np", ".", "atleast_1d", "(", "np", ".", "linalg", ".", "norm", "(", "a", ",", "order", ",", "axis", ")", ")", "\n", "l2", "[", "l2", "==", "0", "]", "=", "1", "\n", "return", "a", "/", "np", ".", "expand_dims", "(", "l2", ",", "axis", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.styx97_PolarizationAAAI2021.None.find_alignment.make_training_matrices": [[21, 37], ["numpy.array", "numpy.array", "source_matrix.append", "target_matrix.append"], "function", ["None"], ["", "def", "make_training_matrices", "(", "source_dictionary", ",", "target_dictionary", ",", "bilingual_dictionary", ")", ":", "\n", "    ", "\"\"\"\n    Source and target dictionaries are the FastVector objects of\n    source/target languages. bilingual_dictionary is a list of \n    translation pair tuples [(source_word, target_word), ...].\n    \"\"\"", "\n", "source_matrix", "=", "[", "]", "\n", "target_matrix", "=", "[", "]", "\n", "\n", "for", "(", "source", ",", "target", ")", "in", "bilingual_dictionary", ":", "\n", "        ", "if", "source", "in", "source_dictionary", "and", "target", "in", "target_dictionary", ":", "\n", "            ", "source_matrix", ".", "append", "(", "source_dictionary", "[", "source", "]", ")", "\n", "target_matrix", ".", "append", "(", "target_dictionary", "[", "target", "]", ")", "\n", "\n", "# return training matrices", "\n", "", "", "return", "np", ".", "array", "(", "source_matrix", ")", ",", "np", ".", "array", "(", "target_matrix", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.styx97_PolarizationAAAI2021.None.find_alignment.learn_transformation": [[38, 55], ["numpy.matmul", "numpy.linalg.svd", "numpy.matmul", "find_alignment.normalized", "find_alignment.normalized", "normalized.transpose"], "function", ["home.repos.pwc.inspect_result.styx97_PolarizationAAAI2021.None.find_alignment.normalized", "home.repos.pwc.inspect_result.styx97_PolarizationAAAI2021.None.find_alignment.normalized"], ["", "def", "learn_transformation", "(", "source_matrix", ",", "target_matrix", ",", "normalize_vectors", "=", "True", ")", ":", "\n", "    ", "\"\"\"\n    Source and target matrices are numpy arrays, shape\n    (dictionary_length, embedding_dimension). These contain paired\n    word vectors from the bilingual dictionary.\n    \"\"\"", "\n", "# optionally normalize the training vectors", "\n", "if", "normalize_vectors", ":", "\n", "        ", "source_matrix", "=", "normalized", "(", "source_matrix", ")", "\n", "target_matrix", "=", "normalized", "(", "target_matrix", ")", "\n", "\n", "# perform the SVD", "\n", "", "product", "=", "np", ".", "matmul", "(", "source_matrix", ".", "transpose", "(", ")", ",", "target_matrix", ")", "\n", "U", ",", "s", ",", "V", "=", "np", ".", "linalg", ".", "svd", "(", "product", ")", "\n", "\n", "# return orthogonal transformation which aligns source language to the target", "\n", "return", "np", ".", "matmul", "(", "U", ",", "V", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.styx97_PolarizationAAAI2021.None.find_alignment.get_nearest_words": [[56, 65], ["distances.sort", "scipy.spatial.distance.cosine", "distances.append"], "function", ["None"], ["", "def", "get_nearest_words", "(", "vector", ",", "model", ",", "words", ")", ":", "\n", "    ", "distances", "=", "[", "]", "\n", "for", "w", "in", "words", ":", "\n", "#dist = np.linalg.norm(vector - model[w])", "\n", "        ", "dist", "=", "cosine", "(", "vector", ",", "model", "[", "w", "]", ")", "\n", "distances", ".", "append", "(", "[", "w", ",", "dist", "]", ")", "\n", "\n", "", "distances", ".", "sort", "(", "key", "=", "lambda", "x", ":", "x", "[", "1", "]", ")", "\n", "return", "distances", "[", ":", "10", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.styx97_PolarizationAAAI2021.None.find_alignment.get_words": [[67, 74], ["open", "intersection.append", "line.rstrip"], "function", ["None"], ["", "def", "get_words", "(", "filename", ")", ":", "\n", "    ", "intersection", "=", "[", "]", "\n", "with", "open", "(", "filename", ")", "as", "f", ":", "\n", "        ", "for", "line", "in", "f", ":", "\n", "            ", "intersection", ".", "append", "(", "line", ".", "rstrip", "(", "\"\\n\"", ")", ")", "\n", "\n", "", "", "return", "intersection", "\n", "\n"]]}