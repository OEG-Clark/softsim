{"home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.box_cxcywh_to_xyxy": [[6, 11], ["x.unbind", "torch.stack"], "function", ["None"], ["def", "box_cxcywh_to_xyxy", "(", "x", ")", ":", "\n", "    ", "x_c", ",", "y_c", ",", "w", ",", "h", "=", "x", ".", "unbind", "(", "-", "1", ")", "\n", "b", "=", "[", "(", "x_c", "-", "0.5", "*", "w", ")", ",", "(", "y_c", "-", "0.5", "*", "h", ")", ",", "\n", "(", "x_c", "+", "0.5", "*", "w", ")", ",", "(", "y_c", "+", "0.5", "*", "h", ")", "]", "\n", "return", "torch", ".", "stack", "(", "b", ",", "dim", "=", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.box_xywh_to_xyxy": [[13, 17], ["x.unbind", "torch.stack"], "function", ["None"], ["", "def", "box_xywh_to_xyxy", "(", "x", ")", ":", "\n", "    ", "x1", ",", "y1", ",", "w", ",", "h", "=", "x", ".", "unbind", "(", "-", "1", ")", "\n", "b", "=", "[", "x1", ",", "y1", ",", "x1", "+", "w", ",", "y1", "+", "h", "]", "\n", "return", "torch", ".", "stack", "(", "b", ",", "dim", "=", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.box_xyxy_to_xywh": [[19, 23], ["x.unbind", "torch.stack"], "function", ["None"], ["", "def", "box_xyxy_to_xywh", "(", "x", ")", ":", "\n", "    ", "x1", ",", "y1", ",", "x2", ",", "y2", "=", "x", ".", "unbind", "(", "-", "1", ")", "\n", "b", "=", "[", "x1", ",", "y1", ",", "x2", "-", "x1", ",", "y2", "-", "y1", "]", "\n", "return", "torch", ".", "stack", "(", "b", ",", "dim", "=", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.box_xyxy_to_cxcywh": [[25, 30], ["x.unbind", "torch.stack"], "function", ["None"], ["", "def", "box_xyxy_to_cxcywh", "(", "x", ")", ":", "\n", "    ", "x0", ",", "y0", ",", "x1", ",", "y1", "=", "x", ".", "unbind", "(", "-", "1", ")", "\n", "b", "=", "[", "(", "x0", "+", "x1", ")", "/", "2", ",", "(", "y0", "+", "y1", ")", "/", "2", ",", "\n", "(", "x1", "-", "x0", ")", ",", "(", "y1", "-", "y0", ")", "]", "\n", "return", "torch", ".", "stack", "(", "b", ",", "dim", "=", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.box_iou": [[36, 56], ["torchvision.ops.boxes.box_area", "torchvision.ops.boxes.box_area", "torch.max", "torch.min"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["def", "box_iou", "(", "boxes1", ",", "boxes2", ")", ":", "\n", "    ", "\"\"\"\n\n    :param boxes1: (N, 4) (x1,y1,x2,y2)\n    :param boxes2: (N, 4) (x1,y1,x2,y2)\n    :return:\n    \"\"\"", "\n", "area1", "=", "box_area", "(", "boxes1", ")", "# (N,)", "\n", "area2", "=", "box_area", "(", "boxes2", ")", "# (N,)", "\n", "\n", "lt", "=", "torch", ".", "max", "(", "boxes1", "[", ":", ",", ":", "2", "]", ",", "boxes2", "[", ":", ",", ":", "2", "]", ")", "# (N,2)", "\n", "rb", "=", "torch", ".", "min", "(", "boxes1", "[", ":", ",", "2", ":", "]", ",", "boxes2", "[", ":", ",", "2", ":", "]", ")", "# (N,2)", "\n", "\n", "wh", "=", "(", "rb", "-", "lt", ")", ".", "clamp", "(", "min", "=", "0", ")", "# (N,2)", "\n", "inter", "=", "wh", "[", ":", ",", "0", "]", "*", "wh", "[", ":", ",", "1", "]", "# (N,)", "\n", "\n", "union", "=", "area1", "+", "area2", "-", "inter", "\n", "\n", "iou", "=", "inter", "/", "union", "\n", "return", "iou", ",", "union", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.generalized_box_iou": [[61, 84], ["box_ops.box_iou", "torch.min", "torch.max"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.box_iou", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["def", "generalized_box_iou", "(", "boxes1", ",", "boxes2", ")", ":", "\n", "    ", "\"\"\"\n    Generalized IoU from https://giou.stanford.edu/\n\n    The boxes should be in [x0, y0, x1, y1] format\n\n    boxes1: (N, 4)\n    boxes2: (N, 4)\n    \"\"\"", "\n", "# degenerate boxes gives inf / nan results", "\n", "# so do an early check", "\n", "# try:", "\n", "assert", "(", "boxes1", "[", ":", ",", "2", ":", "]", ">=", "boxes1", "[", ":", ",", ":", "2", "]", ")", ".", "all", "(", ")", "\n", "assert", "(", "boxes2", "[", ":", ",", "2", ":", "]", ">=", "boxes2", "[", ":", ",", ":", "2", "]", ")", ".", "all", "(", ")", "\n", "iou", ",", "union", "=", "box_iou", "(", "boxes1", ",", "boxes2", ")", "# (N,)", "\n", "\n", "lt", "=", "torch", ".", "min", "(", "boxes1", "[", ":", ",", ":", "2", "]", ",", "boxes2", "[", ":", ",", ":", "2", "]", ")", "\n", "rb", "=", "torch", ".", "max", "(", "boxes1", "[", ":", ",", "2", ":", "]", ",", "boxes2", "[", ":", ",", "2", ":", "]", ")", "\n", "\n", "wh", "=", "(", "rb", "-", "lt", ")", ".", "clamp", "(", "min", "=", "0", ")", "# (N,2)", "\n", "area", "=", "wh", "[", ":", ",", "0", "]", "*", "wh", "[", ":", ",", "1", "]", "# (N,)", "\n", "\n", "return", "iou", "-", "(", "area", "-", "union", ")", "/", "area", ",", "iou", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.giou_loss": [[86, 95], ["box_ops.generalized_box_iou"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.generalized_box_iou"], ["", "def", "giou_loss", "(", "boxes1", ",", "boxes2", ")", ":", "\n", "    ", "\"\"\"\n\n    :param boxes1: (N, 4) (x1,y1,x2,y2)\n    :param boxes2: (N, 4) (x1,y1,x2,y2)\n    :return:\n    \"\"\"", "\n", "giou", ",", "iou", "=", "generalized_box_iou", "(", "boxes1", ",", "boxes2", ")", "\n", "return", "(", "1", "-", "giou", ")", ".", "mean", "(", ")", ",", "iou", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.clip_box": [[97, 107], ["min", "min", "min", "min", "max", "max", "max", "max", "max", "max"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "clip_box", "(", "box", ":", "list", ",", "H", ",", "W", ",", "margin", "=", "0", ")", ":", "\n", "    ", "x1", ",", "y1", ",", "w", ",", "h", "=", "box", "\n", "x2", ",", "y2", "=", "x1", "+", "w", ",", "y1", "+", "h", "\n", "x1", "=", "min", "(", "max", "(", "0", ",", "x1", ")", ",", "W", "-", "margin", ")", "\n", "x2", "=", "min", "(", "max", "(", "margin", ",", "x2", ")", ",", "W", ")", "\n", "y1", "=", "min", "(", "max", "(", "0", ",", "y1", ")", ",", "H", "-", "margin", ")", "\n", "y2", "=", "min", "(", "max", "(", "margin", ",", "y2", ")", ",", "H", ")", "\n", "w", "=", "max", "(", "margin", ",", "x2", "-", "x1", ")", "\n", "h", "=", "max", "(", "margin", ",", "y2", "-", "y1", ")", "\n", "return", "[", "x1", ",", "y1", ",", "w", ",", "h", "]", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.__init__": [[32, 39], ["collections.deque"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "window_size", "=", "20", ",", "fmt", "=", "None", ")", ":", "\n", "        ", "if", "fmt", "is", "None", ":", "\n", "            ", "fmt", "=", "\"{median:.4f} ({global_avg:.4f})\"", "\n", "", "self", ".", "deque", "=", "deque", "(", "maxlen", "=", "window_size", ")", "\n", "self", ".", "total", "=", "0.0", "\n", "self", ".", "count", "=", "0", "\n", "self", ".", "fmt", "=", "fmt", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.update": [[40, 44], ["misc.SmoothedValue.deque.append"], "methods", ["None"], ["", "def", "update", "(", "self", ",", "value", ",", "n", "=", "1", ")", ":", "\n", "        ", "self", ".", "deque", ".", "append", "(", "value", ")", "\n", "self", ".", "count", "+=", "n", "\n", "self", ".", "total", "+=", "value", "*", "n", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.synchronize_between_processes": [[45, 57], ["torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.barrier", "torch.barrier", "torch.all_reduce", "torch.all_reduce", "t.tolist.tolist.tolist", "int", "misc.is_dist_avail_and_initialized"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.is_dist_avail_and_initialized"], ["", "def", "synchronize_between_processes", "(", "self", ")", ":", "\n", "        ", "\"\"\"\n        Warning: does not synchronize the deque!\n        \"\"\"", "\n", "if", "not", "is_dist_avail_and_initialized", "(", ")", ":", "\n", "            ", "return", "\n", "", "t", "=", "torch", ".", "tensor", "(", "[", "self", ".", "count", ",", "self", ".", "total", "]", ",", "dtype", "=", "torch", ".", "float64", ",", "device", "=", "'cuda'", ")", "\n", "dist", ".", "barrier", "(", ")", "\n", "dist", ".", "all_reduce", "(", "t", ")", "\n", "t", "=", "t", ".", "tolist", "(", ")", "\n", "self", ".", "count", "=", "int", "(", "t", "[", "0", "]", ")", "\n", "self", ".", "total", "=", "t", "[", "1", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.median": [[58, 62], ["torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor.median().item", "torch.tensor.median().item", "list", "torch.tensor.median", "torch.tensor.median"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.median", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.median"], ["", "@", "property", "\n", "def", "median", "(", "self", ")", ":", "\n", "        ", "d", "=", "torch", ".", "tensor", "(", "list", "(", "self", ".", "deque", ")", ")", "\n", "return", "d", ".", "median", "(", ")", ".", "item", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.avg": [[63, 67], ["torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor.mean().item", "torch.tensor.mean().item", "list", "torch.tensor.mean", "torch.tensor.mean"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], ["", "@", "property", "\n", "def", "avg", "(", "self", ")", ":", "\n", "        ", "d", "=", "torch", ".", "tensor", "(", "list", "(", "self", ".", "deque", ")", ",", "dtype", "=", "torch", ".", "float32", ")", "\n", "return", "d", ".", "mean", "(", ")", ".", "item", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.global_avg": [[68, 71], ["None"], "methods", ["None"], ["", "@", "property", "\n", "def", "global_avg", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "total", "/", "self", ".", "count", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max": [[72, 75], ["misc.SmoothedValue.max"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "@", "property", "\n", "def", "max", "(", "self", ")", ":", "\n", "        ", "return", "max", "(", "self", ".", "deque", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.value": [[76, 79], ["None"], "methods", ["None"], ["", "@", "property", "\n", "def", "value", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "deque", "[", "-", "1", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.__str__": [[80, 87], ["misc.SmoothedValue.fmt.format"], "methods", ["None"], ["", "def", "__str__", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "fmt", ".", "format", "(", "\n", "median", "=", "self", ".", "median", ",", "\n", "avg", "=", "self", ".", "avg", ",", "\n", "global_avg", "=", "self", ".", "global_avg", ",", "\n", "max", "=", "self", ".", "max", ",", "\n", "value", "=", "self", ".", "value", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.MetricLogger.__init__": [[160, 163], ["collections.defaultdict"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "delimiter", "=", "\"\\t\"", ")", ":", "\n", "        ", "self", ".", "meters", "=", "defaultdict", "(", "SmoothedValue", ")", "\n", "self", ".", "delimiter", "=", "delimiter", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.MetricLogger.update": [[164, 170], ["kwargs.items", "isinstance", "isinstance", "misc.MetricLogger.meters[].update", "v.item.item.item"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update"], ["", "def", "update", "(", "self", ",", "**", "kwargs", ")", ":", "\n", "        ", "for", "k", ",", "v", "in", "kwargs", ".", "items", "(", ")", ":", "\n", "            ", "if", "isinstance", "(", "v", ",", "torch", ".", "Tensor", ")", ":", "\n", "                ", "v", "=", "v", ".", "item", "(", ")", "\n", "", "assert", "isinstance", "(", "v", ",", "(", "float", ",", "int", ")", ")", "\n", "self", ".", "meters", "[", "k", "]", ".", "update", "(", "v", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.MetricLogger.__getattr__": [[171, 178], ["AttributeError", "type"], "methods", ["None"], ["", "", "def", "__getattr__", "(", "self", ",", "attr", ")", ":", "\n", "        ", "if", "attr", "in", "self", ".", "meters", ":", "\n", "            ", "return", "self", ".", "meters", "[", "attr", "]", "\n", "", "if", "attr", "in", "self", ".", "__dict__", ":", "\n", "            ", "return", "self", ".", "__dict__", "[", "attr", "]", "\n", "", "raise", "AttributeError", "(", "\"'{}' object has no attribute '{}'\"", ".", "format", "(", "\n", "type", "(", "self", ")", ".", "__name__", ",", "attr", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.MetricLogger.__str__": [[179, 186], ["misc.MetricLogger.meters.items", "misc.MetricLogger.delimiter.join", "loss_str.append", "str"], "methods", ["None"], ["", "def", "__str__", "(", "self", ")", ":", "\n", "        ", "loss_str", "=", "[", "]", "\n", "for", "name", ",", "meter", "in", "self", ".", "meters", ".", "items", "(", ")", ":", "\n", "            ", "loss_str", ".", "append", "(", "\n", "\"{}: {}\"", ".", "format", "(", "name", ",", "str", "(", "meter", ")", ")", "\n", ")", "\n", "", "return", "self", ".", "delimiter", ".", "join", "(", "loss_str", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.MetricLogger.synchronize_between_processes": [[187, 190], ["misc.MetricLogger.meters.values", "meter.synchronize_between_processes"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.MetricLogger.synchronize_between_processes"], ["", "def", "synchronize_between_processes", "(", "self", ")", ":", "\n", "        ", "for", "meter", "in", "self", ".", "meters", ".", "values", "(", ")", ":", "\n", "            ", "meter", ".", "synchronize_between_processes", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.MetricLogger.add_meter": [[191, 193], ["None"], "methods", ["None"], ["", "", "def", "add_meter", "(", "self", ",", "name", ",", "meter", ")", ":", "\n", "        ", "self", ".", "meters", "[", "name", "]", "=", "meter", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.MetricLogger.log_every": [[194, 247], ["time.time", "time.time", "misc.SmoothedValue", "misc.SmoothedValue", "torch.cuda.is_available", "torch.cuda.is_available", "torch.cuda.is_available", "torch.cuda.is_available", "str", "print", "misc.MetricLogger.delimiter.join", "misc.MetricLogger.delimiter.join", "misc.SmoothedValue.update", "misc.SmoothedValue.update", "time.time", "time.time", "datetime.timedelta", "str", "str", "torch.cuda.is_available", "torch.cuda.is_available", "torch.cuda.is_available", "torch.cuda.is_available", "len", "time.time", "time.time", "datetime.timedelta", "print", "print", "int", "len", "str", "len", "len", "misc.MetricLogger.format", "misc.MetricLogger.format", "len", "int", "len", "len", "str", "str", "str", "str", "str", "str", "torch.cuda.max_memory_allocated", "torch.cuda.max_memory_allocated", "torch.cuda.max_memory_allocated", "torch.cuda.max_memory_allocated"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update"], ["", "def", "log_every", "(", "self", ",", "iterable", ",", "print_freq", ",", "header", "=", "None", ")", ":", "\n", "        ", "i", "=", "0", "\n", "if", "not", "header", ":", "\n", "            ", "header", "=", "''", "\n", "", "start_time", "=", "time", ".", "time", "(", ")", "\n", "end", "=", "time", ".", "time", "(", ")", "\n", "iter_time", "=", "SmoothedValue", "(", "fmt", "=", "'{avg:.4f}'", ")", "\n", "data_time", "=", "SmoothedValue", "(", "fmt", "=", "'{avg:.4f}'", ")", "\n", "space_fmt", "=", "':'", "+", "str", "(", "len", "(", "str", "(", "len", "(", "iterable", ")", ")", ")", ")", "+", "'d'", "\n", "if", "torch", ".", "cuda", ".", "is_available", "(", ")", ":", "\n", "            ", "log_msg", "=", "self", ".", "delimiter", ".", "join", "(", "[", "\n", "header", ",", "\n", "'[{0'", "+", "space_fmt", "+", "'}/{1}]'", ",", "\n", "'eta: {eta}'", ",", "\n", "'{meters}'", ",", "\n", "'time: {time}'", ",", "\n", "'data: {data}'", ",", "\n", "'max mem: {memory:.0f}'", "\n", "]", ")", "\n", "", "else", ":", "\n", "            ", "log_msg", "=", "self", ".", "delimiter", ".", "join", "(", "[", "\n", "header", ",", "\n", "'[{0'", "+", "space_fmt", "+", "'}/{1}]'", ",", "\n", "'eta: {eta}'", ",", "\n", "'{meters}'", ",", "\n", "'time: {time}'", ",", "\n", "'data: {data}'", "\n", "]", ")", "\n", "", "MB", "=", "1024.0", "*", "1024.0", "\n", "for", "obj", "in", "iterable", ":", "\n", "            ", "data_time", ".", "update", "(", "time", ".", "time", "(", ")", "-", "end", ")", "\n", "yield", "obj", "\n", "iter_time", ".", "update", "(", "time", ".", "time", "(", ")", "-", "end", ")", "\n", "if", "i", "%", "print_freq", "==", "0", "or", "i", "==", "len", "(", "iterable", ")", "-", "1", ":", "\n", "                ", "eta_seconds", "=", "iter_time", ".", "global_avg", "*", "(", "len", "(", "iterable", ")", "-", "i", ")", "\n", "eta_string", "=", "str", "(", "datetime", ".", "timedelta", "(", "seconds", "=", "int", "(", "eta_seconds", ")", ")", ")", "\n", "if", "torch", ".", "cuda", ".", "is_available", "(", ")", ":", "\n", "                    ", "print", "(", "log_msg", ".", "format", "(", "\n", "i", ",", "len", "(", "iterable", ")", ",", "eta", "=", "eta_string", ",", "\n", "meters", "=", "str", "(", "self", ")", ",", "\n", "time", "=", "str", "(", "iter_time", ")", ",", "data", "=", "str", "(", "data_time", ")", ",", "\n", "memory", "=", "torch", ".", "cuda", ".", "max_memory_allocated", "(", ")", "/", "MB", ")", ")", "\n", "", "else", ":", "\n", "                    ", "print", "(", "log_msg", ".", "format", "(", "\n", "i", ",", "len", "(", "iterable", ")", ",", "eta", "=", "eta_string", ",", "\n", "meters", "=", "str", "(", "self", ")", ",", "\n", "time", "=", "str", "(", "iter_time", ")", ",", "data", "=", "str", "(", "data_time", ")", ")", ")", "\n", "", "", "i", "+=", "1", "\n", "end", "=", "time", ".", "time", "(", ")", "\n", "", "total_time", "=", "time", ".", "time", "(", ")", "-", "start_time", "\n", "total_time_str", "=", "str", "(", "datetime", ".", "timedelta", "(", "seconds", "=", "int", "(", "total_time", ")", ")", ")", "\n", "print", "(", "'{} Total time: {} ({:.4f} s / it)'", ".", "format", "(", "\n", "header", ",", "total_time_str", ",", "total_time", "/", "len", "(", "iterable", ")", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.NestedTensor.__init__": [[285, 288], ["None"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "tensors", ",", "mask", ":", "Optional", "[", "Tensor", "]", ")", ":", "\n", "        ", "self", ".", "tensors", "=", "tensors", "\n", "self", ".", "mask", "=", "mask", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.NestedTensor.to": [[289, 299], ["misc.NestedTensor.tensors.to", "misc.NestedTensor", "mask.to"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to"], ["", "def", "to", "(", "self", ",", "device", ")", ":", "\n", "# type: (Device) -> NestedTensor # noqa", "\n", "        ", "cast_tensor", "=", "self", ".", "tensors", ".", "to", "(", "device", ")", "\n", "mask", "=", "self", ".", "mask", "\n", "if", "mask", "is", "not", "None", ":", "\n", "            ", "assert", "mask", "is", "not", "None", "\n", "cast_mask", "=", "mask", ".", "to", "(", "device", ")", "\n", "", "else", ":", "\n", "            ", "cast_mask", "=", "None", "\n", "", "return", "NestedTensor", "(", "cast_tensor", ",", "cast_mask", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.NestedTensor.decompose": [[300, 302], ["None"], "methods", ["None"], ["", "def", "decompose", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "tensors", ",", "self", ".", "mask", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.NestedTensor.__repr__": [[303, 305], ["str"], "methods", ["None"], ["", "def", "__repr__", "(", "self", ")", ":", "\n", "        ", "return", "str", "(", "self", ".", "tensors", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.all_gather": [[89, 130], ["misc.get_world_size", "pickle.dumps", "torch.ByteStorage.from_buffer", "torch.ByteStorage.from_buffer", "torch.ByteTensor().to", "torch.ByteTensor().to", "torch.tensor", "torch.tensor", "torch.all_gather", "max", "torch.all_gather", "zip", "torch.tensor", "torch.tensor", "int", "tensor_list.append", "torch.empty", "torch.empty", "torch.cat", "torch.cat", "data_list.append", "torch.ByteTensor", "torch.ByteTensor", "torch.cat.numel", "range", "size.item", "torch.empty", "torch.empty", "torch.cat.cpu().numpy().tobytes", "pickle.loads", "torch.cat.cpu().numpy", "torch.cat.cpu"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.get_world_size", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.all_gather", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.all_gather"], ["", "", "def", "all_gather", "(", "data", ")", ":", "\n", "    ", "\"\"\"\n    Run all_gather on arbitrary picklable data (not necessarily tensors)\n    Args:\n        data: any picklable object\n    Returns:\n        list[data]: list of data gathered from each rank\n    \"\"\"", "\n", "world_size", "=", "get_world_size", "(", ")", "\n", "if", "world_size", "==", "1", ":", "\n", "        ", "return", "[", "data", "]", "\n", "\n", "# serialized to a Tensor", "\n", "", "buffer", "=", "pickle", ".", "dumps", "(", "data", ")", "\n", "storage", "=", "torch", ".", "ByteStorage", ".", "from_buffer", "(", "buffer", ")", "\n", "tensor", "=", "torch", ".", "ByteTensor", "(", "storage", ")", ".", "to", "(", "\"cuda\"", ")", "\n", "\n", "# obtain Tensor size of each rank", "\n", "local_size", "=", "torch", ".", "tensor", "(", "[", "tensor", ".", "numel", "(", ")", "]", ",", "device", "=", "\"cuda\"", ")", "\n", "size_list", "=", "[", "torch", ".", "tensor", "(", "[", "0", "]", ",", "device", "=", "\"cuda\"", ")", "for", "_", "in", "range", "(", "world_size", ")", "]", "\n", "dist", ".", "all_gather", "(", "size_list", ",", "local_size", ")", "\n", "size_list", "=", "[", "int", "(", "size", ".", "item", "(", ")", ")", "for", "size", "in", "size_list", "]", "\n", "max_size", "=", "max", "(", "size_list", ")", "\n", "\n", "# receiving Tensor from all ranks", "\n", "# we pad the tensor because torch all_gather does not support", "\n", "# gathering tensors of different shapes", "\n", "tensor_list", "=", "[", "]", "\n", "for", "_", "in", "size_list", ":", "\n", "        ", "tensor_list", ".", "append", "(", "torch", ".", "empty", "(", "(", "max_size", ",", ")", ",", "dtype", "=", "torch", ".", "uint8", ",", "device", "=", "\"cuda\"", ")", ")", "\n", "", "if", "local_size", "!=", "max_size", ":", "\n", "        ", "padding", "=", "torch", ".", "empty", "(", "size", "=", "(", "max_size", "-", "local_size", ",", ")", ",", "dtype", "=", "torch", ".", "uint8", ",", "device", "=", "\"cuda\"", ")", "\n", "tensor", "=", "torch", ".", "cat", "(", "(", "tensor", ",", "padding", ")", ",", "dim", "=", "0", ")", "\n", "", "dist", ".", "all_gather", "(", "tensor_list", ",", "tensor", ")", "\n", "\n", "data_list", "=", "[", "]", "\n", "for", "size", ",", "tensor", "in", "zip", "(", "size_list", ",", "tensor_list", ")", ":", "\n", "        ", "buffer", "=", "tensor", ".", "cpu", "(", ")", ".", "numpy", "(", ")", ".", "tobytes", "(", ")", "[", ":", "size", "]", "\n", "data_list", ".", "append", "(", "pickle", ".", "loads", "(", "buffer", ")", ")", "\n", "\n", "", "return", "data_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.reduce_dict": [[132, 157], ["misc.get_world_size", "torch.no_grad", "torch.no_grad", "sorted", "torch.stack", "torch.stack", "torch.all_reduce", "input_dict.keys", "names.append", "torch.stack.append", "zip"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.get_world_size"], ["", "def", "reduce_dict", "(", "input_dict", ",", "average", "=", "True", ")", ":", "\n", "    ", "\"\"\"\n    Args:\n        input_dict (dict): all the values will be reduced\n        average (bool): whether to do average or sum\n    Reduce the values in the dictionary from all processes so that all processes\n    have the averaged results. Returns a dict with the same fields as\n    input_dict, after reduction.\n    \"\"\"", "\n", "world_size", "=", "get_world_size", "(", ")", "\n", "if", "world_size", "<", "2", ":", "\n", "        ", "return", "input_dict", "\n", "", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "        ", "names", "=", "[", "]", "\n", "values", "=", "[", "]", "\n", "# sort the keys so that they are consistent across processes", "\n", "for", "k", "in", "sorted", "(", "input_dict", ".", "keys", "(", ")", ")", ":", "\n", "            ", "names", ".", "append", "(", "k", ")", "\n", "values", ".", "append", "(", "input_dict", "[", "k", "]", ")", "\n", "", "values", "=", "torch", ".", "stack", "(", "values", ",", "dim", "=", "0", ")", "\n", "dist", ".", "all_reduce", "(", "values", ")", "\n", "if", "average", ":", "\n", "            ", "values", "/=", "world_size", "\n", "", "reduced_dict", "=", "{", "k", ":", "v", "for", "k", ",", "v", "in", "zip", "(", "names", ",", "values", ")", "}", "\n", "", "return", "reduced_dict", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.get_sha": [[249, 267], ["os.path.dirname", "os.path.abspath", "subprocess.check_output().decode().strip", "misc.get_sha._run"], "function", ["None"], ["", "", "def", "get_sha", "(", ")", ":", "\n", "    ", "cwd", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "\n", "def", "_run", "(", "command", ")", ":", "\n", "        ", "return", "subprocess", ".", "check_output", "(", "command", ",", "cwd", "=", "cwd", ")", ".", "decode", "(", "'ascii'", ")", ".", "strip", "(", ")", "\n", "", "sha", "=", "'N/A'", "\n", "diff", "=", "\"clean\"", "\n", "branch", "=", "'N/A'", "\n", "try", ":", "\n", "        ", "sha", "=", "_run", "(", "[", "'git'", ",", "'rev-parse'", ",", "'HEAD'", "]", ")", "\n", "subprocess", ".", "check_output", "(", "[", "'git'", ",", "'diff'", "]", ",", "cwd", "=", "cwd", ")", "\n", "diff", "=", "_run", "(", "[", "'git'", ",", "'diff-index'", ",", "'HEAD'", "]", ")", "\n", "diff", "=", "\"has uncommited changes\"", "if", "diff", "else", "\"clean\"", "\n", "branch", "=", "_run", "(", "[", "'git'", ",", "'rev-parse'", ",", "'--abbrev-ref'", ",", "'HEAD'", "]", ")", "\n", "", "except", "Exception", ":", "\n", "        ", "pass", "\n", "", "message", "=", "f\"sha: {sha}, status: {diff}, branch: {branch}\"", "\n", "return", "message", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.collate_fn": [[269, 273], ["list", "misc.nested_tensor_from_tensor_list", "tuple", "zip"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.nested_tensor_from_tensor_list"], ["", "def", "collate_fn", "(", "batch", ")", ":", "\n", "    ", "batch", "=", "list", "(", "zip", "(", "*", "batch", ")", ")", "\n", "batch", "[", "0", "]", "=", "nested_tensor_from_tensor_list", "(", "batch", "[", "0", "]", ")", "\n", "return", "tuple", "(", "batch", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc._max_by_axis": [[275, 282], ["enumerate", "max"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "_max_by_axis", "(", "the_list", ")", ":", "\n", "# type: (List[List[int]]) -> List[int]", "\n", "    ", "maxes", "=", "the_list", "[", "0", "]", "# get the first one", "\n", "for", "sublist", "in", "the_list", "[", "1", ":", "]", ":", "# [h,w,3]", "\n", "        ", "for", "index", ",", "item", "in", "enumerate", "(", "sublist", ")", ":", "# index: 0,1,2", "\n", "            ", "maxes", "[", "index", "]", "=", "max", "(", "maxes", "[", "index", "]", ",", "item", ")", "# compare current max with the other elements in the whole", "\n", "", "", "return", "maxes", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.nested_tensor_from_tensor_list": [[307, 330], ["misc.NestedTensor", "torchvision._is_tracing", "misc._max_by_axis", "torch.zeros", "torch.zeros", "torch.ones", "torch.ones", "zip", "ValueError", "misc._onnx_nested_tensor_from_tensor_list", "pad_img[].copy_", "list", "len"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc._max_by_axis", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc._onnx_nested_tensor_from_tensor_list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "", "def", "nested_tensor_from_tensor_list", "(", "tensor_list", ":", "List", "[", "Tensor", "]", ")", ":", "\n", "# TODO make this more general", "\n", "    ", "if", "tensor_list", "[", "0", "]", ".", "ndim", "==", "3", ":", "\n", "        ", "if", "torchvision", ".", "_is_tracing", "(", ")", ":", "\n", "# nested_tensor_from_tensor_list() does not export well to ONNX", "\n", "# call _onnx_nested_tensor_from_tensor_list() instead", "\n", "            ", "return", "_onnx_nested_tensor_from_tensor_list", "(", "tensor_list", ")", "\n", "\n", "# TODO make it support different-sized images", "\n", "", "max_size", "=", "_max_by_axis", "(", "[", "list", "(", "img", ".", "shape", ")", "for", "img", "in", "tensor_list", "]", ")", "# [[3,h1,w1], [3,h2,w2], [3,h3,w3], ...]", "\n", "# min_size = tuple(min(s) for s in zip(*[img.shape for img in tensor_list]))", "\n", "batch_shape", "=", "[", "len", "(", "tensor_list", ")", "]", "+", "max_size", "# ()", "\n", "b", ",", "c", ",", "h", ",", "w", "=", "batch_shape", "\n", "dtype", "=", "tensor_list", "[", "0", "]", ".", "dtype", "\n", "device", "=", "tensor_list", "[", "0", "]", ".", "device", "\n", "tensor", "=", "torch", ".", "zeros", "(", "batch_shape", ",", "dtype", "=", "dtype", ",", "device", "=", "device", ")", "\n", "mask", "=", "torch", ".", "ones", "(", "(", "b", ",", "h", ",", "w", ")", ",", "dtype", "=", "torch", ".", "bool", ",", "device", "=", "device", ")", "\n", "for", "img", ",", "pad_img", ",", "m", "in", "zip", "(", "tensor_list", ",", "tensor", ",", "mask", ")", ":", "\n", "            ", "pad_img", "[", ":", "img", ".", "shape", "[", "0", "]", ",", ":", "img", ".", "shape", "[", "1", "]", ",", ":", "img", ".", "shape", "[", "2", "]", "]", ".", "copy_", "(", "img", ")", "# copy valid regions of the images to the largest padded base.", "\n", "m", "[", ":", "img", ".", "shape", "[", "1", "]", ",", ":", "img", ".", "shape", "[", "2", "]", "]", "=", "False", "\n", "", "", "else", ":", "\n", "        ", "raise", "ValueError", "(", "'not supported'", ")", "\n", "", "return", "NestedTensor", "(", "tensor", ",", "mask", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc._onnx_nested_tensor_from_tensor_list": [[334, 361], ["range", "tuple", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "misc.NestedTensor", "tensor_list[].dim", "torch.max().to", "torch.max().to", "tuple.append", "torch.nn.functional.pad", "torch.nn.functional.pad", "padded_imgs.append", "torch.zeros_like", "torch.zeros_like", "torch.nn.functional.pad", "torch.nn.functional.pad", "padded_masks.append", "torch.nn.functional.pad.to", "torch.max", "torch.max", "zip", "torch.stack().to", "torch.stack().to", "tuple", "torch.stack", "torch.stack"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to"], ["", "@", "torch", ".", "jit", ".", "unused", "\n", "def", "_onnx_nested_tensor_from_tensor_list", "(", "tensor_list", ":", "List", "[", "Tensor", "]", ")", "->", "NestedTensor", ":", "\n", "    ", "max_size", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "tensor_list", "[", "0", "]", ".", "dim", "(", ")", ")", ":", "\n", "        ", "max_size_i", "=", "torch", ".", "max", "(", "torch", ".", "stack", "(", "[", "img", ".", "shape", "[", "i", "]", "for", "img", "in", "tensor_list", "]", ")", ".", "to", "(", "torch", ".", "float32", ")", ")", ".", "to", "(", "torch", ".", "int64", ")", "\n", "max_size", ".", "append", "(", "max_size_i", ")", "\n", "", "max_size", "=", "tuple", "(", "max_size", ")", "\n", "\n", "# work around for", "\n", "# pad_img[: img.shape[0], : img.shape[1], : img.shape[2]].copy_(img)", "\n", "# m[: img.shape[1], :img.shape[2]] = False", "\n", "# which is not yet supported in onnx", "\n", "padded_imgs", "=", "[", "]", "\n", "padded_masks", "=", "[", "]", "\n", "for", "img", "in", "tensor_list", ":", "\n", "        ", "padding", "=", "[", "(", "s1", "-", "s2", ")", "for", "s1", ",", "s2", "in", "zip", "(", "max_size", ",", "tuple", "(", "img", ".", "shape", ")", ")", "]", "\n", "padded_img", "=", "torch", ".", "nn", ".", "functional", ".", "pad", "(", "img", ",", "(", "0", ",", "padding", "[", "2", "]", ",", "0", ",", "padding", "[", "1", "]", ",", "0", ",", "padding", "[", "0", "]", ")", ")", "\n", "padded_imgs", ".", "append", "(", "padded_img", ")", "\n", "\n", "m", "=", "torch", ".", "zeros_like", "(", "img", "[", "0", "]", ",", "dtype", "=", "torch", ".", "int", ",", "device", "=", "img", ".", "device", ")", "\n", "padded_mask", "=", "torch", ".", "nn", ".", "functional", ".", "pad", "(", "m", ",", "(", "0", ",", "padding", "[", "2", "]", ",", "0", ",", "padding", "[", "1", "]", ")", ",", "\"constant\"", ",", "1", ")", "\n", "padded_masks", ".", "append", "(", "padded_mask", ".", "to", "(", "torch", ".", "bool", ")", ")", "\n", "\n", "", "tensor", "=", "torch", ".", "stack", "(", "padded_imgs", ")", "\n", "mask", "=", "torch", ".", "stack", "(", "padded_masks", ")", "\n", "\n", "return", "NestedTensor", "(", "tensor", ",", "mask", "=", "mask", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.setup_for_distributed": [[363, 376], ["kwargs.pop", "builtin_print"], "function", ["None"], ["", "def", "setup_for_distributed", "(", "is_master", ")", ":", "\n", "    ", "\"\"\"\n    This function disables printing when not in master process\n    \"\"\"", "\n", "import", "builtins", "as", "__builtin__", "\n", "builtin_print", "=", "__builtin__", ".", "print", "\n", "\n", "def", "print", "(", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "force", "=", "kwargs", ".", "pop", "(", "'force'", ",", "False", ")", "\n", "if", "is_master", "or", "force", ":", "\n", "            ", "builtin_print", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "\n", "", "", "__builtin__", ".", "print", "=", "print", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.is_dist_avail_and_initialized": [[378, 384], ["torch.is_available", "torch.is_initialized"], "function", ["None"], ["", "def", "is_dist_avail_and_initialized", "(", ")", ":", "\n", "    ", "if", "not", "dist", ".", "is_available", "(", ")", ":", "\n", "        ", "return", "False", "\n", "", "if", "not", "dist", ".", "is_initialized", "(", ")", ":", "\n", "        ", "return", "False", "\n", "", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.get_world_size": [[386, 390], ["torch.get_world_size", "misc.is_dist_avail_and_initialized"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.get_world_size", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.is_dist_avail_and_initialized"], ["", "def", "get_world_size", "(", ")", ":", "\n", "    ", "if", "not", "is_dist_avail_and_initialized", "(", ")", ":", "\n", "        ", "return", "1", "\n", "", "return", "dist", ".", "get_world_size", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.get_rank": [[392, 396], ["torch.get_rank", "misc.is_dist_avail_and_initialized"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.get_rank", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.is_dist_avail_and_initialized"], ["", "def", "get_rank", "(", ")", ":", "\n", "    ", "if", "not", "is_dist_avail_and_initialized", "(", ")", ":", "\n", "        ", "return", "0", "\n", "", "return", "dist", ".", "get_rank", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.is_main_process": [[398, 400], ["misc.get_rank"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.get_rank"], ["", "def", "is_main_process", "(", ")", ":", "\n", "    ", "return", "get_rank", "(", ")", "==", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.save_on_master": [[402, 405], ["misc.is_main_process", "torch.save", "torch.save"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.is_main_process", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.save", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.save"], ["", "def", "save_on_master", "(", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "    ", "if", "is_main_process", "(", ")", ":", "\n", "        ", "torch", ".", "save", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.init_distributed_mode": [[407, 430], ["torch.cuda.set_device", "torch.cuda.set_device", "misc.setup_for_distributed.print", "torch.distributed.init_process_group", "torch.distributed.init_process_group", "torch.distributed.barrier", "torch.distributed.barrier", "misc.setup_for_distributed", "int", "int", "int", "int", "misc.setup_for_distributed.print", "torch.cuda.device_count", "torch.cuda.device_count"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.setup_for_distributed"], ["", "", "def", "init_distributed_mode", "(", "args", ")", ":", "\n", "    ", "if", "'RANK'", "in", "os", ".", "environ", "and", "'WORLD_SIZE'", "in", "os", ".", "environ", ":", "\n", "        ", "args", ".", "rank", "=", "int", "(", "os", ".", "environ", "[", "\"RANK\"", "]", ")", "\n", "args", ".", "world_size", "=", "int", "(", "os", ".", "environ", "[", "'WORLD_SIZE'", "]", ")", "\n", "args", ".", "gpu", "=", "int", "(", "os", ".", "environ", "[", "'LOCAL_RANK'", "]", ")", "\n", "", "elif", "'SLURM_PROCID'", "in", "os", ".", "environ", ":", "\n", "        ", "args", ".", "rank", "=", "int", "(", "os", ".", "environ", "[", "'SLURM_PROCID'", "]", ")", "\n", "args", ".", "gpu", "=", "args", ".", "rank", "%", "torch", ".", "cuda", ".", "device_count", "(", ")", "\n", "", "else", ":", "\n", "        ", "print", "(", "'Not using distributed mode'", ")", "\n", "args", ".", "distributed", "=", "False", "\n", "return", "\n", "\n", "", "args", ".", "distributed", "=", "True", "\n", "\n", "torch", ".", "cuda", ".", "set_device", "(", "args", ".", "gpu", ")", "\n", "args", ".", "dist_backend", "=", "'nccl'", "\n", "print", "(", "'| distributed init (rank {}): {}'", ".", "format", "(", "\n", "args", ".", "rank", ",", "args", ".", "dist_url", ")", ",", "flush", "=", "True", ")", "\n", "torch", ".", "distributed", ".", "init_process_group", "(", "backend", "=", "args", ".", "dist_backend", ",", "init_method", "=", "args", ".", "dist_url", ",", "\n", "world_size", "=", "args", ".", "world_size", ",", "rank", "=", "args", ".", "rank", ")", "\n", "torch", ".", "distributed", ".", "barrier", "(", ")", "\n", "setup_for_distributed", "(", "args", ".", "rank", "==", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.accuracy": [[432, 449], ["torch.no_grad", "torch.no_grad", "max", "target.size", "output.topk", "pred.t.t", "pred.t.eq", "target.numel", "target.view().expand_as", "correct[].view().float().sum", "res.append", "torch.zeros", "torch.zeros", "correct[].view().float().sum.mul_", "target.view", "correct[].view().float", "correct[].view"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size"], ["", "@", "torch", ".", "no_grad", "(", ")", "\n", "def", "accuracy", "(", "output", ",", "target", ",", "topk", "=", "(", "1", ",", ")", ")", ":", "\n", "    ", "\"\"\"Computes the precision@k for the specified values of k\"\"\"", "\n", "if", "target", ".", "numel", "(", ")", "==", "0", ":", "\n", "        ", "return", "[", "torch", ".", "zeros", "(", "[", "]", ",", "device", "=", "output", ".", "device", ")", "]", "\n", "", "maxk", "=", "max", "(", "topk", ")", "\n", "batch_size", "=", "target", ".", "size", "(", "0", ")", "\n", "\n", "_", ",", "pred", "=", "output", ".", "topk", "(", "maxk", ",", "1", ",", "True", ",", "True", ")", "\n", "pred", "=", "pred", ".", "t", "(", ")", "\n", "correct", "=", "pred", ".", "eq", "(", "target", ".", "view", "(", "1", ",", "-", "1", ")", ".", "expand_as", "(", "pred", ")", ")", "\n", "\n", "res", "=", "[", "]", "\n", "for", "k", "in", "topk", ":", "\n", "        ", "correct_k", "=", "correct", "[", ":", "k", "]", ".", "view", "(", "-", "1", ")", ".", "float", "(", ")", ".", "sum", "(", "0", ")", "\n", "res", ".", "append", "(", "correct_k", ".", "mul_", "(", "100.0", "/", "batch_size", ")", ")", "\n", "", "return", "res", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.interpolate": [[451, 469], ["float", "_output_size", "_new_empty_tensor", "torchvision.ops.misc.interpolate", "input.numel", "torch.nn.functional.interpolate", "torch.nn.functional.interpolate", "list", "list"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "interpolate", "(", "input", ",", "size", "=", "None", ",", "scale_factor", "=", "None", ",", "mode", "=", "\"nearest\"", ",", "align_corners", "=", "None", ")", ":", "\n", "# type: (Tensor, Optional[List[int]], Optional[float], str, Optional[bool]) -> Tensor", "\n", "    ", "\"\"\"\n    Equivalent to nn.functional.interpolate, but with support for empty batch sizes.\n    This will eventually be supported natively by PyTorch, and this\n    class can go away.\n    \"\"\"", "\n", "if", "float", "(", "torchvision", ".", "__version__", "[", ":", "3", "]", ")", "<", "0.7", ":", "\n", "        ", "if", "input", ".", "numel", "(", ")", ">", "0", ":", "\n", "            ", "return", "torch", ".", "nn", ".", "functional", ".", "interpolate", "(", "\n", "input", ",", "size", ",", "scale_factor", ",", "mode", ",", "align_corners", "\n", ")", "\n", "\n", "", "output_shape", "=", "_output_size", "(", "2", ",", "input", ",", "size", ",", "scale_factor", ")", "\n", "output_shape", "=", "list", "(", "input", ".", "shape", "[", ":", "-", "2", "]", ")", "+", "list", "(", "output_shape", ")", "\n", "return", "_new_empty_tensor", "(", "input", ",", "output_shape", ")", "\n", "", "else", ":", "\n", "        ", "return", "torchvision", ".", "ops", ".", "misc", ".", "interpolate", "(", "input", ",", "size", ",", "scale_factor", ",", "mode", ",", "align_corners", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.get_lmdb_handle": [[11, 21], ["LMDB_HANDLES.get", "lmdb.open", "lmdb.open.begin"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["def", "get_lmdb_handle", "(", "name", ")", ":", "\n", "    ", "global", "LMDB_HANDLES", ",", "LMDB_FILELISTS", "\n", "item", "=", "LMDB_HANDLES", ".", "get", "(", "name", ",", "None", ")", "\n", "if", "item", "is", "None", ":", "\n", "        ", "env", "=", "lmdb", ".", "open", "(", "name", ",", "readonly", "=", "True", ",", "lock", "=", "False", ",", "readahead", "=", "False", ",", "meminit", "=", "False", ")", "\n", "LMDB_ENVS", "[", "name", "]", "=", "env", "\n", "item", "=", "env", ".", "begin", "(", "write", "=", "False", ")", "\n", "LMDB_HANDLES", "[", "name", "]", "=", "item", "\n", "\n", "", "return", "item", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_img": [[23, 31], ["lmdb_utils.get_lmdb_handle", "get_lmdb_handle.get", "numpy.frombuffer", "cv2.cvtColor", "key_name.encode", "print", "cv2.imdecode"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.get_lmdb_handle", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "def", "decode_img", "(", "lmdb_fname", ",", "key_name", ")", ":", "\n", "    ", "handle", "=", "get_lmdb_handle", "(", "lmdb_fname", ")", "\n", "binfile", "=", "handle", ".", "get", "(", "key_name", ".", "encode", "(", ")", ")", "\n", "if", "binfile", "is", "None", ":", "\n", "        ", "print", "(", "\"Illegal data detected. %s %s\"", "%", "(", "lmdb_fname", ",", "key_name", ")", ")", "\n", "", "s", "=", "np", ".", "frombuffer", "(", "binfile", ",", "np", ".", "uint8", ")", "\n", "x", "=", "cv2", ".", "cvtColor", "(", "cv2", ".", "imdecode", "(", "s", ",", "cv2", ".", "IMREAD_COLOR", ")", ",", "cv2", ".", "COLOR_BGR2RGB", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_str": [[33, 38], ["lmdb_utils.get_lmdb_handle", "get_lmdb_handle.get", "handle.get.decode", "key_name.encode"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.get_lmdb_handle", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "def", "decode_str", "(", "lmdb_fname", ",", "key_name", ")", ":", "\n", "    ", "handle", "=", "get_lmdb_handle", "(", "lmdb_fname", ")", "\n", "binfile", "=", "handle", ".", "get", "(", "key_name", ".", "encode", "(", ")", ")", "\n", "string", "=", "binfile", ".", "decode", "(", ")", "\n", "return", "string", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_json": [[40, 42], ["json.loads", "lmdb_utils.decode_str"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_str"], ["", "def", "decode_json", "(", "lmdb_fname", ",", "key_name", ")", ":", "\n", "    ", "return", "json", ".", "loads", "(", "decode_str", "(", "lmdb_fname", ",", "key_name", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.merge.merge_template_search": [[4, 16], ["torch.cat", "torch.cat", "torch.cat", "seq_dict.update", "seq_dict.update"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update"], ["def", "merge_template_search", "(", "inp_list", ",", "return_search", "=", "False", ",", "return_template", "=", "False", ")", ":", "\n", "    ", "\"\"\"NOTICE: search region related features must be in the last place\"\"\"", "\n", "seq_dict", "=", "{", "\"feat\"", ":", "torch", ".", "cat", "(", "[", "x", "[", "\"feat\"", "]", "for", "x", "in", "inp_list", "]", ",", "dim", "=", "0", ")", ",", "\n", "\"mask\"", ":", "torch", ".", "cat", "(", "[", "x", "[", "\"mask\"", "]", "for", "x", "in", "inp_list", "]", ",", "dim", "=", "1", ")", ",", "\n", "\"pos\"", ":", "torch", ".", "cat", "(", "[", "x", "[", "\"pos\"", "]", "for", "x", "in", "inp_list", "]", ",", "dim", "=", "0", ")", "}", "\n", "if", "return_search", ":", "\n", "        ", "x", "=", "inp_list", "[", "-", "1", "]", "\n", "seq_dict", ".", "update", "(", "{", "\"feat_x\"", ":", "x", "[", "\"feat\"", "]", ",", "\"mask_x\"", ":", "x", "[", "\"mask\"", "]", ",", "\"pos_x\"", ":", "x", "[", "\"pos\"", "]", "}", ")", "\n", "", "if", "return_template", ":", "\n", "        ", "z", "=", "inp_list", "[", "0", "]", "\n", "seq_dict", ".", "update", "(", "{", "\"feat_z\"", ":", "z", "[", "\"feat\"", "]", ",", "\"mask_z\"", ":", "z", "[", "\"mask\"", "]", ",", "\"pos_z\"", ":", "z", "[", "\"pos\"", "]", "}", ")", "\n", "", "return", "seq_dict", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.merge.get_qkv": [[18, 30], ["torch.cat", "torch.cat", "torch.cat"], "function", ["None"], ["", "def", "get_qkv", "(", "inp_list", ")", ":", "\n", "    ", "\"\"\"The 1st element of the inp_list is about the template,\n    the 2nd (the last) element is about the search region\"\"\"", "\n", "dict_x", "=", "inp_list", "[", "-", "1", "]", "\n", "dict_c", "=", "{", "\"feat\"", ":", "torch", ".", "cat", "(", "[", "x", "[", "\"feat\"", "]", "for", "x", "in", "inp_list", "]", ",", "dim", "=", "0", ")", ",", "\n", "\"mask\"", ":", "torch", ".", "cat", "(", "[", "x", "[", "\"mask\"", "]", "for", "x", "in", "inp_list", "]", ",", "dim", "=", "1", ")", ",", "\n", "\"pos\"", ":", "torch", ".", "cat", "(", "[", "x", "[", "\"pos\"", "]", "for", "x", "in", "inp_list", "]", ",", "dim", "=", "0", ")", "}", "# concatenated dict", "\n", "q", "=", "dict_x", "[", "\"feat\"", "]", "+", "dict_x", "[", "\"pos\"", "]", "\n", "k", "=", "dict_c", "[", "\"feat\"", "]", "+", "dict_c", "[", "\"pos\"", "]", "\n", "v", "=", "dict_c", "[", "\"feat\"", "]", "\n", "key_padding_mask", "=", "dict_c", "[", "\"mask\"", "]", "\n", "return", "q", ",", "k", ",", "v", ",", "key_padding_mask", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorDict.concat": [[10, 13], ["tensor.TensorDict"], "methods", ["None"], ["def", "concat", "(", "self", ",", "other", ")", ":", "\n", "        ", "\"\"\"Concatenates two dicts without copying internal data.\"\"\"", "\n", "return", "TensorDict", "(", "self", ",", "**", "other", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorDict.copy": [[14, 16], ["tensor.TensorDict", "super().copy"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy"], ["", "def", "copy", "(", "self", ")", ":", "\n", "        ", "return", "TensorDict", "(", "super", "(", "TensorDict", ",", "self", ")", ".", "copy", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorDict.__deepcopy__": [[17, 19], ["tensor.TensorDict", "copy.deepcopy", "list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "__deepcopy__", "(", "self", ",", "memodict", "=", "{", "}", ")", ":", "\n", "        ", "return", "TensorDict", "(", "copy", ".", "deepcopy", "(", "list", "(", "self", ")", ",", "memodict", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorDict.__getattr__": [[20, 27], ["hasattr", "AttributeError", "tensor.TensorDict", "hasattr", "tensor.TensorDict.items", "getattr"], "methods", ["None"], ["", "def", "__getattr__", "(", "self", ",", "name", ")", ":", "\n", "        ", "if", "not", "hasattr", "(", "torch", ".", "Tensor", ",", "name", ")", ":", "\n", "            ", "raise", "AttributeError", "(", "'\\'TensorDict\\' object has not attribute \\'{}\\''", ".", "format", "(", "name", ")", ")", "\n", "\n", "", "def", "apply_attr", "(", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "            ", "return", "TensorDict", "(", "{", "n", ":", "getattr", "(", "e", ",", "name", ")", "(", "*", "args", ",", "**", "kwargs", ")", "if", "hasattr", "(", "e", ",", "name", ")", "else", "e", "for", "n", ",", "e", "in", "self", ".", "items", "(", ")", "}", ")", "\n", "", "return", "apply_attr", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorDict.attribute": [[28, 30], ["tensor.TensorDict", "getattr", "tensor.TensorDict.items"], "methods", ["None"], ["", "def", "attribute", "(", "self", ",", "attr", ":", "str", ",", "*", "args", ")", ":", "\n", "        ", "return", "TensorDict", "(", "{", "n", ":", "getattr", "(", "e", ",", "attr", ",", "*", "args", ")", "for", "n", ",", "e", "in", "self", ".", "items", "(", ")", "}", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorDict.apply": [[31, 33], ["tensor.TensorDict", "fn", "tensor.TensorDict.items"], "methods", ["None"], ["", "def", "apply", "(", "self", ",", "fn", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "return", "TensorDict", "(", "{", "n", ":", "fn", "(", "e", ",", "*", "args", ",", "**", "kwargs", ")", "for", "n", ",", "e", "in", "self", ".", "items", "(", ")", "}", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorDict._iterable": [[34, 37], ["isinstance"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "_iterable", "(", "a", ")", ":", "\n", "        ", "return", "isinstance", "(", "a", ",", "(", "TensorDict", ",", "list", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__init__": [[42, 46], ["list.__init__", "tensor.TensorList.list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["def", "__init__", "(", "self", ",", "list_of_tensors", "=", "None", ")", ":", "\n", "        ", "if", "list_of_tensors", "is", "None", ":", "\n", "            ", "list_of_tensors", "=", "list", "(", ")", "\n", "", "super", "(", "TensorList", ",", "self", ")", ".", "__init__", "(", "list_of_tensors", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__deepcopy__": [[47, 49], ["tensor.TensorList", "copy.deepcopy", "tensor.TensorList.list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "__deepcopy__", "(", "self", ",", "memodict", "=", "{", "}", ")", ":", "\n", "        ", "return", "TensorList", "(", "copy", ".", "deepcopy", "(", "list", "(", "self", ")", ",", "memodict", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__getitem__": [[50, 57], ["isinstance", "list.__getitem__", "isinstance", "tensor.TensorList", "tensor.TensorList", "list.__getitem__", "list.__getitem__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__getitem__", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__getitem__", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__getitem__"], ["", "def", "__getitem__", "(", "self", ",", "item", ")", ":", "\n", "        ", "if", "isinstance", "(", "item", ",", "int", ")", ":", "\n", "            ", "return", "super", "(", "TensorList", ",", "self", ")", ".", "__getitem__", "(", "item", ")", "\n", "", "elif", "isinstance", "(", "item", ",", "(", "tuple", ",", "list", ")", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "super", "(", "TensorList", ",", "self", ")", ".", "__getitem__", "(", "i", ")", "for", "i", "in", "item", "]", ")", "\n", "", "else", ":", "\n", "            ", "return", "TensorList", "(", "super", "(", "TensorList", ",", "self", ")", ".", "__getitem__", "(", "item", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__add__": [[58, 62], ["tensor.TensorList._iterable", "tensor.TensorList", "tensor.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "", "def", "__add__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e1", "+", "e2", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "e", "+", "other", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__radd__": [[63, 67], ["tensor.TensorList._iterable", "tensor.TensorList", "tensor.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__radd__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e2", "+", "e1", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "other", "+", "e", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__iadd__": [[68, 76], ["tensor.TensorList._iterable", "enumerate", "range", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__iadd__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "for", "i", ",", "e2", "in", "enumerate", "(", "other", ")", ":", "\n", "                ", "self", "[", "i", "]", "+=", "e2", "\n", "", "", "else", ":", "\n", "            ", "for", "i", "in", "range", "(", "len", "(", "self", ")", ")", ":", "\n", "                ", "self", "[", "i", "]", "+=", "other", "\n", "", "", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__sub__": [[77, 81], ["tensor.TensorList._iterable", "tensor.TensorList", "tensor.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__sub__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e1", "-", "e2", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "e", "-", "other", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__rsub__": [[82, 86], ["tensor.TensorList._iterable", "tensor.TensorList", "tensor.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__rsub__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e2", "-", "e1", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "other", "-", "e", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__isub__": [[87, 95], ["tensor.TensorList._iterable", "enumerate", "range", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__isub__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "for", "i", ",", "e2", "in", "enumerate", "(", "other", ")", ":", "\n", "                ", "self", "[", "i", "]", "-=", "e2", "\n", "", "", "else", ":", "\n", "            ", "for", "i", "in", "range", "(", "len", "(", "self", ")", ")", ":", "\n", "                ", "self", "[", "i", "]", "-=", "other", "\n", "", "", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__mul__": [[96, 100], ["tensor.TensorList._iterable", "tensor.TensorList", "tensor.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__mul__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e1", "*", "e2", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "e", "*", "other", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__rmul__": [[101, 105], ["tensor.TensorList._iterable", "tensor.TensorList", "tensor.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__rmul__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e2", "*", "e1", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "other", "*", "e", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__imul__": [[106, 114], ["tensor.TensorList._iterable", "enumerate", "range", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__imul__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "for", "i", ",", "e2", "in", "enumerate", "(", "other", ")", ":", "\n", "                ", "self", "[", "i", "]", "*=", "e2", "\n", "", "", "else", ":", "\n", "            ", "for", "i", "in", "range", "(", "len", "(", "self", ")", ")", ":", "\n", "                ", "self", "[", "i", "]", "*=", "other", "\n", "", "", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__truediv__": [[115, 119], ["tensor.TensorList._iterable", "tensor.TensorList", "tensor.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__truediv__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e1", "/", "e2", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "e", "/", "other", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__rtruediv__": [[120, 124], ["tensor.TensorList._iterable", "tensor.TensorList", "tensor.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__rtruediv__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e2", "/", "e1", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "other", "/", "e", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__itruediv__": [[125, 133], ["tensor.TensorList._iterable", "enumerate", "range", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__itruediv__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "for", "i", ",", "e2", "in", "enumerate", "(", "other", ")", ":", "\n", "                ", "self", "[", "i", "]", "/=", "e2", "\n", "", "", "else", ":", "\n", "            ", "for", "i", "in", "range", "(", "len", "(", "self", ")", ")", ":", "\n", "                ", "self", "[", "i", "]", "/=", "other", "\n", "", "", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__matmul__": [[134, 138], ["tensor.TensorList._iterable", "tensor.TensorList", "tensor.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__matmul__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e1", "@", "e2", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "e", "@", "other", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__rmatmul__": [[139, 143], ["tensor.TensorList._iterable", "tensor.TensorList", "tensor.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__rmatmul__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e2", "@", "e1", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "other", "@", "e", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__imatmul__": [[144, 152], ["tensor.TensorList._iterable", "enumerate", "range", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__imatmul__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "for", "i", ",", "e2", "in", "enumerate", "(", "other", ")", ":", "\n", "                ", "self", "[", "i", "]", "@=", "e2", "\n", "", "", "else", ":", "\n", "            ", "for", "i", "in", "range", "(", "len", "(", "self", ")", ")", ":", "\n", "                ", "self", "[", "i", "]", "@=", "other", "\n", "", "", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__mod__": [[153, 157], ["tensor.TensorList._iterable", "tensor.TensorList", "tensor.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__mod__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e1", "%", "e2", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "e", "%", "other", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__rmod__": [[158, 162], ["tensor.TensorList._iterable", "tensor.TensorList", "tensor.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__rmod__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e2", "%", "e1", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "other", "%", "e", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__pos__": [[163, 165], ["tensor.TensorList"], "methods", ["None"], ["", "def", "__pos__", "(", "self", ")", ":", "\n", "        ", "return", "TensorList", "(", "[", "+", "e", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__neg__": [[166, 168], ["tensor.TensorList"], "methods", ["None"], ["", "def", "__neg__", "(", "self", ")", ":", "\n", "        ", "return", "TensorList", "(", "[", "-", "e", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__le__": [[169, 173], ["tensor.TensorList._iterable", "tensor.TensorList", "tensor.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__le__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e1", "<=", "e2", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "e", "<=", "other", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__ge__": [[174, 178], ["tensor.TensorList._iterable", "tensor.TensorList", "tensor.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__ge__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e1", ">=", "e2", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "e", ">=", "other", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.concat": [[179, 181], ["tensor.TensorList", "list.__add__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__add__"], ["", "def", "concat", "(", "self", ",", "other", ")", ":", "\n", "        ", "return", "TensorList", "(", "super", "(", "TensorList", ",", "self", ")", ".", "__add__", "(", "other", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.copy": [[182, 184], ["tensor.TensorList", "super().copy"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy"], ["", "def", "copy", "(", "self", ")", ":", "\n", "        ", "return", "TensorList", "(", "super", "(", "TensorList", ",", "self", ")", ".", "copy", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.unroll": [[185, 196], ["tensor.TensorList", "any", "isinstance", "TensorList.extend", "TensorList.append", "isinstance", "t.unroll"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.unroll"], ["", "def", "unroll", "(", "self", ")", ":", "\n", "        ", "if", "not", "any", "(", "isinstance", "(", "t", ",", "TensorList", ")", "for", "t", "in", "self", ")", ":", "\n", "            ", "return", "self", "\n", "\n", "", "new_list", "=", "TensorList", "(", ")", "\n", "for", "t", "in", "self", ":", "\n", "            ", "if", "isinstance", "(", "t", ",", "TensorList", ")", ":", "\n", "                ", "new_list", ".", "extend", "(", "t", ".", "unroll", "(", ")", ")", "\n", "", "else", ":", "\n", "                ", "new_list", ".", "append", "(", "t", ")", "\n", "", "", "return", "new_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.list": [[197, 199], ["tensor.TensorList.list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "list", "(", "self", ")", ":", "\n", "        ", "return", "list", "(", "self", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.attribute": [[200, 202], ["tensor.TensorList", "getattr"], "methods", ["None"], ["", "def", "attribute", "(", "self", ",", "attr", ":", "str", ",", "*", "args", ")", ":", "\n", "        ", "return", "TensorList", "(", "[", "getattr", "(", "e", ",", "attr", ",", "*", "args", ")", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.apply": [[203, 205], ["tensor.TensorList", "fn"], "methods", ["None"], ["", "def", "apply", "(", "self", ",", "fn", ")", ":", "\n", "        ", "return", "TensorList", "(", "[", "fn", "(", "e", ")", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList.__getattr__": [[206, 214], ["hasattr", "AttributeError", "tensor.TensorList", "getattr"], "methods", ["None"], ["", "def", "__getattr__", "(", "self", ",", "name", ")", ":", "\n", "        ", "if", "not", "hasattr", "(", "torch", ".", "Tensor", ",", "name", ")", ":", "\n", "            ", "raise", "AttributeError", "(", "'\\'TensorList\\' object has not attribute \\'{}\\''", ".", "format", "(", "name", ")", ")", "\n", "\n", "", "def", "apply_attr", "(", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "getattr", "(", "e", ",", "name", ")", "(", "*", "args", ",", "**", "kwargs", ")", "for", "e", "in", "self", "]", ")", "\n", "\n", "", "return", "apply_attr", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.TensorList._iterable": [[215, 218], ["isinstance"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "_iterable", "(", "a", ")", ":", "\n", "        ", "return", "isinstance", "(", "a", ",", "(", "TensorList", ",", "list", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.tensor.tensor_operation": [[220, 245], ["functools.wraps", "isinstance", "op", "len", "ValueError", "len", "tensor.tensor_operation.islist"], "function", ["None"], ["", "", "def", "tensor_operation", "(", "op", ")", ":", "\n", "    ", "def", "islist", "(", "a", ")", ":", "\n", "        ", "return", "isinstance", "(", "a", ",", "TensorList", ")", "\n", "\n", "", "@", "functools", ".", "wraps", "(", "op", ")", "\n", "def", "oplist", "(", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "if", "len", "(", "args", ")", "==", "0", ":", "\n", "            ", "raise", "ValueError", "(", "'Must be at least one argument without keyword (i.e. operand).'", ")", "\n", "\n", "", "if", "len", "(", "args", ")", "==", "1", ":", "\n", "            ", "if", "islist", "(", "args", "[", "0", "]", ")", ":", "\n", "                ", "return", "TensorList", "(", "[", "op", "(", "a", ",", "**", "kwargs", ")", "for", "a", "in", "args", "[", "0", "]", "]", ")", "\n", "", "", "else", ":", "\n", "# Multiple operands, assume max two", "\n", "            ", "if", "islist", "(", "args", "[", "0", "]", ")", "and", "islist", "(", "args", "[", "1", "]", ")", ":", "\n", "                ", "return", "TensorList", "(", "[", "op", "(", "a", ",", "b", ",", "*", "args", "[", "2", ":", "]", ",", "**", "kwargs", ")", "for", "a", ",", "b", "in", "zip", "(", "*", "args", "[", ":", "2", "]", ")", "]", ")", "\n", "", "if", "islist", "(", "args", "[", "0", "]", ")", ":", "\n", "                ", "return", "TensorList", "(", "[", "op", "(", "a", ",", "*", "args", "[", "1", ":", "]", ",", "**", "kwargs", ")", "for", "a", "in", "args", "[", "0", "]", "]", ")", "\n", "", "if", "islist", "(", "args", "[", "1", "]", ")", ":", "\n", "                ", "return", "TensorList", "(", "[", "op", "(", "args", "[", "0", "]", ",", "b", ",", "*", "args", "[", "2", ":", "]", ",", "**", "kwargs", ")", "for", "b", "in", "args", "[", "1", "]", "]", ")", "\n", "\n", "# None of the operands are lists", "\n", "", "", "return", "op", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "\n", "", "return", "oplist", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.transform_got10k.transform_got10k": [[9, 43], ["lib.test.evaluation.environment.env_settings", "os.path.join", "os.path.join", "os.listdir", "shutil.make_archive", "shutil.make_archive", "shutil.rmtree", "shutil.rmtree", "os.path.exists", "os.makedirs", "os.path.join", "item.replace", "os.path.join", "item.replace", "os.path.join", "numpy.loadtxt", "numpy.savetxt", "item.replace", "os.path.join", "os.path.join", "os.system", "os.path.exists", "os.makedirs", "os.path.exists", "os.makedirs"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "transform_got10k", "(", "tracker_name", ",", "cfg_name", ")", ":", "\n", "    ", "env", "=", "env_settings", "(", ")", "\n", "result_dir", "=", "env", ".", "results_path", "\n", "src_dir", "=", "os", ".", "path", ".", "join", "(", "result_dir", ",", "\"%s/%s/got10k/\"", "%", "(", "tracker_name", ",", "cfg_name", ")", ")", "\n", "dest_dir", "=", "os", ".", "path", ".", "join", "(", "result_dir", ",", "\"%s/%s/got10k_submit/\"", "%", "(", "tracker_name", ",", "cfg_name", ")", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "dest_dir", ")", ":", "\n", "        ", "os", ".", "makedirs", "(", "dest_dir", ")", "\n", "", "items", "=", "os", ".", "listdir", "(", "src_dir", ")", "\n", "for", "item", "in", "items", ":", "\n", "        ", "if", "\"all\"", "in", "item", ":", "\n", "            ", "continue", "\n", "", "src_path", "=", "os", ".", "path", ".", "join", "(", "src_dir", ",", "item", ")", "\n", "if", "\"time\"", "not", "in", "item", ":", "\n", "            ", "seq_name", "=", "item", ".", "replace", "(", "\".txt\"", ",", "''", ")", "\n", "seq_dir", "=", "os", ".", "path", ".", "join", "(", "dest_dir", ",", "seq_name", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "seq_dir", ")", ":", "\n", "                ", "os", ".", "makedirs", "(", "seq_dir", ")", "\n", "", "new_item", "=", "item", ".", "replace", "(", "\".txt\"", ",", "'_001.txt'", ")", "\n", "dest_path", "=", "os", ".", "path", ".", "join", "(", "seq_dir", ",", "new_item", ")", "\n", "bbox_arr", "=", "np", ".", "loadtxt", "(", "src_path", ",", "dtype", "=", "np", ".", "int", ",", "delimiter", "=", "'\\t'", ")", "\n", "np", ".", "savetxt", "(", "dest_path", ",", "bbox_arr", ",", "fmt", "=", "'%d'", ",", "delimiter", "=", "','", ")", "\n", "", "else", ":", "\n", "            ", "seq_name", "=", "item", ".", "replace", "(", "\"_time.txt\"", ",", "''", ")", "\n", "seq_dir", "=", "os", ".", "path", ".", "join", "(", "dest_dir", ",", "seq_name", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "seq_dir", ")", ":", "\n", "                ", "os", ".", "makedirs", "(", "seq_dir", ")", "\n", "", "dest_path", "=", "os", ".", "path", ".", "join", "(", "seq_dir", ",", "item", ")", "\n", "os", ".", "system", "(", "\"cp %s %s\"", "%", "(", "src_path", ",", "dest_path", ")", ")", "\n", "# make zip archive", "\n", "", "", "shutil", ".", "make_archive", "(", "src_dir", ",", "\"zip\"", ",", "src_dir", ")", "\n", "shutil", ".", "make_archive", "(", "dest_dir", ",", "\"zip\"", ",", "dest_dir", ")", "\n", "# Remove the original files", "\n", "shutil", ".", "rmtree", "(", "src_dir", ")", "\n", "shutil", ".", "rmtree", "(", "dest_dir", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.transform_trackingnet.transform_trackingnet": [[9, 31], ["lib.test.evaluation.environment.env_settings", "os.path.join", "os.path.join", "os.listdir", "shutil.make_archive", "shutil.make_archive", "shutil.rmtree", "shutil.rmtree", "os.path.exists", "os.makedirs", "os.path.join", "os.path.join", "numpy.loadtxt", "numpy.savetxt"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "transform_trackingnet", "(", "tracker_name", ",", "cfg_name", ")", ":", "\n", "    ", "env", "=", "env_settings", "(", ")", "\n", "result_dir", "=", "env", ".", "results_path", "\n", "src_dir", "=", "os", ".", "path", ".", "join", "(", "result_dir", ",", "\"%s/%s/trackingnet/\"", "%", "(", "tracker_name", ",", "cfg_name", ")", ")", "\n", "dest_dir", "=", "os", ".", "path", ".", "join", "(", "result_dir", ",", "\"%s/%s/trackingnet_submit/\"", "%", "(", "tracker_name", ",", "cfg_name", ")", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "dest_dir", ")", ":", "\n", "        ", "os", ".", "makedirs", "(", "dest_dir", ")", "\n", "", "items", "=", "os", ".", "listdir", "(", "src_dir", ")", "\n", "for", "item", "in", "items", ":", "\n", "        ", "if", "\"all\"", "in", "item", ":", "\n", "            ", "continue", "\n", "", "if", "\"time\"", "not", "in", "item", ":", "\n", "            ", "src_path", "=", "os", ".", "path", ".", "join", "(", "src_dir", ",", "item", ")", "\n", "dest_path", "=", "os", ".", "path", ".", "join", "(", "dest_dir", ",", "item", ")", "\n", "bbox_arr", "=", "np", ".", "loadtxt", "(", "src_path", ",", "dtype", "=", "np", ".", "int", ",", "delimiter", "=", "'\\t'", ")", "\n", "np", ".", "savetxt", "(", "dest_path", ",", "bbox_arr", ",", "fmt", "=", "'%d'", ",", "delimiter", "=", "','", ")", "\n", "# make zip archive", "\n", "", "", "shutil", ".", "make_archive", "(", "src_dir", ",", "\"zip\"", ",", "src_dir", ")", "\n", "shutil", ".", "make_archive", "(", "dest_dir", ",", "\"zip\"", ",", "dest_dir", ")", "\n", "# Remove the original files", "\n", "shutil", ".", "rmtree", "(", "src_dir", ")", "\n", "shutil", ".", "rmtree", "(", "dest_dir", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils._init_paths.add_path": [[9, 12], ["sys.path.insert"], "function", ["None"], ["def", "add_path", "(", "path", ")", ":", "\n", "    ", "if", "path", "not", "in", "sys", ".", "path", ":", "\n", "        ", "sys", ".", "path", ".", "insert", "(", "0", ",", "path", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.load_text.load_text_numpy": [[5, 18], ["isinstance", "Exception", "numpy.loadtxt", "numpy.loadtxt"], "function", ["None"], ["def", "load_text_numpy", "(", "path", ",", "delimiter", ",", "dtype", ")", ":", "\n", "    ", "if", "isinstance", "(", "delimiter", ",", "(", "tuple", ",", "list", ")", ")", ":", "\n", "        ", "for", "d", "in", "delimiter", ":", "\n", "            ", "try", ":", "\n", "                ", "ground_truth_rect", "=", "np", ".", "loadtxt", "(", "path", ",", "delimiter", "=", "d", ",", "dtype", "=", "dtype", ")", "\n", "return", "ground_truth_rect", "\n", "", "except", ":", "\n", "                ", "pass", "\n", "\n", "", "", "raise", "Exception", "(", "'Could not read file {}'", ".", "format", "(", "path", ")", ")", "\n", "", "else", ":", "\n", "        ", "ground_truth_rect", "=", "np", ".", "loadtxt", "(", "path", ",", "delimiter", "=", "delimiter", ",", "dtype", "=", "dtype", ")", "\n", "return", "ground_truth_rect", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.load_text.load_text_pandas": [[20, 35], ["isinstance", "Exception", "pandas.read_csv", "pandas.read_csv"], "function", ["None"], ["", "", "def", "load_text_pandas", "(", "path", ",", "delimiter", ",", "dtype", ")", ":", "\n", "    ", "if", "isinstance", "(", "delimiter", ",", "(", "tuple", ",", "list", ")", ")", ":", "\n", "        ", "for", "d", "in", "delimiter", ":", "\n", "            ", "try", ":", "\n", "                ", "ground_truth_rect", "=", "pd", ".", "read_csv", "(", "path", ",", "delimiter", "=", "d", ",", "header", "=", "None", ",", "dtype", "=", "dtype", ",", "na_filter", "=", "False", ",", "\n", "low_memory", "=", "False", ")", ".", "values", "\n", "return", "ground_truth_rect", "\n", "", "except", "Exception", "as", "e", ":", "\n", "                ", "pass", "\n", "\n", "", "", "raise", "Exception", "(", "'Could not read file {}'", ".", "format", "(", "path", ")", ")", "\n", "", "else", ":", "\n", "        ", "ground_truth_rect", "=", "pd", ".", "read_csv", "(", "path", ",", "delimiter", "=", "delimiter", ",", "header", "=", "None", ",", "dtype", "=", "dtype", ",", "na_filter", "=", "False", ",", "\n", "low_memory", "=", "False", ")", ".", "values", "\n", "return", "ground_truth_rect", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.load_text.load_text": [[37, 42], ["load_text.load_text_numpy", "load_text.load_text_pandas"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.load_text.load_text_numpy", "home.repos.pwc.inspect_result.researchmm_Stark.utils.load_text.load_text_pandas"], ["", "", "def", "load_text", "(", "path", ",", "delimiter", "=", "' '", ",", "dtype", "=", "np", ".", "float32", ",", "backend", "=", "'numpy'", ")", ":", "\n", "    ", "if", "backend", "==", "'numpy'", ":", "\n", "        ", "return", "load_text_numpy", "(", "path", ",", "delimiter", ",", "dtype", ")", "\n", "", "elif", "backend", "==", "'pandas'", ":", "\n", "        ", "return", "load_text_pandas", "(", "path", ",", "delimiter", ",", "dtype", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.params.TrackerParams.set_default_values": [[7, 11], ["default_vals.items", "hasattr", "setattr"], "methods", ["None"], ["def", "set_default_values", "(", "self", ",", "default_vals", ":", "dict", ")", ":", "\n", "        ", "for", "name", ",", "val", "in", "default_vals", ".", "items", "(", ")", ":", "\n", "            ", "if", "not", "hasattr", "(", "self", ",", "name", ")", ":", "\n", "                ", "setattr", "(", "self", ",", "name", ",", "val", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.params.TrackerParams.get": [[12, 22], ["getattr", "len", "ValueError", "getattr"], "methods", ["None"], ["", "", "", "def", "get", "(", "self", ",", "name", ":", "str", ",", "*", "default", ")", ":", "\n", "        ", "\"\"\"Get a parameter value with the given name. If it does not exists, it return the default value given as a\n        second argument or returns an error if no default value is given.\"\"\"", "\n", "if", "len", "(", "default", ")", ">", "1", ":", "\n", "            ", "raise", "ValueError", "(", "'Can only give one default value.'", ")", "\n", "\n", "", "if", "not", "default", ":", "\n", "            ", "return", "getattr", "(", "self", ",", "name", ")", "\n", "\n", "", "return", "getattr", "(", "self", ",", "name", ",", "default", "[", "0", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.params.TrackerParams.has": [[23, 26], ["hasattr"], "methods", ["None"], ["", "def", "has", "(", "self", ",", "name", ":", "str", ")", ":", "\n", "        ", "\"\"\"Check if there exist a parameter with the given name.\"\"\"", "\n", "return", "hasattr", "(", "self", ",", "name", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.params.FeatureParams.__init__": [[30, 39], ["kwargs.items", "len", "isinstance", "setattr", "setattr", "pytracking.TensorList"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "if", "len", "(", "args", ")", ">", "0", ":", "\n", "            ", "raise", "ValueError", "\n", "\n", "", "for", "name", ",", "val", "in", "kwargs", ".", "items", "(", ")", ":", "\n", "            ", "if", "isinstance", "(", "val", ",", "list", ")", ":", "\n", "                ", "setattr", "(", "self", ",", "name", ",", "TensorList", "(", "val", ")", ")", "\n", "", "else", ":", "\n", "                ", "setattr", "(", "self", ",", "name", ",", "val", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.params.Choice": [[41, 44], ["random.choice"], "function", ["None"], ["", "", "", "", "def", "Choice", "(", "*", "args", ")", ":", "\n", "    ", "\"\"\"Can be used to sample random parameter values.\"\"\"", "\n", "return", "random", ".", "choice", "(", "args", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.draw_figure": [[7, 11], ["fig.canvas.draw", "fig.canvas.flush_events", "matplotlib.pause"], "function", ["None"], ["def", "draw_figure", "(", "fig", ")", ":", "\n", "    ", "fig", ".", "canvas", ".", "draw", "(", ")", "\n", "fig", ".", "canvas", ".", "flush_events", "(", ")", "\n", "plt", ".", "pause", "(", "0.001", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.show_tensor": [[13, 41], ["a.squeeze().cpu().clone().detach().numpy", "numpy.transpose", "matplotlib.figure", "matplotlib.tight_layout", "matplotlib.cla", "matplotlib.imshow", "matplotlib.axis", "matplotlib.axis", "plotting.draw_figure", "ax.cla", "ax.imshow", "ax.set_axis_off", "ax.axis", "plotting.draw_figure", "a.squeeze().cpu().clone().detach", "matplotlib.title", "ax.set_title", "matplotlib.gcf", "a.squeeze().cpu().clone", "a.squeeze().cpu", "a.squeeze"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.draw_figure", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.draw_figure"], ["", "def", "show_tensor", "(", "a", ":", "torch", ".", "Tensor", ",", "fig_num", "=", "None", ",", "title", "=", "None", ",", "range", "=", "(", "None", ",", "None", ")", ",", "ax", "=", "None", ")", ":", "\n", "    ", "\"\"\"Display a 2D tensor.\n    args:\n        fig_num: Figure number.\n        title: Title of figure.\n    \"\"\"", "\n", "a_np", "=", "a", ".", "squeeze", "(", ")", ".", "cpu", "(", ")", ".", "clone", "(", ")", ".", "detach", "(", ")", ".", "numpy", "(", ")", "\n", "if", "a_np", ".", "ndim", "==", "3", ":", "\n", "        ", "a_np", "=", "np", ".", "transpose", "(", "a_np", ",", "(", "1", ",", "2", ",", "0", ")", ")", "\n", "\n", "", "if", "ax", "is", "None", ":", "\n", "        ", "fig", "=", "plt", ".", "figure", "(", "fig_num", ")", "\n", "plt", ".", "tight_layout", "(", ")", "\n", "plt", ".", "cla", "(", ")", "\n", "plt", ".", "imshow", "(", "a_np", ",", "vmin", "=", "range", "[", "0", "]", ",", "vmax", "=", "range", "[", "1", "]", ")", "\n", "plt", ".", "axis", "(", "'off'", ")", "\n", "plt", ".", "axis", "(", "'equal'", ")", "\n", "if", "title", "is", "not", "None", ":", "\n", "            ", "plt", ".", "title", "(", "title", ")", "\n", "", "draw_figure", "(", "fig", ")", "\n", "", "else", ":", "\n", "        ", "ax", ".", "cla", "(", ")", "\n", "ax", ".", "imshow", "(", "a_np", ",", "vmin", "=", "range", "[", "0", "]", ",", "vmax", "=", "range", "[", "1", "]", ")", "\n", "ax", ".", "set_axis_off", "(", ")", "\n", "ax", ".", "axis", "(", "'equal'", ")", "\n", "if", "title", "is", "not", "None", ":", "\n", "            ", "ax", ".", "set_title", "(", "title", ")", "\n", "", "draw_figure", "(", "plt", ".", "gcf", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.plot_graph": [[43, 59], ["a.squeeze().cpu().clone().detach().numpy", "matplotlib.figure", "matplotlib.cla", "matplotlib.plot", "plotting.draw_figure", "matplotlib.title", "a.squeeze().cpu().clone().detach", "a.squeeze().cpu().clone", "a.squeeze().cpu", "a.squeeze"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.draw_figure"], ["", "", "def", "plot_graph", "(", "a", ":", "torch", ".", "Tensor", ",", "fig_num", "=", "None", ",", "title", "=", "None", ")", ":", "\n", "    ", "\"\"\"Plot graph. Data is a 1D tensor.\n    args:\n        fig_num: Figure number.\n        title: Title of figure.\n    \"\"\"", "\n", "a_np", "=", "a", ".", "squeeze", "(", ")", ".", "cpu", "(", ")", ".", "clone", "(", ")", ".", "detach", "(", ")", ".", "numpy", "(", ")", "\n", "if", "a_np", ".", "ndim", ">", "1", ":", "\n", "        ", "raise", "ValueError", "\n", "", "fig", "=", "plt", ".", "figure", "(", "fig_num", ")", "\n", "# plt.tight_layout()", "\n", "plt", ".", "cla", "(", ")", "\n", "plt", ".", "plot", "(", "a_np", ")", "\n", "if", "title", "is", "not", "None", ":", "\n", "        ", "plt", ".", "title", "(", "title", ")", "\n", "", "draw_figure", "(", "fig", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.show_image_with_boxes": [[61, 83], ["im.clone().cpu().squeeze().numpy", "numpy.ascontiguousarray", "boxes.view().cpu().numpy().round().astype.view().cpu().numpy().round().astype", "range", "torch.from_numpy().float", "np.ascontiguousarray.transpose().astype", "im.clone().cpu().squeeze", "boxes.view().cpu().numpy().round().astype.view().cpu().numpy().round", "cv2.rectangle", "torch.from_numpy", "np.ascontiguousarray.transpose", "cv2.putText", "np.ascontiguousarray.transpose", "im.clone().cpu", "boxes.view().cpu().numpy().round().astype.view().cpu().numpy", "im.clone", "boxes.view().cpu().numpy().round().astype.view().cpu", "boxes.view().cpu().numpy().round().astype.view"], "function", ["None"], ["", "def", "show_image_with_boxes", "(", "im", ",", "boxes", ",", "iou_pred", "=", "None", ",", "disp_ids", "=", "None", ")", ":", "\n", "    ", "im_np", "=", "im", ".", "clone", "(", ")", ".", "cpu", "(", ")", ".", "squeeze", "(", ")", ".", "numpy", "(", ")", "\n", "im_np", "=", "np", ".", "ascontiguousarray", "(", "im_np", ".", "transpose", "(", "1", ",", "2", ",", "0", ")", ".", "astype", "(", "np", ".", "uint8", ")", ")", "\n", "\n", "boxes", "=", "boxes", ".", "view", "(", "-", "1", ",", "4", ")", ".", "cpu", "(", ")", ".", "numpy", "(", ")", ".", "round", "(", ")", ".", "astype", "(", "int", ")", "\n", "\n", "# Draw proposals", "\n", "for", "i_", "in", "range", "(", "boxes", ".", "shape", "[", "0", "]", ")", ":", "\n", "        ", "if", "disp_ids", "is", "None", "or", "disp_ids", "[", "i_", "]", ":", "\n", "            ", "bb", "=", "boxes", "[", "i_", ",", ":", "]", "\n", "disp_color", "=", "(", "i_", "*", "38", "%", "256", ",", "(", "255", "-", "i_", "*", "97", ")", "%", "256", ",", "(", "123", "+", "i_", "*", "66", ")", "%", "256", ")", "\n", "cv2", ".", "rectangle", "(", "im_np", ",", "(", "bb", "[", "0", "]", ",", "bb", "[", "1", "]", ")", ",", "(", "bb", "[", "0", "]", "+", "bb", "[", "2", "]", ",", "bb", "[", "1", "]", "+", "bb", "[", "3", "]", ")", ",", "\n", "disp_color", ",", "1", ")", "\n", "\n", "if", "iou_pred", "is", "not", "None", ":", "\n", "                ", "text_pos", "=", "(", "bb", "[", "0", "]", ",", "bb", "[", "1", "]", "-", "5", ")", "\n", "cv2", ".", "putText", "(", "im_np", ",", "'ID={} IOU = {:3.2f}'", ".", "format", "(", "i_", ",", "iou_pred", "[", "i_", "]", ")", ",", "text_pos", ",", "\n", "cv2", ".", "FONT_HERSHEY_SIMPLEX", ",", "0.5", ",", "(", "0", ",", "255", ",", "0", ")", ",", "1", ",", "bottomLeftOrigin", "=", "False", ")", "\n", "\n", "", "", "", "im_tensor", "=", "torch", ".", "from_numpy", "(", "im_np", ".", "transpose", "(", "2", ",", "0", ",", "1", ")", ")", ".", "float", "(", ")", "\n", "\n", "return", "im_tensor", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting._pascal_color_map": [[86, 111], ["numpy.zeros", "range", "range", "numpy.array", "plotting._pascal_color_map.bitget"], "function", ["None"], ["", "def", "_pascal_color_map", "(", "N", "=", "256", ",", "normalized", "=", "False", ")", ":", "\n", "    ", "\"\"\"\n    Python implementation of the color map function for the PASCAL VOC data set.\n    Official Matlab version can be found in the PASCAL VOC devkit\n    http://host.robots.ox.ac.uk/pascal/VOC/voc2012/index.html#devkit\n    \"\"\"", "\n", "\n", "def", "bitget", "(", "byteval", ",", "idx", ")", ":", "\n", "        ", "return", "(", "byteval", "&", "(", "1", "<<", "idx", ")", ")", "!=", "0", "\n", "\n", "", "dtype", "=", "'float32'", "if", "normalized", "else", "'uint8'", "\n", "cmap", "=", "np", ".", "zeros", "(", "(", "N", ",", "3", ")", ",", "dtype", "=", "dtype", ")", "\n", "for", "i", "in", "range", "(", "N", ")", ":", "\n", "        ", "r", "=", "g", "=", "b", "=", "0", "\n", "c", "=", "i", "\n", "for", "j", "in", "range", "(", "8", ")", ":", "\n", "            ", "r", "=", "r", "|", "(", "bitget", "(", "c", ",", "0", ")", "<<", "7", "-", "j", ")", "\n", "g", "=", "g", "|", "(", "bitget", "(", "c", ",", "1", ")", "<<", "7", "-", "j", ")", "\n", "b", "=", "b", "|", "(", "bitget", "(", "c", ",", "2", ")", "<<", "7", "-", "j", ")", "\n", "c", "=", "c", ">>", "3", "\n", "\n", "", "cmap", "[", "i", "]", "=", "np", ".", "array", "(", "[", "r", ",", "g", ",", "b", "]", ")", "\n", "\n", "", "cmap", "=", "cmap", "/", "255", "if", "normalized", "else", "cmap", "\n", "return", "cmap", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.overlay_mask": [[113, 156], ["numpy.asarray", "im.copy", "numpy.asarray", "numpy.asarray", "ValueError", "ValueError", "plotting._pascal_color_map", "numpy.unique", "cv2.drawContours", "cv2.findContours", "colors[].tolist"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting._pascal_color_map"], ["", "def", "overlay_mask", "(", "im", ",", "ann", ",", "alpha", "=", "0.5", ",", "colors", "=", "None", ",", "contour_thickness", "=", "None", ")", ":", "\n", "    ", "\"\"\" Overlay mask over image.\n    Source: https://github.com/albertomontesg/davis-interactive/blob/master/davisinteractive/utils/visualization.py\n    This function allows you to overlay a mask over an image with some\n    transparency.\n    # Arguments\n        im: Numpy Array. Array with the image. The shape must be (H, W, 3) and\n            the pixels must be represented as `np.uint8` data type.\n        ann: Numpy Array. Array with the mask. The shape must be (H, W) and the\n            values must be intergers\n        alpha: Float. Proportion of alpha to apply at the overlaid mask.\n        colors: Numpy Array. Optional custom colormap. It must have shape (N, 3)\n            being N the maximum number of colors to represent.\n        contour_thickness: Integer. Thickness of each object index contour draw\n            over the overlay. This function requires to have installed the\n            package `opencv-python`.\n    # Returns\n        Numpy Array: Image of the overlay with shape (H, W, 3) and data type\n            `np.uint8`.\n    \"\"\"", "\n", "im", ",", "ann", "=", "np", ".", "asarray", "(", "im", ",", "dtype", "=", "np", ".", "uint8", ")", ",", "np", ".", "asarray", "(", "ann", ",", "dtype", "=", "np", ".", "int", ")", "\n", "if", "im", ".", "shape", "[", ":", "-", "1", "]", "!=", "ann", ".", "shape", ":", "\n", "        ", "raise", "ValueError", "(", "'First two dimensions of `im` and `ann` must match'", ")", "\n", "", "if", "im", ".", "shape", "[", "-", "1", "]", "!=", "3", ":", "\n", "        ", "raise", "ValueError", "(", "'im must have three channels at the 3 dimension'", ")", "\n", "\n", "", "colors", "=", "colors", "or", "_pascal_color_map", "(", ")", "\n", "colors", "=", "np", ".", "asarray", "(", "colors", ",", "dtype", "=", "np", ".", "uint8", ")", "\n", "\n", "mask", "=", "colors", "[", "ann", "]", "\n", "fg", "=", "im", "*", "alpha", "+", "(", "1", "-", "alpha", ")", "*", "mask", "\n", "\n", "img", "=", "im", ".", "copy", "(", ")", "\n", "img", "[", "ann", ">", "0", "]", "=", "fg", "[", "ann", ">", "0", "]", "\n", "\n", "if", "contour_thickness", ":", "# pragma: no cover", "\n", "        ", "import", "cv2", "\n", "for", "obj_id", "in", "np", ".", "unique", "(", "ann", "[", "ann", ">", "0", "]", ")", ":", "\n", "            ", "contours", "=", "cv2", ".", "findContours", "(", "(", "ann", "==", "obj_id", ")", ".", "astype", "(", "\n", "np", ".", "uint8", ")", ",", "cv2", ".", "RETR_TREE", ",", "cv2", ".", "CHAIN_APPROX_SIMPLE", ")", "[", "-", "2", ":", "]", "\n", "cv2", ".", "drawContours", "(", "img", ",", "contours", "[", "0", "]", ",", "-", "1", ",", "colors", "[", "obj_id", "]", ".", "tolist", "(", ")", ",", "\n", "contour_thickness", ")", "\n", "", "", "return", "img", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBase.__init__": [[13, 18], ["None"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "visdom", ",", "show_data", ",", "title", ")", ":", "\n", "        ", "self", ".", "visdom", "=", "visdom", "\n", "self", ".", "show_data", "=", "show_data", "\n", "self", ".", "title", "=", "title", "\n", "self", ".", "raw_data", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBase.update": [[19, 24], ["visdom.VisBase.save_data", "visdom.VisBase.save_data", "visdom.VisBase.draw_data", "visdom.VisBase.draw_data"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBBReg.save_data", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBBReg.save_data", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBBReg.draw_data", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBBReg.draw_data"], ["", "def", "update", "(", "self", ",", "data", ",", "**", "kwargs", ")", ":", "\n", "        ", "self", ".", "save_data", "(", "data", ",", "**", "kwargs", ")", "\n", "\n", "if", "self", ".", "show_data", ":", "\n", "            ", "self", ".", "draw_data", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBase.save_data": [[25, 27], ["None"], "methods", ["None"], ["", "", "def", "save_data", "(", "self", ",", "data", ",", "**", "kwargs", ")", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBase.draw_data": [[28, 30], ["None"], "methods", ["None"], ["", "def", "draw_data", "(", "self", ")", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBase.toggle_display": [[31, 41], ["visdom.VisBase.draw_data", "visdom.VisBase.draw_data", "visdom.VisBase.visdom.close", "visdom.VisBase.visdom.close"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBBReg.draw_data", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBBReg.draw_data"], ["", "def", "toggle_display", "(", "self", ",", "new_mode", "=", "None", ")", ":", "\n", "        ", "if", "new_mode", "is", "not", "None", ":", "\n", "            ", "self", ".", "show_data", "=", "new_mode", "\n", "", "else", ":", "\n", "            ", "self", ".", "show_data", "=", "not", "self", ".", "show_data", "\n", "\n", "", "if", "self", ".", "show_data", ":", "\n", "            ", "self", ".", "draw_data", "(", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "visdom", ".", "close", "(", "self", ".", "title", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisImage.__init__": [[44, 46], ["visdom.VisBase.__init__", "visdom.VisBase.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "visdom", ",", "show_data", ",", "title", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "visdom", ",", "show_data", ",", "title", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisImage.save_data": [[47, 50], ["data.float.float.float"], "methods", ["None"], ["", "def", "save_data", "(", "self", ",", "data", ")", ":", "\n", "        ", "data", "=", "data", ".", "float", "(", ")", "\n", "self", ".", "raw_data", "=", "data", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisImage.draw_data": [[51, 53], ["visdom.VisImage.visdom.image", "visdom.VisImage.visdom.image", "visdom.VisImage.raw_data.clone", "visdom.VisImage.raw_data.clone"], "methods", ["None"], ["", "def", "draw_data", "(", "self", ")", ":", "\n", "        ", "self", ".", "visdom", ".", "image", "(", "self", ".", "raw_data", ".", "clone", "(", ")", ",", "opts", "=", "{", "'title'", ":", "self", ".", "title", "}", ",", "win", "=", "self", ".", "title", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisHeatmap.__init__": [[56, 58], ["visdom.VisBase.__init__", "visdom.VisBase.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "visdom", ",", "show_data", ",", "title", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "visdom", ",", "show_data", ",", "title", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisHeatmap.save_data": [[59, 62], ["data.squeeze().flip.squeeze().flip.squeeze().flip", "data.squeeze().flip.squeeze().flip.squeeze"], "methods", ["None"], ["", "def", "save_data", "(", "self", ",", "data", ")", ":", "\n", "        ", "data", "=", "data", ".", "squeeze", "(", ")", ".", "flip", "(", "0", ")", "\n", "self", ".", "raw_data", "=", "data", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisHeatmap.draw_data": [[63, 65], ["visdom.VisHeatmap.visdom.heatmap", "visdom.VisHeatmap.visdom.heatmap", "visdom.VisHeatmap.raw_data.clone", "visdom.VisHeatmap.raw_data.clone"], "methods", ["None"], ["", "def", "draw_data", "(", "self", ")", ":", "\n", "        ", "self", ".", "visdom", ".", "heatmap", "(", "self", ".", "raw_data", ".", "clone", "(", ")", ",", "opts", "=", "{", "'title'", ":", "self", ".", "title", "}", ",", "win", "=", "self", ".", "title", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisFeaturemap.__init__": [[68, 71], ["visdom.VisBase.__init__", "visdom.VisBase.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "visdom", ",", "show_data", ",", "title", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "visdom", ",", "show_data", ",", "title", ")", "\n", "self", ".", "block_list", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisFeaturemap.block_list_callback_handler": [[72, 76], ["visdom.VisFeaturemap.visdom.properties", "visdom.VisFeaturemap.visdom.properties", "visdom.VisFeaturemap.draw_data", "visdom.VisFeaturemap.draw_data"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBBReg.draw_data", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBBReg.draw_data"], ["", "def", "block_list_callback_handler", "(", "self", ",", "data", ")", ":", "\n", "        ", "self", ".", "block_list", "[", "data", "[", "'propertyId'", "]", "]", "[", "'value'", "]", "=", "data", "[", "'value'", "]", "\n", "self", ".", "visdom", ".", "properties", "(", "self", ".", "block_list", ",", "opts", "=", "{", "'title'", ":", "'Featuremap UI'", "}", ",", "win", "=", "'featuremap_ui'", ")", "\n", "self", ".", "draw_data", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisFeaturemap.save_data": [[77, 90], ["data.flip.flip.view", "data.flip.flip.flip", "range", "visdom.VisFeaturemap.visdom.properties", "visdom.VisFeaturemap.visdom.properties", "visdom.VisFeaturemap.visdom.register_event_handler", "visdom.VisFeaturemap.visdom.register_event_handler", "visdom.VisFeaturemap.block_list.append", "visdom.VisFeaturemap.block_list.append"], "methods", ["None"], ["", "def", "save_data", "(", "self", ",", "data", ")", ":", "\n", "        ", "data", "=", "data", ".", "view", "(", "-", "1", ",", "*", "data", ".", "shape", "[", "-", "2", ":", "]", ")", "\n", "data", "=", "data", ".", "flip", "(", "1", ")", "\n", "if", "self", ".", "block_list", "is", "None", ":", "\n", "            ", "self", ".", "block_list", "=", "[", "]", "\n", "self", ".", "draw_feat", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "data", ".", "shape", "[", "0", "]", ")", ":", "\n", "                ", "self", ".", "block_list", ".", "append", "(", "{", "'type'", ":", "'checkbox'", ",", "'name'", ":", "'Channel {:04d}'", ".", "format", "(", "i", ")", ",", "'value'", ":", "False", "}", ")", "\n", "\n", "", "self", ".", "visdom", ".", "properties", "(", "self", ".", "block_list", ",", "opts", "=", "{", "'title'", ":", "'Featuremap UI'", "}", ",", "win", "=", "'featuremap_ui'", ")", "\n", "self", ".", "visdom", ".", "register_event_handler", "(", "self", ".", "block_list_callback_handler", ",", "'featuremap_ui'", ")", "\n", "\n", "", "self", ".", "raw_data", "=", "data", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisFeaturemap.draw_data": [[91, 98], ["enumerate", "visdom.VisFeaturemap.visdom.heatmap", "visdom.VisFeaturemap.visdom.heatmap", "visdom.VisFeaturemap.raw_data[].clone", "visdom.VisFeaturemap.raw_data[].clone"], "methods", ["None"], ["", "def", "draw_data", "(", "self", ")", ":", "\n", "        ", "if", "self", ".", "block_list", "is", "not", "None", "and", "self", ".", "show_data", ":", "\n", "            ", "for", "i", ",", "d", "in", "enumerate", "(", "self", ".", "block_list", ")", ":", "\n", "                ", "if", "d", "[", "'value'", "]", ":", "\n", "                    ", "fig_title", "=", "'{} ch: {:04d}'", ".", "format", "(", "self", ".", "title", ",", "i", ")", "\n", "self", ".", "visdom", ".", "heatmap", "(", "self", ".", "raw_data", "[", "i", ",", ":", ",", ":", "]", ".", "clone", "(", ")", ",", "\n", "opts", "=", "{", "'title'", ":", "fig_title", "}", ",", "win", "=", "fig_title", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolume.__init__": [[101, 106], ["visdom.VisBase.__init__", "visdom.VisBase.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "visdom", ",", "show_data", ",", "title", ",", "flip", "=", "False", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "visdom", ",", "show_data", ",", "title", ")", "\n", "self", ".", "show_slice", "=", "False", "\n", "self", ".", "slice_pos", "=", "None", "\n", "self", ".", "flip", "=", "flip", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolume.show_cost_volume": [[107, 117], ["visdom.VisCostVolume.raw_data.clone", "visdom.VisCostVolume.raw_data.clone", "visdom.VisCostVolume.permute().contiguous", "visdom.VisCostVolume.permute().contiguous", "data_perm.permute().contiguous.permute().contiguous.view", "visdom.VisCostVolume.visdom.heatmap", "visdom.VisCostVolume.visdom.heatmap", "data_perm.permute().contiguous.permute().contiguous.permute().contiguous", "data_perm.permute().contiguous.permute().contiguous.flip", "visdom.VisCostVolume.permute", "visdom.VisCostVolume.permute", "data_perm.permute().contiguous.permute().contiguous.permute"], "methods", ["None"], ["", "def", "show_cost_volume", "(", "self", ")", ":", "\n", "        ", "data", "=", "self", ".", "raw_data", ".", "clone", "(", ")", "\n", "\n", "# data_perm = data.permute(2, 0, 3, 1).contiguous()", "\n", "data_perm", "=", "data", ".", "permute", "(", "0", ",", "2", ",", "1", ",", "3", ")", ".", "contiguous", "(", ")", "\n", "if", "self", ".", "flip", ":", "\n", "            ", "data_perm", "=", "data_perm", ".", "permute", "(", "2", ",", "3", ",", "0", ",", "1", ")", ".", "contiguous", "(", ")", "\n", "\n", "", "data_perm", "=", "data_perm", ".", "view", "(", "data_perm", ".", "shape", "[", "0", "]", "*", "data_perm", ".", "shape", "[", "1", "]", ",", "-", "1", ")", "\n", "self", ".", "visdom", ".", "heatmap", "(", "data_perm", ".", "flip", "(", "0", ")", ",", "opts", "=", "{", "'title'", ":", "self", ".", "title", "}", ",", "win", "=", "self", ".", "title", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolume.set_zoom_pos": [[118, 120], ["None"], "methods", ["None"], ["", "def", "set_zoom_pos", "(", "self", ",", "slice_pos", ")", ":", "\n", "        ", "self", ".", "slice_pos", "=", "slice_pos", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolume.toggle_show_slice": [[121, 126], ["None"], "methods", ["None"], ["", "def", "toggle_show_slice", "(", "self", ",", "new_mode", "=", "None", ")", ":", "\n", "        ", "if", "new_mode", "is", "not", "None", ":", "\n", "            ", "self", ".", "show_slice", "=", "new_mode", "\n", "", "else", ":", "\n", "            ", "self", ".", "show_slice", "=", "not", "self", ".", "show_slice", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolume.show_cost_volume_slice": [[127, 138], ["visdom.VisCostVolume.raw_data.clone", "visdom.VisCostVolume.raw_data.clone", "visdom.VisCostVolume.visdom.heatmap", "visdom.VisCostVolume.visdom.heatmap", "cost_volume_slice.flip"], "methods", ["None"], ["", "", "def", "show_cost_volume_slice", "(", "self", ")", ":", "\n", "        ", "slice_pos", "=", "self", ".", "slice_pos", "\n", "\n", "# slice_pos: [row, col]", "\n", "cost_volume_data", "=", "self", ".", "raw_data", ".", "clone", "(", ")", "\n", "\n", "if", "self", ".", "flip", ":", "\n", "            ", "cost_volume_slice", "=", "cost_volume_data", "[", ":", ",", ":", ",", "slice_pos", "[", "0", "]", ",", "slice_pos", "[", "1", "]", "]", "\n", "", "else", ":", "\n", "            ", "cost_volume_slice", "=", "cost_volume_data", "[", "slice_pos", "[", "0", "]", ",", "slice_pos", "[", "1", "]", ",", ":", ",", ":", "]", "\n", "", "self", ".", "visdom", ".", "heatmap", "(", "cost_volume_slice", ".", "flip", "(", "0", ")", ",", "opts", "=", "{", "'title'", ":", "self", ".", "title", "}", ",", "win", "=", "self", ".", "title", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolume.save_data": [[139, 142], ["data.view.view.view"], "methods", ["None"], ["", "def", "save_data", "(", "self", ",", "data", ")", ":", "\n", "        ", "data", "=", "data", ".", "view", "(", "data", ".", "shape", "[", "-", "2", "]", ",", "data", ".", "shape", "[", "-", "1", "]", ",", "data", ".", "shape", "[", "-", "2", "]", ",", "data", ".", "shape", "[", "-", "1", "]", ")", "\n", "self", ".", "raw_data", "=", "data", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolume.draw_data": [[143, 148], ["visdom.VisCostVolume.show_cost_volume_slice", "visdom.VisCostVolume.show_cost_volume_slice", "visdom.VisCostVolume.show_cost_volume", "visdom.VisCostVolume.show_cost_volume"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolume.show_cost_volume_slice", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolume.show_cost_volume_slice", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolume.show_cost_volume", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolume.show_cost_volume"], ["", "def", "draw_data", "(", "self", ")", ":", "\n", "        ", "if", "self", ".", "show_slice", ":", "\n", "            ", "self", ".", "show_cost_volume_slice", "(", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "show_cost_volume", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolumeUI.cv_ui_handler": [[151, 177], ["visdom.VisCostVolumeUI.show_image", "visdom.VisCostVolumeUI.show_image", "visdom.VisCostVolumeUI.registered_blocks.items", "visdom.VisCostVolumeUI.registered_blocks.items", "isinstance", "min", "block.set_zoom_pos", "block.toggle_show_slice", "max", "block.draw_data", "max", "min"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolumeUI.show_image", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolumeUI.show_image", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolume.set_zoom_pos", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolume.toggle_show_slice", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBBReg.draw_data", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["    ", "def", "cv_ui_handler", "(", "self", ",", "data", ")", ":", "\n", "        ", "zoom_toggled", "=", "False", "\n", "if", "data", "[", "'event_type'", "]", "==", "'KeyPress'", ":", "\n", "            ", "if", "data", "[", "'key'", "]", "==", "'ArrowRight'", ":", "\n", "                ", "self", ".", "zoom_pos", "[", "1", "]", "=", "min", "(", "self", ".", "zoom_pos", "[", "1", "]", "+", "1", ",", "self", ".", "feat_shape", "[", "1", "]", "-", "1", ")", "\n", "", "elif", "data", "[", "'key'", "]", "==", "'ArrowLeft'", ":", "\n", "                ", "self", ".", "zoom_pos", "[", "1", "]", "=", "max", "(", "self", ".", "zoom_pos", "[", "1", "]", "-", "1", ",", "0", ")", "\n", "", "elif", "data", "[", "'key'", "]", "==", "'ArrowUp'", ":", "\n", "                ", "self", ".", "zoom_pos", "[", "0", "]", "=", "max", "(", "self", ".", "zoom_pos", "[", "0", "]", "-", "1", ",", "0", ")", "\n", "", "elif", "data", "[", "'key'", "]", "==", "'ArrowDown'", ":", "\n", "                ", "self", ".", "zoom_pos", "[", "0", "]", "=", "min", "(", "self", ".", "zoom_pos", "[", "0", "]", "+", "1", ",", "self", ".", "feat_shape", "[", "0", "]", "-", "1", ")", "\n", "", "elif", "data", "[", "'key'", "]", "==", "'Enter'", ":", "\n", "                ", "self", ".", "zoom_mode", "=", "not", "self", ".", "zoom_mode", "\n", "zoom_toggled", "=", "True", "\n", "\n", "# Update image", "\n", "", "", "self", ".", "show_image", "(", ")", "\n", "\n", "# Update cost volumes", "\n", "for", "block_title", ",", "block", "in", "self", ".", "registered_blocks", ".", "items", "(", ")", ":", "\n", "            ", "if", "isinstance", "(", "block", ",", "VisCostVolume", ")", ":", "\n", "                ", "block", ".", "set_zoom_pos", "(", "self", ".", "zoom_pos", ")", "\n", "block", ".", "toggle_show_slice", "(", "self", ".", "zoom_mode", ")", "\n", "\n", "if", "(", "self", ".", "zoom_mode", "or", "zoom_toggled", ")", "and", "block", ".", "show_data", ":", "\n", "                    ", "block", ".", "draw_data", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolumeUI.__init__": [[178, 186], ["visdom.VisBase.__init__", "visdom.VisBase.__init__", "visdom.VisCostVolumeUI.visdom.register_event_handler", "visdom.VisCostVolumeUI.visdom.register_event_handler", "int", "int"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["", "", "", "", "def", "__init__", "(", "self", ",", "visdom", ",", "show_data", ",", "title", ",", "feat_shape", ",", "registered_blocks", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "visdom", ",", "show_data", ",", "title", ")", "\n", "self", ".", "feat_shape", "=", "feat_shape", "\n", "self", ".", "zoom_mode", "=", "False", "\n", "self", ".", "zoom_pos", "=", "[", "int", "(", "(", "feat_shape", "[", "0", "]", "-", "1", ")", "/", "2", ")", ",", "int", "(", "(", "feat_shape", "[", "1", "]", "-", "1", ")", "/", "2", ")", "]", "\n", "self", ".", "registered_blocks", "=", "registered_blocks", "\n", "\n", "self", ".", "visdom", ".", "register_event_handler", "(", "self", ".", "cv_ui_handler", ",", "title", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolumeUI.draw_grid": [[187, 199], ["int", "int", "list", "list", "list", "list", "range", "range", "range", "range"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "draw_grid", "(", "self", ",", "data", ")", ":", "\n", "        ", "stride_r", "=", "int", "(", "data", ".", "shape", "[", "1", "]", "/", "self", ".", "feat_shape", "[", "0", "]", ")", "\n", "stride_c", "=", "int", "(", "data", ".", "shape", "[", "2", "]", "/", "self", ".", "feat_shape", "[", "1", "]", ")", "\n", "\n", "# Draw grid", "\n", "data", "[", ":", ",", "list", "(", "range", "(", "0", ",", "data", ".", "shape", "[", "1", "]", ",", "stride_r", ")", ")", ",", ":", "]", "=", "0", "\n", "data", "[", ":", ",", ":", ",", "list", "(", "range", "(", "0", ",", "data", ".", "shape", "[", "2", "]", ",", "stride_c", ")", ")", "]", "=", "0", "\n", "\n", "data", "[", "0", ",", "list", "(", "range", "(", "0", ",", "data", ".", "shape", "[", "1", "]", ",", "stride_r", ")", ")", ",", ":", "]", "=", "255", "\n", "data", "[", "0", ",", ":", ",", "list", "(", "range", "(", "0", ",", "data", ".", "shape", "[", "2", "]", ",", "stride_c", ")", ")", "]", "=", "255", "\n", "\n", "return", "data", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolumeUI.shade_cell": [[200, 213], ["int", "int", "min", "min", "torch.tensor().view().to", "torch.tensor().view", "torch.tensor"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to"], ["", "def", "shade_cell", "(", "self", ",", "data", ")", ":", "\n", "        ", "stride_r", "=", "int", "(", "data", ".", "shape", "[", "1", "]", "/", "self", ".", "feat_shape", "[", "0", "]", ")", "\n", "stride_c", "=", "int", "(", "data", ".", "shape", "[", "2", "]", "/", "self", ".", "feat_shape", "[", "1", "]", ")", "\n", "\n", "r1", "=", "self", ".", "zoom_pos", "[", "0", "]", "*", "stride_r", "\n", "r2", "=", "min", "(", "(", "self", ".", "zoom_pos", "[", "0", "]", "+", "1", ")", "*", "stride_r", ",", "data", ".", "shape", "[", "1", "]", ")", "\n", "\n", "c1", "=", "self", ".", "zoom_pos", "[", "1", "]", "*", "stride_c", "\n", "c2", "=", "min", "(", "(", "self", ".", "zoom_pos", "[", "1", "]", "+", "1", ")", "*", "stride_c", ",", "data", ".", "shape", "[", "2", "]", ")", "\n", "\n", "factor", "=", "0.8", "if", "self", ".", "zoom_mode", "else", "0.5", "\n", "data", "[", ":", ",", "r1", ":", "r2", ",", "c1", ":", "c2", "]", "=", "data", "[", ":", ",", "r1", ":", "r2", ",", "c1", ":", "c2", "]", "*", "(", "1", "-", "factor", ")", "+", "torch", ".", "tensor", "(", "[", "255.0", ",", "0.0", ",", "0.0", "]", ")", ".", "view", "(", "3", ",", "1", ",", "1", ")", ".", "to", "(", "data", ".", "device", ")", "*", "factor", "\n", "return", "data", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolumeUI.show_image": [[214, 221], ["visdom.VisCostVolumeUI.draw_grid", "visdom.VisCostVolumeUI.draw_grid", "visdom.VisCostVolumeUI.shade_cell", "visdom.VisCostVolumeUI.shade_cell", "visdom.VisCostVolumeUI.visdom.image", "visdom.VisCostVolumeUI.visdom.image", "visdom.VisCostVolumeUI.raw_data.clone", "visdom.VisCostVolumeUI.raw_data.clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolumeUI.draw_grid", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolumeUI.draw_grid", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolumeUI.shade_cell", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolumeUI.shade_cell"], ["", "def", "show_image", "(", "self", ",", "data", "=", "None", ")", ":", "\n", "        ", "if", "data", "is", "None", ":", "\n", "            ", "data", "=", "self", ".", "raw_data", ".", "clone", "(", ")", "\n", "\n", "", "data", "=", "self", ".", "draw_grid", "(", "data", ")", "\n", "data", "=", "self", ".", "shade_cell", "(", "data", ")", "\n", "self", ".", "visdom", ".", "image", "(", "data", ",", "opts", "=", "{", "'title'", ":", "self", ".", "title", "}", ",", "win", "=", "self", ".", "title", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolumeUI.save_data": [[222, 227], ["data.float.float.float"], "methods", ["None"], ["", "def", "save_data", "(", "self", ",", "data", ")", ":", "\n", "# Ignore feat shape", "\n", "        ", "data", "=", "data", "[", "0", "]", "\n", "data", "=", "data", ".", "float", "(", ")", "\n", "self", ".", "raw_data", "=", "data", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolumeUI.draw_data": [[228, 230], ["visdom.VisCostVolumeUI.show_image", "visdom.VisCostVolumeUI.show_image", "visdom.VisCostVolumeUI.raw_data.clone", "visdom.VisCostVolumeUI.raw_data.clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolumeUI.show_image", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisCostVolumeUI.show_image"], ["", "def", "draw_data", "(", "self", ")", ":", "\n", "        ", "self", ".", "show_image", "(", "self", ".", "raw_data", ".", "clone", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisInfoDict.__init__": [[233, 236], ["visdom.VisBase.__init__", "visdom.VisBase.__init__", "collections.OrderedDict"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "visdom", ",", "show_data", ",", "title", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "visdom", ",", "show_data", ",", "title", ")", "\n", "self", ".", "raw_data", "=", "OrderedDict", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisInfoDict.generate_display_text": [[237, 249], ["data.items", "key.replace.replace.replace", "isinstance"], "methods", ["None"], ["", "def", "generate_display_text", "(", "self", ",", "data", ")", ":", "\n", "        ", "display_text", "=", "''", "\n", "for", "key", ",", "value", "in", "data", ".", "items", "(", ")", ":", "\n", "            ", "key", "=", "key", ".", "replace", "(", "'_'", ",", "' '", ")", "\n", "if", "value", "is", "None", ":", "\n", "                ", "display_text", "+=", "'<b>{}</b>: {}<br>'", ".", "format", "(", "key", ",", "'None'", ")", "\n", "", "elif", "isinstance", "(", "value", ",", "(", "str", ",", "int", ")", ")", ":", "\n", "                ", "display_text", "+=", "'<b>{}</b>: {}<br>'", ".", "format", "(", "key", ",", "value", ")", "\n", "", "else", ":", "\n", "                ", "display_text", "+=", "'<b>{}</b>: {:.2f}<br>'", ".", "format", "(", "key", ",", "value", ")", "\n", "\n", "", "", "return", "display_text", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisInfoDict.save_data": [[250, 253], ["data.items"], "methods", ["None"], ["", "def", "save_data", "(", "self", ",", "data", ")", ":", "\n", "        ", "for", "key", ",", "val", "in", "data", ".", "items", "(", ")", ":", "\n", "            ", "self", ".", "raw_data", "[", "key", "]", "=", "val", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisInfoDict.draw_data": [[254, 258], ["copy.deepcopy", "visdom.VisInfoDict.generate_display_text", "visdom.VisInfoDict.generate_display_text", "visdom.VisInfoDict.visdom.text", "visdom.VisInfoDict.visdom.text"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisInfoDict.generate_display_text", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisInfoDict.generate_display_text"], ["", "", "def", "draw_data", "(", "self", ")", ":", "\n", "        ", "data", "=", "copy", ".", "deepcopy", "(", "self", ".", "raw_data", ")", "\n", "display_text", "=", "self", ".", "generate_display_text", "(", "data", ")", "\n", "self", ".", "visdom", ".", "text", "(", "display_text", ",", "opts", "=", "{", "'title'", ":", "self", ".", "title", "}", ",", "win", "=", "self", ".", "title", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisText.__init__": [[261, 263], ["visdom.VisBase.__init__", "visdom.VisBase.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "visdom", ",", "show_data", ",", "title", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "visdom", ",", "show_data", ",", "title", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisText.save_data": [[264, 266], ["None"], "methods", ["None"], ["", "def", "save_data", "(", "self", ",", "data", ")", ":", "\n", "        ", "self", ".", "raw_data", "=", "data", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisText.draw_data": [[267, 270], ["copy.deepcopy", "visdom.VisText.visdom.text", "visdom.VisText.visdom.text"], "methods", ["None"], ["", "def", "draw_data", "(", "self", ")", ":", "\n", "        ", "data", "=", "copy", ".", "deepcopy", "(", "self", ".", "raw_data", ")", "\n", "self", ".", "visdom", ".", "text", "(", "data", ",", "opts", "=", "{", "'title'", ":", "self", ".", "title", "}", ",", "win", "=", "self", ".", "title", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisLinePlot.__init__": [[273, 275], ["visdom.VisBase.__init__", "visdom.VisBase.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "visdom", ",", "show_data", ",", "title", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "visdom", ",", "show_data", ",", "title", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisLinePlot.save_data": [[276, 278], ["None"], "methods", ["None"], ["", "def", "save_data", "(", "self", ",", "data", ")", ":", "\n", "        ", "self", ".", "raw_data", "=", "data", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisLinePlot.draw_data": [[279, 288], ["isinstance", "visdom.VisLinePlot.visdom.line", "visdom.VisLinePlot.visdom.line", "visdom.VisLinePlot.raw_data[].clone", "visdom.VisLinePlot.raw_data[].clone", "visdom.VisLinePlot.raw_data[].clone", "visdom.VisLinePlot.raw_data[].clone", "visdom.VisLinePlot.raw_data.clone", "visdom.VisLinePlot.raw_data.clone", "torch.arange"], "methods", ["None"], ["", "def", "draw_data", "(", "self", ")", ":", "\n", "        ", "if", "isinstance", "(", "self", ".", "raw_data", ",", "(", "list", ",", "tuple", ")", ")", ":", "\n", "            ", "data_y", "=", "self", ".", "raw_data", "[", "0", "]", ".", "clone", "(", ")", "\n", "data_x", "=", "self", ".", "raw_data", "[", "1", "]", ".", "clone", "(", ")", "\n", "", "else", ":", "\n", "            ", "data_y", "=", "self", ".", "raw_data", ".", "clone", "(", ")", "\n", "data_x", "=", "torch", ".", "arange", "(", "data_y", ".", "shape", "[", "0", "]", ")", "\n", "\n", "", "self", ".", "visdom", ".", "line", "(", "data_y", ",", "data_x", ",", "opts", "=", "{", "'title'", ":", "self", ".", "title", "}", ",", "win", "=", "self", ".", "title", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisTracking.__init__": [[291, 293], ["visdom.VisBase.__init__", "visdom.VisBase.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "visdom", ",", "show_data", ",", "title", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "visdom", ",", "show_data", ",", "title", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisTracking.save_data": [[294, 312], ["isinstance", "boxes.append", "boxes.append", "len", "masks.append", "bm.float", "torch.Tensor"], "methods", ["None"], ["", "def", "save_data", "(", "self", ",", "data", ")", ":", "\n", "        ", "image", "=", "data", "[", "0", "]", "\n", "boxes_masks", "=", "data", "[", "1", ":", "]", "\n", "\n", "boxes", ",", "masks", "=", "[", "]", ",", "[", "]", "\n", "for", "bm", "in", "boxes_masks", ":", "\n", "            ", "if", "bm", "is", "None", ":", "\n", "                ", "continue", "\n", "", "if", "isinstance", "(", "bm", ",", "list", ")", ":", "\n", "                ", "boxes", ".", "append", "(", "torch", ".", "Tensor", "(", "bm", ")", ")", ";", "continue", "\n", "", "if", "len", "(", "bm", ".", "shape", ")", ">", "1", ":", "\n", "# Binarize segmentation if a float tensor is provided", "\n", "                ", "if", "bm", ".", "dtype", "!=", "np", ".", "uint8", ":", "\n", "                    ", "bm", "=", "(", "bm", ">", "0.5", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "", "masks", ".", "append", "(", "bm", ")", ";", "continue", "\n", "", "boxes", ".", "append", "(", "bm", ".", "float", "(", ")", ")", "\n", "\n", "", "self", ".", "raw_data", "=", "[", "image", ",", "boxes", ",", "masks", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisTracking.draw_data": [[313, 335], ["visdom.VisTracking.raw_data[].copy", "visdom.VisTracking.raw_data[].copy", "enumerate", "enumerate", "pytracking.features.preprocessing.numpy_to_torch().squeeze", "pytracking.utils.plotting.overlay_mask.float", "visdom.VisTracking.visdom.image", "visdom.VisTracking.visdom.image", "max", "cv2.resize", "enumerate", "cv2.rectangle", "pytracking.utils.plotting.overlay_mask", "float", "cv2.resize", "b.clone", "pytracking.features.preprocessing.numpy_to_torch", "max", "int", "int", "int", "int"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.overlay_mask", "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.numpy_to_torch", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "draw_data", "(", "self", ")", ":", "\n", "        ", "disp_image", "=", "self", ".", "raw_data", "[", "0", "]", ".", "copy", "(", ")", "\n", "\n", "resize_factor", "=", "1", "\n", "if", "max", "(", "disp_image", ".", "shape", ")", ">", "480", ":", "\n", "            ", "resize_factor", "=", "480.0", "/", "float", "(", "max", "(", "disp_image", ".", "shape", ")", ")", "\n", "disp_image", "=", "cv2", ".", "resize", "(", "disp_image", ",", "None", ",", "fx", "=", "resize_factor", ",", "fy", "=", "resize_factor", ")", "\n", "for", "i", ",", "mask", "in", "enumerate", "(", "self", ".", "raw_data", "[", "2", "]", ")", ":", "\n", "                ", "self", ".", "raw_data", "[", "2", "]", "[", "i", "]", "=", "cv2", ".", "resize", "(", "mask", ",", "None", ",", "fx", "=", "resize_factor", ",", "fy", "=", "resize_factor", ")", "\n", "\n", "", "", "boxes", "=", "[", "resize_factor", "*", "b", ".", "clone", "(", ")", "for", "b", "in", "self", ".", "raw_data", "[", "1", "]", "]", "\n", "\n", "for", "i", ",", "disp_rect", "in", "enumerate", "(", "boxes", ")", ":", "\n", "            ", "color", "=", "(", "(", "255", "*", "(", "(", "i", "%", "3", ")", ">", "0", ")", ")", ",", "255", "*", "(", "(", "i", "+", "1", ")", "%", "2", ")", ",", "(", "255", "*", "(", "i", "%", "5", ")", ")", "//", "4", ")", "\n", "cv2", ".", "rectangle", "(", "disp_image", ",", "\n", "(", "int", "(", "disp_rect", "[", "0", "]", ")", ",", "int", "(", "disp_rect", "[", "1", "]", ")", ")", ",", "\n", "(", "int", "(", "disp_rect", "[", "0", "]", "+", "disp_rect", "[", "2", "]", ")", ",", "int", "(", "disp_rect", "[", "1", "]", "+", "disp_rect", "[", "3", "]", ")", ")", ",", "color", ",", "2", ")", "\n", "", "for", "i", ",", "mask", "in", "enumerate", "(", "self", ".", "raw_data", "[", "2", "]", ",", "1", ")", ":", "\n", "            ", "disp_image", "=", "overlay_mask", "(", "disp_image", ",", "mask", "*", "i", ")", "\n", "", "disp_image", "=", "numpy_to_torch", "(", "disp_image", ")", ".", "squeeze", "(", "0", ")", "\n", "disp_image", "=", "disp_image", ".", "float", "(", ")", "\n", "self", ".", "visdom", ".", "image", "(", "disp_image", ",", "opts", "=", "{", "'title'", ":", "self", ".", "title", "}", ",", "win", "=", "self", ".", "title", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBBReg.__init__": [[338, 341], ["visdom.VisBase.__init__", "visdom.VisBase.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "visdom", ",", "show_data", ",", "title", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "visdom", ",", "show_data", ",", "title", ")", "\n", "self", ".", "block_list", "=", "[", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBBReg.block_list_callback_handler": [[342, 346], ["visdom.VisBBReg.visdom.properties", "visdom.VisBBReg.visdom.properties", "visdom.VisBBReg.draw_data", "visdom.VisBBReg.draw_data"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBBReg.draw_data", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBBReg.draw_data"], ["", "def", "block_list_callback_handler", "(", "self", ",", "data", ")", ":", "\n", "        ", "self", ".", "block_list", "[", "data", "[", "'propertyId'", "]", "]", "[", "'value'", "]", "=", "data", "[", "'value'", "]", "\n", "self", ".", "visdom", ".", "properties", "(", "self", ".", "block_list", ",", "opts", "=", "{", "'title'", ":", "'BBReg Vis'", "}", ",", "win", "=", "'bbreg_vis'", ")", "\n", "self", ".", "draw_data", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBBReg.save_data": [[347, 352], ["data[].float"], "methods", ["None"], ["", "def", "save_data", "(", "self", ",", "data", ")", ":", "\n", "        ", "self", ".", "image", "=", "data", "[", "0", "]", ".", "float", "(", ")", "\n", "self", ".", "init_boxes", "=", "data", "[", "1", "]", "\n", "self", ".", "final_boxes", "=", "data", "[", "2", "]", "\n", "self", ".", "final_ious", "=", "data", "[", "3", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBBReg.draw_data": [[353, 368], ["pytracking.utils.plotting.show_image_with_boxes", "pytracking.utils.plotting.show_image_with_boxes", "visdom.VisBBReg.visdom.image", "visdom.VisBBReg.visdom.image", "visdom.VisBBReg.visdom.image", "visdom.VisBBReg.visdom.image", "len", "visdom.VisBBReg.block_list.append", "visdom.VisBBReg.block_list.append", "visdom.VisBBReg.block_list.append", "visdom.VisBBReg.block_list.append", "visdom.VisBBReg.visdom.properties", "visdom.VisBBReg.visdom.properties", "visdom.VisBBReg.visdom.register_event_handler", "visdom.VisBBReg.visdom.register_event_handler", "disp_image.clone", "visdom.VisBBReg.init_boxes.clone", "visdom.VisBBReg.init_boxes.clone", "disp_image.clone", "visdom.VisBBReg.final_boxes.clone", "visdom.VisBBReg.final_boxes.clone", "visdom.VisBBReg.final_ious.clone", "visdom.VisBBReg.final_ious.clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.show_image_with_boxes", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.show_image_with_boxes"], ["", "def", "draw_data", "(", "self", ")", ":", "\n", "        ", "if", "len", "(", "self", ".", "block_list", ")", "==", "0", ":", "\n", "            ", "self", ".", "block_list", ".", "append", "(", "{", "'type'", ":", "'checkbox'", ",", "'name'", ":", "'ID 0'", ",", "'value'", ":", "True", "}", ")", "\n", "self", ".", "block_list", ".", "append", "(", "{", "'type'", ":", "'checkbox'", ",", "'name'", ":", "'ID 1'", ",", "'value'", ":", "True", "}", ")", "\n", "self", ".", "visdom", ".", "properties", "(", "self", ".", "block_list", ",", "opts", "=", "{", "'title'", ":", "'BBReg Vis'", "}", ",", "win", "=", "'bbreg_vis'", ")", "\n", "self", ".", "visdom", ".", "register_event_handler", "(", "self", ".", "block_list_callback_handler", ",", "'bbreg_vis'", ")", "\n", "\n", "", "disp_image", "=", "self", ".", "image", "\n", "\n", "ids", "=", "[", "x", "[", "'value'", "]", "for", "x", "in", "self", ".", "block_list", "]", "\n", "init_box_image", "=", "show_image_with_boxes", "(", "disp_image", ".", "clone", "(", ")", ",", "self", ".", "init_boxes", ".", "clone", "(", ")", ",", "disp_ids", "=", "ids", ")", "\n", "final_box_image", "=", "show_image_with_boxes", "(", "disp_image", ".", "clone", "(", ")", ",", "self", ".", "final_boxes", ".", "clone", "(", ")", ",", "self", ".", "final_ious", ".", "clone", "(", ")", ",", "disp_ids", "=", "ids", ")", "\n", "\n", "self", ".", "visdom", ".", "image", "(", "init_box_image", ",", "opts", "=", "{", "'title'", ":", "'Init Boxes'", "}", ",", "win", "=", "'Init Boxes'", ")", "\n", "self", ".", "visdom", ".", "image", "(", "final_box_image", ",", "opts", "=", "{", "'title'", ":", "'Final Boxes'", "}", ",", "win", "=", "'Final Boxes'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.Visdom.__init__": [[371, 382], ["visdom.Visdom", "visdom.Visdom", "visdom.Visdom", "visdom.Visdom", "visdom.Visdom.visdom.properties", "visdom.Visdom.visdom.properties", "visdom.Visdom.visdom.register_event_handler", "visdom.Visdom.visdom.register_event_handler", "visdom.Visdom.visdom.register_event_handler", "visdom.Visdom.visdom.register_event_handler", "visdom_info.get", "visdom_info.get"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["    ", "def", "__init__", "(", "self", ",", "debug", "=", "0", ",", "ui_info", "=", "None", ",", "visdom_info", "=", "None", ")", ":", "\n", "        ", "self", ".", "debug", "=", "debug", "\n", "self", ".", "visdom", "=", "visdom", ".", "Visdom", "(", "server", "=", "visdom_info", ".", "get", "(", "'server'", ",", "'127.0.0.1'", ")", ",", "port", "=", "visdom_info", ".", "get", "(", "'port'", ",", "8097", ")", ")", "\n", "self", ".", "registered_blocks", "=", "{", "}", "\n", "self", ".", "blocks_list", "=", "[", "]", "\n", "\n", "self", ".", "visdom", ".", "properties", "(", "self", ".", "blocks_list", ",", "opts", "=", "{", "'title'", ":", "'Block List'", "}", ",", "win", "=", "'block_list'", ")", "\n", "self", ".", "visdom", ".", "register_event_handler", "(", "self", ".", "block_list_callback_handler", ",", "'block_list'", ")", "\n", "\n", "if", "ui_info", "is", "not", "None", ":", "\n", "            ", "self", ".", "visdom", ".", "register_event_handler", "(", "ui_info", "[", "'handler'", "]", ",", "ui_info", "[", "'win_id'", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.Visdom.block_list_callback_handler": [[383, 391], ["visdom.Visdom.registered_blocks[].toggle_display", "visdom.Visdom.registered_blocks[].toggle_display", "visdom.Visdom.visdom.properties", "visdom.Visdom.visdom.properties"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBase.toggle_display", "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.VisBase.toggle_display"], ["", "", "def", "block_list_callback_handler", "(", "self", ",", "data", ")", ":", "\n", "        ", "field_name", "=", "self", ".", "blocks_list", "[", "data", "[", "'propertyId'", "]", "]", "[", "'name'", "]", "\n", "\n", "self", ".", "registered_blocks", "[", "field_name", "]", ".", "toggle_display", "(", "data", "[", "'value'", "]", ")", "\n", "\n", "self", ".", "blocks_list", "[", "data", "[", "'propertyId'", "]", "]", "[", "'value'", "]", "=", "data", "[", "'value'", "]", "\n", "\n", "self", ".", "visdom", ".", "properties", "(", "self", ".", "blocks_list", ",", "opts", "=", "{", "'title'", ":", "'Block List'", "}", ",", "win", "=", "'block_list'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.visdom.Visdom.register": [[392, 428], ["visdom.Visdom.registered_blocks[].update", "visdom.Visdom.registered_blocks[].update", "visdom.Visdom.registered_blocks.keys", "visdom.Visdom.registered_blocks.keys", "visdom.Visdom.visdom.properties", "visdom.Visdom.visdom.properties", "visdom.Visdom.blocks_list.append", "visdom.Visdom.blocks_list.append", "visdom.VisImage", "visdom.VisImage", "visdom.VisHeatmap", "visdom.VisHeatmap", "visdom.VisCostVolume", "visdom.VisCostVolume", "visdom.VisCostVolume", "visdom.VisCostVolume", "visdom.VisCostVolumeUI", "visdom.VisCostVolumeUI", "visdom.VisInfoDict", "visdom.VisInfoDict", "visdom.VisText", "visdom.VisText", "visdom.VisLinePlot", "visdom.VisLinePlot", "visdom.VisTracking", "visdom.VisTracking", "visdom.VisBBReg", "visdom.VisBBReg", "visdom.VisFeaturemap", "visdom.VisFeaturemap", "ValueError"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update"], ["", "def", "register", "(", "self", ",", "data", ",", "mode", ",", "debug_level", "=", "0", ",", "title", "=", "'Data'", ",", "**", "kwargs", ")", ":", "\n", "        ", "if", "title", "not", "in", "self", ".", "registered_blocks", ".", "keys", "(", ")", ":", "\n", "            ", "show_data", "=", "self", ".", "debug", ">=", "debug_level", "\n", "\n", "if", "title", "!=", "'Tracking'", ":", "\n", "                ", "self", ".", "blocks_list", ".", "append", "(", "{", "'type'", ":", "'checkbox'", ",", "'name'", ":", "title", ",", "'value'", ":", "show_data", "}", ")", "\n", "\n", "", "self", ".", "visdom", ".", "properties", "(", "self", ".", "blocks_list", ",", "opts", "=", "{", "'title'", ":", "'Block List'", "}", ",", "win", "=", "'block_list'", ")", "\n", "\n", "if", "mode", "==", "'image'", ":", "\n", "                ", "self", ".", "registered_blocks", "[", "title", "]", "=", "VisImage", "(", "self", ".", "visdom", ",", "show_data", ",", "title", ")", "\n", "", "elif", "mode", "==", "'heatmap'", ":", "\n", "                ", "self", ".", "registered_blocks", "[", "title", "]", "=", "VisHeatmap", "(", "self", ".", "visdom", ",", "show_data", ",", "title", ")", "\n", "", "elif", "mode", "==", "'cost_volume'", ":", "\n", "                ", "self", ".", "registered_blocks", "[", "title", "]", "=", "VisCostVolume", "(", "self", ".", "visdom", ",", "show_data", ",", "title", ")", "\n", "", "elif", "mode", "==", "'cost_volume_flip'", ":", "\n", "                ", "self", ".", "registered_blocks", "[", "title", "]", "=", "VisCostVolume", "(", "self", ".", "visdom", ",", "show_data", ",", "title", ",", "flip", "=", "True", ")", "\n", "", "elif", "mode", "==", "'cost_volume_ui'", ":", "\n", "                ", "self", ".", "registered_blocks", "[", "title", "]", "=", "VisCostVolumeUI", "(", "self", ".", "visdom", ",", "show_data", ",", "title", ",", "data", "[", "1", "]", ",", "\n", "self", ".", "registered_blocks", ")", "\n", "", "elif", "mode", "==", "'info_dict'", ":", "\n", "                ", "self", ".", "registered_blocks", "[", "title", "]", "=", "VisInfoDict", "(", "self", ".", "visdom", ",", "show_data", ",", "title", ")", "\n", "", "elif", "mode", "==", "'text'", ":", "\n", "                ", "self", ".", "registered_blocks", "[", "title", "]", "=", "VisText", "(", "self", ".", "visdom", ",", "show_data", ",", "title", ")", "\n", "", "elif", "mode", "==", "'lineplot'", ":", "\n", "                ", "self", ".", "registered_blocks", "[", "title", "]", "=", "VisLinePlot", "(", "self", ".", "visdom", ",", "show_data", ",", "title", ")", "\n", "", "elif", "mode", "==", "'Tracking'", ":", "\n", "                ", "self", ".", "registered_blocks", "[", "title", "]", "=", "VisTracking", "(", "self", ".", "visdom", ",", "show_data", ",", "title", ")", "\n", "", "elif", "mode", "==", "'bbreg'", ":", "\n", "                ", "self", ".", "registered_blocks", "[", "title", "]", "=", "VisBBReg", "(", "self", ".", "visdom", ",", "show_data", ",", "title", ")", "\n", "", "elif", "mode", "==", "'featmap'", ":", "\n", "                ", "self", ".", "registered_blocks", "[", "title", "]", "=", "VisFeaturemap", "(", "self", ".", "visdom", ",", "show_data", ",", "title", ")", "\n", "", "else", ":", "\n", "                ", "raise", "ValueError", "(", "'Visdom Error: Unknown data mode {}'", ".", "format", "(", "mode", ")", ")", "\n", "# Update", "\n", "", "", "self", ".", "registered_blocks", "[", "title", "]", ".", "update", "(", "data", ",", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.loading.load_network": [[6, 34], ["os.path.isabs", "ltr.load_network", "isinstance", "os.path.join", "ltr.load_network", "pytracking.evaluation.environment.env_settings", "pytracking.evaluation.environment.env_settings", "os.path.join", "ltr.load_network", "pytracking.evaluation.environment.env_settings"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWrapper.load_network", "home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWrapper.load_network", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWrapper.load_network", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "load_network", "(", "net_path", ",", "**", "kwargs", ")", ":", "\n", "    ", "\"\"\"Load network for tracking.\n    args:\n        net_path - Path to network. If it is not an absolute path, it is relative to the network_path in the local.py.\n                   See ltr.admin.loading.load_network for further details.\n        **kwargs - Additional key-word arguments that are sent to ltr.admin.loading.load_network.\n    \"\"\"", "\n", "kwargs", "[", "'backbone_pretrained'", "]", "=", "False", "\n", "if", "os", ".", "path", ".", "isabs", "(", "net_path", ")", ":", "\n", "        ", "path_full", "=", "net_path", "\n", "net", ",", "_", "=", "ltr_loading", ".", "load_network", "(", "path_full", ",", "**", "kwargs", ")", "\n", "", "elif", "isinstance", "(", "env_settings", "(", ")", ".", "network_path", ",", "(", "list", ",", "tuple", ")", ")", ":", "\n", "        ", "net", "=", "None", "\n", "for", "p", "in", "env_settings", "(", ")", ".", "network_path", ":", "\n", "            ", "path_full", "=", "os", ".", "path", ".", "join", "(", "p", ",", "net_path", ")", "\n", "try", ":", "\n", "                ", "net", ",", "_", "=", "ltr_loading", ".", "load_network", "(", "path_full", ",", "**", "kwargs", ")", "\n", "break", "\n", "", "except", "Exception", "as", "e", ":", "\n", "# print(e)", "\n", "                ", "pass", "\n", "\n", "", "", "assert", "net", "is", "not", "None", ",", "'Failed to load network'", "\n", "", "else", ":", "\n", "        ", "path_full", "=", "os", ".", "path", ".", "join", "(", "env_settings", "(", ")", ".", "network_path", ",", "net_path", ")", "\n", "net", ",", "_", "=", "ltr_loading", ".", "load_network", "(", "path_full", ",", "**", "kwargs", ")", "\n", "\n", "", "return", "net", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.utils.convert_vot_anno_to_rect.convert_vot_anno_to_rect": [[4, 38], ["len", "min", "max", "min", "max", "numpy.array", "numpy.mean", "numpy.mean", "min", "max", "min", "max", "numpy.sqrt", "len", "numpy.linalg.norm", "numpy.linalg.norm"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["def", "convert_vot_anno_to_rect", "(", "vot_anno", ",", "type", ")", ":", "\n", "    ", "if", "len", "(", "vot_anno", ")", "==", "4", ":", "\n", "        ", "return", "vot_anno", "\n", "\n", "", "if", "type", "==", "'union'", ":", "\n", "        ", "x1", "=", "min", "(", "vot_anno", "[", "0", ":", ":", "2", "]", ")", "\n", "x2", "=", "max", "(", "vot_anno", "[", "0", ":", ":", "2", "]", ")", "\n", "y1", "=", "min", "(", "vot_anno", "[", "1", ":", ":", "2", "]", ")", "\n", "y2", "=", "max", "(", "vot_anno", "[", "1", ":", ":", "2", "]", ")", "\n", "return", "[", "x1", ",", "y1", ",", "x2", "-", "x1", ",", "y2", "-", "y1", "]", "\n", "", "elif", "type", "==", "'preserve_area'", ":", "\n", "        ", "if", "len", "(", "vot_anno", ")", "!=", "8", ":", "\n", "            ", "raise", "ValueError", "\n", "\n", "", "vot_anno", "=", "np", ".", "array", "(", "vot_anno", ")", "\n", "cx", "=", "np", ".", "mean", "(", "vot_anno", "[", "0", ":", ":", "2", "]", ")", "\n", "cy", "=", "np", ".", "mean", "(", "vot_anno", "[", "1", ":", ":", "2", "]", ")", "\n", "\n", "x1", "=", "min", "(", "vot_anno", "[", "0", ":", ":", "2", "]", ")", "\n", "x2", "=", "max", "(", "vot_anno", "[", "0", ":", ":", "2", "]", ")", "\n", "y1", "=", "min", "(", "vot_anno", "[", "1", ":", ":", "2", "]", ")", "\n", "y2", "=", "max", "(", "vot_anno", "[", "1", ":", ":", "2", "]", ")", "\n", "\n", "A1", "=", "np", ".", "linalg", ".", "norm", "(", "vot_anno", "[", "0", ":", "2", "]", "-", "vot_anno", "[", "2", ":", "4", "]", ")", "*", "np", ".", "linalg", ".", "norm", "(", "vot_anno", "[", "2", ":", "4", "]", "-", "vot_anno", "[", "4", ":", "6", "]", ")", "\n", "A2", "=", "(", "x2", "-", "x1", ")", "*", "(", "y2", "-", "y1", ")", "\n", "s", "=", "np", ".", "sqrt", "(", "A1", "/", "A2", ")", "\n", "w", "=", "s", "*", "(", "x2", "-", "x1", ")", "+", "1", "\n", "h", "=", "s", "*", "(", "y2", "-", "y1", ")", "+", "1", "\n", "\n", "x", "=", "cx", "-", "0.5", "*", "w", "\n", "y", "=", "cy", "-", "0.5", "*", "h", "\n", "return", "[", "x", ",", "y", ",", "w", ",", "h", "]", "\n", "", "else", ":", "\n", "        ", "raise", "ValueError", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.stark_vot20.stark_vot20.__init__": [[20, 27], ["lib.test.evaluation.Tracker", "lib.test.evaluation.Tracker.get_parameters", "lib.test.evaluation.Tracker.create_tracker"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.get_parameters", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.create_tracker"], ["    ", "def", "__init__", "(", "self", ",", "tracker_name", "=", "'stark_st'", ",", "para_name", "=", "'baseline'", ")", ":", "\n", "# create tracker", "\n", "        ", "tracker_info", "=", "Tracker", "(", "tracker_name", ",", "para_name", ",", "\"vot20\"", ",", "None", ")", "\n", "params", "=", "tracker_info", ".", "get_parameters", "(", ")", "\n", "params", ".", "visualization", "=", "False", "\n", "params", ".", "debug", "=", "False", "\n", "self", ".", "tracker", "=", "tracker_info", ".", "create_tracker", "(", "params", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.stark_vot20.stark_vot20.initialize": [[28, 34], ["rect_from_mask", "stark_vot20.stark_vot20.tracker.initialize"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.pytracking.vot20_utils.rect_from_mask", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize"], ["", "def", "initialize", "(", "self", ",", "img_rgb", ",", "mask", ")", ":", "\n", "# init on the 1st frame", "\n", "        ", "region", "=", "rect_from_mask", "(", "mask", ")", "\n", "self", ".", "H", ",", "self", ".", "W", ",", "_", "=", "img_rgb", ".", "shape", "\n", "init_info", "=", "{", "'init_bbox'", ":", "region", "}", "\n", "_", "=", "self", ".", "tracker", ".", "initialize", "(", "img_rgb", ",", "init_info", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.stark_vot20.stark_vot20.track": [[35, 41], ["stark_vot20.stark_vot20.tracker.track", "mask_from_rect"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.track", "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.vot20_utils.mask_from_rect"], ["", "def", "track", "(", "self", ",", "img_rgb", ")", ":", "\n", "# track", "\n", "        ", "outputs", "=", "self", ".", "tracker", ".", "track", "(", "img_rgb", ")", "\n", "pred_bbox", "=", "outputs", "[", "'target_bbox'", "]", "\n", "final_mask", "=", "mask_from_rect", "(", "pred_bbox", ",", "(", "self", ".", "W", ",", "self", ".", "H", ")", ")", "\n", "return", "pred_bbox", ",", "final_mask", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.stark_vot20.run_vot_exp": [[43, 102], ["torch.set_num_threads", "os.path.join", "stark_vot20.stark_vot20", "vot.VOT", "vot.VOT.region", "vot.VOT.frame", "cv2.cvtColor", "make_full_size", "stark_vot20.initialize", "os.mkdir", "sys.exit", "os.path.join", "int", "os.path.join", "cv2.imread", "vot.VOT.frame", "cv2.cvtColor", "stark_vot20.track", "vot.VOT.report", "os.path.exists", "handle.frame.split", "os.path.exists", "os.mkdir", "str", "os.path.exists", "os.makedirs", "cv2.imread", "image[].copy", "os.path.join", "cv2.imwrite", "image[].copy.copy", "cv2.rectangle", "image_name.replace", "os.path.join", "cv2.imwrite", "image[].copy.copy().astype", "cv2.findContours", "cv2.drawContours", "image_m.clip().astype.clip().astype", "image_name.replace", "os.path.join", "cv2.imwrite", "time.time", "handle.frame.split", "int", "int", "int", "int", "image[].copy.copy", "image_m.clip().astype.clip"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.region", "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.frame", "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.vot20_utils.make_full_size", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize", "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.frame", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.track", "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.report", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy"], ["", "", "def", "run_vot_exp", "(", "tracker_name", ",", "para_name", ",", "vis", "=", "False", ")", ":", "\n", "\n", "    ", "torch", ".", "set_num_threads", "(", "1", ")", "\n", "save_root", "=", "os", ".", "path", ".", "join", "(", "'/data/sda/v-yanbi/iccv21/LittleBoy/vot20_debug'", ",", "para_name", ")", "\n", "if", "vis", "and", "(", "not", "os", ".", "path", ".", "exists", "(", "save_root", ")", ")", ":", "\n", "        ", "os", ".", "mkdir", "(", "save_root", ")", "\n", "", "tracker", "=", "stark_vot20", "(", "tracker_name", "=", "tracker_name", ",", "para_name", "=", "para_name", ")", "\n", "handle", "=", "vot", ".", "VOT", "(", "\"mask\"", ")", "\n", "selection", "=", "handle", ".", "region", "(", ")", "\n", "imagefile", "=", "handle", ".", "frame", "(", ")", "\n", "if", "not", "imagefile", ":", "\n", "        ", "sys", ".", "exit", "(", "0", ")", "\n", "", "if", "vis", ":", "\n", "        ", "'''for vis'''", "\n", "seq_name", "=", "imagefile", ".", "split", "(", "'/'", ")", "[", "-", "3", "]", "\n", "save_v_dir", "=", "os", ".", "path", ".", "join", "(", "save_root", ",", "seq_name", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "save_v_dir", ")", ":", "\n", "            ", "os", ".", "mkdir", "(", "save_v_dir", ")", "\n", "", "cur_time", "=", "int", "(", "time", ".", "time", "(", ")", "%", "10000", ")", "\n", "save_dir", "=", "os", ".", "path", ".", "join", "(", "save_v_dir", ",", "str", "(", "cur_time", ")", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "save_dir", ")", ":", "\n", "            ", "os", ".", "makedirs", "(", "save_dir", ")", "\n", "\n", "", "", "image", "=", "cv2", ".", "cvtColor", "(", "cv2", ".", "imread", "(", "imagefile", ")", ",", "cv2", ".", "COLOR_BGR2RGB", ")", "# Right", "\n", "# mask given by the toolkit ends with the target (zero-padding to the right and down is needed)", "\n", "mask", "=", "make_full_size", "(", "selection", ",", "(", "image", ".", "shape", "[", "1", "]", ",", "image", ".", "shape", "[", "0", "]", ")", ")", "\n", "tracker", ".", "initialize", "(", "image", ",", "mask", ")", "\n", "\n", "while", "True", ":", "\n", "        ", "imagefile", "=", "handle", ".", "frame", "(", ")", "\n", "if", "not", "imagefile", ":", "\n", "            ", "break", "\n", "", "image", "=", "cv2", ".", "cvtColor", "(", "cv2", ".", "imread", "(", "imagefile", ")", ",", "cv2", ".", "COLOR_BGR2RGB", ")", "# Right", "\n", "b1", ",", "m", "=", "tracker", ".", "track", "(", "image", ")", "\n", "handle", ".", "report", "(", "m", ")", "\n", "if", "vis", ":", "\n", "            ", "'''Visualization'''", "\n", "# original image", "\n", "image_ori", "=", "image", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", ".", "copy", "(", ")", "# RGB --> BGR", "\n", "image_name", "=", "imagefile", ".", "split", "(", "'/'", ")", "[", "-", "1", "]", "\n", "save_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "image_name", ")", "\n", "cv2", ".", "imwrite", "(", "save_path", ",", "image_ori", ")", "\n", "# tracker box", "\n", "image_b", "=", "image_ori", ".", "copy", "(", ")", "\n", "cv2", ".", "rectangle", "(", "image_b", ",", "(", "int", "(", "b1", "[", "0", "]", ")", ",", "int", "(", "b1", "[", "1", "]", ")", ")", ",", "\n", "(", "int", "(", "b1", "[", "0", "]", "+", "b1", "[", "2", "]", ")", ",", "int", "(", "b1", "[", "1", "]", "+", "b1", "[", "3", "]", ")", ")", ",", "(", "0", ",", "0", ",", "255", ")", ",", "2", ")", "\n", "image_b_name", "=", "image_name", ".", "replace", "(", "'.jpg'", ",", "'_bbox.jpg'", ")", "\n", "save_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "image_b_name", ")", "\n", "cv2", ".", "imwrite", "(", "save_path", ",", "image_b", ")", "\n", "# original image + mask", "\n", "image_m", "=", "image_ori", ".", "copy", "(", ")", ".", "astype", "(", "np", ".", "float32", ")", "\n", "image_m", "[", ":", ",", ":", ",", "1", "]", "+=", "127.0", "*", "m", "\n", "image_m", "[", ":", ",", ":", ",", "2", "]", "+=", "127.0", "*", "m", "\n", "contours", ",", "_", "=", "cv2", ".", "findContours", "(", "m", ",", "cv2", ".", "RETR_TREE", ",", "cv2", ".", "CHAIN_APPROX_SIMPLE", ")", "\n", "image_m", "=", "cv2", ".", "drawContours", "(", "image_m", ",", "contours", ",", "-", "1", ",", "(", "0", ",", "255", ",", "255", ")", ",", "2", ")", "\n", "image_m", "=", "image_m", ".", "clip", "(", "0", ",", "255", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "image_mask_name_m", "=", "image_name", ".", "replace", "(", "'.jpg'", ",", "'_mask.jpg'", ")", "\n", "save_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "image_mask_name_m", ")", "\n", "cv2", ".", "imwrite", "(", "save_path", ",", "image_m", ")", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.vot.VOT.__init__": [[24, 57], ["trax.Server", "vot.VOT._trax.wait", "isinstance", "vot.VOT._trax.status", "Polygon", "isinstance", "x.path", "len", "dict", "vot.VOT.region.array", "Rectangle", "vot.VOT.image.items", "Point", "Exception", "vot.VOT.region.bounds"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "region_format", ",", "channels", "=", "None", ")", ":", "\n", "        ", "\"\"\" Constructor\n        Args:\n            region_format: Region format options\n        \"\"\"", "\n", "assert", "(", "region_format", "in", "[", "trax", ".", "Region", ".", "RECTANGLE", ",", "trax", ".", "Region", ".", "POLYGON", ",", "trax", ".", "Region", ".", "MASK", "]", ")", "\n", "\n", "if", "channels", "is", "None", ":", "\n", "            ", "channels", "=", "[", "'color'", "]", "\n", "", "elif", "channels", "==", "'rgbd'", ":", "\n", "            ", "channels", "=", "[", "'color'", ",", "'depth'", "]", "\n", "", "elif", "channels", "==", "'rgbt'", ":", "\n", "            ", "channels", "=", "[", "'color'", ",", "'ir'", "]", "\n", "", "elif", "channels", "==", "'ir'", ":", "\n", "            ", "channels", "=", "[", "'ir'", "]", "\n", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "'Illegal configuration {}.'", ".", "format", "(", "channels", ")", ")", "\n", "\n", "", "self", ".", "_trax", "=", "trax", ".", "Server", "(", "[", "region_format", "]", ",", "[", "trax", ".", "Image", ".", "PATH", "]", ",", "channels", ",", "customMetadata", "=", "dict", "(", "vot", "=", "\"python\"", ")", ")", "\n", "\n", "request", "=", "self", ".", "_trax", ".", "wait", "(", ")", "\n", "assert", "(", "request", ".", "type", "==", "'initialize'", ")", "\n", "if", "isinstance", "(", "request", ".", "region", ",", "trax", ".", "Polygon", ")", ":", "\n", "            ", "self", ".", "_region", "=", "Polygon", "(", "[", "Point", "(", "x", "[", "0", "]", ",", "x", "[", "1", "]", ")", "for", "x", "in", "request", ".", "region", "]", ")", "\n", "", "elif", "isinstance", "(", "request", ".", "region", ",", "trax", ".", "Mask", ")", ":", "\n", "            ", "self", ".", "_region", "=", "request", ".", "region", ".", "array", "(", "True", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "_region", "=", "Rectangle", "(", "*", "request", ".", "region", ".", "bounds", "(", ")", ")", "\n", "", "self", ".", "_image", "=", "[", "x", ".", "path", "(", ")", "for", "k", ",", "x", "in", "request", ".", "image", ".", "items", "(", ")", "]", "\n", "if", "len", "(", "self", ".", "_image", ")", "==", "1", ":", "\n", "            ", "self", ".", "_image", "=", "self", ".", "_image", "[", "0", "]", "\n", "\n", "", "self", ".", "_trax", ".", "status", "(", "request", ".", "region", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.vot.VOT.region": [[58, 67], ["None"], "methods", ["None"], ["", "def", "region", "(", "self", ")", ":", "\n", "        ", "\"\"\"\n        Send configuration message to the client and receive the initialization\n        region and the path of the first image\n        Returns:\n            initialization region\n        \"\"\"", "\n", "\n", "return", "self", ".", "_region", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.vot.VOT.report": [[68, 85], ["isinstance", "isinstance", "vot.VOT._trax.status", "trax.Polygon.create", "isinstance", "trax.Mask.create", "trax.Rectangle.create"], "methods", ["None"], ["", "def", "report", "(", "self", ",", "region", ",", "confidence", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        Report the tracking results to the client\n        Arguments:\n            region: region for the frame\n        \"\"\"", "\n", "assert", "(", "isinstance", "(", "region", ",", "(", "Rectangle", ",", "Polygon", ",", "np", ".", "ndarray", ")", ")", ")", "\n", "if", "isinstance", "(", "region", ",", "Polygon", ")", ":", "\n", "            ", "tregion", "=", "trax", ".", "Polygon", ".", "create", "(", "[", "(", "x", ".", "x", ",", "x", ".", "y", ")", "for", "x", "in", "region", ".", "points", "]", ")", "\n", "", "elif", "isinstance", "(", "region", ",", "np", ".", "ndarray", ")", ":", "\n", "            ", "tregion", "=", "trax", ".", "Mask", ".", "create", "(", "region", ")", "\n", "", "else", ":", "\n", "            ", "tregion", "=", "trax", ".", "Rectangle", ".", "create", "(", "region", ".", "x", ",", "region", ".", "y", ",", "region", ".", "width", ",", "region", ".", "height", ")", "\n", "", "properties", "=", "{", "}", "\n", "if", "not", "confidence", "is", "None", ":", "\n", "            ", "properties", "[", "'confidence'", "]", "=", "confidence", "\n", "", "self", ".", "_trax", ".", "status", "(", "tregion", ",", "properties", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.vot.VOT.frame": [[86, 106], ["hasattr", "vot.VOT._trax.wait", "x.path", "len", "vot.VOT.image.items"], "methods", ["None"], ["", "def", "frame", "(", "self", ")", ":", "\n", "        ", "\"\"\"\n        Get a frame (image path) from client\n        Returns:\n            absolute path of the image\n        \"\"\"", "\n", "if", "hasattr", "(", "self", ",", "\"_image\"", ")", ":", "\n", "            ", "image", "=", "self", ".", "_image", "\n", "del", "self", ".", "_image", "\n", "return", "image", "\n", "\n", "", "request", "=", "self", ".", "_trax", ".", "wait", "(", ")", "\n", "\n", "if", "request", ".", "type", "==", "'frame'", ":", "\n", "            ", "image", "=", "[", "x", ".", "path", "(", ")", "for", "k", ",", "x", "in", "request", ".", "image", ".", "items", "(", ")", "]", "\n", "if", "len", "(", "image", ")", "==", "1", ":", "\n", "                ", "return", "image", "[", "0", "]", "\n", "", "return", "image", "\n", "", "else", ":", "\n", "            ", "return", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.vot.VOT.quit": [[108, 111], ["hasattr", "vot.VOT._trax.quit"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.quit"], ["", "", "def", "quit", "(", "self", ")", ":", "\n", "        ", "if", "hasattr", "(", "self", ",", "'_trax'", ")", ":", "\n", "            ", "self", ".", "_trax", ".", "quit", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.vot.VOT.__del__": [[112, 114], ["vot.VOT.quit"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.quit"], ["", "", "def", "__del__", "(", "self", ")", ":", "\n", "        ", "self", ".", "quit", "(", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.stark_vot20lt.stark_vot20_lt.__init__": [[20, 27], ["lib.test.evaluation.Tracker", "lib.test.evaluation.Tracker.get_parameters", "lib.test.evaluation.Tracker.create_tracker"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.get_parameters", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.create_tracker"], ["    ", "def", "__init__", "(", "self", ",", "tracker_name", "=", "'stark_st'", ",", "para_name", "=", "'baseline'", ")", ":", "\n", "# create tracker", "\n", "        ", "tracker_info", "=", "Tracker", "(", "tracker_name", ",", "para_name", ",", "\"vot20lt\"", ",", "None", ")", "\n", "params", "=", "tracker_info", ".", "get_parameters", "(", ")", "\n", "params", ".", "visualization", "=", "False", "\n", "params", ".", "debug", "=", "False", "\n", "self", ".", "tracker", "=", "tracker_info", ".", "create_tracker", "(", "params", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.stark_vot20lt.stark_vot20_lt.initialize": [[28, 33], ["stark_vot20lt.stark_vot20_lt.tracker.initialize"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize"], ["", "def", "initialize", "(", "self", ",", "img_rgb", ",", "box", ")", ":", "\n", "# init on the 1st frame", "\n", "        ", "self", ".", "H", ",", "self", ".", "W", ",", "_", "=", "img_rgb", ".", "shape", "\n", "init_info", "=", "{", "'init_bbox'", ":", "box", "}", "\n", "_", "=", "self", ".", "tracker", ".", "initialize", "(", "img_rgb", ",", "init_info", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.stark_vot20lt.stark_vot20_lt.track": [[34, 40], ["stark_vot20lt.stark_vot20_lt.tracker.track"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.track"], ["", "def", "track", "(", "self", ",", "img_rgb", ")", ":", "\n", "# track", "\n", "        ", "outputs", "=", "self", ".", "tracker", ".", "track", "(", "img_rgb", ")", "\n", "pred_bbox", "=", "outputs", "[", "'target_bbox'", "]", "\n", "conf_score", "=", "outputs", "[", "\"conf_score\"", "]", "\n", "return", "pred_bbox", ",", "conf_score", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.stark_vot20lt.run_vot_exp": [[42, 91], ["torch.set_num_threads", "os.path.join", "stark_vot20lt.stark_vot20_lt", "vot.VOT", "vot.VOT.region", "vot.VOT.frame", "cv2.cvtColor", "stark_vot20lt.stark_vot20_lt.initialize", "os.makedirs", "sys.exit", "os.path.join", "int", "os.path.join", "cv2.imread", "vot.VOT.frame", "cv2.cvtColor", "stark_vot20lt.stark_vot20_lt.track", "vot.VOT.report", "os.path.exists", "handle.frame.split", "os.path.exists", "os.mkdir", "str", "os.path.exists", "os.makedirs", "cv2.imread", "vot.Rectangle", "image[].copy", "os.path.join", "cv2.imwrite", "image[].copy.copy", "cv2.rectangle", "image_name.replace", "os.path.join", "cv2.imwrite", "time.time", "handle.frame.split", "int", "int", "int", "int"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.region", "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.frame", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize", "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.frame", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.track", "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.report", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy"], ["", "", "def", "run_vot_exp", "(", "tracker_name", ",", "para_name", ",", "vis", "=", "False", ")", ":", "\n", "\n", "    ", "torch", ".", "set_num_threads", "(", "1", ")", "\n", "save_root", "=", "os", ".", "path", ".", "join", "(", "'/data/sda/v-yanbi/iccv21/LittleBoy/vot20_lt_debug'", ",", "para_name", ")", "\n", "if", "vis", "and", "(", "not", "os", ".", "path", ".", "exists", "(", "save_root", ")", ")", ":", "\n", "        ", "os", ".", "makedirs", "(", "save_root", ")", "\n", "", "tracker", "=", "stark_vot20_lt", "(", "tracker_name", "=", "tracker_name", ",", "para_name", "=", "para_name", ")", "\n", "handle", "=", "vot", ".", "VOT", "(", "\"rectangle\"", ")", "\n", "selection", "=", "handle", ".", "region", "(", ")", "\n", "imagefile", "=", "handle", ".", "frame", "(", ")", "\n", "init_box", "=", "[", "selection", ".", "x", ",", "selection", ".", "y", ",", "selection", ".", "width", ",", "selection", ".", "height", "]", "\n", "if", "not", "imagefile", ":", "\n", "        ", "sys", ".", "exit", "(", "0", ")", "\n", "", "if", "vis", ":", "\n", "        ", "'''for vis'''", "\n", "seq_name", "=", "imagefile", ".", "split", "(", "'/'", ")", "[", "-", "3", "]", "\n", "save_v_dir", "=", "os", ".", "path", ".", "join", "(", "save_root", ",", "seq_name", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "save_v_dir", ")", ":", "\n", "            ", "os", ".", "mkdir", "(", "save_v_dir", ")", "\n", "", "cur_time", "=", "int", "(", "time", ".", "time", "(", ")", "%", "10000", ")", "\n", "save_dir", "=", "os", ".", "path", ".", "join", "(", "save_v_dir", ",", "str", "(", "cur_time", ")", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "save_dir", ")", ":", "\n", "            ", "os", ".", "makedirs", "(", "save_dir", ")", "\n", "\n", "", "", "image", "=", "cv2", ".", "cvtColor", "(", "cv2", ".", "imread", "(", "imagefile", ")", ",", "cv2", ".", "COLOR_BGR2RGB", ")", "# Right", "\n", "tracker", ".", "initialize", "(", "image", ",", "init_box", ")", "\n", "\n", "while", "True", ":", "\n", "        ", "imagefile", "=", "handle", ".", "frame", "(", ")", "\n", "if", "not", "imagefile", ":", "\n", "            ", "break", "\n", "", "image", "=", "cv2", ".", "cvtColor", "(", "cv2", ".", "imread", "(", "imagefile", ")", ",", "cv2", ".", "COLOR_BGR2RGB", ")", "# Right", "\n", "b1", ",", "conf", "=", "tracker", ".", "track", "(", "image", ")", "\n", "x1", ",", "y1", ",", "w", ",", "h", "=", "b1", "\n", "handle", ".", "report", "(", "vot", ".", "Rectangle", "(", "x1", ",", "y1", ",", "w", ",", "h", ")", ",", "conf", ")", "\n", "if", "vis", ":", "\n", "            ", "'''Visualization'''", "\n", "# original image", "\n", "image_ori", "=", "image", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", ".", "copy", "(", ")", "# RGB --> BGR", "\n", "image_name", "=", "imagefile", ".", "split", "(", "'/'", ")", "[", "-", "1", "]", "\n", "save_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "image_name", ")", "\n", "cv2", ".", "imwrite", "(", "save_path", ",", "image_ori", ")", "\n", "# tracker box", "\n", "image_b", "=", "image_ori", ".", "copy", "(", ")", "\n", "cv2", ".", "rectangle", "(", "image_b", ",", "(", "int", "(", "b1", "[", "0", "]", ")", ",", "int", "(", "b1", "[", "1", "]", ")", ")", ",", "\n", "(", "int", "(", "b1", "[", "0", "]", "+", "b1", "[", "2", "]", ")", ",", "int", "(", "b1", "[", "1", "]", "+", "b1", "[", "3", "]", ")", ")", ",", "(", "0", ",", "0", ",", "255", ")", ",", "2", ")", "\n", "image_b_name", "=", "image_name", ".", "replace", "(", "'.jpg'", ",", "'_bbox.jpg'", ")", "\n", "save_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "image_b_name", ")", "\n", "cv2", ".", "imwrite", "(", "save_path", ",", "image_b", ")", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.vot20_utils.make_full_size": [[4, 23], ["numpy.pad"], "function", ["None"], ["def", "make_full_size", "(", "x", ",", "output_sz", ")", ":", "\n", "    ", "\"\"\"\n    zero-pad input x (right and down) to match output_sz\n    x: numpy array e.g., binary mask\n    output_sz: size of the output [width, height]\n    \"\"\"", "\n", "if", "x", ".", "shape", "[", "0", "]", "==", "output_sz", "[", "1", "]", "and", "x", ".", "shape", "[", "1", "]", "==", "output_sz", "[", "0", "]", ":", "\n", "        ", "return", "x", "\n", "", "pad_x", "=", "output_sz", "[", "0", "]", "-", "x", ".", "shape", "[", "1", "]", "\n", "if", "pad_x", "<", "0", ":", "\n", "        ", "x", "=", "x", "[", ":", ",", ":", "x", ".", "shape", "[", "1", "]", "+", "pad_x", "]", "\n", "# padding has to be set to zero, otherwise pad function fails", "\n", "pad_x", "=", "0", "\n", "", "pad_y", "=", "output_sz", "[", "1", "]", "-", "x", ".", "shape", "[", "0", "]", "\n", "if", "pad_y", "<", "0", ":", "\n", "        ", "x", "=", "x", "[", ":", "x", ".", "shape", "[", "0", "]", "+", "pad_y", ",", ":", "]", "\n", "# padding has to be set to zero, otherwise pad function fails", "\n", "pad_y", "=", "0", "\n", "", "return", "np", ".", "pad", "(", "x", ",", "(", "(", "0", ",", "pad_y", ")", ",", "(", "0", ",", "pad_x", ")", ")", ",", "'constant'", ",", "constant_values", "=", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.vot20_utils.rect_from_mask": [[25, 37], ["numpy.sum", "numpy.sum", "numpy.min", "numpy.max", "numpy.min", "numpy.max", "numpy.nonzero", "numpy.nonzero", "numpy.nonzero", "numpy.nonzero"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "rect_from_mask", "(", "mask", ")", ":", "\n", "    ", "\"\"\"\n    create an axis-aligned rectangle from a given binary mask\n    mask in created as a minimal rectangle containing all non-zero pixels\n    \"\"\"", "\n", "x_", "=", "np", ".", "sum", "(", "mask", ",", "axis", "=", "0", ")", "\n", "y_", "=", "np", ".", "sum", "(", "mask", ",", "axis", "=", "1", ")", "\n", "x0", "=", "np", ".", "min", "(", "np", ".", "nonzero", "(", "x_", ")", ")", "\n", "x1", "=", "np", ".", "max", "(", "np", ".", "nonzero", "(", "x_", ")", ")", "\n", "y0", "=", "np", ".", "min", "(", "np", ".", "nonzero", "(", "y_", ")", ")", "\n", "y1", "=", "np", ".", "max", "(", "np", ".", "nonzero", "(", "y_", ")", ")", "\n", "return", "[", "x0", ",", "y0", ",", "x1", "-", "x0", "+", "1", ",", "y1", "-", "y0", "+", "1", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.vot20_utils.mask_from_rect": [[39, 52], ["numpy.zeros", "max", "max", "min", "min", "int", "int", "int", "int", "round", "round", "round", "round"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "mask_from_rect", "(", "rect", ",", "output_sz", ")", ":", "\n", "    ", "\"\"\"\n    create a binary mask from a given rectangle\n    rect: axis-aligned rectangle [x0, y0, width, height]\n    output_sz: size of the output [width, height]\n    \"\"\"", "\n", "mask", "=", "np", ".", "zeros", "(", "(", "output_sz", "[", "1", "]", ",", "output_sz", "[", "0", "]", ")", ",", "dtype", "=", "np", ".", "uint8", ")", "\n", "x0", "=", "max", "(", "int", "(", "round", "(", "rect", "[", "0", "]", ")", ")", ",", "0", ")", "\n", "y0", "=", "max", "(", "int", "(", "round", "(", "rect", "[", "1", "]", ")", ")", ",", "0", ")", "\n", "x1", "=", "min", "(", "int", "(", "round", "(", "rect", "[", "0", "]", "+", "rect", "[", "2", "]", ")", ")", ",", "output_sz", "[", "0", "]", ")", "\n", "y1", "=", "min", "(", "int", "(", "round", "(", "rect", "[", "1", "]", "+", "rect", "[", "3", "]", ")", ")", ",", "output_sz", "[", "1", "]", ")", "\n", "mask", "[", "y0", ":", "y1", ",", "x0", ":", "x1", "]", "=", "1", "\n", "return", "mask", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.vot20.vot20_utils.bbox_clip": [[54, 61], ["max", "max", "max", "max", "min", "min", "min", "min"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "bbox_clip", "(", "x1", ",", "y1", ",", "x2", ",", "y2", ",", "boundary", ",", "min_sz", "=", "10", ")", ":", "\n", "    ", "\"\"\"boundary (H,W)\"\"\"", "\n", "x1_new", "=", "max", "(", "0", ",", "min", "(", "x1", ",", "boundary", "[", "1", "]", "-", "min_sz", ")", ")", "\n", "y1_new", "=", "max", "(", "0", ",", "min", "(", "y1", ",", "boundary", "[", "0", "]", "-", "min_sz", ")", ")", "\n", "x2_new", "=", "max", "(", "min_sz", ",", "min", "(", "x2", ",", "boundary", "[", "1", "]", ")", ")", "\n", "y2_new", "=", "max", "(", "min_sz", ",", "min", "(", "y2", ",", "boundary", "[", "0", "]", ")", ")", "\n", "return", "x1_new", ",", "y1_new", ",", "x2_new", ",", "y2_new", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.parameter.stark_s.parameters": [[7, 31], ["lib.test.utils.TrackerParams", "os.path.join", "lib.config.stark_s.config.update_config_from_file", "print", "os.path.join", "lib.test.evaluation.environment.env_settings", "lib.test.evaluation.environment.env_settings"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config.update_config_from_file", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "parameters", "(", "yaml_name", ":", "str", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "prj_dir", "=", "env_settings", "(", ")", ".", "prj_dir", "\n", "save_dir", "=", "env_settings", "(", ")", ".", "save_dir", "\n", "# update default config from yaml file", "\n", "yaml_file", "=", "os", ".", "path", ".", "join", "(", "prj_dir", ",", "'experiments/stark_s/%s.yaml'", "%", "yaml_name", ")", "\n", "update_config_from_file", "(", "yaml_file", ")", "\n", "params", ".", "cfg", "=", "cfg", "\n", "print", "(", "\"test config: \"", ",", "cfg", ")", "\n", "\n", "# template and search region", "\n", "params", ".", "template_factor", "=", "cfg", ".", "TEST", ".", "TEMPLATE_FACTOR", "\n", "params", ".", "template_size", "=", "cfg", ".", "TEST", ".", "TEMPLATE_SIZE", "\n", "params", ".", "search_factor", "=", "cfg", ".", "TEST", ".", "SEARCH_FACTOR", "\n", "params", ".", "search_size", "=", "cfg", ".", "TEST", ".", "SEARCH_SIZE", "\n", "\n", "# Network checkpoint path", "\n", "params", ".", "checkpoint", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "\"checkpoints/train/stark_s/%s/STARKS_ep%04d.pth.tar\"", "%", "\n", "(", "yaml_name", ",", "cfg", ".", "TEST", ".", "EPOCH", ")", ")", "\n", "\n", "# whether to save boxes from all queries", "\n", "params", ".", "save_all_boxes", "=", "False", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.parameter.stark_st.parameters": [[7, 31], ["lib.test.utils.TrackerParams", "os.path.join", "lib.config.stark_st2.config.update_config_from_file", "print", "os.path.join", "lib.test.evaluation.environment.env_settings", "lib.test.evaluation.environment.env_settings"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config.update_config_from_file", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "parameters", "(", "yaml_name", ":", "str", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "prj_dir", "=", "env_settings", "(", ")", ".", "prj_dir", "\n", "save_dir", "=", "env_settings", "(", ")", ".", "save_dir", "\n", "# update default config from yaml file", "\n", "yaml_file", "=", "os", ".", "path", ".", "join", "(", "prj_dir", ",", "'experiments/stark_st2/%s.yaml'", "%", "yaml_name", ")", "\n", "update_config_from_file", "(", "yaml_file", ")", "\n", "params", ".", "cfg", "=", "cfg", "\n", "print", "(", "\"test config: \"", ",", "cfg", ")", "\n", "\n", "# template and search region", "\n", "params", ".", "template_factor", "=", "cfg", ".", "TEST", ".", "TEMPLATE_FACTOR", "\n", "params", ".", "template_size", "=", "cfg", ".", "TEST", ".", "TEMPLATE_SIZE", "\n", "params", ".", "search_factor", "=", "cfg", ".", "TEST", ".", "SEARCH_FACTOR", "\n", "params", ".", "search_size", "=", "cfg", ".", "TEST", ".", "SEARCH_SIZE", "\n", "\n", "# Network checkpoint path", "\n", "params", ".", "checkpoint", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "\"checkpoints/train/stark_st2/%s/STARKST_ep%04d.pth.tar\"", "%", "\n", "(", "yaml_name", ",", "cfg", ".", "TEST", ".", "EPOCH", ")", ")", "\n", "\n", "# whether to save boxes from all queries", "\n", "params", ".", "save_all_boxes", "=", "False", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.parameter.stark_lightning_X_trt.parameters": [[7, 30], ["lib.test.utils.TrackerParams", "os.path.join", "lib.config.stark_lightning_X_trt.config.update_config_from_file", "print", "os.path.join", "lib.test.evaluation.environment.env_settings", "lib.test.evaluation.environment.env_settings"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config.update_config_from_file", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "parameters", "(", "yaml_name", ":", "str", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "prj_dir", "=", "env_settings", "(", ")", ".", "prj_dir", "\n", "save_dir", "=", "env_settings", "(", ")", ".", "save_dir", "\n", "# update default config from yaml file", "\n", "yaml_file", "=", "os", ".", "path", ".", "join", "(", "prj_dir", ",", "'experiments/stark_lightning_X_trt/%s.yaml'", "%", "yaml_name", ")", "\n", "update_config_from_file", "(", "yaml_file", ")", "\n", "params", ".", "cfg", "=", "cfg", "\n", "print", "(", "\"test config: \"", ",", "cfg", ")", "\n", "\n", "# template and search region", "\n", "params", ".", "template_factor", "=", "cfg", ".", "TEST", ".", "TEMPLATE_FACTOR", "\n", "params", ".", "template_size", "=", "cfg", ".", "TEST", ".", "TEMPLATE_SIZE", "\n", "params", ".", "search_factor", "=", "cfg", ".", "TEST", ".", "SEARCH_FACTOR", "\n", "params", ".", "search_size", "=", "cfg", ".", "TEST", ".", "SEARCH_SIZE", "\n", "\n", "# Network checkpoint path", "\n", "params", ".", "checkpoint", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "\n", "\"checkpoints/train/stark_lightning_X_trt/%s/STARKLightningXtrt_ep%04d.pth.tar\"", "%", "\n", "(", "yaml_name", ",", "cfg", ".", "TEST", ".", "EPOCH", ")", ")", "\n", "# whether to save boxes from all queries", "\n", "params", ".", "save_all_boxes", "=", "False", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.get_plot_draw_styles": [[12, 32], ["None"], "function", ["None"], ["def", "get_plot_draw_styles", "(", ")", ":", "\n", "    ", "plot_draw_style", "=", "[", "{", "'color'", ":", "(", "1.0", ",", "0.0", ",", "0.0", ")", ",", "'line_style'", ":", "'-'", "}", ",", "\n", "{", "'color'", ":", "(", "0.0", ",", "1.0", ",", "0.0", ")", ",", "'line_style'", ":", "'-'", "}", ",", "\n", "{", "'color'", ":", "(", "0.0", ",", "0.0", ",", "1.0", ")", ",", "'line_style'", ":", "'-'", "}", ",", "\n", "{", "'color'", ":", "(", "0.0", ",", "0.0", ",", "0.0", ")", ",", "'line_style'", ":", "'-'", "}", ",", "\n", "{", "'color'", ":", "(", "1.0", ",", "0.0", ",", "1.0", ")", ",", "'line_style'", ":", "'-'", "}", ",", "\n", "{", "'color'", ":", "(", "0.0", ",", "1.0", ",", "1.0", ")", ",", "'line_style'", ":", "'-'", "}", ",", "\n", "{", "'color'", ":", "(", "0.5", ",", "0.5", ",", "0.5", ")", ",", "'line_style'", ":", "'-'", "}", ",", "\n", "{", "'color'", ":", "(", "136.0", "/", "255.0", ",", "0.0", ",", "21.0", "/", "255.0", ")", ",", "'line_style'", ":", "'-'", "}", ",", "\n", "{", "'color'", ":", "(", "1.0", ",", "127.0", "/", "255.0", ",", "39.0", "/", "255.0", ")", ",", "'line_style'", ":", "'-'", "}", ",", "\n", "{", "'color'", ":", "(", "0.0", ",", "162.0", "/", "255.0", ",", "232.0", "/", "255.0", ")", ",", "'line_style'", ":", "'-'", "}", ",", "\n", "{", "'color'", ":", "(", "0.0", ",", "0.5", ",", "0.0", ")", ",", "'line_style'", ":", "'-'", "}", ",", "\n", "{", "'color'", ":", "(", "1.0", ",", "0.5", ",", "0.2", ")", ",", "'line_style'", ":", "'-'", "}", ",", "\n", "{", "'color'", ":", "(", "0.1", ",", "0.4", ",", "0.0", ")", ",", "'line_style'", ":", "'-'", "}", ",", "\n", "{", "'color'", ":", "(", "0.6", ",", "0.3", ",", "0.9", ")", ",", "'line_style'", ":", "'-'", "}", ",", "\n", "{", "'color'", ":", "(", "0.4", ",", "0.7", ",", "0.1", ")", ",", "'line_style'", ":", "'-'", "}", ",", "\n", "{", "'color'", ":", "(", "0.2", ",", "0.1", ",", "0.7", ")", ",", "'line_style'", ":", "'-'", "}", ",", "\n", "{", "'color'", ":", "(", "0.7", ",", "0.6", ",", "0.2", ")", ",", "'line_style'", ":", "'-'", "}", "]", "\n", "\n", "return", "plot_draw_style", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.check_eval_data_is_valid": [[34, 43], ["None"], "function", ["None"], ["", "def", "check_eval_data_is_valid", "(", "eval_data", ",", "trackers", ",", "dataset", ")", ":", "\n", "    ", "\"\"\" Checks if the pre-computed results are valid\"\"\"", "\n", "seq_names", "=", "[", "s", ".", "name", "for", "s", "in", "dataset", "]", "\n", "seq_names_saved", "=", "eval_data", "[", "'sequences'", "]", "\n", "\n", "tracker_names_f", "=", "[", "(", "t", ".", "name", ",", "t", ".", "parameter_name", ",", "t", ".", "run_id", ")", "for", "t", "in", "trackers", "]", "\n", "tracker_names_f_saved", "=", "[", "(", "t", "[", "'name'", "]", ",", "t", "[", "'param'", "]", ",", "t", "[", "'run_id'", "]", ")", "for", "t", "in", "eval_data", "[", "'trackers'", "]", "]", "\n", "\n", "return", "seq_names", "==", "seq_names_saved", "and", "tracker_names_f", "==", "tracker_names_f_saved", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.merge_multiple_runs": [[45, 87], ["torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.zeros", "range", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack.tolist", "torch.stack.tolist", "torch.stack.tolist", "torch.stack.tolist", "len", "len", "new_tracker_names.append", "torch.tensor", "torch.stack.append", "torch.stack.append", "torch.stack.append", "torch.stack.append", "ave_success_rate_plot_overlap[].mean", "ave_success_rate_plot_center[].mean", "ave_success_rate_plot_center_norm[].mean", "avg_overlap_all[].mean"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], ["", "def", "merge_multiple_runs", "(", "eval_data", ")", ":", "\n", "    ", "new_tracker_names", "=", "[", "]", "\n", "ave_success_rate_plot_overlap_merged", "=", "[", "]", "\n", "ave_success_rate_plot_center_merged", "=", "[", "]", "\n", "ave_success_rate_plot_center_norm_merged", "=", "[", "]", "\n", "avg_overlap_all_merged", "=", "[", "]", "\n", "\n", "ave_success_rate_plot_overlap", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'ave_success_rate_plot_overlap'", "]", ")", "\n", "ave_success_rate_plot_center", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'ave_success_rate_plot_center'", "]", ")", "\n", "ave_success_rate_plot_center_norm", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'ave_success_rate_plot_center_norm'", "]", ")", "\n", "avg_overlap_all", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'avg_overlap_all'", "]", ")", "\n", "\n", "trackers", "=", "eval_data", "[", "'trackers'", "]", "\n", "merged", "=", "torch", ".", "zeros", "(", "len", "(", "trackers", ")", ",", "dtype", "=", "torch", ".", "uint8", ")", "\n", "for", "i", "in", "range", "(", "len", "(", "trackers", ")", ")", ":", "\n", "        ", "if", "merged", "[", "i", "]", ":", "\n", "            ", "continue", "\n", "", "base_tracker", "=", "trackers", "[", "i", "]", "\n", "new_tracker_names", ".", "append", "(", "base_tracker", ")", "\n", "\n", "match", "=", "[", "t", "[", "'name'", "]", "==", "base_tracker", "[", "'name'", "]", "and", "t", "[", "'param'", "]", "==", "base_tracker", "[", "'param'", "]", "for", "t", "in", "trackers", "]", "\n", "match", "=", "torch", ".", "tensor", "(", "match", ")", "\n", "\n", "ave_success_rate_plot_overlap_merged", ".", "append", "(", "ave_success_rate_plot_overlap", "[", ":", ",", "match", ",", ":", "]", ".", "mean", "(", "1", ")", ")", "\n", "ave_success_rate_plot_center_merged", ".", "append", "(", "ave_success_rate_plot_center", "[", ":", ",", "match", ",", ":", "]", ".", "mean", "(", "1", ")", ")", "\n", "ave_success_rate_plot_center_norm_merged", ".", "append", "(", "ave_success_rate_plot_center_norm", "[", ":", ",", "match", ",", ":", "]", ".", "mean", "(", "1", ")", ")", "\n", "avg_overlap_all_merged", ".", "append", "(", "avg_overlap_all", "[", ":", ",", "match", "]", ".", "mean", "(", "1", ")", ")", "\n", "\n", "merged", "[", "match", "]", "=", "1", "\n", "\n", "", "ave_success_rate_plot_overlap_merged", "=", "torch", ".", "stack", "(", "ave_success_rate_plot_overlap_merged", ",", "dim", "=", "1", ")", "\n", "ave_success_rate_plot_center_merged", "=", "torch", ".", "stack", "(", "ave_success_rate_plot_center_merged", ",", "dim", "=", "1", ")", "\n", "ave_success_rate_plot_center_norm_merged", "=", "torch", ".", "stack", "(", "ave_success_rate_plot_center_norm_merged", ",", "dim", "=", "1", ")", "\n", "avg_overlap_all_merged", "=", "torch", ".", "stack", "(", "avg_overlap_all_merged", ",", "dim", "=", "1", ")", "\n", "\n", "eval_data", "[", "'trackers'", "]", "=", "new_tracker_names", "\n", "eval_data", "[", "'ave_success_rate_plot_overlap'", "]", "=", "ave_success_rate_plot_overlap_merged", ".", "tolist", "(", ")", "\n", "eval_data", "[", "'ave_success_rate_plot_center'", "]", "=", "ave_success_rate_plot_center_merged", ".", "tolist", "(", ")", "\n", "eval_data", "[", "'ave_success_rate_plot_center_norm'", "]", "=", "ave_success_rate_plot_center_norm_merged", ".", "tolist", "(", ")", "\n", "eval_data", "[", "'avg_overlap_all'", "]", "=", "avg_overlap_all_merged", ".", "tolist", "(", ")", "\n", "\n", "return", "eval_data", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.get_tracker_display_name": [[89, 100], ["None"], "function", ["None"], ["", "def", "get_tracker_display_name", "(", "tracker", ")", ":", "\n", "    ", "if", "tracker", "[", "'disp_name'", "]", "is", "None", ":", "\n", "        ", "if", "tracker", "[", "'run_id'", "]", "is", "None", ":", "\n", "            ", "disp_name", "=", "'{}_{}'", ".", "format", "(", "tracker", "[", "'name'", "]", ",", "tracker", "[", "'param'", "]", ")", "\n", "", "else", ":", "\n", "            ", "disp_name", "=", "'{}_{}_{:03d}'", ".", "format", "(", "tracker", "[", "'name'", "]", ",", "tracker", "[", "'param'", "]", ",", "\n", "tracker", "[", "'run_id'", "]", ")", "\n", "", "", "else", ":", "\n", "        ", "disp_name", "=", "tracker", "[", "'disp_name'", "]", "\n", "\n", "", "return", "disp_name", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.plot_draw_save": [[102, 158], ["plot_opts.get", "plot_opts.get", "plot_opts.get", "plot_opts.get", "matplotlib.rcParams.update", "matplotlib.rcParams.update", "matplotlib.rcParams.update", "matplotlib.rcParams.update", "matplotlib.rcParams.update", "matplotlib.rcParams.update", "matplotlib.rcParams.update", "matplotlib.rcParams.update", "matplotlib.subplots", "scores.argsort", "enumerate", "ax.legend", "ax.set", "ax.grid", "fig.tight_layout", "tikzplotlib.save", "fig.savefig", "matplotlib.draw", "ax.plot", "plotted_lines.append", "plot_results.get_tracker_display_name", "legend_text.append", "x.tolist", "y[].tolist", "scores.argsort.numel", "scores.argsort.numel"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.save", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.get_tracker_display_name"], ["", "def", "plot_draw_save", "(", "y", ",", "x", ",", "scores", ",", "trackers", ",", "plot_draw_styles", ",", "result_plot_path", ",", "plot_opts", ")", ":", "\n", "    ", "plt", ".", "rcParams", "[", "'text.usetex'", "]", "=", "True", "\n", "plt", ".", "rcParams", "[", "\"font.family\"", "]", "=", "\"Times New Roman\"", "\n", "# Plot settings", "\n", "font_size", "=", "plot_opts", ".", "get", "(", "'font_size'", ",", "20", ")", "\n", "font_size_axis", "=", "plot_opts", ".", "get", "(", "'font_size_axis'", ",", "20", ")", "\n", "line_width", "=", "plot_opts", ".", "get", "(", "'line_width'", ",", "2", ")", "\n", "font_size_legend", "=", "plot_opts", ".", "get", "(", "'font_size_legend'", ",", "20", ")", "\n", "\n", "plot_type", "=", "plot_opts", "[", "'plot_type'", "]", "\n", "legend_loc", "=", "plot_opts", "[", "'legend_loc'", "]", "\n", "\n", "xlabel", "=", "plot_opts", "[", "'xlabel'", "]", "\n", "ylabel", "=", "plot_opts", "[", "'ylabel'", "]", "\n", "ylabel", "=", "\"%s\"", "%", "(", "ylabel", ".", "replace", "(", "'%'", ",", "'\\%'", ")", ")", "\n", "xlim", "=", "plot_opts", "[", "'xlim'", "]", "\n", "ylim", "=", "plot_opts", "[", "'ylim'", "]", "\n", "\n", "title", "=", "r\"$\\bf{%s}$\"", "%", "(", "plot_opts", "[", "'title'", "]", ")", "\n", "\n", "matplotlib", ".", "rcParams", ".", "update", "(", "{", "'font.size'", ":", "font_size", "}", ")", "\n", "matplotlib", ".", "rcParams", ".", "update", "(", "{", "'axes.titlesize'", ":", "font_size_axis", "}", ")", "\n", "matplotlib", ".", "rcParams", ".", "update", "(", "{", "'axes.titleweight'", ":", "'black'", "}", ")", "\n", "matplotlib", ".", "rcParams", ".", "update", "(", "{", "'axes.labelsize'", ":", "font_size_axis", "}", ")", "\n", "\n", "fig", ",", "ax", "=", "plt", ".", "subplots", "(", ")", "\n", "\n", "index_sort", "=", "scores", ".", "argsort", "(", "descending", "=", "False", ")", "\n", "\n", "plotted_lines", "=", "[", "]", "\n", "legend_text", "=", "[", "]", "\n", "\n", "for", "id", ",", "id_sort", "in", "enumerate", "(", "index_sort", ")", ":", "\n", "        ", "line", "=", "ax", ".", "plot", "(", "x", ".", "tolist", "(", ")", ",", "y", "[", "id_sort", ",", ":", "]", ".", "tolist", "(", ")", ",", "\n", "linewidth", "=", "line_width", ",", "\n", "color", "=", "plot_draw_styles", "[", "index_sort", ".", "numel", "(", ")", "-", "id", "-", "1", "]", "[", "'color'", "]", ",", "\n", "linestyle", "=", "plot_draw_styles", "[", "index_sort", ".", "numel", "(", ")", "-", "id", "-", "1", "]", "[", "'line_style'", "]", ")", "\n", "\n", "plotted_lines", ".", "append", "(", "line", "[", "0", "]", ")", "\n", "\n", "tracker", "=", "trackers", "[", "id_sort", "]", "\n", "disp_name", "=", "get_tracker_display_name", "(", "tracker", ")", "\n", "\n", "legend_text", ".", "append", "(", "'{} [{:.1f}]'", ".", "format", "(", "disp_name", ",", "scores", "[", "id_sort", "]", ")", ")", "\n", "\n", "", "try", ":", "\n", "# add bold to our method", "\n", "        ", "for", "i", "in", "range", "(", "1", ",", "2", ")", ":", "\n", "            ", "legend_text", "[", "-", "i", "]", "=", "r'\\textbf{%s}'", "%", "(", "legend_text", "[", "-", "i", "]", ")", "\n", "\n", "", "ax", ".", "legend", "(", "plotted_lines", "[", ":", ":", "-", "1", "]", ",", "legend_text", "[", ":", ":", "-", "1", "]", ",", "loc", "=", "legend_loc", ",", "fancybox", "=", "False", ",", "edgecolor", "=", "'black'", ",", "\n", "fontsize", "=", "font_size_legend", ",", "framealpha", "=", "1.0", ")", "\n", "", "except", ":", "\n", "        ", "pass", "\n", "\n", "", "ax", ".", "set", "(", "xlabel", "=", "xlabel", ",", "\n", "ylabel", "=", "ylabel", ",", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.check_and_load_precomputed_results": [[160, 185], ["pytracking.evaluation.environment.env_settings", "os.path.join", "os.path.join", "os.path.isfile", "pytracking.analysis.extract_results.extract_results", "plot_results.check_eval_data_is_valid", "pytracking.analysis.extract_results.extract_results", "open", "pickle.load"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.extract_results.extract_results", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.check_eval_data_is_valid", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.extract_results.extract_results", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load"], ["title", "=", "title", ")", "\n", "\n", "ax", ".", "grid", "(", "True", ",", "linestyle", "=", "'-.'", ")", "\n", "fig", ".", "tight_layout", "(", ")", "\n", "\n", "tikzplotlib", ".", "save", "(", "'{}/{}_plot.tex'", ".", "format", "(", "result_plot_path", ",", "plot_type", ")", ")", "\n", "fig", ".", "savefig", "(", "'{}/{}_plot.pdf'", ".", "format", "(", "result_plot_path", ",", "plot_type", ")", ",", "dpi", "=", "300", ",", "format", "=", "'pdf'", ",", "transparent", "=", "True", ")", "\n", "plt", ".", "draw", "(", ")", "\n", "\n", "\n", "", "def", "check_and_load_precomputed_results", "(", "trackers", ",", "dataset", ",", "report_name", ",", "force_evaluation", "=", "False", ",", "**", "kwargs", ")", ":", "\n", "# Load data", "\n", "    ", "settings", "=", "env_settings", "(", ")", "\n", "\n", "# Load pre-computed results", "\n", "result_plot_path", "=", "os", ".", "path", ".", "join", "(", "settings", ".", "result_plot_path", ",", "report_name", ")", "\n", "eval_data_path", "=", "os", ".", "path", ".", "join", "(", "result_plot_path", ",", "'eval_data.pkl'", ")", "\n", "\n", "if", "os", ".", "path", ".", "isfile", "(", "eval_data_path", ")", "and", "not", "force_evaluation", ":", "\n", "        ", "with", "open", "(", "eval_data_path", ",", "'rb'", ")", "as", "fh", ":", "\n", "            ", "eval_data", "=", "pickle", ".", "load", "(", "fh", ")", "\n", "", "", "else", ":", "\n", "# print('Pre-computed evaluation data not found. Computing results!')", "\n", "        ", "eval_data", "=", "extract_results", "(", "trackers", ",", "dataset", ",", "report_name", ",", "**", "kwargs", ")", "\n", "\n", "", "if", "not", "check_eval_data_is_valid", "(", "eval_data", ",", "trackers", ",", "dataset", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.get_auc_curve": [[187, 193], ["auc_curve.mean", "ave_success_rate_plot_overlap.mean"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], ["        ", "eval_data", "=", "extract_results", "(", "trackers", ",", "dataset", ",", "report_name", ",", "**", "kwargs", ")", "\n", "# pass", "\n", "", "else", ":", "\n", "# Update display names", "\n", "        ", "tracker_names", "=", "[", "{", "'name'", ":", "t", ".", "name", ",", "'param'", ":", "t", ".", "parameter_name", ",", "'run_id'", ":", "t", ".", "run_id", ",", "'disp_name'", ":", "t", ".", "display_name", "}", "\n", "for", "t", "in", "trackers", "]", "\n", "eval_data", "[", "'trackers'", "]", "=", "tracker_names", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.get_prec_curve": [[195, 201], ["ave_success_rate_plot_center.mean"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], ["        ", "pickle", ".", "dump", "(", "eval_data", ",", "fh", ")", "\n", "", "return", "eval_data", "\n", "\n", "\n", "", "def", "get_auc_curve", "(", "ave_success_rate_plot_overlap", ",", "valid_sequence", ")", ":", "\n", "    ", "ave_success_rate_plot_overlap", "=", "ave_success_rate_plot_overlap", "[", "valid_sequence", ",", ":", ",", ":", "]", "\n", "auc_curve", "=", "ave_success_rate_plot_overlap", ".", "mean", "(", "0", ")", "*", "100.0", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.plot_results": [[203, 278], ["pytracking.evaluation.environment.env_settings", "plot_results.get_plot_draw_styles", "os.path.join", "plot_results.check_and_load_precomputed_results", "torch.tensor", "print", "print", "matplotlib.show", "plot_results.merge_multiple_runs", "torch.tensor", "plot_results.get_auc_curve", "torch.tensor", "plot_results.plot_draw_save", "torch.tensor", "plot_results.get_prec_curve", "torch.tensor", "plot_results.plot_draw_save", "torch.tensor", "plot_results.get_prec_curve", "torch.tensor", "plot_results.plot_draw_save", "torch.tensor.long().sum().item", "torch.tensor.long().sum", "torch.tensor.long"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.get_plot_draw_styles", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.check_and_load_precomputed_results", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results.Display.show", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.merge_multiple_runs", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.get_auc_curve", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.plot_draw_save", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.get_prec_curve", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.plot_draw_save", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.get_prec_curve", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.plot_draw_save"], ["\n", "return", "auc_curve", ",", "auc", "\n", "\n", "\n", "", "def", "get_prec_curve", "(", "ave_success_rate_plot_center", ",", "valid_sequence", ")", ":", "\n", "    ", "ave_success_rate_plot_center", "=", "ave_success_rate_plot_center", "[", "valid_sequence", ",", ":", ",", ":", "]", "\n", "prec_curve", "=", "ave_success_rate_plot_center", ".", "mean", "(", "0", ")", "*", "100.0", "\n", "prec_score", "=", "prec_curve", "[", ":", ",", "20", "]", "\n", "\n", "return", "prec_curve", ",", "prec_score", "\n", "\n", "\n", "", "def", "plot_results", "(", "trackers", ",", "dataset", ",", "report_name", ",", "merge_results", "=", "False", ",", "\n", "plot_types", "=", "(", "'success'", ")", ",", "force_evaluation", "=", "False", ",", "**", "kwargs", ")", ":", "\n", "    ", "\"\"\"\n    Plot results for the given trackers\n\n    args:\n        trackers - List of trackers to evaluate\n        dataset - List of sequences to evaluate\n        report_name - Name of the folder in env_settings.perm_mat_path where the computed results and plots are saved\n        merge_results - If True, multiple random runs for a non-deterministic trackers are averaged\n        plot_types - List of scores to display. Can contain 'success',\n                    'prec' (precision), and 'norm_prec' (normalized precision)\n    \"\"\"", "\n", "# Load data", "\n", "settings", "=", "env_settings", "(", ")", "\n", "\n", "plot_draw_styles", "=", "get_plot_draw_styles", "(", ")", "\n", "\n", "# Load pre-computed results", "\n", "result_plot_path", "=", "os", ".", "path", ".", "join", "(", "settings", ".", "result_plot_path", ",", "report_name", ")", "\n", "eval_data", "=", "check_and_load_precomputed_results", "(", "trackers", ",", "dataset", ",", "report_name", ",", "force_evaluation", ",", "**", "kwargs", ")", "\n", "\n", "# Merge results from multiple runs", "\n", "if", "merge_results", ":", "\n", "        ", "eval_data", "=", "merge_multiple_runs", "(", "eval_data", ")", "\n", "\n", "", "tracker_names", "=", "eval_data", "[", "'trackers'", "]", "\n", "\n", "valid_sequence", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'valid_sequence'", "]", ",", "dtype", "=", "torch", ".", "bool", ")", "\n", "\n", "print", "(", "'\\nPlotting results over {} / {} sequences'", ".", "format", "(", "valid_sequence", ".", "long", "(", ")", ".", "sum", "(", ")", ".", "item", "(", ")", ",", "valid_sequence", ".", "shape", "[", "0", "]", ")", ")", "\n", "\n", "print", "(", "'\\nGenerating plots for: {}'", ".", "format", "(", "report_name", ")", ")", "\n", "\n", "# ********************************  Success Plot **************************************", "\n", "if", "'success'", "in", "plot_types", ":", "\n", "        ", "ave_success_rate_plot_overlap", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'ave_success_rate_plot_overlap'", "]", ")", "\n", "\n", "# Index out valid sequences", "\n", "auc_curve", ",", "auc", "=", "get_auc_curve", "(", "ave_success_rate_plot_overlap", ",", "valid_sequence", ")", "\n", "threshold_set_overlap", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'threshold_set_overlap'", "]", ")", "\n", "\n", "success_plot_opts", "=", "{", "'plot_type'", ":", "'success'", ",", "'legend_loc'", ":", "'lower left'", ",", "'xlabel'", ":", "'Overlap threshold'", ",", "\n", "'ylabel'", ":", "'Overlap Precision [%]'", ",", "'xlim'", ":", "(", "0", ",", "1.0", ")", ",", "'ylim'", ":", "(", "0", ",", "88", ")", ",", "'title'", ":", "'Success'", "}", "\n", "plot_draw_save", "(", "auc_curve", ",", "threshold_set_overlap", ",", "auc", ",", "tracker_names", ",", "plot_draw_styles", ",", "result_plot_path", ",", "success_plot_opts", ")", "\n", "\n", "# ********************************  Precision Plot **************************************", "\n", "", "if", "'prec'", "in", "plot_types", ":", "\n", "        ", "ave_success_rate_plot_center", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'ave_success_rate_plot_center'", "]", ")", "\n", "\n", "# Index out valid sequences", "\n", "prec_curve", ",", "prec_score", "=", "get_prec_curve", "(", "ave_success_rate_plot_center", ",", "valid_sequence", ")", "\n", "threshold_set_center", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'threshold_set_center'", "]", ")", "\n", "\n", "precision_plot_opts", "=", "{", "'plot_type'", ":", "'precision'", ",", "'legend_loc'", ":", "'lower right'", ",", "\n", "'xlabel'", ":", "'Location error threshold [pixels]'", ",", "'ylabel'", ":", "'Distance Precision [%]'", ",", "\n", "'xlim'", ":", "(", "0", ",", "50", ")", ",", "'ylim'", ":", "(", "0", ",", "100", ")", ",", "'title'", ":", "'Precision plot'", "}", "\n", "plot_draw_save", "(", "prec_curve", ",", "threshold_set_center", ",", "prec_score", ",", "tracker_names", ",", "plot_draw_styles", ",", "result_plot_path", ",", "\n", "precision_plot_opts", ")", "\n", "\n", "# ********************************  Norm Precision Plot **************************************", "\n", "", "if", "'norm_prec'", "in", "plot_types", ":", "\n", "        ", "ave_success_rate_plot_center_norm", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'ave_success_rate_plot_center_norm'", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.generate_formatted_report": [[280, 304], ["zip", "enumerate", "max", "max", "scores.keys", "zip", "scores.keys", "scores.items", "len", "len", "len", "score_value[].item"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["prec_curve", ",", "prec_score", "=", "get_prec_curve", "(", "ave_success_rate_plot_center_norm", ",", "valid_sequence", ")", "\n", "threshold_set_center_norm", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'threshold_set_center_norm'", "]", ")", "\n", "\n", "norm_precision_plot_opts", "=", "{", "'plot_type'", ":", "'norm_precision'", ",", "'legend_loc'", ":", "'lower right'", ",", "\n", "'xlabel'", ":", "'Location error threshold'", ",", "'ylabel'", ":", "'Distance Precision [%]'", ",", "\n", "'xlim'", ":", "(", "0", ",", "0.5", ")", ",", "'ylim'", ":", "(", "0", ",", "85", ")", ",", "'title'", ":", "'Normalized Precision'", "}", "\n", "plot_draw_save", "(", "prec_curve", ",", "threshold_set_center_norm", ",", "prec_score", ",", "tracker_names", ",", "plot_draw_styles", ",", "result_plot_path", ",", "\n", "norm_precision_plot_opts", ")", "\n", "\n", "", "plt", ".", "show", "(", ")", "\n", "\n", "\n", "", "def", "generate_formatted_report", "(", "row_labels", ",", "scores", ",", "table_name", "=", "''", ")", ":", "\n", "    ", "name_width", "=", "max", "(", "[", "len", "(", "d", ")", "for", "d", "in", "row_labels", "]", "+", "[", "len", "(", "table_name", ")", "]", ")", "+", "5", "\n", "min_score_width", "=", "10", "\n", "\n", "report_text", "=", "'\\n{label: <{width}} |'", ".", "format", "(", "label", "=", "table_name", ",", "width", "=", "name_width", ")", "\n", "\n", "score_widths", "=", "[", "max", "(", "min_score_width", ",", "len", "(", "k", ")", "+", "3", ")", "for", "k", "in", "scores", ".", "keys", "(", ")", "]", "\n", "\n", "for", "s", ",", "s_w", "in", "zip", "(", "scores", ".", "keys", "(", ")", ",", "score_widths", ")", ":", "\n", "        ", "report_text", "=", "'{prev} {s: <{width}} |'", ".", "format", "(", "prev", "=", "report_text", ",", "s", "=", "s", ",", "width", "=", "s_w", ")", "\n", "\n", "", "report_text", "=", "'{prev}\\n'", ".", "format", "(", "prev", "=", "report_text", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.print_results": [[306, 362], ["plot_results.check_and_load_precomputed_results", "torch.tensor", "print", "plot_results.generate_formatted_report", "print", "plot_results.merge_multiple_runs", "torch.tensor", "torch.tensor", "plot_results.get_auc_curve", "torch.tensor", "plot_results.get_prec_curve", "torch.tensor", "plot_results.get_prec_curve", "plot_results.get_tracker_display_name", "torch.tensor.long().sum().item", "torch.tensor.long().sum", "torch.tensor.long"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.check_and_load_precomputed_results", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.generate_formatted_report", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.merge_multiple_runs", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.get_auc_curve", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.get_prec_curve", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.get_prec_curve", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.get_tracker_display_name"], ["# display name", "\n", "        ", "report_text", "=", "'{prev}{tracker: <{width}} |'", ".", "format", "(", "prev", "=", "report_text", ",", "tracker", "=", "d_name", ",", "\n", "width", "=", "name_width", ")", "\n", "for", "(", "score_type", ",", "score_value", ")", ",", "s_w", "in", "zip", "(", "scores", ".", "items", "(", ")", ",", "score_widths", ")", ":", "\n", "            ", "report_text", "=", "'{prev} {score: <{width}} |'", ".", "format", "(", "prev", "=", "report_text", ",", "\n", "score", "=", "'{:0.2f}'", ".", "format", "(", "score_value", "[", "trk_id", "]", ".", "item", "(", ")", ")", ",", "\n", "width", "=", "s_w", ")", "\n", "", "report_text", "=", "'{prev}\\n'", ".", "format", "(", "prev", "=", "report_text", ")", "\n", "\n", "", "return", "report_text", "\n", "\n", "\n", "", "def", "print_results", "(", "trackers", ",", "dataset", ",", "report_name", ",", "merge_results", "=", "False", ",", "\n", "plot_types", "=", "(", "'success'", ")", ",", "**", "kwargs", ")", ":", "\n", "    ", "\"\"\" Print the results for the given trackers in a formatted table\n    args:\n        trackers - List of trackers to evaluate\n        dataset - List of sequences to evaluate\n        report_name - Name of the folder in env_settings.perm_mat_path where the computed results and plots are saved\n        merge_results - If True, multiple random runs for a non-deterministic trackers are averaged\n        plot_types - List of scores to display. Can contain 'success' (prints AUC, OP50, and OP75 scores),\n                    'prec' (prints precision score), and 'norm_prec' (prints normalized precision score)\n    \"\"\"", "\n", "# Load pre-computed results", "\n", "eval_data", "=", "check_and_load_precomputed_results", "(", "trackers", ",", "dataset", ",", "report_name", ",", "**", "kwargs", ")", "\n", "\n", "# Merge results from multiple runs", "\n", "if", "merge_results", ":", "\n", "        ", "eval_data", "=", "merge_multiple_runs", "(", "eval_data", ")", "\n", "\n", "", "tracker_names", "=", "eval_data", "[", "'trackers'", "]", "\n", "valid_sequence", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'valid_sequence'", "]", ",", "dtype", "=", "torch", ".", "bool", ")", "\n", "\n", "print", "(", "'\\nReporting results over {} / {} sequences'", ".", "format", "(", "valid_sequence", ".", "long", "(", ")", ".", "sum", "(", ")", ".", "item", "(", ")", ",", "valid_sequence", ".", "shape", "[", "0", "]", ")", ")", "\n", "\n", "scores", "=", "{", "}", "\n", "\n", "# ********************************  Success Plot **************************************", "\n", "if", "'success'", "in", "plot_types", ":", "\n", "        ", "threshold_set_overlap", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'threshold_set_overlap'", "]", ")", "\n", "ave_success_rate_plot_overlap", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'ave_success_rate_plot_overlap'", "]", ")", "\n", "\n", "# Index out valid sequences", "\n", "auc_curve", ",", "auc", "=", "get_auc_curve", "(", "ave_success_rate_plot_overlap", ",", "valid_sequence", ")", "\n", "scores", "[", "'AUC'", "]", "=", "auc", "\n", "scores", "[", "'OP50'", "]", "=", "auc_curve", "[", ":", ",", "threshold_set_overlap", "==", "0.50", "]", "\n", "scores", "[", "'OP75'", "]", "=", "auc_curve", "[", ":", ",", "threshold_set_overlap", "==", "0.75", "]", "\n", "\n", "# ********************************  Precision Plot **************************************", "\n", "", "if", "'prec'", "in", "plot_types", ":", "\n", "        ", "ave_success_rate_plot_center", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'ave_success_rate_plot_center'", "]", ")", "\n", "\n", "# Index out valid sequences", "\n", "prec_curve", ",", "prec_score", "=", "get_prec_curve", "(", "ave_success_rate_plot_center", ",", "valid_sequence", ")", "\n", "scores", "[", "'Precision'", "]", "=", "prec_score", "\n", "\n", "# ********************************  Norm Precision Plot *********************************", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.plot_got_success": [[364, 423], ["pytracking.evaluation.environment.env_settings", "plot_results.get_plot_draw_styles", "os.path.join", "torch.zeros", "torch.zeros", "enumerate", "torch.arange", "plot_results.plot_draw_save", "matplotlib.show", "len", "os.path.isfile", "tracker_names.append", "len", "Exception", "len", "json.load.keys", "torch.tensor", "open", "json.load", "json.load.keys", "Exception", "list", "json.load.keys", "eval_data[].keys", "json.load.keys"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.get_plot_draw_styles", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.plot_draw_save", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results.Display.show", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["        ", "ave_success_rate_plot_center_norm", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'ave_success_rate_plot_center_norm'", "]", ")", "\n", "\n", "# Index out valid sequences", "\n", "norm_prec_curve", ",", "norm_prec_score", "=", "get_prec_curve", "(", "ave_success_rate_plot_center_norm", ",", "valid_sequence", ")", "\n", "scores", "[", "'Norm Precision'", "]", "=", "norm_prec_score", "\n", "\n", "# Print", "\n", "", "tracker_disp_names", "=", "[", "get_tracker_display_name", "(", "trk", ")", "for", "trk", "in", "tracker_names", "]", "\n", "report_text", "=", "generate_formatted_report", "(", "tracker_disp_names", ",", "scores", ",", "table_name", "=", "report_name", ")", "\n", "print", "(", "report_text", ")", "\n", "\n", "\n", "", "def", "plot_got_success", "(", "trackers", ",", "report_name", ")", ":", "\n", "    ", "\"\"\" Plot success plot for GOT-10k dataset using the json reports.\n    Save the json reports from http://got-10k.aitestunion.com/leaderboard in the directory set to\n    env_settings.got_reports_path\n\n    The tracker name in the experiment file should be set to the name of the report file for that tracker,\n    e.g. DiMP50_report_2019_09_02_15_44_25 if the report is name DiMP50_report_2019_09_02_15_44_25.json\n\n    args:\n        trackers - List of trackers to evaluate\n        report_name - Name of the folder in env_settings.perm_mat_path where the computed results and plots are saved\n    \"\"\"", "\n", "# Load data", "\n", "settings", "=", "env_settings", "(", ")", "\n", "plot_draw_styles", "=", "get_plot_draw_styles", "(", ")", "\n", "\n", "result_plot_path", "=", "os", ".", "path", ".", "join", "(", "settings", ".", "result_plot_path", ",", "report_name", ")", "\n", "\n", "auc_curve", "=", "torch", ".", "zeros", "(", "(", "len", "(", "trackers", ")", ",", "101", ")", ")", "\n", "scores", "=", "torch", ".", "zeros", "(", "len", "(", "trackers", ")", ")", "\n", "\n", "# Load results", "\n", "tracker_names", "=", "[", "]", "\n", "for", "trk_id", ",", "trk", "in", "enumerate", "(", "trackers", ")", ":", "\n", "        ", "json_path", "=", "'{}/{}.json'", ".", "format", "(", "settings", ".", "got_reports_path", ",", "trk", ".", "name", ")", "\n", "\n", "if", "os", ".", "path", ".", "isfile", "(", "json_path", ")", ":", "\n", "            ", "with", "open", "(", "json_path", ",", "'r'", ")", "as", "f", ":", "\n", "                ", "eval_data", "=", "json", ".", "load", "(", "f", ")", "\n", "", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "'Report not found {}'", ".", "format", "(", "json_path", ")", ")", "\n", "\n", "", "if", "len", "(", "eval_data", ".", "keys", "(", ")", ")", ">", "1", ":", "\n", "            ", "raise", "Exception", "\n", "\n", "# First field is the tracker name. Index it out", "\n", "", "eval_data", "=", "eval_data", "[", "list", "(", "eval_data", ".", "keys", "(", ")", ")", "[", "0", "]", "]", "\n", "if", "'succ_curve'", "in", "eval_data", ".", "keys", "(", ")", ":", "\n", "            ", "curve", "=", "eval_data", "[", "'succ_curve'", "]", "\n", "ao", "=", "eval_data", "[", "'ao'", "]", "\n", "", "elif", "'overall'", "in", "eval_data", ".", "keys", "(", ")", "and", "'succ_curve'", "in", "eval_data", "[", "'overall'", "]", ".", "keys", "(", ")", ":", "\n", "            ", "curve", "=", "eval_data", "[", "'overall'", "]", "[", "'succ_curve'", "]", "\n", "ao", "=", "eval_data", "[", "'overall'", "]", "[", "'ao'", "]", "\n", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "'Invalid JSON file {}'", ".", "format", "(", "json_path", ")", ")", "\n", "\n", "", "auc_curve", "[", "trk_id", ",", ":", "]", "=", "torch", ".", "tensor", "(", "curve", ")", "*", "100.0", "\n", "scores", "[", "trk_id", "]", "=", "ao", "*", "100.0", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.print_per_sequence_results": [[425, 484], ["plot_results.check_and_load_precomputed_results", "torch.tensor", "plot_results.generate_formatted_report", "print", "plot_results.merge_multiple_runs", "torch.tensor", "plot_results.get_tracker_display_name", "enumerate", "enumerate", "avg_overlap_all.min", "zip", "avg_overlap_all.max", "torch.tensor.tolist", "avg_overlap_all.min", "avg_overlap_all.max"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.check_and_load_precomputed_results", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.generate_formatted_report", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.merge_multiple_runs", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.get_tracker_display_name", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["tracker_names", ".", "append", "(", "{", "'name'", ":", "trk", ".", "name", ",", "'param'", ":", "trk", ".", "parameter_name", ",", "'run_id'", ":", "trk", ".", "run_id", ",", "\n", "'disp_name'", ":", "trk", ".", "display_name", "}", ")", "\n", "\n", "", "threshold_set_overlap", "=", "torch", ".", "arange", "(", "0.0", ",", "1.01", ",", "0.01", ",", "dtype", "=", "torch", ".", "float64", ")", "\n", "\n", "success_plot_opts", "=", "{", "'plot_type'", ":", "'success'", ",", "'legend_loc'", ":", "'lower left'", ",", "'xlabel'", ":", "'Overlap threshold'", ",", "\n", "'ylabel'", ":", "'Overlap Precision [%]'", ",", "'xlim'", ":", "(", "0", ",", "1.0", ")", ",", "'ylim'", ":", "(", "0", ",", "100", ")", ",", "'title'", ":", "'Success plot'", "}", "\n", "plot_draw_save", "(", "auc_curve", ",", "threshold_set_overlap", ",", "scores", ",", "tracker_names", ",", "plot_draw_styles", ",", "result_plot_path", ",", "\n", "success_plot_opts", ")", "\n", "plt", ".", "show", "(", ")", "\n", "\n", "\n", "", "def", "print_per_sequence_results", "(", "trackers", ",", "dataset", ",", "report_name", ",", "merge_results", "=", "False", ",", "\n", "filter_criteria", "=", "None", ",", "**", "kwargs", ")", ":", "\n", "    ", "\"\"\" Print per-sequence results for the given trackers. Additionally, the sequences to list can be filtered using\n    the filter criteria.\n\n    args:\n        trackers - List of trackers to evaluate\n        dataset - List of sequences to evaluate\n        report_name - Name of the folder in env_settings.perm_mat_path where the computed results and plots are saved\n        merge_results - If True, multiple random runs for a non-deterministic trackers are averaged\n        filter_criteria - Filter sequence results which are reported. Following modes are supported\n                        None: No filtering. Display results for all sequences in dataset\n                        'ao_min': Only display sequences for which the minimum average overlap (AO) score over the\n                                  trackers is less than a threshold filter_criteria['threshold']. This mode can\n                                  be used to select sequences where at least one tracker performs poorly.\n                        'ao_max': Only display sequences for which the maximum average overlap (AO) score over the\n                                  trackers is less than a threshold filter_criteria['threshold']. This mode can\n                                  be used to select sequences all tracker performs poorly.\n                        'delta_ao': Only display sequences for which the performance of different trackers vary by at\n                                    least filter_criteria['threshold'] in average overlap (AO) score. This mode can\n                                    be used to select sequences where the behaviour of the trackers greatly differ\n                                    between each other.\n    \"\"\"", "\n", "# Load pre-computed results", "\n", "eval_data", "=", "check_and_load_precomputed_results", "(", "trackers", ",", "dataset", ",", "report_name", ",", "**", "kwargs", ")", "\n", "\n", "# Merge results from multiple runs", "\n", "if", "merge_results", ":", "\n", "        ", "eval_data", "=", "merge_multiple_runs", "(", "eval_data", ")", "\n", "\n", "", "tracker_names", "=", "eval_data", "[", "'trackers'", "]", "\n", "valid_sequence", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'valid_sequence'", "]", ",", "dtype", "=", "torch", ".", "bool", ")", "\n", "sequence_names", "=", "eval_data", "[", "'sequences'", "]", "\n", "avg_overlap_all", "=", "torch", ".", "tensor", "(", "eval_data", "[", "'avg_overlap_all'", "]", ")", "*", "100.0", "\n", "\n", "# Filter sequences", "\n", "if", "filter_criteria", "is", "not", "None", ":", "\n", "        ", "if", "filter_criteria", "[", "'mode'", "]", "==", "'ao_min'", ":", "\n", "            ", "min_ao", "=", "avg_overlap_all", ".", "min", "(", "dim", "=", "1", ")", "[", "0", "]", "\n", "valid_sequence", "=", "valid_sequence", "&", "(", "min_ao", "<", "filter_criteria", "[", "'threshold'", "]", ")", "\n", "", "elif", "filter_criteria", "[", "'mode'", "]", "==", "'ao_max'", ":", "\n", "            ", "max_ao", "=", "avg_overlap_all", ".", "max", "(", "dim", "=", "1", ")", "[", "0", "]", "\n", "valid_sequence", "=", "valid_sequence", "&", "(", "max_ao", "<", "filter_criteria", "[", "'threshold'", "]", ")", "\n", "", "elif", "filter_criteria", "[", "'mode'", "]", "==", "'delta_ao'", ":", "\n", "            ", "min_ao", "=", "avg_overlap_all", ".", "min", "(", "dim", "=", "1", ")", "[", "0", "]", "\n", "max_ao", "=", "avg_overlap_all", ".", "max", "(", "dim", "=", "1", ")", "[", "0", "]", "\n", "valid_sequence", "=", "valid_sequence", "&", "(", "(", "max_ao", "-", "min_ao", ")", ">", "filter_criteria", "[", "'threshold'", "]", ")", "\n", "", "else", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.extract_results.calc_err_center": [[17, 27], ["None"], "function", ["None"], ["    ", "pred_center", "=", "pred_bb", "[", ":", ",", ":", "2", "]", "+", "0.5", "*", "(", "pred_bb", "[", ":", ",", "2", ":", "]", "-", "1.0", ")", "\n", "anno_center", "=", "anno_bb", "[", ":", ",", ":", "2", "]", "+", "0.5", "*", "(", "anno_bb", "[", ":", ",", "2", ":", "]", "-", "1.0", ")", "\n", "\n", "if", "normalized", ":", "\n", "        ", "pred_center", "=", "pred_center", "/", "anno_bb", "[", ":", ",", "2", ":", "]", "\n", "anno_center", "=", "anno_center", "/", "anno_bb", "[", ":", ",", "2", ":", "]", "\n", "\n", "", "err_center", "=", "(", "(", "pred_center", "-", "anno_center", ")", "**", "2", ")", ".", "sum", "(", "1", ")", ".", "sqrt", "(", ")", "\n", "return", "err_center", "\n", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.extract_results.calc_iou_overlap": [[29, 39], ["torch.max", "torch.min", "sz.prod", "pred_bb[].prod", "anno_bb[].prod"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["    ", "tl", "=", "torch", ".", "max", "(", "pred_bb", "[", ":", ",", ":", "2", "]", ",", "anno_bb", "[", ":", ",", ":", "2", "]", ")", "\n", "br", "=", "torch", ".", "min", "(", "pred_bb", "[", ":", ",", ":", "2", "]", "+", "pred_bb", "[", ":", ",", "2", ":", "]", "-", "1.0", ",", "anno_bb", "[", ":", ",", ":", "2", "]", "+", "anno_bb", "[", ":", ",", "2", ":", "]", "-", "1.0", ")", "\n", "sz", "=", "(", "br", "-", "tl", "+", "1.0", ")", ".", "clamp", "(", "0", ")", "\n", "\n", "# Area", "\n", "intersection", "=", "sz", ".", "prod", "(", "dim", "=", "1", ")", "\n", "union", "=", "pred_bb", "[", ":", ",", "2", ":", "]", ".", "prod", "(", "dim", "=", "1", ")", "+", "anno_bb", "[", ":", ",", "2", ":", "]", ".", "prod", "(", "dim", "=", "1", ")", "-", "intersection", "\n", "\n", "return", "intersection", "/", "union", "\n", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.extract_results.calc_seq_err_robust": [[41, 101], ["torch.cat.clone", "torch.isnan().any", "extract_results.calc_err_center", "extract_results.calc_err_center", "extract_results.calc_iou_overlap", "torch.isnan().any", "torch.isnan().any", "Exception", "range", "target_visible.bool.bool", "float", "float", "float", "Exception", "torch.isnan", "Exception", "torch.isnan", "torch.isnan", "Exception", "torch.zeros().type_as", "torch.cat", "torch.isnan().any", "torch.zeros", "torch.isnan"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.extract_results.calc_err_center", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.extract_results.calc_err_center", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.extract_results.calc_iou_overlap"], ["    ", "pred_bb", "=", "pred_bb", ".", "clone", "(", ")", "\n", "\n", "# Check if invalid values are present", "\n", "if", "torch", ".", "isnan", "(", "pred_bb", ")", ".", "any", "(", ")", "or", "(", "pred_bb", "[", ":", ",", "2", ":", "]", "<", "0.0", ")", ".", "any", "(", ")", ":", "\n", "        ", "raise", "Exception", "(", "'Error: Invalid results'", ")", "\n", "\n", "", "if", "torch", ".", "isnan", "(", "anno_bb", ")", ".", "any", "(", ")", ":", "\n", "        ", "if", "dataset", "==", "'uav'", ":", "\n", "            ", "pass", "\n", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "'Warning: NaNs in annotation'", ")", "\n", "\n", "", "", "if", "(", "pred_bb", "[", ":", ",", "2", ":", "]", "==", "0.0", ")", ".", "any", "(", ")", ":", "\n", "        ", "for", "i", "in", "range", "(", "1", ",", "pred_bb", ".", "shape", "[", "0", "]", ")", ":", "\n", "            ", "if", "(", "pred_bb", "[", "i", ",", "2", ":", "]", "==", "0.0", ")", ".", "any", "(", ")", "and", "not", "torch", ".", "isnan", "(", "anno_bb", "[", "i", ",", ":", "]", ")", ".", "any", "(", ")", ":", "\n", "                ", "pred_bb", "[", "i", ",", ":", "]", "=", "pred_bb", "[", "i", "-", "1", ",", ":", "]", "\n", "\n", "", "", "", "if", "pred_bb", ".", "shape", "[", "0", "]", "!=", "anno_bb", ".", "shape", "[", "0", "]", ":", "\n", "        ", "if", "dataset", "==", "'lasot'", ":", "\n", "            ", "if", "pred_bb", ".", "shape", "[", "0", "]", ">", "anno_bb", ".", "shape", "[", "0", "]", ":", "\n", "# For monkey-17, there is a mismatch for some trackers.", "\n", "                ", "pred_bb", "=", "pred_bb", "[", ":", "anno_bb", ".", "shape", "[", "0", "]", ",", ":", "]", "\n", "", "else", ":", "\n", "                ", "raise", "Exception", "(", "'Mis-match in tracker prediction and GT lengths'", ")", "\n", "", "", "else", ":", "\n", "# print('Warning: Mis-match in tracker prediction and GT lengths')", "\n", "            ", "if", "pred_bb", ".", "shape", "[", "0", "]", ">", "anno_bb", ".", "shape", "[", "0", "]", ":", "\n", "                ", "pred_bb", "=", "pred_bb", "[", ":", "anno_bb", ".", "shape", "[", "0", "]", ",", ":", "]", "\n", "", "else", ":", "\n", "                ", "pad", "=", "torch", ".", "zeros", "(", "(", "anno_bb", ".", "shape", "[", "0", "]", "-", "pred_bb", ".", "shape", "[", "0", "]", ",", "4", ")", ")", ".", "type_as", "(", "pred_bb", ")", "\n", "pred_bb", "=", "torch", ".", "cat", "(", "(", "pred_bb", ",", "pad", ")", ",", "dim", "=", "0", ")", "\n", "\n", "", "", "", "pred_bb", "[", "0", ",", ":", "]", "=", "anno_bb", "[", "0", ",", ":", "]", "\n", "\n", "if", "target_visible", "is", "not", "None", ":", "\n", "        ", "target_visible", "=", "target_visible", ".", "bool", "(", ")", "\n", "valid", "=", "(", "(", "anno_bb", "[", ":", ",", "2", ":", "]", ">", "0.0", ")", ".", "sum", "(", "1", ")", "==", "2", ")", "&", "target_visible", "\n", "", "else", ":", "\n", "        ", "valid", "=", "(", "(", "anno_bb", "[", ":", ",", "2", ":", "]", ">", "0.0", ")", ".", "sum", "(", "1", ")", "==", "2", ")", "\n", "\n", "", "err_center", "=", "calc_err_center", "(", "pred_bb", ",", "anno_bb", ")", "\n", "err_center_normalized", "=", "calc_err_center", "(", "pred_bb", ",", "anno_bb", ",", "normalized", "=", "True", ")", "\n", "err_overlap", "=", "calc_iou_overlap", "(", "pred_bb", ",", "anno_bb", ")", "\n", "\n", "# handle invalid anno cases", "\n", "if", "dataset", "in", "[", "'uav'", "]", ":", "\n", "        ", "err_center", "[", "~", "valid", "]", "=", "-", "1.0", "\n", "", "else", ":", "\n", "        ", "err_center", "[", "~", "valid", "]", "=", "float", "(", "\"Inf\"", ")", "\n", "", "err_center_normalized", "[", "~", "valid", "]", "=", "-", "1.0", "\n", "err_overlap", "[", "~", "valid", "]", "=", "-", "1.0", "\n", "\n", "if", "dataset", "==", "'lasot'", ":", "\n", "        ", "err_center_normalized", "[", "~", "target_visible", "]", "=", "float", "(", "\"Inf\"", ")", "\n", "err_center", "[", "~", "target_visible", "]", "=", "float", "(", "\"Inf\"", ")", "\n", "\n", "", "if", "torch", ".", "isnan", "(", "err_overlap", ")", ".", "any", "(", ")", ":", "\n", "        ", "raise", "Exception", "(", "'Nans in calculated overlap'", ")", "\n", "", "return", "err_overlap", ",", "err_center", ",", "err_center_normalized", ",", "valid", "\n", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.extract_results.extract_results": [[103, 184], ["pytracking.evaluation.environment.env_settings", "os.path.join", "torch.arange", "torch.arange", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.ones", "enumerate", "print", "os.path.exists", "os.makedirs", "torch.arange", "len", "tqdm.tqdm", "torch.tensor", "enumerate", "torch.ones.tolist", "torch.zeros.tolist", "torch.zeros.tolist", "torch.zeros.tolist", "torch.zeros.tolist", "torch.arange.tolist", "torch.arange.tolist", "threshold_set_center_norm.tolist", "open", "pickle.dump", "len", "len", "len", "len", "torch.arange.numel", "len", "len", "torch.arange.numel", "len", "len", "torch.arange.numel", "torch.tensor", "os.path.isfile", "extract_results.calc_seq_err_robust", "err_overlap[].mean", "torch.ones.long().sum().item", "torch.tensor", "valid_frame.long().sum", "Exception", "pytracking.utils.load_text.load_text", "Exception", "torch.ones.long().sum", "str", "valid_frame.long", "torch.ones.long", "err_overlap.view", "torch.arange.view", "err_center.view", "torch.arange.view", "err_center_normalized.view", "threshold_set_center_norm.view"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.extract_results.calc_seq_err_robust", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.utils.load_text.load_text"], ["exclude_invalid_frames", "=", "False", ")", ":", "\n", "    ", "settings", "=", "env_settings", "(", ")", "\n", "eps", "=", "1e-16", "\n", "\n", "result_plot_path", "=", "os", ".", "path", ".", "join", "(", "settings", ".", "result_plot_path", ",", "report_name", ")", "\n", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "result_plot_path", ")", ":", "\n", "        ", "os", ".", "makedirs", "(", "result_plot_path", ")", "\n", "\n", "", "threshold_set_overlap", "=", "torch", ".", "arange", "(", "0.0", ",", "1.0", "+", "plot_bin_gap", ",", "plot_bin_gap", ",", "dtype", "=", "torch", ".", "float64", ")", "\n", "threshold_set_center", "=", "torch", ".", "arange", "(", "0", ",", "51", ",", "dtype", "=", "torch", ".", "float64", ")", "\n", "threshold_set_center_norm", "=", "torch", ".", "arange", "(", "0", ",", "51", ",", "dtype", "=", "torch", ".", "float64", ")", "/", "100.0", "\n", "\n", "avg_overlap_all", "=", "torch", ".", "zeros", "(", "(", "len", "(", "dataset", ")", ",", "len", "(", "trackers", ")", ")", ",", "dtype", "=", "torch", ".", "float64", ")", "\n", "ave_success_rate_plot_overlap", "=", "torch", ".", "zeros", "(", "(", "len", "(", "dataset", ")", ",", "len", "(", "trackers", ")", ",", "threshold_set_overlap", ".", "numel", "(", ")", ")", ",", "\n", "dtype", "=", "torch", ".", "float32", ")", "\n", "ave_success_rate_plot_center", "=", "torch", ".", "zeros", "(", "(", "len", "(", "dataset", ")", ",", "len", "(", "trackers", ")", ",", "threshold_set_center", ".", "numel", "(", ")", ")", ",", "\n", "dtype", "=", "torch", ".", "float32", ")", "\n", "ave_success_rate_plot_center_norm", "=", "torch", ".", "zeros", "(", "(", "len", "(", "dataset", ")", ",", "len", "(", "trackers", ")", ",", "threshold_set_center", ".", "numel", "(", ")", ")", ",", "\n", "dtype", "=", "torch", ".", "float32", ")", "\n", "\n", "valid_sequence", "=", "torch", ".", "ones", "(", "len", "(", "dataset", ")", ",", "dtype", "=", "torch", ".", "uint8", ")", "\n", "\n", "for", "seq_id", ",", "seq", "in", "enumerate", "(", "tqdm", "(", "dataset", ")", ")", ":", "\n", "# Load anno", "\n", "        ", "anno_bb", "=", "torch", ".", "tensor", "(", "seq", ".", "ground_truth_rect", ")", "\n", "target_visible", "=", "torch", ".", "tensor", "(", "seq", ".", "target_visible", ",", "dtype", "=", "torch", ".", "uint8", ")", "if", "seq", ".", "target_visible", "is", "not", "None", "else", "None", "\n", "for", "trk_id", ",", "trk", "in", "enumerate", "(", "trackers", ")", ":", "\n", "# Load results", "\n", "            ", "base_results_path", "=", "'{}/{}'", ".", "format", "(", "trk", ".", "results_dir", ",", "seq", ".", "name", ")", "\n", "results_path", "=", "'{}.txt'", ".", "format", "(", "base_results_path", ")", "\n", "\n", "if", "os", ".", "path", ".", "isfile", "(", "results_path", ")", ":", "\n", "                ", "pred_bb", "=", "torch", ".", "tensor", "(", "load_text", "(", "str", "(", "results_path", ")", ",", "delimiter", "=", "(", "'\\t'", ",", "','", ")", ",", "dtype", "=", "np", ".", "float64", ")", ")", "\n", "", "else", ":", "\n", "                ", "if", "skip_missing_seq", ":", "\n", "                    ", "valid_sequence", "[", "seq_id", "]", "=", "0", "\n", "break", "\n", "", "else", ":", "\n", "                    ", "raise", "Exception", "(", "'Result not found. {}'", ".", "format", "(", "results_path", ")", ")", "\n", "\n", "# Calculate measures", "\n", "", "", "err_overlap", ",", "err_center", ",", "err_center_normalized", ",", "valid_frame", "=", "calc_seq_err_robust", "(", "\n", "pred_bb", ",", "anno_bb", ",", "seq", ".", "dataset", ",", "target_visible", ")", "\n", "\n", "avg_overlap_all", "[", "seq_id", ",", "trk_id", "]", "=", "err_overlap", "[", "valid_frame", "]", ".", "mean", "(", ")", "\n", "\n", "if", "exclude_invalid_frames", ":", "\n", "                ", "seq_length", "=", "valid_frame", ".", "long", "(", ")", ".", "sum", "(", ")", "\n", "", "else", ":", "\n", "                ", "seq_length", "=", "anno_bb", ".", "shape", "[", "0", "]", "\n", "\n", "", "if", "seq_length", "<=", "0", ":", "\n", "                ", "raise", "Exception", "(", "'Seq length zero'", ")", "\n", "\n", "", "ave_success_rate_plot_overlap", "[", "seq_id", ",", "trk_id", ",", ":", "]", "=", "(", "err_overlap", ".", "view", "(", "-", "1", ",", "1", ")", ">", "threshold_set_overlap", ".", "view", "(", "1", ",", "-", "1", ")", ")", ".", "sum", "(", "0", ")", ".", "float", "(", ")", "/", "seq_length", "\n", "ave_success_rate_plot_center", "[", "seq_id", ",", "trk_id", ",", ":", "]", "=", "(", "err_center", ".", "view", "(", "-", "1", ",", "1", ")", "<=", "threshold_set_center", ".", "view", "(", "1", ",", "-", "1", ")", ")", ".", "sum", "(", "0", ")", ".", "float", "(", ")", "/", "seq_length", "\n", "ave_success_rate_plot_center_norm", "[", "seq_id", ",", "trk_id", ",", ":", "]", "=", "(", "err_center_normalized", ".", "view", "(", "-", "1", ",", "1", ")", "<=", "threshold_set_center_norm", ".", "view", "(", "1", ",", "-", "1", ")", ")", ".", "sum", "(", "0", ")", ".", "float", "(", ")", "/", "seq_length", "\n", "\n", "", "", "print", "(", "'\\n\\nComputed results over {} / {} sequences'", ".", "format", "(", "valid_sequence", ".", "long", "(", ")", ".", "sum", "(", ")", ".", "item", "(", ")", ",", "valid_sequence", ".", "shape", "[", "0", "]", ")", ")", "\n", "\n", "# Prepare dictionary for saving data", "\n", "seq_names", "=", "[", "s", ".", "name", "for", "s", "in", "dataset", "]", "\n", "tracker_names", "=", "[", "{", "'name'", ":", "t", ".", "name", ",", "'param'", ":", "t", ".", "parameter_name", ",", "'run_id'", ":", "t", ".", "run_id", ",", "'disp_name'", ":", "t", ".", "display_name", "}", "\n", "for", "t", "in", "trackers", "]", "\n", "\n", "eval_data", "=", "{", "'sequences'", ":", "seq_names", ",", "'trackers'", ":", "tracker_names", ",", "\n", "'valid_sequence'", ":", "valid_sequence", ".", "tolist", "(", ")", ",", "\n", "'ave_success_rate_plot_overlap'", ":", "ave_success_rate_plot_overlap", ".", "tolist", "(", ")", ",", "\n", "'ave_success_rate_plot_center'", ":", "ave_success_rate_plot_center", ".", "tolist", "(", ")", ",", "\n", "'ave_success_rate_plot_center_norm'", ":", "ave_success_rate_plot_center_norm", ".", "tolist", "(", ")", ",", "\n", "'avg_overlap_all'", ":", "avg_overlap_all", ".", "tolist", "(", ")", ",", "\n", "'threshold_set_overlap'", ":", "threshold_set_overlap", ".", "tolist", "(", ")", ",", "\n", "'threshold_set_center'", ":", "threshold_set_center", ".", "tolist", "(", ")", ",", "\n", "'threshold_set_center_norm'", ":", "threshold_set_center_norm", ".", "tolist", "(", ")", "}", "\n", "\n", "with", "open", "(", "result_plot_path", "+", "'/eval_data.pkl'", ",", "'wb'", ")", "as", "fh", ":", "\n", "        ", "pickle", ".", "dump", "(", "eval_data", ",", "fh", ")", "\n", "\n", "", "return", "eval_data", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.text_bargraph": [[7, 22], ["numpy.array", "numpy.array", "numpy.isnan", "str.join", "len", "len"], "function", ["None"], ["def", "text_bargraph", "(", "values", ")", ":", "\n", "\n", "    ", "blocks", "=", "np", ".", "array", "(", "(", "'u'", ",", "' '", ",", "'\u2581'", ",", "'\u2582'", ",", "'\u2583'", ",", "'\u2584'", ",", "'\u2585'", ",", "'\u2586'", ",", "'\u2587'", ",", "'\u2588'", ",", "'o'", ")", ")", "\n", "nsteps", "=", "len", "(", "blocks", ")", "-", "2", "-", "1", "\n", "hstep", "=", "1", "/", "(", "2", "*", "nsteps", ")", "\n", "values", "=", "np", ".", "array", "(", "values", ")", "\n", "nans", "=", "np", ".", "isnan", "(", "values", ")", "\n", "values", "[", "nans", "]", "=", "0", "# '\u2591'", "\n", "indices", "=", "(", "(", "values", "+", "hstep", ")", "*", "nsteps", "+", "1", ")", ".", "astype", "(", "np", ".", "int", ")", "\n", "indices", "[", "values", "<", "0", "]", "=", "0", "\n", "indices", "[", "values", ">", "1", "]", "=", "len", "(", "blocks", ")", "-", "1", "\n", "graph", "=", "blocks", "[", "indices", "]", "\n", "graph", "[", "nans", "]", "=", "'\u2591'", "\n", "graph", "=", "str", ".", "join", "(", "''", ",", "graph", ")", "\n", "return", "graph", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.davis_jaccard_measure": [[34, 50], ["gt_mask.astype.astype", "fg_mask.astype.astype", "numpy.isclose", "numpy.isclose", "numpy.sum", "numpy.sum", "numpy.sum", "numpy.sum"], "function", ["None"], ["", "def", "davis_jaccard_measure", "(", "fg_mask", ",", "gt_mask", ")", ":", "\n", "    ", "\"\"\" Compute region similarity as the Jaccard Index.\n\n    :param fg_mask: (ndarray): binary segmentation map.\n    :param gt_mask: (ndarray): binary annotation map.\n    :return: jaccard (float): region similarity\n    \"\"\"", "\n", "\n", "gt_mask", "=", "gt_mask", ".", "astype", "(", "np", ".", "bool", ")", "\n", "fg_mask", "=", "fg_mask", ".", "astype", "(", "np", ".", "bool", ")", "\n", "\n", "if", "np", ".", "isclose", "(", "np", ".", "sum", "(", "gt_mask", ")", ",", "0", ")", "and", "np", ".", "isclose", "(", "np", ".", "sum", "(", "fg_mask", ")", ",", "0", ")", ":", "\n", "        ", "return", "1", "\n", "", "else", ":", "\n", "        ", "return", "np", ".", "sum", "(", "(", "gt_mask", "&", "fg_mask", ")", ")", "/", "np", ".", "sum", "(", "(", "gt_mask", "|", "fg_mask", ")", ",", "dtype", "=", "np", ".", "float32", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.davis_jaccard_measure_torch": [[52, 68], ["gt_mask.sum", "fg_mask.sum"], "function", ["None"], ["", "", "def", "davis_jaccard_measure_torch", "(", "fg_mask", ",", "gt_mask", ")", ":", "\n", "    ", "\"\"\" Compute region similarity as the Jaccard Index.\n\n    :param fg_mask: (ndarray): binary segmentation map.\n    :param gt_mask: (ndarray): binary annotation map.\n    :return: jaccard (float): region similarity\n    \"\"\"", "\n", "\n", "#gt_mask = gt_mask.astype(np.bool)", "\n", "#fg_mask = fg_mask.astype(np.bool)", "\n", "\n", "if", "gt_mask", ".", "sum", "(", ")", "==", "0", "and", "fg_mask", ".", "sum", "(", ")", "==", "0", ":", "\n", "        ", "return", "1", "\n", "", "else", ":", "\n", "        ", "return", "(", "gt_mask", "&", "fg_mask", ")", ".", "sum", "(", ")", "/", "(", "gt_mask", "|", "fg_mask", ")", ".", "sum", "(", ")", ".", "float", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.davis_f_measure": [[70, 126], ["vos_utils.seg2bmap", "vos_utils.seg2bmap", "skimage.morphology.binary_dilation", "skimage.morphology.binary_dilation", "numpy.sum", "numpy.sum", "numpy.ceil", "skimage.morphology.disk", "skimage.morphology.disk", "numpy.atleast_3d", "numpy.linalg.norm", "numpy.sum", "float", "numpy.sum", "float"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.seg2bmap", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.seg2bmap"], ["", "", "def", "davis_f_measure", "(", "foreground_mask", ",", "gt_mask", ",", "bound_th", "=", "0.008", ")", ":", "\n", "    ", "\"\"\"\n    Compute mean,recall and decay from per-frame evaluation.\n    Calculates precision/recall for boundaries between foreground_mask and\n    gt_mask using morphological operators to speed it up.\n\n    Arguments:\n        foreground_mask (ndarray): binary segmentation image.\n        gt_mask         (ndarray): binary annotated image.\n\n    Returns:\n        F (float): boundaries F-measure\n        P (float): boundaries precision\n        R (float): boundaries recall\n    \"\"\"", "\n", "assert", "np", ".", "atleast_3d", "(", "foreground_mask", ")", ".", "shape", "[", "2", "]", "==", "1", "\n", "\n", "bound_pix", "=", "bound_th", "if", "bound_th", ">=", "1", "else", "np", ".", "ceil", "(", "bound_th", "*", "np", ".", "linalg", ".", "norm", "(", "foreground_mask", ".", "shape", ")", ")", "\n", "\n", "# Get the pixel boundaries of both masks", "\n", "fg_boundary", "=", "seg2bmap", "(", "foreground_mask", ")", "\n", "gt_boundary", "=", "seg2bmap", "(", "gt_mask", ")", "\n", "\n", "fg_dil", "=", "binary_dilation", "(", "fg_boundary", ",", "disk", "(", "bound_pix", ")", ")", "\n", "gt_dil", "=", "binary_dilation", "(", "gt_boundary", ",", "disk", "(", "bound_pix", ")", ")", "\n", "\n", "# Get the intersection", "\n", "gt_match", "=", "gt_boundary", "*", "fg_dil", "\n", "fg_match", "=", "fg_boundary", "*", "gt_dil", "\n", "\n", "# Area of the intersection", "\n", "n_fg", "=", "np", ".", "sum", "(", "fg_boundary", ")", "\n", "n_gt", "=", "np", ".", "sum", "(", "gt_boundary", ")", "\n", "\n", "# % Compute precision and recall", "\n", "if", "n_fg", "==", "0", "and", "n_gt", ">", "0", ":", "\n", "        ", "precision", "=", "1", "\n", "recall", "=", "0", "\n", "", "elif", "n_fg", ">", "0", "and", "n_gt", "==", "0", ":", "\n", "        ", "precision", "=", "0", "\n", "recall", "=", "1", "\n", "", "elif", "n_fg", "==", "0", "and", "n_gt", "==", "0", ":", "\n", "        ", "precision", "=", "1", "\n", "recall", "=", "1", "\n", "", "else", ":", "\n", "        ", "precision", "=", "np", ".", "sum", "(", "fg_match", ")", "/", "float", "(", "n_fg", ")", "\n", "recall", "=", "np", ".", "sum", "(", "gt_match", ")", "/", "float", "(", "n_gt", ")", "\n", "\n", "# Compute F measure", "\n", "", "if", "precision", "+", "recall", "==", "0", ":", "\n", "        ", "F", "=", "0", "\n", "", "else", ":", "\n", "        ", "F", "=", "2", "*", "precision", "*", "recall", "/", "(", "precision", "+", "recall", ")", "\n", "\n", "", "return", "F", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.seg2bmap": [[128, 187], ["seg.astype.astype", "numpy.zeros_like", "numpy.zeros_like", "numpy.zeros_like", "float", "float", "float", "float", "numpy.zeros", "range", "range", "numpy.atleast_3d", "abs", "math.floor", "math.floor"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs"], ["", "def", "seg2bmap", "(", "seg", ",", "width", "=", "None", ",", "height", "=", "None", ")", ":", "\n", "    ", "\"\"\"\n    From a segmentation, compute a binary boundary map with 1 pixel wide\n    boundaries.  The boundary pixels are offset by 1/2 pixel towards the\n    origin from the actual segment boundary.\n\n    Arguments:\n        seg     : Segments labeled from 1..k.\n        width\t  :\tWidth of desired bmap  <= seg.shape[1]\n        height  :\tHeight of desired bmap <= seg.shape[0]\n\n    Returns:\n        bmap (ndarray):\tBinary boundary map.\n\n     David Martin <dmartin@eecs.berkeley.edu>\n     January 2003\n \"\"\"", "\n", "\n", "seg", "=", "seg", ".", "astype", "(", "np", ".", "bool", ")", "\n", "seg", "[", "seg", ">", "0", "]", "=", "1", "\n", "\n", "assert", "np", ".", "atleast_3d", "(", "seg", ")", ".", "shape", "[", "2", "]", "==", "1", "\n", "\n", "width", "=", "seg", ".", "shape", "[", "1", "]", "if", "width", "is", "None", "else", "width", "\n", "height", "=", "seg", ".", "shape", "[", "0", "]", "if", "height", "is", "None", "else", "height", "\n", "\n", "h", ",", "w", "=", "seg", ".", "shape", "[", ":", "2", "]", "\n", "\n", "ar1", "=", "float", "(", "width", ")", "/", "float", "(", "height", ")", "\n", "ar2", "=", "float", "(", "w", ")", "/", "float", "(", "h", ")", "\n", "\n", "assert", "not", "(", "width", ">", "w", "|", "height", ">", "h", "|", "abs", "(", "ar1", "-", "ar2", ")", ">", "0.01", ")", ",", "'Can'", "'t convert %dx%d seg to %dx%d bmap.'", "%", "(", "w", ",", "h", ",", "width", ",", "height", ")", "\n", "\n", "e", "=", "np", ".", "zeros_like", "(", "seg", ")", "\n", "s", "=", "np", ".", "zeros_like", "(", "seg", ")", "\n", "se", "=", "np", ".", "zeros_like", "(", "seg", ")", "\n", "\n", "e", "[", ":", ",", ":", "-", "1", "]", "=", "seg", "[", ":", ",", "1", ":", "]", "\n", "s", "[", ":", "-", "1", ",", ":", "]", "=", "seg", "[", "1", ":", ",", ":", "]", "\n", "se", "[", ":", "-", "1", ",", ":", "-", "1", "]", "=", "seg", "[", "1", ":", ",", "1", ":", "]", "\n", "\n", "b", "=", "seg", "^", "e", "|", "seg", "^", "s", "|", "seg", "^", "se", "\n", "b", "[", "-", "1", ",", ":", "]", "=", "seg", "[", "-", "1", ",", ":", "]", "^", "e", "[", "-", "1", ",", ":", "]", "\n", "b", "[", ":", ",", "-", "1", "]", "=", "seg", "[", ":", ",", "-", "1", "]", "^", "s", "[", ":", ",", "-", "1", "]", "\n", "b", "[", "-", "1", ",", "-", "1", "]", "=", "0", "\n", "\n", "if", "w", "==", "width", "and", "h", "==", "height", ":", "\n", "        ", "bmap", "=", "b", "\n", "", "else", ":", "\n", "        ", "bmap", "=", "np", ".", "zeros", "(", "(", "height", ",", "width", ")", ")", "\n", "for", "x", "in", "range", "(", "w", ")", ":", "\n", "            ", "for", "y", "in", "range", "(", "h", ")", ":", "\n", "                ", "if", "b", "[", "y", ",", "x", "]", ":", "\n", "                    ", "j", "=", "1", "+", "floor", "(", "(", "y", "-", "1", ")", "+", "height", "/", "h", ")", "\n", "i", "=", "1", "+", "floor", "(", "(", "x", "-", "1", ")", "+", "width", "/", "h", ")", "\n", "bmap", "[", "j", ",", "i", "]", "=", "1", "\n", "\n", "", "", "", "", "return", "bmap", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.nanmean": [[189, 193], ["warnings.catch_warnings", "warnings.simplefilter", "numpy.nanmean"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.nanmean"], ["", "def", "nanmean", "(", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "    ", "with", "warnings", ".", "catch_warnings", "(", ")", ":", "\n", "        ", "warnings", ".", "simplefilter", "(", "\"ignore\"", ",", "category", "=", "RuntimeWarning", ")", "\n", "return", "np", ".", "nanmean", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean": [[195, 200], ["numpy.nanmean"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.nanmean"], ["", "", "def", "mean", "(", "X", ")", ":", "\n", "    ", "\"\"\"\n    Compute average ignoring NaN values.\n    \"\"\"", "\n", "return", "np", ".", "nanmean", "(", "X", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.recall": [[202, 211], ["warnings.catch_warnings", "warnings.simplefilter", "vos_utils.mean", "numpy.isnan"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], ["", "def", "recall", "(", "X", ",", "threshold", "=", "0.5", ")", ":", "\n", "    ", "\"\"\"\n    Fraction of values of X scoring higher than 'threshold'\n    \"\"\"", "\n", "with", "warnings", ".", "catch_warnings", "(", ")", ":", "\n", "        ", "warnings", ".", "simplefilter", "(", "\"ignore\"", ",", "category", "=", "RuntimeWarning", ")", "\n", "x", "=", "X", "[", "~", "np", ".", "isnan", "(", "X", ")", "]", "\n", "x", "=", "mean", "(", "x", ">", "threshold", ")", "\n", "", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.decay": [[213, 227], ["ids.astype.astype", "numpy.round", "warnings.catch_warnings", "warnings.simplefilter", "range", "numpy.nanmean", "numpy.nanmean", "numpy.isnan", "numpy.linspace", "len"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.nanmean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.nanmean"], ["", "def", "decay", "(", "X", ",", "n_bins", "=", "4", ")", ":", "\n", "    ", "\"\"\"\n    Performance loss over time.\n    \"\"\"", "\n", "X", "=", "X", "[", "~", "np", ".", "isnan", "(", "X", ")", "]", "\n", "ids", "=", "np", ".", "round", "(", "np", ".", "linspace", "(", "1", ",", "len", "(", "X", ")", ",", "n_bins", "+", "1", ")", "+", "1e-10", ")", "-", "1", "\n", "ids", "=", "ids", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "\n", "D_bins", "=", "[", "X", "[", "ids", "[", "i", "]", ":", "ids", "[", "i", "+", "1", "]", "+", "1", "]", "for", "i", "in", "range", "(", "0", ",", "4", ")", "]", "\n", "\n", "with", "warnings", ".", "catch_warnings", "(", ")", ":", "\n", "        ", "warnings", ".", "simplefilter", "(", "\"ignore\"", ",", "category", "=", "RuntimeWarning", ")", "\n", "D", "=", "np", ".", "nanmean", "(", "D_bins", "[", "0", "]", ")", "-", "np", ".", "nanmean", "(", "D_bins", "[", "3", "]", ")", "\n", "", "return", "D", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.std": [[229, 234], ["numpy.nanstd"], "function", ["None"], ["", "def", "std", "(", "X", ")", ":", "\n", "    ", "\"\"\"\n    Compute standard deviation.\n    \"\"\"", "\n", "return", "np", ".", "nanstd", "(", "X", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results.Display.__init__": [[20, 33], ["matplotlib.subplots", "matplotlib.subplots", "playback_results.Display.fig.canvas.mpl_connect", "matplotlib.tight_layout", "matplotlib.tight_layout"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "sequence_length", ",", "plot_draw_styles", ",", "sequence_name", ")", ":", "\n", "        ", "self", ".", "active", "=", "True", "\n", "self", ".", "frame_number", "=", "0", "\n", "self", ".", "pause_mode", "=", "True", "\n", "self", ".", "step_size", "=", "0", "\n", "self", ".", "step_direction", "=", "'forward'", "\n", "self", ".", "fig", ",", "self", ".", "ax", "=", "plt", ".", "subplots", "(", "1", ")", "\n", "self", ".", "fig", ".", "canvas", ".", "mpl_connect", "(", "'key_press_event'", ",", "self", ".", "key_callback_fn", ")", "\n", "plt", ".", "tight_layout", "(", ")", "\n", "\n", "self", ".", "sequence_length", "=", "sequence_length", "\n", "self", ".", "sequence_name", "=", "sequence_name", "\n", "self", ".", "plot_draw_styles", "=", "plot_draw_styles", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results.Display.key_callback_fn": [[34, 67], ["None"], "methods", ["None"], ["", "def", "key_callback_fn", "(", "self", ",", "event", ")", ":", "\n", "        ", "if", "event", ".", "key", "==", "' '", ":", "\n", "            ", "self", ".", "pause_mode", "=", "not", "self", ".", "pause_mode", "\n", "self", ".", "step_size", "=", "0", "\n", "self", ".", "step_direction", "=", "'forward'", "\n", "", "elif", "event", ".", "key", "==", "'right'", ":", "\n", "            ", "if", "self", ".", "pause_mode", ":", "\n", "                ", "self", ".", "frame_number", "+=", "1", "\n", "\n", "if", "self", ".", "frame_number", ">=", "self", ".", "sequence_length", ":", "\n", "                    ", "self", ".", "frame_number", "=", "self", ".", "sequence_length", "-", "1", "\n", "", "", "elif", "self", ".", "step_direction", "==", "'stop'", ":", "\n", "                ", "self", ".", "step_direction", "=", "'forward'", "\n", "self", ".", "step_size", "=", "0", "\n", "", "elif", "self", ".", "step_direction", "==", "'backward'", "and", "self", ".", "step_size", "==", "0", ":", "\n", "                ", "self", ".", "step_direction", "=", "'stop'", "\n", "", "else", ":", "\n", "                ", "self", ".", "step_size", "+=", "1", "\n", "", "", "elif", "event", ".", "key", "==", "'left'", ":", "\n", "            ", "if", "self", ".", "pause_mode", ":", "\n", "                ", "self", ".", "frame_number", "-=", "1", "\n", "\n", "if", "self", ".", "frame_number", "<", "0", ":", "\n", "                    ", "self", ".", "frame_number", "=", "0", "\n", "", "", "elif", "self", ".", "step_direction", "==", "'stop'", ":", "\n", "                ", "self", ".", "step_direction", "=", "'backward'", "\n", "self", ".", "step_size", "=", "0", "\n", "", "elif", "self", ".", "step_direction", "==", "'forward'", "and", "self", ".", "step_size", "==", "0", ":", "\n", "                ", "self", ".", "step_direction", "=", "'stop'", "\n", "", "else", ":", "\n", "                ", "self", ".", "step_size", "-=", "1", "\n", "", "", "elif", "event", ".", "key", "==", "'escape'", "or", "event", ".", "key", "==", "'q'", ":", "\n", "            ", "self", ".", "active", "=", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results.Display._get_speed": [[68, 76], ["abs", "abs"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs"], ["", "", "def", "_get_speed", "(", "self", ")", ":", "\n", "        ", "delta", "=", "0", "\n", "if", "self", ".", "step_direction", "==", "'forward'", ":", "\n", "            ", "delta", "=", "2", "**", "abs", "(", "self", ".", "step_size", ")", "\n", "", "elif", "self", ".", "step_direction", "==", "'backward'", ":", "\n", "            ", "delta", "=", "-", "1", "*", "2", "**", "abs", "(", "self", ".", "step_size", ")", "\n", "\n", "", "return", "delta", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results.Display.step": [[77, 85], ["playback_results.Display._get_speed"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results.Display._get_speed"], ["", "def", "step", "(", "self", ")", ":", "\n", "        ", "delta", "=", "self", ".", "_get_speed", "(", ")", "\n", "\n", "self", ".", "frame_number", "+=", "delta", "\n", "if", "self", ".", "frame_number", "<", "0", ":", "\n", "            ", "self", ".", "frame_number", "=", "0", "\n", "", "elif", "self", ".", "frame_number", ">=", "self", ".", "sequence_length", ":", "\n", "            ", "self", ".", "frame_number", "=", "self", ".", "sequence_length", "-", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results.Display.show": [[86, 116], ["playback_results.Display.ax.cla", "playback_results.Display.ax.imshow", "enumerate", "playback_results.Display.ax.set_axis_off", "playback_results.Display.ax.axis", "matplotlib.legend", "matplotlib.legend", "playback_results.Display._get_speed", "playback_results.Display.fig.suptitle", "pytracking.utils.plotting.draw_figure", "matplotlib.Rectangle", "matplotlib.Rectangle", "playback_results.Display.ax.add_patch", "rect_handles.append", "matplotlib.Rectangle", "matplotlib.Rectangle", "playback_results.Display.ax.add_patch", "rect_handles.append", "matplotlib.Rectangle", "matplotlib.Rectangle"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results.Display._get_speed", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.draw_figure"], ["", "", "def", "show", "(", "self", ",", "image", ",", "bb_list", ",", "trackers", ",", "gt", "=", "None", ")", ":", "\n", "        ", "self", ".", "ax", ".", "cla", "(", ")", "\n", "self", ".", "ax", ".", "imshow", "(", "image", ")", "\n", "\n", "# Draw rects", "\n", "rect_handles", "=", "[", "]", "\n", "for", "i", ",", "bb", "in", "enumerate", "(", "bb_list", ")", ":", "\n", "            ", "rect", "=", "patches", ".", "Rectangle", "(", "(", "bb", "[", "0", "]", ",", "bb", "[", "1", "]", ")", ",", "bb", "[", "2", "]", ",", "bb", "[", "3", "]", ",", "linewidth", "=", "1", ",", "\n", "edgecolor", "=", "self", ".", "plot_draw_styles", "[", "i", "]", "[", "'color'", "]", ",", "facecolor", "=", "'none'", ")", "\n", "self", ".", "ax", ".", "add_patch", "(", "rect", ")", "\n", "\n", "rect_handles", ".", "append", "(", "patches", ".", "Rectangle", "(", "(", "bb", "[", "0", "]", ",", "bb", "[", "1", "]", ")", ",", "bb", "[", "2", "]", ",", "bb", "[", "3", "]", ",", "linewidth", "=", "1", ",", "\n", "edgecolor", "=", "self", ".", "plot_draw_styles", "[", "i", "]", "[", "'color'", "]", ",", "\n", "facecolor", "=", "self", ".", "plot_draw_styles", "[", "i", "]", "[", "'color'", "]", ",", "\n", "label", "=", "trackers", "[", "i", "]", ")", ")", "\n", "\n", "", "if", "gt", "is", "not", "None", ":", "\n", "            ", "rect", "=", "patches", ".", "Rectangle", "(", "(", "gt", "[", "0", "]", ",", "gt", "[", "1", "]", ")", ",", "gt", "[", "2", "]", ",", "gt", "[", "3", "]", ",", "linewidth", "=", "2", ",", "edgecolor", "=", "'g'", ",", "\n", "facecolor", "=", "'none'", ")", "\n", "self", ".", "ax", ".", "add_patch", "(", "rect", ")", "\n", "rect_handles", ".", "append", "(", "rect", ")", "\n", "\n", "", "self", ".", "ax", ".", "set_axis_off", "(", ")", "\n", "self", ".", "ax", ".", "axis", "(", "'equal'", ")", "\n", "plt", ".", "legend", "(", "handles", "=", "rect_handles", ",", "loc", "=", "4", ",", "borderaxespad", "=", "0.", ")", "\n", "mode", "=", "'manual'", "if", "self", ".", "pause_mode", "else", "'auto     '", "\n", "speed", "=", "self", ".", "_get_speed", "(", ")", "\n", "self", ".", "fig", ".", "suptitle", "(", "'Sequence: {}    Mode: {}    Speed: {:d}x'", ".", "format", "(", "self", ".", "sequence_name", ",", "mode", ",", "speed", ")", ",", "\n", "fontsize", "=", "14", ")", "\n", "draw_figure", "(", "self", ".", "fig", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results.read_image": [[118, 121], ["cv2.imread", "cv2.cvtColor"], "function", ["None"], ["", "", "def", "read_image", "(", "image_file", ":", "str", ")", ":", "\n", "    ", "im", "=", "cv", ".", "imread", "(", "image_file", ")", "\n", "return", "cv", ".", "cvtColor", "(", "im", ",", "cv", ".", "COLOR_BGR2RGB", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results._get_display_name": [[123, 131], ["None"], "function", ["None"], ["", "def", "_get_display_name", "(", "tracker", ")", ":", "\n", "    ", "if", "tracker", ".", "display_name", "is", "None", ":", "\n", "        ", "if", "tracker", ".", "run_id", "is", "not", "None", ":", "\n", "            ", "return", "'{}_{}_{:03d}'", ".", "format", "(", "tracker", ".", "name", ",", "tracker", ".", "parameter_name", ",", "tracker", ".", "run_id", ")", "\n", "", "else", ":", "\n", "            ", "return", "'{}_{}'", ".", "format", "(", "tracker", ".", "name", ",", "tracker", ".", "parameter_name", ")", "\n", "", "", "else", ":", "\n", "        ", "return", "tracker", ".", "display_name", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results.playback_results": [[133, 176], ["pytracking.analysis.plot_results.get_plot_draw_styles", "enumerate", "torch.stack().tolist", "playback_results.Display", "os.path.isfile", "torch.stack().tolist.append", "playback_results._get_display_name", "len", "playback_results.read_image", "playback_results.Display.show", "time.sleep", "Exception", "torch.stack", "time.sleep", "torch.tensor", "playback_results.Display.step", "numpy.loadtxt", "torch.tensor", "str", "numpy.loadtxt", "str"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.get_plot_draw_styles", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results._get_display_name", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results.read_image", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results.Display.show", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results.Display.step"], ["", "", "def", "playback_results", "(", "trackers", ",", "sequence", ")", ":", "\n", "    ", "\"\"\"\n    Playback saved results of input trackers for a particular sequence. You can navigate the sequence using left/right\n    arrow keys. You can also change to 'auto' mode by pressing space bar, in which case the sequence will be replayed\n    at a particular speed. The speed for playback in 'auto' mode can be controlled using the left/right arrow keys.\n    You can exit the application using escape or q keys.\n    \"\"\"", "\n", "plot_draw_styles", "=", "get_plot_draw_styles", "(", ")", "\n", "\n", "tracker_results", "=", "[", "]", "\n", "# Load results", "\n", "for", "trk_id", ",", "trk", "in", "enumerate", "(", "trackers", ")", ":", "\n", "# Load results", "\n", "        ", "base_results_path", "=", "'{}/{}'", ".", "format", "(", "trk", ".", "results_dir", ",", "sequence", ".", "name", ")", "\n", "results_path", "=", "'{}.txt'", ".", "format", "(", "base_results_path", ")", "\n", "\n", "if", "os", ".", "path", ".", "isfile", "(", "results_path", ")", ":", "\n", "            ", "try", ":", "\n", "                ", "pred_bb", "=", "torch", ".", "tensor", "(", "np", ".", "loadtxt", "(", "str", "(", "results_path", ")", ",", "dtype", "=", "np", ".", "float64", ")", ")", "\n", "", "except", ":", "\n", "                ", "pred_bb", "=", "torch", ".", "tensor", "(", "np", ".", "loadtxt", "(", "str", "(", "results_path", ")", ",", "delimiter", "=", "','", ",", "dtype", "=", "np", ".", "float64", ")", ")", "\n", "", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "'Result not found. {}'", ".", "format", "(", "results_path", ")", ")", "\n", "\n", "", "tracker_results", ".", "append", "(", "pred_bb", ")", "\n", "\n", "# Convert to list of shape seq_length * num_trackers * 4", "\n", "", "tracker_results", "=", "torch", ".", "stack", "(", "tracker_results", ",", "dim", "=", "1", ")", ".", "tolist", "(", ")", "\n", "tracker_names", "=", "[", "_get_display_name", "(", "t", ")", "for", "t", "in", "trackers", "]", "\n", "\n", "display", "=", "Display", "(", "len", "(", "tracker_results", ")", ",", "plot_draw_styles", ",", "sequence", ".", "name", ")", "\n", "\n", "while", "display", ".", "active", ":", "\n", "        ", "frame_number", "=", "display", ".", "frame_number", "\n", "image", "=", "read_image", "(", "sequence", ".", "frames", "[", "frame_number", "]", ")", "\n", "\n", "display", ".", "show", "(", "image", ",", "tracker_results", "[", "frame_number", "]", ",", "tracker_names", ")", "\n", "\n", "time", ".", "sleep", "(", "0.01", ")", "\n", "if", "display", ".", "pause_mode", "and", "display", ".", "frame_number", "==", "frame_number", ":", "\n", "            ", "time", ".", "sleep", "(", "0.1", ")", "\n", "", "elif", "not", "display", ".", "pause_mode", ":", "\n", "            ", "display", ".", "step", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.evaluate_vos.evaluate_sequence": [[14, 45], ["dict", "object_info.items", "_statistics.items", "enumerate", "collections.OrderedDict", "numpy.ones", "zip", "float", "len", "list().index", "stat_fn", "results[].values", "len", "list", "annotations.keys"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["def", "evaluate_sequence", "(", "seq_name", ",", "segmentations", ",", "annotations", ",", "object_info", ",", "measure", "=", "'J'", ")", ":", "\n", "    ", "\"\"\"\n    Evaluate video sequence results.\n\n      Arguments:\n          segmentations (dict of ndarray): segmentation labels.\n          annotations   (dict of ndarray): ground-truth labels.\n          object_info   dict: {object_id: first_frame_index}\n\n      measure       evaluation metric (J,F)\n    \"\"\"", "\n", "\n", "results", "=", "dict", "(", "raw", "=", "OrderedDict", "(", ")", ")", "\n", "\n", "_measures", "=", "{", "'J'", ":", "utils", ".", "davis_jaccard_measure", ",", "'F'", ":", "utils", ".", "davis_f_measure", "}", "\n", "_statistics", "=", "{", "'decay'", ":", "utils", ".", "decay", ",", "'mean'", ":", "utils", ".", "mean", ",", "'recall'", ":", "utils", ".", "recall", ",", "'std'", ":", "utils", ".", "std", "}", "\n", "\n", "for", "obj_id", ",", "first_frame", "in", "object_info", ".", "items", "(", ")", ":", "\n", "\n", "        ", "r", "=", "np", ".", "ones", "(", "(", "len", "(", "annotations", ")", ")", ")", "*", "np", ".", "nan", "\n", "\n", "for", "i", ",", "(", "an", ",", "sg", ")", "in", "enumerate", "(", "zip", "(", "annotations", ",", "segmentations", ")", ")", ":", "\n", "            ", "if", "list", "(", "annotations", ".", "keys", "(", ")", ")", ".", "index", "(", "first_frame", ")", "<", "i", "<", "len", "(", "annotations", ")", "-", "1", ":", "\n", "                ", "r", "[", "i", "]", "=", "_measures", "[", "measure", "]", "(", "annotations", "[", "an", "]", "==", "obj_id", ",", "segmentations", "[", "sg", "]", "==", "obj_id", ")", "\n", "\n", "", "", "results", "[", "'raw'", "]", "[", "obj_id", "]", "=", "r", "\n", "\n", "", "for", "stat", ",", "stat_fn", "in", "_statistics", ".", "items", "(", ")", ":", "\n", "        ", "results", "[", "stat", "]", "=", "[", "float", "(", "stat_fn", "(", "r", ")", ")", "for", "r", "in", "results", "[", "'raw'", "]", ".", "values", "(", ")", "]", "\n", "\n", "", "return", "results", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.evaluate_vos.evaluate_dataset": [[47, 138], ["pytracking.evaluation.get_dataset", "collections.OrderedDict", "enumerate", "evaluate_vos.evaluate_dataset._print"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.datasets.get_dataset"], ["", "def", "evaluate_dataset", "(", "results_path", ",", "dset_name", ",", "measure", "=", "'J'", ",", "to_file", "=", "True", ",", "scores", "=", "False", ",", "sequences", "=", "None", ",", "quiet", "=", "False", ")", ":", "\n", "    ", "dset", "=", "get_dataset", "(", "dset_name", ")", "\n", "results", "=", "OrderedDict", "(", ")", "\n", "dset_scores", "=", "[", "]", "\n", "dset_decay", "=", "[", "]", "\n", "dset_recall", "=", "[", "]", "\n", "\n", "if", "to_file", ":", "\n", "        ", "f", "=", "open", "(", "results_path", "/", "(", "\"evaluation-%s.txt\"", "%", "measure", ")", ",", "\"w\"", ")", "\n", "\n", "", "def", "_print", "(", "msg", ")", ":", "\n", "        ", "if", "not", "quiet", ":", "\n", "            ", "print", "(", "msg", ")", "\n", "", "if", "to_file", ":", "\n", "            ", "print", "(", "msg", ",", "file", "=", "f", ")", "\n", "\n", "", "", "if", "sequences", "is", "not", "None", ":", "\n", "        ", "sequences", "=", "[", "sequences", "]", "if", "not", "isinstance", "(", "sequences", ",", "(", "list", ",", "tuple", ")", ")", "else", "sequences", "\n", "\n", "", "target_names", "=", "[", "]", "\n", "for", "j", ",", "sequence", "in", "enumerate", "(", "dset", ")", ":", "\n", "        ", "if", "(", "sequences", "is", "not", "None", ")", "and", "(", "sequence", ".", "name", "not", "in", "sequences", ")", ":", "\n", "            ", "continue", "\n", "\n", "# Load all frames", "\n", "", "frames", "=", "sequence", ".", "ground_truth_seg", "\n", "\n", "annotations", "=", "OrderedDict", "(", ")", "\n", "segmentations", "=", "OrderedDict", "(", ")", "\n", "\n", "for", "f", "in", "frames", ":", "\n", "            ", "if", "f", "is", "None", ":", "\n", "                ", "continue", "\n", "\n", "", "file", "=", "Path", "(", "f", ")", "\n", "annotations", "[", "file", ".", "name", "]", "=", "imread_indexed", "(", "file", ")", "\n", "if", "not", "scores", ":", "\n", "                ", "segmentations", "[", "file", ".", "name", "]", "=", "imread_indexed", "(", "os", ".", "path", ".", "join", "(", "results_path", ",", "sequence", ".", "name", ",", "file", ".", "name", ")", ")", "\n", "", "else", ":", "\n", "                ", "raise", "NotImplementedError", "\n", "# Find object ids and starting frames", "\n", "\n", "", "", "object_info", "=", "dict", "(", ")", "\n", "\n", "for", "f_id", ",", "d", "in", "sequence", ".", "init_data", ".", "items", "(", ")", ":", "\n", "            ", "for", "obj_id", "in", "d", "[", "'object_ids'", "]", ":", "\n", "                ", "object_info", "[", "int", "(", "obj_id", ")", "]", "=", "Path", "(", "d", "[", "'mask'", "]", ")", ".", "name", "\n", "\n", "", "", "if", "0", "in", "object_info", ":", "# Remove background", "\n", "            ", "object_info", ".", "pop", "(", "0", ")", "\n", "\n", "# Evaluate", "\n", "", "n_seqs", "=", "len", "(", "dset", ")", "\n", "n_objs", "=", "len", "(", "object_info", ")", "\n", "seq_name", "=", "sequence", ".", "name", "\n", "\n", "_print", "(", "\"%d/%d: %s: %d object%s\"", "%", "(", "j", "+", "1", ",", "n_seqs", ",", "seq_name", ",", "n_objs", ",", "\"s\"", "if", "n_objs", ">", "1", "else", "\"\"", ")", ")", "\n", "r", "=", "evaluate_sequence", "(", "seq_name", ",", "segmentations", ",", "annotations", ",", "object_info", ",", "measure", "=", "measure", ")", "\n", "results", "[", "seq_name", "]", "=", "r", "\n", "\n", "# Print scores, per frame and object, ignoring NaNs", "\n", "\n", "per_obj_score", "=", "[", "]", "# Per-object accuracies, averaged over the sequence", "\n", "per_frame_score", "=", "[", "]", "# Per-frame accuracies, averaged over the objects", "\n", "\n", "for", "obj_id", ",", "score", "in", "r", "[", "'raw'", "]", ".", "items", "(", ")", ":", "\n", "            ", "target_names", ".", "append", "(", "'{}_{}'", ".", "format", "(", "seq_name", ",", "obj_id", ")", ")", "\n", "per_frame_score", ".", "append", "(", "score", ")", "\n", "s", "=", "utils", ".", "mean", "(", "score", ")", "# Sequence average for one object", "\n", "per_obj_score", ".", "append", "(", "s", ")", "\n", "if", "n_objs", ">", "1", ":", "\n", "                ", "_print", "(", "\"joint {obj}: acc {score:.3f} \u250a{apf}\u250a\"", ".", "format", "(", "obj", "=", "obj_id", ",", "score", "=", "s", ",", "apf", "=", "utils", ".", "text_bargraph", "(", "score", ")", ")", ")", "\n", "\n", "# Print mean object score per frame and final score", "\n", "", "", "dset_decay", ".", "extend", "(", "r", "[", "'decay'", "]", ")", "\n", "dset_recall", ".", "extend", "(", "r", "[", "'recall'", "]", ")", "\n", "dset_scores", ".", "extend", "(", "per_obj_score", ")", "\n", "\n", "seq_score", "=", "utils", ".", "mean", "(", "per_obj_score", ")", "# Final score", "\n", "seq_mean_score", "=", "utils", ".", "nanmean", "(", "np", ".", "array", "(", "per_frame_score", ")", ",", "axis", "=", "0", ")", "# Mean object score per frame", "\n", "\n", "# Print sequence results", "\n", "_print", "(", "\"final  : acc {seq:.3f} ({dset:.3f}) \u250a{apf}\u250a\"", ".", "format", "(", "\n", "seq", "=", "seq_score", ",", "dset", "=", "np", ".", "mean", "(", "dset_scores", ")", ",", "apf", "=", "utils", ".", "text_bargraph", "(", "seq_mean_score", ")", ")", ")", "\n", "\n", "", "_print", "(", "\"%s: %.3f, recall: %.3f, decay: %.3f\"", "%", "(", "measure", ",", "utils", ".", "mean", "(", "dset_scores", ")", ",", "utils", ".", "mean", "(", "dset_recall", ")", ",", "utils", ".", "mean", "(", "dset_decay", ")", ")", ")", "\n", "\n", "if", "to_file", ":", "\n", "        ", "f", ".", "close", "(", ")", "\n", "\n", "", "return", "target_names", ",", "dset_scores", ",", "dset_recall", ",", "dset_decay", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.analysis.evaluate_vos.evaluate_vos": [[140, 200], ["pytracking.analysis.plot_results.generate_formatted_report", "print", "display_names.append", "os.path.join", "os.path.join", "scores[].append", "scores[].append", "scores[].append", "table_g_all.append", "table_seq_all.append", "os.path.exists", "os.path.exists", "pandas.read_csv", "pandas.read_csv", "evaluate_vos.evaluate_dataset", "numpy.array", "numpy.reshape", "pandas.DataFrame", "pandas.DataFrame", "open", "pd.DataFrame.to_csv", "open", "pd.DataFrame.to_csv", "pytracking.mean", "pytracking.mean", "pytracking.mean", "len", "list", "zip"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.plot_results.generate_formatted_report", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.evaluate_vos.evaluate_dataset", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "evaluate_vos", "(", "trackers", ",", "dataset", "=", "'yt2019_jjval'", ",", "force", "=", "False", ")", ":", "\n", "    ", "\"\"\" evaluate a list of trackers on a vos dataset.\n\n    args:\n        trackers - list of trackers to evaluate\n        dataset - name of the dataset\n        force - Force re-evaluation. If False, the pre-computed results are loaded if available\n    \"\"\"", "\n", "csv_name_global", "=", "f'{dataset}_global_results.csv'", "\n", "csv_name_per_sequence", "=", "f'{dataset}_per-sequence_results.csv'", "\n", "\n", "table_g_all", "=", "[", "]", "\n", "table_seq_all", "=", "[", "]", "\n", "scores", "=", "{", "'J-Mean'", ":", "[", "]", ",", "'J-Recall'", ":", "[", "]", ",", "'J-Decay'", ":", "[", "]", "}", "\n", "display_names", "=", "[", "]", "\n", "for", "t", "in", "trackers", ":", "\n", "        ", "if", "t", ".", "display_name", "is", "not", "None", ":", "\n", "            ", "disp_name", "=", "t", ".", "display_name", "\n", "", "elif", "t", ".", "run_id", "is", "not", "None", ":", "\n", "            ", "disp_name", "=", "'{} {}_{:03d}'", ".", "format", "(", "t", ".", "name", ",", "t", ".", "parameter_name", ",", "t", ".", "run_id", ")", "\n", "", "else", ":", "\n", "            ", "disp_name", "=", "'{} {}'", ".", "format", "(", "t", ".", "name", ",", "t", ".", "parameter_name", ")", "\n", "\n", "", "display_names", ".", "append", "(", "disp_name", ")", "\n", "results_path", "=", "t", ".", "segmentation_dir", "\n", "\n", "csv_name_global_path", "=", "os", ".", "path", ".", "join", "(", "results_path", ",", "csv_name_global", ")", "\n", "csv_name_per_sequence_path", "=", "os", ".", "path", ".", "join", "(", "results_path", ",", "csv_name_per_sequence", ")", "\n", "if", "os", ".", "path", ".", "exists", "(", "csv_name_global_path", ")", "and", "os", ".", "path", ".", "exists", "(", "csv_name_per_sequence_path", ")", "and", "not", "force", ":", "\n", "            ", "table_g", "=", "pd", ".", "read_csv", "(", "csv_name_global_path", ")", "\n", "table_seq", "=", "pd", ".", "read_csv", "(", "csv_name_per_sequence_path", ")", "\n", "", "else", ":", "\n", "            ", "seq_names", ",", "dset_scores", ",", "dset_recall", ",", "dset_decay", "=", "evaluate_dataset", "(", "results_path", ",", "dataset", ",", "measure", "=", "'J'", ",", "\n", "to_file", "=", "False", ",", "scores", "=", "False", ",", "\n", "sequences", "=", "None", ")", "\n", "g_measures", "=", "[", "'J-Mean'", ",", "'J-Recall'", ",", "'J-Decay'", "]", "\n", "g_res", "=", "np", ".", "array", "(", "[", "utils", ".", "mean", "(", "dset_scores", ")", ",", "utils", ".", "mean", "(", "dset_recall", ")", ",", "utils", ".", "mean", "(", "dset_decay", ")", "]", ")", "\n", "g_res", "=", "np", ".", "reshape", "(", "g_res", ",", "[", "1", ",", "len", "(", "g_res", ")", "]", ")", "\n", "\n", "table_g", "=", "pd", ".", "DataFrame", "(", "data", "=", "g_res", ",", "columns", "=", "g_measures", ")", "\n", "with", "open", "(", "csv_name_global_path", ",", "'w'", ")", "as", "f", ":", "\n", "                ", "table_g", ".", "to_csv", "(", "f", ",", "index", "=", "False", ",", "float_format", "=", "\"%.3f\"", ")", "\n", "\n", "", "seq_measures", "=", "[", "'Sequence'", ",", "'J-Mean'", ",", "'J-Recall'", ",", "'J-Decay'", "]", "\n", "\n", "table_seq", "=", "pd", ".", "DataFrame", "(", "data", "=", "list", "(", "zip", "(", "seq_names", ",", "dset_scores", ",", "dset_recall", ",", "dset_decay", ")", ")", ",", "columns", "=", "seq_measures", ")", "\n", "with", "open", "(", "csv_name_per_sequence_path", ",", "'w'", ")", "as", "f", ":", "\n", "                ", "table_seq", ".", "to_csv", "(", "f", ",", "index", "=", "False", ",", "float_format", "=", "\"%.3f\"", ")", "\n", "\n", "", "", "scores", "[", "'J-Mean'", "]", ".", "append", "(", "table_g", "[", "'J-Mean'", "]", ".", "values", "[", "0", "]", "*", "100", ")", "\n", "scores", "[", "'J-Recall'", "]", ".", "append", "(", "table_g", "[", "'J-Recall'", "]", ".", "values", "[", "0", "]", "*", "100", ")", "\n", "scores", "[", "'J-Decay'", "]", ".", "append", "(", "table_g", "[", "'J-Decay'", "]", ".", "values", "[", "0", "]", "*", "100", ")", "\n", "\n", "table_g_all", ".", "append", "(", "table_g", ")", "\n", "table_seq_all", ".", "append", "(", "table_seq", ")", "\n", "\n", "", "report", "=", "generate_formatted_report", "(", "display_names", ",", "scores", ")", "\n", "print", "(", "report", ")", "\n", "\n", "return", "table_g_all", ",", "table_seq_all", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.basetracker.BaseTracker.__init__": [[7, 10], ["None"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "params", ")", ":", "\n", "        ", "self", ".", "params", "=", "params", "\n", "self", ".", "visdom", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.basetracker.BaseTracker.predicts_segmentation_mask": [[11, 13], ["None"], "methods", ["None"], ["", "def", "predicts_segmentation_mask", "(", "self", ")", ":", "\n", "        ", "return", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.basetracker.BaseTracker.initialize": [[14, 17], ["None"], "methods", ["None"], ["", "def", "initialize", "(", "self", ",", "image", ",", "info", ":", "dict", ")", "->", "dict", ":", "\n", "        ", "\"\"\"Overload this function in your tracker. This should initialize the model.\"\"\"", "\n", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.basetracker.BaseTracker.track": [[18, 21], ["None"], "methods", ["None"], ["", "def", "track", "(", "self", ",", "image", ",", "info", ":", "dict", "=", "None", ")", "->", "dict", ":", "\n", "        ", "\"\"\"Overload this function in your tracker. This should track in the frame and update the model.\"\"\"", "\n", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.basetracker.BaseTracker.visdom_draw_tracking": [[22, 31], ["isinstance", "basetracker.BaseTracker.visdom.register", "basetracker.BaseTracker.visdom.register", "box.items"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register"], ["", "def", "visdom_draw_tracking", "(", "self", ",", "image", ",", "box", ",", "segmentation", "=", "None", ")", ":", "\n", "        ", "if", "isinstance", "(", "box", ",", "OrderedDict", ")", ":", "\n", "            ", "box", "=", "[", "v", "for", "k", ",", "v", "in", "box", ".", "items", "(", ")", "]", "\n", "", "else", ":", "\n", "            ", "box", "=", "(", "box", ",", ")", "\n", "", "if", "segmentation", "is", "None", ":", "\n", "            ", "self", ".", "visdom", ".", "register", "(", "(", "image", ",", "*", "box", ")", ",", "'Tracking'", ",", "1", ",", "'Tracking'", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "visdom", ".", "register", "(", "(", "image", ",", "*", "box", ",", "segmentation", ")", ",", "'Tracking'", ",", "1", ",", "'Tracking'", ")", "", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_utils.Preprocessor.__init__": [[7, 10], ["torch.tensor().view().cuda", "torch.tensor().view().cuda", "torch.tensor().view", "torch.tensor().view", "torch.tensor", "torch.tensor"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "self", ".", "mean", "=", "torch", ".", "tensor", "(", "[", "0.485", ",", "0.456", ",", "0.406", "]", ")", ".", "view", "(", "(", "1", ",", "3", ",", "1", ",", "1", ")", ")", ".", "cuda", "(", ")", "\n", "self", ".", "std", "=", "torch", ".", "tensor", "(", "[", "0.229", ",", "0.224", ",", "0.225", "]", ")", ".", "view", "(", "(", "1", ",", "3", ",", "1", ",", "1", ")", ")", ".", "cuda", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_utils.Preprocessor.process": [[11, 18], ["torch.tensor().cuda().float().permute().unsqueeze", "torch.from_numpy().to().cuda().unsqueeze", "lib.utils.misc.NestedTensor", "torch.tensor().cuda().float().permute", "torch.from_numpy().to().cuda", "torch.tensor().cuda().float", "torch.from_numpy().to", "torch.tensor().cuda", "torch.from_numpy", "torch.tensor"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to"], ["", "def", "process", "(", "self", ",", "img_arr", ":", "np", ".", "ndarray", ",", "amask_arr", ":", "np", ".", "ndarray", ")", ":", "\n", "# Deal with the image patch", "\n", "        ", "img_tensor", "=", "torch", ".", "tensor", "(", "img_arr", ")", ".", "cuda", "(", ")", ".", "float", "(", ")", ".", "permute", "(", "(", "2", ",", "0", ",", "1", ")", ")", ".", "unsqueeze", "(", "dim", "=", "0", ")", "\n", "img_tensor_norm", "=", "(", "(", "img_tensor", "/", "255.0", ")", "-", "self", ".", "mean", ")", "/", "self", ".", "std", "# (1,3,H,W)", "\n", "# Deal with the attention mask", "\n", "amask_tensor", "=", "torch", ".", "from_numpy", "(", "amask_arr", ")", ".", "to", "(", "torch", ".", "bool", ")", ".", "cuda", "(", ")", ".", "unsqueeze", "(", "dim", "=", "0", ")", "# (1,H,W)", "\n", "return", "NestedTensor", "(", "img_tensor_norm", ",", "amask_tensor", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_utils.PreprocessorX.__init__": [[21, 24], ["torch.tensor().view().cuda", "torch.tensor().view().cuda", "torch.tensor().view", "torch.tensor().view", "torch.tensor", "torch.tensor"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "self", ".", "mean", "=", "torch", ".", "tensor", "(", "[", "0.485", ",", "0.456", ",", "0.406", "]", ")", ".", "view", "(", "(", "1", ",", "3", ",", "1", ",", "1", ")", ")", ".", "cuda", "(", ")", "\n", "self", ".", "std", "=", "torch", ".", "tensor", "(", "[", "0.229", ",", "0.224", ",", "0.225", "]", ")", ".", "view", "(", "(", "1", ",", "3", ",", "1", ",", "1", ")", ")", ".", "cuda", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_utils.PreprocessorX.process": [[25, 32], ["torch.tensor().cuda().float().permute().unsqueeze", "torch.from_numpy().to().cuda().unsqueeze", "torch.tensor().cuda().float().permute", "torch.from_numpy().to().cuda", "torch.tensor().cuda().float", "torch.from_numpy().to", "torch.tensor().cuda", "torch.from_numpy", "torch.tensor"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to"], ["", "def", "process", "(", "self", ",", "img_arr", ":", "np", ".", "ndarray", ",", "amask_arr", ":", "np", ".", "ndarray", ")", ":", "\n", "# Deal with the image patch", "\n", "        ", "img_tensor", "=", "torch", ".", "tensor", "(", "img_arr", ")", ".", "cuda", "(", ")", ".", "float", "(", ")", ".", "permute", "(", "(", "2", ",", "0", ",", "1", ")", ")", ".", "unsqueeze", "(", "dim", "=", "0", ")", "\n", "img_tensor_norm", "=", "(", "(", "img_tensor", "/", "255.0", ")", "-", "self", ".", "mean", ")", "/", "self", ".", "std", "# (1,3,H,W)", "\n", "# Deal with the attention mask", "\n", "amask_tensor", "=", "torch", ".", "from_numpy", "(", "amask_arr", ")", ".", "to", "(", "torch", ".", "bool", ")", ".", "cuda", "(", ")", ".", "unsqueeze", "(", "dim", "=", "0", ")", "# (1,H,W)", "\n", "return", "img_tensor_norm", ",", "amask_tensor", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_utils.PreprocessorX_onnx.__init__": [[35, 38], ["numpy.array().reshape", "numpy.array().reshape", "numpy.array", "numpy.array"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "self", ".", "mean", "=", "np", ".", "array", "(", "[", "0.485", ",", "0.456", ",", "0.406", "]", ")", ".", "reshape", "(", "(", "1", ",", "3", ",", "1", ",", "1", ")", ")", "\n", "self", ".", "std", "=", "np", ".", "array", "(", "[", "0.229", ",", "0.224", ",", "0.225", "]", ")", ".", "reshape", "(", "(", "1", ",", "3", ",", "1", ",", "1", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_utils.PreprocessorX_onnx.process": [[39, 47], ["img_arr[].transpose", "img_arr[].transpose.astype", "amask_arr_3d.astype"], "methods", ["None"], ["", "def", "process", "(", "self", ",", "img_arr", ":", "np", ".", "ndarray", ",", "amask_arr", ":", "np", ".", "ndarray", ")", ":", "\n", "        ", "\"\"\"img_arr: (H,W,3), amask_arr: (H,W)\"\"\"", "\n", "# Deal with the image patch", "\n", "img_arr_4d", "=", "img_arr", "[", "np", ".", "newaxis", ",", ":", ",", ":", ",", ":", "]", ".", "transpose", "(", "0", ",", "3", ",", "1", ",", "2", ")", "\n", "img_arr_4d", "=", "(", "img_arr_4d", "/", "255.0", "-", "self", ".", "mean", ")", "/", "self", ".", "std", "# (1, 3, H, W)", "\n", "# Deal with the attention mask", "\n", "amask_arr_3d", "=", "amask_arr", "[", "np", ".", "newaxis", ",", ":", ",", ":", "]", "# (1,H,W)", "\n", "return", "img_arr_4d", ".", "astype", "(", "np", ".", "float32", ")", ",", "amask_arr_3d", ".", "astype", "(", "np", ".", "bool", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_s.STARK_S.__init__": [[14, 33], ["lib.test.tracker.basetracker.BaseTracker.__init__", "lib.models.stark.build_starks", "lib.models.stark.build_starks.load_state_dict", "lib.models.stark.build_starks.cuda", "stark_s.STARK_S.network.eval", "lib.test.tracker.stark_utils.Preprocessor", "torch.load", "os.path.exists", "os.makedirs"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_s.build_starks", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.eval", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load"], ["params", ".", "cfg", "=", "cfg", "\n", "print", "(", "\"test config: \"", ",", "cfg", ")", "\n", "\n", "# template and search region", "\n", "params", ".", "template_factor", "=", "cfg", ".", "TEST", ".", "TEMPLATE_FACTOR", "\n", "params", ".", "template_size", "=", "cfg", ".", "TEST", ".", "TEMPLATE_SIZE", "\n", "params", ".", "search_factor", "=", "cfg", ".", "TEST", ".", "SEARCH_FACTOR", "\n", "params", ".", "search_size", "=", "cfg", ".", "TEST", ".", "SEARCH_SIZE", "\n", "\n", "# Network checkpoint path", "\n", "params", ".", "checkpoint", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "\"checkpoints/train/stark_s/%s/STARKS_ep%04d.pth.tar\"", "%", "\n", "(", "yaml_name", ",", "cfg", ".", "TEST", ".", "EPOCH", ")", ")", "\n", "\n", "# whether to save boxes from all queries", "\n", "params", ".", "save_all_boxes", "=", "False", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_s.STARK_S.initialize": [[34, 48], ["lib.train.data.processing_utils.sample_target", "stark_s.STARK_S.preprocessor.process", "torch.no_grad", "stark_s.STARK_S.network.forward_backbone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_target", "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_utils.PreprocessorX_onnx.process", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt_new.forward_backbone"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_s.STARK_S.track": [[49, 84], ["lib.train.data.processing_utils.sample_target", "stark_s.STARK_S.preprocessor.process", "out_dict[].view", "lib.utils.box_ops.clip_box", "torch.no_grad", "stark_s.STARK_S.network.forward_backbone", "lib.utils.merge.merge_template_search", "stark_s.STARK_S.network.forward_transformer", "stark_s.STARK_S.map_box_back", "cv2.cvtColor", "cv2.rectangle", "os.path.join", "cv2.imwrite", "stark_s.STARK_S.map_box_back_batch", "stark_s.STARK_S.view().tolist", "int", "int", "int", "int", "stark_s.STARK_S.view", "out_dict[].view.mean"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_target", "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_utils.PreprocessorX_onnx.process", "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.clip_box", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt_new.forward_backbone", "home.repos.pwc.inspect_result.researchmm_Stark.utils.merge.merge_template_search", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.forward_transformer", "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_lightning_X_trt.STARK_LightningXtrt_onnx.map_box_back", "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_st.STARK_ST.map_box_back_batch", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_s.STARK_S.map_box_back": [[85, 92], ["None"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_s.STARK_S.map_box_back_batch": [[93, 100], ["pred_box.unbind", "torch.stack"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_s.get_tracker_class": [[102, 104], ["None"], "function", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_st.STARK_ST.__init__": [[15, 44], ["lib.test.tracker.basetracker.BaseTracker.__init__", "lib.models.stark.build_starkst", "lib.models.stark.build_starkst.load_state_dict", "lib.models.stark.build_starkst.cuda", "stark_st.STARK_ST.network.eval", "lib.test.tracker.stark_utils.Preprocessor", "dataset_name.upper", "hasattr", "print", "len", "torch.load", "os.path.exists", "os.makedirs"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_st.build_starkst", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.eval", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load"], ["print", "(", "\"test config: \"", ",", "cfg", ")", "\n", "\n", "# template and search region", "\n", "params", ".", "template_factor", "=", "cfg", ".", "TEST", ".", "TEMPLATE_FACTOR", "\n", "params", ".", "template_size", "=", "cfg", ".", "TEST", ".", "TEMPLATE_SIZE", "\n", "params", ".", "search_factor", "=", "cfg", ".", "TEST", ".", "SEARCH_FACTOR", "\n", "params", ".", "search_size", "=", "cfg", ".", "TEST", ".", "SEARCH_SIZE", "\n", "\n", "# Network checkpoint path", "\n", "params", ".", "checkpoint", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "\"checkpoints/train/stark_st2/%s/STARKST_ep%04d.pth.tar\"", "%", "\n", "(", "yaml_name", ",", "cfg", ".", "TEST", ".", "EPOCH", ")", ")", "\n", "\n", "# whether to save boxes from all queries", "\n", "params", ".", "save_all_boxes", "=", "False", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_st.STARK_ST.initialize": [[45, 66], ["lib.train.data.processing_utils.sample_target", "stark_st.STARK_ST.preprocessor.process", "stark_st.STARK_ST.z_dict_list.append", "range", "torch.no_grad", "stark_st.STARK_ST.network.forward_backbone", "stark_st.STARK_ST.z_dict_list.append", "copy.deepcopy"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_target", "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_utils.PreprocessorX_onnx.process", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt_new.forward_backbone"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_st.STARK_ST.track": [[67, 116], ["lib.train.data.processing_utils.sample_target", "stark_st.STARK_ST.preprocessor.process", "out_dict[].view", "lib.utils.box_ops.clip_box", "out_dict[].view().sigmoid().item", "enumerate", "torch.no_grad", "stark_st.STARK_ST.network.forward_backbone", "lib.utils.merge.merge_template_search", "stark_st.STARK_ST.network.forward_transformer", "stark_st.STARK_ST.map_box_back", "cv2.cvtColor", "cv2.rectangle", "os.path.join", "cv2.imwrite", "stark_st.STARK_ST.map_box_back_batch", "stark_st.STARK_ST.view().tolist", "out_dict[].view().sigmoid", "lib.train.data.processing_utils.sample_target", "stark_st.STARK_ST.preprocessor.process", "torch.no_grad", "stark_st.STARK_ST.network.forward_backbone", "int", "int", "int", "int", "stark_st.STARK_ST.view", "out_dict[].view.mean", "out_dict[].view"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_target", "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_utils.PreprocessorX_onnx.process", "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.clip_box", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt_new.forward_backbone", "home.repos.pwc.inspect_result.researchmm_Stark.utils.merge.merge_template_search", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.forward_transformer", "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_lightning_X_trt.STARK_LightningXtrt_onnx.map_box_back", "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_st.STARK_ST.map_box_back_batch", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_target", "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_utils.PreprocessorX_onnx.process", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt_new.forward_backbone", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_st.STARK_ST.map_box_back": [[117, 124], ["None"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_st.STARK_ST.map_box_back_batch": [[125, 132], ["pred_box.unbind", "torch.stack"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_st.get_tracker_class": [[134, 136], ["None"], "function", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_lightning_X_trt.STARK_LightningXtrt.__init__": [[19, 39], ["lib.test.tracker.basetracker.BaseTracker.__init__", "lib.models.stark.build_stark_lightning_x_trt", "lib.models.stark.build_stark_lightning_x_trt.load_state_dict", "lib.models.stark.repvgg.repvgg_model_convert", "lib.models.stark.build_stark_lightning_x_trt.cuda", "stark_lightning_X_trt.STARK_LightningXtrt.network.eval", "lib.test.tracker.stark_utils.PreprocessorX", "torch.load", "os.path.exists", "os.makedirs"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.build_stark_lightning_x_trt", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict", "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.repvgg_model_convert", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.eval", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load"], ["params", ".", "template_size", "=", "cfg", ".", "TEST", ".", "TEMPLATE_SIZE", "\n", "params", ".", "search_factor", "=", "cfg", ".", "TEST", ".", "SEARCH_FACTOR", "\n", "params", ".", "search_size", "=", "cfg", ".", "TEST", ".", "SEARCH_SIZE", "\n", "\n", "# Network checkpoint path", "\n", "params", ".", "checkpoint", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "\n", "\"checkpoints/train/stark_lightning_X_trt/%s/STARKLightningXtrt_ep%04d.pth.tar\"", "%", "\n", "(", "yaml_name", ",", "cfg", ".", "TEST", ".", "EPOCH", ")", ")", "\n", "# whether to save boxes from all queries", "\n", "params", ".", "save_all_boxes", "=", "False", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_lightning_X_trt.STARK_LightningXtrt.initialize": [[40, 50], ["lib.train.data.processing_utils.sample_target", "stark_lightning_X_trt.STARK_LightningXtrt.preprocessor.process", "torch.no_grad", "stark_lightning_X_trt.STARK_LightningXtrt.network.forward_backbone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_target", "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_utils.PreprocessorX_onnx.process", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt_new.forward_backbone"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_lightning_X_trt.STARK_LightningXtrt.track": [[51, 79], ["lib.train.data.processing_utils.sample_target", "stark_lightning_X_trt.STARK_LightningXtrt.preprocessor.process", "out_dict[].view", "lib.utils.box_ops.clip_box", "torch.no_grad", "stark_lightning_X_trt.STARK_LightningXtrt.network.forward_backbone", "lib.utils.merge.get_qkv", "stark_lightning_X_trt.STARK_LightningXtrt.network.forward_transformer", "stark_lightning_X_trt.STARK_LightningXtrt.map_box_back", "cv2.cvtColor", "cv2.rectangle", "os.path.join", "cv2.imwrite", "int", "int", "int", "int", "out_dict[].view.mean"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_target", "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_utils.PreprocessorX_onnx.process", "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.clip_box", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt_new.forward_backbone", "home.repos.pwc.inspect_result.researchmm_Stark.utils.merge.get_qkv", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.forward_transformer", "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_lightning_X_trt.STARK_LightningXtrt_onnx.map_box_back", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_lightning_X_trt.STARK_LightningXtrt.map_box_back": [[80, 87], ["None"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_lightning_X_trt.STARK_LightningXtrt_onnx.__init__": [[90, 120], ["lib.test.tracker.basetracker.BaseTracker.__init__", "print", "onnxruntime.InferenceSession", "onnxruntime.InferenceSession", "lib.test.tracker.stark_utils.PreprocessorX_onnx", "print", "multiprocessing.current_process", "int", "str", "os.path.exists", "os.makedirs", "worker_name.find"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_lightning_X_trt.STARK_LightningXtrt_onnx.initialize": [[121, 133], ["lib.train.data.processing_utils.sample_target", "stark_lightning_X_trt.STARK_LightningXtrt_onnx.preprocessor.process", "stark_lightning_X_trt.STARK_LightningXtrt_onnx.ort_sess_z.run"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_target", "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_utils.PreprocessorX_onnx.process", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.run"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_lightning_X_trt.STARK_LightningXtrt_onnx.track": [[134, 162], ["lib.train.data.processing_utils.sample_target", "stark_lightning_X_trt.STARK_LightningXtrt_onnx.preprocessor.process", "stark_lightning_X_trt.STARK_LightningXtrt_onnx.ort_sess_x.run", "lib.utils.box_ops.clip_box", "stark_lightning_X_trt.STARK_LightningXtrt_onnx.map_box_back", "cv2.cvtColor", "cv2.rectangle", "os.path.join", "cv2.imwrite", "int", "int", "int", "int", "ort_outs[].reshape"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_target", "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_utils.PreprocessorX_onnx.process", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.run", "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.clip_box", "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_lightning_X_trt.STARK_LightningXtrt_onnx.map_box_back"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_lightning_X_trt.STARK_LightningXtrt_onnx.map_box_back": [[163, 170], ["None"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracker.stark_lightning_X_trt.get_tracker_class": [[172, 180], ["print", "print"], "function", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.trackingnetdataset.TrackingNetDataset.__init__": [[18, 30], ["pytracking.evaluation.data.BaseDataset.__init__", "trackingnetdataset.TrackingNetDataset._list_sequences", "isinstance", "range"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.trackingnetdataset.TrackingNetDataset._list_sequences"], ["def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "base_path", "=", "self", ".", "env_settings", ".", "trackingnet_path", "\n", "\n", "sets", "=", "'TEST'", "\n", "if", "not", "isinstance", "(", "sets", ",", "(", "list", ",", "tuple", ")", ")", ":", "\n", "            ", "if", "sets", "==", "'TEST'", ":", "\n", "                ", "sets", "=", "[", "'TEST'", "]", "\n", "", "elif", "sets", "==", "'TRAIN'", ":", "\n", "                ", "sets", "=", "[", "'TRAIN_{}'", ".", "format", "(", "i", ")", "for", "i", "in", "range", "(", "5", ")", "]", "\n", "\n", "", "", "self", ".", "sequence_list", "=", "self", ".", "_list_sequences", "(", "self", ".", "base_path", ",", "sets", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.trackingnetdataset.TrackingNetDataset.get_sequence_list": [[31, 33], ["pytracking.evaluation.data.SequenceList", "trackingnetdataset.TrackingNetDataset._construct_sequence"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOS._construct_sequence"], ["", "def", "get_sequence_list", "(", "self", ")", ":", "\n", "        ", "return", "SequenceList", "(", "[", "self", ".", "_construct_sequence", "(", "set", ",", "seq_name", ")", "for", "set", ",", "seq_name", "in", "self", ".", "sequence_list", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.trackingnetdataset.TrackingNetDataset._construct_sequence": [[34, 45], ["pytracking.utils.load_text.load_text", "frame_list.sort", "pytracking.evaluation.data.Sequence", "str", "os.path.join", "pytracking.utils.load_text.load_text.reshape", "os.listdir", "frame.endswith", "int"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.load_text.load_text"], ["", "def", "_construct_sequence", "(", "self", ",", "set", ",", "sequence_name", ")", ":", "\n", "        ", "anno_path", "=", "'{}/{}/anno/{}.txt'", ".", "format", "(", "self", ".", "base_path", ",", "set", ",", "sequence_name", ")", "\n", "\n", "ground_truth_rect", "=", "load_text", "(", "str", "(", "anno_path", ")", ",", "delimiter", "=", "','", ",", "dtype", "=", "np", ".", "float64", ",", "backend", "=", "'numpy'", ")", "\n", "\n", "frames_path", "=", "'{}/{}/frames/{}'", ".", "format", "(", "self", ".", "base_path", ",", "set", ",", "sequence_name", ")", "\n", "frame_list", "=", "[", "frame", "for", "frame", "in", "os", ".", "listdir", "(", "frames_path", ")", "if", "frame", ".", "endswith", "(", "\".jpg\"", ")", "]", "\n", "frame_list", ".", "sort", "(", "key", "=", "lambda", "f", ":", "int", "(", "f", "[", ":", "-", "4", "]", ")", ")", "\n", "frames_list", "=", "[", "os", ".", "path", ".", "join", "(", "frames_path", ",", "frame", ")", "for", "frame", "in", "frame_list", "]", "\n", "\n", "return", "Sequence", "(", "sequence_name", ",", "frames_list", ",", "'trackingnet'", ",", "ground_truth_rect", ".", "reshape", "(", "-", "1", ",", "4", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.trackingnetdataset.TrackingNetDataset.__len__": [[46, 48], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "sequence_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.trackingnetdataset.TrackingNetDataset._list_sequences": [[49, 59], ["os.path.join", "os.listdir", "f.endswith", "os.path.splitext"], "methods", ["None"], ["", "def", "_list_sequences", "(", "self", ",", "root", ",", "set_ids", ")", ":", "\n", "        ", "sequence_list", "=", "[", "]", "\n", "\n", "for", "s", "in", "set_ids", ":", "\n", "            ", "anno_dir", "=", "os", ".", "path", ".", "join", "(", "root", ",", "s", ",", "\"anno\"", ")", "\n", "sequences_cur_set", "=", "[", "(", "s", ",", "os", ".", "path", ".", "splitext", "(", "f", ")", "[", "0", "]", ")", "for", "f", "in", "os", ".", "listdir", "(", "anno_dir", ")", "if", "f", ".", "endswith", "(", "'.txt'", ")", "]", "\n", "\n", "sequence_list", "+=", "sequences_cur_set", "\n", "\n", "", "return", "sequence_list", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.running._save_tracker_output": [[11, 74], ["os.path.join", "os.path.join", "output.items", "os.path.exists", "os.makedirs", "numpy.array().astype", "numpy.savetxt", "numpy.array().astype", "numpy.savetxt", "os.path.splitext", "elem.items", "isinstance", "os.path.basename", "numpy.array", "numpy.array", "running._save_tracker_output._convert_dict"], "function", ["None"], ["def", "_save_tracker_output", "(", "seq", ":", "Sequence", ",", "tracker", ":", "Tracker", ",", "output", ":", "dict", ")", ":", "\n", "    ", "\"\"\"Saves the output of the tracker.\"\"\"", "\n", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "tracker", ".", "results_dir", ")", ":", "\n", "        ", "print", "(", "\"create tracking result dir:\"", ",", "tracker", ".", "results_dir", ")", "\n", "os", ".", "makedirs", "(", "tracker", ".", "results_dir", ")", "\n", "", "if", "seq", ".", "dataset", "in", "[", "'trackingnet'", ",", "'got10k'", "]", ":", "\n", "        ", "if", "not", "os", ".", "path", ".", "exists", "(", "os", ".", "path", ".", "join", "(", "tracker", ".", "results_dir", ",", "seq", ".", "dataset", ")", ")", ":", "\n", "            ", "os", ".", "makedirs", "(", "os", ".", "path", ".", "join", "(", "tracker", ".", "results_dir", ",", "seq", ".", "dataset", ")", ")", "\n", "", "", "'''2021.1.5 create new folder for these two datasets'''", "\n", "if", "seq", ".", "dataset", "in", "[", "'trackingnet'", ",", "'got10k'", "]", ":", "\n", "        ", "base_results_path", "=", "os", ".", "path", ".", "join", "(", "tracker", ".", "results_dir", ",", "seq", ".", "dataset", ",", "seq", ".", "name", ")", "\n", "", "else", ":", "\n", "        ", "base_results_path", "=", "os", ".", "path", ".", "join", "(", "tracker", ".", "results_dir", ",", "seq", ".", "name", ")", "\n", "\n", "", "def", "save_bb", "(", "file", ",", "data", ")", ":", "\n", "        ", "tracked_bb", "=", "np", ".", "array", "(", "data", ")", ".", "astype", "(", "int", ")", "\n", "np", ".", "savetxt", "(", "file", ",", "tracked_bb", ",", "delimiter", "=", "'\\t'", ",", "fmt", "=", "'%d'", ")", "\n", "\n", "", "def", "save_time", "(", "file", ",", "data", ")", ":", "\n", "        ", "exec_times", "=", "np", ".", "array", "(", "data", ")", ".", "astype", "(", "float", ")", "\n", "np", ".", "savetxt", "(", "file", ",", "exec_times", ",", "delimiter", "=", "'\\t'", ",", "fmt", "=", "'%f'", ")", "\n", "\n", "", "def", "save_score", "(", "file", ",", "data", ")", ":", "\n", "        ", "scores", "=", "np", ".", "array", "(", "data", ")", ".", "astype", "(", "float", ")", "\n", "np", ".", "savetxt", "(", "file", ",", "scores", ",", "delimiter", "=", "'\\t'", ",", "fmt", "=", "'%.2f'", ")", "\n", "\n", "", "def", "_convert_dict", "(", "input_dict", ")", ":", "\n", "        ", "data_dict", "=", "{", "}", "\n", "for", "elem", "in", "input_dict", ":", "\n", "            ", "for", "k", ",", "v", "in", "elem", ".", "items", "(", ")", ":", "\n", "                ", "if", "k", "in", "data_dict", ".", "keys", "(", ")", ":", "\n", "                    ", "data_dict", "[", "k", "]", ".", "append", "(", "v", ")", "\n", "", "else", ":", "\n", "                    ", "data_dict", "[", "k", "]", "=", "[", "v", ",", "]", "\n", "", "", "", "return", "data_dict", "\n", "\n", "", "for", "key", ",", "data", "in", "output", ".", "items", "(", ")", ":", "\n", "# If data is empty", "\n", "        ", "if", "not", "data", ":", "\n", "            ", "continue", "\n", "\n", "", "if", "key", "==", "'target_bbox'", ":", "\n", "            ", "if", "isinstance", "(", "data", "[", "0", "]", ",", "(", "dict", ",", "OrderedDict", ")", ")", ":", "\n", "                ", "data_dict", "=", "_convert_dict", "(", "data", ")", "\n", "\n", "for", "obj_id", ",", "d", "in", "data_dict", ".", "items", "(", ")", ":", "\n", "                    ", "bbox_file", "=", "'{}_{}.txt'", ".", "format", "(", "base_results_path", ",", "obj_id", ")", "\n", "save_bb", "(", "bbox_file", ",", "d", ")", "\n", "", "", "else", ":", "\n", "# Single-object mode", "\n", "                ", "bbox_file", "=", "'{}.txt'", ".", "format", "(", "base_results_path", ")", "\n", "save_bb", "(", "bbox_file", ",", "data", ")", "\n", "\n", "", "", "if", "key", "==", "'all_boxes'", ":", "\n", "            ", "if", "isinstance", "(", "data", "[", "0", "]", ",", "(", "dict", ",", "OrderedDict", ")", ")", ":", "\n", "                ", "data_dict", "=", "_convert_dict", "(", "data", ")", "\n", "\n", "for", "obj_id", ",", "d", "in", "data_dict", ".", "items", "(", ")", ":", "\n", "                    ", "bbox_file", "=", "'{}_{}_all_boxes.txt'", ".", "format", "(", "base_results_path", ",", "obj_id", ")", "\n", "save_bb", "(", "bbox_file", ",", "d", ")", "\n", "", "", "else", ":", "\n", "# Single-object mode", "\n", "                ", "bbox_file", "=", "'{}_all_boxes.txt'", ".", "format", "(", "base_results_path", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.running.run_sequence": [[76, 118], ["print", "sys.stdout.flush", "isinstance", "print", "running.run_sequence._results_exist"], "function", ["None"], ["\n", "", "", "if", "key", "==", "'all_scores'", ":", "\n", "            ", "if", "isinstance", "(", "data", "[", "0", "]", ",", "(", "dict", ",", "OrderedDict", ")", ")", ":", "\n", "                ", "data_dict", "=", "_convert_dict", "(", "data", ")", "\n", "\n", "for", "obj_id", ",", "d", "in", "data_dict", ".", "items", "(", ")", ":", "\n", "                    ", "bbox_file", "=", "'{}_{}_all_scores.txt'", ".", "format", "(", "base_results_path", ",", "obj_id", ")", "\n", "save_score", "(", "bbox_file", ",", "d", ")", "\n", "", "", "else", ":", "\n", "# Single-object mode", "\n", "                ", "print", "(", "\"saving scores...\"", ")", "\n", "bbox_file", "=", "'{}_all_scores.txt'", ".", "format", "(", "base_results_path", ")", "\n", "save_score", "(", "bbox_file", ",", "data", ")", "\n", "\n", "", "", "elif", "key", "==", "'time'", ":", "\n", "            ", "if", "isinstance", "(", "data", "[", "0", "]", ",", "dict", ")", ":", "\n", "                ", "data_dict", "=", "_convert_dict", "(", "data", ")", "\n", "\n", "for", "obj_id", ",", "d", "in", "data_dict", ".", "items", "(", ")", ":", "\n", "                    ", "timings_file", "=", "'{}_{}_time.txt'", ".", "format", "(", "base_results_path", ",", "obj_id", ")", "\n", "save_time", "(", "timings_file", ",", "d", ")", "\n", "", "", "else", ":", "\n", "                ", "timings_file", "=", "'{}_time.txt'", ".", "format", "(", "base_results_path", ")", "\n", "save_time", "(", "timings_file", ",", "data", ")", "\n", "\n", "\n", "", "", "", "", "def", "run_sequence", "(", "seq", ":", "Sequence", ",", "tracker", ":", "Tracker", ",", "debug", "=", "False", ",", "num_gpu", "=", "8", ")", ":", "\n", "    ", "\"\"\"Runs a tracker on a sequence.\"\"\"", "\n", "'''2021.1.2 Add multiple gpu support'''", "\n", "try", ":", "\n", "        ", "worker_name", "=", "multiprocessing", ".", "current_process", "(", ")", ".", "name", "\n", "worker_id", "=", "int", "(", "worker_name", "[", "worker_name", ".", "find", "(", "'-'", ")", "+", "1", ":", "]", ")", "-", "1", "\n", "gpu_id", "=", "worker_id", "%", "num_gpu", "\n", "torch", ".", "cuda", ".", "set_device", "(", "gpu_id", ")", "\n", "", "except", ":", "\n", "        ", "pass", "\n", "\n", "", "def", "_results_exist", "(", ")", ":", "\n", "        ", "if", "seq", ".", "object_ids", "is", "None", ":", "\n", "            ", "if", "seq", ".", "dataset", "in", "[", "'trackingnet'", ",", "'got10k'", "]", ":", "\n", "                ", "base_results_path", "=", "os", ".", "path", ".", "join", "(", "tracker", ".", "results_dir", ",", "seq", ".", "dataset", ",", "seq", ".", "name", ")", "\n", "bbox_file", "=", "'{}.txt'", ".", "format", "(", "base_results_path", ")", "\n", "", "else", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.running.run_dataset": [[120, 151], ["multiprocessing.set_start_method", "print", "multiprocessing.set_start_method", "print", "len", "len", "running.run_sequence", "multiprocessing.Pool", "pool.starmap", "itertools.product"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.run_sequence"], ["", "return", "os", ".", "path", ".", "isfile", "(", "bbox_file", ")", "\n", "", "else", ":", "\n", "            ", "bbox_files", "=", "[", "'{}/{}_{}.txt'", ".", "format", "(", "tracker", ".", "results_dir", ",", "seq", ".", "name", ",", "obj_id", ")", "for", "obj_id", "in", "seq", ".", "object_ids", "]", "\n", "missing", "=", "[", "not", "os", ".", "path", ".", "isfile", "(", "f", ")", "for", "f", "in", "bbox_files", "]", "\n", "return", "sum", "(", "missing", ")", "==", "0", "\n", "\n", "", "", "if", "_results_exist", "(", ")", "and", "not", "debug", ":", "\n", "        ", "print", "(", "'FPS: {}'", ".", "format", "(", "-", "1", ")", ")", "\n", "return", "\n", "\n", "", "print", "(", "'Tracker: {} {} {} ,  Sequence: {}'", ".", "format", "(", "tracker", ".", "name", ",", "tracker", ".", "parameter_name", ",", "tracker", ".", "run_id", ",", "seq", ".", "name", ")", ")", "\n", "\n", "if", "debug", ":", "\n", "        ", "output", "=", "tracker", ".", "run_sequence", "(", "seq", ",", "debug", "=", "debug", ")", "\n", "", "else", ":", "\n", "        ", "try", ":", "\n", "            ", "output", "=", "tracker", ".", "run_sequence", "(", "seq", ",", "debug", "=", "debug", ")", "\n", "", "except", "Exception", "as", "e", ":", "\n", "            ", "print", "(", "e", ")", "\n", "return", "\n", "\n", "", "", "sys", ".", "stdout", ".", "flush", "(", ")", "\n", "\n", "if", "isinstance", "(", "output", "[", "'time'", "]", "[", "0", "]", ",", "(", "dict", ",", "OrderedDict", ")", ")", ":", "\n", "        ", "exec_time", "=", "sum", "(", "[", "sum", "(", "times", ".", "values", "(", ")", ")", "for", "times", "in", "output", "[", "'time'", "]", "]", ")", "\n", "num_frames", "=", "len", "(", "output", "[", "'time'", "]", ")", "\n", "", "else", ":", "\n", "        ", "exec_time", "=", "sum", "(", "output", "[", "'time'", "]", ")", "\n", "num_frames", "=", "len", "(", "output", "[", "'time'", "]", ")", "\n", "\n", "", "print", "(", "'FPS: {}'", ".", "format", "(", "num_frames", "/", "exec_time", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.otbdataset.OTBDataset.__init__": [[17, 21], ["pytracking.evaluation.data.BaseDataset.__init__", "otbdataset.OTBDataset._get_sequence_info_list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tpldataset.TPLDataset._get_sequence_info_list"], ["self", ".", "base_path", "=", "self", ".", "env_settings", ".", "otb_path", "\n", "self", ".", "sequence_info_list", "=", "self", ".", "_get_sequence_info_list", "(", ")", "\n", "\n", "", "def", "get_sequence_list", "(", "self", ")", ":", "\n", "        ", "return", "SequenceList", "(", "[", "self", ".", "_construct_sequence", "(", "s", ")", "for", "s", "in", "self", ".", "sequence_info_list", "]", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.otbdataset.OTBDataset.get_sequence_list": [[22, 24], ["pytracking.evaluation.data.SequenceList", "otbdataset.OTBDataset._construct_sequence"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOS._construct_sequence"], ["\n", "", "def", "_construct_sequence", "(", "self", ",", "sequence_info", ")", ":", "\n", "        ", "sequence_path", "=", "sequence_info", "[", "'path'", "]", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.otbdataset.OTBDataset._construct_sequence": [[25, 46], ["pytracking.utils.load_text.load_text", "pytracking.evaluation.data.Sequence", "str", "range"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.load_text.load_text"], ["nz", "=", "sequence_info", "[", "'nz'", "]", "\n", "ext", "=", "sequence_info", "[", "'ext'", "]", "\n", "start_frame", "=", "sequence_info", "[", "'startFrame'", "]", "\n", "end_frame", "=", "sequence_info", "[", "'endFrame'", "]", "\n", "\n", "init_omit", "=", "0", "\n", "if", "'initOmit'", "in", "sequence_info", ":", "\n", "            ", "init_omit", "=", "sequence_info", "[", "'initOmit'", "]", "\n", "\n", "", "frames", "=", "[", "'{base_path}/{sequence_path}/{frame:0{nz}}.{ext}'", ".", "format", "(", "base_path", "=", "self", ".", "base_path", ",", "\n", "sequence_path", "=", "sequence_path", ",", "frame", "=", "frame_num", ",", "nz", "=", "nz", ",", "ext", "=", "ext", ")", "for", "frame_num", "in", "range", "(", "start_frame", "+", "init_omit", ",", "end_frame", "+", "1", ")", "]", "\n", "\n", "anno_path", "=", "'{}/{}'", ".", "format", "(", "self", ".", "base_path", ",", "sequence_info", "[", "'anno_path'", "]", ")", "\n", "\n", "# NOTE: OTB has some weird annos which panda cannot handle", "\n", "ground_truth_rect", "=", "load_text", "(", "str", "(", "anno_path", ")", ",", "delimiter", "=", "(", "','", ",", "None", ")", ",", "dtype", "=", "np", ".", "float64", ",", "backend", "=", "'numpy'", ")", "\n", "\n", "return", "Sequence", "(", "sequence_info", "[", "'name'", "]", ",", "frames", ",", "'otb'", ",", "ground_truth_rect", "[", "init_omit", ":", ",", ":", "]", ",", "\n", "object_class", "=", "sequence_info", "[", "'object_class'", "]", ")", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "sequence_info_list", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.otbdataset.OTBDataset.__len__": [[47, 49], ["len"], "methods", ["None"], ["\n", "", "def", "_get_sequence_info_list", "(", "self", ")", ":", "\n", "        ", "sequence_info_list", "=", "[", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.otbdataset.OTBDataset._get_sequence_info_list": [[50, 255], ["None"], "methods", ["None"], ["{", "\"name\"", ":", "\"Basketball\"", ",", "\"path\"", ":", "\"Basketball/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "725", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Basketball/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Biker\"", ",", "\"path\"", ":", "\"Biker/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "142", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Biker/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person head\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Bird1\"", ",", "\"path\"", ":", "\"Bird1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "408", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Bird1/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"bird\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Bird2\"", ",", "\"path\"", ":", "\"Bird2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "99", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Bird2/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"bird\"", "}", ",", "\n", "{", "\"name\"", ":", "\"BlurBody\"", ",", "\"path\"", ":", "\"BlurBody/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "334", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"BlurBody/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"BlurCar1\"", ",", "\"path\"", ":", "\"BlurCar1/img\"", ",", "\"startFrame\"", ":", "247", ",", "\"endFrame\"", ":", "988", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"BlurCar1/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"BlurCar2\"", ",", "\"path\"", ":", "\"BlurCar2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "585", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"BlurCar2/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"BlurCar3\"", ",", "\"path\"", ":", "\"BlurCar3/img\"", ",", "\"startFrame\"", ":", "3", ",", "\"endFrame\"", ":", "359", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"BlurCar3/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"BlurCar4\"", ",", "\"path\"", ":", "\"BlurCar4/img\"", ",", "\"startFrame\"", ":", "18", ",", "\"endFrame\"", ":", "397", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"BlurCar4/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"BlurFace\"", ",", "\"path\"", ":", "\"BlurFace/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "493", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"BlurFace/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"BlurOwl\"", ",", "\"path\"", ":", "\"BlurOwl/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "631", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"BlurOwl/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Board\"", ",", "\"path\"", ":", "\"Board/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "698", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Board/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Bolt\"", ",", "\"path\"", ":", "\"Bolt/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "350", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Bolt/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Bolt2\"", ",", "\"path\"", ":", "\"Bolt2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "293", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Bolt2/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Box\"", ",", "\"path\"", ":", "\"Box/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1161", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Box/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Boy\"", ",", "\"path\"", ":", "\"Boy/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "602", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Boy/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Car1\"", ",", "\"path\"", ":", "\"Car1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1020", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Car1/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Car2\"", ",", "\"path\"", ":", "\"Car2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "913", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Car2/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Car24\"", ",", "\"path\"", ":", "\"Car24/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "3059", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Car24/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Car4\"", ",", "\"path\"", ":", "\"Car4/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "659", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Car4/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"CarDark\"", ",", "\"path\"", ":", "\"CarDark/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "393", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"CarDark/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"CarScale\"", ",", "\"path\"", ":", "\"CarScale/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "252", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"CarScale/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"ClifBar\"", ",", "\"path\"", ":", "\"ClifBar/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "472", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"ClifBar/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Coke\"", ",", "\"path\"", ":", "\"Coke/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "291", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Coke/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Couple\"", ",", "\"path\"", ":", "\"Couple/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "140", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Couple/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Coupon\"", ",", "\"path\"", ":", "\"Coupon/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "327", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Coupon/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Crossing\"", ",", "\"path\"", ":", "\"Crossing/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "120", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Crossing/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Crowds\"", ",", "\"path\"", ":", "\"Crowds/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "347", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Crowds/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Dancer\"", ",", "\"path\"", ":", "\"Dancer/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "225", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Dancer/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Dancer2\"", ",", "\"path\"", ":", "\"Dancer2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "150", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Dancer2/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"David\"", ",", "\"path\"", ":", "\"David/img\"", ",", "\"startFrame\"", ":", "300", ",", "\"endFrame\"", ":", "770", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"David/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"David2\"", ",", "\"path\"", ":", "\"David2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "537", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"David2/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"David3\"", ",", "\"path\"", ":", "\"David3/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "252", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"David3/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Deer\"", ",", "\"path\"", ":", "\"Deer/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "71", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Deer/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"mammal\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Diving\"", ",", "\"path\"", ":", "\"Diving/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "215", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Diving/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Dog\"", ",", "\"path\"", ":", "\"Dog/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "127", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Dog/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"dog\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Dog1\"", ",", "\"path\"", ":", "\"Dog1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1350", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Dog1/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"dog\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Doll\"", ",", "\"path\"", ":", "\"Doll/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "3872", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Doll/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"DragonBaby\"", ",", "\"path\"", ":", "\"DragonBaby/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "113", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"DragonBaby/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Dudek\"", ",", "\"path\"", ":", "\"Dudek/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1145", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Dudek/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"FaceOcc1\"", ",", "\"path\"", ":", "\"FaceOcc1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "892", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"FaceOcc1/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"FaceOcc2\"", ",", "\"path\"", ":", "\"FaceOcc2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "812", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"FaceOcc2/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Fish\"", ",", "\"path\"", ":", "\"Fish/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "476", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Fish/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"FleetFace\"", ",", "\"path\"", ":", "\"FleetFace/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "707", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"FleetFace/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Football\"", ",", "\"path\"", ":", "\"Football/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "362", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Football/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person head\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Football1\"", ",", "\"path\"", ":", "\"Football1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "74", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Football1/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Freeman1\"", ",", "\"path\"", ":", "\"Freeman1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "326", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Freeman1/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Freeman3\"", ",", "\"path\"", ":", "\"Freeman3/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "460", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Freeman3/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Freeman4\"", ",", "\"path\"", ":", "\"Freeman4/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "283", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Freeman4/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Girl\"", ",", "\"path\"", ":", "\"Girl/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "500", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Girl/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Girl2\"", ",", "\"path\"", ":", "\"Girl2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1500", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Girl2/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Gym\"", ",", "\"path\"", ":", "\"Gym/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "767", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Gym/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Human2\"", ",", "\"path\"", ":", "\"Human2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1128", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Human2/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Human3\"", ",", "\"path\"", ":", "\"Human3/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1698", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Human3/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Human4_2\"", ",", "\"path\"", ":", "\"Human4/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "667", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Human4/groundtruth_rect.2.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Human5\"", ",", "\"path\"", ":", "\"Human5/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "713", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Human5/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Human6\"", ",", "\"path\"", ":", "\"Human6/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "792", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Human6/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Human7\"", ",", "\"path\"", ":", "\"Human7/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "250", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Human7/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Human8\"", ",", "\"path\"", ":", "\"Human8/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "128", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Human8/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Human9\"", ",", "\"path\"", ":", "\"Human9/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "305", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Human9/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Ironman\"", ",", "\"path\"", ":", "\"Ironman/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "166", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Ironman/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person head\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Jogging_1\"", ",", "\"path\"", ":", "\"Jogging/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "307", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Jogging/groundtruth_rect.1.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Jogging_2\"", ",", "\"path\"", ":", "\"Jogging/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "307", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Jogging/groundtruth_rect.2.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Jump\"", ",", "\"path\"", ":", "\"Jump/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "122", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Jump/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Jumping\"", ",", "\"path\"", ":", "\"Jumping/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "313", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Jumping/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"KiteSurf\"", ",", "\"path\"", ":", "\"KiteSurf/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "84", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"KiteSurf/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Lemming\"", ",", "\"path\"", ":", "\"Lemming/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1336", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Lemming/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Liquor\"", ",", "\"path\"", ":", "\"Liquor/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1741", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Liquor/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Man\"", ",", "\"path\"", ":", "\"Man/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "134", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Man/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Matrix\"", ",", "\"path\"", ":", "\"Matrix/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "100", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Matrix/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person head\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Mhyang\"", ",", "\"path\"", ":", "\"Mhyang/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1490", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Mhyang/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"MotorRolling\"", ",", "\"path\"", ":", "\"MotorRolling/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "164", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"MotorRolling/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"vehicle\"", "}", ",", "\n", "{", "\"name\"", ":", "\"MountainBike\"", ",", "\"path\"", ":", "\"MountainBike/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "228", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"MountainBike/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"bicycle\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Panda\"", ",", "\"path\"", ":", "\"Panda/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1000", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Panda/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"mammal\"", "}", ",", "\n", "{", "\"name\"", ":", "\"RedTeam\"", ",", "\"path\"", ":", "\"RedTeam/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1918", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"RedTeam/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"vehicle\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Rubik\"", ",", "\"path\"", ":", "\"Rubik/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1997", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Rubik/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Shaking\"", ",", "\"path\"", ":", "\"Shaking/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "365", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Shaking/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Singer1\"", ",", "\"path\"", ":", "\"Singer1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "351", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Singer1/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Singer2\"", ",", "\"path\"", ":", "\"Singer2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "366", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Singer2/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Skater\"", ",", "\"path\"", ":", "\"Skater/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "160", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Skater/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Skater2\"", ",", "\"path\"", ":", "\"Skater2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "435", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Skater2/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Skating1\"", ",", "\"path\"", ":", "\"Skating1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "400", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Skating1/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Skating2_1\"", ",", "\"path\"", ":", "\"Skating2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "473", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Skating2/groundtruth_rect.1.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Skating2_2\"", ",", "\"path\"", ":", "\"Skating2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "473", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Skating2/groundtruth_rect.2.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Skiing\"", ",", "\"path\"", ":", "\"Skiing/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "81", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Skiing/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Soccer\"", ",", "\"path\"", ":", "\"Soccer/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "392", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Soccer/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Subway\"", ",", "\"path\"", ":", "\"Subway/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "175", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Subway/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Surfer\"", ",", "\"path\"", ":", "\"Surfer/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "376", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Surfer/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person head\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Suv\"", ",", "\"path\"", ":", "\"Suv/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "945", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Suv/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Sylvester\"", ",", "\"path\"", ":", "\"Sylvester/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1345", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Sylvester/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Tiger1\"", ",", "\"path\"", ":", "\"Tiger1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "354", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Tiger1/groundtruth_rect.txt\"", ",", "\"initOmit\"", ":", "5", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Tiger2\"", ",", "\"path\"", ":", "\"Tiger2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "365", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Tiger2/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Toy\"", ",", "\"path\"", ":", "\"Toy/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "271", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Toy/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Trans\"", ",", "\"path\"", ":", "\"Trans/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "124", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Trans/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Trellis\"", ",", "\"path\"", ":", "\"Trellis/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "569", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Trellis/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"face\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Twinnings\"", ",", "\"path\"", ":", "\"Twinnings/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "472", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Twinnings/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Vase\"", ",", "\"path\"", ":", "\"Vase/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "271", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Vase/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Walking\"", ",", "\"path\"", ":", "\"Walking/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "412", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Walking/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Walking2\"", ",", "\"path\"", ":", "\"Walking2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "500", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Walking2/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"Woman\"", ",", "\"path\"", ":", "\"Woman/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "597", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"Woman/groundtruth_rect.txt\"", ",", "\n", "\"object_class\"", ":", "\"person\"", "}", "\n", "]", "\n", "\n", "return", "sequence_info_list", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.lasot_lmdbdataset.LaSOTlmdbDataset.__init__": [[19, 24], ["lib.test.evaluation.data.BaseDataset.__init__", "lasot_lmdbdataset.LaSOTlmdbDataset._get_sequence_list", "lasot_lmdbdataset.LaSOTlmdbDataset.clean_seq_list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._get_sequence_list", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.lasotdataset.LaSOTDataset.clean_seq_list"], ["def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "base_path", "=", "self", ".", "env_settings", ".", "lasot_lmdb_path", "\n", "self", ".", "sequence_list", "=", "self", ".", "_get_sequence_list", "(", ")", "\n", "self", ".", "clean_list", "=", "self", ".", "clean_seq_list", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.lasot_lmdbdataset.LaSOTlmdbDataset.clean_seq_list": [[25, 31], ["range", "len", "lasot_lmdbdataset.LaSOTlmdbDataset.sequence_list[].split", "clean_lst.append"], "methods", ["None"], ["", "def", "clean_seq_list", "(", "self", ")", ":", "\n", "        ", "clean_lst", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "len", "(", "self", ".", "sequence_list", ")", ")", ":", "\n", "            ", "cls", ",", "_", "=", "self", ".", "sequence_list", "[", "i", "]", ".", "split", "(", "'-'", ")", "\n", "clean_lst", ".", "append", "(", "cls", ")", "\n", "", "return", "clean_lst", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.lasot_lmdbdataset.LaSOTlmdbDataset.get_sequence_list": [[32, 34], ["lib.test.evaluation.data.SequenceList", "lasot_lmdbdataset.LaSOTlmdbDataset._construct_sequence"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOS._construct_sequence"], ["", "def", "get_sequence_list", "(", "self", ")", ":", "\n", "        ", "return", "SequenceList", "(", "[", "self", ".", "_construct_sequence", "(", "s", ")", "for", "s", "in", "self", ".", "sequence_list", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.lasot_lmdbdataset.LaSOTlmdbDataset._construct_sequence": [[35, 60], ["str", "np.array().astype", "str", "list", "np.array().astype", "str", "list", "np.array().astype", "np.logical_and", "lib.test.evaluation.data.Sequence", "sequence_name.split", "decode_str().split", "list", "map", "map", "np.array().astype.reshape", "map", "np.array", "decode_str().split", "np.array", "decode_str().split", "np.array", "range", "decode_str", "line.split", "decode_str", "decode_str"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_str", "home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_str", "home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_str"], ["", "def", "_construct_sequence", "(", "self", ",", "sequence_name", ")", ":", "\n", "        ", "class_name", "=", "sequence_name", ".", "split", "(", "'-'", ")", "[", "0", "]", "\n", "anno_path", "=", "str", "(", "'{}/{}/groundtruth.txt'", ".", "format", "(", "class_name", ",", "sequence_name", ")", ")", "\n", "# decode the groundtruth", "\n", "gt_str_list", "=", "decode_str", "(", "self", ".", "base_path", ",", "anno_path", ")", ".", "split", "(", "'\\n'", ")", "[", ":", "-", "1", "]", "# the last line is empty", "\n", "gt_list", "=", "[", "list", "(", "map", "(", "float", ",", "line", ".", "split", "(", "','", ")", ")", ")", "for", "line", "in", "gt_str_list", "]", "\n", "ground_truth_rect", "=", "np", ".", "array", "(", "gt_list", ")", ".", "astype", "(", "np", ".", "float64", ")", "\n", "# decode occlusion file", "\n", "occlusion_label_path", "=", "str", "(", "'{}/{}/full_occlusion.txt'", ".", "format", "(", "class_name", ",", "sequence_name", ")", ")", "\n", "occ_list", "=", "list", "(", "map", "(", "int", ",", "decode_str", "(", "self", ".", "base_path", ",", "occlusion_label_path", ")", ".", "split", "(", "','", ")", ")", ")", "\n", "full_occlusion", "=", "np", ".", "array", "(", "occ_list", ")", ".", "astype", "(", "np", ".", "float64", ")", "\n", "# decode out of view file", "\n", "out_of_view_label_path", "=", "str", "(", "'{}/{}/out_of_view.txt'", ".", "format", "(", "class_name", ",", "sequence_name", ")", ")", "\n", "out_of_view_list", "=", "list", "(", "map", "(", "int", ",", "decode_str", "(", "self", ".", "base_path", ",", "out_of_view_label_path", ")", ".", "split", "(", "','", ")", ")", ")", "\n", "out_of_view", "=", "np", ".", "array", "(", "out_of_view_list", ")", ".", "astype", "(", "np", ".", "float64", ")", "\n", "\n", "target_visible", "=", "np", ".", "logical_and", "(", "full_occlusion", "==", "0", ",", "out_of_view", "==", "0", ")", "\n", "\n", "frames_path", "=", "'{}/{}/img'", ".", "format", "(", "class_name", ",", "sequence_name", ")", "\n", "\n", "frames_list", "=", "[", "[", "self", ".", "base_path", ",", "'{}/{:08d}.jpg'", ".", "format", "(", "frames_path", ",", "frame_number", ")", "]", "for", "frame_number", "in", "range", "(", "1", ",", "ground_truth_rect", ".", "shape", "[", "0", "]", "+", "1", ")", "]", "\n", "\n", "target_class", "=", "class_name", "\n", "return", "Sequence", "(", "sequence_name", ",", "frames_list", ",", "'lasot'", ",", "ground_truth_rect", ".", "reshape", "(", "-", "1", ",", "4", ")", ",", "\n", "object_class", "=", "target_class", ",", "target_visible", "=", "target_visible", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.lasot_lmdbdataset.LaSOTlmdbDataset.__len__": [[61, 63], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "sequence_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.lasot_lmdbdataset.LaSOTlmdbDataset._get_sequence_list": [[64, 346], ["None"], "methods", ["None"], ["", "def", "_get_sequence_list", "(", "self", ")", ":", "\n", "        ", "sequence_list", "=", "[", "'airplane-1'", ",", "\n", "'airplane-9'", ",", "\n", "'airplane-13'", ",", "\n", "'airplane-15'", ",", "\n", "'basketball-1'", ",", "\n", "'basketball-6'", ",", "\n", "'basketball-7'", ",", "\n", "'basketball-11'", ",", "\n", "'bear-2'", ",", "\n", "'bear-4'", ",", "\n", "'bear-6'", ",", "\n", "'bear-17'", ",", "\n", "'bicycle-2'", ",", "\n", "'bicycle-7'", ",", "\n", "'bicycle-9'", ",", "\n", "'bicycle-18'", ",", "\n", "'bird-2'", ",", "\n", "'bird-3'", ",", "\n", "'bird-15'", ",", "\n", "'bird-17'", ",", "\n", "'boat-3'", ",", "\n", "'boat-4'", ",", "\n", "'boat-12'", ",", "\n", "'boat-17'", ",", "\n", "'book-3'", ",", "\n", "'book-10'", ",", "\n", "'book-11'", ",", "\n", "'book-19'", ",", "\n", "'bottle-1'", ",", "\n", "'bottle-12'", ",", "\n", "'bottle-14'", ",", "\n", "'bottle-18'", ",", "\n", "'bus-2'", ",", "\n", "'bus-5'", ",", "\n", "'bus-17'", ",", "\n", "'bus-19'", ",", "\n", "'car-2'", ",", "\n", "'car-6'", ",", "\n", "'car-9'", ",", "\n", "'car-17'", ",", "\n", "'cat-1'", ",", "\n", "'cat-3'", ",", "\n", "'cat-18'", ",", "\n", "'cat-20'", ",", "\n", "'cattle-2'", ",", "\n", "'cattle-7'", ",", "\n", "'cattle-12'", ",", "\n", "'cattle-13'", ",", "\n", "'spider-14'", ",", "\n", "'spider-16'", ",", "\n", "'spider-18'", ",", "\n", "'spider-20'", ",", "\n", "'coin-3'", ",", "\n", "'coin-6'", ",", "\n", "'coin-7'", ",", "\n", "'coin-18'", ",", "\n", "'crab-3'", ",", "\n", "'crab-6'", ",", "\n", "'crab-12'", ",", "\n", "'crab-18'", ",", "\n", "'surfboard-12'", ",", "\n", "'surfboard-4'", ",", "\n", "'surfboard-5'", ",", "\n", "'surfboard-8'", ",", "\n", "'cup-1'", ",", "\n", "'cup-4'", ",", "\n", "'cup-7'", ",", "\n", "'cup-17'", ",", "\n", "'deer-4'", ",", "\n", "'deer-8'", ",", "\n", "'deer-10'", ",", "\n", "'deer-14'", ",", "\n", "'dog-1'", ",", "\n", "'dog-7'", ",", "\n", "'dog-15'", ",", "\n", "'dog-19'", ",", "\n", "'guitar-3'", ",", "\n", "'guitar-8'", ",", "\n", "'guitar-10'", ",", "\n", "'guitar-16'", ",", "\n", "'person-1'", ",", "\n", "'person-5'", ",", "\n", "'person-10'", ",", "\n", "'person-12'", ",", "\n", "'pig-2'", ",", "\n", "'pig-10'", ",", "\n", "'pig-13'", ",", "\n", "'pig-18'", ",", "\n", "'rubicCube-1'", ",", "\n", "'rubicCube-6'", ",", "\n", "'rubicCube-14'", ",", "\n", "'rubicCube-19'", ",", "\n", "'swing-10'", ",", "\n", "'swing-14'", ",", "\n", "'swing-17'", ",", "\n", "'swing-20'", ",", "\n", "'drone-13'", ",", "\n", "'drone-15'", ",", "\n", "'drone-2'", ",", "\n", "'drone-7'", ",", "\n", "'pool-12'", ",", "\n", "'pool-15'", ",", "\n", "'pool-3'", ",", "\n", "'pool-7'", ",", "\n", "'rabbit-10'", ",", "\n", "'rabbit-13'", ",", "\n", "'rabbit-17'", ",", "\n", "'rabbit-19'", ",", "\n", "'racing-10'", ",", "\n", "'racing-15'", ",", "\n", "'racing-16'", ",", "\n", "'racing-20'", ",", "\n", "'robot-1'", ",", "\n", "'robot-19'", ",", "\n", "'robot-5'", ",", "\n", "'robot-8'", ",", "\n", "'sepia-13'", ",", "\n", "'sepia-16'", ",", "\n", "'sepia-6'", ",", "\n", "'sepia-8'", ",", "\n", "'sheep-3'", ",", "\n", "'sheep-5'", ",", "\n", "'sheep-7'", ",", "\n", "'sheep-9'", ",", "\n", "'skateboard-16'", ",", "\n", "'skateboard-19'", ",", "\n", "'skateboard-3'", ",", "\n", "'skateboard-8'", ",", "\n", "'tank-14'", ",", "\n", "'tank-16'", ",", "\n", "'tank-6'", ",", "\n", "'tank-9'", ",", "\n", "'tiger-12'", ",", "\n", "'tiger-18'", ",", "\n", "'tiger-4'", ",", "\n", "'tiger-6'", ",", "\n", "'train-1'", ",", "\n", "'train-11'", ",", "\n", "'train-20'", ",", "\n", "'train-7'", ",", "\n", "'truck-16'", ",", "\n", "'truck-3'", ",", "\n", "'truck-6'", ",", "\n", "'truck-7'", ",", "\n", "'turtle-16'", ",", "\n", "'turtle-5'", ",", "\n", "'turtle-8'", ",", "\n", "'turtle-9'", ",", "\n", "'umbrella-17'", ",", "\n", "'umbrella-19'", ",", "\n", "'umbrella-2'", ",", "\n", "'umbrella-9'", ",", "\n", "'yoyo-15'", ",", "\n", "'yoyo-17'", ",", "\n", "'yoyo-19'", ",", "\n", "'yoyo-7'", ",", "\n", "'zebra-10'", ",", "\n", "'zebra-14'", ",", "\n", "'zebra-16'", ",", "\n", "'zebra-17'", ",", "\n", "'elephant-1'", ",", "\n", "'elephant-12'", ",", "\n", "'elephant-16'", ",", "\n", "'elephant-18'", ",", "\n", "'goldfish-3'", ",", "\n", "'goldfish-7'", ",", "\n", "'goldfish-8'", ",", "\n", "'goldfish-10'", ",", "\n", "'hat-1'", ",", "\n", "'hat-2'", ",", "\n", "'hat-5'", ",", "\n", "'hat-18'", ",", "\n", "'kite-4'", ",", "\n", "'kite-6'", ",", "\n", "'kite-10'", ",", "\n", "'kite-15'", ",", "\n", "'motorcycle-1'", ",", "\n", "'motorcycle-3'", ",", "\n", "'motorcycle-9'", ",", "\n", "'motorcycle-18'", ",", "\n", "'mouse-1'", ",", "\n", "'mouse-8'", ",", "\n", "'mouse-9'", ",", "\n", "'mouse-17'", ",", "\n", "'flag-3'", ",", "\n", "'flag-9'", ",", "\n", "'flag-5'", ",", "\n", "'flag-2'", ",", "\n", "'frog-3'", ",", "\n", "'frog-4'", ",", "\n", "'frog-20'", ",", "\n", "'frog-9'", ",", "\n", "'gametarget-1'", ",", "\n", "'gametarget-2'", ",", "\n", "'gametarget-7'", ",", "\n", "'gametarget-13'", ",", "\n", "'hand-2'", ",", "\n", "'hand-3'", ",", "\n", "'hand-9'", ",", "\n", "'hand-16'", ",", "\n", "'helmet-5'", ",", "\n", "'helmet-11'", ",", "\n", "'helmet-19'", ",", "\n", "'helmet-13'", ",", "\n", "'licenseplate-6'", ",", "\n", "'licenseplate-12'", ",", "\n", "'licenseplate-13'", ",", "\n", "'licenseplate-15'", ",", "\n", "'electricfan-1'", ",", "\n", "'electricfan-10'", ",", "\n", "'electricfan-18'", ",", "\n", "'electricfan-20'", ",", "\n", "'chameleon-3'", ",", "\n", "'chameleon-6'", ",", "\n", "'chameleon-11'", ",", "\n", "'chameleon-20'", ",", "\n", "'crocodile-3'", ",", "\n", "'crocodile-4'", ",", "\n", "'crocodile-10'", ",", "\n", "'crocodile-14'", ",", "\n", "'gecko-1'", ",", "\n", "'gecko-5'", ",", "\n", "'gecko-16'", ",", "\n", "'gecko-19'", ",", "\n", "'fox-2'", ",", "\n", "'fox-3'", ",", "\n", "'fox-5'", ",", "\n", "'fox-20'", ",", "\n", "'giraffe-2'", ",", "\n", "'giraffe-10'", ",", "\n", "'giraffe-13'", ",", "\n", "'giraffe-15'", ",", "\n", "'gorilla-4'", ",", "\n", "'gorilla-6'", ",", "\n", "'gorilla-9'", ",", "\n", "'gorilla-13'", ",", "\n", "'hippo-1'", ",", "\n", "'hippo-7'", ",", "\n", "'hippo-9'", ",", "\n", "'hippo-20'", ",", "\n", "'horse-1'", ",", "\n", "'horse-4'", ",", "\n", "'horse-12'", ",", "\n", "'horse-15'", ",", "\n", "'kangaroo-2'", ",", "\n", "'kangaroo-5'", ",", "\n", "'kangaroo-11'", ",", "\n", "'kangaroo-14'", ",", "\n", "'leopard-1'", ",", "\n", "'leopard-7'", ",", "\n", "'leopard-16'", ",", "\n", "'leopard-20'", ",", "\n", "'lion-1'", ",", "\n", "'lion-5'", ",", "\n", "'lion-12'", ",", "\n", "'lion-20'", ",", "\n", "'lizard-1'", ",", "\n", "'lizard-3'", ",", "\n", "'lizard-6'", ",", "\n", "'lizard-13'", ",", "\n", "'microphone-2'", ",", "\n", "'microphone-6'", ",", "\n", "'microphone-14'", ",", "\n", "'microphone-16'", ",", "\n", "'monkey-3'", ",", "\n", "'monkey-4'", ",", "\n", "'monkey-9'", ",", "\n", "'monkey-17'", ",", "\n", "'shark-2'", ",", "\n", "'shark-3'", ",", "\n", "'shark-5'", ",", "\n", "'shark-6'", ",", "\n", "'squirrel-8'", ",", "\n", "'squirrel-11'", ",", "\n", "'squirrel-13'", ",", "\n", "'squirrel-19'", ",", "\n", "'volleyball-1'", ",", "\n", "'volleyball-13'", ",", "\n", "'volleyball-18'", ",", "\n", "'volleyball-19'", "]", "\n", "return", "sequence_list", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.nfsdataset.NFSDataset.__init__": [[17, 21], ["pytracking.evaluation.data.BaseDataset.__init__", "nfsdataset.NFSDataset._get_sequence_info_list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tpldataset.TPLDataset._get_sequence_info_list"], ["self", ".", "base_path", "=", "self", ".", "env_settings", ".", "nfs_path", "\n", "self", ".", "sequence_info_list", "=", "self", ".", "_get_sequence_info_list", "(", ")", "\n", "\n", "", "def", "get_sequence_list", "(", "self", ")", ":", "\n", "        ", "return", "SequenceList", "(", "[", "self", ".", "_construct_sequence", "(", "s", ")", "for", "s", "in", "self", ".", "sequence_info_list", "]", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.nfsdataset.NFSDataset.get_sequence_list": [[22, 24], ["pytracking.evaluation.data.SequenceList", "nfsdataset.NFSDataset._construct_sequence"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOS._construct_sequence"], ["\n", "", "def", "_construct_sequence", "(", "self", ",", "sequence_info", ")", ":", "\n", "        ", "sequence_path", "=", "sequence_info", "[", "'path'", "]", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.nfsdataset.NFSDataset._construct_sequence": [[25, 45], ["pytracking.utils.load_text.load_text", "pytracking.evaluation.data.Sequence", "str", "range"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.load_text.load_text"], ["nz", "=", "sequence_info", "[", "'nz'", "]", "\n", "ext", "=", "sequence_info", "[", "'ext'", "]", "\n", "start_frame", "=", "sequence_info", "[", "'startFrame'", "]", "\n", "end_frame", "=", "sequence_info", "[", "'endFrame'", "]", "\n", "\n", "init_omit", "=", "0", "\n", "if", "'initOmit'", "in", "sequence_info", ":", "\n", "            ", "init_omit", "=", "sequence_info", "[", "'initOmit'", "]", "\n", "\n", "", "frames", "=", "[", "'{base_path}/{sequence_path}/{frame:0{nz}}.{ext}'", ".", "format", "(", "base_path", "=", "self", ".", "base_path", ",", "\n", "sequence_path", "=", "sequence_path", ",", "frame", "=", "frame_num", ",", "nz", "=", "nz", ",", "ext", "=", "ext", ")", "for", "frame_num", "in", "range", "(", "start_frame", "+", "init_omit", ",", "end_frame", "+", "1", ")", "]", "\n", "\n", "anno_path", "=", "'{}/{}'", ".", "format", "(", "self", ".", "base_path", ",", "sequence_info", "[", "'anno_path'", "]", ")", "\n", "\n", "ground_truth_rect", "=", "load_text", "(", "str", "(", "anno_path", ")", ",", "delimiter", "=", "'\\t'", ",", "dtype", "=", "np", ".", "float64", ")", "\n", "\n", "return", "Sequence", "(", "sequence_info", "[", "'name'", "]", ",", "frames", ",", "'nfs'", ",", "ground_truth_rect", "[", "init_omit", ":", ",", ":", "]", ",", "\n", "object_class", "=", "sequence_info", "[", "'object_class'", "]", ")", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "sequence_info_list", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.nfsdataset.NFSDataset.__len__": [[46, 48], ["len"], "methods", ["None"], ["\n", "", "def", "_get_sequence_info_list", "(", "self", ")", ":", "\n", "        ", "sequence_info_list", "=", "[", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.nfsdataset.NFSDataset._get_sequence_info_list": [[49, 154], ["None"], "methods", ["None"], ["{", "\"name\"", ":", "\"nfs_Gymnastics\"", ",", "\"path\"", ":", "\"sequences/Gymnastics\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "368", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_Gymnastics.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_MachLoop_jet\"", ",", "\"path\"", ":", "\"sequences/MachLoop_jet\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "99", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_MachLoop_jet.txt\"", ",", "\"object_class\"", ":", "\"aircraft\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_Skiing_red\"", ",", "\"path\"", ":", "\"sequences/Skiing_red\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "69", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_Skiing_red.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_Skydiving\"", ",", "\"path\"", ":", "\"sequences/Skydiving\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "196", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_Skydiving.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_airboard_1\"", ",", "\"path\"", ":", "\"sequences/airboard_1\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "425", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_airboard_1.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_airplane_landing\"", ",", "\"path\"", ":", "\"sequences/airplane_landing\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "81", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_airplane_landing.txt\"", ",", "\"object_class\"", ":", "\"aircraft\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_airtable_3\"", ",", "\"path\"", ":", "\"sequences/airtable_3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "482", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_airtable_3.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_basketball_1\"", ",", "\"path\"", ":", "\"sequences/basketball_1\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "282", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_basketball_1.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_basketball_2\"", ",", "\"path\"", ":", "\"sequences/basketball_2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "102", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_basketball_2.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_basketball_3\"", ",", "\"path\"", ":", "\"sequences/basketball_3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "421", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_basketball_3.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_basketball_6\"", ",", "\"path\"", ":", "\"sequences/basketball_6\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "224", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_basketball_6.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_basketball_7\"", ",", "\"path\"", ":", "\"sequences/basketball_7\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "240", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_basketball_7.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_basketball_player\"", ",", "\"path\"", ":", "\"sequences/basketball_player\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "369", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_basketball_player.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_basketball_player_2\"", ",", "\"path\"", ":", "\"sequences/basketball_player_2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "437", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_basketball_player_2.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_beach_flipback_person\"", ",", "\"path\"", ":", "\"sequences/beach_flipback_person\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "61", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_beach_flipback_person.txt\"", ",", "\"object_class\"", ":", "\"person head\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_bee\"", ",", "\"path\"", ":", "\"sequences/bee\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "45", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_bee.txt\"", ",", "\"object_class\"", ":", "\"insect\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_biker_acrobat\"", ",", "\"path\"", ":", "\"sequences/biker_acrobat\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "128", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_biker_acrobat.txt\"", ",", "\"object_class\"", ":", "\"bicycle\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_biker_all_1\"", ",", "\"path\"", ":", "\"sequences/biker_all_1\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "113", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_biker_all_1.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_biker_head_2\"", ",", "\"path\"", ":", "\"sequences/biker_head_2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "132", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_biker_head_2.txt\"", ",", "\"object_class\"", ":", "\"person head\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_biker_head_3\"", ",", "\"path\"", ":", "\"sequences/biker_head_3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "254", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_biker_head_3.txt\"", ",", "\"object_class\"", ":", "\"person head\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_biker_upper_body\"", ",", "\"path\"", ":", "\"sequences/biker_upper_body\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "194", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_biker_upper_body.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_biker_whole_body\"", ",", "\"path\"", ":", "\"sequences/biker_whole_body\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "572", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_biker_whole_body.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_billiard_2\"", ",", "\"path\"", ":", "\"sequences/billiard_2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "604", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_billiard_2.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_billiard_3\"", ",", "\"path\"", ":", "\"sequences/billiard_3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "698", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_billiard_3.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_billiard_6\"", ",", "\"path\"", ":", "\"sequences/billiard_6\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "771", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_billiard_6.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_billiard_7\"", ",", "\"path\"", ":", "\"sequences/billiard_7\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "724", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_billiard_7.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_billiard_8\"", ",", "\"path\"", ":", "\"sequences/billiard_8\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "778", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_billiard_8.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_bird_2\"", ",", "\"path\"", ":", "\"sequences/bird_2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "476", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_bird_2.txt\"", ",", "\"object_class\"", ":", "\"bird\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_book\"", ",", "\"path\"", ":", "\"sequences/book\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "288", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_book.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_bottle\"", ",", "\"path\"", ":", "\"sequences/bottle\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "2103", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_bottle.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_bowling_1\"", ",", "\"path\"", ":", "\"sequences/bowling_1\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "303", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_bowling_1.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_bowling_2\"", ",", "\"path\"", ":", "\"sequences/bowling_2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "710", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_bowling_2.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_bowling_3\"", ",", "\"path\"", ":", "\"sequences/bowling_3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "271", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_bowling_3.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_bowling_6\"", ",", "\"path\"", ":", "\"sequences/bowling_6\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "260", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_bowling_6.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_bowling_ball\"", ",", "\"path\"", ":", "\"sequences/bowling_ball\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "275", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_bowling_ball.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_bunny\"", ",", "\"path\"", ":", "\"sequences/bunny\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "705", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_bunny.txt\"", ",", "\"object_class\"", ":", "\"mammal\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_car\"", ",", "\"path\"", ":", "\"sequences/car\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "2020", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_car.txt\"", ",", "\"object_class\"", ":", "\"car\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_car_camaro\"", ",", "\"path\"", ":", "\"sequences/car_camaro\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "36", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_car_camaro.txt\"", ",", "\"object_class\"", ":", "\"car\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_car_drifting\"", ",", "\"path\"", ":", "\"sequences/car_drifting\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "173", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_car_drifting.txt\"", ",", "\"object_class\"", ":", "\"car\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_car_jumping\"", ",", "\"path\"", ":", "\"sequences/car_jumping\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "22", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_car_jumping.txt\"", ",", "\"object_class\"", ":", "\"car\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_car_rc_rolling\"", ",", "\"path\"", ":", "\"sequences/car_rc_rolling\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "62", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_car_rc_rolling.txt\"", ",", "\"object_class\"", ":", "\"car\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_car_rc_rotating\"", ",", "\"path\"", ":", "\"sequences/car_rc_rotating\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "80", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_car_rc_rotating.txt\"", ",", "\"object_class\"", ":", "\"car\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_car_side\"", ",", "\"path\"", ":", "\"sequences/car_side\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "108", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_car_side.txt\"", ",", "\"object_class\"", ":", "\"car\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_car_white\"", ",", "\"path\"", ":", "\"sequences/car_white\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "2063", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_car_white.txt\"", ",", "\"object_class\"", ":", "\"car\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_cheetah\"", ",", "\"path\"", ":", "\"sequences/cheetah\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "167", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_cheetah.txt\"", ",", "\"object_class\"", ":", "\"mammal\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_cup\"", ",", "\"path\"", ":", "\"sequences/cup\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1281", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_cup.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_cup_2\"", ",", "\"path\"", ":", "\"sequences/cup_2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "182", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_cup_2.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_dog\"", ",", "\"path\"", ":", "\"sequences/dog\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1030", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_dog.txt\"", ",", "\"object_class\"", ":", "\"dog\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_dog_1\"", ",", "\"path\"", ":", "\"sequences/dog_1\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "168", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_dog_1.txt\"", ",", "\"object_class\"", ":", "\"dog\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_dog_2\"", ",", "\"path\"", ":", "\"sequences/dog_2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "594", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_dog_2.txt\"", ",", "\"object_class\"", ":", "\"dog\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_dog_3\"", ",", "\"path\"", ":", "\"sequences/dog_3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "200", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_dog_3.txt\"", ",", "\"object_class\"", ":", "\"dog\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_dogs\"", ",", "\"path\"", ":", "\"sequences/dogs\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "198", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_dogs.txt\"", ",", "\"object_class\"", ":", "\"dog\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_dollar\"", ",", "\"path\"", ":", "\"sequences/dollar\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1426", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_dollar.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_drone\"", ",", "\"path\"", ":", "\"sequences/drone\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "70", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_drone.txt\"", ",", "\"object_class\"", ":", "\"aircraft\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_ducks_lake\"", ",", "\"path\"", ":", "\"sequences/ducks_lake\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "107", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_ducks_lake.txt\"", ",", "\"object_class\"", ":", "\"bird\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_exit\"", ",", "\"path\"", ":", "\"sequences/exit\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "359", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_exit.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_first\"", ",", "\"path\"", ":", "\"sequences/first\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "435", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_first.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_flower\"", ",", "\"path\"", ":", "\"sequences/flower\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "448", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_flower.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_footbal_skill\"", ",", "\"path\"", ":", "\"sequences/footbal_skill\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "131", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_footbal_skill.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_helicopter\"", ",", "\"path\"", ":", "\"sequences/helicopter\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "310", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_helicopter.txt\"", ",", "\"object_class\"", ":", "\"aircraft\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_horse_jumping\"", ",", "\"path\"", ":", "\"sequences/horse_jumping\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "117", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_horse_jumping.txt\"", ",", "\"object_class\"", ":", "\"horse\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_horse_running\"", ",", "\"path\"", ":", "\"sequences/horse_running\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "139", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_horse_running.txt\"", ",", "\"object_class\"", ":", "\"horse\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_iceskating_6\"", ",", "\"path\"", ":", "\"sequences/iceskating_6\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "603", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_iceskating_6.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_jellyfish_5\"", ",", "\"path\"", ":", "\"sequences/jellyfish_5\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "746", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_jellyfish_5.txt\"", ",", "\"object_class\"", ":", "\"invertebrate\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_kid_swing\"", ",", "\"path\"", ":", "\"sequences/kid_swing\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "169", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_kid_swing.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_motorcross\"", ",", "\"path\"", ":", "\"sequences/motorcross\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "39", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_motorcross.txt\"", ",", "\"object_class\"", ":", "\"vehicle\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_motorcross_kawasaki\"", ",", "\"path\"", ":", "\"sequences/motorcross_kawasaki\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "65", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_motorcross_kawasaki.txt\"", ",", "\"object_class\"", ":", "\"vehicle\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_parkour\"", ",", "\"path\"", ":", "\"sequences/parkour\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "58", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_parkour.txt\"", ",", "\"object_class\"", ":", "\"person head\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_person_scooter\"", ",", "\"path\"", ":", "\"sequences/person_scooter\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "413", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_person_scooter.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_pingpong_2\"", ",", "\"path\"", ":", "\"sequences/pingpong_2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1277", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_pingpong_2.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_pingpong_7\"", ",", "\"path\"", ":", "\"sequences/pingpong_7\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1290", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_pingpong_7.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_pingpong_8\"", ",", "\"path\"", ":", "\"sequences/pingpong_8\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "296", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_pingpong_8.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_purse\"", ",", "\"path\"", ":", "\"sequences/purse\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "968", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_purse.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_rubber\"", ",", "\"path\"", ":", "\"sequences/rubber\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1328", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_rubber.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_running\"", ",", "\"path\"", ":", "\"sequences/running\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "677", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_running.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_running_100_m\"", ",", "\"path\"", ":", "\"sequences/running_100_m\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "313", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_running_100_m.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_running_100_m_2\"", ",", "\"path\"", ":", "\"sequences/running_100_m_2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "337", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_running_100_m_2.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_running_2\"", ",", "\"path\"", ":", "\"sequences/running_2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "363", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_running_2.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_shuffleboard_1\"", ",", "\"path\"", ":", "\"sequences/shuffleboard_1\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "42", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_shuffleboard_1.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_shuffleboard_2\"", ",", "\"path\"", ":", "\"sequences/shuffleboard_2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "41", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_shuffleboard_2.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_shuffleboard_4\"", ",", "\"path\"", ":", "\"sequences/shuffleboard_4\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "62", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_shuffleboard_4.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_shuffleboard_5\"", ",", "\"path\"", ":", "\"sequences/shuffleboard_5\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "32", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_shuffleboard_5.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_shuffleboard_6\"", ",", "\"path\"", ":", "\"sequences/shuffleboard_6\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "52", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_shuffleboard_6.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_shuffletable_2\"", ",", "\"path\"", ":", "\"sequences/shuffletable_2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "372", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_shuffletable_2.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_shuffletable_3\"", ",", "\"path\"", ":", "\"sequences/shuffletable_3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "368", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_shuffletable_3.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_shuffletable_4\"", ",", "\"path\"", ":", "\"sequences/shuffletable_4\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "101", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_shuffletable_4.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_ski_long\"", ",", "\"path\"", ":", "\"sequences/ski_long\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "274", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_ski_long.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_soccer_ball\"", ",", "\"path\"", ":", "\"sequences/soccer_ball\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "163", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_soccer_ball.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_soccer_ball_2\"", ",", "\"path\"", ":", "\"sequences/soccer_ball_2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1934", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_soccer_ball_2.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_soccer_ball_3\"", ",", "\"path\"", ":", "\"sequences/soccer_ball_3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1381", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_soccer_ball_3.txt\"", ",", "\"object_class\"", ":", "\"ball\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_soccer_player_2\"", ",", "\"path\"", ":", "\"sequences/soccer_player_2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "475", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_soccer_player_2.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_soccer_player_3\"", ",", "\"path\"", ":", "\"sequences/soccer_player_3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "319", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_soccer_player_3.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "True", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_stop_sign\"", ",", "\"path\"", ":", "\"sequences/stop_sign\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "302", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_stop_sign.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_suv\"", ",", "\"path\"", ":", "\"sequences/suv\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "2584", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_suv.txt\"", ",", "\"object_class\"", ":", "\"car\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_tiger\"", ",", "\"path\"", ":", "\"sequences/tiger\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1556", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_tiger.txt\"", ",", "\"object_class\"", ":", "\"mammal\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_walking\"", ",", "\"path\"", ":", "\"sequences/walking\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "555", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_walking.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_walking_3\"", ",", "\"path\"", ":", "\"sequences/walking_3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1427", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_walking_3.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_water_ski_2\"", ",", "\"path\"", ":", "\"sequences/water_ski_2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "47", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_water_ski_2.txt\"", ",", "\"object_class\"", ":", "\"person\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_yoyo\"", ",", "\"path\"", ":", "\"sequences/yoyo\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "67", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_yoyo.txt\"", ",", "\"object_class\"", ":", "\"other\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "{", "\"name\"", ":", "\"nfs_zebra_fish\"", ",", "\"path\"", ":", "\"sequences/zebra_fish\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "671", ",", "\"nz\"", ":", "5", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/nfs_zebra_fish.txt\"", ",", "\"object_class\"", ":", "\"fish\"", ",", "'occlusion'", ":", "False", "}", ",", "\n", "]", "\n", "\n", "return", "sequence_info_list", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.BaseDataset.__init__": [[9, 11], ["pytracking.evaluation.environment.env_settings"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "__init__", "(", "self", ")", ":", "\n", "        ", "self", ".", "env_settings", "=", "env_settings", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.BaseDataset.__len__": [[12, 15], ["None"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "\"\"\"Overload this function in your dataset. This should return number of sequences in the dataset.\"\"\"", "\n", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.BaseDataset.get_sequence_list": [[16, 19], ["None"], "methods", ["None"], ["", "def", "get_sequence_list", "(", "self", ")", ":", "\n", "        ", "\"\"\"Overload this in your dataset. Should return the list of sequences in the dataset.\"\"\"", "\n", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence.__init__": [[23, 36], ["data.Sequence._construct_init_data", "data.Sequence._ensure_start_frame"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence._construct_init_data", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence._ensure_start_frame"], ["def", "__init__", "(", "self", ",", "name", ",", "frames", ",", "dataset", ",", "ground_truth_rect", ",", "ground_truth_seg", "=", "None", ",", "init_data", "=", "None", ",", "\n", "object_class", "=", "None", ",", "target_visible", "=", "None", ",", "object_ids", "=", "None", ",", "multiobj_mode", "=", "False", ")", ":", "\n", "        ", "self", ".", "name", "=", "name", "\n", "self", ".", "frames", "=", "frames", "\n", "self", ".", "dataset", "=", "dataset", "\n", "self", ".", "ground_truth_rect", "=", "ground_truth_rect", "\n", "self", ".", "ground_truth_seg", "=", "ground_truth_seg", "\n", "self", ".", "object_class", "=", "object_class", "\n", "self", ".", "target_visible", "=", "target_visible", "\n", "self", ".", "object_ids", "=", "object_ids", "\n", "self", ".", "multiobj_mode", "=", "multiobj_mode", "\n", "self", ".", "init_data", "=", "self", ".", "_construct_init_data", "(", "init_data", ")", "\n", "self", ".", "_ensure_start_frame", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence._ensure_start_frame": [[37, 55], ["min", "list", "data.Sequence.init_data.keys", "isinstance", "data.Sequence.ground_truth_rect.items", "len", "len", "data.Sequence.init_data.items"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "_ensure_start_frame", "(", "self", ")", ":", "\n", "# Ensure start frame is 0", "\n", "        ", "start_frame", "=", "min", "(", "list", "(", "self", ".", "init_data", ".", "keys", "(", ")", ")", ")", "\n", "if", "start_frame", ">", "0", ":", "\n", "            ", "self", ".", "frames", "=", "self", ".", "frames", "[", "start_frame", ":", "]", "\n", "if", "self", ".", "ground_truth_rect", "is", "not", "None", ":", "\n", "                ", "if", "isinstance", "(", "self", ".", "ground_truth_rect", ",", "(", "dict", ",", "OrderedDict", ")", ")", ":", "\n", "                    ", "for", "obj_id", ",", "gt", "in", "self", ".", "ground_truth_rect", ".", "items", "(", ")", ":", "\n", "                        ", "self", ".", "ground_truth_rect", "[", "obj_id", "]", "=", "gt", "[", "start_frame", ":", ",", ":", "]", "\n", "", "", "else", ":", "\n", "                    ", "self", ".", "ground_truth_rect", "=", "self", ".", "ground_truth_rect", "[", "start_frame", ":", ",", ":", "]", "\n", "", "", "if", "self", ".", "ground_truth_seg", "is", "not", "None", ":", "\n", "                ", "self", ".", "ground_truth_seg", "=", "self", ".", "ground_truth_seg", "[", "start_frame", ":", "]", "\n", "assert", "len", "(", "self", ".", "frames", ")", "==", "len", "(", "self", ".", "ground_truth_seg", ")", "\n", "\n", "", "if", "self", ".", "target_visible", "is", "not", "None", ":", "\n", "                ", "self", ".", "target_visible", "=", "self", ".", "target_visible", "[", "start_frame", ":", "]", "\n", "", "self", ".", "init_data", "=", "{", "frame", "-", "start_frame", ":", "val", "for", "frame", ",", "val", "in", "self", ".", "init_data", ".", "items", "(", ")", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence._construct_init_data": [[56, 91], ["init_data.items", "init_data.items", "dict", "isinstance", "isinstance", "collections.OrderedDict", "isinstance", "len", "isinstance", "collections.OrderedDict", "list", "list", "list", "list", "len", "list", "data.Sequence.ground_truth_rect.items", "init_val[].items"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "", "def", "_construct_init_data", "(", "self", ",", "init_data", ")", ":", "\n", "        ", "if", "init_data", "is", "not", "None", ":", "\n", "            ", "if", "not", "self", ".", "multiobj_mode", ":", "\n", "                ", "assert", "self", ".", "object_ids", "is", "None", "or", "len", "(", "self", ".", "object_ids", ")", "==", "1", "\n", "for", "frame", ",", "init_val", "in", "init_data", ".", "items", "(", ")", ":", "\n", "                    ", "if", "'bbox'", "in", "init_val", "and", "isinstance", "(", "init_val", "[", "'bbox'", "]", ",", "(", "dict", ",", "OrderedDict", ")", ")", ":", "\n", "                        ", "init_val", "[", "'bbox'", "]", "=", "init_val", "[", "'bbox'", "]", "[", "self", ".", "object_ids", "[", "0", "]", "]", "\n", "# convert to list", "\n", "", "", "", "for", "frame", ",", "init_val", "in", "init_data", ".", "items", "(", ")", ":", "\n", "                ", "if", "'bbox'", "in", "init_val", ":", "\n", "                    ", "if", "isinstance", "(", "init_val", "[", "'bbox'", "]", ",", "(", "dict", ",", "OrderedDict", ")", ")", ":", "\n", "                        ", "init_val", "[", "'bbox'", "]", "=", "OrderedDict", "(", "{", "obj_id", ":", "list", "(", "init", ")", "for", "obj_id", ",", "init", "in", "init_val", "[", "'bbox'", "]", ".", "items", "(", ")", "}", ")", "\n", "", "else", ":", "\n", "                        ", "init_val", "[", "'bbox'", "]", "=", "list", "(", "init_val", "[", "'bbox'", "]", ")", "\n", "", "", "", "", "else", ":", "\n", "            ", "init_data", "=", "{", "0", ":", "dict", "(", ")", "}", "# Assume start from frame 0", "\n", "\n", "if", "self", ".", "object_ids", "is", "not", "None", ":", "\n", "                ", "init_data", "[", "0", "]", "[", "'object_ids'", "]", "=", "self", ".", "object_ids", "\n", "\n", "", "if", "self", ".", "ground_truth_rect", "is", "not", "None", ":", "\n", "                ", "if", "self", ".", "multiobj_mode", ":", "\n", "                    ", "assert", "isinstance", "(", "self", ".", "ground_truth_rect", ",", "(", "dict", ",", "OrderedDict", ")", ")", "\n", "init_data", "[", "0", "]", "[", "'bbox'", "]", "=", "OrderedDict", "(", "{", "obj_id", ":", "list", "(", "gt", "[", "0", ",", ":", "]", ")", "for", "obj_id", ",", "gt", "in", "self", ".", "ground_truth_rect", ".", "items", "(", ")", "}", ")", "\n", "", "else", ":", "\n", "                    ", "assert", "self", ".", "object_ids", "is", "None", "or", "len", "(", "self", ".", "object_ids", ")", "==", "1", "\n", "if", "isinstance", "(", "self", ".", "ground_truth_rect", ",", "(", "dict", ",", "OrderedDict", ")", ")", ":", "\n", "                        ", "init_data", "[", "0", "]", "[", "'bbox'", "]", "=", "list", "(", "self", ".", "ground_truth_rect", "[", "self", ".", "object_ids", "[", "0", "]", "]", "[", "0", ",", ":", "]", ")", "\n", "", "else", ":", "\n", "                        ", "init_data", "[", "0", "]", "[", "'bbox'", "]", "=", "list", "(", "self", ".", "ground_truth_rect", "[", "0", ",", ":", "]", ")", "\n", "\n", "", "", "", "if", "self", ".", "ground_truth_seg", "is", "not", "None", ":", "\n", "                ", "init_data", "[", "0", "]", "[", "'mask'", "]", "=", "self", ".", "ground_truth_seg", "[", "0", "]", "\n", "\n", "", "", "return", "init_data", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence.init_info": [[92, 95], ["data.Sequence.frame_info"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence.frame_info"], ["", "def", "init_info", "(", "self", ")", ":", "\n", "        ", "info", "=", "self", ".", "frame_info", "(", "frame_num", "=", "0", ")", "\n", "return", "info", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence.frame_info": [[96, 99], ["data.Sequence.object_init_data"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence.object_init_data"], ["", "def", "frame_info", "(", "self", ",", "frame_num", ")", ":", "\n", "        ", "info", "=", "self", ".", "object_init_data", "(", "frame_num", "=", "frame_num", ")", "\n", "return", "info", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence.init_bbox": [[100, 102], ["data.Sequence.object_init_data().get", "data.Sequence.object_init_data"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence.object_init_data"], ["", "def", "init_bbox", "(", "self", ",", "frame_num", "=", "0", ")", ":", "\n", "        ", "return", "self", ".", "object_init_data", "(", "frame_num", "=", "frame_num", ")", ".", "get", "(", "'init_bbox'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence.init_mask": [[103, 105], ["data.Sequence.object_init_data().get", "data.Sequence.object_init_data"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence.object_init_data"], ["", "def", "init_mask", "(", "self", ",", "frame_num", "=", "0", ")", ":", "\n", "        ", "return", "self", ".", "object_init_data", "(", "frame_num", "=", "frame_num", ")", ".", "get", "(", "'init_mask'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence.get_info": [[106, 113], ["dict", "data.Sequence.get"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "def", "get_info", "(", "self", ",", "keys", ",", "frame_num", "=", "None", ")", ":", "\n", "        ", "info", "=", "dict", "(", ")", "\n", "for", "k", "in", "keys", ":", "\n", "            ", "val", "=", "self", ".", "get", "(", "k", ",", "frame_num", "=", "frame_num", ")", "\n", "if", "val", "is", "not", "None", ":", "\n", "                ", "info", "[", "k", "]", "=", "val", "\n", "", "", "return", "info", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence.object_init_data": [[114, 138], ["dict", "data.Sequence.init_data[].items", "dict", "ltr.data.image_loader.imread_indexed", "len", "int"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.imread_indexed"], ["", "def", "object_init_data", "(", "self", ",", "frame_num", "=", "None", ")", "->", "dict", ":", "\n", "        ", "if", "frame_num", "is", "None", ":", "\n", "            ", "frame_num", "=", "0", "\n", "", "if", "frame_num", "not", "in", "self", ".", "init_data", ":", "\n", "            ", "return", "dict", "(", ")", "\n", "\n", "", "init_data", "=", "dict", "(", ")", "\n", "for", "key", ",", "val", "in", "self", ".", "init_data", "[", "frame_num", "]", ".", "items", "(", ")", ":", "\n", "            ", "if", "val", "is", "None", ":", "\n", "                ", "continue", "\n", "", "init_data", "[", "'init_'", "+", "key", "]", "=", "val", "\n", "\n", "", "if", "'init_mask'", "in", "init_data", "and", "init_data", "[", "'init_mask'", "]", "is", "not", "None", ":", "\n", "            ", "anno", "=", "imread_indexed", "(", "init_data", "[", "'init_mask'", "]", ")", "\n", "if", "not", "self", ".", "multiobj_mode", "and", "self", ".", "object_ids", "is", "not", "None", ":", "\n", "                ", "assert", "len", "(", "self", ".", "object_ids", ")", "==", "1", "\n", "anno", "=", "(", "anno", "==", "int", "(", "self", ".", "object_ids", "[", "0", "]", ")", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "", "init_data", "[", "'init_mask'", "]", "=", "anno", "\n", "\n", "", "if", "self", ".", "object_ids", "is", "not", "None", ":", "\n", "            ", "init_data", "[", "'object_ids'", "]", "=", "self", ".", "object_ids", "\n", "init_data", "[", "'sequence_object_ids'", "]", "=", "self", ".", "object_ids", "\n", "\n", "", "return", "init_data", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence.target_class": [[139, 141], ["None"], "methods", ["None"], ["", "def", "target_class", "(", "self", ",", "frame_num", "=", "None", ")", ":", "\n", "        ", "return", "self", ".", "object_class", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence.get": [[142, 144], ["getattr"], "methods", ["None"], ["", "def", "get", "(", "self", ",", "name", ",", "frame_num", "=", "None", ")", ":", "\n", "        ", "return", "getattr", "(", "self", ",", "name", ")", "(", "frame_num", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence.__repr__": [[145, 147], ["len"], "methods", ["None"], ["", "def", "__repr__", "(", "self", ")", ":", "\n", "        ", "return", "\"{self.__class__.__name__} {self.name}, length={len} frames\"", ".", "format", "(", "self", "=", "self", ",", "len", "=", "len", "(", "self", ".", "frames", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.SequenceList.__getitem__": [[152, 164], ["isinstance", "IndexError", "isinstance", "list.__getitem__", "isinstance", "data.SequenceList", "data.SequenceList", "list.__getitem__", "list.__getitem__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__getitem__", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__getitem__", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__getitem__"], ["def", "__getitem__", "(", "self", ",", "item", ")", ":", "\n", "        ", "if", "isinstance", "(", "item", ",", "str", ")", ":", "\n", "            ", "for", "seq", "in", "self", ":", "\n", "                ", "if", "seq", ".", "name", "==", "item", ":", "\n", "                    ", "return", "seq", "\n", "", "", "raise", "IndexError", "(", "'Sequence name not in the dataset.'", ")", "\n", "", "elif", "isinstance", "(", "item", ",", "int", ")", ":", "\n", "            ", "return", "super", "(", "SequenceList", ",", "self", ")", ".", "__getitem__", "(", "item", ")", "\n", "", "elif", "isinstance", "(", "item", ",", "(", "tuple", ",", "list", ")", ")", ":", "\n", "            ", "return", "SequenceList", "(", "[", "super", "(", "SequenceList", ",", "self", ")", ".", "__getitem__", "(", "i", ")", "for", "i", "in", "item", "]", ")", "\n", "", "else", ":", "\n", "            ", "return", "SequenceList", "(", "super", "(", "SequenceList", ",", "self", ")", ".", "__getitem__", "(", "item", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.SequenceList.__add__": [[165, 167], ["data.SequenceList", "list.__add__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__add__"], ["", "", "def", "__add__", "(", "self", ",", "other", ")", ":", "\n", "        ", "return", "SequenceList", "(", "super", "(", "SequenceList", ",", "self", ")", ".", "__add__", "(", "other", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.SequenceList.copy": [[168, 170], ["data.SequenceList", "super().copy"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy"], ["", "def", "copy", "(", "self", ")", ":", "\n", "        ", "return", "SequenceList", "(", "super", "(", "SequenceList", ",", "self", ")", ".", "copy", "(", ")", ")", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.__init__": [[45, 69], ["pytracking.evaluation.environment.env_settings", "os.path.abspath", "os.path.isdir", "isinstance", "os.path.join", "importlib.import_module", "importlib.import_module.get_tracker_class", "os.path.dirname"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.atom.__init__.get_tracker_class"], ["\n", "env", "=", "env_settings", "(", ")", "\n", "if", "self", ".", "run_id", "is", "None", ":", "\n", "            ", "self", ".", "results_dir", "=", "'{}/{}/{}'", ".", "format", "(", "env", ".", "results_path", ",", "self", ".", "name", ",", "self", ".", "parameter_name", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "results_dir", "=", "'{}/{}/{}_{:03d}'", ".", "format", "(", "env", ".", "results_path", ",", "self", ".", "name", ",", "self", ".", "parameter_name", ",", "self", ".", "run_id", ")", "\n", "", "if", "result_only", ":", "\n", "            ", "self", ".", "results_dir", "=", "'{}/{}'", ".", "format", "(", "env", ".", "results_path", ",", "self", ".", "name", ")", "\n", "\n", "", "tracker_module_abspath", "=", "os", ".", "path", ".", "abspath", "(", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "__file__", ")", ",", "\n", "'..'", ",", "'tracker'", ",", "'%s.py'", "%", "self", ".", "name", ")", ")", "\n", "if", "os", ".", "path", ".", "isfile", "(", "tracker_module_abspath", ")", ":", "\n", "            ", "tracker_module", "=", "importlib", ".", "import_module", "(", "'lib.test.tracker.{}'", ".", "format", "(", "self", ".", "name", ")", ")", "\n", "self", ".", "tracker_class", "=", "tracker_module", ".", "get_tracker_class", "(", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "tracker_class", "=", "None", "\n", "\n", "", "", "def", "create_tracker", "(", "self", ",", "params", ")", ":", "\n", "        ", "tracker", "=", "self", ".", "tracker_class", "(", "params", ",", "self", ".", "dataset_name", ")", "\n", "return", "tracker", "\n", "\n", "", "def", "run_sequence", "(", "self", ",", "seq", ",", "debug", "=", "None", ")", ":", "\n", "        "]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.create_tracker": [[100, 104], ["tracker.Tracker.Tracker.tracker_class"], "methods", ["None"], ["# frame i", "\n", "# time[i] is either the processing time for frame i, or an OrderedDict containing processing times for each", "\n", "# object in frame i", "\n", "\n", "        ", "output", "=", "{", "'target_bbox'", ":", "[", "]", ",", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.run_sequence": [[105, 149], ["pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.Tracker.get_parameters", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.Tracker._init_visdom", "seq.init_info", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.Tracker._track_sequence", "getattr", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.Tracker.init_visualization", "getattr", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.Tracker.create_tracker", "getattr", "getattr", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper", "ValueError"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.get_parameters", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker._init_visdom", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.data.Sequence.init_info", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker._track_sequence", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.init_visualization", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.create_tracker"], ["'time'", ":", "[", "]", "}", "\n", "if", "tracker", ".", "params", ".", "save_all_boxes", ":", "\n", "            ", "output", "[", "'all_boxes'", "]", "=", "[", "]", "\n", "output", "[", "'all_scores'", "]", "=", "[", "]", "\n", "\n", "", "def", "_store_outputs", "(", "tracker_out", ":", "dict", ",", "defaults", "=", "None", ")", ":", "\n", "            ", "defaults", "=", "{", "}", "if", "defaults", "is", "None", "else", "defaults", "\n", "for", "key", "in", "output", ".", "keys", "(", ")", ":", "\n", "                ", "val", "=", "tracker_out", ".", "get", "(", "key", ",", "defaults", ".", "get", "(", "key", ",", "None", ")", ")", "\n", "if", "key", "in", "tracker_out", "or", "val", "is", "not", "None", ":", "\n", "                    ", "output", "[", "key", "]", ".", "append", "(", "val", ")", "\n", "\n", "# Initialize", "\n", "", "", "", "image", "=", "self", ".", "_read_image", "(", "seq", ".", "frames", "[", "0", "]", ")", "\n", "\n", "start_time", "=", "time", ".", "time", "(", ")", "\n", "out", "=", "tracker", ".", "initialize", "(", "image", ",", "init_info", ")", "\n", "if", "out", "is", "None", ":", "\n", "            ", "out", "=", "{", "}", "\n", "\n", "", "prev_output", "=", "OrderedDict", "(", "out", ")", "\n", "init_default", "=", "{", "'target_bbox'", ":", "init_info", ".", "get", "(", "'init_bbox'", ")", ",", "\n", "'time'", ":", "time", ".", "time", "(", ")", "-", "start_time", "}", "\n", "if", "tracker", ".", "params", ".", "save_all_boxes", ":", "\n", "            ", "init_default", "[", "'all_boxes'", "]", "=", "out", "[", "'all_boxes'", "]", "\n", "init_default", "[", "'all_scores'", "]", "=", "out", "[", "'all_scores'", "]", "\n", "\n", "", "_store_outputs", "(", "out", ",", "init_default", ")", "\n", "\n", "for", "frame_num", ",", "frame_path", "in", "enumerate", "(", "seq", ".", "frames", "[", "1", ":", "]", ",", "start", "=", "1", ")", ":", "\n", "            ", "image", "=", "self", ".", "_read_image", "(", "frame_path", ")", "\n", "\n", "start_time", "=", "time", ".", "time", "(", ")", "\n", "\n", "info", "=", "seq", ".", "frame_info", "(", "frame_num", ")", "\n", "info", "[", "'previous_output'", "]", "=", "prev_output", "\n", "\n", "out", "=", "tracker", ".", "track", "(", "image", ",", "info", ")", "\n", "prev_output", "=", "OrderedDict", "(", "out", ")", "\n", "_store_outputs", "(", "out", ",", "{", "'time'", ":", "time", ".", "time", "(", ")", "-", "start_time", "}", ")", "\n", "\n", "", "for", "key", "in", "[", "'target_bbox'", ",", "'all_boxes'", ",", "'all_scores'", "]", ":", "\n", "            ", "if", "key", "in", "output", "and", "len", "(", "output", "[", "key", "]", ")", "<=", "1", ":", "\n", "                ", "output", ".", "pop", "(", "key", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker._track_sequence": [[150, 228], ["tracker.Tracker._read_image", "time.time", "tracker.initialize", "collections.OrderedDict", "tracker.Tracker._track_sequence._store_outputs"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker._read_image", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize"], ["", "", "return", "output", "\n", "\n", "", "def", "run_video", "(", "self", ",", "videofilepath", ",", "optional_box", "=", "None", ",", "debug", "=", "None", ",", "visdom_info", "=", "None", ",", "save_results", "=", "False", ")", ":", "\n", "        ", "\"\"\"Run the tracker with the vieofile.\n        args:\n            debug: Debug level.\n        \"\"\"", "\n", "\n", "params", "=", "self", ".", "get_parameters", "(", ")", "\n", "\n", "debug_", "=", "debug", "\n", "if", "debug", "is", "None", ":", "\n", "            ", "debug_", "=", "getattr", "(", "params", ",", "'debug'", ",", "0", ")", "\n", "", "params", ".", "debug", "=", "debug_", "\n", "\n", "params", ".", "tracker_name", "=", "self", ".", "name", "\n", "params", ".", "param_name", "=", "self", ".", "parameter_name", "\n", "# self._init_visdom(visdom_info, debug_)", "\n", "\n", "multiobj_mode", "=", "getattr", "(", "params", ",", "'multiobj_mode'", ",", "getattr", "(", "self", ".", "tracker_class", ",", "'multiobj_mode'", ",", "'default'", ")", ")", "\n", "\n", "if", "multiobj_mode", "==", "'default'", ":", "\n", "            ", "tracker", "=", "self", ".", "create_tracker", "(", "params", ")", "\n", "\n", "", "elif", "multiobj_mode", "==", "'parallel'", ":", "\n", "            ", "tracker", "=", "MultiObjectWrapper", "(", "self", ".", "tracker_class", ",", "params", ",", "self", ".", "visdom", ",", "fast_load", "=", "True", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'Unknown multi object mode {}'", ".", "format", "(", "multiobj_mode", ")", ")", "\n", "\n", "", "assert", "os", ".", "path", ".", "isfile", "(", "videofilepath", ")", ",", "\"Invalid param {}\"", ".", "format", "(", "videofilepath", ")", "\n", "\", videofilepath must be a valid videofile\"", "\n", "\n", "output_boxes", "=", "[", "]", "\n", "\n", "cap", "=", "cv", ".", "VideoCapture", "(", "videofilepath", ")", "\n", "display_name", "=", "'Display: '", "+", "tracker", ".", "params", ".", "tracker_name", "\n", "cv", ".", "namedWindow", "(", "display_name", ",", "cv", ".", "WINDOW_NORMAL", "|", "cv", ".", "WINDOW_KEEPRATIO", ")", "\n", "cv", ".", "resizeWindow", "(", "display_name", ",", "960", ",", "720", ")", "\n", "success", ",", "frame", "=", "cap", ".", "read", "(", ")", "\n", "cv", ".", "imshow", "(", "display_name", ",", "frame", ")", "\n", "\n", "def", "_build_init_info", "(", "box", ")", ":", "\n", "            ", "return", "{", "'init_bbox'", ":", "box", "}", "\n", "\n", "", "if", "success", "is", "not", "True", ":", "\n", "            ", "print", "(", "\"Read frame from {} failed.\"", ".", "format", "(", "videofilepath", ")", ")", "\n", "exit", "(", "-", "1", ")", "\n", "", "if", "optional_box", "is", "not", "None", ":", "\n", "            ", "assert", "isinstance", "(", "optional_box", ",", "(", "list", ",", "tuple", ")", ")", "\n", "assert", "len", "(", "optional_box", ")", "==", "4", ",", "\"valid box's foramt is [x,y,w,h]\"", "\n", "tracker", ".", "initialize", "(", "frame", ",", "_build_init_info", "(", "optional_box", ")", ")", "\n", "output_boxes", ".", "append", "(", "optional_box", ")", "\n", "", "else", ":", "\n", "            ", "while", "True", ":", "\n", "# cv.waitKey()", "\n", "                ", "frame_disp", "=", "frame", ".", "copy", "(", ")", "\n", "\n", "cv", ".", "putText", "(", "frame_disp", ",", "'Select target ROI and press ENTER'", ",", "(", "20", ",", "30", ")", ",", "cv", ".", "FONT_HERSHEY_COMPLEX_SMALL", ",", "\n", "1.5", ",", "(", "0", ",", "0", ",", "0", ")", ",", "1", ")", "\n", "\n", "x", ",", "y", ",", "w", ",", "h", "=", "cv", ".", "selectROI", "(", "display_name", ",", "frame_disp", ",", "fromCenter", "=", "False", ")", "\n", "init_state", "=", "[", "x", ",", "y", ",", "w", ",", "h", "]", "\n", "tracker", ".", "initialize", "(", "frame", ",", "_build_init_info", "(", "init_state", ")", ")", "\n", "output_boxes", ".", "append", "(", "init_state", ")", "\n", "break", "\n", "\n", "", "", "while", "True", ":", "\n", "            ", "ret", ",", "frame", "=", "cap", ".", "read", "(", ")", "\n", "\n", "if", "frame", "is", "None", ":", "\n", "                ", "break", "\n", "\n", "", "frame_disp", "=", "frame", ".", "copy", "(", ")", "\n", "\n", "# Draw box", "\n", "out", "=", "tracker", ".", "track", "(", "frame", ")", "\n", "state", "=", "[", "int", "(", "s", ")", "for", "s", "in", "out", "[", "'target_bbox'", "]", "]", "\n", "output_boxes", ".", "append", "(", "state", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.run_video": [[229, 334], ["pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.Tracker.get_parameters", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.Tracker._init_visdom", "getattr", "os.path.isfile", "cv2.VideoCapture", "cv2.namedWindow", "cv2.resizeWindow", "cv2.VideoCapture.read", "cv2.imshow", "cv2.VideoCapture.release", "cv2.destroyAllWindows", "getattr", "getattr", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.Tracker.create_tracker", "hasattr", "print", "exit", "isinstance", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.initialize", "cv2.VideoCapture.read", "frame.copy", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.track", "cv2.rectangle", "cv2.putText", "cv2.putText", "cv2.putText", "cv2.imshow", "cv2.waitKey", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.initialize_features", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper", "ValueError", "collections.OrderedDict", "len", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.Tracker.run_video._build_init_info"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.get_parameters", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker._init_visdom", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.create_tracker", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.track", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.initialize_features"], ["cv", ".", "rectangle", "(", "frame_disp", ",", "(", "state", "[", "0", "]", ",", "state", "[", "1", "]", ")", ",", "(", "state", "[", "2", "]", "+", "state", "[", "0", "]", ",", "state", "[", "3", "]", "+", "state", "[", "1", "]", ")", ",", "\n", "(", "0", ",", "255", ",", "0", ")", ",", "5", ")", "\n", "\n", "font_color", "=", "(", "0", ",", "0", ",", "0", ")", "\n", "cv", ".", "putText", "(", "frame_disp", ",", "'Tracking!'", ",", "(", "20", ",", "30", ")", ",", "cv", ".", "FONT_HERSHEY_COMPLEX_SMALL", ",", "1", ",", "\n", "font_color", ",", "1", ")", "\n", "cv", ".", "putText", "(", "frame_disp", ",", "'Press r to reset'", ",", "(", "20", ",", "55", ")", ",", "cv", ".", "FONT_HERSHEY_COMPLEX_SMALL", ",", "1", ",", "\n", "font_color", ",", "1", ")", "\n", "cv", ".", "putText", "(", "frame_disp", ",", "'Press q to quit'", ",", "(", "20", ",", "80", ")", ",", "cv", ".", "FONT_HERSHEY_COMPLEX_SMALL", ",", "1", ",", "\n", "font_color", ",", "1", ")", "\n", "\n", "# Display the resulting frame", "\n", "cv", ".", "imshow", "(", "display_name", ",", "frame_disp", ")", "\n", "key", "=", "cv", ".", "waitKey", "(", "1", ")", "\n", "if", "key", "==", "ord", "(", "'q'", ")", ":", "\n", "                ", "break", "\n", "", "elif", "key", "==", "ord", "(", "'r'", ")", ":", "\n", "                ", "ret", ",", "frame", "=", "cap", ".", "read", "(", ")", "\n", "frame_disp", "=", "frame", ".", "copy", "(", ")", "\n", "\n", "cv", ".", "putText", "(", "frame_disp", ",", "'Select target ROI and press ENTER'", ",", "(", "20", ",", "30", ")", ",", "cv", ".", "FONT_HERSHEY_COMPLEX_SMALL", ",", "1.5", ",", "\n", "(", "0", ",", "0", ",", "0", ")", ",", "1", ")", "\n", "\n", "cv", ".", "imshow", "(", "display_name", ",", "frame_disp", ")", "\n", "x", ",", "y", ",", "w", ",", "h", "=", "cv", ".", "selectROI", "(", "display_name", ",", "frame_disp", ",", "fromCenter", "=", "False", ")", "\n", "init_state", "=", "[", "x", ",", "y", ",", "w", ",", "h", "]", "\n", "tracker", ".", "initialize", "(", "frame", ",", "_build_init_info", "(", "init_state", ")", ")", "\n", "output_boxes", ".", "append", "(", "init_state", ")", "\n", "\n", "# When everything done, release the capture", "\n", "", "", "cap", ".", "release", "(", ")", "\n", "cv", ".", "destroyAllWindows", "(", ")", "\n", "\n", "if", "save_results", ":", "\n", "            ", "if", "not", "os", ".", "path", ".", "exists", "(", "self", ".", "results_dir", ")", ":", "\n", "                ", "os", ".", "makedirs", "(", "self", ".", "results_dir", ")", "\n", "", "video_name", "=", "Path", "(", "videofilepath", ")", ".", "stem", "\n", "base_results_path", "=", "os", ".", "path", ".", "join", "(", "self", ".", "results_dir", ",", "'video_{}'", ".", "format", "(", "video_name", ")", ")", "\n", "\n", "tracked_bb", "=", "np", ".", "array", "(", "output_boxes", ")", ".", "astype", "(", "int", ")", "\n", "bbox_file", "=", "'{}.txt'", ".", "format", "(", "base_results_path", ")", "\n", "np", ".", "savetxt", "(", "bbox_file", ",", "tracked_bb", ",", "delimiter", "=", "'\\t'", ",", "fmt", "=", "'%d'", ")", "\n", "\n", "\n", "", "", "def", "get_parameters", "(", "self", ")", ":", "\n", "        ", "\"\"\"Get parameters.\"\"\"", "\n", "param_module", "=", "importlib", ".", "import_module", "(", "'lib.test.parameter.{}'", ".", "format", "(", "self", ".", "name", ")", ")", "\n", "params", "=", "param_module", ".", "parameters", "(", "self", ".", "parameter_name", ")", "\n", "return", "params", "\n", "\n", "", "def", "_read_image", "(", "self", ",", "image_file", ":", "str", ")", ":", "\n", "        ", "if", "isinstance", "(", "image_file", ",", "str", ")", ":", "\n", "            ", "im", "=", "cv", ".", "imread", "(", "image_file", ")", "\n", "return", "cv", ".", "cvtColor", "(", "im", ",", "cv", ".", "COLOR_BGR2RGB", ")", "\n", "", "elif", "isinstance", "(", "image_file", ",", "list", ")", "and", "len", "(", "image_file", ")", "==", "2", ":", "\n", "            ", "return", "decode_img", "(", "image_file", "[", "0", "]", ",", "image_file", "[", "1", "]", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "\"type of image_file should be str or list\"", ")", "\n", "\n", "\n", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.get_parameters": [[633, 638], ["importlib.import_module", "importlib.import_module.parameters"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters"], []], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker._read_image": [[688, 691], ["cv2.imread", "cv2.cvtColor"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.trackerlist": [[23, 34], ["isinstance", "tracker.Tracker"], "function", ["None"], ["        ", "run_ids", "=", "[", "run_ids", "]", "\n", "", "return", "[", "Tracker", "(", "name", ",", "parameter_name", ",", "dataset_name", ",", "run_id", ",", "display_name", ",", "result_only", ")", "for", "run_id", "in", "run_ids", "]", "\n", "\n", "\n", "", "class", "Tracker", ":", "\n", "    ", "\"\"\"Wraps the tracker for evaluation and running purposes.\n    args:\n        name: Name of tracking method.\n        parameter_name: Name of parameter file.\n        run_id: The run id.\n        display_name: Name to be displayed in the result plots.\n    \"\"\"", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.uavdataset.UAVDataset.__init__": [[17, 21], ["pytracking.evaluation.data.BaseDataset.__init__", "uavdataset.UAVDataset._get_sequence_info_list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tpldataset.TPLDataset._get_sequence_info_list"], ["self", ".", "base_path", "=", "self", ".", "env_settings", ".", "uav_path", "\n", "self", ".", "sequence_info_list", "=", "self", ".", "_get_sequence_info_list", "(", ")", "\n", "\n", "", "def", "get_sequence_list", "(", "self", ")", ":", "\n", "        ", "return", "SequenceList", "(", "[", "self", ".", "_construct_sequence", "(", "s", ")", "for", "s", "in", "self", ".", "sequence_info_list", "]", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.uavdataset.UAVDataset.get_sequence_list": [[22, 24], ["pytracking.evaluation.data.SequenceList", "uavdataset.UAVDataset._construct_sequence"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOS._construct_sequence"], ["\n", "", "def", "_construct_sequence", "(", "self", ",", "sequence_info", ")", ":", "\n", "        ", "sequence_path", "=", "sequence_info", "[", "'path'", "]", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.uavdataset.UAVDataset._construct_sequence": [[25, 45], ["pytracking.utils.load_text.load_text", "pytracking.evaluation.data.Sequence", "str", "range"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.load_text.load_text"], ["nz", "=", "sequence_info", "[", "'nz'", "]", "\n", "ext", "=", "sequence_info", "[", "'ext'", "]", "\n", "start_frame", "=", "sequence_info", "[", "'startFrame'", "]", "\n", "end_frame", "=", "sequence_info", "[", "'endFrame'", "]", "\n", "\n", "init_omit", "=", "0", "\n", "if", "'initOmit'", "in", "sequence_info", ":", "\n", "            ", "init_omit", "=", "sequence_info", "[", "'initOmit'", "]", "\n", "\n", "", "frames", "=", "[", "'{base_path}/{sequence_path}/{frame:0{nz}}.{ext}'", ".", "format", "(", "base_path", "=", "self", ".", "base_path", ",", "\n", "sequence_path", "=", "sequence_path", ",", "frame", "=", "frame_num", ",", "nz", "=", "nz", ",", "ext", "=", "ext", ")", "for", "frame_num", "in", "range", "(", "start_frame", "+", "init_omit", ",", "end_frame", "+", "1", ")", "]", "\n", "\n", "anno_path", "=", "'{}/{}'", ".", "format", "(", "self", ".", "base_path", ",", "sequence_info", "[", "'anno_path'", "]", ")", "\n", "\n", "ground_truth_rect", "=", "load_text", "(", "str", "(", "anno_path", ")", ",", "delimiter", "=", "','", ",", "dtype", "=", "np", ".", "float64", ",", "backend", "=", "'numpy'", ")", "\n", "\n", "return", "Sequence", "(", "sequence_info", "[", "'name'", "]", ",", "frames", ",", "'uav'", ",", "ground_truth_rect", "[", "init_omit", ":", ",", ":", "]", ",", "\n", "object_class", "=", "sequence_info", "[", "'object_class'", "]", ")", "\n", "\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "sequence_info_list", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.uavdataset.UAVDataset.__len__": [[46, 48], ["len"], "methods", ["None"], ["\n", "", "def", "_get_sequence_info_list", "(", "self", ")", ":", "\n", "        ", "sequence_info_list", "=", "[", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.uavdataset.UAVDataset._get_sequence_info_list": [[49, 300], ["None"], "methods", ["None"], ["{", "\"name\"", ":", "\"uav_bike1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/bike1\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "3085", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/bike1.txt\"", ",", "\"object_class\"", ":", "\"vehicle\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_bike2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/bike2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "553", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/bike2.txt\"", ",", "\"object_class\"", ":", "\"vehicle\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_bike3\"", ",", "\"path\"", ":", "\"data_seq/UAV123/bike3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "433", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/bike3.txt\"", ",", "\"object_class\"", ":", "\"vehicle\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_bird1_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/bird1\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "253", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/bird1_1.txt\"", ",", "\"object_class\"", ":", "\"bird\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_bird1_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/bird1\"", ",", "\"startFrame\"", ":", "775", ",", "\"endFrame\"", ":", "1477", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/bird1_2.txt\"", ",", "\"object_class\"", ":", "\"bird\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_bird1_3\"", ",", "\"path\"", ":", "\"data_seq/UAV123/bird1\"", ",", "\"startFrame\"", ":", "1573", ",", "\"endFrame\"", ":", "2437", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/bird1_3.txt\"", ",", "\"object_class\"", ":", "\"bird\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_boat1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/boat1\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "901", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/boat1.txt\"", ",", "\"object_class\"", ":", "\"vessel\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_boat2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/boat2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "799", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/boat2.txt\"", ",", "\"object_class\"", ":", "\"vessel\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_boat3\"", ",", "\"path\"", ":", "\"data_seq/UAV123/boat3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "901", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/boat3.txt\"", ",", "\"object_class\"", ":", "\"vessel\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_boat4\"", ",", "\"path\"", ":", "\"data_seq/UAV123/boat4\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "553", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/boat4.txt\"", ",", "\"object_class\"", ":", "\"vessel\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_boat5\"", ",", "\"path\"", ":", "\"data_seq/UAV123/boat5\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "505", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/boat5.txt\"", ",", "\"object_class\"", ":", "\"vessel\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_boat6\"", ",", "\"path\"", ":", "\"data_seq/UAV123/boat6\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "805", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/boat6.txt\"", ",", "\"object_class\"", ":", "\"vessel\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_boat7\"", ",", "\"path\"", ":", "\"data_seq/UAV123/boat7\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "535", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/boat7.txt\"", ",", "\"object_class\"", ":", "\"vessel\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_boat8\"", ",", "\"path\"", ":", "\"data_seq/UAV123/boat8\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "685", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/boat8.txt\"", ",", "\"object_class\"", ":", "\"vessel\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_boat9\"", ",", "\"path\"", ":", "\"data_seq/UAV123/boat9\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1399", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/boat9.txt\"", ",", "\"object_class\"", ":", "\"vessel\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_building1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/building1\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "469", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/building1.txt\"", ",", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_building2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/building2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "577", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/building2.txt\"", ",", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_building3\"", ",", "\"path\"", ":", "\"data_seq/UAV123/building3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "829", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/building3.txt\"", ",", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_building4\"", ",", "\"path\"", ":", "\"data_seq/UAV123/building4\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "787", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/building4.txt\"", ",", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_building5\"", ",", "\"path\"", ":", "\"data_seq/UAV123/building5\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "481", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/building5.txt\"", ",", "\"object_class\"", ":", "\"other\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car1_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car1\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "751", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car1_1.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car1_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car1\"", ",", "\"startFrame\"", ":", "751", ",", "\"endFrame\"", ":", "1627", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car1_2.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car1_3\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car1\"", ",", "\"startFrame\"", ":", "1627", ",", "\"endFrame\"", ":", "2629", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car1_3.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car10\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car10\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1405", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car10.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car11\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car11\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "337", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car11.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car12\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car12\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "499", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car12.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car13\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car13\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "415", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car13.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car14\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car14\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1327", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car14.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car15\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car15\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "469", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car15.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car16_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car16\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "415", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car16_1.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car16_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car16\"", ",", "\"startFrame\"", ":", "415", ",", "\"endFrame\"", ":", "1993", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car16_2.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car17\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car17\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1057", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car17.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car18\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car18\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1207", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car18.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car1_s\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car1_s\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1475", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car1_s.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1321", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car2.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car2_s\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car2_s\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "320", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car2_s.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car3\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1717", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car3.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car3_s\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car3_s\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1300", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car3_s.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car4\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car4\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1345", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car4.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car4_s\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car4_s\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "830", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car4_s.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car5\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car5\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "745", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car5.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car6_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car6\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "487", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car6_1.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car6_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car6\"", ",", "\"startFrame\"", ":", "487", ",", "\"endFrame\"", ":", "1807", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car6_2.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car6_3\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car6\"", ",", "\"startFrame\"", ":", "1807", ",", "\"endFrame\"", ":", "2953", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car6_3.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car6_4\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car6\"", ",", "\"startFrame\"", ":", "2953", ",", "\"endFrame\"", ":", "3925", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car6_4.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car6_5\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car6\"", ",", "\"startFrame\"", ":", "3925", ",", "\"endFrame\"", ":", "4861", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car6_5.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car7\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car7\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1033", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car7.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car8_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car8\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1357", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car8_1.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car8_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car8\"", ",", "\"startFrame\"", ":", "1357", ",", "\"endFrame\"", ":", "2575", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car8_2.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_car9\"", ",", "\"path\"", ":", "\"data_seq/UAV123/car9\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1879", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/car9.txt\"", ",", "\"object_class\"", ":", "\"car\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_group1_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/group1\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1333", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/group1_1.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_group1_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/group1\"", ",", "\"startFrame\"", ":", "1333", ",", "\"endFrame\"", ":", "2515", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/group1_2.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_group1_3\"", ",", "\"path\"", ":", "\"data_seq/UAV123/group1\"", ",", "\"startFrame\"", ":", "2515", ",", "\"endFrame\"", ":", "3925", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/group1_3.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_group1_4\"", ",", "\"path\"", ":", "\"data_seq/UAV123/group1\"", ",", "\"startFrame\"", ":", "3925", ",", "\"endFrame\"", ":", "4873", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/group1_4.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_group2_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/group2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "907", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/group2_1.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_group2_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/group2\"", ",", "\"startFrame\"", ":", "907", ",", "\"endFrame\"", ":", "1771", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/group2_2.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_group2_3\"", ",", "\"path\"", ":", "\"data_seq/UAV123/group2\"", ",", "\"startFrame\"", ":", "1771", ",", "\"endFrame\"", ":", "2683", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/group2_3.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_group3_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/group3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1567", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/group3_1.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_group3_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/group3\"", ",", "\"startFrame\"", ":", "1567", ",", "\"endFrame\"", ":", "2827", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/group3_2.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_group3_3\"", ",", "\"path\"", ":", "\"data_seq/UAV123/group3\"", ",", "\"startFrame\"", ":", "2827", ",", "\"endFrame\"", ":", "4369", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/group3_3.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_group3_4\"", ",", "\"path\"", ":", "\"data_seq/UAV123/group3\"", ",", "\"startFrame\"", ":", "4369", ",", "\"endFrame\"", ":", "5527", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/group3_4.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person1\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "799", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person1.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person10\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person10\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1021", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person10.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person11\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person11\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "721", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person11.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person12_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person12\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "601", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person12_1.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person12_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person12\"", ",", "\"startFrame\"", ":", "601", ",", "\"endFrame\"", ":", "1621", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person12_2.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person13\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person13\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "883", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person13.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person14_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person14\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "847", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person14_1.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person14_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person14\"", ",", "\"startFrame\"", ":", "847", ",", "\"endFrame\"", ":", "1813", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person14_2.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person14_3\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person14\"", ",", "\"startFrame\"", ":", "1813", ",", "\"endFrame\"", ":", "2923", ",", "\n", "\"nz\"", ":", "6", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person14_3.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person15\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person15\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1339", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person15.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person16\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person16\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1147", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person16.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person17_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person17\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1501", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person17_1.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person17_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person17\"", ",", "\"startFrame\"", ":", "1501", ",", "\"endFrame\"", ":", "2347", ",", "\n", "\"nz\"", ":", "6", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person17_2.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person18\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person18\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1393", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person18.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person19_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person19\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1243", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person19_1.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person19_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person19\"", ",", "\"startFrame\"", ":", "1243", ",", "\"endFrame\"", ":", "2791", ",", "\n", "\"nz\"", ":", "6", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person19_2.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person19_3\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person19\"", ",", "\"startFrame\"", ":", "2791", ",", "\"endFrame\"", ":", "4357", ",", "\n", "\"nz\"", ":", "6", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person19_3.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person1_s\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person1_s\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1600", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person1_s.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person2_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1189", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person2_1.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person2_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person2\"", ",", "\"startFrame\"", ":", "1189", ",", "\"endFrame\"", ":", "2623", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person2_2.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person20\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person20\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1783", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person20.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person21\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person21\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "487", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person21.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person22\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person22\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "199", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person22.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person23\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person23\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "397", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person23.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person2_s\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person2_s\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "250", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person2_s.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person3\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "643", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person3.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person3_s\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person3_s\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "505", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person3_s.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person4_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person4\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1501", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person4_1.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person4_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person4\"", ",", "\"startFrame\"", ":", "1501", ",", "\"endFrame\"", ":", "2743", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person4_2.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person5_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person5\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "877", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person5_1.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person5_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person5\"", ",", "\"startFrame\"", ":", "877", ",", "\"endFrame\"", ":", "2101", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person5_2.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person6\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person6\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "901", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person6.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person7_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person7\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1249", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person7_1.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person7_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person7\"", ",", "\"startFrame\"", ":", "1249", ",", "\"endFrame\"", ":", "2065", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person7_2.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person8_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person8\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1075", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person8_1.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person8_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person8\"", ",", "\"startFrame\"", ":", "1075", ",", "\"endFrame\"", ":", "1525", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person8_2.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_person9\"", ",", "\"path\"", ":", "\"data_seq/UAV123/person9\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "661", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/person9.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_truck1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/truck1\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "463", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/truck1.txt\"", ",", "\"object_class\"", ":", "\"truck\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_truck2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/truck2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "385", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/truck2.txt\"", ",", "\"object_class\"", ":", "\"truck\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_truck3\"", ",", "\"path\"", ":", "\"data_seq/UAV123/truck3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "535", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/truck3.txt\"", ",", "\"object_class\"", ":", "\"truck\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_truck4_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/truck4\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "577", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/truck4_1.txt\"", ",", "\"object_class\"", ":", "\"truck\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_truck4_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/truck4\"", ",", "\"startFrame\"", ":", "577", ",", "\"endFrame\"", ":", "1261", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/truck4_2.txt\"", ",", "\"object_class\"", ":", "\"truck\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_uav1_1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/uav1\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1555", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/uav1_1.txt\"", ",", "\"object_class\"", ":", "\"aircraft\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_uav1_2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/uav1\"", ",", "\"startFrame\"", ":", "1555", ",", "\"endFrame\"", ":", "2377", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/uav1_2.txt\"", ",", "\"object_class\"", ":", "\"aircraft\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_uav1_3\"", ",", "\"path\"", ":", "\"data_seq/UAV123/uav1\"", ",", "\"startFrame\"", ":", "2473", ",", "\"endFrame\"", ":", "3469", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/uav1_3.txt\"", ",", "\"object_class\"", ":", "\"aircraft\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_uav2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/uav2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "133", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/uav2.txt\"", ",", "\"object_class\"", ":", "\"aircraft\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_uav3\"", ",", "\"path\"", ":", "\"data_seq/UAV123/uav3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "265", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/uav3.txt\"", ",", "\"object_class\"", ":", "\"aircraft\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_uav4\"", ",", "\"path\"", ":", "\"data_seq/UAV123/uav4\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "157", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/uav4.txt\"", ",", "\"object_class\"", ":", "\"aircraft\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_uav5\"", ",", "\"path\"", ":", "\"data_seq/UAV123/uav5\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "139", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/uav5.txt\"", ",", "\"object_class\"", ":", "\"aircraft\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_uav6\"", ",", "\"path\"", ":", "\"data_seq/UAV123/uav6\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "109", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/uav6.txt\"", ",", "\"object_class\"", ":", "\"aircraft\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_uav7\"", ",", "\"path\"", ":", "\"data_seq/UAV123/uav7\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "373", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/uav7.txt\"", ",", "\"object_class\"", ":", "\"aircraft\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_uav8\"", ",", "\"path\"", ":", "\"data_seq/UAV123/uav8\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "301", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/uav8.txt\"", ",", "\"object_class\"", ":", "\"aircraft\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_wakeboard1\"", ",", "\"path\"", ":", "\"data_seq/UAV123/wakeboard1\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "421", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/wakeboard1.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_wakeboard10\"", ",", "\"path\"", ":", "\"data_seq/UAV123/wakeboard10\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "469", ",", "\n", "\"nz\"", ":", "6", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/wakeboard10.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_wakeboard2\"", ",", "\"path\"", ":", "\"data_seq/UAV123/wakeboard2\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "733", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/wakeboard2.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_wakeboard3\"", ",", "\"path\"", ":", "\"data_seq/UAV123/wakeboard3\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "823", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/wakeboard3.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_wakeboard4\"", ",", "\"path\"", ":", "\"data_seq/UAV123/wakeboard4\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "697", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/wakeboard4.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_wakeboard5\"", ",", "\"path\"", ":", "\"data_seq/UAV123/wakeboard5\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1675", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/wakeboard5.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_wakeboard6\"", ",", "\"path\"", ":", "\"data_seq/UAV123/wakeboard6\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1165", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/wakeboard6.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_wakeboard7\"", ",", "\"path\"", ":", "\"data_seq/UAV123/wakeboard7\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "199", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/wakeboard7.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_wakeboard8\"", ",", "\"path\"", ":", "\"data_seq/UAV123/wakeboard8\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1543", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/wakeboard8.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", ",", "\n", "{", "\"name\"", ":", "\"uav_wakeboard9\"", ",", "\"path\"", ":", "\"data_seq/UAV123/wakeboard9\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "355", ",", "\"nz\"", ":", "6", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"anno/UAV123/wakeboard9.txt\"", ",", "\"object_class\"", ":", "\"person\"", "}", "\n", "]", "\n", "\n", "return", "sequence_info_list", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.got10kdataset.GOT10KDataset.__init__": [[18, 28], ["pytracking.evaluation.data.BaseDataset.__init__", "got10kdataset.GOT10KDataset._get_sequence_list", "os.path.join", "os.path.join"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._get_sequence_list"], ["def", "__init__", "(", "self", ",", "split", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "# Split can be test, val, or ltrval (a validation split consisting of videos from the official train set)", "\n", "if", "split", "==", "'test'", "or", "split", "==", "'val'", ":", "\n", "            ", "self", ".", "base_path", "=", "os", ".", "path", ".", "join", "(", "self", ".", "env_settings", ".", "got10k_path", ",", "split", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "base_path", "=", "os", ".", "path", ".", "join", "(", "self", ".", "env_settings", ".", "got10k_path", ",", "'train'", ")", "\n", "\n", "", "self", ".", "sequence_list", "=", "self", ".", "_get_sequence_list", "(", "split", ")", "\n", "self", ".", "split", "=", "split", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.got10kdataset.GOT10KDataset.get_sequence_list": [[29, 31], ["pytracking.evaluation.data.SequenceList", "got10kdataset.GOT10KDataset._construct_sequence"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOS._construct_sequence"], ["", "def", "get_sequence_list", "(", "self", ")", ":", "\n", "        ", "return", "SequenceList", "(", "[", "self", ".", "_construct_sequence", "(", "s", ")", "for", "s", "in", "self", ".", "sequence_list", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.got10kdataset.GOT10KDataset._construct_sequence": [[32, 43], ["pytracking.utils.load_text.load_text", "frame_list.sort", "pytracking.evaluation.data.Sequence", "str", "os.path.join", "pytracking.utils.load_text.load_text.reshape", "os.listdir", "frame.endswith", "int"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.load_text.load_text"], ["", "def", "_construct_sequence", "(", "self", ",", "sequence_name", ")", ":", "\n", "        ", "anno_path", "=", "'{}/{}/groundtruth.txt'", ".", "format", "(", "self", ".", "base_path", ",", "sequence_name", ")", "\n", "\n", "ground_truth_rect", "=", "load_text", "(", "str", "(", "anno_path", ")", ",", "delimiter", "=", "','", ",", "dtype", "=", "np", ".", "float64", ")", "\n", "\n", "frames_path", "=", "'{}/{}'", ".", "format", "(", "self", ".", "base_path", ",", "sequence_name", ")", "\n", "frame_list", "=", "[", "frame", "for", "frame", "in", "os", ".", "listdir", "(", "frames_path", ")", "if", "frame", ".", "endswith", "(", "\".jpg\"", ")", "]", "\n", "frame_list", ".", "sort", "(", "key", "=", "lambda", "f", ":", "int", "(", "f", "[", ":", "-", "4", "]", ")", ")", "\n", "frames_list", "=", "[", "os", ".", "path", ".", "join", "(", "frames_path", ",", "frame", ")", "for", "frame", "in", "frame_list", "]", "\n", "\n", "return", "Sequence", "(", "sequence_name", ",", "frames_list", ",", "'got10k'", ",", "ground_truth_rect", ".", "reshape", "(", "-", "1", ",", "4", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.got10kdataset.GOT10KDataset.__len__": [[44, 46], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "sequence_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.got10kdataset.GOT10KDataset._get_sequence_list": [[47, 57], ["open", "f.read().splitlines", "open", "f.read().splitlines", "f.read", "f.read", "int"], "methods", ["None"], ["", "def", "_get_sequence_list", "(", "self", ",", "split", ")", ":", "\n", "        ", "with", "open", "(", "'{}/list.txt'", ".", "format", "(", "self", ".", "base_path", ")", ")", "as", "f", ":", "\n", "            ", "sequence_list", "=", "f", ".", "read", "(", ")", ".", "splitlines", "(", ")", "\n", "\n", "", "if", "split", "==", "'ltrval'", ":", "\n", "            ", "with", "open", "(", "'{}/got10k_val_split.txt'", ".", "format", "(", "self", ".", "env_settings", ".", "dataspec_path", ")", ")", "as", "f", ":", "\n", "                ", "seq_ids", "=", "f", ".", "read", "(", ")", ".", "splitlines", "(", ")", "\n", "\n", "", "sequence_list", "=", "[", "sequence_list", "[", "int", "(", "x", ")", "]", "for", "x", "in", "seq_ids", "]", "\n", "", "return", "sequence_list", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tc128cedataset.TC128CEDataset.__init__": [[13, 24], ["lib.test.evaluation.data.BaseDataset.__init__", "sorted", "glob.glob", "os.path.dirname", "os.path.basename", "os.path.join", "glob.glob", "os.path.join"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "base_path", "=", "self", ".", "env_settings", ".", "tc128_path", "\n", "self", ".", "anno_files", "=", "sorted", "(", "glob", ".", "glob", "(", "\n", "os", ".", "path", ".", "join", "(", "self", ".", "base_path", ",", "'*/*_gt.txt'", ")", ")", ")", "\n", "\"\"\"filter the newly added sequences (_ce)\"\"\"", "\n", "self", ".", "anno_files", "=", "[", "s", "for", "s", "in", "self", ".", "anno_files", "if", "\"_ce\"", "in", "s", "]", "\n", "self", ".", "seq_dirs", "=", "[", "os", ".", "path", ".", "dirname", "(", "f", ")", "for", "f", "in", "self", ".", "anno_files", "]", "\n", "self", ".", "seq_names", "=", "[", "os", ".", "path", ".", "basename", "(", "d", ")", "for", "d", "in", "self", ".", "seq_dirs", "]", "\n", "# valid frame range for each sequence", "\n", "self", ".", "range_files", "=", "[", "glob", ".", "glob", "(", "os", ".", "path", ".", "join", "(", "d", ",", "'*_frames.txt'", ")", ")", "[", "0", "]", "for", "d", "in", "self", ".", "seq_dirs", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tc128cedataset.TC128CEDataset.get_sequence_list": [[25, 27], ["lib.test.evaluation.data.SequenceList", "tc128cedataset.TC128CEDataset._construct_sequence"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOS._construct_sequence"], ["", "def", "get_sequence_list", "(", "self", ")", ":", "\n", "        ", "return", "SequenceList", "(", "[", "self", ".", "_construct_sequence", "(", "s", ")", "for", "s", "in", "self", ".", "seq_names", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tc128cedataset.TC128CEDataset._construct_sequence": [[28, 44], ["isinstance", "numpy.loadtxt", "numpy.loadtxt", "lib.test.evaluation.data.Sequence", "tc128cedataset.TC128CEDataset.seq_names.index", "os.path.join", "len", "len", "numpy.loadtxt.reshape", "Exception", "range"], "methods", ["None"], ["", "def", "_construct_sequence", "(", "self", ",", "sequence_name", ")", ":", "\n", "        ", "if", "isinstance", "(", "sequence_name", ",", "six", ".", "string_types", ")", ":", "\n", "            ", "if", "not", "sequence_name", "in", "self", ".", "seq_names", ":", "\n", "                ", "raise", "Exception", "(", "'Sequence {} not found.'", ".", "format", "(", "sequence_name", ")", ")", "\n", "", "index", "=", "self", ".", "seq_names", ".", "index", "(", "sequence_name", ")", "\n", "# load valid frame range", "\n", "", "frames", "=", "np", ".", "loadtxt", "(", "self", ".", "range_files", "[", "index", "]", ",", "dtype", "=", "int", ",", "delimiter", "=", "','", ")", "\n", "img_files", "=", "[", "os", ".", "path", ".", "join", "(", "self", ".", "seq_dirs", "[", "index", "]", ",", "'img/%04d.jpg'", "%", "f", ")", "for", "f", "in", "range", "(", "frames", "[", "0", "]", ",", "frames", "[", "1", "]", "+", "1", ")", "]", "\n", "\n", "# load annotations", "\n", "anno", "=", "np", ".", "loadtxt", "(", "self", ".", "anno_files", "[", "index", "]", ",", "delimiter", "=", "','", ")", "\n", "assert", "len", "(", "img_files", ")", "==", "len", "(", "anno", ")", "\n", "assert", "anno", ".", "shape", "[", "1", "]", "==", "4", "\n", "\n", "# return img_files, anno", "\n", "return", "Sequence", "(", "sequence_name", ",", "img_files", ",", "'tc128'", ",", "anno", ".", "reshape", "(", "-", "1", ",", "4", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tc128cedataset.TC128CEDataset.__len__": [[45, 47], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "seq_names", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.lasotdataset.LaSOTDataset.__init__": [[18, 23], ["pytracking.evaluation.data.BaseDataset.__init__", "lasotdataset.LaSOTDataset._get_sequence_list", "lasotdataset.LaSOTDataset.clean_seq_list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._get_sequence_list", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.lasotdataset.LaSOTDataset.clean_seq_list"], ["def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "base_path", "=", "self", ".", "env_settings", ".", "lasot_path", "\n", "self", ".", "sequence_list", "=", "self", ".", "_get_sequence_list", "(", ")", "\n", "self", ".", "clean_list", "=", "self", ".", "clean_seq_list", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.lasotdataset.LaSOTDataset.clean_seq_list": [[24, 30], ["range", "len", "lasotdataset.LaSOTDataset.sequence_list[].split", "clean_lst.append"], "methods", ["None"], ["", "def", "clean_seq_list", "(", "self", ")", ":", "\n", "        ", "clean_lst", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "len", "(", "self", ".", "sequence_list", ")", ")", ":", "\n", "            ", "cls", ",", "_", "=", "self", ".", "sequence_list", "[", "i", "]", ".", "split", "(", "'-'", ")", "\n", "clean_lst", ".", "append", "(", "cls", ")", "\n", "", "return", "clean_lst", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.lasotdataset.LaSOTDataset.get_sequence_list": [[31, 33], ["pytracking.evaluation.data.SequenceList", "lasotdataset.LaSOTDataset._construct_sequence"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOS._construct_sequence"], ["", "def", "get_sequence_list", "(", "self", ")", ":", "\n", "        ", "return", "SequenceList", "(", "[", "self", ".", "_construct_sequence", "(", "s", ")", "for", "s", "in", "self", ".", "sequence_list", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.lasotdataset.LaSOTDataset._construct_sequence": [[34, 57], ["pytracking.utils.load_text.load_text", "pytracking.utils.load_text.load_text", "pytracking.utils.load_text.load_text", "numpy.logical_and", "pytracking.evaluation.data.Sequence", "sequence_name.split", "str", "str", "str", "pytracking.utils.load_text.load_text.reshape", "range"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.load_text.load_text", "home.repos.pwc.inspect_result.researchmm_Stark.utils.load_text.load_text", "home.repos.pwc.inspect_result.researchmm_Stark.utils.load_text.load_text"], ["", "def", "_construct_sequence", "(", "self", ",", "sequence_name", ")", ":", "\n", "        ", "class_name", "=", "sequence_name", ".", "split", "(", "'-'", ")", "[", "0", "]", "\n", "anno_path", "=", "'{}/{}/{}/groundtruth.txt'", ".", "format", "(", "self", ".", "base_path", ",", "class_name", ",", "sequence_name", ")", "\n", "\n", "ground_truth_rect", "=", "load_text", "(", "str", "(", "anno_path", ")", ",", "delimiter", "=", "','", ",", "dtype", "=", "np", ".", "float64", ")", "\n", "\n", "occlusion_label_path", "=", "'{}/{}/{}/full_occlusion.txt'", ".", "format", "(", "self", ".", "base_path", ",", "class_name", ",", "sequence_name", ")", "\n", "\n", "# NOTE: pandas backed seems super super slow for loading occlusion/oov masks", "\n", "full_occlusion", "=", "load_text", "(", "str", "(", "occlusion_label_path", ")", ",", "delimiter", "=", "','", ",", "dtype", "=", "np", ".", "float64", ",", "backend", "=", "'numpy'", ")", "\n", "\n", "out_of_view_label_path", "=", "'{}/{}/{}/out_of_view.txt'", ".", "format", "(", "self", ".", "base_path", ",", "class_name", ",", "sequence_name", ")", "\n", "out_of_view", "=", "load_text", "(", "str", "(", "out_of_view_label_path", ")", ",", "delimiter", "=", "','", ",", "dtype", "=", "np", ".", "float64", ",", "backend", "=", "'numpy'", ")", "\n", "\n", "target_visible", "=", "np", ".", "logical_and", "(", "full_occlusion", "==", "0", ",", "out_of_view", "==", "0", ")", "\n", "\n", "frames_path", "=", "'{}/{}/{}/img'", ".", "format", "(", "self", ".", "base_path", ",", "class_name", ",", "sequence_name", ")", "\n", "\n", "frames_list", "=", "[", "'{}/{:08d}.jpg'", ".", "format", "(", "frames_path", ",", "frame_number", ")", "for", "frame_number", "in", "range", "(", "1", ",", "ground_truth_rect", ".", "shape", "[", "0", "]", "+", "1", ")", "]", "\n", "\n", "target_class", "=", "class_name", "\n", "return", "Sequence", "(", "sequence_name", ",", "frames_list", ",", "'lasot'", ",", "ground_truth_rect", ".", "reshape", "(", "-", "1", ",", "4", ")", ",", "\n", "object_class", "=", "target_class", ",", "target_visible", "=", "target_visible", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.lasotdataset.LaSOTDataset.__len__": [[58, 60], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "sequence_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.lasotdataset.LaSOTDataset._get_sequence_list": [[61, 343], ["None"], "methods", ["None"], ["", "def", "_get_sequence_list", "(", "self", ")", ":", "\n", "        ", "sequence_list", "=", "[", "'airplane-1'", ",", "\n", "'airplane-9'", ",", "\n", "'airplane-13'", ",", "\n", "'airplane-15'", ",", "\n", "'basketball-1'", ",", "\n", "'basketball-6'", ",", "\n", "'basketball-7'", ",", "\n", "'basketball-11'", ",", "\n", "'bear-2'", ",", "\n", "'bear-4'", ",", "\n", "'bear-6'", ",", "\n", "'bear-17'", ",", "\n", "'bicycle-2'", ",", "\n", "'bicycle-7'", ",", "\n", "'bicycle-9'", ",", "\n", "'bicycle-18'", ",", "\n", "'bird-2'", ",", "\n", "'bird-3'", ",", "\n", "'bird-15'", ",", "\n", "'bird-17'", ",", "\n", "'boat-3'", ",", "\n", "'boat-4'", ",", "\n", "'boat-12'", ",", "\n", "'boat-17'", ",", "\n", "'book-3'", ",", "\n", "'book-10'", ",", "\n", "'book-11'", ",", "\n", "'book-19'", ",", "\n", "'bottle-1'", ",", "\n", "'bottle-12'", ",", "\n", "'bottle-14'", ",", "\n", "'bottle-18'", ",", "\n", "'bus-2'", ",", "\n", "'bus-5'", ",", "\n", "'bus-17'", ",", "\n", "'bus-19'", ",", "\n", "'car-2'", ",", "\n", "'car-6'", ",", "\n", "'car-9'", ",", "\n", "'car-17'", ",", "\n", "'cat-1'", ",", "\n", "'cat-3'", ",", "\n", "'cat-18'", ",", "\n", "'cat-20'", ",", "\n", "'cattle-2'", ",", "\n", "'cattle-7'", ",", "\n", "'cattle-12'", ",", "\n", "'cattle-13'", ",", "\n", "'spider-14'", ",", "\n", "'spider-16'", ",", "\n", "'spider-18'", ",", "\n", "'spider-20'", ",", "\n", "'coin-3'", ",", "\n", "'coin-6'", ",", "\n", "'coin-7'", ",", "\n", "'coin-18'", ",", "\n", "'crab-3'", ",", "\n", "'crab-6'", ",", "\n", "'crab-12'", ",", "\n", "'crab-18'", ",", "\n", "'surfboard-12'", ",", "\n", "'surfboard-4'", ",", "\n", "'surfboard-5'", ",", "\n", "'surfboard-8'", ",", "\n", "'cup-1'", ",", "\n", "'cup-4'", ",", "\n", "'cup-7'", ",", "\n", "'cup-17'", ",", "\n", "'deer-4'", ",", "\n", "'deer-8'", ",", "\n", "'deer-10'", ",", "\n", "'deer-14'", ",", "\n", "'dog-1'", ",", "\n", "'dog-7'", ",", "\n", "'dog-15'", ",", "\n", "'dog-19'", ",", "\n", "'guitar-3'", ",", "\n", "'guitar-8'", ",", "\n", "'guitar-10'", ",", "\n", "'guitar-16'", ",", "\n", "'person-1'", ",", "\n", "'person-5'", ",", "\n", "'person-10'", ",", "\n", "'person-12'", ",", "\n", "'pig-2'", ",", "\n", "'pig-10'", ",", "\n", "'pig-13'", ",", "\n", "'pig-18'", ",", "\n", "'rubicCube-1'", ",", "\n", "'rubicCube-6'", ",", "\n", "'rubicCube-14'", ",", "\n", "'rubicCube-19'", ",", "\n", "'swing-10'", ",", "\n", "'swing-14'", ",", "\n", "'swing-17'", ",", "\n", "'swing-20'", ",", "\n", "'drone-13'", ",", "\n", "'drone-15'", ",", "\n", "'drone-2'", ",", "\n", "'drone-7'", ",", "\n", "'pool-12'", ",", "\n", "'pool-15'", ",", "\n", "'pool-3'", ",", "\n", "'pool-7'", ",", "\n", "'rabbit-10'", ",", "\n", "'rabbit-13'", ",", "\n", "'rabbit-17'", ",", "\n", "'rabbit-19'", ",", "\n", "'racing-10'", ",", "\n", "'racing-15'", ",", "\n", "'racing-16'", ",", "\n", "'racing-20'", ",", "\n", "'robot-1'", ",", "\n", "'robot-19'", ",", "\n", "'robot-5'", ",", "\n", "'robot-8'", ",", "\n", "'sepia-13'", ",", "\n", "'sepia-16'", ",", "\n", "'sepia-6'", ",", "\n", "'sepia-8'", ",", "\n", "'sheep-3'", ",", "\n", "'sheep-5'", ",", "\n", "'sheep-7'", ",", "\n", "'sheep-9'", ",", "\n", "'skateboard-16'", ",", "\n", "'skateboard-19'", ",", "\n", "'skateboard-3'", ",", "\n", "'skateboard-8'", ",", "\n", "'tank-14'", ",", "\n", "'tank-16'", ",", "\n", "'tank-6'", ",", "\n", "'tank-9'", ",", "\n", "'tiger-12'", ",", "\n", "'tiger-18'", ",", "\n", "'tiger-4'", ",", "\n", "'tiger-6'", ",", "\n", "'train-1'", ",", "\n", "'train-11'", ",", "\n", "'train-20'", ",", "\n", "'train-7'", ",", "\n", "'truck-16'", ",", "\n", "'truck-3'", ",", "\n", "'truck-6'", ",", "\n", "'truck-7'", ",", "\n", "'turtle-16'", ",", "\n", "'turtle-5'", ",", "\n", "'turtle-8'", ",", "\n", "'turtle-9'", ",", "\n", "'umbrella-17'", ",", "\n", "'umbrella-19'", ",", "\n", "'umbrella-2'", ",", "\n", "'umbrella-9'", ",", "\n", "'yoyo-15'", ",", "\n", "'yoyo-17'", ",", "\n", "'yoyo-19'", ",", "\n", "'yoyo-7'", ",", "\n", "'zebra-10'", ",", "\n", "'zebra-14'", ",", "\n", "'zebra-16'", ",", "\n", "'zebra-17'", ",", "\n", "'elephant-1'", ",", "\n", "'elephant-12'", ",", "\n", "'elephant-16'", ",", "\n", "'elephant-18'", ",", "\n", "'goldfish-3'", ",", "\n", "'goldfish-7'", ",", "\n", "'goldfish-8'", ",", "\n", "'goldfish-10'", ",", "\n", "'hat-1'", ",", "\n", "'hat-2'", ",", "\n", "'hat-5'", ",", "\n", "'hat-18'", ",", "\n", "'kite-4'", ",", "\n", "'kite-6'", ",", "\n", "'kite-10'", ",", "\n", "'kite-15'", ",", "\n", "'motorcycle-1'", ",", "\n", "'motorcycle-3'", ",", "\n", "'motorcycle-9'", ",", "\n", "'motorcycle-18'", ",", "\n", "'mouse-1'", ",", "\n", "'mouse-8'", ",", "\n", "'mouse-9'", ",", "\n", "'mouse-17'", ",", "\n", "'flag-3'", ",", "\n", "'flag-9'", ",", "\n", "'flag-5'", ",", "\n", "'flag-2'", ",", "\n", "'frog-3'", ",", "\n", "'frog-4'", ",", "\n", "'frog-20'", ",", "\n", "'frog-9'", ",", "\n", "'gametarget-1'", ",", "\n", "'gametarget-2'", ",", "\n", "'gametarget-7'", ",", "\n", "'gametarget-13'", ",", "\n", "'hand-2'", ",", "\n", "'hand-3'", ",", "\n", "'hand-9'", ",", "\n", "'hand-16'", ",", "\n", "'helmet-5'", ",", "\n", "'helmet-11'", ",", "\n", "'helmet-19'", ",", "\n", "'helmet-13'", ",", "\n", "'licenseplate-6'", ",", "\n", "'licenseplate-12'", ",", "\n", "'licenseplate-13'", ",", "\n", "'licenseplate-15'", ",", "\n", "'electricfan-1'", ",", "\n", "'electricfan-10'", ",", "\n", "'electricfan-18'", ",", "\n", "'electricfan-20'", ",", "\n", "'chameleon-3'", ",", "\n", "'chameleon-6'", ",", "\n", "'chameleon-11'", ",", "\n", "'chameleon-20'", ",", "\n", "'crocodile-3'", ",", "\n", "'crocodile-4'", ",", "\n", "'crocodile-10'", ",", "\n", "'crocodile-14'", ",", "\n", "'gecko-1'", ",", "\n", "'gecko-5'", ",", "\n", "'gecko-16'", ",", "\n", "'gecko-19'", ",", "\n", "'fox-2'", ",", "\n", "'fox-3'", ",", "\n", "'fox-5'", ",", "\n", "'fox-20'", ",", "\n", "'giraffe-2'", ",", "\n", "'giraffe-10'", ",", "\n", "'giraffe-13'", ",", "\n", "'giraffe-15'", ",", "\n", "'gorilla-4'", ",", "\n", "'gorilla-6'", ",", "\n", "'gorilla-9'", ",", "\n", "'gorilla-13'", ",", "\n", "'hippo-1'", ",", "\n", "'hippo-7'", ",", "\n", "'hippo-9'", ",", "\n", "'hippo-20'", ",", "\n", "'horse-1'", ",", "\n", "'horse-4'", ",", "\n", "'horse-12'", ",", "\n", "'horse-15'", ",", "\n", "'kangaroo-2'", ",", "\n", "'kangaroo-5'", ",", "\n", "'kangaroo-11'", ",", "\n", "'kangaroo-14'", ",", "\n", "'leopard-1'", ",", "\n", "'leopard-7'", ",", "\n", "'leopard-16'", ",", "\n", "'leopard-20'", ",", "\n", "'lion-1'", ",", "\n", "'lion-5'", ",", "\n", "'lion-12'", ",", "\n", "'lion-20'", ",", "\n", "'lizard-1'", ",", "\n", "'lizard-3'", ",", "\n", "'lizard-6'", ",", "\n", "'lizard-13'", ",", "\n", "'microphone-2'", ",", "\n", "'microphone-6'", ",", "\n", "'microphone-14'", ",", "\n", "'microphone-16'", ",", "\n", "'monkey-3'", ",", "\n", "'monkey-4'", ",", "\n", "'monkey-9'", ",", "\n", "'monkey-17'", ",", "\n", "'shark-2'", ",", "\n", "'shark-3'", ",", "\n", "'shark-5'", ",", "\n", "'shark-6'", ",", "\n", "'squirrel-8'", ",", "\n", "'squirrel-11'", ",", "\n", "'squirrel-13'", ",", "\n", "'squirrel-19'", ",", "\n", "'volleyball-1'", ",", "\n", "'volleyball-13'", ",", "\n", "'volleyball-18'", ",", "\n", "'volleyball-19'", "]", "\n", "return", "sequence_list", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tc128dataset.TC128Dataset.__init__": [[13, 22], ["lib.test.evaluation.data.BaseDataset.__init__", "sorted", "glob.glob", "os.path.dirname", "os.path.basename", "os.path.join", "glob.glob", "os.path.join"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "base_path", "=", "self", ".", "env_settings", ".", "tc128_path", "\n", "self", ".", "anno_files", "=", "sorted", "(", "glob", ".", "glob", "(", "\n", "os", ".", "path", ".", "join", "(", "self", ".", "base_path", ",", "'*/*_gt.txt'", ")", ")", ")", "\n", "self", ".", "seq_dirs", "=", "[", "os", ".", "path", ".", "dirname", "(", "f", ")", "for", "f", "in", "self", ".", "anno_files", "]", "\n", "self", ".", "seq_names", "=", "[", "os", ".", "path", ".", "basename", "(", "d", ")", "for", "d", "in", "self", ".", "seq_dirs", "]", "\n", "# valid frame range for each sequence", "\n", "self", ".", "range_files", "=", "[", "glob", ".", "glob", "(", "os", ".", "path", ".", "join", "(", "d", ",", "'*_frames.txt'", ")", ")", "[", "0", "]", "for", "d", "in", "self", ".", "seq_dirs", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tc128dataset.TC128Dataset.get_sequence_list": [[23, 25], ["lib.test.evaluation.data.SequenceList", "tc128dataset.TC128Dataset._construct_sequence"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOS._construct_sequence"], ["", "def", "get_sequence_list", "(", "self", ")", ":", "\n", "        ", "return", "SequenceList", "(", "[", "self", ".", "_construct_sequence", "(", "s", ")", "for", "s", "in", "self", ".", "seq_names", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tc128dataset.TC128Dataset._construct_sequence": [[26, 42], ["isinstance", "numpy.loadtxt", "numpy.loadtxt", "lib.test.evaluation.data.Sequence", "tc128dataset.TC128Dataset.seq_names.index", "os.path.join", "len", "len", "numpy.loadtxt.reshape", "Exception", "range"], "methods", ["None"], ["", "def", "_construct_sequence", "(", "self", ",", "sequence_name", ")", ":", "\n", "        ", "if", "isinstance", "(", "sequence_name", ",", "six", ".", "string_types", ")", ":", "\n", "            ", "if", "not", "sequence_name", "in", "self", ".", "seq_names", ":", "\n", "                ", "raise", "Exception", "(", "'Sequence {} not found.'", ".", "format", "(", "sequence_name", ")", ")", "\n", "", "index", "=", "self", ".", "seq_names", ".", "index", "(", "sequence_name", ")", "\n", "# load valid frame range", "\n", "", "frames", "=", "np", ".", "loadtxt", "(", "self", ".", "range_files", "[", "index", "]", ",", "dtype", "=", "int", ",", "delimiter", "=", "','", ")", "\n", "img_files", "=", "[", "os", ".", "path", ".", "join", "(", "self", ".", "seq_dirs", "[", "index", "]", ",", "'img/%04d.jpg'", "%", "f", ")", "for", "f", "in", "range", "(", "frames", "[", "0", "]", ",", "frames", "[", "1", "]", "+", "1", ")", "]", "\n", "\n", "# load annotations", "\n", "anno", "=", "np", ".", "loadtxt", "(", "self", ".", "anno_files", "[", "index", "]", ",", "delimiter", "=", "','", ")", "\n", "assert", "len", "(", "img_files", ")", "==", "len", "(", "anno", ")", "\n", "assert", "anno", ".", "shape", "[", "1", "]", "==", "4", "\n", "\n", "# return img_files, anno", "\n", "return", "Sequence", "(", "sequence_name", ",", "img_files", ",", "'tc128'", ",", "anno", ".", "reshape", "(", "-", "1", ",", "4", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tc128dataset.TC128Dataset.__len__": [[43, 45], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "seq_names", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.environment.EnvSettings.__init__": [[6, 27], ["os.path.abspath", "os.path.join", "os.path.dirname"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "test_path", "=", "os", ".", "path", ".", "abspath", "(", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "__file__", ")", ",", "'..'", ")", ")", "\n", "\n", "self", ".", "results_path", "=", "'{}/tracking_results/'", ".", "format", "(", "test_path", ")", "\n", "self", ".", "segmentation_path", "=", "'{}/segmentation_results/'", ".", "format", "(", "test_path", ")", "\n", "self", ".", "network_path", "=", "'{}/networks/'", ".", "format", "(", "test_path", ")", "\n", "self", ".", "result_plot_path", "=", "'{}/result_plots/'", ".", "format", "(", "test_path", ")", "\n", "self", ".", "otb_path", "=", "''", "\n", "self", ".", "nfs_path", "=", "''", "\n", "self", ".", "uav_path", "=", "''", "\n", "self", ".", "tpl_path", "=", "''", "\n", "self", ".", "vot_path", "=", "''", "\n", "self", ".", "got10k_path", "=", "''", "\n", "self", ".", "lasot_path", "=", "''", "\n", "self", ".", "trackingnet_path", "=", "''", "\n", "self", ".", "davis_dir", "=", "''", "\n", "self", ".", "youtubevos_dir", "=", "''", "\n", "\n", "self", ".", "got_packed_results_path", "=", "''", "\n", "self", ".", "got_reports_path", "=", "''", "\n", "self", ".", "tn_packed_results_path", "=", "''", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.environment.EnvSettings_ITP.__init__": [[56, 80], ["os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "workspace_dir", ",", "data_dir", ",", "save_dir", ")", ":", "\n", "        ", "self", ".", "prj_dir", "=", "workspace_dir", "\n", "self", ".", "save_dir", "=", "save_dir", "\n", "self", ".", "results_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "'test/tracking_results'", ")", "\n", "self", ".", "segmentation_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "'test/segmentation_results'", ")", "\n", "self", ".", "network_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "'test/networks'", ")", "\n", "self", ".", "result_plot_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "'test/result_plots'", ")", "\n", "self", ".", "otb_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'OTB2015'", ")", "\n", "self", ".", "nfs_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'nfs'", ")", "\n", "self", ".", "uav_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'UAV123'", ")", "\n", "self", ".", "tc128_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'TC128'", ")", "\n", "self", ".", "tpl_path", "=", "''", "\n", "self", ".", "vot_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'VOT2019'", ")", "\n", "self", ".", "got10k_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'got10k'", ")", "\n", "self", ".", "got10k_lmdb_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'got10k_lmdb'", ")", "\n", "self", ".", "lasot_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'lasot'", ")", "\n", "self", ".", "lasot_lmdb_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'lasot_lmdb'", ")", "\n", "self", ".", "trackingnet_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'trackingNet'", ")", "\n", "self", ".", "davis_dir", "=", "''", "\n", "self", ".", "youtubevos_dir", "=", "''", "\n", "\n", "self", ".", "got_packed_results_path", "=", "''", "\n", "self", ".", "got_reports_path", "=", "''", "\n", "self", ".", "tn_packed_results_path", "=", "''", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.environment.create_default_local_file": [[29, 53], ["os.path.join", "os.path.dirname", "open", "environment.EnvSettings", "f.write", "f.write", "f.write", "f.write", "dir", "f.write", "getattr", "attr.startswith", "callable", "f.write", "f.write"], "function", ["None"], ["", "", "def", "create_default_local_file", "(", ")", ":", "\n", "    ", "comment", "=", "{", "'results_path'", ":", "'Where to store tracking results'", ",", "\n", "'network_path'", ":", "'Where tracking networks are stored.'", "}", "\n", "\n", "path", "=", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "__file__", ")", ",", "'local.py'", ")", "\n", "with", "open", "(", "path", ",", "'w'", ")", "as", "f", ":", "\n", "        ", "settings", "=", "EnvSettings", "(", ")", "\n", "\n", "f", ".", "write", "(", "'from test.evaluation.environment import EnvSettings\\n\\n'", ")", "\n", "f", ".", "write", "(", "'def local_env_settings():\\n'", ")", "\n", "f", ".", "write", "(", "'    settings = EnvSettings()\\n\\n'", ")", "\n", "f", ".", "write", "(", "'    # Set your local paths here.\\n\\n'", ")", "\n", "\n", "for", "attr", "in", "dir", "(", "settings", ")", ":", "\n", "            ", "comment_str", "=", "None", "\n", "if", "attr", "in", "comment", ":", "\n", "                ", "comment_str", "=", "comment", "[", "attr", "]", "\n", "", "attr_val", "=", "getattr", "(", "settings", ",", "attr", ")", "\n", "if", "not", "attr", ".", "startswith", "(", "'__'", ")", "and", "not", "callable", "(", "attr_val", ")", ":", "\n", "                ", "if", "comment_str", "is", "None", ":", "\n", "                    ", "f", ".", "write", "(", "'    settings.{} = \\'{}\\'\\n'", ".", "format", "(", "attr", ",", "attr_val", ")", ")", "\n", "", "else", ":", "\n", "                    ", "f", ".", "write", "(", "'    settings.{} = \\'{}\\'    # {}\\n'", ".", "format", "(", "attr", ",", "attr_val", ",", "comment_str", ")", ")", "\n", "", "", "", "f", ".", "write", "(", "'\\n    return settings\\n\\n'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.environment.create_default_local_file_ITP_test": [[82, 106], ["os.path.join", "os.path.dirname", "open", "environment.EnvSettings_ITP", "f.write", "f.write", "f.write", "f.write", "dir", "f.write", "getattr", "attr.startswith", "callable", "f.write", "f.write"], "function", ["None"], ["", "", "def", "create_default_local_file_ITP_test", "(", "workspace_dir", ",", "data_dir", ",", "save_dir", ")", ":", "\n", "    ", "comment", "=", "{", "'results_path'", ":", "'Where to store tracking results'", ",", "\n", "'network_path'", ":", "'Where tracking networks are stored.'", "}", "\n", "\n", "path", "=", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "__file__", ")", ",", "'local.py'", ")", "\n", "with", "open", "(", "path", ",", "'w'", ")", "as", "f", ":", "\n", "        ", "settings", "=", "EnvSettings_ITP", "(", "workspace_dir", ",", "data_dir", ",", "save_dir", ")", "\n", "\n", "f", ".", "write", "(", "'from lib.test.evaluation.environment import EnvSettings\\n\\n'", ")", "\n", "f", ".", "write", "(", "'def local_env_settings():\\n'", ")", "\n", "f", ".", "write", "(", "'    settings = EnvSettings()\\n\\n'", ")", "\n", "f", ".", "write", "(", "'    # Set your local paths here.\\n\\n'", ")", "\n", "\n", "for", "attr", "in", "dir", "(", "settings", ")", ":", "\n", "            ", "comment_str", "=", "None", "\n", "if", "attr", "in", "comment", ":", "\n", "                ", "comment_str", "=", "comment", "[", "attr", "]", "\n", "", "attr_val", "=", "getattr", "(", "settings", ",", "attr", ")", "\n", "if", "not", "attr", ".", "startswith", "(", "'__'", ")", "and", "not", "callable", "(", "attr_val", ")", ":", "\n", "                ", "if", "comment_str", "is", "None", ":", "\n", "                    ", "f", ".", "write", "(", "'    settings.{} = \\'{}\\'\\n'", ".", "format", "(", "attr", ",", "attr_val", ")", ")", "\n", "", "else", ":", "\n", "                    ", "f", ".", "write", "(", "'    settings.{} = \\'{}\\'    # {}\\n'", ".", "format", "(", "attr", ",", "attr_val", ",", "comment_str", ")", ")", "\n", "", "", "", "f", ".", "write", "(", "'\\n    return settings\\n\\n'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.environment.env_settings": [[55, 67], ["importlib.import_module", "importlib.import_module.local_env_settings", "os.path.join", "environment.create_default_local_file", "RuntimeError", "os.path.dirname"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.create_default_local_file"], ["", "", "class", "EnvSettings_ITP", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "workspace_dir", ",", "data_dir", ",", "save_dir", ")", ":", "\n", "        ", "self", ".", "prj_dir", "=", "workspace_dir", "\n", "self", ".", "save_dir", "=", "save_dir", "\n", "self", ".", "results_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "'test/tracking_results'", ")", "\n", "self", ".", "segmentation_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "'test/segmentation_results'", ")", "\n", "self", ".", "network_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "'test/networks'", ")", "\n", "self", ".", "result_plot_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "'test/result_plots'", ")", "\n", "self", ".", "otb_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'OTB2015'", ")", "\n", "self", ".", "nfs_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'nfs'", ")", "\n", "self", ".", "uav_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'UAV123'", ")", "\n", "self", ".", "tc128_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'TC128'", ")", "\n", "self", ".", "tpl_path", "=", "''", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.datasets.load_dataset": [[44, 54], ["name.lower.lower", "dataset_dict.get", "importlib.import_module", "dataset.get_sequence_list", "ValueError", "getattr"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase.get_sequence_list"], []], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.datasets.get_dataset": [[56, 62], ["pytracking.evaluation.data.SequenceList", "pytracking.evaluation.data.SequenceList.extend", "datasets.load_dataset"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.datasets.load_dataset"], []], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot.VOT.__init__": [[84, 108], ["trax.server.ServerOptions", "trax.server.Server", "vot.VOT._trax.wait", "str", "vot.VOT._trax.status", "vot.convert_region", "Polygon", "Rectangle", "x.strip", "vot.parse_region", "open().readlines", "open().readline", "Point", "open", "open"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot.convert_region", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot.parse_region"], ["", "self", ".", "_trax", ".", "status", "(", "tregion", ",", "properties", ")", "\n", "\n", "", "def", "frame", "(", "self", ")", ":", "\n", "        ", "\"\"\"\n        Get a frame (image path) from client\n        Returns:\n            absolute path of the image\n        \"\"\"", "\n", "if", "hasattr", "(", "self", ",", "\"_image\"", ")", ":", "\n", "            ", "image", "=", "self", ".", "_image", "\n", "del", "self", ".", "_image", "\n", "return", "image", "\n", "\n", "", "request", "=", "self", ".", "_trax", ".", "wait", "(", ")", "\n", "\n", "if", "request", ".", "type", "==", "'frame'", ":", "\n", "            ", "image", "=", "[", "x", ".", "path", "(", ")", "for", "k", ",", "x", "in", "request", ".", "image", ".", "items", "(", ")", "]", "\n", "if", "len", "(", "image", ")", "==", "1", ":", "\n", "                ", "return", "image", "[", "0", "]", "\n", "", "return", "image", "\n", "", "else", ":", "\n", "            ", "return", "None", "\n", "\n", "\n", "", "", "def", "quit", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot.VOT.region": [[109, 119], ["None"], "methods", ["None"], ["        ", "if", "hasattr", "(", "self", ",", "'_trax'", ")", ":", "\n", "            ", "self", ".", "_trax", ".", "quit", "(", ")", "\n", "\n", "", "", "def", "__del__", "(", "self", ")", ":", "\n", "        ", "self", ".", "quit", "(", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot.VOT.report": [[120, 137], ["isinstance", "isinstance", "isinstance", "vot.VOT._trax.status", "vot.VOT._result.append", "trax.region.Polygon", "trax.region.Rectangle"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot.VOT.frame": [[138, 162], ["hasattr", "vot.VOT._trax.wait", "str", "str", "len"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot.VOT.quit": [[163, 171], ["vot.VOT._trax.quit", "hasattr", "open", "f.write", "f.write", "vot.encode_region"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.quit", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot.encode_region"], []], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot.VOT.__del__": [[172, 174], ["vot.VOT.quit"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.quit"], []], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot.parse_region": [[27, 34], ["map", "string.split", "len", "Rectangle", "Polygon", "len", "len", "Point", "xrange", "len"], "function", ["None"], ["\n", "assert", "(", "region_format", "in", "[", "trax", ".", "Region", ".", "RECTANGLE", ",", "trax", ".", "Region", ".", "POLYGON", ",", "trax", ".", "Region", ".", "MASK", "]", ")", "\n", "\n", "if", "channels", "is", "None", ":", "\n", "            ", "channels", "=", "[", "'color'", "]", "\n", "", "elif", "channels", "==", "'rgbd'", ":", "\n", "            ", "channels", "=", "[", "'color'", ",", "'depth'", "]", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot.encode_region": [[35, 42], ["isinstance", "isinstance"], "function", ["None"], ["", "elif", "channels", "==", "'rgbt'", ":", "\n", "            ", "channels", "=", "[", "'color'", ",", "'ir'", "]", "\n", "", "elif", "channels", "==", "'ir'", ":", "\n", "            ", "channels", "=", "[", "'ir'", "]", "\n", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "'Illegal configuration {}.'", ".", "format", "(", "channels", ")", ")", "\n", "\n", "", "self", ".", "_trax", "=", "trax", ".", "Server", "(", "[", "region_format", "]", ",", "[", "trax", ".", "Image", ".", "PATH", "]", ",", "channels", ",", "customMetadata", "=", "dict", "(", "vot", "=", "\"python\"", ")", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot.convert_region": [[43, 81], ["isinstance", "isinstance", "copy.copy", "isinstance", "points.append", "points.append", "points.append", "points.append", "Polygon", "isinstance", "Rectangle", "copy.copy", "min", "max", "min", "max"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["\n", "request", "=", "self", ".", "_trax", ".", "wait", "(", ")", "\n", "assert", "(", "request", ".", "type", "==", "'initialize'", ")", "\n", "if", "isinstance", "(", "request", ".", "region", ",", "trax", ".", "Polygon", ")", ":", "\n", "            ", "self", ".", "_region", "=", "Polygon", "(", "[", "Point", "(", "x", "[", "0", "]", ",", "x", "[", "1", "]", ")", "for", "x", "in", "request", ".", "region", "]", ")", "\n", "", "elif", "isinstance", "(", "request", ".", "region", ",", "trax", ".", "Mask", ")", ":", "\n", "            ", "self", ".", "_region", "=", "request", ".", "region", ".", "array", "(", "True", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "_region", "=", "Rectangle", "(", "*", "request", ".", "region", ".", "bounds", "(", ")", ")", "\n", "", "self", ".", "_image", "=", "[", "x", ".", "path", "(", ")", "for", "k", ",", "x", "in", "request", ".", "image", ".", "items", "(", ")", "]", "\n", "if", "len", "(", "self", ".", "_image", ")", "==", "1", ":", "\n", "            ", "self", ".", "_image", "=", "self", ".", "_image", "[", "0", "]", "\n", "\n", "", "self", ".", "_trax", ".", "status", "(", "request", ".", "region", ")", "\n", "\n", "", "def", "region", "(", "self", ")", ":", "\n", "        ", "\"\"\"\n        Send configuration message to the client and receive the initialization\n        region and the path of the first image\n        Returns:\n            initialization region\n        \"\"\"", "\n", "\n", "return", "self", ".", "_region", "\n", "\n", "", "def", "report", "(", "self", ",", "region", ",", "confidence", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        Report the tracking results to the client\n        Arguments:\n            region: region for the frame\n        \"\"\"", "\n", "assert", "(", "isinstance", "(", "region", ",", "(", "Rectangle", ",", "Polygon", ",", "np", ".", "ndarray", ")", ")", ")", "\n", "if", "isinstance", "(", "region", ",", "Polygon", ")", ":", "\n", "            ", "tregion", "=", "trax", ".", "Polygon", ".", "create", "(", "[", "(", "x", ".", "x", ",", "x", ".", "y", ")", "for", "x", "in", "region", ".", "points", "]", ")", "\n", "", "elif", "isinstance", "(", "region", ",", "np", ".", "ndarray", ")", ":", "\n", "            ", "tregion", "=", "trax", ".", "Mask", ".", "create", "(", "region", ")", "\n", "", "else", ":", "\n", "            ", "tregion", "=", "trax", ".", "Rectangle", ".", "create", "(", "region", ".", "x", ",", "region", ".", "y", ",", "region", ".", "width", ",", "region", ".", "height", ")", "\n", "", "properties", "=", "{", "}", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.__init__": [[8, 21], ["collections.OrderedDict", "multi_object_wrapper.MultiObjectWrapper.base_tracker_class", "hasattr", "multi_object_wrapper.MultiObjectWrapper.tracker_copy.initialize_features"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.initialize_features"], ["    ", "def", "__init__", "(", "self", ",", "base_tracker_class", ",", "params", ",", "visdom", "=", "None", ",", "fast_load", "=", "False", ")", ":", "\n", "        ", "self", ".", "base_tracker_class", "=", "base_tracker_class", "\n", "self", ".", "params", "=", "params", "\n", "self", ".", "visdom", "=", "visdom", "\n", "\n", "self", ".", "initialized_ids", "=", "[", "]", "\n", "self", ".", "trackers", "=", "OrderedDict", "(", ")", "\n", "\n", "self", ".", "fast_load", "=", "fast_load", "\n", "if", "self", ".", "fast_load", ":", "\n", "            ", "self", ".", "tracker_copy", "=", "self", ".", "base_tracker_class", "(", "self", ".", "params", ")", "\n", "if", "hasattr", "(", "self", ".", "tracker_copy", ",", "'initialize_features'", ")", ":", "\n", "                ", "self", ".", "tracker_copy", ".", "initialize_features", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.create_tracker": [[22, 33], ["multi_object_wrapper.MultiObjectWrapper.base_tracker_class", "copy.deepcopy"], "methods", ["None"], ["", "", "", "def", "create_tracker", "(", "self", ")", ":", "\n", "        ", "tracker", "=", "None", "\n", "if", "self", ".", "fast_load", ":", "\n", "            ", "try", ":", "\n", "                ", "tracker", "=", "copy", ".", "deepcopy", "(", "self", ".", "tracker_copy", ")", "\n", "", "except", ":", "\n", "                ", "pass", "\n", "", "", "if", "tracker", "is", "None", ":", "\n", "            ", "tracker", "=", "self", ".", "base_tracker_class", "(", "self", ".", "params", ")", "\n", "", "tracker", ".", "visdom", "=", "self", ".", "visdom", "\n", "return", "tracker", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper._split_info": [[34, 51], ["collections.OrderedDict", "collections.OrderedDict", "collections.OrderedDict.values", "dict", "dict", "int"], "methods", ["None"], ["", "def", "_split_info", "(", "self", ",", "info", ")", ":", "\n", "        ", "info_split", "=", "OrderedDict", "(", ")", "\n", "init_other", "=", "OrderedDict", "(", ")", "# Init other contains init info for all other objects", "\n", "for", "obj_id", "in", "info", "[", "'init_object_ids'", "]", ":", "\n", "            ", "info_split", "[", "obj_id", "]", "=", "dict", "(", ")", "\n", "init_other", "[", "obj_id", "]", "=", "dict", "(", ")", "\n", "info_split", "[", "obj_id", "]", "[", "'object_ids'", "]", "=", "[", "obj_id", "]", "\n", "info_split", "[", "obj_id", "]", "[", "'sequence_object_ids'", "]", "=", "info", "[", "'sequence_object_ids'", "]", "\n", "if", "'init_bbox'", "in", "info", ":", "\n", "                ", "info_split", "[", "obj_id", "]", "[", "'init_bbox'", "]", "=", "info", "[", "'init_bbox'", "]", "[", "obj_id", "]", "\n", "init_other", "[", "obj_id", "]", "[", "'init_bbox'", "]", "=", "info", "[", "'init_bbox'", "]", "[", "obj_id", "]", "\n", "", "if", "'init_mask'", "in", "info", ":", "\n", "                ", "info_split", "[", "obj_id", "]", "[", "'init_mask'", "]", "=", "(", "info", "[", "'init_mask'", "]", "==", "int", "(", "obj_id", ")", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "init_other", "[", "obj_id", "]", "[", "'init_mask'", "]", "=", "info_split", "[", "obj_id", "]", "[", "'init_mask'", "]", "\n", "", "", "for", "obj_info", "in", "info_split", ".", "values", "(", ")", ":", "\n", "            ", "obj_info", "[", "'init_other'", "]", "=", "init_other", "\n", "", "return", "info_split", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper._set_defaults": [[52, 60], ["defaults.items", "tracker_out.get"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "def", "_set_defaults", "(", "self", ",", "tracker_out", ":", "dict", ",", "defaults", "=", "None", ")", ":", "\n", "        ", "defaults", "=", "{", "}", "if", "defaults", "is", "None", "else", "defaults", "\n", "\n", "for", "key", ",", "val", "in", "defaults", ".", "items", "(", ")", ":", "\n", "            ", "if", "tracker_out", ".", "get", "(", "key", ")", "is", "None", ":", "\n", "                ", "tracker_out", "[", "key", "]", "=", "val", "\n", "\n", "", "", "return", "tracker_out", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.default_merge": [[61, 89], ["collections.OrderedDict", "out_first.keys", "list", "numpy.stack", "numpy.array", "getattr", "out_all.values", "out.get", "out_all.values", "numpy.where", "map", "out_all.items", "out_all.keys", "numpy.stack.max", "numpy.stack.argmax"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "default_merge", "(", "self", ",", "out_all", ")", ":", "\n", "        ", "out_merged", "=", "OrderedDict", "(", ")", "\n", "\n", "out_first", "=", "list", "(", "out_all", ".", "values", "(", ")", ")", "[", "0", "]", "\n", "out_types", "=", "out_first", ".", "keys", "(", ")", "\n", "\n", "# Merge segmentation mask", "\n", "if", "'segmentation'", "in", "out_types", "and", "out_first", "[", "'segmentation'", "]", "is", "not", "None", ":", "\n", "# Stack all masks", "\n", "# If a tracker outputs soft segmentation mask, use that. Else use the binary segmentation", "\n", "            ", "segmentation_maps", "=", "[", "out", ".", "get", "(", "'segmentation_soft'", ",", "out", "[", "'segmentation'", "]", ")", "for", "out", "in", "out_all", ".", "values", "(", ")", "]", "\n", "segmentation_maps", "=", "np", ".", "stack", "(", "segmentation_maps", ")", "\n", "\n", "obj_ids", "=", "np", ".", "array", "(", "[", "0", ",", "*", "map", "(", "int", ",", "out_all", ".", "keys", "(", ")", ")", "]", ",", "dtype", "=", "np", ".", "uint8", ")", "\n", "segm_threshold", "=", "getattr", "(", "self", ".", "params", ",", "'segmentation_threshold'", ",", "0.5", ")", "\n", "merged_segmentation", "=", "obj_ids", "[", "np", ".", "where", "(", "segmentation_maps", ".", "max", "(", "axis", "=", "0", ")", ">", "segm_threshold", ",", "\n", "segmentation_maps", ".", "argmax", "(", "axis", "=", "0", ")", "+", "1", ",", "0", ")", "]", "\n", "\n", "out_merged", "[", "'segmentation'", "]", "=", "merged_segmentation", "\n", "\n", "# Merge other fields", "\n", "", "for", "key", "in", "out_types", ":", "\n", "            ", "if", "key", "==", "'segmentation'", ":", "\n", "                ", "pass", "\n", "", "else", ":", "\n", "                ", "out_merged", "[", "key", "]", "=", "{", "obj_id", ":", "out", "[", "key", "]", "for", "obj_id", ",", "out", "in", "out_all", ".", "items", "(", ")", "}", "\n", "\n", "", "", "return", "out_merged", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.merge_outputs": [[90, 97], ["hasattr", "multi_object_wrapper.MultiObjectWrapper.base_tracker_class.merge_results", "multi_object_wrapper.MultiObjectWrapper.default_merge"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.default_merge"], ["", "def", "merge_outputs", "(", "self", ",", "out_all", ")", ":", "\n", "        ", "if", "hasattr", "(", "self", ".", "base_tracker_class", ",", "'merge_results'", ")", ":", "\n", "            ", "out_merged", "=", "self", ".", "base_tracker_class", ".", "merge_results", "(", "out_all", ")", "\n", "", "else", ":", "\n", "            ", "out_merged", "=", "self", ".", "default_merge", "(", "out_all", ")", "\n", "\n", "", "return", "out_merged", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.initialize": [[98, 130], ["collections.OrderedDict", "multi_object_wrapper.MultiObjectWrapper._split_info", "collections.OrderedDict", "collections.OrderedDict", "multi_object_wrapper.MultiObjectWrapper.merge_outputs", "info[].copy", "len", "time.time", "multi_object_wrapper.MultiObjectWrapper.trackers[].initialize", "multi_object_wrapper.MultiObjectWrapper._set_defaults", "multi_object_wrapper.MultiObjectWrapper.create_tracker", "init_info_split[].get", "init_info_split[].get", "time.time"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper._split_info", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.merge_outputs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper._set_defaults", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.create_tracker", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "def", "initialize", "(", "self", ",", "image", ",", "info", ":", "dict", ")", "->", "dict", ":", "\n", "        ", "self", ".", "initialized_ids", "=", "[", "]", "\n", "self", ".", "trackers", "=", "OrderedDict", "(", ")", "\n", "\n", "if", "len", "(", "info", "[", "'init_object_ids'", "]", ")", "==", "0", ":", "\n", "            ", "return", "None", "\n", "\n", "", "object_ids", "=", "info", "[", "'object_ids'", "]", "\n", "\n", "init_info_split", "=", "self", ".", "_split_info", "(", "info", ")", "\n", "self", ".", "trackers", "=", "OrderedDict", "(", "{", "obj_id", ":", "self", ".", "create_tracker", "(", ")", "for", "obj_id", "in", "object_ids", "}", ")", "\n", "\n", "out_all", "=", "OrderedDict", "(", ")", "\n", "# Run individual trackers for each object", "\n", "for", "obj_id", "in", "info", "[", "'init_object_ids'", "]", ":", "\n", "            ", "start_time", "=", "time", ".", "time", "(", ")", "\n", "out", "=", "self", ".", "trackers", "[", "obj_id", "]", ".", "initialize", "(", "image", ",", "init_info_split", "[", "obj_id", "]", ")", "\n", "if", "out", "is", "None", ":", "\n", "                ", "out", "=", "{", "}", "\n", "\n", "", "init_default", "=", "{", "'target_bbox'", ":", "init_info_split", "[", "obj_id", "]", ".", "get", "(", "'init_bbox'", ")", ",", "\n", "'time'", ":", "time", ".", "time", "(", ")", "-", "start_time", ",", "\n", "'segmentation'", ":", "init_info_split", "[", "obj_id", "]", ".", "get", "(", "'init_mask'", ")", "}", "\n", "\n", "out", "=", "self", ".", "_set_defaults", "(", "out", ",", "init_default", ")", "\n", "out_all", "[", "obj_id", "]", "=", "out", "\n", "\n", "# Merge results", "\n", "", "out_merged", "=", "self", ".", "merge_outputs", "(", "out_all", ")", "\n", "\n", "self", ".", "initialized_ids", "=", "info", "[", "'init_object_ids'", "]", ".", "copy", "(", ")", "\n", "return", "out_merged", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.track": [[131, 178], ["info.get", "info.get", "collections.OrderedDict", "info.get", "multi_object_wrapper.MultiObjectWrapper.merge_outputs", "collections.OrderedDict", "multi_object_wrapper.MultiObjectWrapper._split_info", "multi_object_wrapper.MultiObjectWrapper.values", "time.time", "multi_object_wrapper.MultiObjectWrapper.trackers[].track", "multi_object_wrapper.MultiObjectWrapper._set_defaults", "multi_object_wrapper.MultiObjectWrapper.initialized_ids.extend", "time.time", "multi_object_wrapper.MultiObjectWrapper.trackers[].initialize", "multi_object_wrapper.MultiObjectWrapper._set_defaults", "list", "time.time", "multi_object_wrapper.MultiObjectWrapper.create_tracker", "init_info_split[].get", "init_info_split[].get", "multi_object_wrapper.MultiObjectWrapper.values", "time.time"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.merge_outputs", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper._split_info", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.track", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper._set_defaults", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper._set_defaults", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.create_tracker", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "def", "track", "(", "self", ",", "image", ",", "info", ":", "dict", "=", "None", ")", "->", "dict", ":", "\n", "        ", "if", "info", "is", "None", ":", "\n", "            ", "info", "=", "{", "}", "\n", "\n", "", "prev_output", "=", "info", ".", "get", "(", "'previous_output'", ",", "OrderedDict", "(", ")", ")", "\n", "\n", "if", "info", ".", "get", "(", "'init_object_ids'", ",", "False", ")", ":", "\n", "            ", "init_info_split", "=", "self", ".", "_split_info", "(", "info", ")", "\n", "for", "obj_init_info", "in", "init_info_split", ".", "values", "(", ")", ":", "\n", "                ", "obj_init_info", "[", "'previous_output'", "]", "=", "prev_output", "\n", "\n", "", "info", "[", "'init_other'", "]", "=", "list", "(", "init_info_split", ".", "values", "(", ")", ")", "[", "0", "]", "[", "'init_other'", "]", "\n", "\n", "", "out_all", "=", "OrderedDict", "(", ")", "\n", "for", "obj_id", "in", "self", ".", "initialized_ids", ":", "\n", "            ", "start_time", "=", "time", ".", "time", "(", ")", "\n", "\n", "out", "=", "self", ".", "trackers", "[", "obj_id", "]", ".", "track", "(", "image", ",", "info", ")", "\n", "\n", "default", "=", "{", "'time'", ":", "time", ".", "time", "(", ")", "-", "start_time", "}", "\n", "out", "=", "self", ".", "_set_defaults", "(", "out", ",", "default", ")", "\n", "out_all", "[", "obj_id", "]", "=", "out", "\n", "\n", "# Initialize new", "\n", "", "if", "info", ".", "get", "(", "'init_object_ids'", ",", "False", ")", ":", "\n", "            ", "for", "obj_id", "in", "info", "[", "'init_object_ids'", "]", ":", "\n", "                ", "if", "not", "obj_id", "in", "self", ".", "trackers", ":", "\n", "                    ", "self", ".", "trackers", "[", "obj_id", "]", "=", "self", ".", "create_tracker", "(", ")", "\n", "\n", "", "start_time", "=", "time", ".", "time", "(", ")", "\n", "out", "=", "self", ".", "trackers", "[", "obj_id", "]", ".", "initialize", "(", "image", ",", "init_info_split", "[", "obj_id", "]", ")", "\n", "if", "out", "is", "None", ":", "\n", "                    ", "out", "=", "{", "}", "\n", "\n", "", "init_default", "=", "{", "'target_bbox'", ":", "init_info_split", "[", "obj_id", "]", ".", "get", "(", "'init_bbox'", ")", ",", "\n", "'time'", ":", "time", ".", "time", "(", ")", "-", "start_time", ",", "\n", "'segmentation'", ":", "init_info_split", "[", "obj_id", "]", ".", "get", "(", "'init_mask'", ")", "}", "\n", "\n", "out", "=", "self", ".", "_set_defaults", "(", "out", ",", "init_default", ")", "\n", "out_all", "[", "obj_id", "]", "=", "out", "\n", "\n", "", "self", ".", "initialized_ids", ".", "extend", "(", "info", "[", "'init_object_ids'", "]", ")", "\n", "\n", "# Merge results", "\n", "", "out_merged", "=", "self", ".", "merge_outputs", "(", "out_all", ")", "\n", "\n", "return", "out_merged", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.visdom_draw_tracking": [[179, 188], ["isinstance", "multi_object_wrapper.MultiObjectWrapper.visdom.register", "multi_object_wrapper.MultiObjectWrapper.visdom.register", "box.items"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register"], ["", "def", "visdom_draw_tracking", "(", "self", ",", "image", ",", "box", ",", "segmentation", ")", ":", "\n", "        ", "if", "isinstance", "(", "box", ",", "(", "OrderedDict", ",", "dict", ")", ")", ":", "\n", "            ", "box", "=", "[", "v", "for", "k", ",", "v", "in", "box", ".", "items", "(", ")", "]", "\n", "", "else", ":", "\n", "            ", "box", "=", "(", "box", ",", ")", "\n", "", "if", "segmentation", "is", "None", ":", "\n", "            ", "self", ".", "visdom", ".", "register", "(", "(", "image", ",", "*", "box", ")", ",", "'Tracking'", ",", "1", ",", "'Tracking'", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "visdom", ".", "register", "(", "(", "image", ",", "*", "box", ",", "segmentation", ")", ",", "'Tracking'", ",", "1", ",", "'Tracking'", ")", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot2020.VOT.__init__": [[50, 84], ["trax.Server", "vot2020.VOT._trax.wait", "isinstance", "isinstance", "vot2020.VOT._trax.status", "Polygon", "vot2020.VOT.region.array", "Rectangle", "x.path", "len", "dict", "vot2020.VOT.image.items", "Point", "vot2020.VOT.region.bounds", "Exception"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "region_format", ",", "channels", "=", "None", ")", ":", "\n", "        ", "\"\"\" Constructor\n\n        Args:\n            region_format: Region format options\n        \"\"\"", "\n", "assert", "(", "region_format", "in", "[", "trax", ".", "Region", ".", "RECTANGLE", ",", "trax", ".", "Region", ".", "POLYGON", ",", "trax", ".", "Region", ".", "MASK", "]", ")", "\n", "\n", "if", "channels", "is", "None", ":", "\n", "            ", "channels", "=", "[", "'color'", "]", "\n", "", "elif", "channels", "==", "'rgbd'", ":", "\n", "            ", "channels", "=", "[", "'color'", ",", "'depth'", "]", "\n", "", "elif", "channels", "==", "'rgbt'", ":", "\n", "            ", "channels", "=", "[", "'color'", ",", "'ir'", "]", "\n", "", "elif", "channels", "==", "'ir'", ":", "\n", "            ", "channels", "=", "[", "'ir'", "]", "\n", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "'Illegal configuration {}.'", ".", "format", "(", "channels", ")", ")", "\n", "\n", "", "self", ".", "_trax", "=", "trax", ".", "Server", "(", "[", "region_format", "]", ",", "[", "trax", ".", "Image", ".", "PATH", "]", ",", "channels", ",", "customMetadata", "=", "dict", "(", "vot", "=", "\"python\"", ")", ")", "\n", "\n", "request", "=", "self", ".", "_trax", ".", "wait", "(", ")", "\n", "assert", "(", "request", ".", "type", "==", "'initialize'", ")", "\n", "if", "isinstance", "(", "request", ".", "region", ",", "trax", ".", "Polygon", ")", ":", "\n", "            ", "self", ".", "_region", "=", "Polygon", "(", "[", "Point", "(", "x", "[", "0", "]", ",", "x", "[", "1", "]", ")", "for", "x", "in", "request", ".", "region", "]", ")", "\n", "", "if", "isinstance", "(", "request", ".", "region", ",", "trax", ".", "Mask", ")", ":", "\n", "            ", "self", ".", "_region", "=", "request", ".", "region", ".", "array", "(", "True", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "_region", "=", "Rectangle", "(", "*", "request", ".", "region", ".", "bounds", "(", ")", ")", "\n", "", "self", ".", "_image", "=", "[", "x", ".", "path", "(", ")", "for", "k", ",", "x", "in", "request", ".", "image", ".", "items", "(", ")", "]", "\n", "if", "len", "(", "self", ".", "_image", ")", "==", "1", ":", "\n", "            ", "self", ".", "_image", "=", "self", ".", "_image", "[", "0", "]", "\n", "\n", "", "self", ".", "_trax", ".", "status", "(", "request", ".", "region", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot2020.VOT.region": [[85, 95], ["None"], "methods", ["None"], ["", "def", "region", "(", "self", ")", ":", "\n", "        ", "\"\"\"\n        Send configuration message to the client and receive the initialization\n        region and the path of the first image\n\n        Returns:\n            initialization region\n        \"\"\"", "\n", "\n", "return", "self", ".", "_region", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot2020.VOT.report": [[96, 114], ["isinstance", "isinstance", "isinstance", "vot2020.VOT._trax.status", "trax.Polygon.create", "trax.Mask.create", "trax.Rectangle.create"], "methods", ["None"], ["", "def", "report", "(", "self", ",", "region", ",", "confidence", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        Report the tracking results to the client\n\n        Arguments:\n            region: region for the frame\n        \"\"\"", "\n", "assert", "(", "isinstance", "(", "region", ",", "(", "Rectangle", ",", "Polygon", ",", "np", ".", "ndarray", ")", ")", ")", "\n", "if", "isinstance", "(", "region", ",", "Polygon", ")", ":", "\n", "            ", "tregion", "=", "trax", ".", "Polygon", ".", "create", "(", "[", "(", "x", ".", "x", ",", "x", ".", "y", ")", "for", "x", "in", "region", ".", "points", "]", ")", "\n", "", "if", "isinstance", "(", "region", ",", "np", ".", "ndarray", ")", ":", "\n", "            ", "tregion", "=", "trax", ".", "Mask", ".", "create", "(", "region", ")", "\n", "", "else", ":", "\n", "            ", "tregion", "=", "trax", ".", "Rectangle", ".", "create", "(", "region", ".", "x", ",", "region", ".", "y", ",", "region", ".", "width", ",", "region", ".", "height", ")", "\n", "", "properties", "=", "{", "}", "\n", "if", "not", "confidence", "is", "None", ":", "\n", "            ", "properties", "[", "'confidence'", "]", "=", "confidence", "\n", "", "self", ".", "_trax", ".", "status", "(", "tregion", ",", "properties", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot2020.VOT.frame": [[115, 136], ["hasattr", "vot2020.VOT._trax.wait", "x.path", "len", "vot2020.VOT.image.items"], "methods", ["None"], ["", "def", "frame", "(", "self", ")", ":", "\n", "        ", "\"\"\"\n        Get a frame (image path) from client\n\n        Returns:\n            absolute path of the image\n        \"\"\"", "\n", "if", "hasattr", "(", "self", ",", "\"_image\"", ")", ":", "\n", "            ", "image", "=", "self", ".", "_image", "\n", "del", "self", ".", "_image", "\n", "return", "image", "\n", "\n", "", "request", "=", "self", ".", "_trax", ".", "wait", "(", ")", "\n", "\n", "if", "request", ".", "type", "==", "'frame'", ":", "\n", "            ", "image", "=", "[", "x", ".", "path", "(", ")", "for", "k", ",", "x", "in", "request", ".", "image", ".", "items", "(", ")", "]", "\n", "if", "len", "(", "image", ")", "==", "1", ":", "\n", "                ", "return", "image", "[", "0", "]", "\n", "", "return", "image", "\n", "", "else", ":", "\n", "            ", "return", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot2020.VOT.quit": [[138, 141], ["hasattr", "vot2020.VOT._trax.quit"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.quit"], ["", "", "def", "quit", "(", "self", ")", ":", "\n", "        ", "if", "hasattr", "(", "self", ",", "'_trax'", ")", ":", "\n", "            ", "self", ".", "_trax", ".", "quit", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot2020.VOT.__del__": [[142, 144], ["vot2020.VOT.quit"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.quit"], ["", "", "def", "__del__", "(", "self", ")", ":", "\n", "        ", "self", ".", "quit", "(", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.vot2020.make_full_size": [[23, 42], ["numpy.pad"], "function", ["None"], ["", "def", "make_full_size", "(", "x", ",", "output_sz", ")", ":", "\n", "    ", "'''\n    zero-pad input x (right and down) to match output_sz\n    x: numpy array e.g., binary mask\n    output_sz: size of the output [width, height]\n    '''", "\n", "if", "x", ".", "shape", "[", "0", "]", "==", "output_sz", "[", "1", "]", "and", "x", ".", "shape", "[", "1", "]", "==", "output_sz", "[", "0", "]", ":", "\n", "        ", "return", "x", "\n", "", "pad_x", "=", "output_sz", "[", "0", "]", "-", "x", ".", "shape", "[", "1", "]", "\n", "if", "pad_x", "<", "0", ":", "\n", "        ", "x", "=", "x", "[", ":", ",", ":", "x", ".", "shape", "[", "1", "]", "+", "pad_x", "]", "\n", "# padding has to be set to zero, otherwise pad function fails", "\n", "pad_x", "=", "0", "\n", "", "pad_y", "=", "output_sz", "[", "1", "]", "-", "x", ".", "shape", "[", "0", "]", "\n", "if", "pad_y", "<", "0", ":", "\n", "        ", "x", "=", "x", "[", ":", "x", ".", "shape", "[", "0", "]", "+", "pad_y", ",", ":", "]", "\n", "# padding has to be set to zero, otherwise pad function fails", "\n", "pad_y", "=", "0", "\n", "", "return", "np", ".", "pad", "(", "x", ",", "(", "(", "0", ",", "pad_y", ")", ",", "(", "0", ",", "pad_x", ")", ")", ",", "'constant'", ",", "constant_values", "=", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.mobifacedataset.MobifaceDataset.__init__": [[19, 28], ["pytracking.evaluation.data.BaseDataset.__init__", "mobifacedataset.MobifaceDataset._get_sequence_list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._get_sequence_list"], ["def", "__init__", "(", "self", ",", "split", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            split - Split to use. Can be i) 'train': official training set, ii) 'test': official test set, iii) 'all': whole dataset.\n        \"\"\"", "\n", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "base_path", "=", "self", ".", "env_settings", ".", "mobiface_path", "\n", "self", ".", "sequence_list", "=", "self", ".", "_get_sequence_list", "(", "split", ")", "\n", "self", ".", "split", "=", "split", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.mobifacedataset.MobifaceDataset.get_sequence_list": [[29, 31], ["pytracking.evaluation.data.SequenceList", "mobifacedataset.MobifaceDataset._construct_sequence"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOS._construct_sequence"], ["", "def", "get_sequence_list", "(", "self", ")", ":", "\n", "        ", "return", "SequenceList", "(", "[", "self", ".", "_construct_sequence", "(", "s", ")", "for", "s", "in", "self", ".", "sequence_list", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.mobifacedataset.MobifaceDataset._get_sequence_list": [[32, 54], ["os.join", "os.join", "pandas.read_csv().transpose().to_dict", "pandas.read_csv().transpose().to_dict", "collections.OrderedDict", "mobifacedataset.MobifaceDataset.meta.items", "sorted", "sorted", "list", "pandas.read_csv().transpose", "pandas.read_csv().transpose", "mobifacedataset.MobifaceDataset.meta.items", "mobifacedataset.MobifaceDataset.train_meta.keys", "mobifacedataset.MobifaceDataset.anno_files.append", "mobifacedataset.MobifaceDataset.anno_files.append", "mobifacedataset.MobifaceDataset.meta.keys", "os.abspath", "os.abspath", "pandas.read_csv", "pandas.read_csv", "os.join", "os.join", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "_get_sequence_list", "(", "self", ",", "split", ")", ":", "\n", "\n", "        ", "self", ".", "train_meta_fn", "=", "osp", ".", "join", "(", "self", ".", "base_path", ",", "'train.meta.csv'", ")", "\n", "self", ".", "test_meta_fn", "=", "osp", ".", "join", "(", "self", ".", "base_path", ",", "'test.meta.csv'", ")", "\n", "self", ".", "train_meta", "=", "pd", ".", "read_csv", "(", "self", ".", "train_meta_fn", ",", "index_col", "=", "0", ")", ".", "transpose", "(", ")", ".", "to_dict", "(", ")", "\n", "self", ".", "test_meta", "=", "pd", ".", "read_csv", "(", "self", ".", "test_meta_fn", ",", "index_col", "=", "0", ")", ".", "transpose", "(", ")", ".", "to_dict", "(", ")", "\n", "if", "split", "==", "'train'", ":", "\n", "            ", "self", ".", "meta", "=", "self", ".", "train_meta", "\n", "", "elif", "split", "==", "'test'", ":", "\n", "            ", "self", ".", "meta", "=", "self", ".", "test_meta", "\n", "", "else", ":", "\n", "            ", "self", ".", "meta", "=", "{", "**", "self", ".", "train_meta", ",", "**", "self", ".", "test_meta", "}", "# In Python 3.5 or greater", "\n", "", "self", ".", "meta", "=", "OrderedDict", "(", "sorted", "(", "self", ".", "meta", ".", "items", "(", ")", ",", "key", "=", "lambda", "t", ":", "t", "[", "0", "]", ")", ")", "\n", "self", ".", "anno_files", "=", "[", "]", "\n", "for", "k", ",", "v", "in", "self", ".", "meta", ".", "items", "(", ")", ":", "\n", "            ", "if", "k", "in", "self", ".", "train_meta", ".", "keys", "(", ")", ":", "\n", "                ", "self", ".", "anno_files", ".", "append", "(", "osp", ".", "abspath", "(", "osp", ".", "join", "(", "self", ".", "base_path", ",", "'train'", ",", "k", "+", "'.annot.csv'", ")", ")", ")", "\n", "", "else", ":", "\n", "                ", "self", ".", "anno_files", ".", "append", "(", "osp", ".", "abspath", "(", "osp", ".", "join", "(", "self", ".", "base_path", ",", "'test'", ",", "k", "+", "'.annot.csv'", ")", ")", ")", "\n", "", "", "self", ".", "seq_names", "=", "sorted", "(", "list", "(", "self", ".", "meta", ".", "keys", "(", ")", ")", ")", "\n", "self", ".", "seq_dirs", "=", "[", "fn", "[", ":", "-", "len", "(", "'.annot.csv'", ")", "]", "for", "fn", "in", "self", ".", "anno_files", "]", "\n", "return", "self", ".", "seq_names", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.mobifacedataset.MobifaceDataset._construct_sequence": [[55, 66], ["mobifacedataset.MobifaceDataset.seq_names.index", "sorted", "pytracking.evaluation.data.Sequence", "glob.glob", "len", "sorted", "open", "numpy.loadtxt", "numpy.loadtxt.reshape", "glob.glob"], "methods", ["None"], ["", "def", "_construct_sequence", "(", "self", ",", "sequence_name", ")", ":", "\n", "        ", "index", "=", "self", ".", "seq_names", ".", "index", "(", "sequence_name", ")", "\n", "img_files", "=", "sorted", "(", "glob", ".", "glob", "(", "self", ".", "seq_dirs", "[", "index", "]", "+", "'/*.jpg'", ")", ")", "\n", "if", "len", "(", "img_files", ")", "==", "0", ":", "\n", "            ", "img_files", "=", "sorted", "(", "glob", ".", "glob", "(", "self", ".", "seq_dirs", "[", "index", "]", "+", "'.png'", ")", ")", "\n", "", "with", "open", "(", "self", ".", "anno_files", "[", "index", "]", ",", "'r'", ")", "as", "f", ":", "\n", "            ", "anno", "=", "np", ".", "loadtxt", "(", "f", ",", "delimiter", "=", "','", ",", "skiprows", "=", "1", ",", "dtype", "=", "int", ")", "\n", "", "anno", "=", "anno", "[", ":", ",", "1", ":", "]", "\n", "assert", "anno", ".", "shape", "[", "1", "]", "==", "4", "\n", "\n", "return", "Sequence", "(", "sequence_name", ",", "img_files", ",", "anno", ".", "reshape", "(", "-", "1", ",", "4", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.mobifacedataset.MobifaceDataset.__len__": [[67, 69], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "sequence_list", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker._init_visdom": [[71, 89], ["visdom_info.get", "pytracking.utils.visdom.Visdom", "tracker.Tracker.visdom.register", "time.sleep", "print"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register"], ["\n", "params", "=", "self", ".", "get_parameters", "(", ")", "\n", "\n", "debug_", "=", "debug", "\n", "if", "debug", "is", "None", ":", "\n", "            ", "debug_", "=", "getattr", "(", "params", ",", "'debug'", ",", "0", ")", "\n", "\n", "", "params", ".", "debug", "=", "debug_", "\n", "\n", "# Get init information", "\n", "init_info", "=", "seq", ".", "init_info", "(", ")", "\n", "\n", "tracker", "=", "self", ".", "create_tracker", "(", "params", ")", "\n", "\n", "output", "=", "self", ".", "_track_sequence", "(", "tracker", ",", "seq", ",", "init_info", ")", "\n", "return", "output", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker._visdom_ui_handler": [[91, 98], ["None"], "methods", ["None"], ["# Define outputs", "\n", "# Each field in output is a list containing tracker prediction for each frame.", "\n", "\n", "# In case of single object tracking mode:", "\n", "# target_bbox[i] is the predicted bounding box for frame i", "\n", "# time[i] is the processing time for frame i", "\n", "\n", "# In case of multi object tracking mode:", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.run_webcam": [[336, 470], ["pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.Tracker.get_parameters", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.Tracker._init_visdom", "getattr", "UIControl", "cv2.VideoCapture", "cv2.namedWindow", "cv2.resizeWindow", "cv2.setMouseCallback", "collections.OrderedDict", "cv2.VideoCapture.release", "cv2.destroyAllWindows", "getattr", "getattr", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.Tracker.create_tracker", "cv2.VideoCapture.read", "frame.copy", "collections.OrderedDict", "cv2.putText", "cv2.putText", "cv2.putText", "cv2.imshow", "cv2.waitKey", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper", "ValueError", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.Tracker.get_tl", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.Tracker.get_br", "UIControl.get_bb", "collections.OrderedDict", "sequence_object_ids.append", "cv2.rectangle", "len", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.track", "collections.OrderedDict", "ord", "min", "min", "abs", "abs", "UIControl.get_tl", "UIControl.get_br", "pytracking.utils.plotting.overlay_mask", "out[].items", "ord", "collections.OrderedDict", "collections.OrderedDict", "collections.OrderedDict", "pytracking.evaluation.multi_object_wrapper.MultiObjectWrapper.initialize", "cv2.rectangle", "int"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.get_parameters", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker._init_visdom", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.create_tracker", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.track", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.overlay_mask", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize"], []], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.run_vot2020": [[471, 561], ["tracker.Tracker.Tracker.get_parameters", "tracker.Tracker.Tracker._init_visdom", "tracker.Tracker.Tracker.create_tracker", "tracker.Tracker.Tracker.initialize_features", "tracker.Tracker.Tracker.predicts_segmentation_mask", "vot.VOT.region", "vot.VOT.frame", "tracker.Tracker.Tracker.run_vot2020._convert_image_path"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.get_parameters", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker._init_visdom", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.create_tracker", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.initialize_features", "home.repos.pwc.inspect_result.researchmm_Stark.tracker.basetracker.BaseTracker.predicts_segmentation_mask", "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.region", "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.frame"], []], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.run_vot": [[563, 632], ["tracker.Tracker.Tracker.get_parameters", "tracker.Tracker.Tracker._init_visdom", "tracker.Tracker.Tracker.create_tracker", "tracker.Tracker.Tracker.initialize_features", "vot.VOT", "vot.VOT.region", "tracker.Tracker.Tracker.run_vot2020._convert_anno_to_list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.get_parameters", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker._init_visdom", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.create_tracker", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.initialize_features", "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.region"], []], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.init_visualization": [[640, 645], ["matplotlib.subplots", "matplotlib.subplots", "tracker.Tracker.fig.canvas.mpl_connect", "matplotlib.tight_layout", "matplotlib.tight_layout"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.visualize": [[647, 676], ["tracker.Tracker.ax.cla", "tracker.Tracker.ax.imshow", "isinstance", "enumerate", "tracker.Tracker.ax.set_axis_off", "tracker.Tracker.ax.axis", "pytracking.utils.plotting.draw_figure", "tracker.Tracker.ax.imshow", "matplotlib.Rectangle", "matplotlib.Rectangle", "tracker.Tracker.ax.add_patch", "getattr", "matplotlib.Rectangle", "matplotlib.Rectangle", "tracker.Tracker.ax.add_patch", "matplotlib.waitforbuttonpress", "matplotlib.waitforbuttonpress", "state.items", "float"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.draw_figure"], []], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.reset_tracker": [[677, 679], ["None"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.press": [[680, 687], ["print", "tracker.Tracker.reset_tracker", "print"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.reset_tracker"], []], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.votdataset.VOTDataset.__init__": [[18, 22], ["pytracking.evaluation.data.BaseDataset.__init__", "votdataset.VOTDataset._get_sequence_list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._get_sequence_list"], ["def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "base_path", "=", "self", ".", "env_settings", ".", "vot_path", "\n", "self", ".", "sequence_list", "=", "self", ".", "_get_sequence_list", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.votdataset.VOTDataset.get_sequence_list": [[23, 25], ["pytracking.evaluation.data.SequenceList", "votdataset.VOTDataset._construct_sequence"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOS._construct_sequence"], ["", "def", "get_sequence_list", "(", "self", ")", ":", "\n", "        ", "return", "SequenceList", "(", "[", "self", ".", "_construct_sequence", "(", "s", ")", "for", "s", "in", "self", ".", "sequence_list", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.votdataset.VOTDataset._construct_sequence": [[26, 56], ["pytracking.evaluation.data.Sequence", "numpy.loadtxt", "numpy.amin().reshape", "numpy.amin().reshape", "numpy.amax().reshape", "numpy.amax().reshape", "numpy.concatenate", "str", "numpy.loadtxt", "range", "str", "numpy.amin", "numpy.amin", "numpy.amax", "numpy.amax"], "methods", ["None"], ["", "def", "_construct_sequence", "(", "self", ",", "sequence_name", ")", ":", "\n", "        ", "sequence_path", "=", "sequence_name", "\n", "nz", "=", "8", "\n", "ext", "=", "'jpg'", "\n", "start_frame", "=", "1", "\n", "\n", "anno_path", "=", "'{}/{}/groundtruth.txt'", ".", "format", "(", "self", ".", "base_path", ",", "sequence_name", ")", "\n", "try", ":", "\n", "            ", "ground_truth_rect", "=", "np", ".", "loadtxt", "(", "str", "(", "anno_path", ")", ",", "dtype", "=", "np", ".", "float64", ")", "\n", "", "except", ":", "\n", "            ", "ground_truth_rect", "=", "np", ".", "loadtxt", "(", "str", "(", "anno_path", ")", ",", "delimiter", "=", "','", ",", "dtype", "=", "np", ".", "float64", ")", "\n", "\n", "", "end_frame", "=", "ground_truth_rect", ".", "shape", "[", "0", "]", "\n", "\n", "frames", "=", "[", "'{base_path}/{sequence_path}/color/{frame:0{nz}}.{ext}'", ".", "format", "(", "base_path", "=", "self", ".", "base_path", ",", "\n", "sequence_path", "=", "sequence_path", ",", "frame", "=", "frame_num", ",", "nz", "=", "nz", ",", "ext", "=", "ext", ")", "\n", "for", "frame_num", "in", "range", "(", "start_frame", ",", "end_frame", "+", "1", ")", "]", "\n", "\n", "# Convert gt", "\n", "if", "ground_truth_rect", ".", "shape", "[", "1", "]", ">", "4", ":", "\n", "            ", "gt_x_all", "=", "ground_truth_rect", "[", ":", ",", "[", "0", ",", "2", ",", "4", ",", "6", "]", "]", "\n", "gt_y_all", "=", "ground_truth_rect", "[", ":", ",", "[", "1", ",", "3", ",", "5", ",", "7", "]", "]", "\n", "\n", "x1", "=", "np", ".", "amin", "(", "gt_x_all", ",", "1", ")", ".", "reshape", "(", "-", "1", ",", "1", ")", "\n", "y1", "=", "np", ".", "amin", "(", "gt_y_all", ",", "1", ")", ".", "reshape", "(", "-", "1", ",", "1", ")", "\n", "x2", "=", "np", ".", "amax", "(", "gt_x_all", ",", "1", ")", ".", "reshape", "(", "-", "1", ",", "1", ")", "\n", "y2", "=", "np", ".", "amax", "(", "gt_y_all", ",", "1", ")", ".", "reshape", "(", "-", "1", ",", "1", ")", "\n", "\n", "ground_truth_rect", "=", "np", ".", "concatenate", "(", "(", "x1", ",", "y1", ",", "x2", "-", "x1", ",", "y2", "-", "y1", ")", ",", "1", ")", "\n", "", "return", "Sequence", "(", "sequence_name", ",", "frames", ",", "'vot'", ",", "ground_truth_rect", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.votdataset.VOTDataset.__len__": [[57, 59], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "sequence_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.votdataset.VOTDataset._get_sequence_list": [[60, 123], ["None"], "methods", ["None"], ["", "def", "_get_sequence_list", "(", "self", ")", ":", "\n", "        ", "sequence_list", "=", "[", "'ants1'", ",", "\n", "'ants3'", ",", "\n", "'bag'", ",", "\n", "'ball1'", ",", "\n", "'ball2'", ",", "\n", "'basketball'", ",", "\n", "'birds1'", ",", "\n", "'blanket'", ",", "\n", "'bmx'", ",", "\n", "'bolt1'", ",", "\n", "'bolt2'", ",", "\n", "'book'", ",", "\n", "'butterfly'", ",", "\n", "'car1'", ",", "\n", "'conduction1'", ",", "\n", "'crabs1'", ",", "\n", "'crossing'", ",", "\n", "'dinosaur'", ",", "\n", "'drone_across'", ",", "\n", "'drone_flip'", ",", "\n", "'drone1'", ",", "\n", "'fernando'", ",", "\n", "'fish1'", ",", "\n", "'fish2'", ",", "\n", "'fish3'", ",", "\n", "'flamingo1'", ",", "\n", "'frisbee'", ",", "\n", "'girl'", ",", "\n", "'glove'", ",", "\n", "'godfather'", ",", "\n", "'graduate'", ",", "\n", "'gymnastics1'", ",", "\n", "'gymnastics2'", ",", "\n", "'gymnastics3'", ",", "\n", "'hand'", ",", "\n", "'handball1'", ",", "\n", "'handball2'", ",", "\n", "'helicopter'", ",", "\n", "'iceskater1'", ",", "\n", "'iceskater2'", ",", "\n", "'leaves'", ",", "\n", "'matrix'", ",", "\n", "'motocross1'", ",", "\n", "'motocross2'", ",", "\n", "'nature'", ",", "\n", "'pedestrian1'", ",", "\n", "'rabbit'", ",", "\n", "'racing'", ",", "\n", "'road'", ",", "\n", "'shaking'", ",", "\n", "'sheep'", ",", "\n", "'singer2'", ",", "\n", "'singer3'", ",", "\n", "'soccer1'", ",", "\n", "'soccer2'", ",", "\n", "'soldier'", ",", "\n", "'tiger'", ",", "\n", "'traffic'", ",", "\n", "'wiper'", ",", "\n", "'zebrafish1'", "]", "\n", "\n", "return", "sequence_list", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tpldataset.TPLDataset.__init__": [[18, 26], ["pytracking.evaluation.data.BaseDataset.__init__", "tpldataset.TPLDataset._get_sequence_info_list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tpldataset.TPLDataset._get_sequence_info_list"], ["def", "__init__", "(", "self", ",", "exclude_otb", "=", "False", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            exclude_otb (bool) - If True, sequences overlapping with the OTB dataset are excluded\n        \"\"\"", "\n", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "base_path", "=", "self", ".", "env_settings", ".", "tpl_path", "\n", "self", ".", "sequence_info_list", "=", "self", ".", "_get_sequence_info_list", "(", "exclude_otb", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tpldataset.TPLDataset.get_sequence_list": [[27, 29], ["pytracking.evaluation.data.SequenceList", "tpldataset.TPLDataset._construct_sequence"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOS._construct_sequence"], ["", "def", "get_sequence_list", "(", "self", ")", ":", "\n", "        ", "return", "SequenceList", "(", "[", "self", ".", "_construct_sequence", "(", "s", ")", "for", "s", "in", "self", ".", "sequence_info_list", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tpldataset.TPLDataset._construct_sequence": [[30, 49], ["pytracking.utils.load_text.load_text", "pytracking.evaluation.data.Sequence", "str", "range"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.load_text.load_text"], ["", "def", "_construct_sequence", "(", "self", ",", "sequence_info", ")", ":", "\n", "        ", "sequence_path", "=", "sequence_info", "[", "'path'", "]", "\n", "nz", "=", "sequence_info", "[", "'nz'", "]", "\n", "ext", "=", "sequence_info", "[", "'ext'", "]", "\n", "start_frame", "=", "sequence_info", "[", "'startFrame'", "]", "\n", "end_frame", "=", "sequence_info", "[", "'endFrame'", "]", "\n", "\n", "init_omit", "=", "0", "\n", "if", "'initOmit'", "in", "sequence_info", ":", "\n", "            ", "init_omit", "=", "sequence_info", "[", "'initOmit'", "]", "\n", "\n", "", "frames", "=", "[", "'{base_path}/{sequence_path}/{frame:0{nz}}.{ext}'", ".", "format", "(", "base_path", "=", "self", ".", "base_path", ",", "\n", "sequence_path", "=", "sequence_path", ",", "frame", "=", "frame_num", ",", "nz", "=", "nz", ",", "ext", "=", "ext", ")", "for", "frame_num", "in", "range", "(", "start_frame", "+", "init_omit", ",", "end_frame", "+", "1", ")", "]", "\n", "\n", "anno_path", "=", "'{}/{}'", ".", "format", "(", "self", ".", "base_path", ",", "sequence_info", "[", "'anno_path'", "]", ")", "\n", "\n", "ground_truth_rect", "=", "load_text", "(", "str", "(", "anno_path", ")", ",", "delimiter", "=", "(", "','", ",", "None", ")", ",", "dtype", "=", "np", ".", "float64", ",", "backend", "=", "'numpy'", ")", "\n", "\n", "return", "Sequence", "(", "sequence_info", "[", "'name'", "]", ",", "frames", ",", "'tpl'", ",", "ground_truth_rect", "[", "init_omit", ":", ",", ":", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tpldataset.TPLDataset.__len__": [[50, 52], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "sequence_info_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tpldataset.TPLDataset._get_sequence_info_list": [[53, 329], ["sequence_info_list_nootb.append"], "methods", ["None"], ["", "def", "_get_sequence_info_list", "(", "self", ",", "exclude_otb", "=", "False", ")", ":", "\n", "        ", "sequence_info_list", "=", "[", "\n", "{", "\"name\"", ":", "\"tpl_Skating2\"", ",", "\"path\"", ":", "\"tpl_Skating2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "707", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Skating2/Skating2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Pool_ce3\"", ",", "\"path\"", ":", "\"tpl_Pool_ce3/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "124", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Pool_ce3/Pool_ce3_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Microphone_ce1\"", ",", "\"path\"", ":", "\"tpl_Microphone_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "204", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Microphone_ce1/Microphone_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Torus\"", ",", "\"path\"", ":", "\"tpl_Torus/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "264", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Torus/Torus_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Lemming\"", ",", "\"path\"", ":", "\"tpl_Lemming/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1336", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Lemming/Lemming_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Eagle_ce\"", ",", "\"path\"", ":", "\"tpl_Eagle_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "112", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Eagle_ce/Eagle_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Skating_ce2\"", ",", "\"path\"", ":", "\"tpl_Skating_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "497", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Skating_ce2/Skating_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Yo_yos_ce3\"", ",", "\"path\"", ":", "\"tpl_Yo_yos_ce3/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "201", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Yo_yos_ce3/Yo-yos_ce3_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Board\"", ",", "\"path\"", ":", "\"tpl_Board/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "598", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Board/Board_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Tennis_ce3\"", ",", "\"path\"", ":", "\"tpl_Tennis_ce3/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "204", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Tennis_ce3/Tennis_ce3_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_SuperMario_ce\"", ",", "\"path\"", ":", "\"tpl_SuperMario_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "146", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_SuperMario_ce/SuperMario_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Yo_yos_ce1\"", ",", "\"path\"", ":", "\"tpl_Yo_yos_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "235", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Yo_yos_ce1/Yo-yos_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Soccer\"", ",", "\"path\"", ":", "\"tpl_Soccer/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "392", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Soccer/Soccer_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Fish_ce2\"", ",", "\"path\"", ":", "\"tpl_Fish_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "573", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Fish_ce2/Fish_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Liquor\"", ",", "\"path\"", ":", "\"tpl_Liquor/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1741", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Liquor/Liquor_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Plane_ce2\"", ",", "\"path\"", ":", "\"tpl_Plane_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "653", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Plane_ce2/Plane_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Couple\"", ",", "\"path\"", ":", "\"tpl_Couple/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "140", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Couple/Couple_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Logo_ce\"", ",", "\"path\"", ":", "\"tpl_Logo_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "610", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Logo_ce/Logo_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Hand_ce2\"", ",", "\"path\"", ":", "\"tpl_Hand_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "251", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Hand_ce2/Hand_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Kite_ce2\"", ",", "\"path\"", ":", "\"tpl_Kite_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "658", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Kite_ce2/Kite_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Walking\"", ",", "\"path\"", ":", "\"tpl_Walking/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "412", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Walking/Walking_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_David\"", ",", "\"path\"", ":", "\"tpl_David/img\"", ",", "\"startFrame\"", ":", "300", ",", "\"endFrame\"", ":", "770", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_David/David_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Boat_ce1\"", ",", "\"path\"", ":", "\"tpl_Boat_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "377", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Boat_ce1/Boat_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Airport_ce\"", ",", "\"path\"", ":", "\"tpl_Airport_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "148", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Airport_ce/Airport_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Tiger2\"", ",", "\"path\"", ":", "\"tpl_Tiger2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "365", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Tiger2/Tiger2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Suitcase_ce\"", ",", "\"path\"", ":", "\"tpl_Suitcase_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "184", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Suitcase_ce/Suitcase_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_TennisBall_ce\"", ",", "\"path\"", ":", "\"tpl_TennisBall_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "288", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_TennisBall_ce/TennisBall_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Singer_ce1\"", ",", "\"path\"", ":", "\"tpl_Singer_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "214", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Singer_ce1/Singer_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Pool_ce2\"", ",", "\"path\"", ":", "\"tpl_Pool_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "133", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Pool_ce2/Pool_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Surf_ce3\"", ",", "\"path\"", ":", "\"tpl_Surf_ce3/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "279", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Surf_ce3/Surf_ce3_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Bird\"", ",", "\"path\"", ":", "\"tpl_Bird/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "99", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Bird/Bird_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Crossing\"", ",", "\"path\"", ":", "\"tpl_Crossing/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "120", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Crossing/Crossing_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Plate_ce1\"", ",", "\"path\"", ":", "\"tpl_Plate_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "142", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Plate_ce1/Plate_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Cup\"", ",", "\"path\"", ":", "\"tpl_Cup/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "303", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Cup/Cup_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Surf_ce2\"", ",", "\"path\"", ":", "\"tpl_Surf_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "391", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Surf_ce2/Surf_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Busstation_ce2\"", ",", "\"path\"", ":", "\"tpl_Busstation_ce2/img\"", ",", "\"startFrame\"", ":", "6", ",", "\"endFrame\"", ":", "400", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Busstation_ce2/Busstation_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Charger_ce\"", ",", "\"path\"", ":", "\"tpl_Charger_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "298", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Charger_ce/Charger_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Pool_ce1\"", ",", "\"path\"", ":", "\"tpl_Pool_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "166", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Pool_ce1/Pool_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_MountainBike\"", ",", "\"path\"", ":", "\"tpl_MountainBike/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "228", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_MountainBike/MountainBike_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Guitar_ce1\"", ",", "\"path\"", ":", "\"tpl_Guitar_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "268", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Guitar_ce1/Guitar_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Busstation_ce1\"", ",", "\"path\"", ":", "\"tpl_Busstation_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "363", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Busstation_ce1/Busstation_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Diving\"", ",", "\"path\"", ":", "\"tpl_Diving/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "231", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Diving/Diving_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Skating_ce1\"", ",", "\"path\"", ":", "\"tpl_Skating_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "409", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Skating_ce1/Skating_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Hurdle_ce2\"", ",", "\"path\"", ":", "\"tpl_Hurdle_ce2/img\"", ",", "\"startFrame\"", ":", "27", ",", "\"endFrame\"", ":", "330", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Hurdle_ce2/Hurdle_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Plate_ce2\"", ",", "\"path\"", ":", "\"tpl_Plate_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "181", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Plate_ce2/Plate_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_CarDark\"", ",", "\"path\"", ":", "\"tpl_CarDark/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "393", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_CarDark/CarDark_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Singer_ce2\"", ",", "\"path\"", ":", "\"tpl_Singer_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "999", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Singer_ce2/Singer_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Shaking\"", ",", "\"path\"", ":", "\"tpl_Shaking/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "365", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Shaking/Shaking_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Iceskater\"", ",", "\"path\"", ":", "\"tpl_Iceskater/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "500", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Iceskater/Iceskater_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Badminton_ce2\"", ",", "\"path\"", ":", "\"tpl_Badminton_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "705", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Badminton_ce2/Badminton_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Spiderman_ce\"", ",", "\"path\"", ":", "\"tpl_Spiderman_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "351", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Spiderman_ce/Spiderman_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Kite_ce1\"", ",", "\"path\"", ":", "\"tpl_Kite_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "484", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Kite_ce1/Kite_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Skyjumping_ce\"", ",", "\"path\"", ":", "\"tpl_Skyjumping_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "938", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Skyjumping_ce/Skyjumping_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Ball_ce1\"", ",", "\"path\"", ":", "\"tpl_Ball_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "391", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Ball_ce1/Ball_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Yo_yos_ce2\"", ",", "\"path\"", ":", "\"tpl_Yo_yos_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "454", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Yo_yos_ce2/Yo-yos_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Ironman\"", ",", "\"path\"", ":", "\"tpl_Ironman/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "166", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Ironman/Ironman_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_FaceOcc1\"", ",", "\"path\"", ":", "\"tpl_FaceOcc1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "892", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_FaceOcc1/FaceOcc1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Surf_ce1\"", ",", "\"path\"", ":", "\"tpl_Surf_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "404", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Surf_ce1/Surf_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Ring_ce\"", ",", "\"path\"", ":", "\"tpl_Ring_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "201", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Ring_ce/Ring_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Surf_ce4\"", ",", "\"path\"", ":", "\"tpl_Surf_ce4/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "135", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Surf_ce4/Surf_ce4_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Ball_ce4\"", ",", "\"path\"", ":", "\"tpl_Ball_ce4/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "538", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Ball_ce4/Ball_ce4_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Bikeshow_ce\"", ",", "\"path\"", ":", "\"tpl_Bikeshow_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "361", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Bikeshow_ce/Bikeshow_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Kobe_ce\"", ",", "\"path\"", ":", "\"tpl_Kobe_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "582", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Kobe_ce/Kobe_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Tiger1\"", ",", "\"path\"", ":", "\"tpl_Tiger1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "354", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Tiger1/Tiger1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Skiing\"", ",", "\"path\"", ":", "\"tpl_Skiing/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "81", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Skiing/Skiing_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Tennis_ce1\"", ",", "\"path\"", ":", "\"tpl_Tennis_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "454", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Tennis_ce1/Tennis_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Carchasing_ce4\"", ",", "\"path\"", ":", "\"tpl_Carchasing_ce4/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "442", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Carchasing_ce4/Carchasing_ce4_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Walking2\"", ",", "\"path\"", ":", "\"tpl_Walking2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "500", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Walking2/Walking2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Sailor_ce\"", ",", "\"path\"", ":", "\"tpl_Sailor_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "402", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Sailor_ce/Sailor_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Railwaystation_ce\"", ",", "\"path\"", ":", "\"tpl_Railwaystation_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "413", ",", "\n", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Railwaystation_ce/Railwaystation_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Bee_ce\"", ",", "\"path\"", ":", "\"tpl_Bee_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "90", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Bee_ce/Bee_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Girl\"", ",", "\"path\"", ":", "\"tpl_Girl/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "500", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Girl/Girl_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Subway\"", ",", "\"path\"", ":", "\"tpl_Subway/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "175", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Subway/Subway_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_David3\"", ",", "\"path\"", ":", "\"tpl_David3/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "252", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_David3/David3_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Electricalbike_ce\"", ",", "\"path\"", ":", "\"tpl_Electricalbike_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "818", ",", "\n", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Electricalbike_ce/Electricalbike_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Michaeljackson_ce\"", ",", "\"path\"", ":", "\"tpl_Michaeljackson_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "393", ",", "\n", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Michaeljackson_ce/Michaeljackson_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Woman\"", ",", "\"path\"", ":", "\"tpl_Woman/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "597", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Woman/Woman_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_TableTennis_ce\"", ",", "\"path\"", ":", "\"tpl_TableTennis_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "198", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_TableTennis_ce/TableTennis_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Motorbike_ce\"", ",", "\"path\"", ":", "\"tpl_Motorbike_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "563", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Motorbike_ce/Motorbike_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Baby_ce\"", ",", "\"path\"", ":", "\"tpl_Baby_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "296", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Baby_ce/Baby_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Gym\"", ",", "\"path\"", ":", "\"tpl_Gym/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "766", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Gym/Gym_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Matrix\"", ",", "\"path\"", ":", "\"tpl_Matrix/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "100", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Matrix/Matrix_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Kite_ce3\"", ",", "\"path\"", ":", "\"tpl_Kite_ce3/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "528", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Kite_ce3/Kite_ce3_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Fish_ce1\"", ",", "\"path\"", ":", "\"tpl_Fish_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "401", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Fish_ce1/Fish_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Hand_ce1\"", ",", "\"path\"", ":", "\"tpl_Hand_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "401", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Hand_ce1/Hand_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Doll\"", ",", "\"path\"", ":", "\"tpl_Doll/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "3872", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Doll/Doll_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Carchasing_ce3\"", ",", "\"path\"", ":", "\"tpl_Carchasing_ce3/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "572", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Carchasing_ce3/Carchasing_ce3_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Thunder_ce\"", ",", "\"path\"", ":", "\"tpl_Thunder_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "375", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Thunder_ce/Thunder_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Singer2\"", ",", "\"path\"", ":", "\"tpl_Singer2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "366", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Singer2/Singer2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Basketball\"", ",", "\"path\"", ":", "\"tpl_Basketball/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "725", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Basketball/Basketball_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Hand\"", ",", "\"path\"", ":", "\"tpl_Hand/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "244", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Hand/Hand_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Cup_ce\"", ",", "\"path\"", ":", "\"tpl_Cup_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "338", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Cup_ce/Cup_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_MotorRolling\"", ",", "\"path\"", ":", "\"tpl_MotorRolling/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "164", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_MotorRolling/MotorRolling_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Boat_ce2\"", ",", "\"path\"", ":", "\"tpl_Boat_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "412", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Boat_ce2/Boat_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_CarScale\"", ",", "\"path\"", ":", "\"tpl_CarScale/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "252", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_CarScale/CarScale_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Sunshade\"", ",", "\"path\"", ":", "\"tpl_Sunshade/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "172", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Sunshade/Sunshade_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Football1\"", ",", "\"path\"", ":", "\"tpl_Football1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "74", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Football1/Football1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Singer1\"", ",", "\"path\"", ":", "\"tpl_Singer1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "351", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Singer1/Singer1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Hurdle_ce1\"", ",", "\"path\"", ":", "\"tpl_Hurdle_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "300", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Hurdle_ce1/Hurdle_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Basketball_ce3\"", ",", "\"path\"", ":", "\"tpl_Basketball_ce3/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "441", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Basketball_ce3/Basketball_ce3_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Toyplane_ce\"", ",", "\"path\"", ":", "\"tpl_Toyplane_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "405", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Toyplane_ce/Toyplane_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Skating1\"", ",", "\"path\"", ":", "\"tpl_Skating1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "400", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Skating1/Skating1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Juice\"", ",", "\"path\"", ":", "\"tpl_Juice/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "404", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Juice/Juice_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Biker\"", ",", "\"path\"", ":", "\"tpl_Biker/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "180", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Biker/Biker_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Boy\"", ",", "\"path\"", ":", "\"tpl_Boy/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "602", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Boy/Boy_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Jogging1\"", ",", "\"path\"", ":", "\"tpl_Jogging1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "307", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Jogging1/Jogging1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Deer\"", ",", "\"path\"", ":", "\"tpl_Deer/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "71", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Deer/Deer_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Panda\"", ",", "\"path\"", ":", "\"tpl_Panda/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "241", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Panda/Panda_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Coke\"", ",", "\"path\"", ":", "\"tpl_Coke/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "291", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Coke/Coke_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Carchasing_ce1\"", ",", "\"path\"", ":", "\"tpl_Carchasing_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "501", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Carchasing_ce1/Carchasing_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Badminton_ce1\"", ",", "\"path\"", ":", "\"tpl_Badminton_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "579", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Badminton_ce1/Badminton_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Trellis\"", ",", "\"path\"", ":", "\"tpl_Trellis/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "569", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Trellis/Trellis_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Face_ce2\"", ",", "\"path\"", ":", "\"tpl_Face_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "148", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Face_ce2/Face_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Ball_ce2\"", ",", "\"path\"", ":", "\"tpl_Ball_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "603", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Ball_ce2/Ball_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Skiing_ce\"", ",", "\"path\"", ":", "\"tpl_Skiing_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "511", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Skiing_ce/Skiing_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Jogging2\"", ",", "\"path\"", ":", "\"tpl_Jogging2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "307", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Jogging2/Jogging2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Bike_ce1\"", ",", "\"path\"", ":", "\"tpl_Bike_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "801", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Bike_ce1/Bike_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Bike_ce2\"", ",", "\"path\"", ":", "\"tpl_Bike_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "812", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Bike_ce2/Bike_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Ball_ce3\"", ",", "\"path\"", ":", "\"tpl_Ball_ce3/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "273", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Ball_ce3/Ball_ce3_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Girlmov\"", ",", "\"path\"", ":", "\"tpl_Girlmov/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "1500", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Girlmov/Girlmov_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Bolt\"", ",", "\"path\"", ":", "\"tpl_Bolt/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "350", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Bolt/Bolt_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Basketball_ce2\"", ",", "\"path\"", ":", "\"tpl_Basketball_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "455", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Basketball_ce2/Basketball_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Bicycle\"", ",", "\"path\"", ":", "\"tpl_Bicycle/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "271", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Bicycle/Bicycle_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Face_ce\"", ",", "\"path\"", ":", "\"tpl_Face_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "620", ",", "\"nz\"", ":", "4", ",", "\"ext\"", ":", "\"jpg\"", ",", "\n", "\"anno_path\"", ":", "\"tpl_Face_ce/Face_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Basketball_ce1\"", ",", "\"path\"", ":", "\"tpl_Basketball_ce1/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "496", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Basketball_ce1/Basketball_ce1_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Messi_ce\"", ",", "\"path\"", ":", "\"tpl_Messi_ce/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "272", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Messi_ce/Messi_ce_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Tennis_ce2\"", ",", "\"path\"", ":", "\"tpl_Tennis_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "305", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Tennis_ce2/Tennis_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Microphone_ce2\"", ",", "\"path\"", ":", "\"tpl_Microphone_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "103", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Microphone_ce2/Microphone_ce2_gt.txt\"", "}", ",", "\n", "{", "\"name\"", ":", "\"tpl_Guitar_ce2\"", ",", "\"path\"", ":", "\"tpl_Guitar_ce2/img\"", ",", "\"startFrame\"", ":", "1", ",", "\"endFrame\"", ":", "313", ",", "\"nz\"", ":", "4", ",", "\n", "\"ext\"", ":", "\"jpg\"", ",", "\"anno_path\"", ":", "\"tpl_Guitar_ce2/Guitar_ce2_gt.txt\"", "}", "\n", "\n", "]", "\n", "\n", "otb_sequences", "=", "[", "'tpl_Skating2'", ",", "'tpl_Lemming'", ",", "'tpl_Board'", ",", "'tpl_Soccer'", ",", "'tpl_Liquor'", ",", "'tpl_Couple'", ",", "'tpl_Walking'", ",", "'tpl_David'", ",", "'tpl_Tiger2'", ",", "'tpl_Bird'", ",", "'tpl_Crossing'", ",", "'tpl_MountainBike'", ",", "\n", "'tpl_Diving'", ",", "'tpl_CarDark'", ",", "'tpl_Shaking'", ",", "'tpl_Ironman'", ",", "'tpl_FaceOcc1'", ",", "'tpl_Tiger1'", ",", "'tpl_Skiing'", ",", "'tpl_Walking2'", ",", "'tpl_Girl'", ",", "'tpl_Girlmov'", ",", "'tpl_Subway'", ",", "'tpl_David3'", ",", "'tpl_Woman'", ",", "\n", "'tpl_Gym'", ",", "'tpl_Matrix'", ",", "'tpl_Doll'", ",", "'tpl_Singer2'", ",", "'tpl_Basketball'", ",", "'tpl_MotorRolling'", ",", "'tpl_CarScale'", ",", "'tpl_Football1'", ",", "'tpl_Singer1'", ",", "'tpl_Skating1'", ",", "'tpl_Biker'", ",", "\n", "'tpl_Boy'", ",", "'tpl_Jogging1'", ",", "'tpl_Deer'", ",", "'tpl_Panda'", ",", "'tpl_Coke'", ",", "'tpl_Trellis'", ",", "'tpl_Jogging2'", ",", "'tpl_Bolt'", ",", "]", "\n", "if", "exclude_otb", ":", "\n", "            ", "sequence_info_list_nootb", "=", "[", "]", "\n", "for", "seq", "in", "sequence_info_list", ":", "\n", "                ", "if", "seq", "[", "'name'", "]", "not", "in", "otb_sequences", ":", "\n", "                    ", "sequence_info_list_nootb", ".", "append", "(", "seq", ")", "\n", "\n", "", "", "sequence_info_list", "=", "sequence_info_list_nootb", "\n", "\n", "", "return", "sequence_info_list", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.stark_st2.config._edict2dict": [[103, 113], ["isinstance", "isinstance", "src_edict.items", "isinstance", "config._edict2dict"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._edict2dict"], ["def", "_edict2dict", "(", "dest_dict", ",", "src_edict", ")", ":", "\n", "    ", "if", "isinstance", "(", "dest_dict", ",", "dict", ")", "and", "isinstance", "(", "src_edict", ",", "dict", ")", ":", "\n", "        ", "for", "k", ",", "v", "in", "src_edict", ".", "items", "(", ")", ":", "\n", "            ", "if", "not", "isinstance", "(", "v", ",", "edict", ")", ":", "\n", "                ", "dest_dict", "[", "k", "]", "=", "v", "\n", "", "else", ":", "\n", "                ", "dest_dict", "[", "k", "]", "=", "{", "}", "\n", "_edict2dict", "(", "dest_dict", "[", "k", "]", ",", "v", ")", "\n", "", "", "", "else", ":", "\n", "        ", "return", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark_st2.config.gen_config": [[115, 120], ["config._edict2dict", "open", "yaml.dump"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._edict2dict"], ["", "", "def", "gen_config", "(", "config_file", ")", ":", "\n", "    ", "cfg_dict", "=", "{", "}", "\n", "_edict2dict", "(", "cfg_dict", ",", "cfg", ")", "\n", "with", "open", "(", "config_file", ",", "'w'", ")", "as", "f", ":", "\n", "        ", "yaml", ".", "dump", "(", "cfg_dict", ",", "f", ",", "default_flow_style", "=", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark_st2.config._update_config": [[122, 134], ["isinstance", "isinstance", "exp_cfg.items", "ValueError", "isinstance", "config._update_config"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._update_config"], ["", "", "def", "_update_config", "(", "base_cfg", ",", "exp_cfg", ")", ":", "\n", "    ", "if", "isinstance", "(", "base_cfg", ",", "dict", ")", "and", "isinstance", "(", "exp_cfg", ",", "edict", ")", ":", "\n", "        ", "for", "k", ",", "v", "in", "exp_cfg", ".", "items", "(", ")", ":", "\n", "            ", "if", "k", "in", "base_cfg", ":", "\n", "                ", "if", "not", "isinstance", "(", "v", ",", "dict", ")", ":", "\n", "                    ", "base_cfg", "[", "k", "]", "=", "v", "\n", "", "else", ":", "\n", "                    ", "_update_config", "(", "base_cfg", "[", "k", "]", ",", "v", ")", "\n", "", "", "else", ":", "\n", "                ", "raise", "ValueError", "(", "\"{} not exist in config.py\"", ".", "format", "(", "k", ")", ")", "\n", "", "", "", "else", ":", "\n", "        ", "return", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark_st2.config.update_config_from_file": [[136, 141], ["open", "easydict.EasyDict", "config._update_config", "yaml.safe_load"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._update_config"], ["", "", "def", "update_config_from_file", "(", "filename", ")", ":", "\n", "    ", "exp_config", "=", "None", "\n", "with", "open", "(", "filename", ")", "as", "f", ":", "\n", "        ", "exp_config", "=", "edict", "(", "yaml", ".", "safe_load", "(", "f", ")", ")", "\n", "_update_config", "(", "cfg", ",", "exp_config", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark_s.config._edict2dict": [[91, 101], ["isinstance", "isinstance", "src_edict.items", "isinstance", "config._edict2dict"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._edict2dict"], ["cfg", ".", "TEST", ".", "TEMPLATE_SIZE", "=", "128", "\n", "cfg", ".", "TEST", ".", "SEARCH_FACTOR", "=", "5.0", "\n", "cfg", ".", "TEST", ".", "SEARCH_SIZE", "=", "320", "\n", "cfg", ".", "TEST", ".", "EPOCH", "=", "500", "\n", "cfg", ".", "TEST", ".", "UPDATE_INTERVALS", "=", "edict", "(", ")", "\n", "cfg", ".", "TEST", ".", "UPDATE_INTERVALS", ".", "LASOT", "=", "[", "200", "]", "\n", "cfg", ".", "TEST", ".", "UPDATE_INTERVALS", ".", "GOT10K_TEST", "=", "[", "200", "]", "\n", "cfg", ".", "TEST", ".", "UPDATE_INTERVALS", ".", "TRACKINGNET", "=", "[", "200", "]", "\n", "cfg", ".", "TEST", ".", "UPDATE_INTERVALS", ".", "VOT20", "=", "[", "200", "]", "\n", "cfg", ".", "TEST", ".", "UPDATE_INTERVALS", ".", "VOT20LT", "=", "[", "200", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark_s.config.gen_config": [[103, 108], ["config._edict2dict", "open", "yaml.dump"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._edict2dict"], ["def", "_edict2dict", "(", "dest_dict", ",", "src_edict", ")", ":", "\n", "    ", "if", "isinstance", "(", "dest_dict", ",", "dict", ")", "and", "isinstance", "(", "src_edict", ",", "dict", ")", ":", "\n", "        ", "for", "k", ",", "v", "in", "src_edict", ".", "items", "(", ")", ":", "\n", "            ", "if", "not", "isinstance", "(", "v", ",", "edict", ")", ":", "\n", "                ", "dest_dict", "[", "k", "]", "=", "v", "\n", "", "else", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark_s.config._update_config": [[110, 122], ["isinstance", "isinstance", "exp_cfg.items", "ValueError", "isinstance", "config._update_config"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._update_config"], ["_edict2dict", "(", "dest_dict", "[", "k", "]", ",", "v", ")", "\n", "", "", "", "else", ":", "\n", "        ", "return", "\n", "\n", "\n", "", "", "def", "gen_config", "(", "config_file", ")", ":", "\n", "    ", "cfg_dict", "=", "{", "}", "\n", "_edict2dict", "(", "cfg_dict", ",", "cfg", ")", "\n", "with", "open", "(", "config_file", ",", "'w'", ")", "as", "f", ":", "\n", "        ", "yaml", ".", "dump", "(", "cfg_dict", ",", "f", ",", "default_flow_style", "=", "False", ")", "\n", "\n", "\n", "", "", "def", "_update_config", "(", "base_cfg", ",", "exp_cfg", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark_s.config.update_config_from_file": [[124, 129], ["open", "easydict.EasyDict", "config._update_config", "yaml.safe_load"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._update_config"], ["        ", "for", "k", ",", "v", "in", "exp_cfg", ".", "items", "(", ")", ":", "\n", "            ", "if", "k", "in", "base_cfg", ":", "\n", "                ", "if", "not", "isinstance", "(", "v", ",", "dict", ")", ":", "\n", "                    ", "base_cfg", "[", "k", "]", "=", "v", "\n", "", "else", ":", "\n", "                    ", "_update_config", "(", "base_cfg", "[", "k", "]", ",", "v", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark_lightning_X_trt.config._edict2dict": [[91, 101], ["isinstance", "isinstance", "src_edict.items", "isinstance", "config._edict2dict"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._edict2dict"], ["cfg", ".", "TEST", ".", "TEMPLATE_SIZE", "=", "128", "\n", "cfg", ".", "TEST", ".", "SEARCH_FACTOR", "=", "5.0", "\n", "cfg", ".", "TEST", ".", "SEARCH_SIZE", "=", "320", "\n", "cfg", ".", "TEST", ".", "EPOCH", "=", "500", "\n", "cfg", ".", "TEST", ".", "UPDATE_INTERVALS", "=", "edict", "(", ")", "\n", "cfg", ".", "TEST", ".", "UPDATE_INTERVALS", ".", "LASOT", "=", "[", "200", "]", "\n", "cfg", ".", "TEST", ".", "UPDATE_INTERVALS", ".", "GOT10K_TEST", "=", "[", "200", "]", "\n", "cfg", ".", "TEST", ".", "UPDATE_INTERVALS", ".", "TRACKINGNET", "=", "[", "200", "]", "\n", "cfg", ".", "TEST", ".", "UPDATE_INTERVALS", ".", "VOT20", "=", "[", "200", "]", "\n", "cfg", ".", "TEST", ".", "UPDATE_INTERVALS", ".", "VOT20LT", "=", "[", "200", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark_lightning_X_trt.config.gen_config": [[103, 108], ["config._edict2dict", "open", "yaml.dump"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._edict2dict"], ["def", "_edict2dict", "(", "dest_dict", ",", "src_edict", ")", ":", "\n", "    ", "if", "isinstance", "(", "dest_dict", ",", "dict", ")", "and", "isinstance", "(", "src_edict", ",", "dict", ")", ":", "\n", "        ", "for", "k", ",", "v", "in", "src_edict", ".", "items", "(", ")", ":", "\n", "            ", "if", "not", "isinstance", "(", "v", ",", "edict", ")", ":", "\n", "                ", "dest_dict", "[", "k", "]", "=", "v", "\n", "", "else", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark_lightning_X_trt.config._update_config": [[110, 122], ["isinstance", "isinstance", "exp_cfg.items", "ValueError", "isinstance", "config._update_config"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._update_config"], ["_edict2dict", "(", "dest_dict", "[", "k", "]", ",", "v", ")", "\n", "", "", "", "else", ":", "\n", "        ", "return", "\n", "\n", "\n", "", "", "def", "gen_config", "(", "config_file", ")", ":", "\n", "    ", "cfg_dict", "=", "{", "}", "\n", "_edict2dict", "(", "cfg_dict", ",", "cfg", ")", "\n", "with", "open", "(", "config_file", ",", "'w'", ")", "as", "f", ":", "\n", "        ", "yaml", ".", "dump", "(", "cfg_dict", ",", "f", ",", "default_flow_style", "=", "False", ")", "\n", "\n", "\n", "", "", "def", "_update_config", "(", "base_cfg", ",", "exp_cfg", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark_lightning_X_trt.config.update_config_from_file": [[124, 129], ["open", "easydict.EasyDict", "config._update_config", "yaml.safe_load"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._update_config"], ["        ", "for", "k", ",", "v", "in", "exp_cfg", ".", "items", "(", ")", ":", "\n", "            ", "if", "k", "in", "base_cfg", ":", "\n", "                ", "if", "not", "isinstance", "(", "v", ",", "dict", ")", ":", "\n", "                    ", "base_cfg", "[", "k", "]", "=", "v", "\n", "", "else", ":", "\n", "                    ", "_update_config", "(", "base_cfg", "[", "k", "]", ",", "v", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._edict2dict": [[89, 99], ["isinstance", "isinstance", "src_edict.items", "isinstance", "config._edict2dict"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._edict2dict"], ["cfg", ".", "TEST", "=", "edict", "(", ")", "\n", "cfg", ".", "TEST", ".", "TEMPLATE_FACTOR", "=", "2.0", "\n", "cfg", ".", "TEST", ".", "TEMPLATE_SIZE", "=", "128", "\n", "cfg", ".", "TEST", ".", "SEARCH_FACTOR", "=", "5.0", "\n", "cfg", ".", "TEST", ".", "SEARCH_SIZE", "=", "320", "\n", "cfg", ".", "TEST", ".", "EPOCH", "=", "500", "\n", "cfg", ".", "TEST", ".", "UPDATE_INTERVALS", "=", "edict", "(", ")", "\n", "cfg", ".", "TEST", ".", "UPDATE_INTERVALS", ".", "LASOT", "=", "[", "200", "]", "\n", "cfg", ".", "TEST", ".", "UPDATE_INTERVALS", ".", "GOT10K_TEST", "=", "[", "200", "]", "\n", "cfg", ".", "TEST", ".", "UPDATE_INTERVALS", ".", "TRACKINGNET", "=", "[", "200", "]", "\n", "cfg", ".", "TEST", ".", "UPDATE_INTERVALS", ".", "VOT20", "=", "[", "200", "]", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config.gen_config": [[101, 106], ["config._edict2dict", "open", "yaml.dump"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._edict2dict"], ["\n", "\n", "def", "_edict2dict", "(", "dest_dict", ",", "src_edict", ")", ":", "\n", "    ", "if", "isinstance", "(", "dest_dict", ",", "dict", ")", "and", "isinstance", "(", "src_edict", ",", "dict", ")", ":", "\n", "        ", "for", "k", ",", "v", "in", "src_edict", ".", "items", "(", ")", ":", "\n", "            ", "if", "not", "isinstance", "(", "v", ",", "edict", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._update_config": [[108, 120], ["isinstance", "isinstance", "exp_cfg.items", "ValueError", "isinstance", "config._update_config"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._update_config"], ["", "else", ":", "\n", "                ", "dest_dict", "[", "k", "]", "=", "{", "}", "\n", "_edict2dict", "(", "dest_dict", "[", "k", "]", ",", "v", ")", "\n", "", "", "", "else", ":", "\n", "        ", "return", "\n", "\n", "\n", "", "", "def", "gen_config", "(", "config_file", ")", ":", "\n", "    ", "cfg_dict", "=", "{", "}", "\n", "_edict2dict", "(", "cfg_dict", ",", "cfg", ")", "\n", "with", "open", "(", "config_file", ",", "'w'", ")", "as", "f", ":", "\n", "        ", "yaml", ".", "dump", "(", "cfg_dict", ",", "f", ",", "default_flow_style", "=", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config.update_config_from_file": [[122, 127], ["open", "easydict.EasyDict", "config._update_config", "yaml.safe_load"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config._update_config"], ["", "", "def", "_update_config", "(", "base_cfg", ",", "exp_cfg", ")", ":", "\n", "    ", "if", "isinstance", "(", "base_cfg", ",", "dict", ")", "and", "isinstance", "(", "exp_cfg", ",", "edict", ")", ":", "\n", "        ", "for", "k", ",", "v", "in", "exp_cfg", ".", "items", "(", ")", ":", "\n", "            ", "if", "k", "in", "base_cfg", ":", "\n", "                ", "if", "not", "isinstance", "(", "v", ",", "dict", ")", ":", "\n", "                    ", "base_cfg", "[", "k", "]", "=", "v", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer_enc.Transformer_enc.__init__": [[13, 30], ["torch.nn.Module.__init__", "transformer.TransformerEncoderLayer", "transformer.TransformerEncoder", "transformer_enc.Transformer_enc._reset_parameters", "torch.nn.LayerNorm", "float"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.Transformer._reset_parameters"], ["    ", "def", "__init__", "(", "self", ",", "d_model", "=", "512", ",", "nhead", "=", "8", ",", "num_encoder_layers", "=", "6", ",", "dim_feedforward", "=", "2048", ",", "dropout", "=", "0.1", ",", "\n", "activation", "=", "\"relu\"", ",", "normalize_before", "=", "False", ",", "divide_norm", "=", "False", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "encoder_layer", "=", "TransformerEncoderLayer", "(", "d_model", ",", "nhead", ",", "dim_feedforward", ",", "\n", "dropout", ",", "activation", ",", "normalize_before", ",", "divide_norm", "=", "divide_norm", ")", "\n", "encoder_norm", "=", "nn", ".", "LayerNorm", "(", "d_model", ")", "if", "normalize_before", "else", "None", "\n", "self", ".", "encoder", "=", "TransformerEncoder", "(", "encoder_layer", ",", "num_encoder_layers", ",", "encoder_norm", ")", "\n", "\n", "self", ".", "_reset_parameters", "(", ")", "\n", "\n", "self", ".", "d_model", "=", "d_model", "\n", "self", ".", "nhead", "=", "nhead", "\n", "self", ".", "d_feed", "=", "dim_feedforward", "\n", "# 2021.1.7 Try dividing norm to avoid NAN", "\n", "self", ".", "divide_norm", "=", "divide_norm", "\n", "self", ".", "scale_factor", "=", "float", "(", "d_model", "//", "nhead", ")", "**", "0.5", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer_enc.Transformer_enc._reset_parameters": [[31, 35], ["transformer_enc.Transformer_enc.parameters", "p.dim", "torch.nn.init.xavier_uniform_"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "_reset_parameters", "(", "self", ")", ":", "\n", "        ", "for", "p", "in", "self", ".", "parameters", "(", ")", ":", "\n", "            ", "if", "p", ".", "dim", "(", ")", ">", "1", ":", "\n", "                ", "nn", ".", "init", ".", "xavier_uniform_", "(", "p", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer_enc.Transformer_enc.forward": [[36, 47], ["transformer_enc.Transformer_enc.encoder"], "methods", ["None"], ["", "", "", "def", "forward", "(", "self", ",", "feat", ",", "mask", "=", "None", ",", "pos_embed", "=", "None", ",", "return_intermediate", "=", "False", ")", ":", "\n", "        ", "\"\"\"\n\n        :param feat: (H1W1+H2W2, bs, C)\n        :param mask: (bs, H1W1+H2W2)\n        :param pos_embed: (H1W1+H2W2, bs, C)\n        :param return_intermediate: whether to return intermediate layers' feature maps\n        :return:\n        \"\"\"", "\n", "memory", "=", "self", ".", "encoder", "(", "feat", ",", "src_key_padding_mask", "=", "mask", ",", "pos", "=", "pos_embed", ",", "return_intermediate", "=", "return_intermediate", ")", "\n", "return", "memory", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer_enc.Transformer_enc_lite.__init__": [[51, 68], ["torch.nn.Module.__init__", "transformer.TransformerEncoderLayerLite", "transformer.TransformerEncoderLite", "transformer_enc.Transformer_enc_lite._reset_parameters", "torch.nn.LayerNorm", "float"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.Transformer._reset_parameters"], ["def", "__init__", "(", "self", ",", "d_model", "=", "512", ",", "nhead", "=", "8", ",", "num_encoder_layers", "=", "6", ",", "dim_feedforward", "=", "2048", ",", "dropout", "=", "0.1", ",", "\n", "activation", "=", "\"relu\"", ",", "normalize_before", "=", "False", ",", "divide_norm", "=", "False", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "assert", "num_encoder_layers", "==", "1", "# this class is design for encoder with single layer", "\n", "encoder_layer", "=", "TransformerEncoderLayerLite", "(", "d_model", ",", "nhead", ",", "dim_feedforward", ",", "\n", "dropout", ",", "activation", ",", "normalize_before", ",", "divide_norm", "=", "divide_norm", ")", "\n", "encoder_norm", "=", "nn", ".", "LayerNorm", "(", "d_model", ")", "if", "normalize_before", "else", "None", "\n", "self", ".", "encoder", "=", "TransformerEncoderLite", "(", "encoder_layer", ",", "num_encoder_layers", ",", "encoder_norm", ")", "\n", "\n", "self", ".", "_reset_parameters", "(", ")", "\n", "\n", "self", ".", "d_model", "=", "d_model", "\n", "self", ".", "nhead", "=", "nhead", "\n", "self", ".", "d_feed", "=", "dim_feedforward", "\n", "# 2021.1.7 Try dividing norm to avoid NAN", "\n", "self", ".", "divide_norm", "=", "divide_norm", "\n", "self", ".", "scale_factor", "=", "float", "(", "d_model", "//", "nhead", ")", "**", "0.5", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer_enc.Transformer_enc_lite._reset_parameters": [[69, 73], ["transformer_enc.Transformer_enc_lite.parameters", "p.dim", "torch.nn.init.xavier_uniform_"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "_reset_parameters", "(", "self", ")", ":", "\n", "        ", "for", "p", "in", "self", ".", "parameters", "(", ")", ":", "\n", "            ", "if", "p", ".", "dim", "(", ")", ">", "1", ":", "\n", "                ", "nn", ".", "init", ".", "xavier_uniform_", "(", "p", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer_enc.Transformer_enc_lite.forward": [[74, 78], ["transformer_enc.Transformer_enc_lite.encoder"], "methods", ["None"], ["", "", "", "def", "forward", "(", "self", ",", "seq_dict", ",", "return_intermediate", "=", "False", ")", ":", "\n", "        ", "\"\"\"search region features as queries, concatenated features as keys and values\"\"\"", "\n", "memory", "=", "self", ".", "encoder", "(", "seq_dict", ",", "return_intermediate", "=", "return_intermediate", ",", "part_att", "=", "self", ".", "part_att", ")", "\n", "return", "memory", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer_enc._get_clones": [[80, 82], ["torch.nn.ModuleList", "copy.deepcopy", "range"], "function", ["None"], ["", "", "def", "_get_clones", "(", "module", ",", "N", ")", ":", "\n", "    ", "return", "nn", ".", "ModuleList", "(", "[", "copy", ".", "deepcopy", "(", "module", ")", "for", "i", "in", "range", "(", "N", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer_enc.build_transformer_enc": [[84, 104], ["getattr", "getattr", "encoder_class", "print"], "function", ["None"], ["", "def", "build_transformer_enc", "(", "cfg", ")", ":", "\n", "    ", "lite_mode", "=", "getattr", "(", "cfg", ".", "MODEL", ".", "TRANSFORMER", ",", "\"LITE\"", ",", "False", ")", "# queries only use search, rather than concat", "\n", "part_att", "=", "getattr", "(", "cfg", ".", "MODEL", ".", "TRANSFORMER", ",", "\"PART_ATT\"", ",", "False", ")", "# keys and values only use template, rather than cat", "\n", "if", "lite_mode", ":", "\n", "        ", "print", "(", "\"Building lite encoder...\"", ")", "\n", "encoder_class", "=", "Transformer_enc_lite", "\n", "", "else", ":", "\n", "        ", "encoder_class", "=", "Transformer_enc", "\n", "", "encoder", "=", "encoder_class", "(", "\n", "d_model", "=", "cfg", ".", "MODEL", ".", "HIDDEN_DIM", ",", "\n", "dropout", "=", "cfg", ".", "MODEL", ".", "TRANSFORMER", ".", "DROPOUT", ",", "\n", "nhead", "=", "cfg", ".", "MODEL", ".", "TRANSFORMER", ".", "NHEADS", ",", "\n", "dim_feedforward", "=", "cfg", ".", "MODEL", ".", "TRANSFORMER", ".", "DIM_FEEDFORWARD", ",", "\n", "num_encoder_layers", "=", "cfg", ".", "MODEL", ".", "TRANSFORMER", ".", "ENC_LAYERS", ",", "\n", "normalize_before", "=", "cfg", ".", "MODEL", ".", "TRANSFORMER", ".", "PRE_NORM", ",", "\n", "divide_norm", "=", "cfg", ".", "MODEL", ".", "TRANSFORMER", ".", "DIVIDE_NORM", "\n", ")", "\n", "encoder", ".", "lite_mode", "=", "lite_mode", "\n", "encoder", ".", "part_att", "=", "part_att", "\n", "return", "encoder", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer_enc._get_activation_fn": [[106, 115], ["RuntimeError"], "function", ["None"], ["", "def", "_get_activation_fn", "(", "activation", ")", ":", "\n", "    ", "\"\"\"Return an activation function given a string\"\"\"", "\n", "if", "activation", "==", "\"relu\"", ":", "\n", "        ", "return", "F", ".", "relu", "\n", "", "if", "activation", "==", "\"gelu\"", ":", "\n", "        ", "return", "F", ".", "gelu", "\n", "", "if", "activation", "==", "\"glu\"", ":", "\n", "        ", "return", "F", ".", "glu", "\n", "", "raise", "RuntimeError", "(", "F\"activation should be relu/gelu, not {activation}.\"", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.FrozenBatchNorm2d.__init__": [[16, 23], ["super().__init__", "repvgg.FrozenBatchNorm2d.register_buffer", "repvgg.FrozenBatchNorm2d.register_buffer", "repvgg.FrozenBatchNorm2d.register_buffer", "repvgg.FrozenBatchNorm2d.register_buffer", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.ones", "torch.ones", "torch.ones", "torch.ones"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "n", ")", ":", "\n", "        ", "super", "(", "FrozenBatchNorm2d", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "register_buffer", "(", "\"weight\"", ",", "torch", ".", "ones", "(", "n", ")", ")", "\n", "self", ".", "register_buffer", "(", "\"bias\"", ",", "torch", ".", "zeros", "(", "n", ")", ")", "\n", "self", ".", "register_buffer", "(", "\"running_mean\"", ",", "torch", ".", "zeros", "(", "n", ")", ")", "\n", "self", ".", "register_buffer", "(", "\"running_var\"", ",", "torch", ".", "ones", "(", "n", ")", ")", "\n", "self", ".", "eps", "=", "1e-5", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.FrozenBatchNorm2d._load_from_state_dict": [[24, 33], ["super()._load_from_state_dict"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone.FrozenBatchNorm2d._load_from_state_dict"], ["", "def", "_load_from_state_dict", "(", "self", ",", "state_dict", ",", "prefix", ",", "local_metadata", ",", "strict", ",", "\n", "missing_keys", ",", "unexpected_keys", ",", "error_msgs", ")", ":", "\n", "        ", "num_batches_tracked_key", "=", "prefix", "+", "'num_batches_tracked'", "\n", "if", "num_batches_tracked_key", "in", "state_dict", ":", "\n", "            ", "del", "state_dict", "[", "num_batches_tracked_key", "]", "\n", "\n", "", "super", "(", "FrozenBatchNorm2d", ",", "self", ")", ".", "_load_from_state_dict", "(", "\n", "state_dict", ",", "prefix", ",", "local_metadata", ",", "strict", ",", "\n", "missing_keys", ",", "unexpected_keys", ",", "error_msgs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.FrozenBatchNorm2d.forward": [[34, 45], ["repvgg.FrozenBatchNorm2d.weight.reshape", "repvgg.FrozenBatchNorm2d.bias.reshape", "repvgg.FrozenBatchNorm2d.running_var.reshape", "repvgg.FrozenBatchNorm2d.running_mean.reshape"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "# move reshapes to the beginning", "\n", "# to make it fuser-friendly", "\n", "        ", "w", "=", "self", ".", "weight", ".", "reshape", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "b", "=", "self", ".", "bias", ".", "reshape", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "rv", "=", "self", ".", "running_var", ".", "reshape", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "rm", "=", "self", ".", "running_mean", ".", "reshape", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "eps", "=", "self", ".", "eps", "\n", "scale", "=", "w", "*", "(", "rv", "+", "eps", ")", ".", "rsqrt", "(", ")", "# rsqrt(x): 1/sqrt(x), r: reciprocal", "\n", "bias", "=", "b", "-", "rm", "*", "scale", "\n", "return", "x", "*", "scale", "+", "bias", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGGBlock.__init__": [[61, 97], ["torch.Module.__init__", "torch.ReLU", "torch.ReLU", "SEBlock", "torch.Identity", "torch.Identity", "torch.Conv2d", "torch.Conv2d", "repvgg.conv_bn", "repvgg.conv_bn", "repvgg.FrozenBatchNorm2d", "torch.BatchNorm2d", "torch.BatchNorm2d"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.conv_bn", "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.conv_bn"], ["    ", "def", "__init__", "(", "self", ",", "in_channels", ",", "out_channels", ",", "kernel_size", ",", "\n", "stride", "=", "1", ",", "padding", "=", "0", ",", "dilation", "=", "1", ",", "groups", "=", "1", ",", "padding_mode", "=", "'zeros'", ",", "deploy", "=", "False", ",", "use_se", "=", "False", ",", "\n", "freeze_bn", "=", "False", ")", ":", "\n", "        ", "super", "(", "RepVGGBlock", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "deploy", "=", "deploy", "\n", "self", ".", "groups", "=", "groups", "\n", "self", ".", "in_channels", "=", "in_channels", "\n", "\n", "assert", "kernel_size", "==", "3", "\n", "assert", "padding", "==", "1", "\n", "\n", "padding_11", "=", "padding", "-", "kernel_size", "//", "2", "\n", "\n", "self", ".", "nonlinearity", "=", "nn", ".", "ReLU", "(", ")", "\n", "\n", "if", "use_se", ":", "\n", "            ", "self", ".", "se", "=", "SEBlock", "(", "out_channels", ",", "internal_neurons", "=", "out_channels", "//", "16", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "se", "=", "nn", ".", "Identity", "(", ")", "\n", "\n", "", "if", "deploy", ":", "\n", "            ", "self", ".", "rbr_reparam", "=", "nn", ".", "Conv2d", "(", "in_channels", "=", "in_channels", ",", "out_channels", "=", "out_channels", ",", "kernel_size", "=", "kernel_size", ",", "\n", "stride", "=", "stride", ",", "\n", "padding", "=", "padding", ",", "dilation", "=", "dilation", ",", "groups", "=", "groups", ",", "bias", "=", "True", ",", "\n", "padding_mode", "=", "padding_mode", ")", "\n", "\n", "", "else", ":", "\n", "            ", "if", "freeze_bn", ":", "\n", "                ", "self", ".", "rbr_identity", "=", "FrozenBatchNorm2d", "(", "in_channels", ")", "if", "out_channels", "==", "in_channels", "and", "stride", "==", "1", "else", "None", "\n", "", "else", ":", "\n", "                ", "self", ".", "rbr_identity", "=", "nn", ".", "BatchNorm2d", "(", "\n", "num_features", "=", "in_channels", ")", "if", "out_channels", "==", "in_channels", "and", "stride", "==", "1", "else", "None", "\n", "", "self", ".", "rbr_dense", "=", "conv_bn", "(", "in_channels", "=", "in_channels", ",", "out_channels", "=", "out_channels", ",", "kernel_size", "=", "kernel_size", ",", "\n", "stride", "=", "stride", ",", "padding", "=", "padding", ",", "groups", "=", "groups", ",", "freeze_bn", "=", "freeze_bn", ")", "\n", "self", ".", "rbr_1x1", "=", "conv_bn", "(", "in_channels", "=", "in_channels", ",", "out_channels", "=", "out_channels", ",", "kernel_size", "=", "1", ",", "stride", "=", "stride", ",", "\n", "padding", "=", "padding_11", ",", "groups", "=", "groups", ",", "freeze_bn", "=", "freeze_bn", ")", "\n", "# print('RepVGG Block, identity = ', self.rbr_identity)", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGGBlock.forward": [[99, 109], ["hasattr", "repvgg.RepVGGBlock.nonlinearity", "repvgg.RepVGGBlock.nonlinearity", "repvgg.RepVGGBlock.rbr_identity", "repvgg.RepVGGBlock.se", "repvgg.RepVGGBlock.se", "repvgg.RepVGGBlock.rbr_reparam", "repvgg.RepVGGBlock.rbr_dense", "repvgg.RepVGGBlock.rbr_1x1"], "methods", ["None"], ["", "", "def", "forward", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "if", "hasattr", "(", "self", ",", "'rbr_reparam'", ")", ":", "\n", "            ", "return", "self", ".", "nonlinearity", "(", "self", ".", "se", "(", "self", ".", "rbr_reparam", "(", "inputs", ")", ")", ")", "\n", "\n", "", "if", "self", ".", "rbr_identity", "is", "None", ":", "\n", "            ", "id_out", "=", "0", "\n", "", "else", ":", "\n", "            ", "id_out", "=", "self", ".", "rbr_identity", "(", "inputs", ")", "\n", "\n", "", "return", "self", ".", "nonlinearity", "(", "self", ".", "se", "(", "self", ".", "rbr_dense", "(", "inputs", ")", "+", "self", ".", "rbr_1x1", "(", "inputs", ")", "+", "id_out", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGGBlock.get_custom_L2": [[118, 133], ["None"], "methods", ["None"], ["", "def", "get_custom_L2", "(", "self", ")", ":", "\n", "        ", "K3", "=", "self", ".", "rbr_dense", ".", "conv", ".", "weight", "\n", "K1", "=", "self", ".", "rbr_1x1", ".", "conv", ".", "weight", "\n", "t3", "=", "(", "self", ".", "rbr_dense", ".", "bn", ".", "weight", "/", "(", "(", "self", ".", "rbr_dense", ".", "bn", ".", "running_var", "+", "self", ".", "rbr_dense", ".", "bn", ".", "eps", ")", ".", "sqrt", "(", ")", ")", ")", ".", "reshape", "(", "-", "1", ",", "\n", "1", ",", "1", ",", "\n", "1", ")", ".", "detach", "(", ")", "\n", "t1", "=", "(", "self", ".", "rbr_1x1", ".", "bn", ".", "weight", "/", "(", "(", "self", ".", "rbr_1x1", ".", "bn", ".", "running_var", "+", "self", ".", "rbr_1x1", ".", "bn", ".", "eps", ")", ".", "sqrt", "(", ")", ")", ")", ".", "reshape", "(", "-", "1", ",", "1", ",", "1", ",", "\n", "1", ")", ".", "detach", "(", ")", "\n", "\n", "l2_loss_circle", "=", "(", "K3", "**", "2", ")", ".", "sum", "(", ")", "-", "(", "K3", "[", ":", ",", ":", ",", "1", ":", "2", ",", "\n", "1", ":", "2", "]", "**", "2", ")", ".", "sum", "(", ")", "# The L2 loss of the \"circle\" of weights in 3x3 kernel. Use regular L2 on them.", "\n", "eq_kernel", "=", "K3", "[", ":", ",", ":", ",", "1", ":", "2", ",", "1", ":", "2", "]", "*", "t3", "+", "K1", "*", "t1", "# The equivalent resultant central point of 3x3 kernel.", "\n", "l2_loss_eq_kernel", "=", "(", "eq_kernel", "**", "2", "/", "(", "\n", "t3", "**", "2", "+", "t1", "**", "2", ")", ")", ".", "sum", "(", ")", "# Normalize for an L2 coefficient comparable to regular L2.", "\n", "return", "l2_loss_eq_kernel", "+", "l2_loss_circle", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGGBlock.get_equivalent_kernel_bias": [[138, 143], ["repvgg.RepVGGBlock._fuse_bn_tensor", "repvgg.RepVGGBlock._fuse_bn_tensor", "repvgg.RepVGGBlock._fuse_bn_tensor", "repvgg.RepVGGBlock._pad_1x1_to_3x3_tensor"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGGBlock._fuse_bn_tensor", "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGGBlock._fuse_bn_tensor", "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGGBlock._fuse_bn_tensor", "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGGBlock._pad_1x1_to_3x3_tensor"], ["", "def", "get_equivalent_kernel_bias", "(", "self", ")", ":", "\n", "        ", "kernel3x3", ",", "bias3x3", "=", "self", ".", "_fuse_bn_tensor", "(", "self", ".", "rbr_dense", ")", "\n", "kernel1x1", ",", "bias1x1", "=", "self", ".", "_fuse_bn_tensor", "(", "self", ".", "rbr_1x1", ")", "\n", "kernelid", ",", "biasid", "=", "self", ".", "_fuse_bn_tensor", "(", "self", ".", "rbr_identity", ")", "\n", "return", "kernel3x3", "+", "self", ".", "_pad_1x1_to_3x3_tensor", "(", "kernel1x1", ")", "+", "kernelid", ",", "bias3x3", "+", "bias1x1", "+", "biasid", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGGBlock._pad_1x1_to_3x3_tensor": [[144, 149], ["torch.nn.functional.pad", "torch.nn.functional.pad", "torch.nn.functional.pad", "torch.nn.functional.pad"], "methods", ["None"], ["", "def", "_pad_1x1_to_3x3_tensor", "(", "self", ",", "kernel1x1", ")", ":", "\n", "        ", "if", "kernel1x1", "is", "None", ":", "\n", "            ", "return", "0", "\n", "", "else", ":", "\n", "            ", "return", "torch", ".", "nn", ".", "functional", ".", "pad", "(", "kernel1x1", ",", "[", "1", ",", "1", ",", "1", ",", "1", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGGBlock._fuse_bn_tensor": [[150, 177], ["isinstance", "isinstance", "isinstance", "hasattr", "numpy.zeros", "range", "torch.from_numpy().to", "torch.from_numpy().to", "torch.from_numpy().to", "torch.from_numpy().to", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to"], ["", "", "def", "_fuse_bn_tensor", "(", "self", ",", "branch", ")", ":", "\n", "        ", "if", "branch", "is", "None", ":", "\n", "            ", "return", "0", ",", "0", "\n", "", "if", "isinstance", "(", "branch", ",", "nn", ".", "Sequential", ")", ":", "\n", "            ", "kernel", "=", "branch", ".", "conv", ".", "weight", "\n", "running_mean", "=", "branch", ".", "bn", ".", "running_mean", "\n", "running_var", "=", "branch", ".", "bn", ".", "running_var", "\n", "gamma", "=", "branch", ".", "bn", ".", "weight", "\n", "beta", "=", "branch", ".", "bn", ".", "bias", "\n", "eps", "=", "branch", ".", "bn", ".", "eps", "\n", "", "else", ":", "\n", "            ", "assert", "isinstance", "(", "branch", ",", "nn", ".", "BatchNorm2d", ")", "or", "isinstance", "(", "branch", ",", "FrozenBatchNorm2d", ")", "\n", "if", "not", "hasattr", "(", "self", ",", "'id_tensor'", ")", ":", "\n", "                ", "input_dim", "=", "self", ".", "in_channels", "//", "self", ".", "groups", "\n", "kernel_value", "=", "np", ".", "zeros", "(", "(", "self", ".", "in_channels", ",", "input_dim", ",", "3", ",", "3", ")", ",", "dtype", "=", "np", ".", "float32", ")", "\n", "for", "i", "in", "range", "(", "self", ".", "in_channels", ")", ":", "\n", "                    ", "kernel_value", "[", "i", ",", "i", "%", "input_dim", ",", "1", ",", "1", "]", "=", "1", "\n", "", "self", ".", "id_tensor", "=", "torch", ".", "from_numpy", "(", "kernel_value", ")", ".", "to", "(", "branch", ".", "weight", ".", "device", ")", "\n", "", "kernel", "=", "self", ".", "id_tensor", "\n", "running_mean", "=", "branch", ".", "running_mean", "\n", "running_var", "=", "branch", ".", "running_var", "\n", "gamma", "=", "branch", ".", "weight", "\n", "beta", "=", "branch", ".", "bias", "\n", "eps", "=", "branch", ".", "eps", "\n", "", "std", "=", "(", "running_var", "+", "eps", ")", ".", "sqrt", "(", ")", "\n", "t", "=", "(", "gamma", "/", "std", ")", ".", "reshape", "(", "-", "1", ",", "1", ",", "1", ",", "1", ")", "\n", "return", "kernel", "*", "t", ",", "beta", "-", "running_mean", "*", "gamma", "/", "std", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGGBlock.switch_to_deploy": [[178, 195], ["hasattr", "repvgg.RepVGGBlock.get_equivalent_kernel_bias", "torch.Conv2d", "torch.Conv2d", "repvgg.RepVGGBlock.parameters", "repvgg.RepVGGBlock.__delattr__", "repvgg.RepVGGBlock.__delattr__", "hasattr", "para.detach_", "repvgg.RepVGGBlock.__delattr__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGGBlock.get_equivalent_kernel_bias", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters"], ["", "def", "switch_to_deploy", "(", "self", ")", ":", "\n", "        ", "if", "hasattr", "(", "self", ",", "'rbr_reparam'", ")", ":", "\n", "            ", "return", "\n", "", "kernel", ",", "bias", "=", "self", ".", "get_equivalent_kernel_bias", "(", ")", "\n", "self", ".", "rbr_reparam", "=", "nn", ".", "Conv2d", "(", "in_channels", "=", "self", ".", "rbr_dense", ".", "conv", ".", "in_channels", ",", "\n", "out_channels", "=", "self", ".", "rbr_dense", ".", "conv", ".", "out_channels", ",", "\n", "kernel_size", "=", "self", ".", "rbr_dense", ".", "conv", ".", "kernel_size", ",", "stride", "=", "self", ".", "rbr_dense", ".", "conv", ".", "stride", ",", "\n", "padding", "=", "self", ".", "rbr_dense", ".", "conv", ".", "padding", ",", "dilation", "=", "self", ".", "rbr_dense", ".", "conv", ".", "dilation", ",", "\n", "groups", "=", "self", ".", "rbr_dense", ".", "conv", ".", "groups", ",", "bias", "=", "True", ")", "\n", "self", ".", "rbr_reparam", ".", "weight", ".", "data", "=", "kernel", "\n", "self", ".", "rbr_reparam", ".", "bias", ".", "data", "=", "bias", "\n", "for", "para", "in", "self", ".", "parameters", "(", ")", ":", "\n", "            ", "para", ".", "detach_", "(", ")", "\n", "", "self", ".", "__delattr__", "(", "'rbr_dense'", ")", "\n", "self", ".", "__delattr__", "(", "'rbr_1x1'", ")", "\n", "if", "hasattr", "(", "self", ",", "'rbr_identity'", ")", ":", "\n", "            ", "self", ".", "__delattr__", "(", "'rbr_identity'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGG.__init__": [[199, 228], ["torch.Module.__init__", "min", "repvgg.RepVGGBlock", "repvgg.RepVGG._make_stage", "len", "dict", "int", "int", "repvgg.RepVGG._make_stage", "int", "repvgg.RepVGG._make_stage", "int", "repvgg.RepVGG._make_stage", "int", "torch.AdaptiveAvgPool2d", "torch.AdaptiveAvgPool2d", "torch.Linear", "torch.Linear", "int"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGG._make_stage", "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGG._make_stage", "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGG._make_stage", "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGG._make_stage"], ["    ", "def", "__init__", "(", "self", ",", "num_blocks", ",", "num_classes", "=", "1000", ",", "width_multiplier", "=", "None", ",", "override_groups_map", "=", "None", ",", "deploy", "=", "False", ",", "\n", "use_se", "=", "False", ",", "last_layer", "=", "'stage3'", ",", "freeze_bn", "=", "False", ")", ":", "\n", "        ", "super", "(", "RepVGG", ",", "self", ")", ".", "__init__", "(", ")", "\n", "assert", "last_layer", "in", "[", "'stage1'", ",", "'stage2'", ",", "'stage3'", ",", "'stage4'", ",", "'fc'", "]", "\n", "self", ".", "last_layer", "=", "last_layer", "\n", "\n", "assert", "len", "(", "width_multiplier", ")", "==", "4", "\n", "\n", "self", ".", "deploy", "=", "deploy", "\n", "self", ".", "override_groups_map", "=", "override_groups_map", "or", "dict", "(", ")", "\n", "self", ".", "use_se", "=", "use_se", "\n", "\n", "assert", "0", "not", "in", "self", ".", "override_groups_map", "\n", "\n", "self", ".", "in_planes", "=", "min", "(", "64", ",", "int", "(", "64", "*", "width_multiplier", "[", "0", "]", ")", ")", "\n", "\n", "self", ".", "stage0", "=", "RepVGGBlock", "(", "in_channels", "=", "3", ",", "out_channels", "=", "self", ".", "in_planes", ",", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ",", "\n", "deploy", "=", "self", ".", "deploy", ",", "use_se", "=", "self", ".", "use_se", ",", "freeze_bn", "=", "freeze_bn", ")", "\n", "self", ".", "cur_layer_idx", "=", "1", "\n", "self", ".", "stage1", "=", "self", ".", "_make_stage", "(", "int", "(", "64", "*", "width_multiplier", "[", "0", "]", ")", ",", "num_blocks", "[", "0", "]", ",", "stride", "=", "2", ",", "freeze_bn", "=", "freeze_bn", ")", "\n", "if", "self", ".", "last_layer", "!=", "'stage1'", ":", "\n", "            ", "self", ".", "stage2", "=", "self", ".", "_make_stage", "(", "int", "(", "128", "*", "width_multiplier", "[", "1", "]", ")", ",", "num_blocks", "[", "1", "]", ",", "stride", "=", "2", ",", "freeze_bn", "=", "freeze_bn", ")", "\n", "if", "self", ".", "last_layer", "!=", "'stage2'", ":", "\n", "                ", "self", ".", "stage3", "=", "self", ".", "_make_stage", "(", "int", "(", "256", "*", "width_multiplier", "[", "2", "]", ")", ",", "num_blocks", "[", "2", "]", ",", "stride", "=", "2", ",", "freeze_bn", "=", "freeze_bn", ")", "\n", "if", "self", ".", "last_layer", "!=", "'stage3'", ":", "\n", "                    ", "self", ".", "stage4", "=", "self", ".", "_make_stage", "(", "int", "(", "512", "*", "width_multiplier", "[", "3", "]", ")", ",", "num_blocks", "[", "3", "]", ",", "stride", "=", "2", ",", "freeze_bn", "=", "freeze_bn", ")", "\n", "if", "self", ".", "last_layer", "!=", "'stage4'", ":", "\n", "                        ", "self", ".", "gap", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "output_size", "=", "1", ")", "\n", "self", ".", "linear", "=", "nn", ".", "Linear", "(", "int", "(", "512", "*", "width_multiplier", "[", "3", "]", ")", ",", "num_classes", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGG._make_stage": [[229, 240], ["torch.Sequential", "torch.Sequential", "repvgg.RepVGG.override_groups_map.get", "blocks.append", "repvgg.RepVGGBlock"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "", "", "", "", "def", "_make_stage", "(", "self", ",", "planes", ",", "num_blocks", ",", "stride", ",", "freeze_bn", "=", "False", ")", ":", "\n", "        ", "strides", "=", "[", "stride", "]", "+", "[", "1", "]", "*", "(", "num_blocks", "-", "1", ")", "\n", "blocks", "=", "[", "]", "\n", "for", "stride", "in", "strides", ":", "\n", "            ", "cur_groups", "=", "self", ".", "override_groups_map", ".", "get", "(", "self", ".", "cur_layer_idx", ",", "1", ")", "\n", "blocks", ".", "append", "(", "RepVGGBlock", "(", "in_channels", "=", "self", ".", "in_planes", ",", "out_channels", "=", "planes", ",", "kernel_size", "=", "3", ",", "\n", "stride", "=", "stride", ",", "padding", "=", "1", ",", "groups", "=", "cur_groups", ",", "deploy", "=", "self", ".", "deploy", ",", "\n", "use_se", "=", "self", ".", "use_se", ",", "freeze_bn", "=", "freeze_bn", ")", ")", "\n", "self", ".", "in_planes", "=", "planes", "\n", "self", ".", "cur_layer_idx", "+=", "1", "\n", "", "return", "nn", ".", "Sequential", "(", "*", "blocks", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGG.forward": [[241, 255], ["repvgg.RepVGG.stage0", "repvgg.RepVGG.stage1", "repvgg.RepVGG.stage2", "repvgg.RepVGG.stage3", "repvgg.RepVGG.stage4", "repvgg.RepVGG.gap", "repvgg.RepVGG.view", "repvgg.RepVGG.linear", "repvgg.RepVGG.size"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "out", "=", "self", ".", "stage0", "(", "x", ")", "\n", "out", "=", "self", ".", "stage1", "(", "out", ")", "\n", "if", "self", ".", "last_layer", "!=", "'stage1'", ":", "\n", "            ", "out", "=", "self", ".", "stage2", "(", "out", ")", "\n", "if", "self", ".", "last_layer", "!=", "'stage2'", ":", "\n", "                ", "out", "=", "self", ".", "stage3", "(", "out", ")", "\n", "if", "self", ".", "last_layer", "!=", "'stage3'", ":", "\n", "                    ", "out", "=", "self", ".", "stage4", "(", "out", ")", "\n", "if", "self", ".", "last_layer", "!=", "'stage4'", ":", "\n", "                        ", "out", "=", "self", ".", "gap", "(", "out", ")", "\n", "out", "=", "out", ".", "view", "(", "out", ".", "size", "(", "0", ")", ",", "-", "1", ")", "\n", "out", "=", "self", ".", "linear", "(", "out", ")", "\n", "", "", "", "", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.conv_bn": [[47, 57], ["torch.Sequential", "nn.Sequential.add_module", "torch.Conv2d", "nn.Sequential.add_module", "nn.Sequential.add_module", "repvgg.FrozenBatchNorm2d", "torch.BatchNorm2d"], "function", ["None"], ["", "", "def", "conv_bn", "(", "in_channels", ",", "out_channels", ",", "kernel_size", ",", "stride", ",", "padding", ",", "groups", "=", "1", ",", "freeze_bn", "=", "False", ")", ":", "\n", "    ", "result", "=", "nn", ".", "Sequential", "(", ")", "\n", "result", ".", "add_module", "(", "'conv'", ",", "nn", ".", "Conv2d", "(", "in_channels", "=", "in_channels", ",", "out_channels", "=", "out_channels", ",", "\n", "kernel_size", "=", "kernel_size", ",", "stride", "=", "stride", ",", "padding", "=", "padding", ",", "groups", "=", "groups", ",", "\n", "bias", "=", "False", ")", ")", "\n", "if", "freeze_bn", ":", "\n", "        ", "result", ".", "add_module", "(", "'bn'", ",", "FrozenBatchNorm2d", "(", "out_channels", ")", ")", "\n", "", "else", ":", "\n", "        ", "result", ".", "add_module", "(", "'bn'", ",", "nn", ".", "BatchNorm2d", "(", "num_features", "=", "out_channels", ")", ")", "\n", "", "return", "result", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.create_RepVGG_A0": [[262, 267], ["repvgg.RepVGG"], "function", ["None"], ["def", "create_RepVGG_A0", "(", "deploy", "=", "False", ",", "last_layer", "=", "'stage3'", ",", "freeze_bn", "=", "False", ",", "last_stage_block", "=", "14", ")", ":", "\n", "    ", "\"\"\"last_stage_block: the number of RepVGG block in the last stage\"\"\"", "\n", "return", "RepVGG", "(", "num_blocks", "=", "[", "2", ",", "4", ",", "last_stage_block", ",", "1", "]", ",", "num_classes", "=", "1000", ",", "\n", "width_multiplier", "=", "[", "0.75", ",", "0.75", ",", "0.75", ",", "2.5", "]", ",", "override_groups_map", "=", "None", ",", "deploy", "=", "deploy", ",", "\n", "last_layer", "=", "last_layer", ",", "freeze_bn", "=", "freeze_bn", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.get_RepVGG_func_by_name": [[272, 274], ["None"], "function", ["None"], ["def", "get_RepVGG_func_by_name", "(", "name", ")", ":", "\n", "    ", "return", "func_dict", "[", "name", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.repvgg_model_convert": [[292, 301], ["copy.deepcopy.modules", "copy.deepcopy", "hasattr", "torch.save", "torch.save", "module.switch_to_deploy", "copy.deepcopy.state_dict"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.save", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.save", "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.RepVGGBlock.switch_to_deploy"], ["", "def", "repvgg_model_convert", "(", "model", ":", "torch", ".", "nn", ".", "Module", ",", "save_path", "=", "None", ",", "do_copy", "=", "True", ")", ":", "\n", "    ", "if", "do_copy", ":", "\n", "        ", "model", "=", "copy", ".", "deepcopy", "(", "model", ")", "\n", "", "for", "module", "in", "model", ".", "modules", "(", ")", ":", "\n", "        ", "if", "hasattr", "(", "module", ",", "'switch_to_deploy'", ")", ":", "\n", "            ", "module", ".", "switch_to_deploy", "(", ")", "\n", "", "", "if", "save_path", "is", "not", "None", ":", "\n", "        ", "torch", ".", "save", "(", "model", ".", "state_dict", "(", ")", ",", "save_path", ")", "\n", "", "return", "model", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.lite_encoder.TransformerEncoderLayerLite.__init__": [[16, 30], ["torch.nn.Module.__init__", "torch.nn.MultiheadAttention", "torch.nn.Linear", "torch.nn.Dropout", "torch.nn.Linear", "torch.nn.LayerNorm", "torch.nn.LayerNorm", "torch.nn.Dropout", "torch.nn.Dropout", "lite_encoder._get_activation_fn"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer._get_activation_fn"], ["def", "__init__", "(", "self", ",", "d_model", ",", "nhead", ",", "dim_feedforward", "=", "2048", ",", "dropout", "=", "0.1", ",", "activation", "=", "\"relu\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "self_attn", "=", "nn", ".", "MultiheadAttention", "(", "d_model", ",", "nhead", ",", "dropout", "=", "dropout", ")", "\n", "# FFN", "\n", "self", ".", "linear1", "=", "nn", ".", "Linear", "(", "d_model", ",", "dim_feedforward", ")", "\n", "self", ".", "dropout", "=", "nn", ".", "Dropout", "(", "dropout", ")", "\n", "self", ".", "linear2", "=", "nn", ".", "Linear", "(", "dim_feedforward", ",", "d_model", ")", "\n", "\n", "self", ".", "norm1", "=", "nn", ".", "LayerNorm", "(", "d_model", ")", "\n", "self", ".", "norm2", "=", "nn", ".", "LayerNorm", "(", "d_model", ")", "\n", "self", ".", "dropout1", "=", "nn", ".", "Dropout", "(", "dropout", ")", "\n", "self", ".", "dropout2", "=", "nn", ".", "Dropout", "(", "dropout", ")", "\n", "\n", "self", ".", "activation", "=", "_get_activation_fn", "(", "activation", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.lite_encoder.TransformerEncoderLayerLite.with_pos_embed": [[31, 33], ["None"], "methods", ["None"], ["", "def", "with_pos_embed", "(", "self", ",", "tensor", ",", "pos", ":", "Optional", "[", "Tensor", "]", ")", ":", "\n", "        ", "return", "tensor", "if", "pos", "is", "None", "else", "tensor", "+", "pos", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.lite_encoder.TransformerEncoderLayerLite.forward": [[34, 48], ["lite_encoder.TransformerEncoderLayerLite.norm1", "lite_encoder.TransformerEncoderLayerLite.linear2", "lite_encoder.TransformerEncoderLayerLite.norm2", "lite_encoder.TransformerEncoderLayerLite.self_attn", "lite_encoder.TransformerEncoderLayerLite.dropout1", "lite_encoder.TransformerEncoderLayerLite.dropout", "lite_encoder.TransformerEncoderLayerLite.dropout2", "lite_encoder.TransformerEncoderLayerLite.activation", "lite_encoder.TransformerEncoderLayerLite.linear1"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "q", ":", "Tensor", ",", "k", ":", "Tensor", ",", "v", ":", "Tensor", ",", "key_padding_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ")", ":", "\n", "        ", "\"\"\" q, k, v denote queries, keys, and values respectively \"\"\"", "\n", "# s = time.time()", "\n", "src2", "=", "self", ".", "self_attn", "(", "q", ",", "k", ",", "value", "=", "v", ",", "key_padding_mask", "=", "key_padding_mask", ")", "[", "0", "]", "\n", "src", "=", "q", "+", "self", ".", "dropout1", "(", "src2", ")", "\n", "src", "=", "self", ".", "norm1", "(", "src", ")", "\n", "# e1 = time.time()", "\n", "src2", "=", "self", ".", "linear2", "(", "self", ".", "dropout", "(", "self", ".", "activation", "(", "self", ".", "linear1", "(", "src", ")", ")", ")", ")", "\n", "src", "=", "src", "+", "self", ".", "dropout2", "(", "src2", ")", "\n", "src", "=", "self", ".", "norm2", "(", "src", ")", "\n", "# e2 = time.time()", "\n", "# print(\"self-attention time: %.1f\" % ((e1-s) * 1000))", "\n", "# print(\"MLP time: %.1f\" % ((e2-e1) * 1000))", "\n", "return", "src", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.lite_encoder.TransformerEncoderLite.__init__": [[52, 59], ["torch.nn.Module.__init__", "lite_encoder.TransformerEncoderLayerLite", "lite_encoder.TransformerEncoderLite._reset_parameters"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.Transformer._reset_parameters"], ["def", "__init__", "(", "self", ",", "d_model", "=", "512", ",", "nhead", "=", "8", ",", "dim_feedforward", "=", "2048", ",", "dropout", "=", "0.1", ",", "activation", "=", "\"relu\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "d_model", "=", "d_model", "\n", "self", ".", "nhead", "=", "nhead", "\n", "self", ".", "d_feed", "=", "dim_feedforward", "\n", "self", ".", "encoder", "=", "TransformerEncoderLayerLite", "(", "d_model", ",", "nhead", ",", "dim_feedforward", ",", "dropout", ",", "activation", ")", "\n", "self", ".", "_reset_parameters", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.lite_encoder.TransformerEncoderLite._reset_parameters": [[60, 64], ["lite_encoder.TransformerEncoderLite.parameters", "p.dim", "torch.nn.init.xavier_uniform_"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "_reset_parameters", "(", "self", ")", ":", "\n", "        ", "for", "p", "in", "self", ".", "parameters", "(", ")", ":", "\n", "            ", "if", "p", ".", "dim", "(", ")", ">", "1", ":", "\n", "                ", "nn", ".", "init", ".", "xavier_uniform_", "(", "p", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.lite_encoder.TransformerEncoderLite.forward": [[65, 68], ["lite_encoder.TransformerEncoderLite.encoder"], "methods", ["None"], ["", "", "", "def", "forward", "(", "self", ",", "q", ":", "Tensor", ",", "k", ":", "Tensor", ",", "v", ":", "Tensor", ",", "key_padding_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ")", ":", "\n", "        ", "memory", "=", "self", ".", "encoder", "(", "q", ",", "k", ",", "v", ",", "key_padding_mask", "=", "key_padding_mask", ")", "\n", "return", "memory", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.lite_encoder.build_lite_encoder": [[70, 76], ["print", "lite_encoder.TransformerEncoderLite"], "function", ["None"], ["", "", "def", "build_lite_encoder", "(", "cfg", ")", ":", "\n", "    ", "print", "(", "\"Building lite transformer encoder...\"", ")", "\n", "encoder", "=", "TransformerEncoderLite", "(", "d_model", "=", "cfg", ".", "MODEL", ".", "HIDDEN_DIM", ",", "dropout", "=", "cfg", ".", "MODEL", ".", "TRANSFORMER", ".", "DROPOUT", ",", "\n", "nhead", "=", "cfg", ".", "MODEL", ".", "TRANSFORMER", ".", "NHEADS", ",", "\n", "dim_feedforward", "=", "cfg", ".", "MODEL", ".", "TRANSFORMER", ".", "DIM_FEEDFORWARD", ")", "\n", "return", "encoder", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.lite_encoder._get_activation_fn": [[78, 87], ["RuntimeError"], "function", ["None"], ["", "def", "_get_activation_fn", "(", "activation", ")", ":", "\n", "    ", "\"\"\"Return an activation function given a string\"\"\"", "\n", "if", "activation", "==", "\"relu\"", ":", "\n", "        ", "return", "F", ".", "relu", "\n", "", "if", "activation", "==", "\"gelu\"", ":", "\n", "        ", "return", "F", ".", "gelu", "\n", "", "if", "activation", "==", "\"glu\"", ":", "\n", "        ", "return", "F", ".", "glu", "\n", "", "raise", "RuntimeError", "(", "F\"activation should be relu/gelu, not {activation}.\"", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.Mlp.__init__": [[21, 29], ["torch.Module.__init__", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "act_layer", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Dropout", "torch.Dropout", "torch.Dropout", "torch.Dropout"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "in_features", ",", "hidden_features", "=", "None", ",", "out_features", "=", "None", ",", "act_layer", "=", "nn", ".", "GELU", ",", "drop", "=", "0.", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "out_features", "=", "out_features", "or", "in_features", "\n", "hidden_features", "=", "hidden_features", "or", "in_features", "\n", "self", ".", "fc1", "=", "nn", ".", "Linear", "(", "in_features", ",", "hidden_features", ")", "\n", "self", ".", "act", "=", "act_layer", "(", ")", "\n", "self", ".", "fc2", "=", "nn", ".", "Linear", "(", "hidden_features", ",", "out_features", ")", "\n", "self", ".", "drop", "=", "nn", ".", "Dropout", "(", "drop", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.Mlp.forward": [[30, 37], ["swin_transformer.Mlp.fc1", "swin_transformer.Mlp.act", "swin_transformer.Mlp.drop", "swin_transformer.Mlp.fc2", "swin_transformer.Mlp.drop"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "fc1", "(", "x", ")", "\n", "x", "=", "self", ".", "act", "(", "x", ")", "\n", "x", "=", "self", ".", "drop", "(", "x", ")", "\n", "x", "=", "self", ".", "fc2", "(", "x", ")", "\n", "x", "=", "self", ".", "drop", "(", "x", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.WindowAttention.__init__": [[85, 118], ["torch.Module.__init__", "torch.Parameter", "torch.Parameter", "torch.Parameter", "torch.Parameter", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.flatten", "torch.flatten", "torch.flatten", "torch.flatten", "torch.flatten", "torch.flatten", "torch.flatten", "torch.flatten", "torch.flatten", "torch.flatten", "torch.flatten", "torch.flatten", "torch.flatten", "torch.flatten", "torch.flatten", "torch.flatten", "relative_coords.permute().contiguous.permute().contiguous.permute().contiguous", "relative_coords.permute().contiguous.permute().contiguous.sum", "swin_transformer.WindowAttention.register_buffer", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Dropout", "torch.Dropout", "torch.Dropout", "torch.Dropout", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Dropout", "torch.Dropout", "torch.Dropout", "torch.Dropout", "timm.models.layers.trunc_normal_", "torch.Softmax", "torch.Softmax", "torch.Softmax", "torch.Softmax", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.meshgrid", "torch.meshgrid", "torch.meshgrid", "torch.meshgrid", "torch.meshgrid", "torch.meshgrid", "torch.meshgrid", "torch.meshgrid", "torch.meshgrid", "torch.meshgrid", "torch.meshgrid", "torch.meshgrid", "torch.meshgrid", "torch.meshgrid", "torch.meshgrid", "torch.meshgrid", "relative_coords.permute().contiguous.permute().contiguous.permute"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "dim", ",", "window_size", ",", "num_heads", ",", "qkv_bias", "=", "True", ",", "qk_scale", "=", "None", ",", "attn_drop", "=", "0.", ",", "proj_drop", "=", "0.", ")", ":", "\n", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "dim", "=", "dim", "\n", "self", ".", "window_size", "=", "window_size", "# Wh, Ww", "\n", "self", ".", "num_heads", "=", "num_heads", "\n", "head_dim", "=", "dim", "//", "num_heads", "\n", "self", ".", "scale", "=", "qk_scale", "or", "head_dim", "**", "-", "0.5", "\n", "\n", "# define a parameter table of relative position bias", "\n", "self", ".", "relative_position_bias_table", "=", "nn", ".", "Parameter", "(", "\n", "torch", ".", "zeros", "(", "(", "2", "*", "window_size", "[", "0", "]", "-", "1", ")", "*", "(", "2", "*", "window_size", "[", "1", "]", "-", "1", ")", ",", "num_heads", ")", ")", "# 2*Wh-1 * 2*Ww-1, nH", "\n", "\n", "# get pair-wise relative position index for each token inside the window", "\n", "coords_h", "=", "torch", ".", "arange", "(", "self", ".", "window_size", "[", "0", "]", ")", "\n", "coords_w", "=", "torch", ".", "arange", "(", "self", ".", "window_size", "[", "1", "]", ")", "\n", "coords", "=", "torch", ".", "stack", "(", "torch", ".", "meshgrid", "(", "[", "coords_h", ",", "coords_w", "]", ")", ")", "# 2, Wh, Ww", "\n", "coords_flatten", "=", "torch", ".", "flatten", "(", "coords", ",", "1", ")", "# 2, Wh*Ww", "\n", "relative_coords", "=", "coords_flatten", "[", ":", ",", ":", ",", "None", "]", "-", "coords_flatten", "[", ":", ",", "None", ",", ":", "]", "# 2, Wh*Ww, Wh*Ww", "\n", "relative_coords", "=", "relative_coords", ".", "permute", "(", "1", ",", "2", ",", "0", ")", ".", "contiguous", "(", ")", "# Wh*Ww, Wh*Ww, 2", "\n", "relative_coords", "[", ":", ",", ":", ",", "0", "]", "+=", "self", ".", "window_size", "[", "0", "]", "-", "1", "# shift to start from 0", "\n", "relative_coords", "[", ":", ",", ":", ",", "1", "]", "+=", "self", ".", "window_size", "[", "1", "]", "-", "1", "\n", "relative_coords", "[", ":", ",", ":", ",", "0", "]", "*=", "2", "*", "self", ".", "window_size", "[", "1", "]", "-", "1", "\n", "relative_position_index", "=", "relative_coords", ".", "sum", "(", "-", "1", ")", "# Wh*Ww, Wh*Ww  it cause backwards failure!", "\n", "self", ".", "register_buffer", "(", "\"relative_position_index\"", ",", "relative_position_index", ")", "\n", "\n", "self", ".", "qkv", "=", "nn", ".", "Linear", "(", "dim", ",", "dim", "*", "3", ",", "bias", "=", "qkv_bias", ")", "\n", "self", ".", "attn_drop", "=", "nn", ".", "Dropout", "(", "attn_drop", ")", "\n", "self", ".", "proj", "=", "nn", ".", "Linear", "(", "dim", ",", "dim", ")", "\n", "self", ".", "proj_drop", "=", "nn", ".", "Dropout", "(", "proj_drop", ")", "\n", "\n", "trunc_normal_", "(", "self", ".", "relative_position_bias_table", ",", "std", "=", ".02", ")", "\n", "self", ".", "softmax", "=", "nn", ".", "Softmax", "(", "dim", "=", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.WindowAttention.forward": [[119, 152], ["swin_transformer.WindowAttention.qkv().reshape().permute", "swin_transformer.WindowAttention.relative_position_index.clone().view", "swin_transformer.WindowAttention.relative_position_bias_table[].view", "relative_position_bias.permute().contiguous.permute().contiguous.permute().contiguous", "swin_transformer.WindowAttention.attn_drop", "swin_transformer.WindowAttention.proj", "swin_transformer.WindowAttention.proj_drop", "k.transpose", "relative_position_bias.permute().contiguous.permute().contiguous.unsqueeze", "swin_transformer.WindowAttention.view", "swin_transformer.WindowAttention.softmax", "swin_transformer.WindowAttention.softmax", "swin_transformer.WindowAttention.qkv().reshape", "swin_transformer.WindowAttention.relative_position_index.clone", "relative_position_bias.permute().contiguous.permute().contiguous.permute", "swin_transformer.WindowAttention.view", "mask.unsqueeze().unsqueeze", "swin_transformer.WindowAttention.qkv", "mask.unsqueeze"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ",", "mask", "=", "None", ")", ":", "\n", "        ", "\"\"\" Forward function.\n\n        Args:\n            x: input features with shape of (num_windows*B, N, C)\n            mask: (0/-inf) mask with shape of (num_windows, Wh*Ww, Wh*Ww) or None\n        \"\"\"", "\n", "B_", ",", "N", ",", "C", "=", "x", ".", "shape", "\n", "qkv", "=", "self", ".", "qkv", "(", "x", ")", ".", "reshape", "(", "B_", ",", "N", ",", "3", ",", "self", ".", "num_heads", ",", "C", "//", "self", ".", "num_heads", ")", ".", "permute", "(", "2", ",", "0", ",", "3", ",", "1", ",", "4", ")", "\n", "q", ",", "k", ",", "v", "=", "qkv", "[", "0", "]", ",", "qkv", "[", "1", "]", ",", "qkv", "[", "2", "]", "# make torchscript happy (cannot use tensor as tuple)", "\n", "\n", "q", "=", "q", "*", "self", ".", "scale", "\n", "attn", "=", "(", "q", "@", "k", ".", "transpose", "(", "-", "2", ",", "-", "1", ")", ")", "\n", "new_index", "=", "self", ".", "relative_position_index", ".", "clone", "(", ")", ".", "view", "(", "-", "1", ")", "\n", "relative_position_bias", "=", "self", ".", "relative_position_bias_table", "[", "new_index", "]", ".", "view", "(", "\n", "self", ".", "window_size", "[", "0", "]", "*", "self", ".", "window_size", "[", "1", "]", ",", "self", ".", "window_size", "[", "0", "]", "*", "self", ".", "window_size", "[", "1", "]", ",", "-", "1", ")", "# Wh*Ww,Wh*Ww,nH", "\n", "relative_position_bias", "=", "relative_position_bias", ".", "permute", "(", "2", ",", "0", ",", "1", ")", ".", "contiguous", "(", ")", "# nH, Wh*Ww, Wh*Ww", "\n", "attn", "=", "attn", "+", "relative_position_bias", ".", "unsqueeze", "(", "0", ")", "\n", "\n", "if", "mask", "is", "not", "None", ":", "\n", "            ", "nW", "=", "mask", ".", "shape", "[", "0", "]", "\n", "attn", "=", "attn", ".", "view", "(", "B_", "//", "nW", ",", "nW", ",", "self", ".", "num_heads", ",", "N", ",", "N", ")", "+", "mask", ".", "unsqueeze", "(", "1", ")", ".", "unsqueeze", "(", "0", ")", "\n", "attn", "=", "attn", ".", "view", "(", "-", "1", ",", "self", ".", "num_heads", ",", "N", ",", "N", ")", "\n", "attn", "=", "self", ".", "softmax", "(", "attn", ")", "\n", "", "else", ":", "\n", "            ", "attn", "=", "self", ".", "softmax", "(", "attn", ")", "\n", "\n", "", "attn", "=", "self", ".", "attn_drop", "(", "attn", ")", "\n", "\n", "x", "=", "(", "attn", "@", "v", ")", ".", "transpose", "(", "1", ",", "2", ")", ".", "reshape", "(", "B_", ",", "N", ",", "C", ")", "\n", "x", "=", "self", ".", "proj", "(", "x", ")", "\n", "x", "=", "self", ".", "proj_drop", "(", "x", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.SwinTransformerBlock.__init__": [[172, 195], ["torch.Module.__init__", "norm_layer", "swin_transformer.WindowAttention", "norm_layer", "int", "swin_transformer.Mlp", "timm.models.layers.DropPath", "torch.Identity", "torch.Identity", "torch.Identity", "torch.Identity", "timm.models.layers.to_2tuple"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "dim", ",", "num_heads", ",", "window_size", "=", "7", ",", "shift_size", "=", "0", ",", "\n", "mlp_ratio", "=", "4.", ",", "qkv_bias", "=", "True", ",", "qk_scale", "=", "None", ",", "drop", "=", "0.", ",", "attn_drop", "=", "0.", ",", "drop_path", "=", "0.", ",", "\n", "act_layer", "=", "nn", ".", "GELU", ",", "norm_layer", "=", "nn", ".", "LayerNorm", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "dim", "=", "dim", "\n", "self", ".", "num_heads", "=", "num_heads", "\n", "self", ".", "window_size", "=", "window_size", "\n", "self", ".", "shift_size", "=", "shift_size", "\n", "self", ".", "mlp_ratio", "=", "mlp_ratio", "\n", "assert", "0", "<=", "self", ".", "shift_size", "<", "self", ".", "window_size", ",", "\"shift_size must in 0-window_size\"", "\n", "\n", "self", ".", "norm1", "=", "norm_layer", "(", "dim", ")", "\n", "self", ".", "attn", "=", "WindowAttention", "(", "\n", "dim", ",", "window_size", "=", "to_2tuple", "(", "self", ".", "window_size", ")", ",", "num_heads", "=", "num_heads", ",", "\n", "qkv_bias", "=", "qkv_bias", ",", "qk_scale", "=", "qk_scale", ",", "attn_drop", "=", "attn_drop", ",", "proj_drop", "=", "drop", ")", "\n", "\n", "self", ".", "drop_path", "=", "DropPath", "(", "drop_path", ")", "if", "drop_path", ">", "0.", "else", "nn", ".", "Identity", "(", ")", "\n", "self", ".", "norm2", "=", "norm_layer", "(", "dim", ")", "\n", "mlp_hidden_dim", "=", "int", "(", "dim", "*", "mlp_ratio", ")", "\n", "self", ".", "mlp", "=", "Mlp", "(", "in_features", "=", "dim", ",", "hidden_features", "=", "mlp_hidden_dim", ",", "act_layer", "=", "act_layer", ",", "drop", "=", "drop", ")", "\n", "\n", "self", ".", "H", "=", "None", "\n", "self", ".", "W", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.SwinTransformerBlock.forward": [[196, 254], ["swin_transformer.SwinTransformerBlock.norm1", "x[].contiguous.view", "torch.pad", "torch.pad", "torch.pad", "torch.pad", "swin_transformer.window_partition", "x_windows.view.view.view", "swin_transformer.SwinTransformerBlock.attn", "attn_windows.view.view.view", "swin_transformer.window_reverse", "x[].contiguous.view", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "torch.roll", "x[].contiguous", "swin_transformer.SwinTransformerBlock.drop_path", "swin_transformer.SwinTransformerBlock.drop_path", "swin_transformer.SwinTransformerBlock.mlp", "swin_transformer.SwinTransformerBlock.norm2"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.window_partition", "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.window_reverse", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll"], ["", "def", "forward", "(", "self", ",", "x", ",", "mask_matrix", ")", ":", "\n", "        ", "\"\"\" Forward function.\n\n        Args:\n            x: Input feature, tensor size (B, H*W, C).\n            H, W: Spatial resolution of the input feature.\n            mask_matrix: Attention mask for cyclic shift.\n        \"\"\"", "\n", "B", ",", "L", ",", "C", "=", "x", ".", "shape", "\n", "H", ",", "W", "=", "self", ".", "H", ",", "self", ".", "W", "\n", "assert", "L", "==", "H", "*", "W", ",", "\"input feature has wrong size\"", "\n", "\n", "shortcut", "=", "x", "\n", "x", "=", "self", ".", "norm1", "(", "x", ")", "\n", "x", "=", "x", ".", "view", "(", "B", ",", "H", ",", "W", ",", "C", ")", "\n", "\n", "# pad feature maps to multiples of window size", "\n", "pad_l", "=", "pad_t", "=", "0", "\n", "pad_r", "=", "(", "self", ".", "window_size", "-", "W", "%", "self", ".", "window_size", ")", "%", "self", ".", "window_size", "\n", "pad_b", "=", "(", "self", ".", "window_size", "-", "H", "%", "self", ".", "window_size", ")", "%", "self", ".", "window_size", "\n", "x", "=", "F", ".", "pad", "(", "x", ",", "(", "0", ",", "0", ",", "pad_l", ",", "pad_r", ",", "pad_t", ",", "pad_b", ")", ")", "\n", "_", ",", "Hp", ",", "Wp", ",", "_", "=", "x", ".", "shape", "\n", "\n", "# cyclic shift", "\n", "if", "self", ".", "shift_size", ">", "0", ":", "\n", "            ", "shifted_x", "=", "torch", ".", "roll", "(", "x", ",", "shifts", "=", "(", "-", "self", ".", "shift_size", ",", "-", "self", ".", "shift_size", ")", ",", "dims", "=", "(", "1", ",", "2", ")", ")", "\n", "attn_mask", "=", "mask_matrix", "\n", "", "else", ":", "\n", "            ", "shifted_x", "=", "x", "\n", "attn_mask", "=", "None", "\n", "\n", "# partition windows", "\n", "", "x_windows", "=", "window_partition", "(", "shifted_x", ",", "self", ".", "window_size", ")", "# nW*B, window_size, window_size, C", "\n", "x_windows", "=", "x_windows", ".", "view", "(", "-", "1", ",", "self", ".", "window_size", "*", "self", ".", "window_size", ",", "C", ")", "# nW*B, window_size*window_size, C", "\n", "\n", "# W-MSA/SW-MSA", "\n", "attn_windows", "=", "self", ".", "attn", "(", "x_windows", ",", "mask", "=", "attn_mask", ")", "# nW*B, window_size*window_size, C", "\n", "\n", "# merge windows", "\n", "attn_windows", "=", "attn_windows", ".", "view", "(", "-", "1", ",", "self", ".", "window_size", ",", "self", ".", "window_size", ",", "C", ")", "\n", "shifted_x", "=", "window_reverse", "(", "attn_windows", ",", "self", ".", "window_size", ",", "Hp", ",", "Wp", ")", "# B H' W' C", "\n", "\n", "# reverse cyclic shift", "\n", "if", "self", ".", "shift_size", ">", "0", ":", "\n", "            ", "x", "=", "torch", ".", "roll", "(", "shifted_x", ",", "shifts", "=", "(", "self", ".", "shift_size", ",", "self", ".", "shift_size", ")", ",", "dims", "=", "(", "1", ",", "2", ")", ")", "\n", "", "else", ":", "\n", "            ", "x", "=", "shifted_x", "\n", "\n", "", "if", "pad_r", ">", "0", "or", "pad_b", ">", "0", ":", "\n", "            ", "x", "=", "x", "[", ":", ",", ":", "H", ",", ":", "W", ",", ":", "]", ".", "contiguous", "(", ")", "\n", "\n", "", "x", "=", "x", ".", "view", "(", "B", ",", "H", "*", "W", ",", "C", ")", "\n", "\n", "# FFN", "\n", "x", "=", "shortcut", "+", "self", ".", "drop_path", "(", "x", ")", "\n", "x", "=", "x", "+", "self", ".", "drop_path", "(", "self", ".", "mlp", "(", "self", ".", "norm2", "(", "x", ")", ")", ")", "\n", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.PatchMerging.__init__": [[264, 269], ["torch.Module.__init__", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "norm_layer"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "dim", ",", "norm_layer", "=", "nn", ".", "LayerNorm", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "dim", "=", "dim", "\n", "self", ".", "reduction", "=", "nn", ".", "Linear", "(", "4", "*", "dim", ",", "2", "*", "dim", ",", "bias", "=", "False", ")", "\n", "self", ".", "norm", "=", "norm_layer", "(", "4", "*", "dim", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.PatchMerging.forward": [[270, 298], ["torch.pad.view", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.pad.view", "swin_transformer.PatchMerging.norm", "swin_transformer.PatchMerging.reduction", "torch.pad", "torch.pad", "torch.pad", "torch.pad"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ",", "H", ",", "W", ")", ":", "\n", "        ", "\"\"\" Forward function.\n\n        Args:\n            x: Input feature, tensor size (B, H*W, C).\n            H, W: Spatial resolution of the input feature.\n        \"\"\"", "\n", "B", ",", "L", ",", "C", "=", "x", ".", "shape", "\n", "assert", "L", "==", "H", "*", "W", ",", "\"input feature has wrong size\"", "\n", "\n", "x", "=", "x", ".", "view", "(", "B", ",", "H", ",", "W", ",", "C", ")", "\n", "\n", "# padding", "\n", "pad_input", "=", "(", "H", "%", "2", "==", "1", ")", "or", "(", "W", "%", "2", "==", "1", ")", "\n", "if", "pad_input", ":", "\n", "            ", "x", "=", "F", ".", "pad", "(", "x", ",", "(", "0", ",", "0", ",", "0", ",", "W", "%", "2", ",", "0", ",", "H", "%", "2", ")", ")", "\n", "\n", "", "x0", "=", "x", "[", ":", ",", "0", ":", ":", "2", ",", "0", ":", ":", "2", ",", ":", "]", "# B H/2 W/2 C", "\n", "x1", "=", "x", "[", ":", ",", "1", ":", ":", "2", ",", "0", ":", ":", "2", ",", ":", "]", "# B H/2 W/2 C", "\n", "x2", "=", "x", "[", ":", ",", "0", ":", ":", "2", ",", "1", ":", ":", "2", ",", ":", "]", "# B H/2 W/2 C", "\n", "x3", "=", "x", "[", ":", ",", "1", ":", ":", "2", ",", "1", ":", ":", "2", ",", ":", "]", "# B H/2 W/2 C", "\n", "x", "=", "torch", ".", "cat", "(", "[", "x0", ",", "x1", ",", "x2", ",", "x3", "]", ",", "-", "1", ")", "# B H/2 W/2 4*C", "\n", "x", "=", "x", ".", "view", "(", "B", ",", "-", "1", ",", "4", "*", "C", ")", "# B H/2*W/2 4*C", "\n", "\n", "x", "=", "self", ".", "norm", "(", "x", ")", "\n", "x", "=", "self", ".", "reduction", "(", "x", ")", "\n", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.BasicLayer.__init__": [[319, 360], ["torch.Module.__init__", "torch.ModuleList", "torch.ModuleList", "torch.ModuleList", "torch.ModuleList", "downsample", "swin_transformer.SwinTransformerBlock", "range", "isinstance"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "\n", "dim", ",", "\n", "depth", ",", "\n", "num_heads", ",", "\n", "window_size", "=", "7", ",", "\n", "mlp_ratio", "=", "4.", ",", "\n", "qkv_bias", "=", "True", ",", "\n", "qk_scale", "=", "None", ",", "\n", "drop", "=", "0.", ",", "\n", "attn_drop", "=", "0.", ",", "\n", "drop_path", "=", "0.", ",", "\n", "norm_layer", "=", "nn", ".", "LayerNorm", ",", "\n", "downsample", "=", "None", ",", "\n", "use_checkpoint", "=", "False", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "window_size", "=", "window_size", "\n", "self", ".", "shift_size", "=", "window_size", "//", "2", "\n", "self", ".", "depth", "=", "depth", "\n", "self", ".", "use_checkpoint", "=", "use_checkpoint", "\n", "\n", "# build blocks", "\n", "self", ".", "blocks", "=", "nn", ".", "ModuleList", "(", "[", "\n", "SwinTransformerBlock", "(", "\n", "dim", "=", "dim", ",", "\n", "num_heads", "=", "num_heads", ",", "\n", "window_size", "=", "window_size", ",", "\n", "shift_size", "=", "0", "if", "(", "i", "%", "2", "==", "0", ")", "else", "window_size", "//", "2", ",", "\n", "mlp_ratio", "=", "mlp_ratio", ",", "\n", "qkv_bias", "=", "qkv_bias", ",", "\n", "qk_scale", "=", "qk_scale", ",", "\n", "drop", "=", "drop", ",", "\n", "attn_drop", "=", "attn_drop", ",", "\n", "drop_path", "=", "drop_path", "[", "i", "]", "if", "isinstance", "(", "drop_path", ",", "list", ")", "else", "drop_path", ",", "\n", "norm_layer", "=", "norm_layer", ")", "\n", "for", "i", "in", "range", "(", "depth", ")", "]", ")", "\n", "\n", "# patch merging layer", "\n", "if", "downsample", "is", "not", "None", ":", "\n", "            ", "self", ".", "downsample", "=", "downsample", "(", "dim", "=", "dim", ",", "norm_layer", "=", "norm_layer", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "downsample", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.BasicLayer.forward": [[361, 402], ["torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "swin_transformer.window_partition", "mask_windows.view.view.view", "attn_mask.masked_fill().masked_fill.masked_fill().masked_fill.masked_fill().masked_fill", "int", "int", "slice", "slice", "slice", "slice", "slice", "slice", "mask_windows.view.view.unsqueeze", "mask_windows.view.view.unsqueeze", "float", "swin_transformer.BasicLayer.downsample", "numpy.ceil", "numpy.ceil", "attn_mask.masked_fill().masked_fill.masked_fill().masked_fill.masked_fill", "torch.checkpoint", "torch.checkpoint", "torch.checkpoint", "torch.checkpoint", "blk", "float"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.window_partition"], ["", "", "def", "forward", "(", "self", ",", "x", ",", "H", ",", "W", ")", ":", "\n", "        ", "\"\"\" Forward function.\n\n        Args:\n            x: Input feature, tensor size (B, H*W, C).\n            H, W: Spatial resolution of the input feature.\n        \"\"\"", "\n", "\n", "# calculate attention mask for SW-MSA", "\n", "Hp", "=", "int", "(", "np", ".", "ceil", "(", "H", "/", "self", ".", "window_size", ")", ")", "*", "self", ".", "window_size", "\n", "Wp", "=", "int", "(", "np", ".", "ceil", "(", "W", "/", "self", ".", "window_size", ")", ")", "*", "self", ".", "window_size", "\n", "img_mask", "=", "torch", ".", "zeros", "(", "(", "1", ",", "Hp", ",", "Wp", ",", "1", ")", ",", "device", "=", "x", ".", "device", ")", "# 1 Hp Wp 1", "\n", "h_slices", "=", "(", "slice", "(", "0", ",", "-", "self", ".", "window_size", ")", ",", "\n", "slice", "(", "-", "self", ".", "window_size", ",", "-", "self", ".", "shift_size", ")", ",", "\n", "slice", "(", "-", "self", ".", "shift_size", ",", "None", ")", ")", "\n", "w_slices", "=", "(", "slice", "(", "0", ",", "-", "self", ".", "window_size", ")", ",", "\n", "slice", "(", "-", "self", ".", "window_size", ",", "-", "self", ".", "shift_size", ")", ",", "\n", "slice", "(", "-", "self", ".", "shift_size", ",", "None", ")", ")", "\n", "cnt", "=", "0", "\n", "for", "h", "in", "h_slices", ":", "\n", "            ", "for", "w", "in", "w_slices", ":", "\n", "                ", "img_mask", "[", ":", ",", "h", ",", "w", ",", ":", "]", "=", "cnt", "\n", "cnt", "+=", "1", "\n", "\n", "", "", "mask_windows", "=", "window_partition", "(", "img_mask", ",", "self", ".", "window_size", ")", "# nW, window_size, window_size, 1", "\n", "mask_windows", "=", "mask_windows", ".", "view", "(", "-", "1", ",", "self", ".", "window_size", "*", "self", ".", "window_size", ")", "\n", "attn_mask", "=", "mask_windows", ".", "unsqueeze", "(", "1", ")", "-", "mask_windows", ".", "unsqueeze", "(", "2", ")", "\n", "attn_mask", "=", "attn_mask", ".", "masked_fill", "(", "attn_mask", "!=", "0", ",", "float", "(", "-", "100.0", ")", ")", ".", "masked_fill", "(", "attn_mask", "==", "0", ",", "float", "(", "0.0", ")", ")", "\n", "\n", "for", "blk", "in", "self", ".", "blocks", ":", "\n", "            ", "blk", ".", "H", ",", "blk", ".", "W", "=", "H", ",", "W", "\n", "if", "self", ".", "use_checkpoint", ":", "\n", "                ", "x", "=", "checkpoint", ".", "checkpoint", "(", "blk", ",", "x", ",", "attn_mask", ")", "\n", "", "else", ":", "\n", "                ", "x", "=", "blk", "(", "x", ",", "attn_mask", ")", "\n", "", "", "if", "self", ".", "downsample", "is", "not", "None", ":", "\n", "            ", "x_down", "=", "self", ".", "downsample", "(", "x", ",", "H", ",", "W", ")", "\n", "Wh", ",", "Ww", "=", "(", "H", "+", "1", ")", "//", "2", ",", "(", "W", "+", "1", ")", "//", "2", "\n", "return", "x", ",", "H", ",", "W", ",", "x_down", ",", "Wh", ",", "Ww", "\n", "", "else", ":", "\n", "            ", "return", "x", ",", "H", ",", "W", ",", "x", ",", "H", ",", "W", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.PatchEmbed.__init__": [[414, 427], ["torch.Module.__init__", "timm.models.layers.to_2tuple", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "norm_layer"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "patch_size", "=", "4", ",", "in_chans", "=", "3", ",", "embed_dim", "=", "96", ",", "norm_layer", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "patch_size", "=", "to_2tuple", "(", "patch_size", ")", "\n", "self", ".", "patch_size", "=", "patch_size", "\n", "\n", "self", ".", "in_chans", "=", "in_chans", "\n", "self", ".", "embed_dim", "=", "embed_dim", "\n", "\n", "self", ".", "proj", "=", "nn", ".", "Conv2d", "(", "in_chans", ",", "embed_dim", ",", "kernel_size", "=", "patch_size", ",", "stride", "=", "patch_size", ")", "\n", "if", "norm_layer", "is", "not", "None", ":", "\n", "            ", "self", ".", "norm", "=", "norm_layer", "(", "embed_dim", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "norm", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.PatchEmbed.forward": [[428, 445], ["x.transpose().view.transpose().view.size", "swin_transformer.PatchEmbed.proj", "torch.pad", "torch.pad", "torch.pad", "torch.pad", "torch.pad", "torch.pad", "torch.pad", "torch.pad", "x.transpose().view.transpose().view.flatten().transpose", "swin_transformer.PatchEmbed.norm", "x.transpose().view.transpose().view.transpose().view", "x.transpose().view.transpose().view.size", "x.transpose().view.transpose().view.size", "x.transpose().view.transpose().view.flatten", "x.transpose().view.transpose().view.transpose"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size"], ["", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "\"\"\"Forward function.\"\"\"", "\n", "# padding", "\n", "_", ",", "_", ",", "H", ",", "W", "=", "x", ".", "size", "(", ")", "\n", "if", "W", "%", "self", ".", "patch_size", "[", "1", "]", "!=", "0", ":", "\n", "            ", "x", "=", "F", ".", "pad", "(", "x", ",", "(", "0", ",", "self", ".", "patch_size", "[", "1", "]", "-", "W", "%", "self", ".", "patch_size", "[", "1", "]", ")", ")", "\n", "", "if", "H", "%", "self", ".", "patch_size", "[", "0", "]", "!=", "0", ":", "\n", "            ", "x", "=", "F", ".", "pad", "(", "x", ",", "(", "0", ",", "0", ",", "0", ",", "self", ".", "patch_size", "[", "0", "]", "-", "H", "%", "self", ".", "patch_size", "[", "0", "]", ")", ")", "\n", "\n", "", "x", "=", "self", ".", "proj", "(", "x", ")", "# B C Wh Ww", "\n", "if", "self", ".", "norm", "is", "not", "None", ":", "\n", "            ", "Wh", ",", "Ww", "=", "x", ".", "size", "(", "2", ")", ",", "x", ".", "size", "(", "3", ")", "\n", "x", "=", "x", ".", "flatten", "(", "2", ")", ".", "transpose", "(", "1", ",", "2", ")", "\n", "x", "=", "self", ".", "norm", "(", "x", ")", "\n", "x", "=", "x", ".", "transpose", "(", "1", ",", "2", ")", ".", "view", "(", "-", "1", ",", "self", ".", "embed_dim", ",", "Wh", ",", "Ww", ")", "\n", "\n", "", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.SwinTransformer.__init__": [[476, 555], ["torch.Module.__init__", "len", "swin_transformer.PatchEmbed", "torch.Dropout", "torch.Dropout", "torch.Dropout", "torch.Dropout", "torch.ModuleList", "torch.ModuleList", "torch.ModuleList", "torch.ModuleList", "range", "swin_transformer.SwinTransformer._freeze_stages", "timm.models.layers.to_2tuple", "timm.models.layers.to_2tuple", "torch.Parameter", "torch.Parameter", "torch.Parameter", "torch.Parameter", "timm.models.layers.trunc_normal_", "x.item", "swin_transformer.BasicLayer", "swin_transformer.SwinTransformer.layers.append", "int", "norm_layer", "swin_transformer.SwinTransformer.add_module", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.linspace", "torch.linspace", "torch.linspace", "torch.linspace", "torch.linspace", "torch.linspace", "torch.linspace", "torch.linspace", "torch.linspace", "torch.linspace", "torch.linspace", "torch.linspace", "torch.linspace", "torch.linspace", "torch.linspace", "torch.linspace", "range", "sum", "int", "sum", "sum"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.SwinTransformer._freeze_stages"], ["def", "__init__", "(", "self", ",", "\n", "pretrain_img_size", "=", "224", ",", "\n", "patch_size", "=", "4", ",", "\n", "in_chans", "=", "3", ",", "\n", "embed_dim", "=", "96", ",", "\n", "depths", "=", "[", "2", ",", "2", ",", "6", ",", "2", "]", ",", "\n", "num_heads", "=", "[", "3", ",", "6", ",", "12", ",", "24", "]", ",", "\n", "window_size", "=", "7", ",", "\n", "mlp_ratio", "=", "4.", ",", "\n", "qkv_bias", "=", "True", ",", "\n", "qk_scale", "=", "None", ",", "\n", "drop_rate", "=", "0.", ",", "\n", "attn_drop_rate", "=", "0.", ",", "\n", "drop_path_rate", "=", "0.2", ",", "\n", "norm_layer", "=", "nn", ".", "LayerNorm", ",", "\n", "ape", "=", "False", ",", "\n", "patch_norm", "=", "True", ",", "\n", "out_indices", "=", "(", "0", ",", "1", ",", "2", ",", "3", ")", ",", "\n", "frozen_stages", "=", "-", "1", ",", "\n", "use_checkpoint", "=", "False", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "pretrain_img_size", "=", "pretrain_img_size", "\n", "self", ".", "num_layers", "=", "len", "(", "depths", ")", "\n", "self", ".", "embed_dim", "=", "embed_dim", "\n", "self", ".", "ape", "=", "ape", "\n", "self", ".", "patch_norm", "=", "patch_norm", "\n", "self", ".", "out_indices", "=", "out_indices", "\n", "self", ".", "frozen_stages", "=", "frozen_stages", "\n", "\n", "# split image into non-overlapping patches", "\n", "self", ".", "patch_embed", "=", "PatchEmbed", "(", "\n", "patch_size", "=", "patch_size", ",", "in_chans", "=", "in_chans", ",", "embed_dim", "=", "embed_dim", ",", "\n", "norm_layer", "=", "norm_layer", "if", "self", ".", "patch_norm", "else", "None", ")", "\n", "\n", "# absolute position embedding", "\n", "if", "self", ".", "ape", ":", "\n", "            ", "pretrain_img_size", "=", "to_2tuple", "(", "pretrain_img_size", ")", "\n", "patch_size", "=", "to_2tuple", "(", "patch_size", ")", "\n", "patches_resolution", "=", "[", "pretrain_img_size", "[", "0", "]", "//", "patch_size", "[", "0", "]", ",", "pretrain_img_size", "[", "1", "]", "//", "patch_size", "[", "1", "]", "]", "\n", "\n", "self", ".", "absolute_pos_embed", "=", "nn", ".", "Parameter", "(", "\n", "torch", ".", "zeros", "(", "1", ",", "embed_dim", ",", "patches_resolution", "[", "0", "]", ",", "patches_resolution", "[", "1", "]", ")", ")", "\n", "trunc_normal_", "(", "self", ".", "absolute_pos_embed", ",", "std", "=", ".02", ")", "\n", "\n", "", "self", ".", "pos_drop", "=", "nn", ".", "Dropout", "(", "p", "=", "drop_rate", ")", "\n", "\n", "# stochastic depth", "\n", "dpr", "=", "[", "x", ".", "item", "(", ")", "for", "x", "in", "torch", ".", "linspace", "(", "0", ",", "drop_path_rate", ",", "sum", "(", "depths", ")", ")", "]", "# stochastic depth decay rule", "\n", "\n", "# build layers", "\n", "self", ".", "layers", "=", "nn", ".", "ModuleList", "(", ")", "\n", "for", "i_layer", "in", "range", "(", "self", ".", "num_layers", ")", ":", "\n", "            ", "layer", "=", "BasicLayer", "(", "\n", "dim", "=", "int", "(", "embed_dim", "*", "2", "**", "i_layer", ")", ",", "\n", "depth", "=", "depths", "[", "i_layer", "]", ",", "\n", "num_heads", "=", "num_heads", "[", "i_layer", "]", ",", "\n", "window_size", "=", "window_size", ",", "\n", "mlp_ratio", "=", "mlp_ratio", ",", "\n", "qkv_bias", "=", "qkv_bias", ",", "\n", "qk_scale", "=", "qk_scale", ",", "\n", "drop", "=", "drop_rate", ",", "\n", "attn_drop", "=", "attn_drop_rate", ",", "\n", "drop_path", "=", "dpr", "[", "sum", "(", "depths", "[", ":", "i_layer", "]", ")", ":", "sum", "(", "depths", "[", ":", "i_layer", "+", "1", "]", ")", "]", ",", "\n", "norm_layer", "=", "norm_layer", ",", "\n", "downsample", "=", "PatchMerging", "if", "(", "i_layer", "<", "self", ".", "num_layers", "-", "1", ")", "else", "None", ",", "\n", "use_checkpoint", "=", "use_checkpoint", ")", "\n", "self", ".", "layers", ".", "append", "(", "layer", ")", "\n", "\n", "", "num_features", "=", "[", "int", "(", "embed_dim", "*", "2", "**", "i", ")", "for", "i", "in", "range", "(", "self", ".", "num_layers", ")", "]", "\n", "self", ".", "num_features", "=", "num_features", "\n", "\n", "# add a norm layer for each output", "\n", "for", "i_layer", "in", "out_indices", ":", "\n", "            ", "layer", "=", "norm_layer", "(", "num_features", "[", "i_layer", "]", ")", "\n", "layer_name", "=", "f'norm{i_layer}'", "\n", "self", ".", "add_module", "(", "layer_name", ",", "layer", ")", "\n", "\n", "", "self", ".", "_freeze_stages", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.SwinTransformer._freeze_stages": [[556, 572], ["swin_transformer.SwinTransformer.patch_embed.eval", "swin_transformer.SwinTransformer.patch_embed.parameters", "swin_transformer.SwinTransformer.pos_drop.eval", "range", "m.eval", "m.parameters"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.eval", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.eval", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.eval", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters"], ["", "def", "_freeze_stages", "(", "self", ")", ":", "\n", "        ", "if", "self", ".", "frozen_stages", ">=", "0", ":", "\n", "            ", "self", ".", "patch_embed", ".", "eval", "(", ")", "\n", "for", "param", "in", "self", ".", "patch_embed", ".", "parameters", "(", ")", ":", "\n", "                ", "param", ".", "requires_grad", "=", "False", "\n", "\n", "", "", "if", "self", ".", "frozen_stages", ">=", "1", "and", "self", ".", "ape", ":", "\n", "            ", "self", ".", "absolute_pos_embed", ".", "requires_grad", "=", "False", "\n", "\n", "", "if", "self", ".", "frozen_stages", ">=", "2", ":", "\n", "            ", "self", ".", "pos_drop", ".", "eval", "(", ")", "\n", "for", "i", "in", "range", "(", "0", ",", "self", ".", "frozen_stages", "-", "1", ")", ":", "\n", "                ", "m", "=", "self", ".", "layers", "[", "i", "]", "\n", "m", ".", "eval", "(", ")", "\n", "for", "param", "in", "m", ".", "parameters", "(", ")", ":", "\n", "                    ", "param", ".", "requires_grad", "=", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.SwinTransformer.init_weights": [[573, 598], ["isinstance", "isinstance", "swin_transformer.SwinTransformer.apply", "get_root_logger", "swin_transformer.load_checkpoint", "timm.models.layers.trunc_normal_", "isinstance", "swin_transformer.SwinTransformer.apply", "TypeError", "isinstance", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_checkpoint", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply"], ["", "", "", "", "def", "init_weights", "(", "self", ",", "pretrained", "=", "None", ")", ":", "\n", "        ", "\"\"\"Initialize the weights in backbone.\n\n        Args:\n            pretrained (str, optional): Path to pre-trained weights.\n                Defaults to None.\n        \"\"\"", "\n", "\n", "def", "_init_weights", "(", "m", ")", ":", "\n", "            ", "if", "isinstance", "(", "m", ",", "nn", ".", "Linear", ")", ":", "\n", "                ", "trunc_normal_", "(", "m", ".", "weight", ",", "std", "=", ".02", ")", "\n", "if", "isinstance", "(", "m", ",", "nn", ".", "Linear", ")", "and", "m", ".", "bias", "is", "not", "None", ":", "\n", "                    ", "nn", ".", "init", ".", "constant_", "(", "m", ".", "bias", ",", "0", ")", "\n", "", "", "elif", "isinstance", "(", "m", ",", "nn", ".", "LayerNorm", ")", ":", "\n", "                ", "nn", ".", "init", ".", "constant_", "(", "m", ".", "bias", ",", "0", ")", "\n", "nn", ".", "init", ".", "constant_", "(", "m", ".", "weight", ",", "1.0", ")", "\n", "\n", "", "", "if", "isinstance", "(", "pretrained", ",", "str", ")", ":", "\n", "            ", "self", ".", "apply", "(", "_init_weights", ")", "\n", "logger", "=", "get_root_logger", "(", ")", "\n", "load_checkpoint", "(", "self", ",", "pretrained", ",", "strict", "=", "False", ",", "logger", "=", "logger", ")", "\n", "", "elif", "pretrained", "is", "None", ":", "\n", "            ", "self", ".", "apply", "(", "_init_weights", ")", "\n", "", "else", ":", "\n", "            ", "raise", "TypeError", "(", "'pretrained must be a str or None'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.SwinTransformer.forward": [[599, 623], ["swin_transformer.SwinTransformer.patch_embed", "swin_transformer.SwinTransformer.pos_drop", "range", "x.flatten().transpose.flatten().transpose.size", "x.flatten().transpose.flatten().transpose.size", "torch.interpolate", "torch.interpolate", "torch.interpolate", "torch.interpolate", "x.flatten().transpose.flatten().transpose.flatten().transpose", "layer", "getattr", "getattr.", "getattr.view().permute().contiguous", "x.flatten().transpose.flatten().transpose.flatten", "getattr.view().permute", "getattr.view"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], ["", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "\"\"\"Forward function.\"\"\"", "\n", "x", "=", "self", ".", "patch_embed", "(", "x", ")", "\n", "\n", "Wh", ",", "Ww", "=", "x", ".", "size", "(", "2", ")", ",", "x", ".", "size", "(", "3", ")", "\n", "if", "self", ".", "ape", ":", "\n", "# interpolate the position embedding to the corresponding size", "\n", "            ", "absolute_pos_embed", "=", "F", ".", "interpolate", "(", "self", ".", "absolute_pos_embed", ",", "size", "=", "(", "Wh", ",", "Ww", ")", ",", "mode", "=", "'bicubic'", ")", "\n", "x", "=", "(", "x", "+", "absolute_pos_embed", ")", ".", "flatten", "(", "2", ")", ".", "transpose", "(", "1", ",", "2", ")", "# B Wh*Ww C", "\n", "", "else", ":", "\n", "            ", "x", "=", "x", ".", "flatten", "(", "2", ")", ".", "transpose", "(", "1", ",", "2", ")", "\n", "", "x", "=", "self", ".", "pos_drop", "(", "x", ")", "\n", "\n", "# outs = []", "\n", "for", "i", "in", "range", "(", "self", ".", "num_layers", ")", ":", "\n", "            ", "layer", "=", "self", ".", "layers", "[", "i", "]", "\n", "x_out", ",", "H", ",", "W", ",", "x", ",", "Wh", ",", "Ww", "=", "layer", "(", "x", ",", "Wh", ",", "Ww", ")", "\n", "\n", "if", "i", "==", "self", ".", "out_indices", "[", "0", "]", ":", "\n", "                ", "norm_layer", "=", "getattr", "(", "self", ",", "f'norm{i}'", ")", "\n", "x_out", "=", "norm_layer", "(", "x_out", ")", "\n", "\n", "out", "=", "x_out", ".", "view", "(", "-", "1", ",", "H", ",", "W", ",", "self", ".", "num_features", "[", "i", "]", ")", ".", "permute", "(", "0", ",", "3", ",", "1", ",", "2", ")", ".", "contiguous", "(", ")", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.SwinTransformer.train": [[626, 630], ["super().train", "swin_transformer.SwinTransformer._freeze_stages"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train", "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.SwinTransformer._freeze_stages"], ["", "", "", "def", "train", "(", "self", ",", "mode", "=", "True", ")", ":", "\n", "        ", "\"\"\"Convert the model into training mode while keep layers freezed.\"\"\"", "\n", "super", "(", "SwinTransformer", ",", "self", ")", ".", "train", "(", "mode", ")", "\n", "self", ".", "_freeze_stages", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.window_partition": [[39, 52], ["x.view.view", "x.view.permute().contiguous().view", "x.view.permute().contiguous", "x.view.permute"], "function", ["None"], ["", "", "def", "window_partition", "(", "x", ",", "window_size", ")", ":", "\n", "    ", "\"\"\"\n    Args:\n        x: (B, H, W, C)\n        window_size (int): window size\n\n    Returns:\n        windows: (num_windows*B, window_size, window_size, C)\n    \"\"\"", "\n", "B", ",", "H", ",", "W", ",", "C", "=", "x", ".", "shape", "\n", "x", "=", "x", ".", "view", "(", "B", ",", "H", "//", "window_size", ",", "window_size", ",", "W", "//", "window_size", ",", "window_size", ",", "C", ")", "\n", "windows", "=", "x", ".", "permute", "(", "0", ",", "1", ",", "3", ",", "2", ",", "4", ",", "5", ")", ".", "contiguous", "(", ")", ".", "view", "(", "-", "1", ",", "window_size", ",", "window_size", ",", "C", ")", "\n", "return", "windows", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.window_reverse": [[54, 69], ["int", "windows.view", "x.permute().contiguous().view.permute().contiguous().view", "x.permute().contiguous().view.permute().contiguous", "x.permute().contiguous().view.permute"], "function", ["None"], ["", "def", "window_reverse", "(", "windows", ",", "window_size", ",", "H", ",", "W", ")", ":", "\n", "    ", "\"\"\"\n    Args:\n        windows: (num_windows*B, window_size, window_size, C)\n        window_size (int): Window size\n        H (int): Height of image\n        W (int): Width of image\n\n    Returns:\n        x: (B, H, W, C)\n    \"\"\"", "\n", "B", "=", "int", "(", "windows", ".", "shape", "[", "0", "]", "/", "(", "H", "*", "W", "/", "window_size", "/", "window_size", ")", ")", "\n", "x", "=", "windows", ".", "view", "(", "B", ",", "H", "//", "window_size", ",", "W", "//", "window_size", ",", "window_size", ",", "window_size", ",", "-", "1", ")", "\n", "x", "=", "x", ".", "permute", "(", "0", ",", "1", ",", "3", ",", "2", ",", "4", ",", "5", ")", ".", "contiguous", "(", ")", ".", "view", "(", "B", ",", "H", ",", "W", ",", "-", "1", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.load_checkpoint": [[632, 639], ["print", "torch.load", "torch.load", "torch.load", "torch.load", "model.load_state_dict", "torch.cuda.empty_cache", "torch.cuda.empty_cache", "torch.cuda.empty_cache", "torch.cuda.empty_cache"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict"], ["", "", "def", "load_checkpoint", "(", "ckpt_path", ",", "model", ")", ":", "\n", "    ", "print", "(", "\"==============> Resuming form %s ....................\"", "%", "ckpt_path", ")", "\n", "checkpoint", "=", "torch", ".", "load", "(", "ckpt_path", ",", "map_location", "=", "'cpu'", ")", "\n", "model", ".", "load_state_dict", "(", "checkpoint", "[", "'model'", "]", ",", "strict", "=", "False", ")", "\n", "\n", "del", "checkpoint", "\n", "torch", ".", "cuda", ".", "empty_cache", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.build_swint": [[641, 662], ["os.path.dirname", "os.path.join", "swin_config.get_config_new", "swin_transformer.SwinTransformer", "os.path.abspath"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_config.get_config_new"], ["", "def", "build_swint", "(", "model_name", ")", ":", "\n", "    ", "cur_dir", "=", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__file__", ")", ")", "\n", "yaml_path", "=", "os", ".", "path", ".", "join", "(", "cur_dir", ",", "\"%s.yaml\"", "%", "model_name", ")", "\n", "config", "=", "get_config_new", "(", "yaml_path", ")", "\n", "model", "=", "SwinTransformer", "(", "pretrain_img_size", "=", "config", ".", "DATA", ".", "IMG_SIZE", ",", "\n", "patch_size", "=", "config", ".", "MODEL", ".", "SWIN", ".", "PATCH_SIZE", ",", "\n", "in_chans", "=", "config", ".", "MODEL", ".", "SWIN", ".", "IN_CHANS", ",", "\n", "embed_dim", "=", "config", ".", "MODEL", ".", "SWIN", ".", "EMBED_DIM", ",", "\n", "depths", "=", "config", ".", "MODEL", ".", "SWIN", ".", "DEPTHS", ",", "\n", "num_heads", "=", "config", ".", "MODEL", ".", "SWIN", ".", "NUM_HEADS", ",", "\n", "window_size", "=", "config", ".", "MODEL", ".", "SWIN", ".", "WINDOW_SIZE", ",", "\n", "mlp_ratio", "=", "config", ".", "MODEL", ".", "SWIN", ".", "MLP_RATIO", ",", "\n", "qkv_bias", "=", "config", ".", "MODEL", ".", "SWIN", ".", "QKV_BIAS", ",", "\n", "qk_scale", "=", "config", ".", "MODEL", ".", "SWIN", ".", "QK_SCALE", ",", "\n", "drop_rate", "=", "config", ".", "MODEL", ".", "DROP_RATE", ",", "\n", "drop_path_rate", "=", "config", ".", "MODEL", ".", "DROP_PATH_RATE", ",", "\n", "ape", "=", "config", ".", "MODEL", ".", "SWIN", ".", "APE", ",", "\n", "patch_norm", "=", "config", ".", "MODEL", ".", "SWIN", ".", "PATCH_NORM", ",", "\n", "out_indices", "=", "(", "2", ",", ")", ",", "\n", "use_checkpoint", "=", "config", ".", "TRAIN", ".", "USE_CHECKPOINT", ")", "\n", "return", "model", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_s.STARKS.__init__": [[17, 39], ["torch.nn.Module.__init__", "torch.nn.Embedding", "torch.nn.Conv2d", "int", "int"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["# template and search region", "\n", "params", ".", "template_factor", "=", "cfg", ".", "TEST", ".", "TEMPLATE_FACTOR", "\n", "params", ".", "template_size", "=", "cfg", ".", "TEST", ".", "TEMPLATE_SIZE", "\n", "params", ".", "search_factor", "=", "cfg", ".", "TEST", ".", "SEARCH_FACTOR", "\n", "params", ".", "search_size", "=", "cfg", ".", "TEST", ".", "SEARCH_SIZE", "\n", "\n", "# Network checkpoint path", "\n", "params", ".", "checkpoint", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "\"checkpoints/train/stark_s/%s/STARKS_ep%04d.pth.tar\"", "%", "\n", "(", "yaml_name", ",", "cfg", ".", "TEST", ".", "EPOCH", ")", ")", "\n", "\n", "# whether to save boxes from all queries", "\n", "params", ".", "save_all_boxes", "=", "False", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_s.STARKS.forward": [[40, 47], ["stark_s.STARKS.forward_backbone", "stark_s.STARKS.forward_transformer"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt_new.forward_backbone", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.forward_transformer"], []], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_s.STARKS.forward_backbone": [[48, 58], ["isinstance", "stark_s.STARKS.backbone", "stark_s.STARKS.adjust"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.adjust"], []], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_s.STARKS.forward_transformer": [[59, 68], ["stark_s.STARKS.transformer", "stark_s.STARKS.forward_box_head", "ValueError"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.forward_box_head"], []], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_s.STARKS.forward_box_head": [[69, 93], ["memory[].transpose", "hs.squeeze().transpose", "torch.matmul", "opt.size", "opt.view", "lib.utils.box_ops.box_xyxy_to_cxcywh", "stark_s.STARKS.view", "stark_s.STARKS.box_head", "stark_s.STARKS.box_head().sigmoid", "hs.squeeze", "stark_s.STARKS._set_aux_loss", "stark_s.STARKS.box_head", "memory[].transpose.unsqueeze", "torch.matmul.unsqueeze"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.box_xyxy_to_cxcywh", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_s.STARKS._set_aux_loss"], []], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_s.STARKS.adjust": [[94, 106], ["output_back[].decompose", "stark_s.STARKS.bottleneck", "stark_s.STARKS.flatten().permute", "pos_embed[].flatten().permute", "mask.flatten", "stark_s.STARKS.flatten", "pos_embed[].flatten"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.NestedTensor.decompose"], []], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_s.STARKS._set_aux_loss": [[107, 114], ["None"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_s.build_starks": [[116, 130], ["backbone.build_backbone", "transformer.build_transformer", "head.build_box_head", "stark_s.STARKS"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone.build_backbone", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.build_transformer", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.build_box_head"], []], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_st.STARKST.__init__": [[12, 24], ["lib.models.stark.stark_s.STARKS.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["yaml_file", "=", "os", ".", "path", ".", "join", "(", "prj_dir", ",", "'experiments/stark_st2/%s.yaml'", "%", "yaml_name", ")", "\n", "update_config_from_file", "(", "yaml_file", ")", "\n", "params", ".", "cfg", "=", "cfg", "\n", "print", "(", "\"test config: \"", ",", "cfg", ")", "\n", "\n", "# template and search region", "\n", "params", ".", "template_factor", "=", "cfg", ".", "TEST", ".", "TEMPLATE_FACTOR", "\n", "params", ".", "template_size", "=", "cfg", ".", "TEST", ".", "TEMPLATE_SIZE", "\n", "params", ".", "search_factor", "=", "cfg", ".", "TEST", ".", "SEARCH_FACTOR", "\n", "params", ".", "search_size", "=", "cfg", ".", "TEST", ".", "SEARCH_SIZE", "\n", "\n", "# Network checkpoint path", "\n", "params", ".", "checkpoint", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "\"checkpoints/train/stark_st2/%s/STARKST_ep%04d.pth.tar\"", "%", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_st.STARKST.forward": [[25, 32], ["stark_st.STARKST.forward_backbone", "stark_st.STARKST.forward_transformer"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt_new.forward_backbone", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.forward_transformer"], ["(", "yaml_name", ",", "cfg", ".", "TEST", ".", "EPOCH", ")", ")", "\n", "\n", "# whether to save boxes from all queries", "\n", "params", ".", "save_all_boxes", "=", "False", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_st.STARKST.forward_transformer": [[33, 42], ["stark_st.STARKST.transformer", "stark_st.STARKST.forward_head", "ValueError"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_st.STARKST.forward_head"], []], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_st.STARKST.forward_head": [[43, 59], ["out_dict.update", "stark_st.STARKST.forward_box_head", "out_dict.update", "stark_st.STARKST.cls_head"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.forward_box_head", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update"], []], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_st.build_starkst": [[61, 77], ["backbone.build_backbone", "transformer.build_transformer", "head.build_box_head", "head.MLP", "stark_st.STARKST"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone.build_backbone", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.build_transformer", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.build_box_head"], []], "home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet.ResNet.__init__": [[29, 85], ["torch.Module.__init__", "torch.Conv2d", "torch.Conv2d", "norm_layer", "torch.ReLU", "torch.ReLU", "torch.MaxPool2d", "torch.MaxPool2d", "resnet.ResNet._make_layer", "resnet.ResNet.modules", "len", "ValueError", "resnet.ResNet._make_layer", "isinstance", "resnet.ResNet.modules", "resnet.ResNet._make_layer", "torch.init.kaiming_normal_", "torch.init.kaiming_normal_", "isinstance", "isinstance", "resnet.ResNet._make_layer", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "isinstance", "torch.AdaptiveAvgPool2d", "torch.AdaptiveAvgPool2d", "torch.Linear", "torch.Linear", "torch.init.constant_", "torch.init.constant_"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._make_layer", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._make_layer", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._make_layer", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._make_layer"], ["    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", "=", "1000", ",", "zero_init_residual", "=", "False", ",", "\n", "groups", "=", "1", ",", "width_per_group", "=", "64", ",", "replace_stride_with_dilation", "=", "None", ",", "\n", "norm_layer", "=", "None", ",", "last_layer", "=", "None", ")", ":", "\n", "        ", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n", "assert", "last_layer", "in", "[", "'layer1'", ",", "'layer2'", ",", "'layer3'", ",", "'layer4'", ",", "'fc'", "]", "\n", "self", ".", "last_layer", "=", "last_layer", "\n", "if", "norm_layer", "is", "None", ":", "\n", "            ", "norm_layer", "=", "nn", ".", "BatchNorm2d", "\n", "", "self", ".", "_norm_layer", "=", "norm_layer", "\n", "\n", "self", ".", "inplanes", "=", "64", "\n", "self", ".", "dilation", "=", "1", "\n", "if", "replace_stride_with_dilation", "is", "None", ":", "\n", "# each element in the tuple indicates if we should replace", "\n", "# the 2x2 stride with a dilated convolution instead", "\n", "            ", "replace_stride_with_dilation", "=", "[", "False", ",", "False", ",", "False", "]", "\n", "", "if", "len", "(", "replace_stride_with_dilation", ")", "!=", "3", ":", "\n", "            ", "raise", "ValueError", "(", "\"replace_stride_with_dilation should be None \"", "\n", "\"or a 3-element tuple, got {}\"", ".", "format", "(", "replace_stride_with_dilation", ")", ")", "\n", "", "self", ".", "groups", "=", "groups", "\n", "self", ".", "base_width", "=", "width_per_group", "\n", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "3", ",", "self", ".", "inplanes", ",", "kernel_size", "=", "7", ",", "stride", "=", "2", ",", "padding", "=", "3", ",", "\n", "bias", "=", "False", ")", "\n", "self", ".", "bn1", "=", "norm_layer", "(", "self", ".", "inplanes", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ")", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "if", "self", ".", "last_layer", "!=", "'layer1'", ":", "\n", "            ", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ",", "\n", "dilate", "=", "replace_stride_with_dilation", "[", "0", "]", ")", "\n", "if", "self", ".", "last_layer", "!=", "'layer2'", ":", "\n", "                ", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "2", ",", "\n", "dilate", "=", "replace_stride_with_dilation", "[", "1", "]", ")", "\n", "if", "self", ".", "last_layer", "!=", "'layer3'", ":", "\n", "                    ", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "2", ",", "\n", "dilate", "=", "replace_stride_with_dilation", "[", "2", "]", ")", "\n", "if", "self", ".", "last_layer", "!=", "'layer4'", ":", "\n", "                        ", "self", ".", "avgpool", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "(", "1", ",", "1", ")", ")", "\n", "self", ".", "fc", "=", "nn", ".", "Linear", "(", "512", "*", "block", ".", "expansion", ",", "num_classes", ")", "\n", "\n", "", "", "", "", "for", "m", "in", "self", ".", "modules", "(", ")", ":", "\n", "            ", "if", "isinstance", "(", "m", ",", "nn", ".", "Conv2d", ")", ":", "\n", "                ", "nn", ".", "init", ".", "kaiming_normal_", "(", "m", ".", "weight", ",", "mode", "=", "'fan_out'", ",", "nonlinearity", "=", "'relu'", ")", "\n", "", "elif", "isinstance", "(", "m", ",", "(", "nn", ".", "BatchNorm2d", ",", "nn", ".", "GroupNorm", ")", ")", ":", "\n", "                ", "nn", ".", "init", ".", "constant_", "(", "m", ".", "weight", ",", "1", ")", "\n", "nn", ".", "init", ".", "constant_", "(", "m", ".", "bias", ",", "0", ")", "\n", "\n", "# Zero-initialize the last BN in each residual branch,", "\n", "# so that the residual branch starts with zeros, and each residual block behaves like an identity.", "\n", "# This improves the model by 0.2~0.3% according to https://arxiv.org/abs/1706.02677", "\n", "", "", "if", "zero_init_residual", ":", "\n", "            ", "for", "m", "in", "self", ".", "modules", "(", ")", ":", "\n", "                ", "if", "isinstance", "(", "m", ",", "Bottleneck", ")", ":", "\n", "                    ", "nn", ".", "init", ".", "constant_", "(", "m", ".", "bn3", ".", "weight", ",", "0", ")", "\n", "", "elif", "isinstance", "(", "m", ",", "BasicBlock", ")", ":", "\n", "                    ", "nn", ".", "init", ".", "constant_", "(", "m", ".", "bn2", ".", "weight", ",", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet.ResNet._make_layer": [[86, 109], ["layers.append", "range", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "block", "layers.append", "torchvision.models.resnet.conv1x1", "norm_layer", "block"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv1x1"], ["", "", "", "", "def", "_make_layer", "(", "self", ",", "block", ",", "planes", ",", "blocks", ",", "stride", "=", "1", ",", "dilate", "=", "False", ")", ":", "\n", "        ", "norm_layer", "=", "self", ".", "_norm_layer", "\n", "downsample", "=", "None", "\n", "previous_dilation", "=", "self", ".", "dilation", "\n", "if", "dilate", ":", "\n", "            ", "self", ".", "dilation", "*=", "stride", "\n", "stride", "=", "1", "\n", "", "if", "stride", "!=", "1", "or", "self", ".", "inplanes", "!=", "planes", "*", "block", ".", "expansion", ":", "\n", "            ", "downsample", "=", "nn", ".", "Sequential", "(", "\n", "conv1x1", "(", "self", ".", "inplanes", ",", "planes", "*", "block", ".", "expansion", ",", "stride", ")", ",", "\n", "norm_layer", "(", "planes", "*", "block", ".", "expansion", ")", ",", "\n", ")", "\n", "\n", "", "layers", "=", "[", "]", "\n", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "stride", ",", "downsample", ",", "self", ".", "groups", ",", "\n", "self", ".", "base_width", ",", "previous_dilation", ",", "norm_layer", ")", ")", "\n", "self", ".", "inplanes", "=", "planes", "*", "block", ".", "expansion", "\n", "for", "_", "in", "range", "(", "1", ",", "blocks", ")", ":", "\n", "            ", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "groups", "=", "self", ".", "groups", ",", "\n", "base_width", "=", "self", ".", "base_width", ",", "dilation", "=", "self", ".", "dilation", ",", "\n", "norm_layer", "=", "norm_layer", ")", ")", "\n", "\n", "", "return", "nn", ".", "Sequential", "(", "*", "layers", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet.ResNet._forward_impl": [[110, 130], ["resnet.ResNet.conv1", "resnet.ResNet.bn1", "resnet.ResNet.relu", "resnet.ResNet.maxpool", "resnet.ResNet.layer1", "resnet.ResNet.layer2", "resnet.ResNet.layer3", "resnet.ResNet.layer4", "resnet.ResNet.avgpool", "torch.flatten", "torch.flatten", "torch.flatten", "torch.flatten", "resnet.ResNet.fc"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu"], ["", "def", "_forward_impl", "(", "self", ",", "x", ")", ":", "\n", "# See note [TorchScript super()]", "\n", "        ", "x", "=", "self", ".", "conv1", "(", "x", ")", "\n", "x", "=", "self", ".", "bn1", "(", "x", ")", "\n", "x", "=", "self", ".", "relu", "(", "x", ")", "\n", "x", "=", "self", ".", "maxpool", "(", "x", ")", "\n", "\n", "x", "=", "self", ".", "layer1", "(", "x", ")", "\n", "if", "self", ".", "last_layer", "!=", "'layer1'", ":", "\n", "            ", "x", "=", "self", ".", "layer2", "(", "x", ")", "\n", "if", "self", ".", "last_layer", "!=", "'layer2'", ":", "\n", "                ", "x", "=", "self", ".", "layer3", "(", "x", ")", "\n", "if", "self", ".", "last_layer", "!=", "'layer3'", ":", "\n", "                    ", "x", "=", "self", ".", "layer4", "(", "x", ")", "\n", "if", "self", ".", "last_layer", "!=", "'layer4'", ":", "\n", "                        ", "x", "=", "self", ".", "avgpool", "(", "x", ")", "\n", "x", "=", "torch", ".", "flatten", "(", "x", ",", "1", ")", "\n", "x", "=", "self", ".", "fc", "(", "x", ")", "\n", "\n", "", "", "", "", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet.ResNet.forward": [[131, 133], ["resnet.ResNet._forward_impl"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet.ResNet._forward_impl"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "self", ".", "_forward_impl", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet._resnet": [[135, 153], ["resnet.ResNet", "torchvision.models.utils.load_state_dict_from_url", "ResNet.load_state_dict", "ResNet.load_state_dict", "torchvision.models.resnet.BasicBlock", "torchvision.models.resnet.BasicBlock", "torchvision.models.resnet.Bottleneck", "torchvision.models.resnet.Bottleneck", "torchvision.models.resnet.Bottleneck", "torchvision.models.resnet.Bottleneck", "torchvision.models.resnet.Bottleneck", "torchvision.models.resnet.Bottleneck", "torchvision.models.resnet.Bottleneck"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict"], ["", "", "def", "_resnet", "(", "arch", ",", "block", ",", "layers", ",", "pretrained", ",", "progress", ",", "**", "kwargs", ")", ":", "\n", "    ", "model", "=", "ResNet", "(", "block", ",", "layers", ",", "**", "kwargs", ")", "\n", "if", "pretrained", ":", "\n", "        ", "state_dict", "=", "load_state_dict_from_url", "(", "model_urls", "[", "arch", "]", ",", "\n", "progress", "=", "progress", ")", "\n", "try", ":", "\n", "            ", "model", ".", "load_state_dict", "(", "state_dict", ")", "\n", "", "except", ":", "\n", "# model_keys = model.state_dict().keys()", "\n", "# checkpoint_keys = state_dict.keys()", "\n", "# for key in model_keys:", "\n", "#     if key not in checkpoint_keys:", "\n", "#         print(\"key %s is not found in the checkpoint.\" % key)", "\n", "# for key in checkpoint_keys:", "\n", "#     if key not in model_keys:", "\n", "#         print(\"the checkpoint contains additional key %s\" % key)", "\n", "            ", "model", ".", "load_state_dict", "(", "state_dict", ",", "strict", "=", "False", ")", "\n", "", "", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet.resnet18": [[155, 165], ["resnet._resnet"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet._resnet"], ["", "def", "resnet18", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    ", "r\"\"\"ResNet-18 model from\n    `\"Deep Residual Learning for Image Recognition\" <https://arxiv.org/pdf/1512.03385.pdf>`_\n\n    Args:\n        pretrained (bool): If True, returns a model pre-trained on ImageNet\n        progress (bool): If True, displays a progress bar of the download to stderr\n    \"\"\"", "\n", "return", "_resnet", "(", "'resnet18'", ",", "BasicBlock", ",", "[", "2", ",", "2", ",", "2", ",", "2", "]", ",", "pretrained", ",", "progress", ",", "\n", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet.resnet34": [[167, 177], ["resnet._resnet"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet._resnet"], ["", "def", "resnet34", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    ", "r\"\"\"ResNet-34 model from\n    `\"Deep Residual Learning for Image Recognition\" <https://arxiv.org/pdf/1512.03385.pdf>`_\n\n    Args:\n        pretrained (bool): If True, returns a model pre-trained on ImageNet\n        progress (bool): If True, displays a progress bar of the download to stderr\n    \"\"\"", "\n", "return", "_resnet", "(", "'resnet34'", ",", "BasicBlock", ",", "[", "3", ",", "4", ",", "6", ",", "3", "]", ",", "pretrained", ",", "progress", ",", "\n", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet.resnet50": [[179, 189], ["resnet._resnet"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet._resnet"], ["", "def", "resnet50", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    ", "r\"\"\"ResNet-50 model from\n    `\"Deep Residual Learning for Image Recognition\" <https://arxiv.org/pdf/1512.03385.pdf>`_\n\n    Args:\n        pretrained (bool): If True, returns a model pre-trained on ImageNet\n        progress (bool): If True, displays a progress bar of the download to stderr\n    \"\"\"", "\n", "return", "_resnet", "(", "'resnet50'", ",", "Bottleneck", ",", "[", "3", ",", "4", ",", "6", ",", "3", "]", ",", "pretrained", ",", "progress", ",", "\n", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet.resnet101": [[191, 201], ["resnet._resnet"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet._resnet"], ["", "def", "resnet101", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    ", "r\"\"\"ResNet-101 model from\n    `\"Deep Residual Learning for Image Recognition\" <https://arxiv.org/pdf/1512.03385.pdf>`_\n\n    Args:\n        pretrained (bool): If True, returns a model pre-trained on ImageNet\n        progress (bool): If True, displays a progress bar of the download to stderr\n    \"\"\"", "\n", "return", "_resnet", "(", "'resnet101'", ",", "Bottleneck", ",", "[", "3", ",", "4", ",", "23", ",", "3", "]", ",", "pretrained", ",", "progress", ",", "\n", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet.resnet152": [[203, 213], ["resnet._resnet"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet._resnet"], ["", "def", "resnet152", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    ", "r\"\"\"ResNet-152 model from\n    `\"Deep Residual Learning for Image Recognition\" <https://arxiv.org/pdf/1512.03385.pdf>`_\n\n    Args:\n        pretrained (bool): If True, returns a model pre-trained on ImageNet\n        progress (bool): If True, displays a progress bar of the download to stderr\n    \"\"\"", "\n", "return", "_resnet", "(", "'resnet152'", ",", "Bottleneck", ",", "[", "3", ",", "8", ",", "36", ",", "3", "]", ",", "pretrained", ",", "progress", ",", "\n", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet.resnext50_32x4d": [[215, 227], ["resnet._resnet"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet._resnet"], ["", "def", "resnext50_32x4d", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    ", "r\"\"\"ResNeXt-50 32x4d model from\n    `\"Aggregated Residual Transformation for Deep Neural Networks\" <https://arxiv.org/pdf/1611.05431.pdf>`_\n\n    Args:\n        pretrained (bool): If True, returns a model pre-trained on ImageNet\n        progress (bool): If True, displays a progress bar of the download to stderr\n    \"\"\"", "\n", "kwargs", "[", "'groups'", "]", "=", "32", "\n", "kwargs", "[", "'width_per_group'", "]", "=", "4", "\n", "return", "_resnet", "(", "'resnext50_32x4d'", ",", "Bottleneck", ",", "[", "3", ",", "4", ",", "6", ",", "3", "]", ",", "\n", "pretrained", ",", "progress", ",", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet.resnext101_32x8d": [[229, 241], ["resnet._resnet"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet._resnet"], ["", "def", "resnext101_32x8d", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    ", "r\"\"\"ResNeXt-101 32x8d model from\n    `\"Aggregated Residual Transformation for Deep Neural Networks\" <https://arxiv.org/pdf/1611.05431.pdf>`_\n\n    Args:\n        pretrained (bool): If True, returns a model pre-trained on ImageNet\n        progress (bool): If True, displays a progress bar of the download to stderr\n    \"\"\"", "\n", "kwargs", "[", "'groups'", "]", "=", "32", "\n", "kwargs", "[", "'width_per_group'", "]", "=", "8", "\n", "return", "_resnet", "(", "'resnext101_32x8d'", ",", "Bottleneck", ",", "[", "3", ",", "4", ",", "23", ",", "3", "]", ",", "\n", "pretrained", ",", "progress", ",", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet.wide_resnet50_2": [[243, 259], ["resnet._resnet"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet._resnet"], ["", "def", "wide_resnet50_2", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    ", "r\"\"\"Wide ResNet-50-2 model from\n    `\"Wide Residual Networks\" <https://arxiv.org/pdf/1605.07146.pdf>`_\n\n    The model is the same as ResNet except for the bottleneck number of channels\n    which is twice larger in every block. The number of channels in outer 1x1\n    convolutions is the same, e.g. last block in ResNet-50 has 2048-512-2048\n    channels, and in Wide ResNet-50-2 has 2048-1024-2048.\n\n    Args:\n        pretrained (bool): If True, returns a model pre-trained on ImageNet\n        progress (bool): If True, displays a progress bar of the download to stderr\n    \"\"\"", "\n", "kwargs", "[", "'width_per_group'", "]", "=", "64", "*", "2", "\n", "return", "_resnet", "(", "'wide_resnet50_2'", ",", "Bottleneck", ",", "[", "3", ",", "4", ",", "6", ",", "3", "]", ",", "\n", "pretrained", ",", "progress", ",", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet.wide_resnet101_2": [[261, 277], ["resnet._resnet"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.resnet._resnet"], ["", "def", "wide_resnet101_2", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    ", "r\"\"\"Wide ResNet-101-2 model from\n    `\"Wide Residual Networks\" <https://arxiv.org/pdf/1605.07146.pdf>`_\n\n    The model is the same as ResNet except for the bottleneck number of channels\n    which is twice larger in every block. The number of channels in outer 1x1\n    convolutions is the same, e.g. last block in ResNet-50 has 2048-512-2048\n    channels, and in Wide ResNet-50-2 has 2048-1024-2048.\n\n    Args:\n        pretrained (bool): If True, returns a model pre-trained on ImageNet\n        progress (bool): If True, displays a progress bar of the download to stderr\n    \"\"\"", "\n", "kwargs", "[", "'width_per_group'", "]", "=", "64", "*", "2", "\n", "return", "_resnet", "(", "'wide_resnet101_2'", ",", "Bottleneck", ",", "[", "3", ",", "4", ",", "23", ",", "3", "]", ",", "\n", "pretrained", ",", "progress", ",", "**", "kwargs", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor.__init__": [[28, 55], ["torch.Module.__init__", "head.conv", "head.conv", "head.conv", "head.conv", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "head.conv", "head.conv", "head.conv", "head.conv", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "head.Corner_Predictor.indice.repeat().view().float().cuda", "head.Corner_Predictor.indice.repeat().view().float().cuda", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "head.Corner_Predictor.indice.repeat().view().float", "head.Corner_Predictor.indice.repeat().view().float", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "head.Corner_Predictor.indice.repeat().view", "head.Corner_Predictor.indice.repeat().view", "head.Corner_Predictor.indice.repeat", "head.Corner_Predictor.indice.repeat"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv"], ["def", "__init__", "(", "self", ",", "inplanes", "=", "64", ",", "channel", "=", "256", ",", "feat_sz", "=", "20", ",", "stride", "=", "16", ",", "freeze_bn", "=", "False", ")", ":", "\n", "        ", "super", "(", "Corner_Predictor", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "feat_sz", "=", "feat_sz", "\n", "self", ".", "stride", "=", "stride", "\n", "self", ".", "img_sz", "=", "self", ".", "feat_sz", "*", "self", ".", "stride", "\n", "'''top-left corner'''", "\n", "self", ".", "conv1_tl", "=", "conv", "(", "inplanes", ",", "channel", ",", "freeze_bn", "=", "freeze_bn", ")", "\n", "self", ".", "conv2_tl", "=", "conv", "(", "channel", ",", "channel", "//", "2", ",", "freeze_bn", "=", "freeze_bn", ")", "\n", "self", ".", "conv3_tl", "=", "conv", "(", "channel", "//", "2", ",", "channel", "//", "4", ",", "freeze_bn", "=", "freeze_bn", ")", "\n", "self", ".", "conv4_tl", "=", "conv", "(", "channel", "//", "4", ",", "channel", "//", "8", ",", "freeze_bn", "=", "freeze_bn", ")", "\n", "self", ".", "conv5_tl", "=", "nn", ".", "Conv2d", "(", "channel", "//", "8", ",", "1", ",", "kernel_size", "=", "1", ")", "\n", "\n", "'''bottom-right corner'''", "\n", "self", ".", "conv1_br", "=", "conv", "(", "inplanes", ",", "channel", ",", "freeze_bn", "=", "freeze_bn", ")", "\n", "self", ".", "conv2_br", "=", "conv", "(", "channel", ",", "channel", "//", "2", ",", "freeze_bn", "=", "freeze_bn", ")", "\n", "self", ".", "conv3_br", "=", "conv", "(", "channel", "//", "2", ",", "channel", "//", "4", ",", "freeze_bn", "=", "freeze_bn", ")", "\n", "self", ".", "conv4_br", "=", "conv", "(", "channel", "//", "4", ",", "channel", "//", "8", ",", "freeze_bn", "=", "freeze_bn", ")", "\n", "self", ".", "conv5_br", "=", "nn", ".", "Conv2d", "(", "channel", "//", "8", ",", "1", ",", "kernel_size", "=", "1", ")", "\n", "\n", "'''about coordinates and indexs'''", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "self", ".", "indice", "=", "torch", ".", "arange", "(", "0", ",", "self", ".", "feat_sz", ")", ".", "view", "(", "-", "1", ",", "1", ")", "*", "self", ".", "stride", "\n", "# generate mesh-grid", "\n", "self", ".", "coord_x", "=", "self", ".", "indice", ".", "repeat", "(", "(", "self", ".", "feat_sz", ",", "1", ")", ")", ".", "view", "(", "(", "self", ".", "feat_sz", "*", "self", ".", "feat_sz", ",", ")", ")", ".", "float", "(", ")", ".", "cuda", "(", ")", "\n", "self", ".", "coord_y", "=", "self", ".", "indice", ".", "repeat", "(", "(", "1", ",", "self", ".", "feat_sz", ")", ")", ".", "view", "(", "(", "self", ".", "feat_sz", "*", "self", ".", "feat_sz", ",", ")", ")", ".", "float", "(", ")", ".", "cuda", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor.forward": [[56, 67], ["head.Corner_Predictor.get_score_map", "head.Corner_Predictor.soft_argmax", "head.Corner_Predictor.soft_argmax", "head.Corner_Predictor.soft_argmax", "head.Corner_Predictor.soft_argmax", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.get_score_map", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.soft_argmax", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.soft_argmax", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.soft_argmax", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.soft_argmax"], ["", "", "def", "forward", "(", "self", ",", "x", ",", "return_dist", "=", "False", ",", "softmax", "=", "True", ")", ":", "\n", "        ", "\"\"\" Forward pass with input x. \"\"\"", "\n", "score_map_tl", ",", "score_map_br", "=", "self", ".", "get_score_map", "(", "x", ")", "\n", "if", "return_dist", ":", "\n", "            ", "coorx_tl", ",", "coory_tl", ",", "prob_vec_tl", "=", "self", ".", "soft_argmax", "(", "score_map_tl", ",", "return_dist", "=", "True", ",", "softmax", "=", "softmax", ")", "\n", "coorx_br", ",", "coory_br", ",", "prob_vec_br", "=", "self", ".", "soft_argmax", "(", "score_map_br", ",", "return_dist", "=", "True", ",", "softmax", "=", "softmax", ")", "\n", "return", "torch", ".", "stack", "(", "(", "coorx_tl", ",", "coory_tl", ",", "coorx_br", ",", "coory_br", ")", ",", "dim", "=", "1", ")", "/", "self", ".", "img_sz", ",", "prob_vec_tl", ",", "prob_vec_br", "\n", "", "else", ":", "\n", "            ", "coorx_tl", ",", "coory_tl", "=", "self", ".", "soft_argmax", "(", "score_map_tl", ")", "\n", "coorx_br", ",", "coory_br", "=", "self", ".", "soft_argmax", "(", "score_map_br", ")", "\n", "return", "torch", ".", "stack", "(", "(", "coorx_tl", ",", "coory_tl", ",", "coorx_br", ",", "coory_br", ")", ",", "dim", "=", "1", ")", "/", "self", ".", "img_sz", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor.get_score_map": [[68, 83], ["head.Corner_Predictor.conv1_tl", "head.Corner_Predictor.conv2_tl", "head.Corner_Predictor.conv3_tl", "head.Corner_Predictor.conv4_tl", "head.Corner_Predictor.conv5_tl", "head.Corner_Predictor.conv1_br", "head.Corner_Predictor.conv2_br", "head.Corner_Predictor.conv3_br", "head.Corner_Predictor.conv4_br", "head.Corner_Predictor.conv5_br"], "methods", ["None"], ["", "", "def", "get_score_map", "(", "self", ",", "x", ")", ":", "\n", "# top-left branch", "\n", "        ", "x_tl1", "=", "self", ".", "conv1_tl", "(", "x", ")", "\n", "x_tl2", "=", "self", ".", "conv2_tl", "(", "x_tl1", ")", "\n", "x_tl3", "=", "self", ".", "conv3_tl", "(", "x_tl2", ")", "\n", "x_tl4", "=", "self", ".", "conv4_tl", "(", "x_tl3", ")", "\n", "score_map_tl", "=", "self", ".", "conv5_tl", "(", "x_tl4", ")", "\n", "\n", "# bottom-right branch", "\n", "x_br1", "=", "self", ".", "conv1_br", "(", "x", ")", "\n", "x_br2", "=", "self", ".", "conv2_br", "(", "x_br1", ")", "\n", "x_br3", "=", "self", ".", "conv3_br", "(", "x_br2", ")", "\n", "x_br4", "=", "self", ".", "conv4_br", "(", "x_br3", ")", "\n", "score_map_br", "=", "self", ".", "conv5_br", "(", "x_br4", ")", "\n", "return", "score_map_tl", ",", "score_map_br", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor.soft_argmax": [[84, 97], ["score_map.view", "torch.functional.softmax", "torch.functional.softmax", "torch.functional.softmax", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum"], "methods", ["None"], ["", "def", "soft_argmax", "(", "self", ",", "score_map", ",", "return_dist", "=", "False", ",", "softmax", "=", "True", ")", ":", "\n", "        ", "\"\"\" get soft-argmax coordinate for a given heatmap \"\"\"", "\n", "score_vec", "=", "score_map", ".", "view", "(", "(", "-", "1", ",", "self", ".", "feat_sz", "*", "self", ".", "feat_sz", ")", ")", "# (batch, feat_sz * feat_sz)", "\n", "prob_vec", "=", "nn", ".", "functional", ".", "softmax", "(", "score_vec", ",", "dim", "=", "1", ")", "\n", "exp_x", "=", "torch", ".", "sum", "(", "(", "self", ".", "coord_x", "*", "prob_vec", ")", ",", "dim", "=", "1", ")", "\n", "exp_y", "=", "torch", ".", "sum", "(", "(", "self", ".", "coord_y", "*", "prob_vec", ")", ",", "dim", "=", "1", ")", "\n", "if", "return_dist", ":", "\n", "            ", "if", "softmax", ":", "\n", "                ", "return", "exp_x", ",", "exp_y", ",", "prob_vec", "\n", "", "else", ":", "\n", "                ", "return", "exp_x", ",", "exp_y", ",", "score_vec", "\n", "", "", "else", ":", "\n", "            ", "return", "exp_x", ",", "exp_y", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite.__init__": [[102, 122], ["torch.Module.__init__", "torch.Sequential", "torch.Sequential", "torch.Sequential", "head.conv", "head.conv", "head.conv", "head.conv", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "head.Corner_Predictor_Lite.indice.repeat().view().float().cuda", "head.Corner_Predictor_Lite.indice.repeat().view().float().cuda", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "head.Corner_Predictor_Lite.indice.repeat().view().float", "head.Corner_Predictor_Lite.indice.repeat().view().float", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "head.Corner_Predictor_Lite.indice.repeat().view", "head.Corner_Predictor_Lite.indice.repeat().view", "head.Corner_Predictor_Lite.indice.repeat", "head.Corner_Predictor_Lite.indice.repeat"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv"], ["def", "__init__", "(", "self", ",", "inplanes", "=", "64", ",", "channel", "=", "256", ",", "feat_sz", "=", "20", ",", "stride", "=", "16", ")", ":", "\n", "        ", "super", "(", "Corner_Predictor_Lite", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "feat_sz", "=", "feat_sz", "\n", "self", ".", "stride", "=", "stride", "\n", "self", ".", "img_sz", "=", "self", ".", "feat_sz", "*", "self", ".", "stride", "\n", "'''convolution tower for two corners'''", "\n", "self", ".", "conv_tower", "=", "nn", ".", "Sequential", "(", "conv", "(", "inplanes", ",", "channel", ")", ",", "\n", "conv", "(", "channel", ",", "channel", "//", "2", ")", ",", "\n", "conv", "(", "channel", "//", "2", ",", "channel", "//", "4", ")", ",", "\n", "conv", "(", "channel", "//", "4", ",", "channel", "//", "8", ")", ",", "\n", "nn", ".", "Conv2d", "(", "channel", "//", "8", ",", "2", ",", "kernel_size", "=", "3", ",", "padding", "=", "1", ")", ")", "\n", "\n", "'''about coordinates and indexs'''", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "self", ".", "indice", "=", "(", "torch", ".", "arange", "(", "0", ",", "self", ".", "feat_sz", ")", ".", "view", "(", "-", "1", ",", "1", ")", "+", "0.5", ")", "*", "self", ".", "stride", "# here we can add a 0.5", "\n", "# generate mesh-grid", "\n", "self", ".", "coord_x", "=", "self", ".", "indice", ".", "repeat", "(", "(", "self", ".", "feat_sz", ",", "1", ")", ")", ".", "view", "(", "(", "self", ".", "feat_sz", "*", "self", ".", "feat_sz", ",", ")", ")", ".", "float", "(", ")", ".", "cuda", "(", ")", "\n", "self", ".", "coord_y", "=", "self", ".", "indice", ".", "repeat", "(", "(", "1", ",", "self", ".", "feat_sz", ")", ")", ".", "view", "(", "(", "self", ".", "feat_sz", "*", "self", ".", "feat_sz", ",", ")", ")", ".", "float", "(", ")", ".", "cuda", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite.forward": [[123, 134], ["head.Corner_Predictor_Lite.get_score_map", "head.Corner_Predictor_Lite.soft_argmax", "head.Corner_Predictor_Lite.soft_argmax", "head.Corner_Predictor_Lite.soft_argmax", "head.Corner_Predictor_Lite.soft_argmax", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.get_score_map", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.soft_argmax", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.soft_argmax", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.soft_argmax", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.soft_argmax"], ["", "", "def", "forward", "(", "self", ",", "x", ",", "return_dist", "=", "False", ",", "softmax", "=", "True", ")", ":", "\n", "        ", "\"\"\" Forward pass with input x. \"\"\"", "\n", "score_map_tl", ",", "score_map_br", "=", "self", ".", "get_score_map", "(", "x", ")", "\n", "if", "return_dist", ":", "\n", "            ", "coorx_tl", ",", "coory_tl", ",", "prob_vec_tl", "=", "self", ".", "soft_argmax", "(", "score_map_tl", ",", "return_dist", "=", "True", ",", "softmax", "=", "softmax", ")", "\n", "coorx_br", ",", "coory_br", ",", "prob_vec_br", "=", "self", ".", "soft_argmax", "(", "score_map_br", ",", "return_dist", "=", "True", ",", "softmax", "=", "softmax", ")", "\n", "return", "torch", ".", "stack", "(", "(", "coorx_tl", ",", "coory_tl", ",", "coorx_br", ",", "coory_br", ")", ",", "dim", "=", "1", ")", "/", "self", ".", "img_sz", ",", "prob_vec_tl", ",", "prob_vec_br", "\n", "", "else", ":", "\n", "            ", "coorx_tl", ",", "coory_tl", "=", "self", ".", "soft_argmax", "(", "score_map_tl", ")", "\n", "coorx_br", ",", "coory_br", "=", "self", ".", "soft_argmax", "(", "score_map_br", ")", "\n", "return", "torch", ".", "stack", "(", "(", "coorx_tl", ",", "coory_tl", ",", "coorx_br", ",", "coory_br", ")", ",", "dim", "=", "1", ")", "/", "self", ".", "img_sz", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite.get_score_map": [[135, 138], ["head.Corner_Predictor_Lite.conv_tower"], "methods", ["None"], ["", "", "def", "get_score_map", "(", "self", ",", "x", ")", ":", "\n", "        ", "score_map", "=", "self", ".", "conv_tower", "(", "x", ")", "# (B,2,H,W)", "\n", "return", "score_map", "[", ":", ",", "0", ",", ":", ",", ":", "]", ",", "score_map", "[", ":", ",", "1", ",", ":", ",", ":", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite.soft_argmax": [[139, 152], ["score_map.view", "torch.functional.softmax", "torch.functional.softmax", "torch.functional.softmax", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum"], "methods", ["None"], ["", "def", "soft_argmax", "(", "self", ",", "score_map", ",", "return_dist", "=", "False", ",", "softmax", "=", "True", ")", ":", "\n", "        ", "\"\"\" get soft-argmax coordinate for a given heatmap \"\"\"", "\n", "score_vec", "=", "score_map", ".", "view", "(", "(", "-", "1", ",", "self", ".", "feat_sz", "*", "self", ".", "feat_sz", ")", ")", "# (batch, feat_sz * feat_sz)", "\n", "prob_vec", "=", "nn", ".", "functional", ".", "softmax", "(", "score_vec", ",", "dim", "=", "1", ")", "\n", "exp_x", "=", "torch", ".", "sum", "(", "(", "self", ".", "coord_x", "*", "prob_vec", ")", ",", "dim", "=", "1", ")", "\n", "exp_y", "=", "torch", ".", "sum", "(", "(", "self", ".", "coord_y", "*", "prob_vec", ")", ",", "dim", "=", "1", ")", "\n", "if", "return_dist", ":", "\n", "            ", "if", "softmax", ":", "\n", "                ", "return", "exp_x", ",", "exp_y", ",", "prob_vec", "\n", "", "else", ":", "\n", "                ", "return", "exp_x", ",", "exp_y", ",", "score_vec", "\n", "", "", "else", ":", "\n", "            ", "return", "exp_x", ",", "exp_y", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep.__init__": [[157, 178], ["torch.Module.__init__", "torch.Sequential", "torch.Sequential", "torch.Sequential", "lib.models.stark.repvgg.RepVGGBlock", "lib.models.stark.repvgg.RepVGGBlock", "lib.models.stark.repvgg.RepVGGBlock", "lib.models.stark.repvgg.RepVGGBlock", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "head.Corner_Predictor_Lite_Rep.indice.repeat().view().float().cuda", "head.Corner_Predictor_Lite_Rep.indice.repeat().view().float().cuda", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "head.Corner_Predictor_Lite_Rep.indice.repeat().view().float", "head.Corner_Predictor_Lite_Rep.indice.repeat().view().float", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "head.Corner_Predictor_Lite_Rep.indice.repeat().view", "head.Corner_Predictor_Lite_Rep.indice.repeat().view", "head.Corner_Predictor_Lite_Rep.indice.repeat", "head.Corner_Predictor_Lite_Rep.indice.repeat"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "inplanes", "=", "64", ",", "channel", "=", "256", ",", "feat_sz", "=", "20", ",", "stride", "=", "16", ")", ":", "\n", "        ", "super", "(", "Corner_Predictor_Lite_Rep", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "feat_sz", "=", "feat_sz", "\n", "self", ".", "feat_len", "=", "feat_sz", "**", "2", "\n", "self", ".", "stride", "=", "stride", "\n", "self", ".", "img_sz", "=", "self", ".", "feat_sz", "*", "self", ".", "stride", "\n", "'''convolution tower for two corners'''", "\n", "self", ".", "conv_tower", "=", "nn", ".", "Sequential", "(", "RepVGGBlock", "(", "inplanes", ",", "channel", ",", "kernel_size", "=", "3", ",", "padding", "=", "1", ")", ",", "\n", "RepVGGBlock", "(", "channel", ",", "channel", "//", "2", ",", "kernel_size", "=", "3", ",", "padding", "=", "1", ")", ",", "\n", "RepVGGBlock", "(", "channel", "//", "2", ",", "channel", "//", "4", ",", "kernel_size", "=", "3", ",", "padding", "=", "1", ")", ",", "\n", "RepVGGBlock", "(", "channel", "//", "4", ",", "channel", "//", "8", ",", "kernel_size", "=", "3", ",", "padding", "=", "1", ")", ",", "\n", "nn", ".", "Conv2d", "(", "channel", "//", "8", ",", "2", ",", "kernel_size", "=", "3", ",", "padding", "=", "1", ")", ")", "\n", "\n", "'''about coordinates and indexs'''", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "self", ".", "indice", "=", "(", "torch", ".", "arange", "(", "0", ",", "self", ".", "feat_sz", ")", ".", "view", "(", "-", "1", ",", "1", ")", "+", "0.5", ")", "*", "self", ".", "stride", "# here we can add a 0.5", "\n", "# generate mesh-grid", "\n", "self", ".", "coord_x", "=", "self", ".", "indice", ".", "repeat", "(", "(", "self", ".", "feat_sz", ",", "1", ")", ")", ".", "view", "(", "(", "self", ".", "feat_sz", "*", "self", ".", "feat_sz", ",", ")", ")", ".", "float", "(", ")", ".", "cuda", "(", ")", "\n", "self", ".", "coord_y", "=", "self", ".", "indice", ".", "repeat", "(", "(", "1", ",", "self", ".", "feat_sz", ")", ")", ".", "view", "(", "(", "self", ".", "feat_sz", "*", "self", ".", "feat_sz", ",", ")", ")", ".", "float", "(", ")", ".", "cuda", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep.forward": [[179, 195], ["head.Corner_Predictor_Lite_Rep.get_score_map", "head.Corner_Predictor_Lite_Rep.soft_argmax", "head.Corner_Predictor_Lite_Rep.soft_argmax", "head.Corner_Predictor_Lite_Rep.soft_argmax", "head.Corner_Predictor_Lite_Rep.soft_argmax", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.get_score_map", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.soft_argmax", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.soft_argmax", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.soft_argmax", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.soft_argmax"], ["", "", "def", "forward", "(", "self", ",", "x", ",", "return_dist", "=", "False", ",", "softmax", "=", "True", ")", ":", "\n", "        ", "\"\"\" Forward pass with input x. \"\"\"", "\n", "# s = time.time()", "\n", "score_map_tl", ",", "score_map_br", "=", "self", ".", "get_score_map", "(", "x", ")", "\n", "# e1 = time.time()", "\n", "# print(\"head forward time: %.2f ms\" % ((e1-s)*1000))", "\n", "if", "return_dist", ":", "\n", "            ", "coorx_tl", ",", "coory_tl", ",", "prob_vec_tl", "=", "self", ".", "soft_argmax", "(", "score_map_tl", ",", "return_dist", "=", "True", ",", "softmax", "=", "softmax", ")", "\n", "coorx_br", ",", "coory_br", ",", "prob_vec_br", "=", "self", ".", "soft_argmax", "(", "score_map_br", ",", "return_dist", "=", "True", ",", "softmax", "=", "softmax", ")", "\n", "return", "torch", ".", "stack", "(", "(", "coorx_tl", ",", "coory_tl", ",", "coorx_br", ",", "coory_br", ")", ",", "dim", "=", "1", ")", "/", "self", ".", "img_sz", ",", "prob_vec_tl", ",", "prob_vec_br", "\n", "", "else", ":", "\n", "            ", "coorx_tl", ",", "coory_tl", "=", "self", ".", "soft_argmax", "(", "score_map_tl", ")", "\n", "coorx_br", ",", "coory_br", "=", "self", ".", "soft_argmax", "(", "score_map_br", ")", "\n", "# e2 = time.time()", "\n", "# print(\"soft-argmax time: %.2f ms\" % ((e2 - e1) * 1000))", "\n", "return", "torch", ".", "stack", "(", "(", "coorx_tl", ",", "coory_tl", ",", "coorx_br", ",", "coory_br", ")", ",", "dim", "=", "1", ")", "/", "self", ".", "img_sz", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep.get_score_map": [[196, 199], ["head.Corner_Predictor_Lite_Rep.conv_tower"], "methods", ["None"], ["", "", "def", "get_score_map", "(", "self", ",", "x", ")", ":", "\n", "        ", "score_map", "=", "self", ".", "conv_tower", "(", "x", ")", "# (B,2,H,W)", "\n", "return", "score_map", "[", ":", ",", "0", ",", ":", ",", ":", "]", ",", "score_map", "[", ":", ",", "1", ",", ":", ",", ":", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep.soft_argmax": [[200, 213], ["score_map.view", "torch.functional.softmax", "torch.functional.softmax", "torch.functional.softmax", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum"], "methods", ["None"], ["", "def", "soft_argmax", "(", "self", ",", "score_map", ",", "return_dist", "=", "False", ",", "softmax", "=", "True", ")", ":", "\n", "        ", "\"\"\" get soft-argmax coordinate for a given heatmap \"\"\"", "\n", "score_vec", "=", "score_map", ".", "view", "(", "(", "-", "1", ",", "self", ".", "feat_len", ")", ")", "# (batch, feat_sz * feat_sz)", "\n", "prob_vec", "=", "nn", ".", "functional", ".", "softmax", "(", "score_vec", ",", "dim", "=", "1", ")", "\n", "exp_x", "=", "torch", ".", "sum", "(", "(", "self", ".", "coord_x", "*", "prob_vec", ")", ",", "dim", "=", "1", ")", "\n", "exp_y", "=", "torch", ".", "sum", "(", "(", "self", ".", "coord_y", "*", "prob_vec", ")", ",", "dim", "=", "1", ")", "\n", "if", "return_dist", ":", "\n", "            ", "if", "softmax", ":", "\n", "                ", "return", "exp_x", ",", "exp_y", ",", "prob_vec", "\n", "", "else", ":", "\n", "                ", "return", "exp_x", ",", "exp_y", ",", "score_vec", "\n", "", "", "else", ":", "\n", "            ", "return", "exp_x", ",", "exp_y", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.__init__": [[218, 237], ["torch.Module.__init__", "torch.Sequential", "torch.Sequential", "torch.Sequential", "lib.models.stark.repvgg.RepVGGBlock", "lib.models.stark.repvgg.RepVGGBlock", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "head.Corner_Predictor_Lite_Rep_v2.indice.repeat().view().float().cuda", "head.Corner_Predictor_Lite_Rep_v2.indice.repeat().view().float().cuda", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "head.Corner_Predictor_Lite_Rep_v2.indice.repeat().view().float", "head.Corner_Predictor_Lite_Rep_v2.indice.repeat().view().float", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "head.Corner_Predictor_Lite_Rep_v2.indice.repeat().view", "head.Corner_Predictor_Lite_Rep_v2.indice.repeat().view", "head.Corner_Predictor_Lite_Rep_v2.indice.repeat", "head.Corner_Predictor_Lite_Rep_v2.indice.repeat"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "inplanes", "=", "128", ",", "channel", "=", "128", ",", "feat_sz", "=", "20", ",", "stride", "=", "16", ")", ":", "\n", "        ", "super", "(", "Corner_Predictor_Lite_Rep_v2", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "feat_sz", "=", "feat_sz", "\n", "self", ".", "feat_len", "=", "feat_sz", "**", "2", "\n", "self", ".", "stride", "=", "stride", "\n", "self", ".", "img_sz", "=", "self", ".", "feat_sz", "*", "self", ".", "stride", "\n", "'''convolution tower for two corners'''", "\n", "self", ".", "conv_tower", "=", "nn", ".", "Sequential", "(", "RepVGGBlock", "(", "inplanes", ",", "channel", ",", "kernel_size", "=", "3", ",", "padding", "=", "1", ")", ",", "\n", "RepVGGBlock", "(", "channel", ",", "channel", ",", "kernel_size", "=", "3", ",", "padding", "=", "1", ")", ",", "\n", "nn", ".", "Conv2d", "(", "channel", ",", "2", ",", "kernel_size", "=", "3", ",", "padding", "=", "1", ")", ")", "\n", "\n", "'''about coordinates and indexs'''", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "self", ".", "indice", "=", "(", "torch", ".", "arange", "(", "0", ",", "self", ".", "feat_sz", ")", ".", "view", "(", "-", "1", ",", "1", ")", "+", "0.5", ")", "*", "self", ".", "stride", "# here we can add a 0.5", "\n", "# generate mesh-grid", "\n", "self", ".", "coord_x", "=", "self", ".", "indice", ".", "repeat", "(", "(", "self", ".", "feat_sz", ",", "1", ")", ")", ".", "view", "(", "(", "self", ".", "feat_sz", "*", "self", ".", "feat_sz", ",", ")", ")", ".", "float", "(", ")", ".", "cuda", "(", ")", "\n", "self", ".", "coord_y", "=", "self", ".", "indice", ".", "repeat", "(", "(", "1", ",", "self", ".", "feat_sz", ")", ")", ".", "view", "(", "(", "self", ".", "feat_sz", "*", "self", ".", "feat_sz", ",", ")", ")", ".", "float", "(", ")", ".", "cuda", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.forward": [[238, 254], ["head.Corner_Predictor_Lite_Rep_v2.get_score_map", "head.Corner_Predictor_Lite_Rep_v2.soft_argmax", "head.Corner_Predictor_Lite_Rep_v2.soft_argmax", "head.Corner_Predictor_Lite_Rep_v2.soft_argmax", "head.Corner_Predictor_Lite_Rep_v2.soft_argmax", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.get_score_map", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.soft_argmax", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.soft_argmax", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.soft_argmax", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.soft_argmax"], ["", "", "def", "forward", "(", "self", ",", "x", ",", "return_dist", "=", "False", ",", "softmax", "=", "True", ")", ":", "\n", "        ", "\"\"\" Forward pass with input x. \"\"\"", "\n", "# s = time.time()", "\n", "score_map_tl", ",", "score_map_br", "=", "self", ".", "get_score_map", "(", "x", ")", "\n", "# e1 = time.time()", "\n", "# print(\"head forward time: %.2f ms\" % ((e1-s)*1000))", "\n", "if", "return_dist", ":", "\n", "            ", "coorx_tl", ",", "coory_tl", ",", "prob_vec_tl", "=", "self", ".", "soft_argmax", "(", "score_map_tl", ",", "return_dist", "=", "True", ",", "softmax", "=", "softmax", ")", "\n", "coorx_br", ",", "coory_br", ",", "prob_vec_br", "=", "self", ".", "soft_argmax", "(", "score_map_br", ",", "return_dist", "=", "True", ",", "softmax", "=", "softmax", ")", "\n", "return", "torch", ".", "stack", "(", "(", "coorx_tl", ",", "coory_tl", ",", "coorx_br", ",", "coory_br", ")", ",", "dim", "=", "1", ")", "/", "self", ".", "img_sz", ",", "prob_vec_tl", ",", "prob_vec_br", "\n", "", "else", ":", "\n", "            ", "coorx_tl", ",", "coory_tl", "=", "self", ".", "soft_argmax", "(", "score_map_tl", ")", "\n", "coorx_br", ",", "coory_br", "=", "self", ".", "soft_argmax", "(", "score_map_br", ")", "\n", "# e2 = time.time()", "\n", "# print(\"soft-argmax time: %.2f ms\" % ((e2 - e1) * 1000))", "\n", "return", "torch", ".", "stack", "(", "(", "coorx_tl", ",", "coory_tl", ",", "coorx_br", ",", "coory_br", ")", ",", "dim", "=", "1", ")", "/", "self", ".", "img_sz", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.get_score_map": [[255, 258], ["head.Corner_Predictor_Lite_Rep_v2.conv_tower"], "methods", ["None"], ["", "", "def", "get_score_map", "(", "self", ",", "x", ")", ":", "\n", "        ", "score_map", "=", "self", ".", "conv_tower", "(", "x", ")", "# (B,2,H,W)", "\n", "return", "score_map", "[", ":", ",", "0", ",", ":", ",", ":", "]", ",", "score_map", "[", ":", ",", "1", ",", ":", ",", ":", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.Corner_Predictor_Lite_Rep_v2.soft_argmax": [[259, 272], ["score_map.view", "torch.functional.softmax", "torch.functional.softmax", "torch.functional.softmax", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum"], "methods", ["None"], ["", "def", "soft_argmax", "(", "self", ",", "score_map", ",", "return_dist", "=", "False", ",", "softmax", "=", "True", ")", ":", "\n", "        ", "\"\"\" get soft-argmax coordinate for a given heatmap \"\"\"", "\n", "score_vec", "=", "score_map", ".", "view", "(", "(", "-", "1", ",", "self", ".", "feat_len", ")", ")", "# (batch, feat_sz * feat_sz)", "\n", "prob_vec", "=", "nn", ".", "functional", ".", "softmax", "(", "score_vec", ",", "dim", "=", "1", ")", "\n", "exp_x", "=", "torch", ".", "sum", "(", "(", "self", ".", "coord_x", "*", "prob_vec", ")", ",", "dim", "=", "1", ")", "\n", "exp_y", "=", "torch", ".", "sum", "(", "(", "self", ".", "coord_y", "*", "prob_vec", ")", ",", "dim", "=", "1", ")", "\n", "if", "return_dist", ":", "\n", "            ", "if", "softmax", ":", "\n", "                ", "return", "exp_x", ",", "exp_y", ",", "prob_vec", "\n", "", "else", ":", "\n", "                ", "return", "exp_x", ",", "exp_y", ",", "score_vec", "\n", "", "", "else", ":", "\n", "            ", "return", "exp_x", ",", "exp_y", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.MLP.__init__": [[277, 287], ["torch.Module.__init__", "torch.ModuleList", "torch.ModuleList", "torch.ModuleList", "torch.ModuleList", "torch.ModuleList", "torch.ModuleList", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.Linear", "torch.BatchNorm1d", "torch.BatchNorm1d", "torch.BatchNorm1d", "zip", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "input_dim", ",", "hidden_dim", ",", "output_dim", ",", "num_layers", ",", "BN", "=", "False", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "num_layers", "=", "num_layers", "\n", "h", "=", "[", "hidden_dim", "]", "*", "(", "num_layers", "-", "1", ")", "\n", "if", "BN", ":", "\n", "            ", "self", ".", "layers", "=", "nn", ".", "ModuleList", "(", "nn", ".", "Sequential", "(", "nn", ".", "Linear", "(", "n", ",", "k", ")", ",", "nn", ".", "BatchNorm1d", "(", "k", ")", ")", "\n", "for", "n", ",", "k", "in", "zip", "(", "[", "input_dim", "]", "+", "h", ",", "h", "+", "[", "output_dim", "]", ")", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "layers", "=", "nn", ".", "ModuleList", "(", "nn", ".", "Linear", "(", "n", ",", "k", ")", "\n", "for", "n", ",", "k", "in", "zip", "(", "[", "input_dim", "]", "+", "h", ",", "h", "+", "[", "output_dim", "]", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.MLP.forward": [[288, 292], ["enumerate", "torch.relu", "torch.relu", "torch.relu", "layer", "layer"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu"], ["", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "for", "i", ",", "layer", "in", "enumerate", "(", "self", ".", "layers", ")", ":", "\n", "            ", "x", "=", "F", ".", "relu", "(", "layer", "(", "x", ")", ")", "if", "i", "<", "self", ".", "num_layers", "-", "1", "else", "layer", "(", "x", ")", "\n", "", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.conv": [[9, 23], ["torch.Sequential", "torch.Sequential", "torch.Conv2d", "lib.models.stark.backbone.FrozenBatchNorm2d", "torch.ReLU", "torch.Conv2d", "torch.BatchNorm2d", "torch.ReLU"], "function", ["None"], ["def", "conv", "(", "in_planes", ",", "out_planes", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "1", ",", "dilation", "=", "1", ",", "\n", "freeze_bn", "=", "False", ")", ":", "\n", "    ", "if", "freeze_bn", ":", "\n", "        ", "return", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "in_planes", ",", "out_planes", ",", "kernel_size", "=", "kernel_size", ",", "stride", "=", "stride", ",", "\n", "padding", "=", "padding", ",", "dilation", "=", "dilation", ",", "bias", "=", "True", ")", ",", "\n", "FrozenBatchNorm2d", "(", "out_planes", ")", ",", "\n", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", ")", "\n", "", "else", ":", "\n", "        ", "return", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "in_planes", ",", "out_planes", ",", "kernel_size", "=", "kernel_size", ",", "stride", "=", "stride", ",", "\n", "padding", "=", "padding", ",", "dilation", "=", "dilation", ",", "bias", "=", "True", ")", ",", "\n", "nn", ".", "BatchNorm2d", "(", "out_planes", ")", ",", "\n", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.build_box_head": [[294, 324], ["head.MLP", "int", "getattr", "print", "ValueError", "head.Corner_Predictor", "head.Corner_Predictor_Lite", "head.Corner_Predictor_Lite_Rep", "head.Corner_Predictor_Lite_Rep_v2", "ValueError"], "function", ["None"], ["", "", "def", "build_box_head", "(", "cfg", ")", ":", "\n", "    ", "if", "cfg", ".", "MODEL", ".", "HEAD_TYPE", "==", "\"MLP\"", ":", "\n", "        ", "hidden_dim", "=", "cfg", ".", "MODEL", ".", "HIDDEN_DIM", "\n", "mlp_head", "=", "MLP", "(", "hidden_dim", ",", "hidden_dim", ",", "4", ",", "3", ")", "# dim_in, dim_hidden, dim_out, 3 layers", "\n", "return", "mlp_head", "\n", "", "elif", "\"CORNER\"", "in", "cfg", ".", "MODEL", ".", "HEAD_TYPE", ":", "\n", "        ", "if", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "DILATION", "is", "False", ":", "\n", "            ", "stride", "=", "16", "\n", "", "else", ":", "\n", "            ", "stride", "=", "8", "\n", "", "feat_sz", "=", "int", "(", "cfg", ".", "DATA", ".", "SEARCH", ".", "SIZE", "/", "stride", ")", "\n", "channel", "=", "getattr", "(", "cfg", ".", "MODEL", ",", "\"HEAD_DIM\"", ",", "256", ")", "\n", "print", "(", "\"head channel: %d\"", "%", "channel", ")", "\n", "if", "cfg", ".", "MODEL", ".", "HEAD_TYPE", "==", "\"CORNER\"", ":", "\n", "            ", "corner_head", "=", "Corner_Predictor", "(", "inplanes", "=", "cfg", ".", "MODEL", ".", "HIDDEN_DIM", ",", "channel", "=", "channel", ",", "\n", "feat_sz", "=", "feat_sz", ",", "stride", "=", "stride", ")", "\n", "", "elif", "cfg", ".", "MODEL", ".", "HEAD_TYPE", "==", "\"CORNER_LITE\"", ":", "\n", "            ", "corner_head", "=", "Corner_Predictor_Lite", "(", "inplanes", "=", "cfg", ".", "MODEL", ".", "HIDDEN_DIM", ",", "channel", "=", "channel", ",", "\n", "feat_sz", "=", "feat_sz", ",", "stride", "=", "stride", ")", "\n", "", "elif", "cfg", ".", "MODEL", ".", "HEAD_TYPE", "==", "\"CORNER_LITE_REP\"", ":", "\n", "            ", "corner_head", "=", "Corner_Predictor_Lite_Rep", "(", "inplanes", "=", "cfg", ".", "MODEL", ".", "HIDDEN_DIM", ",", "channel", "=", "channel", ",", "\n", "feat_sz", "=", "feat_sz", ",", "stride", "=", "stride", ")", "\n", "", "elif", "cfg", ".", "MODEL", ".", "HEAD_TYPE", "==", "\"CORNER_LITE_REP_v2\"", ":", "\n", "            ", "corner_head", "=", "Corner_Predictor_Lite_Rep_v2", "(", "inplanes", "=", "cfg", ".", "MODEL", ".", "HIDDEN_DIM", ",", "channel", "=", "channel", ",", "\n", "feat_sz", "=", "feat_sz", ",", "stride", "=", "stride", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", ")", "\n", "", "return", "corner_head", "\n", "", "else", ":", "\n", "        ", "raise", "ValueError", "(", "\"HEAD TYPE %s is not supported.\"", "%", "cfg", ".", "MODEL", ".", "HEAD_TYPE", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone_X.FrozenBatchNorm2d.__init__": [[24, 30], ["super().__init__", "backbone_X.FrozenBatchNorm2d.register_buffer", "backbone_X.FrozenBatchNorm2d.register_buffer", "backbone_X.FrozenBatchNorm2d.register_buffer", "backbone_X.FrozenBatchNorm2d.register_buffer", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.ones", "torch.ones", "torch.ones", "torch.ones"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "n", ")", ":", "\n", "        ", "super", "(", "FrozenBatchNorm2d", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "register_buffer", "(", "\"weight\"", ",", "torch", ".", "ones", "(", "n", ")", ")", "\n", "self", ".", "register_buffer", "(", "\"bias\"", ",", "torch", ".", "zeros", "(", "n", ")", ")", "\n", "self", ".", "register_buffer", "(", "\"running_mean\"", ",", "torch", ".", "zeros", "(", "n", ")", ")", "\n", "self", ".", "register_buffer", "(", "\"running_var\"", ",", "torch", ".", "ones", "(", "n", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone_X.FrozenBatchNorm2d._load_from_state_dict": [[31, 40], ["super()._load_from_state_dict"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone.FrozenBatchNorm2d._load_from_state_dict"], ["", "def", "_load_from_state_dict", "(", "self", ",", "state_dict", ",", "prefix", ",", "local_metadata", ",", "strict", ",", "\n", "missing_keys", ",", "unexpected_keys", ",", "error_msgs", ")", ":", "\n", "        ", "num_batches_tracked_key", "=", "prefix", "+", "'num_batches_tracked'", "\n", "if", "num_batches_tracked_key", "in", "state_dict", ":", "\n", "            ", "del", "state_dict", "[", "num_batches_tracked_key", "]", "\n", "\n", "", "super", "(", "FrozenBatchNorm2d", ",", "self", ")", ".", "_load_from_state_dict", "(", "\n", "state_dict", ",", "prefix", ",", "local_metadata", ",", "strict", ",", "\n", "missing_keys", ",", "unexpected_keys", ",", "error_msgs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone_X.FrozenBatchNorm2d.forward": [[41, 52], ["backbone_X.FrozenBatchNorm2d.weight.reshape", "backbone_X.FrozenBatchNorm2d.bias.reshape", "backbone_X.FrozenBatchNorm2d.running_var.reshape", "backbone_X.FrozenBatchNorm2d.running_mean.reshape"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "# move reshapes to the beginning", "\n", "# to make it fuser-friendly", "\n", "        ", "w", "=", "self", ".", "weight", ".", "reshape", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "b", "=", "self", ".", "bias", ".", "reshape", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "rv", "=", "self", ".", "running_var", ".", "reshape", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "rm", "=", "self", ".", "running_mean", ".", "reshape", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "eps", "=", "1e-5", "\n", "scale", "=", "w", "*", "(", "rv", "+", "eps", ")", ".", "rsqrt", "(", ")", "# rsqrt(x): 1/sqrt(x), r: reciprocal", "\n", "bias", "=", "b", "-", "rm", "*", "scale", "\n", "return", "x", "*", "scale", "+", "bias", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone_X.Transformer_Backbone.__init__": [[57, 73], ["torch.nn.Module.__init__", "deit", "swin_transformer.build_swint.named_parameters", "swin_transformer.build_swint", "ValueError", "parameter.requires_grad_", "lib.utils.misc.is_main_process"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_transformer.build_swint", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.is_main_process"], ["def", "__init__", "(", "self", ",", "img_sz", ",", "model_name", ",", "train_backbone", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "if", "model_name", "==", "\"vit_deit_base_distilled_patch16_384\"", ":", "\n", "            ", "ckpt_name", "=", "\"https://dl.fbaipublicfiles.com/deit/deit_base_distilled_patch16_384-d0272ac0.pth\"", "\n", "model", "=", "deit", "(", "img_sz", ",", "pretrained", "=", "is_main_process", "(", ")", ",", "model_name", "=", "model_name", ",", "ckpt_name", "=", "ckpt_name", ")", "\n", "self", ".", "num_channels", "=", "model", ".", "num_features", "\n", "", "elif", "model_name", "==", "\"swin_base_patch4_window12_384_S16\"", ":", "\n", "            ", "model", "=", "build_swint", "(", "model_name", ")", "\n", "self", ".", "num_channels", "=", "model", ".", "num_features", "[", "-", "1", "]", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "\"Unsupported model name\"", ")", "\n", "\n", "", "if", "not", "train_backbone", ":", "\n", "            ", "for", "name", ",", "parameter", "in", "model", ".", "named_parameters", "(", ")", ":", "\n", "                ", "parameter", ".", "requires_grad_", "(", "False", ")", "\n", "", "", "self", ".", "body", "=", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone_X.Transformer_Backbone.forward": [[74, 76], ["backbone_X.Transformer_Backbone.body"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "return", "self", ".", "body", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone_X.Backbone.__init__": [[79, 104], ["torch.nn.Module.__init__", "getattr", "print", "lib.models.stark.repvgg.get_RepVGG_func_by_name", "lib.models.stark.repvgg.get_RepVGG_func_by_name.", "lib.utils.misc.is_main_process", "print", "build_subnet", "lib.utils.misc.is_main_process", "ValueError", "print"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.get_RepVGG_func_by_name", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.is_main_process", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.is_main_process"], ["    ", "def", "__init__", "(", "self", ",", "name", ":", "str", ",", "dilation", ":", "bool", ",", "freeze_bn", ":", "bool", ",", "last_stage_block", "=", "14", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "if", "\"resnet\"", "in", "name", ":", "\n", "            ", "norm_layer", "=", "FrozenBatchNorm2d", "if", "freeze_bn", "else", "nn", ".", "BatchNorm2d", "\n", "# here is different from the original DETR because we use feature from block3", "\n", "self", ".", "body", "=", "getattr", "(", "resnet_module", ",", "name", ")", "(", "\n", "replace_stride_with_dilation", "=", "[", "False", ",", "dilation", ",", "False", "]", ",", "\n", "pretrained", "=", "is_main_process", "(", ")", ",", "norm_layer", "=", "norm_layer", ",", "last_layer", "=", "'layer3'", ")", "\n", "self", ".", "num_channels", "=", "256", "if", "name", "in", "(", "'resnet18'", ",", "'resnet34'", ")", "else", "1024", "\n", "", "elif", "\"RepVGG\"", "in", "name", ":", "\n", "            ", "print", "(", "\"#\"", "*", "10", "+", "\"  Warning: Dilation is not valid in current code  \"", "+", "\"#\"", "*", "10", ")", "\n", "repvgg_func", "=", "get_RepVGG_func_by_name", "(", "name", ")", "\n", "self", ".", "body", "=", "repvgg_func", "(", "deploy", "=", "False", ",", "last_layer", "=", "\"stage3\"", ",", "freeze_bn", "=", "freeze_bn", ",", "\n", "last_stage_block", "=", "last_stage_block", ")", "\n", "self", ".", "num_channels", "=", "192", "# 256x0.75=192", "\n", "", "elif", "\"LightTrack\"", "in", "name", ":", "\n", "            ", "print", "(", "\"#\"", "*", "10", "+", "\"  Warning: Dilation is not valid in current code  \"", "+", "\"#\"", "*", "10", ")", "\n", "path_backbone", "=", "[", "[", "0", "]", ",", "[", "4", ",", "5", "]", ",", "[", "0", ",", "2", ",", "5", ",", "1", "]", ",", "[", "4", ",", "0", ",", "4", ",", "4", "]", ",", "[", "5", ",", "2", ",", "1", ",", "0", "]", "]", "\n", "ops", "=", "(", "3", ",", "2", ")", "\n", "self", ".", "body", "=", "build_subnet", "(", "path_backbone", ",", "ops", ")", "\n", "if", "is_main_process", "(", ")", ":", "\n", "                ", "print", "(", "self", ".", "body", ")", "\n", "", "self", ".", "num_channels", "=", "96", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "\"Unsupported net type\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone_X.Backbone.forward": [[105, 107], ["backbone_X.Backbone.body"], "methods", ["None"], ["", "", "def", "forward", "(", "self", ",", "x", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "return", "self", ".", "body", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone_X.build_backbone_x_cnn": [[109, 153], ["backbone_X.Backbone", "hasattr", "os.path.join", "print", "torch.load", "torch.load", "Backbone.body.load_state_dict", "lib.utils.misc.is_main_process", "Backbone.body.named_parameters", "torch.load.items", "print", "print", "parameter.requires_grad_", "ValueError", "k.startswith", "k.replace", "parameter.requires_grad_"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.is_main_process"], ["", "", "def", "build_backbone_x_cnn", "(", "cfg", ",", "phase", "=", "'train'", ")", ":", "\n", "    ", "\"\"\"Without positional embedding, standard tensor input\"\"\"", "\n", "train_backbone", "=", "cfg", ".", "TRAIN", ".", "BACKBONE_MULTIPLIER", ">", "0", "\n", "backbone", "=", "Backbone", "(", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", ",", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "DILATION", ",", "cfg", ".", "TRAIN", ".", "FREEZE_BACKBONE_BN", ",", "\n", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "LAST_STAGE_BLOCK", ")", "\n", "\n", "if", "phase", "is", "'train'", ":", "\n", "        ", "\"\"\"load pretrained backbone weights\"\"\"", "\n", "ckpt_path", "=", "None", "\n", "if", "hasattr", "(", "cfg", ",", "\"ckpt_dir\"", ")", ":", "\n", "            ", "if", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", "==", "\"RepVGG-A0\"", ":", "\n", "                ", "filename", "=", "\"RepVGG-A0-train.pth\"", "\n", "", "elif", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", "==", "\"LightTrack\"", ":", "\n", "                ", "filename", "=", "\"LightTrackM.pth\"", "\n", "", "else", ":", "\n", "                ", "raise", "ValueError", "(", "\"The checkpoint file for backbone type %s is not found\"", "%", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", ")", "\n", "", "ckpt_path", "=", "os", ".", "path", ".", "join", "(", "cfg", ".", "ckpt_dir", ",", "filename", ")", "\n", "", "if", "ckpt_path", "is", "not", "None", ":", "\n", "            ", "print", "(", "\"Loading pretrained backbone weights from %s\"", "%", "ckpt_path", ")", "\n", "ckpt", "=", "torch", ".", "load", "(", "ckpt_path", ",", "map_location", "=", "'cpu'", ")", "\n", "if", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", "==", "\"LightTrack\"", ":", "\n", "                ", "ckpt", ",", "ckpt_new", "=", "ckpt", "[", "\"state_dict\"", "]", ",", "{", "}", "\n", "for", "k", ",", "v", "in", "ckpt", ".", "items", "(", ")", ":", "\n", "                    ", "if", "k", ".", "startswith", "(", "\"features.\"", ")", ":", "\n", "                        ", "k_new", "=", "k", ".", "replace", "(", "\"features.\"", ",", "\"\"", ")", "\n", "ckpt_new", "[", "k_new", "]", "=", "v", "\n", "", "", "ckpt", "=", "ckpt_new", "\n", "", "missing_keys", ",", "unexpected_keys", "=", "backbone", ".", "body", ".", "load_state_dict", "(", "ckpt", ",", "strict", "=", "False", ")", "\n", "if", "is_main_process", "(", ")", ":", "\n", "                ", "print", "(", "\"missing keys:\"", ",", "missing_keys", ")", "\n", "print", "(", "\"unexpected keys:\"", ",", "unexpected_keys", ")", "\n", "\n", "", "", "\"\"\"freeze some layers\"\"\"", "\n", "if", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", "!=", "\"LightTrack\"", ":", "\n", "            ", "trained_layers", "=", "cfg", ".", "TRAIN", ".", "BACKBONE_TRAINED_LAYERS", "\n", "# defrost parameters of layers in trained_layers", "\n", "for", "name", ",", "parameter", "in", "backbone", ".", "body", ".", "named_parameters", "(", ")", ":", "\n", "                ", "parameter", ".", "requires_grad_", "(", "False", ")", "\n", "if", "train_backbone", ":", "\n", "                    ", "for", "trained_name", "in", "trained_layers", ":", "# such as 'layer2' in layer2.conv1.weight", "\n", "                        ", "if", "trained_name", "in", "name", ":", "\n", "                            ", "parameter", ".", "requires_grad_", "(", "True", ")", "\n", "break", "\n", "", "", "", "", "", "", "return", "backbone", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone_X.build_backbone_x_swin": [[155, 182], ["print", "backbone_X.Transformer_Backbone", "ValueError", "hasattr", "os.path.join", "print", "torch.load", "torch.load", "Transformer_Backbone.body.load_state_dict", "print", "print", "torch.cuda.empty_cache", "torch.cuda.empty_cache", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict"], ["", "def", "build_backbone_x_swin", "(", "cfg", ",", "phase", "=", "'train'", ")", ":", "\n", "    ", "\"\"\"Without positional embedding, standard tensor input\"\"\"", "\n", "train_backbone", "=", "cfg", ".", "TRAIN", ".", "BACKBONE_MULTIPLIER", ">", "0", "\n", "if", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", "==", "\"swin_base_patch4_window12_384_S16\"", ":", "\n", "        ", "backbone", "=", "Transformer_Backbone", "(", "cfg", ".", "DATA", ".", "SEARCH", ".", "SIZE", ",", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", ",", "train_backbone", ")", "\n", "", "else", ":", "\n", "        ", "raise", "ValueError", "(", "\"Unsupported model_name\"", ")", "\n", "\n", "", "if", "phase", "is", "'train'", ":", "\n", "        ", "\"\"\"load pretrained backbone weights\"\"\"", "\n", "ckpt_path", "=", "None", "\n", "if", "hasattr", "(", "cfg", ",", "\"ckpt_dir\"", ")", ":", "\n", "            ", "if", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", "==", "\"swin_base_patch4_window12_384_S16\"", ":", "\n", "                ", "filename", "=", "\"swin_base_patch4_window12_384_22k.pth\"", "\n", "", "else", ":", "\n", "                ", "raise", "ValueError", "(", "\"The checkpoint file for backbone type %s is not found\"", "%", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", ")", "\n", "", "ckpt_path", "=", "os", ".", "path", ".", "join", "(", "cfg", ".", "ckpt_dir", ",", "filename", ")", "\n", "", "if", "ckpt_path", "is", "not", "None", ":", "\n", "            ", "print", "(", "\"Loading pretrained backbone weights from %s\"", "%", "ckpt_path", ")", "\n", "ckpt", "=", "torch", ".", "load", "(", "ckpt_path", ",", "map_location", "=", "'cpu'", ")", "\n", "missing_keys", ",", "unexpected_keys", "=", "backbone", ".", "body", ".", "load_state_dict", "(", "ckpt", "[", "\"model\"", "]", ",", "strict", "=", "False", ")", "\n", "print", "(", "\"missing keys:\"", ",", "missing_keys", ")", "\n", "print", "(", "\"unexpected keys:\"", ",", "unexpected_keys", ")", "\n", "del", "ckpt", "\n", "torch", ".", "cuda", ".", "empty_cache", "(", ")", "\n", "", "", "print", "(", "\"For swin, we don't freeze any layers in the backbone \"", ")", "\n", "return", "backbone", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone_X.build_backbone_x": [[184, 189], ["backbone_X.build_backbone_x_swin", "backbone_X.build_backbone_x_cnn"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone_X.build_backbone_x_swin", "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone_X.build_backbone_x_cnn"], ["", "def", "build_backbone_x", "(", "cfg", ",", "phase", "=", "'train'", ")", ":", "\n", "    ", "if", "'swin'", "in", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", ":", "\n", "        ", "return", "build_backbone_x_swin", "(", "cfg", ",", "phase", "=", "phase", ")", "\n", "", "else", ":", "\n", "        ", "return", "build_backbone_x_cnn", "(", "cfg", ",", "phase", "=", "phase", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_config._update_config_from_file": [[172, 185], ["config.defrost", "yaml.load.setdefault", "print", "config.merge_from_file", "config.freeze", "open", "yaml.load", "swin_config._update_config_from_file", "os.path.join", "os.path.dirname"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_config._update_config_from_file"], ["def", "_update_config_from_file", "(", "config", ",", "cfg_file", ")", ":", "\n", "    ", "config", ".", "defrost", "(", ")", "\n", "with", "open", "(", "cfg_file", ",", "'r'", ")", "as", "f", ":", "\n", "        ", "yaml_cfg", "=", "yaml", ".", "load", "(", "f", ",", "Loader", "=", "yaml", ".", "FullLoader", ")", "\n", "\n", "", "for", "cfg", "in", "yaml_cfg", ".", "setdefault", "(", "'BASE'", ",", "[", "''", "]", ")", ":", "\n", "        ", "if", "cfg", ":", "\n", "            ", "_update_config_from_file", "(", "\n", "config", ",", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "cfg_file", ")", ",", "cfg", ")", "\n", ")", "\n", "", "", "print", "(", "'=> merge config from {}'", ".", "format", "(", "cfg_file", ")", ")", "\n", "config", ".", "merge_from_file", "(", "cfg_file", ")", "\n", "config", ".", "freeze", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_config.update_config": [[187, 227], ["swin_config._update_config_from_file", "config.defrost", "os.path.join", "config.freeze", "config.merge_from_list"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_config._update_config_from_file"], ["", "def", "update_config", "(", "config", ",", "args", ")", ":", "\n", "    ", "_update_config_from_file", "(", "config", ",", "args", ".", "cfg", ")", "\n", "\n", "config", ".", "defrost", "(", ")", "\n", "if", "args", ".", "opts", ":", "\n", "        ", "config", ".", "merge_from_list", "(", "args", ".", "opts", ")", "\n", "\n", "# merge from specific arguments", "\n", "", "if", "args", ".", "batch_size", ":", "\n", "        ", "config", ".", "DATA", ".", "BATCH_SIZE", "=", "args", ".", "batch_size", "\n", "", "if", "args", ".", "data_path", ":", "\n", "        ", "config", ".", "DATA", ".", "DATA_PATH", "=", "args", ".", "data_path", "\n", "", "if", "args", ".", "zip", ":", "\n", "        ", "config", ".", "DATA", ".", "ZIP_MODE", "=", "True", "\n", "", "if", "args", ".", "cache_mode", ":", "\n", "        ", "config", ".", "DATA", ".", "CACHE_MODE", "=", "args", ".", "cache_mode", "\n", "", "if", "args", ".", "resume", ":", "\n", "        ", "config", ".", "MODEL", ".", "RESUME", "=", "args", ".", "resume", "\n", "", "if", "args", ".", "accumulation_steps", ":", "\n", "        ", "config", ".", "TRAIN", ".", "ACCUMULATION_STEPS", "=", "args", ".", "accumulation_steps", "\n", "", "if", "args", ".", "use_checkpoint", ":", "\n", "        ", "config", ".", "TRAIN", ".", "USE_CHECKPOINT", "=", "True", "\n", "", "if", "args", ".", "amp_opt_level", ":", "\n", "        ", "config", ".", "AMP_OPT_LEVEL", "=", "args", ".", "amp_opt_level", "\n", "", "if", "args", ".", "output", ":", "\n", "        ", "config", ".", "OUTPUT", "=", "args", ".", "output", "\n", "", "if", "args", ".", "tag", ":", "\n", "        ", "config", ".", "TAG", "=", "args", ".", "tag", "\n", "", "if", "args", ".", "eval", ":", "\n", "        ", "config", ".", "EVAL_MODE", "=", "True", "\n", "", "if", "args", ".", "throughput", ":", "\n", "        ", "config", ".", "THROUGHPUT_MODE", "=", "True", "\n", "\n", "# set local rank for distributed training", "\n", "", "config", ".", "LOCAL_RANK", "=", "args", ".", "local_rank", "\n", "\n", "# output folder", "\n", "config", ".", "OUTPUT", "=", "os", ".", "path", ".", "join", "(", "config", ".", "OUTPUT", ",", "config", ".", "MODEL", ".", "NAME", ",", "config", ".", "TAG", ")", "\n", "\n", "config", ".", "freeze", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_config.get_config": [[229, 237], ["_C.clone", "swin_config.update_config"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_config.update_config"], ["", "def", "get_config", "(", "args", ")", ":", "\n", "    ", "\"\"\"Get a yacs CfgNode object with default values.\"\"\"", "\n", "# Return a clone so that the defaults will not be altered", "\n", "# This is for the \"local variable\" use pattern", "\n", "config", "=", "_C", ".", "clone", "(", ")", "\n", "update_config", "(", "config", ",", "args", ")", "\n", "\n", "return", "config", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_config.get_config_new": [[239, 247], ["_C.clone", "swin_config._update_config_from_file"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.swin_config._update_config_from_file"], ["", "def", "get_config_new", "(", "yaml_path", ")", ":", "\n", "    ", "\"\"\"Get a yacs CfgNode object with default values.\"\"\"", "\n", "# Return a clone so that the defaults will not be altered", "\n", "# This is for the \"local variable\" use pattern", "\n", "config", "=", "_C", ".", "clone", "(", ")", "\n", "_update_config_from_file", "(", "config", ",", "yaml_path", ")", "\n", "\n", "return", "config", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.__init__": [[21, 42], ["torch.nn.Module.__init__", "range", "torch.nn.Conv2d", "torch.nn.Conv2d", "len", "setattr", "int", "int"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "backbone", ",", "transformer", ",", "box_head", ",", "pos_emb_z", ",", "pos_emb_x", ",", "head_type", "=", "\"CORNER_LITE\"", ",", "\n", "distill", "=", "False", ")", ":", "\n", "        ", "\"\"\" Initializes the model.\n        Parameters:\n            backbone: torch module of the backbone to be used. See backbone.py\n            transformer: torch module of the transformer architecture. See transformer.py\n        \"\"\"", "\n", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "backbone", "=", "backbone", "\n", "self", ".", "transformer", "=", "transformer", "\n", "self", ".", "box_head", "=", "box_head", "\n", "self", ".", "pos_emb_x", "=", "pos_emb_x", "\n", "for", "i", "in", "range", "(", "len", "(", "pos_emb_z", ")", ")", ":", "\n", "            ", "setattr", "(", "self", ",", "\"pos_emb_z%d\"", "%", "i", ",", "pos_emb_z", "[", "i", "]", ")", "\n", "", "hidden_dim", "=", "transformer", ".", "d_model", "\n", "self", ".", "bottleneck", "=", "nn", ".", "Conv2d", "(", "backbone", ".", "num_channels", ",", "hidden_dim", ",", "kernel_size", "=", "1", ")", "# the bottleneck layer", "\n", "self", ".", "head_type", "=", "head_type", "\n", "self", ".", "distill", "=", "distill", "\n", "if", "\"CORNER\"", "in", "head_type", ":", "\n", "            ", "self", ".", "feat_sz_s", "=", "int", "(", "box_head", ".", "feat_sz", ")", "\n", "self", ".", "feat_len_s", "=", "int", "(", "box_head", ".", "feat_sz", "**", "2", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.forward": [[43, 51], ["stark_lightning_x_trt.STARKLightningXtrt.forward_backbone", "stark_lightning_x_trt.STARKLightningXtrt.forward_transformer"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt_new.forward_backbone", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.forward_transformer"], ["", "", "def", "forward", "(", "self", ",", "img", "=", "None", ",", "mask", "=", "None", ",", "q", "=", "None", ",", "k", "=", "None", ",", "v", "=", "None", ",", "key_padding_mask", "=", "None", ",", "\n", "mode", "=", "\"backbone\"", ",", "zx", "=", "\"template\"", ",", "softmax", "=", "True", ")", ":", "\n", "        ", "if", "mode", "==", "\"backbone\"", ":", "\n", "            ", "return", "self", ".", "forward_backbone", "(", "img", ",", "zx", ",", "mask", ")", "\n", "", "elif", "mode", "==", "\"transformer\"", ":", "\n", "            ", "return", "self", ".", "forward_transformer", "(", "q", ",", "k", ",", "v", ",", "key_padding_mask", "=", "key_padding_mask", ",", "softmax", "=", "softmax", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.forward_backbone": [[52, 73], ["isinstance", "stark_lightning_x_trt.STARKLightningXtrt.backbone", "img.size", "stark_lightning_x_trt.STARKLightningXtrt.adjust", "stark_lightning_x_trt.STARKLightningXtrt.pos_emb_x", "torch.interpolate().to", "torch.interpolate().to", "getattr", "getattr.", "ValueError", "torch.interpolate", "torch.interpolate", "int", "mask[].float"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.adjust", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], ["", "", "def", "forward_backbone", "(", "self", ",", "img", ":", "torch", ".", "Tensor", ",", "zx", ":", "str", ",", "mask", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "\"\"\"The input type is standard tensor\n               - tensor: batched images, of shape [batch_size x 3 x H x W]\n               - mask: a binary mask of shape [batch_size x H x W], containing 1 on padded pixels\n        \"\"\"", "\n", "assert", "isinstance", "(", "img", ",", "torch", ".", "Tensor", ")", "\n", "\"\"\"run the backbone\"\"\"", "\n", "output_back", "=", "self", ".", "backbone", "(", "img", ")", "# features & masks, position embedding for the search", "\n", "\"\"\"get the positional encoding\"\"\"", "\n", "bs", "=", "img", ".", "size", "(", "0", ")", "# batch size", "\n", "if", "zx", "==", "\"search\"", ":", "\n", "            ", "pos", "=", "self", ".", "pos_emb_x", "(", "bs", ")", "\n", "", "elif", "\"template\"", "in", "zx", ":", "\n", "            ", "pos_emb_z", "=", "getattr", "(", "self", ",", "\"pos_emb_z%d\"", "%", "int", "(", "zx", "[", "-", "1", "]", ")", ")", "\n", "pos", "=", "pos_emb_z", "(", "bs", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "\"zx should be 'template_0' or 'search'.\"", ")", "\n", "", "\"\"\"get the downsampled attention mask\"\"\"", "\n", "mask_down", "=", "F", ".", "interpolate", "(", "mask", "[", "None", "]", ".", "float", "(", ")", ",", "size", "=", "output_back", ".", "shape", "[", "-", "2", ":", "]", ")", ".", "to", "(", "torch", ".", "bool", ")", "[", "0", "]", "\n", "\"\"\"adjust the shape\"\"\"", "\n", "return", "self", ".", "adjust", "(", "output_back", ",", "pos", ",", "mask_down", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.forward_transformer": [[74, 87], ["stark_lightning_x_trt.STARKLightningXtrt.transformer", "stark_lightning_x_trt.STARKLightningXtrt.forward_box_head", "stark_lightning_x_trt.STARKLightningXtrt.forward_box_head"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.forward_box_head", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.forward_box_head"], ["", "def", "forward_transformer", "(", "self", ",", "q", ",", "k", ",", "v", ",", "key_padding_mask", "=", "None", ",", "softmax", "=", "True", ")", ":", "\n", "# run the transformer encoder", "\n", "        ", "enc_mem", "=", "self", ".", "transformer", "(", "q", ",", "k", ",", "v", ",", "key_padding_mask", "=", "key_padding_mask", ")", "\n", "# run the corner head", "\n", "if", "self", ".", "distill", ":", "\n", "            ", "outputs_coord", ",", "prob_tl", ",", "prob_br", "=", "self", ".", "forward_box_head", "(", "enc_mem", ",", "softmax", "=", "softmax", ")", "\n", "return", "{", "\"pred_boxes\"", ":", "outputs_coord", ",", "\"prob_tl\"", ":", "prob_tl", ",", "\"prob_br\"", ":", "prob_br", "}", ",", "None", ",", "None", "\n", "", "else", ":", "\n", "# s = time.time()", "\n", "            ", "out", ",", "outputs_coord", "=", "self", ".", "forward_box_head", "(", "enc_mem", ")", "\n", "# e = time.time()", "\n", "# print(\"head time: %.1f ms\" % ((e-s)*1000))", "\n", "return", "out", ",", "outputs_coord", ",", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.forward_box_head": [[88, 105], ["memory[].permute().contiguous", "memory[].permute().contiguous.view().contiguous", "stark_lightning_x_trt.STARKLightningXtrt.box_head", "lib.utils.box_ops.box_xyxy_to_cxcywh", "lib.utils.box_ops.box_xyxy_to_cxcywh", "memory[].permute", "memory[].permute().contiguous.view", "stark_lightning_x_trt.STARKLightningXtrt.box_head"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.box_xyxy_to_cxcywh", "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.box_xyxy_to_cxcywh"], ["", "", "def", "forward_box_head", "(", "self", ",", "memory", ",", "softmax", "=", "True", ")", ":", "\n", "        ", "\"\"\" memory: encoder embeddings (HW1+HW2, B, C) / (HW2, B, C)\"\"\"", "\n", "if", "\"CORNER\"", "in", "self", ".", "head_type", ":", "\n", "# encoder output for the search region (H_x*W_x, B, C)", "\n", "            ", "fx", "=", "memory", "[", "-", "self", ".", "feat_len_s", ":", "]", ".", "permute", "(", "1", ",", "2", ",", "0", ")", ".", "contiguous", "(", ")", "# (B, C, H_x*W_x)", "\n", "fx_t", "=", "fx", ".", "view", "(", "*", "fx", ".", "shape", "[", ":", "2", "]", ",", "self", ".", "feat_sz_s", ",", "self", ".", "feat_sz_s", ")", ".", "contiguous", "(", ")", "# fx tensor 4D (B, C, H_x, W_x)", "\n", "# run the corner head", "\n", "if", "self", ".", "distill", ":", "\n", "                ", "coord_xyxy", ",", "prob_vec_tl", ",", "prob_vec_br", "=", "self", ".", "box_head", "(", "fx_t", ",", "return_dist", "=", "True", ",", "softmax", "=", "softmax", ")", "\n", "outputs_coord", "=", "box_xyxy_to_cxcywh", "(", "coord_xyxy", ")", "\n", "return", "outputs_coord", ",", "prob_vec_tl", ",", "prob_vec_br", "\n", "", "else", ":", "\n", "                ", "outputs_coord", "=", "box_xyxy_to_cxcywh", "(", "self", ".", "box_head", "(", "fx_t", ")", ")", "\n", "out", "=", "{", "'pred_boxes'", ":", "outputs_coord", "}", "\n", "return", "out", ",", "outputs_coord", "\n", "", "", "else", ":", "\n", "            ", "raise", "ValueError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.adjust": [[106, 116], ["stark_lightning_x_trt.STARKLightningXtrt.bottleneck", "stark_lightning_x_trt.STARKLightningXtrt.flatten().permute", "pos_embed.flatten().permute", "mask.flatten", "stark_lightning_x_trt.STARKLightningXtrt.flatten", "pos_embed.flatten"], "methods", ["None"], ["", "", "def", "adjust", "(", "self", ",", "src_feat", ":", "torch", ".", "Tensor", ",", "pos_embed", ":", "torch", ".", "Tensor", ",", "mask", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "\"\"\"\n        \"\"\"", "\n", "# reduce channel", "\n", "feat", "=", "self", ".", "bottleneck", "(", "src_feat", ")", "# (B, C, H, W)", "\n", "# adjust shapes", "\n", "feat_vec", "=", "feat", ".", "flatten", "(", "2", ")", ".", "permute", "(", "2", ",", "0", ",", "1", ")", "# HWxBxC", "\n", "pos_embed_vec", "=", "pos_embed", ".", "flatten", "(", "2", ")", ".", "permute", "(", "2", ",", "0", ",", "1", ")", "# HWxBxC", "\n", "mask_vec", "=", "mask", ".", "flatten", "(", "1", ")", "# BxHW", "\n", "return", "{", "\"feat\"", ":", "feat_vec", ",", "\"mask\"", ":", "mask_vec", ",", "\"pos\"", ":", "pos_embed_vec", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt_new.__init__": [[143, 147], ["stark_lightning_x_trt.STARKLightningXtrt.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "backbone", ",", "transformer", ",", "box_head", ",", "pos_emb_z", ",", "pos_emb_x", ",", "head_type", "=", "\"CORNER_LITE\"", ",", "\n", "distill", "=", "False", ")", ":", "\n", "        ", "super", "(", "STARKLightningXtrt_new", ",", "self", ")", ".", "__init__", "(", "backbone", ",", "transformer", ",", "box_head", ",", "pos_emb_z", ",", "pos_emb_x", ",", "\n", "head_type", "=", "head_type", ",", "distill", "=", "distill", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt_new.forward_backbone": [[148, 169], ["isinstance", "backbone", "img.size", "stark_lightning_x_trt.STARKLightningXtrt_new.adjust", "stark_lightning_x_trt.STARKLightningXtrt_new.pos_emb_x", "torch.interpolate().to", "torch.interpolate().to", "getattr", "getattr.", "ValueError", "torch.interpolate", "torch.interpolate", "int", "mask[].float"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.STARKLightningXtrt.adjust", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], ["", "def", "forward_backbone", "(", "self", ",", "img", ":", "torch", ".", "Tensor", ",", "zx", ":", "str", ",", "mask", ":", "torch", ".", "Tensor", ",", "backbone", ")", ":", "\n", "        ", "\"\"\"The input type is standard tensor\n               - tensor: batched images, of shape [batch_size x 3 x H x W]\n               - mask: a binary mask of shape [batch_size x H x W], containing 1 on padded pixels\n        \"\"\"", "\n", "assert", "isinstance", "(", "img", ",", "torch", ".", "Tensor", ")", "\n", "\"\"\"run the backbone\"\"\"", "\n", "output_back", "=", "backbone", "(", "img", ")", "# features & masks, position embedding for the search", "\n", "\"\"\"get the positional encoding\"\"\"", "\n", "bs", "=", "img", ".", "size", "(", "0", ")", "# batch size", "\n", "if", "zx", "==", "\"search\"", ":", "\n", "            ", "pos", "=", "self", ".", "pos_emb_x", "(", "bs", ")", "\n", "", "elif", "\"template\"", "in", "zx", ":", "\n", "            ", "pos_emb_z", "=", "getattr", "(", "self", ",", "\"pos_emb_z%d\"", "%", "int", "(", "zx", "[", "-", "1", "]", ")", ")", "\n", "pos", "=", "pos_emb_z", "(", "bs", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "\"zx should be 'template_0' or 'search'.\"", ")", "\n", "", "\"\"\"get the downsampled attention mask\"\"\"", "\n", "mask_down", "=", "F", ".", "interpolate", "(", "mask", "[", "None", "]", ".", "float", "(", ")", ",", "size", "=", "output_back", ".", "shape", "[", "-", "2", ":", "]", ")", ".", "to", "(", "torch", ".", "bool", ")", "[", "0", "]", "\n", "\"\"\"adjust the shape\"\"\"", "\n", "return", "self", ".", "adjust", "(", "output_back", ",", "pos", ",", "mask_down", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.build_stark_lightning_x_trt": [[118, 140], ["backbone_X.build_backbone_x", "lite_encoder.build_lite_encoder", "head.build_box_head", "position_encoding.build_position_encoding_new", "position_encoding.build_position_encoding_new", "stark_lightning_x_trt.STARKLightningXtrt"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone_X.build_backbone_x", "home.repos.pwc.inspect_result.researchmm_Stark.stark.lite_encoder.build_lite_encoder", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.build_box_head", "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.build_position_encoding_new", "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.build_position_encoding_new"], ["", "", "def", "build_stark_lightning_x_trt", "(", "cfg", ",", "phase", ":", "str", ")", ":", "\n", "    ", "\"\"\"phase: 'train' or 'test'\n    during the training phase, we need to\n        (1) load backbone pretrained weights\n        (2) freeze some layers' parameters\"\"\"", "\n", "backbone", "=", "build_backbone_x", "(", "cfg", ",", "phase", "=", "phase", ")", "\n", "transformer", "=", "build_lite_encoder", "(", "cfg", ")", "\n", "box_head", "=", "build_box_head", "(", "cfg", ")", "\n", "fsz_x", ",", "fsz_z", "=", "cfg", ".", "DATA", ".", "SEARCH", ".", "FEAT_SIZE", ",", "cfg", ".", "DATA", ".", "TEMPLATE", ".", "FEAT_SIZE", "\n", "pos_emb_x", "=", "build_position_encoding_new", "(", "cfg", ",", "fsz_x", ")", "\n", "pos_emb_z", "=", "build_position_encoding_new", "(", "cfg", ",", "fsz_z", ")", "\n", "model", "=", "STARKLightningXtrt", "(", "\n", "backbone", ",", "\n", "transformer", ",", "\n", "box_head", ",", "\n", "[", "pos_emb_z", "]", ",", "\n", "pos_emb_x", ",", "\n", "head_type", "=", "cfg", ".", "MODEL", ".", "HEAD_TYPE", ",", "\n", "distill", "=", "cfg", ".", "TRAIN", ".", "DISTILL", "\n", ")", "\n", "\n", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.build_stark_lightning_x_trt_new": [[171, 193], ["backbone_X.build_backbone_x", "lite_encoder.build_lite_encoder", "head.build_box_head", "position_encoding.build_position_encoding_new", "position_encoding.build_position_encoding_new", "stark_lightning_x_trt.STARKLightningXtrt_new"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone_X.build_backbone_x", "home.repos.pwc.inspect_result.researchmm_Stark.stark.lite_encoder.build_lite_encoder", "home.repos.pwc.inspect_result.researchmm_Stark.stark.head.build_box_head", "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.build_position_encoding_new", "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.build_position_encoding_new"], ["", "", "def", "build_stark_lightning_x_trt_new", "(", "cfg", ",", "phase", ":", "str", ")", ":", "\n", "    ", "\"\"\"phase: 'train' or 'test'\n    during the training phase, we need to\n        (1) load backbone pretrained weights\n        (2) freeze some layers' parameters\"\"\"", "\n", "backbone", "=", "build_backbone_x", "(", "cfg", ",", "phase", "=", "phase", ")", "\n", "transformer", "=", "build_lite_encoder", "(", "cfg", ")", "\n", "box_head", "=", "build_box_head", "(", "cfg", ")", "\n", "fsz_x", ",", "fsz_z", "=", "cfg", ".", "DATA", ".", "SEARCH", ".", "FEAT_SIZE", ",", "cfg", ".", "DATA", ".", "TEMPLATE", ".", "FEAT_SIZE", "\n", "pos_emb_x", "=", "build_position_encoding_new", "(", "cfg", ",", "fsz_x", ")", "\n", "pos_emb_z", "=", "build_position_encoding_new", "(", "cfg", ",", "fsz_z", ")", "\n", "model", "=", "STARKLightningXtrt_new", "(", "\n", "backbone", ",", "\n", "transformer", ",", "\n", "box_head", ",", "\n", "[", "pos_emb_z", "]", ",", "\n", "pos_emb_x", ",", "\n", "head_type", "=", "cfg", ".", "MODEL", ".", "HEAD_TYPE", ",", "\n", "distill", "=", "cfg", ".", "TRAIN", ".", "DISTILL", "\n", ")", "\n", "\n", "return", "model", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.Transformer.__init__": [[37, 68], ["torch.nn.Module.__init__", "transformer.TransformerEncoderLayer", "transformer.TransformerDecoderLayer", "torch.nn.LayerNorm", "torch.nn.LayerNorm", "transformer.Transformer._reset_parameters", "torch.nn.LayerNorm", "torch.nn.LayerNorm", "transformer.TransformerEncoder", "transformer.TransformerDecoder", "float"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.Transformer._reset_parameters"], ["    ", "def", "__init__", "(", "self", ",", "d_model", "=", "512", ",", "nhead", "=", "8", ",", "num_encoder_layers", "=", "6", ",", "\n", "num_decoder_layers", "=", "6", ",", "dim_feedforward", "=", "2048", ",", "dropout", "=", "0.1", ",", "\n", "activation", "=", "\"relu\"", ",", "normalize_before", "=", "False", ",", "\n", "return_intermediate_dec", "=", "False", ",", "divide_norm", "=", "False", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "encoder_layer", "=", "TransformerEncoderLayer", "(", "d_model", ",", "nhead", ",", "dim_feedforward", ",", "\n", "dropout", ",", "activation", ",", "normalize_before", ",", "divide_norm", "=", "divide_norm", ")", "\n", "encoder_norm", "=", "nn", ".", "LayerNorm", "(", "d_model", ")", "if", "normalize_before", "else", "None", "\n", "if", "num_encoder_layers", "==", "0", ":", "\n", "            ", "self", ".", "encoder", "=", "None", "\n", "", "else", ":", "\n", "            ", "self", ".", "encoder", "=", "TransformerEncoder", "(", "encoder_layer", ",", "num_encoder_layers", ",", "encoder_norm", ")", "\n", "\n", "", "decoder_layer", "=", "TransformerDecoderLayer", "(", "d_model", ",", "nhead", ",", "dim_feedforward", ",", "\n", "dropout", ",", "activation", ",", "normalize_before", ",", "divide_norm", "=", "divide_norm", ")", "\n", "decoder_norm", "=", "nn", ".", "LayerNorm", "(", "d_model", ")", "\n", "if", "num_decoder_layers", "==", "0", ":", "\n", "            ", "self", ".", "decoder", "=", "None", "\n", "", "else", ":", "\n", "            ", "self", ".", "decoder", "=", "TransformerDecoder", "(", "decoder_layer", ",", "num_decoder_layers", ",", "decoder_norm", ",", "\n", "return_intermediate", "=", "return_intermediate_dec", ")", "\n", "\n", "", "self", ".", "_reset_parameters", "(", ")", "\n", "\n", "self", ".", "d_model", "=", "d_model", "\n", "self", ".", "nhead", "=", "nhead", "\n", "self", ".", "d_feed", "=", "dim_feedforward", "\n", "# 2021.1.7 Try dividing norm to avoid NAN", "\n", "self", ".", "divide_norm", "=", "divide_norm", "\n", "self", ".", "scale_factor", "=", "float", "(", "d_model", "//", "nhead", ")", "**", "0.5", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.Transformer._reset_parameters": [[69, 73], ["transformer.Transformer.parameters", "p.dim", "torch.nn.init.xavier_uniform_", "torch.nn.init.xavier_uniform_"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "_reset_parameters", "(", "self", ")", ":", "\n", "        ", "for", "p", "in", "self", ".", "parameters", "(", ")", ":", "\n", "            ", "if", "p", ".", "dim", "(", ")", ">", "1", ":", "\n", "                ", "nn", ".", "init", ".", "xavier_uniform_", "(", "p", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.Transformer.forward": [[74, 107], ["transformer.Transformer.encoder", "len", "len", "feat.size", "query_embed.unsqueeze().repeat.unsqueeze().repeat.unsqueeze().repeat", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "transformer.Transformer.decoder", "query_embed.unsqueeze().repeat.unsqueeze().repeat.unsqueeze", "query_embed.unsqueeze().repeat.unsqueeze.transpose", "query_embed.unsqueeze().repeat.unsqueeze().repeat.size", "query_embed.unsqueeze().repeat.unsqueeze().repeat.size", "query_embed.unsqueeze().repeat.unsqueeze.transpose", "query_embed.unsqueeze().repeat.unsqueeze().repeat.unsqueeze"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size"], ["", "", "", "def", "forward", "(", "self", ",", "feat", ",", "mask", ",", "query_embed", ",", "pos_embed", ",", "mode", "=", "\"all\"", ",", "return_encoder_output", "=", "False", ")", ":", "\n", "        ", "\"\"\"\n\n        :param feat: (H1W1+H2W2, bs, C)\n        :param mask: (bs, H1W1+H2W2)\n        :param query_embed: (N, C) or (N, B, C)\n        :param pos_embed: (H1W1+H2W2, bs, C)\n        :param mode: run the whole transformer or encoder only\n        :param return_encoder_output: whether to return the output of encoder (together with decoder)\n        :return:\n        \"\"\"", "\n", "assert", "mode", "in", "[", "\"all\"", ",", "\"encoder\"", "]", "\n", "if", "self", ".", "encoder", "is", "None", ":", "\n", "            ", "memory", "=", "feat", "\n", "", "else", ":", "\n", "            ", "memory", "=", "self", ".", "encoder", "(", "feat", ",", "src_key_padding_mask", "=", "mask", ",", "pos", "=", "pos_embed", ")", "\n", "", "if", "mode", "==", "\"encoder\"", ":", "\n", "            ", "return", "memory", "\n", "", "elif", "mode", "==", "\"all\"", ":", "\n", "            ", "assert", "len", "(", "query_embed", ".", "size", "(", ")", ")", "in", "[", "2", ",", "3", "]", "\n", "if", "len", "(", "query_embed", ".", "size", "(", ")", ")", "==", "2", ":", "\n", "                ", "bs", "=", "feat", ".", "size", "(", "1", ")", "\n", "query_embed", "=", "query_embed", ".", "unsqueeze", "(", "1", ")", ".", "repeat", "(", "1", ",", "bs", ",", "1", ")", "# (N,C) --> (N,1,C) --> (N,B,C)", "\n", "", "if", "self", ".", "decoder", "is", "not", "None", ":", "\n", "                ", "tgt", "=", "torch", ".", "zeros_like", "(", "query_embed", ")", "\n", "hs", "=", "self", ".", "decoder", "(", "tgt", ",", "memory", ",", "memory_key_padding_mask", "=", "mask", ",", "\n", "pos", "=", "pos_embed", ",", "query_pos", "=", "query_embed", ")", "\n", "", "else", ":", "\n", "                ", "hs", "=", "query_embed", ".", "unsqueeze", "(", "0", ")", "\n", "", "if", "return_encoder_output", ":", "\n", "                ", "return", "hs", ".", "transpose", "(", "1", ",", "2", ")", ",", "memory", "# (1, B, N, C)", "\n", "", "else", ":", "\n", "                ", "return", "hs", ".", "transpose", "(", "1", ",", "2", ")", "# (1, B, N, C)", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerEncoder.__init__": [[111, 116], ["torch.nn.Module.__init__", "transformer._get_clones"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer._get_clones"], ["    ", "def", "__init__", "(", "self", ",", "encoder_layer", ",", "num_layers", ",", "norm", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "layers", "=", "_get_clones", "(", "encoder_layer", ",", "num_layers", ")", "\n", "self", ".", "num_layers", "=", "num_layers", "\n", "self", ".", "norm", "=", "norm", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerEncoder.forward": [[117, 146], ["layer", "transformer.TransformerEncoder.norm", "output_list.append", "layer", "transformer.TransformerEncoder.norm", "output_list.append"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "src", ",", "\n", "mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "src_key_padding_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "pos", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "return_intermediate", "=", "False", ")", ":", "\n", "        ", "if", "return_intermediate", ":", "\n", "            ", "output_list", "=", "[", "]", "\n", "output", "=", "src", "\n", "\n", "for", "layer", "in", "self", ".", "layers", ":", "\n", "                ", "output", "=", "layer", "(", "output", ",", "src_mask", "=", "mask", ",", "\n", "src_key_padding_mask", "=", "src_key_padding_mask", ",", "pos", "=", "pos", ")", "\n", "if", "self", ".", "norm", "is", "None", ":", "\n", "                    ", "output_list", ".", "append", "(", "output", ")", "\n", "", "", "if", "self", ".", "norm", "is", "not", "None", ":", "\n", "                ", "output", "=", "self", ".", "norm", "(", "output", ")", "\n", "output_list", ".", "append", "(", "output", ")", "\n", "", "return", "output_list", "\n", "", "else", ":", "\n", "            ", "output", "=", "src", "\n", "\n", "for", "layer", "in", "self", ".", "layers", ":", "\n", "                ", "output", "=", "layer", "(", "output", ",", "src_mask", "=", "mask", ",", "\n", "src_key_padding_mask", "=", "src_key_padding_mask", ",", "pos", "=", "pos", ")", "\n", "\n", "", "if", "self", ".", "norm", "is", "not", "None", ":", "\n", "                ", "output", "=", "self", ".", "norm", "(", "output", ")", "\n", "\n", "", "return", "output", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerEncoderLite.__init__": [[150, 156], ["torch.nn.Module.__init__", "transformer._get_clones"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer._get_clones"], ["    ", "def", "__init__", "(", "self", ",", "encoder_layer", ",", "num_layers", ",", "norm", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "layers", "=", "_get_clones", "(", "encoder_layer", ",", "num_layers", ")", "\n", "self", ".", "num_layers", "=", "num_layers", "\n", "self", ".", "norm", "=", "norm", "\n", "assert", "self", ".", "num_layers", "==", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerEncoderLite.forward": [[157, 176], ["output_list.append", "transformer.TransformerEncoderLite.norm", "output_list.append", "transformer.TransformerEncoderLite.norm"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "seq_dict", ",", "return_intermediate", "=", "False", ",", "part_att", "=", "False", ")", ":", "\n", "        ", "if", "return_intermediate", ":", "\n", "            ", "output_list", "=", "[", "]", "\n", "\n", "# for layer in self.layers:", "\n", "output", "=", "self", ".", "layers", "[", "-", "1", "]", "(", "seq_dict", ",", "part_att", "=", "part_att", ")", "\n", "if", "self", ".", "norm", "is", "None", ":", "\n", "                ", "output_list", ".", "append", "(", "output", ")", "\n", "", "if", "self", ".", "norm", "is", "not", "None", ":", "\n", "                ", "output", "=", "self", ".", "norm", "(", "output", ")", "\n", "output_list", ".", "append", "(", "output", ")", "\n", "", "return", "output_list", "\n", "", "else", ":", "\n", "            ", "output", "=", "self", ".", "layers", "[", "-", "1", "]", "(", "seq_dict", ",", "part_att", "=", "part_att", ")", "\n", "\n", "if", "self", ".", "norm", "is", "not", "None", ":", "\n", "                ", "output", "=", "self", ".", "norm", "(", "output", ")", "\n", "\n", "", "return", "output", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoder.__init__": [[180, 186], ["torch.nn.Module.__init__", "transformer._get_clones"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer._get_clones"], ["    ", "def", "__init__", "(", "self", ",", "decoder_layer", ",", "num_layers", ",", "norm", "=", "None", ",", "return_intermediate", "=", "False", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "layers", "=", "_get_clones", "(", "decoder_layer", ",", "num_layers", ")", "\n", "self", ".", "num_layers", "=", "num_layers", "\n", "self", ".", "norm", "=", "norm", "\n", "self", ".", "return_intermediate", "=", "return_intermediate", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoder.forward": [[187, 217], ["transformer.TransformerDecoder.unsqueeze", "layer", "transformer.TransformerDecoder.norm", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "intermediate.append", "intermediate.pop", "intermediate.append", "transformer.TransformerDecoder.norm"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "tgt", ",", "memory", ",", "\n", "tgt_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "memory_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "tgt_key_padding_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "memory_key_padding_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "pos", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "query_pos", ":", "Optional", "[", "Tensor", "]", "=", "None", ")", ":", "\n", "        ", "output", "=", "tgt", "\n", "\n", "intermediate", "=", "[", "]", "\n", "\n", "for", "layer", "in", "self", ".", "layers", ":", "\n", "            ", "output", "=", "layer", "(", "output", ",", "memory", ",", "tgt_mask", "=", "tgt_mask", ",", "\n", "memory_mask", "=", "memory_mask", ",", "\n", "tgt_key_padding_mask", "=", "tgt_key_padding_mask", ",", "\n", "memory_key_padding_mask", "=", "memory_key_padding_mask", ",", "\n", "pos", "=", "pos", ",", "query_pos", "=", "query_pos", ")", "\n", "if", "self", ".", "return_intermediate", ":", "\n", "                ", "intermediate", ".", "append", "(", "self", ".", "norm", "(", "output", ")", ")", "\n", "\n", "", "", "if", "self", ".", "norm", "is", "not", "None", ":", "\n", "            ", "output", "=", "self", ".", "norm", "(", "output", ")", "\n", "if", "self", ".", "return_intermediate", ":", "\n", "                ", "intermediate", ".", "pop", "(", ")", "\n", "intermediate", ".", "append", "(", "output", ")", "\n", "\n", "", "", "if", "self", ".", "return_intermediate", ":", "\n", "            ", "return", "torch", ".", "stack", "(", "intermediate", ")", "\n", "\n", "", "return", "output", ".", "unsqueeze", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerEncoderLayer.__init__": [[221, 240], ["torch.nn.Module.__init__", "torch.nn.MultiheadAttention", "torch.nn.MultiheadAttention", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Dropout", "torch.nn.Dropout", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.LayerNorm", "torch.nn.LayerNorm", "torch.nn.LayerNorm", "torch.nn.LayerNorm", "torch.nn.Dropout", "torch.nn.Dropout", "torch.nn.Dropout", "torch.nn.Dropout", "transformer._get_activation_fn", "float"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer._get_activation_fn"], ["    ", "def", "__init__", "(", "self", ",", "d_model", ",", "nhead", ",", "dim_feedforward", "=", "2048", ",", "dropout", "=", "0.1", ",", "\n", "activation", "=", "\"relu\"", ",", "normalize_before", "=", "False", ",", "divide_norm", "=", "False", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "self_attn", "=", "nn", ".", "MultiheadAttention", "(", "d_model", ",", "nhead", ",", "dropout", "=", "dropout", ")", "\n", "# Implementation of Feedforward model", "\n", "self", ".", "linear1", "=", "nn", ".", "Linear", "(", "d_model", ",", "dim_feedforward", ")", "\n", "self", ".", "dropout", "=", "nn", ".", "Dropout", "(", "dropout", ")", "\n", "self", ".", "linear2", "=", "nn", ".", "Linear", "(", "dim_feedforward", ",", "d_model", ")", "\n", "\n", "self", ".", "norm1", "=", "nn", ".", "LayerNorm", "(", "d_model", ")", "\n", "self", ".", "norm2", "=", "nn", ".", "LayerNorm", "(", "d_model", ")", "\n", "self", ".", "dropout1", "=", "nn", ".", "Dropout", "(", "dropout", ")", "\n", "self", ".", "dropout2", "=", "nn", ".", "Dropout", "(", "dropout", ")", "\n", "\n", "self", ".", "activation", "=", "_get_activation_fn", "(", "activation", ")", "\n", "self", ".", "normalize_before", "=", "normalize_before", "# first normalization, then add", "\n", "\n", "self", ".", "divide_norm", "=", "divide_norm", "\n", "self", ".", "scale_factor", "=", "float", "(", "d_model", "//", "nhead", ")", "**", "0.5", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerEncoderLayer.with_pos_embed": [[241, 243], ["None"], "methods", ["None"], ["", "def", "with_pos_embed", "(", "self", ",", "tensor", ",", "pos", ":", "Optional", "[", "Tensor", "]", ")", ":", "\n", "        ", "return", "tensor", "if", "pos", "is", "None", "else", "tensor", "+", "pos", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerEncoderLayer.forward_post": [[244, 262], ["transformer.TransformerEncoderLayer.with_pos_embed", "transformer.TransformerEncoderLayer.norm1", "transformer.TransformerEncoderLayer.linear2", "transformer.TransformerEncoderLayer.norm2", "transformer.TransformerEncoderLayer.self_attn", "transformer.TransformerEncoderLayer.dropout1", "transformer.TransformerEncoderLayer.dropout", "transformer.TransformerEncoderLayer.dropout2", "torch.norm", "torch.norm", "torch.norm", "torch.norm", "transformer.TransformerEncoderLayer.activation", "torch.norm", "torch.norm", "torch.norm", "torch.norm", "transformer.TransformerEncoderLayer.linear1"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.with_pos_embed"], ["", "def", "forward_post", "(", "self", ",", "\n", "src", ",", "\n", "src_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "src_key_padding_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "pos", ":", "Optional", "[", "Tensor", "]", "=", "None", ")", ":", "\n", "        ", "q", "=", "k", "=", "self", ".", "with_pos_embed", "(", "src", ",", "pos", ")", "# add pos to src", "\n", "if", "self", ".", "divide_norm", ":", "\n", "# print(\"encoder divide by norm\")", "\n", "            ", "q", "=", "q", "/", "torch", ".", "norm", "(", "q", ",", "dim", "=", "-", "1", ",", "keepdim", "=", "True", ")", "*", "self", ".", "scale_factor", "\n", "k", "=", "k", "/", "torch", ".", "norm", "(", "k", ",", "dim", "=", "-", "1", ",", "keepdim", "=", "True", ")", "\n", "", "src2", "=", "self", ".", "self_attn", "(", "q", ",", "k", ",", "src", ",", "attn_mask", "=", "src_mask", ",", "\n", "key_padding_mask", "=", "src_key_padding_mask", ")", "[", "0", "]", "\n", "src", "=", "src", "+", "self", ".", "dropout1", "(", "src2", ")", "\n", "src", "=", "self", ".", "norm1", "(", "src", ")", "\n", "src2", "=", "self", ".", "linear2", "(", "self", ".", "dropout", "(", "self", ".", "activation", "(", "self", ".", "linear1", "(", "src", ")", ")", ")", ")", "\n", "src", "=", "src", "+", "self", ".", "dropout2", "(", "src2", ")", "\n", "src", "=", "self", ".", "norm2", "(", "src", ")", "\n", "return", "src", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerEncoderLayer.forward_pre": [[263, 276], ["transformer.TransformerEncoderLayer.norm1", "transformer.TransformerEncoderLayer.with_pos_embed", "transformer.TransformerEncoderLayer.norm2", "transformer.TransformerEncoderLayer.linear2", "transformer.TransformerEncoderLayer.self_attn", "transformer.TransformerEncoderLayer.dropout1", "transformer.TransformerEncoderLayer.dropout", "transformer.TransformerEncoderLayer.dropout2", "transformer.TransformerEncoderLayer.activation", "transformer.TransformerEncoderLayer.linear1"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.with_pos_embed"], ["", "def", "forward_pre", "(", "self", ",", "src", ",", "\n", "src_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "src_key_padding_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "pos", ":", "Optional", "[", "Tensor", "]", "=", "None", ")", ":", "\n", "        ", "src2", "=", "self", ".", "norm1", "(", "src", ")", "\n", "q", "=", "k", "=", "self", ".", "with_pos_embed", "(", "src2", ",", "pos", ")", "\n", "src2", "=", "self", ".", "self_attn", "(", "q", ",", "k", ",", "value", "=", "src2", ",", "attn_mask", "=", "src_mask", ",", "\n", "key_padding_mask", "=", "src_key_padding_mask", ")", "[", "0", "]", "\n", "src", "=", "src", "+", "self", ".", "dropout1", "(", "src2", ")", "\n", "src2", "=", "self", ".", "norm2", "(", "src", ")", "\n", "src2", "=", "self", ".", "linear2", "(", "self", ".", "dropout", "(", "self", ".", "activation", "(", "self", ".", "linear1", "(", "src2", ")", ")", ")", ")", "\n", "src", "=", "src", "+", "self", ".", "dropout2", "(", "src2", ")", "\n", "return", "src", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerEncoderLayer.forward": [[277, 284], ["transformer.TransformerEncoderLayer.forward_post", "transformer.TransformerEncoderLayer.forward_pre"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.forward_post", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.forward_pre"], ["", "def", "forward", "(", "self", ",", "src", ",", "\n", "src_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "src_key_padding_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "pos", ":", "Optional", "[", "Tensor", "]", "=", "None", ")", ":", "\n", "        ", "if", "self", ".", "normalize_before", ":", "\n", "            ", "return", "self", ".", "forward_pre", "(", "src", ",", "src_mask", ",", "src_key_padding_mask", ",", "pos", ")", "\n", "", "return", "self", ".", "forward_post", "(", "src", ",", "src_mask", ",", "src_key_padding_mask", ",", "pos", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerEncoderLayerLite.__init__": [[288, 307], ["torch.nn.Module.__init__", "torch.nn.MultiheadAttention", "torch.nn.MultiheadAttention", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Dropout", "torch.nn.Dropout", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.LayerNorm", "torch.nn.LayerNorm", "torch.nn.LayerNorm", "torch.nn.LayerNorm", "torch.nn.Dropout", "torch.nn.Dropout", "torch.nn.Dropout", "torch.nn.Dropout", "transformer._get_activation_fn", "float"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer._get_activation_fn"], ["def", "__init__", "(", "self", ",", "d_model", ",", "nhead", ",", "dim_feedforward", "=", "2048", ",", "dropout", "=", "0.1", ",", "\n", "activation", "=", "\"relu\"", ",", "normalize_before", "=", "False", ",", "divide_norm", "=", "False", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "self_attn", "=", "nn", ".", "MultiheadAttention", "(", "d_model", ",", "nhead", ",", "dropout", "=", "dropout", ")", "\n", "# Implementation of Feedforward model", "\n", "self", ".", "linear1", "=", "nn", ".", "Linear", "(", "d_model", ",", "dim_feedforward", ")", "\n", "self", ".", "dropout", "=", "nn", ".", "Dropout", "(", "dropout", ")", "\n", "self", ".", "linear2", "=", "nn", ".", "Linear", "(", "dim_feedforward", ",", "d_model", ")", "\n", "\n", "self", ".", "norm1", "=", "nn", ".", "LayerNorm", "(", "d_model", ")", "\n", "self", ".", "norm2", "=", "nn", ".", "LayerNorm", "(", "d_model", ")", "\n", "self", ".", "dropout1", "=", "nn", ".", "Dropout", "(", "dropout", ")", "\n", "self", ".", "dropout2", "=", "nn", ".", "Dropout", "(", "dropout", ")", "\n", "\n", "self", ".", "activation", "=", "_get_activation_fn", "(", "activation", ")", "\n", "self", ".", "normalize_before", "=", "normalize_before", "# first normalization, then add", "\n", "\n", "self", ".", "divide_norm", "=", "divide_norm", "\n", "self", ".", "scale_factor", "=", "float", "(", "d_model", "//", "nhead", ")", "**", "0.5", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerEncoderLayerLite.with_pos_embed": [[308, 310], ["None"], "methods", ["None"], ["", "def", "with_pos_embed", "(", "self", ",", "tensor", ",", "pos", ":", "Optional", "[", "Tensor", "]", ")", ":", "\n", "        ", "return", "tensor", "if", "pos", "is", "None", "else", "tensor", "+", "pos", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerEncoderLayerLite.forward_post": [[311, 341], ["transformer.TransformerEncoderLayerLite.norm1", "transformer.TransformerEncoderLayerLite.linear2", "transformer.TransformerEncoderLayerLite.norm2", "transformer.TransformerEncoderLayerLite.with_pos_embed", "transformer.TransformerEncoderLayerLite.with_pos_embed", "transformer.TransformerEncoderLayerLite.with_pos_embed", "transformer.TransformerEncoderLayerLite.with_pos_embed", "ValueError", "transformer.TransformerEncoderLayerLite.self_attn", "transformer.TransformerEncoderLayerLite.dropout1", "transformer.TransformerEncoderLayerLite.dropout", "transformer.TransformerEncoderLayerLite.dropout2", "transformer.TransformerEncoderLayerLite.activation", "transformer.TransformerEncoderLayerLite.linear1"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.with_pos_embed", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.with_pos_embed", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.with_pos_embed", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.with_pos_embed"], ["", "def", "forward_post", "(", "self", ",", "seq_dict", ",", "part_att", "=", "False", ")", ":", "\n", "        ", "\"\"\"\n        seq_dict: sequence dict of both the search region and the template (concatenated)\n        \"\"\"", "\n", "if", "part_att", ":", "\n", "# print(\"using part attention\")", "\n", "            ", "q", "=", "self", ".", "with_pos_embed", "(", "seq_dict", "[", "\"feat_x\"", "]", ",", "seq_dict", "[", "\"pos_x\"", "]", ")", "# search region as query", "\n", "k", "=", "self", ".", "with_pos_embed", "(", "seq_dict", "[", "\"feat_z\"", "]", ",", "seq_dict", "[", "\"pos_z\"", "]", ")", "# template as key", "\n", "v", "=", "seq_dict", "[", "\"feat_z\"", "]", "\n", "key_padding_mask", "=", "seq_dict", "[", "\"mask_z\"", "]", "\n", "# print(q.size(), k.size(), v.size())", "\n", "", "else", ":", "\n", "            ", "q", "=", "self", ".", "with_pos_embed", "(", "seq_dict", "[", "\"feat_x\"", "]", ",", "seq_dict", "[", "\"pos_x\"", "]", ")", "# search region as query", "\n", "k", "=", "self", ".", "with_pos_embed", "(", "seq_dict", "[", "\"feat\"", "]", ",", "seq_dict", "[", "\"pos\"", "]", ")", "# concat as key", "\n", "v", "=", "seq_dict", "[", "\"feat\"", "]", "\n", "key_padding_mask", "=", "seq_dict", "[", "\"mask\"", "]", "\n", "", "if", "self", ".", "divide_norm", ":", "\n", "            ", "raise", "ValueError", "(", "\"divide norm is not supported.\"", ")", "\n", "# s = time.time()", "\n", "", "src2", "=", "self", ".", "self_attn", "(", "q", ",", "k", ",", "value", "=", "v", ",", "key_padding_mask", "=", "key_padding_mask", ")", "[", "0", "]", "\n", "src", "=", "q", "+", "self", ".", "dropout1", "(", "src2", ")", "\n", "src", "=", "self", ".", "norm1", "(", "src", ")", "\n", "# e1 = time.time()", "\n", "src2", "=", "self", ".", "linear2", "(", "self", ".", "dropout", "(", "self", ".", "activation", "(", "self", ".", "linear1", "(", "src", ")", ")", ")", ")", "\n", "src", "=", "src", "+", "self", ".", "dropout2", "(", "src2", ")", "\n", "src", "=", "self", ".", "norm2", "(", "src", ")", "\n", "# e2 = time.time()", "\n", "# print(\"self-attention time: %.1f\" % ((e1-s) * 1000))", "\n", "# print(\"MLP time: %.1f\" % ((e2-e1) * 1000))", "\n", "return", "src", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerEncoderLayerLite.forward": [[342, 346], ["transformer.TransformerEncoderLayerLite.forward_post", "ValueError"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.forward_post"], ["", "def", "forward", "(", "self", ",", "seq_dict", ",", "part_att", "=", "False", ")", ":", "\n", "        ", "if", "self", ".", "normalize_before", ":", "\n", "            ", "raise", "ValueError", "(", "\"PRE-NORM is not supported now\"", ")", "\n", "", "return", "self", ".", "forward_post", "(", "seq_dict", ",", "part_att", "=", "part_att", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.__init__": [[350, 372], ["torch.nn.Module.__init__", "torch.nn.MultiheadAttention", "torch.nn.MultiheadAttention", "torch.nn.MultiheadAttention", "torch.nn.MultiheadAttention", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.Dropout", "torch.nn.Dropout", "torch.nn.Linear", "torch.nn.Linear", "torch.nn.LayerNorm", "torch.nn.LayerNorm", "torch.nn.LayerNorm", "torch.nn.LayerNorm", "torch.nn.LayerNorm", "torch.nn.LayerNorm", "torch.nn.Dropout", "torch.nn.Dropout", "torch.nn.Dropout", "torch.nn.Dropout", "torch.nn.Dropout", "torch.nn.Dropout", "transformer._get_activation_fn", "float"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer._get_activation_fn"], ["    ", "def", "__init__", "(", "self", ",", "d_model", ",", "nhead", ",", "dim_feedforward", "=", "2048", ",", "dropout", "=", "0.1", ",", "\n", "activation", "=", "\"relu\"", ",", "normalize_before", "=", "False", ",", "divide_norm", "=", "False", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "self_attn", "=", "nn", ".", "MultiheadAttention", "(", "d_model", ",", "nhead", ",", "dropout", "=", "dropout", ")", "\n", "self", ".", "multihead_attn", "=", "nn", ".", "MultiheadAttention", "(", "d_model", ",", "nhead", ",", "dropout", "=", "dropout", ")", "\n", "# Implementation of Feedforward model", "\n", "self", ".", "linear1", "=", "nn", ".", "Linear", "(", "d_model", ",", "dim_feedforward", ")", "\n", "self", ".", "dropout", "=", "nn", ".", "Dropout", "(", "dropout", ")", "\n", "self", ".", "linear2", "=", "nn", ".", "Linear", "(", "dim_feedforward", ",", "d_model", ")", "\n", "\n", "self", ".", "norm1", "=", "nn", ".", "LayerNorm", "(", "d_model", ")", "\n", "self", ".", "norm2", "=", "nn", ".", "LayerNorm", "(", "d_model", ")", "\n", "self", ".", "norm3", "=", "nn", ".", "LayerNorm", "(", "d_model", ")", "\n", "self", ".", "dropout1", "=", "nn", ".", "Dropout", "(", "dropout", ")", "\n", "self", ".", "dropout2", "=", "nn", ".", "Dropout", "(", "dropout", ")", "\n", "self", ".", "dropout3", "=", "nn", ".", "Dropout", "(", "dropout", ")", "\n", "\n", "self", ".", "activation", "=", "_get_activation_fn", "(", "activation", ")", "\n", "self", ".", "normalize_before", "=", "normalize_before", "\n", "\n", "self", ".", "divide_norm", "=", "divide_norm", "\n", "self", ".", "scale_factor", "=", "float", "(", "d_model", "//", "nhead", ")", "**", "0.5", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.with_pos_embed": [[373, 375], ["None"], "methods", ["None"], ["", "def", "with_pos_embed", "(", "self", ",", "tensor", ",", "pos", ":", "Optional", "[", "Tensor", "]", ")", ":", "\n", "        ", "return", "tensor", "if", "pos", "is", "None", "else", "tensor", "+", "pos", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.forward_post": [[376, 405], ["transformer.TransformerDecoderLayer.with_pos_embed", "transformer.TransformerDecoderLayer.norm1", "transformer.TransformerDecoderLayer.norm2", "transformer.TransformerDecoderLayer.linear2", "transformer.TransformerDecoderLayer.norm3", "transformer.TransformerDecoderLayer.self_attn", "transformer.TransformerDecoderLayer.dropout1", "transformer.TransformerDecoderLayer.with_pos_embed", "transformer.TransformerDecoderLayer.with_pos_embed", "transformer.TransformerDecoderLayer.multihead_attn", "transformer.TransformerDecoderLayer.dropout2", "transformer.TransformerDecoderLayer.dropout", "transformer.TransformerDecoderLayer.dropout3", "torch.norm", "torch.norm", "torch.norm", "torch.norm", "torch.norm", "torch.norm", "torch.norm", "torch.norm", "transformer.TransformerDecoderLayer.activation", "torch.norm", "torch.norm", "torch.norm", "torch.norm", "torch.norm", "torch.norm", "torch.norm", "torch.norm", "transformer.TransformerDecoderLayer.linear1"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.with_pos_embed", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.with_pos_embed", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.with_pos_embed"], ["", "def", "forward_post", "(", "self", ",", "tgt", ",", "memory", ",", "\n", "tgt_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "memory_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "tgt_key_padding_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "memory_key_padding_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "pos", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "query_pos", ":", "Optional", "[", "Tensor", "]", "=", "None", ")", ":", "\n", "# self-attention", "\n", "        ", "q", "=", "k", "=", "self", ".", "with_pos_embed", "(", "tgt", ",", "query_pos", ")", "# Add object query to the query and key", "\n", "if", "self", ".", "divide_norm", ":", "\n", "            ", "q", "=", "q", "/", "torch", ".", "norm", "(", "q", ",", "dim", "=", "-", "1", ",", "keepdim", "=", "True", ")", "*", "self", ".", "scale_factor", "\n", "k", "=", "k", "/", "torch", ".", "norm", "(", "k", ",", "dim", "=", "-", "1", ",", "keepdim", "=", "True", ")", "\n", "", "tgt2", "=", "self", ".", "self_attn", "(", "q", ",", "k", ",", "tgt", ",", "attn_mask", "=", "tgt_mask", ",", "\n", "key_padding_mask", "=", "tgt_key_padding_mask", ")", "[", "0", "]", "\n", "tgt", "=", "tgt", "+", "self", ".", "dropout1", "(", "tgt2", ")", "\n", "tgt", "=", "self", ".", "norm1", "(", "tgt", ")", "\n", "# mutual attention", "\n", "queries", ",", "keys", "=", "self", ".", "with_pos_embed", "(", "tgt", ",", "query_pos", ")", ",", "self", ".", "with_pos_embed", "(", "memory", ",", "pos", ")", "\n", "if", "self", ".", "divide_norm", ":", "\n", "            ", "queries", "=", "queries", "/", "torch", ".", "norm", "(", "queries", ",", "dim", "=", "-", "1", ",", "keepdim", "=", "True", ")", "*", "self", ".", "scale_factor", "\n", "keys", "=", "keys", "/", "torch", ".", "norm", "(", "keys", ",", "dim", "=", "-", "1", ",", "keepdim", "=", "True", ")", "\n", "", "tgt2", "=", "self", ".", "multihead_attn", "(", "queries", ",", "keys", ",", "memory", ",", "attn_mask", "=", "memory_mask", ",", "\n", "key_padding_mask", "=", "memory_key_padding_mask", ")", "[", "0", "]", "\n", "tgt", "=", "tgt", "+", "self", ".", "dropout2", "(", "tgt2", ")", "\n", "tgt", "=", "self", ".", "norm2", "(", "tgt", ")", "\n", "tgt2", "=", "self", ".", "linear2", "(", "self", ".", "dropout", "(", "self", ".", "activation", "(", "self", ".", "linear1", "(", "tgt", ")", ")", ")", ")", "\n", "tgt", "=", "tgt", "+", "self", ".", "dropout3", "(", "tgt2", ")", "\n", "tgt", "=", "self", ".", "norm3", "(", "tgt", ")", "\n", "return", "tgt", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.forward_pre": [[406, 428], ["transformer.TransformerDecoderLayer.norm1", "transformer.TransformerDecoderLayer.with_pos_embed", "transformer.TransformerDecoderLayer.norm2", "transformer.TransformerDecoderLayer.norm3", "transformer.TransformerDecoderLayer.linear2", "transformer.TransformerDecoderLayer.self_attn", "transformer.TransformerDecoderLayer.dropout1", "transformer.TransformerDecoderLayer.multihead_attn", "transformer.TransformerDecoderLayer.dropout2", "transformer.TransformerDecoderLayer.dropout", "transformer.TransformerDecoderLayer.dropout3", "transformer.TransformerDecoderLayer.activation", "transformer.TransformerDecoderLayer.with_pos_embed", "transformer.TransformerDecoderLayer.with_pos_embed", "transformer.TransformerDecoderLayer.linear1"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.with_pos_embed", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.with_pos_embed", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.with_pos_embed"], ["", "def", "forward_pre", "(", "self", ",", "tgt", ",", "memory", ",", "\n", "tgt_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "memory_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "tgt_key_padding_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "memory_key_padding_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "pos", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "query_pos", ":", "Optional", "[", "Tensor", "]", "=", "None", ")", ":", "\n", "        ", "tgt2", "=", "self", ".", "norm1", "(", "tgt", ")", "\n", "q", "=", "k", "=", "self", ".", "with_pos_embed", "(", "tgt2", ",", "query_pos", ")", "\n", "tgt2", "=", "self", ".", "self_attn", "(", "q", ",", "k", ",", "value", "=", "tgt2", ",", "attn_mask", "=", "tgt_mask", ",", "\n", "key_padding_mask", "=", "tgt_key_padding_mask", ")", "[", "0", "]", "\n", "tgt", "=", "tgt", "+", "self", ".", "dropout1", "(", "tgt2", ")", "\n", "tgt2", "=", "self", ".", "norm2", "(", "tgt", ")", "\n", "tgt2", "=", "self", ".", "multihead_attn", "(", "query", "=", "self", ".", "with_pos_embed", "(", "tgt2", ",", "query_pos", ")", ",", "\n", "key", "=", "self", ".", "with_pos_embed", "(", "memory", ",", "pos", ")", ",", "\n", "value", "=", "memory", ",", "attn_mask", "=", "memory_mask", ",", "\n", "key_padding_mask", "=", "memory_key_padding_mask", ")", "[", "0", "]", "\n", "tgt", "=", "tgt", "+", "self", ".", "dropout2", "(", "tgt2", ")", "\n", "tgt2", "=", "self", ".", "norm3", "(", "tgt", ")", "\n", "tgt2", "=", "self", ".", "linear2", "(", "self", ".", "dropout", "(", "self", ".", "activation", "(", "self", ".", "linear1", "(", "tgt2", ")", ")", ")", ")", "\n", "tgt", "=", "tgt", "+", "self", ".", "dropout3", "(", "tgt2", ")", "\n", "return", "tgt", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.forward": [[429, 441], ["transformer.TransformerDecoderLayer.forward_post", "transformer.TransformerDecoderLayer.forward_pre"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.forward_post", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.TransformerDecoderLayer.forward_pre"], ["", "def", "forward", "(", "self", ",", "tgt", ",", "memory", ",", "\n", "tgt_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "memory_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "tgt_key_padding_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "memory_key_padding_mask", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "pos", ":", "Optional", "[", "Tensor", "]", "=", "None", ",", "\n", "query_pos", ":", "Optional", "[", "Tensor", "]", "=", "None", ")", ":", "\n", "        ", "if", "self", ".", "normalize_before", ":", "\n", "            ", "return", "self", ".", "forward_pre", "(", "tgt", ",", "memory", ",", "tgt_mask", ",", "memory_mask", ",", "\n", "tgt_key_padding_mask", ",", "memory_key_padding_mask", ",", "pos", ",", "query_pos", ")", "\n", "", "return", "self", ".", "forward_post", "(", "tgt", ",", "memory", ",", "tgt_mask", ",", "memory_mask", ",", "\n", "tgt_key_padding_mask", ",", "memory_key_padding_mask", ",", "pos", ",", "query_pos", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.check_inf": [[20, 22], ["torch.isinf().any", "torch.isinf().any", "torch.isinf", "torch.isinf", "tensor.detach"], "function", ["None"], ["def", "check_inf", "(", "tensor", ")", ":", "\n", "    ", "return", "torch", ".", "isinf", "(", "tensor", ".", "detach", "(", ")", ")", ".", "any", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.check_nan": [[24, 26], ["torch.isnan().any", "torch.isnan().any", "torch.isnan", "torch.isnan", "tensor.detach"], "function", ["None"], ["", "def", "check_nan", "(", "tensor", ")", ":", "\n", "    ", "return", "torch", ".", "isnan", "(", "tensor", ".", "detach", "(", ")", ")", ".", "any", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.check_valid": [[28, 33], ["transformer.check_inf", "transformer.check_nan", "print", "print"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.check_inf", "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.check_nan"], ["", "def", "check_valid", "(", "tensor", ",", "type_name", ")", ":", "\n", "    ", "if", "check_inf", "(", "tensor", ")", ":", "\n", "        ", "print", "(", "\"%s is inf.\"", "%", "type_name", ")", "\n", "", "if", "check_nan", "(", "tensor", ")", ":", "\n", "        ", "print", "(", "\"%s is nan\"", "%", "type_name", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer._get_clones": [[443, 445], ["torch.nn.ModuleList", "copy.deepcopy", "range"], "function", ["None"], ["", "", "def", "_get_clones", "(", "module", ",", "N", ")", ":", "\n", "    ", "return", "nn", ".", "ModuleList", "(", "[", "copy", ".", "deepcopy", "(", "module", ")", "for", "i", "in", "range", "(", "N", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer.build_transformer": [[447, 458], ["transformer.Transformer"], "function", ["None"], ["", "def", "build_transformer", "(", "cfg", ")", ":", "\n", "    ", "return", "Transformer", "(", "\n", "d_model", "=", "cfg", ".", "MODEL", ".", "HIDDEN_DIM", ",", "\n", "dropout", "=", "cfg", ".", "MODEL", ".", "TRANSFORMER", ".", "DROPOUT", ",", "\n", "nhead", "=", "cfg", ".", "MODEL", ".", "TRANSFORMER", ".", "NHEADS", ",", "\n", "dim_feedforward", "=", "cfg", ".", "MODEL", ".", "TRANSFORMER", ".", "DIM_FEEDFORWARD", ",", "\n", "num_encoder_layers", "=", "cfg", ".", "MODEL", ".", "TRANSFORMER", ".", "ENC_LAYERS", ",", "\n", "num_decoder_layers", "=", "cfg", ".", "MODEL", ".", "TRANSFORMER", ".", "DEC_LAYERS", ",", "\n", "normalize_before", "=", "cfg", ".", "MODEL", ".", "TRANSFORMER", ".", "PRE_NORM", ",", "\n", "return_intermediate_dec", "=", "False", ",", "# we use false to avoid DDP error,", "\n", "divide_norm", "=", "cfg", ".", "MODEL", ".", "TRANSFORMER", ".", "DIVIDE_NORM", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.transformer._get_activation_fn": [[461, 470], ["RuntimeError"], "function", ["None"], ["", "def", "_get_activation_fn", "(", "activation", ")", ":", "\n", "    ", "\"\"\"Return an activation function given a string\"\"\"", "\n", "if", "activation", "==", "\"relu\"", ":", "\n", "        ", "return", "F", ".", "relu", "\n", "", "if", "activation", "==", "\"gelu\"", ":", "\n", "        ", "return", "F", ".", "gelu", "\n", "", "if", "activation", "==", "\"glu\"", ":", "\n", "        ", "return", "F", ".", "glu", "\n", "", "raise", "RuntimeError", "(", "F\"activation should be relu/gelu, not {activation}.\"", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.PositionEmbeddingSine.__init__": [[16, 26], ["torch.nn.Module.__init__", "ValueError"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "num_pos_feats", "=", "64", ",", "temperature", "=", "10000", ",", "normalize", "=", "False", ",", "scale", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "num_pos_feats", "=", "num_pos_feats", "\n", "self", ".", "temperature", "=", "temperature", "\n", "self", ".", "normalize", "=", "normalize", "\n", "if", "scale", "is", "not", "None", "and", "normalize", "is", "False", ":", "\n", "            ", "raise", "ValueError", "(", "\"normalize should be True if scale is passed\"", ")", "\n", "", "if", "scale", "is", "None", ":", "\n", "            ", "scale", "=", "2", "*", "math", ".", "pi", "\n", "", "self", ".", "scale", "=", "scale", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.PositionEmbeddingSine.forward": [[27, 48], ["not_mask.cumsum", "not_mask.cumsum", "torch.arange", "torch.stack().flatten", "torch.stack().flatten", "torch.cat().permute", "torch.stack", "torch.stack", "torch.cat", "pos_x[].sin", "pos_x[].cos", "pos_y[].sin", "pos_y[].cos"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "tensor_list", ":", "NestedTensor", ")", ":", "\n", "        ", "x", "=", "tensor_list", ".", "tensors", "\n", "mask", "=", "tensor_list", ".", "mask", "\n", "assert", "mask", "is", "not", "None", "\n", "not_mask", "=", "~", "mask", "# (b,h,w)", "\n", "y_embed", "=", "not_mask", ".", "cumsum", "(", "1", ",", "dtype", "=", "torch", ".", "float32", ")", "# cumulative sum along axis 1 (h axis) --> (b, h, w)", "\n", "x_embed", "=", "not_mask", ".", "cumsum", "(", "2", ",", "dtype", "=", "torch", ".", "float32", ")", "# cumulative sum along axis 2 (w axis) --> (b, h, w)", "\n", "if", "self", ".", "normalize", ":", "\n", "            ", "eps", "=", "1e-6", "\n", "y_embed", "=", "y_embed", "/", "(", "y_embed", "[", ":", ",", "-", "1", ":", ",", ":", "]", "+", "eps", ")", "*", "self", ".", "scale", "# 2pi * (y / sigma(y))", "\n", "x_embed", "=", "x_embed", "/", "(", "x_embed", "[", ":", ",", ":", ",", "-", "1", ":", "]", "+", "eps", ")", "*", "self", ".", "scale", "# 2pi * (x / sigma(x))", "\n", "\n", "", "dim_t", "=", "torch", ".", "arange", "(", "self", ".", "num_pos_feats", ",", "dtype", "=", "torch", ".", "float32", ",", "device", "=", "x", ".", "device", ")", "# (0,1,2,...,d/2)", "\n", "dim_t", "=", "self", ".", "temperature", "**", "(", "2", "*", "(", "dim_t", "//", "2", ")", "/", "self", ".", "num_pos_feats", ")", "\n", "\n", "pos_x", "=", "x_embed", "[", ":", ",", ":", ",", ":", ",", "None", "]", "/", "dim_t", "# (b,h,w,d/2)", "\n", "pos_y", "=", "y_embed", "[", ":", ",", ":", ",", ":", ",", "None", "]", "/", "dim_t", "# (b,h,w,d/2)", "\n", "pos_x", "=", "torch", ".", "stack", "(", "(", "pos_x", "[", ":", ",", ":", ",", ":", ",", "0", ":", ":", "2", "]", ".", "sin", "(", ")", ",", "pos_x", "[", ":", ",", ":", ",", ":", ",", "1", ":", ":", "2", "]", ".", "cos", "(", ")", ")", ",", "dim", "=", "4", ")", ".", "flatten", "(", "3", ")", "# (b,h,w,d/2)", "\n", "pos_y", "=", "torch", ".", "stack", "(", "(", "pos_y", "[", ":", ",", ":", ",", ":", ",", "0", ":", ":", "2", "]", ".", "sin", "(", ")", ",", "pos_y", "[", ":", ",", ":", ",", ":", ",", "1", ":", ":", "2", "]", ".", "cos", "(", ")", ")", ",", "dim", "=", "4", ")", ".", "flatten", "(", "3", ")", "# (b,h,w,d/2)", "\n", "pos", "=", "torch", ".", "cat", "(", "(", "pos_y", ",", "pos_x", ")", ",", "dim", "=", "3", ")", ".", "permute", "(", "0", ",", "3", ",", "1", ",", "2", ")", "# (b,h,w,d)", "\n", "return", "pos", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.PositionEmbeddingLearned.__init__": [[54, 59], ["torch.nn.Module.__init__", "torch.nn.Embedding", "torch.nn.Embedding", "position_encoding.PositionEmbeddingLearned.reset_parameters"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.PositionEmbeddingLearned_new.reset_parameters"], ["def", "__init__", "(", "self", ",", "num_pos_feats", "=", "256", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "row_embed", "=", "nn", ".", "Embedding", "(", "50", ",", "num_pos_feats", ")", "\n", "self", ".", "col_embed", "=", "nn", ".", "Embedding", "(", "50", ",", "num_pos_feats", ")", "\n", "self", ".", "reset_parameters", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.PositionEmbeddingLearned.reset_parameters": [[60, 63], ["torch.nn.init.uniform_", "torch.nn.init.uniform_"], "methods", ["None"], ["", "def", "reset_parameters", "(", "self", ")", ":", "\n", "        ", "nn", ".", "init", ".", "uniform_", "(", "self", ".", "row_embed", ".", "weight", ")", "\n", "nn", ".", "init", ".", "uniform_", "(", "self", ".", "col_embed", ".", "weight", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.PositionEmbeddingLearned.forward": [[64, 76], ["torch.arange", "torch.arange", "position_encoding.PositionEmbeddingLearned.col_embed", "position_encoding.PositionEmbeddingLearned.row_embed", "torch.cat().permute().unsqueeze().repeat", "torch.cat().permute().unsqueeze", "torch.cat().permute", "torch.cat", "position_encoding.PositionEmbeddingLearned.unsqueeze().repeat", "position_encoding.PositionEmbeddingLearned.unsqueeze().repeat", "position_encoding.PositionEmbeddingLearned.unsqueeze", "position_encoding.PositionEmbeddingLearned.unsqueeze"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "tensor_list", ":", "NestedTensor", ")", ":", "\n", "        ", "x", "=", "tensor_list", ".", "tensors", "\n", "h", ",", "w", "=", "x", ".", "shape", "[", "-", "2", ":", "]", "\n", "i", "=", "torch", ".", "arange", "(", "w", ",", "device", "=", "x", ".", "device", ")", "\n", "j", "=", "torch", ".", "arange", "(", "h", ",", "device", "=", "x", ".", "device", ")", "\n", "x_emb", "=", "self", ".", "col_embed", "(", "i", ")", "\n", "y_emb", "=", "self", ".", "row_embed", "(", "j", ")", "\n", "pos", "=", "torch", ".", "cat", "(", "[", "\n", "x_emb", ".", "unsqueeze", "(", "0", ")", ".", "repeat", "(", "h", ",", "1", ",", "1", ")", ",", "\n", "y_emb", ".", "unsqueeze", "(", "1", ")", ".", "repeat", "(", "1", ",", "w", ",", "1", ")", ",", "\n", "]", ",", "dim", "=", "-", "1", ")", ".", "permute", "(", "2", ",", "0", ",", "1", ")", ".", "unsqueeze", "(", "0", ")", ".", "repeat", "(", "x", ".", "shape", "[", "0", "]", ",", "1", ",", "1", ",", "1", ")", "\n", "return", "pos", "# (H,W,C) --> (C,H,W) --> (1,C,H,W) --> (B,C,H,W)", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.PositionEmbeddingNone.__init__": [[82, 85], ["torch.nn.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "num_pos_feats", "=", "256", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "n_dim", "=", "num_pos_feats", "*", "2", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.PositionEmbeddingNone.forward": [[86, 90], ["x.size", "torch.zeros"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size"], ["", "def", "forward", "(", "self", ",", "tensor_list", ":", "NestedTensor", ")", ":", "\n", "        ", "x", "=", "tensor_list", ".", "tensors", "\n", "b", ",", "_", ",", "h", ",", "w", "=", "x", ".", "size", "(", ")", "\n", "return", "torch", ".", "zeros", "(", "(", "b", ",", "self", ".", "n_dim", ",", "h", ",", "w", ")", ",", "device", "=", "x", ".", "device", ")", "# (B, C, H, W)", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.PositionEmbeddingLearned_new.__init__": [[112, 118], ["torch.nn.Module.__init__", "torch.nn.Embedding", "torch.nn.Embedding", "position_encoding.PositionEmbeddingLearned_new.reset_parameters"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.PositionEmbeddingLearned_new.reset_parameters"], ["def", "__init__", "(", "self", ",", "num_pos_feats", "=", "256", ",", "sz", "=", "20", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "sz", "=", "sz", "\n", "self", ".", "row_embed", "=", "nn", ".", "Embedding", "(", "sz", ",", "num_pos_feats", ")", "\n", "self", ".", "col_embed", "=", "nn", ".", "Embedding", "(", "sz", ",", "num_pos_feats", ")", "\n", "self", ".", "reset_parameters", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.PositionEmbeddingLearned_new.reset_parameters": [[119, 122], ["torch.nn.init.uniform_", "torch.nn.init.uniform_"], "methods", ["None"], ["", "def", "reset_parameters", "(", "self", ")", ":", "\n", "        ", "nn", ".", "init", ".", "uniform_", "(", "self", ".", "row_embed", ".", "weight", ")", "\n", "nn", ".", "init", ".", "uniform_", "(", "self", ".", "col_embed", ".", "weight", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.PositionEmbeddingLearned_new.forward": [[123, 135], ["torch.arange", "torch.arange", "position_encoding.PositionEmbeddingLearned_new.col_embed", "position_encoding.PositionEmbeddingLearned_new.row_embed", "torch.cat().permute().unsqueeze().repeat", "torch.cat().permute().unsqueeze", "torch.cat().permute", "torch.cat", "position_encoding.PositionEmbeddingLearned_new.unsqueeze().repeat", "position_encoding.PositionEmbeddingLearned_new.unsqueeze().repeat", "position_encoding.PositionEmbeddingLearned_new.unsqueeze", "position_encoding.PositionEmbeddingLearned_new.unsqueeze"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "bs", ")", ":", "\n", "        ", "\"\"\"bs: batch size\"\"\"", "\n", "h", ",", "w", "=", "self", ".", "sz", ",", "self", ".", "sz", "\n", "i", "=", "torch", ".", "arange", "(", "w", ",", "device", "=", "self", ".", "col_embed", ".", "weight", ".", "device", ")", "\n", "j", "=", "torch", ".", "arange", "(", "h", ",", "device", "=", "self", ".", "row_embed", ".", "weight", ".", "device", ")", "\n", "x_emb", "=", "self", ".", "col_embed", "(", "i", ")", "\n", "y_emb", "=", "self", ".", "row_embed", "(", "j", ")", "\n", "pos", "=", "torch", ".", "cat", "(", "[", "\n", "x_emb", ".", "unsqueeze", "(", "0", ")", ".", "repeat", "(", "h", ",", "1", ",", "1", ")", ",", "\n", "y_emb", ".", "unsqueeze", "(", "1", ")", ".", "repeat", "(", "1", ",", "w", ",", "1", ")", ",", "\n", "]", ",", "dim", "=", "-", "1", ")", ".", "permute", "(", "2", ",", "0", ",", "1", ")", ".", "unsqueeze", "(", "0", ")", ".", "repeat", "(", "bs", ",", "1", ",", "1", ",", "1", ")", "\n", "return", "pos", "# (H,W,C) --> (C,H,W) --> (1,C,H,W) --> (B,C,H,W)", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.build_position_encoding": [[92, 106], ["position_encoding.PositionEmbeddingSine", "position_encoding.PositionEmbeddingLearned", "print", "position_encoding.PositionEmbeddingNone", "ValueError"], "function", ["None"], ["", "", "def", "build_position_encoding", "(", "cfg", ")", ":", "\n", "    ", "N_steps", "=", "cfg", ".", "MODEL", ".", "HIDDEN_DIM", "//", "2", "\n", "if", "cfg", ".", "MODEL", ".", "POSITION_EMBEDDING", "in", "(", "'v2'", ",", "'sine'", ")", ":", "\n", "# TODO find a better way of exposing other arguments", "\n", "        ", "position_embedding", "=", "PositionEmbeddingSine", "(", "N_steps", ",", "normalize", "=", "True", ")", "\n", "", "elif", "cfg", ".", "MODEL", ".", "POSITION_EMBEDDING", "in", "(", "'v3'", ",", "'learned'", ")", ":", "\n", "        ", "position_embedding", "=", "PositionEmbeddingLearned", "(", "N_steps", ")", "\n", "", "elif", "cfg", ".", "MODEL", ".", "POSITION_EMBEDDING", "in", "(", "'None'", ",", ")", ":", "\n", "        ", "print", "(", "\"Not using positional encoding.\"", ")", "\n", "position_embedding", "=", "PositionEmbeddingNone", "(", "N_steps", ")", "\n", "", "else", ":", "\n", "        ", "raise", "ValueError", "(", "f\"not supported {cfg.MODEL.POSITION_EMBEDDING}\"", ")", "\n", "\n", "", "return", "position_embedding", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.build_position_encoding_new": [[137, 141], ["position_encoding.PositionEmbeddingLearned_new"], "function", ["None"], ["", "", "def", "build_position_encoding_new", "(", "cfg", ",", "sz", ")", ":", "\n", "    ", "N_steps", "=", "cfg", ".", "MODEL", ".", "HIDDEN_DIM", "//", "2", "\n", "position_embedding", "=", "PositionEmbeddingLearned_new", "(", "N_steps", ",", "sz", ")", "\n", "return", "position_embedding", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone.FrozenBatchNorm2d.__init__": [[26, 32], ["super().__init__", "backbone.FrozenBatchNorm2d.register_buffer", "backbone.FrozenBatchNorm2d.register_buffer", "backbone.FrozenBatchNorm2d.register_buffer", "backbone.FrozenBatchNorm2d.register_buffer", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.ones", "torch.ones", "torch.ones", "torch.ones"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "n", ")", ":", "\n", "        ", "super", "(", "FrozenBatchNorm2d", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "register_buffer", "(", "\"weight\"", ",", "torch", ".", "ones", "(", "n", ")", ")", "\n", "self", ".", "register_buffer", "(", "\"bias\"", ",", "torch", ".", "zeros", "(", "n", ")", ")", "\n", "self", ".", "register_buffer", "(", "\"running_mean\"", ",", "torch", ".", "zeros", "(", "n", ")", ")", "\n", "self", ".", "register_buffer", "(", "\"running_var\"", ",", "torch", ".", "ones", "(", "n", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone.FrozenBatchNorm2d._load_from_state_dict": [[33, 42], ["super()._load_from_state_dict"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone.FrozenBatchNorm2d._load_from_state_dict"], ["", "def", "_load_from_state_dict", "(", "self", ",", "state_dict", ",", "prefix", ",", "local_metadata", ",", "strict", ",", "\n", "missing_keys", ",", "unexpected_keys", ",", "error_msgs", ")", ":", "\n", "        ", "num_batches_tracked_key", "=", "prefix", "+", "'num_batches_tracked'", "\n", "if", "num_batches_tracked_key", "in", "state_dict", ":", "\n", "            ", "del", "state_dict", "[", "num_batches_tracked_key", "]", "\n", "\n", "", "super", "(", "FrozenBatchNorm2d", ",", "self", ")", ".", "_load_from_state_dict", "(", "\n", "state_dict", ",", "prefix", ",", "local_metadata", ",", "strict", ",", "\n", "missing_keys", ",", "unexpected_keys", ",", "error_msgs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone.FrozenBatchNorm2d.forward": [[43, 54], ["backbone.FrozenBatchNorm2d.weight.reshape", "backbone.FrozenBatchNorm2d.bias.reshape", "backbone.FrozenBatchNorm2d.running_var.reshape", "backbone.FrozenBatchNorm2d.running_mean.reshape"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "# move reshapes to the beginning", "\n", "# to make it fuser-friendly", "\n", "        ", "w", "=", "self", ".", "weight", ".", "reshape", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "b", "=", "self", ".", "bias", ".", "reshape", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "rv", "=", "self", ".", "running_var", ".", "reshape", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "rm", "=", "self", ".", "running_mean", ".", "reshape", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "eps", "=", "1e-5", "\n", "scale", "=", "w", "*", "(", "rv", "+", "eps", ")", ".", "rsqrt", "(", ")", "# rsqrt(x): 1/sqrt(x), r: reciprocal", "\n", "bias", "=", "b", "-", "rm", "*", "scale", "\n", "return", "x", "*", "scale", "+", "bias", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone.BackboneBase.__init__": [[58, 81], ["torch.nn.Module.__init__", "backbone.named_parameters", "torchvision.models._utils.IntermediateLayerGetter", "parameter.requires_grad_", "ValueError", "ValueError"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "backbone", ":", "nn", ".", "Module", ",", "train_backbone", ":", "bool", ",", "num_channels", ":", "int", ",", "return_interm_layers", ":", "bool", ",", "\n", "net_type", "=", "\"resnet\"", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "for", "name", ",", "parameter", "in", "backbone", ".", "named_parameters", "(", ")", ":", "\n", "            ", "if", "not", "train_backbone", "or", "'layer2'", "not", "in", "name", "and", "'layer3'", "not", "in", "name", ":", "\n", "                ", "parameter", ".", "requires_grad_", "(", "False", ")", "# here should allow users to specify which layers to freeze !", "\n", "# print('freeze %s'%name)", "\n", "", "", "if", "return_interm_layers", ":", "\n", "            ", "if", "net_type", "==", "\"resnet\"", ":", "\n", "                ", "return_layers", "=", "{", "\"layer1\"", ":", "\"0\"", ",", "\"layer2\"", ":", "\"1\"", ",", "\"layer3\"", ":", "\"2\"", "}", "# stride = 4, 8, 16", "\n", "", "elif", "net_type", "==", "\"repvgg\"", ":", "\n", "                ", "return_layers", "=", "{", "\"stage1\"", ":", "\"0\"", ",", "\"stage2\"", ":", "\"1\"", ",", "\"stage3\"", ":", "\"2\"", "}", "\n", "", "else", ":", "\n", "                ", "raise", "ValueError", "(", ")", "\n", "", "", "else", ":", "\n", "            ", "if", "net_type", "==", "\"resnet\"", ":", "\n", "                ", "return_layers", "=", "{", "'layer3'", ":", "\"0\"", "}", "# stride = 16", "\n", "", "elif", "net_type", "==", "\"repvgg\"", ":", "\n", "                ", "return_layers", "=", "{", "'stage3'", ":", "\"0\"", "}", "# stride = 16", "\n", "", "else", ":", "\n", "                ", "raise", "ValueError", "(", ")", "\n", "", "", "self", ".", "body", "=", "IntermediateLayerGetter", "(", "backbone", ",", "return_layers", "=", "return_layers", ")", "# method in torchvision", "\n", "self", ".", "num_channels", "=", "num_channels", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone.BackboneBase.forward": [[82, 91], ["backbone.BackboneBase.body", "backbone.BackboneBase.items", "lib.utils.misc.NestedTensor", "torch.interpolate().to", "torch.interpolate().to", "torch.interpolate", "torch.interpolate", "m[].float"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], ["", "def", "forward", "(", "self", ",", "tensor_list", ":", "NestedTensor", ")", ":", "\n", "        ", "xs", "=", "self", ".", "body", "(", "tensor_list", ".", "tensors", ")", "\n", "out", ":", "Dict", "[", "str", ",", "NestedTensor", "]", "=", "{", "}", "\n", "for", "name", ",", "x", "in", "xs", ".", "items", "(", ")", ":", "\n", "            ", "m", "=", "tensor_list", ".", "mask", "\n", "assert", "m", "is", "not", "None", "\n", "mask", "=", "F", ".", "interpolate", "(", "m", "[", "None", "]", ".", "float", "(", ")", ",", "size", "=", "x", ".", "shape", "[", "-", "2", ":", "]", ")", ".", "to", "(", "torch", ".", "bool", ")", "[", "0", "]", "\n", "out", "[", "name", "]", "=", "NestedTensor", "(", "x", ",", "mask", ")", "\n", "", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone.Backbone.__init__": [[95, 126], ["repvgg_func.BackboneBase.__init__", "getattr", "print", "lib.models.stark.repvgg.get_RepVGG_func_by_name", "lib.models.stark.repvgg.get_RepVGG_func_by_name.", "ValueError", "lib.utils.misc.is_main_process", "torch.load", "torch.load", "torch.load", "torch.load", "lib.models.stark.repvgg.get_RepVGG_func_by_name.load_state_dict", "print", "print", "print"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.stark.repvgg.get_RepVGG_func_by_name", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.is_main_process", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict"], ["def", "__init__", "(", "self", ",", "name", ":", "str", ",", "\n", "train_backbone", ":", "bool", ",", "\n", "return_interm_layers", ":", "bool", ",", "\n", "dilation", ":", "bool", ",", "\n", "freeze_bn", ":", "bool", ",", "\n", "ckpt_path", "=", "None", ")", ":", "\n", "        ", "if", "\"resnet\"", "in", "name", ":", "\n", "            ", "norm_layer", "=", "FrozenBatchNorm2d", "if", "freeze_bn", "else", "nn", ".", "BatchNorm2d", "\n", "# here is different from the original DETR because we use feature from block3", "\n", "backbone", "=", "getattr", "(", "resnet_module", ",", "name", ")", "(", "\n", "replace_stride_with_dilation", "=", "[", "False", ",", "dilation", ",", "False", "]", ",", "\n", "pretrained", "=", "is_main_process", "(", ")", ",", "norm_layer", "=", "norm_layer", ",", "last_layer", "=", "'layer3'", ")", "\n", "num_channels", "=", "256", "if", "name", "in", "(", "'resnet18'", ",", "'resnet34'", ")", "else", "1024", "\n", "net_type", "=", "\"resnet\"", "\n", "", "elif", "\"RepVGG\"", "in", "name", ":", "\n", "            ", "print", "(", "\"#\"", "*", "10", "+", "\"  Freeze_BN and Dilation are not supported in current code  \"", "+", "\"#\"", "*", "10", ")", "\n", "# here is different from the original DETR because we use feature from block3", "\n", "repvgg_func", "=", "get_RepVGG_func_by_name", "(", "name", ")", "\n", "backbone", "=", "repvgg_func", "(", "deploy", "=", "False", ",", "last_layer", "=", "\"stage3\"", ")", "\n", "num_channels", "=", "192", "# 256x0.75=192", "\n", "try", ":", "\n", "                ", "ckpt", "=", "torch", ".", "load", "(", "ckpt_path", ",", "map_location", "=", "'cpu'", ")", "\n", "missing_keys", ",", "unexpected_keys", "=", "backbone", ".", "load_state_dict", "(", "ckpt", ",", "strict", "=", "False", ")", "\n", "print", "(", "\"missing keys:\"", ",", "missing_keys", ")", "\n", "print", "(", "\"unexpected keys:\"", ",", "unexpected_keys", ")", "\n", "", "except", ":", "\n", "                ", "print", "(", "\"Warning: Pretrained RepVGG weights are not loaded\"", ")", "\n", "", "net_type", "=", "\"repvgg\"", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", ")", "\n", "", "super", "(", ")", ".", "__init__", "(", "backbone", ",", "train_backbone", ",", "num_channels", ",", "return_interm_layers", ",", "net_type", "=", "net_type", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone.Joiner.__init__": [[129, 131], ["torch.nn.Sequential.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "backbone", ",", "position_embedding", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "backbone", ",", "position_embedding", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone.Joiner.forward": [[132, 142], ["xs.items", "out.append", "pos.append"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "tensor_list", ":", "NestedTensor", ",", "mode", "=", "None", ")", ":", "\n", "        ", "xs", "=", "self", "[", "0", "]", "(", "tensor_list", ")", "\n", "out", ":", "List", "[", "NestedTensor", "]", "=", "[", "]", "\n", "pos", "=", "[", "]", "\n", "for", "name", ",", "x", "in", "xs", ".", "items", "(", ")", ":", "\n", "            ", "out", ".", "append", "(", "x", ")", "\n", "# position encoding", "\n", "pos", ".", "append", "(", "self", "[", "1", "]", "(", "x", ")", ".", "to", "(", "x", ".", "tensors", ".", "dtype", ")", ")", "\n", "\n", "", "return", "out", ",", "pos", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone.Joiner_NOPE.__init__": [[164, 166], ["torch.nn.Sequential.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "backbone", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "backbone", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone.Joiner_NOPE.forward": [[167, 173], ["xs.items", "out.append"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "tensor_list", ":", "NestedTensor", ",", "mode", "=", "None", ")", ":", "\n", "        ", "xs", "=", "self", "[", "0", "]", "(", "tensor_list", ")", "\n", "out", ":", "List", "[", "NestedTensor", "]", "=", "[", "]", "\n", "for", "name", ",", "x", "in", "xs", ".", "items", "(", ")", ":", "\n", "            ", "out", ".", "append", "(", "x", ")", "\n", "", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone.build_backbone": [[144, 160], ["position_encoding.build_position_encoding", "backbone.Backbone", "backbone.Joiner", "os.path.join"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.position_encoding.build_position_encoding"], ["", "", "def", "build_backbone", "(", "cfg", ")", ":", "\n", "    ", "position_embedding", "=", "build_position_encoding", "(", "cfg", ")", "\n", "train_backbone", "=", "cfg", ".", "TRAIN", ".", "BACKBONE_MULTIPLIER", ">", "0", "\n", "return_interm_layers", "=", "cfg", ".", "MODEL", ".", "PREDICT_MASK", "\n", "if", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", "==", "\"RepVGG-A0\"", ":", "\n", "        ", "try", ":", "\n", "            ", "ckpt_path", "=", "os", ".", "path", ".", "join", "(", "cfg", ".", "ckpt_dir", ",", "\"RepVGG-A0-train.pth\"", ")", "\n", "", "except", ":", "\n", "            ", "ckpt_path", "=", "None", "\n", "", "", "else", ":", "\n", "        ", "ckpt_path", "=", "None", "\n", "", "backbone", "=", "Backbone", "(", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", ",", "train_backbone", ",", "return_interm_layers", ",", "\n", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "DILATION", ",", "cfg", ".", "TRAIN", ".", "FREEZE_BACKBONE_BN", ",", "ckpt_path", ")", "\n", "model", "=", "Joiner", "(", "backbone", ",", "position_embedding", ")", "\n", "model", ".", "num_channels", "=", "backbone", ".", "num_channels", "\n", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.stark.backbone.build_backbone_NOPE": [[175, 191], ["backbone.Backbone", "backbone.Joiner_NOPE", "os.path.join"], "function", ["None"], ["", "", "def", "build_backbone_NOPE", "(", "cfg", ")", ":", "\n", "    ", "\"\"\"Without positional embedding\"\"\"", "\n", "train_backbone", "=", "cfg", ".", "TRAIN", ".", "BACKBONE_MULTIPLIER", ">", "0", "\n", "return_interm_layers", "=", "cfg", ".", "MODEL", ".", "PREDICT_MASK", "\n", "if", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", "==", "\"RepVGG-A0\"", ":", "\n", "        ", "try", ":", "\n", "            ", "ckpt_path", "=", "os", ".", "path", ".", "join", "(", "cfg", ".", "ckpt_dir", ",", "\"RepVGG-A0-train.pth\"", ")", "\n", "", "except", ":", "\n", "            ", "ckpt_path", "=", "None", "\n", "", "", "else", ":", "\n", "        ", "ckpt_path", "=", "None", "\n", "", "backbone", "=", "Backbone", "(", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", ",", "train_backbone", ",", "return_interm_layers", ",", "\n", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "DILATION", ",", "cfg", ".", "TRAIN", ".", "FREEZE_BACKBONE_BN", ",", "ckpt_path", ")", "\n", "model", "=", "Joiner_NOPE", "(", "backbone", ")", "\n", "model", ".", "num_channels", "=", "backbone", ".", "num_channels", "\n", "return", "model", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.train._init_paths.add_path": [[9, 12], ["sys.path.insert"], "function", ["None"], ["def", "add_path", "(", "path", ")", ":", "\n", "    ", "if", "path", "not", "in", "sys", ".", "path", ":", "\n", "        ", "sys", ".", "path", ".", "insert", "(", "0", ",", "path", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.train.base_functions.update_settings": [[11, 25], ["None"], "function", ["None"], ["def", "update_settings", "(", "settings", ",", "cfg", ")", ":", "\n", "    ", "settings", ".", "print_interval", "=", "cfg", ".", "TRAIN", ".", "PRINT_INTERVAL", "\n", "settings", ".", "search_area_factor", "=", "{", "'template'", ":", "cfg", ".", "DATA", ".", "TEMPLATE", ".", "FACTOR", ",", "\n", "'search'", ":", "cfg", ".", "DATA", ".", "SEARCH", ".", "FACTOR", "}", "\n", "settings", ".", "output_sz", "=", "{", "'template'", ":", "cfg", ".", "DATA", ".", "TEMPLATE", ".", "SIZE", ",", "\n", "'search'", ":", "cfg", ".", "DATA", ".", "SEARCH", ".", "SIZE", "}", "\n", "settings", ".", "center_jitter_factor", "=", "{", "'template'", ":", "cfg", ".", "DATA", ".", "TEMPLATE", ".", "CENTER_JITTER", ",", "\n", "'search'", ":", "cfg", ".", "DATA", ".", "SEARCH", ".", "CENTER_JITTER", "}", "\n", "settings", ".", "scale_jitter_factor", "=", "{", "'template'", ":", "cfg", ".", "DATA", ".", "TEMPLATE", ".", "SCALE_JITTER", ",", "\n", "'search'", ":", "cfg", ".", "DATA", ".", "SEARCH", ".", "SCALE_JITTER", "}", "\n", "settings", ".", "grad_clip_norm", "=", "cfg", ".", "TRAIN", ".", "GRAD_CLIP_NORM", "\n", "settings", ".", "print_stats", "=", "None", "\n", "settings", ".", "batchsize", "=", "cfg", ".", "TRAIN", ".", "BATCH_SIZE", "\n", "settings", ".", "scheduler_type", "=", "cfg", ".", "TRAIN", ".", "SCHEDULER", ".", "TYPE", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.train.base_functions.names2datasets": [[27, 76], ["isinstance", "print", "datasets.append", "datasets.append", "print", "datasets.append", "datasets.append", "print", "datasets.append", "datasets.append", "print", "datasets.append", "datasets.append", "print", "datasets.append", "datasets.append", "print", "datasets.append", "datasets.append", "print", "datasets.append", "datasets.append", "lib.train.dataset.Lasot_lmdb", "lib.train.dataset.Lasot", "lib.train.dataset.Got10k_lmdb", "lib.train.dataset.Got10k", "lib.train.dataset.Got10k_lmdb", "lib.train.dataset.Got10k", "lib.train.dataset.Got10k_lmdb", "lib.train.dataset.Got10k", "lib.train.dataset.MSCOCOSeq_lmdb", "lib.train.dataset.MSCOCOSeq", "lib.train.dataset.ImagenetVID_lmdb", "lib.train.dataset.ImagenetVID", "lib.train.dataset.TrackingNet_lmdb", "lib.train.dataset.TrackingNet", "lib.train.data.opencv_loader", "lib.train.data.opencv_loader"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.opencv_loader", "home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.opencv_loader"], ["", "def", "names2datasets", "(", "name_list", ":", "list", ",", "settings", ",", "image_loader", ")", ":", "\n", "    ", "assert", "isinstance", "(", "name_list", ",", "list", ")", "\n", "datasets", "=", "[", "]", "\n", "for", "name", "in", "name_list", ":", "\n", "        ", "assert", "name", "in", "[", "\"LASOT\"", ",", "\"GOT10K_vottrain\"", ",", "\"GOT10K_votval\"", ",", "\"GOT10K_train_full\"", ",", "\"COCO17\"", ",", "\"VID\"", ",", "\"TRACKINGNET\"", "]", "\n", "if", "name", "==", "\"LASOT\"", ":", "\n", "            ", "if", "settings", ".", "use_lmdb", ":", "\n", "                ", "print", "(", "\"Building lasot dataset from lmdb\"", ")", "\n", "datasets", ".", "append", "(", "Lasot_lmdb", "(", "settings", ".", "env", ".", "lasot_lmdb_dir", ",", "split", "=", "'train'", ",", "image_loader", "=", "image_loader", ")", ")", "\n", "", "else", ":", "\n", "                ", "datasets", ".", "append", "(", "Lasot", "(", "settings", ".", "env", ".", "lasot_dir", ",", "split", "=", "'train'", ",", "image_loader", "=", "image_loader", ")", ")", "\n", "", "", "if", "name", "==", "\"GOT10K_vottrain\"", ":", "\n", "            ", "if", "settings", ".", "use_lmdb", ":", "\n", "                ", "print", "(", "\"Building got10k from lmdb\"", ")", "\n", "datasets", ".", "append", "(", "Got10k_lmdb", "(", "settings", ".", "env", ".", "got10k_lmdb_dir", ",", "split", "=", "'vottrain'", ",", "image_loader", "=", "image_loader", ")", ")", "\n", "", "else", ":", "\n", "                ", "datasets", ".", "append", "(", "Got10k", "(", "settings", ".", "env", ".", "got10k_dir", ",", "split", "=", "'vottrain'", ",", "image_loader", "=", "image_loader", ")", ")", "\n", "", "", "if", "name", "==", "\"GOT10K_train_full\"", ":", "\n", "            ", "if", "settings", ".", "use_lmdb", ":", "\n", "                ", "print", "(", "\"Building got10k_train_full from lmdb\"", ")", "\n", "datasets", ".", "append", "(", "Got10k_lmdb", "(", "settings", ".", "env", ".", "got10k_lmdb_dir", ",", "split", "=", "'train_full'", ",", "image_loader", "=", "image_loader", ")", ")", "\n", "", "else", ":", "\n", "                ", "datasets", ".", "append", "(", "Got10k", "(", "settings", ".", "env", ".", "got10k_dir", ",", "split", "=", "'train_full'", ",", "image_loader", "=", "image_loader", ")", ")", "\n", "", "", "if", "name", "==", "\"GOT10K_votval\"", ":", "\n", "            ", "if", "settings", ".", "use_lmdb", ":", "\n", "                ", "print", "(", "\"Building got10k from lmdb\"", ")", "\n", "datasets", ".", "append", "(", "Got10k_lmdb", "(", "settings", ".", "env", ".", "got10k_lmdb_dir", ",", "split", "=", "'votval'", ",", "image_loader", "=", "image_loader", ")", ")", "\n", "", "else", ":", "\n", "                ", "datasets", ".", "append", "(", "Got10k", "(", "settings", ".", "env", ".", "got10k_dir", ",", "split", "=", "'votval'", ",", "image_loader", "=", "image_loader", ")", ")", "\n", "", "", "if", "name", "==", "\"COCO17\"", ":", "\n", "            ", "if", "settings", ".", "use_lmdb", ":", "\n", "                ", "print", "(", "\"Building COCO2017 from lmdb\"", ")", "\n", "datasets", ".", "append", "(", "MSCOCOSeq_lmdb", "(", "settings", ".", "env", ".", "coco_lmdb_dir", ",", "version", "=", "\"2017\"", ",", "image_loader", "=", "image_loader", ")", ")", "\n", "", "else", ":", "\n", "                ", "datasets", ".", "append", "(", "MSCOCOSeq", "(", "settings", ".", "env", ".", "coco_dir", ",", "version", "=", "\"2017\"", ",", "image_loader", "=", "image_loader", ")", ")", "\n", "", "", "if", "name", "==", "\"VID\"", ":", "\n", "            ", "if", "settings", ".", "use_lmdb", ":", "\n", "                ", "print", "(", "\"Building VID from lmdb\"", ")", "\n", "datasets", ".", "append", "(", "ImagenetVID_lmdb", "(", "settings", ".", "env", ".", "imagenet_lmdb_dir", ",", "image_loader", "=", "image_loader", ")", ")", "\n", "", "else", ":", "\n", "                ", "datasets", ".", "append", "(", "ImagenetVID", "(", "settings", ".", "env", ".", "imagenet_dir", ",", "image_loader", "=", "image_loader", ")", ")", "\n", "", "", "if", "name", "==", "\"TRACKINGNET\"", ":", "\n", "            ", "if", "settings", ".", "use_lmdb", ":", "\n", "                ", "print", "(", "\"Building TrackingNet from lmdb\"", ")", "\n", "datasets", ".", "append", "(", "TrackingNet_lmdb", "(", "settings", ".", "env", ".", "trackingnet_lmdb_dir", ",", "image_loader", "=", "image_loader", ")", ")", "\n", "", "else", ":", "\n", "# raise ValueError(\"NOW WE CAN ONLY USE TRACKINGNET FROM LMDB\")", "\n", "                ", "datasets", ".", "append", "(", "TrackingNet", "(", "settings", ".", "env", ".", "trackingnet_dir", ",", "image_loader", "=", "image_loader", ")", ")", "\n", "", "", "", "return", "datasets", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.train.base_functions.build_dataloaders": [[78, 144], ["lib.Transform", "lib.Transform", "lib.Transform", "lib.train.data.processing.STARKProcessing", "lib.train.data.processing.STARKProcessing", "getattr", "getattr", "getattr", "getattr", "print", "lib.train.data.sampler.TrackingSampler", "lib.train.data.LTRLoader", "lib.train.data.sampler.TrackingSampler", "lib.train.data.LTRLoader", "lib.ToGrayscale", "lib.RandomHorizontalFlip", "lib.ToTensorAndJitter", "lib.RandomHorizontalFlip_Norm", "lib.Normalize", "lib.ToTensor", "lib.Normalize", "torch.utils.data.distributed.DistributedSampler", "torch.utils.data.distributed.DistributedSampler", "base_functions.names2datasets", "base_functions.names2datasets"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.train.base_functions.names2datasets", "home.repos.pwc.inspect_result.researchmm_Stark.train.base_functions.names2datasets"], ["", "def", "build_dataloaders", "(", "cfg", ",", "settings", ")", ":", "\n", "# Data transform", "\n", "    ", "transform_joint", "=", "tfm", ".", "Transform", "(", "tfm", ".", "ToGrayscale", "(", "probability", "=", "0.05", ")", ",", "\n", "tfm", ".", "RandomHorizontalFlip", "(", "probability", "=", "0.5", ")", ")", "\n", "\n", "transform_train", "=", "tfm", ".", "Transform", "(", "tfm", ".", "ToTensorAndJitter", "(", "0.2", ")", ",", "\n", "tfm", ".", "RandomHorizontalFlip_Norm", "(", "probability", "=", "0.5", ")", ",", "\n", "tfm", ".", "Normalize", "(", "mean", "=", "cfg", ".", "DATA", ".", "MEAN", ",", "std", "=", "cfg", ".", "DATA", ".", "STD", ")", ")", "\n", "\n", "transform_val", "=", "tfm", ".", "Transform", "(", "tfm", ".", "ToTensor", "(", ")", ",", "\n", "tfm", ".", "Normalize", "(", "mean", "=", "cfg", ".", "DATA", ".", "MEAN", ",", "std", "=", "cfg", ".", "DATA", ".", "STD", ")", ")", "\n", "\n", "# The tracking pairs processing module", "\n", "output_sz", "=", "settings", ".", "output_sz", "\n", "search_area_factor", "=", "settings", ".", "search_area_factor", "\n", "\n", "data_processing_train", "=", "processing", ".", "STARKProcessing", "(", "search_area_factor", "=", "search_area_factor", ",", "\n", "output_sz", "=", "output_sz", ",", "\n", "center_jitter_factor", "=", "settings", ".", "center_jitter_factor", ",", "\n", "scale_jitter_factor", "=", "settings", ".", "scale_jitter_factor", ",", "\n", "mode", "=", "'sequence'", ",", "\n", "transform", "=", "transform_train", ",", "\n", "joint_transform", "=", "transform_joint", ",", "\n", "settings", "=", "settings", ")", "\n", "\n", "data_processing_val", "=", "processing", ".", "STARKProcessing", "(", "search_area_factor", "=", "search_area_factor", ",", "\n", "output_sz", "=", "output_sz", ",", "\n", "center_jitter_factor", "=", "settings", ".", "center_jitter_factor", ",", "\n", "scale_jitter_factor", "=", "settings", ".", "scale_jitter_factor", ",", "\n", "mode", "=", "'sequence'", ",", "\n", "transform", "=", "transform_val", ",", "\n", "joint_transform", "=", "transform_joint", ",", "\n", "settings", "=", "settings", ")", "\n", "\n", "# Train sampler and loader", "\n", "settings", ".", "num_template", "=", "getattr", "(", "cfg", ".", "DATA", ".", "TEMPLATE", ",", "\"NUMBER\"", ",", "1", ")", "\n", "settings", ".", "num_search", "=", "getattr", "(", "cfg", ".", "DATA", ".", "SEARCH", ",", "\"NUMBER\"", ",", "1", ")", "\n", "sampler_mode", "=", "getattr", "(", "cfg", ".", "DATA", ",", "\"SAMPLER_MODE\"", ",", "\"causal\"", ")", "\n", "train_cls", "=", "getattr", "(", "cfg", ".", "TRAIN", ",", "\"TRAIN_CLS\"", ",", "False", ")", "\n", "print", "(", "\"sampler_mode\"", ",", "sampler_mode", ")", "\n", "dataset_train", "=", "sampler", ".", "TrackingSampler", "(", "datasets", "=", "names2datasets", "(", "cfg", ".", "DATA", ".", "TRAIN", ".", "DATASETS_NAME", ",", "settings", ",", "opencv_loader", ")", ",", "\n", "p_datasets", "=", "cfg", ".", "DATA", ".", "TRAIN", ".", "DATASETS_RATIO", ",", "\n", "samples_per_epoch", "=", "cfg", ".", "DATA", ".", "TRAIN", ".", "SAMPLE_PER_EPOCH", ",", "\n", "max_gap", "=", "cfg", ".", "DATA", ".", "MAX_SAMPLE_INTERVAL", ",", "num_search_frames", "=", "settings", ".", "num_search", ",", "\n", "num_template_frames", "=", "settings", ".", "num_template", ",", "processing", "=", "data_processing_train", ",", "\n", "frame_sample_mode", "=", "sampler_mode", ",", "train_cls", "=", "train_cls", ")", "\n", "\n", "train_sampler", "=", "DistributedSampler", "(", "dataset_train", ")", "if", "settings", ".", "local_rank", "!=", "-", "1", "else", "None", "\n", "shuffle", "=", "False", "if", "settings", ".", "local_rank", "!=", "-", "1", "else", "True", "\n", "\n", "loader_train", "=", "LTRLoader", "(", "'train'", ",", "dataset_train", ",", "training", "=", "True", ",", "batch_size", "=", "cfg", ".", "TRAIN", ".", "BATCH_SIZE", ",", "shuffle", "=", "shuffle", ",", "\n", "num_workers", "=", "cfg", ".", "TRAIN", ".", "NUM_WORKER", ",", "drop_last", "=", "True", ",", "stack_dim", "=", "1", ",", "sampler", "=", "train_sampler", ")", "\n", "\n", "# Validation samplers and loaders", "\n", "dataset_val", "=", "sampler", ".", "TrackingSampler", "(", "datasets", "=", "names2datasets", "(", "cfg", ".", "DATA", ".", "VAL", ".", "DATASETS_NAME", ",", "settings", ",", "opencv_loader", ")", ",", "\n", "p_datasets", "=", "cfg", ".", "DATA", ".", "VAL", ".", "DATASETS_RATIO", ",", "\n", "samples_per_epoch", "=", "cfg", ".", "DATA", ".", "VAL", ".", "SAMPLE_PER_EPOCH", ",", "\n", "max_gap", "=", "cfg", ".", "DATA", ".", "MAX_SAMPLE_INTERVAL", ",", "num_search_frames", "=", "settings", ".", "num_search", ",", "\n", "num_template_frames", "=", "settings", ".", "num_template", ",", "processing", "=", "data_processing_val", ",", "\n", "frame_sample_mode", "=", "sampler_mode", ",", "train_cls", "=", "train_cls", ")", "\n", "val_sampler", "=", "DistributedSampler", "(", "dataset_val", ")", "if", "settings", ".", "local_rank", "!=", "-", "1", "else", "None", "\n", "loader_val", "=", "LTRLoader", "(", "'val'", ",", "dataset_val", ",", "training", "=", "False", ",", "batch_size", "=", "cfg", ".", "TRAIN", ".", "BATCH_SIZE", ",", "\n", "num_workers", "=", "cfg", ".", "TRAIN", ".", "NUM_WORKER", ",", "drop_last", "=", "True", ",", "stack_dim", "=", "1", ",", "sampler", "=", "val_sampler", ",", "\n", "epoch_interval", "=", "cfg", ".", "TRAIN", ".", "VAL_EPOCH_INTERVAL", ")", "\n", "\n", "return", "loader_train", ",", "loader_val", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.train.base_functions.get_optimizer_scheduler": [[146, 187], ["getattr", "print", "net.named_parameters", "lib.utils.misc.is_main_process", "torch.optim.AdamW", "ValueError", "torch.optim.lr_scheduler.StepLR", "print", "net.named_parameters", "torch.optim.lr_scheduler.MultiStepLR", "ValueError", "print", "print", "net.named_parameters", "net.named_parameters", "net.named_parameters"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.is_main_process"], ["", "def", "get_optimizer_scheduler", "(", "net", ",", "cfg", ")", ":", "\n", "    ", "train_cls", "=", "getattr", "(", "cfg", ".", "TRAIN", ",", "\"TRAIN_CLS\"", ",", "False", ")", "\n", "if", "train_cls", ":", "\n", "        ", "print", "(", "\"Only training classification head. Learnable parameters are shown below.\"", ")", "\n", "param_dicts", "=", "[", "\n", "{", "\"params\"", ":", "[", "p", "for", "n", ",", "p", "in", "net", ".", "named_parameters", "(", ")", "if", "\"cls\"", "in", "n", "and", "p", ".", "requires_grad", "]", "}", "\n", "]", "\n", "\n", "for", "n", ",", "p", "in", "net", ".", "named_parameters", "(", ")", ":", "\n", "            ", "if", "\"cls\"", "not", "in", "n", ":", "\n", "                ", "p", ".", "requires_grad", "=", "False", "\n", "", "else", ":", "\n", "                ", "print", "(", "n", ")", "\n", "", "", "", "else", ":", "\n", "        ", "param_dicts", "=", "[", "\n", "{", "\"params\"", ":", "[", "p", "for", "n", ",", "p", "in", "net", ".", "named_parameters", "(", ")", "if", "\"backbone\"", "not", "in", "n", "and", "p", ".", "requires_grad", "]", "}", ",", "\n", "{", "\n", "\"params\"", ":", "[", "p", "for", "n", ",", "p", "in", "net", ".", "named_parameters", "(", ")", "if", "\"backbone\"", "in", "n", "and", "p", ".", "requires_grad", "]", ",", "\n", "\"lr\"", ":", "cfg", ".", "TRAIN", ".", "LR", "*", "cfg", ".", "TRAIN", ".", "BACKBONE_MULTIPLIER", ",", "\n", "}", ",", "\n", "]", "\n", "if", "is_main_process", "(", ")", ":", "\n", "            ", "print", "(", "\"Learnable parameters are shown below.\"", ")", "\n", "for", "n", ",", "p", "in", "net", ".", "named_parameters", "(", ")", ":", "\n", "                ", "if", "p", ".", "requires_grad", ":", "\n", "                    ", "print", "(", "n", ")", "\n", "\n", "", "", "", "", "if", "cfg", ".", "TRAIN", ".", "OPTIMIZER", "==", "\"ADAMW\"", ":", "\n", "        ", "optimizer", "=", "torch", ".", "optim", ".", "AdamW", "(", "param_dicts", ",", "lr", "=", "cfg", ".", "TRAIN", ".", "LR", ",", "\n", "weight_decay", "=", "cfg", ".", "TRAIN", ".", "WEIGHT_DECAY", ")", "\n", "", "else", ":", "\n", "        ", "raise", "ValueError", "(", "\"Unsupported Optimizer\"", ")", "\n", "", "if", "cfg", ".", "TRAIN", ".", "SCHEDULER", ".", "TYPE", "==", "'step'", ":", "\n", "        ", "lr_scheduler", "=", "torch", ".", "optim", ".", "lr_scheduler", ".", "StepLR", "(", "optimizer", ",", "cfg", ".", "TRAIN", ".", "LR_DROP_EPOCH", ")", "\n", "", "elif", "cfg", ".", "TRAIN", ".", "SCHEDULER", ".", "TYPE", "==", "\"Mstep\"", ":", "\n", "        ", "lr_scheduler", "=", "torch", ".", "optim", ".", "lr_scheduler", ".", "MultiStepLR", "(", "optimizer", ",", "\n", "milestones", "=", "cfg", ".", "TRAIN", ".", "SCHEDULER", ".", "MILESTONES", ",", "\n", "gamma", "=", "cfg", ".", "TRAIN", ".", "SCHEDULER", ".", "GAMMA", ")", "\n", "", "else", ":", "\n", "        ", "raise", "ValueError", "(", "\"Unsupported scheduler\"", ")", "\n", "", "return", "optimizer", ",", "lr_scheduler", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.train.run_training.init_seeds": [[17, 24], ["random.seed", "numpy.random.seed", "torch.manual_seed", "torch.manual_seed", "torch.cuda.manual_seed", "torch.cuda.manual_seed"], "function", ["None"], ["def", "init_seeds", "(", "seed", ")", ":", "\n", "    ", "random", ".", "seed", "(", "seed", ")", "\n", "np", ".", "random", ".", "seed", "(", "seed", ")", "\n", "torch", ".", "manual_seed", "(", "seed", ")", "\n", "torch", ".", "cuda", ".", "manual_seed", "(", "seed", ")", "\n", "torch", ".", "backends", ".", "cudnn", ".", "deterministic", "=", "True", "\n", "torch", ".", "backends", ".", "cudnn", ".", "benchmark", "=", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.train.run_training.run_training": [[26, 75], ["cv2.setNumThreads", "print", "lib.Settings", "os.path.abspath", "os.path.abspath", "os.path.join", "getattr", "getattr.", "print", "os.path.join", "os.path.join", "importlib.import_module", "importlib.import_module", "run_training.init_seeds", "run_training.init_seeds", "os.path.dirname"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.train.run_training.init_seeds", "home.repos.pwc.inspect_result.researchmm_Stark.train.run_training.init_seeds"], ["", "def", "run_training", "(", "script_name", ",", "config_name", ",", "cudnn_benchmark", "=", "True", ",", "local_rank", "=", "-", "1", ",", "save_dir", "=", "None", ",", "base_seed", "=", "None", ",", "\n", "use_lmdb", "=", "False", ",", "script_name_prv", "=", "None", ",", "config_name_prv", "=", "None", ",", "\n", "distill", "=", "None", ",", "script_teacher", "=", "None", ",", "config_teacher", "=", "None", ")", ":", "\n", "    ", "\"\"\"Run the train script.\n    args:\n        script_name: Name of emperiment in the \"experiments/\" folder.\n        config_name: Name of the yaml file in the \"experiments/<script_name>\".\n        cudnn_benchmark: Use cudnn benchmark or not (default is True).\n    \"\"\"", "\n", "if", "save_dir", "is", "None", ":", "\n", "        ", "print", "(", "\"save_dir dir is not given. Use the default dir instead.\"", ")", "\n", "# This is needed to avoid strange crashes related to opencv", "\n", "", "cv", ".", "setNumThreads", "(", "0", ")", "\n", "\n", "torch", ".", "backends", ".", "cudnn", ".", "benchmark", "=", "cudnn_benchmark", "\n", "\n", "print", "(", "'script_name: {}.py  config_name: {}.yaml'", ".", "format", "(", "script_name", ",", "config_name", ")", ")", "\n", "\n", "'''2021.1.5 set seed for different process'''", "\n", "if", "base_seed", "is", "not", "None", ":", "\n", "        ", "if", "local_rank", "!=", "-", "1", ":", "\n", "            ", "init_seeds", "(", "base_seed", "+", "local_rank", ")", "\n", "", "else", ":", "\n", "            ", "init_seeds", "(", "base_seed", ")", "\n", "\n", "", "", "settings", "=", "ws_settings", ".", "Settings", "(", ")", "\n", "settings", ".", "script_name", "=", "script_name", "\n", "settings", ".", "config_name", "=", "config_name", "\n", "settings", ".", "project_path", "=", "'train/{}/{}'", ".", "format", "(", "script_name", ",", "config_name", ")", "\n", "if", "script_name_prv", "is", "not", "None", "and", "config_name_prv", "is", "not", "None", ":", "\n", "        ", "settings", ".", "project_path_prv", "=", "'train/{}/{}'", ".", "format", "(", "script_name_prv", ",", "config_name_prv", ")", "\n", "", "settings", ".", "local_rank", "=", "local_rank", "\n", "settings", ".", "save_dir", "=", "os", ".", "path", ".", "abspath", "(", "save_dir", ")", "\n", "settings", ".", "use_lmdb", "=", "use_lmdb", "\n", "prj_dir", "=", "os", ".", "path", ".", "abspath", "(", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "__file__", ")", ",", "\"../..\"", ")", ")", "\n", "settings", ".", "cfg_file", "=", "os", ".", "path", ".", "join", "(", "prj_dir", ",", "'experiments/%s/%s.yaml'", "%", "(", "script_name", ",", "config_name", ")", ")", "\n", "if", "distill", ":", "\n", "        ", "settings", ".", "distill", "=", "distill", "\n", "settings", ".", "script_teacher", "=", "script_teacher", "\n", "settings", ".", "config_teacher", "=", "config_teacher", "\n", "if", "script_teacher", "is", "not", "None", "and", "config_teacher", "is", "not", "None", ":", "\n", "            ", "settings", ".", "project_path_teacher", "=", "'train/{}/{}'", ".", "format", "(", "script_teacher", ",", "config_teacher", ")", "\n", "", "settings", ".", "cfg_file_teacher", "=", "os", ".", "path", ".", "join", "(", "prj_dir", ",", "'experiments/%s/%s.yaml'", "%", "(", "script_teacher", ",", "config_teacher", ")", ")", "\n", "expr_module", "=", "importlib", ".", "import_module", "(", "'lib.train.train_script_distill'", ")", "\n", "", "else", ":", "\n", "        ", "expr_module", "=", "importlib", ".", "import_module", "(", "'lib.train.train_script'", ")", "\n", "", "expr_func", "=", "getattr", "(", "expr_module", ",", "'run'", ")", "\n", "\n", "expr_func", "(", "settings", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.train.run_training.main": [[77, 103], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.parse_args", "run_training.run_training", "torch.init_process_group", "torch.cuda.set_device", "torch.cuda.set_device", "torch.cuda.set_device", "torch.cuda.set_device"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.parse_args", "home.repos.pwc.inspect_result.researchmm_Stark.ltr.run_training.run_training"], ["", "def", "main", "(", ")", ":", "\n", "    ", "parser", "=", "argparse", ".", "ArgumentParser", "(", "description", "=", "'Run a train scripts in train_settings.'", ")", "\n", "parser", ".", "add_argument", "(", "'--script'", ",", "type", "=", "str", ",", "required", "=", "True", ",", "help", "=", "'Name of the train script.'", ")", "\n", "parser", ".", "add_argument", "(", "'--config'", ",", "type", "=", "str", ",", "required", "=", "True", ",", "help", "=", "\"Name of the config file.\"", ")", "\n", "parser", ".", "add_argument", "(", "'--cudnn_benchmark'", ",", "type", "=", "bool", ",", "default", "=", "True", ",", "help", "=", "'Set cudnn benchmark on (1) or off (0) (default is on).'", ")", "\n", "parser", ".", "add_argument", "(", "'--local_rank'", ",", "default", "=", "-", "1", ",", "type", "=", "int", ",", "help", "=", "'node rank for distributed training'", ")", "\n", "parser", ".", "add_argument", "(", "'--save_dir'", ",", "type", "=", "str", ",", "help", "=", "'the directory to save checkpoints and logs'", ")", "\n", "parser", ".", "add_argument", "(", "'--seed'", ",", "type", "=", "int", ",", "default", "=", "42", ",", "help", "=", "'seed for random numbers'", ")", "\n", "parser", ".", "add_argument", "(", "'--use_lmdb'", ",", "type", "=", "int", ",", "choices", "=", "[", "0", ",", "1", "]", ",", "default", "=", "0", ")", "# whether datasets are in lmdb format", "\n", "parser", ".", "add_argument", "(", "'--script_prv'", ",", "type", "=", "str", ",", "default", "=", "None", ",", "help", "=", "'Name of the train script of previous model.'", ")", "\n", "parser", ".", "add_argument", "(", "'--config_prv'", ",", "type", "=", "str", ",", "default", "=", "None", ",", "help", "=", "\"Name of the config file of previous model.\"", ")", "\n", "# for knowledge distillation", "\n", "parser", ".", "add_argument", "(", "'--distill'", ",", "type", "=", "int", ",", "choices", "=", "[", "0", ",", "1", "]", ",", "default", "=", "0", ")", "# whether to use knowledge distillation", "\n", "parser", ".", "add_argument", "(", "'--script_teacher'", ",", "type", "=", "str", ",", "help", "=", "'teacher script name'", ")", "\n", "parser", ".", "add_argument", "(", "'--config_teacher'", ",", "type", "=", "str", ",", "help", "=", "'teacher yaml configure file name'", ")", "\n", "\n", "args", "=", "parser", ".", "parse_args", "(", ")", "\n", "if", "args", ".", "local_rank", "!=", "-", "1", ":", "\n", "        ", "dist", ".", "init_process_group", "(", "backend", "=", "'nccl'", ")", "\n", "torch", ".", "cuda", ".", "set_device", "(", "args", ".", "local_rank", ")", "\n", "", "else", ":", "\n", "        ", "torch", ".", "cuda", ".", "set_device", "(", "0", ")", "\n", "", "run_training", "(", "args", ".", "script", ",", "args", ".", "config", ",", "cudnn_benchmark", "=", "args", ".", "cudnn_benchmark", ",", "\n", "local_rank", "=", "args", ".", "local_rank", ",", "save_dir", "=", "args", ".", "save_dir", ",", "base_seed", "=", "args", ".", "seed", ",", "\n", "use_lmdb", "=", "args", ".", "use_lmdb", ",", "script_name_prv", "=", "args", ".", "script_prv", ",", "config_name_prv", "=", "args", ".", "config_prv", ",", "\n", "distill", "=", "args", ".", "distill", ",", "script_teacher", "=", "args", ".", "script_teacher", ",", "config_teacher", "=", "args", ".", "config_teacher", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.train.train_script_distill.build_network": [[21, 32], ["lib.models.stark.build_starks", "lib.models.stark.build_starkst", "lib.models.stark.build_stark_lightning_x_trt", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_s.build_starks", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_st.build_starkst", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.build_stark_lightning_x_trt"], ["def", "build_network", "(", "script_name", ",", "cfg", ")", ":", "\n", "# Create network", "\n", "    ", "if", "script_name", "==", "\"stark_s\"", ":", "\n", "        ", "net", "=", "build_starks", "(", "cfg", ")", "\n", "", "elif", "script_name", "==", "\"stark_st1\"", "or", "script_name", "==", "\"stark_st2\"", ":", "\n", "        ", "net", "=", "build_starkst", "(", "cfg", ")", "\n", "", "elif", "script_name", "==", "\"stark_lightning_X_trt\"", ":", "\n", "        ", "net", "=", "build_stark_lightning_x_trt", "(", "cfg", ",", "phase", "=", "\"train\"", ")", "\n", "", "else", ":", "\n", "        ", "raise", "ValueError", "(", "\"illegal script name\"", ")", "\n", "", "return", "net", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.train.train_script_distill.run": [[34, 112], ["importlib.import_module", "importlib.import_module.update_config_from_file", "importlib.import_module", "importlib.import_module.update_config_from_file", "base_functions.update_settings", "os.path.join", "os.path.join", "base_functions.build_dataloaders", "train_script_distill.build_network", "train_script_distill.build_network", "torch.nn.parallel.DistributedDataParallel.cuda", "torch.nn.parallel.DistributedDataParallel.cuda", "torch.nn.parallel.DistributedDataParallel.eval", "getattr", "base_functions.get_optimizer_scheduler", "getattr", "lib.train.trainers.LTRTrainer", "lib.train.trainers.LTRTrainer.train", "os.path.exists", "ValueError", "print", "cfg.keys", "os.path.exists", "ValueError", "print", "cfg_teacher.keys", "torch.nn.parallel.DistributedDataParallel", "torch.nn.parallel.DistributedDataParallel", "torch.device", "torch.device", "lib.train.actors.STARKLightningXtrtdistillActor", "ValueError", "print", "print", "print", "print", "os.path.exists", "os.makedirs"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config.update_config_from_file", "home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config.update_config_from_file", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.update_settings", "home.repos.pwc.inspect_result.researchmm_Stark.train.base_functions.build_dataloaders", "home.repos.pwc.inspect_result.researchmm_Stark.train.train_script_distill.build_network", "home.repos.pwc.inspect_result.researchmm_Stark.train.train_script_distill.build_network", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.eval", "home.repos.pwc.inspect_result.researchmm_Stark.train.base_functions.get_optimizer_scheduler", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train"], ["", "def", "run", "(", "settings", ")", ":", "\n", "    ", "settings", ".", "description", "=", "'Training script for STARK-S, STARK-ST stage1, and STARK-ST stage2'", "\n", "\n", "# update the default configs with config file", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "settings", ".", "cfg_file", ")", ":", "\n", "        ", "raise", "ValueError", "(", "\"%s doesn't exist.\"", "%", "settings", ".", "cfg_file", ")", "\n", "", "config_module", "=", "importlib", ".", "import_module", "(", "\"lib.config.%s.config\"", "%", "settings", ".", "script_name", ")", "\n", "cfg", "=", "config_module", ".", "cfg", "\n", "config_module", ".", "update_config_from_file", "(", "settings", ".", "cfg_file", ")", "\n", "if", "settings", ".", "local_rank", "in", "[", "-", "1", ",", "0", "]", ":", "\n", "        ", "print", "(", "\"New configuration is shown below.\"", ")", "\n", "for", "key", "in", "cfg", ".", "keys", "(", ")", ":", "\n", "            ", "print", "(", "\"%s configuration:\"", "%", "key", ",", "cfg", "[", "key", "]", ")", "\n", "print", "(", "'\\n'", ")", "\n", "\n", "# update the default teacher configs with teacher config file", "\n", "", "", "if", "not", "os", ".", "path", ".", "exists", "(", "settings", ".", "cfg_file_teacher", ")", ":", "\n", "        ", "raise", "ValueError", "(", "\"%s doesn't exist.\"", "%", "settings", ".", "cfg_file_teacher", ")", "\n", "", "config_module_teacher", "=", "importlib", ".", "import_module", "(", "\"lib.config.%s.config\"", "%", "settings", ".", "script_teacher", ")", "\n", "cfg_teacher", "=", "config_module_teacher", ".", "cfg", "\n", "config_module_teacher", ".", "update_config_from_file", "(", "settings", ".", "cfg_file_teacher", ")", "\n", "if", "settings", ".", "local_rank", "in", "[", "-", "1", ",", "0", "]", ":", "\n", "        ", "print", "(", "\"New teacher configuration is shown below.\"", ")", "\n", "for", "key", "in", "cfg_teacher", ".", "keys", "(", ")", ":", "\n", "            ", "print", "(", "\"%s configuration:\"", "%", "key", ",", "cfg_teacher", "[", "key", "]", ")", "\n", "print", "(", "'\\n'", ")", "\n", "\n", "# update settings based on cfg", "\n", "", "", "update_settings", "(", "settings", ",", "cfg", ")", "\n", "\n", "# Record the training log", "\n", "log_dir", "=", "os", ".", "path", ".", "join", "(", "settings", ".", "save_dir", ",", "'logs'", ")", "\n", "if", "settings", ".", "local_rank", "in", "[", "-", "1", ",", "0", "]", ":", "\n", "        ", "if", "not", "os", ".", "path", ".", "exists", "(", "log_dir", ")", ":", "\n", "            ", "os", ".", "makedirs", "(", "log_dir", ")", "\n", "", "", "settings", ".", "log_file", "=", "os", ".", "path", ".", "join", "(", "log_dir", ",", "\"%s-%s.log\"", "%", "(", "settings", ".", "script_name", ",", "settings", ".", "config_name", ")", ")", "\n", "\n", "# Build dataloaders", "\n", "loader_train", ",", "loader_val", "=", "build_dataloaders", "(", "cfg", ",", "settings", ")", "\n", "\n", "if", "\"RepVGG\"", "in", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", "or", "\"swin\"", "in", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", ":", "\n", "        ", "cfg", ".", "ckpt_dir", "=", "settings", ".", "save_dir", "\n", "", "\"\"\"turn on the distillation mode\"\"\"", "\n", "cfg", ".", "TRAIN", ".", "DISTILL", "=", "True", "\n", "cfg_teacher", ".", "TRAIN", ".", "DISTILL", "=", "True", "\n", "net", "=", "build_network", "(", "settings", ".", "script_name", ",", "cfg", ")", "\n", "net_teacher", "=", "build_network", "(", "settings", ".", "script_teacher", ",", "cfg_teacher", ")", "\n", "\n", "# wrap networks to distributed one", "\n", "net", ".", "cuda", "(", ")", "\n", "net_teacher", ".", "cuda", "(", ")", "\n", "net_teacher", ".", "eval", "(", ")", "\n", "\n", "if", "settings", ".", "local_rank", "!=", "-", "1", ":", "\n", "        ", "net", "=", "DDP", "(", "net", ",", "device_ids", "=", "[", "settings", ".", "local_rank", "]", ",", "find_unused_parameters", "=", "True", ")", "\n", "net_teacher", "=", "DDP", "(", "net_teacher", ",", "device_ids", "=", "[", "settings", ".", "local_rank", "]", ",", "find_unused_parameters", "=", "True", ")", "\n", "settings", ".", "device", "=", "torch", ".", "device", "(", "\"cuda:%d\"", "%", "settings", ".", "local_rank", ")", "\n", "", "else", ":", "\n", "        ", "settings", ".", "device", "=", "torch", ".", "device", "(", "\"cuda:0\"", ")", "\n", "# settings.deep_sup = getattr(cfg.TRAIN, \"DEEP_SUPERVISION\", False)", "\n", "# settings.distill = getattr(cfg.TRAIN, \"DISTILL\", False)", "\n", "", "settings", ".", "distill_loss_type", "=", "getattr", "(", "cfg", ".", "TRAIN", ",", "\"DISTILL_LOSS_TYPE\"", ",", "\"L1\"", ")", "\n", "# Loss functions and Actors", "\n", "if", "settings", ".", "script_name", "==", "\"stark_lightning_X_trt\"", ":", "\n", "        ", "objective", "=", "{", "'giou'", ":", "giou_loss", ",", "'l1'", ":", "l1_loss", "}", "\n", "loss_weight", "=", "{", "'giou'", ":", "cfg", ".", "TRAIN", ".", "GIOU_WEIGHT", ",", "'l1'", ":", "cfg", ".", "TRAIN", ".", "L1_WEIGHT", "}", "\n", "actor", "=", "STARKLightningXtrtdistillActor", "(", "net", "=", "net", ",", "objective", "=", "objective", ",", "loss_weight", "=", "loss_weight", ",", "settings", "=", "settings", ",", "\n", "net_teacher", "=", "net_teacher", ")", "\n", "", "else", ":", "\n", "        ", "raise", "ValueError", "(", "\"illegal script name\"", ")", "\n", "\n", "# Optimizer, parameters, and learning rates", "\n", "", "optimizer", ",", "lr_scheduler", "=", "get_optimizer_scheduler", "(", "net", ",", "cfg", ")", "\n", "use_amp", "=", "getattr", "(", "cfg", ".", "TRAIN", ",", "\"AMP\"", ",", "False", ")", "\n", "trainer", "=", "LTRTrainer", "(", "actor", ",", "[", "loader_train", ",", "loader_val", "]", ",", "optimizer", ",", "settings", ",", "lr_scheduler", ",", "use_amp", "=", "use_amp", ")", "\n", "\n", "# train process", "\n", "trainer", ".", "train", "(", "cfg", ".", "TRAIN", ".", "EPOCH", ",", "load_latest", "=", "True", ",", "fail_safe", "=", "True", ",", "distill", "=", "True", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.train.train_script.run": [[22, 102], ["importlib.import_module", "importlib.import_module.update_config_from_file", "base_functions.update_settings", "os.path.join", "os.path.join", "base_functions.build_dataloaders", "lib.models.stark.build_stark_lightning_x_trt.cuda", "getattr", "getattr", "getattr", "base_functions.get_optimizer_scheduler", "getattr", "lib.train.trainers.LTRTrainer", "os.path.exists", "ValueError", "print", "cfg.keys", "lib.models.stark.build_starks", "torch.nn.parallel.DistributedDataParallel", "torch.device", "torch.device", "lib.train.actors.STARKSActor", "lib.train.trainers.LTRTrainer.train", "lib.train.trainers.LTRTrainer.train", "print", "print", "os.path.exists", "os.makedirs", "lib.models.stark.build_starkst", "lib.train.actors.STARKSTActor", "lib.models.stark.build_stark_lightning_x_trt", "ValueError", "torch.nn.BCEWithLogitsLoss", "lib.train.actors.STARKLightningXtrtActor", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.stark_st1.config.update_config_from_file", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.update_settings", "home.repos.pwc.inspect_result.researchmm_Stark.train.base_functions.build_dataloaders", "home.repos.pwc.inspect_result.researchmm_Stark.train.base_functions.get_optimizer_scheduler", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_s.build_starks", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_st.build_starkst", "home.repos.pwc.inspect_result.researchmm_Stark.stark.stark_lightning_x_trt.build_stark_lightning_x_trt"], ["def", "run", "(", "settings", ")", ":", "\n", "    ", "settings", ".", "description", "=", "'Training script for STARK-S, STARK-ST stage1, and STARK-ST stage2'", "\n", "\n", "# update the default configs with config file", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "settings", ".", "cfg_file", ")", ":", "\n", "        ", "raise", "ValueError", "(", "\"%s doesn't exist.\"", "%", "settings", ".", "cfg_file", ")", "\n", "", "config_module", "=", "importlib", ".", "import_module", "(", "\"lib.config.%s.config\"", "%", "settings", ".", "script_name", ")", "\n", "cfg", "=", "config_module", ".", "cfg", "\n", "config_module", ".", "update_config_from_file", "(", "settings", ".", "cfg_file", ")", "\n", "if", "settings", ".", "local_rank", "in", "[", "-", "1", ",", "0", "]", ":", "\n", "        ", "print", "(", "\"New configuration is shown below.\"", ")", "\n", "for", "key", "in", "cfg", ".", "keys", "(", ")", ":", "\n", "            ", "print", "(", "\"%s configuration:\"", "%", "key", ",", "cfg", "[", "key", "]", ")", "\n", "print", "(", "'\\n'", ")", "\n", "\n", "# update settings based on cfg", "\n", "", "", "update_settings", "(", "settings", ",", "cfg", ")", "\n", "\n", "# Record the training log", "\n", "log_dir", "=", "os", ".", "path", ".", "join", "(", "settings", ".", "save_dir", ",", "'logs'", ")", "\n", "if", "settings", ".", "local_rank", "in", "[", "-", "1", ",", "0", "]", ":", "\n", "        ", "if", "not", "os", ".", "path", ".", "exists", "(", "log_dir", ")", ":", "\n", "            ", "os", ".", "makedirs", "(", "log_dir", ")", "\n", "", "", "settings", ".", "log_file", "=", "os", ".", "path", ".", "join", "(", "log_dir", ",", "\"%s-%s.log\"", "%", "(", "settings", ".", "script_name", ",", "settings", ".", "config_name", ")", ")", "\n", "\n", "# Build dataloaders", "\n", "loader_train", ",", "loader_val", "=", "build_dataloaders", "(", "cfg", ",", "settings", ")", "\n", "\n", "if", "\"RepVGG\"", "in", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", "or", "\"swin\"", "in", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", "or", "\"LightTrack\"", "in", "cfg", ".", "MODEL", ".", "BACKBONE", ".", "TYPE", ":", "\n", "        ", "cfg", ".", "ckpt_dir", "=", "settings", ".", "save_dir", "\n", "\n", "# Create network", "\n", "", "if", "settings", ".", "script_name", "==", "\"stark_s\"", ":", "\n", "        ", "net", "=", "build_starks", "(", "cfg", ")", "\n", "", "elif", "settings", ".", "script_name", "==", "\"stark_st1\"", "or", "settings", ".", "script_name", "==", "\"stark_st2\"", ":", "\n", "        ", "net", "=", "build_starkst", "(", "cfg", ")", "\n", "", "elif", "settings", ".", "script_name", "==", "\"stark_lightning_X_trt\"", ":", "\n", "        ", "net", "=", "build_stark_lightning_x_trt", "(", "cfg", ",", "phase", "=", "\"train\"", ")", "\n", "", "else", ":", "\n", "        ", "raise", "ValueError", "(", "\"illegal script name\"", ")", "\n", "\n", "# wrap networks to distributed one", "\n", "", "net", ".", "cuda", "(", ")", "\n", "if", "settings", ".", "local_rank", "!=", "-", "1", ":", "\n", "        ", "net", "=", "DDP", "(", "net", ",", "device_ids", "=", "[", "settings", ".", "local_rank", "]", ",", "find_unused_parameters", "=", "True", ")", "\n", "settings", ".", "device", "=", "torch", ".", "device", "(", "\"cuda:%d\"", "%", "settings", ".", "local_rank", ")", "\n", "", "else", ":", "\n", "        ", "settings", ".", "device", "=", "torch", ".", "device", "(", "\"cuda:0\"", ")", "\n", "", "settings", ".", "deep_sup", "=", "getattr", "(", "cfg", ".", "TRAIN", ",", "\"DEEP_SUPERVISION\"", ",", "False", ")", "\n", "settings", ".", "distill", "=", "getattr", "(", "cfg", ".", "TRAIN", ",", "\"DISTILL\"", ",", "False", ")", "\n", "settings", ".", "distill_loss_type", "=", "getattr", "(", "cfg", ".", "TRAIN", ",", "\"DISTILL_LOSS_TYPE\"", ",", "\"KL\"", ")", "\n", "# Loss functions and Actors", "\n", "if", "settings", ".", "script_name", "==", "\"stark_s\"", "or", "settings", ".", "script_name", "==", "\"stark_st1\"", ":", "\n", "        ", "objective", "=", "{", "'giou'", ":", "giou_loss", ",", "'l1'", ":", "l1_loss", "}", "\n", "loss_weight", "=", "{", "'giou'", ":", "cfg", ".", "TRAIN", ".", "GIOU_WEIGHT", ",", "'l1'", ":", "cfg", ".", "TRAIN", ".", "L1_WEIGHT", "}", "\n", "actor", "=", "STARKSActor", "(", "net", "=", "net", ",", "objective", "=", "objective", ",", "loss_weight", "=", "loss_weight", ",", "settings", "=", "settings", ")", "\n", "", "elif", "settings", ".", "script_name", "==", "\"stark_st2\"", ":", "\n", "        ", "objective", "=", "{", "'cls'", ":", "BCEWithLogitsLoss", "(", ")", "}", "\n", "loss_weight", "=", "{", "'cls'", ":", "1.0", "}", "\n", "actor", "=", "STARKSTActor", "(", "net", "=", "net", ",", "objective", "=", "objective", ",", "loss_weight", "=", "loss_weight", ",", "settings", "=", "settings", ")", "\n", "", "elif", "settings", ".", "script_name", "==", "\"stark_lightning_X_trt\"", ":", "\n", "        ", "objective", "=", "{", "'giou'", ":", "giou_loss", ",", "'l1'", ":", "l1_loss", "}", "\n", "loss_weight", "=", "{", "'giou'", ":", "cfg", ".", "TRAIN", ".", "GIOU_WEIGHT", ",", "'l1'", ":", "cfg", ".", "TRAIN", ".", "L1_WEIGHT", "}", "\n", "actor", "=", "STARKLightningXtrtActor", "(", "net", "=", "net", ",", "objective", "=", "objective", ",", "loss_weight", "=", "loss_weight", ",", "settings", "=", "settings", ")", "\n", "", "else", ":", "\n", "        ", "raise", "ValueError", "(", "\"illegal script name\"", ")", "\n", "\n", "# if cfg.TRAIN.DEEP_SUPERVISION:", "\n", "#     raise ValueError(\"Deep supervision is not supported now.\")", "\n", "\n", "# Optimizer, parameters, and learning rates", "\n", "", "optimizer", ",", "lr_scheduler", "=", "get_optimizer_scheduler", "(", "net", ",", "cfg", ")", "\n", "use_amp", "=", "getattr", "(", "cfg", ".", "TRAIN", ",", "\"AMP\"", ",", "False", ")", "\n", "trainer", "=", "LTRTrainer", "(", "actor", ",", "[", "loader_train", ",", "loader_val", "]", ",", "optimizer", ",", "settings", ",", "lr_scheduler", ",", "use_amp", "=", "use_amp", ")", "\n", "\n", "# train process", "\n", "if", "settings", ".", "script_name", "in", "[", "\"stark_st2\"", ",", "\"stark_st2_plus_sp\"", "]", ":", "\n", "        ", "trainer", ".", "train", "(", "cfg", ".", "TRAIN", ".", "EPOCH", ",", "load_latest", "=", "True", ",", "fail_safe", "=", "True", ",", "load_previous_ckpt", "=", "True", ")", "\n", "", "else", ":", "\n", "        ", "trainer", ".", "train", "(", "cfg", ".", "TRAIN", ".", "EPOCH", ",", "load_latest", "=", "True", ",", "fail_safe", "=", "True", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.tensorboard.TensorboardWriter.__init__": [[11, 14], ["collections.OrderedDict", "SummaryWriter", "os.path.join"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "directory", ",", "loader_names", ")", ":", "\n", "        ", "self", ".", "directory", "=", "directory", "\n", "self", ".", "writer", "=", "OrderedDict", "(", "{", "name", ":", "SummaryWriter", "(", "os", ".", "path", ".", "join", "(", "self", ".", "directory", ",", "name", ")", ")", "for", "name", "in", "loader_names", "}", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.tensorboard.TensorboardWriter.write_info": [[15, 21], ["SummaryWriter", "SummaryWriter.add_text", "SummaryWriter.add_text", "SummaryWriter.add_text", "SummaryWriter.close", "os.path.join"], "methods", ["None"], ["", "def", "write_info", "(", "self", ",", "script_name", ",", "description", ")", ":", "\n", "        ", "tb_info_writer", "=", "SummaryWriter", "(", "os", ".", "path", ".", "join", "(", "self", ".", "directory", ",", "'info'", ")", ")", "\n", "tb_info_writer", ".", "add_text", "(", "'Script_name'", ",", "script_name", ")", "\n", "tb_info_writer", ".", "add_text", "(", "'Description'", ",", "description", ")", "\n", "tb_info_writer", ".", "close", "(", ")", "\n", "\n", "", "def", "write_epoch", "(", "self", ",", "stats", ":", "OrderedDict", ",", "epoch", ":", "int", ",", "ind", "=", "-", "1", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.tensorboard.TensorboardWriter.write_epoch": [[22, 29], ["stats.items", "loader_stats.items", "hasattr", "getattr", "tensorboard.TensorboardWriter.writer[].add_scalar"], "methods", ["None"], ["        ", "for", "loader_name", ",", "loader_stats", "in", "stats", ".", "items", "(", ")", ":", "\n", "            ", "if", "loader_stats", "is", "None", ":", "\n", "                ", "continue", "\n", "", "for", "var_name", ",", "val", "in", "loader_stats", ".", "items", "(", ")", ":", "\n", "                ", "if", "hasattr", "(", "val", ",", "'history'", ")", "and", "getattr", "(", "val", ",", "'has_new_data'", ",", "True", ")", ":", "\n", "                    ", "self", ".", "writer", "[", "loader_name", "]", ".", "add_scalar", "(", "var_name", ",", "val", ".", "history", "[", "ind", "]", ",", "epoch", ")", "", "", "", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.multigpu.MultiGPU.__getattr__": [[10, 16], ["getattr", "super().__getattr__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.ModuleWrapper.__getattr__"], ["    ", "def", "__getattr__", "(", "self", ",", "item", ")", ":", "\n", "        ", "try", ":", "\n", "            ", "return", "super", "(", ")", ".", "__getattr__", "(", "item", ")", "\n", "", "except", ":", "\n", "            ", "pass", "\n", "", "return", "getattr", "(", "self", ".", "module", ",", "item", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.multigpu.is_multi_gpu": [[4, 6], ["isinstance"], "function", ["None"], ["\n", "def", "is_multi_gpu", "(", "net", ")", ":", "\n", "    ", "return", "isinstance", "(", "net", ",", "(", "MultiGPU", ",", "nn", ".", "parallel", ".", "distributed", ".", "DistributedDataParallel", ")", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.settings.Settings.__init__": [[6, 8], ["settings.Settings.set_default"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.settings.Settings.set_default"], ["def", "__init__", "(", "self", ")", ":", "\n", "        ", "self", ".", "set_default", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.settings.Settings.set_default": [[9, 12], ["ltr.admin.environment.env_settings"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["", "def", "set_default", "(", "self", ")", ":", "\n", "        ", "self", ".", "env", "=", "env_settings", "(", ")", "\n", "self", ".", "use_gpu", "=", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.stats.StatValue.__init__": [[4, 6], ["stats.StatValue.clear"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.stats.AverageMeter.clear"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "self", ".", "clear", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.stats.StatValue.reset": [[7, 9], ["None"], "methods", ["None"], ["", "def", "reset", "(", "self", ")", ":", "\n", "        ", "self", ".", "val", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.stats.StatValue.clear": [[10, 13], ["stats.StatValue.reset"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.reset"], ["", "def", "clear", "(", "self", ")", ":", "\n", "        ", "self", ".", "reset", "(", ")", "\n", "self", ".", "history", "=", "[", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.stats.StatValue.update": [[14, 17], ["stats.StatValue.history.append"], "methods", ["None"], ["", "def", "update", "(", "self", ",", "val", ")", ":", "\n", "        ", "self", ".", "val", "=", "val", "\n", "self", ".", "history", ".", "append", "(", "self", ".", "val", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.stats.AverageMeter.__init__": [[21, 24], ["stats.AverageMeter.clear"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.stats.AverageMeter.clear"], ["def", "__init__", "(", "self", ")", ":", "\n", "        ", "self", ".", "clear", "(", ")", "\n", "self", ".", "has_new_data", "=", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.stats.AverageMeter.reset": [[25, 30], ["None"], "methods", ["None"], ["", "def", "reset", "(", "self", ")", ":", "\n", "        ", "self", ".", "avg", "=", "0", "\n", "self", ".", "val", "=", "0", "\n", "self", ".", "sum", "=", "0", "\n", "self", ".", "count", "=", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.stats.AverageMeter.clear": [[31, 34], ["stats.AverageMeter.reset"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.reset"], ["", "def", "clear", "(", "self", ")", ":", "\n", "        ", "self", ".", "reset", "(", ")", "\n", "self", ".", "history", "=", "[", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.stats.AverageMeter.update": [[35, 40], ["None"], "methods", ["None"], ["", "def", "update", "(", "self", ",", "val", ",", "n", "=", "1", ")", ":", "\n", "        ", "self", ".", "val", "=", "val", "\n", "self", ".", "sum", "+=", "val", "*", "n", "\n", "self", ".", "count", "+=", "n", "\n", "self", ".", "avg", "=", "self", ".", "sum", "/", "self", ".", "count", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.stats.AverageMeter.new_epoch": [[41, 48], ["stats.AverageMeter.history.append", "stats.AverageMeter.reset"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.reset"], ["", "def", "new_epoch", "(", "self", ")", ":", "\n", "        ", "if", "self", ".", "count", ">", "0", ":", "\n", "            ", "self", ".", "history", ".", "append", "(", "self", ".", "avg", ")", "\n", "self", ".", "reset", "(", ")", "\n", "self", ".", "has_new_data", "=", "True", "\n", "", "else", ":", "\n", "            ", "self", ".", "has_new_data", "=", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.stats.topk_accuracy": [[50, 72], ["max", "target.size", "output.topk", "pred.t.t", "pred.t.eq", "isinstance", "target.view().expand_as", "res.append", "correct[].view().float().sum", "target.view", "correct[].view().float", "correct[].view"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size"], ["", "", "", "def", "topk_accuracy", "(", "output", ",", "target", ",", "topk", "=", "(", "1", ",", ")", ")", ":", "\n", "    ", "\"\"\"Computes the precision@k for the specified values of k\"\"\"", "\n", "single_input", "=", "not", "isinstance", "(", "topk", ",", "(", "tuple", ",", "list", ")", ")", "\n", "if", "single_input", ":", "\n", "        ", "topk", "=", "(", "topk", ",", ")", "\n", "\n", "", "maxk", "=", "max", "(", "topk", ")", "\n", "batch_size", "=", "target", ".", "size", "(", "0", ")", "\n", "\n", "_", ",", "pred", "=", "output", ".", "topk", "(", "maxk", ",", "1", ",", "True", ",", "True", ")", "\n", "pred", "=", "pred", ".", "t", "(", ")", "\n", "correct", "=", "pred", ".", "eq", "(", "target", ".", "view", "(", "1", ",", "-", "1", ")", ".", "expand_as", "(", "pred", ")", ")", "\n", "\n", "res", "=", "[", "]", "\n", "for", "k", "in", "topk", ":", "\n", "        ", "correct_k", "=", "correct", "[", ":", "k", "]", ".", "view", "(", "-", "1", ")", ".", "float", "(", ")", ".", "sum", "(", "0", ",", "keepdim", "=", "True", ")", "[", "0", "]", "\n", "res", ".", "append", "(", "correct_k", "*", "100.0", "/", "batch_size", ")", "\n", "\n", "", "if", "single_input", ":", "\n", "        ", "return", "res", "[", "0", "]", "\n", "\n", "", "return", "res", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.create_default_local_file": [[6, 42], ["os.path.join", "collections.OrderedDict", "os.path.dirname", "open", "f.write", "f.write", "collections.OrderedDict.items", "f.write", "f.write"], "function", ["None"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "test_path", "=", "os", ".", "path", ".", "abspath", "(", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "__file__", ")", ",", "'..'", ")", ")", "\n", "\n", "self", ".", "results_path", "=", "'{}/tracking_results/'", ".", "format", "(", "test_path", ")", "\n", "self", ".", "segmentation_path", "=", "'{}/segmentation_results/'", ".", "format", "(", "test_path", ")", "\n", "self", ".", "network_path", "=", "'{}/networks/'", ".", "format", "(", "test_path", ")", "\n", "self", ".", "result_plot_path", "=", "'{}/result_plots/'", ".", "format", "(", "test_path", ")", "\n", "self", ".", "otb_path", "=", "''", "\n", "self", ".", "nfs_path", "=", "''", "\n", "self", ".", "uav_path", "=", "''", "\n", "self", ".", "tpl_path", "=", "''", "\n", "self", ".", "vot_path", "=", "''", "\n", "self", ".", "got10k_path", "=", "''", "\n", "self", ".", "lasot_path", "=", "''", "\n", "self", ".", "trackingnet_path", "=", "''", "\n", "self", ".", "davis_dir", "=", "''", "\n", "self", ".", "youtubevos_dir", "=", "''", "\n", "\n", "self", ".", "got_packed_results_path", "=", "''", "\n", "self", ".", "got_reports_path", "=", "''", "\n", "self", ".", "tn_packed_results_path", "=", "''", "\n", "\n", "\n", "", "", "def", "create_default_local_file", "(", ")", ":", "\n", "    ", "comment", "=", "{", "'results_path'", ":", "'Where to store tracking results'", ",", "\n", "'network_path'", ":", "'Where tracking networks are stored.'", "}", "\n", "\n", "path", "=", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "__file__", ")", ",", "'local.py'", ")", "\n", "with", "open", "(", "path", ",", "'w'", ")", "as", "f", ":", "\n", "        ", "settings", "=", "EnvSettings", "(", ")", "\n", "\n", "f", ".", "write", "(", "'from test.evaluation.environment import EnvSettings\\n\\n'", ")", "\n", "f", ".", "write", "(", "'def local_env_settings():\\n'", ")", "\n", "f", ".", "write", "(", "'    settings = EnvSettings()\\n\\n'", ")", "\n", "f", ".", "write", "(", "'    # Set your local paths here.\\n\\n'", ")", "\n", "\n", "for", "attr", "in", "dir", "(", "settings", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.create_default_local_file_ITP_train": [[45, 90], ["os.path.join", "collections.OrderedDict", "os.path.dirname", "open", "f.write", "f.write", "collections.OrderedDict.items", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "f.write", "f.write", "f.write"], "function", ["None"], ["                ", "comment_str", "=", "comment", "[", "attr", "]", "\n", "", "attr_val", "=", "getattr", "(", "settings", ",", "attr", ")", "\n", "if", "not", "attr", ".", "startswith", "(", "'__'", ")", "and", "not", "callable", "(", "attr_val", ")", ":", "\n", "                ", "if", "comment_str", "is", "None", ":", "\n", "                    ", "f", ".", "write", "(", "'    settings.{} = \\'{}\\'\\n'", ".", "format", "(", "attr", ",", "attr_val", ")", ")", "\n", "", "else", ":", "\n", "                    ", "f", ".", "write", "(", "'    settings.{} = \\'{}\\'    # {}\\n'", ".", "format", "(", "attr", ",", "attr_val", ",", "comment_str", ")", ")", "\n", "", "", "", "f", ".", "write", "(", "'\\n    return settings\\n\\n'", ")", "\n", "\n", "\n", "", "", "class", "EnvSettings_ITP", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "workspace_dir", ",", "data_dir", ",", "save_dir", ")", ":", "\n", "        ", "self", ".", "prj_dir", "=", "workspace_dir", "\n", "self", ".", "save_dir", "=", "save_dir", "\n", "self", ".", "results_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "'test/tracking_results'", ")", "\n", "self", ".", "segmentation_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "'test/segmentation_results'", ")", "\n", "self", ".", "network_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "'test/networks'", ")", "\n", "self", ".", "result_plot_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "'test/result_plots'", ")", "\n", "self", ".", "otb_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'OTB2015'", ")", "\n", "self", ".", "nfs_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'nfs'", ")", "\n", "self", ".", "uav_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'UAV123'", ")", "\n", "self", ".", "tc128_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'TC128'", ")", "\n", "self", ".", "tpl_path", "=", "''", "\n", "self", ".", "vot_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'VOT2019'", ")", "\n", "self", ".", "got10k_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'got10k'", ")", "\n", "self", ".", "got10k_lmdb_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'got10k_lmdb'", ")", "\n", "self", ".", "lasot_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'lasot'", ")", "\n", "self", ".", "lasot_lmdb_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'lasot_lmdb'", ")", "\n", "self", ".", "trackingnet_path", "=", "os", ".", "path", ".", "join", "(", "data_dir", ",", "'trackingNet'", ")", "\n", "self", ".", "davis_dir", "=", "''", "\n", "self", ".", "youtubevos_dir", "=", "''", "\n", "\n", "self", ".", "got_packed_results_path", "=", "''", "\n", "self", ".", "got_reports_path", "=", "''", "\n", "self", ".", "tn_packed_results_path", "=", "''", "\n", "\n", "\n", "", "", "def", "create_default_local_file_ITP_test", "(", "workspace_dir", ",", "data_dir", ",", "save_dir", ")", ":", "\n", "    ", "comment", "=", "{", "'results_path'", ":", "'Where to store tracking results'", ",", "\n", "'network_path'", ":", "'Where tracking networks are stored.'", "}", "\n", "\n", "path", "=", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "__file__", ")", ",", "'local.py'", ")", "\n", "with", "open", "(", "path", ",", "'w'", ")", "as", "f", ":", "\n", "        ", "settings", "=", "EnvSettings_ITP", "(", "workspace_dir", ",", "data_dir", ",", "save_dir", ")", "\n", "\n", "f", ".", "write", "(", "'from lib.test.evaluation.environment import EnvSettings\\n\\n'", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings": [[44, 54], ["importlib.import_module", "importlib.import_module.EnvironmentSettings", "os.path.join", "environment.create_default_local_file", "RuntimeError", "os.path.dirname"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.create_default_local_file"], ["if", "attr", "in", "comment", ":", "\n", "                ", "comment_str", "=", "comment", "[", "attr", "]", "\n", "", "attr_val", "=", "getattr", "(", "settings", ",", "attr", ")", "\n", "if", "not", "attr", ".", "startswith", "(", "'__'", ")", "and", "not", "callable", "(", "attr_val", ")", ":", "\n", "                ", "if", "comment_str", "is", "None", ":", "\n", "                    ", "f", ".", "write", "(", "'    settings.{} = \\'{}\\'\\n'", ".", "format", "(", "attr", ",", "attr_val", ")", ")", "\n", "", "else", ":", "\n", "                    ", "f", ".", "write", "(", "'    settings.{} = \\'{}\\'    # {}\\n'", ".", "format", "(", "attr", ",", "attr_val", ",", "comment_str", ")", ")", "\n", "", "", "", "f", ".", "write", "(", "'\\n    return settings\\n\\n'", ")", "\n", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.__init__": [[28, 40], ["None"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "fun_name", ",", "fun_module", ",", "args", ",", "kwds", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            fun_name - The function which returns the network\n            fun_module - the module which contains the network function\n            args - arguments which are passed to the network function\n            kwds - arguments which are passed to the network function\n        \"\"\"", "\n", "self", ".", "fun_name", "=", "fun_name", "\n", "self", ".", "fun_module", "=", "fun_module", "\n", "self", ".", "args", "=", "args", "\n", "self", ".", "kwds", "=", "kwds", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get": [[41, 46], ["importlib.import_module", "getattr", "getattr."], "methods", ["None"], ["", "def", "get", "(", "self", ")", ":", "\n", "        ", "\"\"\" Rebuild the network by calling the network function with the correct arguments. \"\"\"", "\n", "net_module", "=", "importlib", ".", "import_module", "(", "self", ".", "fun_module", ")", "\n", "net_fun", "=", "getattr", "(", "net_module", ",", "self", ".", "fun_name", ")", "\n", "return", "net_fun", "(", "*", "self", ".", "args", ",", "**", "self", ".", "kwds", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.model_constructor": [[5, 22], ["functools.wraps", "model_constructor.NetConstructor", "f", "isinstance"], "function", ["None"], ["def", "model_constructor", "(", "f", ")", ":", "\n", "    ", "\"\"\" Wraps the function 'f' which returns the network. An extra field 'constructor' is added to the network returned\n    by 'f'. This field contains an instance of the  'NetConstructor' class, which contains the information needed to\n    re-construct the network, such as the name of the function 'f', the function arguments etc. Thus, the network can\n    be easily constructed from a saved checkpoint by calling NetConstructor.get() function.\n    \"\"\"", "\n", "@", "wraps", "(", "f", ")", "\n", "def", "f_wrapper", "(", "*", "args", ",", "**", "kwds", ")", ":", "\n", "        ", "net_constr", "=", "NetConstructor", "(", "f", ".", "__name__", ",", "f", ".", "__module__", ",", "args", ",", "kwds", ")", "\n", "output", "=", "f", "(", "*", "args", ",", "**", "kwds", ")", "\n", "if", "isinstance", "(", "output", ",", "(", "tuple", ",", "list", ")", ")", ":", "\n", "# Assume first argument is the network", "\n", "            ", "output", "[", "0", "]", ".", "constructor", "=", "net_constr", "\n", "", "else", ":", "\n", "            ", "output", ".", "constructor", "=", "net_constr", "\n", "", "return", "output", "\n", "", "return", "f_wrapper", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.loading.load_trained_network": [[10, 17], ["os.path.join", "loading.load_network"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWrapper.load_network"], ["\n", "kwargs", "[", "'backbone_pretrained'", "]", "=", "False", "\n", "if", "os", ".", "path", ".", "isabs", "(", "net_path", ")", ":", "\n", "        ", "path_full", "=", "net_path", "\n", "net", ",", "_", "=", "ltr_loading", ".", "load_network", "(", "path_full", ",", "**", "kwargs", ")", "\n", "", "elif", "isinstance", "(", "env_settings", "(", ")", ".", "network_path", ",", "(", "list", ",", "tuple", ")", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.loading.load_pretrained": [[19, 32], ["ltr.admin.settings.Settings", "os.path.join", "loading.load_network"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWrapper.load_network"], ["for", "p", "in", "env_settings", "(", ")", ".", "network_path", ":", "\n", "            ", "path_full", "=", "os", ".", "path", ".", "join", "(", "p", ",", "net_path", ")", "\n", "try", ":", "\n", "                ", "net", ",", "_", "=", "ltr_loading", ".", "load_network", "(", "path_full", ",", "**", "kwargs", ")", "\n", "break", "\n", "", "except", "Exception", "as", "e", ":", "\n", "# print(e)", "\n", "                ", "pass", "\n", "\n", "", "", "assert", "net", "is", "not", "None", ",", "'Failed to load network'", "\n", "", "else", ":", "\n", "        ", "path_full", "=", "os", ".", "path", ".", "join", "(", "env_settings", "(", ")", ".", "network_path", ",", "net_path", ")", "\n", "net", ",", "_", "=", "ltr_loading", ".", "load_network", "(", "path_full", ",", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.loading.load_network": [[34, 109], ["pathlib.Path.is_file", "loading.torch_load_legacy", "net_constr.get.load_state_dict", "pathlib.Path", "str", "sorted", "isinstance", "net_constr.fun_module.startswith", "getattr", "list", "kwargs.items", "net_constr.get", "RuntimeError", "pathlib.Path.glob", "Exception", "sorted", "isinstance", "importlib.import_module", "inspect.signature().parameters.keys", "pathlib.Path.glob", "Exception", "len", "Exception", "os.path.expanduser", "print", "len", "len", "inspect.signature"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.loading.torch_load_legacy", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.admin.loading.load_weights": [[111, 116], ["torch.load", "net.load_state_dict"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict"], []], "home.repos.pwc.inspect_result.researchmm_Stark.admin.loading.torch_load_legacy": [[118, 131], ["loading._setup_legacy_env", "torch.load", "loading._cleanup_legacy_env"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.loading._setup_legacy_env", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.admin.loading._cleanup_legacy_env"], []], "home.repos.pwc.inspect_result.researchmm_Stark.admin.loading._setup_legacy_env": [[133, 142], ["importlib.import_module", "importlib.import_module", "importlib.import_module"], "function", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.admin.loading._cleanup_legacy_env": [[144, 151], ["sys.modules.keys", "m.startswith", "del_modules.append"], "function", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net_lmdb.TrackingNet_lmdb.__init__": [[41, 71], ["base_video_dataset.BaseVideoDataset.__init__", "tracking_net_lmdb.list_sequences", "tracking_net_lmdb.TrackingNet_lmdb._load_class_info", "list", "tracking_net_lmdb.TrackingNet_lmdb.class_list.sort", "random.sample", "tracking_net_lmdb.TrackingNet_lmdb.seq_per_class.keys", "lib.train.admin.env_settings", "int", "range", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net.list_sequences", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net.TrackingNet._load_class_info", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "__init__", "(", "self", ",", "root", "=", "None", ",", "image_loader", "=", "jpeg4py_loader", ",", "set_ids", "=", "None", ",", "data_fraction", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root        - The path to the TrackingNet folder, containing the training sets.\n            image_loader (jpeg4py_loader) -  The function to read the images. jpeg4py (https://github.com/ajkxyz/jpeg4py)\n                                            is used by default.\n            set_ids (None) - List containing the ids of the TrackingNet sets to be used for training. If None, all the\n                            sets (0 - 11) will be used.\n            data_fraction - Fraction of dataset to be used. The complete dataset is used by default\n        \"\"\"", "\n", "root", "=", "env_settings", "(", ")", ".", "trackingnet_lmdb_dir", "if", "root", "is", "None", "else", "root", "\n", "super", "(", ")", ".", "__init__", "(", "'TrackingNet_lmdb'", ",", "root", ",", "image_loader", ")", "\n", "\n", "if", "set_ids", "is", "None", ":", "\n", "            ", "set_ids", "=", "[", "i", "for", "i", "in", "range", "(", "12", ")", "]", "\n", "\n", "", "self", ".", "set_ids", "=", "set_ids", "\n", "\n", "# Keep a list of all videos. Sequence list is a list of tuples (set_id, video_name) containing the set_id and", "\n", "# video_name for each sequence", "\n", "self", ".", "sequence_list", "=", "list_sequences", "(", "self", ".", "root", ")", "\n", "\n", "if", "data_fraction", "is", "not", "None", ":", "\n", "            ", "self", ".", "sequence_list", "=", "random", ".", "sample", "(", "self", ".", "sequence_list", ",", "int", "(", "len", "(", "self", ".", "sequence_list", ")", "*", "data_fraction", ")", ")", "\n", "\n", "", "self", ".", "seq_to_class_map", ",", "self", ".", "seq_per_class", "=", "self", ".", "_load_class_info", "(", ")", "\n", "\n", "# we do not have the class_lists for the tracking net", "\n", "self", ".", "class_list", "=", "list", "(", "self", ".", "seq_per_class", ".", "keys", "(", ")", ")", "\n", "self", ".", "class_list", ".", "sort", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net_lmdb.TrackingNet_lmdb._load_class_info": [[72, 88], ["os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "enumerate", "os.path.dirname", "os.path.dirname", "os.path.dirname", "os.path.dirname", "open", "seq_to_class_map.get", "os.path.realpath", "os.path.realpath", "os.path.realpath", "os.path.realpath", "seq_per_class[].append", "seq_class.split", "seq_class.rstrip().split", "seq_class.rstrip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "def", "_load_class_info", "(", "self", ")", ":", "\n", "        ", "ltr_path", "=", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "realpath", "(", "__file__", ")", ")", ",", "'..'", ")", "\n", "class_map_path", "=", "os", ".", "path", ".", "join", "(", "ltr_path", ",", "'data_specs'", ",", "'trackingnet_classmap.txt'", ")", "\n", "\n", "with", "open", "(", "class_map_path", ",", "'r'", ")", "as", "f", ":", "\n", "            ", "seq_to_class_map", "=", "{", "seq_class", ".", "split", "(", "'\\t'", ")", "[", "0", "]", ":", "seq_class", ".", "rstrip", "(", ")", ".", "split", "(", "'\\t'", ")", "[", "1", "]", "for", "seq_class", "in", "f", "}", "\n", "\n", "", "seq_per_class", "=", "{", "}", "\n", "for", "i", ",", "seq", "in", "enumerate", "(", "self", ".", "sequence_list", ")", ":", "\n", "            ", "class_name", "=", "seq_to_class_map", ".", "get", "(", "seq", "[", "1", "]", ",", "'Unknown'", ")", "\n", "if", "class_name", "not", "in", "seq_per_class", ":", "\n", "                ", "seq_per_class", "[", "class_name", "]", "=", "[", "i", "]", "\n", "", "else", ":", "\n", "                ", "seq_per_class", "[", "class_name", "]", ".", "append", "(", "i", ")", "\n", "\n", "", "", "return", "seq_to_class_map", ",", "seq_per_class", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net_lmdb.TrackingNet_lmdb.get_name": [[89, 91], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "return", "'trackingnet_lmdb'", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net_lmdb.TrackingNet_lmdb.has_class_info": [[92, 94], ["None"], "methods", ["None"], ["", "def", "has_class_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net_lmdb.TrackingNet_lmdb.get_sequences_in_class": [[95, 97], ["None"], "methods", ["None"], ["", "def", "get_sequences_in_class", "(", "self", ",", "class_name", ")", ":", "\n", "        ", "return", "self", ".", "seq_per_class", "[", "class_name", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net_lmdb.TrackingNet_lmdb._read_bb_anno": [[98, 106], ["numpy.array().astype", "torch.tensor", "lib.utils.lmdb_utils.decode_str().split", "list", "map", "numpy.array", "lib.utils.lmdb_utils.decode_str", "line.split", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_str"], ["", "def", "_read_bb_anno", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "set_id", "=", "self", ".", "sequence_list", "[", "seq_id", "]", "[", "0", "]", "\n", "vid_name", "=", "self", ".", "sequence_list", "[", "seq_id", "]", "[", "1", "]", "\n", "gt_str_list", "=", "decode_str", "(", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "\"TRAIN_%d_lmdb\"", "%", "set_id", ")", ",", "\n", "os", ".", "path", ".", "join", "(", "\"anno\"", ",", "vid_name", "+", "\".txt\"", ")", ")", ".", "split", "(", "'\\n'", ")", "[", ":", "-", "1", "]", "\n", "gt_list", "=", "[", "list", "(", "map", "(", "float", ",", "line", ".", "split", "(", "','", ")", ")", ")", "for", "line", "in", "gt_str_list", "]", "\n", "gt_arr", "=", "np", ".", "array", "(", "gt_list", ")", ".", "astype", "(", "np", ".", "float32", ")", "\n", "return", "torch", ".", "tensor", "(", "gt_arr", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net_lmdb.TrackingNet_lmdb.get_sequence_info": [[107, 113], ["tracking_net_lmdb.TrackingNet_lmdb._read_bb_anno", "valid.clone().byte", "valid.clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._read_bb_anno"], ["", "def", "get_sequence_info", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "bbox", "=", "self", ".", "_read_bb_anno", "(", "seq_id", ")", "\n", "\n", "valid", "=", "(", "bbox", "[", ":", ",", "2", "]", ">", "0", ")", "&", "(", "bbox", "[", ":", ",", "3", "]", ">", "0", ")", "\n", "visible", "=", "valid", ".", "clone", "(", ")", ".", "byte", "(", ")", "\n", "return", "{", "'bbox'", ":", "bbox", ",", "'valid'", ":", "valid", ",", "'visible'", ":", "visible", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net_lmdb.TrackingNet_lmdb._get_frame": [[114, 119], ["lib.utils.lmdb_utils.decode_img", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "str"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_img"], ["", "def", "_get_frame", "(", "self", ",", "seq_id", ",", "frame_id", ")", ":", "\n", "        ", "set_id", "=", "self", ".", "sequence_list", "[", "seq_id", "]", "[", "0", "]", "\n", "vid_name", "=", "self", ".", "sequence_list", "[", "seq_id", "]", "[", "1", "]", "\n", "return", "decode_img", "(", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "\"TRAIN_%d_lmdb\"", "%", "set_id", ")", ",", "\n", "os", ".", "path", ".", "join", "(", "\"frames\"", ",", "vid_name", ",", "str", "(", "frame_id", ")", "+", "\".jpg\"", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net_lmdb.TrackingNet_lmdb._get_class": [[120, 123], ["None"], "methods", ["None"], ["", "def", "_get_class", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "seq_name", "=", "self", ".", "sequence_list", "[", "seq_id", "]", "[", "1", "]", "\n", "return", "self", ".", "seq_to_class_map", "[", "seq_name", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net_lmdb.TrackingNet_lmdb.get_class_name": [[124, 128], ["tracking_net_lmdb.TrackingNet_lmdb._get_class"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_class"], ["", "def", "get_class_name", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "obj_class", "=", "self", ".", "_get_class", "(", "seq_id", ")", "\n", "\n", "return", "obj_class", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net_lmdb.TrackingNet_lmdb.get_frames": [[129, 148], ["tracking_net_lmdb.TrackingNet_lmdb.items", "tracking_net_lmdb.TrackingNet_lmdb._get_class", "collections.OrderedDict", "tracking_net_lmdb.TrackingNet_lmdb._get_frame", "tracking_net_lmdb.TrackingNet_lmdb.get_sequence_info", "value[].clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_class", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.ImagenetVID._get_frame", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_sequence_info"], ["", "def", "get_frames", "(", "self", ",", "seq_id", ",", "frame_ids", ",", "anno", "=", "None", ")", ":", "\n", "        ", "frame_list", "=", "[", "self", ".", "_get_frame", "(", "seq_id", ",", "f", ")", "for", "f", "in", "frame_ids", "]", "\n", "\n", "if", "anno", "is", "None", ":", "\n", "            ", "anno", "=", "self", ".", "get_sequence_info", "(", "seq_id", ")", "\n", "\n", "", "anno_frames", "=", "{", "}", "\n", "for", "key", ",", "value", "in", "anno", ".", "items", "(", ")", ":", "\n", "            ", "anno_frames", "[", "key", "]", "=", "[", "value", "[", "f_id", ",", "...", "]", ".", "clone", "(", ")", "for", "f_id", "in", "frame_ids", "]", "\n", "\n", "", "obj_class", "=", "self", ".", "_get_class", "(", "seq_id", ")", "\n", "\n", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "obj_class", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "\n", "return", "frame_list", ",", "anno_frames", ",", "object_meta", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net_lmdb.list_sequences": [[15, 28], ["os.path.join", "os.path.join", "open", "json.loads", "f.read"], "function", ["None"], ["def", "list_sequences", "(", "root", ")", ":", "\n", "    ", "\"\"\" Lists all the videos in the input set_ids. Returns a list of tuples (set_id, video_name)\n\n    args:\n        root: Root directory to TrackingNet\n\n    returns:\n        list - list of tuples (set_id, video_name) containing the set_id and video_name for each sequence\n    \"\"\"", "\n", "fname", "=", "os", ".", "path", ".", "join", "(", "root", ",", "\"seq_list.json\"", ")", "\n", "with", "open", "(", "fname", ",", "\"r\"", ")", "as", "f", ":", "\n", "        ", "sequence_list", "=", "json", ".", "loads", "(", "f", ".", "read", "(", ")", ")", "\n", "", "return", "sequence_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k_lmdb.Got10k_lmdb.__init__": [[19, 70], ["base_video_dataset.BaseVideoDataset.__init__", "got10k_lmdb.Got10k_lmdb._get_sequence_list", "got10k_lmdb.Got10k_lmdb._load_meta_info", "got10k_lmdb.Got10k_lmdb._build_seq_per_class", "list", "got10k_lmdb.Got10k_lmdb.class_list.sort", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "pandas.read_csv().values.tolist", "random.sample", "got10k_lmdb.Got10k_lmdb.seq_per_class.keys", "lib.train.admin.env_settings", "ValueError", "os.path.dirname", "os.path.dirname", "os.path.dirname", "os.path.dirname", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "list", "int", "os.path.realpath", "os.path.realpath", "os.path.realpath", "os.path.realpath", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "range", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "pandas.read_csv", "len", "len", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "ValueError"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._get_sequence_list", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k._load_meta_info", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._build_seq_per_class", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["    ", "def", "__init__", "(", "self", ",", "root", "=", "None", ",", "image_loader", "=", "jpeg4py_loader", ",", "split", "=", "None", ",", "seq_ids", "=", "None", ",", "data_fraction", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root - path to the got-10k training data. Note: This should point to the 'train' folder inside GOT-10k\n            image_loader (jpeg4py_loader) -  The function to read the images. jpeg4py (https://github.com/ajkxyz/jpeg4py)\n                                            is used by default.\n            split - 'train' or 'val'. Note: The validation split here is a subset of the official got-10k train split,\n                    not NOT the official got-10k validation split. To use the official validation split, provide that as\n                    the root folder instead.\n            seq_ids - List containing the ids of the videos to be used for training. Note: Only one of 'split' or 'seq_ids'\n                        options can be used at the same time.\n            data_fraction - Fraction of dataset to be used. The complete dataset is used by default\n            use_lmdb - whether the dataset is stored in lmdb format\n        \"\"\"", "\n", "root", "=", "env_settings", "(", ")", ".", "got10k_lmdb_dir", "if", "root", "is", "None", "else", "root", "\n", "super", "(", ")", ".", "__init__", "(", "'GOT10k_lmdb'", ",", "root", ",", "image_loader", ")", "\n", "\n", "# all folders inside the root", "\n", "self", ".", "sequence_list", "=", "self", ".", "_get_sequence_list", "(", ")", "\n", "\n", "# seq_id is the index of the folder inside the got10k root path", "\n", "if", "split", "is", "not", "None", ":", "\n", "            ", "if", "seq_ids", "is", "not", "None", ":", "\n", "                ", "raise", "ValueError", "(", "'Cannot set both split_name and seq_ids.'", ")", "\n", "", "train_lib_path", "=", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "realpath", "(", "__file__", ")", ")", ",", "'..'", ")", "\n", "if", "split", "==", "'train'", ":", "\n", "                ", "file_path", "=", "os", ".", "path", ".", "join", "(", "train_lib_path", ",", "'data_specs'", ",", "'got10k_train_split.txt'", ")", "\n", "", "elif", "split", "==", "'val'", ":", "\n", "                ", "file_path", "=", "os", ".", "path", ".", "join", "(", "train_lib_path", ",", "'data_specs'", ",", "'got10k_val_split.txt'", ")", "\n", "", "elif", "split", "==", "'train_full'", ":", "\n", "                ", "file_path", "=", "os", ".", "path", ".", "join", "(", "train_lib_path", ",", "'data_specs'", ",", "'got10k_train_full_split.txt'", ")", "\n", "", "elif", "split", "==", "'vottrain'", ":", "\n", "                ", "file_path", "=", "os", ".", "path", ".", "join", "(", "train_lib_path", ",", "'data_specs'", ",", "'got10k_vot_train_split.txt'", ")", "\n", "", "elif", "split", "==", "'votval'", ":", "\n", "                ", "file_path", "=", "os", ".", "path", ".", "join", "(", "train_lib_path", ",", "'data_specs'", ",", "'got10k_vot_val_split.txt'", ")", "\n", "", "else", ":", "\n", "                ", "raise", "ValueError", "(", "'Unknown split name.'", ")", "\n", "", "seq_ids", "=", "pandas", ".", "read_csv", "(", "file_path", ",", "header", "=", "None", ",", "squeeze", "=", "True", ",", "dtype", "=", "np", ".", "int64", ")", ".", "values", ".", "tolist", "(", ")", "\n", "", "elif", "seq_ids", "is", "None", ":", "\n", "            ", "seq_ids", "=", "list", "(", "range", "(", "0", ",", "len", "(", "self", ".", "sequence_list", ")", ")", ")", "\n", "\n", "", "self", ".", "sequence_list", "=", "[", "self", ".", "sequence_list", "[", "i", "]", "for", "i", "in", "seq_ids", "]", "\n", "\n", "if", "data_fraction", "is", "not", "None", ":", "\n", "            ", "self", ".", "sequence_list", "=", "random", ".", "sample", "(", "self", ".", "sequence_list", ",", "int", "(", "len", "(", "self", ".", "sequence_list", ")", "*", "data_fraction", ")", ")", "\n", "\n", "", "self", ".", "sequence_meta_info", "=", "self", ".", "_load_meta_info", "(", ")", "\n", "self", ".", "seq_per_class", "=", "self", ".", "_build_seq_per_class", "(", ")", "\n", "\n", "self", ".", "class_list", "=", "list", "(", "self", ".", "seq_per_class", ".", "keys", "(", ")", ")", "\n", "self", ".", "class_list", ".", "sort", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k_lmdb.Got10k_lmdb.get_name": [[71, 73], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "return", "'got10k_lmdb'", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k_lmdb.Got10k_lmdb.has_class_info": [[74, 76], ["None"], "methods", ["None"], ["", "def", "has_class_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k_lmdb.Got10k_lmdb.has_occlusion_info": [[77, 79], ["None"], "methods", ["None"], ["", "def", "has_occlusion_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k_lmdb.Got10k_lmdb._load_meta_info": [[80, 102], ["collections.OrderedDict", "decode_str", "got10k_lmdb.Got10k_lmdb._load_meta_info._read_meta"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_str", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k._read_meta"], ["", "def", "_load_meta_info", "(", "self", ")", ":", "\n", "        ", "def", "_read_meta", "(", "meta_info", ")", ":", "\n", "\n", "            ", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "meta_info", "[", "5", "]", ".", "split", "(", "': '", ")", "[", "-", "1", "]", ",", "\n", "'motion_class'", ":", "meta_info", "[", "6", "]", ".", "split", "(", "': '", ")", "[", "-", "1", "]", ",", "\n", "'major_class'", ":", "meta_info", "[", "7", "]", ".", "split", "(", "': '", ")", "[", "-", "1", "]", ",", "\n", "'root_class'", ":", "meta_info", "[", "8", "]", ".", "split", "(", "': '", ")", "[", "-", "1", "]", ",", "\n", "'motion_adverb'", ":", "meta_info", "[", "9", "]", ".", "split", "(", "': '", ")", "[", "-", "1", "]", "}", ")", "\n", "\n", "return", "object_meta", "\n", "", "sequence_meta_info", "=", "{", "}", "\n", "for", "s", "in", "self", ".", "sequence_list", ":", "\n", "            ", "try", ":", "\n", "                ", "meta_str", "=", "decode_str", "(", "self", ".", "root", ",", "\"train/%s/meta_info.ini\"", "%", "s", ")", "\n", "sequence_meta_info", "[", "s", "]", "=", "_read_meta", "(", "meta_str", ".", "split", "(", "'\\n'", ")", ")", "\n", "", "except", ":", "\n", "                ", "sequence_meta_info", "[", "s", "]", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "None", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "", "", "return", "sequence_meta_info", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k_lmdb.Got10k_lmdb._build_seq_per_class": [[103, 114], ["enumerate", "seq_per_class[].append"], "methods", ["None"], ["", "def", "_build_seq_per_class", "(", "self", ")", ":", "\n", "        ", "seq_per_class", "=", "{", "}", "\n", "\n", "for", "i", ",", "s", "in", "enumerate", "(", "self", ".", "sequence_list", ")", ":", "\n", "            ", "object_class", "=", "self", ".", "sequence_meta_info", "[", "s", "]", "[", "'object_class_name'", "]", "\n", "if", "object_class", "in", "seq_per_class", ":", "\n", "                ", "seq_per_class", "[", "object_class", "]", ".", "append", "(", "i", ")", "\n", "", "else", ":", "\n", "                ", "seq_per_class", "[", "object_class", "]", "=", "[", "i", "]", "\n", "\n", "", "", "return", "seq_per_class", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k_lmdb.Got10k_lmdb.get_sequences_in_class": [[115, 117], ["None"], "methods", ["None"], ["", "def", "get_sequences_in_class", "(", "self", ",", "class_name", ")", ":", "\n", "        ", "return", "self", ".", "seq_per_class", "[", "class_name", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k_lmdb.Got10k_lmdb._get_sequence_list": [[118, 122], ["decode_str", "decode_str.split"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_str"], ["", "def", "_get_sequence_list", "(", "self", ")", ":", "\n", "        ", "dir_str", "=", "decode_str", "(", "self", ".", "root", ",", "'train/list.txt'", ")", "\n", "dir_list", "=", "dir_str", ".", "split", "(", "'\\n'", ")", "\n", "return", "dir_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k_lmdb.Got10k_lmdb._read_bb_anno": [[123, 130], ["os.path.join", "os.path.join", "os.path.join", "os.path.join", "numpy.array().astype", "torch.tensor", "decode_str().split", "list", "map", "numpy.array", "decode_str", "line.split"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_str"], ["", "def", "_read_bb_anno", "(", "self", ",", "seq_path", ")", ":", "\n", "        ", "bb_anno_file", "=", "os", ".", "path", ".", "join", "(", "seq_path", ",", "\"groundtruth.txt\"", ")", "\n", "gt_str_list", "=", "decode_str", "(", "self", ".", "root", ",", "bb_anno_file", ")", ".", "split", "(", "'\\n'", ")", "[", ":", "-", "1", "]", "# the last line in got10k is empty", "\n", "gt_list", "=", "[", "list", "(", "map", "(", "float", ",", "line", ".", "split", "(", "','", ")", ")", ")", "for", "line", "in", "gt_str_list", "]", "\n", "gt_arr", "=", "np", ".", "array", "(", "gt_list", ")", ".", "astype", "(", "np", ".", "float32", ")", "\n", "\n", "return", "torch", ".", "tensor", "(", "gt_arr", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k_lmdb.Got10k_lmdb._read_target_visible": [[131, 145], ["os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "list", "torch.ByteTensor", "list", "torch.ByteTensor", "map", "map", "torch.ByteTensor.float", "decode_str().split", "decode_str().split", "decode_str", "decode_str"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_str", "home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_str"], ["", "def", "_read_target_visible", "(", "self", ",", "seq_path", ")", ":", "\n", "# full occlusion and out_of_view files", "\n", "        ", "occlusion_file", "=", "os", ".", "path", ".", "join", "(", "seq_path", ",", "\"absence.label\"", ")", "\n", "cover_file", "=", "os", ".", "path", ".", "join", "(", "seq_path", ",", "\"cover.label\"", ")", "\n", "# Read these files", "\n", "occ_list", "=", "list", "(", "map", "(", "int", ",", "decode_str", "(", "self", ".", "root", ",", "occlusion_file", ")", ".", "split", "(", "'\\n'", ")", "[", ":", "-", "1", "]", ")", ")", "# the last line in got10k is empty", "\n", "occlusion", "=", "torch", ".", "ByteTensor", "(", "occ_list", ")", "\n", "cover_list", "=", "list", "(", "map", "(", "int", ",", "decode_str", "(", "self", ".", "root", ",", "cover_file", ")", ".", "split", "(", "'\\n'", ")", "[", ":", "-", "1", "]", ")", ")", "# the last line in got10k is empty", "\n", "cover", "=", "torch", ".", "ByteTensor", "(", "cover_list", ")", "\n", "\n", "target_visible", "=", "~", "occlusion", "&", "(", "cover", ">", "0", ")", ".", "byte", "(", ")", "\n", "\n", "visible_ratio", "=", "cover", ".", "float", "(", ")", "/", "8", "\n", "return", "target_visible", ",", "visible_ratio", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k_lmdb.Got10k_lmdb._get_sequence_path": [[146, 148], ["os.path.join", "os.path.join", "os.path.join", "os.path.join"], "methods", ["None"], ["", "def", "_get_sequence_path", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "return", "os", ".", "path", ".", "join", "(", "\"train\"", ",", "self", ".", "sequence_list", "[", "seq_id", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k_lmdb.Got10k_lmdb.get_sequence_info": [[149, 158], ["got10k_lmdb.Got10k_lmdb._get_sequence_path", "got10k_lmdb.Got10k_lmdb._read_bb_anno", "got10k_lmdb.Got10k_lmdb._read_target_visible", "valid.byte"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_sequence_path", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._read_bb_anno", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._read_target_visible"], ["", "def", "get_sequence_info", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "seq_path", "=", "self", ".", "_get_sequence_path", "(", "seq_id", ")", "\n", "bbox", "=", "self", ".", "_read_bb_anno", "(", "seq_path", ")", "\n", "\n", "valid", "=", "(", "bbox", "[", ":", ",", "2", "]", ">", "0", ")", "&", "(", "bbox", "[", ":", ",", "3", "]", ">", "0", ")", "\n", "visible", ",", "visible_ratio", "=", "self", ".", "_read_target_visible", "(", "seq_path", ")", "\n", "visible", "=", "visible", "&", "valid", ".", "byte", "(", ")", "\n", "\n", "return", "{", "'bbox'", ":", "bbox", ",", "'valid'", ":", "valid", ",", "'visible'", ":", "visible", ",", "'visible_ratio'", ":", "visible_ratio", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k_lmdb.Got10k_lmdb._get_frame_path": [[159, 161], ["os.path.join", "os.path.join", "os.path.join", "os.path.join"], "methods", ["None"], ["", "def", "_get_frame_path", "(", "self", ",", "seq_path", ",", "frame_id", ")", ":", "\n", "        ", "return", "os", ".", "path", ".", "join", "(", "seq_path", ",", "'{:08}.jpg'", ".", "format", "(", "frame_id", "+", "1", ")", ")", "# frames start from 1", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k_lmdb.Got10k_lmdb._get_frame": [[162, 164], ["decode_img", "got10k_lmdb.Got10k_lmdb._get_frame_path"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_img", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_frame_path"], ["", "def", "_get_frame", "(", "self", ",", "seq_path", ",", "frame_id", ")", ":", "\n", "        ", "return", "decode_img", "(", "self", ".", "root", ",", "self", ".", "_get_frame_path", "(", "seq_path", ",", "frame_id", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k_lmdb.Got10k_lmdb.get_class_name": [[165, 169], ["None"], "methods", ["None"], ["", "def", "get_class_name", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "obj_meta", "=", "self", ".", "sequence_meta_info", "[", "self", ".", "sequence_list", "[", "seq_id", "]", "]", "\n", "\n", "return", "obj_meta", "[", "'object_class_name'", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k_lmdb.Got10k_lmdb.get_frames": [[170, 184], ["got10k_lmdb.Got10k_lmdb._get_sequence_path", "got10k_lmdb.Got10k_lmdb.items", "got10k_lmdb.Got10k_lmdb._get_frame", "got10k_lmdb.Got10k_lmdb.get_sequence_info", "value[].clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_sequence_path", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.ImagenetVID._get_frame", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_sequence_info"], ["", "def", "get_frames", "(", "self", ",", "seq_id", ",", "frame_ids", ",", "anno", "=", "None", ")", ":", "\n", "        ", "seq_path", "=", "self", ".", "_get_sequence_path", "(", "seq_id", ")", "\n", "obj_meta", "=", "self", ".", "sequence_meta_info", "[", "self", ".", "sequence_list", "[", "seq_id", "]", "]", "\n", "\n", "frame_list", "=", "[", "self", ".", "_get_frame", "(", "seq_path", ",", "f_id", ")", "for", "f_id", "in", "frame_ids", "]", "\n", "\n", "if", "anno", "is", "None", ":", "\n", "            ", "anno", "=", "self", ".", "get_sequence_info", "(", "seq_id", ")", "\n", "\n", "", "anno_frames", "=", "{", "}", "\n", "for", "key", ",", "value", "in", "anno", ".", "items", "(", ")", ":", "\n", "            ", "anno_frames", "[", "key", "]", "=", "[", "value", "[", "f_id", ",", "...", "]", ".", "clone", "(", ")", "for", "f_id", "in", "frame_ids", "]", "\n", "\n", "", "return", "frame_list", ",", "anno_frames", ",", "obj_meta", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco.MSCOCO.__init__": [[34, 64], ["base_image_dataset.BaseImageDataset.__init__", "os.path.join", "os.path.join", "pycocotools.coco.COCO", "coco.MSCOCO.get_class_list", "coco.MSCOCO._get_image_list", "coco.MSCOCO._build_im_per_class", "random.sample", "ltr.admin.environment.env_settings", "int", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_class_list", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS._get_image_list", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS._build_im_per_class", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "__init__", "(", "self", ",", "root", "=", "None", ",", "image_loader", "=", "jpeg4py_loader", ",", "data_fraction", "=", "None", ",", "min_area", "=", "None", ",", "\n", "split", "=", "\"train\"", ",", "version", "=", "\"2014\"", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root - path to coco root folder\n            image_loader (jpeg4py_loader) - The function to read the images. jpeg4py (https://github.com/ajkxyz/jpeg4py)\n                                            is used by default.\n            data_fraction - Fraction of dataset to be used. The complete dataset is used by default\n            min_area - Objects with area less than min_area are filtered out. Default is 0.0\n            split - 'train' or 'val'.\n            version - version of coco dataset (2014 or 2017)\n        \"\"\"", "\n", "\n", "root", "=", "env_settings", "(", ")", ".", "coco_dir", "if", "root", "is", "None", "else", "root", "\n", "super", "(", ")", ".", "__init__", "(", "'COCO'", ",", "root", ",", "image_loader", ")", "\n", "\n", "self", ".", "img_pth", "=", "os", ".", "path", ".", "join", "(", "root", ",", "'images/{}{}/'", ".", "format", "(", "split", ",", "version", ")", ")", "\n", "self", ".", "anno_path", "=", "os", ".", "path", ".", "join", "(", "root", ",", "'annotations/instances_{}{}.json'", ".", "format", "(", "split", ",", "version", ")", ")", "\n", "\n", "self", ".", "coco_set", "=", "COCO", "(", "self", ".", "anno_path", ")", "\n", "\n", "self", ".", "cats", "=", "self", ".", "coco_set", ".", "cats", "\n", "\n", "self", ".", "class_list", "=", "self", ".", "get_class_list", "(", ")", "# the parent class thing would happen in the sampler", "\n", "\n", "self", ".", "image_list", "=", "self", ".", "_get_image_list", "(", "min_area", "=", "min_area", ")", "\n", "\n", "if", "data_fraction", "is", "not", "None", ":", "\n", "            ", "self", ".", "image_list", "=", "random", ".", "sample", "(", "self", ".", "image_list", ",", "int", "(", "len", "(", "self", ".", "image_list", ")", "*", "data_fraction", ")", ")", "\n", "", "self", ".", "im_per_class", "=", "self", ".", "_build_im_per_class", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco.MSCOCO._get_image_list": [[65, 73], ["list", "coco.MSCOCO.coco_set.anns.keys"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "_get_image_list", "(", "self", ",", "min_area", "=", "None", ")", ":", "\n", "        ", "ann_list", "=", "list", "(", "self", ".", "coco_set", ".", "anns", ".", "keys", "(", ")", ")", "\n", "image_list", "=", "[", "a", "for", "a", "in", "ann_list", "if", "self", ".", "coco_set", ".", "anns", "[", "a", "]", "[", "'iscrowd'", "]", "==", "0", "]", "\n", "\n", "if", "min_area", "is", "not", "None", ":", "\n", "            ", "image_list", "=", "[", "a", "for", "a", "in", "image_list", "if", "self", ".", "coco_set", ".", "anns", "[", "a", "]", "[", "'area'", "]", ">", "min_area", "]", "\n", "\n", "", "return", "image_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco.MSCOCO.get_num_classes": [[74, 76], ["len"], "methods", ["None"], ["", "def", "get_num_classes", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "class_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco.MSCOCO.get_name": [[77, 79], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "return", "'coco'", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco.MSCOCO.has_class_info": [[80, 82], ["None"], "methods", ["None"], ["", "def", "has_class_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco.MSCOCO.has_segmentation_info": [[83, 85], ["None"], "methods", ["None"], ["", "def", "has_segmentation_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco.MSCOCO.get_class_list": [[86, 91], ["coco.MSCOCO.cats.keys", "class_list.append"], "methods", ["None"], ["", "def", "get_class_list", "(", "self", ")", ":", "\n", "        ", "class_list", "=", "[", "]", "\n", "for", "cat_id", "in", "self", ".", "cats", ".", "keys", "(", ")", ":", "\n", "            ", "class_list", ".", "append", "(", "self", ".", "cats", "[", "cat_id", "]", "[", "'name'", "]", ")", "\n", "", "return", "class_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco.MSCOCO._build_im_per_class": [[92, 102], ["enumerate", "im_per_class[].append"], "methods", ["None"], ["", "def", "_build_im_per_class", "(", "self", ")", ":", "\n", "        ", "im_per_class", "=", "{", "}", "\n", "for", "i", ",", "im", "in", "enumerate", "(", "self", ".", "image_list", ")", ":", "\n", "            ", "class_name", "=", "self", ".", "cats", "[", "self", ".", "coco_set", ".", "anns", "[", "im", "]", "[", "'category_id'", "]", "]", "[", "'name'", "]", "\n", "if", "class_name", "not", "in", "im_per_class", ":", "\n", "                ", "im_per_class", "[", "class_name", "]", "=", "[", "i", "]", "\n", "", "else", ":", "\n", "                ", "im_per_class", "[", "class_name", "]", ".", "append", "(", "i", ")", "\n", "\n", "", "", "return", "im_per_class", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco.MSCOCO.get_images_in_class": [[103, 105], ["None"], "methods", ["None"], ["", "def", "get_images_in_class", "(", "self", ",", "class_name", ")", ":", "\n", "        ", "return", "self", ".", "im_per_class", "[", "class_name", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco.MSCOCO.get_image_info": [[106, 117], ["coco.MSCOCO._get_anno", "torch.Tensor().view", "torch.Tensor", "valid.clone().byte", "coco.MSCOCO.coco_set.annToMask", "torch.Tensor", "valid.clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS._get_anno", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.annToMask"], ["", "def", "get_image_info", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "anno", "=", "self", ".", "_get_anno", "(", "im_id", ")", "\n", "\n", "bbox", "=", "torch", ".", "Tensor", "(", "anno", "[", "'bbox'", "]", ")", ".", "view", "(", "4", ",", ")", "\n", "\n", "mask", "=", "torch", ".", "Tensor", "(", "self", ".", "coco_set", ".", "annToMask", "(", "anno", ")", ")", "\n", "\n", "valid", "=", "(", "bbox", "[", "2", "]", ">", "0", ")", "&", "(", "bbox", "[", "3", "]", ">", "0", ")", "\n", "visible", "=", "valid", ".", "clone", "(", ")", ".", "byte", "(", ")", "\n", "\n", "return", "{", "'bbox'", ":", "bbox", ",", "'mask'", ":", "mask", ",", "'valid'", ":", "valid", ",", "'visible'", ":", "visible", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco.MSCOCO._get_anno": [[118, 122], ["None"], "methods", ["None"], ["", "def", "_get_anno", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "anno", "=", "self", ".", "coco_set", ".", "anns", "[", "self", ".", "image_list", "[", "im_id", "]", "]", "\n", "\n", "return", "anno", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco.MSCOCO._get_image": [[123, 127], ["coco.MSCOCO.image_loader", "os.path.join", "coco.MSCOCO.coco_set.loadImgs"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.loadImgs"], ["", "def", "_get_image", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "path", "=", "self", ".", "coco_set", ".", "loadImgs", "(", "[", "self", ".", "coco_set", ".", "anns", "[", "self", ".", "image_list", "[", "im_id", "]", "]", "[", "'image_id'", "]", "]", ")", "[", "0", "]", "[", "'file_name'", "]", "\n", "img", "=", "self", ".", "image_loader", "(", "os", ".", "path", ".", "join", "(", "self", ".", "img_pth", ",", "path", ")", ")", "\n", "return", "img", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco.MSCOCO.get_meta_info": [[128, 143], ["collections.OrderedDict", "collections.OrderedDict"], "methods", ["None"], ["", "def", "get_meta_info", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "try", ":", "\n", "            ", "cat_dict_current", "=", "self", ".", "cats", "[", "self", ".", "coco_set", ".", "anns", "[", "self", ".", "image_list", "[", "im_id", "]", "]", "[", "'category_id'", "]", "]", "\n", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "cat_dict_current", "[", "'name'", "]", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "cat_dict_current", "[", "'supercategory'", "]", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "", "except", ":", "\n", "            ", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "None", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "", "return", "object_meta", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco.MSCOCO.get_class_name": [[144, 147], ["None"], "methods", ["None"], ["", "def", "get_class_name", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "cat_dict_current", "=", "self", ".", "cats", "[", "self", ".", "coco_set", ".", "anns", "[", "self", ".", "image_list", "[", "im_id", "]", "]", "[", "'category_id'", "]", "]", "\n", "return", "cat_dict_current", "[", "'name'", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco.MSCOCO.get_image": [[148, 157], ["coco.MSCOCO._get_image", "coco.MSCOCO.get_meta_info", "coco.MSCOCO.get_image_info"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS._get_image", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_meta_info", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_image_info"], ["", "def", "get_image", "(", "self", ",", "image_id", ",", "anno", "=", "None", ")", ":", "\n", "        ", "frame", "=", "self", ".", "_get_image", "(", "image_id", ")", "\n", "\n", "if", "anno", "is", "None", ":", "\n", "            ", "anno", "=", "self", ".", "get_image_info", "(", "image_id", ")", "\n", "\n", "", "object_meta", "=", "self", ".", "get_meta_info", "(", "image_id", ")", "\n", "\n", "return", "frame", ",", "anno", ",", "object_meta", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid_lmdb.ImagenetVID_lmdb.__init__": [[28, 48], ["base_video_dataset.BaseVideoDataset.__init__", "lib.utils.lmdb_utils.decode_json", "lib.train.admin.env_settings", "len", "imagenetvid_lmdb.get_target_to_image_ratio"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_json", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.get_target_to_image_ratio"], ["def", "__init__", "(", "self", ",", "root", "=", "None", ",", "image_loader", "=", "jpeg4py_loader", ",", "min_length", "=", "0", ",", "max_target_area", "=", "1", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root - path to the imagenet vid dataset.\n            image_loader (default_image_loader) -  The function to read the images. If installed,\n                                                   jpeg4py (https://github.com/ajkxyz/jpeg4py) is used by default. Else,\n                                                   opencv's imread is used.\n            min_length - Minimum allowed sequence length.\n            max_target_area - max allowed ratio between target area and image area. Can be used to filter out targets\n                                which cover complete image.\n        \"\"\"", "\n", "root", "=", "env_settings", "(", ")", ".", "imagenet_dir", "if", "root", "is", "None", "else", "root", "\n", "super", "(", ")", ".", "__init__", "(", "\"imagenetvid_lmdb\"", ",", "root", ",", "image_loader", ")", "\n", "\n", "sequence_list_dict", "=", "decode_json", "(", "root", ",", "\"cache.json\"", ")", "\n", "self", ".", "sequence_list", "=", "sequence_list_dict", "\n", "\n", "# Filter the sequences based on min_length and max_target_area in the first frame", "\n", "self", ".", "sequence_list", "=", "[", "x", "for", "x", "in", "self", ".", "sequence_list", "if", "len", "(", "x", "[", "'anno'", "]", ")", ">=", "min_length", "and", "\n", "get_target_to_image_ratio", "(", "x", ")", "<", "max_target_area", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid_lmdb.ImagenetVID_lmdb.get_name": [[49, 51], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "return", "'imagenetvid_lmdb'", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid_lmdb.ImagenetVID_lmdb.get_num_sequences": [[52, 54], ["len"], "methods", ["None"], ["", "def", "get_num_sequences", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "sequence_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid_lmdb.ImagenetVID_lmdb.get_sequence_info": [[55, 60], ["torch.Tensor", "torch.ByteTensor", "valid.byte"], "methods", ["None"], ["", "def", "get_sequence_info", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "bb_anno", "=", "torch", ".", "Tensor", "(", "self", ".", "sequence_list", "[", "seq_id", "]", "[", "'anno'", "]", ")", "\n", "valid", "=", "(", "bb_anno", "[", ":", ",", "2", "]", ">", "0", ")", "&", "(", "bb_anno", "[", ":", ",", "3", "]", ">", "0", ")", "\n", "visible", "=", "torch", ".", "ByteTensor", "(", "self", ".", "sequence_list", "[", "seq_id", "]", "[", "'target_visible'", "]", ")", "&", "valid", ".", "byte", "(", ")", "\n", "return", "{", "'bbox'", ":", "bb_anno", ",", "'valid'", ":", "valid", ",", "'visible'", ":", "visible", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid_lmdb.ImagenetVID_lmdb._get_frame": [[61, 68], ["os.path.join", "lib.utils.lmdb_utils.decode_img"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_img"], ["", "def", "_get_frame", "(", "self", ",", "sequence", ",", "frame_id", ")", ":", "\n", "        ", "set_name", "=", "'ILSVRC2015_VID_train_{:04d}'", ".", "format", "(", "sequence", "[", "'set_id'", "]", ")", "\n", "vid_name", "=", "'ILSVRC2015_train_{:08d}'", ".", "format", "(", "sequence", "[", "'vid_id'", "]", ")", "\n", "frame_number", "=", "frame_id", "+", "sequence", "[", "'start_frame'", "]", "\n", "frame_path", "=", "os", ".", "path", ".", "join", "(", "'Data'", ",", "'VID'", ",", "'train'", ",", "set_name", ",", "vid_name", ",", "\n", "'{:06d}.JPEG'", ".", "format", "(", "frame_number", ")", ")", "\n", "return", "decode_img", "(", "self", ".", "root", ",", "frame_path", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid_lmdb.ImagenetVID_lmdb.get_frames": [[69, 90], ["imagenetvid_lmdb.ImagenetVID_lmdb.items", "collections.OrderedDict", "imagenetvid_lmdb.ImagenetVID_lmdb._get_frame", "imagenetvid_lmdb.ImagenetVID_lmdb.get_sequence_info", "value[].clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.ImagenetVID._get_frame", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_sequence_info"], ["", "def", "get_frames", "(", "self", ",", "seq_id", ",", "frame_ids", ",", "anno", "=", "None", ")", ":", "\n", "        ", "sequence", "=", "self", ".", "sequence_list", "[", "seq_id", "]", "\n", "\n", "frame_list", "=", "[", "self", ".", "_get_frame", "(", "sequence", ",", "f", ")", "for", "f", "in", "frame_ids", "]", "\n", "\n", "if", "anno", "is", "None", ":", "\n", "            ", "anno", "=", "self", ".", "get_sequence_info", "(", "seq_id", ")", "\n", "\n", "# Create anno dict", "\n", "", "anno_frames", "=", "{", "}", "\n", "for", "key", ",", "value", "in", "anno", ".", "items", "(", ")", ":", "\n", "            ", "anno_frames", "[", "key", "]", "=", "[", "value", "[", "f_id", ",", "...", "]", ".", "clone", "(", ")", "for", "f_id", "in", "frame_ids", "]", "\n", "\n", "# added the class info to the meta info", "\n", "", "object_meta", "=", "OrderedDict", "(", "{", "'object_class'", ":", "sequence", "[", "'class_name'", "]", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "\n", "return", "frame_list", ",", "anno_frames", ",", "object_meta", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid_lmdb.get_target_to_image_ratio": [[10, 14], ["torch.Tensor", "torch.Tensor", "anno[].prod", "torch.Tensor.prod"], "function", ["None"], ["def", "get_target_to_image_ratio", "(", "seq", ")", ":", "\n", "    ", "anno", "=", "torch", ".", "Tensor", "(", "seq", "[", "'anno'", "]", ")", "\n", "img_sz", "=", "torch", ".", "Tensor", "(", "seq", "[", "'image_size'", "]", ")", "\n", "return", "(", "anno", "[", "0", ",", "2", ":", "4", "]", ".", "prod", "(", ")", "/", "(", "img_sz", ".", "prod", "(", ")", ")", ")", ".", "sqrt", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot.__init__": [[26, 51], ["base_video_dataset.BaseVideoDataset.__init__", "lasot.Lasot._build_sequence_list", "lasot.Lasot._build_class_list", "random.sample", "ltr.admin.environment.env_settings", "os.listdir", "os.listdir", "os.listdir", "os.listdir", "enumerate", "int", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._build_sequence_list", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._build_class_list", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "__init__", "(", "self", ",", "root", "=", "None", ",", "image_loader", "=", "jpeg4py_loader", ",", "vid_ids", "=", "None", ",", "split", "=", "None", ",", "data_fraction", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root - path to the lasot dataset.\n            image_loader (jpeg4py_loader) -  The function to read the images. jpeg4py (https://github.com/ajkxyz/jpeg4py)\n                                            is used by default.\n            vid_ids - List containing the ids of the videos (1 - 20) used for training. If vid_ids = [1, 3, 5], then the\n                    videos with subscripts -1, -3, and -5 from each class will be used for training.\n            split - If split='train', the official train split (protocol-II) is used for training. Note: Only one of\n                    vid_ids or split option can be used at a time.\n            data_fraction - Fraction of dataset to be used. The complete dataset is used by default\n        \"\"\"", "\n", "root", "=", "env_settings", "(", ")", ".", "lasot_dir", "if", "root", "is", "None", "else", "root", "\n", "super", "(", ")", ".", "__init__", "(", "'LaSOT'", ",", "root", ",", "image_loader", ")", "\n", "\n", "# Keep a list of all classes", "\n", "self", ".", "class_list", "=", "[", "f", "for", "f", "in", "os", ".", "listdir", "(", "self", ".", "root", ")", "]", "\n", "self", ".", "class_to_id", "=", "{", "cls_name", ":", "cls_id", "for", "cls_id", ",", "cls_name", "in", "enumerate", "(", "self", ".", "class_list", ")", "}", "\n", "\n", "self", ".", "sequence_list", "=", "self", ".", "_build_sequence_list", "(", "vid_ids", ",", "split", ")", "\n", "\n", "if", "data_fraction", "is", "not", "None", ":", "\n", "            ", "self", ".", "sequence_list", "=", "random", ".", "sample", "(", "self", ".", "sequence_list", ",", "int", "(", "len", "(", "self", ".", "sequence_list", ")", "*", "data_fraction", ")", ")", "\n", "\n", "", "self", ".", "seq_per_class", "=", "self", ".", "_build_class_list", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot._build_sequence_list": [[52, 68], ["os.path.join", "os.path.join", "os.path.join", "os.path.join", "pandas.read_csv().values.tolist", "ValueError", "os.path.dirname", "os.path.dirname", "os.path.dirname", "os.path.dirname", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "ValueError", "ValueError", "os.path.realpath", "os.path.realpath", "os.path.realpath", "os.path.realpath", "pandas.read_csv", "str"], "methods", ["None"], ["", "def", "_build_sequence_list", "(", "self", ",", "vid_ids", "=", "None", ",", "split", "=", "None", ")", ":", "\n", "        ", "if", "split", "is", "not", "None", ":", "\n", "            ", "if", "vid_ids", "is", "not", "None", ":", "\n", "                ", "raise", "ValueError", "(", "'Cannot set both split_name and vid_ids.'", ")", "\n", "", "ltr_path", "=", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "realpath", "(", "__file__", ")", ")", ",", "'..'", ")", "\n", "if", "split", "==", "'train'", ":", "\n", "                ", "file_path", "=", "os", ".", "path", ".", "join", "(", "ltr_path", ",", "'data_specs'", ",", "'lasot_train_split.txt'", ")", "\n", "", "else", ":", "\n", "                ", "raise", "ValueError", "(", "'Unknown split name.'", ")", "\n", "", "sequence_list", "=", "pandas", ".", "read_csv", "(", "file_path", ",", "header", "=", "None", ",", "squeeze", "=", "True", ")", ".", "values", ".", "tolist", "(", ")", "\n", "", "elif", "vid_ids", "is", "not", "None", ":", "\n", "            ", "sequence_list", "=", "[", "c", "+", "'-'", "+", "str", "(", "v", ")", "for", "c", "in", "self", ".", "class_list", "for", "v", "in", "vid_ids", "]", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'Set either split_name or vid_ids.'", ")", "\n", "\n", "", "return", "sequence_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot._build_class_list": [[69, 79], ["enumerate", "seq_name.split", "seq_per_class[].append"], "methods", ["None"], ["", "def", "_build_class_list", "(", "self", ")", ":", "\n", "        ", "seq_per_class", "=", "{", "}", "\n", "for", "seq_id", ",", "seq_name", "in", "enumerate", "(", "self", ".", "sequence_list", ")", ":", "\n", "            ", "class_name", "=", "seq_name", ".", "split", "(", "'-'", ")", "[", "0", "]", "\n", "if", "class_name", "in", "seq_per_class", ":", "\n", "                ", "seq_per_class", "[", "class_name", "]", ".", "append", "(", "seq_id", ")", "\n", "", "else", ":", "\n", "                ", "seq_per_class", "[", "class_name", "]", "=", "[", "seq_id", "]", "\n", "\n", "", "", "return", "seq_per_class", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot.get_name": [[80, 82], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "return", "'lasot'", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot.has_class_info": [[83, 85], ["None"], "methods", ["None"], ["", "def", "has_class_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot.has_occlusion_info": [[86, 88], ["None"], "methods", ["None"], ["", "def", "has_occlusion_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot.get_num_sequences": [[89, 91], ["len"], "methods", ["None"], ["", "def", "get_num_sequences", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "sequence_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot.get_num_classes": [[92, 94], ["len"], "methods", ["None"], ["", "def", "get_num_classes", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "class_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot.get_sequences_in_class": [[95, 97], ["None"], "methods", ["None"], ["", "def", "get_sequences_in_class", "(", "self", ",", "class_name", ")", ":", "\n", "        ", "return", "self", ".", "seq_per_class", "[", "class_name", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot._read_bb_anno": [[98, 102], ["os.path.join", "os.path.join", "os.path.join", "os.path.join", "torch.tensor", "pandas.read_csv"], "methods", ["None"], ["", "def", "_read_bb_anno", "(", "self", ",", "seq_path", ")", ":", "\n", "        ", "bb_anno_file", "=", "os", ".", "path", ".", "join", "(", "seq_path", ",", "\"groundtruth.txt\"", ")", "\n", "gt", "=", "pandas", ".", "read_csv", "(", "bb_anno_file", ",", "delimiter", "=", "','", ",", "header", "=", "None", ",", "dtype", "=", "np", ".", "float32", ",", "na_filter", "=", "False", ",", "low_memory", "=", "False", ")", ".", "values", "\n", "return", "torch", ".", "tensor", "(", "gt", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot._read_target_visible": [[103, 116], ["os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "open", "torch.ByteTensor", "open", "torch.ByteTensor", "int", "int", "list", "list", "csv.reader", "csv.reader"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "_read_target_visible", "(", "self", ",", "seq_path", ")", ":", "\n", "# Read full occlusion and out_of_view", "\n", "        ", "occlusion_file", "=", "os", ".", "path", ".", "join", "(", "seq_path", ",", "\"full_occlusion.txt\"", ")", "\n", "out_of_view_file", "=", "os", ".", "path", ".", "join", "(", "seq_path", ",", "\"out_of_view.txt\"", ")", "\n", "\n", "with", "open", "(", "occlusion_file", ",", "'r'", ",", "newline", "=", "''", ")", "as", "f", ":", "\n", "            ", "occlusion", "=", "torch", ".", "ByteTensor", "(", "[", "int", "(", "v", ")", "for", "v", "in", "list", "(", "csv", ".", "reader", "(", "f", ")", ")", "[", "0", "]", "]", ")", "\n", "", "with", "open", "(", "out_of_view_file", ",", "'r'", ")", "as", "f", ":", "\n", "            ", "out_of_view", "=", "torch", ".", "ByteTensor", "(", "[", "int", "(", "v", ")", "for", "v", "in", "list", "(", "csv", ".", "reader", "(", "f", ")", ")", "[", "0", "]", "]", ")", "\n", "\n", "", "target_visible", "=", "~", "occlusion", "&", "~", "out_of_view", "\n", "\n", "return", "target_visible", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot._get_sequence_path": [[117, 123], ["os.path.join", "os.path.join", "os.path.join", "os.path.join", "seq_name.split", "seq_name.split"], "methods", ["None"], ["", "def", "_get_sequence_path", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "seq_name", "=", "self", ".", "sequence_list", "[", "seq_id", "]", "\n", "class_name", "=", "seq_name", ".", "split", "(", "'-'", ")", "[", "0", "]", "\n", "vid_id", "=", "seq_name", ".", "split", "(", "'-'", ")", "[", "1", "]", "\n", "\n", "return", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "class_name", ",", "class_name", "+", "'-'", "+", "vid_id", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot.get_sequence_info": [[124, 132], ["lasot.Lasot._get_sequence_path", "lasot.Lasot._read_bb_anno", "lasot.Lasot._read_target_visible", "valid.byte"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_sequence_path", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._read_bb_anno", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._read_target_visible"], ["", "def", "get_sequence_info", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "seq_path", "=", "self", ".", "_get_sequence_path", "(", "seq_id", ")", "\n", "bbox", "=", "self", ".", "_read_bb_anno", "(", "seq_path", ")", "\n", "\n", "valid", "=", "(", "bbox", "[", ":", ",", "2", "]", ">", "0", ")", "&", "(", "bbox", "[", ":", ",", "3", "]", ">", "0", ")", "\n", "visible", "=", "self", ".", "_read_target_visible", "(", "seq_path", ")", "&", "valid", ".", "byte", "(", ")", "\n", "\n", "return", "{", "'bbox'", ":", "bbox", ",", "'valid'", ":", "valid", ",", "'visible'", ":", "visible", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot._get_frame_path": [[133, 135], ["os.path.join", "os.path.join", "os.path.join", "os.path.join"], "methods", ["None"], ["", "def", "_get_frame_path", "(", "self", ",", "seq_path", ",", "frame_id", ")", ":", "\n", "        ", "return", "os", ".", "path", ".", "join", "(", "seq_path", ",", "'img'", ",", "'{:08}.jpg'", ".", "format", "(", "frame_id", "+", "1", ")", ")", "# frames start from 1", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot._get_frame": [[136, 138], ["lasot.Lasot.image_loader", "lasot.Lasot._get_frame_path"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_frame_path"], ["", "def", "_get_frame", "(", "self", ",", "seq_path", ",", "frame_id", ")", ":", "\n", "        ", "return", "self", ".", "image_loader", "(", "self", ".", "_get_frame_path", "(", "seq_path", ",", "frame_id", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot._get_class": [[139, 142], ["seq_path.split"], "methods", ["None"], ["", "def", "_get_class", "(", "self", ",", "seq_path", ")", ":", "\n", "        ", "raw_class", "=", "seq_path", ".", "split", "(", "'/'", ")", "[", "-", "2", "]", "\n", "return", "raw_class", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot.get_class_name": [[143, 148], ["lasot.Lasot._get_sequence_path", "lasot.Lasot._get_class"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_sequence_path", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_class"], ["", "def", "get_class_name", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "seq_path", "=", "self", ".", "_get_sequence_path", "(", "seq_id", ")", "\n", "obj_class", "=", "self", ".", "_get_class", "(", "seq_path", ")", "\n", "\n", "return", "obj_class", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot.Lasot.get_frames": [[149, 169], ["lasot.Lasot._get_sequence_path", "lasot.Lasot._get_class", "lasot.Lasot.items", "collections.OrderedDict", "lasot.Lasot._get_frame", "lasot.Lasot.get_sequence_info", "value[].clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_sequence_path", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_class", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.ImagenetVID._get_frame", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_sequence_info"], ["", "def", "get_frames", "(", "self", ",", "seq_id", ",", "frame_ids", ",", "anno", "=", "None", ")", ":", "\n", "        ", "seq_path", "=", "self", ".", "_get_sequence_path", "(", "seq_id", ")", "\n", "\n", "obj_class", "=", "self", ".", "_get_class", "(", "seq_path", ")", "\n", "frame_list", "=", "[", "self", ".", "_get_frame", "(", "seq_path", ",", "f_id", ")", "for", "f_id", "in", "frame_ids", "]", "\n", "\n", "if", "anno", "is", "None", ":", "\n", "            ", "anno", "=", "self", ".", "get_sequence_info", "(", "seq_id", ")", "\n", "\n", "", "anno_frames", "=", "{", "}", "\n", "for", "key", ",", "value", "in", "anno", ".", "items", "(", ")", ":", "\n", "            ", "anno_frames", "[", "key", "]", "=", "[", "value", "[", "f_id", ",", "...", "]", ".", "clone", "(", ")", "for", "f_id", "in", "frame_ids", "]", "\n", "\n", "", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "obj_class", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "\n", "return", "frame_list", ",", "anno_frames", ",", "object_meta", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net.TrackingNet.__init__": [[46, 76], ["base_video_dataset.BaseVideoDataset.__init__", "tracking_net.list_sequences", "tracking_net.TrackingNet._load_class_info", "list", "tracking_net.TrackingNet.class_list.sort", "random.sample", "tracking_net.TrackingNet.seq_per_class.keys", "ltr.admin.environment.env_settings", "int", "range", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net.list_sequences", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net.TrackingNet._load_class_info", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "__init__", "(", "self", ",", "root", "=", "None", ",", "image_loader", "=", "jpeg4py_loader", ",", "set_ids", "=", "None", ",", "data_fraction", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root        - The path to the TrackingNet folder, containing the training sets.\n            image_loader (jpeg4py_loader) -  The function to read the images. jpeg4py (https://github.com/ajkxyz/jpeg4py)\n                                            is used by default.\n            set_ids (None) - List containing the ids of the TrackingNet sets to be used for training. If None, all the\n                            sets (0 - 11) will be used.\n            data_fraction - Fraction of dataset to be used. The complete dataset is used by default\n        \"\"\"", "\n", "root", "=", "env_settings", "(", ")", ".", "trackingnet_dir", "if", "root", "is", "None", "else", "root", "\n", "super", "(", ")", ".", "__init__", "(", "'TrackingNet'", ",", "root", ",", "image_loader", ")", "\n", "\n", "if", "set_ids", "is", "None", ":", "\n", "            ", "set_ids", "=", "[", "i", "for", "i", "in", "range", "(", "12", ")", "]", "\n", "\n", "", "self", ".", "set_ids", "=", "set_ids", "\n", "\n", "# Keep a list of all videos. Sequence list is a list of tuples (set_id, video_name) containing the set_id and", "\n", "# video_name for each sequence", "\n", "self", ".", "sequence_list", "=", "list_sequences", "(", "self", ".", "root", ",", "self", ".", "set_ids", ")", "\n", "\n", "if", "data_fraction", "is", "not", "None", ":", "\n", "            ", "self", ".", "sequence_list", "=", "random", ".", "sample", "(", "self", ".", "sequence_list", ",", "int", "(", "len", "(", "self", ".", "sequence_list", ")", "*", "data_fraction", ")", ")", "\n", "\n", "", "self", ".", "seq_to_class_map", ",", "self", ".", "seq_per_class", "=", "self", ".", "_load_class_info", "(", ")", "\n", "\n", "# we do not have the class_lists for the tracking net", "\n", "self", ".", "class_list", "=", "list", "(", "self", ".", "seq_per_class", ".", "keys", "(", ")", ")", "\n", "self", ".", "class_list", ".", "sort", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net.TrackingNet._load_class_info": [[77, 93], ["os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "enumerate", "os.path.dirname", "os.path.dirname", "os.path.dirname", "os.path.dirname", "open", "os.path.realpath", "os.path.realpath", "os.path.realpath", "os.path.realpath", "seq_per_class[].append", "seq_class.split", "seq_class.rstrip().split", "seq_class.rstrip"], "methods", ["None"], ["", "def", "_load_class_info", "(", "self", ")", ":", "\n", "        ", "ltr_path", "=", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "realpath", "(", "__file__", ")", ")", ",", "'..'", ")", "\n", "class_map_path", "=", "os", ".", "path", ".", "join", "(", "ltr_path", ",", "'data_specs'", ",", "'trackingnet_classmap.txt'", ")", "\n", "\n", "with", "open", "(", "class_map_path", ",", "'r'", ")", "as", "f", ":", "\n", "            ", "seq_to_class_map", "=", "{", "seq_class", ".", "split", "(", "'\\t'", ")", "[", "0", "]", ":", "seq_class", ".", "rstrip", "(", ")", ".", "split", "(", "'\\t'", ")", "[", "1", "]", "for", "seq_class", "in", "f", "}", "\n", "\n", "", "seq_per_class", "=", "{", "}", "\n", "for", "i", ",", "seq", "in", "enumerate", "(", "self", ".", "sequence_list", ")", ":", "\n", "            ", "class_name", "=", "seq_to_class_map", ".", "get", "(", "seq", "[", "1", "]", ",", "'Unknown'", ")", "\n", "if", "class_name", "not", "in", "seq_per_class", ":", "\n", "                ", "seq_per_class", "[", "class_name", "]", "=", "[", "i", "]", "\n", "", "else", ":", "\n", "                ", "seq_per_class", "[", "class_name", "]", ".", "append", "(", "i", ")", "\n", "\n", "", "", "return", "seq_to_class_map", ",", "seq_per_class", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net.TrackingNet.get_name": [[94, 96], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "return", "'trackingnet'", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net.TrackingNet.has_class_info": [[97, 99], ["None"], "methods", ["None"], ["", "def", "has_class_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net.TrackingNet.get_sequences_in_class": [[100, 102], ["None"], "methods", ["None"], ["", "def", "get_sequences_in_class", "(", "self", ",", "class_name", ")", ":", "\n", "        ", "return", "self", ".", "seq_per_class", "[", "class_name", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net.TrackingNet._read_bb_anno": [[103, 110], ["os.path.join", "os.path.join", "os.path.join", "os.path.join", "torch.tensor", "pandas.read_csv", "str"], "methods", ["None"], ["", "def", "_read_bb_anno", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "set_id", "=", "self", ".", "sequence_list", "[", "seq_id", "]", "[", "0", "]", "\n", "vid_name", "=", "self", ".", "sequence_list", "[", "seq_id", "]", "[", "1", "]", "\n", "bb_anno_file", "=", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "\"TRAIN_\"", "+", "str", "(", "set_id", ")", ",", "\"anno\"", ",", "vid_name", "+", "\".txt\"", ")", "\n", "gt", "=", "pandas", ".", "read_csv", "(", "bb_anno_file", ",", "delimiter", "=", "','", ",", "header", "=", "None", ",", "dtype", "=", "np", ".", "float32", ",", "na_filter", "=", "False", ",", "\n", "low_memory", "=", "False", ")", ".", "values", "\n", "return", "torch", ".", "tensor", "(", "gt", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net.TrackingNet.get_sequence_info": [[111, 117], ["tracking_net.TrackingNet._read_bb_anno", "valid.clone().byte", "valid.clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._read_bb_anno"], ["", "def", "get_sequence_info", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "bbox", "=", "self", ".", "_read_bb_anno", "(", "seq_id", ")", "\n", "\n", "valid", "=", "(", "bbox", "[", ":", ",", "2", "]", ">", "0", ")", "&", "(", "bbox", "[", ":", ",", "3", "]", ">", "0", ")", "\n", "visible", "=", "valid", ".", "clone", "(", ")", ".", "byte", "(", ")", "\n", "return", "{", "'bbox'", ":", "bbox", ",", "'valid'", ":", "valid", ",", "'visible'", ":", "visible", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net.TrackingNet._get_frame": [[118, 123], ["os.path.join", "os.path.join", "os.path.join", "os.path.join", "tracking_net.TrackingNet.image_loader", "str", "str"], "methods", ["None"], ["", "def", "_get_frame", "(", "self", ",", "seq_id", ",", "frame_id", ")", ":", "\n", "        ", "set_id", "=", "self", ".", "sequence_list", "[", "seq_id", "]", "[", "0", "]", "\n", "vid_name", "=", "self", ".", "sequence_list", "[", "seq_id", "]", "[", "1", "]", "\n", "frame_path", "=", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "\"TRAIN_\"", "+", "str", "(", "set_id", ")", ",", "\"frames\"", ",", "vid_name", ",", "str", "(", "frame_id", ")", "+", "\".jpg\"", ")", "\n", "return", "self", ".", "image_loader", "(", "frame_path", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net.TrackingNet._get_class": [[124, 127], ["None"], "methods", ["None"], ["", "def", "_get_class", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "seq_name", "=", "self", ".", "sequence_list", "[", "seq_id", "]", "[", "1", "]", "\n", "return", "self", ".", "seq_to_class_map", "[", "seq_name", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net.TrackingNet.get_class_name": [[128, 132], ["tracking_net.TrackingNet._get_class"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_class"], ["", "def", "get_class_name", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "obj_class", "=", "self", ".", "_get_class", "(", "seq_id", ")", "\n", "\n", "return", "obj_class", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net.TrackingNet.get_frames": [[133, 152], ["tracking_net.TrackingNet.items", "tracking_net.TrackingNet._get_class", "collections.OrderedDict", "tracking_net.TrackingNet._get_frame", "tracking_net.TrackingNet.get_sequence_info", "value[].clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_class", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.ImagenetVID._get_frame", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_sequence_info"], ["", "def", "get_frames", "(", "self", ",", "seq_id", ",", "frame_ids", ",", "anno", "=", "None", ")", ":", "\n", "        ", "frame_list", "=", "[", "self", ".", "_get_frame", "(", "seq_id", ",", "f", ")", "for", "f", "in", "frame_ids", "]", "\n", "\n", "if", "anno", "is", "None", ":", "\n", "            ", "anno", "=", "self", ".", "get_sequence_info", "(", "seq_id", ")", "\n", "\n", "", "anno_frames", "=", "{", "}", "\n", "for", "key", ",", "value", "in", "anno", ".", "items", "(", ")", ":", "\n", "            ", "anno_frames", "[", "key", "]", "=", "[", "value", "[", "f_id", ",", "...", "]", ".", "clone", "(", ")", "for", "f_id", "in", "frame_ids", "]", "\n", "\n", "", "obj_class", "=", "self", ".", "_get_class", "(", "seq_id", ")", "\n", "\n", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "obj_class", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "\n", "return", "frame_list", ",", "anno_frames", ",", "object_meta", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.tracking_net.list_sequences": [[14, 33], ["os.path.join", "os.path.join", "str", "os.listdir", "os.listdir", "f.endswith", "os.path.splitext", "os.path.splitext"], "function", ["None"], ["def", "list_sequences", "(", "root", ",", "set_ids", ")", ":", "\n", "    ", "\"\"\" Lists all the videos in the input set_ids. Returns a list of tuples (set_id, video_name)\n\n    args:\n        root: Root directory to TrackingNet\n        set_ids: Sets (0-11) which are to be used\n\n    returns:\n        list - list of tuples (set_id, video_name) containing the set_id and video_name for each sequence\n    \"\"\"", "\n", "sequence_list", "=", "[", "]", "\n", "\n", "for", "s", "in", "set_ids", ":", "\n", "        ", "anno_dir", "=", "os", ".", "path", ".", "join", "(", "root", ",", "\"TRAIN_\"", "+", "str", "(", "s", ")", ",", "\"anno\"", ")", "\n", "\n", "sequences_cur_set", "=", "[", "(", "s", ",", "os", ".", "path", ".", "splitext", "(", "f", ")", "[", "0", "]", ")", "for", "f", "in", "os", ".", "listdir", "(", "anno_dir", ")", "if", "f", ".", "endswith", "(", "'.txt'", ")", "]", "\n", "sequence_list", "+=", "sequences_cur_set", "\n", "\n", "", "return", "sequence_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k.__init__": [[26, 74], ["base_video_dataset.BaseVideoDataset.__init__", "got10k.Got10k._get_sequence_list", "got10k.Got10k._load_meta_info", "got10k.Got10k._build_seq_per_class", "list", "got10k.Got10k.class_list.sort", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "pandas.read_csv().values.tolist", "random.sample", "got10k.Got10k.seq_per_class.keys", "ltr.admin.environment.env_settings", "ValueError", "os.path.dirname", "os.path.dirname", "os.path.dirname", "os.path.dirname", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "list", "int", "os.path.realpath", "os.path.realpath", "os.path.realpath", "os.path.realpath", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "range", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "pandas.read_csv", "len", "len", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "ValueError"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._get_sequence_list", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k._load_meta_info", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._build_seq_per_class", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["def", "__init__", "(", "self", ",", "root", "=", "None", ",", "image_loader", "=", "jpeg4py_loader", ",", "split", "=", "None", ",", "seq_ids", "=", "None", ",", "data_fraction", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root - path to the got-10k training data. Note: This should point to the 'train' folder inside GOT-10k\n            image_loader (jpeg4py_loader) -  The function to read the images. jpeg4py (https://github.com/ajkxyz/jpeg4py)\n                                            is used by default.\n            split - 'train' or 'val'. Note: The validation split here is a subset of the official got-10k train split,\n                    not NOT the official got-10k validation split. To use the official validation split, provide that as\n                    the root folder instead.\n            seq_ids - List containing the ids of the videos to be used for training. Note: Only one of 'split' or 'seq_ids'\n                        options can be used at the same time.\n            data_fraction - Fraction of dataset to be used. The complete dataset is used by default\n        \"\"\"", "\n", "root", "=", "env_settings", "(", ")", ".", "got10k_dir", "if", "root", "is", "None", "else", "root", "\n", "super", "(", ")", ".", "__init__", "(", "'GOT10k'", ",", "root", ",", "image_loader", ")", "\n", "\n", "# all folders inside the root", "\n", "self", ".", "sequence_list", "=", "self", ".", "_get_sequence_list", "(", ")", "\n", "\n", "# seq_id is the index of the folder inside the got10k root path", "\n", "if", "split", "is", "not", "None", ":", "\n", "            ", "if", "seq_ids", "is", "not", "None", ":", "\n", "                ", "raise", "ValueError", "(", "'Cannot set both split_name and seq_ids.'", ")", "\n", "", "ltr_path", "=", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "realpath", "(", "__file__", ")", ")", ",", "'..'", ")", "\n", "if", "split", "==", "'train'", ":", "\n", "                ", "file_path", "=", "os", ".", "path", ".", "join", "(", "ltr_path", ",", "'data_specs'", ",", "'got10k_train_split.txt'", ")", "\n", "", "elif", "split", "==", "'val'", ":", "\n", "                ", "file_path", "=", "os", ".", "path", ".", "join", "(", "ltr_path", ",", "'data_specs'", ",", "'got10k_val_split.txt'", ")", "\n", "", "elif", "split", "==", "'train_full'", ":", "\n", "                ", "file_path", "=", "os", ".", "path", ".", "join", "(", "ltr_path", ",", "'data_specs'", ",", "'got10k_train_full_split.txt'", ")", "\n", "", "elif", "split", "==", "'vottrain'", ":", "\n", "                ", "file_path", "=", "os", ".", "path", ".", "join", "(", "ltr_path", ",", "'data_specs'", ",", "'got10k_vot_train_split.txt'", ")", "\n", "", "elif", "split", "==", "'votval'", ":", "\n", "                ", "file_path", "=", "os", ".", "path", ".", "join", "(", "ltr_path", ",", "'data_specs'", ",", "'got10k_vot_val_split.txt'", ")", "\n", "", "else", ":", "\n", "                ", "raise", "ValueError", "(", "'Unknown split name.'", ")", "\n", "", "seq_ids", "=", "pandas", ".", "read_csv", "(", "file_path", ",", "header", "=", "None", ",", "squeeze", "=", "True", ",", "dtype", "=", "np", ".", "int64", ")", ".", "values", ".", "tolist", "(", ")", "\n", "", "elif", "seq_ids", "is", "None", ":", "\n", "            ", "seq_ids", "=", "list", "(", "range", "(", "0", ",", "len", "(", "self", ".", "sequence_list", ")", ")", ")", "\n", "\n", "", "self", ".", "sequence_list", "=", "[", "self", ".", "sequence_list", "[", "i", "]", "for", "i", "in", "seq_ids", "]", "\n", "\n", "if", "data_fraction", "is", "not", "None", ":", "\n", "            ", "self", ".", "sequence_list", "=", "random", ".", "sample", "(", "self", ".", "sequence_list", ",", "int", "(", "len", "(", "self", ".", "sequence_list", ")", "*", "data_fraction", ")", ")", "\n", "\n", "", "self", ".", "sequence_meta_info", "=", "self", ".", "_load_meta_info", "(", ")", "\n", "self", ".", "seq_per_class", "=", "self", ".", "_build_seq_per_class", "(", ")", "\n", "\n", "self", ".", "class_list", "=", "list", "(", "self", ".", "seq_per_class", ".", "keys", "(", ")", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k.get_name": [[75, 77], ["None"], "methods", ["None"], ["self", ".", "class_list", ".", "sort", "(", ")", "\n", "\n", "", "def", "get_name", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k.has_class_info": [[78, 80], ["None"], "methods", ["None"], ["        ", "return", "'got10k'", "\n", "\n", "", "def", "has_class_info", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k.has_occlusion_info": [[81, 83], ["None"], "methods", ["None"], ["        ", "return", "True", "\n", "\n", "", "def", "has_occlusion_info", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k._load_meta_info": [[84, 87], ["got10k.Got10k._read_meta", "os.path.join", "os.path.join", "os.path.join", "os.path.join"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k._read_meta"], ["        ", "return", "True", "\n", "\n", "", "def", "_load_meta_info", "(", "self", ")", ":", "\n", "        ", "sequence_meta_info", "=", "{", "s", ":", "self", ".", "_read_meta", "(", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "s", ")", ")", "for", "s", "in", "self", ".", "sequence_list", "}", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k._read_meta": [[88, 104], ["collections.OrderedDict", "open", "f.readlines", "collections.OrderedDict", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "meta_info[].split", "meta_info[].split", "meta_info[].split", "meta_info[].split", "meta_info[].split"], "methods", ["None"], ["return", "sequence_meta_info", "\n", "\n", "", "def", "_read_meta", "(", "self", ",", "seq_path", ")", ":", "\n", "        ", "try", ":", "\n", "            ", "with", "open", "(", "os", ".", "path", ".", "join", "(", "seq_path", ",", "'meta_info.ini'", ")", ")", "as", "f", ":", "\n", "                ", "meta_info", "=", "f", ".", "readlines", "(", ")", "\n", "", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "meta_info", "[", "5", "]", ".", "split", "(", "': '", ")", "[", "-", "1", "]", "[", ":", "-", "1", "]", ",", "\n", "'motion_class'", ":", "meta_info", "[", "6", "]", ".", "split", "(", "': '", ")", "[", "-", "1", "]", "[", ":", "-", "1", "]", ",", "\n", "'major_class'", ":", "meta_info", "[", "7", "]", ".", "split", "(", "': '", ")", "[", "-", "1", "]", "[", ":", "-", "1", "]", ",", "\n", "'root_class'", ":", "meta_info", "[", "8", "]", ".", "split", "(", "': '", ")", "[", "-", "1", "]", "[", ":", "-", "1", "]", ",", "\n", "'motion_adverb'", ":", "meta_info", "[", "9", "]", ".", "split", "(", "': '", ")", "[", "-", "1", "]", "[", ":", "-", "1", "]", "}", ")", "\n", "", "except", ":", "\n", "            ", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "None", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k._build_seq_per_class": [[105, 116], ["enumerate", "seq_per_class[].append"], "methods", ["None"], ["", "return", "object_meta", "\n", "\n", "", "def", "_build_seq_per_class", "(", "self", ")", ":", "\n", "        ", "seq_per_class", "=", "{", "}", "\n", "\n", "for", "i", ",", "s", "in", "enumerate", "(", "self", ".", "sequence_list", ")", ":", "\n", "            ", "object_class", "=", "self", ".", "sequence_meta_info", "[", "s", "]", "[", "'object_class_name'", "]", "\n", "if", "object_class", "in", "seq_per_class", ":", "\n", "                ", "seq_per_class", "[", "object_class", "]", ".", "append", "(", "i", ")", "\n", "", "else", ":", "\n", "                ", "seq_per_class", "[", "object_class", "]", "=", "[", "i", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k.get_sequences_in_class": [[117, 119], ["None"], "methods", ["None"], ["", "", "return", "seq_per_class", "\n", "\n", "", "def", "get_sequences_in_class", "(", "self", ",", "class_name", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k._get_sequence_list": [[120, 125], ["open", "list", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "csv.reader"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["        ", "return", "self", ".", "seq_per_class", "[", "class_name", "]", "\n", "\n", "", "def", "_get_sequence_list", "(", "self", ")", ":", "\n", "        ", "with", "open", "(", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "'list.txt'", ")", ")", "as", "f", ":", "\n", "            ", "dir_list", "=", "list", "(", "csv", ".", "reader", "(", "f", ")", ")", "\n", "", "dir_list", "=", "[", "dir_name", "[", "0", "]", "for", "dir_name", "in", "dir_list", "]", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k._read_bb_anno": [[126, 130], ["os.path.join", "os.path.join", "os.path.join", "os.path.join", "torch.tensor", "pandas.read_csv"], "methods", ["None"], ["return", "dir_list", "\n", "\n", "", "def", "_read_bb_anno", "(", "self", ",", "seq_path", ")", ":", "\n", "        ", "bb_anno_file", "=", "os", ".", "path", ".", "join", "(", "seq_path", ",", "\"groundtruth.txt\"", ")", "\n", "gt", "=", "pandas", ".", "read_csv", "(", "bb_anno_file", ",", "delimiter", "=", "','", ",", "header", "=", "None", ",", "dtype", "=", "np", ".", "float32", ",", "na_filter", "=", "False", ",", "low_memory", "=", "False", ")", ".", "values", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k._read_target_visible": [[131, 145], ["os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "open", "torch.ByteTensor", "open", "torch.ByteTensor", "torch.ByteTensor.float", "int", "int", "csv.reader", "csv.reader"], "methods", ["None"], ["return", "torch", ".", "tensor", "(", "gt", ")", "\n", "\n", "", "def", "_read_target_visible", "(", "self", ",", "seq_path", ")", ":", "\n", "# Read full occlusion and out_of_view", "\n", "        ", "occlusion_file", "=", "os", ".", "path", ".", "join", "(", "seq_path", ",", "\"absence.label\"", ")", "\n", "cover_file", "=", "os", ".", "path", ".", "join", "(", "seq_path", ",", "\"cover.label\"", ")", "\n", "\n", "with", "open", "(", "occlusion_file", ",", "'r'", ",", "newline", "=", "''", ")", "as", "f", ":", "\n", "            ", "occlusion", "=", "torch", ".", "ByteTensor", "(", "[", "int", "(", "v", "[", "0", "]", ")", "for", "v", "in", "csv", ".", "reader", "(", "f", ")", "]", ")", "\n", "", "with", "open", "(", "cover_file", ",", "'r'", ",", "newline", "=", "''", ")", "as", "f", ":", "\n", "            ", "cover", "=", "torch", ".", "ByteTensor", "(", "[", "int", "(", "v", "[", "0", "]", ")", "for", "v", "in", "csv", ".", "reader", "(", "f", ")", "]", ")", "\n", "\n", "", "target_visible", "=", "~", "occlusion", "&", "(", "cover", ">", "0", ")", ".", "byte", "(", ")", "\n", "\n", "visible_ratio", "=", "cover", ".", "float", "(", ")", "/", "8", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k._get_sequence_path": [[146, 148], ["os.path.join", "os.path.join", "os.path.join", "os.path.join"], "methods", ["None"], ["return", "target_visible", ",", "visible_ratio", "\n", "\n", "", "def", "_get_sequence_path", "(", "self", ",", "seq_id", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k.get_sequence_info": [[149, 158], ["got10k.Got10k._get_sequence_path", "got10k.Got10k._read_bb_anno", "got10k.Got10k._read_target_visible", "valid.byte"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_sequence_path", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._read_bb_anno", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._read_target_visible"], ["        ", "return", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "self", ".", "sequence_list", "[", "seq_id", "]", ")", "\n", "\n", "", "def", "get_sequence_info", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "seq_path", "=", "self", ".", "_get_sequence_path", "(", "seq_id", ")", "\n", "bbox", "=", "self", ".", "_read_bb_anno", "(", "seq_path", ")", "\n", "\n", "valid", "=", "(", "bbox", "[", ":", ",", "2", "]", ">", "0", ")", "&", "(", "bbox", "[", ":", ",", "3", "]", ">", "0", ")", "\n", "visible", ",", "visible_ratio", "=", "self", ".", "_read_target_visible", "(", "seq_path", ")", "\n", "visible", "=", "visible", "&", "valid", ".", "byte", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k._get_frame_path": [[159, 161], ["os.path.join", "os.path.join", "os.path.join", "os.path.join"], "methods", ["None"], ["return", "{", "'bbox'", ":", "bbox", ",", "'valid'", ":", "valid", ",", "'visible'", ":", "visible", ",", "'visible_ratio'", ":", "visible_ratio", "}", "\n", "\n", "", "def", "_get_frame_path", "(", "self", ",", "seq_path", ",", "frame_id", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k._get_frame": [[162, 164], ["got10k.Got10k.image_loader", "got10k.Got10k._get_frame_path"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_frame_path"], ["        ", "return", "os", ".", "path", ".", "join", "(", "seq_path", ",", "'{:08}.jpg'", ".", "format", "(", "frame_id", "+", "1", ")", ")", "# frames start from 1", "\n", "\n", "", "def", "_get_frame", "(", "self", ",", "seq_path", ",", "frame_id", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k.get_class_name": [[165, 169], ["None"], "methods", ["None"], ["        ", "return", "self", ".", "image_loader", "(", "self", ".", "_get_frame_path", "(", "seq_path", ",", "frame_id", ")", ")", "\n", "\n", "", "def", "get_class_name", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "obj_meta", "=", "self", ".", "sequence_meta_info", "[", "self", ".", "sequence_list", "[", "seq_id", "]", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.got10k.Got10k.get_frames": [[170, 184], ["got10k.Got10k._get_sequence_path", "got10k.Got10k.items", "got10k.Got10k._get_frame", "got10k.Got10k.get_sequence_info", "value[].clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_sequence_path", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.ImagenetVID._get_frame", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_sequence_info"], ["return", "obj_meta", "[", "'object_class_name'", "]", "\n", "\n", "", "def", "get_frames", "(", "self", ",", "seq_id", ",", "frame_ids", ",", "anno", "=", "None", ")", ":", "\n", "        ", "seq_path", "=", "self", ".", "_get_sequence_path", "(", "seq_id", ")", "\n", "obj_meta", "=", "self", ".", "sequence_meta_info", "[", "self", ".", "sequence_list", "[", "seq_id", "]", "]", "\n", "\n", "frame_list", "=", "[", "self", ".", "_get_frame", "(", "seq_path", ",", "f_id", ")", "for", "f_id", "in", "frame_ids", "]", "\n", "\n", "if", "anno", "is", "None", ":", "\n", "            ", "anno", "=", "self", ".", "get_sequence_info", "(", "seq_id", ")", "\n", "\n", "", "anno_frames", "=", "{", "}", "\n", "for", "key", ",", "value", "in", "anno", ".", "items", "(", ")", ":", "\n", "            ", "anno_frames", "[", "key", "]", "=", "[", "value", "[", "f_id", ",", "...", "]", ".", "clone", "(", ")", "for", "f_id", "in", "frame_ids", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb.__init__": [[18, 46], ["base_video_dataset.BaseVideoDataset.__init__", "lasot_lmdb.Lasot_lmdb._build_sequence_list", "lasot_lmdb.Lasot_lmdb._build_class_list", "random.sample", "lib.train.admin.env_settings", "seq_name.split", "lasot_lmdb.Lasot_lmdb.class_list.append", "enumerate", "int", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._build_sequence_list", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._build_class_list", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["    ", "def", "__init__", "(", "self", ",", "root", "=", "None", ",", "image_loader", "=", "jpeg4py_loader", ",", "vid_ids", "=", "None", ",", "split", "=", "None", ",", "data_fraction", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root - path to the lasot dataset.\n            image_loader (jpeg4py_loader) -  The function to read the images. jpeg4py (https://github.com/ajkxyz/jpeg4py)\n                                            is used by default.\n            vid_ids - List containing the ids of the videos (1 - 20) used for training. If vid_ids = [1, 3, 5], then the\n                    videos with subscripts -1, -3, and -5 from each class will be used for training.\n            split - If split='train', the official train split (protocol-II) is used for training. Note: Only one of\n                    vid_ids or split option can be used at a time.\n            data_fraction - Fraction of dataset to be used. The complete dataset is used by default\n        \"\"\"", "\n", "root", "=", "env_settings", "(", ")", ".", "lasot_lmdb_dir", "if", "root", "is", "None", "else", "root", "\n", "super", "(", ")", ".", "__init__", "(", "'LaSOT_lmdb'", ",", "root", ",", "image_loader", ")", "\n", "\n", "self", ".", "sequence_list", "=", "self", ".", "_build_sequence_list", "(", "vid_ids", ",", "split", ")", "\n", "class_list", "=", "[", "seq_name", ".", "split", "(", "'-'", ")", "[", "0", "]", "for", "seq_name", "in", "self", ".", "sequence_list", "]", "\n", "self", ".", "class_list", "=", "[", "]", "\n", "for", "ele", "in", "class_list", ":", "\n", "            ", "if", "ele", "not", "in", "self", ".", "class_list", ":", "\n", "                ", "self", ".", "class_list", ".", "append", "(", "ele", ")", "\n", "# Keep a list of all classes", "\n", "", "", "self", ".", "class_to_id", "=", "{", "cls_name", ":", "cls_id", "for", "cls_id", ",", "cls_name", "in", "enumerate", "(", "self", ".", "class_list", ")", "}", "\n", "\n", "if", "data_fraction", "is", "not", "None", ":", "\n", "            ", "self", ".", "sequence_list", "=", "random", ".", "sample", "(", "self", ".", "sequence_list", ",", "int", "(", "len", "(", "self", ".", "sequence_list", ")", "*", "data_fraction", ")", ")", "\n", "\n", "", "self", ".", "seq_per_class", "=", "self", ".", "_build_class_list", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._build_sequence_list": [[47, 63], ["os.path.join", "os.path.join", "os.path.join", "os.path.join", "pandas.read_csv().values.tolist", "ValueError", "os.path.dirname", "os.path.dirname", "os.path.dirname", "os.path.dirname", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "ValueError", "ValueError", "os.path.realpath", "os.path.realpath", "os.path.realpath", "os.path.realpath", "pandas.read_csv", "str"], "methods", ["None"], ["", "def", "_build_sequence_list", "(", "self", ",", "vid_ids", "=", "None", ",", "split", "=", "None", ")", ":", "\n", "        ", "if", "split", "is", "not", "None", ":", "\n", "            ", "if", "vid_ids", "is", "not", "None", ":", "\n", "                ", "raise", "ValueError", "(", "'Cannot set both split_name and vid_ids.'", ")", "\n", "", "ltr_path", "=", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "realpath", "(", "__file__", ")", ")", ",", "'..'", ")", "\n", "if", "split", "==", "'train'", ":", "\n", "                ", "file_path", "=", "os", ".", "path", ".", "join", "(", "ltr_path", ",", "'data_specs'", ",", "'lasot_train_split.txt'", ")", "\n", "", "else", ":", "\n", "                ", "raise", "ValueError", "(", "'Unknown split name.'", ")", "\n", "", "sequence_list", "=", "pandas", ".", "read_csv", "(", "file_path", ",", "header", "=", "None", ",", "squeeze", "=", "True", ")", ".", "values", ".", "tolist", "(", ")", "\n", "", "elif", "vid_ids", "is", "not", "None", ":", "\n", "            ", "sequence_list", "=", "[", "c", "+", "'-'", "+", "str", "(", "v", ")", "for", "c", "in", "self", ".", "class_list", "for", "v", "in", "vid_ids", "]", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'Set either split_name or vid_ids.'", ")", "\n", "\n", "", "return", "sequence_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._build_class_list": [[64, 74], ["enumerate", "seq_name.split", "seq_per_class[].append"], "methods", ["None"], ["", "def", "_build_class_list", "(", "self", ")", ":", "\n", "        ", "seq_per_class", "=", "{", "}", "\n", "for", "seq_id", ",", "seq_name", "in", "enumerate", "(", "self", ".", "sequence_list", ")", ":", "\n", "            ", "class_name", "=", "seq_name", ".", "split", "(", "'-'", ")", "[", "0", "]", "\n", "if", "class_name", "in", "seq_per_class", ":", "\n", "                ", "seq_per_class", "[", "class_name", "]", ".", "append", "(", "seq_id", ")", "\n", "", "else", ":", "\n", "                ", "seq_per_class", "[", "class_name", "]", "=", "[", "seq_id", "]", "\n", "\n", "", "", "return", "seq_per_class", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb.get_name": [[75, 77], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "return", "'lasot_lmdb'", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb.has_class_info": [[78, 80], ["None"], "methods", ["None"], ["", "def", "has_class_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb.has_occlusion_info": [[81, 83], ["None"], "methods", ["None"], ["", "def", "has_occlusion_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb.get_num_sequences": [[84, 86], ["len"], "methods", ["None"], ["", "def", "get_num_sequences", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "sequence_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb.get_num_classes": [[87, 89], ["len"], "methods", ["None"], ["", "def", "get_num_classes", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "class_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb.get_sequences_in_class": [[90, 92], ["None"], "methods", ["None"], ["", "def", "get_sequences_in_class", "(", "self", ",", "class_name", ")", ":", "\n", "        ", "return", "self", ".", "seq_per_class", "[", "class_name", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._read_bb_anno": [[93, 99], ["os.path.join", "os.path.join", "os.path.join", "os.path.join", "numpy.array().astype", "torch.tensor", "decode_str().split", "list", "map", "numpy.array", "decode_str", "line.split"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_str"], ["", "def", "_read_bb_anno", "(", "self", ",", "seq_path", ")", ":", "\n", "        ", "bb_anno_file", "=", "os", ".", "path", ".", "join", "(", "seq_path", ",", "\"groundtruth.txt\"", ")", "\n", "gt_str_list", "=", "decode_str", "(", "self", ".", "root", ",", "bb_anno_file", ")", ".", "split", "(", "'\\n'", ")", "[", ":", "-", "1", "]", "# the last line is empty", "\n", "gt_list", "=", "[", "list", "(", "map", "(", "float", ",", "line", ".", "split", "(", "','", ")", ")", ")", "for", "line", "in", "gt_str_list", "]", "\n", "gt_arr", "=", "np", ".", "array", "(", "gt_list", ")", ".", "astype", "(", "np", ".", "float32", ")", "\n", "return", "torch", ".", "tensor", "(", "gt_arr", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._read_target_visible": [[100, 113], ["os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "os.path.join", "list", "torch.ByteTensor", "list", "torch.ByteTensor", "map", "map", "decode_str().split", "decode_str().split", "decode_str", "decode_str"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_str", "home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_str"], ["", "def", "_read_target_visible", "(", "self", ",", "seq_path", ")", ":", "\n", "# Read full occlusion and out_of_view", "\n", "        ", "occlusion_file", "=", "os", ".", "path", ".", "join", "(", "seq_path", ",", "\"full_occlusion.txt\"", ")", "\n", "out_of_view_file", "=", "os", ".", "path", ".", "join", "(", "seq_path", ",", "\"out_of_view.txt\"", ")", "\n", "\n", "occ_list", "=", "list", "(", "map", "(", "int", ",", "decode_str", "(", "self", ".", "root", ",", "occlusion_file", ")", ".", "split", "(", "','", ")", ")", ")", "\n", "occlusion", "=", "torch", ".", "ByteTensor", "(", "occ_list", ")", "\n", "out_view_list", "=", "list", "(", "map", "(", "int", ",", "decode_str", "(", "self", ".", "root", ",", "out_of_view_file", ")", ".", "split", "(", "','", ")", ")", ")", "\n", "out_of_view", "=", "torch", ".", "ByteTensor", "(", "out_view_list", ")", "\n", "\n", "target_visible", "=", "~", "occlusion", "&", "~", "out_of_view", "\n", "\n", "return", "target_visible", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_sequence_path": [[114, 120], ["os.path.join", "os.path.join", "os.path.join", "os.path.join", "seq_name.split", "seq_name.split"], "methods", ["None"], ["", "def", "_get_sequence_path", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "seq_name", "=", "self", ".", "sequence_list", "[", "seq_id", "]", "\n", "class_name", "=", "seq_name", ".", "split", "(", "'-'", ")", "[", "0", "]", "\n", "vid_id", "=", "seq_name", ".", "split", "(", "'-'", ")", "[", "1", "]", "\n", "\n", "return", "os", ".", "path", ".", "join", "(", "class_name", ",", "class_name", "+", "'-'", "+", "vid_id", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb.get_sequence_info": [[121, 129], ["lasot_lmdb.Lasot_lmdb._get_sequence_path", "lasot_lmdb.Lasot_lmdb._read_bb_anno", "lasot_lmdb.Lasot_lmdb._read_target_visible", "valid.byte"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_sequence_path", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._read_bb_anno", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._read_target_visible"], ["", "def", "get_sequence_info", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "seq_path", "=", "self", ".", "_get_sequence_path", "(", "seq_id", ")", "\n", "bbox", "=", "self", ".", "_read_bb_anno", "(", "seq_path", ")", "\n", "\n", "valid", "=", "(", "bbox", "[", ":", ",", "2", "]", ">", "0", ")", "&", "(", "bbox", "[", ":", ",", "3", "]", ">", "0", ")", "\n", "visible", "=", "self", ".", "_read_target_visible", "(", "seq_path", ")", "&", "valid", ".", "byte", "(", ")", "\n", "\n", "return", "{", "'bbox'", ":", "bbox", ",", "'valid'", ":", "valid", ",", "'visible'", ":", "visible", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_frame_path": [[130, 132], ["os.path.join", "os.path.join", "os.path.join", "os.path.join"], "methods", ["None"], ["", "def", "_get_frame_path", "(", "self", ",", "seq_path", ",", "frame_id", ")", ":", "\n", "        ", "return", "os", ".", "path", ".", "join", "(", "seq_path", ",", "'img'", ",", "'{:08}.jpg'", ".", "format", "(", "frame_id", "+", "1", ")", ")", "# frames start from 1", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_frame": [[133, 135], ["decode_img", "lasot_lmdb.Lasot_lmdb._get_frame_path"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_img", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_frame_path"], ["", "def", "_get_frame", "(", "self", ",", "seq_path", ",", "frame_id", ")", ":", "\n", "        ", "return", "decode_img", "(", "self", ".", "root", ",", "self", ".", "_get_frame_path", "(", "seq_path", ",", "frame_id", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_class": [[136, 139], ["seq_path.split"], "methods", ["None"], ["", "def", "_get_class", "(", "self", ",", "seq_path", ")", ":", "\n", "        ", "raw_class", "=", "seq_path", ".", "split", "(", "'/'", ")", "[", "-", "2", "]", "\n", "return", "raw_class", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb.get_class_name": [[140, 145], ["lasot_lmdb.Lasot_lmdb._get_sequence_path", "lasot_lmdb.Lasot_lmdb._get_class"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_sequence_path", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_class"], ["", "def", "get_class_name", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "seq_path", "=", "self", ".", "_get_sequence_path", "(", "seq_id", ")", "\n", "obj_class", "=", "self", ".", "_get_class", "(", "seq_path", ")", "\n", "\n", "return", "obj_class", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb.get_frames": [[146, 166], ["lasot_lmdb.Lasot_lmdb._get_sequence_path", "lasot_lmdb.Lasot_lmdb._get_class", "lasot_lmdb.Lasot_lmdb.items", "collections.OrderedDict", "lasot_lmdb.Lasot_lmdb._get_frame", "lasot_lmdb.Lasot_lmdb.get_sequence_info", "value[].clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_sequence_path", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lasot_lmdb.Lasot_lmdb._get_class", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.ImagenetVID._get_frame", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_sequence_info"], ["", "def", "get_frames", "(", "self", ",", "seq_id", ",", "frame_ids", ",", "anno", "=", "None", ")", ":", "\n", "        ", "seq_path", "=", "self", ".", "_get_sequence_path", "(", "seq_id", ")", "\n", "\n", "obj_class", "=", "self", ".", "_get_class", "(", "seq_path", ")", "\n", "frame_list", "=", "[", "self", ".", "_get_frame", "(", "seq_path", ",", "f_id", ")", "for", "f_id", "in", "frame_ids", "]", "\n", "\n", "if", "anno", "is", "None", ":", "\n", "            ", "anno", "=", "self", ".", "get_sequence_info", "(", "seq_id", ")", "\n", "\n", "", "anno_frames", "=", "{", "}", "\n", "for", "key", ",", "value", "in", "anno", ".", "items", "(", ")", ":", "\n", "            ", "anno_frames", "[", "key", "]", "=", "[", "value", "[", "f_id", ",", "...", "]", ".", "clone", "(", ")", "for", "f_id", "in", "frame_ids", "]", "\n", "\n", "", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "obj_class", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "\n", "return", "frame_list", ",", "anno_frames", ",", "object_meta", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq.MSCOCOSeq.__init__": [[34, 64], ["base_video_dataset.BaseVideoDataset.__init__", "os.path.join", "os.path.join", "pycocotools.coco.COCO", "coco_seq.MSCOCOSeq.get_class_list", "coco_seq.MSCOCOSeq._get_sequence_list", "coco_seq.MSCOCOSeq._build_seq_per_class", "random.sample", "ltr.admin.environment.env_settings", "int", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_class_list", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._get_sequence_list", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._build_seq_per_class", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "__init__", "(", "self", ",", "root", "=", "None", ",", "image_loader", "=", "jpeg4py_loader", ",", "data_fraction", "=", "None", ",", "split", "=", "\"train\"", ",", "version", "=", "\"2014\"", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root - path to the coco dataset.\n            image_loader (default_image_loader) -  The function to read the images. If installed,\n                                                   jpeg4py (https://github.com/ajkxyz/jpeg4py) is used by default. Else,\n                                                   opencv's imread is used.\n            data_fraction (None) - Fraction of images to be used. The images are selected randomly. If None, all the\n                                  images  will be used\n            split - 'train' or 'val'.\n            version - version of coco dataset (2014 or 2017)\n        \"\"\"", "\n", "root", "=", "env_settings", "(", ")", ".", "coco_dir", "if", "root", "is", "None", "else", "root", "\n", "super", "(", ")", ".", "__init__", "(", "'COCO'", ",", "root", ",", "image_loader", ")", "\n", "\n", "self", ".", "img_pth", "=", "os", ".", "path", ".", "join", "(", "root", ",", "'images/{}{}/'", ".", "format", "(", "split", ",", "version", ")", ")", "\n", "self", ".", "anno_path", "=", "os", ".", "path", ".", "join", "(", "root", ",", "'annotations/instances_{}{}.json'", ".", "format", "(", "split", ",", "version", ")", ")", "\n", "\n", "# Load the COCO set.", "\n", "self", ".", "coco_set", "=", "COCO", "(", "self", ".", "anno_path", ")", "\n", "\n", "self", ".", "cats", "=", "self", ".", "coco_set", ".", "cats", "\n", "\n", "self", ".", "class_list", "=", "self", ".", "get_class_list", "(", ")", "\n", "\n", "self", ".", "sequence_list", "=", "self", ".", "_get_sequence_list", "(", ")", "\n", "\n", "if", "data_fraction", "is", "not", "None", ":", "\n", "            ", "self", ".", "sequence_list", "=", "random", ".", "sample", "(", "self", ".", "sequence_list", ",", "int", "(", "len", "(", "self", ".", "sequence_list", ")", "*", "data_fraction", ")", ")", "\n", "", "self", ".", "seq_per_class", "=", "self", ".", "_build_seq_per_class", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq.MSCOCOSeq._get_sequence_list": [[65, 70], ["list", "coco_seq.MSCOCOSeq.coco_set.anns.keys"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "_get_sequence_list", "(", "self", ")", ":", "\n", "        ", "ann_list", "=", "list", "(", "self", ".", "coco_set", ".", "anns", ".", "keys", "(", ")", ")", "\n", "seq_list", "=", "[", "a", "for", "a", "in", "ann_list", "if", "self", ".", "coco_set", ".", "anns", "[", "a", "]", "[", "'iscrowd'", "]", "==", "0", "]", "\n", "\n", "return", "seq_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq.MSCOCOSeq.is_video_sequence": [[71, 73], ["None"], "methods", ["None"], ["", "def", "is_video_sequence", "(", "self", ")", ":", "\n", "        ", "return", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq.MSCOCOSeq.get_num_classes": [[74, 76], ["len"], "methods", ["None"], ["", "def", "get_num_classes", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "class_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq.MSCOCOSeq.get_name": [[77, 79], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "return", "'coco'", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq.MSCOCOSeq.has_class_info": [[80, 82], ["None"], "methods", ["None"], ["", "def", "has_class_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq.MSCOCOSeq.get_class_list": [[83, 88], ["coco_seq.MSCOCOSeq.cats.keys", "class_list.append"], "methods", ["None"], ["", "def", "get_class_list", "(", "self", ")", ":", "\n", "        ", "class_list", "=", "[", "]", "\n", "for", "cat_id", "in", "self", ".", "cats", ".", "keys", "(", ")", ":", "\n", "            ", "class_list", ".", "append", "(", "self", ".", "cats", "[", "cat_id", "]", "[", "'name'", "]", ")", "\n", "", "return", "class_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq.MSCOCOSeq.has_segmentation_info": [[89, 91], ["None"], "methods", ["None"], ["", "def", "has_segmentation_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq.MSCOCOSeq.get_num_sequences": [[92, 94], ["len"], "methods", ["None"], ["", "def", "get_num_sequences", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "sequence_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq.MSCOCOSeq._build_seq_per_class": [[95, 105], ["enumerate", "seq_per_class[].append"], "methods", ["None"], ["", "def", "_build_seq_per_class", "(", "self", ")", ":", "\n", "        ", "seq_per_class", "=", "{", "}", "\n", "for", "i", ",", "seq", "in", "enumerate", "(", "self", ".", "sequence_list", ")", ":", "\n", "            ", "class_name", "=", "self", ".", "cats", "[", "self", ".", "coco_set", ".", "anns", "[", "seq", "]", "[", "'category_id'", "]", "]", "[", "'name'", "]", "\n", "if", "class_name", "not", "in", "seq_per_class", ":", "\n", "                ", "seq_per_class", "[", "class_name", "]", "=", "[", "i", "]", "\n", "", "else", ":", "\n", "                ", "seq_per_class", "[", "class_name", "]", ".", "append", "(", "i", ")", "\n", "\n", "", "", "return", "seq_per_class", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq.MSCOCOSeq.get_sequences_in_class": [[106, 108], ["None"], "methods", ["None"], ["", "def", "get_sequences_in_class", "(", "self", ",", "class_name", ")", ":", "\n", "        ", "return", "self", ".", "seq_per_class", "[", "class_name", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq.MSCOCOSeq.get_sequence_info": [[109, 120], ["coco_seq.MSCOCOSeq._get_anno", "torch.Tensor().view", "torch.Tensor().unsqueeze", "valid.clone().byte", "torch.Tensor", "torch.Tensor", "valid.clone", "coco_seq.MSCOCOSeq.coco_set.annToMask"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS._get_anno", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.annToMask"], ["", "def", "get_sequence_info", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "anno", "=", "self", ".", "_get_anno", "(", "seq_id", ")", "\n", "\n", "bbox", "=", "torch", ".", "Tensor", "(", "anno", "[", "'bbox'", "]", ")", ".", "view", "(", "1", ",", "4", ")", "\n", "\n", "mask", "=", "torch", ".", "Tensor", "(", "self", ".", "coco_set", ".", "annToMask", "(", "anno", ")", ")", ".", "unsqueeze", "(", "dim", "=", "0", ")", "\n", "\n", "'''2021.1.3 To avoid too small bounding boxes. Here we change the threshold to 50 pixels'''", "\n", "valid", "=", "(", "bbox", "[", ":", ",", "2", "]", ">", "50", ")", "&", "(", "bbox", "[", ":", ",", "3", "]", ">", "50", ")", "\n", "\n", "visible", "=", "valid", ".", "clone", "(", ")", ".", "byte", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq.MSCOCOSeq._get_anno": [[121, 125], ["None"], "methods", ["None"], ["return", "{", "'bbox'", ":", "bbox", ",", "'mask'", ":", "mask", ",", "'valid'", ":", "valid", ",", "'visible'", ":", "visible", "}", "\n", "\n", "", "def", "_get_anno", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "anno", "=", "self", ".", "coco_set", ".", "anns", "[", "self", ".", "sequence_list", "[", "seq_id", "]", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq.MSCOCOSeq._get_frames": [[126, 130], ["coco_seq.MSCOCOSeq.image_loader", "os.path.join", "coco_seq.MSCOCOSeq.coco_set.loadImgs"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.loadImgs"], ["return", "anno", "\n", "\n", "", "def", "_get_frames", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "path", "=", "self", ".", "coco_set", ".", "loadImgs", "(", "[", "self", ".", "coco_set", ".", "anns", "[", "self", ".", "sequence_list", "[", "seq_id", "]", "]", "[", "'image_id'", "]", "]", ")", "[", "0", "]", "[", "'file_name'", "]", "\n", "img", "=", "self", ".", "image_loader", "(", "os", ".", "path", ".", "join", "(", "self", ".", "img_pth", ",", "path", ")", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq.MSCOCOSeq.get_meta_info": [[131, 146], ["collections.OrderedDict", "collections.OrderedDict"], "methods", ["None"], ["return", "img", "\n", "\n", "", "def", "get_meta_info", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "try", ":", "\n", "            ", "cat_dict_current", "=", "self", ".", "cats", "[", "self", ".", "coco_set", ".", "anns", "[", "self", ".", "sequence_list", "[", "seq_id", "]", "]", "[", "'category_id'", "]", "]", "\n", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "cat_dict_current", "[", "'name'", "]", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "cat_dict_current", "[", "'supercategory'", "]", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "", "except", ":", "\n", "            ", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "None", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq.MSCOCOSeq.get_class_name": [[148, 151], ["None"], "methods", ["None"], ["\n", "\n", "", "def", "get_class_name", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "cat_dict_current", "=", "self", ".", "cats", "[", "self", ".", "coco_set", ".", "anns", "[", "self", ".", "sequence_list", "[", "seq_id", "]", "]", "[", "'category_id'", "]", "]", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq.MSCOCOSeq.get_frames": [[152, 169], ["coco_seq.MSCOCOSeq._get_frames", "coco_seq.MSCOCOSeq.items", "coco_seq.MSCOCOSeq.get_meta_info", "coco_seq.MSCOCOSeq.copy", "coco_seq.MSCOCOSeq.get_sequence_info"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._get_frames", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_meta_info", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_sequence_info"], ["return", "cat_dict_current", "[", "'name'", "]", "\n", "\n", "", "def", "get_frames", "(", "self", ",", "seq_id", "=", "None", ",", "frame_ids", "=", "None", ",", "anno", "=", "None", ")", ":", "\n", "# COCO is an image dataset. Thus we replicate the image denoted by seq_id len(frame_ids) times, and return a", "\n", "# list containing these replicated images.", "\n", "        ", "frame", "=", "self", ".", "_get_frames", "(", "seq_id", ")", "\n", "\n", "frame_list", "=", "[", "frame", ".", "copy", "(", ")", "for", "_", "in", "frame_ids", "]", "\n", "\n", "if", "anno", "is", "None", ":", "\n", "            ", "anno", "=", "self", ".", "get_sequence_info", "(", "seq_id", ")", "\n", "\n", "", "anno_frames", "=", "{", "}", "\n", "for", "key", ",", "value", "in", "anno", ".", "items", "(", ")", ":", "\n", "            ", "anno_frames", "[", "key", "]", "=", "[", "value", "[", "0", ",", "...", "]", "for", "_", "in", "frame_ids", "]", "\n", "\n", "", "object_meta", "=", "self", ".", "get_meta_info", "(", "seq_id", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.__init__": [[71, 84], ["COCO_tool.COCO.createIndex", "dict", "dict", "dict", "dict", "collections.defaultdict", "collections.defaultdict", "type", "type"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.createIndex"], ["    ", "def", "__init__", "(", "self", ",", "dataset", ")", ":", "\n", "        ", "\"\"\"\n        Constructor of Microsoft COCO helper class for reading and visualizing annotations.\n        :param annotation_file (str): location of annotation file\n        :param image_folder (str): location to the folder that hosts images.\n        :return:\n        \"\"\"", "\n", "# load dataset", "\n", "self", ".", "dataset", ",", "self", ".", "anns", ",", "self", ".", "cats", ",", "self", ".", "imgs", "=", "dict", "(", ")", ",", "dict", "(", ")", ",", "dict", "(", ")", ",", "dict", "(", ")", "\n", "self", ".", "imgToAnns", ",", "self", ".", "catToImgs", "=", "defaultdict", "(", "list", ")", ",", "defaultdict", "(", "list", ")", "\n", "assert", "type", "(", "dataset", ")", "==", "dict", ",", "'annotation file format {} not supported'", ".", "format", "(", "type", "(", "dataset", ")", ")", "\n", "self", ".", "dataset", "=", "dataset", "\n", "self", ".", "createIndex", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.createIndex": [[85, 115], ["print", "print", "collections.defaultdict", "collections.defaultdict", "imgToAnns[].append", "catToImgs[].append"], "methods", ["None"], ["", "def", "createIndex", "(", "self", ")", ":", "\n", "# create index", "\n", "        ", "print", "(", "'creating index...'", ")", "\n", "anns", ",", "cats", ",", "imgs", "=", "{", "}", ",", "{", "}", ",", "{", "}", "\n", "imgToAnns", ",", "catToImgs", "=", "defaultdict", "(", "list", ")", ",", "defaultdict", "(", "list", ")", "\n", "if", "'annotations'", "in", "self", ".", "dataset", ":", "\n", "            ", "for", "ann", "in", "self", ".", "dataset", "[", "'annotations'", "]", ":", "\n", "                ", "imgToAnns", "[", "ann", "[", "'image_id'", "]", "]", ".", "append", "(", "ann", ")", "\n", "anns", "[", "ann", "[", "'id'", "]", "]", "=", "ann", "\n", "\n", "", "", "if", "'images'", "in", "self", ".", "dataset", ":", "\n", "            ", "for", "img", "in", "self", ".", "dataset", "[", "'images'", "]", ":", "\n", "                ", "imgs", "[", "img", "[", "'id'", "]", "]", "=", "img", "\n", "\n", "", "", "if", "'categories'", "in", "self", ".", "dataset", ":", "\n", "            ", "for", "cat", "in", "self", ".", "dataset", "[", "'categories'", "]", ":", "\n", "                ", "cats", "[", "cat", "[", "'id'", "]", "]", "=", "cat", "\n", "\n", "", "", "if", "'annotations'", "in", "self", ".", "dataset", "and", "'categories'", "in", "self", ".", "dataset", ":", "\n", "            ", "for", "ann", "in", "self", ".", "dataset", "[", "'annotations'", "]", ":", "\n", "                ", "catToImgs", "[", "ann", "[", "'category_id'", "]", "]", ".", "append", "(", "ann", "[", "'image_id'", "]", ")", "\n", "\n", "", "", "print", "(", "'index created!'", ")", "\n", "\n", "# create class members", "\n", "self", ".", "anns", "=", "anns", "\n", "self", ".", "imgToAnns", "=", "imgToAnns", "\n", "self", ".", "catToImgs", "=", "catToImgs", "\n", "self", ".", "imgs", "=", "imgs", "\n", "self", ".", "cats", "=", "cats", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.info": [[116, 123], ["COCO_tool.COCO.dataset[].items", "print"], "methods", ["None"], ["", "def", "info", "(", "self", ")", ":", "\n", "        ", "\"\"\"\n        Print information about the annotation file.\n        :return:\n        \"\"\"", "\n", "for", "key", ",", "value", "in", "self", ".", "dataset", "[", "'info'", "]", ".", "items", "(", ")", ":", "\n", "            ", "print", "(", "'{}: {}'", ".", "format", "(", "key", ",", "value", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.getAnnIds": [[124, 151], ["COCO_tool._isArrayLike", "COCO_tool._isArrayLike", "len", "len", "len", "list", "len", "itertools.chain.from_iterable", "len", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool._isArrayLike", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool._isArrayLike", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "", "def", "getAnnIds", "(", "self", ",", "imgIds", "=", "[", "]", ",", "catIds", "=", "[", "]", ",", "areaRng", "=", "[", "]", ",", "iscrowd", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        Get ann ids that satisfy given filter conditions. default skips that filter\n        :param imgIds  (int array)     : get anns for given imgs\n               catIds  (int array)     : get anns for given cats\n               areaRng (float array)   : get anns for given area range (e.g. [0 inf])\n               iscrowd (boolean)       : get anns for given crowd label (False or True)\n        :return: ids (int array)       : integer array of ann ids\n        \"\"\"", "\n", "imgIds", "=", "imgIds", "if", "_isArrayLike", "(", "imgIds", ")", "else", "[", "imgIds", "]", "\n", "catIds", "=", "catIds", "if", "_isArrayLike", "(", "catIds", ")", "else", "[", "catIds", "]", "\n", "\n", "if", "len", "(", "imgIds", ")", "==", "len", "(", "catIds", ")", "==", "len", "(", "areaRng", ")", "==", "0", ":", "\n", "            ", "anns", "=", "self", ".", "dataset", "[", "'annotations'", "]", "\n", "", "else", ":", "\n", "            ", "if", "not", "len", "(", "imgIds", ")", "==", "0", ":", "\n", "                ", "lists", "=", "[", "self", ".", "imgToAnns", "[", "imgId", "]", "for", "imgId", "in", "imgIds", "if", "imgId", "in", "self", ".", "imgToAnns", "]", "\n", "anns", "=", "list", "(", "itertools", ".", "chain", ".", "from_iterable", "(", "lists", ")", ")", "\n", "", "else", ":", "\n", "                ", "anns", "=", "self", ".", "dataset", "[", "'annotations'", "]", "\n", "", "anns", "=", "anns", "if", "len", "(", "catIds", ")", "==", "0", "else", "[", "ann", "for", "ann", "in", "anns", "if", "ann", "[", "'category_id'", "]", "in", "catIds", "]", "\n", "anns", "=", "anns", "if", "len", "(", "areaRng", ")", "==", "0", "else", "[", "ann", "for", "ann", "in", "anns", "if", "ann", "[", "'area'", "]", ">", "areaRng", "[", "0", "]", "and", "ann", "[", "'area'", "]", "<", "areaRng", "[", "1", "]", "]", "\n", "", "if", "not", "iscrowd", "==", "None", ":", "\n", "            ", "ids", "=", "[", "ann", "[", "'id'", "]", "for", "ann", "in", "anns", "if", "ann", "[", "'iscrowd'", "]", "==", "iscrowd", "]", "\n", "", "else", ":", "\n", "            ", "ids", "=", "[", "ann", "[", "'id'", "]", "for", "ann", "in", "anns", "]", "\n", "", "return", "ids", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.getCatIds": [[152, 173], ["COCO_tool._isArrayLike", "COCO_tool._isArrayLike", "COCO_tool._isArrayLike", "len", "len", "len", "len", "len", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool._isArrayLike", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool._isArrayLike", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool._isArrayLike"], ["", "def", "getCatIds", "(", "self", ",", "catNms", "=", "[", "]", ",", "supNms", "=", "[", "]", ",", "catIds", "=", "[", "]", ")", ":", "\n", "        ", "\"\"\"\n        filtering parameters. default skips that filter.\n        :param catNms (str array)  : get cats for given cat names\n        :param supNms (str array)  : get cats for given supercategory names\n        :param catIds (int array)  : get cats for given cat ids\n        :return: ids (int array)   : integer array of cat ids\n        \"\"\"", "\n", "catNms", "=", "catNms", "if", "_isArrayLike", "(", "catNms", ")", "else", "[", "catNms", "]", "\n", "supNms", "=", "supNms", "if", "_isArrayLike", "(", "supNms", ")", "else", "[", "supNms", "]", "\n", "catIds", "=", "catIds", "if", "_isArrayLike", "(", "catIds", ")", "else", "[", "catIds", "]", "\n", "\n", "if", "len", "(", "catNms", ")", "==", "len", "(", "supNms", ")", "==", "len", "(", "catIds", ")", "==", "0", ":", "\n", "            ", "cats", "=", "self", ".", "dataset", "[", "'categories'", "]", "\n", "", "else", ":", "\n", "            ", "cats", "=", "self", ".", "dataset", "[", "'categories'", "]", "\n", "cats", "=", "cats", "if", "len", "(", "catNms", ")", "==", "0", "else", "[", "cat", "for", "cat", "in", "cats", "if", "cat", "[", "'name'", "]", "in", "catNms", "]", "\n", "cats", "=", "cats", "if", "len", "(", "supNms", ")", "==", "0", "else", "[", "cat", "for", "cat", "in", "cats", "if", "cat", "[", "'supercategory'", "]", "in", "supNms", "]", "\n", "cats", "=", "cats", "if", "len", "(", "catIds", ")", "==", "0", "else", "[", "cat", "for", "cat", "in", "cats", "if", "cat", "[", "'id'", "]", "in", "catIds", "]", "\n", "", "ids", "=", "[", "cat", "[", "'id'", "]", "for", "cat", "in", "cats", "]", "\n", "return", "ids", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.getImgIds": [[174, 194], ["list", "COCO_tool._isArrayLike", "COCO_tool._isArrayLike", "len", "len", "COCO_tool.COCO.imgs.keys", "set", "enumerate", "set", "set", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool._isArrayLike", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool._isArrayLike"], ["", "def", "getImgIds", "(", "self", ",", "imgIds", "=", "[", "]", ",", "catIds", "=", "[", "]", ")", ":", "\n", "        ", "'''\n        Get img ids that satisfy given filter conditions.\n        :param imgIds (int array) : get imgs for given ids\n        :param catIds (int array) : get imgs with all given cats\n        :return: ids (int array)  : integer array of img ids\n        '''", "\n", "imgIds", "=", "imgIds", "if", "_isArrayLike", "(", "imgIds", ")", "else", "[", "imgIds", "]", "\n", "catIds", "=", "catIds", "if", "_isArrayLike", "(", "catIds", ")", "else", "[", "catIds", "]", "\n", "\n", "if", "len", "(", "imgIds", ")", "==", "len", "(", "catIds", ")", "==", "0", ":", "\n", "            ", "ids", "=", "self", ".", "imgs", ".", "keys", "(", ")", "\n", "", "else", ":", "\n", "            ", "ids", "=", "set", "(", "imgIds", ")", "\n", "for", "i", ",", "catId", "in", "enumerate", "(", "catIds", ")", ":", "\n", "                ", "if", "i", "==", "0", "and", "len", "(", "ids", ")", "==", "0", ":", "\n", "                    ", "ids", "=", "set", "(", "self", ".", "catToImgs", "[", "catId", "]", ")", "\n", "", "else", ":", "\n", "                    ", "ids", "&=", "set", "(", "self", ".", "catToImgs", "[", "catId", "]", ")", "\n", "", "", "", "return", "list", "(", "ids", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.loadAnns": [[195, 205], ["COCO_tool._isArrayLike", "type"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool._isArrayLike"], ["", "def", "loadAnns", "(", "self", ",", "ids", "=", "[", "]", ")", ":", "\n", "        ", "\"\"\"\n        Load anns with the specified ids.\n        :param ids (int array)       : integer ids specifying anns\n        :return: anns (object array) : loaded ann objects\n        \"\"\"", "\n", "if", "_isArrayLike", "(", "ids", ")", ":", "\n", "            ", "return", "[", "self", ".", "anns", "[", "id", "]", "for", "id", "in", "ids", "]", "\n", "", "elif", "type", "(", "ids", ")", "==", "int", ":", "\n", "            ", "return", "[", "self", ".", "anns", "[", "ids", "]", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.loadCats": [[206, 216], ["COCO_tool._isArrayLike", "type"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool._isArrayLike"], ["", "", "def", "loadCats", "(", "self", ",", "ids", "=", "[", "]", ")", ":", "\n", "        ", "\"\"\"\n        Load cats with the specified ids.\n        :param ids (int array)       : integer ids specifying cats\n        :return: cats (object array) : loaded cat objects\n        \"\"\"", "\n", "if", "_isArrayLike", "(", "ids", ")", ":", "\n", "            ", "return", "[", "self", ".", "cats", "[", "id", "]", "for", "id", "in", "ids", "]", "\n", "", "elif", "type", "(", "ids", ")", "==", "int", ":", "\n", "            ", "return", "[", "self", ".", "cats", "[", "ids", "]", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.loadImgs": [[217, 227], ["COCO_tool._isArrayLike", "type"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool._isArrayLike"], ["", "", "def", "loadImgs", "(", "self", ",", "ids", "=", "[", "]", ")", ":", "\n", "        ", "\"\"\"\n        Load anns with the specified ids.\n        :param ids (int array)       : integer ids specifying img\n        :return: imgs (object array) : loaded img objects\n        \"\"\"", "\n", "if", "_isArrayLike", "(", "ids", ")", ":", "\n", "            ", "return", "[", "self", ".", "imgs", "[", "id", "]", "for", "id", "in", "ids", "]", "\n", "", "elif", "type", "(", "ids", ")", "==", "int", ":", "\n", "            ", "return", "[", "self", ".", "imgs", "[", "ids", "]", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.showAnns": [[228, 299], ["len", "matplotlib.gca", "matplotlib.gca.set_autoscale_on", "matplotlib.collections.PatchCollection", "matplotlib.gca.add_collection", "matplotlib.collections.PatchCollection", "matplotlib.gca.add_collection", "Exception", "numpy.array", "matplotlib.plot", "matplotlib.plot", "numpy.array().reshape", "polygons.append", "color.append", "print", "type", "pycocotools.mask.decode", "numpy.ones", "range", "matplotlib.gca.imshow", "type", "numpy.array", "numpy.all", "matplotlib.patches.Polygon", "numpy.array().reshape", "polygons.append", "color.append", "type", "pycocotools.mask.frPyObjects", "numpy.dstack", "matplotlib.plot", "numpy.array", "matplotlib.patches.Polygon", "numpy.array", "numpy.random.random().tolist", "numpy.random.random", "numpy.array", "int", "COCO_tool.COCO.loadCats", "numpy.random.random", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.loadCats"], ["", "", "def", "showAnns", "(", "self", ",", "anns", ",", "draw_bbox", "=", "False", ")", ":", "\n", "        ", "\"\"\"\n        Display the specified annotations.\n        :param anns (array of object): annotations to display\n        :return: None\n        \"\"\"", "\n", "if", "len", "(", "anns", ")", "==", "0", ":", "\n", "            ", "return", "0", "\n", "", "if", "'segmentation'", "in", "anns", "[", "0", "]", "or", "'keypoints'", "in", "anns", "[", "0", "]", ":", "\n", "            ", "datasetType", "=", "'instances'", "\n", "", "elif", "'caption'", "in", "anns", "[", "0", "]", ":", "\n", "            ", "datasetType", "=", "'captions'", "\n", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "'datasetType not supported'", ")", "\n", "", "if", "datasetType", "==", "'instances'", ":", "\n", "            ", "ax", "=", "plt", ".", "gca", "(", ")", "\n", "ax", ".", "set_autoscale_on", "(", "False", ")", "\n", "polygons", "=", "[", "]", "\n", "color", "=", "[", "]", "\n", "for", "ann", "in", "anns", ":", "\n", "                ", "c", "=", "(", "np", ".", "random", ".", "random", "(", "(", "1", ",", "3", ")", ")", "*", "0.6", "+", "0.4", ")", ".", "tolist", "(", ")", "[", "0", "]", "\n", "if", "'segmentation'", "in", "ann", ":", "\n", "                    ", "if", "type", "(", "ann", "[", "'segmentation'", "]", ")", "==", "list", ":", "\n", "# polygon", "\n", "                        ", "for", "seg", "in", "ann", "[", "'segmentation'", "]", ":", "\n", "                            ", "poly", "=", "np", ".", "array", "(", "seg", ")", ".", "reshape", "(", "(", "int", "(", "len", "(", "seg", ")", "/", "2", ")", ",", "2", ")", ")", "\n", "polygons", ".", "append", "(", "Polygon", "(", "poly", ")", ")", "\n", "color", ".", "append", "(", "c", ")", "\n", "", "", "else", ":", "\n", "# mask", "\n", "                        ", "t", "=", "self", ".", "imgs", "[", "ann", "[", "'image_id'", "]", "]", "\n", "if", "type", "(", "ann", "[", "'segmentation'", "]", "[", "'counts'", "]", ")", "==", "list", ":", "\n", "                            ", "rle", "=", "maskUtils", ".", "frPyObjects", "(", "[", "ann", "[", "'segmentation'", "]", "]", ",", "t", "[", "'height'", "]", ",", "t", "[", "'width'", "]", ")", "\n", "", "else", ":", "\n", "                            ", "rle", "=", "[", "ann", "[", "'segmentation'", "]", "]", "\n", "", "m", "=", "maskUtils", ".", "decode", "(", "rle", ")", "\n", "img", "=", "np", ".", "ones", "(", "(", "m", ".", "shape", "[", "0", "]", ",", "m", ".", "shape", "[", "1", "]", ",", "3", ")", ")", "\n", "if", "ann", "[", "'iscrowd'", "]", "==", "1", ":", "\n", "                            ", "color_mask", "=", "np", ".", "array", "(", "[", "2.0", ",", "166.0", ",", "101.0", "]", ")", "/", "255", "\n", "", "if", "ann", "[", "'iscrowd'", "]", "==", "0", ":", "\n", "                            ", "color_mask", "=", "np", ".", "random", ".", "random", "(", "(", "1", ",", "3", ")", ")", ".", "tolist", "(", ")", "[", "0", "]", "\n", "", "for", "i", "in", "range", "(", "3", ")", ":", "\n", "                            ", "img", "[", ":", ",", ":", ",", "i", "]", "=", "color_mask", "[", "i", "]", "\n", "", "ax", ".", "imshow", "(", "np", ".", "dstack", "(", "(", "img", ",", "m", "*", "0.5", ")", ")", ")", "\n", "", "", "if", "'keypoints'", "in", "ann", "and", "type", "(", "ann", "[", "'keypoints'", "]", ")", "==", "list", ":", "\n", "# turn skeleton into zero-based index", "\n", "                    ", "sks", "=", "np", ".", "array", "(", "self", ".", "loadCats", "(", "ann", "[", "'category_id'", "]", ")", "[", "0", "]", "[", "'skeleton'", "]", ")", "-", "1", "\n", "kp", "=", "np", ".", "array", "(", "ann", "[", "'keypoints'", "]", ")", "\n", "x", "=", "kp", "[", "0", ":", ":", "3", "]", "\n", "y", "=", "kp", "[", "1", ":", ":", "3", "]", "\n", "v", "=", "kp", "[", "2", ":", ":", "3", "]", "\n", "for", "sk", "in", "sks", ":", "\n", "                        ", "if", "np", ".", "all", "(", "v", "[", "sk", "]", ">", "0", ")", ":", "\n", "                            ", "plt", ".", "plot", "(", "x", "[", "sk", "]", ",", "y", "[", "sk", "]", ",", "linewidth", "=", "3", ",", "color", "=", "c", ")", "\n", "", "", "plt", ".", "plot", "(", "x", "[", "v", ">", "0", "]", ",", "y", "[", "v", ">", "0", "]", ",", "'o'", ",", "markersize", "=", "8", ",", "markerfacecolor", "=", "c", ",", "markeredgecolor", "=", "'k'", ",", "markeredgewidth", "=", "2", ")", "\n", "plt", ".", "plot", "(", "x", "[", "v", ">", "1", "]", ",", "y", "[", "v", ">", "1", "]", ",", "'o'", ",", "markersize", "=", "8", ",", "markerfacecolor", "=", "c", ",", "markeredgecolor", "=", "c", ",", "markeredgewidth", "=", "2", ")", "\n", "\n", "", "if", "draw_bbox", ":", "\n", "                    ", "[", "bbox_x", ",", "bbox_y", ",", "bbox_w", ",", "bbox_h", "]", "=", "ann", "[", "'bbox'", "]", "\n", "poly", "=", "[", "[", "bbox_x", ",", "bbox_y", "]", ",", "[", "bbox_x", ",", "bbox_y", "+", "bbox_h", "]", ",", "[", "bbox_x", "+", "bbox_w", ",", "bbox_y", "+", "bbox_h", "]", ",", "[", "bbox_x", "+", "bbox_w", ",", "bbox_y", "]", "]", "\n", "np_poly", "=", "np", ".", "array", "(", "poly", ")", ".", "reshape", "(", "(", "4", ",", "2", ")", ")", "\n", "polygons", ".", "append", "(", "Polygon", "(", "np_poly", ")", ")", "\n", "color", ".", "append", "(", "c", ")", "\n", "\n", "", "", "p", "=", "PatchCollection", "(", "polygons", ",", "facecolor", "=", "color", ",", "linewidths", "=", "0", ",", "alpha", "=", "0.4", ")", "\n", "ax", ".", "add_collection", "(", "p", ")", "\n", "p", "=", "PatchCollection", "(", "polygons", ",", "facecolor", "=", "'none'", ",", "edgecolors", "=", "color", ",", "linewidths", "=", "2", ")", "\n", "ax", ".", "add_collection", "(", "p", ")", "\n", "", "elif", "datasetType", "==", "'captions'", ":", "\n", "            ", "for", "ann", "in", "anns", ":", "\n", "                ", "print", "(", "ann", "[", "'caption'", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.loadRes": [[300, 361], ["COCO_tool.COCO", "print", "time.time", "print", "COCO_tool.COCO.createIndex", "type", "set", "enumerate", "type", "open", "json.load", "type", "COCO_tool.COCO.loadNumpyAnnotations", "set", "set", "set", "set", "copy.deepcopy", "enumerate", "type", "COCO_tool.COCO.getImgIds", "copy.deepcopy", "enumerate", "time.time", "pycocotools.mask.area", "copy.deepcopy", "enumerate", "pycocotools.mask.toBbox", "numpy.min", "numpy.max", "numpy.min", "numpy.max"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.createIndex", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.loadNumpyAnnotations", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.getImgIds", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "", "", "def", "loadRes", "(", "self", ",", "resFile", ")", ":", "\n", "        ", "\"\"\"\n        Load result file and return a result api object.\n        :param   resFile (str)     : file name of result file\n        :return: res (obj)         : result api object\n        \"\"\"", "\n", "res", "=", "COCO", "(", ")", "\n", "res", ".", "dataset", "[", "'images'", "]", "=", "[", "img", "for", "img", "in", "self", ".", "dataset", "[", "'images'", "]", "]", "\n", "\n", "print", "(", "'Loading and preparing results...'", ")", "\n", "tic", "=", "time", ".", "time", "(", ")", "\n", "if", "type", "(", "resFile", ")", "==", "str", "or", "(", "PYTHON_VERSION", "==", "2", "and", "type", "(", "resFile", ")", "==", "unicode", ")", ":", "\n", "            ", "with", "open", "(", "resFile", ")", "as", "f", ":", "\n", "                ", "anns", "=", "json", ".", "load", "(", "f", ")", "\n", "", "", "elif", "type", "(", "resFile", ")", "==", "np", ".", "ndarray", ":", "\n", "            ", "anns", "=", "self", ".", "loadNumpyAnnotations", "(", "resFile", ")", "\n", "", "else", ":", "\n", "            ", "anns", "=", "resFile", "\n", "", "assert", "type", "(", "anns", ")", "==", "list", ",", "'results in not an array of objects'", "\n", "annsImgIds", "=", "[", "ann", "[", "'image_id'", "]", "for", "ann", "in", "anns", "]", "\n", "assert", "set", "(", "annsImgIds", ")", "==", "(", "set", "(", "annsImgIds", ")", "&", "set", "(", "self", ".", "getImgIds", "(", ")", ")", ")", ",", "'Results do not correspond to current coco set'", "\n", "if", "'caption'", "in", "anns", "[", "0", "]", ":", "\n", "            ", "imgIds", "=", "set", "(", "[", "img", "[", "'id'", "]", "for", "img", "in", "res", ".", "dataset", "[", "'images'", "]", "]", ")", "&", "set", "(", "[", "ann", "[", "'image_id'", "]", "for", "ann", "in", "anns", "]", ")", "\n", "res", ".", "dataset", "[", "'images'", "]", "=", "[", "img", "for", "img", "in", "res", ".", "dataset", "[", "'images'", "]", "if", "img", "[", "'id'", "]", "in", "imgIds", "]", "\n", "for", "id", ",", "ann", "in", "enumerate", "(", "anns", ")", ":", "\n", "                ", "ann", "[", "'id'", "]", "=", "id", "+", "1", "\n", "", "", "elif", "'bbox'", "in", "anns", "[", "0", "]", "and", "not", "anns", "[", "0", "]", "[", "'bbox'", "]", "==", "[", "]", ":", "\n", "            ", "res", ".", "dataset", "[", "'categories'", "]", "=", "copy", ".", "deepcopy", "(", "self", ".", "dataset", "[", "'categories'", "]", ")", "\n", "for", "id", ",", "ann", "in", "enumerate", "(", "anns", ")", ":", "\n", "                ", "bb", "=", "ann", "[", "'bbox'", "]", "\n", "x1", ",", "x2", ",", "y1", ",", "y2", "=", "[", "bb", "[", "0", "]", ",", "bb", "[", "0", "]", "+", "bb", "[", "2", "]", ",", "bb", "[", "1", "]", ",", "bb", "[", "1", "]", "+", "bb", "[", "3", "]", "]", "\n", "if", "not", "'segmentation'", "in", "ann", ":", "\n", "                    ", "ann", "[", "'segmentation'", "]", "=", "[", "[", "x1", ",", "y1", ",", "x1", ",", "y2", ",", "x2", ",", "y2", ",", "x2", ",", "y1", "]", "]", "\n", "", "ann", "[", "'area'", "]", "=", "bb", "[", "2", "]", "*", "bb", "[", "3", "]", "\n", "ann", "[", "'id'", "]", "=", "id", "+", "1", "\n", "ann", "[", "'iscrowd'", "]", "=", "0", "\n", "", "", "elif", "'segmentation'", "in", "anns", "[", "0", "]", ":", "\n", "            ", "res", ".", "dataset", "[", "'categories'", "]", "=", "copy", ".", "deepcopy", "(", "self", ".", "dataset", "[", "'categories'", "]", ")", "\n", "for", "id", ",", "ann", "in", "enumerate", "(", "anns", ")", ":", "\n", "# now only support compressed RLE format as segmentation results", "\n", "                ", "ann", "[", "'area'", "]", "=", "maskUtils", ".", "area", "(", "ann", "[", "'segmentation'", "]", ")", "\n", "if", "not", "'bbox'", "in", "ann", ":", "\n", "                    ", "ann", "[", "'bbox'", "]", "=", "maskUtils", ".", "toBbox", "(", "ann", "[", "'segmentation'", "]", ")", "\n", "", "ann", "[", "'id'", "]", "=", "id", "+", "1", "\n", "ann", "[", "'iscrowd'", "]", "=", "0", "\n", "", "", "elif", "'keypoints'", "in", "anns", "[", "0", "]", ":", "\n", "            ", "res", ".", "dataset", "[", "'categories'", "]", "=", "copy", ".", "deepcopy", "(", "self", ".", "dataset", "[", "'categories'", "]", ")", "\n", "for", "id", ",", "ann", "in", "enumerate", "(", "anns", ")", ":", "\n", "                ", "s", "=", "ann", "[", "'keypoints'", "]", "\n", "x", "=", "s", "[", "0", ":", ":", "3", "]", "\n", "y", "=", "s", "[", "1", ":", ":", "3", "]", "\n", "x0", ",", "x1", ",", "y0", ",", "y1", "=", "np", ".", "min", "(", "x", ")", ",", "np", ".", "max", "(", "x", ")", ",", "np", ".", "min", "(", "y", ")", ",", "np", ".", "max", "(", "y", ")", "\n", "ann", "[", "'area'", "]", "=", "(", "x1", "-", "x0", ")", "*", "(", "y1", "-", "y0", ")", "\n", "ann", "[", "'id'", "]", "=", "id", "+", "1", "\n", "ann", "[", "'bbox'", "]", "=", "[", "x0", ",", "y0", ",", "x1", "-", "x0", ",", "y1", "-", "y0", "]", "\n", "", "", "print", "(", "'DONE (t={:0.2f}s)'", ".", "format", "(", "time", ".", "time", "(", ")", "-", "tic", ")", ")", "\n", "\n", "res", ".", "dataset", "[", "'annotations'", "]", "=", "anns", "\n", "res", ".", "createIndex", "(", ")", "\n", "return", "res", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.download": [[362, 385], ["len", "enumerate", "print", "len", "COCO_tool.COCO.imgs.values", "COCO_tool.COCO.loadImgs", "os.path.exists", "os.makedirs", "time.time", "os.path.join", "print", "os.path.exists", "urlretrieve", "time.time"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.loadImgs"], ["", "def", "download", "(", "self", ",", "tarDir", "=", "None", ",", "imgIds", "=", "[", "]", ")", ":", "\n", "        ", "'''\n        Download COCO images from mscoco.org server.\n        :param tarDir (str): COCO results directory name\n               imgIds (list): images to be downloaded\n        :return:\n        '''", "\n", "if", "tarDir", "is", "None", ":", "\n", "            ", "print", "(", "'Please specify target directory'", ")", "\n", "return", "-", "1", "\n", "", "if", "len", "(", "imgIds", ")", "==", "0", ":", "\n", "            ", "imgs", "=", "self", ".", "imgs", ".", "values", "(", ")", "\n", "", "else", ":", "\n", "            ", "imgs", "=", "self", ".", "loadImgs", "(", "imgIds", ")", "\n", "", "N", "=", "len", "(", "imgs", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "tarDir", ")", ":", "\n", "            ", "os", ".", "makedirs", "(", "tarDir", ")", "\n", "", "for", "i", ",", "img", "in", "enumerate", "(", "imgs", ")", ":", "\n", "            ", "tic", "=", "time", ".", "time", "(", ")", "\n", "fname", "=", "os", ".", "path", ".", "join", "(", "tarDir", ",", "img", "[", "'file_name'", "]", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "fname", ")", ":", "\n", "                ", "urlretrieve", "(", "img", "[", "'coco_url'", "]", ",", "fname", ")", "\n", "", "print", "(", "'downloaded {}/{} images (t={:0.1f}s)'", ".", "format", "(", "i", ",", "N", ",", "time", ".", "time", "(", ")", "-", "tic", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.loadNumpyAnnotations": [[386, 408], ["print", "print", "range", "type", "print", "int", "int"], "methods", ["None"], ["", "", "def", "loadNumpyAnnotations", "(", "self", ",", "data", ")", ":", "\n", "        ", "\"\"\"\n        Convert result data from a numpy array [Nx7] where each row contains {imageID,x1,y1,w,h,score,class}\n        :param  data (numpy.ndarray)\n        :return: annotations (python nested list)\n        \"\"\"", "\n", "print", "(", "'Converting ndarray to lists...'", ")", "\n", "assert", "(", "type", "(", "data", ")", "==", "np", ".", "ndarray", ")", "\n", "print", "(", "data", ".", "shape", ")", "\n", "assert", "(", "data", ".", "shape", "[", "1", "]", "==", "7", ")", "\n", "N", "=", "data", ".", "shape", "[", "0", "]", "\n", "ann", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "N", ")", ":", "\n", "            ", "if", "i", "%", "1000000", "==", "0", ":", "\n", "                ", "print", "(", "'{}/{}'", ".", "format", "(", "i", ",", "N", ")", ")", "\n", "", "ann", "+=", "[", "{", "\n", "'image_id'", ":", "int", "(", "data", "[", "i", ",", "0", "]", ")", ",", "\n", "'bbox'", ":", "[", "data", "[", "i", ",", "1", "]", ",", "data", "[", "i", ",", "2", "]", ",", "data", "[", "i", ",", "3", "]", ",", "data", "[", "i", ",", "4", "]", "]", ",", "\n", "'score'", ":", "data", "[", "i", ",", "5", "]", ",", "\n", "'category_id'", ":", "int", "(", "data", "[", "i", ",", "6", "]", ")", ",", "\n", "}", "]", "\n", "", "return", "ann", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.annToRLE": [[409, 429], ["type", "pycocotools.mask.frPyObjects", "pycocotools.mask.merge", "type", "pycocotools.mask.frPyObjects"], "methods", ["None"], ["", "def", "annToRLE", "(", "self", ",", "ann", ")", ":", "\n", "        ", "\"\"\"\n        Convert annotation which can be polygons, uncompressed RLE to RLE.\n        :return: binary mask (numpy 2D array)\n        \"\"\"", "\n", "t", "=", "self", ".", "imgs", "[", "ann", "[", "'image_id'", "]", "]", "\n", "h", ",", "w", "=", "t", "[", "'height'", "]", ",", "t", "[", "'width'", "]", "\n", "segm", "=", "ann", "[", "'segmentation'", "]", "\n", "if", "type", "(", "segm", ")", "==", "list", ":", "\n", "# polygon -- a single object might consist of multiple parts", "\n", "# we merge all parts into one mask rle code", "\n", "            ", "rles", "=", "maskUtils", ".", "frPyObjects", "(", "segm", ",", "h", ",", "w", ")", "\n", "rle", "=", "maskUtils", ".", "merge", "(", "rles", ")", "\n", "", "elif", "type", "(", "segm", "[", "'counts'", "]", ")", "==", "list", ":", "\n", "# uncompressed RLE", "\n", "            ", "rle", "=", "maskUtils", ".", "frPyObjects", "(", "segm", ",", "h", ",", "w", ")", "\n", "", "else", ":", "\n", "# rle", "\n", "            ", "rle", "=", "ann", "[", "'segmentation'", "]", "\n", "", "return", "rle", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.annToMask": [[430, 438], ["COCO_tool.COCO.annToRLE", "pycocotools.mask.decode"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.annToRLE"], ["", "def", "annToMask", "(", "self", ",", "ann", ")", ":", "\n", "        ", "\"\"\"\n        Convert annotation which can be polygons, uncompressed RLE, or RLE to binary mask.\n        :return: binary mask (numpy 2D array)\n        \"\"\"", "\n", "rle", "=", "self", ".", "annToRLE", "(", "ann", ")", "\n", "m", "=", "maskUtils", ".", "decode", "(", "rle", ")", "\n", "return", "m", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool._isArrayLike": [[66, 68], ["hasattr", "hasattr"], "function", ["None"], ["", "def", "_isArrayLike", "(", "obj", ")", ":", "\n", "    ", "return", "hasattr", "(", "obj", ",", "'__iter__'", ")", "and", "hasattr", "(", "obj", ",", "'__len__'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_video_dataset.BaseVideoDataset.__init__": [[8, 21], ["None"], "methods", ["None"], ["\n", "def", "__init__", "(", "self", ",", "name", ",", "root", ",", "image_loader", "=", "jpeg4py_loader_w_failsafe", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root - The root path to the dataset\n            image_loader (jpeg4py_loader) -  The function to read the images. jpeg4py (https://github.com/ajkxyz/jpeg4py)\n                                            is used by default.\n        \"\"\"", "\n", "self", ".", "name", "=", "name", "\n", "self", ".", "root", "=", "root", "\n", "self", ".", "image_loader", "=", "image_loader", "\n", "\n", "self", ".", "sequence_list", "=", "[", "]", "# Contains the list of sequences.", "\n", "self", ".", "class_list", "=", "[", "]", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_video_dataset.BaseVideoDataset.__len__": [[22, 28], ["base_video_dataset.BaseVideoDataset.get_num_sequences"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_num_sequences"], ["\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "\"\"\" Returns size of the dataset\n        returns:\n            int - number of samples in the dataset\n        \"\"\"", "\n", "return", "self", ".", "get_num_sequences", "(", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_video_dataset.BaseVideoDataset.__getitem__": [[29, 33], ["None"], "methods", ["None"], ["\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "\"\"\" Not to be used! Check get_frames() instead.\n        \"\"\"", "\n", "return", "None", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_video_dataset.BaseVideoDataset.is_video_sequence": [[34, 41], ["None"], "methods", ["None"], ["\n", "", "def", "is_video_sequence", "(", "self", ")", ":", "\n", "        ", "\"\"\" Returns whether the dataset is a video dataset or an image dataset\n\n        returns:\n            bool - True if a video dataset\n        \"\"\"", "\n", "return", "True", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_video_dataset.BaseVideoDataset.is_synthetic_video_dataset": [[42, 49], ["None"], "methods", ["None"], ["\n", "", "def", "is_synthetic_video_dataset", "(", "self", ")", ":", "\n", "        ", "\"\"\" Returns whether the dataset contains real videos or synthetic\n\n        returns:\n            bool - True if a video dataset\n        \"\"\"", "\n", "return", "False", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_video_dataset.BaseVideoDataset.get_name": [[50, 57], ["None"], "methods", ["None"], ["\n", "", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "\"\"\" Name of the dataset\n\n        returns:\n            string - Name of the dataset\n        \"\"\"", "\n", "raise", "NotImplementedError", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_video_dataset.BaseVideoDataset.get_num_sequences": [[58, 64], ["len"], "methods", ["None"], ["\n", "", "def", "get_num_sequences", "(", "self", ")", ":", "\n", "        ", "\"\"\" Number of sequences in a dataset\n\n        returns:\n            int - number of sequences in the dataset.\"\"\"", "\n", "return", "len", "(", "self", ".", "sequence_list", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_video_dataset.BaseVideoDataset.has_class_info": [[65, 67], ["None"], "methods", ["None"], ["\n", "", "def", "has_class_info", "(", "self", ")", ":", "\n", "        ", "return", "False", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_video_dataset.BaseVideoDataset.has_occlusion_info": [[68, 70], ["None"], "methods", ["None"], ["\n", "", "def", "has_occlusion_info", "(", "self", ")", ":", "\n", "        ", "return", "False", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_video_dataset.BaseVideoDataset.get_num_classes": [[71, 73], ["len"], "methods", ["None"], ["\n", "", "def", "get_num_classes", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "class_list", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_video_dataset.BaseVideoDataset.get_class_list": [[74, 76], ["None"], "methods", ["None"], ["\n", "", "def", "get_class_list", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "class_list", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_video_dataset.BaseVideoDataset.get_sequences_in_class": [[77, 79], ["None"], "methods", ["None"], ["\n", "", "def", "get_sequences_in_class", "(", "self", ",", "class_name", ")", ":", "\n", "        ", "raise", "NotImplementedError", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_video_dataset.BaseVideoDataset.has_segmentation_info": [[80, 82], ["None"], "methods", ["None"], ["\n", "", "def", "has_segmentation_info", "(", "self", ")", ":", "\n", "        ", "return", "False", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_video_dataset.BaseVideoDataset.get_sequence_info": [[83, 93], ["None"], "methods", ["None"], ["\n", "", "def", "get_sequence_info", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "\"\"\" Returns information about a particular sequences,\n\n        args:\n            seq_id - index of the sequence\n\n        returns:\n            Dict\n            \"\"\"", "\n", "raise", "NotImplementedError", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_video_dataset.BaseVideoDataset.get_frames": [[94, 109], ["None"], "methods", ["None"], ["\n", "", "def", "get_frames", "(", "self", ",", "seq_id", ",", "frame_ids", ",", "anno", "=", "None", ")", ":", "\n", "        ", "\"\"\" Get a set of frames from a particular sequence\n\n        args:\n            seq_id      - index of sequence\n            frame_ids   - a list of frame numbers\n            anno(None)  - The annotation for the sequence (see get_sequence_info). If None, they will be loaded.\n\n        returns:\n            list - List of frames corresponding to frame_ids\n            list - List of dicts for each frame\n            dict - A dict containing meta information about the sequence, e.g. class of the target object.\n\n        \"\"\"", "\n", "raise", "NotImplementedError", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.ImagenetVID.__init__": [[30, 61], ["base_video_dataset.BaseVideoDataset.__init__", "os.path.join", "os.path.isfile", "imagenetvid.ImagenetVID._process_anno", "ltr.admin.environment.env_settings", "open", "json.load", "open", "json.dump", "len", "imagenetvid.get_target_to_image_ratio"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.ImagenetVID._process_anno", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.get_target_to_image_ratio"], ["        ", "\"\"\"\n        args:\n            root - path to the imagenet vid dataset.\n            image_loader (default_image_loader) -  The function to read the images. If installed,\n                                                   jpeg4py (https://github.com/ajkxyz/jpeg4py) is used by default. Else,\n                                                   opencv's imread is used.\n            min_length - Minimum allowed sequence length.\n            max_target_area - max allowed ratio between target area and image area. Can be used to filter out targets\n                                which cover complete image.\n        \"\"\"", "\n", "root", "=", "env_settings", "(", ")", ".", "imagenet_dir", "if", "root", "is", "None", "else", "root", "\n", "super", "(", ")", ".", "__init__", "(", "\"imagenetvid\"", ",", "root", ",", "image_loader", ")", "\n", "\n", "cache_file", "=", "os", ".", "path", ".", "join", "(", "root", ",", "'cache.json'", ")", "\n", "if", "os", ".", "path", ".", "isfile", "(", "cache_file", ")", ":", "\n", "# If available, load the pre-processed cache file containing meta-info for each sequence", "\n", "            ", "with", "open", "(", "cache_file", ",", "'r'", ")", "as", "f", ":", "\n", "                ", "sequence_list_dict", "=", "json", ".", "load", "(", "f", ")", "\n", "\n", "", "self", ".", "sequence_list", "=", "sequence_list_dict", "\n", "", "else", ":", "\n", "# Else process the imagenet annotations and generate the cache file", "\n", "            ", "self", ".", "sequence_list", "=", "self", ".", "_process_anno", "(", "root", ")", "\n", "\n", "with", "open", "(", "cache_file", ",", "'w'", ")", "as", "f", ":", "\n", "                ", "json", ".", "dump", "(", "self", ".", "sequence_list", ",", "f", ")", "\n", "\n", "# Filter the sequences based on min_length and max_target_area in the first frame", "\n", "", "", "self", ".", "sequence_list", "=", "[", "x", "for", "x", "in", "self", ".", "sequence_list", "if", "len", "(", "x", "[", "'anno'", "]", ")", ">=", "min_length", "and", "\n", "get_target_to_image_ratio", "(", "x", ")", "<", "max_target_area", "]", "\n", "\n", "", "def", "get_name", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.ImagenetVID.get_name": [[62, 64], ["None"], "methods", ["None"], ["        ", "return", "'imagenetvid'", "\n", "\n", "", "def", "get_num_sequences", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.ImagenetVID.get_num_sequences": [[65, 67], ["len"], "methods", ["None"], ["        ", "return", "len", "(", "self", ".", "sequence_list", ")", "\n", "\n", "", "def", "get_sequence_info", "(", "self", ",", "seq_id", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.ImagenetVID.get_sequence_info": [[68, 73], ["torch.Tensor", "torch.ByteTensor", "valid.byte"], "methods", ["None"], ["        ", "bb_anno", "=", "torch", ".", "Tensor", "(", "self", ".", "sequence_list", "[", "seq_id", "]", "[", "'anno'", "]", ")", "\n", "valid", "=", "(", "bb_anno", "[", ":", ",", "2", "]", ">", "0", ")", "&", "(", "bb_anno", "[", ":", ",", "3", "]", ">", "0", ")", "\n", "visible", "=", "torch", ".", "ByteTensor", "(", "self", ".", "sequence_list", "[", "seq_id", "]", "[", "'target_visible'", "]", ")", "&", "valid", ".", "byte", "(", ")", "\n", "return", "{", "'bbox'", ":", "bb_anno", ",", "'valid'", ":", "valid", ",", "'visible'", ":", "visible", "}", "\n", "\n", "", "def", "_get_frame", "(", "self", ",", "sequence", ",", "frame_id", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.ImagenetVID._get_frame": [[74, 82], ["os.path.join", "imagenetvid.ImagenetVID.image_loader"], "methods", ["None"], ["        ", "set_name", "=", "'ILSVRC2015_VID_train_{:04d}'", ".", "format", "(", "sequence", "[", "'set_id'", "]", ")", "\n", "vid_name", "=", "'ILSVRC2015_train_{:08d}'", ".", "format", "(", "sequence", "[", "'vid_id'", "]", ")", "\n", "frame_number", "=", "frame_id", "+", "sequence", "[", "'start_frame'", "]", "\n", "frame_path", "=", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "'Data'", ",", "'VID'", ",", "'train'", ",", "set_name", ",", "vid_name", ",", "\n", "'{:06d}.JPEG'", ".", "format", "(", "frame_number", ")", ")", "\n", "return", "self", ".", "image_loader", "(", "frame_path", ")", "\n", "\n", "", "def", "get_frames", "(", "self", ",", "seq_id", ",", "frame_ids", ",", "anno", "=", "None", ")", ":", "\n", "        ", "sequence", "=", "self", ".", "sequence_list", "[", "seq_id", "]", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.ImagenetVID.get_frames": [[83, 104], ["imagenetvid.ImagenetVID.items", "collections.OrderedDict", "imagenetvid.ImagenetVID._get_frame", "imagenetvid.ImagenetVID.get_sequence_info", "value[].clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.ImagenetVID._get_frame", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_sequence_info"], ["\n", "frame_list", "=", "[", "self", ".", "_get_frame", "(", "sequence", ",", "f", ")", "for", "f", "in", "frame_ids", "]", "\n", "\n", "if", "anno", "is", "None", ":", "\n", "            ", "anno", "=", "self", ".", "get_sequence_info", "(", "seq_id", ")", "\n", "\n", "# Create anno dict", "\n", "", "anno_frames", "=", "{", "}", "\n", "for", "key", ",", "value", "in", "anno", ".", "items", "(", ")", ":", "\n", "            ", "anno_frames", "[", "key", "]", "=", "[", "value", "[", "f_id", ",", "...", "]", ".", "clone", "(", ")", "for", "f_id", "in", "frame_ids", "]", "\n", "\n", "# added the class info to the meta info", "\n", "", "object_meta", "=", "OrderedDict", "(", "{", "'object_class'", ":", "sequence", "[", "'class_name'", "]", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "\n", "return", "frame_list", ",", "anno_frames", ",", "object_meta", "\n", "\n", "", "def", "_process_anno", "(", "self", ",", "root", ")", ":", "\n", "# Builds individual tracklets", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.ImagenetVID._process_anno": [[105, 162], ["os.path.join", "sorted", "os.listdir", "int", "sorted", "os.listdir", "int", "sorted", "xml.parse", "enumerate", "tracklets.items", "set.split", "os.path.join", "os.listdir", "os.path.join", "int", "int", "xml.ElementTree().findall", "range", "all_sequences.append", "vid.split", "os.path.join", "len", "xml.parse.find", "xml.parse.find", "xml.ElementTree", "target.find", "int", "int", "int", "int", "tracklet_anno.append", "target_visible.append", "os.path.join", "target.find", "target.find", "target.find", "target.find", "target.find", "target.find", "target.find"], "methods", ["None"], ["        ", "base_vid_anno_path", "=", "os", ".", "path", ".", "join", "(", "root", ",", "'Annotations'", ",", "'VID'", ",", "'train'", ")", "\n", "\n", "all_sequences", "=", "[", "]", "\n", "for", "set", "in", "sorted", "(", "os", ".", "listdir", "(", "base_vid_anno_path", ")", ")", ":", "\n", "            ", "set_id", "=", "int", "(", "set", ".", "split", "(", "'_'", ")", "[", "-", "1", "]", ")", "\n", "for", "vid", "in", "sorted", "(", "os", ".", "listdir", "(", "os", ".", "path", ".", "join", "(", "base_vid_anno_path", ",", "set", ")", ")", ")", ":", "\n", "\n", "                ", "vid_id", "=", "int", "(", "vid", ".", "split", "(", "'_'", ")", "[", "-", "1", "]", ")", "\n", "anno_files", "=", "sorted", "(", "os", ".", "listdir", "(", "os", ".", "path", ".", "join", "(", "base_vid_anno_path", ",", "set", ",", "vid", ")", ")", ")", "\n", "\n", "frame1_anno", "=", "ET", ".", "parse", "(", "os", ".", "path", ".", "join", "(", "base_vid_anno_path", ",", "set", ",", "vid", ",", "anno_files", "[", "0", "]", ")", ")", "\n", "image_size", "=", "[", "int", "(", "frame1_anno", ".", "find", "(", "'size/width'", ")", ".", "text", ")", ",", "int", "(", "frame1_anno", ".", "find", "(", "'size/height'", ")", ".", "text", ")", "]", "\n", "\n", "objects", "=", "[", "ET", ".", "ElementTree", "(", "file", "=", "os", ".", "path", ".", "join", "(", "base_vid_anno_path", ",", "set", ",", "vid", ",", "f", ")", ")", ".", "findall", "(", "'object'", ")", "\n", "for", "f", "in", "anno_files", "]", "\n", "\n", "tracklets", "=", "{", "}", "\n", "\n", "# Find all tracklets along with start frame", "\n", "for", "f_id", ",", "all_targets", "in", "enumerate", "(", "objects", ")", ":", "\n", "                    ", "for", "target", "in", "all_targets", ":", "\n", "                        ", "tracklet_id", "=", "target", ".", "find", "(", "'trackid'", ")", ".", "text", "\n", "if", "tracklet_id", "not", "in", "tracklets", ":", "\n", "                            ", "tracklets", "[", "tracklet_id", "]", "=", "f_id", "\n", "\n", "", "", "", "for", "tracklet_id", ",", "tracklet_start", "in", "tracklets", ".", "items", "(", ")", ":", "\n", "                    ", "tracklet_anno", "=", "[", "]", "\n", "target_visible", "=", "[", "]", "\n", "class_name_id", "=", "None", "\n", "\n", "for", "f_id", "in", "range", "(", "tracklet_start", ",", "len", "(", "objects", ")", ")", ":", "\n", "                        ", "found", "=", "False", "\n", "for", "target", "in", "objects", "[", "f_id", "]", ":", "\n", "                            ", "if", "target", ".", "find", "(", "'trackid'", ")", ".", "text", "==", "tracklet_id", ":", "\n", "                                ", "if", "not", "class_name_id", ":", "\n", "                                    ", "class_name_id", "=", "target", ".", "find", "(", "'name'", ")", ".", "text", "\n", "", "x1", "=", "int", "(", "target", ".", "find", "(", "'bndbox/xmin'", ")", ".", "text", ")", "\n", "y1", "=", "int", "(", "target", ".", "find", "(", "'bndbox/ymin'", ")", ".", "text", ")", "\n", "x2", "=", "int", "(", "target", ".", "find", "(", "'bndbox/xmax'", ")", ".", "text", ")", "\n", "y2", "=", "int", "(", "target", ".", "find", "(", "'bndbox/ymax'", ")", ".", "text", ")", "\n", "\n", "tracklet_anno", ".", "append", "(", "[", "x1", ",", "y1", ",", "x2", "-", "x1", ",", "y2", "-", "y1", "]", ")", "\n", "target_visible", ".", "append", "(", "target", ".", "find", "(", "'occluded'", ")", ".", "text", "==", "'0'", ")", "\n", "\n", "found", "=", "True", "\n", "break", "\n", "", "", "if", "not", "found", ":", "\n", "                            ", "break", "\n", "\n", "", "", "new_sequence", "=", "{", "'set_id'", ":", "set_id", ",", "'vid_id'", ":", "vid_id", ",", "'class_name'", ":", "class_name_id", ",", "\n", "'start_frame'", ":", "tracklet_start", ",", "'anno'", ":", "tracklet_anno", ",", "\n", "'target_visible'", ":", "target_visible", ",", "'image_size'", ":", "image_size", "}", "\n", "all_sequences", ".", "append", "(", "new_sequence", ")", "\n", "\n", "", "", "", "return", "all_sequences", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.imagenetvid.get_target_to_image_ratio": [[12, 16], ["torch.Tensor", "torch.Tensor", "anno[].prod", "torch.Tensor.prod"], "function", ["None"], ["    ", "anno", "=", "torch", ".", "Tensor", "(", "seq", "[", "'anno'", "]", ")", "\n", "img_sz", "=", "torch", ".", "Tensor", "(", "seq", "[", "'image_size'", "]", ")", "\n", "return", "(", "anno", "[", "0", ",", "2", ":", "4", "]", ".", "prod", "(", ")", "/", "(", "img_sz", ".", "prod", "(", ")", ")", ")", ".", "sqrt", "(", ")", "\n", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_image_dataset.BaseImageDataset.__init__": [[8, 21], ["None"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "name", ",", "root", ",", "image_loader", "=", "jpeg4py_loader", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root - The root path to the dataset\n            image_loader (jpeg4py_loader) -  The function to read the images. jpeg4py (https://github.com/ajkxyz/jpeg4py)\n                                            is used by default.\n        \"\"\"", "\n", "self", ".", "name", "=", "name", "\n", "self", ".", "root", "=", "root", "\n", "self", ".", "image_loader", "=", "image_loader", "\n", "\n", "self", ".", "image_list", "=", "[", "]", "# Contains the list of sequences.", "\n", "self", ".", "class_list", "=", "[", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_image_dataset.BaseImageDataset.__len__": [[22, 28], ["base_image_dataset.BaseImageDataset.get_num_images"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_image_dataset.BaseImageDataset.get_num_images"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "\"\"\" Returns size of the dataset\n        returns:\n            int - number of samples in the dataset\n        \"\"\"", "\n", "return", "self", ".", "get_num_images", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_image_dataset.BaseImageDataset.__getitem__": [[29, 33], ["None"], "methods", ["None"], ["", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "\"\"\" Not to be used! Check get_frames() instead.\n        \"\"\"", "\n", "return", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_image_dataset.BaseImageDataset.get_name": [[34, 41], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "\"\"\" Name of the dataset\n\n        returns:\n            string - Name of the dataset\n        \"\"\"", "\n", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_image_dataset.BaseImageDataset.get_num_images": [[42, 48], ["len"], "methods", ["None"], ["", "def", "get_num_images", "(", "self", ")", ":", "\n", "        ", "\"\"\" Number of sequences in a dataset\n\n        returns:\n            int - number of sequences in the dataset.\"\"\"", "\n", "return", "len", "(", "self", ".", "image_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_image_dataset.BaseImageDataset.has_class_info": [[49, 51], ["None"], "methods", ["None"], ["", "def", "has_class_info", "(", "self", ")", ":", "\n", "        ", "return", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_image_dataset.BaseImageDataset.get_class_name": [[52, 54], ["None"], "methods", ["None"], ["", "def", "get_class_name", "(", "self", ",", "image_id", ")", ":", "\n", "        ", "return", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_image_dataset.BaseImageDataset.get_num_classes": [[55, 57], ["len"], "methods", ["None"], ["", "def", "get_num_classes", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "class_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_image_dataset.BaseImageDataset.get_class_list": [[58, 60], ["None"], "methods", ["None"], ["", "def", "get_class_list", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "class_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_image_dataset.BaseImageDataset.get_images_in_class": [[61, 63], ["None"], "methods", ["None"], ["", "def", "get_images_in_class", "(", "self", ",", "class_name", ")", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_image_dataset.BaseImageDataset.has_segmentation_info": [[64, 66], ["None"], "methods", ["None"], ["", "def", "has_segmentation_info", "(", "self", ")", ":", "\n", "        ", "return", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_image_dataset.BaseImageDataset.get_image_info": [[67, 77], ["None"], "methods", ["None"], ["", "def", "get_image_info", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "\"\"\" Returns information about a particular image,\n\n        args:\n            seq_id - index of the image\n\n        returns:\n            Dict\n            \"\"\"", "\n", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_image_dataset.BaseImageDataset.get_image": [[78, 92], ["None"], "methods", ["None"], ["", "def", "get_image", "(", "self", ",", "image_id", ",", "anno", "=", "None", ")", ":", "\n", "        ", "\"\"\" Get a image\n\n        args:\n            image_id      - index of image\n            anno(None)  - The annotation for the sequence (see get_sequence_info). If None, they will be loaded.\n\n        returns:\n            image -\n            anno -\n            dict - A dict containing meta information about the sequence, e.g. class of the target object.\n\n        \"\"\"", "\n", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb.__init__": [[35, 70], ["base_video_dataset.BaseVideoDataset.__init__", "print", "time.time", "lib.utils.lmdb_utils.decode_json", "print", "lib.train.dataset.COCO_tool.COCO", "coco_seq_lmdb.MSCOCOSeq_lmdb.get_class_list", "coco_seq_lmdb.MSCOCOSeq_lmdb._get_sequence_list", "coco_seq_lmdb.MSCOCOSeq_lmdb._build_seq_per_class", "random.sample", "lib.train.admin.env_settings", "int", "time.time", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_json", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_class_list", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._get_sequence_list", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._build_seq_per_class", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "__init__", "(", "self", ",", "root", "=", "None", ",", "image_loader", "=", "jpeg4py_loader", ",", "data_fraction", "=", "None", ",", "split", "=", "\"train\"", ",", "version", "=", "\"2014\"", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root - path to the coco dataset.\n            image_loader (default_image_loader) -  The function to read the images. If installed,\n                                                   jpeg4py (https://github.com/ajkxyz/jpeg4py) is used by default. Else,\n                                                   opencv's imread is used.\n            data_fraction (None) - Fraction of images to be used. The images are selected randomly. If None, all the\n                                  images  will be used\n            split - 'train' or 'val'.\n            version - version of coco dataset (2014 or 2017)\n        \"\"\"", "\n", "root", "=", "env_settings", "(", ")", ".", "coco_dir", "if", "root", "is", "None", "else", "root", "\n", "super", "(", ")", ".", "__init__", "(", "'COCO_lmdb'", ",", "root", ",", "image_loader", ")", "\n", "self", ".", "root", "=", "root", "\n", "self", ".", "img_pth", "=", "'images/{}{}/'", ".", "format", "(", "split", ",", "version", ")", "\n", "self", ".", "anno_path", "=", "'annotations/instances_{}{}.json'", ".", "format", "(", "split", ",", "version", ")", "\n", "\n", "# Load the COCO set.", "\n", "print", "(", "'loading annotations into memory...'", ")", "\n", "tic", "=", "time", ".", "time", "(", ")", "\n", "coco_json", "=", "decode_json", "(", "root", ",", "self", ".", "anno_path", ")", "\n", "print", "(", "'Done (t={:0.2f}s)'", ".", "format", "(", "time", ".", "time", "(", ")", "-", "tic", ")", ")", "\n", "\n", "self", ".", "coco_set", "=", "COCO", "(", "coco_json", ")", "\n", "\n", "self", ".", "cats", "=", "self", ".", "coco_set", ".", "cats", "\n", "\n", "self", ".", "class_list", "=", "self", ".", "get_class_list", "(", ")", "\n", "\n", "self", ".", "sequence_list", "=", "self", ".", "_get_sequence_list", "(", ")", "\n", "\n", "if", "data_fraction", "is", "not", "None", ":", "\n", "            ", "self", ".", "sequence_list", "=", "random", ".", "sample", "(", "self", ".", "sequence_list", ",", "int", "(", "len", "(", "self", ".", "sequence_list", ")", "*", "data_fraction", ")", ")", "\n", "", "self", ".", "seq_per_class", "=", "self", ".", "_build_seq_per_class", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._get_sequence_list": [[71, 76], ["list", "coco_seq_lmdb.MSCOCOSeq_lmdb.coco_set.anns.keys"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "_get_sequence_list", "(", "self", ")", ":", "\n", "        ", "ann_list", "=", "list", "(", "self", ".", "coco_set", ".", "anns", ".", "keys", "(", ")", ")", "\n", "seq_list", "=", "[", "a", "for", "a", "in", "ann_list", "if", "self", ".", "coco_set", ".", "anns", "[", "a", "]", "[", "'iscrowd'", "]", "==", "0", "]", "\n", "\n", "return", "seq_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb.is_video_sequence": [[77, 79], ["None"], "methods", ["None"], ["", "def", "is_video_sequence", "(", "self", ")", ":", "\n", "        ", "return", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb.get_num_classes": [[80, 82], ["len"], "methods", ["None"], ["", "def", "get_num_classes", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "class_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb.get_name": [[83, 85], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "return", "'coco_lmdb'", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb.has_class_info": [[86, 88], ["None"], "methods", ["None"], ["", "def", "has_class_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb.get_class_list": [[89, 94], ["coco_seq_lmdb.MSCOCOSeq_lmdb.cats.keys", "class_list.append"], "methods", ["None"], ["", "def", "get_class_list", "(", "self", ")", ":", "\n", "        ", "class_list", "=", "[", "]", "\n", "for", "cat_id", "in", "self", ".", "cats", ".", "keys", "(", ")", ":", "\n", "            ", "class_list", ".", "append", "(", "self", ".", "cats", "[", "cat_id", "]", "[", "'name'", "]", ")", "\n", "", "return", "class_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb.has_segmentation_info": [[95, 97], ["None"], "methods", ["None"], ["", "def", "has_segmentation_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb.get_num_sequences": [[98, 100], ["len"], "methods", ["None"], ["", "def", "get_num_sequences", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "sequence_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._build_seq_per_class": [[101, 111], ["enumerate", "seq_per_class[].append"], "methods", ["None"], ["", "def", "_build_seq_per_class", "(", "self", ")", ":", "\n", "        ", "seq_per_class", "=", "{", "}", "\n", "for", "i", ",", "seq", "in", "enumerate", "(", "self", ".", "sequence_list", ")", ":", "\n", "            ", "class_name", "=", "self", ".", "cats", "[", "self", ".", "coco_set", ".", "anns", "[", "seq", "]", "[", "'category_id'", "]", "]", "[", "'name'", "]", "\n", "if", "class_name", "not", "in", "seq_per_class", ":", "\n", "                ", "seq_per_class", "[", "class_name", "]", "=", "[", "i", "]", "\n", "", "else", ":", "\n", "                ", "seq_per_class", "[", "class_name", "]", ".", "append", "(", "i", ")", "\n", "\n", "", "", "return", "seq_per_class", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb.get_sequences_in_class": [[112, 114], ["None"], "methods", ["None"], ["", "def", "get_sequences_in_class", "(", "self", ",", "class_name", ")", ":", "\n", "        ", "return", "self", ".", "seq_per_class", "[", "class_name", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb.get_sequence_info": [[115, 128], ["coco_seq_lmdb.MSCOCOSeq_lmdb._get_anno", "torch.Tensor().view", "torch.Tensor().unsqueeze", "valid.clone().byte", "torch.Tensor", "torch.Tensor", "valid.clone", "coco_seq_lmdb.MSCOCOSeq_lmdb.coco_set.annToMask"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS._get_anno", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.annToMask"], ["", "def", "get_sequence_info", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "anno", "=", "self", ".", "_get_anno", "(", "seq_id", ")", "\n", "\n", "bbox", "=", "torch", ".", "Tensor", "(", "anno", "[", "'bbox'", "]", ")", ".", "view", "(", "1", ",", "4", ")", "\n", "\n", "mask", "=", "torch", ".", "Tensor", "(", "self", ".", "coco_set", ".", "annToMask", "(", "anno", ")", ")", ".", "unsqueeze", "(", "dim", "=", "0", ")", "\n", "\n", "'''2021.1.3 To avoid too small bounding boxes. Here we change the threshold to 50 pixels'''", "\n", "valid", "=", "(", "bbox", "[", ":", ",", "2", "]", ">", "50", ")", "&", "(", "bbox", "[", ":", ",", "3", "]", ">", "50", ")", "\n", "\n", "visible", "=", "valid", ".", "clone", "(", ")", ".", "byte", "(", ")", "\n", "\n", "return", "{", "'bbox'", ":", "bbox", ",", "'mask'", ":", "mask", ",", "'valid'", ":", "valid", ",", "'visible'", ":", "visible", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._get_anno": [[129, 133], ["None"], "methods", ["None"], ["", "def", "_get_anno", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "anno", "=", "self", ".", "coco_set", ".", "anns", "[", "self", ".", "sequence_list", "[", "seq_id", "]", "]", "\n", "\n", "return", "anno", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._get_frames": [[134, 139], ["lib.utils.lmdb_utils.decode_img", "os.path.join", "coco_seq_lmdb.MSCOCOSeq_lmdb.coco_set.loadImgs"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_img", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.loadImgs"], ["", "def", "_get_frames", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "path", "=", "self", ".", "coco_set", ".", "loadImgs", "(", "[", "self", ".", "coco_set", ".", "anns", "[", "self", ".", "sequence_list", "[", "seq_id", "]", "]", "[", "'image_id'", "]", "]", ")", "[", "0", "]", "[", "'file_name'", "]", "\n", "# img = self.image_loader(os.path.join(self.img_pth, path))", "\n", "img", "=", "decode_img", "(", "self", ".", "root", ",", "os", ".", "path", ".", "join", "(", "self", ".", "img_pth", ",", "path", ")", ")", "\n", "return", "img", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb.get_meta_info": [[140, 155], ["collections.OrderedDict", "collections.OrderedDict"], "methods", ["None"], ["", "def", "get_meta_info", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "try", ":", "\n", "            ", "cat_dict_current", "=", "self", ".", "cats", "[", "self", ".", "coco_set", ".", "anns", "[", "self", ".", "sequence_list", "[", "seq_id", "]", "]", "[", "'category_id'", "]", "]", "\n", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "cat_dict_current", "[", "'name'", "]", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "cat_dict_current", "[", "'supercategory'", "]", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "", "except", ":", "\n", "            ", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "None", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "", "return", "object_meta", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb.get_class_name": [[157, 160], ["None"], "methods", ["None"], ["", "def", "get_class_name", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "cat_dict_current", "=", "self", ".", "cats", "[", "self", ".", "coco_set", ".", "anns", "[", "self", ".", "sequence_list", "[", "seq_id", "]", "]", "[", "'category_id'", "]", "]", "\n", "return", "cat_dict_current", "[", "'name'", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb.get_frames": [[161, 178], ["coco_seq_lmdb.MSCOCOSeq_lmdb._get_frames", "coco_seq_lmdb.MSCOCOSeq_lmdb.items", "coco_seq_lmdb.MSCOCOSeq_lmdb.get_meta_info", "coco_seq_lmdb.MSCOCOSeq_lmdb.copy", "coco_seq_lmdb.MSCOCOSeq_lmdb.get_sequence_info"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.coco_seq_lmdb.MSCOCOSeq_lmdb._get_frames", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_meta_info", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_sequence_info"], ["", "def", "get_frames", "(", "self", ",", "seq_id", "=", "None", ",", "frame_ids", "=", "None", ",", "anno", "=", "None", ")", ":", "\n", "# COCO is an image dataset. Thus we replicate the image denoted by seq_id len(frame_ids) times, and return a", "\n", "# list containing these replicated images.", "\n", "        ", "frame", "=", "self", ".", "_get_frames", "(", "seq_id", ")", "\n", "\n", "frame_list", "=", "[", "frame", ".", "copy", "(", ")", "for", "_", "in", "frame_ids", "]", "\n", "\n", "if", "anno", "is", "None", ":", "\n", "            ", "anno", "=", "self", ".", "get_sequence_info", "(", "seq_id", ")", "\n", "\n", "", "anno_frames", "=", "{", "}", "\n", "for", "key", ",", "value", "in", "anno", ".", "items", "(", ")", ":", "\n", "            ", "anno_frames", "[", "key", "]", "=", "[", "value", "[", "0", ",", "...", "]", "for", "_", "in", "frame_ids", "]", "\n", "\n", "", "object_meta", "=", "self", ".", "get_meta_info", "(", "seq_id", ")", "\n", "\n", "return", "frame_list", ",", "anno_frames", ",", "object_meta", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.msra10k.MSRA10k.__init__": [[23, 39], ["base_image_dataset.BaseImageDataset.__init__", "msra10k.MSRA10k._load_dataset", "ltr.admin.environment.env_settings"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.ecssd.ECSSD._load_dataset", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "__init__", "(", "self", ",", "root", "=", "None", ",", "image_loader", "=", "jpeg4py_loader", ",", "data_fraction", "=", "None", ",", "min_area", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root - path to MSRA10k root folder\n            image_loader (jpeg4py_loader) - The function to read the images. jpeg4py (https://github.com/ajkxyz/jpeg4py)\n                                            is used by default.\n            data_fraction - Fraction of dataset to be used. The complete dataset is used by default\n            min_area - Objects with area less than min_area are filtered out. Default is 0.0\n        \"\"\"", "\n", "root", "=", "env_settings", "(", ")", ".", "msra10k_dir", "if", "root", "is", "None", "else", "root", "\n", "super", "(", ")", ".", "__init__", "(", "'MSRA10k'", ",", "root", ",", "image_loader", ")", "\n", "\n", "self", ".", "image_list", "=", "self", ".", "_load_dataset", "(", "min_area", "=", "min_area", ")", "\n", "\n", "if", "data_fraction", "is", "not", "None", ":", "\n", "            ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.msra10k.MSRA10k._load_dataset": [[40, 53], ["os.listdir", "os.path.join", "ltr.data.image_loader.imread_indexed", "os.path.join", "images.append"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.imread_indexed"], ["", "", "def", "_load_dataset", "(", "self", ",", "min_area", "=", "None", ")", ":", "\n", "        ", "files_list", "=", "os", ".", "listdir", "(", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "'Imgs'", ")", ")", "\n", "image_list", "=", "[", "f", "[", ":", "-", "4", "]", "for", "f", "in", "files_list", "if", "f", "[", "-", "3", ":", "]", "==", "'jpg'", "]", "\n", "\n", "images", "=", "[", "]", "\n", "\n", "for", "f", "in", "image_list", ":", "\n", "            ", "a", "=", "imread_indexed", "(", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "'Imgs'", ",", "'{}.png'", ".", "format", "(", "f", ")", ")", ")", "\n", "\n", "if", "min_area", "is", "None", "or", "(", "a", ">", "0", ")", ".", "sum", "(", ")", ">", "min_area", ":", "\n", "                ", "images", ".", "append", "(", "f", ")", "\n", "\n", "", "", "return", "images", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.msra10k.MSRA10k.get_name": [[54, 56], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "return", "'msra10k'", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.msra10k.MSRA10k.has_segmentation_info": [[57, 59], ["None"], "methods", ["None"], ["", "def", "has_segmentation_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.msra10k.MSRA10k.get_image_info": [[60, 69], ["ltr.data.image_loader.imread_indexed", "torch.Tensor", "ltr.data.bounding_box_utils.masks_to_bboxes().view", "valid.clone().byte", "os.path.join", "ltr.data.bounding_box_utils.masks_to_bboxes", "valid.clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.imread_indexed", "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.masks_to_bboxes"], ["", "def", "get_image_info", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "mask", "=", "imread_indexed", "(", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "'Imgs'", ",", "'{}.png'", ".", "format", "(", "self", ".", "image_list", "[", "im_id", "]", ")", ")", ")", "\n", "mask", "=", "torch", ".", "Tensor", "(", "mask", "==", "255", ")", "\n", "bbox", "=", "masks_to_bboxes", "(", "mask", ",", "fmt", "=", "'t'", ")", ".", "view", "(", "4", ",", ")", "\n", "\n", "valid", "=", "(", "bbox", "[", "2", "]", ">", "0", ")", "&", "(", "bbox", "[", "3", "]", ">", "0", ")", "\n", "visible", "=", "valid", ".", "clone", "(", ")", ".", "byte", "(", ")", "\n", "\n", "return", "{", "'bbox'", ":", "bbox", ",", "'mask'", ":", "mask", ",", "'valid'", ":", "valid", ",", "'visible'", ":", "visible", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.msra10k.MSRA10k.get_meta_info": [[70, 78], ["collections.OrderedDict"], "methods", ["None"], ["", "def", "get_meta_info", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "None", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "\n", "return", "object_meta", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.msra10k.MSRA10k.get_image": [[79, 88], ["msra10k.MSRA10k.image_loader", "msra10k.MSRA10k.get_meta_info", "os.path.join", "msra10k.MSRA10k.get_image_info"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_meta_info", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_image_info"], ["", "def", "get_image", "(", "self", ",", "image_id", ",", "anno", "=", "None", ")", ":", "\n", "        ", "frame", "=", "self", ".", "image_loader", "(", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "'Imgs'", ",", "'{}.jpg'", ".", "format", "(", "self", ".", "image_list", "[", "image_id", "]", ")", ")", ")", "\n", "\n", "if", "anno", "is", "None", ":", "\n", "            ", "anno", "=", "self", ".", "get_image_info", "(", "image_id", ")", "\n", "\n", "", "object_meta", "=", "self", ".", "get_meta_info", "(", "image_id", ")", "\n", "\n", "return", "frame", ",", "anno", ",", "object_meta", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.davis.Davis.__init__": [[19, 75], ["ltr.dataset.vos_base.VOSDatasetBase.__init__", "meta_path.exists", "print", "ltr.dataset.vos_base.VOSMeta", "ltr.dataset.vos_base.VOSMeta.generate", "davis.Davis.gmeta.save", "davis.Davis.gmeta.get_obj_ids", "pathlib.Path", "open().read().splitlines", "davis.Davis._samples.append", "davis.Davis._samples.extend", "davis.Davis.get_name", "Exception", "ltr.admin.environment.env_settings", "ltr.admin.environment.env_settings", "open().read", "sorted", "p.is_dir", "ltr.admin.environment.env_settings", "davis.Davis._jpeg_path.glob", "open"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.generate", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.save", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_obj_ids", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_name", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "__init__", "(", "self", ",", "root", "=", "None", ",", "sequences", "=", "None", ",", "version", "=", "'2017'", ",", "split", "=", "'train'", ",", "multiobj", "=", "True", ",", "\n", "vis_threshold", "=", "10", ",", "image_loader", "=", "jpeg4py_loader", ")", ":", "\n", "        ", "\"\"\"\n        args:\n             root - Dataset root path. If unset, it uses the path in your local.py config.\n             sequences - List of sequence names. Limit to a subset of sequences if not None.\n             version - '2016' or '2017\n             split - Any name in DAVIS/ImageSets/<year>\n             multiobj - Whether the dataset will return all objects in a sequence or multiple sequences with one object\n                        in each.\n             vis_threshold - Minimum number of pixels required to consider a target object \"visible\".\n             image_loader (jpeg4py_loader) - The function to read the images. jpeg4py (https://github.com/ajkxyz/jpeg4py)\n                                            is used by default.\n        \"\"\"", "\n", "if", "version", "==", "'2017'", ":", "\n", "            ", "if", "split", "in", "[", "'train'", ",", "'val'", "]", ":", "\n", "                ", "root", "=", "env_settings", "(", ")", ".", "davis_dir", "if", "root", "is", "None", "else", "root", "\n", "", "elif", "split", "in", "[", "'test-dev'", "]", ":", "\n", "                ", "root", "=", "env_settings", "(", ")", ".", "davis_testdev_dir", "if", "root", "is", "None", "else", "root", "\n", "", "else", ":", "\n", "                ", "raise", "Exception", "(", "'Unknown split {}'", ".", "format", "(", "split", ")", ")", "\n", "", "", "else", ":", "\n", "            ", "root", "=", "env_settings", "(", ")", ".", "davis16_dir", "if", "root", "is", "None", "else", "root", "\n", "\n", "", "super", "(", ")", ".", "__init__", "(", "name", "=", "'DAVIS'", ",", "root", "=", "Path", "(", "root", ")", ",", "version", "=", "version", ",", "split", "=", "split", ",", "multiobj", "=", "multiobj", ",", "\n", "vis_threshold", "=", "vis_threshold", ",", "image_loader", "=", "image_loader", ")", "\n", "\n", "dset_path", "=", "self", ".", "root", "\n", "self", ".", "_jpeg_path", "=", "dset_path", "/", "'JPEGImages'", "/", "'480p'", "\n", "self", ".", "_anno_path", "=", "dset_path", "/", "'Annotations'", "/", "'480p'", "\n", "\n", "meta_path", "=", "dset_path", "/", "\"generated_meta.json\"", "\n", "if", "meta_path", ".", "exists", "(", ")", ":", "\n", "            ", "self", ".", "gmeta", "=", "VOSMeta", "(", "filename", "=", "meta_path", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "gmeta", "=", "VOSMeta", ".", "generate", "(", "'DAVIS'", ",", "self", ".", "_jpeg_path", ",", "self", ".", "_anno_path", ")", "\n", "self", ".", "gmeta", ".", "save", "(", "meta_path", ")", "\n", "\n", "", "if", "sequences", "is", "None", ":", "\n", "            ", "if", "self", ".", "split", "!=", "'all'", ":", "\n", "                ", "fname", "=", "dset_path", "/", "'ImageSets'", "/", "self", ".", "version", "/", "(", "self", ".", "split", "+", "'.txt'", ")", "\n", "sequences", "=", "open", "(", "fname", ")", ".", "read", "(", ")", ".", "splitlines", "(", ")", "\n", "", "else", ":", "\n", "                ", "sequences", "=", "[", "p", "for", "p", "in", "sorted", "(", "self", ".", "_jpeg_path", ".", "glob", "(", "\"*\"", ")", ")", "if", "p", ".", "is_dir", "(", ")", "]", "\n", "\n", "", "", "self", ".", "sequence_names", "=", "sequences", "\n", "self", ".", "_samples", "=", "[", "]", "\n", "\n", "for", "seq", "in", "sequences", ":", "\n", "            ", "obj_ids", "=", "self", ".", "gmeta", ".", "get_obj_ids", "(", "seq", ")", "\n", "if", "self", ".", "multiobj", ":", "# Multiple objects per sample", "\n", "                ", "self", ".", "_samples", ".", "append", "(", "(", "seq", ",", "obj_ids", ")", ")", "\n", "", "else", ":", "# One object per sample", "\n", "                ", "self", ".", "_samples", ".", "extend", "(", "[", "(", "seq", ",", "[", "obj_id", "]", ")", "for", "obj_id", "in", "obj_ids", "]", ")", "\n", "\n", "", "", "print", "(", "\"%s loaded.\"", "%", "self", ".", "get_name", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.davis.Davis._construct_sequence": [[76, 84], ["davis.Davis.get_paths_and_bboxes", "pytracking.evaluation.Sequence"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase.get_paths_and_bboxes"], ["", "def", "_construct_sequence", "(", "self", ",", "sequence_info", ")", ":", "\n", "\n", "        ", "seq_name", "=", "sequence_info", "[", "'sequence'", "]", "\n", "images", ",", "gt_labels", ",", "gt_bboxes", "=", "self", ".", "get_paths_and_bboxes", "(", "sequence_info", ")", "\n", "\n", "return", "Sequence", "(", "name", "=", "seq_name", ",", "frames", "=", "images", ",", "dataset", "=", "'DAVIS'", ",", "ground_truth_rect", "=", "gt_bboxes", ",", "\n", "ground_truth_seg", "=", "gt_labels", ",", "object_ids", "=", "sequence_info", "[", "'object_ids'", "]", ",", "\n", "multiobj_mode", "=", "self", ".", "multiobj", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.sbd.SBD.__init__": [[24, 48], ["base_image_dataset.BaseImageDataset.__init__", "sbd.SBD._load_dataset", "sbd.SBD._construct_image_list", "scipy.io.loadmat", "ltr.admin.environment.env_settings"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.ecssd.ECSSD._load_dataset", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.sbd.SBD._construct_image_list", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "__init__", "(", "self", ",", "root", "=", "None", ",", "image_loader", "=", "jpeg4py_loader_w_failsafe", ",", "data_fraction", "=", "None", ",", "split", "=", "\"train\"", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root - path to SBD root folder\n            image_loader - The function to read the images. jpeg4py (https://github.com/ajkxyz/jpeg4py)\n                           is used by default.\n            data_fraction - Fraction of dataset to be used. The complete dataset is used by default\n            split - dataset split (\"train\", \"train_noval\", \"val\")\n        \"\"\"", "\n", "root", "=", "env_settings", "(", ")", ".", "sbd_dir", "if", "root", "is", "None", "else", "root", "\n", "super", "(", ")", ".", "__init__", "(", "'SBD'", ",", "root", ",", "image_loader", ")", "\n", "\n", "assert", "split", "in", "[", "\"train\"", ",", "\"train_noval\"", ",", "\"val\"", "]", "\n", "\n", "self", ".", "root", "=", "root", "\n", "\n", "self", ".", "image_path_list", ",", "self", ".", "anno_file_list", "=", "self", ".", "_load_dataset", "(", "split", ")", "\n", "\n", "# Load mat fine", "\n", "anno_list", "=", "[", "loadmat", "(", "a", ")", "for", "a", "in", "self", ".", "anno_file_list", "]", "\n", "\n", "self", ".", "image_list", "=", "self", ".", "_construct_image_list", "(", "anno_list", ")", "\n", "if", "data_fraction", "is", "not", "None", ":", "\n", "            ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.sbd.SBD._load_dataset": [[49, 61], ["os.path.join", "open", "os.path.join", "os.path.join", "len", "len", "split.rstrip", "os.path.join", "x.strip", "f.readlines"], "methods", ["None"], ["", "", "def", "_load_dataset", "(", "self", ",", "split", ")", ":", "\n", "        ", "split_f", "=", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "split", ".", "rstrip", "(", "'\\n'", ")", "+", "'.txt'", ")", "\n", "\n", "with", "open", "(", "os", ".", "path", ".", "join", "(", "split_f", ")", ",", "\"r\"", ")", "as", "f", ":", "\n", "            ", "file_names", "=", "[", "x", ".", "strip", "(", ")", "for", "x", "in", "f", ".", "readlines", "(", ")", "]", "\n", "\n", "", "image_list", "=", "[", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "'img'", ",", "x", "+", "\".jpg\"", ")", "for", "x", "in", "file_names", "]", "\n", "anno_list", "=", "[", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "'inst'", ",", "x", "+", "\".mat\"", ")", "for", "x", "in", "file_names", "]", "\n", "\n", "assert", "(", "len", "(", "image_list", ")", "==", "len", "(", "anno_list", ")", ")", "\n", "\n", "return", "image_list", ",", "anno_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.sbd.SBD._get_mask_from_mat": [[62, 64], ["torch.tensor"], "methods", ["None"], ["", "def", "_get_mask_from_mat", "(", "self", ",", "mat", ")", ":", "\n", "        ", "return", "torch", ".", "tensor", "(", "mat", "[", "'GTinst'", "]", "[", "0", "]", "[", "'Segmentation'", "]", "[", "0", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.sbd.SBD._construct_image_list": [[65, 74], ["enumerate", "sbd.SBD._get_mask_from_mat", "range", "image_list.append", "sbd.SBD.max().item", "sbd.SBD.max"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.sbd.SBD._get_mask_from_mat", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "_construct_image_list", "(", "self", ",", "anno_list", ")", ":", "\n", "        ", "image_list", "=", "[", "]", "\n", "\n", "for", "im_id", ",", "a", "in", "enumerate", "(", "anno_list", ")", ":", "\n", "            ", "mask", "=", "self", ".", "_get_mask_from_mat", "(", "a", ")", "\n", "for", "instance_id", "in", "range", "(", "1", ",", "mask", ".", "max", "(", ")", ".", "item", "(", ")", "+", "1", ")", ":", "\n", "                ", "image_list", ".", "append", "(", "(", "im_id", ",", "instance_id", ")", ")", "\n", "\n", "", "", "return", "image_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.sbd.SBD.get_name": [[75, 77], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "return", "'sbd'", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.sbd.SBD.has_segmentation_info": [[78, 80], ["None"], "methods", ["None"], ["", "def", "has_segmentation_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.sbd.SBD.get_image_info": [[81, 92], ["scipy.io.loadmat", "sbd.SBD._get_mask_from_mat", "ltr.data.bounding_box_utils.masks_to_bboxes", "valid.clone().byte", "valid.clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.sbd.SBD._get_mask_from_mat", "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.masks_to_bboxes"], ["", "def", "get_image_info", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "image_id", ",", "instance_id", "=", "self", ".", "image_list", "[", "im_id", "]", "\n", "anno_mat", "=", "loadmat", "(", "self", ".", "anno_file_list", "[", "image_id", "]", ")", "\n", "mask", "=", "self", ".", "_get_mask_from_mat", "(", "anno_mat", ")", "\n", "\n", "mask", "=", "(", "mask", "==", "instance_id", ")", ".", "float", "(", ")", "\n", "bbox", "=", "masks_to_bboxes", "(", "mask", ",", "fmt", "=", "'t'", ")", "\n", "valid", "=", "(", "bbox", "[", "2", "]", ">", "0", ")", "&", "(", "bbox", "[", "3", "]", ">", "0", ")", "\n", "visible", "=", "valid", ".", "clone", "(", ")", ".", "byte", "(", ")", "\n", "\n", "return", "{", "'bbox'", ":", "bbox", ",", "'mask'", ":", "mask", ",", "'valid'", ":", "valid", ",", "'visible'", ":", "visible", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.sbd.SBD._get_image": [[93, 98], ["sbd.SBD.image_loader"], "methods", ["None"], ["", "def", "_get_image", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "image_id", ",", "_", "=", "self", ".", "image_list", "[", "im_id", "]", "\n", "\n", "img", "=", "self", ".", "image_loader", "(", "self", ".", "image_path_list", "[", "image_id", "]", ")", "\n", "return", "img", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.sbd.SBD.get_meta_info": [[99, 106], ["collections.OrderedDict"], "methods", ["None"], ["", "def", "get_meta_info", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "None", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "return", "object_meta", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.sbd.SBD.get_image": [[107, 116], ["sbd.SBD._get_image", "sbd.SBD.get_meta_info", "sbd.SBD.get_image_info"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS._get_image", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_meta_info", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_image_info"], ["", "def", "get_image", "(", "self", ",", "image_id", ",", "anno", "=", "None", ")", ":", "\n", "        ", "image", "=", "self", ".", "_get_image", "(", "image_id", ")", "\n", "\n", "if", "anno", "is", "None", ":", "\n", "            ", "anno", "=", "self", ".", "get_image_info", "(", "image_id", ")", "\n", "\n", "", "object_meta", "=", "self", ".", "get_meta_info", "(", "image_id", ")", "\n", "\n", "return", "image", ",", "anno", ",", "object_meta", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.hku_is.HKUIS.__init__": [[23, 39], ["base_image_dataset.BaseImageDataset.__init__", "hku_is.HKUIS._load_dataset", "ltr.admin.environment.env_settings"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.ecssd.ECSSD._load_dataset", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "__init__", "(", "self", ",", "root", "=", "None", ",", "image_loader", "=", "jpeg4py_loader", ",", "data_fraction", "=", "None", ",", "min_area", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root - path to HKU-IS root folder\n            image_loader (jpeg4py_loader) - The function to read the images. jpeg4py (https://github.com/ajkxyz/jpeg4py)\n                                            is used by default.\n            data_fraction - Fraction of dataset to be used. The complete dataset is used by default\n            min_area - Objects with area less than min_area are filtered out. Default is 0.0\n        \"\"\"", "\n", "root", "=", "env_settings", "(", ")", ".", "hkuis_dir", "if", "root", "is", "None", "else", "root", "\n", "super", "(", ")", ".", "__init__", "(", "'HKUIS'", ",", "root", ",", "image_loader", ")", "\n", "\n", "self", ".", "image_list", ",", "self", ".", "anno_list", "=", "self", ".", "_load_dataset", "(", "min_area", "=", "min_area", ")", "\n", "\n", "if", "data_fraction", "is", "not", "None", ":", "\n", "            ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.hku_is.HKUIS._load_dataset": [[40, 56], ["os.listdir", "os.path.join", "ltr.data.image_loader.imread_indexed", "os.path.join", "ltr.data.image_loader.opencv_loader", "images.append", "annos.append", "os.path.join"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.imread_indexed", "home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.opencv_loader"], ["", "", "def", "_load_dataset", "(", "self", ",", "min_area", "=", "None", ")", ":", "\n", "        ", "files_list", "=", "os", ".", "listdir", "(", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "'imgs'", ")", ")", "\n", "image_list", "=", "[", "f", "[", ":", "-", "4", "]", "for", "f", "in", "files_list", "]", "\n", "\n", "images", "=", "[", "]", "\n", "annos", "=", "[", "]", "\n", "\n", "for", "f", "in", "image_list", ":", "\n", "            ", "a", "=", "imread_indexed", "(", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "'gt'", ",", "'{}.png'", ".", "format", "(", "f", ")", ")", ")", "\n", "\n", "if", "min_area", "is", "None", "or", "(", "a", ">", "0", ")", ".", "sum", "(", ")", ">", "min_area", ":", "\n", "                ", "im", "=", "opencv_loader", "(", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "'imgs'", ",", "'{}.png'", ".", "format", "(", "f", ")", ")", ")", "\n", "images", ".", "append", "(", "im", ")", "\n", "annos", ".", "append", "(", "a", ")", "\n", "\n", "", "", "return", "images", ",", "annos", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.hku_is.HKUIS.get_name": [[57, 59], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "return", "'hku-is'", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.hku_is.HKUIS.has_segmentation_info": [[60, 62], ["None"], "methods", ["None"], ["", "def", "has_segmentation_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.hku_is.HKUIS.get_image_info": [[63, 72], ["torch.Tensor", "ltr.data.bounding_box_utils.masks_to_bboxes().view", "valid.clone().byte", "ltr.data.bounding_box_utils.masks_to_bboxes", "valid.clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.masks_to_bboxes"], ["", "def", "get_image_info", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "mask", "=", "self", ".", "anno_list", "[", "im_id", "]", "\n", "mask", "=", "torch", ".", "Tensor", "(", "mask", "==", "255", ")", "\n", "bbox", "=", "masks_to_bboxes", "(", "mask", ",", "fmt", "=", "'t'", ")", ".", "view", "(", "4", ",", ")", "\n", "\n", "valid", "=", "(", "bbox", "[", "2", "]", ">", "0", ")", "&", "(", "bbox", "[", "3", "]", ">", "0", ")", "\n", "visible", "=", "valid", ".", "clone", "(", ")", ".", "byte", "(", ")", "\n", "\n", "return", "{", "'bbox'", ":", "bbox", ",", "'mask'", ":", "mask", ",", "'valid'", ":", "valid", ",", "'visible'", ":", "visible", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.hku_is.HKUIS.get_meta_info": [[73, 81], ["collections.OrderedDict"], "methods", ["None"], ["", "def", "get_meta_info", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "None", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "\n", "return", "object_meta", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.hku_is.HKUIS.get_image": [[82, 91], ["hku_is.HKUIS.get_meta_info", "hku_is.HKUIS.get_image_info"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_meta_info", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_image_info"], ["", "def", "get_image", "(", "self", ",", "image_id", ",", "anno", "=", "None", ")", ":", "\n", "        ", "frame", "=", "self", ".", "image_list", "[", "image_id", "]", "\n", "\n", "if", "anno", "is", "None", ":", "\n", "            ", "anno", "=", "self", ".", "get_image_info", "(", "image_id", ")", "\n", "\n", "", "object_meta", "=", "self", ".", "get_meta_info", "(", "image_id", ")", "\n", "\n", "return", "frame", ",", "anno", ",", "object_meta", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.__init__": [[14, 21], ["vos_base.VOSMeta.load", "ValueError"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load"], ["    ", "def", "__init__", "(", "self", ",", "data", "=", "None", ",", "filename", "=", "None", ")", ":", "\n", "        ", "if", "filename", "is", "not", "None", ":", "\n", "            ", "self", ".", "load", "(", "filename", ")", "\n", "", "elif", "data", "is", "not", "None", ":", "\n", "            ", "self", ".", "_data", "=", "data", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "\"Must set either data or filename parameter\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.save": [[22, 25], ["gen_meta.parent.mkdir", "json.dump", "open"], "methods", ["None"], ["", "", "def", "save", "(", "self", ",", "gen_meta", ":", "Path", ")", ":", "\n", "        ", "gen_meta", ".", "parent", ".", "mkdir", "(", "exist_ok", "=", "True", ",", "parents", "=", "True", ")", "\n", "json", ".", "dump", "(", "self", ".", "_data", ",", "open", "(", "gen_meta", ",", "\"w\"", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load": [[26, 32], ["json.load", "gen_meta.exists", "print", "print", "FileNotFoundError", "open"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load"], ["", "def", "load", "(", "self", ",", "gen_meta", ":", "Path", ")", ":", "\n", "        ", "if", "not", "gen_meta", ".", "exists", "(", ")", ":", "\n", "            ", "print", "(", "\"Generated metadata file %s is not found.\"", "%", "gen_meta", ")", "\n", "print", "(", "\"Find and run VOSMeta.generate() to create it.\"", ")", "\n", "raise", "FileNotFoundError", "(", "gen_meta", ")", "\n", "", "self", ".", "_data", "=", "json", ".", "load", "(", "open", "(", "gen_meta", ")", ",", "object_pairs_hook", "=", "OrderedDict", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.generate": [[33, 106], ["dset_annos_path.exists", "collections.OrderedDict", "vos_base.VOSMeta.generate.tqdm"], "methods", ["None"], ["", "@", "classmethod", "\n", "def", "generate", "(", "cls", ",", "dset_name", ":", "str", ",", "dset_images_path", ":", "Path", ",", "dset_annos_path", ":", "Path", ")", ":", "\n", "        ", "\"\"\"\n        Count the annotation mask pixels per object, per frame, in all sequences in a dataset\n        :param dset_name:        Dataset name, for printing the progress bar.\n        :param dset_annos_path:  Path to annotations directory, containing sequence directories,\n                                 with annotation frames in them.\n\n        :return: Dataset meta dict:\n\n        {'sequence0':\n            {\n             'shape': (height, width)\n\n             'obj_sizes':  # Object pixels per frame\n                {'frame0': {'object0': px_count, 'object1': px_count, ...},\n                 'frame1': {'object0': px_count, 'object1': px_count, ...},\n                ... },\n\n             'bboxes':  # Bounding boxes per frame\n                {'frame0': {'object0': bbox, 'object1': bbox, ...},\n                 'frame1': {'object0': bbox, 'object1': bbox, ...},\n                ... },\n            ...\n        }\n        \"\"\"", "\n", "assert", "(", "dset_annos_path", ".", "exists", "(", ")", ")", "\n", "\n", "dset_meta", "=", "OrderedDict", "(", ")", "\n", "sequences", "=", "[", "p", ".", "stem", "for", "p", "in", "sorted", "(", "dset_annos_path", ".", "glob", "(", "\"*\"", ")", ")", "if", "p", ".", "is_dir", "(", ")", "]", "\n", "\n", "try", ":", "\n", "            ", "from", "tqdm", "import", "tqdm", "\n", "", "except", ":", "\n", "            ", "def", "tqdm", "(", "x", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "                ", "return", "x", "\n", "\n", "", "", "for", "seq", "in", "tqdm", "(", "sequences", ",", "desc", "=", "dset_name", ",", "unit", "=", "\"seq\"", ")", ":", "\n", "\n", "            ", "obj_sizes2", "=", "defaultdict", "(", "OrderedDict", ")", "\n", "bboxes", "=", "defaultdict", "(", "OrderedDict", ")", "\n", "shape", "=", "None", "\n", "frame_names", "=", "[", "file", ".", "stem", "for", "file", "in", "sorted", "(", "(", "dset_images_path", "/", "seq", ")", ".", "glob", "(", "\"*.jpg\"", ")", ")", "]", "\n", "anno_paths", "=", "list", "(", "sorted", "(", "(", "dset_annos_path", "/", "seq", ")", ".", "glob", "(", "\"*.png\"", ")", ")", ")", "\n", "\n", "# Extract information from the given label frames", "\n", "for", "path", "in", "anno_paths", ":", "\n", "                ", "f_id", "=", "path", ".", "stem", "\n", "\n", "# Count label-pixels per frame", "\n", "labels", "=", "imread_indexed", "(", "path", ")", "\n", "# labels = np.array(Image.open(path))", "\n", "obj_ids", ",", "obj_sizes", "=", "np", ".", "unique", "(", "labels", ",", "return_counts", "=", "True", ")", "\n", "obj_ids", "=", "[", "str", "(", "oid", ")", "for", "oid", "in", "obj_ids", "]", "\n", "obj_sizes", "=", "obj_sizes", ".", "tolist", "(", ")", "\n", "\n", "if", "'0'", "in", "obj_ids", ":", "# Remove background id", "\n", "                    ", "obj_ids", "=", "obj_ids", "[", "1", ":", "]", "\n", "obj_sizes", "=", "obj_sizes", "[", "1", ":", "]", "\n", "", "obj_sizes2", "[", "f_id", "]", "=", "OrderedDict", "(", "zip", "(", "obj_ids", ",", "obj_sizes", ")", ")", "\n", "\n", "# Generate per-label bounding boxes", "\n", "for", "obj_id", "in", "obj_ids", ":", "\n", "                    ", "bboxes", "[", "f_id", "]", "[", "obj_id", "]", "=", "cls", ".", "_mask_to_bbox", "(", "labels", "==", "int", "(", "obj_id", ")", ")", "\n", "\n", "", "if", "shape", "is", "None", ":", "\n", "                    ", "shape", "=", "labels", ".", "shape", "[", ":", "2", "]", "\n", "\n", "# Format result", "\n", "\n", "", "", "dset_meta", "[", "seq", "]", "=", "dict", "(", "shape", "=", "shape", ",", "obj_sizes", "=", "obj_sizes2", ",", "bboxes", "=", "bboxes", ",", "frame_names", "=", "frame_names", ")", "\n", "\n", "", "return", "VOSMeta", "(", "dset_meta", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta._mask_to_bbox": [[107, 120], ["mask.astype.astype.astype", "[].tolist", "[].tolist", "len", "len", "mask.astype.astype.sum().nonzero", "mask.astype.astype.sum().nonzero", "mask.astype.astype.sum", "mask.astype.astype.sum"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "_mask_to_bbox", "(", "mask", ":", "np", ".", "ndarray", ")", ":", "\n", "\n", "        ", "mask", "=", "mask", ".", "astype", "(", "int", ")", "\n", "xs", "=", "mask", ".", "sum", "(", "axis", "=", "-", "2", ")", ".", "nonzero", "(", ")", "[", "0", "]", ".", "tolist", "(", ")", "\n", "ys", "=", "mask", ".", "sum", "(", "axis", "=", "-", "1", ")", ".", "nonzero", "(", ")", "[", "0", "]", ".", "tolist", "(", ")", "\n", "\n", "if", "len", "(", "ys", ")", ">", "0", "and", "len", "(", "xs", ")", ">", "0", ":", "\n", "            ", "x", ",", "y", ",", "w", ",", "h", "=", "xs", "[", "0", "]", ",", "ys", "[", "0", "]", ",", "xs", "[", "-", "1", "]", "-", "xs", "[", "0", "]", ",", "ys", "[", "-", "1", "]", "-", "ys", "[", "0", "]", "\n", "", "else", ":", "\n", "            ", "x", ",", "y", ",", "w", ",", "h", "=", "0", ",", "0", ",", "0", ",", "0", "\n", "\n", "", "return", "[", "x", ",", "y", ",", "w", ",", "h", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta._transpose_nested_dict": [[121, 129], ["collections.defaultdict", "d.items", "inner.items"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "_transpose_nested_dict", "(", "d", ")", ":", "\n", "        ", "\"\"\" Permute a 2-level nested dict such that the inner and outer keys swap places. \"\"\"", "\n", "d2", "=", "defaultdict", "(", "OrderedDict", ")", "\n", "for", "key1", ",", "inner", "in", "d", ".", "items", "(", ")", ":", "\n", "            ", "for", "key2", ",", "value", "in", "inner", ".", "items", "(", ")", ":", "\n", "                ", "d2", "[", "key2", "]", "[", "key1", "]", "=", "value", "\n", "", "", "return", "d2", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.select_split": [[130, 137], ["os.path.join", "set", "set", "set.difference", "os.path.dirname", "vos_base.VOSMeta._data.keys", "vos_base.VOSMeta._data.pop", "os.path.realpath", "s.strip", "open().readlines", "open", "os.path.join"], "methods", ["None"], ["", "def", "select_split", "(", "self", ",", "dataset_name", ",", "split", ")", ":", "\n", "        ", "ltr_path", "=", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "realpath", "(", "__file__", ")", ")", ",", "'..'", ")", "\n", "sequences", "=", "set", "(", "[", "s", ".", "strip", "(", ")", "for", "s", "in", "open", "(", "os", ".", "path", ".", "join", "(", "ltr_path", ",", "'data_specs'", ",", "dataset_name", "+", "'_'", "+", "split", "+", "'.txt'", ")", ")", ".", "readlines", "(", ")", "]", ")", "\n", "all_sequences", "=", "set", "(", "self", ".", "_data", ".", "keys", "(", ")", ")", "\n", "to_remove", "=", "all_sequences", ".", "difference", "(", "sequences", ")", "\n", "for", "seq_name", "in", "to_remove", ":", "\n", "            ", "self", ".", "_data", ".", "pop", "(", "seq_name", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_sequence_names": [[138, 140], ["list", "vos_base.VOSMeta._data.keys"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "", "def", "get_sequence_names", "(", "self", ")", ":", "\n", "        ", "return", "list", "(", "self", ".", "_data", ".", "keys", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_shape": [[141, 145], ["None"], "methods", ["None"], ["", "def", "get_shape", "(", "self", ",", "seq_name", ")", ":", "\n", "        ", "\"\"\" Sequence image shape (h,w) \"\"\"", "\n", "h", ",", "w", "=", "self", ".", "_data", "[", "seq_name", "]", "[", "'shape'", "]", "\n", "return", "h", ",", "w", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_obj_ids": [[146, 149], ["list", "vos_base.VOSMeta.get_obj_sizes_per_object().keys", "vos_base.VOSMeta.get_obj_sizes_per_object"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_obj_sizes_per_object"], ["", "def", "get_obj_ids", "(", "self", ",", "seq_name", ")", ":", "\n", "        ", "\"\"\" All objects in the sequence \"\"\"", "\n", "return", "list", "(", "self", ".", "get_obj_sizes_per_object", "(", "seq_name", ")", ".", "keys", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_frame_names": [[150, 153], ["None"], "methods", ["None"], ["", "def", "get_frame_names", "(", "self", ",", "seq_name", ")", ":", "\n", "        ", "\"\"\" All filename stems of the frames in the sequence \"\"\"", "\n", "return", "self", ".", "_data", "[", "seq_name", "]", "[", "'frame_names'", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.enable_all_frames": [[154, 178], ["idx_file.exists", "dict.items", "print", "json.load", "dict", "print", "json.dump", "print", "open", "pathlib.Path.home", "open", "sorted"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load"], ["", "def", "enable_all_frames", "(", "self", ",", "dset_images_path", ")", ":", "\n", "        ", "\"\"\" For YouTubeVOS: Update the frame names with (jpeg) files from the <split>_all_frames set\n        :param dset_images_path:  /path/to/train_all_frames/JPEGImages (or valid or test)\n        :param seq: Sequence name\n        :return:\n        \"\"\"", "\n", "\n", "# Try load the cached index", "\n", "idx_file", "=", "dset_images_path", ".", "parent", "/", "\"frame_names.json\"", "\n", "if", "idx_file", ".", "exists", "(", ")", ":", "\n", "            ", "print", "(", "'Loading cached frame names from %s'", "%", "idx_file", ")", "\n", "all_frame_names", "=", "json", ".", "load", "(", "open", "(", "idx_file", ")", ")", "\n", "", "else", ":", "\n", "# Cache the data to the user's home directory (guaranteed to be writable)", "\n", "            ", "all_frame_names", "=", "dict", "(", ")", "\n", "user_idx_file", "=", "Path", ".", "home", "(", ")", "/", "(", "dset_images_path", ".", "parent", ".", "stem", "+", "\"_frame_names.json\"", ")", "\n", "print", "(", "'Indexing YouTubeVOS \"all_frames\" frame names to %s'", "%", "user_idx_file", ")", "\n", "for", "seq", "in", "self", ".", "_data", ":", "\n", "                ", "all_frame_names", "[", "seq", "]", "=", "[", "file", ".", "stem", "for", "file", "in", "sorted", "(", "(", "dset_images_path", "/", "seq", ")", ".", "glob", "(", "\"*.jpg\"", ")", ")", "]", "\n", "", "json", ".", "dump", "(", "all_frame_names", ",", "open", "(", "user_idx_file", ",", "\"w\"", ")", ")", "\n", "print", "(", "'Done. Move %s to %s to load faster next time.'", "%", "(", "user_idx_file", ",", "idx_file", ")", ")", "\n", "\n", "", "for", "seq", ",", "frame_names", "in", "all_frame_names", ".", "items", "(", ")", ":", "\n", "            ", "self", ".", "_data", "[", "seq", "]", "[", "'frame_names'", "]", "=", "frame_names", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_aspect_ratio": [[179, 183], ["None"], "methods", ["None"], ["", "", "def", "get_aspect_ratio", "(", "self", ",", "seq_name", ")", ":", "\n", "        ", "\"\"\" Sequence aspect ratio \"\"\"", "\n", "h", ",", "w", "=", "self", ".", "_data", "[", "seq_name", "]", "[", "'shape'", "]", "\n", "return", "w", "/", "h", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_obj_sizes_per_frame": [[184, 187], ["None"], "methods", ["None"], ["", "def", "get_obj_sizes_per_frame", "(", "self", ",", "seq_name", ")", ":", "\n", "        ", "\"\"\" Get object pixel counts, grouped by frame names \"\"\"", "\n", "return", "self", ".", "_data", "[", "seq_name", "]", "[", "'obj_sizes'", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_bboxes_per_frame": [[188, 191], ["None"], "methods", ["None"], ["", "def", "get_bboxes_per_frame", "(", "self", ",", "seq_name", ")", ":", "\n", "        ", "\"\"\" Object bounding boxes, grouped by frame names \"\"\"", "\n", "return", "self", ".", "_data", "[", "seq_name", "]", "[", "'bboxes'", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_obj_sizes_per_object": [[192, 195], ["vos_base.VOSMeta._transpose_nested_dict", "vos_base.VOSMeta.get_obj_sizes_per_frame"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta._transpose_nested_dict", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_obj_sizes_per_frame"], ["", "def", "get_obj_sizes_per_object", "(", "self", ",", "seq_name", ")", ":", "\n", "        ", "\"\"\" Object pixel counts, grouped by object \"\"\"", "\n", "return", "self", ".", "_transpose_nested_dict", "(", "self", ".", "get_obj_sizes_per_frame", "(", "seq_name", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_bboxes_per_object": [[196, 199], ["vos_base.VOSMeta._transpose_nested_dict", "vos_base.VOSMeta.get_bboxes_per_frame"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta._transpose_nested_dict", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_bboxes_per_frame"], ["", "def", "get_bboxes_per_object", "(", "self", ",", "seq_name", ")", ":", "\n", "        ", "\"\"\" Object bounding boxes, grouped by object \"\"\"", "\n", "return", "self", ".", "_transpose_nested_dict", "(", "self", ".", "get_bboxes_per_frame", "(", "seq_name", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.generate_datasets_meta": [[200, 203], ["pathlib.Path().expanduser", "VOSMeta.generate().save", "pathlib.Path", "vos_base.VOSMeta.generate"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.save", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.generate"], ["", "@", "staticmethod", "\n", "def", "generate_datasets_meta", "(", "src", ",", "dst", "=", "Path", "(", "\"~/vosdataset_meta\"", ")", ".", "expanduser", "(", ")", ")", ":", "\n", "        ", "VOSMeta", ".", "generate", "(", "\"SyntheticCoco\"", ",", "src", "/", "\"JPEGImages\"", ",", "src", "/", "\"Annotations\"", ")", ".", "save", "(", "src", "/", "\"generated_meta.json\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase.__init__": [[209, 233], ["base_video_dataset.BaseVideoDataset.__init__", "root.exists", "root.is_dir"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "name", ":", "str", ",", "root", ":", "Path", ",", "version", "=", "None", ",", "split", "=", "'train'", ",", "\n", "multiobj", "=", "True", ",", "vis_threshold", "=", "10", ",", "image_loader", "=", "jpeg4py_loader", ")", ":", "\n", "        ", "\"\"\"\n        :param root:            Dataset root path, eg /path/to/DAVIS or /path/to/YouTubeVOS/\n                                Note: YouTubeVOS 2018 and 2019 are expected to be in\n                                /path/to/YouTubeVOS/2018 and /path/to/YouTubeVOS/2019, respectively\n        :param name:            'DAVIS' or 'YouTubeVOS' (case sensitive)\n        :param version:         DAVIS: '2016', '2017, YouTubeVOS: '2018' or '2019'\n        :param split:           DAVIS: Any name in DAVIS/ImageSets/<year>,\n                                YouTubeVOS: 'test', 'train', 'valid' or 'jjtrain', 'jjvalid'\n        :param multiobj:        Whether the dataset will return all objects in a sequence or\n                                multiple sequences with one object in each.\n        :param vis_threshold:   Minimum number of pixels required to consider a target object \"visible\".\n        :param image_loader:    Image loader.\n        \"\"\"", "\n", "\n", "assert", "root", ".", "exists", "(", ")", "and", "root", ".", "is_dir", "(", ")", "\n", "\n", "super", "(", ")", ".", "__init__", "(", "name", ",", "root", ",", "image_loader", ")", "\n", "\n", "self", ".", "version", "=", "version", "\n", "self", ".", "split", "=", "split", "\n", "self", ".", "vis_threshold", "=", "vis_threshold", "\n", "self", ".", "multiobj", "=", "multiobj", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase._load_image": [[234, 239], ["vos_base.VOSDatasetBase.image_loader", "numpy.atleast_3d", "str"], "methods", ["None"], ["", "def", "_load_image", "(", "self", ",", "path", ")", ":", "\n", "        ", "im", "=", "self", ".", "image_loader", "(", "str", "(", "path", ")", ")", "\n", "assert", "im", "is", "not", "None", "\n", "im", "=", "np", ".", "atleast_3d", "(", "im", ")", "\n", "return", "im", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase._load_anno": [[240, 247], ["ltr.data.image_loader.imread_indexed", "path.exists"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.imread_indexed"], ["", "@", "staticmethod", "\n", "def", "_load_anno", "(", "path", ")", ":", "\n", "        ", "if", "not", "path", ".", "exists", "(", ")", ":", "\n", "            ", "return", "None", "\n", "# im = np.atleast_3d(np.array(Image.open(path)))", "\n", "", "im", "=", "imread_indexed", "(", "path", ")", "\n", "return", "im", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase.get_num_sequences": [[248, 250], ["len"], "methods", ["None"], ["", "def", "get_num_sequences", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "_samples", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase.get_sequence_info": [[251, 285], ["m.get_frame_names", "torch.zeros", "m.get_obj_sizes_per_object", "dict", "frames.items", "enumerate", "enumerate", "len", "len", "m.get_shape"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_frame_names", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_obj_sizes_per_object", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_shape"], ["", "def", "get_sequence_info", "(", "self", ",", "sample_id", ")", ":", "\n", "        ", "\"\"\" Get sample meta data.\n        :param sample_id:  Sample to query.\n        :return: dict of metadata:\n                sequence:    Sequence name\n                frame_shape: (height, width) of the images\n                frame_names: List of frame filename stems in the sequence\n                object_ids:  Id numbers of all objects occurring in the sequence\n                obj_sizes:   Matrix shape=(frames, object) of the number of pixels for each object in each frame\n                             Coordinates in this matrix relate to the frame_names and object_ids\n                visible:     Boolean matrix of the same shape as obj_sizes. Entries with more pixels\n                             than self.visible_threshold are True.\n        \"\"\"", "\n", "m", "=", "self", ".", "gmeta", "\n", "seq_name", ",", "obj_ids", "=", "self", ".", "_samples", "[", "sample_id", "]", "\n", "f_names", "=", "m", ".", "get_frame_names", "(", "seq_name", ")", "# All frames", "\n", "\n", "f2i", "=", "{", "f", ":", "i", "for", "i", ",", "f", "in", "enumerate", "(", "f_names", ")", "}", "# Frame name to matrix index", "\n", "o2i", "=", "{", "o", ":", "i", "for", "i", ",", "o", "in", "enumerate", "(", "obj_ids", ")", "}", "# Object id to matrix index", "\n", "\n", "# Get a matrix of object sizes: shape=(frames, objects)", "\n", "obj_sizes", "=", "torch", ".", "zeros", "(", "(", "len", "(", "f_names", ")", ",", "len", "(", "obj_ids", ")", ")", ",", "dtype", "=", "torch", ".", "int", ")", "\n", "sizes_per_object", "=", "m", ".", "get_obj_sizes_per_object", "(", "seq_name", ")", "\n", "\n", "for", "obj_id", "in", "obj_ids", ":", "\n", "            ", "frames", "=", "sizes_per_object", "[", "obj_id", "]", "\n", "oid", "=", "o2i", "[", "obj_id", "]", "\n", "for", "f", ",", "sz", "in", "frames", ".", "items", "(", ")", ":", "\n", "                ", "obj_sizes", "[", "f2i", "[", "f", "]", ",", "oid", "]", "=", "sz", "\n", "\n", "", "", "visible", "=", "(", "obj_sizes", ">", "self", ".", "vis_threshold", ")", ".", "byte", "(", ")", "\n", "\n", "return", "dict", "(", "sequence", "=", "seq_name", ",", "frame_shape", "=", "m", ".", "get_shape", "(", "seq_name", ")", ",", "frame_names", "=", "f_names", ",", "object_ids", "=", "obj_ids", ",", "\n", "object_sizes", "=", "obj_sizes", ",", "visible", "=", "visible", ",", "valid", "=", "visible", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase.get_paths_and_bboxes": [[286, 307], ["vos_base.VOSDatasetBase.gmeta.get_bboxes_per_frame", "collections.OrderedDict", "str", "numpy.array", "enumerate", "str", "vos_base.VOSDatasetBase.keys", "vos_base.VOSDatasetBase.get().get", "vos_base.VOSDatasetBase.get"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_bboxes_per_frame", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "def", "get_paths_and_bboxes", "(", "self", ",", "sequence_info", ")", ":", "\n", "\n", "        ", "seq_name", "=", "sequence_info", "[", "'sequence'", "]", "\n", "annos_root", "=", "self", ".", "_anno_path", "/", "seq_name", "\n", "images_root", "=", "self", ".", "_jpeg_path", "/", "seq_name", "\n", "\n", "frame_names", "=", "sequence_info", "[", "'frame_names'", "]", "\n", "f2i", "=", "{", "f", ":", "i", "for", "i", ",", "f", "in", "enumerate", "(", "frame_names", ")", "}", "\n", "\n", "images", "=", "[", "str", "(", "images_root", "/", "(", "f", "+", "\".jpg\"", ")", ")", "for", "f", "in", "frame_names", "]", "\n", "\n", "# Find the frames where ground truth is available and", "\n", "# get the bounding boxes and segmentation labels of those frames", "\n", "all_bboxes", "=", "self", ".", "gmeta", ".", "get_bboxes_per_frame", "(", "seq_name", ")", "\n", "gt_labels", "=", "[", "str", "(", "annos_root", "/", "(", "f", "+", "\".png\"", ")", ")", "if", "f", "in", "all_bboxes", ".", "keys", "(", ")", "else", "None", "for", "f", "in", "frame_names", "]", "\n", "\n", "gt_bboxes", "=", "OrderedDict", "(", ")", "\n", "for", "obj_id", "in", "sequence_info", "[", "'object_ids'", "]", ":", "\n", "            ", "gt_bboxes", "[", "obj_id", "]", "=", "np", ".", "array", "(", "[", "all_bboxes", ".", "get", "(", "frame", ",", "{", "}", ")", ".", "get", "(", "obj_id", ",", "[", "-", "1", ",", "-", "1", ",", "-", "1", ",", "-", "1", "]", ")", "for", "frame", "in", "frame_names", "]", ")", "\n", "\n", "", "return", "images", ",", "gt_labels", ",", "gt_bboxes", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase._construct_sequence": [[308, 310], ["None"], "methods", ["None"], ["", "def", "_construct_sequence", "(", "self", ",", "sequence_info", ")", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase.get_sequence_list": [[311, 316], ["len", "vos_base.VOSDatasetBase._construct_sequence", "vos_base.VOSDatasetBase.get_sequence_info", "range", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOS._construct_sequence", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_sequence_info"], ["", "def", "get_sequence_list", "(", "self", ")", ":", "\n", "        ", "if", "len", "(", "self", ".", "sequence_list", ")", ">", "0", ":", "\n", "            ", "return", "self", ".", "sequence_list", "\n", "", "self", ".", "sequence_list", "=", "[", "self", ".", "_construct_sequence", "(", "self", ".", "get_sequence_info", "(", "i", ")", ")", "for", "i", "in", "range", "(", "len", "(", "self", ".", "_samples", ")", ")", "]", "\n", "return", "self", ".", "sequence_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase.__len__": [[317, 319], ["len"], "methods", ["None"], ["", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "_samples", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase._get_image_path": [[320, 322], ["None"], "methods", ["None"], ["", "def", "_get_image_path", "(", "self", ",", "meta", ",", "frame_id", ")", ":", "\n", "        ", "return", "self", ".", "_jpeg_path", "/", "meta", "[", "'sequence'", "]", "/", "(", "meta", "[", "'frame_names'", "]", "[", "frame_id", "]", "+", "\".jpg\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase._get_anno_path": [[323, 325], ["None"], "methods", ["None"], ["", "def", "_get_anno_path", "(", "self", ",", "meta", ",", "frame_id", ")", ":", "\n", "        ", "return", "self", ".", "_anno_path", "/", "meta", "[", "'sequence'", "]", "/", "(", "meta", "[", "'frame_names'", "]", "[", "frame_id", "]", "+", "\".png\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase.get_frames": [[326, 378], ["dict", "vos_base.VOSDatasetBase.get_sequence_info", "vos_base.VOSDatasetBase._load_image", "vos_base.VOSDatasetBase._load_anno", "torch.from_numpy", "bboxes.append", "torch.from_numpy.squeeze", "ltr.data.bounding_box_utils.masks_to_bboxes", "len", "torch.Tensor", "torch.Tensor", "value[].clone", "print", "torch.zeros", "int", "int"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_sequence_info", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase._load_image", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase._load_anno", "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.masks_to_bboxes"], ["", "def", "get_frames", "(", "self", ",", "sample_id", ",", "frame_ids", ",", "anno", "=", "None", ")", ":", "\n", "        ", "\"\"\"  Fetch frames with the given ids.\n        :param sample_id:  Sample to get.\n        :param frame_ids:  List of frame indices in the sequence belonging to the sample_id\n        :return: dict of metadata and data:\n                sequence:  Sequence name\n                images:    List of images. No entries may be None\n                labels:    List of label/mask images. Entries may be None if the data is missing\n                bboxes:    List of bounding boxes. Entries may be None if the data is missing\n        \"\"\"", "\n", "seq_name", ",", "obj_ids", "=", "self", ".", "_samples", "[", "sample_id", "]", "\n", "\n", "meta", "=", "self", ".", "get_sequence_info", "(", "sample_id", ")", "if", "anno", "is", "None", "else", "anno", "\n", "frame_names", "=", "meta", "[", "'frame_names'", "]", "\n", "images", "=", "[", "self", ".", "_load_image", "(", "self", ".", "_jpeg_path", "/", "seq_name", "/", "(", "frame_names", "[", "f", "]", "+", "\".jpg\"", ")", ")", "for", "f", "in", "frame_ids", "]", "\n", "labels", "=", "[", "self", ".", "_load_anno", "(", "self", ".", "_anno_path", "/", "seq_name", "/", "(", "frame_names", "[", "f", "]", "+", "\".png\"", ")", ")", "for", "f", "in", "frame_ids", "]", "\n", "\n", "# Generate bounding boxes for the requested objects", "\n", "bboxes", "=", "[", "]", "\n", "for", "lb", "in", "labels", ":", "\n", "            ", "lb", "=", "torch", ".", "from_numpy", "(", "lb", ".", "squeeze", "(", ")", ")", "\n", "frame_bbs", "=", "{", "}", "\n", "for", "obj_id", "in", "obj_ids", ":", "\n", "                ", "bbox", "=", "masks_to_bboxes", "(", "lb", "==", "int", "(", "obj_id", ")", ",", "fmt", "=", "'t'", ")", "\n", "if", "bbox", "[", "3", "]", "==", "0", "or", "bbox", "[", "2", "]", "==", "0", ":", "\n", "                    ", "print", "(", "\"!\"", ")", "\n", "", "frame_bbs", "[", "obj_id", "]", "=", "bbox", "\n", "", "bboxes", ".", "append", "(", "frame_bbs", ")", "\n", "\n", "# Insert empty bboxes for missing object ids", "\n", "", "for", "bbox", "in", "bboxes", ":", "\n", "            ", "for", "obj_id", "in", "obj_ids", ":", "\n", "                ", "if", "obj_id", "not", "in", "bbox", ":", "\n", "                    ", "bbox", "[", "obj_id", "]", "=", "torch", ".", "zeros", "(", "4", ",", "dtype", "=", "torch", ".", "float32", ")", "\n", "\n", "# Remap to object id 1, if requested - for training", "\n", "", "", "", "if", "not", "self", ".", "multiobj", ":", "\n", "            ", "assert", "len", "(", "obj_ids", ")", "==", "1", "\n", "obj_id", "=", "obj_ids", "[", "0", "]", "\n", "labels", "=", "[", "torch", ".", "Tensor", "(", "lb", "==", "int", "(", "obj_id", ")", ")", "for", "lb", "in", "labels", "]", "\n", "bboxes", "=", "[", "bbox", "[", "obj_id", "]", "for", "bbox", "in", "bboxes", "]", "\n", "", "else", ":", "\n", "            ", "labels", "=", "[", "torch", ".", "Tensor", "(", "lb", ")", "for", "lb", "in", "labels", "]", "\n", "\n", "", "object_meta", "=", "{", "key", ":", "meta", "[", "key", "]", "for", "key", "in", "[", "'sequence'", ",", "'frame_shape'", ",", "'frame_names'", ",", "'object_ids'", "]", "}", "\n", "\n", "anno_frames", "=", "dict", "(", "bbox", "=", "bboxes", ",", "mask", "=", "labels", ")", "\n", "for", "key", "in", "[", "'object_sizes'", ",", "'visible'", ",", "'valid'", "]", ":", "\n", "            ", "value", "=", "meta", "[", "key", "]", "\n", "anno_frames", "[", "key", "]", "=", "[", "value", "[", "f_id", ",", "...", "]", ".", "clone", "(", ")", "for", "f_id", "in", "frame_ids", "]", "\n", "\n", "", "return", "images", ",", "anno_frames", ",", "object_meta", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase.get_name": [[379, 381], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "return", "\"%s/%s/%s\"", "%", "(", "self", ".", "name", ",", "self", ".", "version", ",", "self", ".", "split", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase.has_class_info": [[382, 384], ["None"], "methods", ["None"], ["", "def", "has_class_info", "(", "self", ")", ":", "\n", "        ", "return", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase.has_occlusion_info": [[385, 387], ["None"], "methods", ["None"], ["", "def", "has_occlusion_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase.get_num_classes": [[388, 390], ["None"], "methods", ["None"], ["", "def", "get_num_classes", "(", "self", ")", ":", "\n", "        ", "return", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase.get_class_list": [[391, 393], ["None"], "methods", ["None"], ["", "def", "get_class_list", "(", "self", ")", ":", "\n", "        ", "return", "[", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase.get_sequences_in_class": [[394, 396], ["None"], "methods", ["None"], ["", "def", "get_sequences_in_class", "(", "self", ",", "class_name", ")", ":", "\n", "        ", "raise", "[", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase.has_segmentation_info": [[397, 399], ["None"], "methods", ["None"], ["", "def", "has_segmentation_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOSMeta.__init__": [[32, 34], ["json.load", "open"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load"], ["def", "__init__", "(", "self", ",", "dset_split_path", ")", ":", "\n", "        ", "self", ".", "_data", "=", "json", ".", "load", "(", "open", "(", "dset_split_path", "/", "'meta.json'", ")", ")", "[", "'videos'", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOSMeta.sequences": [[35, 37], ["list", "youtubevos.YouTubeVOSMeta._data.keys"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "sequences", "(", "self", ")", ":", "\n", "        ", "return", "list", "(", "self", ".", "_data", ".", "keys", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOSMeta.seq_frames": [[38, 45], ["set", "youtubevos.YouTubeVOSMeta.object_ids", "list", "youtubevos.YouTubeVOSMeta.object_frames", "sorted", "set.add"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOSMeta.object_ids", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOSMeta.object_frames"], ["", "def", "seq_frames", "(", "self", ",", "seq_name", ")", ":", "\n", "        ", "\"\"\" All filename stems of the frames in the sequence \"\"\"", "\n", "frames", "=", "set", "(", ")", "\n", "for", "obj_id", "in", "self", ".", "object_ids", "(", "seq_name", ")", ":", "\n", "            ", "for", "f", "in", "self", ".", "object_frames", "(", "seq_name", ",", "obj_id", ")", ":", "\n", "                ", "frames", ".", "add", "(", "f", ")", "\n", "", "", "return", "list", "(", "sorted", "(", "frames", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOSMeta.object_ids": [[46, 49], ["list", "[].keys"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "object_ids", "(", "self", ",", "seq_name", ")", ":", "\n", "        ", "\"\"\" All objects in the sequence \"\"\"", "\n", "return", "list", "(", "self", ".", "_data", "[", "seq_name", "]", "[", "'objects'", "]", ".", "keys", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOSMeta.object_category": [[50, 52], ["str"], "methods", ["None"], ["", "def", "object_category", "(", "self", ",", "seq_name", ",", "obj_id", ")", ":", "\n", "        ", "return", "self", ".", "_data", "[", "seq_name", "]", "[", "'objects'", "]", "[", "str", "(", "obj_id", ")", "]", "[", "'category'", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOSMeta.object_frames": [[53, 55], ["str"], "methods", ["None"], ["", "def", "object_frames", "(", "self", ",", "seq_name", ",", "obj_id", ")", ":", "\n", "        ", "return", "self", ".", "_data", "[", "seq_name", "]", "[", "'objects'", "]", "[", "str", "(", "obj_id", ")", "]", "[", "'frames'", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOSMeta.object_first_frame": [[56, 58], ["youtubevos.YouTubeVOSMeta.object_frames"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOSMeta.object_frames"], ["", "def", "object_first_frame", "(", "self", ",", "seq_name", ",", "obj_id", ")", ":", "\n", "        ", "return", "self", ".", "object_frames", "(", "seq_name", ",", "obj_id", ")", "[", "0", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOS.__init__": [[72, 167], ["ltr.dataset.vos_base.VOSDatasetBase.__init__", "youtubevos.YouTubeVOS.split.startswith", "youtubevos.YouTubeVOSMeta", "meta_path.exists", "set", "print", "ltr.dataset.vos_base.VOSMeta", "ltr.dataset.vos_base.VOSMeta.generate", "youtubevos.YouTubeVOS.gmeta.save", "youtubevos.YouTubeVOS.gmeta.enable_all_frames", "youtubevos.YouTubeVOS.gmeta.select_split", "youtubevos.YouTubeVOS.gmeta.get_sequence_names", "set", "youtubevos.YouTubeVOS.meta.object_ids", "len", "print", "ltr.admin.environment.env_settings", "pathlib.Path", "youtubevos.YouTubeVOS.gmeta.get_aspect_ratio", "youtubevos.YouTubeVOS._samples.append", "youtubevos.YouTubeVOS._samples.extend", "youtubevos.YouTubeVOS.get_name", "set.add", "youtubevos.YouTubeVOS.meta.object_frames", "youtubevos.YouTubeVOS.remove", "len", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.generate", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.save", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.enable_all_frames", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.select_split", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_sequence_names", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOSMeta.object_ids", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.get_aspect_ratio", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_name", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOSMeta.object_frames"], ["def", "__init__", "(", "self", ",", "root", "=", "None", ",", "version", "=", "'2019'", ",", "split", "=", "'train'", ",", "cleanup", "=", "None", ",", "all_frames", "=", "False", ",", "sequences", "=", "None", ",", "\n", "multiobj", "=", "True", ",", "vis_threshold", "=", "10", ",", "image_loader", "=", "jpeg4py_loader", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root - Dataset root path. If unset, it uses the path in your local.py config.\n            version - '2018' or '2019'\n            split - 'test', 'train', 'valid', or 'jjtrain', 'jjvalid'. 'jjvalid' corresponds to a custom validation\n                    dataset consisting of 300 videos randomly sampled from the train set. 'jjtrain' contains the\n                    remaining videos used for training.\n            cleanup - List of actions to take to to clean up known problems in the dataset.\n                      'aspects': remove frames with weird aspect ratios,\n                      'starts': fix up start frames from original meta data\n            all_frames - Whether to use an \"all_frames\" split.\n            sequences - List of sequence names. Limit to a subset of sequences if not None.\n            multiobj - Whether the dataset will return all objects in a sequence or multiple sequences with one\n                       object in each.\n            vis_threshold - Minimum number of pixels required to consider a target object \"visible\".\n            image_loader - Image loader.\n        \"\"\"", "\n", "root", "=", "env_settings", "(", ")", ".", "youtubevos_dir", "if", "root", "is", "None", "else", "root", "\n", "super", "(", ")", ".", "__init__", "(", "name", "=", "\"YouTubeVOS\"", ",", "root", "=", "Path", "(", "root", ")", ",", "version", "=", "version", ",", "split", "=", "split", ",", "multiobj", "=", "multiobj", ",", "\n", "vis_threshold", "=", "vis_threshold", ",", "image_loader", "=", "image_loader", ")", "\n", "\n", "split_folder", "=", "self", ".", "split", "\n", "if", "self", ".", "split", ".", "startswith", "(", "\"jj\"", ")", ":", "\n", "            ", "split_folder", "=", "\"train\"", "\n", "\n", "", "dset_path", "=", "self", ".", "root", "/", "self", ".", "version", "/", "split_folder", "\n", "\n", "self", ".", "_anno_path", "=", "dset_path", "/", "'Annotations'", "\n", "\n", "if", "all_frames", ":", "\n", "            ", "self", ".", "_jpeg_path", "=", "self", ".", "root", "/", "self", ".", "version", "/", "(", "split_folder", "+", "\"_all_frames\"", ")", "/", "'JPEGImages'", "\n", "", "else", ":", "\n", "            ", "self", ".", "_jpeg_path", "=", "dset_path", "/", "'JPEGImages'", "\n", "\n", "", "self", ".", "meta", "=", "YouTubeVOSMeta", "(", "dset_path", ")", "\n", "meta_path", "=", "dset_path", "/", "\"generated_meta.json\"", "\n", "if", "meta_path", ".", "exists", "(", ")", ":", "\n", "            ", "self", ".", "gmeta", "=", "VOSMeta", "(", "filename", "=", "meta_path", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "gmeta", "=", "VOSMeta", ".", "generate", "(", "'YouTubeVOS'", ",", "self", ".", "_jpeg_path", ",", "self", ".", "_anno_path", ")", "\n", "self", ".", "gmeta", ".", "save", "(", "meta_path", ")", "\n", "\n", "", "if", "all_frames", ":", "\n", "            ", "self", ".", "gmeta", ".", "enable_all_frames", "(", "self", ".", "_jpeg_path", ")", "\n", "\n", "", "if", "self", ".", "split", "not", "in", "[", "'train'", ",", "'valid'", ",", "'test'", "]", ":", "\n", "            ", "self", ".", "gmeta", ".", "select_split", "(", "'youtubevos'", ",", "self", ".", "split", ")", "\n", "\n", "", "if", "sequences", "is", "None", ":", "\n", "            ", "sequences", "=", "self", ".", "gmeta", ".", "get_sequence_names", "(", ")", "\n", "\n", "", "to_remove", "=", "set", "(", ")", "\n", "cleanup", "=", "{", "}", "if", "cleanup", "is", "None", "else", "set", "(", "cleanup", ")", "\n", "\n", "if", "'aspect'", "in", "cleanup", ":", "\n", "# Remove sequences with unusual aspect ratios", "\n", "            ", "for", "seq_name", "in", "sequences", ":", "\n", "                ", "a", "=", "self", ".", "gmeta", ".", "get_aspect_ratio", "(", "seq_name", ")", "\n", "if", "a", "<", "1.45", "or", "a", ">", "1.9", ":", "\n", "                    ", "to_remove", ".", "add", "(", "seq_name", ")", "\n", "\n", "", "", "", "if", "'starts'", "in", "cleanup", ":", "\n", "# Fix incorrect start frames for some objects found with ytvos_start_frames_test()", "\n", "            ", "bad_start_frames", "=", "[", "(", "\"0e27472bea\"", ",", "'2'", ",", "[", "'00055'", ",", "'00060'", "]", ",", "'00065'", ")", ",", "\n", "(", "\"5937b08d69\"", ",", "'4'", ",", "[", "'00000'", "]", ",", "'00005'", ")", ",", "\n", "(", "\"5e1ce354fd\"", ",", "'5'", ",", "[", "'00010'", ",", "'00015'", "]", ",", "'00020'", ")", ",", "\n", "(", "\"7053e4f41e\"", ",", "'2'", ",", "[", "'00000'", ",", "'00005'", ",", "'00010'", ",", "'00015'", "]", ",", "'00020'", ")", ",", "\n", "(", "\"720e3fa04c\"", ",", "'2'", ",", "[", "'00050'", "]", ",", "'00055'", ")", ",", "\n", "(", "\"c73c8e747f\"", ",", "'2'", ",", "[", "'00035'", "]", ",", "'00040'", ")", "]", "\n", "for", "seq_name", ",", "obj_id", ",", "bad_frames", ",", "good_frame", "in", "bad_start_frames", ":", "\n", "# bad_frames is from meta.json included with the dataset", "\n", "# good_frame is from the generated meta - and the first actual frame where the object was seen.", "\n", "                ", "if", "seq_name", "in", "self", ".", "meta", ".", "_data", ":", "\n", "                    ", "frames", "=", "self", ".", "meta", ".", "object_frames", "(", "seq_name", ",", "obj_id", ")", "\n", "for", "f", "in", "bad_frames", ":", "\n", "                        ", "frames", ".", "remove", "(", "f", ")", "\n", "", "assert", "frames", "[", "0", "]", "==", "good_frame", "\n", "\n", "", "", "", "sequences", "=", "[", "seq", "for", "seq", "in", "sequences", "if", "seq", "not", "in", "to_remove", "]", "\n", "\n", "self", ".", "sequence_names", "=", "sequences", "\n", "self", ".", "_samples", "=", "[", "]", "\n", "\n", "for", "seq", "in", "sequences", ":", "\n", "            ", "obj_ids", "=", "self", ".", "meta", ".", "object_ids", "(", "seq", ")", "\n", "if", "self", ".", "multiobj", ":", "# Multiple objects per sample", "\n", "                ", "self", ".", "_samples", ".", "append", "(", "(", "seq", ",", "obj_ids", ")", ")", "\n", "", "else", ":", "# One object per sample", "\n", "                ", "self", ".", "_samples", ".", "extend", "(", "[", "(", "seq", ",", "[", "obj_id", "]", ")", "for", "obj_id", "in", "obj_ids", "]", ")", "\n", "\n", "", "", "print", "(", "\"%s loaded.\"", "%", "self", ".", "get_name", "(", ")", ")", "\n", "if", "len", "(", "to_remove", ")", ">", "0", ":", "\n", "            ", "print", "(", "\"   %d sequences were removed, (%d remaining).\"", "%", "(", "len", "(", "to_remove", ")", ",", "len", "(", "sequences", ")", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOS._construct_sequence": [[168, 193], ["youtubevos.YouTubeVOS.get_paths_and_bboxes", "dict", "pytracking.evaluation.Sequence", "youtubevos.YouTubeVOS.meta.object_first_frame", "enumerate", "print", "[].append", "os.path.join", "os.path.dirname"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSDatasetBase.get_paths_and_bboxes", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.youtubevos.YouTubeVOSMeta.object_first_frame"], ["", "", "def", "_construct_sequence", "(", "self", ",", "sequence_info", ")", ":", "\n", "\n", "        ", "seq_name", "=", "sequence_info", "[", "'sequence'", "]", "\n", "frame_names", "=", "sequence_info", "[", "'frame_names'", "]", "\n", "fname_to_fid", "=", "{", "f", ":", "i", "for", "i", ",", "f", "in", "enumerate", "(", "frame_names", ")", "}", "\n", "images", ",", "gt_segs", ",", "gt_bboxes", "=", "self", ".", "get_paths_and_bboxes", "(", "sequence_info", ")", "\n", "\n", "init_data", "=", "dict", "(", ")", "\n", "for", "obj_id", "in", "sequence_info", "[", "'object_ids'", "]", ":", "\n", "            ", "if", "obj_id", "==", "'0'", ":", "\n", "                ", "print", "(", "\"!\"", ")", "\n", "", "f_name", "=", "self", ".", "meta", ".", "object_first_frame", "(", "seq_name", ",", "obj_id", ")", "\n", "f_id", "=", "fname_to_fid", "[", "f_name", "]", "\n", "if", "f_id", "not", "in", "init_data", ":", "\n", "                ", "init_data", "[", "f_id", "]", "=", "{", "'object_ids'", ":", "[", "obj_id", "]", ",", "\n", "'bbox'", ":", "{", "obj_id", ":", "gt_bboxes", "[", "obj_id", "]", "[", "f_id", ",", ":", "]", "}", ",", "\n", "'mask'", ":", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "gt_segs", "[", "f_id", "]", ")", ",", "(", "f_name", "+", "\".png\"", ")", ")", "}", "\n", "assert", "init_data", "[", "f_id", "]", "[", "'mask'", "]", "in", "gt_segs", "# If this fails, some file is missing", "\n", "", "else", ":", "\n", "                ", "init_data", "[", "f_id", "]", "[", "'object_ids'", "]", ".", "append", "(", "obj_id", ")", "\n", "init_data", "[", "f_id", "]", "[", "'bbox'", "]", "[", "obj_id", "]", "=", "gt_bboxes", "[", "obj_id", "]", "[", "f_id", ",", ":", "]", "\n", "\n", "", "", "return", "Sequence", "(", "name", "=", "seq_name", ",", "frames", "=", "images", ",", "dataset", "=", "'YouTubeVOS'", ",", "ground_truth_rect", "=", "gt_bboxes", ",", "\n", "init_data", "=", "init_data", ",", "ground_truth_seg", "=", "gt_segs", ",", "object_ids", "=", "sequence_info", "[", "'object_ids'", "]", ",", "\n", "multiobj_mode", "=", "self", ".", "multiobj", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.ecssd.ECSSD.__init__": [[22, 38], ["base_image_dataset.BaseImageDataset.__init__", "ecssd.ECSSD._load_dataset", "ltr.admin.environment.env_settings"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.ecssd.ECSSD._load_dataset", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "__init__", "(", "self", ",", "root", "=", "None", ",", "image_loader", "=", "jpeg4py_loader", ",", "data_fraction", "=", "None", ",", "min_area", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root - path to ECSSD root folder\n            image_loader (jpeg4py_loader) - The function to read the images. jpeg4py (https://github.com/ajkxyz/jpeg4py)\n                                            is used by default.\n            data_fraction - Fraction of dataset to be used. The complete dataset is used by default\n            min_area - Objects with area less than min_area are filtered out. Default is 0.0\n        \"\"\"", "\n", "root", "=", "env_settings", "(", ")", ".", "ecssd_dir", "if", "root", "is", "None", "else", "root", "\n", "super", "(", ")", ".", "__init__", "(", "'ECSSD'", ",", "root", ",", "image_loader", ")", "\n", "\n", "self", ".", "image_list", "=", "self", ".", "_load_dataset", "(", "min_area", "=", "min_area", ")", "\n", "\n", "if", "data_fraction", "is", "not", "None", ":", "\n", "            ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.ecssd.ECSSD._load_dataset": [[39, 49], ["range", "ltr.data.image_loader.imread_indexed", "os.path.join", "images.append"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.imread_indexed"], ["", "", "def", "_load_dataset", "(", "self", ",", "min_area", "=", "None", ")", ":", "\n", "        ", "images", "=", "[", "]", "\n", "\n", "for", "i", "in", "range", "(", "1", ",", "1001", ")", ":", "\n", "            ", "a", "=", "imread_indexed", "(", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "'ground_truth_mask'", ",", "'{:04d}.png'", ".", "format", "(", "i", ")", ")", ")", "\n", "\n", "if", "min_area", "is", "None", "or", "(", "a", ">", "0", ")", ".", "sum", "(", ")", ">", "min_area", ":", "\n", "                ", "images", ".", "append", "(", "i", ")", "\n", "\n", "", "", "return", "images", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.ecssd.ECSSD.get_name": [[50, 52], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "return", "'ecssd'", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.ecssd.ECSSD.has_segmentation_info": [[53, 55], ["None"], "methods", ["None"], ["", "def", "has_segmentation_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.ecssd.ECSSD.get_image_info": [[56, 66], ["ltr.data.image_loader.imread_indexed", "torch.Tensor", "ltr.data.bounding_box_utils.masks_to_bboxes().view", "valid.clone().byte", "os.path.join", "ltr.data.bounding_box_utils.masks_to_bboxes", "valid.clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.imread_indexed", "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.masks_to_bboxes"], ["", "def", "get_image_info", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "mask", "=", "imread_indexed", "(", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "'ground_truth_mask'", ",", "'{:04d}.png'", ".", "format", "(", "self", ".", "image_list", "[", "im_id", "]", ")", ")", ")", "\n", "\n", "mask", "=", "torch", ".", "Tensor", "(", "mask", "==", "255", ")", "\n", "bbox", "=", "masks_to_bboxes", "(", "mask", ",", "fmt", "=", "'t'", ")", ".", "view", "(", "4", ",", ")", "\n", "\n", "valid", "=", "(", "bbox", "[", "2", "]", ">", "0", ")", "&", "(", "bbox", "[", "3", "]", ">", "0", ")", "\n", "visible", "=", "valid", ".", "clone", "(", ")", ".", "byte", "(", ")", "\n", "\n", "return", "{", "'bbox'", ":", "bbox", ",", "'mask'", ":", "mask", ",", "'valid'", ":", "valid", ",", "'visible'", ":", "visible", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.ecssd.ECSSD.get_meta_info": [[67, 75], ["collections.OrderedDict"], "methods", ["None"], ["", "def", "get_meta_info", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "None", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "\n", "return", "object_meta", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.ecssd.ECSSD.get_image": [[76, 85], ["ecssd.ECSSD.image_loader", "ecssd.ECSSD.get_meta_info", "os.path.join", "ecssd.ECSSD.get_image_info"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_meta_info", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_image_info"], ["", "def", "get_image", "(", "self", ",", "image_id", ",", "anno", "=", "None", ")", ":", "\n", "        ", "frame", "=", "self", ".", "image_loader", "(", "os", ".", "path", ".", "join", "(", "self", ".", "root", ",", "'images'", ",", "'{:04d}.jpg'", ".", "format", "(", "self", ".", "image_list", "[", "image_id", "]", ")", ")", ")", "\n", "\n", "if", "anno", "is", "None", ":", "\n", "            ", "anno", "=", "self", ".", "get_image_info", "(", "image_id", ")", "\n", "\n", "", "object_meta", "=", "self", ".", "get_meta_info", "(", "image_id", ")", "\n", "\n", "return", "frame", ",", "anno", ",", "object_meta", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video_blend.SyntheticVideoBlend.__init__": [[13, 32], ["foreground_image_dataset.has_segmentation_info", "base_video_dataset.BaseVideoDataset.__init__", "foreground_image_dataset.get_name"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.has_segmentation_info", "home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_name"], ["def", "__init__", "(", "self", ",", "foreground_image_dataset", ",", "background_image_dataset", ",", "foreground_transform", "=", "None", ",", "\n", "background_transform", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            foreground_image_dataset - A segmentation dataset from which foreground objects are cropped using the\n                                       segmentation mask\n            background_image_dataset - Dataset used to sample background image for the synthetic video\n            foreground_transform - Random transformations to be applied to the foreground object in every frame\n            background_transform - Random transformations to be applied to the background image in every frame\n        \"\"\"", "\n", "assert", "foreground_image_dataset", ".", "has_segmentation_info", "(", ")", "\n", "\n", "super", "(", ")", ".", "__init__", "(", "foreground_image_dataset", ".", "get_name", "(", ")", "+", "'_syn_vid_blend'", ",", "foreground_image_dataset", ".", "root", ",", "\n", "foreground_image_dataset", ".", "image_loader", ")", "\n", "self", ".", "foreground_image_dataset", "=", "foreground_image_dataset", "\n", "self", ".", "background_image_dataset", "=", "background_image_dataset", "\n", "\n", "self", ".", "foreground_transform", "=", "foreground_transform", "\n", "self", ".", "background_transform", "=", "background_transform", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video_blend.SyntheticVideoBlend.get_name": [[33, 35], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "name", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video_blend.SyntheticVideoBlend.is_video_sequence": [[36, 38], ["None"], "methods", ["None"], ["", "def", "is_video_sequence", "(", "self", ")", ":", "\n", "        ", "return", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video_blend.SyntheticVideoBlend.has_class_info": [[39, 41], ["synthetic_video_blend.SyntheticVideoBlend.foreground_image_dataset.has_class_info"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.has_class_info"], ["", "def", "has_class_info", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "foreground_image_dataset", ".", "has_class_info", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video_blend.SyntheticVideoBlend.has_occlusion_info": [[42, 44], ["None"], "methods", ["None"], ["", "def", "has_occlusion_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video_blend.SyntheticVideoBlend.get_num_sequences": [[45, 47], ["synthetic_video_blend.SyntheticVideoBlend.foreground_image_dataset.get_num_images"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_image_dataset.BaseImageDataset.get_num_images"], ["", "def", "get_num_sequences", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "foreground_image_dataset", ".", "get_num_images", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video_blend.SyntheticVideoBlend.get_num_classes": [[48, 50], ["len"], "methods", ["None"], ["", "def", "get_num_classes", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "class_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video_blend.SyntheticVideoBlend.get_sequences_in_class": [[51, 53], ["None"], "methods", ["None"], ["", "def", "get_sequences_in_class", "(", "self", ",", "class_name", ")", ":", "\n", "        ", "return", "self", ".", "get_images_in_class", "[", "class_name", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video_blend.SyntheticVideoBlend.get_sequence_info": [[54, 59], ["synthetic_video_blend.SyntheticVideoBlend.foreground_image_dataset.get_image_info", "v.unsqueeze", "synthetic_video_blend.SyntheticVideoBlend.items"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_image_info"], ["", "def", "get_sequence_info", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "image_info", "=", "self", ".", "foreground_image_dataset", ".", "get_image_info", "(", "seq_id", ")", "\n", "\n", "image_info", "=", "{", "k", ":", "v", ".", "unsqueeze", "(", "0", ")", "for", "k", ",", "v", "in", "image_info", ".", "items", "(", ")", "}", "\n", "return", "image_info", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video_blend.SyntheticVideoBlend.get_class_name": [[60, 62], ["synthetic_video_blend.SyntheticVideoBlend.foreground_image_dataset.get_class_name"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_class_name"], ["", "def", "get_class_name", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "return", "self", ".", "foreground_image_dataset", ".", "get_class_name", "(", "seq_id", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video_blend.SyntheticVideoBlend._paste_target": [[63, 99], ["fg_mask.view.view.view", "fg_box.long().tolist.long().tolist.long().tolist", "int", "int", "max", "max", "max", "max", "torch.zeros", "torch.zeros.squeeze", "fg_box.long().tolist.long().tolist.long", "torch.zeros.squeeze", "fg_mask_patch.numpy", "fg_mask_patch.numpy"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "_paste_target", "(", "self", ",", "fg_image", ",", "fg_box", ",", "fg_mask", ",", "bg_image", ",", "paste_loc", ")", ":", "\n", "        ", "fg_mask", "=", "fg_mask", ".", "view", "(", "fg_mask", ".", "shape", "[", "0", "]", ",", "fg_mask", ".", "shape", "[", "1", "]", ",", "1", ")", "\n", "fg_box", "=", "fg_box", ".", "long", "(", ")", ".", "tolist", "(", ")", "\n", "\n", "x1", "=", "int", "(", "paste_loc", "[", "0", "]", "-", "0.5", "*", "fg_box", "[", "2", "]", ")", "\n", "x2", "=", "x1", "+", "fg_box", "[", "2", "]", "\n", "\n", "y1", "=", "int", "(", "paste_loc", "[", "1", "]", "-", "0.5", "*", "fg_box", "[", "3", "]", ")", "\n", "y2", "=", "y1", "+", "fg_box", "[", "3", "]", "\n", "\n", "x1_pad", "=", "max", "(", "-", "x1", ",", "0", ")", "\n", "y1_pad", "=", "max", "(", "-", "y1", ",", "0", ")", "\n", "\n", "x2_pad", "=", "max", "(", "x2", "-", "bg_image", ".", "shape", "[", "1", "]", ",", "0", ")", "\n", "y2_pad", "=", "max", "(", "y2", "-", "bg_image", ".", "shape", "[", "0", "]", ",", "0", ")", "\n", "\n", "bg_mask", "=", "torch", ".", "zeros", "(", "(", "bg_image", ".", "shape", "[", "0", "]", ",", "bg_image", ".", "shape", "[", "1", "]", ",", "1", ")", ",", "dtype", "=", "fg_mask", ".", "dtype", ",", "\n", "device", "=", "fg_mask", ".", "device", ")", "\n", "\n", "if", "x1_pad", ">=", "fg_mask", ".", "shape", "[", "1", "]", "or", "x2_pad", ">=", "fg_mask", ".", "shape", "[", "1", "]", "or", "y1_pad", ">=", "fg_mask", ".", "shape", "[", "0", "]", "or", "y2_pad", ">=", "fg_mask", ".", "shape", "[", "0", "]", ":", "\n", "            ", "return", "bg_image", ",", "bg_mask", ".", "squeeze", "(", "-", "1", ")", "\n", "\n", "", "fg_mask_patch", "=", "fg_mask", "[", "fg_box", "[", "1", "]", "+", "y1_pad", ":", "fg_box", "[", "1", "]", "+", "fg_box", "[", "3", "]", "-", "y2_pad", ",", "\n", "fg_box", "[", "0", "]", "+", "x1_pad", ":", "fg_box", "[", "0", "]", "+", "fg_box", "[", "2", "]", "-", "x2_pad", ",", ":", "]", "\n", "\n", "fg_image_patch", "=", "fg_image", "[", "fg_box", "[", "1", "]", "+", "y1_pad", ":", "fg_box", "[", "1", "]", "+", "fg_box", "[", "3", "]", "-", "y2_pad", ",", "\n", "fg_box", "[", "0", "]", "+", "x1_pad", ":", "fg_box", "[", "0", "]", "+", "fg_box", "[", "2", "]", "-", "x2_pad", ",", ":", "]", "\n", "\n", "bg_image", "[", "y1", "+", "y1_pad", ":", "y2", "-", "y2_pad", ",", "x1", "+", "x1_pad", ":", "x2", "-", "x2_pad", ",", ":", "]", "=", "bg_image", "[", "y1", "+", "y1_pad", ":", "y2", "-", "y2_pad", ",", "x1", "+", "x1_pad", ":", "x2", "-", "x2_pad", ",", ":", "]", "*", "(", "1", "-", "fg_mask_patch", ".", "numpy", "(", ")", ")", "+", "fg_mask_patch", ".", "numpy", "(", ")", "*", "fg_image_patch", "\n", "\n", "bg_mask", "[", "y1", "+", "y1_pad", ":", "y2", "-", "y2_pad", ",", "x1", "+", "x1_pad", ":", "x2", "-", "x2_pad", ",", ":", "]", "=", "fg_mask_patch", "\n", "\n", "return", "bg_image", ",", "bg_mask", ".", "squeeze", "(", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video_blend.SyntheticVideoBlend.get_frames": [[100, 163], ["synthetic_video_blend.SyntheticVideoBlend.foreground_image_dataset.get_image", "fg_anno.items", "random.randint", "synthetic_video_blend.SyntheticVideoBlend.background_image_dataset.get_image", "bg_anno.items", "range", "collections.OrderedDict", "fg_frame.copy", "synthetic_video_blend.SyntheticVideoBlend.foreground_transform", "bg_frame.copy", "len", "ltr.data.bounding_box_utils.masks_to_bboxes", "random.randint", "random.randint", "synthetic_video_blend.SyntheticVideoBlend._paste_target", "ltr.data.bounding_box_utils.masks_to_bboxes", "value[].clone", "synthetic_video_blend.SyntheticVideoBlend.background_image_dataset.get_num_images", "value.clone", "bg_anno_frames.keys", "synthetic_video_blend.SyntheticVideoBlend.background_transform", "synthetic_video_blend.SyntheticVideoBlend.background_transform", "synthetic_video_blend.SyntheticVideoBlend.get_class_name"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_image", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_image", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.masks_to_bboxes", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video_blend.SyntheticVideoBlend._paste_target", "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.masks_to_bboxes", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_image_dataset.BaseImageDataset.get_num_images", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_class_name"], ["", "def", "get_frames", "(", "self", ",", "seq_id", ",", "frame_ids", ",", "anno", "=", "None", ")", ":", "\n", "# Handle foreground", "\n", "        ", "fg_frame", ",", "fg_anno", ",", "fg_object_meta", "=", "self", ".", "foreground_image_dataset", ".", "get_image", "(", "seq_id", ",", "anno", "=", "anno", ")", "\n", "\n", "fg_frame_list", "=", "[", "fg_frame", ".", "copy", "(", ")", "for", "_", "in", "frame_ids", "]", "\n", "\n", "fg_anno_frames", "=", "{", "}", "\n", "for", "key", ",", "value", "in", "fg_anno", ".", "items", "(", ")", ":", "\n", "            ", "fg_anno_frames", "[", "key", "]", "=", "[", "value", "[", "0", "]", ".", "clone", "(", ")", "for", "f_id", "in", "frame_ids", "]", "\n", "\n", "", "if", "self", ".", "foreground_transform", "is", "not", "None", ":", "\n", "            ", "fg_frame_list", ",", "fg_anno_frames", "[", "'bbox'", "]", ",", "fg_anno_frames", "[", "'mask'", "]", "=", "self", ".", "foreground_transform", "(", "\n", "image", "=", "fg_frame_list", ",", "\n", "bbox", "=", "fg_anno_frames", "[", "'bbox'", "]", ",", "\n", "mask", "=", "fg_anno_frames", "[", "'mask'", "]", ",", "\n", "joint", "=", "False", ")", "\n", "\n", "# Sample a random background", "\n", "", "bg_seq_id", "=", "random", ".", "randint", "(", "0", ",", "self", ".", "background_image_dataset", ".", "get_num_images", "(", ")", "-", "1", ")", "\n", "\n", "bg_frame", ",", "bg_anno", ",", "_", "=", "self", ".", "background_image_dataset", ".", "get_image", "(", "bg_seq_id", ")", "\n", "\n", "bg_frame_list", "=", "[", "bg_frame", ".", "copy", "(", ")", "for", "_", "in", "frame_ids", "]", "\n", "\n", "bg_anno_frames", "=", "{", "}", "\n", "for", "key", ",", "value", "in", "bg_anno", ".", "items", "(", ")", ":", "\n", "# Note: Since we get bg anno from image dataset, it does not has frame dimension", "\n", "            ", "bg_anno_frames", "[", "key", "]", "=", "[", "value", ".", "clone", "(", ")", "for", "f_id", "in", "frame_ids", "]", "\n", "\n", "", "if", "self", ".", "background_transform", "is", "not", "None", ":", "\n", "            ", "if", "'mask'", "in", "bg_anno_frames", ".", "keys", "(", ")", ":", "\n", "                ", "bg_frame_list", ",", "bg_anno_frames", "[", "'bbox'", "]", ",", "bg_anno_frames", "[", "'mask'", "]", "=", "self", ".", "background_transform", "(", "\n", "image", "=", "bg_frame_list", ",", "\n", "bbox", "=", "bg_anno_frames", "[", "'bbox'", "]", ",", "\n", "mask", "=", "bg_anno_frames", "[", "'mask'", "]", ",", "\n", "joint", "=", "False", ")", "\n", "", "else", ":", "\n", "                ", "bg_frame_list", ",", "bg_anno_frames", "[", "'bbox'", "]", "=", "self", ".", "background_transform", "(", "\n", "image", "=", "bg_frame_list", ",", "\n", "bbox", "=", "bg_anno_frames", "[", "'bbox'", "]", ",", "\n", "joint", "=", "False", ")", "\n", "\n", "", "", "for", "i", "in", "range", "(", "len", "(", "frame_ids", ")", ")", ":", "\n", "# To be safe, get target bb for the mask", "\n", "            ", "bbox", "=", "masks_to_bboxes", "(", "fg_anno_frames", "[", "'mask'", "]", "[", "i", "]", ",", "fmt", "=", "'t'", ")", "\n", "\n", "loc_y", "=", "random", ".", "randint", "(", "0", ",", "bg_frame_list", "[", "i", "]", ".", "shape", "[", "0", "]", "-", "1", ")", "\n", "loc_x", "=", "random", ".", "randint", "(", "0", ",", "bg_frame_list", "[", "i", "]", ".", "shape", "[", "1", "]", "-", "1", ")", "\n", "\n", "paste_loc", "=", "(", "loc_x", ",", "loc_y", ")", "\n", "fg_frame_list", "[", "i", "]", ",", "fg_anno_frames", "[", "'mask'", "]", "[", "i", "]", "=", "self", ".", "_paste_target", "(", "fg_frame_list", "[", "i", "]", ",", "bbox", ",", "\n", "fg_anno_frames", "[", "'mask'", "]", "[", "i", "]", ",", "\n", "bg_frame_list", "[", "i", "]", ",", "paste_loc", ")", "\n", "\n", "fg_anno_frames", "[", "'bbox'", "]", "[", "i", "]", "=", "masks_to_bboxes", "(", "fg_anno_frames", "[", "'mask'", "]", "[", "i", "]", ",", "fmt", "=", "'t'", ")", "\n", "\n", "", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "self", ".", "get_class_name", "(", "seq_id", ")", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "\n", "return", "fg_frame_list", ",", "fg_anno_frames", ",", "object_meta", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.__init__": [[33, 61], ["base_image_dataset.BaseImageDataset.__init__", "os.path.join", "os.path.join", "lvis.LVIS", "lvis.LVIS.get_class_list", "lvis.LVIS._get_image_list", "lvis.LVIS._build_im_per_class", "random.sample", "ltr.admin.environment.env_settings", "int", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_class_list", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS._get_image_list", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS._build_im_per_class", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "__init__", "(", "self", ",", "root", "=", "None", ",", "image_loader", "=", "jpeg4py_loader_w_failsafe", ",", "data_fraction", "=", "None", ",", "min_area", "=", "None", ",", "split", "=", "\"train\"", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            root - path to lvis root folder\n            image_loader (jpeg4py_loader) - The function to read the images. jpeg4py (https://github.com/ajkxyz/jpeg4py)\n                                            is used by default.\n            data_fraction - Fraction of dataset to be used. The complete dataset is used by default\n            min_area - Objects with area less than min_area are filtered out. Default is 0.0\n            split - 'train' or 'val'.\n        \"\"\"", "\n", "root", "=", "env_settings", "(", ")", ".", "lvis_dir", "if", "root", "is", "None", "else", "root", "\n", "super", "(", ")", ".", "__init__", "(", "'LVIS'", ",", "root", ",", "image_loader", ")", "\n", "\n", "self", ".", "img_pth", "=", "os", ".", "path", ".", "join", "(", "root", ",", "'images'", ",", "f'{split}2017/'", ")", "\n", "self", ".", "anno_path", "=", "os", ".", "path", ".", "join", "(", "root", ",", "'annotations'", ",", "f'lvis_v0.5_{split}.json'", ")", "\n", "\n", "# Load the LVIS set.", "\n", "self", ".", "lvis_set", "=", "lvis_pk", ".", "LVIS", "(", "self", ".", "anno_path", ")", "\n", "\n", "self", ".", "cats", "=", "self", ".", "lvis_set", ".", "cats", "\n", "\n", "self", ".", "class_list", "=", "self", ".", "get_class_list", "(", ")", "# the parent class thing would happen in the sampler", "\n", "\n", "self", ".", "image_list", "=", "self", ".", "_get_image_list", "(", "min_area", "=", "min_area", ")", "\n", "\n", "if", "data_fraction", "is", "not", "None", ":", "\n", "            ", "self", ".", "image_list", "=", "random", ".", "sample", "(", "self", ".", "image_list", ",", "int", "(", "len", "(", "self", ".", "image_list", ")", "*", "data_fraction", ")", ")", "\n", "", "self", ".", "im_per_class", "=", "self", ".", "_build_im_per_class", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS._get_image_list": [[62, 69], ["list", "lvis.LVIS.lvis_set.anns.keys"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "_get_image_list", "(", "self", ",", "min_area", "=", "None", ")", ":", "\n", "        ", "im_list", "=", "list", "(", "self", ".", "lvis_set", ".", "anns", ".", "keys", "(", ")", ")", "# No 'iscrowd' information in LVIS", "\n", "\n", "if", "min_area", "is", "not", "None", ":", "\n", "            ", "im_list", "=", "[", "s", "for", "s", "in", "im_list", "if", "self", ".", "lvis_set", ".", "anns", "[", "s", "]", "[", "'area'", "]", ">", "min_area", "]", "\n", "\n", "", "return", "im_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_num_classes": [[70, 72], ["len"], "methods", ["None"], ["", "def", "get_num_classes", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "class_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_name": [[73, 75], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "return", "'lvis'", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.has_class_info": [[76, 78], ["None"], "methods", ["None"], ["", "def", "has_class_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_class_list": [[79, 84], ["lvis.LVIS.cats.keys", "class_list.append"], "methods", ["None"], ["", "def", "get_class_list", "(", "self", ")", ":", "\n", "        ", "class_list", "=", "[", "]", "\n", "for", "cat_id", "in", "self", ".", "cats", ".", "keys", "(", ")", ":", "\n", "            ", "class_list", ".", "append", "(", "self", ".", "cats", "[", "cat_id", "]", "[", "'name'", "]", ")", "\n", "", "return", "class_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.has_segmentation_info": [[85, 87], ["None"], "methods", ["None"], ["", "def", "has_segmentation_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS._build_im_per_class": [[88, 98], ["enumerate", "im_per_class[].append"], "methods", ["None"], ["", "def", "_build_im_per_class", "(", "self", ")", ":", "\n", "        ", "im_per_class", "=", "{", "}", "\n", "for", "i", ",", "im", "in", "enumerate", "(", "self", ".", "image_list", ")", ":", "\n", "            ", "class_name", "=", "self", ".", "cats", "[", "self", ".", "lvis_set", ".", "anns", "[", "im", "]", "[", "'category_id'", "]", "]", "[", "'name'", "]", "\n", "if", "class_name", "not", "in", "im_per_class", ":", "\n", "                ", "im_per_class", "[", "class_name", "]", "=", "[", "i", "]", "\n", "", "else", ":", "\n", "                ", "im_per_class", "[", "class_name", "]", ".", "append", "(", "i", ")", "\n", "\n", "", "", "return", "im_per_class", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_images_in_class": [[99, 101], ["None"], "methods", ["None"], ["", "def", "get_images_in_class", "(", "self", ",", "class_name", ")", ":", "\n", "        ", "return", "self", ".", "im_per_class", "[", "class_name", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_image_info": [[102, 113], ["lvis.LVIS._get_anno", "torch.Tensor().view", "torch.Tensor", "valid.clone().byte", "lvis.LVIS.lvis_set.ann_to_mask", "torch.Tensor", "valid.clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS._get_anno"], ["", "def", "get_image_info", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "anno", "=", "self", ".", "_get_anno", "(", "im_id", ")", "\n", "\n", "bbox", "=", "torch", ".", "Tensor", "(", "anno", "[", "'bbox'", "]", ")", ".", "view", "(", "4", ",", ")", "\n", "\n", "mask", "=", "torch", ".", "Tensor", "(", "self", ".", "lvis_set", ".", "ann_to_mask", "(", "anno", ")", ")", "\n", "\n", "valid", "=", "(", "bbox", "[", "2", "]", ">", "0", ")", "&", "(", "bbox", "[", "3", "]", ">", "0", ")", "\n", "visible", "=", "valid", ".", "clone", "(", ")", ".", "byte", "(", ")", "\n", "\n", "return", "{", "'bbox'", ":", "bbox", ",", "'mask'", ":", "mask", ",", "'valid'", ":", "valid", ",", "'visible'", ":", "visible", "}", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS._get_anno": [[114, 118], ["None"], "methods", ["None"], ["", "def", "_get_anno", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "anno", "=", "self", ".", "lvis_set", ".", "anns", "[", "self", ".", "image_list", "[", "im_id", "]", "]", "\n", "\n", "return", "anno", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS._get_image": [[119, 123], ["lvis.LVIS.image_loader", "os.path.join", "lvis.LVIS.lvis_set.load_imgs"], "methods", ["None"], ["", "def", "_get_image", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "path", "=", "self", ".", "lvis_set", ".", "load_imgs", "(", "[", "self", ".", "lvis_set", ".", "anns", "[", "self", ".", "image_list", "[", "im_id", "]", "]", "[", "'image_id'", "]", "]", ")", "[", "0", "]", "[", "'file_name'", "]", "\n", "img", "=", "self", ".", "image_loader", "(", "os", ".", "path", ".", "join", "(", "self", ".", "img_pth", ",", "path", ")", ")", "\n", "return", "img", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_meta_info": [[124, 139], ["collections.OrderedDict", "collections.OrderedDict"], "methods", ["None"], ["", "def", "get_meta_info", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "try", ":", "\n", "            ", "cat_dict_current", "=", "self", ".", "cats", "[", "self", ".", "lvis_set", ".", "anns", "[", "self", ".", "image_list", "[", "im_id", "]", "]", "[", "'category_id'", "]", "]", "\n", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "cat_dict_current", "[", "'name'", "]", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "# No 'supercategory' information available in LVIS", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "", "except", ":", "\n", "            ", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "None", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "", "return", "object_meta", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_class_name": [[140, 143], ["None"], "methods", ["None"], ["", "def", "get_class_name", "(", "self", ",", "im_id", ")", ":", "\n", "        ", "cat_dict_current", "=", "self", ".", "cats", "[", "self", ".", "lvis_set", ".", "anns", "[", "self", ".", "image_list", "[", "im_id", "]", "]", "[", "'category_id'", "]", "]", "\n", "return", "cat_dict_current", "[", "'name'", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_image": [[144, 153], ["lvis.LVIS._get_image", "lvis.LVIS.get_meta_info", "lvis.LVIS.get_image_info"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS._get_image", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_meta_info", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_image_info"], ["", "def", "get_image", "(", "self", ",", "image_id", ",", "anno", "=", "None", ")", ":", "\n", "        ", "frame", "=", "self", ".", "_get_image", "(", "image_id", ")", "\n", "\n", "if", "anno", "is", "None", ":", "\n", "            ", "anno", "=", "self", ".", "get_image_info", "(", "image_id", ")", "\n", "\n", "", "object_meta", "=", "self", ".", "get_meta_info", "(", "image_id", ")", "\n", "\n", "return", "frame", ",", "anno", ",", "object_meta", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.__init__": [[10, 20], ["base_video_dataset.BaseVideoDataset.__init__", "base_image_dataset.get_name"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_name"], ["def", "__init__", "(", "self", ",", "base_image_dataset", ",", "transform", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            base_image_dataset - Image dataset used for generating synthetic videos\n            transform - Set of transforms to be applied to the images to generate synthetic video.\n        \"\"\"", "\n", "super", "(", ")", ".", "__init__", "(", "base_image_dataset", ".", "get_name", "(", ")", "+", "'_syn_vid'", ",", "base_image_dataset", ".", "root", ",", "\n", "base_image_dataset", ".", "image_loader", ")", "\n", "self", ".", "base_image_dataset", "=", "base_image_dataset", "\n", "self", ".", "transform", "=", "transform", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_name": [[21, 23], ["None"], "methods", ["None"], ["", "def", "get_name", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "name", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.is_video_sequence": [[24, 26], ["None"], "methods", ["None"], ["", "def", "is_video_sequence", "(", "self", ")", ":", "\n", "        ", "return", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.has_class_info": [[27, 29], ["synthetic_video.SyntheticVideo.base_image_dataset.has_class_info"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.has_class_info"], ["", "def", "has_class_info", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "base_image_dataset", ".", "has_class_info", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.has_occlusion_info": [[30, 32], ["None"], "methods", ["None"], ["", "def", "has_occlusion_info", "(", "self", ")", ":", "\n", "        ", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_num_sequences": [[33, 35], ["synthetic_video.SyntheticVideo.base_image_dataset.get_num_images"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.base_image_dataset.BaseImageDataset.get_num_images"], ["", "def", "get_num_sequences", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "base_image_dataset", ".", "get_num_images", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_num_classes": [[36, 38], ["len"], "methods", ["None"], ["", "def", "get_num_classes", "(", "self", ")", ":", "\n", "        ", "return", "len", "(", "self", ".", "class_list", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_sequences_in_class": [[39, 41], ["None"], "methods", ["None"], ["", "def", "get_sequences_in_class", "(", "self", ",", "class_name", ")", ":", "\n", "        ", "return", "self", ".", "get_images_in_class", "[", "class_name", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_sequence_info": [[42, 47], ["synthetic_video.SyntheticVideo.base_image_dataset.get_image_info", "v.unsqueeze", "synthetic_video.SyntheticVideo.items"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_image_info"], ["", "def", "get_sequence_info", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "image_info", "=", "self", ".", "base_image_dataset", ".", "get_image_info", "(", "seq_id", ")", "\n", "\n", "image_info", "=", "{", "k", ":", "v", ".", "unsqueeze", "(", "0", ")", "for", "k", ",", "v", "in", "image_info", ".", "items", "(", ")", "}", "\n", "return", "image_info", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_class_name": [[48, 50], ["synthetic_video.SyntheticVideo.base_image_dataset.get_class_name"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_class_name"], ["", "def", "get_class_name", "(", "self", ",", "seq_id", ")", ":", "\n", "        ", "return", "self", ".", "base_image_dataset", ".", "get_class_name", "(", "seq_id", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_frames": [[51, 83], ["synthetic_video.SyntheticVideo.base_image_dataset.get_image", "synthetic_video.SyntheticVideo.items", "collections.OrderedDict", "frame.copy", "synthetic_video.SyntheticVideo.get_sequence_info", "value[].clone", "anno_frames.keys", "synthetic_video.SyntheticVideo.transform", "synthetic_video.SyntheticVideo.transform", "synthetic_video.SyntheticVideo.get_class_name", "ltr.data.bounding_box_utils.masks_to_bboxes"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.lvis.LVIS.get_image", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_sequence_info", "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomBlur.transform", "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomBlur.transform", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_class_name", "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.masks_to_bboxes"], ["", "def", "get_frames", "(", "self", ",", "seq_id", ",", "frame_ids", ",", "anno", "=", "None", ")", ":", "\n", "        ", "frame", ",", "anno", ",", "object_meta", "=", "self", ".", "base_image_dataset", ".", "get_image", "(", "seq_id", ",", "anno", "=", "anno", ")", "\n", "\n", "frame_list", "=", "[", "frame", ".", "copy", "(", ")", "for", "_", "in", "frame_ids", "]", "\n", "\n", "if", "anno", "is", "None", ":", "\n", "            ", "anno", "=", "self", ".", "get_sequence_info", "(", "seq_id", ")", "\n", "\n", "", "anno_frames", "=", "{", "}", "\n", "for", "key", ",", "value", "in", "anno", ".", "items", "(", ")", ":", "\n", "            ", "anno_frames", "[", "key", "]", "=", "[", "value", "[", "0", "]", ".", "clone", "(", ")", "for", "f_id", "in", "frame_ids", "]", "\n", "\n", "", "if", "self", ".", "transform", "is", "not", "None", ":", "\n", "            ", "if", "'mask'", "in", "anno_frames", ".", "keys", "(", ")", ":", "\n", "                ", "frame_list", ",", "anno_frames", "[", "'bbox'", "]", ",", "anno_frames", "[", "'mask'", "]", "=", "self", ".", "transform", "(", "image", "=", "frame_list", ",", "\n", "bbox", "=", "anno_frames", "[", "'bbox'", "]", ",", "\n", "mask", "=", "anno_frames", "[", "'mask'", "]", ",", "\n", "joint", "=", "False", ")", "\n", "\n", "anno_frames", "[", "'bbox'", "]", "=", "[", "masks_to_bboxes", "(", "m", ",", "fmt", "=", "'t'", ")", "for", "m", "in", "anno_frames", "[", "'mask'", "]", "]", "\n", "", "else", ":", "\n", "                ", "frame_list", ",", "anno_frames", "[", "'bbox'", "]", "=", "self", ".", "transform", "(", "image", "=", "frame_list", ",", "\n", "bbox", "=", "anno_frames", "[", "'bbox'", "]", ",", "\n", "joint", "=", "False", ")", "\n", "\n", "", "", "object_meta", "=", "OrderedDict", "(", "{", "'object_class_name'", ":", "self", ".", "get_class_name", "(", "seq_id", ")", ",", "\n", "'motion_class'", ":", "None", ",", "\n", "'major_class'", ":", "None", ",", "\n", "'root_class'", ":", "None", ",", "\n", "'motion_adverb'", ":", "None", "}", ")", "\n", "\n", "return", "frame_list", ",", "anno_frames", ",", "object_meta", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.trainers.ltr_trainer.LTRTrainer.__init__": [[11, 33], ["ltr.trainers.BaseTrainer.__init__", "ltr_trainer.LTRTrainer._set_default_settings", "collections.OrderedDict", "os.path.join", "ltr.admin.tensorboard.TensorboardWriter", "getattr"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.ltr_trainer.LTRTrainer._set_default_settings"], ["\n", "\n", "class", "LTRTrainer", "(", "BaseTrainer", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "actor", ",", "loaders", ",", "optimizer", ",", "settings", ",", "lr_scheduler", "=", "None", ",", "use_amp", "=", "False", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            actor - The actor for training the network\n            loaders - list of dataset loaders, e.g. [train_loader, val_loader]. In each epoch, the trainer runs one\n                        epoch for each loader.\n            optimizer - The optimizer used for training, e.g. Adam\n            settings - Training settings\n            lr_scheduler - Learning rate scheduler\n        \"\"\"", "\n", "super", "(", ")", ".", "__init__", "(", "actor", ",", "loaders", ",", "optimizer", ",", "settings", ",", "lr_scheduler", ")", "\n", "\n", "self", ".", "_set_default_settings", "(", ")", "\n", "\n", "# Initialize statistics variables", "\n", "self", ".", "stats", "=", "OrderedDict", "(", "{", "loader", ".", "name", ":", "None", "for", "loader", "in", "self", ".", "loaders", "}", ")", "\n", "\n", "# Initialize tensorboard", "\n", "if", "settings", ".", "local_rank", "in", "[", "-", "1", ",", "0", "]", ":", "\n", "            ", "tensorboard_writer_dir", "=", "os", ".", "path", ".", "join", "(", "self", ".", "settings", ".", "env", ".", "tensorboard_dir", ",", "self", ".", "settings", ".", "project_path", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.trainers.ltr_trainer.LTRTrainer._set_default_settings": [[34, 43], ["default.items", "getattr", "setattr"], "methods", ["None"], ["if", "not", "os", ".", "path", ".", "exists", "(", "tensorboard_writer_dir", ")", ":", "\n", "                ", "os", ".", "makedirs", "(", "tensorboard_writer_dir", ")", "\n", "", "self", ".", "tensorboard_writer", "=", "TensorboardWriter", "(", "tensorboard_writer_dir", ",", "[", "l", ".", "name", "for", "l", "in", "loaders", "]", ")", "\n", "\n", "", "self", ".", "move_data_to_gpu", "=", "getattr", "(", "settings", ",", "'move_data_to_gpu'", ",", "True", ")", "\n", "self", ".", "settings", "=", "settings", "\n", "self", ".", "use_amp", "=", "use_amp", "\n", "if", "use_amp", ":", "\n", "            ", "self", ".", "scaler", "=", "GradScaler", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.trainers.ltr_trainer.LTRTrainer.cycle_dataset": [[44, 75], ["ltr_trainer.LTRTrainer.actor.train", "torch.set_grad_enabled", "ltr_trainer.LTRTrainer._init_timing", "enumerate", "ltr_trainer.LTRTrainer.actor", "ltr_trainer.LTRTrainer._update_stats", "ltr_trainer.LTRTrainer._print_stats", "data.to.to.to", "ltr_trainer.LTRTrainer.optimizer.zero_grad", "loss.backward", "ltr_trainer.LTRTrainer.optimizer.step"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.ltr_trainer.LTRTrainer._init_timing", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.ltr_trainer.LTRTrainer._update_stats", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.ltr_trainer.LTRTrainer._print_stats", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results.Display.step"], ["", "", "def", "_set_default_settings", "(", "self", ")", ":", "\n", "# Dict of all default values", "\n", "        ", "default", "=", "{", "'print_interval'", ":", "10", ",", "\n", "'print_stats'", ":", "None", ",", "\n", "'description'", ":", "''", "}", "\n", "\n", "for", "param", ",", "default_value", "in", "default", ".", "items", "(", ")", ":", "\n", "            ", "if", "getattr", "(", "self", ".", "settings", ",", "param", ",", "None", ")", "is", "None", ":", "\n", "                ", "setattr", "(", "self", ".", "settings", ",", "param", ",", "default_value", ")", "\n", "\n", "", "", "", "def", "cycle_dataset", "(", "self", ",", "loader", ")", ":", "\n", "        ", "\"\"\"Do a cycle of training or validation.\"\"\"", "\n", "\n", "self", ".", "actor", ".", "train", "(", "loader", ".", "training", ")", "\n", "torch", ".", "set_grad_enabled", "(", "loader", ".", "training", ")", "\n", "\n", "self", ".", "_init_timing", "(", ")", "\n", "\n", "for", "i", ",", "data", "in", "enumerate", "(", "loader", ",", "1", ")", ":", "\n", "# get inputs", "\n", "            ", "if", "self", ".", "move_data_to_gpu", ":", "\n", "                ", "data", "=", "data", ".", "to", "(", "self", ".", "device", ")", "\n", "\n", "", "data", "[", "'epoch'", "]", "=", "self", ".", "epoch", "\n", "data", "[", "'settings'", "]", "=", "self", ".", "settings", "\n", "# forward pass", "\n", "if", "not", "self", ".", "use_amp", ":", "\n", "                ", "loss", ",", "stats", "=", "self", ".", "actor", "(", "data", ")", "\n", "", "else", ":", "\n", "                ", "with", "autocast", "(", ")", ":", "\n", "                    ", "loss", ",", "stats", "=", "self", ".", "actor", "(", "data", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.trainers.ltr_trainer.LTRTrainer.train_epoch": [[76, 84], ["ltr_trainer.LTRTrainer._stats_new_epoch", "ltr_trainer.LTRTrainer._write_tensorboard", "ltr_trainer.LTRTrainer.cycle_dataset"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.trainers.ltr_trainer.LTRTrainer._stats_new_epoch", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.ltr_trainer.LTRTrainer._write_tensorboard", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.ltr_trainer.LTRTrainer.cycle_dataset"], ["# backward pass and update weights", "\n", "", "", "if", "loader", ".", "training", ":", "\n", "                ", "self", ".", "optimizer", ".", "zero_grad", "(", ")", "\n", "if", "not", "self", ".", "use_amp", ":", "\n", "                    ", "loss", ".", "backward", "(", ")", "\n", "if", "self", ".", "settings", ".", "grad_clip_norm", ">", "0", ":", "\n", "                        ", "torch", ".", "nn", ".", "utils", ".", "clip_grad_norm_", "(", "self", ".", "actor", ".", "net", ".", "parameters", "(", ")", ",", "self", ".", "settings", ".", "grad_clip_norm", ")", "\n", "", "self", ".", "optimizer", ".", "step", "(", ")", "\n", "", "else", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.trainers.ltr_trainer.LTRTrainer._init_timing": [[85, 89], ["time.time"], "methods", ["None"], ["                    ", "self", ".", "scaler", ".", "scale", "(", "loss", ")", ".", "backward", "(", ")", "\n", "self", ".", "scaler", ".", "step", "(", "self", ".", "optimizer", ")", "\n", "self", ".", "scaler", ".", "update", "(", ")", "\n", "\n", "# update statistics", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.trainers.ltr_trainer.LTRTrainer._update_stats": [[90, 99], ["new_stats.items", "collections.OrderedDict", "[].update", "ltr_trainer.LTRTrainer.stats.keys", "ltr_trainer.LTRTrainer.stats[].keys", "ltr.admin.stats.AverageMeter", "ltr.admin.stats.AverageMeter", "new_stats.keys"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update"], ["", "", "batch_size", "=", "data", "[", "'template_images'", "]", ".", "shape", "[", "loader", ".", "stack_dim", "]", "\n", "self", ".", "_update_stats", "(", "stats", ",", "batch_size", ",", "loader", ")", "\n", "\n", "# print statistics", "\n", "self", ".", "_print_stats", "(", "i", ",", "loader", ",", "batch_size", ")", "\n", "\n", "", "", "def", "train_epoch", "(", "self", ")", ":", "\n", "        ", "\"\"\"Do one epoch for each loader.\"\"\"", "\n", "for", "loader", "in", "self", ".", "loaders", ":", "\n", "            ", "if", "self", ".", "epoch", "%", "loader", ".", "epoch_interval", "==", "0", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.trainers.ltr_trainer.LTRTrainer._print_stats": [[100, 113], ["time.time", "ltr_trainer.LTRTrainer.stats[].items", "print", "loader.__len__", "loader.__len__", "hasattr"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.__len__", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.__len__"], ["# 2021.1.10 Set epoch", "\n", "                ", "if", "isinstance", "(", "loader", ".", "sampler", ",", "DistributedSampler", ")", ":", "\n", "                    ", "loader", ".", "sampler", ".", "set_epoch", "(", "self", ".", "epoch", ")", "\n", "", "self", ".", "cycle_dataset", "(", "loader", ")", "\n", "\n", "", "", "self", ".", "_stats_new_epoch", "(", ")", "\n", "if", "self", ".", "settings", ".", "local_rank", "in", "[", "-", "1", ",", "0", "]", ":", "\n", "            ", "self", ".", "_write_tensorboard", "(", ")", "\n", "\n", "", "", "def", "_init_timing", "(", "self", ")", ":", "\n", "        ", "self", ".", "num_frames", "=", "0", "\n", "self", ".", "start_time", "=", "time", ".", "time", "(", ")", "\n", "self", ".", "prev_time", "=", "self", ".", "start_time", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.trainers.ltr_trainer.LTRTrainer._stats_new_epoch": [[114, 131], ["ltr_trainer.LTRTrainer.stats.values", "loader_stats.values", "ltr_trainer.LTRTrainer.lr_scheduler.get_lr", "enumerate", "hasattr", "[].update", "stat_value.new_epoch", "ltr_trainer.LTRTrainer.stats[].keys", "ltr.admin.stats.StatValue"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update", "home.repos.pwc.inspect_result.researchmm_Stark.admin.stats.AverageMeter.new_epoch"], ["", "def", "_update_stats", "(", "self", ",", "new_stats", ":", "OrderedDict", ",", "batch_size", ",", "loader", ")", ":", "\n", "# Initialize stats if not initialized yet", "\n", "        ", "if", "loader", ".", "name", "not", "in", "self", ".", "stats", ".", "keys", "(", ")", "or", "self", ".", "stats", "[", "loader", ".", "name", "]", "is", "None", ":", "\n", "            ", "self", ".", "stats", "[", "loader", ".", "name", "]", "=", "OrderedDict", "(", "{", "name", ":", "AverageMeter", "(", ")", "for", "name", "in", "new_stats", ".", "keys", "(", ")", "}", ")", "\n", "\n", "", "for", "name", ",", "val", "in", "new_stats", ".", "items", "(", ")", ":", "\n", "            ", "if", "name", "not", "in", "self", ".", "stats", "[", "loader", ".", "name", "]", ".", "keys", "(", ")", ":", "\n", "                ", "self", ".", "stats", "[", "loader", ".", "name", "]", "[", "name", "]", "=", "AverageMeter", "(", ")", "\n", "", "self", ".", "stats", "[", "loader", ".", "name", "]", "[", "name", "]", ".", "update", "(", "val", ",", "batch_size", ")", "\n", "\n", "", "", "def", "_print_stats", "(", "self", ",", "i", ",", "loader", ",", "batch_size", ")", ":", "\n", "        ", "self", ".", "num_frames", "+=", "batch_size", "\n", "current_time", "=", "time", ".", "time", "(", ")", "\n", "batch_fps", "=", "batch_size", "/", "(", "current_time", "-", "self", ".", "prev_time", ")", "\n", "average_fps", "=", "self", ".", "num_frames", "/", "(", "current_time", "-", "self", ".", "start_time", ")", "\n", "self", ".", "prev_time", "=", "current_time", "\n", "if", "i", "%", "self", ".", "settings", ".", "print_interval", "==", "0", "or", "i", "==", "loader", ".", "__len__", "(", ")", ":", "\n", "            ", "print_str", "=", "'[%s: %d, %d / %d] '", "%", "(", "loader", ".", "name", ",", "self", ".", "epoch", ",", "i", ",", "loader", ".", "__len__", "(", ")", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.trainers.ltr_trainer.LTRTrainer._write_tensorboard": [[132, 137], ["ltr_trainer.LTRTrainer.tensorboard_writer.write_epoch", "ltr_trainer.LTRTrainer.tensorboard_writer.write_info"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.tensorboard.TensorboardWriter.write_epoch", "home.repos.pwc.inspect_result.researchmm_Stark.admin.tensorboard.TensorboardWriter.write_info"], ["print_str", "+=", "'FPS: %.1f (%.1f)  ,  '", "%", "(", "average_fps", ",", "batch_fps", ")", "\n", "for", "name", ",", "val", "in", "self", ".", "stats", "[", "loader", ".", "name", "]", ".", "items", "(", ")", ":", "\n", "                ", "if", "(", "self", ".", "settings", ".", "print_stats", "is", "None", "or", "name", "in", "self", ".", "settings", ".", "print_stats", ")", ":", "\n", "                    ", "if", "hasattr", "(", "val", ",", "'avg'", ")", ":", "\n", "                        ", "print_str", "+=", "'%s: %.5f  ,  '", "%", "(", "name", ",", "val", ".", "avg", ")", "\n", "# else:", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.__init__": [[12, 37], ["base_trainer.BaseTrainer.update_settings", "getattr", "base_trainer.BaseTrainer.actor.to", "torch.device", "torch.cuda.is_available"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.update_settings", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to"], ["\n", "def", "__init__", "(", "self", ",", "actor", ",", "loaders", ",", "optimizer", ",", "settings", ",", "lr_scheduler", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            actor - The actor for training the network\n            loaders - list of dataset loaders, e.g. [train_loader, val_loader]. In each epoch, the trainer runs one\n                        epoch for each loader.\n            optimizer - The optimizer used for training, e.g. Adam\n            settings - Training settings\n            lr_scheduler - Learning rate scheduler\n        \"\"\"", "\n", "self", ".", "actor", "=", "actor", "\n", "self", ".", "optimizer", "=", "optimizer", "\n", "self", ".", "lr_scheduler", "=", "lr_scheduler", "\n", "self", ".", "loaders", "=", "loaders", "\n", "\n", "self", ".", "update_settings", "(", "settings", ")", "\n", "\n", "self", ".", "epoch", "=", "0", "\n", "self", ".", "stats", "=", "{", "}", "\n", "\n", "self", ".", "device", "=", "getattr", "(", "settings", ",", "'device'", ",", "None", ")", "\n", "if", "self", ".", "device", "is", "None", ":", "\n", "            ", "self", ".", "device", "=", "torch", ".", "device", "(", "\"cuda:0\"", "if", "torch", ".", "cuda", ".", "is_available", "(", ")", "and", "settings", ".", "use_gpu", "else", "\"cpu\"", ")", "\n", "\n", "", "self", ".", "actor", ".", "to", "(", "self", ".", "device", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.update_settings": [[38, 50], ["os.path.expanduser", "os.path.join", "os.path.exists", "os.makedirs"], "methods", ["None"], ["self", ".", "settings", "=", "settings", "\n", "\n", "", "def", "update_settings", "(", "self", ",", "settings", "=", "None", ")", ":", "\n", "        ", "\"\"\"Updates the trainer settings. Must be called to update internal settings.\"\"\"", "\n", "if", "settings", "is", "not", "None", ":", "\n", "            ", "self", ".", "settings", "=", "settings", "\n", "\n", "", "if", "self", ".", "settings", ".", "env", ".", "workspace_dir", "is", "not", "None", ":", "\n", "            ", "self", ".", "settings", ".", "env", ".", "workspace_dir", "=", "os", ".", "path", ".", "expanduser", "(", "self", ".", "settings", ".", "env", ".", "workspace_dir", ")", "\n", "'''2021.1.4 New function: specify checkpoint dir'''", "\n", "if", "self", ".", "settings", ".", "save_dir", "is", "None", ":", "\n", "                ", "self", ".", "_checkpoint_dir", "=", "os", ".", "path", ".", "join", "(", "self", ".", "settings", ".", "env", ".", "workspace_dir", ",", "'checkpoints'", ")", "\n", "", "else", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.train": [[52, 89], ["range", "print", "range", "base_trainer.BaseTrainer.load_checkpoint", "base_trainer.BaseTrainer.train_epoch", "print", "base_trainer.BaseTrainer.lr_scheduler.step", "base_trainer.BaseTrainer.save_checkpoint", "print", "print", "print", "traceback.format_exc"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_checkpoint", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.train_epoch", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.playback_results.Display.step", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.save_checkpoint"], ["", "print", "(", "\"checkpoints will be saved to %s\"", "%", "self", ".", "_checkpoint_dir", ")", "\n", "\n", "if", "self", ".", "settings", ".", "local_rank", "in", "[", "-", "1", ",", "0", "]", ":", "\n", "                ", "if", "not", "os", ".", "path", ".", "exists", "(", "self", ".", "_checkpoint_dir", ")", ":", "\n", "                    ", "print", "(", "\"Training with multiple GPUs. checkpoints directory doesn't exist. \"", "\n", "\"Create checkpoints directory\"", ")", "\n", "os", ".", "makedirs", "(", "self", ".", "_checkpoint_dir", ")", "\n", "", "", "", "else", ":", "\n", "            ", "self", ".", "_checkpoint_dir", "=", "None", "\n", "\n", "", "", "def", "train", "(", "self", ",", "max_epochs", ",", "load_latest", "=", "False", ",", "fail_safe", "=", "True", ",", "load_previous_ckpt", "=", "False", ",", "distill", "=", "False", ")", ":", "\n", "        ", "\"\"\"Do training for the given number of epochs.\n        args:\n            max_epochs - Max number of training epochs,\n            load_latest - Bool indicating whether to resume from latest epoch.\n            fail_safe - Bool indicating whether the training to automatically restart in case of any crashes.\n        \"\"\"", "\n", "\n", "epoch", "=", "-", "1", "\n", "num_tries", "=", "1", "\n", "for", "i", "in", "range", "(", "num_tries", ")", ":", "\n", "            ", "try", ":", "\n", "                ", "if", "load_latest", ":", "\n", "                    ", "self", ".", "load_checkpoint", "(", ")", "\n", "", "if", "load_previous_ckpt", ":", "\n", "                    ", "directory", "=", "'{}/{}'", ".", "format", "(", "self", ".", "_checkpoint_dir", ",", "self", ".", "settings", ".", "project_path_prv", ")", "\n", "self", ".", "load_state_dict", "(", "directory", ")", "\n", "", "if", "distill", ":", "\n", "                    ", "directory_teacher", "=", "'{}/{}'", ".", "format", "(", "self", ".", "_checkpoint_dir", ",", "self", ".", "settings", ".", "project_path_teacher", ")", "\n", "self", ".", "load_state_dict", "(", "directory_teacher", ",", "distill", "=", "True", ")", "\n", "", "for", "epoch", "in", "range", "(", "self", ".", "epoch", "+", "1", ",", "max_epochs", "+", "1", ")", ":", "\n", "                    ", "self", ".", "epoch", "=", "epoch", "\n", "\n", "self", ".", "train_epoch", "(", ")", "\n", "\n", "if", "self", ".", "lr_scheduler", "is", "not", "None", ":", "\n", "                        ", "if", "self", ".", "settings", ".", "scheduler_type", "!=", "'cosine'", ":", "\n", "                            ", "self", ".", "lr_scheduler", ".", "step", "(", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.train_epoch": [[91, 93], ["None"], "methods", ["None"], ["                            ", "self", ".", "lr_scheduler", ".", "step", "(", "epoch", "-", "1", ")", "\n", "# only save the last 10 checkpoints", "\n", "", "", "save_every_epoch", "=", "getattr", "(", "self", ".", "settings", ",", "\"save_every_epoch\"", ",", "False", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.save_checkpoint": [[95, 127], ["torch.save", "os.rename", "ltr.admin.multigpu.is_multi_gpu", "type", "type", "net.state_dict", "getattr", "getattr", "base_trainer.BaseTrainer.optimizer.state_dict", "os.path.exists", "os.makedirs"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.save", "home.repos.pwc.inspect_result.researchmm_Stark.admin.multigpu.is_multi_gpu"], ["                        ", "if", "self", ".", "_checkpoint_dir", ":", "\n", "                            ", "if", "self", ".", "settings", ".", "local_rank", "in", "[", "-", "1", ",", "0", "]", ":", "\n", "                                ", "self", ".", "save_checkpoint", "(", ")", "\n", "", "", "", "", "", "except", ":", "\n", "                ", "print", "(", "'Training crashed at epoch {}'", ".", "format", "(", "epoch", ")", ")", "\n", "if", "fail_safe", ":", "\n", "                    ", "self", ".", "epoch", "-=", "1", "\n", "load_latest", "=", "True", "\n", "print", "(", "'Traceback for the error!'", ")", "\n", "print", "(", "traceback", ".", "format_exc", "(", ")", ")", "\n", "print", "(", "'Restarting training from last epoch ...'", ")", "\n", "", "else", ":", "\n", "                    ", "raise", "\n", "\n", "", "", "", "print", "(", "'Finished training!'", ")", "\n", "\n", "", "def", "train_epoch", "(", "self", ")", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "\n", "", "def", "save_checkpoint", "(", "self", ")", ":", "\n", "        ", "\"\"\"Saves a checkpoint of the network and other variables.\"\"\"", "\n", "\n", "net", "=", "self", ".", "actor", ".", "net", ".", "module", "if", "multigpu", ".", "is_multi_gpu", "(", "self", ".", "actor", ".", "net", ")", "else", "self", ".", "actor", ".", "net", "\n", "\n", "actor_type", "=", "type", "(", "self", ".", "actor", ")", ".", "__name__", "\n", "net_type", "=", "type", "(", "net", ")", ".", "__name__", "\n", "state", "=", "{", "\n", "'epoch'", ":", "self", ".", "epoch", ",", "\n", "'actor_type'", ":", "actor_type", ",", "\n", "'net_type'", ":", "net_type", ",", "\n", "'net'", ":", "net", ".", "state_dict", "(", ")", ",", "\n", "'net_info'", ":", "getattr", "(", "net", ",", "'info'", ",", "None", ")", ",", "\n", "'constructor'", ":", "getattr", "(", "net", ",", "'constructor'", ",", "None", ")", ",", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_checkpoint": [[129, 207], ["ltr.admin.loading.torch_load_legacy", "ignore_fields.extend", "ltr.admin.multigpu.is_multi_gpu", "type", "type", "sorted", "isinstance", "ltr.admin.loading.torch_load_legacy.keys", "glob.glob", "print", "isinstance", "net.load_state_dict", "os.path.isdir", "base_trainer.BaseTrainer.optimizer.load_state_dict", "setattr", "sorted", "os.path.expanduser", "glob.glob", "Exception"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.loading.torch_load_legacy", "home.repos.pwc.inspect_result.researchmm_Stark.admin.multigpu.is_multi_gpu", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict"], ["'stats'", ":", "self", ".", "stats", ",", "\n", "'settings'", ":", "self", ".", "settings", "\n", "}", "\n", "\n", "directory", "=", "'{}/{}'", ".", "format", "(", "self", ".", "_checkpoint_dir", ",", "self", ".", "settings", ".", "project_path", ")", "\n", "print", "(", "directory", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "directory", ")", ":", "\n", "            ", "print", "(", "\"directory doesn't exist. creating...\"", ")", "\n", "os", ".", "makedirs", "(", "directory", ")", "\n", "\n", "# First save as a tmp file", "\n", "", "tmp_file_path", "=", "'{}/{}_ep{:04d}.tmp'", ".", "format", "(", "directory", ",", "net_type", ",", "self", ".", "epoch", ")", "\n", "torch", ".", "save", "(", "state", ",", "tmp_file_path", ")", "\n", "\n", "file_path", "=", "'{}/{}_ep{:04d}.pth.tar'", ".", "format", "(", "directory", ",", "net_type", ",", "self", ".", "epoch", ")", "\n", "\n", "# Now rename to actual checkpoint. os.rename seems to be atomic if files are on same filesystem. Not 100% sure", "\n", "os", ".", "rename", "(", "tmp_file_path", ",", "file_path", ")", "\n", "\n", "", "def", "load_checkpoint", "(", "self", ",", "checkpoint", "=", "None", ",", "fields", "=", "None", ",", "ignore_fields", "=", "None", ",", "load_constructor", "=", "False", ")", ":", "\n", "        ", "\"\"\"Loads a network checkpoint file.\n\n        Can be called in three different ways:\n            load_checkpoint():\n                Loads the latest epoch from the workspace. Use this to continue training.\n            load_checkpoint(epoch_num):\n                Loads the network at the given epoch number (int).\n            load_checkpoint(path_to_checkpoint):\n                Loads the file from the given absolute path (str).\n        \"\"\"", "\n", "\n", "net", "=", "self", ".", "actor", ".", "net", ".", "module", "if", "multigpu", ".", "is_multi_gpu", "(", "self", ".", "actor", ".", "net", ")", "else", "self", ".", "actor", ".", "net", "\n", "\n", "actor_type", "=", "type", "(", "self", ".", "actor", ")", ".", "__name__", "\n", "net_type", "=", "type", "(", "net", ")", ".", "__name__", "\n", "\n", "if", "checkpoint", "is", "None", ":", "\n", "# Load most recent checkpoint", "\n", "            ", "checkpoint_list", "=", "sorted", "(", "glob", ".", "glob", "(", "'{}/{}/{}_ep*.pth.tar'", ".", "format", "(", "self", ".", "_checkpoint_dir", ",", "\n", "self", ".", "settings", ".", "project_path", ",", "net_type", ")", ")", ")", "\n", "if", "checkpoint_list", ":", "\n", "                ", "checkpoint_path", "=", "checkpoint_list", "[", "-", "1", "]", "\n", "", "else", ":", "\n", "                ", "print", "(", "'No matching checkpoint file found'", ")", "\n", "return", "\n", "", "", "elif", "isinstance", "(", "checkpoint", ",", "int", ")", ":", "\n", "# Checkpoint is the epoch number", "\n", "            ", "checkpoint_path", "=", "'{}/{}/{}_ep{:04d}.pth.tar'", ".", "format", "(", "self", ".", "_checkpoint_dir", ",", "self", ".", "settings", ".", "project_path", ",", "\n", "net_type", ",", "checkpoint", ")", "\n", "", "elif", "isinstance", "(", "checkpoint", ",", "str", ")", ":", "\n", "# checkpoint is the path", "\n", "            ", "if", "os", ".", "path", ".", "isdir", "(", "checkpoint", ")", ":", "\n", "                ", "checkpoint_list", "=", "sorted", "(", "glob", ".", "glob", "(", "'{}/*_ep*.pth.tar'", ".", "format", "(", "checkpoint", ")", ")", ")", "\n", "if", "checkpoint_list", ":", "\n", "                    ", "checkpoint_path", "=", "checkpoint_list", "[", "-", "1", "]", "\n", "", "else", ":", "\n", "                    ", "raise", "Exception", "(", "'No checkpoint found'", ")", "\n", "", "", "else", ":", "\n", "                ", "checkpoint_path", "=", "os", ".", "path", ".", "expanduser", "(", "checkpoint", ")", "\n", "", "", "else", ":", "\n", "            ", "raise", "TypeError", "\n", "\n", "# Load network", "\n", "", "checkpoint_dict", "=", "torch", ".", "load", "(", "checkpoint_path", ",", "map_location", "=", "'cpu'", ")", "\n", "\n", "assert", "net_type", "==", "checkpoint_dict", "[", "'net_type'", "]", ",", "'Network is not of correct type.'", "\n", "\n", "if", "fields", "is", "None", ":", "\n", "            ", "fields", "=", "checkpoint_dict", ".", "keys", "(", ")", "\n", "", "if", "ignore_fields", "is", "None", ":", "\n", "            ", "ignore_fields", "=", "[", "'settings'", "]", "\n", "\n", "# Never load the scheduler. It exists in older checkpoints.", "\n", "", "ignore_fields", ".", "extend", "(", "[", "'lr_scheduler'", ",", "'constructor'", ",", "'net_type'", ",", "'actor_type'", ",", "'net_info'", "]", ")", "\n", "\n", "# Load all fields", "\n", "for", "key", "in", "fields", ":", "\n", "            ", "if", "key", "in", "ignore_fields", ":", "\n", "                ", "continue", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict": [[230, 274], ["isinstance", "print", "torch.load", "net.load_state_dict", "print", "print", "print", "type", "os.path.isdir", "lib.train.admin.multigpu.is_multi_gpu", "lib.train.admin.multigpu.is_multi_gpu", "sorted", "os.path.expanduser", "glob.glob", "Exception"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict", "home.repos.pwc.inspect_result.researchmm_Stark.admin.multigpu.is_multi_gpu", "home.repos.pwc.inspect_result.researchmm_Stark.admin.multigpu.is_multi_gpu"], ["", "def", "load_state_dict", "(", "self", ",", "checkpoint", "=", "None", ",", "distill", "=", "False", ")", ":", "\n", "        ", "\"\"\"Loads a network checkpoint file.\n\n        Can be called in three different ways:\n            load_checkpoint():\n                Loads the latest epoch from the workspace. Use this to continue training.\n            load_checkpoint(epoch_num):\n                Loads the network at the given epoch number (int).\n            load_checkpoint(path_to_checkpoint):\n                Loads the file from the given absolute path (str).\n        \"\"\"", "\n", "if", "distill", ":", "\n", "            ", "net", "=", "self", ".", "actor", ".", "net_teacher", ".", "module", "if", "multigpu", ".", "is_multi_gpu", "(", "self", ".", "actor", ".", "net_teacher", ")", "else", "self", ".", "actor", ".", "net_teacher", "\n", "", "else", ":", "\n", "            ", "net", "=", "self", ".", "actor", ".", "net", ".", "module", "if", "multigpu", ".", "is_multi_gpu", "(", "self", ".", "actor", ".", "net", ")", "else", "self", ".", "actor", ".", "net", "\n", "\n", "", "net_type", "=", "type", "(", "net", ")", ".", "__name__", "\n", "\n", "if", "isinstance", "(", "checkpoint", ",", "str", ")", ":", "\n", "# checkpoint is the path", "\n", "            ", "if", "os", ".", "path", ".", "isdir", "(", "checkpoint", ")", ":", "\n", "                ", "checkpoint_list", "=", "sorted", "(", "glob", ".", "glob", "(", "'{}/*_ep*.pth.tar'", ".", "format", "(", "checkpoint", ")", ")", ")", "\n", "if", "checkpoint_list", ":", "\n", "                    ", "checkpoint_path", "=", "checkpoint_list", "[", "-", "1", "]", "\n", "", "else", ":", "\n", "                    ", "raise", "Exception", "(", "'No checkpoint found'", ")", "\n", "", "", "else", ":", "\n", "                ", "checkpoint_path", "=", "os", ".", "path", ".", "expanduser", "(", "checkpoint", ")", "\n", "", "", "else", ":", "\n", "            ", "raise", "TypeError", "\n", "\n", "# Load network", "\n", "", "print", "(", "\"Loading pretrained model from \"", ",", "checkpoint_path", ")", "\n", "checkpoint_dict", "=", "torch", ".", "load", "(", "checkpoint_path", ",", "map_location", "=", "'cpu'", ")", "\n", "\n", "assert", "net_type", "==", "checkpoint_dict", "[", "'net_type'", "]", ",", "'Network is not of correct type.'", "\n", "\n", "missing_k", ",", "unexpected_k", "=", "net", ".", "load_state_dict", "(", "checkpoint_dict", "[", "\"net\"", "]", ",", "strict", "=", "False", ")", "\n", "print", "(", "\"previous checkpoint is loaded.\"", ")", "\n", "print", "(", "\"missing keys: \"", ",", "missing_k", ")", "\n", "print", "(", "\"unexpected keys:\"", ",", "unexpected_k", ")", "\n", "\n", "return", "True", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_lightningXtrt_distill.STARKLightningXtrtdistillActor.__init__": [[13, 25], ["BaseActor.__init__", "print", "torch.KLDivLoss", "torch.KLDivLoss", "torch.KLDivLoss", "print"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "net", ",", "objective", ",", "loss_weight", ",", "settings", ",", "net_teacher", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "net", ",", "objective", ")", "\n", "self", ".", "net_teacher", "=", "net_teacher", "\n", "self", ".", "loss_weight", "=", "loss_weight", "\n", "self", ".", "settings", "=", "settings", "\n", "self", ".", "bs", "=", "self", ".", "settings", ".", "batchsize", "# batch size", "\n", "\n", "if", "\"KL\"", "in", "self", ".", "settings", ".", "distill_loss_type", ":", "\n", "            ", "print", "(", "\"Distill model with KL Loss\"", ")", "\n", "self", ".", "distill_loss_kl", "=", "nn", ".", "KLDivLoss", "(", "reduction", "=", "\"batchmean\"", ")", "\n", "", "if", "\"L1\"", "in", "self", ".", "settings", ".", "distill_loss_type", ":", "\n", "            ", "print", "(", "\"Distill model with L1 Loss\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_lightningXtrt_distill.STARKLightningXtrtdistillActor.__call__": [[26, 47], ["stark_lightningXtrt_distill.STARKLightningXtrtdistillActor.forward_pass", "stark_lightningXtrt_distill.STARKLightningXtrtdistillActor.forward_pass_teacher", "stark_lightningXtrt_distill.STARKLightningXtrtdistillActor.compute_losses"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_s.STARKSActor.forward_pass", "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_lightningXtrt_distill.STARKLightningXtrtdistillActor.forward_pass_teacher", "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_st.STARKSTActor.compute_losses"], ["", "", "def", "__call__", "(", "self", ",", "data", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            data - The input data, should contain the fields 'template', 'search', 'gt_bbox'.\n            template_images: (N_t, batch, 3, H, W)\n            search_images: (N_s, batch, 3, H, W)\n        returns:\n            loss    - the training loss\n            status  -  dict containing detailed losses\n        \"\"\"", "\n", "# forward student", "\n", "out_dict", "=", "self", ".", "forward_pass", "(", "self", ".", "net", ",", "data", ")", "\n", "# forward teacher", "\n", "out_dict_teacher", "=", "self", ".", "forward_pass_teacher", "(", "self", ".", "net_teacher", ",", "data", ",", "True", ",", "True", ")", "\n", "\n", "# process the groundtruth", "\n", "gt_bboxes", "=", "data", "[", "'search_anno'", "]", "# (batch, 4) (x1,y1,w,h)", "\n", "\n", "# compute losses", "\n", "loss", ",", "status", "=", "self", ".", "compute_losses", "(", "out_dict", ",", "out_dict_teacher", ",", "gt_bboxes", "[", "0", "]", ")", "\n", "return", "loss", ",", "status", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_lightningXtrt_distill.STARKLightningXtrtdistillActor.forward_pass": [[48, 69], ["range", "data[].view", "data[].view", "feat_dict_list.append", "lib.utils.merge.get_qkv", "net", "[].view", "[].view", "feat_dict_list.append", "net", "net"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.merge.get_qkv"], ["", "def", "forward_pass", "(", "self", ",", "net", ",", "data", ")", ":", "\n", "        ", "feat_dict_list", "=", "[", "]", "\n", "# process the templates", "\n", "for", "i", "in", "range", "(", "self", ".", "settings", ".", "num_template", ")", ":", "\n", "            ", "template_img_i", "=", "data", "[", "'template_images'", "]", "[", "i", "]", ".", "view", "(", "-", "1", ",", "\n", "*", "data", "[", "'template_images'", "]", ".", "shape", "[", "2", ":", "]", ")", "# (batch, 3, 128, 128)", "\n", "template_att_i", "=", "data", "[", "'template_att'", "]", "[", "i", "]", ".", "view", "(", "-", "1", ",", "*", "data", "[", "'template_att'", "]", ".", "shape", "[", "2", ":", "]", ")", "# (batch, 128, 128)", "\n", "feat_dict_list", ".", "append", "(", "net", "(", "img", "=", "template_img_i", ",", "mask", "=", "template_att_i", ",", "\n", "mode", "=", "'backbone'", ",", "zx", "=", "\"template%d\"", "%", "i", ")", ")", "\n", "\n", "# process the search regions (t-th frame)", "\n", "", "search_img", "=", "data", "[", "'search_images'", "]", ".", "view", "(", "-", "1", ",", "*", "data", "[", "'search_images'", "]", ".", "shape", "[", "2", ":", "]", ")", "# (batch, 3, 320, 320)", "\n", "search_att", "=", "data", "[", "'search_att'", "]", ".", "view", "(", "-", "1", ",", "*", "data", "[", "'search_att'", "]", ".", "shape", "[", "2", ":", "]", ")", "# (batch, 320, 320)", "\n", "feat_dict_list", ".", "append", "(", "net", "(", "img", "=", "search_img", ",", "mask", "=", "search_att", ",", "mode", "=", "'backbone'", ",", "zx", "=", "\"search\"", ")", ")", "\n", "\n", "# run the transformer and compute losses", "\n", "q", ",", "k", ",", "v", ",", "key_padding_mask", "=", "get_qkv", "(", "feat_dict_list", ")", "\n", "# for student network, here we output the original logits without softmax", "\n", "out_dict", ",", "_", ",", "_", "=", "net", "(", "q", "=", "q", ",", "k", "=", "k", ",", "v", "=", "v", ",", "key_padding_mask", "=", "key_padding_mask", ",", "mode", "=", "\"transformer\"", ",", "softmax", "=", "False", ")", "\n", "# out_dict: (B, N, C), outputs_coord: (1, B, N, C), target_query: (1, B, N, C)", "\n", "return", "out_dict", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_lightningXtrt_distill.STARKLightningXtrtdistillActor.forward_pass_teacher": [[70, 91], ["range", "data[].view", "data[].view", "feat_dict_list.append", "lib.utils.merge.merge_template_search", "net", "[].view", "[].view", "feat_dict_list.append", "net", "net"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.merge.merge_template_search"], ["", "def", "forward_pass_teacher", "(", "self", ",", "net", ",", "data", ",", "run_box_head", ",", "run_cls_head", ")", ":", "\n", "        ", "feat_dict_list", "=", "[", "]", "\n", "# process the templates", "\n", "for", "i", "in", "range", "(", "self", ".", "settings", ".", "num_template", ")", ":", "\n", "            ", "template_img_i", "=", "data", "[", "'template_images'", "]", "[", "i", "]", ".", "view", "(", "-", "1", ",", "\n", "*", "data", "[", "'template_images'", "]", ".", "shape", "[", "2", ":", "]", ")", "# (batch, 3, 128, 128)", "\n", "template_att_i", "=", "data", "[", "'template_att'", "]", "[", "i", "]", ".", "view", "(", "-", "1", ",", "*", "data", "[", "'template_att'", "]", ".", "shape", "[", "2", ":", "]", ")", "# (batch, 128, 128)", "\n", "feat_dict_list", ".", "append", "(", "net", "(", "img", "=", "template_img_i", ",", "mask", "=", "template_att_i", ",", "\n", "mode", "=", "'backbone'", ",", "zx", "=", "\"template%d\"", "%", "i", ")", ")", "\n", "\n", "# process the search regions (t-th frame)", "\n", "", "search_img", "=", "data", "[", "'search_images'", "]", ".", "view", "(", "-", "1", ",", "*", "data", "[", "'search_images'", "]", ".", "shape", "[", "2", ":", "]", ")", "# (batch, 3, 320, 320)", "\n", "search_att", "=", "data", "[", "'search_att'", "]", ".", "view", "(", "-", "1", ",", "*", "data", "[", "'search_att'", "]", ".", "shape", "[", "2", ":", "]", ")", "# (batch, 320, 320)", "\n", "feat_dict_list", ".", "append", "(", "net", "(", "img", "=", "search_img", ",", "mask", "=", "search_att", ",", "mode", "=", "'backbone'", ",", "zx", "=", "\"search\"", ")", ")", "\n", "\n", "# run the transformer and compute losses", "\n", "seq_dict", "=", "merge_template_search", "(", "feat_dict_list", ")", "\n", "out_dict", ",", "_", ",", "_", "=", "net", "(", "seq_dict", "=", "seq_dict", ",", "mode", "=", "\"transformer\"", ",", "run_box_head", "=", "run_box_head", ",", "\n", "run_cls_head", "=", "run_cls_head", ")", "\n", "# out_dict: (B, N, C), outputs_coord: (1, B, N, C), target_query: (1, B, N, C)", "\n", "return", "out_dict", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_lightningXtrt_distill.STARKLightningXtrtdistillActor.compute_losses": [[92, 131], ["torch.isnan().any", "torch.isnan().any", "torch.isnan().any", "torch.isnan().any", "torch.isnan().any", "torch.isnan().any", "torch.isnan().any", "torch.isnan().any", "torch.isnan().any", "lib.utils.box_ops.box_cxcywh_to_xyxy", "lib.utils.box_ops.box_cxcywh_to_xyxy", "lib.utils.box_ops.box_xywh_to_xyxy().clamp", "stark_lightningXtrt_distill.STARKLightningXtrtdistillActor.compute_distill_losses", "ValueError", "iou.detach().mean", "torch.tensor().cuda.detach().mean", "torch.tensor().cuda.detach().mean", "torch.tensor().cuda.detach().mean", "torch.isnan", "torch.isnan", "torch.isnan", "torch.isnan", "torch.isnan", "torch.isnan", "torch.isnan", "torch.isnan", "torch.isnan", "lib.utils.box_ops.box_xywh_to_xyxy", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "loss.item", "giou_loss.item", "torch.nn.functional.l1_loss.item", "torch.nn.functional.l1_loss.item", "torch.nn.functional.l1_loss.item", "dis_loss_l1.item", "dis_loss_kl.item", "iou.detach().mean.item", "torch.tensor().cuda.detach().mean.item", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "iou.detach", "torch.tensor().cuda.detach", "torch.tensor().cuda.detach", "torch.tensor().cuda.detach", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.box_cxcywh_to_xyxy", "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.box_cxcywh_to_xyxy", "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_lightningXtrt_distill.STARKLightningXtrtdistillActor.compute_distill_losses", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.box_xywh_to_xyxy"], ["", "def", "compute_losses", "(", "self", ",", "out_dict", ",", "out_dict_teacher", ",", "gt_bbox", ",", "return_status", "=", "True", ")", ":", "\n", "        ", "pred_boxes", "=", "out_dict", "[", "\"pred_boxes\"", "]", "\n", "pred_boxes_teacher", "=", "out_dict_teacher", "[", "\"pred_boxes\"", "]", "\n", "# Get boxes", "\n", "if", "torch", ".", "isnan", "(", "pred_boxes", ")", ".", "any", "(", ")", ":", "\n", "            ", "raise", "ValueError", "(", "\"Network outputs is NAN! Stop Training\"", ")", "\n", "", "pred_boxes_vec", "=", "box_cxcywh_to_xyxy", "(", "pred_boxes", ")", "# (B,4) (x1,y1,x2,y2)", "\n", "pred_boxes_vec_teacher", "=", "box_cxcywh_to_xyxy", "(", "pred_boxes_teacher", ")", "# (B,4) (x1,y1,x2,y2)", "\n", "gt_boxes_vec", "=", "box_xywh_to_xyxy", "(", "gt_bbox", ")", ".", "clamp", "(", "min", "=", "0.0", ",", "max", "=", "1.0", ")", "# (B,4)", "\n", "# compute giou and iou", "\n", "try", ":", "\n", "            ", "giou_loss", ",", "iou", "=", "self", ".", "objective", "[", "'giou'", "]", "(", "pred_boxes_vec", ",", "gt_boxes_vec", ")", "# (B,4) (B,4)", "\n", "", "except", ":", "\n", "            ", "giou_loss", ",", "iou", "=", "torch", ".", "tensor", "(", "0.0", ")", ".", "cuda", "(", ")", ",", "torch", ".", "tensor", "(", "0.0", ")", ".", "cuda", "(", ")", "\n", "", "try", ":", "\n", "            ", "_", ",", "iou_teacher", "=", "self", ".", "objective", "[", "'giou'", "]", "(", "pred_boxes_vec_teacher", ",", "gt_boxes_vec", ")", "\n", "", "except", ":", "\n", "            ", "iou_teacher", "=", "torch", ".", "tensor", "(", "0.0", ")", ".", "cuda", "(", ")", "\n", "# compute l1 loss", "\n", "", "l1_loss", "=", "self", ".", "objective", "[", "'l1'", "]", "(", "pred_boxes_vec", ",", "gt_boxes_vec", ")", "# (BN,4) (BN,4)", "\n", "# compute distillation loss", "\n", "dis_loss_l1", ",", "dis_loss_kl", "=", "self", ".", "compute_distill_losses", "(", "out_dict", ",", "out_dict_teacher", ")", "\n", "# weighted sum", "\n", "loss", "=", "self", ".", "loss_weight", "[", "'giou'", "]", "*", "giou_loss", "+", "self", ".", "loss_weight", "[", "'l1'", "]", "*", "l1_loss", "+", "self", ".", "loss_weight", "[", "'l1'", "]", "*", "dis_loss_l1", "+", "self", ".", "loss_weight", "[", "'l1'", "]", "*", "dis_loss_kl", "\n", "if", "return_status", ":", "\n", "# status for log", "\n", "            ", "mean_iou", "=", "iou", ".", "detach", "(", ")", ".", "mean", "(", ")", "\n", "mean_iou_teacher", "=", "iou_teacher", ".", "detach", "(", ")", ".", "mean", "(", ")", "\n", "status", "=", "{", "\"Loss/total\"", ":", "loss", ".", "item", "(", ")", ",", "\n", "\"Loss/giou\"", ":", "giou_loss", ".", "item", "(", ")", ",", "\n", "\"Loss/l1\"", ":", "l1_loss", ".", "item", "(", ")", ",", "\n", "\"Loss/distill_l1\"", ":", "dis_loss_l1", ".", "item", "(", ")", ",", "\n", "\"Loss/distill_kl\"", ":", "dis_loss_kl", ".", "item", "(", ")", ",", "\n", "\"IoU\"", ":", "mean_iou", ".", "item", "(", ")", ",", "\n", "\"IoU_teacher\"", ":", "mean_iou_teacher", ".", "item", "(", ")", "}", "\n", "return", "loss", ",", "status", "\n", "", "else", ":", "\n", "            ", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_lightningXtrt_distill.STARKLightningXtrtdistillActor.compute_distill_losses": [[132, 145], ["torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "stark_lightningXtrt_distill.STARKLightningXtrtdistillActor.distill_loss_kl", "stark_lightningXtrt_distill.STARKLightningXtrtdistillActor.distill_loss_kl", "torch.log_softmax", "torch.log_softmax", "torch.log_softmax", "torch.log_softmax", "torch.log_softmax", "torch.log_softmax", "torch.nn.functional.l1_loss", "torch.nn.functional.l1_loss", "torch.nn.functional.l1_loss", "torch.nn.functional.l1_loss", "torch.nn.functional.l1_loss", "torch.nn.functional.l1_loss", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.softmax", "torch.softmax", "torch.softmax", "torch.softmax", "torch.softmax", "torch.softmax"], "methods", ["None"], ["", "", "def", "compute_distill_losses", "(", "self", ",", "out_dict", ",", "out_dict_t", ")", ":", "\n", "        ", "ptl", ",", "pbr", "=", "out_dict", "[", "\"prob_tl\"", "]", ",", "out_dict", "[", "\"prob_br\"", "]", "\n", "ptl_t", ",", "pbr_t", "=", "out_dict_t", "[", "\"prob_tl\"", "]", ",", "out_dict_t", "[", "\"prob_br\"", "]", "\n", "dis_loss_l1", ",", "dis_loss_kl", "=", "torch", ".", "tensor", "(", "0.0", ")", ".", "cuda", "(", ")", ",", "torch", ".", "tensor", "(", "0.0", ")", ".", "cuda", "(", ")", "\n", "if", "\"KL\"", "in", "self", ".", "settings", ".", "distill_loss_type", ":", "\n", "            ", "dis_loss_kl_tl", "=", "self", ".", "distill_loss_kl", "(", "F", ".", "log_softmax", "(", "ptl", ",", "dim", "=", "1", ")", ",", "ptl_t", ")", "\n", "dis_loss_kl_br", "=", "self", ".", "distill_loss_kl", "(", "F", ".", "log_softmax", "(", "pbr", ",", "dim", "=", "1", ")", ",", "pbr_t", ")", "\n", "dis_loss_kl", "=", "(", "dis_loss_kl_tl", "+", "dis_loss_kl_br", ")", "/", "2", "\n", "", "if", "\"L1\"", "in", "self", ".", "settings", ".", "distill_loss_type", ":", "\n", "            ", "dis_loss_l1_tl", "=", "l1_loss", "(", "F", ".", "softmax", "(", "ptl", ")", ",", "ptl_t", ",", "reduction", "=", "\"sum\"", ")", "/", "self", ".", "bs", "\n", "dis_loss_l1_br", "=", "l1_loss", "(", "F", ".", "softmax", "(", "pbr", ")", ",", "pbr_t", ",", "reduction", "=", "\"sum\"", ")", "/", "self", ".", "bs", "\n", "dis_loss_l1", "=", "(", "dis_loss_l1_tl", "+", "dis_loss_l1_br", ")", "/", "2", "\n", "", "return", "dis_loss_l1", ",", "dis_loss_kl", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_lightningXtrt.STARKLightningXtrtActor.__init__": [[12, 17], ["BaseActor.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "net", ",", "objective", ",", "loss_weight", ",", "settings", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "net", ",", "objective", ")", "\n", "self", ".", "loss_weight", "=", "loss_weight", "\n", "self", ".", "settings", "=", "settings", "\n", "self", ".", "bs", "=", "self", ".", "settings", ".", "batchsize", "# batch size", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_lightningXtrt.STARKLightningXtrtActor.__call__": [[18, 38], ["stark_lightningXtrt.STARKLightningXtrtActor.forward_pass", "stark_lightningXtrt.STARKLightningXtrtActor.compute_losses"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_s.STARKSActor.forward_pass", "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_st.STARKSTActor.compute_losses"], ["", "def", "__call__", "(", "self", ",", "data", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            data - The input data, should contain the fields 'template', 'search', 'gt_bbox'.\n            template_images: (N_t, batch, 3, H, W)\n            search_images: (N_s, batch, 3, H, W)\n        returns:\n            loss    - the training loss\n            status  -  dict containing detailed losses\n        \"\"\"", "\n", "# forward pass", "\n", "out_dict", "=", "self", ".", "forward_pass", "(", "data", ",", "run_box_head", "=", "True", ",", "run_cls_head", "=", "False", ")", "\n", "\n", "# process the groundtruth", "\n", "gt_bboxes", "=", "data", "[", "'search_anno'", "]", "# (batch, 4) (x1,y1,w,h)", "\n", "\n", "# compute losses", "\n", "pred_boxes", "=", "out_dict", "[", "\"pred_boxes\"", "]", "\n", "loss", ",", "status", "=", "self", ".", "compute_losses", "(", "pred_boxes", ",", "gt_bboxes", "[", "0", "]", ")", "\n", "return", "loss", ",", "status", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_lightningXtrt.STARKLightningXtrtActor.forward_pass": [[39, 59], ["range", "data[].view", "data[].view", "feat_dict_list.append", "lib.utils.merge.get_qkv", "stark_lightningXtrt.STARKLightningXtrtActor.net", "[].view", "[].view", "feat_dict_list.append", "stark_lightningXtrt.STARKLightningXtrtActor.net", "stark_lightningXtrt.STARKLightningXtrtActor.net"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.merge.get_qkv"], ["", "def", "forward_pass", "(", "self", ",", "data", ",", "run_box_head", ",", "run_cls_head", ")", ":", "\n", "        ", "feat_dict_list", "=", "[", "]", "\n", "# process the templates", "\n", "for", "i", "in", "range", "(", "self", ".", "settings", ".", "num_template", ")", ":", "\n", "            ", "template_img_i", "=", "data", "[", "'template_images'", "]", "[", "i", "]", ".", "view", "(", "-", "1", ",", "\n", "*", "data", "[", "'template_images'", "]", ".", "shape", "[", "2", ":", "]", ")", "# (batch, 3, 128, 128)", "\n", "template_att_i", "=", "data", "[", "'template_att'", "]", "[", "i", "]", ".", "view", "(", "-", "1", ",", "*", "data", "[", "'template_att'", "]", ".", "shape", "[", "2", ":", "]", ")", "# (batch, 128, 128)", "\n", "feat_dict_list", ".", "append", "(", "self", ".", "net", "(", "img", "=", "template_img_i", ",", "mask", "=", "template_att_i", ",", "\n", "mode", "=", "'backbone'", ",", "zx", "=", "\"template%d\"", "%", "i", ")", ")", "\n", "\n", "# process the search regions (t-th frame)", "\n", "", "search_img", "=", "data", "[", "'search_images'", "]", ".", "view", "(", "-", "1", ",", "*", "data", "[", "'search_images'", "]", ".", "shape", "[", "2", ":", "]", ")", "# (batch, 3, 320, 320)", "\n", "search_att", "=", "data", "[", "'search_att'", "]", ".", "view", "(", "-", "1", ",", "*", "data", "[", "'search_att'", "]", ".", "shape", "[", "2", ":", "]", ")", "# (batch, 320, 320)", "\n", "feat_dict_list", ".", "append", "(", "self", ".", "net", "(", "img", "=", "search_img", ",", "mask", "=", "search_att", ",", "mode", "=", "'backbone'", ",", "zx", "=", "\"search\"", ")", ")", "\n", "\n", "# run the transformer and compute losses", "\n", "q", ",", "k", ",", "v", ",", "key_padding_mask", "=", "get_qkv", "(", "feat_dict_list", ")", "\n", "out_dict", ",", "_", ",", "_", "=", "self", ".", "net", "(", "q", "=", "q", ",", "k", "=", "k", ",", "v", "=", "v", ",", "key_padding_mask", "=", "key_padding_mask", ",", "mode", "=", "\"transformer\"", ")", "\n", "# out_dict: (B, N, C), outputs_coord: (1, B, N, C), target_query: (1, B, N, C)", "\n", "return", "out_dict", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_lightningXtrt.STARKLightningXtrtActor.compute_losses": [[60, 85], ["torch.isnan().any", "torch.isnan().any", "torch.isnan().any", "torch.isnan().any", "torch.isnan().any", "torch.isnan().any", "torch.isnan().any", "torch.isnan().any", "torch.isnan().any", "lib.utils.box_ops.box_cxcywh_to_xyxy", "lib.utils.box_ops.box_xywh_to_xyxy().clamp", "ValueError", "iou.detach().mean", "torch.isnan", "torch.isnan", "torch.isnan", "torch.isnan", "torch.isnan", "torch.isnan", "torch.isnan", "torch.isnan", "torch.isnan", "lib.utils.box_ops.box_xywh_to_xyxy", "loss.item", "giou_loss.item", "l1_loss.item", "iou.detach().mean.item", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "torch.tensor().cuda", "iou.detach", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.box_cxcywh_to_xyxy", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.box_xywh_to_xyxy"], ["", "def", "compute_losses", "(", "self", ",", "pred_boxes", ",", "gt_bbox", ",", "return_status", "=", "True", ")", ":", "\n", "# Get boxes", "\n", "        ", "if", "torch", ".", "isnan", "(", "pred_boxes", ")", ".", "any", "(", ")", ":", "\n", "            ", "raise", "ValueError", "(", "\"Network outputs is NAN! Stop Training\"", ")", "\n", "", "pred_boxes_vec", "=", "box_cxcywh_to_xyxy", "(", "pred_boxes", ")", "# (B,4) (x1,y1,x2,y2)", "\n", "gt_boxes_vec", "=", "box_xywh_to_xyxy", "(", "gt_bbox", ")", ".", "clamp", "(", "min", "=", "0.0", ",", "max", "=", "1.0", ")", "# (B,4)", "\n", "# compute giou and iou", "\n", "try", ":", "\n", "            ", "giou_loss", ",", "iou", "=", "self", ".", "objective", "[", "'giou'", "]", "(", "pred_boxes_vec", ",", "gt_boxes_vec", ")", "# (B,4) (B,4)", "\n", "", "except", ":", "\n", "            ", "giou_loss", ",", "iou", "=", "torch", ".", "tensor", "(", "0.0", ")", ".", "cuda", "(", ")", ",", "torch", ".", "tensor", "(", "0.0", ")", ".", "cuda", "(", ")", "\n", "# compute l1 loss", "\n", "", "l1_loss", "=", "self", ".", "objective", "[", "'l1'", "]", "(", "pred_boxes_vec", ",", "gt_boxes_vec", ")", "# (BN,4) (BN,4)", "\n", "# weighted sum", "\n", "loss", "=", "self", ".", "loss_weight", "[", "'giou'", "]", "*", "giou_loss", "+", "self", ".", "loss_weight", "[", "'l1'", "]", "*", "l1_loss", "\n", "if", "return_status", ":", "\n", "# status for log", "\n", "            ", "mean_iou", "=", "iou", ".", "detach", "(", ")", ".", "mean", "(", ")", "\n", "status", "=", "{", "\"Loss/total\"", ":", "loss", ".", "item", "(", ")", ",", "\n", "\"Loss/giou\"", ":", "giou_loss", ".", "item", "(", ")", ",", "\n", "\"Loss/l1\"", ":", "l1_loss", ".", "item", "(", ")", ",", "\n", "\"IoU\"", ":", "mean_iou", ".", "item", "(", ")", "}", "\n", "return", "loss", ",", "status", "\n", "", "else", ":", "\n", "            ", "return", "loss", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_s.STARKSActor.__init__": [[10, 15], ["BaseActor.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["save_dir", "=", "env_settings", "(", ")", ".", "save_dir", "\n", "# update default config from yaml file", "\n", "yaml_file", "=", "os", ".", "path", ".", "join", "(", "prj_dir", ",", "'experiments/stark_s/%s.yaml'", "%", "yaml_name", ")", "\n", "update_config_from_file", "(", "yaml_file", ")", "\n", "params", ".", "cfg", "=", "cfg", "\n", "print", "(", "\"test config: \"", ",", "cfg", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_s.STARKSActor.__call__": [[16, 36], ["stark_s.STARKSActor.forward_pass", "stark_s.STARKSActor.compute_losses"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_s.STARKSActor.forward_pass", "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_st.STARKSTActor.compute_losses"], ["\n", "# template and search region", "\n", "params", ".", "template_factor", "=", "cfg", ".", "TEST", ".", "TEMPLATE_FACTOR", "\n", "params", ".", "template_size", "=", "cfg", ".", "TEST", ".", "TEMPLATE_SIZE", "\n", "params", ".", "search_factor", "=", "cfg", ".", "TEST", ".", "SEARCH_FACTOR", "\n", "params", ".", "search_size", "=", "cfg", ".", "TEST", ".", "SEARCH_SIZE", "\n", "\n", "# Network checkpoint path", "\n", "params", ".", "checkpoint", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "\"checkpoints/train/stark_s/%s/STARKS_ep%04d.pth.tar\"", "%", "\n", "(", "yaml_name", ",", "cfg", ".", "TEST", ".", "EPOCH", ")", ")", "\n", "\n", "# whether to save boxes from all queries", "\n", "params", ".", "save_all_boxes", "=", "False", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_s.STARKSActor.forward_pass": [[37, 55], ["range", "data[].view", "data[].view", "feat_dict_list.append", "lib.utils.merge.merge_template_search", "stark_s.STARKSActor.net", "[].view", "[].view", "feat_dict_list.append", "stark_s.STARKSActor.net", "stark_s.STARKSActor.net", "lib.utils.misc.NestedTensor", "lib.utils.misc.NestedTensor"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.merge.merge_template_search"], []], "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_s.STARKSActor.compute_losses": [[56, 83], ["torch.isnan().any", "pred_boxes.size", "lib.utils.box_ops.box_cxcywh_to_xyxy().view", "[].repeat().view().clamp", "ValueError", "iou.detach().mean", "torch.isnan", "lib.utils.box_ops.box_cxcywh_to_xyxy", "[].repeat().view", "loss.item", "giou_loss.item", "l1_loss.item", "iou.detach().mean.item", "torch.tensor().cuda", "torch.tensor().cuda", "iou.detach", "[].repeat", "torch.tensor", "torch.tensor", "lib.utils.box_ops.box_xywh_to_xyxy"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.box_cxcywh_to_xyxy", "home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.box_xywh_to_xyxy"], []], "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.__init__": [[7, 15], ["None"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "net", ",", "objective", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            net - The network to train\n            objective - The loss function\n        \"\"\"", "\n", "self", ".", "net", "=", "net", "\n", "self", ".", "objective", "=", "objective", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.__call__": [[16, 27], ["None"], "methods", ["None"], ["", "def", "__call__", "(", "self", ",", "data", ":", "TensorDict", ")", ":", "\n", "        ", "\"\"\" Called in each training iteration. Should pass in input data through the network, calculate the loss, and\n        return the training stats for the input data\n        args:\n            data - A TensorDict containing all the necessary data blocks.\n\n        returns:\n            loss    - loss for the input data\n            stats   - a dict containing detailed losses\n        \"\"\"", "\n", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to": [[28, 34], ["base_actor.BaseActor.net.to"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to"], ["", "def", "to", "(", "self", ",", "device", ")", ":", "\n", "        ", "\"\"\" Move the network to device\n        args:\n            device - device to use. 'cpu' or 'cuda'\n        \"\"\"", "\n", "self", ".", "net", ".", "to", "(", "device", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.train": [[35, 41], ["base_actor.BaseActor.net.train"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train"], ["", "def", "train", "(", "self", ",", "mode", "=", "True", ")", ":", "\n", "        ", "\"\"\" Set whether the network is in train mode.\n        args:\n            mode (True) - Bool specifying whether in training mode.\n        \"\"\"", "\n", "self", ".", "net", ".", "train", "(", "mode", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.eval": [[42, 45], ["base_actor.BaseActor.train"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train"], ["", "def", "eval", "(", "self", ")", ":", "\n", "        ", "\"\"\" Set network to eval mode\"\"\"", "\n", "self", ".", "train", "(", "False", ")", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_st.STARKSTActor.__init__": [[6, 11], ["STARKSActor.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["\n", "def", "parameters", "(", "yaml_name", ":", "str", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "prj_dir", "=", "env_settings", "(", ")", ".", "prj_dir", "\n", "save_dir", "=", "env_settings", "(", ")", ".", "save_dir", "\n", "# update default config from yaml file", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_st.STARKSTActor.__call__": [[12, 31], ["stark_st.STARKSTActor.forward_pass", "data[].view", "stark_st.STARKSTActor.compute_losses"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_s.STARKSActor.forward_pass", "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_st.STARKSTActor.compute_losses"], ["yaml_file", "=", "os", ".", "path", ".", "join", "(", "prj_dir", ",", "'experiments/stark_st2/%s.yaml'", "%", "yaml_name", ")", "\n", "update_config_from_file", "(", "yaml_file", ")", "\n", "params", ".", "cfg", "=", "cfg", "\n", "print", "(", "\"test config: \"", ",", "cfg", ")", "\n", "\n", "# template and search region", "\n", "params", ".", "template_factor", "=", "cfg", ".", "TEST", ".", "TEMPLATE_FACTOR", "\n", "params", ".", "template_size", "=", "cfg", ".", "TEST", ".", "TEMPLATE_SIZE", "\n", "params", ".", "search_factor", "=", "cfg", ".", "TEST", ".", "SEARCH_FACTOR", "\n", "params", ".", "search_size", "=", "cfg", ".", "TEST", ".", "SEARCH_SIZE", "\n", "\n", "# Network checkpoint path", "\n", "params", ".", "checkpoint", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "\"checkpoints/train/stark_st2/%s/STARKST_ep%04d.pth.tar\"", "%", "\n", "(", "yaml_name", ",", "cfg", ".", "TEST", ".", "EPOCH", ")", ")", "\n", "\n", "# whether to save boxes from all queries", "\n", "params", ".", "save_all_boxes", "=", "False", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.stark_st.STARKSTActor.compute_losses": [[32, 41], ["pred_dict[].view", "loss.item"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.actors.tracking.DiMPActor.__init__": [[7, 12], ["BaseActor.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "net", ",", "objective", ",", "loss_weight", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "net", ",", "objective", ")", "\n", "if", "loss_weight", "is", "None", ":", "\n", "            ", "loss_weight", "=", "{", "'iou'", ":", "1.0", ",", "'test_clf'", ":", "1.0", "}", "\n", "", "self", ".", "loss_weight", "=", "loss_weight", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.tracking.DiMPActor.__call__": [[13, 71], ["tracking.DiMPActor.net", "clf_loss_test.item", "tracking.DiMPActor.loss_weight.keys", "tracking.DiMPActor.loss_weight.keys", "isinstance", "loss.item", "loss_iou.item", "loss_target_classifier.item", "tracking.DiMPActor.loss_weight.keys", "loss_test_init_clf.item", "tracking.DiMPActor.loss_weight.keys", "sum.item", "len", "clf_losses_test[].item", "sum", "len", "sum", "sum().item", "len", "zip", "len", "sum"], "methods", ["None"], ["", "def", "__call__", "(", "self", ",", "data", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            data - The input data, should contain the fields 'train_images', 'test_images', 'train_anno',\n                    'test_proposals', 'proposal_iou' and 'test_label'.\n\n        returns:\n            loss    - the training loss\n            stats  -  dict containing detailed losses\n        \"\"\"", "\n", "# Run network", "\n", "target_scores", ",", "iou_pred", "=", "self", ".", "net", "(", "train_imgs", "=", "data", "[", "'train_images'", "]", ",", "\n", "test_imgs", "=", "data", "[", "'test_images'", "]", ",", "\n", "train_bb", "=", "data", "[", "'train_anno'", "]", ",", "\n", "test_proposals", "=", "data", "[", "'test_proposals'", "]", ")", "\n", "\n", "# Classification losses for the different optimization iterations", "\n", "clf_losses_test", "=", "[", "self", ".", "objective", "[", "'test_clf'", "]", "(", "s", ",", "data", "[", "'test_label'", "]", ",", "data", "[", "'test_anno'", "]", ")", "for", "s", "in", "target_scores", "]", "\n", "\n", "# Loss of the final filter", "\n", "clf_loss_test", "=", "clf_losses_test", "[", "-", "1", "]", "\n", "loss_target_classifier", "=", "self", ".", "loss_weight", "[", "'test_clf'", "]", "*", "clf_loss_test", "\n", "\n", "# Compute loss for ATOM IoUNet", "\n", "loss_iou", "=", "self", ".", "loss_weight", "[", "'iou'", "]", "*", "self", ".", "objective", "[", "'iou'", "]", "(", "iou_pred", ",", "data", "[", "'proposal_iou'", "]", ")", "\n", "\n", "# Loss for the initial filter iteration", "\n", "loss_test_init_clf", "=", "0", "\n", "if", "'test_init_clf'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", ":", "\n", "            ", "loss_test_init_clf", "=", "self", ".", "loss_weight", "[", "'test_init_clf'", "]", "*", "clf_losses_test", "[", "0", "]", "\n", "\n", "# Loss for the intermediate filter iterations", "\n", "", "loss_test_iter_clf", "=", "0", "\n", "if", "'test_iter_clf'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", ":", "\n", "            ", "test_iter_weights", "=", "self", ".", "loss_weight", "[", "'test_iter_clf'", "]", "\n", "if", "isinstance", "(", "test_iter_weights", ",", "list", ")", ":", "\n", "                ", "loss_test_iter_clf", "=", "sum", "(", "[", "a", "*", "b", "for", "a", ",", "b", "in", "zip", "(", "test_iter_weights", ",", "clf_losses_test", "[", "1", ":", "-", "1", "]", ")", "]", ")", "\n", "", "else", ":", "\n", "                ", "loss_test_iter_clf", "=", "(", "test_iter_weights", "/", "(", "len", "(", "clf_losses_test", ")", "-", "2", ")", ")", "*", "sum", "(", "clf_losses_test", "[", "1", ":", "-", "1", "]", ")", "\n", "\n", "# Total loss", "\n", "", "", "loss", "=", "loss_iou", "+", "loss_target_classifier", "+", "loss_test_init_clf", "+", "loss_test_iter_clf", "\n", "\n", "# Log stats", "\n", "stats", "=", "{", "'Loss/total'", ":", "loss", ".", "item", "(", ")", ",", "\n", "'Loss/iou'", ":", "loss_iou", ".", "item", "(", ")", ",", "\n", "'Loss/target_clf'", ":", "loss_target_classifier", ".", "item", "(", ")", "}", "\n", "if", "'test_init_clf'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", ":", "\n", "            ", "stats", "[", "'Loss/test_init_clf'", "]", "=", "loss_test_init_clf", ".", "item", "(", ")", "\n", "", "if", "'test_iter_clf'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", ":", "\n", "            ", "stats", "[", "'Loss/test_iter_clf'", "]", "=", "loss_test_iter_clf", ".", "item", "(", ")", "\n", "", "stats", "[", "'ClfTrain/test_loss'", "]", "=", "clf_loss_test", ".", "item", "(", ")", "\n", "if", "len", "(", "clf_losses_test", ")", ">", "0", ":", "\n", "            ", "stats", "[", "'ClfTrain/test_init_loss'", "]", "=", "clf_losses_test", "[", "0", "]", ".", "item", "(", ")", "\n", "if", "len", "(", "clf_losses_test", ")", ">", "2", ":", "\n", "                ", "stats", "[", "'ClfTrain/test_iter_loss'", "]", "=", "sum", "(", "clf_losses_test", "[", "1", ":", "-", "1", "]", ")", ".", "item", "(", ")", "/", "(", "len", "(", "clf_losses_test", ")", "-", "2", ")", "\n", "\n", "", "", "return", "loss", ",", "stats", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.tracking.KLDiMPActor.__init__": [[75, 80], ["BaseActor.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "net", ",", "objective", ",", "loss_weight", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "net", ",", "objective", ")", "\n", "if", "loss_weight", "is", "None", ":", "\n", "            ", "loss_weight", "=", "{", "'bb_ce'", ":", "1.0", "}", "\n", "", "self", ".", "loss_weight", "=", "loss_weight", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.tracking.KLDiMPActor.__call__": [[81, 194], ["tracking.KLDiMPActor.net", "tracking.KLDiMPActor.loss_weight.keys", "tracking.KLDiMPActor.loss_weight.keys", "torch.isinf", "torch.isnan", "Exception", "loss.item", "bb_ce.item", "loss_bb_ce.item", "tracking.KLDiMPActor.loss_weight.keys", "loss_target_classifier.item", "tracking.KLDiMPActor.loss_weight.keys", "loss_test_init_clf.item", "tracking.KLDiMPActor.loss_weight.keys", "sum.item", "tracking.KLDiMPActor.loss_weight.keys", "loss_clf_ce.item", "tracking.KLDiMPActor.loss_weight.keys", "loss_clf_ce_init.item", "sum.item", "tracking.KLDiMPActor.loss_weight.keys", "clf_loss_test.item", "tracking.KLDiMPActor.loss_weight.keys", "clf_ce.item", "tracking.KLDiMPActor.loss_weight.keys", "tracking.KLDiMPActor.loss_weight.keys", "isinstance", "tracking.KLDiMPActor.loss_weight.keys", "isinstance", "tracking.KLDiMPActor.loss_weight.keys", "len", "len", "clf_losses_test[].item", "len", "clf_ce_losses[].item", "sum", "tracking.KLDiMPActor.loss_weight.keys", "len", "sum", "len", "len", "sum", "sum", "sum().item", "sum().item", "len", "len", "zip", "len", "zip", "len", "sum", "sum"], "methods", ["None"], ["", "def", "__call__", "(", "self", ",", "data", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            data - The input data, should contain the fields 'train_images', 'test_images', 'train_anno',\n                    'test_proposals', 'proposal_iou' and 'test_label'.\n\n        returns:\n            loss    - the training loss\n            stats  -  dict containing detailed losses\n        \"\"\"", "\n", "# Run network", "\n", "target_scores", ",", "bb_scores", "=", "self", ".", "net", "(", "train_imgs", "=", "data", "[", "'train_images'", "]", ",", "\n", "test_imgs", "=", "data", "[", "'test_images'", "]", ",", "\n", "train_bb", "=", "data", "[", "'train_anno'", "]", ",", "\n", "test_proposals", "=", "data", "[", "'test_proposals'", "]", ")", "\n", "\n", "# Reshape bb reg variables", "\n", "is_valid", "=", "data", "[", "'test_anno'", "]", "[", ":", ",", ":", ",", "0", "]", "<", "99999.0", "\n", "bb_scores", "=", "bb_scores", "[", "is_valid", ",", ":", "]", "\n", "proposal_density", "=", "data", "[", "'proposal_density'", "]", "[", "is_valid", ",", ":", "]", "\n", "gt_density", "=", "data", "[", "'gt_density'", "]", "[", "is_valid", ",", ":", "]", "\n", "\n", "# Compute loss", "\n", "bb_ce", "=", "self", ".", "objective", "[", "'bb_ce'", "]", "(", "bb_scores", ",", "sample_density", "=", "proposal_density", ",", "gt_density", "=", "gt_density", ",", "mc_dim", "=", "1", ")", "\n", "loss_bb_ce", "=", "self", ".", "loss_weight", "[", "'bb_ce'", "]", "*", "bb_ce", "\n", "\n", "# If standard DiMP classifier is used", "\n", "loss_target_classifier", "=", "0", "\n", "loss_test_init_clf", "=", "0", "\n", "loss_test_iter_clf", "=", "0", "\n", "if", "'test_clf'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", ":", "\n", "# Classification losses for the different optimization iterations", "\n", "            ", "clf_losses_test", "=", "[", "self", ".", "objective", "[", "'test_clf'", "]", "(", "s", ",", "data", "[", "'test_label'", "]", ",", "data", "[", "'test_anno'", "]", ")", "for", "s", "in", "target_scores", "]", "\n", "\n", "# Loss of the final filter", "\n", "clf_loss_test", "=", "clf_losses_test", "[", "-", "1", "]", "\n", "loss_target_classifier", "=", "self", ".", "loss_weight", "[", "'test_clf'", "]", "*", "clf_loss_test", "\n", "\n", "# Loss for the initial filter iteration", "\n", "if", "'test_init_clf'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", ":", "\n", "                ", "loss_test_init_clf", "=", "self", ".", "loss_weight", "[", "'test_init_clf'", "]", "*", "clf_losses_test", "[", "0", "]", "\n", "\n", "# Loss for the intermediate filter iterations", "\n", "", "if", "'test_iter_clf'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", ":", "\n", "                ", "test_iter_weights", "=", "self", ".", "loss_weight", "[", "'test_iter_clf'", "]", "\n", "if", "isinstance", "(", "test_iter_weights", ",", "list", ")", ":", "\n", "                    ", "loss_test_iter_clf", "=", "sum", "(", "[", "a", "*", "b", "for", "a", ",", "b", "in", "zip", "(", "test_iter_weights", ",", "clf_losses_test", "[", "1", ":", "-", "1", "]", ")", "]", ")", "\n", "", "else", ":", "\n", "                    ", "loss_test_iter_clf", "=", "(", "test_iter_weights", "/", "(", "len", "(", "clf_losses_test", ")", "-", "2", ")", ")", "*", "sum", "(", "clf_losses_test", "[", "1", ":", "-", "1", "]", ")", "\n", "\n", "# If PrDiMP classifier is used", "\n", "", "", "", "loss_clf_ce", "=", "0", "\n", "loss_clf_ce_init", "=", "0", "\n", "loss_clf_ce_iter", "=", "0", "\n", "if", "'clf_ce'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", ":", "\n", "# Classification losses for the different optimization iterations", "\n", "            ", "clf_ce_losses", "=", "[", "self", ".", "objective", "[", "'clf_ce'", "]", "(", "s", ",", "data", "[", "'test_label_density'", "]", ",", "grid_dim", "=", "(", "-", "2", ",", "-", "1", ")", ")", "for", "s", "in", "target_scores", "]", "\n", "\n", "# Loss of the final filter", "\n", "clf_ce", "=", "clf_ce_losses", "[", "-", "1", "]", "\n", "loss_clf_ce", "=", "self", ".", "loss_weight", "[", "'clf_ce'", "]", "*", "clf_ce", "\n", "\n", "# Loss for the initial filter iteration", "\n", "if", "'clf_ce_init'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", ":", "\n", "                ", "loss_clf_ce_init", "=", "self", ".", "loss_weight", "[", "'clf_ce_init'", "]", "*", "clf_ce_losses", "[", "0", "]", "\n", "\n", "# Loss for the intermediate filter iterations", "\n", "", "if", "'clf_ce_iter'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", "and", "len", "(", "clf_ce_losses", ")", ">", "2", ":", "\n", "                ", "test_iter_weights", "=", "self", ".", "loss_weight", "[", "'clf_ce_iter'", "]", "\n", "if", "isinstance", "(", "test_iter_weights", ",", "list", ")", ":", "\n", "                    ", "loss_clf_ce_iter", "=", "sum", "(", "[", "a", "*", "b", "for", "a", ",", "b", "in", "zip", "(", "test_iter_weights", ",", "clf_ce_losses", "[", "1", ":", "-", "1", "]", ")", "]", ")", "\n", "", "else", ":", "\n", "                    ", "loss_clf_ce_iter", "=", "(", "test_iter_weights", "/", "(", "len", "(", "clf_ce_losses", ")", "-", "2", ")", ")", "*", "sum", "(", "clf_ce_losses", "[", "1", ":", "-", "1", "]", ")", "\n", "\n", "# Total loss", "\n", "", "", "", "loss", "=", "loss_bb_ce", "+", "loss_clf_ce", "+", "loss_clf_ce_init", "+", "loss_clf_ce_iter", "+", "loss_target_classifier", "+", "loss_test_init_clf", "+", "loss_test_iter_clf", "\n", "\n", "if", "torch", ".", "isinf", "(", "loss", ")", "or", "torch", ".", "isnan", "(", "loss", ")", ":", "\n", "            ", "raise", "Exception", "(", "'ERROR: Loss was nan or inf!!!'", ")", "\n", "\n", "# Log stats", "\n", "", "stats", "=", "{", "'Loss/total'", ":", "loss", ".", "item", "(", ")", ",", "\n", "'Loss/bb_ce'", ":", "bb_ce", ".", "item", "(", ")", ",", "\n", "'Loss/loss_bb_ce'", ":", "loss_bb_ce", ".", "item", "(", ")", "}", "\n", "if", "'test_clf'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", ":", "\n", "            ", "stats", "[", "'Loss/target_clf'", "]", "=", "loss_target_classifier", ".", "item", "(", ")", "\n", "", "if", "'test_init_clf'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", ":", "\n", "            ", "stats", "[", "'Loss/test_init_clf'", "]", "=", "loss_test_init_clf", ".", "item", "(", ")", "\n", "", "if", "'test_iter_clf'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", ":", "\n", "            ", "stats", "[", "'Loss/test_iter_clf'", "]", "=", "loss_test_iter_clf", ".", "item", "(", ")", "\n", "", "if", "'clf_ce'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", ":", "\n", "            ", "stats", "[", "'Loss/clf_ce'", "]", "=", "loss_clf_ce", ".", "item", "(", ")", "\n", "", "if", "'clf_ce_init'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", ":", "\n", "            ", "stats", "[", "'Loss/clf_ce_init'", "]", "=", "loss_clf_ce_init", ".", "item", "(", ")", "\n", "", "if", "'clf_ce_iter'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", "and", "len", "(", "clf_ce_losses", ")", ">", "2", ":", "\n", "            ", "stats", "[", "'Loss/clf_ce_iter'", "]", "=", "loss_clf_ce_iter", ".", "item", "(", ")", "\n", "\n", "", "if", "'test_clf'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", ":", "\n", "            ", "stats", "[", "'ClfTrain/test_loss'", "]", "=", "clf_loss_test", ".", "item", "(", ")", "\n", "if", "len", "(", "clf_losses_test", ")", ">", "0", ":", "\n", "                ", "stats", "[", "'ClfTrain/test_init_loss'", "]", "=", "clf_losses_test", "[", "0", "]", ".", "item", "(", ")", "\n", "if", "len", "(", "clf_losses_test", ")", ">", "2", ":", "\n", "                    ", "stats", "[", "'ClfTrain/test_iter_loss'", "]", "=", "sum", "(", "clf_losses_test", "[", "1", ":", "-", "1", "]", ")", ".", "item", "(", ")", "/", "(", "len", "(", "clf_losses_test", ")", "-", "2", ")", "\n", "\n", "", "", "", "if", "'clf_ce'", "in", "self", ".", "loss_weight", ".", "keys", "(", ")", ":", "\n", "            ", "stats", "[", "'ClfTrain/clf_ce'", "]", "=", "clf_ce", ".", "item", "(", ")", "\n", "if", "len", "(", "clf_ce_losses", ")", ">", "0", ":", "\n", "                ", "stats", "[", "'ClfTrain/clf_ce_init'", "]", "=", "clf_ce_losses", "[", "0", "]", ".", "item", "(", ")", "\n", "if", "len", "(", "clf_ce_losses", ")", ">", "2", ":", "\n", "                    ", "stats", "[", "'ClfTrain/clf_ce_iter'", "]", "=", "sum", "(", "clf_ce_losses", "[", "1", ":", "-", "1", "]", ")", ".", "item", "(", ")", "/", "(", "len", "(", "clf_ce_losses", ")", "-", "2", ")", "\n", "\n", "", "", "", "return", "loss", ",", "stats", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.bbreg.AtomActor.__call__": [[6, 30], ["bbreg.AtomActor.net", "iou_pred.view.view.view", "data[].view", "bbreg.AtomActor.objective", "bbreg.AtomActor.item", "bbreg.AtomActor.item"], "methods", ["None"], ["def", "__call__", "(", "self", ",", "data", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            data - The input data, should contain the fields 'train_images', 'test_images', 'train_anno',\n                    'test_proposals' and 'proposal_iou'.\n\n        returns:\n            loss    - the training loss\n            states  -  dict containing detailed losses\n        \"\"\"", "\n", "# Run network to obtain IoU prediction for each proposal in 'test_proposals'", "\n", "iou_pred", "=", "self", ".", "net", "(", "data", "[", "'train_images'", "]", ",", "data", "[", "'test_images'", "]", ",", "data", "[", "'train_anno'", "]", ",", "data", "[", "'test_proposals'", "]", ")", "\n", "\n", "iou_pred", "=", "iou_pred", ".", "view", "(", "-", "1", ",", "iou_pred", ".", "shape", "[", "2", "]", ")", "\n", "iou_gt", "=", "data", "[", "'proposal_iou'", "]", ".", "view", "(", "-", "1", ",", "data", "[", "'proposal_iou'", "]", ".", "shape", "[", "2", "]", ")", "\n", "\n", "# Compute loss", "\n", "loss", "=", "self", ".", "objective", "(", "iou_pred", ",", "iou_gt", ")", "\n", "\n", "# Return training stats", "\n", "stats", "=", "{", "'Loss/total'", ":", "loss", ".", "item", "(", ")", ",", "\n", "'Loss/iou'", ":", "loss", ".", "item", "(", ")", "}", "\n", "\n", "return", "loss", ",", "stats", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.actors.bbreg.AtomBBKLActor.__call__": [[34, 59], ["bbreg.AtomBBKLActor.net", "bb_scores.view.view.view", "data[].view", "data[].view", "bbreg.AtomBBKLActor.objective", "bbreg.AtomBBKLActor.item", "bbreg.AtomBBKLActor.item"], "methods", ["None"], ["def", "__call__", "(", "self", ",", "data", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            data - The input data, should contain the fields 'train_images', 'test_images', 'train_anno',\n                    'test_proposals', 'proposal_density', and 'gt_density'.\n\n        returns:\n            loss    - the training loss\n            states  -  dict containing detailed losses\n        \"\"\"", "\n", "# Run network to obtain IoU prediction for each proposal in 'test_proposals'", "\n", "bb_scores", "=", "self", ".", "net", "(", "data", "[", "'train_images'", "]", ",", "data", "[", "'test_images'", "]", ",", "data", "[", "'train_anno'", "]", ",", "data", "[", "'test_proposals'", "]", ")", "\n", "\n", "bb_scores", "=", "bb_scores", ".", "view", "(", "-", "1", ",", "bb_scores", ".", "shape", "[", "2", "]", ")", "\n", "proposal_density", "=", "data", "[", "'proposal_density'", "]", ".", "view", "(", "-", "1", ",", "data", "[", "'proposal_density'", "]", ".", "shape", "[", "2", "]", ")", "\n", "gt_density", "=", "data", "[", "'gt_density'", "]", ".", "view", "(", "-", "1", ",", "data", "[", "'gt_density'", "]", ".", "shape", "[", "2", "]", ")", "\n", "\n", "# Compute loss", "\n", "loss", "=", "self", ".", "objective", "(", "bb_scores", ",", "sample_density", "=", "proposal_density", ",", "gt_density", "=", "gt_density", ",", "mc_dim", "=", "1", ")", "\n", "\n", "# Return training stats", "\n", "stats", "=", "{", "'Loss/total'", ":", "loss", ".", "item", "(", ")", ",", "\n", "'Loss/bb_ce'", ":", "loss", ".", "item", "(", ")", "}", "\n", "\n", "return", "loss", ",", "stats", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.Transform.__init__": [[35, 42], ["isinstance", "len"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "*", "transforms", ")", ":", "\n", "        ", "if", "len", "(", "transforms", ")", "==", "1", "and", "isinstance", "(", "transforms", "[", "0", "]", ",", "(", "list", ",", "tuple", ")", ")", ":", "\n", "            ", "transforms", "=", "transforms", "[", "0", "]", "\n", "", "self", ".", "transforms", "=", "transforms", "\n", "self", ".", "_valid_inputs", "=", "[", "'image'", ",", "'coords'", ",", "'bbox'", ",", "'mask'", ",", "'att'", "]", "\n", "self", ".", "_valid_args", "=", "[", "'joint'", ",", "'new_roll'", "]", "\n", "self", ".", "_valid_all", "=", "self", ".", "_valid_inputs", "+", "self", ".", "_valid_args", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.Transform.__call__": [[43, 64], ["inputs.keys", "inputs.get", "inputs.get", "tuple", "zip", "tuple", "t", "len", "inputs.keys", "ValueError", "inputs.items", "list", "transforms.Transform.", "transforms.Transform._split_inputs"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.Transform._split_inputs"], ["", "def", "__call__", "(", "self", ",", "**", "inputs", ")", ":", "\n", "        ", "var_names", "=", "[", "k", "for", "k", "in", "inputs", ".", "keys", "(", ")", "if", "k", "in", "self", ".", "_valid_inputs", "]", "\n", "for", "v", "in", "inputs", ".", "keys", "(", ")", ":", "\n", "            ", "if", "v", "not", "in", "self", ".", "_valid_all", ":", "\n", "                ", "raise", "ValueError", "(", "'Incorrect input \\\"{}\\\" to transform. Only supports inputs {} and arguments {}.'", ".", "format", "(", "v", ",", "self", ".", "_valid_inputs", ",", "self", ".", "_valid_args", ")", ")", "\n", "\n", "", "", "joint_mode", "=", "inputs", ".", "get", "(", "'joint'", ",", "True", ")", "\n", "new_roll", "=", "inputs", ".", "get", "(", "'new_roll'", ",", "True", ")", "\n", "\n", "if", "not", "joint_mode", ":", "\n", "            ", "out", "=", "zip", "(", "*", "[", "self", "(", "**", "inp", ")", "for", "inp", "in", "self", ".", "_split_inputs", "(", "inputs", ")", "]", ")", "\n", "return", "tuple", "(", "list", "(", "o", ")", "for", "o", "in", "out", ")", "\n", "\n", "", "out", "=", "{", "k", ":", "v", "for", "k", ",", "v", "in", "inputs", ".", "items", "(", ")", "if", "k", "in", "self", ".", "_valid_inputs", "}", "\n", "\n", "for", "t", "in", "self", ".", "transforms", ":", "\n", "            ", "out", "=", "t", "(", "**", "out", ",", "joint", "=", "joint_mode", ",", "new_roll", "=", "new_roll", ")", "\n", "", "if", "len", "(", "var_names", ")", "==", "1", ":", "\n", "            ", "return", "out", "[", "var_names", "[", "0", "]", "]", "\n", "# Make sure order is correct", "\n", "", "return", "tuple", "(", "out", "[", "v", "]", "for", "v", "in", "var_names", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.Transform._split_inputs": [[65, 76], ["filter", "inputs.items", "isinstance", "inputs.keys", "zip", "zip", "zip"], "methods", ["None"], ["", "def", "_split_inputs", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "var_names", "=", "[", "k", "for", "k", "in", "inputs", ".", "keys", "(", ")", "if", "k", "in", "self", ".", "_valid_inputs", "]", "\n", "split_inputs", "=", "[", "{", "k", ":", "v", "for", "k", ",", "v", "in", "zip", "(", "var_names", ",", "vals", ")", "}", "for", "vals", "in", "zip", "(", "*", "[", "inputs", "[", "vn", "]", "for", "vn", "in", "var_names", "]", ")", "]", "\n", "for", "arg_name", ",", "arg_val", "in", "filter", "(", "lambda", "it", ":", "it", "[", "0", "]", "!=", "'joint'", "and", "it", "[", "0", "]", "in", "self", ".", "_valid_args", ",", "inputs", ".", "items", "(", ")", ")", ":", "\n", "            ", "if", "isinstance", "(", "arg_val", ",", "list", ")", ":", "\n", "                ", "for", "inp", ",", "av", "in", "zip", "(", "split_inputs", ",", "arg_val", ")", ":", "\n", "                    ", "inp", "[", "arg_name", "]", "=", "av", "\n", "", "", "else", ":", "\n", "                ", "for", "inp", "in", "split_inputs", ":", "\n", "                    ", "inp", "[", "arg_name", "]", "=", "arg_val", "\n", "", "", "", "return", "split_inputs", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.Transform.__repr__": [[77, 84], ["None"], "methods", ["None"], ["", "def", "__repr__", "(", "self", ")", ":", "\n", "        ", "format_string", "=", "self", ".", "__class__", ".", "__name__", "+", "'('", "\n", "for", "t", "in", "self", ".", "transforms", ":", "\n", "            ", "format_string", "+=", "'\\n'", "\n", "format_string", "+=", "'    {0}'", ".", "format", "(", "t", ")", "\n", "", "format_string", "+=", "'\\n)'", "\n", "return", "format_string", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.TransformBase.__init__": [[88, 93], ["None"], "methods", ["None"], ["def", "__init__", "(", "self", ")", ":", "\n", "        ", "\"\"\"2020.12.24 Add 'att' to valid inputs\"\"\"", "\n", "self", ".", "_valid_inputs", "=", "[", "'image'", ",", "'coords'", ",", "'bbox'", ",", "'mask'", ",", "'att'", "]", "\n", "self", ".", "_valid_args", "=", "[", "'new_roll'", "]", "\n", "self", ".", "_valid_all", "=", "self", ".", "_valid_inputs", "+", "self", ".", "_valid_args", "\n", "self", ".", "_rand_params", "=", "None", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.TransformBase.__call__": [[94, 121], ["input_args.get", "dict", "input_vars.items", "transforms.TransformBase.roll", "inputs.items", "inputs.items", "getattr", "isinstance", "isinstance", "getattr.", "getattr.", "transforms.TransformBase._get_image_size"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll", "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.TransformBase._get_image_size"], ["\n", "", "def", "__call__", "(", "self", ",", "**", "inputs", ")", ":", "\n", "# Split input", "\n", "        ", "input_vars", "=", "{", "k", ":", "v", "for", "k", ",", "v", "in", "inputs", ".", "items", "(", ")", "if", "k", "in", "self", ".", "_valid_inputs", "}", "\n", "input_args", "=", "{", "k", ":", "v", "for", "k", ",", "v", "in", "inputs", ".", "items", "(", ")", "if", "k", "in", "self", ".", "_valid_args", "}", "\n", "\n", "# Roll random parameters for the transform", "\n", "if", "input_args", ".", "get", "(", "'new_roll'", ",", "True", ")", ":", "\n", "            ", "rand_params", "=", "self", ".", "roll", "(", ")", "\n", "if", "rand_params", "is", "None", ":", "\n", "                ", "rand_params", "=", "(", ")", "\n", "", "elif", "not", "isinstance", "(", "rand_params", ",", "tuple", ")", ":", "\n", "                ", "rand_params", "=", "(", "rand_params", ",", ")", "\n", "", "self", ".", "_rand_params", "=", "rand_params", "\n", "\n", "", "outputs", "=", "dict", "(", ")", "\n", "for", "var_name", ",", "var", "in", "input_vars", ".", "items", "(", ")", ":", "\n", "            ", "if", "var", "is", "not", "None", ":", "\n", "                ", "transform_func", "=", "getattr", "(", "self", ",", "'transform_'", "+", "var_name", ")", "\n", "if", "var_name", "in", "[", "'coords'", ",", "'bbox'", "]", ":", "\n", "                    ", "params", "=", "(", "self", ".", "_get_image_size", "(", "input_vars", ")", ",", ")", "+", "self", ".", "_rand_params", "\n", "", "else", ":", "\n", "                    ", "params", "=", "self", ".", "_rand_params", "\n", "", "if", "isinstance", "(", "var", ",", "(", "list", ",", "tuple", ")", ")", ":", "\n", "                    ", "outputs", "[", "var_name", "]", "=", "[", "transform_func", "(", "x", ",", "*", "params", ")", "for", "x", "in", "var", "]", "\n", "", "else", ":", "\n", "                    ", "outputs", "[", "var_name", "]", "=", "transform_func", "(", "var", ",", "*", "params", ")", "\n", "", "", "", "return", "outputs", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.TransformBase._get_image_size": [[122, 137], ["isinstance", "isinstance", "torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "Exception", "inputs.get"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["\n", "", "def", "_get_image_size", "(", "self", ",", "inputs", ")", ":", "\n", "        ", "im", "=", "None", "\n", "for", "var_name", "in", "[", "'image'", ",", "'mask'", "]", ":", "\n", "            ", "if", "inputs", ".", "get", "(", "var_name", ")", "is", "not", "None", ":", "\n", "                ", "im", "=", "inputs", "[", "var_name", "]", "\n", "break", "\n", "", "", "if", "im", "is", "None", ":", "\n", "            ", "return", "None", "\n", "", "if", "isinstance", "(", "im", ",", "(", "list", ",", "tuple", ")", ")", ":", "\n", "            ", "im", "=", "im", "[", "0", "]", "\n", "", "if", "isinstance", "(", "im", ",", "np", ".", "ndarray", ")", ":", "\n", "            ", "return", "im", ".", "shape", "[", ":", "2", "]", "\n", "", "if", "torch", ".", "is_tensor", "(", "im", ")", ":", "\n", "            ", "return", "(", "im", ".", "shape", "[", "-", "2", "]", ",", "im", ".", "shape", "[", "-", "1", "]", ")", "\n", "", "raise", "Exception", "(", "'Unknown image type'", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.TransformBase.roll": [[138, 140], ["None"], "methods", ["None"], ["\n", "", "def", "roll", "(", "self", ")", ":", "\n", "        ", "return", "None", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.TransformBase.transform_image": [[141, 144], ["None"], "methods", ["None"], ["\n", "", "def", "transform_image", "(", "self", ",", "image", ",", "*", "rand_params", ")", ":", "\n", "        ", "\"\"\"Must be deterministic\"\"\"", "\n", "return", "image", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.TransformBase.transform_coords": [[145, 148], ["None"], "methods", ["None"], ["\n", "", "def", "transform_coords", "(", "self", ",", "coords", ",", "image_shape", ",", "*", "rand_params", ")", ":", "\n", "        ", "\"\"\"Must be deterministic\"\"\"", "\n", "return", "coords", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.TransformBase.transform_bbox": [[149, 170], ["bbox.clone().view().t().flip", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "transforms.TransformBase.transform_coords().flip", "torch.cat().reshape", "torch.cat().reshape", "torch.cat().reshape", "torch.cat().reshape", "torch.min", "torch.min", "torch.min", "torch.min", "bbox.clone().view().t", "transforms.TransformBase.transform_coords", "torch.max", "torch.max", "torch.max", "torch.max", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "bbox.clone().view", "bbox.clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomAffine.transform_coords", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["\n", "", "def", "transform_bbox", "(", "self", ",", "bbox", ",", "image_shape", ",", "*", "rand_params", ")", ":", "\n", "        ", "\"\"\"Assumes [x, y, w, h]\"\"\"", "\n", "# Check if not overloaded", "\n", "if", "self", ".", "transform_coords", ".", "__code__", "==", "TransformBase", ".", "transform_coords", ".", "__code__", ":", "\n", "            ", "return", "bbox", "\n", "\n", "", "coord", "=", "bbox", ".", "clone", "(", ")", ".", "view", "(", "-", "1", ",", "2", ")", ".", "t", "(", ")", ".", "flip", "(", "0", ")", "\n", "\n", "x1", "=", "coord", "[", "1", ",", "0", "]", "\n", "x2", "=", "coord", "[", "1", ",", "0", "]", "+", "coord", "[", "1", ",", "1", "]", "\n", "\n", "y1", "=", "coord", "[", "0", ",", "0", "]", "\n", "y2", "=", "coord", "[", "0", ",", "0", "]", "+", "coord", "[", "0", ",", "1", "]", "\n", "\n", "coord_all", "=", "torch", ".", "tensor", "(", "[", "[", "y1", ",", "y1", ",", "y2", ",", "y2", "]", ",", "[", "x1", ",", "x2", ",", "x2", ",", "x1", "]", "]", ")", "\n", "\n", "coord_transf", "=", "self", ".", "transform_coords", "(", "coord_all", ",", "image_shape", ",", "*", "rand_params", ")", ".", "flip", "(", "0", ")", "\n", "tl", "=", "torch", ".", "min", "(", "coord_transf", ",", "dim", "=", "1", ")", "[", "0", "]", "\n", "sz", "=", "torch", ".", "max", "(", "coord_transf", ",", "dim", "=", "1", ")", "[", "0", "]", "-", "tl", "\n", "bbox_out", "=", "torch", ".", "cat", "(", "(", "tl", ",", "sz", ")", ",", "dim", "=", "-", "1", ")", ".", "reshape", "(", "bbox", ".", "shape", ")", "\n", "return", "bbox_out", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.TransformBase.transform_mask": [[171, 174], ["None"], "methods", ["None"], ["\n", "", "def", "transform_mask", "(", "self", ",", "mask", ",", "*", "rand_params", ")", ":", "\n", "        ", "\"\"\"Must be deterministic\"\"\"", "\n", "return", "mask", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.TransformBase.transform_att": [[176, 179], ["None"], "methods", ["None"], ["", "def", "transform_att", "(", "self", ",", "att", ",", "*", "rand_params", ")", ":", "\n", "        ", "\"\"\"2020.12.24 Added to deal with attention masks\"\"\"", "\n", "return", "att", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.ToTensor.transform_image": [[179, 190], ["torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "isinstance", "torch.from_numpy.transpose", "torch.from_numpy.transpose", "torch.from_numpy.float().div", "torch.from_numpy.float().div", "torch.from_numpy.float", "torch.from_numpy.float"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.div", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.div"], ["\n", "\n", "", "", "class", "ToTensor", "(", "TransformBase", ")", ":", "\n", "    ", "\"\"\"Convert to a Tensor\"\"\"", "\n", "\n", "def", "transform_image", "(", "self", ",", "image", ")", ":", "\n", "# handle numpy array", "\n", "        ", "if", "image", ".", "ndim", "==", "2", ":", "\n", "            ", "image", "=", "image", "[", ":", ",", ":", ",", "None", "]", "\n", "\n", "", "image", "=", "torch", ".", "from_numpy", "(", "image", ".", "transpose", "(", "(", "2", ",", "0", ",", "1", ")", ")", ")", "\n", "# backward compatibility", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.ToTensor.transfrom_mask": [[191, 194], ["isinstance", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy"], "methods", ["None"], ["if", "isinstance", "(", "image", ",", "torch", ".", "ByteTensor", ")", ":", "\n", "            ", "return", "image", ".", "float", "(", ")", ".", "div", "(", "255", ")", "\n", "", "else", ":", "\n", "            ", "return", "image", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.ToTensor.transform_att": [[200, 207], ["isinstance", "torch.from_numpy().to", "torch.from_numpy().to", "torch.from_numpy().to", "torch.from_numpy().to", "isinstance", "att.to", "ValueError", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to"], ["", "", "def", "transform_att", "(", "self", ",", "att", ")", ":", "\n", "        ", "if", "isinstance", "(", "att", ",", "np", ".", "ndarray", ")", ":", "\n", "            ", "return", "torch", ".", "from_numpy", "(", "att", ")", ".", "to", "(", "torch", ".", "bool", ")", "\n", "", "elif", "isinstance", "(", "att", ",", "torch", ".", "Tensor", ")", ":", "\n", "            ", "return", "att", ".", "to", "(", "torch", ".", "bool", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "\"dtype must be np.ndarray or torch.Tensor\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.ToTensorAndJitter.__init__": [[199, 203], ["transforms.TransformBase.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["\n", "", "", "def", "transform_att", "(", "self", ",", "att", ")", ":", "\n", "        ", "if", "isinstance", "(", "att", ",", "np", ".", "ndarray", ")", ":", "\n", "            ", "return", "torch", ".", "from_numpy", "(", "att", ")", ".", "to", "(", "torch", ".", "bool", ")", "\n", "", "elif", "isinstance", "(", "att", ",", "torch", ".", "Tensor", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.ToTensorAndJitter.roll": [[204, 206], ["numpy.random.uniform", "max"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["            ", "return", "att", ".", "to", "(", "torch", ".", "bool", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "\"dtype must be np.ndarray or torch.Tensor\"", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.ToTensorAndJitter.transform_image": [[207, 216], ["torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy.transpose", "torch.from_numpy.transpose", "torch.from_numpy.float().mul().clamp", "torch.from_numpy.float().mul().clamp", "torch.from_numpy.float().mul().clamp", "torch.from_numpy.float().mul().clamp", "torch.from_numpy.float().mul", "torch.from_numpy.float().mul", "torch.from_numpy.float().mul", "torch.from_numpy.float().mul", "torch.from_numpy.float", "torch.from_numpy.float", "torch.from_numpy.float", "torch.from_numpy.float"], "methods", ["None"], ["\n", "\n", "", "", "", "class", "ToTensorAndJitter", "(", "TransformBase", ")", ":", "\n", "    ", "\"\"\"Convert to a Tensor and jitter brightness\"\"\"", "\n", "def", "__init__", "(", "self", ",", "brightness_jitter", "=", "0.0", ",", "normalize", "=", "True", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "brightness_jitter", "=", "brightness_jitter", "\n", "self", ".", "normalize", "=", "normalize", "\n", "\n", "", "def", "roll", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.ToTensorAndJitter.transform_mask": [[217, 222], ["isinstance", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy"], "methods", ["None"], ["        ", "return", "np", ".", "random", ".", "uniform", "(", "max", "(", "0", ",", "1", "-", "self", ".", "brightness_jitter", ")", ",", "1", "+", "self", ".", "brightness_jitter", ")", "\n", "\n", "", "def", "transform_image", "(", "self", ",", "image", ",", "brightness_factor", ")", ":", "\n", "# handle numpy array", "\n", "        ", "image", "=", "torch", ".", "from_numpy", "(", "image", ".", "transpose", "(", "(", "2", ",", "0", ",", "1", ")", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.ToTensorAndJitter.transform_att": [[234, 241], ["isinstance", "torch.from_numpy().to", "torch.from_numpy().to", "torch.from_numpy().to", "torch.from_numpy().to", "isinstance", "att.to", "ValueError", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to"], ["", "", "def", "transform_att", "(", "self", ",", "att", ",", "brightness_factor", ")", ":", "\n", "        ", "if", "isinstance", "(", "att", ",", "np", ".", "ndarray", ")", ":", "\n", "            ", "return", "torch", ".", "from_numpy", "(", "att", ")", ".", "to", "(", "torch", ".", "bool", ")", "\n", "", "elif", "isinstance", "(", "att", ",", "torch", ".", "Tensor", ")", ":", "\n", "            ", "return", "att", ".", "to", "(", "torch", ".", "bool", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "\"dtype must be np.ndarray or torch.Tensor\"", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.Normalize.__init__": [[226, 231], ["transforms.TransformBase.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["", "else", ":", "\n", "            ", "return", "image", ".", "float", "(", ")", ".", "mul", "(", "brightness_factor", ")", ".", "clamp", "(", "0.0", ",", "255.0", ")", "\n", "\n", "", "", "def", "transform_mask", "(", "self", ",", "mask", ",", "brightness_factor", ")", ":", "\n", "        ", "if", "isinstance", "(", "mask", ",", "np", ".", "ndarray", ")", ":", "\n", "            ", "return", "torch", ".", "from_numpy", "(", "mask", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.Normalize.transform_image": [[232, 234], ["torchvision.normalize"], "methods", ["None"], ["", "else", ":", "\n", "            ", "return", "mask", "\n", "", "", "def", "transform_att", "(", "self", ",", "att", ",", "brightness_factor", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.ToGrayscale.__init__": [[238, 242], ["transforms.TransformBase.__init__", "numpy.array"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["            ", "return", "att", ".", "to", "(", "torch", ".", "bool", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "\"dtype must be np.ndarray or torch.Tensor\"", ")", "\n", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.ToGrayscale.roll": [[243, 245], ["random.random"], "methods", ["None"], ["", "", "", "class", "Normalize", "(", "TransformBase", ")", ":", "\n", "    ", "\"\"\"Normalize image\"\"\"", "\n", "def", "__init__", "(", "self", ",", "mean", ",", "std", ",", "inplace", "=", "False", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.ToGrayscale.transform_image": [[246, 254], ["torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "cv2.cvtColor", "numpy.stack", "NotImplementedError"], "methods", ["None"], ["        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "mean", "=", "mean", "\n", "self", ".", "std", "=", "std", "\n", "self", ".", "inplace", "=", "inplace", "\n", "\n", "", "def", "transform_image", "(", "self", ",", "image", ")", ":", "\n", "        ", "return", "tvisf", ".", "normalize", "(", "image", ",", "self", ".", "mean", ",", "self", ".", "std", ",", "self", ".", "inplace", ")", "\n", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.ToBGR.transform_image": [[258, 263], ["torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "cv2.cvtColor", "NotImplementedError"], "methods", ["None"], ["        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "probability", "=", "probability", "\n", "self", ".", "color_weights", "=", "np", ".", "array", "(", "[", "0.2989", ",", "0.5870", ",", "0.1140", "]", ",", "dtype", "=", "np", ".", "float32", ")", "\n", "\n", "", "def", "roll", "(", "self", ")", ":", "\n", "        ", "return", "random", ".", "random", "(", ")", "<", "self", ".", "probability", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomHorizontalFlip.__init__": [[267, 270], ["transforms.TransformBase.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["            ", "if", "torch", ".", "is_tensor", "(", "image", ")", ":", "\n", "                ", "raise", "NotImplementedError", "(", "'Implement torch variant.'", ")", "\n", "", "img_gray", "=", "cv", ".", "cvtColor", "(", "image", ",", "cv", ".", "COLOR_RGB2GRAY", ")", "\n", "return", "np", ".", "stack", "(", "[", "img_gray", ",", "img_gray", ",", "img_gray", "]", ",", "axis", "=", "2", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomHorizontalFlip.roll": [[271, 273], ["random.random"], "methods", ["None"], ["# return np.repeat(np.sum(img * self.color_weights, axis=2, keepdims=True).astype(np.uint8), 3, axis=2)", "\n", "", "return", "image", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomHorizontalFlip.transform_image": [[274, 280], ["torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "numpy.fliplr().copy", "image.flip", "numpy.fliplr"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy"], ["\n", "", "", "class", "ToBGR", "(", "TransformBase", ")", ":", "\n", "    ", "\"\"\"Converts image to BGR\"\"\"", "\n", "def", "transform_image", "(", "self", ",", "image", ")", ":", "\n", "        ", "if", "torch", ".", "is_tensor", "(", "image", ")", ":", "\n", "            ", "raise", "NotImplementedError", "(", "'Implement torch variant.'", ")", "\n", "", "img_bgr", "=", "cv", ".", "cvtColor", "(", "image", ",", "cv", ".", "COLOR_RGB2BGR", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomHorizontalFlip.transform_coords": [[281, 286], ["coords.clone.clone.clone"], "methods", ["None"], ["return", "img_bgr", "\n", "\n", "\n", "", "", "class", "RandomHorizontalFlip", "(", "TransformBase", ")", ":", "\n", "    ", "\"\"\"Horizontally flip image randomly with a probability p.\"\"\"", "\n", "def", "__init__", "(", "self", ",", "probability", "=", "0.5", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomHorizontalFlip.transform_mask": [[287, 293], ["torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "numpy.fliplr().copy", "mask.flip", "numpy.fliplr"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy"], ["        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "probability", "=", "probability", "\n", "\n", "", "def", "roll", "(", "self", ")", ":", "\n", "        ", "return", "random", ".", "random", "(", ")", "<", "self", ".", "probability", "\n", "\n", "", "def", "transform_image", "(", "self", ",", "image", ",", "do_flip", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomHorizontalFlip.transform_att": [[314, 320], ["torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "numpy.fliplr().copy", "att.flip", "numpy.fliplr"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy"], ["", "def", "transform_att", "(", "self", ",", "att", ",", "do_flip", ")", ":", "\n", "        ", "if", "do_flip", ":", "\n", "            ", "if", "torch", ".", "is_tensor", "(", "att", ")", ":", "\n", "                ", "return", "att", ".", "flip", "(", "(", "-", "1", ",", ")", ")", "\n", "", "return", "np", ".", "fliplr", "(", "att", ")", ".", "copy", "(", ")", "\n", "", "return", "att", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomHorizontalFlip_Norm.__init__": [[325, 328], ["transforms.RandomHorizontalFlip.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "probability", "=", "0.5", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "probability", "=", "probability", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomHorizontalFlip_Norm.transform_coords": [[329, 336], ["coords.clone"], "methods", ["None"], ["", "def", "transform_coords", "(", "self", ",", "coords", ",", "image_shape", ",", "do_flip", ")", ":", "\n", "        ", "\"\"\"we should use 1 rather than image_shape\"\"\"", "\n", "if", "do_flip", ":", "\n", "            ", "coords_flip", "=", "coords", ".", "clone", "(", ")", "\n", "coords_flip", "[", "1", ",", ":", "]", "=", "1", "-", "coords", "[", "1", ",", ":", "]", "\n", "return", "coords_flip", "\n", "", "return", "coords", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.BaseProcessing.__init__": [[17, 32], ["torchvision.ToTensor"], "methods", ["None"], ["\n", "def", "__init__", "(", "self", ",", "transform", "=", "transforms", ".", "ToTensor", "(", ")", ",", "template_transform", "=", "None", ",", "search_transform", "=", "None", ",", "joint_transform", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            transform       - The set of transformations to be applied on the images. Used only if template_transform or\n                                search_transform is None.\n            template_transform - The set of transformations to be applied on the template images. If None, the 'transform'\n                                argument is used instead.\n            search_transform  - The set of transformations to be applied on the search images. If None, the 'transform'\n                                argument is used instead.\n            joint_transform - The set of transformations to be applied 'jointly' on the template and search images.  For\n                                example, it can be used to convert both template and search images to grayscale.\n        \"\"\"", "\n", "self", ".", "transform", "=", "{", "'template'", ":", "transform", "if", "template_transform", "is", "None", "else", "template_transform", ",", "\n", "'search'", ":", "transform", "if", "search_transform", "is", "None", "else", "search_transform", ",", "\n", "'joint'", ":", "joint_transform", "}", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.BaseProcessing.__call__": [[33, 35], ["None"], "methods", ["None"], ["\n", "", "def", "__call__", "(", "self", ",", "data", ":", "TensorDict", ")", ":", "\n", "        ", "raise", "NotImplementedError", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.STARKProcessing.__init__": [[48, 68], ["processing.BaseProcessing.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "search_area_factor", ",", "output_sz", ",", "center_jitter_factor", ",", "scale_jitter_factor", ",", "\n", "mode", "=", "'pair'", ",", "settings", "=", "None", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            search_area_factor - The size of the search region  relative to the target size.\n            output_sz - An integer, denoting the size to which the search region is resized. The search region is always\n                        square.\n            center_jitter_factor - A dict containing the amount of jittering to be applied to the target center before\n                                    extracting the search region. See _get_jittered_box for how the jittering is done.\n            scale_jitter_factor - A dict containing the amount of jittering to be applied to the target size before\n                                    extracting the search region. See _get_jittered_box for how the jittering is done.\n            mode - Either 'pair' or 'sequence'. If mode='sequence', then output has an extra dimension for frames\n        \"\"\"", "\n", "super", "(", ")", ".", "__init__", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "self", ".", "search_area_factor", "=", "search_area_factor", "\n", "self", ".", "output_sz", "=", "output_sz", "\n", "self", ".", "center_jitter_factor", "=", "center_jitter_factor", "\n", "self", ".", "scale_jitter_factor", "=", "scale_jitter_factor", "\n", "self", ".", "mode", "=", "mode", "\n", "self", ".", "settings", "=", "settings", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.STARKProcessing._get_jittered_box": [[69, 84], ["torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "jittered_size.prod().sqrt", "torch.tensor().float", "torch.tensor().float", "torch.tensor().float", "torch.tensor().float", "torch.randn", "torch.randn", "torch.randn", "torch.randn", "jittered_size.prod", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor", "torch.rand", "torch.rand", "torch.rand", "torch.rand"], "methods", ["None"], ["", "def", "_get_jittered_box", "(", "self", ",", "box", ",", "mode", ")", ":", "\n", "        ", "\"\"\" Jitter the input box\n        args:\n            box - input bounding box\n            mode - string 'template' or 'search' indicating template or search data\n\n        returns:\n            torch.Tensor - jittered box\n        \"\"\"", "\n", "\n", "jittered_size", "=", "box", "[", "2", ":", "4", "]", "*", "torch", ".", "exp", "(", "torch", ".", "randn", "(", "2", ")", "*", "self", ".", "scale_jitter_factor", "[", "mode", "]", ")", "\n", "max_offset", "=", "(", "jittered_size", ".", "prod", "(", ")", ".", "sqrt", "(", ")", "*", "torch", ".", "tensor", "(", "self", ".", "center_jitter_factor", "[", "mode", "]", ")", ".", "float", "(", ")", ")", "\n", "jittered_center", "=", "box", "[", "0", ":", "2", "]", "+", "0.5", "*", "box", "[", "2", ":", "4", "]", "+", "max_offset", "*", "(", "torch", ".", "rand", "(", "2", ")", "-", "0.5", ")", "\n", "\n", "return", "torch", ".", "cat", "(", "(", "jittered_center", "-", "0.5", "*", "jittered_size", ",", "jittered_size", ")", ",", "dim", "=", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.STARKProcessing.__call__": [[85, 155], ["torch.ceil", "torch.ceil", "torch.ceil", "torch.ceil", "lib.jittered_center_crop", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "data.apply.apply.apply", "data.apply.apply.apply", "processing.STARKProcessing._get_jittered_box", "len", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.interpolate().to", "torch.interpolate().to", "isinstance", "torch.interpolate", "torch.interpolate", "ele[].float"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.jittered_center_crop", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._get_jittered_box", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], ["", "def", "__call__", "(", "self", ",", "data", ":", "TensorDict", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            data - The input data, should contain the following fields:\n                'template_images', search_images', 'template_anno', 'search_anno'\n        returns:\n            TensorDict - output data block with following fields:\n                'template_images', 'search_images', 'template_anno', 'search_anno', 'test_proposals', 'proposal_iou'\n        \"\"\"", "\n", "# Apply joint transforms", "\n", "if", "self", ".", "transform", "[", "'joint'", "]", "is", "not", "None", ":", "\n", "            ", "data", "[", "'template_images'", "]", ",", "data", "[", "'template_anno'", "]", ",", "data", "[", "'template_masks'", "]", "=", "self", ".", "transform", "[", "'joint'", "]", "(", "\n", "image", "=", "data", "[", "'template_images'", "]", ",", "bbox", "=", "data", "[", "'template_anno'", "]", ",", "mask", "=", "data", "[", "'template_masks'", "]", ")", "\n", "data", "[", "'search_images'", "]", ",", "data", "[", "'search_anno'", "]", ",", "data", "[", "'search_masks'", "]", "=", "self", ".", "transform", "[", "'joint'", "]", "(", "\n", "image", "=", "data", "[", "'search_images'", "]", ",", "bbox", "=", "data", "[", "'search_anno'", "]", ",", "mask", "=", "data", "[", "'search_masks'", "]", ",", "new_roll", "=", "False", ")", "\n", "\n", "", "for", "s", "in", "[", "'template'", ",", "'search'", "]", ":", "\n", "            ", "assert", "self", ".", "mode", "==", "'sequence'", "or", "len", "(", "data", "[", "s", "+", "'_images'", "]", ")", "==", "1", ",", "\"In pair mode, num train/test frames must be 1\"", "\n", "\n", "# Add a uniform noise to the center pos", "\n", "jittered_anno", "=", "[", "self", ".", "_get_jittered_box", "(", "a", ",", "s", ")", "for", "a", "in", "data", "[", "s", "+", "'_anno'", "]", "]", "\n", "\n", "# 2021.1.9 Check whether data is valid. Avoid too small bounding boxes", "\n", "w", ",", "h", "=", "torch", ".", "stack", "(", "jittered_anno", ",", "dim", "=", "0", ")", "[", ":", ",", "2", "]", ",", "torch", ".", "stack", "(", "jittered_anno", ",", "dim", "=", "0", ")", "[", ":", ",", "3", "]", "\n", "\n", "crop_sz", "=", "torch", ".", "ceil", "(", "torch", ".", "sqrt", "(", "w", "*", "h", ")", "*", "self", ".", "search_area_factor", "[", "s", "]", ")", "\n", "if", "(", "crop_sz", "<", "1", ")", ".", "any", "(", ")", ":", "\n", "                ", "data", "[", "'valid'", "]", "=", "False", "\n", "# print(\"Too small box is found. Replace it with new data.\")", "\n", "return", "data", "\n", "\n", "# Crop image region centered at jittered_anno box and get the attention mask", "\n", "", "crops", ",", "boxes", ",", "att_mask", ",", "mask_crops", "=", "prutils", ".", "jittered_center_crop", "(", "data", "[", "s", "+", "'_images'", "]", ",", "jittered_anno", ",", "\n", "data", "[", "s", "+", "'_anno'", "]", ",", "self", ".", "search_area_factor", "[", "s", "]", ",", "\n", "self", ".", "output_sz", "[", "s", "]", ",", "masks", "=", "data", "[", "s", "+", "'_masks'", "]", ")", "\n", "# Apply transforms", "\n", "data", "[", "s", "+", "'_images'", "]", ",", "data", "[", "s", "+", "'_anno'", "]", ",", "data", "[", "s", "+", "'_att'", "]", ",", "data", "[", "s", "+", "'_masks'", "]", "=", "self", ".", "transform", "[", "s", "]", "(", "\n", "image", "=", "crops", ",", "bbox", "=", "boxes", ",", "att", "=", "att_mask", ",", "mask", "=", "mask_crops", ",", "joint", "=", "False", ")", "\n", "\n", "# 2021.1.9 Check whether elements in data[s + '_att'] is all 1", "\n", "# Note that type of data[s + '_att'] is tuple, type of ele is torch.tensor", "\n", "for", "ele", "in", "data", "[", "s", "+", "'_att'", "]", ":", "\n", "                ", "if", "(", "ele", "==", "1", ")", ".", "all", "(", ")", ":", "\n", "                    ", "data", "[", "'valid'", "]", "=", "False", "\n", "# print(\"Values of original attention mask are all one. Replace it with new data.\")", "\n", "return", "data", "\n", "# 2021.1.10 more strict conditions: require the donwsampled masks not to be all 1", "\n", "", "", "for", "ele", "in", "data", "[", "s", "+", "'_att'", "]", ":", "\n", "                ", "feat_size", "=", "self", ".", "output_sz", "[", "s", "]", "//", "16", "# 16 is the backbone stride", "\n", "# (1,1,128,128) (1,1,256,256) --> (1,1,8,8) (1,1,16,16)", "\n", "mask_down", "=", "F", ".", "interpolate", "(", "ele", "[", "None", ",", "None", "]", ".", "float", "(", ")", ",", "size", "=", "feat_size", ")", ".", "to", "(", "torch", ".", "bool", ")", "[", "0", "]", "\n", "if", "(", "mask_down", "==", "1", ")", ".", "all", "(", ")", ":", "\n", "                    ", "data", "[", "'valid'", "]", "=", "False", "\n", "# print(\"Values of down-sampled attention mask are all one. \"", "\n", "#       \"Replace it with new data.\")", "\n", "return", "data", "\n", "\n", "", "", "", "data", "[", "'valid'", "]", "=", "True", "\n", "# if we use copy-and-paste augmentation", "\n", "if", "data", "[", "\"template_masks\"", "]", "is", "None", "or", "data", "[", "\"search_masks\"", "]", "is", "None", ":", "\n", "            ", "data", "[", "\"template_masks\"", "]", "=", "torch", ".", "zeros", "(", "(", "1", ",", "self", ".", "output_sz", "[", "\"template\"", "]", ",", "self", ".", "output_sz", "[", "\"template\"", "]", ")", ")", "\n", "data", "[", "\"search_masks\"", "]", "=", "torch", ".", "zeros", "(", "(", "1", ",", "self", ".", "output_sz", "[", "\"search\"", "]", ",", "self", ".", "output_sz", "[", "\"search\"", "]", ")", ")", "\n", "# Prepare output", "\n", "", "if", "self", ".", "mode", "==", "'sequence'", ":", "\n", "            ", "data", "=", "data", ".", "apply", "(", "stack_tensors", ")", "\n", "", "else", ":", "\n", "            ", "data", "=", "data", ".", "apply", "(", "lambda", "x", ":", "x", "[", "0", "]", "if", "isinstance", "(", "x", ",", "list", ")", "else", "x", ")", "\n", "\n", "", "return", "data", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.stack_tensors": [[7, 11], ["isinstance", "isinstance", "torch.stack"], "function", ["None"], ["\n", "def", "stack_tensors", "(", "x", ")", ":", "\n", "    ", "if", "isinstance", "(", "x", ",", "(", "list", ",", "tuple", ")", ")", "and", "isinstance", "(", "x", "[", "0", "]", ",", "torch", ".", "Tensor", ")", ":", "\n", "        ", "return", "torch", ".", "stack", "(", "x", ")", "\n", "", "return", "x", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.default_image_loader": [[15, 30], ["image_loader.opencv_loader", "image_loader.jpeg4py_loader", "image_loader.jpeg4py_loader", "print"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.opencv_loader", "home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.jpeg4py_loader", "home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.jpeg4py_loader"], ["def", "default_image_loader", "(", "path", ")", ":", "\n", "    ", "\"\"\"The default image loader, reads the image from the given path. It first tries to use the jpeg4py_loader,\n    but reverts to the opencv_loader if the former is not available.\"\"\"", "\n", "if", "default_image_loader", ".", "use_jpeg4py", "is", "None", ":", "\n", "# Try using jpeg4py", "\n", "        ", "im", "=", "jpeg4py_loader", "(", "path", ")", "\n", "if", "im", "is", "None", ":", "\n", "            ", "default_image_loader", ".", "use_jpeg4py", "=", "False", "\n", "print", "(", "'Using opencv_loader instead.'", ")", "\n", "", "else", ":", "\n", "            ", "default_image_loader", ".", "use_jpeg4py", "=", "True", "\n", "return", "im", "\n", "", "", "if", "default_image_loader", ".", "use_jpeg4py", ":", "\n", "        ", "return", "jpeg4py_loader", "(", "path", ")", "\n", "", "return", "opencv_loader", "(", "path", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.jpeg4py_loader": [[34, 42], ["jpeg4py.JPEG().decode", "print", "print", "jpeg4py.JPEG"], "function", ["None"], ["def", "jpeg4py_loader", "(", "path", ")", ":", "\n", "    ", "\"\"\" Image reading using jpeg4py https://github.com/ajkxyz/jpeg4py\"\"\"", "\n", "try", ":", "\n", "        ", "return", "jpeg4py", ".", "JPEG", "(", "path", ")", ".", "decode", "(", ")", "\n", "", "except", "Exception", "as", "e", ":", "\n", "        ", "print", "(", "'ERROR: Could not read image \"{}\"'", ".", "format", "(", "path", ")", ")", "\n", "print", "(", "e", ")", "\n", "return", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.opencv_loader": [[44, 55], ["cv2.imread", "cv2.cvtColor", "print", "print"], "function", ["None"], ["", "", "def", "opencv_loader", "(", "path", ")", ":", "\n", "    ", "\"\"\" Read image using opencv's imread function and returns it in rgb format\"\"\"", "\n", "try", ":", "\n", "        ", "im", "=", "cv", ".", "imread", "(", "path", ",", "cv", ".", "IMREAD_COLOR", ")", "\n", "\n", "# convert to rgb and return", "\n", "return", "cv", ".", "cvtColor", "(", "im", ",", "cv", ".", "COLOR_BGR2RGB", ")", "\n", "", "except", "Exception", "as", "e", ":", "\n", "        ", "print", "(", "'ERROR: Could not read image \"{}\"'", ".", "format", "(", "path", ")", ")", "\n", "print", "(", "e", ")", "\n", "return", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.jpeg4py_loader_w_failsafe": [[57, 71], ["jpeg4py.JPEG().decode", "jpeg4py.JPEG", "cv2.imread", "cv2.cvtColor", "print", "print"], "function", ["None"], ["", "", "def", "jpeg4py_loader_w_failsafe", "(", "path", ")", ":", "\n", "    ", "\"\"\" Image reading using jpeg4py https://github.com/ajkxyz/jpeg4py\"\"\"", "\n", "try", ":", "\n", "        ", "return", "jpeg4py", ".", "JPEG", "(", "path", ")", ".", "decode", "(", ")", "\n", "", "except", ":", "\n", "        ", "try", ":", "\n", "            ", "im", "=", "cv", ".", "imread", "(", "path", ",", "cv", ".", "IMREAD_COLOR", ")", "\n", "\n", "# convert to rgb and return", "\n", "return", "cv", ".", "cvtColor", "(", "im", ",", "cv", ".", "COLOR_BGR2RGB", ")", "\n", "", "except", "Exception", "as", "e", ":", "\n", "            ", "print", "(", "'ERROR: Could not read image \"{}\"'", ".", "format", "(", "path", ")", ")", "\n", "print", "(", "e", ")", "\n", "return", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.opencv_seg_loader": [[73, 81], ["cv2.imread", "print", "print"], "function", ["None"], ["", "", "", "def", "opencv_seg_loader", "(", "path", ")", ":", "\n", "    ", "\"\"\" Read segmentation annotation using opencv's imread function\"\"\"", "\n", "try", ":", "\n", "        ", "return", "cv", ".", "imread", "(", "path", ")", "\n", "", "except", "Exception", "as", "e", ":", "\n", "        ", "print", "(", "'ERROR: Could not read image \"{}\"'", ".", "format", "(", "path", ")", ")", "\n", "print", "(", "e", ")", "\n", "return", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.imread_indexed": [[83, 90], ["PIL.Image.open", "numpy.atleast_3d"], "function", ["None"], ["", "", "def", "imread_indexed", "(", "filename", ")", ":", "\n", "    ", "\"\"\" Load indexed image with given filename. Used to read segmentation annotations.\"\"\"", "\n", "\n", "im", "=", "Image", ".", "open", "(", "filename", ")", "\n", "\n", "annotation", "=", "np", ".", "atleast_3d", "(", "im", ")", "[", "...", ",", "0", "]", "\n", "return", "annotation", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.image_loader.imwrite_indexed": [[92, 104], ["PIL.Image.fromarray", "Image.fromarray.putpalette", "Image.fromarray.save", "Exception", "color_palette.ravel", "numpy.atleast_3d"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.save"], ["", "def", "imwrite_indexed", "(", "filename", ",", "array", ",", "color_palette", "=", "None", ")", ":", "\n", "    ", "\"\"\" Save indexed image as png. Used to save segmentation annotation.\"\"\"", "\n", "\n", "if", "color_palette", "is", "None", ":", "\n", "        ", "color_palette", "=", "davis_palette", "\n", "\n", "", "if", "np", ".", "atleast_3d", "(", "array", ")", ".", "shape", "[", "2", "]", "!=", "1", ":", "\n", "        ", "raise", "Exception", "(", "\"Saving indexed PNGs requires 2D array.\"", ")", "\n", "\n", "", "im", "=", "Image", ".", "fromarray", "(", "array", ")", "\n", "im", ".", "putpalette", "(", "color_palette", ".", "ravel", "(", ")", ")", "\n", "im", ".", "save", "(", "filename", ",", "format", "=", "'PNG'", ")", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.__init__": [[25, 55], ["sum", "len"], "methods", ["None"], ["train_cls", "=", "False", ",", "pos_prob", "=", "0.5", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            datasets - List of datasets to be used for training\n            p_datasets - List containing the probabilities by which each dataset will be sampled\n            samples_per_epoch - Number of training samples per epoch\n            max_gap - Maximum gap, in frame numbers, between the train frames and the test frames.\n            num_search_frames - Number of search frames to sample.\n            num_template_frames - Number of template frames to sample.\n            processing - An instance of Processing class which performs the necessary processing of the data.\n            frame_sample_mode - Either 'causal' or 'interval'. If 'causal', then the test frames are sampled in a causally,\n                                otherwise randomly within the interval.\n        \"\"\"", "\n", "self", ".", "datasets", "=", "datasets", "\n", "self", ".", "train_cls", "=", "train_cls", "# whether we are training classification", "\n", "self", ".", "pos_prob", "=", "pos_prob", "# probability of sampling positive class when making classification", "\n", "\n", "# If p not provided, sample uniformly from all videos", "\n", "if", "p_datasets", "is", "None", ":", "\n", "            ", "p_datasets", "=", "[", "len", "(", "d", ")", "for", "d", "in", "self", ".", "datasets", "]", "\n", "\n", "# Normalize", "\n", "", "p_total", "=", "sum", "(", "p_datasets", ")", "\n", "self", ".", "p_datasets", "=", "[", "x", "/", "p_total", "for", "x", "in", "p_datasets", "]", "\n", "\n", "self", ".", "samples_per_epoch", "=", "samples_per_epoch", "\n", "self", ".", "max_gap", "=", "max_gap", "\n", "self", ".", "num_search_frames", "=", "num_search_frames", "\n", "self", ".", "num_template_frames", "=", "num_template_frames", "\n", "self", ".", "processing", "=", "processing", "\n", "self", ".", "frame_sample_mode", "=", "frame_sample_mode", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.__len__": [[56, 58], ["None"], "methods", ["None"], ["\n", "", "def", "__len__", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "samples_per_epoch", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids": [[59, 85], ["random.choices", "len", "len", "len", "range"], "methods", ["None"], ["\n", "", "def", "_sample_visible_ids", "(", "self", ",", "visible", ",", "num_ids", "=", "1", ",", "min_id", "=", "None", ",", "max_id", "=", "None", ",", "\n", "allow_invisible", "=", "False", ",", "force_invisible", "=", "False", ")", ":", "\n", "        ", "\"\"\" Samples num_ids frames between min_id and max_id for which target is visible\n\n        args:\n            visible - 1d Tensor indicating whether target is visible for each frame\n            num_ids - number of frames to be samples\n            min_id - Minimum allowed frame number\n            max_id - Maximum allowed frame number\n\n        returns:\n            list - List of sampled frame numbers. None if not sufficient visible frames could be found.\n        \"\"\"", "\n", "if", "num_ids", "==", "0", ":", "\n", "            ", "return", "[", "]", "\n", "", "if", "min_id", "is", "None", "or", "min_id", "<", "0", ":", "\n", "            ", "min_id", "=", "0", "\n", "", "if", "max_id", "is", "None", "or", "max_id", ">", "len", "(", "visible", ")", ":", "\n", "            ", "max_id", "=", "len", "(", "visible", ")", "\n", "# get valid ids", "\n", "", "if", "force_invisible", ":", "\n", "            ", "valid_ids", "=", "[", "i", "for", "i", "in", "range", "(", "min_id", ",", "max_id", ")", "if", "not", "visible", "[", "i", "]", "]", "\n", "", "else", ":", "\n", "            ", "if", "allow_invisible", ":", "\n", "                ", "valid_ids", "=", "[", "i", "for", "i", "in", "range", "(", "min_id", ",", "max_id", ")", "]", "\n", "", "else", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.__getitem__": [[86, 170], ["dataset.is_video_sequence", "dataset.get_frames", "dataset.get_frames", "pytracking.TensorDict", "sampler.TrackingSampler.processing", "random.choices", "random.randint", "dataset.get_sequence_info", "dataset.get_name", "meta_obj_test.get", "dataset.get_num_sequences", "visible.type().sum().item", "len", "sampler.TrackingSampler._sample_visible_ids", "sampler.TrackingSampler._sample_visible_ids", "sampler.TrackingSampler._sample_visible_ids", "sampler.TrackingSampler._sample_visible_ids", "sampler.TrackingSampler._sample_visible_ids", "sampler.TrackingSampler._sample_visible_ids", "visible.type().sum", "visible.type", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.is_video_sequence", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_frames", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_frames", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_sequence_info", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_name", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_num_sequences", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids"], ["                ", "valid_ids", "=", "[", "i", "for", "i", "in", "range", "(", "min_id", ",", "max_id", ")", "if", "visible", "[", "i", "]", "]", "\n", "\n", "# No visible ids", "\n", "", "", "if", "len", "(", "valid_ids", ")", "==", "0", ":", "\n", "            ", "return", "None", "\n", "\n", "", "return", "random", ".", "choices", "(", "valid_ids", ",", "k", "=", "num_ids", ")", "\n", "\n", "", "def", "__getitem__", "(", "self", ",", "index", ")", ":", "\n", "        ", "if", "self", ".", "train_cls", ":", "\n", "            ", "return", "self", ".", "getitem_cls", "(", ")", "\n", "", "else", ":", "\n", "            ", "return", "self", ".", "getitem", "(", ")", "\n", "\n", "", "", "def", "getitem", "(", "self", ")", ":", "\n", "        ", "\"\"\"\n        returns:\n            TensorDict - dict containing all the data blocks\n        \"\"\"", "\n", "valid", "=", "False", "\n", "while", "not", "valid", ":", "\n", "# Select a dataset", "\n", "            ", "dataset", "=", "random", ".", "choices", "(", "self", ".", "datasets", ",", "self", ".", "p_datasets", ")", "[", "0", "]", "\n", "\n", "is_video_dataset", "=", "dataset", ".", "is_video_sequence", "(", ")", "\n", "\n", "# sample a sequence from the given dataset", "\n", "seq_id", ",", "visible", ",", "seq_info_dict", "=", "self", ".", "sample_seq_from_dataset", "(", "dataset", ",", "is_video_dataset", ")", "\n", "\n", "if", "is_video_dataset", ":", "\n", "                ", "template_frame_ids", "=", "None", "\n", "search_frame_ids", "=", "None", "\n", "gap_increase", "=", "0", "\n", "\n", "if", "self", ".", "frame_sample_mode", "==", "'causal'", ":", "\n", "# Sample test and train frames in a causal manner, i.e. search_frame_ids > template_frame_ids", "\n", "                    ", "while", "search_frame_ids", "is", "None", ":", "\n", "                        ", "base_frame_id", "=", "self", ".", "_sample_visible_ids", "(", "visible", ",", "num_ids", "=", "1", ",", "min_id", "=", "self", ".", "num_template_frames", "-", "1", ",", "\n", "max_id", "=", "len", "(", "visible", ")", "-", "self", ".", "num_search_frames", ")", "\n", "prev_frame_ids", "=", "self", ".", "_sample_visible_ids", "(", "visible", ",", "num_ids", "=", "self", ".", "num_template_frames", "-", "1", ",", "\n", "min_id", "=", "base_frame_id", "[", "0", "]", "-", "self", ".", "max_gap", "-", "gap_increase", ",", "\n", "max_id", "=", "base_frame_id", "[", "0", "]", ")", "\n", "if", "prev_frame_ids", "is", "None", ":", "\n", "                            ", "gap_increase", "+=", "5", "\n", "continue", "\n", "", "template_frame_ids", "=", "base_frame_id", "+", "prev_frame_ids", "\n", "search_frame_ids", "=", "self", ".", "_sample_visible_ids", "(", "visible", ",", "min_id", "=", "template_frame_ids", "[", "0", "]", "+", "1", ",", "\n", "max_id", "=", "template_frame_ids", "[", "0", "]", "+", "self", ".", "max_gap", "+", "gap_increase", ",", "\n", "num_ids", "=", "self", ".", "num_search_frames", ")", "\n", "# Increase gap until a frame is found", "\n", "gap_increase", "+=", "5", "\n", "\n", "", "", "elif", "self", ".", "frame_sample_mode", "==", "\"trident\"", "or", "self", ".", "frame_sample_mode", "==", "\"trident_pro\"", ":", "\n", "                    ", "template_frame_ids", ",", "search_frame_ids", "=", "self", ".", "get_frame_ids_trident", "(", "visible", ")", "\n", "", "elif", "self", ".", "frame_sample_mode", "==", "\"stark\"", ":", "\n", "                    ", "template_frame_ids", ",", "search_frame_ids", "=", "self", ".", "get_frame_ids_stark", "(", "visible", ",", "seq_info_dict", "[", "\"valid\"", "]", ")", "\n", "", "else", ":", "\n", "                    ", "raise", "ValueError", "(", "\"Illegal frame sample mode\"", ")", "\n", "", "", "else", ":", "\n", "# In case of image dataset, just repeat the image to generate synthetic video", "\n", "                ", "template_frame_ids", "=", "[", "1", "]", "*", "self", ".", "num_template_frames", "\n", "search_frame_ids", "=", "[", "1", "]", "*", "self", ".", "num_search_frames", "\n", "", "try", ":", "\n", "                ", "template_frames", ",", "template_anno", ",", "meta_obj_train", "=", "dataset", ".", "get_frames", "(", "seq_id", ",", "template_frame_ids", ",", "seq_info_dict", ")", "\n", "search_frames", ",", "search_anno", ",", "meta_obj_test", "=", "dataset", ".", "get_frames", "(", "seq_id", ",", "search_frame_ids", ",", "seq_info_dict", ")", "\n", "\n", "H", ",", "W", ",", "_", "=", "template_frames", "[", "0", "]", ".", "shape", "\n", "template_masks", "=", "template_anno", "[", "'mask'", "]", "if", "'mask'", "in", "template_anno", "else", "[", "torch", ".", "zeros", "(", "(", "H", ",", "W", ")", ")", "]", "*", "self", ".", "num_template_frames", "\n", "search_masks", "=", "search_anno", "[", "'mask'", "]", "if", "'mask'", "in", "search_anno", "else", "[", "torch", ".", "zeros", "(", "(", "H", ",", "W", ")", ")", "]", "*", "self", ".", "num_search_frames", "\n", "\n", "data", "=", "TensorDict", "(", "{", "'template_images'", ":", "template_frames", ",", "\n", "'template_anno'", ":", "template_anno", "[", "'bbox'", "]", ",", "\n", "'template_masks'", ":", "template_masks", ",", "\n", "'search_images'", ":", "search_frames", ",", "\n", "'search_anno'", ":", "search_anno", "[", "'bbox'", "]", ",", "\n", "'search_masks'", ":", "search_masks", ",", "\n", "'dataset'", ":", "dataset", ".", "get_name", "(", ")", ",", "\n", "'test_class'", ":", "meta_obj_test", ".", "get", "(", "'object_class_name'", ")", "}", ")", "\n", "# make data augmentation", "\n", "data", "=", "self", ".", "processing", "(", "data", ")", "\n", "\n", "# check whether data is valid", "\n", "valid", "=", "data", "[", "'valid'", "]", "\n", "", "except", ":", "\n", "                ", "valid", "=", "False", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.getitem": [[100, 173], ["dataset.is_video_sequence", "sampler.TrackingSampler.sample_seq_from_dataset", "random.choices", "dataset.get_frames", "dataset.get_frames", "lib.utils.TensorDict", "sampler.TrackingSampler.processing", "sampler.TrackingSampler._sample_visible_ids", "sampler.TrackingSampler._sample_visible_ids", "sampler.TrackingSampler._sample_visible_ids", "sampler.TrackingSampler.get_frame_ids_trident", "dataset.get_name", "meta_obj_test.get", "sampler.TrackingSampler.get_frame_ids_stark", "ValueError", "torch.zeros", "torch.zeros", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.is_video_sequence", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.sample_seq_from_dataset", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_frames", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_frames", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.get_frame_ids_trident", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_name", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.get_frame_ids_stark"], ["", "", "def", "getitem", "(", "self", ")", ":", "\n", "        ", "\"\"\"\n        returns:\n            TensorDict - dict containing all the data blocks\n        \"\"\"", "\n", "valid", "=", "False", "\n", "while", "not", "valid", ":", "\n", "# Select a dataset", "\n", "            ", "dataset", "=", "random", ".", "choices", "(", "self", ".", "datasets", ",", "self", ".", "p_datasets", ")", "[", "0", "]", "\n", "\n", "is_video_dataset", "=", "dataset", ".", "is_video_sequence", "(", ")", "\n", "\n", "# sample a sequence from the given dataset", "\n", "seq_id", ",", "visible", ",", "seq_info_dict", "=", "self", ".", "sample_seq_from_dataset", "(", "dataset", ",", "is_video_dataset", ")", "\n", "\n", "if", "is_video_dataset", ":", "\n", "                ", "template_frame_ids", "=", "None", "\n", "search_frame_ids", "=", "None", "\n", "gap_increase", "=", "0", "\n", "\n", "if", "self", ".", "frame_sample_mode", "==", "'causal'", ":", "\n", "# Sample test and train frames in a causal manner, i.e. search_frame_ids > template_frame_ids", "\n", "                    ", "while", "search_frame_ids", "is", "None", ":", "\n", "                        ", "base_frame_id", "=", "self", ".", "_sample_visible_ids", "(", "visible", ",", "num_ids", "=", "1", ",", "min_id", "=", "self", ".", "num_template_frames", "-", "1", ",", "\n", "max_id", "=", "len", "(", "visible", ")", "-", "self", ".", "num_search_frames", ")", "\n", "prev_frame_ids", "=", "self", ".", "_sample_visible_ids", "(", "visible", ",", "num_ids", "=", "self", ".", "num_template_frames", "-", "1", ",", "\n", "min_id", "=", "base_frame_id", "[", "0", "]", "-", "self", ".", "max_gap", "-", "gap_increase", ",", "\n", "max_id", "=", "base_frame_id", "[", "0", "]", ")", "\n", "if", "prev_frame_ids", "is", "None", ":", "\n", "                            ", "gap_increase", "+=", "5", "\n", "continue", "\n", "", "template_frame_ids", "=", "base_frame_id", "+", "prev_frame_ids", "\n", "search_frame_ids", "=", "self", ".", "_sample_visible_ids", "(", "visible", ",", "min_id", "=", "template_frame_ids", "[", "0", "]", "+", "1", ",", "\n", "max_id", "=", "template_frame_ids", "[", "0", "]", "+", "self", ".", "max_gap", "+", "gap_increase", ",", "\n", "num_ids", "=", "self", ".", "num_search_frames", ")", "\n", "# Increase gap until a frame is found", "\n", "gap_increase", "+=", "5", "\n", "\n", "", "", "elif", "self", ".", "frame_sample_mode", "==", "\"trident\"", "or", "self", ".", "frame_sample_mode", "==", "\"trident_pro\"", ":", "\n", "                    ", "template_frame_ids", ",", "search_frame_ids", "=", "self", ".", "get_frame_ids_trident", "(", "visible", ")", "\n", "", "elif", "self", ".", "frame_sample_mode", "==", "\"stark\"", ":", "\n", "                    ", "template_frame_ids", ",", "search_frame_ids", "=", "self", ".", "get_frame_ids_stark", "(", "visible", ",", "seq_info_dict", "[", "\"valid\"", "]", ")", "\n", "", "else", ":", "\n", "                    ", "raise", "ValueError", "(", "\"Illegal frame sample mode\"", ")", "\n", "", "", "else", ":", "\n", "# In case of image dataset, just repeat the image to generate synthetic video", "\n", "                ", "template_frame_ids", "=", "[", "1", "]", "*", "self", ".", "num_template_frames", "\n", "search_frame_ids", "=", "[", "1", "]", "*", "self", ".", "num_search_frames", "\n", "", "try", ":", "\n", "                ", "template_frames", ",", "template_anno", ",", "meta_obj_train", "=", "dataset", ".", "get_frames", "(", "seq_id", ",", "template_frame_ids", ",", "seq_info_dict", ")", "\n", "search_frames", ",", "search_anno", ",", "meta_obj_test", "=", "dataset", ".", "get_frames", "(", "seq_id", ",", "search_frame_ids", ",", "seq_info_dict", ")", "\n", "\n", "H", ",", "W", ",", "_", "=", "template_frames", "[", "0", "]", ".", "shape", "\n", "template_masks", "=", "template_anno", "[", "'mask'", "]", "if", "'mask'", "in", "template_anno", "else", "[", "torch", ".", "zeros", "(", "(", "H", ",", "W", ")", ")", "]", "*", "self", ".", "num_template_frames", "\n", "search_masks", "=", "search_anno", "[", "'mask'", "]", "if", "'mask'", "in", "search_anno", "else", "[", "torch", ".", "zeros", "(", "(", "H", ",", "W", ")", ")", "]", "*", "self", ".", "num_search_frames", "\n", "\n", "data", "=", "TensorDict", "(", "{", "'template_images'", ":", "template_frames", ",", "\n", "'template_anno'", ":", "template_anno", "[", "'bbox'", "]", ",", "\n", "'template_masks'", ":", "template_masks", ",", "\n", "'search_images'", ":", "search_frames", ",", "\n", "'search_anno'", ":", "search_anno", "[", "'bbox'", "]", ",", "\n", "'search_masks'", ":", "search_masks", ",", "\n", "'dataset'", ":", "dataset", ".", "get_name", "(", ")", ",", "\n", "'test_class'", ":", "meta_obj_test", ".", "get", "(", "'object_class_name'", ")", "}", ")", "\n", "# make data augmentation", "\n", "data", "=", "self", ".", "processing", "(", "data", ")", "\n", "\n", "# check whether data is valid", "\n", "valid", "=", "data", "[", "'valid'", "]", "\n", "", "except", ":", "\n", "                ", "valid", "=", "False", "\n", "\n", "", "", "return", "data", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.getitem_cls": [[174, 257], ["dataset.is_video_sequence", "sampler.TrackingSampler.sample_seq_from_dataset", "random.choices", "dataset.get_frames", "lib.utils.TensorDict", "sampler.TrackingSampler.processing", "sampler.TrackingSampler.get_frame_ids_trident", "random.random", "torch.ones", "dataset.get_frames", "torch.zeros", "sampler.TrackingSampler.get_frame_ids_stark", "ValueError", "sampler.TrackingSampler._sample_visible_ids", "sampler.TrackingSampler.get_one_search", "dataset.get_name", "meta_obj_test.get", "torch.zeros", "sampler.TrackingSampler.get_one_search", "dataset.get_frames", "torch.zeros", "sampler.TrackingSampler.get_center_box", "torch.zeros"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.is_video_sequence", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.sample_seq_from_dataset", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_frames", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.get_frame_ids_trident", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_frames", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.get_frame_ids_stark", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.get_one_search", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_name", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.get_one_search", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_frames", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.get_center_box"], ["", "def", "getitem_cls", "(", "self", ")", ":", "\n", "# get data for classification", "\n", "        ", "\"\"\"\n        args:\n            index (int): Index (Ignored since we sample randomly)\n            aux (bool): whether the current data is for auxiliary use (e.g. copy-and-paste)\n\n        returns:\n            TensorDict - dict containing all the data blocks\n        \"\"\"", "\n", "valid", "=", "False", "\n", "label", "=", "None", "\n", "while", "not", "valid", ":", "\n", "# Select a dataset", "\n", "            ", "dataset", "=", "random", ".", "choices", "(", "self", ".", "datasets", ",", "self", ".", "p_datasets", ")", "[", "0", "]", "\n", "\n", "is_video_dataset", "=", "dataset", ".", "is_video_sequence", "(", ")", "\n", "\n", "# sample a sequence from the given dataset", "\n", "seq_id", ",", "visible", ",", "seq_info_dict", "=", "self", ".", "sample_seq_from_dataset", "(", "dataset", ",", "is_video_dataset", ")", "\n", "# sample template and search frame ids", "\n", "if", "is_video_dataset", ":", "\n", "                ", "if", "self", ".", "frame_sample_mode", "in", "[", "\"trident\"", ",", "\"trident_pro\"", "]", ":", "\n", "                    ", "template_frame_ids", ",", "search_frame_ids", "=", "self", ".", "get_frame_ids_trident", "(", "visible", ")", "\n", "", "elif", "self", ".", "frame_sample_mode", "==", "\"stark\"", ":", "\n", "                    ", "template_frame_ids", ",", "search_frame_ids", "=", "self", ".", "get_frame_ids_stark", "(", "visible", ",", "seq_info_dict", "[", "\"valid\"", "]", ")", "\n", "", "else", ":", "\n", "                    ", "raise", "ValueError", "(", "\"illegal frame sample mode\"", ")", "\n", "", "", "else", ":", "\n", "# In case of image dataset, just repeat the image to generate synthetic video", "\n", "                ", "template_frame_ids", "=", "[", "1", "]", "*", "self", ".", "num_template_frames", "\n", "search_frame_ids", "=", "[", "1", "]", "*", "self", ".", "num_search_frames", "\n", "", "try", ":", "\n", "# \"try\" is used to handle trackingnet data failure", "\n", "# get images and bounding boxes (for templates)", "\n", "                ", "template_frames", ",", "template_anno", ",", "meta_obj_train", "=", "dataset", ".", "get_frames", "(", "seq_id", ",", "template_frame_ids", ",", "\n", "seq_info_dict", ")", "\n", "H", ",", "W", ",", "_", "=", "template_frames", "[", "0", "]", ".", "shape", "\n", "template_masks", "=", "template_anno", "[", "'mask'", "]", "if", "'mask'", "in", "template_anno", "else", "[", "torch", ".", "zeros", "(", "\n", "(", "H", ",", "W", ")", ")", "]", "*", "self", ".", "num_template_frames", "\n", "# get images and bounding boxes (for searches)", "\n", "# positive samples", "\n", "if", "random", ".", "random", "(", ")", "<", "self", ".", "pos_prob", ":", "\n", "                    ", "label", "=", "torch", ".", "ones", "(", "1", ",", ")", "\n", "search_frames", ",", "search_anno", ",", "meta_obj_test", "=", "dataset", ".", "get_frames", "(", "seq_id", ",", "search_frame_ids", ",", "seq_info_dict", ")", "\n", "search_masks", "=", "search_anno", "[", "'mask'", "]", "if", "'mask'", "in", "search_anno", "else", "[", "torch", ".", "zeros", "(", "\n", "(", "H", ",", "W", ")", ")", "]", "*", "self", ".", "num_search_frames", "\n", "# negative samples", "\n", "", "else", ":", "\n", "                    ", "label", "=", "torch", ".", "zeros", "(", "1", ",", ")", "\n", "if", "is_video_dataset", ":", "\n", "                        ", "search_frame_ids", "=", "self", ".", "_sample_visible_ids", "(", "visible", ",", "num_ids", "=", "1", ",", "force_invisible", "=", "True", ")", "\n", "if", "search_frame_ids", "is", "None", ":", "\n", "                            ", "search_frames", ",", "search_anno", ",", "meta_obj_test", "=", "self", ".", "get_one_search", "(", ")", "\n", "", "else", ":", "\n", "                            ", "search_frames", ",", "search_anno", ",", "meta_obj_test", "=", "dataset", ".", "get_frames", "(", "seq_id", ",", "search_frame_ids", ",", "\n", "seq_info_dict", ")", "\n", "search_anno", "[", "\"bbox\"", "]", "=", "[", "self", ".", "get_center_box", "(", "H", ",", "W", ")", "]", "\n", "", "", "else", ":", "\n", "                        ", "search_frames", ",", "search_anno", ",", "meta_obj_test", "=", "self", ".", "get_one_search", "(", ")", "\n", "", "H", ",", "W", ",", "_", "=", "search_frames", "[", "0", "]", ".", "shape", "\n", "search_masks", "=", "search_anno", "[", "'mask'", "]", "if", "'mask'", "in", "search_anno", "else", "[", "torch", ".", "zeros", "(", "\n", "(", "H", ",", "W", ")", ")", "]", "*", "self", ".", "num_search_frames", "\n", "\n", "", "data", "=", "TensorDict", "(", "{", "'template_images'", ":", "template_frames", ",", "\n", "'template_anno'", ":", "template_anno", "[", "'bbox'", "]", ",", "\n", "'template_masks'", ":", "template_masks", ",", "\n", "'search_images'", ":", "search_frames", ",", "\n", "'search_anno'", ":", "search_anno", "[", "'bbox'", "]", ",", "\n", "'search_masks'", ":", "search_masks", ",", "\n", "'dataset'", ":", "dataset", ".", "get_name", "(", ")", ",", "\n", "'test_class'", ":", "meta_obj_test", ".", "get", "(", "'object_class_name'", ")", "}", ")", "\n", "\n", "# make data augmentation", "\n", "data", "=", "self", ".", "processing", "(", "data", ")", "\n", "# add classification label", "\n", "data", "[", "\"label\"", "]", "=", "label", "\n", "# check whether data is valid", "\n", "valid", "=", "data", "[", "'valid'", "]", "\n", "", "except", ":", "\n", "                ", "valid", "=", "False", "\n", "\n", "", "", "return", "data", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.get_center_box": [[258, 261], ["torch.tensor", "int", "int", "int", "int"], "methods", ["None"], ["", "def", "get_center_box", "(", "self", ",", "H", ",", "W", ",", "ratio", "=", "1", "/", "8", ")", ":", "\n", "        ", "cx", ",", "cy", ",", "w", ",", "h", "=", "W", "/", "2", ",", "H", "/", "2", ",", "W", "*", "ratio", ",", "H", "*", "ratio", "\n", "return", "torch", ".", "tensor", "(", "[", "int", "(", "cx", "-", "w", "/", "2", ")", ",", "int", "(", "cy", "-", "h", "/", "2", ")", ",", "int", "(", "w", ")", ",", "int", "(", "h", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.sample_seq_from_dataset": [[262, 279], ["random.randint", "dataset.get_sequence_info", "dataset.get_num_sequences", "visible.type().sum().item", "len", "visible.type().sum", "visible.type"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_sequence_info", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_num_sequences"], ["", "def", "sample_seq_from_dataset", "(", "self", ",", "dataset", ",", "is_video_dataset", ")", ":", "\n", "\n", "# Sample a sequence with enough visible frames", "\n", "        ", "enough_visible_frames", "=", "False", "\n", "while", "not", "enough_visible_frames", ":", "\n", "# Sample a sequence", "\n", "            ", "seq_id", "=", "random", ".", "randint", "(", "0", ",", "dataset", ".", "get_num_sequences", "(", ")", "-", "1", ")", "\n", "\n", "# Sample frames", "\n", "seq_info_dict", "=", "dataset", ".", "get_sequence_info", "(", "seq_id", ")", "\n", "visible", "=", "seq_info_dict", "[", "'visible'", "]", "\n", "\n", "enough_visible_frames", "=", "visible", ".", "type", "(", "torch", ".", "int64", ")", ".", "sum", "(", ")", ".", "item", "(", ")", ">", "2", "*", "(", "\n", "self", ".", "num_search_frames", "+", "self", ".", "num_template_frames", ")", "and", "len", "(", "visible", ")", ">=", "20", "\n", "\n", "enough_visible_frames", "=", "enough_visible_frames", "or", "not", "is_video_dataset", "\n", "", "return", "seq_id", ",", "visible", ",", "seq_info_dict", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.get_one_search": [[280, 299], ["dataset.is_video_sequence", "sampler.TrackingSampler.sample_seq_from_dataset", "dataset.get_frames", "random.choices", "sampler.TrackingSampler._sample_visible_ids", "sampler.TrackingSampler._sample_visible_ids"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.is_video_sequence", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.sample_seq_from_dataset", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.synthetic_video.SyntheticVideo.get_frames", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids"], ["", "def", "get_one_search", "(", "self", ")", ":", "\n", "# Select a dataset", "\n", "        ", "dataset", "=", "random", ".", "choices", "(", "self", ".", "datasets", ",", "self", ".", "p_datasets", ")", "[", "0", "]", "\n", "\n", "is_video_dataset", "=", "dataset", ".", "is_video_sequence", "(", ")", "\n", "# sample a sequence", "\n", "seq_id", ",", "visible", ",", "seq_info_dict", "=", "self", ".", "sample_seq_from_dataset", "(", "dataset", ",", "is_video_dataset", ")", "\n", "# sample a frame", "\n", "if", "is_video_dataset", ":", "\n", "            ", "if", "self", ".", "frame_sample_mode", "==", "\"stark\"", ":", "\n", "                ", "search_frame_ids", "=", "self", ".", "_sample_visible_ids", "(", "seq_info_dict", "[", "\"valid\"", "]", ",", "num_ids", "=", "1", ")", "\n", "", "else", ":", "\n", "                ", "search_frame_ids", "=", "self", ".", "_sample_visible_ids", "(", "visible", ",", "num_ids", "=", "1", ",", "allow_invisible", "=", "True", ")", "\n", "", "", "else", ":", "\n", "            ", "search_frame_ids", "=", "[", "1", "]", "\n", "# get the image, bounding box and other info", "\n", "", "search_frames", ",", "search_anno", ",", "meta_obj_test", "=", "dataset", ".", "get_frames", "(", "seq_id", ",", "search_frame_ids", ",", "seq_info_dict", ")", "\n", "\n", "return", "search_frames", ",", "search_anno", ",", "meta_obj_test", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.get_frame_ids_trident": [[300, 326], ["sampler.TrackingSampler._sample_visible_ids", "sampler.TrackingSampler._sample_visible_ids", "len", "sampler.TrackingSampler._sample_visible_ids", "sampler.TrackingSampler._sample_visible_ids"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids"], ["", "def", "get_frame_ids_trident", "(", "self", ",", "visible", ")", ":", "\n", "# get template and search ids in a 'trident' manner", "\n", "        ", "template_frame_ids_extra", "=", "[", "]", "\n", "while", "None", "in", "template_frame_ids_extra", "or", "len", "(", "template_frame_ids_extra", ")", "==", "0", ":", "\n", "            ", "template_frame_ids_extra", "=", "[", "]", "\n", "# first randomly sample two frames from a video", "\n", "template_frame_id1", "=", "self", ".", "_sample_visible_ids", "(", "visible", ",", "num_ids", "=", "1", ")", "# the initial template id", "\n", "search_frame_ids", "=", "self", ".", "_sample_visible_ids", "(", "visible", ",", "num_ids", "=", "1", ")", "# the search region id", "\n", "# get the dynamic template id", "\n", "for", "max_gap", "in", "self", ".", "max_gap", ":", "\n", "                ", "if", "template_frame_id1", "[", "0", "]", ">=", "search_frame_ids", "[", "0", "]", ":", "\n", "                    ", "min_id", ",", "max_id", "=", "search_frame_ids", "[", "0", "]", ",", "search_frame_ids", "[", "0", "]", "+", "max_gap", "\n", "", "else", ":", "\n", "                    ", "min_id", ",", "max_id", "=", "search_frame_ids", "[", "0", "]", "-", "max_gap", ",", "search_frame_ids", "[", "0", "]", "\n", "", "if", "self", ".", "frame_sample_mode", "==", "\"trident_pro\"", ":", "\n", "                    ", "f_id", "=", "self", ".", "_sample_visible_ids", "(", "visible", ",", "num_ids", "=", "1", ",", "min_id", "=", "min_id", ",", "max_id", "=", "max_id", ",", "\n", "allow_invisible", "=", "True", ")", "\n", "", "else", ":", "\n", "                    ", "f_id", "=", "self", ".", "_sample_visible_ids", "(", "visible", ",", "num_ids", "=", "1", ",", "min_id", "=", "min_id", ",", "max_id", "=", "max_id", ")", "\n", "", "if", "f_id", "is", "None", ":", "\n", "                    ", "template_frame_ids_extra", "+=", "[", "None", "]", "\n", "", "else", ":", "\n", "                    ", "template_frame_ids_extra", "+=", "f_id", "\n", "\n", "", "", "", "template_frame_ids", "=", "template_frame_id1", "+", "template_frame_ids_extra", "\n", "return", "template_frame_ids", ",", "search_frame_ids", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler.get_frame_ids_stark": [[327, 350], ["sampler.TrackingSampler._sample_visible_ids", "sampler.TrackingSampler._sample_visible_ids", "len", "sampler.TrackingSampler._sample_visible_ids"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids", "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.TrackingSampler._sample_visible_ids"], ["", "def", "get_frame_ids_stark", "(", "self", ",", "visible", ",", "valid", ")", ":", "\n", "# get template and search ids in a 'stark' manner", "\n", "        ", "template_frame_ids_extra", "=", "[", "]", "\n", "while", "None", "in", "template_frame_ids_extra", "or", "len", "(", "template_frame_ids_extra", ")", "==", "0", ":", "\n", "            ", "template_frame_ids_extra", "=", "[", "]", "\n", "# first randomly sample two frames from a video", "\n", "template_frame_id1", "=", "self", ".", "_sample_visible_ids", "(", "visible", ",", "num_ids", "=", "1", ")", "# the initial template id", "\n", "search_frame_ids", "=", "self", ".", "_sample_visible_ids", "(", "visible", ",", "num_ids", "=", "1", ")", "# the search region id", "\n", "# get the dynamic template id", "\n", "for", "max_gap", "in", "self", ".", "max_gap", ":", "\n", "                ", "if", "template_frame_id1", "[", "0", "]", ">=", "search_frame_ids", "[", "0", "]", ":", "\n", "                    ", "min_id", ",", "max_id", "=", "search_frame_ids", "[", "0", "]", ",", "search_frame_ids", "[", "0", "]", "+", "max_gap", "\n", "", "else", ":", "\n", "                    ", "min_id", ",", "max_id", "=", "search_frame_ids", "[", "0", "]", "-", "max_gap", ",", "search_frame_ids", "[", "0", "]", "\n", "", "\"\"\"we require the frame to be valid but not necessary visible\"\"\"", "\n", "f_id", "=", "self", ".", "_sample_visible_ids", "(", "valid", ",", "num_ids", "=", "1", ",", "min_id", "=", "min_id", ",", "max_id", "=", "max_id", ")", "\n", "if", "f_id", "is", "None", ":", "\n", "                    ", "template_frame_ids_extra", "+=", "[", "None", "]", "\n", "", "else", ":", "\n", "                    ", "template_frame_ids_extra", "+=", "f_id", "\n", "\n", "", "", "", "template_frame_ids", "=", "template_frame_id1", "+", "template_frame_ids_extra", "\n", "return", "template_frame_ids", ",", "search_frame_ids", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.no_processing": [[6, 8], ["None"], "function", ["None"], ["\n", "def", "no_processing", "(", "data", ")", ":", "\n", "    ", "return", "data", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_target": [[9, 66], ["target_bb.tolist", "math.ceil", "round", "round", "max", "max", "max", "max", "cv2.copyMakeBorder", "Exception", "torch.pad", "cv2.resize", "math.sqrt", "torch.interpolate"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], ["\n", "\n", "\n", "def", "sample_target", "(", "im", ",", "target_bb", ",", "search_area_factor", ",", "output_sz", "=", "None", ",", "mask", "=", "None", ")", ":", "\n", "    ", "\"\"\" Extracts a square crop centered at target_bb box, of area search_area_factor^2 times target_bb area\n\n    args:\n        im - cv image\n        target_bb - target box [x, y, w, h]\n        search_area_factor - Ratio of crop size to target size\n        output_sz - (float) Size to which the extracted crop is resized (always square). If None, no resizing is done.\n\n    returns:\n        cv image - extracted crop\n        float - the factor by which the crop has been resized to make the crop size equal output_size\n    \"\"\"", "\n", "if", "not", "isinstance", "(", "target_bb", ",", "list", ")", ":", "\n", "        ", "x", ",", "y", ",", "w", ",", "h", "=", "target_bb", ".", "tolist", "(", ")", "\n", "", "else", ":", "\n", "        ", "x", ",", "y", ",", "w", ",", "h", "=", "target_bb", "\n", "# Crop image", "\n", "", "crop_sz", "=", "math", ".", "ceil", "(", "math", ".", "sqrt", "(", "w", "*", "h", ")", "*", "search_area_factor", ")", "\n", "\n", "if", "crop_sz", "<", "1", ":", "\n", "        ", "raise", "Exception", "(", "'Too small bounding box.'", ")", "\n", "\n", "", "x1", "=", "round", "(", "x", "+", "0.5", "*", "w", "-", "crop_sz", "*", "0.5", ")", "\n", "x2", "=", "x1", "+", "crop_sz", "\n", "\n", "y1", "=", "round", "(", "y", "+", "0.5", "*", "h", "-", "crop_sz", "*", "0.5", ")", "\n", "y2", "=", "y1", "+", "crop_sz", "\n", "\n", "x1_pad", "=", "max", "(", "0", ",", "-", "x1", ")", "\n", "x2_pad", "=", "max", "(", "x2", "-", "im", ".", "shape", "[", "1", "]", "+", "1", ",", "0", ")", "\n", "\n", "y1_pad", "=", "max", "(", "0", ",", "-", "y1", ")", "\n", "y2_pad", "=", "max", "(", "y2", "-", "im", ".", "shape", "[", "0", "]", "+", "1", ",", "0", ")", "\n", "\n", "# Crop target", "\n", "im_crop", "=", "im", "[", "y1", "+", "y1_pad", ":", "y2", "-", "y2_pad", ",", "x1", "+", "x1_pad", ":", "x2", "-", "x2_pad", ",", ":", "]", "\n", "if", "mask", "is", "not", "None", ":", "\n", "        ", "mask_crop", "=", "mask", "[", "y1", "+", "y1_pad", ":", "y2", "-", "y2_pad", ",", "x1", "+", "x1_pad", ":", "x2", "-", "x2_pad", "]", "\n", "\n", "# Pad", "\n", "", "im_crop_padded", "=", "cv", ".", "copyMakeBorder", "(", "im_crop", ",", "y1_pad", ",", "y2_pad", ",", "x1_pad", ",", "x2_pad", ",", "cv", ".", "BORDER_CONSTANT", ")", "\n", "# deal with attention mask", "\n", "H", ",", "W", ",", "_", "=", "im_crop_padded", ".", "shape", "\n", "att_mask", "=", "np", ".", "ones", "(", "(", "H", ",", "W", ")", ")", "\n", "end_x", ",", "end_y", "=", "-", "x2_pad", ",", "-", "y2_pad", "\n", "if", "y2_pad", "==", "0", ":", "\n", "        ", "end_y", "=", "None", "\n", "", "if", "x2_pad", "==", "0", ":", "\n", "        ", "end_x", "=", "None", "\n", "", "att_mask", "[", "y1_pad", ":", "end_y", ",", "x1_pad", ":", "end_x", "]", "=", "0", "\n", "if", "mask", "is", "not", "None", ":", "\n", "        ", "mask_crop_padded", "=", "F", ".", "pad", "(", "mask_crop", ",", "pad", "=", "(", "x1_pad", ",", "x2_pad", ",", "y1_pad", ",", "y2_pad", ")", ",", "mode", "=", "'constant'", ",", "value", "=", "0", ")", "\n", "\n", "", "if", "output_sz", "is", "not", "None", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.transform_image_to_crop": [[68, 89], ["torch.cat", "torch.cat"], "function", ["None"], ["im_crop_padded", "=", "cv", ".", "resize", "(", "im_crop_padded", ",", "(", "output_sz", ",", "output_sz", ")", ")", "\n", "att_mask", "=", "cv", ".", "resize", "(", "att_mask", ",", "(", "output_sz", ",", "output_sz", ")", ")", ".", "astype", "(", "np", ".", "bool_", ")", "\n", "if", "mask", "is", "None", ":", "\n", "            ", "return", "im_crop_padded", ",", "resize_factor", ",", "att_mask", "\n", "", "mask_crop_padded", "=", "F", ".", "interpolate", "(", "mask_crop_padded", "[", "None", ",", "None", "]", ",", "(", "output_sz", ",", "output_sz", ")", ",", "mode", "=", "'bilinear'", ",", "align_corners", "=", "False", ")", "[", "0", ",", "0", "]", "\n", "return", "im_crop_padded", ",", "resize_factor", ",", "att_mask", ",", "mask_crop_padded", "\n", "\n", "", "else", ":", "\n", "        ", "if", "mask", "is", "None", ":", "\n", "            ", "return", "im_crop_padded", ",", "att_mask", ".", "astype", "(", "np", ".", "bool_", ")", ",", "1.0", "\n", "", "return", "im_crop_padded", ",", "1.0", ",", "att_mask", ".", "astype", "(", "np", ".", "bool_", ")", ",", "mask_crop_padded", "\n", "\n", "\n", "", "", "def", "transform_image_to_crop", "(", "box_in", ":", "torch", ".", "Tensor", ",", "box_extract", ":", "torch", ".", "Tensor", ",", "resize_factor", ":", "float", ",", "\n", "crop_sz", ":", "torch", ".", "Tensor", ",", "normalize", "=", "False", ")", "->", "torch", ".", "Tensor", ":", "\n", "    "]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.jittered_center_crop": [[91, 126], ["torch.Tensor", "torch.Tensor", "zip", "zip", "processing_utils.transform_image_to_crop", "processing_utils.sample_target", "processing_utils.sample_target", "zip", "zip", "zip"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.transform_image_to_crop", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_target", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_target"], ["\n", "box_extract_center", "=", "box_extract", "[", "0", ":", "2", "]", "+", "0.5", "*", "box_extract", "[", "2", ":", "4", "]", "\n", "\n", "box_in_center", "=", "box_in", "[", "0", ":", "2", "]", "+", "0.5", "*", "box_in", "[", "2", ":", "4", "]", "\n", "\n", "box_out_center", "=", "(", "crop_sz", "-", "1", ")", "/", "2", "+", "(", "box_in_center", "-", "box_extract_center", ")", "*", "resize_factor", "\n", "box_out_wh", "=", "box_in", "[", "2", ":", "4", "]", "*", "resize_factor", "\n", "\n", "box_out", "=", "torch", ".", "cat", "(", "(", "box_out_center", "-", "0.5", "*", "box_out_wh", ",", "box_out_wh", ")", ")", "\n", "if", "normalize", ":", "\n", "        ", "return", "box_out", "/", "crop_sz", "[", "0", "]", "\n", "", "else", ":", "\n", "        ", "return", "box_out", "\n", "\n", "\n", "", "", "def", "jittered_center_crop", "(", "frames", ",", "box_extract", ",", "box_gt", ",", "search_area_factor", ",", "output_sz", ",", "masks", "=", "None", ")", ":", "\n", "    ", "\"\"\" For each frame in frames, extracts a square crop centered at box_extract, of area search_area_factor^2\n    times box_extract area. The extracted crops are then resized to output_sz. Further, the co-ordinates of the box\n    box_gt are transformed to the image crop co-ordinates\n\n    args:\n        frames - list of frames\n        box_extract - list of boxes of same length as frames. The crops are extracted using anno_extract\n        box_gt - list of boxes of same length as frames. The co-ordinates of these boxes are transformed from\n                    image co-ordinates to the crop co-ordinates\n        search_area_factor - The area of the extracted crop is search_area_factor^2 times box_extract area\n        output_sz - The size to which the extracted crops are resized\n\n    returns:\n        list - list of image crops\n        list - box_gt location in the crop co-ordinates\n        \"\"\"", "\n", "\n", "if", "masks", "is", "None", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.transform_box_to_crop": [[298, 317], ["box.clone"], "function", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.rect_to_rel": [[4, 19], ["torch.log", "torch.cat"], "function", ["None"], ["def", "rect_to_rel", "(", "bb", ",", "sz_norm", "=", "None", ")", ":", "\n", "    ", "\"\"\"Convert standard rectangular parametrization of the bounding box [x, y, w, h]\n    to relative parametrization [cx/sw, cy/sh, log(w), log(h)], where [cx, cy] is the center coordinate.\n    args:\n        bb  -  N x 4 tensor of boxes.\n        sz_norm  -  [N] x 2 tensor of value of [sw, sh] (optional). sw=w and sh=h if not given.\n    \"\"\"", "\n", "\n", "c", "=", "bb", "[", "...", ",", ":", "2", "]", "+", "0.5", "*", "bb", "[", "...", ",", "2", ":", "]", "\n", "if", "sz_norm", "is", "None", ":", "\n", "        ", "c_rel", "=", "c", "/", "bb", "[", "...", ",", "2", ":", "]", "\n", "", "else", ":", "\n", "        ", "c_rel", "=", "c", "/", "sz_norm", "\n", "", "sz_rel", "=", "torch", ".", "log", "(", "bb", "[", "...", ",", "2", ":", "]", ")", "\n", "return", "torch", ".", "cat", "(", "(", "c_rel", ",", "sz_rel", ")", ",", "dim", "=", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.rel_to_rect": [[21, 31], ["torch.exp", "torch.cat"], "function", ["None"], ["", "def", "rel_to_rect", "(", "bb", ",", "sz_norm", "=", "None", ")", ":", "\n", "    ", "\"\"\"Inverts the effect of rect_to_rel. See above.\"\"\"", "\n", "\n", "sz", "=", "torch", ".", "exp", "(", "bb", "[", "...", ",", "2", ":", "]", ")", "\n", "if", "sz_norm", "is", "None", ":", "\n", "        ", "c", "=", "bb", "[", "...", ",", ":", "2", "]", "*", "sz", "\n", "", "else", ":", "\n", "        ", "c", "=", "bb", "[", "...", ",", ":", "2", "]", "*", "sz_norm", "\n", "", "tl", "=", "c", "-", "0.5", "*", "sz", "\n", "return", "torch", ".", "cat", "(", "(", "tl", ",", "sz", ")", ",", "dim", "=", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.masks_to_bboxes": [[33, 68], ["mask.reshape.reshape", "torch.tensor", "bboxes.reshape.reshape", "ValueError", "m.sum().nonzero", "m.sum().nonzero", "bboxes.reshape.append", "torch.cat", "torch.cat", "m.sum", "m.sum", "m.sum().nonzero.min", "m.sum().nonzero.min", "m.sum().nonzero.max", "m.sum().nonzero.max", "len", "len"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "masks_to_bboxes", "(", "mask", ",", "fmt", "=", "'c'", ")", ":", "\n", "\n", "    ", "\"\"\" Convert a mask tensor to one or more bounding boxes.\n    Note: This function is a bit new, make sure it does what it says.  /Andreas\n    :param mask: Tensor of masks, shape = (..., H, W)\n    :param fmt: bbox layout. 'c' => \"center + size\" or (x_center, y_center, width, height)\n                             't' => \"top left + size\" or (x_left, y_top, width, height)\n                             'v' => \"vertices\" or (x_left, y_top, x_right, y_bottom)\n    :return: tensor containing a batch of bounding boxes, shape = (..., 4)\n    \"\"\"", "\n", "batch_shape", "=", "mask", ".", "shape", "[", ":", "-", "2", "]", "\n", "mask", "=", "mask", ".", "reshape", "(", "(", "-", "1", ",", "*", "mask", ".", "shape", "[", "-", "2", ":", "]", ")", ")", "\n", "bboxes", "=", "[", "]", "\n", "\n", "for", "m", "in", "mask", ":", "\n", "        ", "mx", "=", "m", ".", "sum", "(", "dim", "=", "-", "2", ")", ".", "nonzero", "(", ")", "\n", "my", "=", "m", ".", "sum", "(", "dim", "=", "-", "1", ")", ".", "nonzero", "(", ")", "\n", "bb", "=", "[", "mx", ".", "min", "(", ")", ",", "my", ".", "min", "(", ")", ",", "mx", ".", "max", "(", ")", ",", "my", ".", "max", "(", ")", "]", "if", "(", "len", "(", "mx", ")", ">", "0", "and", "len", "(", "my", ")", ">", "0", ")", "else", "[", "0", ",", "0", ",", "0", ",", "0", "]", "\n", "bboxes", ".", "append", "(", "bb", ")", "\n", "\n", "", "bboxes", "=", "torch", ".", "tensor", "(", "bboxes", ",", "dtype", "=", "torch", ".", "float32", ",", "device", "=", "mask", ".", "device", ")", "\n", "bboxes", "=", "bboxes", ".", "reshape", "(", "batch_shape", "+", "(", "4", ",", ")", ")", "\n", "\n", "if", "fmt", "==", "'v'", ":", "\n", "        ", "return", "bboxes", "\n", "\n", "", "x1", "=", "bboxes", "[", "...", ",", ":", "2", "]", "\n", "s", "=", "bboxes", "[", "...", ",", "2", ":", "]", "-", "x1", "+", "1", "\n", "\n", "if", "fmt", "==", "'c'", ":", "\n", "        ", "return", "torch", ".", "cat", "(", "(", "x1", "+", "0.5", "*", "s", ",", "s", ")", ",", "dim", "=", "-", "1", ")", "\n", "", "elif", "fmt", "==", "'t'", ":", "\n", "        ", "return", "torch", ".", "cat", "(", "(", "x1", ",", "s", ")", ",", "dim", "=", "-", "1", ")", "\n", "\n", "", "raise", "ValueError", "(", "\"Undefined bounding box layout '%s'\"", "%", "fmt", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.masks_to_bboxes_multi": [[70, 95], ["mask.dim", "torch.tensor", "bboxes.append", "mx.min", "my.min", "mx.max", "my.max", "torch.cat", "len", "len", "torch.cat", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "masks_to_bboxes_multi", "(", "mask", ",", "ids", ",", "fmt", "=", "'c'", ")", ":", "\n", "    ", "assert", "mask", ".", "dim", "(", ")", "==", "2", "\n", "bboxes", "=", "[", "]", "\n", "\n", "for", "id", "in", "ids", ":", "\n", "        ", "mx", "=", "(", "mask", "==", "id", ")", ".", "sum", "(", "dim", "=", "-", "2", ")", ".", "nonzero", "(", ")", "\n", "my", "=", "(", "mask", "==", "id", ")", ".", "float", "(", ")", ".", "sum", "(", "dim", "=", "-", "1", ")", ".", "nonzero", "(", ")", "\n", "bb", "=", "[", "mx", ".", "min", "(", ")", ",", "my", ".", "min", "(", ")", ",", "mx", ".", "max", "(", ")", ",", "my", ".", "max", "(", ")", "]", "if", "(", "len", "(", "mx", ")", ">", "0", "and", "len", "(", "my", ")", ">", "0", ")", "else", "[", "0", ",", "0", ",", "0", ",", "0", "]", "\n", "\n", "bb", "=", "torch", ".", "tensor", "(", "bb", ",", "dtype", "=", "torch", ".", "float32", ",", "device", "=", "mask", ".", "device", ")", "\n", "\n", "x1", "=", "bb", "[", ":", "2", "]", "\n", "s", "=", "bb", "[", "2", ":", "]", "-", "x1", "+", "1", "\n", "\n", "if", "fmt", "==", "'v'", ":", "\n", "            ", "pass", "\n", "", "elif", "fmt", "==", "'c'", ":", "\n", "            ", "bb", "=", "torch", ".", "cat", "(", "(", "x1", "+", "0.5", "*", "s", ",", "s", ")", ",", "dim", "=", "-", "1", ")", "\n", "", "elif", "fmt", "==", "'t'", ":", "\n", "            ", "bb", "=", "torch", ".", "cat", "(", "(", "x1", ",", "s", ")", ",", "dim", "=", "-", "1", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "\"Undefined bounding box layout '%s'\"", "%", "fmt", ")", "\n", "", "bboxes", ".", "append", "(", "bb", ")", "\n", "\n", "", "return", "bboxes", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.data.loader.LTRLoader.__init__": [[172, 191], ["super().__init__", "ValueError"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "name", ",", "dataset", ",", "training", "=", "True", ",", "batch_size", "=", "1", ",", "shuffle", "=", "False", ",", "sampler", "=", "None", ",", "batch_sampler", "=", "None", ",", "\n", "num_workers", "=", "0", ",", "epoch_interval", "=", "1", ",", "collate_fn", "=", "None", ",", "stack_dim", "=", "0", ",", "pin_memory", "=", "False", ",", "drop_last", "=", "False", ",", "\n", "timeout", "=", "0", ",", "worker_init_fn", "=", "None", ")", ":", "\n", "        ", "if", "collate_fn", "is", "None", ":", "\n", "            ", "if", "stack_dim", "==", "0", ":", "\n", "                ", "collate_fn", "=", "ltr_collate", "\n", "", "elif", "stack_dim", "==", "1", ":", "\n", "                ", "collate_fn", "=", "ltr_collate_stack1", "\n", "", "else", ":", "\n", "                ", "raise", "ValueError", "(", "'Stack dim no supported. Must be 0 or 1.'", ")", "\n", "\n", "", "", "super", "(", "LTRLoader", ",", "self", ")", ".", "__init__", "(", "dataset", ",", "batch_size", ",", "shuffle", ",", "sampler", ",", "batch_sampler", ",", "\n", "num_workers", ",", "collate_fn", ",", "pin_memory", ",", "drop_last", ",", "\n", "timeout", ",", "worker_init_fn", ")", "\n", "\n", "self", ".", "name", "=", "name", "\n", "self", ".", "training", "=", "training", "\n", "self", ".", "epoch_interval", "=", "epoch_interval", "\n", "self", ".", "stack_dim", "=", "stack_dim", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.data.loader._check_use_shared_memory": [[9, 16], ["hasattr", "importlib.import_module", "hasattr", "getattr", "getattr", "torch.utils.data.get_worker_info", "torch.utils.data.get_worker_info"], "function", ["None"], ["def", "_check_use_shared_memory", "(", ")", ":", "\n", "    ", "if", "hasattr", "(", "torch", ".", "utils", ".", "data", ".", "dataloader", ",", "'_use_shared_memory'", ")", ":", "\n", "        ", "return", "getattr", "(", "torch", ".", "utils", ".", "data", ".", "dataloader", ",", "'_use_shared_memory'", ")", "\n", "", "collate_lib", "=", "importlib", ".", "import_module", "(", "'torch.utils.data._utils.collate'", ")", "\n", "if", "hasattr", "(", "collate_lib", ",", "'_use_shared_memory'", ")", ":", "\n", "        ", "return", "getattr", "(", "collate_lib", ",", "'_use_shared_memory'", ")", "\n", "", "return", "torch", ".", "utils", ".", "data", ".", "get_worker_info", "(", ")", "is", "not", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.loader.ltr_collate": [[18, 67], ["type", "isinstance", "TypeError", "loader._check_use_shared_memory", "torch.stack", "torch.stack", "error_msg.format", "sum", "batch[].storage()._new_shared", "batch[].new", "isinstance", "type", "torch.stack", "torch.stack", "torch.LongTensor", "torch.LongTensor", "isinstance", "x.numel", "batch[].storage", "torch.utils.data.dataloader.re.search", "torch.utils.data.dataloader.re.search", "TypeError", "elem.dtype.name.startswith", "list", "torch.DoubleTensor", "torch.DoubleTensor", "isinstance", "error_msg.format", "torch.from_numpy", "torch.from_numpy", "map", "isinstance", "pytracking.TensorDict", "isinstance", "isinstance", "loader.ltr_collate", "loader.ltr_collate", "zip", "pytracking.TensorList", "isinstance", "zip", "loader.ltr_collate", "loader.ltr_collate"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.loader._check_use_shared_memory", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.data.loader.ltr_collate", "home.repos.pwc.inspect_result.researchmm_Stark.data.loader.ltr_collate", "home.repos.pwc.inspect_result.researchmm_Stark.data.loader.ltr_collate", "home.repos.pwc.inspect_result.researchmm_Stark.data.loader.ltr_collate"], ["", "def", "ltr_collate", "(", "batch", ")", ":", "\n", "    ", "\"\"\"Puts each data field into a tensor with outer dimension batch size\"\"\"", "\n", "\n", "error_msg", "=", "\"batch must contain tensors, numbers, dicts or lists; found {}\"", "\n", "elem_type", "=", "type", "(", "batch", "[", "0", "]", ")", "\n", "if", "isinstance", "(", "batch", "[", "0", "]", ",", "torch", ".", "Tensor", ")", ":", "\n", "        ", "out", "=", "None", "\n", "if", "_check_use_shared_memory", "(", ")", ":", "\n", "# If we're in a background process, concatenate directly into a", "\n", "# shared memory tensor to avoid an extra copy", "\n", "            ", "numel", "=", "sum", "(", "[", "x", ".", "numel", "(", ")", "for", "x", "in", "batch", "]", ")", "\n", "storage", "=", "batch", "[", "0", "]", ".", "storage", "(", ")", ".", "_new_shared", "(", "numel", ")", "\n", "out", "=", "batch", "[", "0", "]", ".", "new", "(", "storage", ")", "\n", "", "return", "torch", ".", "stack", "(", "batch", ",", "0", ",", "out", "=", "out", ")", "\n", "# if batch[0].dim() < 4:", "\n", "#     return torch.stack(batch, 0, out=out)", "\n", "# return torch.cat(batch, 0, out=out)", "\n", "", "elif", "elem_type", ".", "__module__", "==", "'numpy'", "and", "elem_type", ".", "__name__", "!=", "'str_'", "and", "elem_type", ".", "__name__", "!=", "'string_'", ":", "\n", "        ", "elem", "=", "batch", "[", "0", "]", "\n", "if", "elem_type", ".", "__name__", "==", "'ndarray'", ":", "\n", "# array of string classes and object", "\n", "            ", "if", "torch", ".", "utils", ".", "data", ".", "dataloader", ".", "re", ".", "search", "(", "'[SaUO]'", ",", "elem", ".", "dtype", ".", "str", ")", "is", "not", "None", ":", "\n", "                ", "raise", "TypeError", "(", "error_msg", ".", "format", "(", "elem", ".", "dtype", ")", ")", "\n", "\n", "", "return", "torch", ".", "stack", "(", "[", "torch", ".", "from_numpy", "(", "b", ")", "for", "b", "in", "batch", "]", ",", "0", ")", "\n", "", "if", "elem", ".", "shape", "==", "(", ")", ":", "# scalars", "\n", "            ", "py_type", "=", "float", "if", "elem", ".", "dtype", ".", "name", ".", "startswith", "(", "'float'", ")", "else", "int", "\n", "return", "torch", ".", "utils", ".", "data", ".", "dataloader", ".", "numpy_type_map", "[", "elem", ".", "dtype", ".", "name", "]", "(", "list", "(", "map", "(", "py_type", ",", "batch", ")", ")", ")", "\n", "", "", "elif", "isinstance", "(", "batch", "[", "0", "]", ",", "int_classes", ")", ":", "\n", "        ", "return", "torch", ".", "LongTensor", "(", "batch", ")", "\n", "", "elif", "isinstance", "(", "batch", "[", "0", "]", ",", "float", ")", ":", "\n", "        ", "return", "torch", ".", "DoubleTensor", "(", "batch", ")", "\n", "", "elif", "isinstance", "(", "batch", "[", "0", "]", ",", "string_classes", ")", ":", "\n", "        ", "return", "batch", "\n", "", "elif", "isinstance", "(", "batch", "[", "0", "]", ",", "TensorDict", ")", ":", "\n", "        ", "return", "TensorDict", "(", "{", "key", ":", "ltr_collate", "(", "[", "d", "[", "key", "]", "for", "d", "in", "batch", "]", ")", "for", "key", "in", "batch", "[", "0", "]", "}", ")", "\n", "", "elif", "isinstance", "(", "batch", "[", "0", "]", ",", "collections", ".", "Mapping", ")", ":", "\n", "        ", "return", "{", "key", ":", "ltr_collate", "(", "[", "d", "[", "key", "]", "for", "d", "in", "batch", "]", ")", "for", "key", "in", "batch", "[", "0", "]", "}", "\n", "", "elif", "isinstance", "(", "batch", "[", "0", "]", ",", "TensorList", ")", ":", "\n", "        ", "transposed", "=", "zip", "(", "*", "batch", ")", "\n", "return", "TensorList", "(", "[", "ltr_collate", "(", "samples", ")", "for", "samples", "in", "transposed", "]", ")", "\n", "", "elif", "isinstance", "(", "batch", "[", "0", "]", ",", "collections", ".", "Sequence", ")", ":", "\n", "        ", "transposed", "=", "zip", "(", "*", "batch", ")", "\n", "return", "[", "ltr_collate", "(", "samples", ")", "for", "samples", "in", "transposed", "]", "\n", "", "elif", "batch", "[", "0", "]", "is", "None", ":", "\n", "        ", "return", "batch", "\n", "\n", "", "raise", "TypeError", "(", "(", "error_msg", ".", "format", "(", "type", "(", "batch", "[", "0", "]", ")", ")", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.loader.ltr_collate_stack1": [[69, 118], ["type", "isinstance", "TypeError", "loader._check_use_shared_memory", "torch.stack", "torch.stack", "error_msg.format", "sum", "batch[].storage()._new_shared", "batch[].new", "isinstance", "type", "torch.stack", "torch.stack", "torch.LongTensor", "torch.LongTensor", "isinstance", "x.numel", "batch[].storage", "torch.utils.data.dataloader.re.search", "torch.utils.data.dataloader.re.search", "TypeError", "elem.dtype.name.startswith", "list", "torch.DoubleTensor", "torch.DoubleTensor", "isinstance", "error_msg.format", "torch.from_numpy", "torch.from_numpy", "map", "isinstance", "pytracking.TensorDict", "isinstance", "isinstance", "loader.ltr_collate_stack1", "loader.ltr_collate_stack1", "zip", "pytracking.TensorList", "isinstance", "zip", "loader.ltr_collate_stack1", "loader.ltr_collate_stack1"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.loader._check_use_shared_memory", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.data.loader.ltr_collate_stack1", "home.repos.pwc.inspect_result.researchmm_Stark.data.loader.ltr_collate_stack1", "home.repos.pwc.inspect_result.researchmm_Stark.data.loader.ltr_collate_stack1", "home.repos.pwc.inspect_result.researchmm_Stark.data.loader.ltr_collate_stack1"], ["", "def", "ltr_collate_stack1", "(", "batch", ")", ":", "\n", "    ", "\"\"\"Puts each data field into a tensor. The tensors are stacked at dim=1 to form the batch\"\"\"", "\n", "\n", "error_msg", "=", "\"batch must contain tensors, numbers, dicts or lists; found {}\"", "\n", "elem_type", "=", "type", "(", "batch", "[", "0", "]", ")", "\n", "if", "isinstance", "(", "batch", "[", "0", "]", ",", "torch", ".", "Tensor", ")", ":", "\n", "        ", "out", "=", "None", "\n", "if", "_check_use_shared_memory", "(", ")", ":", "\n", "# If we're in a background process, concatenate directly into a", "\n", "# shared memory tensor to avoid an extra copy", "\n", "            ", "numel", "=", "sum", "(", "[", "x", ".", "numel", "(", ")", "for", "x", "in", "batch", "]", ")", "\n", "storage", "=", "batch", "[", "0", "]", ".", "storage", "(", ")", ".", "_new_shared", "(", "numel", ")", "\n", "out", "=", "batch", "[", "0", "]", ".", "new", "(", "storage", ")", "\n", "", "return", "torch", ".", "stack", "(", "batch", ",", "1", ",", "out", "=", "out", ")", "\n", "# if batch[0].dim() < 4:", "\n", "#     return torch.stack(batch, 0, out=out)", "\n", "# return torch.cat(batch, 0, out=out)", "\n", "", "elif", "elem_type", ".", "__module__", "==", "'numpy'", "and", "elem_type", ".", "__name__", "!=", "'str_'", "and", "elem_type", ".", "__name__", "!=", "'string_'", ":", "\n", "        ", "elem", "=", "batch", "[", "0", "]", "\n", "if", "elem_type", ".", "__name__", "==", "'ndarray'", ":", "\n", "# array of string classes and object", "\n", "            ", "if", "torch", ".", "utils", ".", "data", ".", "dataloader", ".", "re", ".", "search", "(", "'[SaUO]'", ",", "elem", ".", "dtype", ".", "str", ")", "is", "not", "None", ":", "\n", "                ", "raise", "TypeError", "(", "error_msg", ".", "format", "(", "elem", ".", "dtype", ")", ")", "\n", "\n", "", "return", "torch", ".", "stack", "(", "[", "torch", ".", "from_numpy", "(", "b", ")", "for", "b", "in", "batch", "]", ",", "1", ")", "\n", "", "if", "elem", ".", "shape", "==", "(", ")", ":", "# scalars", "\n", "            ", "py_type", "=", "float", "if", "elem", ".", "dtype", ".", "name", ".", "startswith", "(", "'float'", ")", "else", "int", "\n", "return", "torch", ".", "utils", ".", "data", ".", "dataloader", ".", "numpy_type_map", "[", "elem", ".", "dtype", ".", "name", "]", "(", "list", "(", "map", "(", "py_type", ",", "batch", ")", ")", ")", "\n", "", "", "elif", "isinstance", "(", "batch", "[", "0", "]", ",", "int_classes", ")", ":", "\n", "        ", "return", "torch", ".", "LongTensor", "(", "batch", ")", "\n", "", "elif", "isinstance", "(", "batch", "[", "0", "]", ",", "float", ")", ":", "\n", "        ", "return", "torch", ".", "DoubleTensor", "(", "batch", ")", "\n", "", "elif", "isinstance", "(", "batch", "[", "0", "]", ",", "string_classes", ")", ":", "\n", "        ", "return", "batch", "\n", "", "elif", "isinstance", "(", "batch", "[", "0", "]", ",", "TensorDict", ")", ":", "\n", "        ", "return", "TensorDict", "(", "{", "key", ":", "ltr_collate_stack1", "(", "[", "d", "[", "key", "]", "for", "d", "in", "batch", "]", ")", "for", "key", "in", "batch", "[", "0", "]", "}", ")", "\n", "", "elif", "isinstance", "(", "batch", "[", "0", "]", ",", "collections", ".", "Mapping", ")", ":", "\n", "        ", "return", "{", "key", ":", "ltr_collate_stack1", "(", "[", "d", "[", "key", "]", "for", "d", "in", "batch", "]", ")", "for", "key", "in", "batch", "[", "0", "]", "}", "\n", "", "elif", "isinstance", "(", "batch", "[", "0", "]", ",", "TensorList", ")", ":", "\n", "        ", "transposed", "=", "zip", "(", "*", "batch", ")", "\n", "return", "TensorList", "(", "[", "ltr_collate_stack1", "(", "samples", ")", "for", "samples", "in", "transposed", "]", ")", "\n", "", "elif", "isinstance", "(", "batch", "[", "0", "]", ",", "collections", ".", "Sequence", ")", ":", "\n", "        ", "transposed", "=", "zip", "(", "*", "batch", ")", "\n", "return", "[", "ltr_collate_stack1", "(", "samples", ")", "for", "samples", "in", "transposed", "]", "\n", "", "elif", "batch", "[", "0", "]", "is", "None", ":", "\n", "        ", "return", "batch", "\n", "\n", "", "raise", "TypeError", "(", "(", "error_msg", ".", "format", "(", "type", "(", "batch", "[", "0", "]", ")", ")", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.Blur.__init__": [[297, 307], ["transforms.TransformBase.__init__", "isinstance", "math.ceil", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "transforms.Blur.filter[].view", "transforms.Blur.filter[].sum", "transforms.Blur.filter[].view", "transforms.Blur.filter[].sum", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["", "return", "np", ".", "fliplr", "(", "image", ")", ".", "copy", "(", ")", "\n", "", "return", "image", "\n", "\n", "", "def", "transform_coords", "(", "self", ",", "coords", ",", "image_shape", ",", "do_flip", ")", ":", "\n", "        ", "if", "do_flip", ":", "\n", "            ", "coords_flip", "=", "coords", ".", "clone", "(", ")", "\n", "coords_flip", "[", "1", ",", ":", "]", "=", "(", "image_shape", "[", "1", "]", "-", "1", ")", "-", "coords", "[", "1", ",", ":", "]", "\n", "return", "coords_flip", "\n", "", "return", "coords", "\n", "\n", "", "def", "transform_mask", "(", "self", ",", "mask", ",", "do_flip", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.Blur.transform_image": [[308, 315], ["torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "torch.conv2d", "torch.conv2d", "torch.conv2d().view", "torch.conv2d().view", "image.view", "torch.conv2d", "torch.conv2d"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d"], ["        ", "if", "do_flip", ":", "\n", "            ", "if", "torch", ".", "is_tensor", "(", "mask", ")", ":", "\n", "                ", "return", "mask", ".", "flip", "(", "(", "-", "1", ",", ")", ")", "\n", "", "return", "np", ".", "fliplr", "(", "mask", ")", ".", "copy", "(", ")", "\n", "", "return", "mask", "\n", "\n", "", "def", "transform_att", "(", "self", ",", "att", ",", "do_flip", ")", ":", "\n", "        ", "if", "do_flip", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomBlur.__init__": [[319, 331], ["transforms.TransformBase.__init__", "isinstance", "math.ceil", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "transforms.RandomBlur.filter[].view", "transforms.RandomBlur.filter[].sum", "transforms.RandomBlur.filter[].view", "transforms.RandomBlur.filter[].sum", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["", "return", "att", "\n", "\n", "\n", "", "", "class", "RandomHorizontalFlip_Norm", "(", "RandomHorizontalFlip", ")", ":", "\n", "    ", "\"\"\"Horizontally flip image randomly with a probability p.\n    The difference is that the coord is normalized to [0,1]\"\"\"", "\n", "def", "__init__", "(", "self", ",", "probability", "=", "0.5", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "probability", "=", "probability", "\n", "\n", "", "def", "transform_coords", "(", "self", ",", "coords", ",", "image_shape", ",", "do_flip", ")", ":", "\n", "        ", "\"\"\"we should use 1 rather than image_shape\"\"\"", "\n", "if", "do_flip", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomBlur.roll": [[332, 334], ["random.random"], "methods", ["None"], ["            ", "coords_flip", "=", "coords", ".", "clone", "(", ")", "\n", "coords_flip", "[", "1", ",", ":", "]", "=", "1", "-", "coords", "[", "1", ",", ":", "]", "\n", "return", "coords_flip", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomBlur.transform": [[335, 348], ["torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "torch.conv2d", "torch.conv2d", "torch.conv2d().view", "torch.conv2d().view", "image.view", "torch.conv2d", "torch.conv2d"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d"], ["", "return", "coords", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomAffine.__init__": [[352, 369], ["transforms.TransformBase.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomAffine.roll": [[370, 381], ["random.uniform", "random.uniform", "random.uniform", "numpy.exp", "numpy.exp", "random.random", "random.uniform", "random.uniform"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomAffine._construct_t_mat": [[382, 410], ["numpy.identity", "cv2.getRotationMatrix2D", "numpy.concatenate", "numpy.array", "numpy.array", "numpy.array().reshape", "numpy.array"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomAffine.transform_image": [[411, 421], ["torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "transforms.RandomAffine._construct_t_mat", "cv2.warpAffine", "Exception"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine._construct_t_mat"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomAffine.transform_coords": [[422, 432], ["transforms.RandomAffine._construct_t_mat", "torch.from_numpy().float", "torch.from_numpy().float", "torch.from_numpy().float", "torch.from_numpy().float", "torch.stack", "torch.stack", "torch.stack", "torch.stack", "torch.mm", "torch.mm", "torch.mm", "torch.mm", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine._construct_t_mat"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomAffine.transform_mask": [[433, 441], ["transforms.RandomAffine._construct_t_mat", "cv2.warpAffine", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "mask.numpy"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine._construct_t_mat"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.ATOMProcessing.__init__": [[47, 68], ["processing.BaseProcessing.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["\n", "def", "__init__", "(", "self", ",", "search_area_factor", ",", "output_sz", ",", "center_jitter_factor", ",", "scale_jitter_factor", ",", "\n", "mode", "=", "'pair'", ",", "settings", "=", "None", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            search_area_factor - The size of the search region  relative to the target size.\n            output_sz - An integer, denoting the size to which the search region is resized. The search region is always\n                        square.\n            center_jitter_factor - A dict containing the amount of jittering to be applied to the target center before\n                                    extracting the search region. See _get_jittered_box for how the jittering is done.\n            scale_jitter_factor - A dict containing the amount of jittering to be applied to the target size before\n                                    extracting the search region. See _get_jittered_box for how the jittering is done.\n            mode - Either 'pair' or 'sequence'. If mode='sequence', then output has an extra dimension for frames\n        \"\"\"", "\n", "super", "(", ")", ".", "__init__", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "self", ".", "search_area_factor", "=", "search_area_factor", "\n", "self", ".", "output_sz", "=", "output_sz", "\n", "self", ".", "center_jitter_factor", "=", "center_jitter_factor", "\n", "self", ".", "scale_jitter_factor", "=", "scale_jitter_factor", "\n", "self", ".", "mode", "=", "mode", "\n", "self", ".", "settings", "=", "settings", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.ATOMProcessing._get_jittered_box": [[69, 84], ["torch.cat", "torch.exp", "jittered_size.prod().sqrt", "torch.tensor().float", "torch.randn", "jittered_size.prod", "torch.tensor", "torch.rand"], "methods", ["None"], ["", "def", "_get_jittered_box", "(", "self", ",", "box", ",", "mode", ")", ":", "\n", "        ", "\"\"\" Jitter the input box\n        args:\n            box - input bounding box\n            mode - string 'template' or 'search' indicating template or search data\n\n        returns:\n            torch.Tensor - jittered box\n        \"\"\"", "\n", "\n", "jittered_size", "=", "box", "[", "2", ":", "4", "]", "*", "torch", ".", "exp", "(", "torch", ".", "randn", "(", "2", ")", "*", "self", ".", "scale_jitter_factor", "[", "mode", "]", ")", "\n", "max_offset", "=", "(", "jittered_size", ".", "prod", "(", ")", ".", "sqrt", "(", ")", "*", "torch", ".", "tensor", "(", "self", ".", "center_jitter_factor", "[", "mode", "]", ")", ".", "float", "(", ")", ")", "\n", "jittered_center", "=", "box", "[", "0", ":", "2", "]", "+", "0.5", "*", "box", "[", "2", ":", "4", "]", "+", "max_offset", "*", "(", "torch", ".", "rand", "(", "2", ")", "-", "0.5", ")", "\n", "\n", "return", "torch", ".", "cat", "(", "(", "jittered_center", "-", "0.5", "*", "jittered_size", ",", "jittered_size", ")", ",", "dim", "=", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.ATOMProcessing._generate_proposals": [[85, 113], ["processing.ATOMProcessing.proposal_params.get", "torch.zeros", "torch.zeros", "range", "ltr.perturb_box", "ltr.sample_box_gmm", "ltr.iou", "box.view", "torch.zeros.view"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.perturb_box", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_box_gmm", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.iou"], ["", "def", "__call__", "(", "self", ",", "data", ":", "TensorDict", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            data - The input data, should contain the following fields:\n                'template_images', search_images', 'template_anno', 'search_anno'\n        returns:\n            TensorDict - output data block with following fields:\n                'template_images', 'search_images', 'template_anno', 'search_anno', 'test_proposals', 'proposal_iou'\n        \"\"\"", "\n", "# Apply joint transforms", "\n", "if", "self", ".", "transform", "[", "'joint'", "]", "is", "not", "None", ":", "\n", "            ", "data", "[", "'template_images'", "]", ",", "data", "[", "'template_anno'", "]", ",", "data", "[", "'template_masks'", "]", "=", "self", ".", "transform", "[", "'joint'", "]", "(", "\n", "image", "=", "data", "[", "'template_images'", "]", ",", "bbox", "=", "data", "[", "'template_anno'", "]", ",", "mask", "=", "data", "[", "'template_masks'", "]", ")", "\n", "data", "[", "'search_images'", "]", ",", "data", "[", "'search_anno'", "]", ",", "data", "[", "'search_masks'", "]", "=", "self", ".", "transform", "[", "'joint'", "]", "(", "\n", "image", "=", "data", "[", "'search_images'", "]", ",", "bbox", "=", "data", "[", "'search_anno'", "]", ",", "mask", "=", "data", "[", "'search_masks'", "]", ",", "new_roll", "=", "False", ")", "\n", "\n", "", "for", "s", "in", "[", "'template'", ",", "'search'", "]", ":", "\n", "            ", "assert", "self", ".", "mode", "==", "'sequence'", "or", "len", "(", "data", "[", "s", "+", "'_images'", "]", ")", "==", "1", ",", "\"In pair mode, num train/test frames must be 1\"", "\n", "\n", "# Add a uniform noise to the center pos", "\n", "jittered_anno", "=", "[", "self", ".", "_get_jittered_box", "(", "a", ",", "s", ")", "for", "a", "in", "data", "[", "s", "+", "'_anno'", "]", "]", "\n", "\n", "# 2021.1.9 Check whether data is valid. Avoid too small bounding boxes", "\n", "w", ",", "h", "=", "torch", ".", "stack", "(", "jittered_anno", ",", "dim", "=", "0", ")", "[", ":", ",", "2", "]", ",", "torch", ".", "stack", "(", "jittered_anno", ",", "dim", "=", "0", ")", "[", ":", ",", "3", "]", "\n", "\n", "crop_sz", "=", "torch", ".", "ceil", "(", "torch", ".", "sqrt", "(", "w", "*", "h", ")", "*", "self", ".", "search_area_factor", "[", "s", "]", ")", "\n", "if", "(", "crop_sz", "<", "1", ")", ".", "any", "(", ")", ":", "\n", "                ", "data", "[", "'valid'", "]", "=", "False", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.ATOMProcessing.__call__": [[114, 155], ["zip", "list", "list", "ltr.jittered_center_crop", "data.apply.apply.apply", "data.apply.apply.apply", "processing.ATOMProcessing._get_jittered_box", "len", "processing.ATOMProcessing._generate_proposals", "isinstance"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.jittered_center_crop", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._get_jittered_box", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._generate_proposals"], ["# print(\"Too small box is found. Replace it with new data.\")", "\n", "return", "data", "\n", "\n", "# Crop image region centered at jittered_anno box and get the attention mask", "\n", "", "crops", ",", "boxes", ",", "att_mask", ",", "mask_crops", "=", "prutils", ".", "jittered_center_crop", "(", "data", "[", "s", "+", "'_images'", "]", ",", "jittered_anno", ",", "\n", "data", "[", "s", "+", "'_anno'", "]", ",", "self", ".", "search_area_factor", "[", "s", "]", ",", "\n", "self", ".", "output_sz", "[", "s", "]", ",", "masks", "=", "data", "[", "s", "+", "'_masks'", "]", ")", "\n", "# Apply transforms", "\n", "data", "[", "s", "+", "'_images'", "]", ",", "data", "[", "s", "+", "'_anno'", "]", ",", "data", "[", "s", "+", "'_att'", "]", ",", "data", "[", "s", "+", "'_masks'", "]", "=", "self", ".", "transform", "[", "s", "]", "(", "\n", "image", "=", "crops", ",", "bbox", "=", "boxes", ",", "att", "=", "att_mask", ",", "mask", "=", "mask_crops", ",", "joint", "=", "False", ")", "\n", "\n", "# 2021.1.9 Check whether elements in data[s + '_att'] is all 1", "\n", "# Note that type of data[s + '_att'] is tuple, type of ele is torch.tensor", "\n", "for", "ele", "in", "data", "[", "s", "+", "'_att'", "]", ":", "\n", "                ", "if", "(", "ele", "==", "1", ")", ".", "all", "(", ")", ":", "\n", "                    ", "data", "[", "'valid'", "]", "=", "False", "\n", "# print(\"Values of original attention mask are all one. Replace it with new data.\")", "\n", "return", "data", "\n", "# 2021.1.10 more strict conditions: require the donwsampled masks not to be all 1", "\n", "", "", "for", "ele", "in", "data", "[", "s", "+", "'_att'", "]", ":", "\n", "                ", "feat_size", "=", "self", ".", "output_sz", "[", "s", "]", "//", "16", "# 16 is the backbone stride", "\n", "# (1,1,128,128) (1,1,256,256) --> (1,1,8,8) (1,1,16,16)", "\n", "mask_down", "=", "F", ".", "interpolate", "(", "ele", "[", "None", ",", "None", "]", ".", "float", "(", ")", ",", "size", "=", "feat_size", ")", ".", "to", "(", "torch", ".", "bool", ")", "[", "0", "]", "\n", "if", "(", "mask_down", "==", "1", ")", ".", "all", "(", ")", ":", "\n", "                    ", "data", "[", "'valid'", "]", "=", "False", "\n", "# print(\"Values of down-sampled attention mask are all one. \"", "\n", "#       \"Replace it with new data.\")", "\n", "return", "data", "\n", "\n", "", "", "", "data", "[", "'valid'", "]", "=", "True", "\n", "# if we use copy-and-paste augmentation", "\n", "if", "data", "[", "\"template_masks\"", "]", "is", "None", "or", "data", "[", "\"search_masks\"", "]", "is", "None", ":", "\n", "            ", "data", "[", "\"template_masks\"", "]", "=", "torch", ".", "zeros", "(", "(", "1", ",", "self", ".", "output_sz", "[", "\"template\"", "]", ",", "self", ".", "output_sz", "[", "\"template\"", "]", ")", ")", "\n", "data", "[", "\"search_masks\"", "]", "=", "torch", ".", "zeros", "(", "(", "1", ",", "self", ".", "output_sz", "[", "\"search\"", "]", ",", "self", ".", "output_sz", "[", "\"search\"", "]", ")", ")", "\n", "# Prepare output", "\n", "", "if", "self", ".", "mode", "==", "'sequence'", ":", "\n", "            ", "data", "=", "data", ".", "apply", "(", "stack_tensors", ")", "\n", "", "else", ":", "\n", "            ", "data", "=", "data", ".", "apply", "(", "lambda", "x", ":", "x", "[", "0", "]", "if", "isinstance", "(", "x", ",", "list", ")", "else", "x", ")", "\n", "\n", "", "return", "data", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLBBregProcessing.__init__": [[162, 183], ["processing.BaseProcessing.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLBBregProcessing._get_jittered_box": [[184, 199], ["torch.cat", "torch.exp", "jittered_size.prod().sqrt", "torch.tensor().float", "torch.randn", "jittered_size.prod", "torch.tensor", "torch.rand"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLBBregProcessing._generate_proposals": [[200, 212], ["ltr.sample_box_gmm", "processing.KLBBregProcessing.proposal_params.get"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_box_gmm", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLBBregProcessing.__call__": [[213, 255], ["zip", "ltr.jittered_center_crop", "data.apply.apply.apply", "data.apply.apply.apply", "processing.KLBBregProcessing._get_jittered_box", "len", "processing.KLBBregProcessing._generate_proposals", "isinstance"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.jittered_center_crop", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._get_jittered_box", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._generate_proposals"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.ATOMwKLProcessing.__init__": [[259, 268], ["processing.BaseProcessing.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.ATOMwKLProcessing._get_jittered_box": [[269, 284], ["torch.cat", "torch.exp", "jittered_size.prod().sqrt", "torch.tensor().float", "torch.randn", "jittered_size.prod", "torch.tensor", "torch.rand"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.ATOMwKLProcessing._generate_proposals": [[285, 295], ["ltr.sample_box_gmm", "ltr.iou_gen", "box.view"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_box_gmm"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.ATOMwKLProcessing.__call__": [[296, 331], ["zip", "ltr.jittered_center_crop", "data.apply.apply.apply", "data.apply.apply.apply", "processing.ATOMwKLProcessing._get_jittered_box", "len", "processing.ATOMwKLProcessing._generate_proposals", "isinstance"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.jittered_center_crop", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._get_jittered_box", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._generate_proposals"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.DiMPProcessing.__init__": [[347, 377], ["processing.BaseProcessing.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.DiMPProcessing._get_jittered_box": [[378, 393], ["torch.cat", "torch.exp", "jittered_size.prod().sqrt", "torch.tensor().float", "torch.randn", "jittered_size.prod", "torch.tensor", "torch.rand"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.DiMPProcessing._generate_proposals": [[394, 425], ["processing.DiMPProcessing.proposal_params.get", "torch.zeros", "torch.zeros", "range", "ltr.perturb_box", "ltr.sample_box_gmm", "ltr.iou", "ValueError", "box.view", "torch.zeros.view"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.perturb_box", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_box_gmm", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.iou"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.DiMPProcessing._generate_label_function": [[426, 441], ["ltr.gaussian_label_function", "target_bb.view", "processing.DiMPProcessing.label_function_params.get"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gaussian_label_function", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.DiMPProcessing.__call__": [[442, 489], ["ltr.target_image_crop", "zip", "list", "list", "data.apply.apply.apply", "data.apply.apply.apply", "processing.DiMPProcessing._generate_label_function", "processing.DiMPProcessing._generate_label_function", "processing.DiMPProcessing._get_jittered_box", "len", "processing.DiMPProcessing._generate_proposals", "isinstance"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.target_image_crop", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._generate_label_function", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._generate_label_function", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._get_jittered_box", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._generate_proposals"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing.__init__": [[496, 529], ["processing.BaseProcessing.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._get_jittered_box": [[530, 545], ["torch.cat", "torch.exp", "jittered_size.prod().sqrt", "torch.tensor().float", "torch.randn", "jittered_size.prod", "torch.tensor", "torch.rand"], "methods", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._generate_proposals": [[546, 559], ["ltr.sample_box_gmm", "processing.KLDiMPProcessing.proposal_params.get"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_box_gmm", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._generate_label_function": [[560, 575], ["ltr.gaussian_label_function", "target_bb.view", "processing.KLDiMPProcessing.label_function_params.get"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gaussian_label_function", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._generate_label_density": [[576, 604], ["ltr.gaussian_label_function", "processing.KLDiMPProcessing.label_density_params.get", "processing.KLDiMPProcessing.label_density_params.get", "target_bb.view", "ltr.gaussian_label_function.sum", "g_sum[].view", "processing.KLDiMPProcessing.label_density_params.get", "processing.KLDiMPProcessing.label_density_params.get", "processing.KLDiMPProcessing.label_density_params.get", "processing.KLDiMPProcessing.label_density_params.get"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gaussian_label_function", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing.__call__": [[605, 663], ["zip", "ltr.target_image_crop", "data.apply.apply.get", "data.apply.apply.apply", "data.apply.apply.apply", "processing.KLDiMPProcessing._generate_label_function", "processing.KLDiMPProcessing._generate_label_function", "processing.KLDiMPProcessing._generate_label_density", "processing.KLDiMPProcessing._generate_label_density", "processing.KLDiMPProcessing._get_jittered_box", "zip", "len", "processing.KLDiMPProcessing._generate_proposals", "isinstance"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.target_image_crop", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._generate_label_function", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._generate_label_function", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._generate_label_density", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._generate_label_density", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._get_jittered_box", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing.KLDiMPProcessing._generate_proposals"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.stack_tensors": [[8, 12], ["isinstance", "isinstance", "torch.stack"], "function", ["None"], ["def", "stack_tensors", "(", "x", ")", ":", "\n", "    ", "if", "isinstance", "(", "x", ",", "list", ")", "and", "isinstance", "(", "x", "[", "0", "]", ",", "torch", ".", "Tensor", ")", ":", "\n", "        ", "return", "torch", ".", "stack", "(", "x", ")", "\n", "", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.sample_target_SE": [[15, 65], ["target_bb.tolist", "math.ceil", "math.ceil", "round", "round", "max", "max", "max", "max", "cv2.copyMakeBorder", "Exception", "cv2.resize", "len"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["def", "sample_target_SE", "(", "im", ",", "target_bb", ",", "search_area_factor", ",", "output_sz", "=", "None", ",", "mode", "=", "cv", ".", "BORDER_REPLICATE", ")", ":", "\n", "    ", "\"\"\" Extracts a crop centered at target_bb box, of size search_area_factor times target_bb(Both height and width)\n\n    args:\n        im - cv image\n        target_bb - target box [x, y, w, h]\n        search_area_factor - Ratio of crop size to target size\n        output_sz - (float) Size to which the extracted crop is resized (always square). If None, no resizing is done.\n\n    returns:\n        cv image - extracted crop\n        float - the factor by which the crop has been resized to make the crop size equal output_size\n    \"\"\"", "\n", "\n", "x", ",", "y", ",", "w", ",", "h", "=", "target_bb", ".", "tolist", "(", ")", "\n", "\n", "# Crop image", "\n", "ws", "=", "math", ".", "ceil", "(", "search_area_factor", "*", "w", ")", "\n", "hs", "=", "math", ".", "ceil", "(", "search_area_factor", "*", "h", ")", "\n", "\n", "if", "ws", "<", "1", "or", "hs", "<", "1", ":", "\n", "        ", "raise", "Exception", "(", "'Too small bounding box.'", ")", "\n", "\n", "", "x1", "=", "round", "(", "x", "+", "0.5", "*", "w", "-", "ws", "*", "0.5", ")", "\n", "x2", "=", "x1", "+", "ws", "\n", "\n", "y1", "=", "round", "(", "y", "+", "0.5", "*", "h", "-", "hs", "*", "0.5", ")", "\n", "y2", "=", "y1", "+", "hs", "\n", "\n", "x1_pad", "=", "max", "(", "0", ",", "-", "x1", ")", "\n", "x2_pad", "=", "max", "(", "x2", "-", "im", ".", "shape", "[", "1", "]", "+", "1", ",", "0", ")", "\n", "\n", "y1_pad", "=", "max", "(", "0", ",", "-", "y1", ")", "\n", "y2_pad", "=", "max", "(", "y2", "-", "im", ".", "shape", "[", "0", "]", "+", "1", ",", "0", ")", "\n", "\n", "# Crop target", "\n", "im_crop", "=", "im", "[", "y1", "+", "y1_pad", ":", "y2", "-", "y2_pad", ",", "x1", "+", "x1_pad", ":", "x2", "-", "x2_pad", ",", ":", "]", "\n", "\n", "# Pad", "\n", "im_crop_padded", "=", "cv", ".", "copyMakeBorder", "(", "im_crop", ",", "y1_pad", ",", "y2_pad", ",", "x1_pad", ",", "x2_pad", ",", "mode", ")", "\n", "\n", "if", "output_sz", "is", "not", "None", ":", "\n", "        ", "w_rsz_f", "=", "output_sz", "/", "ws", "\n", "h_rsz_f", "=", "output_sz", "/", "hs", "\n", "im_crop_padded_rsz", "=", "cv", ".", "resize", "(", "im_crop_padded", ",", "(", "output_sz", ",", "output_sz", ")", ")", "\n", "if", "len", "(", "im_crop_padded_rsz", ".", "shape", ")", "==", "2", ":", "\n", "            ", "im_crop_padded_rsz", "=", "im_crop_padded_rsz", "[", "...", ",", "np", ".", "newaxis", "]", "\n", "", "return", "im_crop_padded_rsz", ",", "h_rsz_f", ",", "w_rsz_f", "\n", "", "else", ":", "\n", "        ", "return", "im_crop_padded", ",", "1.0", ",", "1.0", "\n", "", "", "'''\u628amask\u6620\u5c04\u5230\u539f\u56fe\u4e0a'''", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.map_mask_back": [[66, 112], ["numpy.zeros", "target_bb.tolist", "math.ceil", "math.ceil", "round", "round", "max", "max", "max", "max", "cv2.copyMakeBorder", "cv2.resize", "cv.resize.copy", "Exception"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy"], ["def", "map_mask_back", "(", "im", ",", "target_bb", ",", "search_area_factor", ",", "mask", ",", "mode", "=", "cv", ".", "BORDER_REPLICATE", ")", ":", "\n", "    ", "\"\"\" Extracts a crop centered at target_bb box, of size search_area_factor times target_bb(Both height and width)\n\n    args:\n        im - cv image\n        target_bb - target box [x, y, w, h]\n        search_area_factor - Ratio of crop size to target size\n        output_sz - (float) Size to which the extracted crop is resized (always square). If None, no resizing is done.\n\n    returns:\n        cv image - extracted crop\n        float - the factor by which the crop has been resized to make the crop size equal output_size\n    \"\"\"", "\n", "H", ",", "W", "=", "(", "im", ".", "shape", "[", "0", "]", ",", "im", ".", "shape", "[", "1", "]", ")", "\n", "base", "=", "np", ".", "zeros", "(", "(", "H", ",", "W", ")", ")", "\n", "x", ",", "y", ",", "w", ",", "h", "=", "target_bb", ".", "tolist", "(", ")", "\n", "\n", "# Crop image", "\n", "ws", "=", "math", ".", "ceil", "(", "search_area_factor", "*", "w", ")", "\n", "hs", "=", "math", ".", "ceil", "(", "search_area_factor", "*", "h", ")", "\n", "\n", "if", "ws", "<", "1", "or", "hs", "<", "1", ":", "\n", "        ", "raise", "Exception", "(", "'Too small bounding box.'", ")", "\n", "\n", "", "x1", "=", "round", "(", "x", "+", "0.5", "*", "w", "-", "ws", "*", "0.5", ")", "\n", "x2", "=", "x1", "+", "ws", "\n", "\n", "y1", "=", "round", "(", "y", "+", "0.5", "*", "h", "-", "hs", "*", "0.5", ")", "\n", "y2", "=", "y1", "+", "hs", "\n", "\n", "x1_pad", "=", "max", "(", "0", ",", "-", "x1", ")", "\n", "x2_pad", "=", "max", "(", "x2", "-", "im", ".", "shape", "[", "1", "]", "+", "1", ",", "0", ")", "\n", "\n", "y1_pad", "=", "max", "(", "0", ",", "-", "y1", ")", "\n", "y2_pad", "=", "max", "(", "y2", "-", "im", ".", "shape", "[", "0", "]", "+", "1", ",", "0", ")", "\n", "\n", "'''pad base'''", "\n", "base_padded", "=", "cv", ".", "copyMakeBorder", "(", "base", ",", "y1_pad", ",", "y2_pad", ",", "x1_pad", ",", "x2_pad", ",", "mode", ")", "\n", "'''Resize mask'''", "\n", "mask_rsz", "=", "cv", ".", "resize", "(", "mask", ",", "(", "ws", ",", "hs", ")", ")", "\n", "'''fill region with mask'''", "\n", "base_padded", "[", "y1", "+", "y1_pad", ":", "y2", "+", "y1_pad", ",", "x1", "+", "x1_pad", ":", "x2", "+", "x1_pad", "]", "=", "mask_rsz", ".", "copy", "(", ")", "\n", "'''crop base_padded to get final mask'''", "\n", "final_mask", "=", "base_padded", "[", "y1_pad", ":", "y1_pad", "+", "H", ",", "x1_pad", ":", "x1_pad", "+", "W", "]", "\n", "assert", "(", "final_mask", ".", "shape", "==", "(", "H", ",", "W", ")", ")", "\n", "return", "final_mask", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.transform_image_to_crop_SE": [[114, 145], ["crop_sz[].item", "torch.clamp", "torch.clamp", "torch.clamp", "torch.clamp", "torch.stack"], "function", ["None"], ["def", "transform_image_to_crop_SE", "(", "box_in", ":", "torch", ".", "Tensor", ",", "box_extract", ":", "torch", ".", "Tensor", ",", "resize_factor_h", ":", "float", ",", "resize_factor_w", ":", "float", ",", "\n", "crop_sz", ":", "torch", ".", "Tensor", ")", "->", "torch", ".", "Tensor", ":", "\n", "    ", "\"\"\" Transform the box co-ordinates from the original image co-ordinates to the co-ordinates of the cropped image\n    args:\n        box_in - the box for which the co-ordinates are to be transformed\n        box_extract - the box about which the image crop has been extracted.\n        resize_factor - the ratio between the original image scale and the scale of the image crop\n        crop_sz - size of the cropped image\n\n    returns:\n        torch.Tensor - transformed co-ordinates of box_in\n    \"\"\"", "\n", "box_extract_center", "=", "box_extract", "[", "0", ":", "2", "]", "+", "0.5", "*", "box_extract", "[", "2", ":", "4", "]", "\n", "\n", "box_in_center", "=", "box_in", "[", "0", ":", "2", "]", "+", "0.5", "*", "box_in", "[", "2", ":", "4", "]", "\n", "\n", "box_out_xc", "=", "(", "crop_sz", "[", "0", "]", "-", "1", ")", "/", "2", "+", "(", "box_in_center", "[", "0", "]", "-", "box_extract_center", "[", "0", "]", ")", "*", "resize_factor_w", "\n", "box_out_yc", "=", "(", "crop_sz", "[", "0", "]", "-", "1", ")", "/", "2", "+", "(", "box_in_center", "[", "1", "]", "-", "box_extract_center", "[", "1", "]", ")", "*", "resize_factor_h", "\n", "box_out_w", "=", "box_in", "[", "2", "]", "*", "resize_factor_w", "\n", "box_out_h", "=", "box_in", "[", "3", "]", "*", "resize_factor_h", "\n", "\n", "'''2019.12.28 \u4e3a\u4e86\u907f\u514d\u51fa\u73b0(x1,y1)\u5c0f\u4e8e0,\u6216\u8005(x2,y2)\u5927\u4e8e256\u7684\u60c5\u51b5,\u8fd9\u91cc\u6211\u5bf9\u5b83\u4eec\u52a0\u4e0a\u4e86\u4e00\u4e9b\u9650\u5236'''", "\n", "max_sz", "=", "crop_sz", "[", "0", "]", ".", "item", "(", ")", "\n", "box_out_x1", "=", "torch", ".", "clamp", "(", "box_out_xc", "-", "0.5", "*", "box_out_w", ",", "0", ",", "max_sz", ")", "\n", "box_out_y1", "=", "torch", ".", "clamp", "(", "box_out_yc", "-", "0.5", "*", "box_out_h", ",", "0", ",", "max_sz", ")", "\n", "box_out_x2", "=", "torch", ".", "clamp", "(", "box_out_xc", "+", "0.5", "*", "box_out_w", ",", "0", ",", "max_sz", ")", "\n", "box_out_y2", "=", "torch", ".", "clamp", "(", "box_out_yc", "+", "0.5", "*", "box_out_h", ",", "0", ",", "max_sz", ")", "\n", "box_out_w_new", "=", "box_out_x2", "-", "box_out_x1", "\n", "box_out_h_new", "=", "box_out_y2", "-", "box_out_y1", "\n", "box_out", "=", "torch", ".", "stack", "(", "(", "box_out_x1", ",", "box_out_y1", ",", "box_out_w_new", ",", "box_out_h_new", ")", ")", "\n", "return", "box_out", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.centered_crop": [[146, 159], ["zip", "torch.Tensor", "sample_target", "transform_image_to_crop", "zip", "zip"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_target", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.transform_image_to_crop"], ["", "def", "centered_crop", "(", "frames", ",", "anno", ",", "area_factor", ",", "output_sz", ")", ":", "\n", "    ", "crops_resize_factors", "=", "[", "sample_target", "(", "f", ",", "a", ",", "area_factor", ",", "output_sz", ")", "\n", "for", "f", ",", "a", "in", "zip", "(", "frames", ",", "anno", ")", "]", "\n", "\n", "frames_crop", ",", "resize_factors", "=", "zip", "(", "*", "crops_resize_factors", ")", "\n", "\n", "crop_sz", "=", "torch", ".", "Tensor", "(", "[", "output_sz", ",", "output_sz", "]", ")", "\n", "\n", "# find the bb location in the crop", "\n", "anno_crop", "=", "[", "transform_image_to_crop", "(", "a", ",", "a", ",", "rf", ",", "crop_sz", ")", "\n", "for", "a", ",", "rf", "in", "zip", "(", "anno", ",", "resize_factors", ")", "]", "\n", "\n", "return", "frames_crop", ",", "anno_crop", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.jittered_center_crop_SE": [[162, 195], ["zip", "processing_utils_SE.sample_target_SE", "torch.Tensor", "zip", "processing_utils_SE.transform_image_to_crop_SE", "zip"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.sample_target_SE", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.transform_image_to_crop_SE"], ["def", "jittered_center_crop_SE", "(", "frames", ",", "box_extract", ",", "box_gt", ",", "search_area_factor", ",", "output_sz", ",", "get_bbox_coord", "=", "True", ",", "mode", "=", "cv", ".", "BORDER_REPLICATE", ")", ":", "\n", "    ", "\"\"\"\n    Crop a patch centered at box_extract. The height and width of cropped region is search_area_factor times that of box_extract.\n    The extracted crops are then resized to output_sz. Further, the co-ordinates of the box box_gt are transformed to the image crop co-ordinates\n    args:\n        frames - list of frames\n        box_extract - list of boxes of same length as frames. The crops are extracted using anno_extract\n        box_gt - list of boxes of same length as frames. The co-ordinates of these boxes are transformed from\n                    image co-ordinates to the crop co-ordinates\n        search_area_factor - The area of the extracted crop is search_area_factor^2 times box_extract area\n        output_sz - The size to which the extracted crops are resized\n\n    returns:\n        list - list of image crops\n        list - box_gt location in the crop co-ordinates\n    \"\"\"", "\n", "'''call function \"sample_target_SE\" and function \"transform_image_to_crop_SE\"'''", "\n", "'''get cropped patch(fixed size)'''", "\n", "crops_resize_factors", "=", "[", "sample_target_SE", "(", "f", ",", "a", ",", "search_area_factor", ",", "output_sz", ",", "mode", "=", "mode", ")", "\n", "for", "f", ",", "a", "in", "zip", "(", "frames", ",", "box_extract", ")", "]", "\n", "\n", "frames_crop", ",", "resize_factors_h", ",", "resize_factors_w", "=", "zip", "(", "*", "crops_resize_factors", ")", "\n", "if", "get_bbox_coord", ":", "\n", "        ", "crop_sz", "=", "torch", ".", "Tensor", "(", "[", "output_sz", ",", "output_sz", "]", ")", "\n", "\n", "# find the bb location in the crop", "\n", "'''get GT's cooridinate on the cropped patch'''", "\n", "box_crop", "=", "[", "transform_image_to_crop_SE", "(", "a_gt", ",", "a_ex", ",", "h_rsf", ",", "w_rsf", ",", "crop_sz", ")", "\n", "for", "a_gt", ",", "a_ex", ",", "h_rsf", ",", "w_rsf", "in", "zip", "(", "box_gt", ",", "box_extract", ",", "resize_factors_h", ",", "resize_factors_w", ")", "]", "\n", "\n", "return", "frames_crop", ",", "box_crop", "\n", "", "else", ":", "\n", "        ", "return", "frames_crop", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.sample_target_nopad": [[196, 253], ["isinstance", "torch.Tensor", "target_bb.tolist", "max", "math.floor", "math.floor", "round", "round", "cv2.resize", "torch.Tensor", "Exception", "max", "min", "max", "min", "tuple", "torch.Tensor.long().tolist", "torch.Tensor.long", "target_bb[].prod", "torch.Tensor.prod"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "", "def", "sample_target_nopad", "(", "im", ",", "target_bb", ",", "search_area_factor", ",", "output_sz", ")", ":", "\n", "    ", "\"\"\" Extracts a crop centered at target_bb box, of area search_area_factor^2. If the crop area contains regions\n    outside the image, it is shifted so that the it is inside the image. Further, if the crop area exceeds the image\n    size, a smaller crop which fits the image is returned instead.\n\n    args:\n        im - cv image\n        target_bb - target box [x, y, w, h]\n        search_area_factor - Ratio of crop size to target size\n        output_sz - (float) Size to which the extracted crop is resized (always square). If None, no resizing is done.\n\n    returns:\n        cv image - extracted crop\n        torch.Tensor - a bounding box denoting the cropped region in the image.\n    \"\"\"", "\n", "\n", "if", "isinstance", "(", "output_sz", ",", "(", "float", ",", "int", ")", ")", ":", "\n", "        ", "output_sz", "=", "(", "output_sz", ",", "output_sz", ")", "\n", "", "output_sz", "=", "torch", ".", "Tensor", "(", "output_sz", ")", "\n", "\n", "im_h", "=", "im", ".", "shape", "[", "0", "]", "\n", "im_w", "=", "im", ".", "shape", "[", "1", "]", "\n", "\n", "bbx", ",", "bby", ",", "bbw", ",", "bbh", "=", "target_bb", ".", "tolist", "(", ")", "\n", "\n", "# Crop image", "\n", "crop_sz_x", ",", "crop_sz_y", "=", "(", "output_sz", "*", "(", "target_bb", "[", "2", ":", "]", ".", "prod", "(", ")", "/", "output_sz", ".", "prod", "(", ")", ")", ".", "sqrt", "(", ")", "*", "search_area_factor", ")", ".", "ceil", "(", ")", "\n", "\n", "# Calculate rescaling factor if outside the image", "\n", "rescale_factor", "=", "max", "(", "1", ",", "crop_sz_x", "/", "im_w", ",", "crop_sz_y", "/", "im_h", ")", "\n", "crop_sz_x", "=", "math", ".", "floor", "(", "crop_sz_x", "/", "rescale_factor", ")", "\n", "crop_sz_y", "=", "math", ".", "floor", "(", "crop_sz_y", "/", "rescale_factor", ")", "\n", "\n", "if", "crop_sz_x", "<", "1", "or", "crop_sz_y", "<", "1", ":", "\n", "        ", "raise", "Exception", "(", "'Too small bounding box.'", ")", "\n", "\n", "", "x1", "=", "round", "(", "bbx", "+", "0.5", "*", "bbw", "-", "crop_sz_x", "*", "0.5", ")", "\n", "x2", "=", "x1", "+", "crop_sz_x", "\n", "\n", "y1", "=", "round", "(", "bby", "+", "0.5", "*", "bbh", "-", "crop_sz_y", "*", "0.5", ")", "\n", "y2", "=", "y1", "+", "crop_sz_y", "\n", "\n", "# Move box inside image", "\n", "shift_x", "=", "max", "(", "0", ",", "-", "x1", ")", "+", "min", "(", "0", ",", "im_w", "-", "x2", ")", "\n", "x1", "+=", "shift_x", "\n", "x2", "+=", "shift_x", "\n", "\n", "shift_y", "=", "max", "(", "0", ",", "-", "y1", ")", "+", "min", "(", "0", ",", "im_h", "-", "y2", ")", "\n", "y1", "+=", "shift_y", "\n", "y2", "+=", "shift_y", "\n", "\n", "# Crop and resize image", "\n", "im_crop", "=", "im", "[", "y1", ":", "y2", ",", "x1", ":", "x2", ",", ":", "]", "\n", "im_out", "=", "cv", ".", "resize", "(", "im_crop", ",", "tuple", "(", "output_sz", ".", "long", "(", ")", ".", "tolist", "(", ")", ")", ")", "\n", "\n", "crop_box", "=", "torch", ".", "Tensor", "(", "[", "x1", ",", "y1", ",", "x2", "-", "x1", ",", "y2", "-", "y1", "]", ")", "\n", "return", "im_out", ",", "crop_box", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.transform_box_to_crop": [[255, 274], ["box.clone"], "function", ["None"], ["", "def", "transform_box_to_crop", "(", "box", ":", "torch", ".", "Tensor", ",", "crop_box", ":", "torch", ".", "Tensor", ",", "crop_sz", ":", "torch", ".", "Tensor", ")", "->", "torch", ".", "Tensor", ":", "\n", "    ", "\"\"\" Transform the box co-ordinates from the original image co-ordinates to the co-ordinates of the cropped image\n    args:\n        box - the box for which the co-ordinates are to be transformed\n        crop_box - bounding box defining the crop in the original image\n        crop_sz - size of the cropped image\n\n    returns:\n        torch.Tensor - transformed co-ordinates of box_in\n    \"\"\"", "\n", "\n", "box_out", "=", "box", ".", "clone", "(", ")", "\n", "box_out", "[", ":", "2", "]", "-=", "crop_box", "[", ":", "2", "]", "\n", "\n", "scale_factor", "=", "crop_sz", "/", "crop_box", "[", "2", ":", "]", "\n", "\n", "box_out", "[", ":", "2", "]", "*=", "scale_factor", "\n", "box_out", "[", "2", ":", "]", "*=", "scale_factor", "\n", "return", "box_out", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.jittered_center_crop_nopad": [[276, 310], ["isinstance", "zip", "torch.Tensor", "processing_utils_SE.sample_target_nopad", "processing_utils_SE.transform_box_to_crop", "zip", "zip"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.sample_target_nopad", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.transform_box_to_crop"], ["", "def", "jittered_center_crop_nopad", "(", "frames", ",", "box_extract", ",", "box_gt", ",", "search_area_factor", ",", "output_sz", ")", ":", "\n", "    ", "\"\"\" For each frame in frames, extracts a square crop centered at box_extract, of area search_area_factor^2\n    times box_extract area. If the crop area contains regions outside the image, it is shifted / shrunk so that it\n    completely fits inside the image. The extracted crops are then resized to output_sz. Further, the co-ordinates of\n    the box box_gt are transformed to the image crop co-ordinates\n\n    args:\n        frames - list of frames\n        box_extract - list of boxes of same length as frames. The crops are extracted using anno_extract\n        box_gt - list of boxes of same length as frames. The co-ordinates of these boxes are transformed from\n                    image co-ordinates to the crop co-ordinates\n        search_area_factor - The area of the extracted crop is search_area_factor^2 times box_extract area\n        output_sz - The size to which the extracted crops are resized\n\n    returns:\n        list - list of image crops\n        list - box_gt location in the crop co-ordinates\n        \"\"\"", "\n", "\n", "if", "isinstance", "(", "output_sz", ",", "(", "float", ",", "int", ")", ")", ":", "\n", "        ", "output_sz", "=", "(", "output_sz", ",", "output_sz", ")", "\n", "\n", "", "frame_crops_boxes", "=", "[", "sample_target_nopad", "(", "f", ",", "a", ",", "search_area_factor", ",", "output_sz", ")", "\n", "for", "f", ",", "a", "in", "zip", "(", "frames", ",", "box_extract", ")", "]", "\n", "\n", "frames_crop", ",", "crop_boxes", "=", "zip", "(", "*", "frame_crops_boxes", ")", "\n", "\n", "crop_sz", "=", "torch", ".", "Tensor", "(", "output_sz", ")", "\n", "\n", "# find the bb location in the crop", "\n", "box_crop", "=", "[", "transform_box_to_crop", "(", "bb_gt", ",", "crop_bb", ",", "crop_sz", ")", "\n", "for", "bb_gt", ",", "crop_bb", "in", "zip", "(", "box_gt", ",", "crop_boxes", ")", "]", "\n", "\n", "return", "frames_crop", ",", "box_crop", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.iou": [[312, 333], ["torch.max", "torch.min", "sz.prod", "reference[].prod", "proposals[].prod"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "iou", "(", "reference", ",", "proposals", ")", ":", "\n", "    ", "\"\"\"Compute the IoU between a reference box with multiple proposal boxes.\n\n    args:\n        reference - Tensor of shape (1, 4).\n        proposals - Tensor of shape (num_proposals, 4)\n\n    returns:\n        torch.Tensor - Tensor of shape (num_proposals,) containing IoU of reference box with each proposal box.\n    \"\"\"", "\n", "\n", "# Intersection box", "\n", "tl", "=", "torch", ".", "max", "(", "reference", "[", ":", ",", ":", "2", "]", ",", "proposals", "[", ":", ",", ":", "2", "]", ")", "\n", "br", "=", "torch", ".", "min", "(", "reference", "[", ":", ",", ":", "2", "]", "+", "reference", "[", ":", ",", "2", ":", "]", ",", "proposals", "[", ":", ",", ":", "2", "]", "+", "proposals", "[", ":", ",", "2", ":", "]", ")", "\n", "sz", "=", "(", "br", "-", "tl", ")", ".", "clamp", "(", "0", ")", "\n", "\n", "# Area", "\n", "intersection", "=", "sz", ".", "prod", "(", "dim", "=", "1", ")", "\n", "union", "=", "reference", "[", ":", ",", "2", ":", "]", ".", "prod", "(", "dim", "=", "1", ")", "+", "proposals", "[", ":", ",", "2", ":", "]", ".", "prod", "(", "dim", "=", "1", ")", "-", "intersection", "\n", "\n", "return", "intersection", "/", "union", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.rand_uniform": [[335, 346], ["torch.rand"], "function", ["None"], ["", "def", "rand_uniform", "(", "a", ",", "b", ",", "shape", "=", "1", ")", ":", "\n", "    ", "\"\"\" sample numbers uniformly between a and b.\n    args:\n        a - lower bound\n        b - upper bound\n        shape - shape of the output tensor\n\n    returns:\n        torch.Tensor - tensor of shape=shape\n    \"\"\"", "\n", "return", "(", "b", "-", "a", ")", "*", "torch", ".", "rand", "(", "shape", ")", "+", "a", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.perturb_box": [[348, 408], ["isinstance", "range", "random.choice", "isinstance", "torch.sqrt", "random.gauss", "random.gauss", "random.gauss", "random.gauss", "torch.Tensor().round", "processing_utils_SE.iou", "torch.ones", "box.view", "torch.Tensor().round.view", "processing_utils_SE.rand_uniform", "processing_utils_SE.rand_uniform", "torch.Tensor", "processing_utils_SE.rand_uniform", "processing_utils_SE.rand_uniform"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.iou", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.rand_uniform", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.rand_uniform", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.rand_uniform", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.rand_uniform"], ["", "def", "perturb_box", "(", "box", ",", "min_iou", "=", "0.5", ",", "sigma_factor", "=", "0.1", ")", ":", "\n", "    ", "\"\"\" Perturb the input box by adding gaussian noise to the co-ordinates\n\n     args:\n        box - input box\n        min_iou - minimum IoU overlap between input box and the perturbed box\n        sigma_factor - amount of perturbation, relative to the box size. Can be either a single element, or a list of\n                        sigma_factors, in which case one of them will be uniformly sampled. Further, each of the\n                        sigma_factor element can be either a float, or a tensor\n                        of shape (4,) specifying the sigma_factor per co-ordinate\n\n    returns:\n        torch.Tensor - the perturbed box\n    \"\"\"", "\n", "\n", "if", "isinstance", "(", "sigma_factor", ",", "list", ")", ":", "\n", "# If list, sample one sigma_factor as current sigma factor", "\n", "        ", "c_sigma_factor", "=", "random", ".", "choice", "(", "sigma_factor", ")", "\n", "", "else", ":", "\n", "        ", "c_sigma_factor", "=", "sigma_factor", "\n", "\n", "", "if", "not", "isinstance", "(", "c_sigma_factor", ",", "torch", ".", "Tensor", ")", ":", "\n", "        ", "c_sigma_factor", "=", "c_sigma_factor", "*", "torch", ".", "ones", "(", "4", ")", "\n", "\n", "", "perturb_factor", "=", "torch", ".", "sqrt", "(", "box", "[", "2", "]", "*", "box", "[", "3", "]", ")", "*", "c_sigma_factor", "\n", "\n", "# multiple tries to ensure that the perturbed box has iou > min_iou with the input box", "\n", "for", "i_", "in", "range", "(", "100", ")", ":", "\n", "        ", "c_x", "=", "box", "[", "0", "]", "+", "0.5", "*", "box", "[", "2", "]", "\n", "c_y", "=", "box", "[", "1", "]", "+", "0.5", "*", "box", "[", "3", "]", "\n", "c_x_per", "=", "random", ".", "gauss", "(", "c_x", ",", "perturb_factor", "[", "0", "]", ")", "\n", "c_y_per", "=", "random", ".", "gauss", "(", "c_y", ",", "perturb_factor", "[", "1", "]", ")", "\n", "\n", "w_per", "=", "random", ".", "gauss", "(", "box", "[", "2", "]", ",", "perturb_factor", "[", "2", "]", ")", "\n", "h_per", "=", "random", ".", "gauss", "(", "box", "[", "3", "]", ",", "perturb_factor", "[", "3", "]", ")", "\n", "\n", "if", "w_per", "<=", "1", ":", "\n", "            ", "w_per", "=", "box", "[", "2", "]", "*", "rand_uniform", "(", "0.15", ",", "0.5", ")", "\n", "\n", "", "if", "h_per", "<=", "1", ":", "\n", "            ", "h_per", "=", "box", "[", "3", "]", "*", "rand_uniform", "(", "0.15", ",", "0.5", ")", "\n", "\n", "", "box_per", "=", "torch", ".", "Tensor", "(", "[", "c_x_per", "-", "0.5", "*", "w_per", ",", "c_y_per", "-", "0.5", "*", "h_per", ",", "w_per", ",", "h_per", "]", ")", ".", "round", "(", ")", "\n", "\n", "if", "box_per", "[", "2", "]", "<=", "1", ":", "\n", "            ", "box_per", "[", "2", "]", "=", "box", "[", "2", "]", "*", "rand_uniform", "(", "0.15", ",", "0.5", ")", "\n", "\n", "", "if", "box_per", "[", "3", "]", "<=", "1", ":", "\n", "            ", "box_per", "[", "3", "]", "=", "box", "[", "3", "]", "*", "rand_uniform", "(", "0.15", ",", "0.5", ")", "\n", "\n", "", "box_iou", "=", "iou", "(", "box", ".", "view", "(", "1", ",", "4", ")", ",", "box_per", ".", "view", "(", "1", ",", "4", ")", ")", "\n", "\n", "# if there is sufficient overlap, return", "\n", "if", "box_iou", ">", "min_iou", ":", "\n", "            ", "return", "box_per", ",", "box_iou", "\n", "\n", "# else reduce the perturb factor", "\n", "", "perturb_factor", "*=", "0.9", "\n", "\n", "", "return", "box_per", ",", "box_iou", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.gauss_1d": [[410, 413], ["torch.arange().reshape", "torch.exp", "torch.arange", "center.reshape"], "function", ["None"], ["", "def", "gauss_1d", "(", "sz", ",", "sigma", ",", "center", ",", "end_pad", "=", "0", ")", ":", "\n", "    ", "k", "=", "torch", ".", "arange", "(", "-", "(", "sz", "-", "1", ")", "/", "2", ",", "(", "sz", "+", "1", ")", "/", "2", "+", "end_pad", ")", ".", "reshape", "(", "1", ",", "-", "1", ")", "\n", "return", "torch", ".", "exp", "(", "-", "1.0", "/", "(", "2", "*", "sigma", "**", "2", ")", "*", "(", "k", "-", "center", ".", "reshape", "(", "-", "1", ",", "1", ")", ")", "**", "2", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.gauss_2d": [[415, 420], ["isinstance", "gauss_1d().reshape", "gauss_1d().reshape", "processing_utils_SE.gauss_1d", "processing_utils_SE.gauss_1d", "sz[].item", "sz[].item"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gauss_1d", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gauss_1d"], ["", "def", "gauss_2d", "(", "sz", ",", "sigma", ",", "center", ",", "end_pad", "=", "(", "0", ",", "0", ")", ")", ":", "\n", "    ", "if", "isinstance", "(", "sigma", ",", "(", "float", ",", "int", ")", ")", ":", "\n", "        ", "sigma", "=", "(", "sigma", ",", "sigma", ")", "\n", "", "return", "gauss_1d", "(", "sz", "[", "0", "]", ".", "item", "(", ")", ",", "sigma", "[", "0", "]", ",", "center", "[", ":", ",", "0", "]", ",", "end_pad", "[", "0", "]", ")", ".", "reshape", "(", "center", ".", "shape", "[", "0", "]", ",", "1", ",", "-", "1", ")", "*", "gauss_1d", "(", "sz", "[", "1", "]", ".", "item", "(", ")", ",", "sigma", "[", "1", "]", ",", "center", "[", ":", ",", "1", "]", ",", "end_pad", "[", "1", "]", ")", ".", "reshape", "(", "center", ".", "shape", "[", "0", "]", ",", "-", "1", ",", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.gaussian_label_function": [[422, 450], ["isinstance", "isinstance", "isinstance", "torch.Tensor", "torch.Tensor", "processing_utils_SE.gauss_2d", "torch.Tensor.prod().sqrt().item", "torch.Tensor", "int", "int", "torch.Tensor.prod().sqrt", "torch.Tensor.prod"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gauss_2d"], ["", "def", "gaussian_label_function", "(", "target_bb", ",", "sigma_factor", ",", "kernel_sz", ",", "feat_sz", ",", "image_sz", ",", "end_pad_if_even", "=", "True", ")", ":", "\n", "    ", "\"\"\"Construct Gaussian label function.\"\"\"", "\n", "\n", "if", "isinstance", "(", "kernel_sz", ",", "(", "float", ",", "int", ")", ")", ":", "\n", "        ", "kernel_sz", "=", "(", "kernel_sz", ",", "kernel_sz", ")", "\n", "", "if", "isinstance", "(", "feat_sz", ",", "(", "float", ",", "int", ")", ")", ":", "\n", "        ", "feat_sz", "=", "(", "feat_sz", ",", "feat_sz", ")", "\n", "", "if", "isinstance", "(", "image_sz", ",", "(", "float", ",", "int", ")", ")", ":", "\n", "        ", "image_sz", "=", "(", "image_sz", ",", "image_sz", ")", "\n", "\n", "", "image_sz", "=", "torch", ".", "Tensor", "(", "image_sz", ")", "\n", "feat_sz", "=", "torch", ".", "Tensor", "(", "feat_sz", ")", "\n", "\n", "target_center", "=", "target_bb", "[", ":", ",", "0", ":", "2", "]", "+", "0.5", "*", "target_bb", "[", ":", ",", "2", ":", "4", "]", "\n", "target_center_norm", "=", "(", "target_center", "-", "image_sz", "/", "2", ")", "/", "image_sz", "\n", "\n", "center", "=", "feat_sz", "*", "target_center_norm", "+", "0.5", "*", "torch", ".", "Tensor", "(", "[", "(", "kernel_sz", "[", "0", "]", "+", "1", ")", "%", "2", ",", "(", "kernel_sz", "[", "1", "]", "+", "1", ")", "%", "2", "]", ")", "\n", "\n", "sigma", "=", "sigma_factor", "*", "feat_sz", ".", "prod", "(", ")", ".", "sqrt", "(", ")", ".", "item", "(", ")", "\n", "\n", "if", "end_pad_if_even", ":", "\n", "        ", "end_pad", "=", "(", "int", "(", "kernel_sz", "[", "0", "]", "%", "2", "==", "0", ")", ",", "int", "(", "kernel_sz", "[", "1", "]", "%", "2", "==", "0", ")", ")", "\n", "", "else", ":", "\n", "        ", "end_pad", "=", "(", "0", ",", "0", ")", "\n", "\n", "", "gauss_label", "=", "gauss_2d", "(", "feat_sz", ",", "sigma", ",", "center", ",", "end_pad", ")", "\n", "return", "gauss_label", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.DiMPSampler.__init__": [[175, 180], ["sampler.TrackingSampler.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["# get data for classification", "\n", "        "]], "home.repos.pwc.inspect_result.researchmm_Stark.data.sampler.ATOMSampler.__init__": [[185, 190], ["sampler.TrackingSampler.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["label", "=", "None", "\n", "while", "not", "valid", ":", "\n", "# Select a dataset", "\n", "            ", "dataset", "=", "random", ".", "choices", "(", "self", ".", "datasets", ",", "self", ".", "p_datasets", ")", "[", "0", "]", "\n", "\n", "is_video_dataset", "=", "dataset", ".", "is_video_sequence", "(", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_target_adaptive": [[128, 238], ["isinstance", "torch.Tensor", "torch.Tensor", "target_bb.tolist", "round", "round", "max", "max", "max", "max", "cv2.copyMakeBorder", "cv2.resize", "torch.Tensor", "torch.Tensor", "float", "min", "math.floor", "math.floor", "Exception", "max", "min", "max", "min", "torch.pad", "tuple", "max", "max", "max", "max", "max", "max", "torch.Tensor.long().tolist", "torch.interpolate", "min", "tuple", "torch.Tensor.long", "torch.Tensor.flip().long().tolist", "torch.Tensor.flip().long", "torch.Tensor.flip", "target_bb[].prod", "torch.Tensor.prod"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], ["for", "f", ",", "a", "in", "zip", "(", "frames", ",", "box_extract", ")", "]", "\n", "frames_crop", ",", "resize_factors", ",", "att_mask", "=", "zip", "(", "*", "crops_resize_factors", ")", "\n", "masks_crop", "=", "None", "\n", "", "else", ":", "\n", "        ", "crops_resize_factors", "=", "[", "sample_target", "(", "f", ",", "a", ",", "search_area_factor", ",", "output_sz", ",", "m", ")", "\n", "for", "f", ",", "a", ",", "m", "in", "zip", "(", "frames", ",", "box_extract", ",", "masks", ")", "]", "\n", "frames_crop", ",", "resize_factors", ",", "att_mask", ",", "masks_crop", "=", "zip", "(", "*", "crops_resize_factors", ")", "\n", "# frames_crop: tuple of ndarray (128,128,3), att_mask: tuple of ndarray (128,128)", "\n", "", "crop_sz", "=", "torch", ".", "Tensor", "(", "[", "output_sz", ",", "output_sz", "]", ")", "\n", "\n", "# find the bb location in the crop", "\n", "'''Note that here we use normalized coord'''", "\n", "box_crop", "=", "[", "transform_image_to_crop", "(", "a_gt", ",", "a_ex", ",", "rf", ",", "crop_sz", ",", "normalize", "=", "True", ")", "\n", "for", "a_gt", ",", "a_ex", ",", "rf", "in", "zip", "(", "box_gt", ",", "box_extract", ",", "resize_factors", ")", "]", "# (x1,y1,w,h) list of tensors", "\n", "\n", "return", "frames_crop", ",", "box_crop", ",", "att_mask", ",", "masks_crop", "\n", "\n", "\n", "", "def", "transform_box_to_crop", "(", "box", ":", "torch", ".", "Tensor", ",", "crop_box", ":", "torch", ".", "Tensor", ",", "crop_sz", ":", "torch", ".", "Tensor", ",", "normalize", "=", "False", ")", "->", "torch", ".", "Tensor", ":", "\n", "    ", "\"\"\" Transform the box co-ordinates from the original image co-ordinates to the co-ordinates of the cropped image\n    args:\n        box - the box for which the co-ordinates are to be transformed\n        crop_box - bounding box defining the crop in the original image\n        crop_sz - size of the cropped image\n\n    returns:\n        torch.Tensor - transformed co-ordinates of box_in\n    \"\"\"", "\n", "\n", "box_out", "=", "box", ".", "clone", "(", ")", "\n", "box_out", "[", ":", "2", "]", "-=", "crop_box", "[", ":", "2", "]", "\n", "\n", "scale_factor", "=", "crop_sz", "/", "crop_box", "[", "2", ":", "]", "\n", "\n", "box_out", "[", ":", "2", "]", "*=", "scale_factor", "\n", "box_out", "[", "2", ":", "]", "*=", "scale_factor", "\n", "if", "normalize", ":", "\n", "        ", "return", "box_out", "/", "crop_sz", "[", "0", "]", "\n", "", "else", ":", "\n", "        ", "return", "box_out", "\n", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.crop_and_resize": [[240, 296], ["isinstance", "max", "max", "max", "max", "cv2.copyMakeBorder", "cv2.resize", "Exception", "torch.pad", "box.clone", "torch.interpolate"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.target_image_crop": [[319, 369], ["isinstance", "torch.Tensor", "torch.Tensor", "zip", "zip", "processing_utils.transform_box_to_crop", "processing_utils.sample_target_adaptive", "processing_utils.sample_target_adaptive", "zip", "zip", "zip"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.transform_box_to_crop", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_target_adaptive", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_target_adaptive"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.iou": [[371, 392], ["torch.max", "torch.max", "torch.min", "torch.min", "sz.prod", "reference[].prod", "proposals[].prod"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.rand_uniform": [[394, 405], ["torch.rand", "torch.rand"], "function", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.perturb_box": [[407, 467], ["isinstance", "range", "random.choice", "isinstance", "torch.sqrt", "torch.sqrt", "random.gauss", "random.gauss", "random.gauss", "random.gauss", "torch.Tensor().round", "torch.Tensor().round", "processing_utils.iou", "torch.ones", "torch.ones", "box.view", "torch.Tensor().round.view", "processing_utils.rand_uniform", "processing_utils.rand_uniform", "torch.Tensor", "torch.Tensor", "processing_utils.rand_uniform", "processing_utils.rand_uniform"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.iou", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.rand_uniform", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.rand_uniform", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.rand_uniform", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.rand_uniform"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gauss_1d": [[469, 475], ["torch.arange().reshape", "torch.arange().reshape", "torch.exp", "torch.exp", "torch.arange", "torch.arange", "math.sqrt", "center.reshape"], "function", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gauss_2d": [[477, 482], ["isinstance", "gauss_1d().reshape", "gauss_1d().reshape", "processing_utils.gauss_1d", "processing_utils.gauss_1d", "sz[].item", "sz[].item"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gauss_1d", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gauss_1d"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gaussian_label_function": [[484, 518], ["isinstance", "isinstance", "isinstance", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "processing_utils.gauss_2d", "torch.Tensor.prod().sqrt().item", "torch.Tensor", "torch.Tensor", "int", "int", "torch.Tensor.prod().sqrt", "torch.Tensor", "torch.Tensor", "torch.Tensor.prod"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gauss_2d"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gauss_density_centered": [[520, 527], ["torch.exp", "torch.exp", "math.sqrt"], "function", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gmm_density_centered": [[529, 540], ["gauss_density_centered().prod().mean", "x.unsqueeze.dim", "x.unsqueeze.unsqueeze", "std.dim", "ValueError", "gauss_density_centered().prod", "x.unsqueeze.dim", "std.dim", "processing_utils.gauss_density_centered"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gauss_density_centered"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_gmm_centered": [[542, 562], ["std.view.view", "torch.randint", "torch.randint", "std[].t", "processing_utils.gmm_density_centered", "std.view.numel", "torch.randn", "torch.randn"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gmm_density_centered"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_gmm": [[564, 587], ["mean.view.numel", "mean.view.view", "std.view.view", "torch.randint", "torch.randint", "std[].t", "processing_utils.gmm_density_centered", "torch.randn", "torch.randn"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gmm_density_centered"], []], "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_box_gmm": [[589, 628], ["torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.stack", "torch.stack", "mean_box.view.view", "mean_box[].clone", "processing_utils.sample_gmm_centered", "bounding_box_utils.rect_to_rel", "bounding_box_utils.rel_to_rect", "torch.zeros_like", "torch.zeros_like", "torch.Tensor().view", "torch.Tensor().view", "gauss_density_centered().prod", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.Tensor", "torch.Tensor", "processing_utils.gauss_density_centered", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.sample_gmm_centered", "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.rect_to_rel", "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.rel_to_rect", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils.gauss_density_centered"], []], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_complete.STARK.__init__": [[38, 47], ["torch.Module.__init__", "int", "int"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "backbone", ",", "bottleneck", ",", "position_embed", ",", "transformer", ",", "box_head", ")", ":", "\n", "        ", "super", "(", "STARK", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "backbone", "=", "backbone", "\n", "self", ".", "bottleneck", "=", "bottleneck", "\n", "self", ".", "position_embed", "=", "position_embed", "\n", "self", ".", "transformer", "=", "transformer", "\n", "self", ".", "box_head", "=", "box_head", "\n", "self", ".", "feat_sz_s", "=", "int", "(", "box_head", ".", "feat_sz", ")", "\n", "self", ".", "feat_len_s", "=", "int", "(", "box_head", ".", "feat_sz", "**", "2", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_complete.STARK.forward": [[48, 74], ["ORT_lightning_X_trt_complete.STARK.bottleneck", "ORT_lightning_X_trt_complete.STARK.position_embed", "ORT_lightning_X_trt_complete.STARK.flatten().permute", "ORT_lightning_X_trt_complete.STARK.flatten().permute", "mask_down.flatten", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "ORT_lightning_X_trt_complete.STARK.transformer", "memory[].permute().contiguous", "memory[].permute().contiguous.view().contiguous", "lib.utils.box_ops.box_xyxy_to_cxcywh", "ORT_lightning_X_trt_complete.STARK.backbone", "torch.interpolate().to", "torch.interpolate().to", "torch.interpolate().to", "torch.interpolate().to", "ORT_lightning_X_trt_complete.STARK.box_head", "ORT_lightning_X_trt_complete.STARK.flatten", "ORT_lightning_X_trt_complete.STARK.flatten", "memory[].permute", "memory[].permute().contiguous.view", "torch.interpolate", "torch.interpolate", "torch.interpolate", "torch.interpolate", "mask[].float"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.box_ops.box_xyxy_to_cxcywh", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], ["", "def", "forward", "(", "self", ",", "img", ":", "torch", ".", "Tensor", ",", "mask", ":", "torch", ".", "Tensor", ",", "\n", "feat_vec_z", ":", "torch", ".", "Tensor", ",", "mask_vec_z", ":", "torch", ".", "Tensor", ",", "pos_vec_z", ":", "torch", ".", "Tensor", ")", ":", "\n", "# run the backbone", "\n", "        ", "feat", "=", "self", ".", "bottleneck", "(", "self", ".", "backbone", "(", "img", ")", ")", "# BxCxHxW", "\n", "mask_down", "=", "F", ".", "interpolate", "(", "mask", "[", "None", "]", ".", "float", "(", ")", ",", "size", "=", "feat", ".", "shape", "[", "-", "2", ":", "]", ")", ".", "to", "(", "torch", ".", "bool", ")", "[", "0", "]", "\n", "pos_embed", "=", "self", ".", "position_embed", "(", "bs", "=", "1", ")", "# 1 is the batch-size. output size is BxCxHxW", "\n", "# adjust shape", "\n", "feat_vec_x", "=", "feat", ".", "flatten", "(", "2", ")", ".", "permute", "(", "2", ",", "0", ",", "1", ")", "# HWxBxC", "\n", "pos_vec_x", "=", "pos_embed", ".", "flatten", "(", "2", ")", ".", "permute", "(", "2", ",", "0", ",", "1", ")", "# HWxBxC", "\n", "mask_vec_x", "=", "mask_down", ".", "flatten", "(", "1", ")", "# BxHW", "\n", "# concat with the template-related results", "\n", "feat_vec", "=", "torch", ".", "cat", "(", "[", "feat_vec_z", ",", "feat_vec_x", "]", ",", "dim", "=", "0", ")", "\n", "mask_vec", "=", "torch", ".", "cat", "(", "[", "mask_vec_z", ",", "mask_vec_x", "]", ",", "dim", "=", "1", ")", "\n", "pos_vec", "=", "torch", ".", "cat", "(", "[", "pos_vec_z", ",", "pos_vec_x", "]", ",", "dim", "=", "0", ")", "\n", "# get q, k, v", "\n", "q", "=", "feat_vec_x", "+", "pos_vec_x", "\n", "k", "=", "feat_vec", "+", "pos_vec", "\n", "v", "=", "feat_vec", "\n", "key_padding_mask", "=", "mask_vec", "\n", "# run the transformer encoder", "\n", "memory", "=", "self", ".", "transformer", "(", "q", ",", "k", ",", "v", ",", "key_padding_mask", "=", "key_padding_mask", ")", "\n", "fx", "=", "memory", "[", "-", "self", ".", "feat_len_s", ":", "]", ".", "permute", "(", "1", ",", "2", ",", "0", ")", ".", "contiguous", "(", ")", "# (B, C, H_x*W_x)", "\n", "fx_t", "=", "fx", ".", "view", "(", "*", "fx", ".", "shape", "[", ":", "2", "]", ",", "self", ".", "feat_sz_s", ",", "self", ".", "feat_sz_s", ")", ".", "contiguous", "(", ")", "# fx tensor 4D (B, C, H_x, W_x)", "\n", "# run the corner head", "\n", "outputs_coord", "=", "box_xyxy_to_cxcywh", "(", "self", ".", "box_head", "(", "fx_t", ")", ")", "\n", "return", "outputs_coord", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_complete.parse_args": [[20, 26], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.parse_args"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.parse_args"], ["def", "parse_args", "(", ")", ":", "\n", "    ", "parser", "=", "argparse", ".", "ArgumentParser", "(", "description", "=", "'Parse args for training'", ")", "\n", "parser", ".", "add_argument", "(", "'--script'", ",", "type", "=", "str", ",", "default", "=", "'stark_lightning_X_trt'", ",", "help", "=", "'script name'", ")", "\n", "parser", ".", "add_argument", "(", "'--config'", ",", "type", "=", "str", ",", "default", "=", "'baseline_rephead_4_lite_search5'", ",", "help", "=", "'yaml configure file name'", ")", "\n", "args", "=", "parser", ".", "parse_args", "(", ")", "\n", "return", "args", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_complete.get_data": [[28, 35], ["torch.randn", "torch.randn", "torch.randn", "torch.randn", "torch.randn", "torch.randn", "torch.randn", "torch.randn", "torch.randn", "torch.randn", "torch.randn", "torch.randn", "torch.rand", "torch.rand", "torch.rand", "torch.rand", "torch.rand", "torch.rand", "torch.rand", "torch.rand"], "function", ["None"], ["", "def", "get_data", "(", "bs", "=", "1", ",", "sz_x", "=", "256", ",", "hw_z", "=", "64", ",", "c", "=", "256", ")", ":", "\n", "    ", "img_x", "=", "torch", ".", "randn", "(", "bs", ",", "3", ",", "sz_x", ",", "sz_x", ",", "requires_grad", "=", "True", ")", "\n", "mask_x", "=", "torch", ".", "rand", "(", "bs", ",", "sz_x", ",", "sz_x", ",", "requires_grad", "=", "True", ")", ">", "0.5", "\n", "feat_vec_z", "=", "torch", ".", "randn", "(", "hw_z", ",", "bs", ",", "c", ",", "requires_grad", "=", "True", ")", "# HWxBxC", "\n", "mask_vec_z", "=", "torch", ".", "rand", "(", "bs", ",", "hw_z", ",", "requires_grad", "=", "True", ")", ">", "0.5", "# BxHW", "\n", "pos_vec_z", "=", "torch", ".", "randn", "(", "hw_z", ",", "bs", ",", "c", ",", "requires_grad", "=", "True", ")", "# HWxBxC", "\n", "return", "img_x", ",", "mask_x", ",", "feat_vec_z", ",", "mask_vec_z", ",", "pos_vec_z", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_complete.to_numpy": [[76, 78], ["tensor.detach().cpu().numpy", "tensor.cpu().numpy", "tensor.detach().cpu", "tensor.cpu", "tensor.detach"], "function", ["None"], ["", "", "def", "to_numpy", "(", "tensor", ")", ":", "\n", "    ", "return", "tensor", ".", "detach", "(", ")", ".", "cpu", "(", ")", ".", "numpy", "(", ")", "if", "tensor", ".", "requires_grad", "else", "tensor", ".", "cpu", "(", ")", ".", "numpy", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.create_default_local_file.parse_args": [[8, 15], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.parse_args"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.parse_args"], ["def", "parse_args", "(", ")", ":", "\n", "    ", "parser", "=", "argparse", ".", "ArgumentParser", "(", "description", "=", "'Create default local file on ITP or PAI'", ")", "\n", "parser", ".", "add_argument", "(", "\"--workspace_dir\"", ",", "type", "=", "str", ",", "required", "=", "True", ")", "# workspace dir", "\n", "parser", ".", "add_argument", "(", "\"--data_dir\"", ",", "type", "=", "str", ",", "required", "=", "True", ")", "\n", "parser", ".", "add_argument", "(", "\"--save_dir\"", ",", "type", "=", "str", ",", "required", "=", "True", ")", "\n", "args", "=", "parser", ".", "parse_args", "(", ")", "\n", "return", "args", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.profile_model_lightning_X_trt.parse_args": [[13, 25], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.parse_args"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.parse_args"], ["def", "parse_args", "(", ")", ":", "\n", "    ", "\"\"\"\n    args for training.\n    \"\"\"", "\n", "parser", "=", "argparse", ".", "ArgumentParser", "(", "description", "=", "'Parse args for training'", ")", "\n", "# for train", "\n", "parser", ".", "add_argument", "(", "'--script'", ",", "type", "=", "str", ",", "default", "=", "'stark_lightning_X_trt'", ",", "\n", "help", "=", "'training script name'", ")", "\n", "parser", ".", "add_argument", "(", "'--config'", ",", "type", "=", "str", ",", "default", "=", "'baseline_rephead_4'", ",", "help", "=", "'yaml configure file name'", ")", "\n", "args", "=", "parser", ".", "parse_args", "(", ")", "\n", "\n", "return", "args", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.profile_model_lightning_X_trt.evaluate": [[27, 45], ["thop.profile", "thop.utils.clever_format", "print", "print", "thop.profile", "thop.utils.clever_format", "print", "print", "thop.utils.clever_format", "print", "print"], "function", ["None"], ["", "def", "evaluate", "(", "model", ",", "img_x", ",", "att_x", ",", "q", ",", "k", ",", "v", ",", "key_padding_mask", ")", ":", "\n", "    ", "\"\"\"Compute FLOPs, Params, and Speed\"\"\"", "\n", "# backbone", "\n", "macs1", ",", "params1", "=", "profile", "(", "model", ",", "inputs", "=", "(", "img_x", ",", "att_x", ",", "None", ",", "None", ",", "None", ",", "None", ",", "\"backbone\"", ",", "\"search\"", ")", ",", "\n", "custom_ops", "=", "None", ",", "verbose", "=", "False", ")", "\n", "macs", ",", "params", "=", "clever_format", "(", "[", "macs1", ",", "params1", "]", ",", "\"%.3f\"", ")", "\n", "print", "(", "'backbone (search) macs is '", ",", "macs", ")", "\n", "print", "(", "'backbone params is '", ",", "params", ")", "\n", "# transformer and head", "\n", "macs2", ",", "params2", "=", "profile", "(", "model", ",", "inputs", "=", "(", "None", ",", "None", ",", "q", ",", "k", ",", "v", ",", "key_padding_mask", ",", "\"transformer\"", ",", "\"search\"", ")", ",", "\n", "custom_ops", "=", "None", ",", "verbose", "=", "False", ")", "\n", "macs", ",", "params", "=", "clever_format", "(", "[", "macs2", ",", "params2", "]", ",", "\"%.3f\"", ")", "\n", "print", "(", "'transformer and head macs is '", ",", "macs", ")", "\n", "print", "(", "'transformer and head params is '", ",", "params", ")", "\n", "# the whole model", "\n", "macs", ",", "params", "=", "clever_format", "(", "[", "macs1", "+", "macs2", ",", "params1", "+", "params2", "]", ",", "\"%.3f\"", ")", "\n", "print", "(", "'overall macs is '", ",", "macs", ")", "\n", "print", "(", "'overall params is '", ",", "params", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.profile_model_lightning_X_trt.get_data": [[47, 55], ["torch.randn", "torch.randn", "torch.randn", "torch.randn", "torch.rand", "torch.rand"], "function", ["None"], ["", "def", "get_data", "(", "bs", ",", "sz", ",", "hw_z", "=", "64", ",", "hw_x", "=", "256", ",", "c", "=", "256", ")", ":", "\n", "    ", "img_patch", "=", "torch", ".", "randn", "(", "bs", ",", "3", ",", "sz", ",", "sz", ")", "\n", "att_mask", "=", "torch", ".", "rand", "(", "bs", ",", "sz", ",", "sz", ")", ">", "0.5", "\n", "q", "=", "torch", ".", "randn", "(", "hw_x", ",", "bs", ",", "c", ")", "\n", "k", "=", "torch", ".", "randn", "(", "hw_z", "+", "hw_x", ",", "bs", ",", "c", ")", "\n", "v", "=", "torch", ".", "randn", "(", "hw_z", "+", "hw_x", ",", "bs", ",", "c", ")", "\n", "key_padding_mask", "=", "torch", ".", "rand", "(", "bs", ",", "hw_z", "+", "hw_x", ")", ">", "0.5", "\n", "return", "img_patch", ",", "att_mask", ",", "q", ",", "k", ",", "v", ",", "key_padding_mask", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.analysis_results_ITP.parse_args": [[7, 19], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.parse_args"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.parse_args"], ["def", "parse_args", "(", ")", ":", "\n", "    ", "\"\"\"\n    args for evaluation.\n    \"\"\"", "\n", "parser", "=", "argparse", ".", "ArgumentParser", "(", "description", "=", "'Parse args for training'", ")", "\n", "# for train", "\n", "parser", ".", "add_argument", "(", "'--script'", ",", "type", "=", "str", ",", "help", "=", "'training script name'", ")", "\n", "parser", ".", "add_argument", "(", "'--config'", ",", "type", "=", "str", ",", "default", "=", "'baseline'", ",", "help", "=", "'yaml configure file name'", ")", "\n", "\n", "args", "=", "parser", ".", "parse_args", "(", ")", "\n", "\n", "return", "args", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.video_demo.run_video": [[12, 21], ["lib.test.evaluation.Tracker", "lib.test.evaluation.Tracker.run_video"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.video_demo.run_video"], ["def", "run_video", "(", "tracker_name", ",", "tracker_param", ",", "videofile", ",", "optional_box", "=", "None", ",", "debug", "=", "None", ",", "save_results", "=", "False", ")", ":", "\n", "    ", "\"\"\"Run the tracker on your webcam.\n    args:\n        tracker_name: Name of tracking method.\n        tracker_param: Name of parameter file.\n        debug: Debug level.\n    \"\"\"", "\n", "tracker", "=", "Tracker", "(", "tracker_name", ",", "tracker_param", ",", "\"video\"", ")", "\n", "tracker", ".", "run_video", "(", "videofilepath", "=", "videofile", ",", "optional_box", "=", "optional_box", ",", "debug", "=", "debug", ",", "save_results", "=", "save_results", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.video_demo.main": [[23, 36], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.set_defaults", "argparse.ArgumentParser.parse_args", "video_demo.run_video"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.parse_args", "home.repos.pwc.inspect_result.researchmm_Stark.tracking.video_demo.run_video"], ["", "def", "main", "(", ")", ":", "\n", "    ", "parser", "=", "argparse", ".", "ArgumentParser", "(", "description", "=", "'Run the tracker on your webcam.'", ")", "\n", "parser", ".", "add_argument", "(", "'tracker_name'", ",", "type", "=", "str", ",", "help", "=", "'Name of tracking method.'", ")", "\n", "parser", ".", "add_argument", "(", "'tracker_param'", ",", "type", "=", "str", ",", "help", "=", "'Name of parameter file.'", ")", "\n", "parser", ".", "add_argument", "(", "'videofile'", ",", "type", "=", "str", ",", "help", "=", "'path to a video file.'", ")", "\n", "parser", ".", "add_argument", "(", "'--optional_box'", ",", "type", "=", "float", ",", "default", "=", "None", ",", "nargs", "=", "\"+\"", ",", "help", "=", "'optional_box with format x y w h.'", ")", "\n", "parser", ".", "add_argument", "(", "'--debug'", ",", "type", "=", "int", ",", "default", "=", "0", ",", "help", "=", "'Debug level.'", ")", "\n", "parser", ".", "add_argument", "(", "'--save_results'", ",", "dest", "=", "'save_results'", ",", "action", "=", "'store_true'", ",", "help", "=", "'Save bounding boxes'", ")", "\n", "parser", ".", "set_defaults", "(", "save_results", "=", "False", ")", "\n", "\n", "args", "=", "parser", ".", "parse_args", "(", ")", "\n", "\n", "run_video", "(", "args", ".", "tracker_name", ",", "args", ".", "tracker_param", ",", "args", ".", "videofile", ",", "args", ".", "optional_box", ",", "args", ".", "debug", ",", "args", ".", "save_results", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.pre_read_datasets.parse_args": [[10, 20], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.parse_args"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.parse_args"], ["def", "parse_args", "(", ")", ":", "\n", "    ", "\"\"\"\n    args for training.\n    \"\"\"", "\n", "parser", "=", "argparse", ".", "ArgumentParser", "(", "description", "=", "'Parse args for training'", ")", "\n", "parser", ".", "add_argument", "(", "'--data_dir'", ",", "type", "=", "str", ",", "help", "=", "'directory where lmdb data is located'", ")", "\n", "parser", ".", "add_argument", "(", "'--dataset_str'", ",", "type", "=", "str", ",", "help", "=", "\"which datasets to use\"", ")", "\n", "args", "=", "parser", ".", "parse_args", "(", ")", "\n", "\n", "return", "args", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.pre_read_datasets.get_trknet_dict": [[22, 32], ["open", "json.loads", "os.path.join", "f.read"], "function", ["None"], ["", "def", "get_trknet_dict", "(", "trknet_dir", ")", ":", "\n", "    ", "with", "open", "(", "os", ".", "path", ".", "join", "(", "trknet_dir", ",", "\"seq_list.json\"", ")", ",", "\"r\"", ")", "as", "f", ":", "\n", "        ", "seq_list", "=", "json", ".", "loads", "(", "f", ".", "read", "(", ")", ")", "\n", "", "res_dict", "=", "{", "}", "\n", "set_idx_pre", "=", "-", "1", "\n", "for", "set_idx", ",", "seq_name", "in", "seq_list", ":", "\n", "        ", "if", "set_idx", "!=", "set_idx_pre", ":", "\n", "            ", "res_dict", "[", "set_idx", "]", "=", "\"anno/%s.txt\"", "%", "seq_name", "\n", "set_idx_pre", "=", "set_idx", "\n", "", "", "return", "res_dict", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.pre_read_datasets.target": [[34, 36], ["lib.utils.lmdb_utils.decode_str"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.lmdb_utils.decode_str"], ["", "def", "target", "(", "lmdb_dir", ",", "key_name", ")", ":", "\n", "    ", "_", "=", "decode_str", "(", "lmdb_dir", ",", "key_name", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.profile_model.parse_args": [[15, 27], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.parse_args"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.parse_args"], ["def", "parse_args", "(", ")", ":", "\n", "    ", "\"\"\"\n    args for training.\n    \"\"\"", "\n", "parser", "=", "argparse", ".", "ArgumentParser", "(", "description", "=", "'Parse args for training'", ")", "\n", "# for train", "\n", "parser", ".", "add_argument", "(", "'--script'", ",", "type", "=", "str", ",", "default", "=", "'stark_st2'", ",", "choices", "=", "[", "'stark_s'", ",", "'stark_st2'", "]", ",", "\n", "help", "=", "'training script name'", ")", "\n", "parser", ".", "add_argument", "(", "'--config'", ",", "type", "=", "str", ",", "default", "=", "'baseline_R101'", ",", "help", "=", "'yaml configure file name'", ")", "\n", "args", "=", "parser", ".", "parse_args", "(", ")", "\n", "\n", "return", "args", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.profile_model.get_complexity_MHA": [[29, 43], ["query.size", "key.size", "torch.DoubleTensor", "int"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size"], ["", "def", "get_complexity_MHA", "(", "m", ":", "nn", ".", "MultiheadAttention", ",", "x", ",", "y", ")", ":", "\n", "    ", "\"\"\"(L, B, D): sequence length, batch size, dimension\"\"\"", "\n", "d_mid", "=", "m", ".", "embed_dim", "\n", "query", ",", "key", ",", "value", "=", "x", "[", "0", "]", ",", "x", "[", "1", "]", ",", "x", "[", "2", "]", "\n", "Lq", ",", "batch", ",", "d_inp", "=", "query", ".", "size", "(", ")", "\n", "Lk", "=", "key", ".", "size", "(", "0", ")", "\n", "\"\"\"compute flops\"\"\"", "\n", "total_ops", "=", "0", "\n", "# projection of Q, K, V", "\n", "total_ops", "+=", "d_inp", "*", "d_mid", "*", "Lq", "*", "batch", "# query", "\n", "total_ops", "+=", "d_inp", "*", "d_mid", "*", "Lk", "*", "batch", "*", "2", "# key and value", "\n", "# compute attention", "\n", "total_ops", "+=", "Lq", "*", "Lk", "*", "d_mid", "*", "2", "\n", "m", ".", "total_ops", "+=", "torch", ".", "DoubleTensor", "(", "[", "int", "(", "total_ops", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.profile_model.evaluate": [[45, 90], ["thop.profile", "thop.utils.clever_format", "print", "print", "thop.profile", "thop.utils.clever_format", "print", "print", "thop.utils.clever_format", "print", "print", "print", "torch.no_grad", "range", "time.time", "range", "time.time", "print", "range", "time.time", "range", "time.time", "print", "model", "model", "model", "model", "model", "model"], "function", ["None"], ["", "def", "evaluate", "(", "model", ",", "search", ",", "seq_dict", ",", "run_box_head", ",", "run_cls_head", ")", ":", "\n", "    ", "\"\"\"Compute FLOPs, Params, and Speed\"\"\"", "\n", "custom_ops", "=", "{", "nn", ".", "MultiheadAttention", ":", "get_complexity_MHA", "}", "\n", "# # backbone", "\n", "macs1", ",", "params1", "=", "profile", "(", "model", ",", "inputs", "=", "(", "search", ",", "None", ",", "\"backbone\"", ",", "False", ",", "False", ")", ",", "\n", "custom_ops", "=", "None", ",", "verbose", "=", "False", ")", "\n", "macs", ",", "params", "=", "clever_format", "(", "[", "macs1", ",", "params1", "]", ",", "\"%.3f\"", ")", "\n", "print", "(", "'backbone (search) macs is '", ",", "macs", ")", "\n", "print", "(", "'backbone params is '", ",", "params", ")", "\n", "# transformer and head", "\n", "macs2", ",", "params2", "=", "profile", "(", "model", ",", "inputs", "=", "(", "None", ",", "seq_dict", ",", "\"transformer\"", ",", "True", ",", "True", ")", ",", "\n", "custom_ops", "=", "custom_ops", ",", "verbose", "=", "False", ")", "\n", "macs", ",", "params", "=", "clever_format", "(", "[", "macs2", ",", "params2", "]", ",", "\"%.3f\"", ")", "\n", "print", "(", "'transformer and head macs is '", ",", "macs", ")", "\n", "print", "(", "'transformer and head params is '", ",", "params", ")", "\n", "# the whole model", "\n", "macs", ",", "params", "=", "clever_format", "(", "[", "macs1", "+", "macs2", ",", "params1", "+", "params2", "]", ",", "\"%.3f\"", ")", "\n", "print", "(", "'overall macs is '", ",", "macs", ")", "\n", "print", "(", "'overall params is '", ",", "params", ")", "\n", "\n", "'''Speed Test'''", "\n", "T_w", "=", "10", "\n", "T_t", "=", "100", "\n", "print", "(", "\"testing speed ...\"", ")", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "# overall", "\n", "        ", "for", "i", "in", "range", "(", "T_w", ")", ":", "\n", "            ", "_", "=", "model", "(", "search", ",", "None", ",", "\"backbone\"", ",", "run_box_head", ",", "run_cls_head", ")", "\n", "_", "=", "model", "(", "None", ",", "seq_dict", ",", "\"transformer\"", ",", "run_box_head", ",", "run_cls_head", ")", "\n", "", "start", "=", "time", ".", "time", "(", ")", "\n", "for", "i", "in", "range", "(", "T_t", ")", ":", "\n", "            ", "_", "=", "model", "(", "search", ",", "None", ",", "\"backbone\"", ",", "run_box_head", ",", "run_cls_head", ")", "\n", "_", "=", "model", "(", "None", ",", "seq_dict", ",", "\"transformer\"", ",", "run_box_head", ",", "run_cls_head", ")", "\n", "", "end", "=", "time", ".", "time", "(", ")", "\n", "avg_lat", "=", "(", "end", "-", "start", ")", "/", "T_t", "\n", "print", "(", "\"The average overall latency is %.2f ms\"", "%", "(", "avg_lat", "*", "1000", ")", ")", "\n", "# backbone", "\n", "for", "i", "in", "range", "(", "T_w", ")", ":", "\n", "            ", "_", "=", "model", "(", "search", ",", "None", ",", "\"backbone\"", ",", "run_box_head", ",", "run_cls_head", ")", "\n", "", "start", "=", "time", ".", "time", "(", ")", "\n", "for", "i", "in", "range", "(", "T_t", ")", ":", "\n", "            ", "_", "=", "model", "(", "search", ",", "None", ",", "\"backbone\"", ",", "run_box_head", ",", "run_cls_head", ")", "\n", "", "end", "=", "time", ".", "time", "(", ")", "\n", "avg_lat", "=", "(", "end", "-", "start", ")", "/", "T_t", "\n", "print", "(", "\"The average backbone latency is %.2f ms\"", "%", "(", "avg_lat", "*", "1000", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.profile_model.get_data": [[92, 96], ["torch.randn", "lib.utils.misc.NestedTensor", "torch.rand"], "function", ["None"], ["", "", "def", "get_data", "(", "bs", ",", "sz", ")", ":", "\n", "    ", "img_patch", "=", "torch", ".", "randn", "(", "bs", ",", "3", ",", "sz", ",", "sz", ")", "\n", "att_mask", "=", "torch", ".", "rand", "(", "bs", ",", "sz", ",", "sz", ")", ">", "0.5", "\n", "return", "NestedTensor", "(", "img_patch", ",", "att_mask", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.train.parse_args": [[5, 28], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.parse_args"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.parse_args"], ["def", "parse_args", "(", ")", ":", "\n", "    ", "\"\"\"\n    args for training.\n    \"\"\"", "\n", "parser", "=", "argparse", ".", "ArgumentParser", "(", "description", "=", "'Parse args for training'", ")", "\n", "# for train", "\n", "parser", ".", "add_argument", "(", "'--script'", ",", "type", "=", "str", ",", "help", "=", "'training script name'", ")", "\n", "parser", ".", "add_argument", "(", "'--config'", ",", "type", "=", "str", ",", "default", "=", "'baseline'", ",", "help", "=", "'yaml configure file name'", ")", "\n", "parser", ".", "add_argument", "(", "'--save_dir'", ",", "type", "=", "str", ",", "help", "=", "'root directory to save checkpoints, logs, and tensorboard'", ")", "\n", "parser", ".", "add_argument", "(", "'--mode'", ",", "type", "=", "str", ",", "choices", "=", "[", "\"single\"", ",", "\"multiple\"", "]", ",", "default", "=", "\"multiple\"", ",", "\n", "help", "=", "\"train on single gpu or multiple gpus\"", ")", "\n", "parser", ".", "add_argument", "(", "'--nproc_per_node'", ",", "type", "=", "int", ",", "help", "=", "\"number of GPUs per node\"", ")", "# specify when mode is multiple", "\n", "parser", ".", "add_argument", "(", "'--use_lmdb'", ",", "type", "=", "int", ",", "choices", "=", "[", "0", ",", "1", "]", ",", "default", "=", "0", ")", "# whether datasets are in lmdb format", "\n", "parser", ".", "add_argument", "(", "'--script_prv'", ",", "type", "=", "str", ",", "help", "=", "'training script name'", ")", "\n", "parser", ".", "add_argument", "(", "'--config_prv'", ",", "type", "=", "str", ",", "default", "=", "'baseline'", ",", "help", "=", "'yaml configure file name'", ")", "\n", "# for knowledge distillation", "\n", "parser", ".", "add_argument", "(", "'--distill'", ",", "type", "=", "int", ",", "choices", "=", "[", "0", ",", "1", "]", ",", "default", "=", "0", ")", "# whether to use knowledge distillation", "\n", "parser", ".", "add_argument", "(", "'--script_teacher'", ",", "type", "=", "str", ",", "help", "=", "'teacher script name'", ")", "\n", "parser", ".", "add_argument", "(", "'--config_teacher'", ",", "type", "=", "str", ",", "help", "=", "'teacher yaml configure file name'", ")", "\n", "\n", "args", "=", "parser", ".", "parse_args", "(", ")", "\n", "\n", "return", "args", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.train.main": [[30, 46], ["train.parse_args", "os.system", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.parse_args"], ["", "def", "main", "(", ")", ":", "\n", "    ", "args", "=", "parse_args", "(", ")", "\n", "if", "args", ".", "mode", "==", "\"single\"", ":", "\n", "        ", "train_cmd", "=", "\"python lib/train/run_training.py --script %s --config %s --save_dir %s --use_lmdb %d \"", "\"--script_prv %s --config_prv %s --distill %d --script_teacher %s --config_teacher %s\"", "%", "(", "args", ".", "script", ",", "args", ".", "config", ",", "args", ".", "save_dir", ",", "args", ".", "use_lmdb", ",", "args", ".", "script_prv", ",", "args", ".", "config_prv", ",", "\n", "args", ".", "distill", ",", "args", ".", "script_teacher", ",", "args", ".", "config_teacher", ")", "\n", "", "elif", "args", ".", "mode", "==", "\"multiple\"", ":", "\n", "        ", "train_cmd", "=", "\"python -m torch.distributed.launch --nproc_per_node %d lib/train/run_training.py \"", "\"--script %s --config %s --save_dir %s --use_lmdb %d --script_prv %s --config_prv %s  \"", "\"--distill %d --script_teacher %s --config_teacher %s\"", "%", "(", "args", ".", "nproc_per_node", ",", "args", ".", "script", ",", "args", ".", "config", ",", "args", ".", "save_dir", ",", "args", ".", "use_lmdb", ",", "args", ".", "script_prv", ",", "\n", "args", ".", "config_prv", ",", "args", ".", "distill", ",", "args", ".", "script_teacher", ",", "args", ".", "config_teacher", ")", "\n", "", "else", ":", "\n", "        ", "raise", "ValueError", "(", "\"mode should be 'single' or 'multiple'.\"", ")", "\n", "", "os", ".", "system", "(", "train_cmd", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking._init_paths.add_path": [[9, 12], ["sys.path.insert"], "function", ["None"], ["def", "add_path", "(", "path", ")", ":", "\n", "    ", "if", "path", "not", "in", "sys", ".", "path", ":", "\n", "        ", "sys", ".", "path", ".", "insert", "(", "0", ",", "path", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.Backbone_Bottleneck_PE.__init__": [[33, 38], ["torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "backbone", ",", "bottleneck", ",", "position_embed", ")", ":", "\n", "        ", "super", "(", "Backbone_Bottleneck_PE", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "backbone", "=", "backbone", "\n", "self", ".", "bottleneck", "=", "bottleneck", "\n", "self", ".", "position_embed", "=", "position_embed", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.Backbone_Bottleneck_PE.forward": [[39, 48], ["ORT_lightning_X_trt_backbone_bottleneck_pe.Backbone_Bottleneck_PE.bottleneck", "ORT_lightning_X_trt_backbone_bottleneck_pe.Backbone_Bottleneck_PE.position_embed", "ORT_lightning_X_trt_backbone_bottleneck_pe.Backbone_Bottleneck_PE.flatten().permute", "ORT_lightning_X_trt_backbone_bottleneck_pe.Backbone_Bottleneck_PE.flatten().permute", "mask_down.flatten", "ORT_lightning_X_trt_backbone_bottleneck_pe.Backbone_Bottleneck_PE.backbone", "torch.interpolate().to", "torch.interpolate().to", "torch.interpolate().to", "torch.interpolate().to", "ORT_lightning_X_trt_backbone_bottleneck_pe.Backbone_Bottleneck_PE.flatten", "ORT_lightning_X_trt_backbone_bottleneck_pe.Backbone_Bottleneck_PE.flatten", "torch.interpolate", "torch.interpolate", "torch.interpolate", "torch.interpolate", "mask[].float"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], ["", "def", "forward", "(", "self", ",", "img", ":", "torch", ".", "Tensor", ",", "mask", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "feat", "=", "self", ".", "bottleneck", "(", "self", ".", "backbone", "(", "img", ")", ")", "# BxCxHxW", "\n", "mask_down", "=", "F", ".", "interpolate", "(", "mask", "[", "None", "]", ".", "float", "(", ")", ",", "size", "=", "feat", ".", "shape", "[", "-", "2", ":", "]", ")", ".", "to", "(", "torch", ".", "bool", ")", "[", "0", "]", "\n", "pos_embed", "=", "self", ".", "position_embed", "(", "1", ")", "# 1 is the batch-size. output size is BxCxHxW", "\n", "# adjust shape", "\n", "feat_vec", "=", "feat", ".", "flatten", "(", "2", ")", ".", "permute", "(", "2", ",", "0", ",", "1", ")", "# HWxBxC", "\n", "pos_embed_vec", "=", "pos_embed", ".", "flatten", "(", "2", ")", ".", "permute", "(", "2", ",", "0", ",", "1", ")", "# HWxBxC", "\n", "mask_vec", "=", "mask_down", ".", "flatten", "(", "1", ")", "# BxHW", "\n", "return", "feat_vec", ",", "mask_vec", ",", "pos_embed_vec", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.parse_args": [[18, 24], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.parse_args"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.parse_args"], ["def", "parse_args", "(", ")", ":", "\n", "    ", "parser", "=", "argparse", ".", "ArgumentParser", "(", "description", "=", "'Parse args for training'", ")", "\n", "parser", ".", "add_argument", "(", "'--script'", ",", "type", "=", "str", ",", "default", "=", "'stark_lightning_X_trt'", ",", "help", "=", "'script name'", ")", "\n", "parser", ".", "add_argument", "(", "'--config'", ",", "type", "=", "str", ",", "default", "=", "'baseline_rephead_4_lite_search5'", ",", "help", "=", "'yaml configure file name'", ")", "\n", "args", "=", "parser", ".", "parse_args", "(", ")", "\n", "return", "args", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.get_data": [[26, 30], ["torch.randn", "torch.randn", "torch.randn", "torch.randn", "torch.rand", "torch.rand", "torch.rand", "torch.rand"], "function", ["None"], ["", "def", "get_data", "(", "bs", ",", "sz", ")", ":", "\n", "    ", "img_patch", "=", "torch", ".", "randn", "(", "bs", ",", "3", ",", "sz", ",", "sz", ",", "requires_grad", "=", "True", ")", "\n", "mask", "=", "torch", ".", "rand", "(", "bs", ",", "sz", ",", "sz", ",", "requires_grad", "=", "True", ")", ">", "0.5", "\n", "return", "img_patch", ",", "mask", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.to_numpy": [[50, 52], ["tensor.detach().cpu().numpy", "tensor.cpu().numpy", "tensor.detach().cpu", "tensor.cpu", "tensor.detach"], "function", ["None"], ["", "", "def", "to_numpy", "(", "tensor", ")", ":", "\n", "    ", "return", "tensor", ".", "detach", "(", ")", ".", "cpu", "(", ")", ".", "numpy", "(", ")", "if", "tensor", ".", "requires_grad", "else", "tensor", ".", "cpu", "(", ")", ".", "numpy", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.test.run_tracker": [[14, 35], ["lib.test.evaluation.get_dataset", "lib.test.evaluation.running.run_dataset", "lib.test.evaluation.tracker.Tracker"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.datasets.get_dataset", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.running.run_dataset"], ["def", "run_tracker", "(", "tracker_name", ",", "tracker_param", ",", "run_id", "=", "None", ",", "dataset_name", "=", "'otb'", ",", "sequence", "=", "None", ",", "debug", "=", "0", ",", "threads", "=", "0", ",", "\n", "num_gpus", "=", "8", ")", ":", "\n", "    ", "\"\"\"Run tracker on sequence or dataset.\n    args:\n        tracker_name: Name of tracking method.\n        tracker_param: Name of parameter file.\n        run_id: The run id.\n        dataset_name: Name of dataset (otb, nfs, uav, tpl, vot, tn, gott, gotv, lasot).\n        sequence: Sequence number or name.\n        debug: Debug level.\n        threads: Number of threads.\n    \"\"\"", "\n", "\n", "dataset", "=", "get_dataset", "(", "dataset_name", ")", "\n", "\n", "if", "sequence", "is", "not", "None", ":", "\n", "        ", "dataset", "=", "[", "dataset", "[", "sequence", "]", "]", "\n", "\n", "", "trackers", "=", "[", "Tracker", "(", "tracker_name", ",", "tracker_param", ",", "dataset_name", ",", "run_id", ")", "]", "\n", "\n", "run_dataset", "(", "dataset", ",", "trackers", ",", "debug", ",", "threads", ",", "num_gpus", "=", "num_gpus", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.test.main": [[37, 57], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.parse_args", "test.run_tracker", "int"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.parse_args", "home.repos.pwc.inspect_result.researchmm_Stark.tracking.test.run_tracker"], ["", "def", "main", "(", ")", ":", "\n", "    ", "parser", "=", "argparse", ".", "ArgumentParser", "(", "description", "=", "'Run tracker on sequence or dataset.'", ")", "\n", "parser", ".", "add_argument", "(", "'tracker_name'", ",", "type", "=", "str", ",", "help", "=", "'Name of tracking method.'", ")", "\n", "parser", ".", "add_argument", "(", "'tracker_param'", ",", "type", "=", "str", ",", "help", "=", "'Name of config file.'", ")", "\n", "parser", ".", "add_argument", "(", "'--runid'", ",", "type", "=", "int", ",", "default", "=", "None", ",", "help", "=", "'The run id.'", ")", "\n", "parser", ".", "add_argument", "(", "'--dataset_name'", ",", "type", "=", "str", ",", "default", "=", "'otb'", ",", "help", "=", "'Name of dataset (otb, nfs, uav, tpl, vot, tn, gott, gotv, lasot).'", ")", "\n", "parser", ".", "add_argument", "(", "'--sequence'", ",", "type", "=", "str", ",", "default", "=", "None", ",", "help", "=", "'Sequence number or name.'", ")", "\n", "parser", ".", "add_argument", "(", "'--debug'", ",", "type", "=", "int", ",", "default", "=", "0", ",", "help", "=", "'Debug level.'", ")", "\n", "parser", ".", "add_argument", "(", "'--threads'", ",", "type", "=", "int", ",", "default", "=", "0", ",", "help", "=", "'Number of threads.'", ")", "\n", "parser", ".", "add_argument", "(", "'--num_gpus'", ",", "type", "=", "int", ",", "default", "=", "8", ")", "\n", "\n", "args", "=", "parser", ".", "parse_args", "(", ")", "\n", "\n", "try", ":", "\n", "        ", "seq_name", "=", "int", "(", "args", ".", "sequence", ")", "\n", "", "except", ":", "\n", "        ", "seq_name", "=", "args", ".", "sequence", "\n", "\n", "", "run_tracker", "(", "args", ".", "tracker_name", ",", "args", ".", "tracker_param", ",", "args", ".", "runid", ",", "args", ".", "dataset_name", ",", "seq_name", ",", "args", ".", "debug", ",", "\n", "args", ".", "threads", ",", "num_gpus", "=", "args", ".", "num_gpus", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.download_pytracking_results._download_file": [[52, 55], ["gdown.download"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.download"], ["def", "_download_file", "(", "file_id", ",", "path", ")", ":", "\n", "    ", "link", "=", "'https://drive.google.com/uc?id='", "+", "file_id", "\n", "gdown", ".", "download", "(", "link", ",", "path", ",", "quiet", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.download_pytracking_results.download_results": [[57, 114], ["print", "os.makedirs", "isinstance", "trackers.items", "isinstance", "os.path.join", "Exception", "os.path.exists", "os.makedirs", "common_link_dict[].items", "isinstance", "list", "list", "print", "download_pytracking_results._download_file", "Exception", "pytracking_results_link_dict.keys", "external_results_link_dict.keys", "os.path.join", "common_link_dict[].items", "pytracking_results_link_dict.keys", "Exception", "external_results_link_dict.keys", "re.match", "print", "download_pytracking_results._download_file", "os.path.join"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.util_scripts.download_results._download_file", "home.repos.pwc.inspect_result.researchmm_Stark.util_scripts.download_results._download_file"], ["", "def", "download_results", "(", "download_path", ",", "trackers", "=", "'pytracking'", ")", ":", "\n", "    ", "\"\"\"\n    Script to automatically download tracker results for PyTracking.\n    args:\n        download_path - Directory where the zipped results are downloaded\n        trackers - Tracker results which are to be downloaded.\n                   If set to 'pytracking', results for all pytracking based trackers will be downloaded.\n                   If set to 'external', results for available external trackers will be downloaded.\n                   If set to 'all', all available results are downloaded.\n                   If set to a name of a tracker (e.g. atom), all results for that tracker are downloaded.\n                   Otherwise, it can be set to a dict, where the keys are the names of the trackers for which results are\n                   downloaded. The value can be set to either 'all', in which case all available results for the\n                    tracker are downloaded. Else the value should be a list of parameter file names.\n    \"\"\"", "\n", "print", "(", "'Using download path '", "'{}'", "''", ".", "format", "(", "download_path", ")", ")", "\n", "\n", "os", ".", "makedirs", "(", "download_path", ",", "exist_ok", "=", "True", ")", "\n", "\n", "if", "isinstance", "(", "trackers", ",", "str", ")", ":", "\n", "        ", "if", "trackers", "==", "'all'", ":", "\n", "            ", "all_trackers", "=", "list", "(", "pytracking_results_link_dict", ".", "keys", "(", ")", ")", "+", "list", "(", "external_results_link_dict", ".", "keys", "(", ")", ")", "\n", "trackers", "=", "{", "k", ":", "'all'", "for", "k", "in", "all_trackers", "}", "\n", "", "elif", "trackers", "==", "'pytracking'", ":", "\n", "            ", "trackers", "=", "{", "k", ":", "'all'", "for", "k", "in", "pytracking_results_link_dict", ".", "keys", "(", ")", "}", "\n", "", "elif", "trackers", "==", "'external'", ":", "\n", "            ", "trackers", "=", "{", "k", ":", "'all'", "for", "k", "in", "external_results_link_dict", ".", "keys", "(", ")", "}", "\n", "", "elif", "trackers", "in", "pytracking_results_link_dict", "or", "trackers", "in", "external_results_link_dict", ":", "\n", "            ", "trackers", "=", "{", "trackers", ":", "'all'", "}", "\n", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "'tracker_list must be set to '", "'all'", "', a tracker name, or be a dict'", ")", "\n", "", "", "elif", "isinstance", "(", "trackers", ",", "dict", ")", ":", "\n", "        ", "pass", "\n", "", "else", ":", "\n", "        ", "raise", "Exception", "(", "'tracker_list must be set to '", "'all'", "', or be a dict'", ")", "\n", "\n", "", "common_link_dict", "=", "pytracking_results_link_dict", "\n", "# for k, v in external_results_link_dict.items():", "\n", "#     common_link_dict[k] = v", "\n", "\n", "for", "trk", ",", "runfiles", "in", "trackers", ".", "items", "(", ")", ":", "\n", "        ", "trk_path", "=", "os", ".", "path", ".", "join", "(", "download_path", ",", "trk", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "trk_path", ")", ":", "\n", "            ", "os", ".", "makedirs", "(", "trk_path", ")", "\n", "\n", "", "if", "runfiles", "==", "'all'", ":", "\n", "            ", "for", "params", ",", "fileid", "in", "common_link_dict", "[", "trk", "]", ".", "items", "(", ")", ":", "\n", "                ", "print", "(", "'Downloading: {}/{}'", ".", "format", "(", "trk", ",", "params", ")", ")", "\n", "_download_file", "(", "fileid", ",", "os", ".", "path", ".", "join", "(", "trk_path", ",", "params", ")", ")", "\n", "", "", "elif", "isinstance", "(", "runfiles", ",", "(", "list", ",", "tuple", ")", ")", ":", "\n", "            ", "for", "p", "in", "runfiles", ":", "\n", "                ", "for", "params", ",", "fileid", "in", "common_link_dict", "[", "trk", "]", ".", "items", "(", ")", ":", "\n", "                    ", "if", "re", ".", "match", "(", "r'{}(|_(\\d\\d\\d)).zip'", ".", "format", "(", "p", ")", ",", "params", ")", "is", "not", "None", ":", "\n", "                        ", "print", "(", "'Downloading: {}/{}'", ".", "format", "(", "trk", ",", "params", ")", ")", "\n", "_download_file", "(", "fileid", ",", "os", ".", "path", ".", "join", "(", "trk_path", ",", "params", ")", ")", "\n", "\n", "", "", "", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "'tracker_list values must either be set to '", "'all'", "', or be a list of param names'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.download_pytracking_results.unpack_tracking_results": [[117, 153], ["os.listdir", "os.path.exists", "os.makedirs", "os.listdir", "lib.test.evaluation.environment.env_settings", "os.path.join", "os.path.join", "shutil.unpack_archive", "os.path.exists", "os.makedirs", "os.path.join", "os.path.join"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["", "", "", "def", "unpack_tracking_results", "(", "download_path", ",", "output_path", "=", "None", ")", ":", "\n", "    ", "\"\"\"\n    Unpacks zipped benchmark results. The directory 'download_path' should have the following structure\n    - root\n        - tracker1\n            - param1.zip\n            - param2.zip\n            .\n            .\n        - tracker2\n            - param1.zip\n            - param2.zip\n        .\n        .\n    args:\n        download_path - Path to the directory where the zipped results are stored\n        output_path - Path to the directory where the results will be unpacked. Set to env_settings().results_path\n                      by default\n    \"\"\"", "\n", "\n", "if", "output_path", "is", "None", ":", "\n", "        ", "output_path", "=", "env_settings", "(", ")", ".", "results_path", "\n", "\n", "", "if", "not", "os", ".", "path", ".", "exists", "(", "output_path", ")", ":", "\n", "        ", "os", ".", "makedirs", "(", "output_path", ")", "\n", "\n", "", "trackers", "=", "os", ".", "listdir", "(", "download_path", ")", "\n", "\n", "for", "t", "in", "trackers", ":", "\n", "        ", "runfiles", "=", "os", ".", "listdir", "(", "os", ".", "path", ".", "join", "(", "download_path", ",", "t", ")", ")", "\n", "\n", "for", "r", "in", "runfiles", ":", "\n", "            ", "save_path", "=", "os", ".", "path", ".", "join", "(", "output_path", ",", "t", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "save_path", ")", ":", "\n", "                ", "os", ".", "makedirs", "(", "save_path", ")", "\n", "", "shutil", ".", "unpack_archive", "(", "os", ".", "path", ".", "join", "(", "download_path", ",", "t", ",", "r", ")", ",", "os", ".", "path", ".", "join", "(", "save_path", ",", "r", "[", ":", "-", "4", "]", ")", ",", "'zip'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.download_pytracking_results.main": [[155, 176], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.parse_args", "download_pytracking_results.unpack_tracking_results", "download_pytracking_results.download_results", "tempfile.gettempdir"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.parse_args", "home.repos.pwc.inspect_result.researchmm_Stark.util_scripts.download_results.unpack_tracking_results", "home.repos.pwc.inspect_result.researchmm_Stark.util_scripts.download_results.download_results"], ["", "", "", "def", "main", "(", ")", ":", "\n", "    ", "parser", "=", "argparse", ".", "ArgumentParser", "(", "description", "=", "'Download and unpack zipped results'", ")", "\n", "parser", ".", "add_argument", "(", "'--tracker'", ",", "type", "=", "str", ",", "default", "=", "'pytracking'", ",", "\n", "help", "=", "'Name of tracker results to download, or \"pytracking\" (downloads results for PyTracking'", "\n", "' based trackers, or \"external\" (downloads results for external trackers) or \"all\"'", ")", "\n", "parser", ".", "add_argument", "(", "'--output_path'", ",", "type", "=", "str", ",", "default", "=", "None", ",", "\n", "help", "=", "'Path to the directory where the results will be unpacked.'", ")", "\n", "parser", ".", "add_argument", "(", "'--temp_download_path'", ",", "type", "=", "str", ",", "default", "=", "None", ",", "\n", "help", "=", "'Temporary path used for downloading the Zip files.'", ")", "\n", "parser", ".", "add_argument", "(", "'--download'", ",", "type", "=", "bool", ",", "default", "=", "True", ",", "\n", "help", "=", "'Whether to download results or unpack existing downloaded files.'", ")", "\n", "args", "=", "parser", ".", "parse_args", "(", ")", "\n", "\n", "download_path", "=", "args", ".", "temp_download_path", "\n", "if", "download_path", "is", "None", ":", "\n", "        ", "download_path", "=", "'{}/pytracking_results/'", ".", "format", "(", "tempfile", ".", "gettempdir", "(", ")", ")", "\n", "\n", "", "if", "args", ".", "download", ":", "\n", "        ", "download_results", "(", "download_path", ",", "args", ".", "tracker", ")", "\n", "\n", "", "unpack_tracking_results", "(", "download_path", ",", "args", ".", "output_path", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.DiMPnet.__init__": [[24, 33], ["torch.Module.__init__", "sorted", "isinstance", "list", "set"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["def", "__init__", "(", "self", ",", "feature_extractor", ",", "classifier", ",", "bb_regressor", ",", "classification_layer", ",", "bb_regressor_layer", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "feature_extractor", "=", "feature_extractor", "\n", "self", ".", "classifier", "=", "classifier", "\n", "self", ".", "bb_regressor", "=", "bb_regressor", "\n", "self", ".", "classification_layer", "=", "[", "classification_layer", "]", "if", "isinstance", "(", "classification_layer", ",", "str", ")", "else", "classification_layer", "\n", "self", ".", "bb_regressor_layer", "=", "bb_regressor_layer", "\n", "self", ".", "output_layers", "=", "sorted", "(", "list", "(", "set", "(", "self", ".", "classification_layer", "+", "self", ".", "bb_regressor_layer", ")", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.DiMPnet.forward": [[35, 69], ["dimpnet.DiMPnet.extract_backbone_features", "dimpnet.DiMPnet.extract_backbone_features", "dimpnet.DiMPnet.get_backbone_clf_feat", "dimpnet.DiMPnet.get_backbone_clf_feat", "dimpnet.DiMPnet.classifier", "dimpnet.DiMPnet.get_backbone_bbreg_feat", "dimpnet.DiMPnet.get_backbone_bbreg_feat", "dimpnet.DiMPnet.bb_regressor", "train_imgs.reshape", "test_imgs.reshape", "train_imgs.dim", "test_imgs.dim"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.extract_backbone_features", "home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.extract_backbone_features", "home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.DiMPnet.get_backbone_clf_feat", "home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.DiMPnet.get_backbone_clf_feat", "home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.DiMPnet.get_backbone_bbreg_feat", "home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.DiMPnet.get_backbone_bbreg_feat", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "forward", "(", "self", ",", "train_imgs", ",", "test_imgs", ",", "train_bb", ",", "test_proposals", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "\"\"\"Runs the DiMP network the way it is applied during training.\n        The forward function is ONLY used for training. Call the individual functions during tracking.\n        args:\n            train_imgs:  Train image samples (images, sequences, 3, H, W).\n            test_imgs:  Test image samples (images, sequences, 3, H, W).\n            trian_bb:  Target boxes (x,y,w,h) for the train images. Dims (images, sequences, 4).\n            test_proposals:  Proposal boxes to use for the IoUNet (bb_regressor) module.\n            *args, **kwargs:  These are passed to the classifier module.\n        returns:\n            test_scores:  Classification scores on the test samples.\n            iou_pred:  Predicted IoU scores for the test_proposals.\"\"\"", "\n", "\n", "assert", "train_imgs", ".", "dim", "(", ")", "==", "5", "and", "test_imgs", ".", "dim", "(", ")", "==", "5", ",", "'Expect 5 dimensional inputs'", "\n", "\n", "# Extract backbone features", "\n", "train_feat", "=", "self", ".", "extract_backbone_features", "(", "train_imgs", ".", "reshape", "(", "-", "1", ",", "*", "train_imgs", ".", "shape", "[", "-", "3", ":", "]", ")", ")", "\n", "test_feat", "=", "self", ".", "extract_backbone_features", "(", "test_imgs", ".", "reshape", "(", "-", "1", ",", "*", "test_imgs", ".", "shape", "[", "-", "3", ":", "]", ")", ")", "\n", "\n", "# Classification features", "\n", "train_feat_clf", "=", "self", ".", "get_backbone_clf_feat", "(", "train_feat", ")", "\n", "test_feat_clf", "=", "self", ".", "get_backbone_clf_feat", "(", "test_feat", ")", "\n", "\n", "# Run classifier module", "\n", "target_scores", "=", "self", ".", "classifier", "(", "train_feat_clf", ",", "test_feat_clf", ",", "train_bb", ",", "*", "args", ",", "**", "kwargs", ")", "\n", "\n", "# Get bb_regressor features", "\n", "train_feat_iou", "=", "self", ".", "get_backbone_bbreg_feat", "(", "train_feat", ")", "\n", "test_feat_iou", "=", "self", ".", "get_backbone_bbreg_feat", "(", "test_feat", ")", "\n", "\n", "# Run the IoUNet module", "\n", "iou_pred", "=", "self", ".", "bb_regressor", "(", "train_feat_iou", ",", "test_feat_iou", ",", "train_bb", ",", "test_proposals", ")", "\n", "\n", "return", "target_scores", ",", "iou_pred", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.DiMPnet.get_backbone_clf_feat": [[70, 75], ["collections.OrderedDict", "len"], "methods", ["None"], ["", "def", "get_backbone_clf_feat", "(", "self", ",", "backbone_feat", ")", ":", "\n", "        ", "feat", "=", "OrderedDict", "(", "{", "l", ":", "backbone_feat", "[", "l", "]", "for", "l", "in", "self", ".", "classification_layer", "}", ")", "\n", "if", "len", "(", "self", ".", "classification_layer", ")", "==", "1", ":", "\n", "            ", "return", "feat", "[", "self", ".", "classification_layer", "[", "0", "]", "]", "\n", "", "return", "feat", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.DiMPnet.get_backbone_bbreg_feat": [[76, 78], ["None"], "methods", ["None"], ["", "def", "get_backbone_bbreg_feat", "(", "self", ",", "backbone_feat", ")", ":", "\n", "        ", "return", "[", "backbone_feat", "[", "l", "]", "for", "l", "in", "self", ".", "bb_regressor_layer", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.DiMPnet.extract_classification_feat": [[79, 81], ["dimpnet.DiMPnet.classifier.extract_classification_feat", "dimpnet.DiMPnet.get_backbone_clf_feat"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.extract_classification_feat", "home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.DiMPnet.get_backbone_clf_feat"], ["", "def", "extract_classification_feat", "(", "self", ",", "backbone_feat", ")", ":", "\n", "        ", "return", "self", ".", "classifier", ".", "extract_classification_feat", "(", "self", ".", "get_backbone_clf_feat", "(", "backbone_feat", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.DiMPnet.extract_backbone_features": [[82, 86], ["dimpnet.DiMPnet.feature_extractor"], "methods", ["None"], ["", "def", "extract_backbone_features", "(", "self", ",", "im", ",", "layers", "=", "None", ")", ":", "\n", "        ", "if", "layers", "is", "None", ":", "\n", "            ", "layers", "=", "self", ".", "output_layers", "\n", "", "return", "self", ".", "feature_extractor", "(", "im", ",", "layers", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.DiMPnet.extract_features": [[87, 96], ["sorted", "dimpnet.DiMPnet.feature_extractor", "dimpnet.DiMPnet.extract_classification_feat", "collections.OrderedDict", "dimpnet.DiMPnet.feature_extractor", "list", "set"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.extract_classification_feat", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "extract_features", "(", "self", ",", "im", ",", "layers", "=", "None", ")", ":", "\n", "        ", "if", "layers", "is", "None", ":", "\n", "            ", "layers", "=", "self", ".", "bb_regressor_layer", "+", "[", "'classification'", "]", "\n", "", "if", "'classification'", "not", "in", "layers", ":", "\n", "            ", "return", "self", ".", "feature_extractor", "(", "im", ",", "layers", ")", "\n", "", "backbone_layers", "=", "sorted", "(", "list", "(", "set", "(", "[", "l", "for", "l", "in", "layers", "+", "self", ".", "classification_layer", "if", "l", "!=", "'classification'", "]", ")", ")", ")", "\n", "all_feat", "=", "self", ".", "feature_extractor", "(", "im", ",", "backbone_layers", ")", "\n", "all_feat", "[", "'classification'", "]", "=", "self", ".", "extract_classification_feat", "(", "all_feat", ")", "\n", "return", "OrderedDict", "(", "{", "l", ":", "all_feat", "[", "l", "]", "for", "l", "in", "layers", "}", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.dimpnet18": [[99, 143], ["float", "ltr.resnet18", "math.sqrt", "ltr.residual_basic_block", "ltr.FilterInitializerLinear", "ltr.DiMPSteepestDescentGN", "ltr.LinearFilter", "ltr.AtomIoUNet", "dimpnet.DiMPnet"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.resnet18", "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.features.residual_basic_block"], ["", "", "@", "model_constructor", "\n", "def", "dimpnet18", "(", "filter_size", "=", "1", ",", "optim_iter", "=", "5", ",", "optim_init_step", "=", "1.0", ",", "optim_init_reg", "=", "0.01", ",", "\n", "classification_layer", "=", "'layer3'", ",", "feat_stride", "=", "16", ",", "backbone_pretrained", "=", "True", ",", "clf_feat_blocks", "=", "1", ",", "\n", "clf_feat_norm", "=", "True", ",", "init_filter_norm", "=", "False", ",", "final_conv", "=", "True", ",", "\n", "out_feature_dim", "=", "256", ",", "init_gauss_sigma", "=", "1.0", ",", "num_dist_bins", "=", "5", ",", "bin_displacement", "=", "1.0", ",", "\n", "mask_init_factor", "=", "4.0", ",", "iou_input_dim", "=", "(", "256", ",", "256", ")", ",", "iou_inter_dim", "=", "(", "256", ",", "256", ")", ",", "\n", "score_act", "=", "'relu'", ",", "act_param", "=", "None", ",", "target_mask_act", "=", "'sigmoid'", ",", "\n", "detach_length", "=", "float", "(", "'Inf'", ")", ",", "frozen_backbone_layers", "=", "(", ")", ")", ":", "\n", "# Backbone", "\n", "    ", "backbone_net", "=", "backbones", ".", "resnet18", "(", "pretrained", "=", "backbone_pretrained", ",", "frozen_layers", "=", "frozen_backbone_layers", ")", "\n", "\n", "# Feature normalization", "\n", "norm_scale", "=", "math", ".", "sqrt", "(", "1.0", "/", "(", "out_feature_dim", "*", "filter_size", "*", "filter_size", ")", ")", "\n", "\n", "# Classifier features", "\n", "clf_feature_extractor", "=", "clf_features", ".", "residual_basic_block", "(", "num_blocks", "=", "clf_feat_blocks", ",", "l2norm", "=", "clf_feat_norm", ",", "\n", "final_conv", "=", "final_conv", ",", "norm_scale", "=", "norm_scale", ",", "\n", "out_dim", "=", "out_feature_dim", ")", "\n", "\n", "# Initializer for the DiMP classifier", "\n", "initializer", "=", "clf_initializer", ".", "FilterInitializerLinear", "(", "filter_size", "=", "filter_size", ",", "filter_norm", "=", "init_filter_norm", ",", "\n", "feature_dim", "=", "out_feature_dim", ")", "\n", "\n", "# Optimizer for the DiMP classifier", "\n", "optimizer", "=", "clf_optimizer", ".", "DiMPSteepestDescentGN", "(", "num_iter", "=", "optim_iter", ",", "feat_stride", "=", "feat_stride", ",", "\n", "init_step_length", "=", "optim_init_step", ",", "\n", "init_filter_reg", "=", "optim_init_reg", ",", "init_gauss_sigma", "=", "init_gauss_sigma", ",", "\n", "num_dist_bins", "=", "num_dist_bins", ",", "\n", "bin_displacement", "=", "bin_displacement", ",", "\n", "mask_init_factor", "=", "mask_init_factor", ",", "\n", "score_act", "=", "score_act", ",", "act_param", "=", "act_param", ",", "mask_act", "=", "target_mask_act", ",", "\n", "detach_length", "=", "detach_length", ")", "\n", "\n", "# The classifier module", "\n", "classifier", "=", "target_clf", ".", "LinearFilter", "(", "filter_size", "=", "filter_size", ",", "filter_initializer", "=", "initializer", ",", "\n", "filter_optimizer", "=", "optimizer", ",", "feature_extractor", "=", "clf_feature_extractor", ")", "\n", "\n", "# Bounding box regressor", "\n", "bb_regressor", "=", "bbmodels", ".", "AtomIoUNet", "(", "pred_input_dim", "=", "iou_input_dim", ",", "pred_inter_dim", "=", "iou_inter_dim", ")", "\n", "\n", "# DiMP network", "\n", "net", "=", "DiMPnet", "(", "feature_extractor", "=", "backbone_net", ",", "classifier", "=", "classifier", ",", "bb_regressor", "=", "bb_regressor", ",", "\n", "classification_layer", "=", "classification_layer", ",", "bb_regressor_layer", "=", "[", "'layer2'", ",", "'layer3'", "]", ")", "\n", "return", "net", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.dimpnet50": [[145, 198], ["float", "ltr.resnet50", "math.sqrt", "ltr.residual_bottleneck", "ltr.FilterInitializerLinear", "ltr.DiMPSteepestDescentGN", "ltr.LinearFilter", "ltr.AtomIoUNet", "dimpnet.DiMPnet"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.resnet50", "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.features.residual_bottleneck"], ["", "@", "model_constructor", "\n", "def", "dimpnet50", "(", "filter_size", "=", "1", ",", "optim_iter", "=", "5", ",", "optim_init_step", "=", "1.0", ",", "optim_init_reg", "=", "0.01", ",", "\n", "classification_layer", "=", "'layer3'", ",", "feat_stride", "=", "16", ",", "backbone_pretrained", "=", "True", ",", "clf_feat_blocks", "=", "0", ",", "\n", "clf_feat_norm", "=", "True", ",", "init_filter_norm", "=", "False", ",", "final_conv", "=", "True", ",", "\n", "out_feature_dim", "=", "512", ",", "init_gauss_sigma", "=", "1.0", ",", "num_dist_bins", "=", "5", ",", "bin_displacement", "=", "1.0", ",", "\n", "mask_init_factor", "=", "4.0", ",", "iou_input_dim", "=", "(", "256", ",", "256", ")", ",", "iou_inter_dim", "=", "(", "256", ",", "256", ")", ",", "\n", "score_act", "=", "'relu'", ",", "act_param", "=", "None", ",", "target_mask_act", "=", "'sigmoid'", ",", "\n", "detach_length", "=", "float", "(", "'Inf'", ")", ",", "frozen_backbone_layers", "=", "(", ")", ")", ":", "\n", "\n", "# Backbone", "\n", "    ", "backbone_net", "=", "backbones", ".", "resnet50", "(", "pretrained", "=", "backbone_pretrained", ",", "frozen_layers", "=", "frozen_backbone_layers", ")", "\n", "\n", "# Feature normalization", "\n", "norm_scale", "=", "math", ".", "sqrt", "(", "1.0", "/", "(", "out_feature_dim", "*", "filter_size", "*", "filter_size", ")", ")", "\n", "\n", "# Classifier features", "\n", "if", "classification_layer", "==", "'layer3'", ":", "\n", "        ", "feature_dim", "=", "256", "\n", "", "elif", "classification_layer", "==", "'layer4'", ":", "\n", "        ", "feature_dim", "=", "512", "\n", "", "else", ":", "\n", "        ", "raise", "Exception", "\n", "\n", "", "clf_feature_extractor", "=", "clf_features", ".", "residual_bottleneck", "(", "feature_dim", "=", "feature_dim", ",", "\n", "num_blocks", "=", "clf_feat_blocks", ",", "l2norm", "=", "clf_feat_norm", ",", "\n", "final_conv", "=", "final_conv", ",", "norm_scale", "=", "norm_scale", ",", "\n", "out_dim", "=", "out_feature_dim", ")", "\n", "\n", "# Initializer for the DiMP classifier", "\n", "initializer", "=", "clf_initializer", ".", "FilterInitializerLinear", "(", "filter_size", "=", "filter_size", ",", "filter_norm", "=", "init_filter_norm", ",", "\n", "feature_dim", "=", "out_feature_dim", ")", "\n", "\n", "# Optimizer for the DiMP classifier", "\n", "optimizer", "=", "clf_optimizer", ".", "DiMPSteepestDescentGN", "(", "num_iter", "=", "optim_iter", ",", "feat_stride", "=", "feat_stride", ",", "\n", "init_step_length", "=", "optim_init_step", ",", "\n", "init_filter_reg", "=", "optim_init_reg", ",", "init_gauss_sigma", "=", "init_gauss_sigma", ",", "\n", "num_dist_bins", "=", "num_dist_bins", ",", "\n", "bin_displacement", "=", "bin_displacement", ",", "\n", "mask_init_factor", "=", "mask_init_factor", ",", "\n", "score_act", "=", "score_act", ",", "act_param", "=", "act_param", ",", "mask_act", "=", "target_mask_act", ",", "\n", "detach_length", "=", "detach_length", ")", "\n", "\n", "# The classifier module", "\n", "classifier", "=", "target_clf", ".", "LinearFilter", "(", "filter_size", "=", "filter_size", ",", "filter_initializer", "=", "initializer", ",", "\n", "filter_optimizer", "=", "optimizer", ",", "feature_extractor", "=", "clf_feature_extractor", ")", "\n", "\n", "# Bounding box regressor", "\n", "bb_regressor", "=", "bbmodels", ".", "AtomIoUNet", "(", "input_dim", "=", "(", "4", "*", "128", ",", "4", "*", "256", ")", ",", "pred_input_dim", "=", "iou_input_dim", ",", "pred_inter_dim", "=", "iou_inter_dim", ")", "\n", "\n", "# DiMP network", "\n", "net", "=", "DiMPnet", "(", "feature_extractor", "=", "backbone_net", ",", "classifier", "=", "classifier", ",", "bb_regressor", "=", "bb_regressor", ",", "\n", "classification_layer", "=", "classification_layer", ",", "bb_regressor_layer", "=", "[", "'layer2'", ",", "'layer3'", "]", ")", "\n", "return", "net", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.L2dimpnet18": [[201, 239], ["float", "ltr.resnet18", "math.sqrt", "ltr.residual_basic_block", "ltr.FilterInitializerLinear", "ltr.DiMPL2SteepestDescentGN", "ltr.LinearFilter", "ltr.AtomIoUNet", "dimpnet.DiMPnet"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.resnet18", "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.features.residual_basic_block"], ["", "@", "model_constructor", "\n", "def", "L2dimpnet18", "(", "filter_size", "=", "1", ",", "optim_iter", "=", "5", ",", "optim_init_step", "=", "1.0", ",", "optim_init_reg", "=", "0.01", ",", "\n", "classification_layer", "=", "'layer3'", ",", "feat_stride", "=", "16", ",", "backbone_pretrained", "=", "True", ",", "clf_feat_blocks", "=", "1", ",", "\n", "clf_feat_norm", "=", "True", ",", "init_filter_norm", "=", "False", ",", "final_conv", "=", "True", ",", "\n", "out_feature_dim", "=", "256", ",", "iou_input_dim", "=", "(", "256", ",", "256", ")", ",", "iou_inter_dim", "=", "(", "256", ",", "256", ")", ",", "\n", "detach_length", "=", "float", "(", "'Inf'", ")", ",", "hinge_threshold", "=", "-", "999", ",", "gauss_sigma", "=", "1.0", ",", "alpha_eps", "=", "0", ")", ":", "\n", "# Backbone", "\n", "    ", "backbone_net", "=", "backbones", ".", "resnet18", "(", "pretrained", "=", "backbone_pretrained", ")", "\n", "\n", "# Feature normalization", "\n", "norm_scale", "=", "math", ".", "sqrt", "(", "1.0", "/", "(", "out_feature_dim", "*", "filter_size", "*", "filter_size", ")", ")", "\n", "\n", "# Classifier features", "\n", "clf_feature_extractor", "=", "clf_features", ".", "residual_basic_block", "(", "num_blocks", "=", "clf_feat_blocks", ",", "l2norm", "=", "clf_feat_norm", ",", "\n", "final_conv", "=", "final_conv", ",", "norm_scale", "=", "norm_scale", ",", "\n", "out_dim", "=", "out_feature_dim", ")", "\n", "\n", "# Initializer for the DiMP classifier", "\n", "initializer", "=", "clf_initializer", ".", "FilterInitializerLinear", "(", "filter_size", "=", "filter_size", ",", "filter_norm", "=", "init_filter_norm", ",", "\n", "feature_dim", "=", "out_feature_dim", ")", "\n", "\n", "# Optimizer for the DiMP classifier", "\n", "optimizer", "=", "clf_optimizer", ".", "DiMPL2SteepestDescentGN", "(", "num_iter", "=", "optim_iter", ",", "feat_stride", "=", "feat_stride", ",", "\n", "init_step_length", "=", "optim_init_step", ",", "hinge_threshold", "=", "hinge_threshold", ",", "\n", "init_filter_reg", "=", "optim_init_reg", ",", "gauss_sigma", "=", "gauss_sigma", ",", "\n", "detach_length", "=", "detach_length", ",", "alpha_eps", "=", "alpha_eps", ")", "\n", "\n", "# The classifier module", "\n", "classifier", "=", "target_clf", ".", "LinearFilter", "(", "filter_size", "=", "filter_size", ",", "filter_initializer", "=", "initializer", ",", "\n", "filter_optimizer", "=", "optimizer", ",", "feature_extractor", "=", "clf_feature_extractor", ")", "\n", "\n", "# Bounding box regressor", "\n", "bb_regressor", "=", "bbmodels", ".", "AtomIoUNet", "(", "pred_input_dim", "=", "iou_input_dim", ",", "pred_inter_dim", "=", "iou_inter_dim", ")", "\n", "\n", "# DiMP network", "\n", "net", "=", "DiMPnet", "(", "feature_extractor", "=", "backbone_net", ",", "classifier", "=", "classifier", ",", "bb_regressor", "=", "bb_regressor", ",", "\n", "classification_layer", "=", "classification_layer", ",", "bb_regressor_layer", "=", "[", "'layer2'", ",", "'layer3'", "]", ")", "\n", "return", "net", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.klcedimpnet18": [[241, 292], ["float", "ltr.resnet18", "math.sqrt", "ltr.residual_basic_block", "ltr.FilterInitializerLinear", "ltr.PrDiMPSteepestDescentNewton", "ltr.LinearFilter", "ltr.AtomIoUNet", "dimpnet.DiMPnet"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.resnet18", "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.features.residual_basic_block"], ["", "@", "model_constructor", "\n", "def", "klcedimpnet18", "(", "filter_size", "=", "1", ",", "optim_iter", "=", "5", ",", "optim_init_step", "=", "1.0", ",", "optim_init_reg", "=", "0.01", ",", "\n", "classification_layer", "=", "'layer3'", ",", "feat_stride", "=", "16", ",", "backbone_pretrained", "=", "True", ",", "clf_feat_blocks", "=", "1", ",", "\n", "clf_feat_norm", "=", "True", ",", "init_filter_norm", "=", "False", ",", "final_conv", "=", "True", ",", "\n", "out_feature_dim", "=", "256", ",", "gauss_sigma", "=", "1.0", ",", "\n", "iou_input_dim", "=", "(", "256", ",", "256", ")", ",", "iou_inter_dim", "=", "(", "256", ",", "256", ")", ",", "\n", "detach_length", "=", "float", "(", "'Inf'", ")", ",", "alpha_eps", "=", "0.0", ",", "train_feature_extractor", "=", "True", ",", "\n", "init_uni_weight", "=", "None", ",", "optim_min_reg", "=", "1e-3", ",", "init_initializer", "=", "'default'", ",", "normalize_label", "=", "False", ",", "\n", "label_shrink", "=", "0", ",", "softmax_reg", "=", "None", ",", "label_threshold", "=", "0", ",", "final_relu", "=", "False", ",", "init_pool_square", "=", "False", ",", "\n", "frozen_backbone_layers", "=", "(", ")", ")", ":", "\n", "\n", "    ", "if", "not", "train_feature_extractor", ":", "\n", "        ", "frozen_backbone_layers", "=", "'all'", "\n", "\n", "# Backbone", "\n", "", "backbone_net", "=", "backbones", ".", "resnet18", "(", "pretrained", "=", "backbone_pretrained", ",", "frozen_layers", "=", "frozen_backbone_layers", ")", "\n", "\n", "# Feature normalization", "\n", "norm_scale", "=", "math", ".", "sqrt", "(", "1.0", "/", "(", "out_feature_dim", "*", "filter_size", "*", "filter_size", ")", ")", "\n", "\n", "# Classifier features", "\n", "clf_feature_extractor", "=", "clf_features", ".", "residual_basic_block", "(", "num_blocks", "=", "clf_feat_blocks", ",", "l2norm", "=", "clf_feat_norm", ",", "\n", "final_conv", "=", "final_conv", ",", "norm_scale", "=", "norm_scale", ",", "\n", "out_dim", "=", "out_feature_dim", ",", "final_relu", "=", "final_relu", ")", "\n", "\n", "# Initializer for the DiMP classifier", "\n", "initializer", "=", "clf_initializer", ".", "FilterInitializerLinear", "(", "filter_size", "=", "filter_size", ",", "filter_norm", "=", "init_filter_norm", ",", "\n", "feature_dim", "=", "out_feature_dim", ",", "init_weights", "=", "init_initializer", ",", "\n", "pool_square", "=", "init_pool_square", ")", "\n", "\n", "# Optimizer for the DiMP classifier", "\n", "optimizer", "=", "clf_optimizer", ".", "PrDiMPSteepestDescentNewton", "(", "num_iter", "=", "optim_iter", ",", "feat_stride", "=", "feat_stride", ",", "\n", "init_step_length", "=", "optim_init_step", ",", "\n", "init_filter_reg", "=", "optim_init_reg", ",", "gauss_sigma", "=", "gauss_sigma", ",", "\n", "detach_length", "=", "detach_length", ",", "alpha_eps", "=", "alpha_eps", ",", "\n", "init_uni_weight", "=", "init_uni_weight", ",", "\n", "min_filter_reg", "=", "optim_min_reg", ",", "normalize_label", "=", "normalize_label", ",", "\n", "label_shrink", "=", "label_shrink", ",", "softmax_reg", "=", "softmax_reg", ",", "\n", "label_threshold", "=", "label_threshold", ")", "\n", "\n", "# The classifier module", "\n", "classifier", "=", "target_clf", ".", "LinearFilter", "(", "filter_size", "=", "filter_size", ",", "filter_initializer", "=", "initializer", ",", "\n", "filter_optimizer", "=", "optimizer", ",", "feature_extractor", "=", "clf_feature_extractor", ")", "\n", "\n", "# Bounding box regressor", "\n", "bb_regressor", "=", "bbmodels", ".", "AtomIoUNet", "(", "pred_input_dim", "=", "iou_input_dim", ",", "pred_inter_dim", "=", "iou_inter_dim", ")", "\n", "\n", "# DiMP network", "\n", "net", "=", "DiMPnet", "(", "feature_extractor", "=", "backbone_net", ",", "classifier", "=", "classifier", ",", "bb_regressor", "=", "bb_regressor", ",", "\n", "classification_layer", "=", "classification_layer", ",", "bb_regressor_layer", "=", "[", "'layer2'", ",", "'layer3'", "]", ")", "\n", "return", "net", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.klcedimpnet50": [[294, 343], ["float", "ltr.resnet50", "math.sqrt", "ltr.residual_bottleneck", "ltr.FilterInitializerLinear", "ltr.PrDiMPSteepestDescentNewton", "ltr.LinearFilter", "ltr.AtomIoUNet", "dimpnet.DiMPnet"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.resnet50", "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.features.residual_bottleneck"], ["", "@", "model_constructor", "\n", "def", "klcedimpnet50", "(", "filter_size", "=", "1", ",", "optim_iter", "=", "5", ",", "optim_init_step", "=", "1.0", ",", "optim_init_reg", "=", "0.01", ",", "\n", "classification_layer", "=", "'layer3'", ",", "feat_stride", "=", "16", ",", "backbone_pretrained", "=", "True", ",", "clf_feat_blocks", "=", "0", ",", "\n", "clf_feat_norm", "=", "True", ",", "init_filter_norm", "=", "False", ",", "final_conv", "=", "True", ",", "\n", "out_feature_dim", "=", "512", ",", "gauss_sigma", "=", "1.0", ",", "\n", "iou_input_dim", "=", "(", "256", ",", "256", ")", ",", "iou_inter_dim", "=", "(", "256", ",", "256", ")", ",", "\n", "detach_length", "=", "float", "(", "'Inf'", ")", ",", "alpha_eps", "=", "0.0", ",", "train_feature_extractor", "=", "True", ",", "\n", "init_uni_weight", "=", "None", ",", "optim_min_reg", "=", "1e-3", ",", "init_initializer", "=", "'default'", ",", "normalize_label", "=", "False", ",", "\n", "label_shrink", "=", "0", ",", "softmax_reg", "=", "None", ",", "label_threshold", "=", "0", ",", "final_relu", "=", "False", ",", "frozen_backbone_layers", "=", "(", ")", ")", ":", "\n", "\n", "    ", "if", "not", "train_feature_extractor", ":", "\n", "        ", "frozen_backbone_layers", "=", "'all'", "\n", "\n", "# Backbone", "\n", "", "backbone_net", "=", "backbones", ".", "resnet50", "(", "pretrained", "=", "backbone_pretrained", ",", "frozen_layers", "=", "frozen_backbone_layers", ")", "\n", "\n", "# Feature normalization", "\n", "norm_scale", "=", "math", ".", "sqrt", "(", "1.0", "/", "(", "out_feature_dim", "*", "filter_size", "*", "filter_size", ")", ")", "\n", "\n", "# Classifier features", "\n", "clf_feature_extractor", "=", "clf_features", ".", "residual_bottleneck", "(", "num_blocks", "=", "clf_feat_blocks", ",", "l2norm", "=", "clf_feat_norm", ",", "\n", "final_conv", "=", "final_conv", ",", "norm_scale", "=", "norm_scale", ",", "\n", "out_dim", "=", "out_feature_dim", ",", "final_relu", "=", "final_relu", ")", "\n", "\n", "# Initializer for the DiMP classifier", "\n", "initializer", "=", "clf_initializer", ".", "FilterInitializerLinear", "(", "filter_size", "=", "filter_size", ",", "filter_norm", "=", "init_filter_norm", ",", "\n", "feature_dim", "=", "out_feature_dim", ",", "init_weights", "=", "init_initializer", ")", "\n", "\n", "# Optimizer for the DiMP classifier", "\n", "optimizer", "=", "clf_optimizer", ".", "PrDiMPSteepestDescentNewton", "(", "num_iter", "=", "optim_iter", ",", "feat_stride", "=", "feat_stride", ",", "\n", "init_step_length", "=", "optim_init_step", ",", "\n", "init_filter_reg", "=", "optim_init_reg", ",", "gauss_sigma", "=", "gauss_sigma", ",", "\n", "detach_length", "=", "detach_length", ",", "alpha_eps", "=", "alpha_eps", ",", "\n", "init_uni_weight", "=", "init_uni_weight", ",", "\n", "min_filter_reg", "=", "optim_min_reg", ",", "normalize_label", "=", "normalize_label", ",", "\n", "label_shrink", "=", "label_shrink", ",", "softmax_reg", "=", "softmax_reg", ",", "\n", "label_threshold", "=", "label_threshold", ")", "\n", "\n", "# The classifier module", "\n", "classifier", "=", "target_clf", ".", "LinearFilter", "(", "filter_size", "=", "filter_size", ",", "filter_initializer", "=", "initializer", ",", "\n", "filter_optimizer", "=", "optimizer", ",", "feature_extractor", "=", "clf_feature_extractor", ")", "\n", "\n", "# Bounding box regressor", "\n", "bb_regressor", "=", "bbmodels", ".", "AtomIoUNet", "(", "input_dim", "=", "(", "4", "*", "128", ",", "4", "*", "256", ")", ",", "pred_input_dim", "=", "iou_input_dim", ",", "pred_inter_dim", "=", "iou_inter_dim", ")", "\n", "\n", "# DiMP network", "\n", "net", "=", "DiMPnet", "(", "feature_extractor", "=", "backbone_net", ",", "classifier", "=", "classifier", ",", "bb_regressor", "=", "bb_regressor", ",", "\n", "classification_layer", "=", "classification_layer", ",", "bb_regressor_layer", "=", "[", "'layer2'", ",", "'layer3'", "]", ")", "\n", "return", "net", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.ARcm_seg.ARcm_seg.__init__": [[20, 26], ["ARcm_seg.ARcm_seg.get_network", "numpy.array().reshape", "numpy.array().reshape", "numpy.array", "numpy.array"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.pytracking.ARcm_seg.ARcm_seg.get_network"], ["    ", "def", "__init__", "(", "self", ",", "refine_net_dir", ",", "search_factor", "=", "2.0", ",", "input_sz", "=", "256", ")", ":", "\n", "        ", "self", ".", "refine_network", "=", "self", ".", "get_network", "(", "refine_net_dir", ")", "\n", "self", ".", "search_factor", "=", "search_factor", "\n", "self", ".", "input_sz", "=", "input_sz", "\n", "self", ".", "mean", "=", "np", ".", "array", "(", "[", "0.485", ",", "0.456", ",", "0.406", "]", ")", ".", "reshape", "(", "(", "1", ",", "1", ",", "3", ")", ")", "\n", "self", ".", "std", "=", "np", ".", "array", "(", "[", "0.229", ",", "0.224", ",", "0.225", "]", ")", ".", "reshape", "(", "(", "1", ",", "1", ",", "3", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.ARcm_seg.ARcm_seg.initialize": [[27, 43], ["external.AR.ltr.data.processing_utils_SE.sample_target_SE", "ARcm_seg.ARcm_seg.img_preprocess", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "ARcm_seg.ARcm_seg.gt_preprocess", "external.AR.ltr.data.processing_utils_SE.transform_image_to_crop_SE().cuda", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "ARcm_seg.ARcm_seg.refine_network.forward_ref", "external.AR.ltr.data.processing_utils_SE.transform_image_to_crop_SE"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.sample_target_SE", "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.ARcm_seg.ARcm_seg.img_preprocess", "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.ARcm_seg.ARcm_seg.gt_preprocess", "home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.forward_ref", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.transform_image_to_crop_SE"], ["", "def", "initialize", "(", "self", ",", "frame1", ",", "bbox1", ")", ":", "\n", "        ", "'''\n        :param frame1: cv array (H,W,3)\n        :param bbox1: ndarray (4,)\n        :return:\n        '''", "\n", "'''Step1: get cropped patch(tensor)'''", "\n", "patch1", ",", "h_f", ",", "w_f", "=", "sample_target_SE", "(", "frame1", ",", "bbox1", ",", "self", ".", "search_factor", ",", "self", ".", "input_sz", ",", "mode", "=", "cv2", ".", "BORDER_CONSTANT", ")", "\n", "patch1_tensor", "=", "self", ".", "img_preprocess", "(", "patch1", ")", "\n", "'''Step2: get GT's cooridinate on the cropped patch(tensor)'''", "\n", "crop_sz", "=", "torch", ".", "Tensor", "(", "(", "self", ".", "input_sz", ",", "self", ".", "input_sz", ")", ")", "\n", "bbox1_tensor", "=", "self", ".", "gt_preprocess", "(", "bbox1", ")", "# (4,)", "\n", "bbox1_crop_tensor", "=", "transform_image_to_crop_SE", "(", "bbox1_tensor", ",", "bbox1_tensor", ",", "h_f", ",", "w_f", ",", "crop_sz", ")", ".", "cuda", "(", ")", "\n", "'''Step3: forward prop (reference branch)'''", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "self", ".", "refine_network", ".", "forward_ref", "(", "patch1_tensor", ",", "bbox1_crop_tensor", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.ARcm_seg.ARcm_seg.get_mask": [[45, 69], ["external.AR.ltr.data.processing_utils_SE.sample_target_SE", "ARcm_seg.ARcm_seg.img_preprocess", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "ARcm_seg.mask_torch2numpy", "external.AR.ltr.data.processing_utils_SE.map_mask_back", "ARcm_seg.ARcm_seg.refine_network.forward_test", "ARcm_seg.ARcm_seg.refine_network.forward_test"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.sample_target_SE", "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.ARcm_seg.ARcm_seg.img_preprocess", "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.ARcm_seg.mask_torch2numpy", "home.repos.pwc.inspect_result.researchmm_Stark.data.processing_utils_SE.map_mask_back", "home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.forward_test", "home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.forward_test"], ["def", "get_mask", "(", "self", ",", "Cframe", ",", "Cbbox", ",", "dtm", "=", "None", ",", "vis", "=", "False", ")", ":", "\n", "        ", "'''\n        :param Cframe: Current frame(cv2 array)\n        :param Cbbox: Current bbox (ndarray) (x1,y1,w,h)\n        :return: mask\n        '''", "\n", "'''Step1: get cropped patch(tensor)'''", "\n", "Cpatch", ",", "h_f", ",", "w_f", "=", "sample_target_SE", "(", "Cframe", ",", "Cbbox", ",", "self", ".", "search_factor", ",", "self", ".", "input_sz", ",", "mode", "=", "cv2", ".", "BORDER_CONSTANT", ")", "\n", "Cpatch_tensor", "=", "self", ".", "img_preprocess", "(", "Cpatch", ")", "\n", "\n", "'''Step2: forward prop (test branch)'''", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "if", "dtm", "is", "not", "None", ":", "\n", "                ", "'''2020.4.26 support input dtm'''", "\n", "pred", "=", "self", ".", "refine_network", ".", "forward_test", "(", "Cpatch_tensor", ",", "dtm", ",", "mode", "=", "'mask'", ")", "\n", "", "else", ":", "\n", "                ", "pred", "=", "self", ".", "refine_network", ".", "forward_test", "(", "Cpatch_tensor", ",", "mode", "=", "'mask'", ")", "\n", "", "Pmask_arr", "=", "mask_torch2numpy", "(", "pred", ")", "\n", "mask_arr", "=", "map_mask_back", "(", "Cframe", ",", "Cbbox", ",", "self", ".", "search_factor", ",", "Pmask_arr", ",", "\n", "mode", "=", "cv2", ".", "BORDER_CONSTANT", ")", "\n", "if", "vis", ":", "\n", "                ", "return", "mask_arr", ",", "Cpatch", ",", "Pmask_arr", "\n", "", "else", ":", "\n", "                ", "return", "mask_arr", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.ARcm_seg.ARcm_seg.get_network": [[70, 75], ["external.AR.pytracking.utils.loading.load_network", "external.AR.pytracking.utils.loading.load_network.cuda", "external.AR.pytracking.utils.loading.load_network.eval"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWrapper.load_network", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.eval"], ["", "", "", "def", "get_network", "(", "self", ",", "checkpoint_dir", ")", ":", "\n", "        ", "network", "=", "load_network", "(", "checkpoint_dir", ")", "\n", "network", ".", "cuda", "(", ")", "\n", "network", ".", "eval", "(", ")", "\n", "return", "network", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.ARcm_seg.ARcm_seg.img_preprocess": [[76, 86], ["norm_img.astype", "torch.from_numpy().cuda", "torch.from_numpy().cuda", "torch.from_numpy().cuda", "torch.from_numpy().cuda", "img_tensor.permute.permute.permute", "img_tensor.permute.permute.unsqueeze().unsqueeze", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "img_tensor.permute.permute.unsqueeze"], "methods", ["None"], ["", "def", "img_preprocess", "(", "self", ",", "img_arr", ")", ":", "\n", "        ", "'''---> Pytorch tensor(RGB),Normal(-1 to 1,subtract mean, divide std)\n        input img_arr (H,W,3)\n        output (1,1,3,H,W)\n        '''", "\n", "norm_img", "=", "(", "(", "img_arr", "/", "255.0", ")", "-", "self", ".", "mean", ")", "/", "(", "self", ".", "std", ")", "\n", "img_f32", "=", "norm_img", ".", "astype", "(", "np", ".", "float32", ")", "\n", "img_tensor", "=", "torch", ".", "from_numpy", "(", "img_f32", ")", ".", "cuda", "(", ")", "\n", "img_tensor", "=", "img_tensor", ".", "permute", "(", "(", "2", ",", "0", ",", "1", ")", ")", "\n", "return", "img_tensor", ".", "unsqueeze", "(", "dim", "=", "0", ")", ".", "unsqueeze", "(", "dim", "=", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.ARcm_seg.ARcm_seg.gt_preprocess": [[87, 93], ["torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "torch.from_numpy", "gt_arr.astype"], "methods", ["None"], ["", "def", "gt_preprocess", "(", "self", ",", "gt_arr", ")", ":", "\n", "        ", "'''\n        :param gt: ndarray (4,)\n        :return: torch tensor (4,)\n        '''", "\n", "return", "torch", ".", "from_numpy", "(", "gt_arr", ".", "astype", "(", "np", ".", "float32", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.ARcm_seg.mask_torch2numpy": [[14, 17], ["numpy.array", "Pmask.squeeze().cpu", "Pmask.squeeze"], "function", ["None"], ["", "def", "mask_torch2numpy", "(", "Pmask", ")", ":", "\n", "    ", "Pmask_arr", "=", "np", ".", "array", "(", "Pmask", ".", "squeeze", "(", ")", ".", "cpu", "(", ")", ")", "# (H,W) (0,1)", "\n", "return", "Pmask_arr", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.ARcm_seg.add_frame_mask": [[95, 101], ["frame.copy().astype", "frame_new.clip().astype.clip().astype", "frame.copy", "frame_new.clip().astype.clip"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy"], ["", "", "def", "add_frame_mask", "(", "frame", ",", "mask", ",", "threshold", "=", "0.5", ")", ":", "\n", "    ", "mask_new", "=", "(", "mask", ">", "threshold", ")", "*", "255", "#(H,W)", "\n", "frame_new", "=", "frame", ".", "copy", "(", ")", ".", "astype", "(", "np", ".", "float", ")", "\n", "frame_new", "[", "...", ",", "1", "]", "+=", "0.3", "*", "mask_new", "\n", "frame_new", "=", "frame_new", ".", "clip", "(", "0", ",", "255", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "return", "frame_new", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.ARcm_seg.add_frame_bbox": [[103, 107], ["refined_box.tolist", "cv2.rectangle", "int", "int", "int", "int"], "function", ["None"], ["", "def", "add_frame_bbox", "(", "frame", ",", "refined_box", ",", "color", ")", ":", "\n", "    ", "x1", ",", "y1", ",", "w", ",", "h", "=", "refined_box", ".", "tolist", "(", ")", "\n", "cv2", ".", "rectangle", "(", "frame", ",", "(", "int", "(", "x1", ")", ",", "int", "(", "y1", ")", ")", ",", "(", "int", "(", "x1", "+", "w", ")", ",", "int", "(", "y1", "+", "h", ")", ")", ",", "color", ",", "2", ")", "\n", "return", "frame", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.vot20_utils.make_full_size": [[4, 23], ["numpy.pad"], "function", ["None"], ["def", "make_full_size", "(", "x", ",", "output_sz", ")", ":", "\n", "    ", "\"\"\"\n    zero-pad input x (right and down) to match output_sz\n    x: numpy array e.g., binary mask\n    output_sz: size of the output [width, height]\n    \"\"\"", "\n", "if", "x", ".", "shape", "[", "0", "]", "==", "output_sz", "[", "1", "]", "and", "x", ".", "shape", "[", "1", "]", "==", "output_sz", "[", "0", "]", ":", "\n", "        ", "return", "x", "\n", "", "pad_x", "=", "output_sz", "[", "0", "]", "-", "x", ".", "shape", "[", "1", "]", "\n", "if", "pad_x", "<", "0", ":", "\n", "        ", "x", "=", "x", "[", ":", ",", ":", "x", ".", "shape", "[", "1", "]", "+", "pad_x", "]", "\n", "# padding has to be set to zero, otherwise pad function fails", "\n", "pad_x", "=", "0", "\n", "", "pad_y", "=", "output_sz", "[", "1", "]", "-", "x", ".", "shape", "[", "0", "]", "\n", "if", "pad_y", "<", "0", ":", "\n", "        ", "x", "=", "x", "[", ":", "x", ".", "shape", "[", "0", "]", "+", "pad_y", ",", ":", "]", "\n", "# padding has to be set to zero, otherwise pad function fails", "\n", "pad_y", "=", "0", "\n", "", "return", "np", ".", "pad", "(", "x", ",", "(", "(", "0", ",", "pad_y", ")", ",", "(", "0", ",", "pad_x", ")", ")", ",", "'constant'", ",", "constant_values", "=", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.vot20_utils.rect_from_mask": [[25, 37], ["numpy.sum", "numpy.sum", "numpy.min", "numpy.max", "numpy.min", "numpy.max", "numpy.nonzero", "numpy.nonzero", "numpy.nonzero", "numpy.nonzero"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "rect_from_mask", "(", "mask", ")", ":", "\n", "    ", "\"\"\"\n    create an axis-aligned rectangle from a given binary mask\n    mask in created as a minimal rectangle containing all non-zero pixels\n    \"\"\"", "\n", "x_", "=", "np", ".", "sum", "(", "mask", ",", "axis", "=", "0", ")", "\n", "y_", "=", "np", ".", "sum", "(", "mask", ",", "axis", "=", "1", ")", "\n", "x0", "=", "np", ".", "min", "(", "np", ".", "nonzero", "(", "x_", ")", ")", "\n", "x1", "=", "np", ".", "max", "(", "np", ".", "nonzero", "(", "x_", ")", ")", "\n", "y0", "=", "np", ".", "min", "(", "np", ".", "nonzero", "(", "y_", ")", ")", "\n", "y1", "=", "np", ".", "max", "(", "np", ".", "nonzero", "(", "y_", ")", ")", "\n", "return", "[", "x0", ",", "y0", ",", "x1", "-", "x0", "+", "1", ",", "y1", "-", "y0", "+", "1", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.vot20_utils.mask_from_rect": [[39, 52], ["numpy.zeros", "max", "max", "min", "min", "int", "int", "int", "int", "round", "round", "round", "round"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "mask_from_rect", "(", "rect", ",", "output_sz", ")", ":", "\n", "    ", "\"\"\"\n    create a binary mask from a given rectangle\n    rect: axis-aligned rectangle [x0, y0, width, height]\n    output_sz: size of the output [width, height]\n    \"\"\"", "\n", "mask", "=", "np", ".", "zeros", "(", "(", "output_sz", "[", "1", "]", ",", "output_sz", "[", "0", "]", ")", ",", "dtype", "=", "np", ".", "uint8", ")", "\n", "x0", "=", "max", "(", "int", "(", "round", "(", "rect", "[", "0", "]", ")", ")", ",", "0", ")", "\n", "y0", "=", "max", "(", "int", "(", "round", "(", "rect", "[", "1", "]", ")", ")", ",", "0", ")", "\n", "x1", "=", "min", "(", "int", "(", "round", "(", "rect", "[", "0", "]", "+", "rect", "[", "2", "]", ")", ")", ",", "output_sz", "[", "0", "]", ")", "\n", "y1", "=", "min", "(", "int", "(", "round", "(", "rect", "[", "1", "]", "+", "rect", "[", "3", "]", ")", ")", ",", "output_sz", "[", "1", "]", ")", "\n", "mask", "[", "y0", ":", "y1", ",", "x0", ":", "x1", "]", "=", "1", "\n", "return", "mask", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.vot20_utils.bbox_clip": [[54, 61], ["max", "max", "max", "max", "min", "min", "min", "min"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "bbox_clip", "(", "x1", ",", "y1", ",", "x2", ",", "y2", ",", "boundary", ",", "min_sz", "=", "10", ")", ":", "\n", "    ", "\"\"\"boundary (H,W)\"\"\"", "\n", "x1_new", "=", "max", "(", "0", ",", "min", "(", "x1", ",", "boundary", "[", "1", "]", "-", "min_sz", ")", ")", "\n", "y1_new", "=", "max", "(", "0", ",", "min", "(", "y1", ",", "boundary", "[", "0", "]", "-", "min_sz", ")", ")", "\n", "x2_new", "=", "max", "(", "min_sz", ",", "min", "(", "x2", ",", "boundary", "[", "1", "]", ")", ")", "\n", "y2_new", "=", "max", "(", "min_sz", ",", "min", "(", "y2", ",", "boundary", "[", "0", "]", ")", ")", "\n", "return", "x1_new", ",", "y1_new", ",", "x2_new", ",", "y2_new", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT.vot.VOT.__init__": [[27, 58], ["trax.Server", "vot.VOT._trax.wait", "isinstance", "vot.VOT._trax.status", "Polygon", "Rectangle", "str", "len", "vot.VOT.image.items", "Point", "vot.VOT.region.bounds", "Exception"], "methods", ["None"], ["\n", "assert", "(", "region_format", "in", "[", "trax", ".", "Region", ".", "RECTANGLE", ",", "trax", ".", "Region", ".", "POLYGON", ",", "trax", ".", "Region", ".", "MASK", "]", ")", "\n", "\n", "if", "channels", "is", "None", ":", "\n", "            ", "channels", "=", "[", "'color'", "]", "\n", "", "elif", "channels", "==", "'rgbd'", ":", "\n", "            ", "channels", "=", "[", "'color'", ",", "'depth'", "]", "\n", "", "elif", "channels", "==", "'rgbt'", ":", "\n", "            ", "channels", "=", "[", "'color'", ",", "'ir'", "]", "\n", "", "elif", "channels", "==", "'ir'", ":", "\n", "            ", "channels", "=", "[", "'ir'", "]", "\n", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "'Illegal configuration {}.'", ".", "format", "(", "channels", ")", ")", "\n", "\n", "", "self", ".", "_trax", "=", "trax", ".", "Server", "(", "[", "region_format", "]", ",", "[", "trax", ".", "Image", ".", "PATH", "]", ",", "channels", ",", "customMetadata", "=", "dict", "(", "vot", "=", "\"python\"", ")", ")", "\n", "\n", "request", "=", "self", ".", "_trax", ".", "wait", "(", ")", "\n", "assert", "(", "request", ".", "type", "==", "'initialize'", ")", "\n", "if", "isinstance", "(", "request", ".", "region", ",", "trax", ".", "Polygon", ")", ":", "\n", "            ", "self", ".", "_region", "=", "Polygon", "(", "[", "Point", "(", "x", "[", "0", "]", ",", "x", "[", "1", "]", ")", "for", "x", "in", "request", ".", "region", "]", ")", "\n", "", "elif", "isinstance", "(", "request", ".", "region", ",", "trax", ".", "Mask", ")", ":", "\n", "            ", "self", ".", "_region", "=", "request", ".", "region", ".", "array", "(", "True", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "_region", "=", "Rectangle", "(", "*", "request", ".", "region", ".", "bounds", "(", ")", ")", "\n", "", "self", ".", "_image", "=", "[", "x", ".", "path", "(", ")", "for", "k", ",", "x", "in", "request", ".", "image", ".", "items", "(", ")", "]", "\n", "if", "len", "(", "self", ".", "_image", ")", "==", "1", ":", "\n", "            ", "self", ".", "_image", "=", "self", ".", "_image", "[", "0", "]", "\n", "\n", "", "self", ".", "_trax", ".", "status", "(", "request", ".", "region", ")", "\n", "\n", "", "def", "region", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT.vot.VOT.region": [[59, 69], ["None"], "methods", ["None"], ["        ", "\"\"\"\n        Send configuration message to the client and receive the initialization\n        region and the path of the first image\n        Returns:\n            initialization region\n        \"\"\"", "\n", "\n", "return", "self", ".", "_region", "\n", "\n", "", "def", "report", "(", "self", ",", "region", ",", "confidence", "=", "None", ")", ":", "\n", "        "]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT.vot.VOT.report": [[70, 86], ["isinstance", "vot.VOT._trax.status", "isinstance", "isinstance", "trax.Polygon.create", "trax.Rectangle.create"], "methods", ["None"], ["\n", "assert", "(", "isinstance", "(", "region", ",", "(", "Rectangle", ",", "Polygon", ",", "np", ".", "ndarray", ")", ")", ")", "\n", "if", "isinstance", "(", "region", ",", "Polygon", ")", ":", "\n", "            ", "tregion", "=", "trax", ".", "Polygon", ".", "create", "(", "[", "(", "x", ".", "x", ",", "x", ".", "y", ")", "for", "x", "in", "region", ".", "points", "]", ")", "\n", "", "elif", "isinstance", "(", "region", ",", "np", ".", "ndarray", ")", ":", "\n", "            ", "tregion", "=", "trax", ".", "Mask", ".", "create", "(", "region", ")", "\n", "", "else", ":", "\n", "            ", "tregion", "=", "trax", ".", "Rectangle", ".", "create", "(", "region", ".", "x", ",", "region", ".", "y", ",", "region", ".", "width", ",", "region", ".", "height", ")", "\n", "", "properties", "=", "{", "}", "\n", "if", "not", "confidence", "is", "None", ":", "\n", "            ", "properties", "[", "'confidence'", "]", "=", "confidence", "\n", "", "self", ".", "_trax", ".", "status", "(", "tregion", ",", "properties", ")", "\n", "\n", "", "def", "frame", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT.vot.VOT.frame": [[87, 108], ["hasattr", "vot.VOT._trax.wait", "tuple", "tuple", "str", "len", "vot.VOT.image.items"], "methods", ["None"], ["        ", "\"\"\"\n        Get a frame (image path) from client\n        Returns:\n            absolute path of the image\n        \"\"\"", "\n", "if", "hasattr", "(", "self", ",", "\"_image\"", ")", ":", "\n", "            ", "image", "=", "self", ".", "_image", "\n", "del", "self", ".", "_image", "\n", "return", "image", "\n", "\n", "", "request", "=", "self", ".", "_trax", ".", "wait", "(", ")", "\n", "\n", "if", "request", ".", "type", "==", "'frame'", ":", "\n", "            ", "image", "=", "[", "x", ".", "path", "(", ")", "for", "k", ",", "x", "in", "request", ".", "image", ".", "items", "(", ")", "]", "\n", "if", "len", "(", "image", ")", "==", "1", ":", "\n", "                ", "return", "image", "[", "0", "]", "\n", "", "return", "image", "\n", "", "else", ":", "\n", "            ", "return", "None", "\n", "\n", "\n", "", "", "def", "quit", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT.vot.VOT.quit": [[110, 113], ["hasattr", "vot.VOT._trax.quit"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.quit"], ["            ", "self", ".", "_trax", ".", "quit", "(", ")", "\n", "\n", "", "", "def", "__del__", "(", "self", ")", ":", "\n", "        ", "self", ".", "quit", "(", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT.vot.VOT.__del__": [[114, 116], ["vot.VOT.quit"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.quit"], ["", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.default.parameters": [[6, 98], ["pytracking.utils.TrackerParams", "pytracking.utils.TrackerParams", "pytracking.utils.TrackerParams", "pytracking.utils.FeatureParams", "pytracking.features.deep.ResNet18m1", "pytracking.features.extractor.MultiResolutionExtractor", "torch.arange().float", "torch.arange"], "function", ["None"], ["def", "parameters", "(", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "\n", "params", ".", "debug", "=", "0", "\n", "params", ".", "visualization", "=", "False", "\n", "\n", "params", ".", "use_gpu", "=", "True", "\n", "\n", "# Feature specific parameters", "\n", "shallow_params", "=", "TrackerParams", "(", ")", "\n", "deep_params", "=", "TrackerParams", "(", ")", "\n", "\n", "# Patch sampling parameters", "\n", "params", ".", "max_image_sample_size", "=", "250", "**", "2", "# Maximum image sample size", "\n", "params", ".", "min_image_sample_size", "=", "200", "**", "2", "# Minimum image sample size", "\n", "params", ".", "search_area_scale", "=", "4.5", "# Scale relative to target size", "\n", "\n", "# Conjugate Gradient parameters", "\n", "params", ".", "CG_iter", "=", "5", "# The number of Conjugate Gradient iterations in each update after the first frame", "\n", "params", ".", "init_CG_iter", "=", "100", "# The total number of Conjugate Gradient iterations used in the first frame", "\n", "params", ".", "init_GN_iter", "=", "10", "# The number of Gauss-Newton iterations used in the first frame (only if the projection matrix is updated)", "\n", "params", ".", "post_init_CG_iter", "=", "0", "# CG iterations to run after GN", "\n", "params", ".", "fletcher_reeves", "=", "False", "# Use the Fletcher-Reeves (true) or Polak-Ribiere (false) formula in the Conjugate Gradient", "\n", "params", ".", "standard_alpha", "=", "True", "# Use the standard formula for computing the step length in Conjugate Gradient", "\n", "params", ".", "CG_forgetting_rate", "=", "75", "# Forgetting rate of the last conjugate direction", "\n", "params", ".", "precond_data_param", "=", "0.3", "# Weight of the data term in the preconditioner", "\n", "params", ".", "precond_reg_param", "=", "0.15", "# Weight of the regularization term in the preconditioner", "\n", "params", ".", "precond_proj_param", "=", "35", "# Weight of the projection matrix part in the preconditioner", "\n", "\n", "# Learning parameters", "\n", "shallow_params", ".", "learning_rate", "=", "0.025", "\n", "deep_params", ".", "learning_rate", "=", "0.0075", "\n", "shallow_params", ".", "output_sigma_factor", "=", "1", "/", "16", "\n", "deep_params", ".", "output_sigma_factor", "=", "1", "/", "4", "\n", "\n", "# Training parameters", "\n", "params", ".", "sample_memory_size", "=", "200", "# Memory size", "\n", "params", ".", "train_skipping", "=", "10", "# How often to run training (every n-th frame)", "\n", "\n", "# Detection parameters", "\n", "params", ".", "scale_factors", "=", "1.02", "**", "torch", ".", "arange", "(", "-", "2", ",", "3", ")", ".", "float", "(", ")", "# What scales to use for localization", "\n", "params", ".", "score_upsample_factor", "=", "1", "# How much Fourier upsampling to use", "\n", "params", ".", "score_fusion_strategy", "=", "'weightedsum'", "# Fusion strategy", "\n", "shallow_params", ".", "translation_weight", "=", "0.4", "# Weight of this feature", "\n", "deep_params", ".", "translation_weight", "=", "1", "-", "shallow_params", ".", "translation_weight", "\n", "\n", "# Init augmentation parameters", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "5", ",", "-", "5", ",", "10", ",", "-", "10", ",", "20", ",", "-", "20", ",", "30", ",", "-", "30", ",", "45", ",", "-", "45", ",", "-", "60", ",", "60", "]", ",", "\n", "'blur'", ":", "[", "(", "2", ",", "0.2", ")", ",", "(", "0.2", ",", "2", ")", ",", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'shift'", ":", "[", "(", "6", ",", "6", ")", ",", "(", "-", "6", ",", "6", ")", ",", "(", "6", ",", "-", "6", ")", ",", "(", "-", "6", ",", "-", "6", ")", "]", ",", "\n", "'dropout'", ":", "(", "7", ",", "0.2", ")", "}", "\n", "\n", "# Whether to use augmentation for this feature", "\n", "deep_params", ".", "use_augmentation", "=", "True", "\n", "shallow_params", ".", "use_augmentation", "=", "True", "\n", "\n", "# Factorized convolution parameters", "\n", "# params.use_projection_matrix = True    # Use projection matrix, i.e. use the factorized convolution formulation", "\n", "params", ".", "update_projection_matrix", "=", "True", "# Whether the projection matrix should be optimized or not", "\n", "# params.proj_init_method = 'pca'        # Method for initializing the projection matrix", "\n", "params", ".", "projection_reg", "=", "5e-8", "# Regularization paremeter of the projection matrix", "\n", "shallow_params", ".", "compressed_dim", "=", "16", "# Dimension output of projection matrix for shallow features", "\n", "deep_params", ".", "compressed_dim", "=", "64", "# Dimension output of projection matrix for deep features", "\n", "\n", "# Interpolation parameters", "\n", "params", ".", "interpolation_method", "=", "'bicubic'", "# The kind of interpolation kernel", "\n", "params", ".", "interpolation_bicubic_a", "=", "-", "0.75", "# The parameter for the bicubic interpolation kernel", "\n", "params", ".", "interpolation_centering", "=", "True", "# Center the kernel at the feature sample", "\n", "params", ".", "interpolation_windowing", "=", "False", "# Do additional windowing on the Fourier coefficients of the kernel", "\n", "\n", "# Regularization parameters", "\n", "shallow_params", ".", "use_reg_window", "=", "True", "# Use spatial regularization or not", "\n", "shallow_params", ".", "reg_window_min", "=", "1e-4", "# The minimum value of the regularization window", "\n", "shallow_params", ".", "reg_window_edge", "=", "10e-3", "# The impact of the spatial regularization", "\n", "shallow_params", ".", "reg_window_power", "=", "2", "# The degree of the polynomial to use (e.g. 2 is a quadratic window)", "\n", "shallow_params", ".", "reg_sparsity_threshold", "=", "0.05", "# A relative threshold of which DFT coefficients that should be set to zero", "\n", "\n", "deep_params", ".", "use_reg_window", "=", "True", "# Use spatial regularization or not", "\n", "deep_params", ".", "reg_window_min", "=", "10e-4", "# The minimum value of the regularization window", "\n", "deep_params", ".", "reg_window_edge", "=", "50e-3", "# The impact of the spatial regularization", "\n", "deep_params", ".", "reg_window_power", "=", "2", "# The degree of the polynomial to use (e.g. 2 is a quadratic window)", "\n", "deep_params", ".", "reg_sparsity_threshold", "=", "0.1", "# A relative threshold of which DFT coefficients that should be set to zero", "\n", "\n", "\n", "fparams", "=", "FeatureParams", "(", "feature_params", "=", "[", "shallow_params", ",", "deep_params", "]", ")", "\n", "features", "=", "deep", ".", "ResNet18m1", "(", "output_layers", "=", "[", "'vggconv1'", ",", "'layer3'", "]", ",", "use_gpu", "=", "params", ".", "use_gpu", ",", "fparams", "=", "fparams", ",", "\n", "pool_stride", "=", "[", "2", ",", "1", "]", ",", "normalize_power", "=", "2", ")", "\n", "\n", "params", ".", "features", "=", "MultiResolutionExtractor", "(", "[", "features", "]", ")", "\n", "\n", "return", "params", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.__init__.get_tracker_class": [[3, 5], ["None"], "function", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FactorizedConvProblem.__init__": [[9, 32], ["pytracking.complex.complex().permute", "pytracking.complex.mtimes", "pytracking.complex.abs_sqr().mean().permute", "optim.FactorizedConvProblem.diag_M.unsqueeze_", "optim.FactorizedConvProblem.diag_M.extend", "sample_weights.sqrt", "optim.FactorizedConvProblem.reg_filter.view", "optim.FactorizedConvProblem.reg_filter.view", "optim.FactorizedConvProblem.training_samples.size", "pytracking.complex.complex", "pytracking.complex.abs_sqr().mean", "pytracking.fourier.inner_prod_fs", "pytracking.complex.abs_sqr", "optim.FactorizedConvProblem.sample_energy.mean"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mtimes", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.complex", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.inner_prod_fs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs_sqr", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], ["    ", "def", "__init__", "(", "self", ",", "training_samples", ":", "TensorList", ",", "yf", ":", "TensorList", ",", "reg_filter", ":", "torch", ".", "Tensor", ",", "init_proj_mat", ":", "TensorList", ",", "params", ",", "sample_weights", ":", "torch", ".", "Tensor", "=", "None", ")", ":", "\n", "        ", "self", ".", "training_samples", "=", "training_samples", "\n", "self", ".", "yf", "=", "complex", ".", "complex", "(", "yf", ")", ".", "permute", "(", "2", ",", "3", ",", "0", ",", "1", ",", "4", ")", "\n", "self", ".", "reg_filter", "=", "reg_filter", "\n", "self", ".", "sample_weights_sqrt", "=", "None", "if", "sample_weights", "is", "None", "else", "sample_weights", ".", "sqrt", "(", ")", "\n", "self", ".", "params", "=", "params", "\n", "\n", "# Sample energy for preconditioner", "\n", "compressed_samples", "=", "complex", ".", "mtimes", "(", "self", ".", "training_samples", ",", "init_proj_mat", ")", "\n", "self", ".", "sample_energy", "=", "complex", ".", "abs_sqr", "(", "compressed_samples", ")", ".", "mean", "(", "dim", "=", "2", ",", "keepdim", "=", "True", ")", ".", "permute", "(", "2", ",", "3", ",", "0", ",", "1", ")", "\n", "self", ".", "reg_energy", "=", "self", ".", "reg_filter", ".", "view", "(", "-", "1", ")", "@", "self", ".", "reg_filter", ".", "view", "(", "-", "1", ")", "\n", "\n", "# Projection energy for preconditioner", "\n", "self", ".", "proj_energy", "=", "2", "*", "fourier", ".", "inner_prod_fs", "(", "yf", ",", "yf", ")", "/", "self", ".", "training_samples", ".", "size", "(", "3", ")", "\n", "\n", "# Filter part of preconditioner", "\n", "self", ".", "diag_M", "=", "(", "1", "-", "self", ".", "params", ".", "precond_reg_param", ")", "*", "(", "self", ".", "params", ".", "precond_data_param", "*", "self", ".", "sample_energy", "+", "\n", "(", "1", "-", "self", ".", "params", ".", "precond_data_param", ")", "*", "self", ".", "sample_energy", ".", "mean", "(", "1", ",", "keepdim", "=", "True", ")", ")", "+", "self", ".", "params", ".", "precond_reg_param", "*", "self", ".", "reg_energy", "\n", "self", ".", "diag_M", ".", "unsqueeze_", "(", "-", "1", ")", "\n", "\n", "# Projection matrix part of preconditioner", "\n", "self", ".", "diag_M", ".", "extend", "(", "self", ".", "params", ".", "precond_proj_param", "*", "(", "self", ".", "proj_energy", "+", "self", ".", "params", ".", "projection_reg", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FactorizedConvProblem.__call__": [[34, 75], ["pytracking.complex.mtimes", "pytracking.complex.mtimes", "zip", "pytracking.complex.mult.extend", "hf.permute", "pytracking.complex.mult", "min", "min", "hfe.clone.permute().reshape", "torch.conv2d", "torch.conv2d", "pytracking.complex.mult.append", "optim.FactorizedConvProblem.sample_weights_sqrt.view", "pytracking.complex.conj", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "hfe.clone", "math.sqrt", "len", "len", "hfe[].clone().detach().flip", "hfe.clone.permute", "hfe[].clone().detach", "hfe[].clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mtimes", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mtimes", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.conj"], ["", "def", "__call__", "(", "self", ",", "x", ":", "TensorList", ")", ":", "\n", "        ", "\"\"\"\n        Compute residuals\n        :param x: [filters, projection_matrices]\n        :return: [data_terms, filter_regularizations, proj_mat_regularizations]\n        \"\"\"", "\n", "hf", "=", "x", "[", ":", "len", "(", "x", ")", "//", "2", "]", "\n", "P", "=", "x", "[", "len", "(", "x", ")", "//", "2", ":", "]", "\n", "\n", "compressed_samples", "=", "complex", ".", "mtimes", "(", "self", ".", "training_samples", ",", "P", ")", "\n", "residuals", "=", "complex", ".", "mtimes", "(", "compressed_samples", ",", "hf", ".", "permute", "(", "2", ",", "3", ",", "1", ",", "0", ",", "4", ")", ")", "# (h, w, num_samp, num_filt, 2)", "\n", "residuals", "=", "residuals", "-", "self", ".", "yf", "\n", "\n", "if", "self", ".", "sample_weights_sqrt", "is", "not", "None", ":", "\n", "            ", "residuals", "=", "complex", ".", "mult", "(", "self", ".", "sample_weights_sqrt", ".", "view", "(", "1", ",", "1", ",", "-", "1", ",", "1", ")", ",", "residuals", ")", "\n", "\n", "\n", "# Add spatial regularization", "\n", "", "for", "hfe", ",", "reg_filter", "in", "zip", "(", "hf", ",", "self", ".", "reg_filter", ")", ":", "\n", "            ", "reg_pad1", "=", "min", "(", "reg_filter", ".", "shape", "[", "-", "2", "]", "-", "1", ",", "hfe", ".", "shape", "[", "-", "3", "]", "-", "1", ")", "\n", "reg_pad2", "=", "min", "(", "reg_filter", ".", "shape", "[", "-", "1", "]", "-", "1", ",", "hfe", ".", "shape", "[", "-", "2", "]", "-", "1", ")", "\n", "\n", "# Add part needed for convolution", "\n", "if", "reg_pad2", ">", "0", ":", "\n", "                ", "hfe_left_padd", "=", "complex", ".", "conj", "(", "hfe", "[", "...", ",", "1", ":", "reg_pad2", "+", "1", ",", ":", "]", ".", "clone", "(", ")", ".", "detach", "(", ")", ".", "flip", "(", "(", "2", ",", "3", ")", ")", ")", "\n", "hfe_conv", "=", "torch", ".", "cat", "(", "[", "hfe_left_padd", ",", "hfe", "]", ",", "-", "2", ")", "\n", "", "else", ":", "\n", "                ", "hfe_conv", "=", "hfe", ".", "clone", "(", ")", "\n", "\n", "# Shift data to batch dimension", "\n", "", "hfe_conv", "=", "hfe_conv", ".", "permute", "(", "0", ",", "1", ",", "4", ",", "2", ",", "3", ")", ".", "reshape", "(", "-", "1", ",", "1", ",", "hfe_conv", ".", "shape", "[", "-", "3", "]", ",", "hfe_conv", ".", "shape", "[", "-", "2", "]", ")", "\n", "\n", "# Do first convolution", "\n", "hfe_conv", "=", "F", ".", "conv2d", "(", "hfe_conv", ",", "reg_filter", ",", "padding", "=", "(", "reg_pad1", ",", "reg_pad2", ")", ")", "\n", "\n", "residuals", ".", "append", "(", "hfe_conv", ")", "\n", "\n", "# Add regularization for projection matrix", "\n", "", "residuals", ".", "extend", "(", "math", ".", "sqrt", "(", "self", ".", "params", ".", "projection_reg", ")", "*", "P", ")", "\n", "\n", "return", "residuals", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FactorizedConvProblem.ip_input": [[77, 92], ["pytracking.fourier.inner_prod_fs", "pytracking.fourier.inner_prod_fs.concat", "len", "a_P.reshape", "b_P.reshape", "pytracking.fourier.inner_prod_fs.clone"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.inner_prod_fs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.concat"], ["", "def", "ip_input", "(", "self", ",", "a", ":", "TensorList", ",", "b", ":", "TensorList", ")", ":", "\n", "        ", "num", "=", "len", "(", "a", ")", "//", "2", "# Number of filters", "\n", "a_filter", "=", "a", "[", ":", "num", "]", "\n", "b_filter", "=", "b", "[", ":", "num", "]", "\n", "a_P", "=", "a", "[", "num", ":", "]", "\n", "b_P", "=", "b", "[", "num", ":", "]", "\n", "\n", "# Filter inner product", "\n", "ip_out", "=", "fourier", ".", "inner_prod_fs", "(", "a_filter", ",", "b_filter", ")", "\n", "\n", "# Add projection matrix part", "\n", "ip_out", "+=", "a_P", ".", "reshape", "(", "-", "1", ")", "@", "b_P", ".", "reshape", "(", "-", "1", ")", "\n", "\n", "# Have independent inner products for each filter", "\n", "return", "ip_out", ".", "concat", "(", "ip_out", ".", "clone", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FactorizedConvProblem.ip_output": [[94, 115], ["a[].permute", "b[].permute", "sum", "sum.new_zeros", "zip", "sum", "len", "pytracking.fourier.inner_prod_fs", "min", "ar.reshape().permute", "br.reshape().permute", "pytracking.fourier.inner_prod_fs", "a_P_reg.view", "b_P_reg.view", "ar.reshape", "br.reshape"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.inner_prod_fs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.inner_prod_fs"], ["", "def", "ip_output", "(", "self", ",", "a", ":", "TensorList", ",", "b", ":", "TensorList", ")", ":", "\n", "        ", "num", "=", "len", "(", "a", ")", "//", "3", "# Number of filters", "\n", "a_data", "=", "a", "[", ":", "num", "]", ".", "permute", "(", "2", ",", "3", ",", "0", ",", "1", ",", "4", ")", "\n", "b_data", "=", "b", "[", ":", "num", "]", ".", "permute", "(", "2", ",", "3", ",", "0", ",", "1", ",", "4", ")", "\n", "a_filt_reg", "=", "a", "[", "num", ":", "2", "*", "num", "]", "\n", "b_filt_reg", "=", "b", "[", "num", ":", "2", "*", "num", "]", "\n", "a_P_reg", "=", "a", "[", "2", "*", "num", ":", "]", "\n", "b_P_reg", "=", "b", "[", "2", "*", "num", ":", "]", "\n", "\n", "ip_data", "=", "sum", "(", "fourier", ".", "inner_prod_fs", "(", "a_data", ",", "b_data", ")", ")", "\n", "ip_filt_reg", "=", "ip_data", ".", "new_zeros", "(", "1", ")", "\n", "\n", "for", "ar", ",", "br", ",", "res_data", ",", "reg_filter", "in", "zip", "(", "a_filt_reg", ",", "b_filt_reg", ",", "a_data", ",", "self", ".", "reg_filter", ")", ":", "\n", "            ", "reg_pad2", "=", "min", "(", "reg_filter", ".", "shape", "[", "-", "1", "]", "-", "1", ",", "res_data", ".", "shape", "[", "-", "2", "]", "-", "1", ")", "\n", "arp", "=", "ar", ".", "reshape", "(", "1", ",", "-", "1", ",", "2", ",", "ar", ".", "shape", "[", "2", "]", ",", "ar", ".", "shape", "[", "3", "]", ")", ".", "permute", "(", "0", ",", "1", ",", "3", ",", "4", ",", "2", ")", "\n", "brp", "=", "br", ".", "reshape", "(", "1", ",", "-", "1", ",", "2", ",", "br", ".", "shape", "[", "2", "]", ",", "br", ".", "shape", "[", "3", "]", ")", ".", "permute", "(", "0", ",", "1", ",", "3", ",", "4", ",", "2", ")", "\n", "ip_filt_reg", "+=", "fourier", ".", "inner_prod_fs", "(", "arp", "[", ":", ",", ":", ",", ":", ",", "2", "*", "reg_pad2", ":", ",", ":", "]", ",", "brp", "[", ":", ",", ":", ",", ":", ",", "2", "*", "reg_pad2", ":", ",", ":", "]", ")", "\n", "\n", "", "ip_P_reg", "=", "sum", "(", "a_P_reg", ".", "view", "(", "-", "1", ")", "@", "b_P_reg", ".", "view", "(", "-", "1", ")", ")", "\n", "\n", "return", "ip_data", "+", "ip_filt_reg", "+", "ip_P_reg", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FactorizedConvProblem.M1": [[117, 119], ["None"], "methods", ["None"], ["", "def", "M1", "(", "self", ",", "x", ":", "TensorList", ")", ":", "\n", "        ", "return", "x", "/", "self", ".", "diag_M", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.__init__": [[122, 132], ["pytracking.optimization.ConjugateGradientBase.__init__", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "params", ",", "reg_energy", ")", ":", "\n", "        ", "super", "(", "FilterOptim", ",", "self", ")", ".", "__init__", "(", "params", ".", "fletcher_reeves", ",", "params", ".", "standard_alpha", ",", "params", ".", "direction_forget_factor", ",", "(", "params", ".", "debug", ">=", "3", ")", ")", "\n", "\n", "# Parameters", "\n", "self", ".", "params", "=", "params", "\n", "\n", "self", ".", "reg_energy", "=", "reg_energy", "\n", "self", ".", "sample_energy", "=", "None", "\n", "\n", "self", ".", "residuals", "=", "torch", ".", "zeros", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register": [[134, 140], ["None"], "methods", ["None"], ["", "def", "register", "(", "self", ",", "filter", ",", "training_samples", ",", "yf", ",", "sample_weights", ",", "reg_filter", ")", ":", "\n", "        ", "self", ".", "filter", "=", "filter", "\n", "self", ".", "training_samples", "=", "training_samples", "# (h, w, num_samples, num_channels, 2)", "\n", "self", ".", "yf", "=", "yf", "\n", "self", ".", "sample_weights", "=", "sample_weights", "\n", "self", ".", "reg_filter", "=", "reg_filter", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.run": [[142, 165], ["pytracking.complex.mtimes().permute", "pytracking.complex.mult_conj", "optim.FilterOptim.run_CG", "pytracking.complex.abs_sqr", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "pytracking.utils.plotting.plot_graph", "pytracking.complex.mtimes", "optim.FilterOptim.sample_weights.view", "optim.FilterOptim.sample_energy.mean"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult_conj", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.run_CG", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs_sqr", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.plot_graph", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mtimes", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], ["", "def", "run", "(", "self", ",", "num_iter", ",", "new_xf", ":", "TensorList", "=", "None", ")", ":", "\n", "        ", "if", "num_iter", "==", "0", ":", "\n", "            ", "return", "\n", "\n", "", "if", "new_xf", "is", "not", "None", ":", "\n", "            ", "new_sample_energy", "=", "complex", ".", "abs_sqr", "(", "new_xf", ")", "\n", "if", "self", ".", "sample_energy", "is", "None", ":", "\n", "                ", "self", ".", "sample_energy", "=", "new_sample_energy", "\n", "", "else", ":", "\n", "                ", "self", ".", "sample_energy", "=", "(", "1", "-", "self", ".", "params", ".", "precond_learning_rate", ")", "*", "self", ".", "sample_energy", "+", "self", ".", "params", ".", "precond_learning_rate", "*", "new_sample_energy", "\n", "\n", "# Compute right hand side", "\n", "", "", "self", ".", "b", "=", "complex", ".", "mtimes", "(", "self", ".", "sample_weights", ".", "view", "(", "1", ",", "1", ",", "1", ",", "-", "1", ")", ",", "self", ".", "training_samples", ")", ".", "permute", "(", "2", ",", "3", ",", "0", ",", "1", ",", "4", ")", "\n", "self", ".", "b", "=", "complex", ".", "mult_conj", "(", "self", ".", "yf", ",", "self", ".", "b", ")", "\n", "\n", "self", ".", "diag_M", "=", "(", "1", "-", "self", ".", "params", ".", "precond_reg_param", ")", "*", "(", "self", ".", "params", ".", "precond_data_param", "*", "self", ".", "sample_energy", "+", "\n", "(", "1", "-", "self", ".", "params", ".", "precond_data_param", ")", "*", "self", ".", "sample_energy", ".", "mean", "(", "1", ",", "keepdim", "=", "True", ")", ")", "+", "self", ".", "params", ".", "precond_reg_param", "*", "self", ".", "reg_energy", "\n", "\n", "_", ",", "res", "=", "self", ".", "run_CG", "(", "num_iter", ",", "self", ".", "filter", ")", "\n", "\n", "if", "self", ".", "debug", ":", "\n", "            ", "self", ".", "residuals", "=", "torch", ".", "cat", "(", "(", "self", ".", "residuals", ",", "res", ")", ")", "\n", "plot_graph", "(", "self", ".", "residuals", ",", "9", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.A": [[168, 201], ["pytracking.complex.mtimes", "pytracking.complex.mult", "pytracking.complex.mtimes().permute", "zip", "hf.permute", "optim.FilterOptim.sample_weights.view", "min", "min", "hfe.clone.permute().reshape", "torch.conv2d", "torch.conv2d", "min", "torch.conv2d", "torch.conv2d", "hfe.clone.reshape().permute", "pytracking.complex.mtimes", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "hfe.clone", "pytracking.complex.mult.permute", "hfe.clone.permute", "hfe.clone.reshape", "pytracking.complex.conj", "hfe[].flip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mtimes", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mtimes", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.conj"], ["", "", "def", "A", "(", "self", ",", "hf", ":", "TensorList", ")", ":", "\n", "# Classify", "\n", "        ", "sh", "=", "complex", ".", "mtimes", "(", "self", ".", "training_samples", ",", "hf", ".", "permute", "(", "2", ",", "3", ",", "1", ",", "0", ",", "4", ")", ")", "# (h, w, num_samp, num_filt, 2)", "\n", "sh", "=", "complex", ".", "mult", "(", "self", ".", "sample_weights", ".", "view", "(", "1", ",", "1", ",", "-", "1", ",", "1", ")", ",", "sh", ")", "\n", "\n", "# Multiply with transpose", "\n", "hf_out", "=", "complex", ".", "mtimes", "(", "sh", ".", "permute", "(", "0", ",", "1", ",", "3", ",", "2", ",", "4", ")", ",", "self", ".", "training_samples", ",", "conj_b", "=", "True", ")", ".", "permute", "(", "2", ",", "3", ",", "0", ",", "1", ",", "4", ")", "\n", "\n", "# Add regularization", "\n", "for", "hfe", ",", "hfe_out", ",", "reg_filter", "in", "zip", "(", "hf", ",", "hf_out", ",", "self", ".", "reg_filter", ")", ":", "\n", "            ", "reg_pad1", "=", "min", "(", "reg_filter", ".", "shape", "[", "-", "2", "]", "-", "1", ",", "hfe", ".", "shape", "[", "-", "3", "]", "-", "1", ")", "\n", "reg_pad2", "=", "min", "(", "reg_filter", ".", "shape", "[", "-", "1", "]", "-", "1", ",", "2", "*", "hfe", ".", "shape", "[", "-", "2", "]", "-", "2", ")", "\n", "\n", "# Add part needed for convolution", "\n", "if", "reg_pad2", ">", "0", ":", "\n", "                ", "hfe_conv", "=", "torch", ".", "cat", "(", "[", "complex", ".", "conj", "(", "hfe", "[", "...", ",", "1", ":", "reg_pad2", "+", "1", ",", ":", "]", ".", "flip", "(", "(", "2", ",", "3", ")", ")", ")", ",", "hfe", "]", ",", "-", "2", ")", "\n", "", "else", ":", "\n", "                ", "hfe_conv", "=", "hfe", ".", "clone", "(", ")", "\n", "\n", "# Shift data to batch dimension", "\n", "", "hfe_conv", "=", "hfe_conv", ".", "permute", "(", "0", ",", "1", ",", "4", ",", "2", ",", "3", ")", ".", "reshape", "(", "-", "1", ",", "1", ",", "hfe_conv", ".", "shape", "[", "-", "3", "]", ",", "hfe_conv", ".", "shape", "[", "-", "2", "]", ")", "\n", "\n", "# Do first convolution", "\n", "hfe_conv", "=", "F", ".", "conv2d", "(", "hfe_conv", ",", "reg_filter", ",", "padding", "=", "(", "reg_pad1", ",", "reg_pad2", ")", ")", "\n", "\n", "# Do second convolution", "\n", "remove_size", "=", "min", "(", "reg_pad2", ",", "hfe", ".", "shape", "[", "-", "2", "]", "-", "1", ")", "\n", "hfe_conv", "=", "F", ".", "conv2d", "(", "hfe_conv", "[", "...", ",", "remove_size", ":", "]", ",", "reg_filter", ")", "\n", "\n", "# Reshape back and add", "\n", "hfe_out", "+=", "hfe_conv", ".", "reshape", "(", "hfe", ".", "shape", "[", "0", "]", ",", "hfe", ".", "shape", "[", "1", "]", ",", "2", ",", "hfe", ".", "shape", "[", "2", "]", ",", "hfe", ".", "shape", "[", "3", "]", ")", ".", "permute", "(", "0", ",", "1", ",", "3", ",", "4", ",", "2", ")", "\n", "\n", "", "return", "hf_out", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.ip": [[203, 205], ["pytracking.fourier.inner_prod_fs"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.inner_prod_fs"], ["", "def", "ip", "(", "self", ",", "a", ":", "torch", ".", "Tensor", ",", "b", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "return", "fourier", ".", "inner_prod_fs", "(", "a", ",", "b", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.M1": [[207, 209], ["pytracking.complex.div"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.div"], ["", "def", "M1", "(", "self", ",", "hf", ")", ":", "\n", "        ", "return", "complex", ".", "div", "(", "hf", ",", "self", ".", "diag_M", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.eco.ECO.initialize_features": [[19, 23], ["getattr", "eco.ECO.params.features.initialize"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize"], ["def", "initialize_features", "(", "self", ")", ":", "\n", "        ", "if", "not", "getattr", "(", "self", ",", "'features_initialized'", ",", "False", ")", ":", "\n", "            ", "self", ".", "params", ".", "features", ".", "initialize", "(", ")", "\n", "", "self", ".", "features_initialized", "=", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.eco.ECO.initialize": [[25, 178], ["eco.ECO.initialize_features", "eco.ECO.params.features.set_is_color", "eco.ECO.params.features.get_fparams", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.prod().item", "torch.prod().item", "torch.prod().item", "torch.prod().item", "max", "eco.ECO.params.features.size", "eco.ECO.fparams.attribute", "len", "pytracking.TensorList", "pytracking.TensorList", "pytracking.TensorList", "eco.ECO.fparams.attribute", "pytracking.TensorList", "eco.ECO.fparams.attribute", "pytracking.features.preprocessing.numpy_to_torch", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.max", "torch.max", "torch.max", "torch.max", "torch.min", "torch.min", "torch.min", "torch.min", "eco.ECO.generate_init_samples", "pytracking.TensorList", "pytracking.TensorList.mean", "pytracking.TensorList", "eco.ECO.preprocess_sample", "pytracking.fourier.shift_fs", "pytracking.fourier.shift_fs.size", "pytracking.TensorList", "pytracking.fourier.shift_fs.permute", "pytracking.TensorList", "zip", "pytracking.TensorList", "pytracking.TensorList", "optim.FactorizedConvProblem", "eco.ECO.filter.concat", "pytracking.libs.optimization.GaussNewtonCG", "pytracking.complex.mtimes", "zip", "optim.FilterOptim", "eco.ECO.filter_optimizer.register", "eco.ECO.joint_optimizer.residuals.clone", "eco.ECO.filter_optimizer.run", "eco.ECO.symmetrize_filter", "eco.ECO.params.has", "math.sqrt", "eco.ECO.params.features.stride", "torch.round", "torch.round", "torch.round", "torch.round", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "eco.ECO.reg_filter.view", "eco.ECO.reg_filter.view", "pytracking.TensorList.t", "len", "eco.ECO.joint_optimizer.run", "eco.ECO.filter_optimizer.run", "torch.prod", "torch.prod", "torch.prod", "torch.prod", "math.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "pytracking.dcf.hann2d().to", "pytracking.dcf.get_interp_fourier", "pytracking.dcf.get_reg_filter().to", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "pytracking.dcf.label_function().to", "max", "e.permute().reshape().clone", "[].clone", "enumerate", "xf.new_zeros", "xf.new_zeros", "xf.new_zeros", "torch.prod", "torch.prod", "torch.prod", "torch.prod", "eco.ECO.base_target_sz.prod", "zip", "max", "zip", "pytracking.fourier.shift_fs", "eco.ECO.pos.round", "xf.new_ones", "zip", "zip", "pytracking.dcf.hann2d", "pytracking.dcf.get_reg_filter", "pytracking.dcf.label_function", "e.permute().reshape", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "e.permute", "torch.svd", "torch.svd", "torch.svd", "torch.svd"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.initialize_features", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.set_is_color", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.get_fparams", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute", "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.numpy_to_torch", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.generate_init_samples", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.preprocess_sample", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.shift_fs", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.concat", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mtimes", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.run", "home.repos.pwc.inspect_result.researchmm_Stark.eco.eco.ECO.symmetrize_filter", "home.repos.pwc.inspect_result.researchmm_Stark.utils.params.TrackerParams.has", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.stride", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.run", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.run", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.get_interp_fourier", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.shift_fs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.hann2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.get_reg_filter", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.label_function"], ["", "def", "initialize", "(", "self", ",", "image", ",", "info", ":", "dict", ")", "->", "dict", ":", "\n", "        ", "state", "=", "info", "[", "'init_bbox'", "]", "\n", "\n", "# Initialize some stuff", "\n", "self", ".", "frame_num", "=", "1", "\n", "if", "not", "self", ".", "params", ".", "has", "(", "'device'", ")", ":", "\n", "            ", "self", ".", "params", ".", "device", "=", "'cuda'", "if", "self", ".", "params", ".", "use_gpu", "else", "'cpu'", "\n", "\n", "# Initialize features", "\n", "", "self", ".", "initialize_features", "(", ")", "\n", "\n", "# Chack if image is color", "\n", "self", ".", "params", ".", "features", ".", "set_is_color", "(", "image", ".", "shape", "[", "2", "]", "==", "3", ")", "\n", "\n", "# Get feature specific params", "\n", "self", ".", "fparams", "=", "self", ".", "params", ".", "features", ".", "get_fparams", "(", "'feature_params'", ")", "\n", "\n", "# Get position and size", "\n", "self", ".", "pos", "=", "torch", ".", "Tensor", "(", "[", "state", "[", "1", "]", "+", "(", "state", "[", "3", "]", "-", "1", ")", "/", "2", ",", "state", "[", "0", "]", "+", "(", "state", "[", "2", "]", "-", "1", ")", "/", "2", "]", ")", "\n", "self", ".", "target_sz", "=", "torch", ".", "Tensor", "(", "[", "state", "[", "3", "]", ",", "state", "[", "2", "]", "]", ")", "\n", "\n", "# Set search area", "\n", "self", ".", "target_scale", "=", "1.0", "\n", "search_area", "=", "torch", ".", "prod", "(", "self", ".", "target_sz", "*", "self", ".", "params", ".", "search_area_scale", ")", ".", "item", "(", ")", "\n", "if", "search_area", ">", "self", ".", "params", ".", "max_image_sample_size", ":", "\n", "            ", "self", ".", "target_scale", "=", "math", ".", "sqrt", "(", "search_area", "/", "self", ".", "params", ".", "max_image_sample_size", ")", "\n", "", "elif", "search_area", "<", "self", ".", "params", ".", "min_image_sample_size", ":", "\n", "            ", "self", ".", "target_scale", "=", "math", ".", "sqrt", "(", "search_area", "/", "self", ".", "params", ".", "min_image_sample_size", ")", "\n", "\n", "# Target size in base scale", "\n", "", "self", ".", "base_target_sz", "=", "self", ".", "target_sz", "/", "self", ".", "target_scale", "\n", "\n", "# Use odd square search area and set sizes", "\n", "feat_max_stride", "=", "max", "(", "self", ".", "params", ".", "features", ".", "stride", "(", ")", ")", "\n", "self", ".", "img_sample_sz", "=", "torch", ".", "round", "(", "torch", ".", "sqrt", "(", "torch", ".", "prod", "(", "self", ".", "base_target_sz", "*", "self", ".", "params", ".", "search_area_scale", ")", ")", ")", "*", "torch", ".", "ones", "(", "2", ")", "\n", "self", ".", "img_sample_sz", "+=", "feat_max_stride", "-", "self", ".", "img_sample_sz", "%", "(", "2", "*", "feat_max_stride", ")", "\n", "\n", "# Set other sizes (corresponds to ECO code)", "\n", "self", ".", "img_support_sz", "=", "self", ".", "img_sample_sz", "\n", "self", ".", "feature_sz", "=", "self", ".", "params", ".", "features", ".", "size", "(", "self", ".", "img_sample_sz", ")", "\n", "self", ".", "filter_sz", "=", "self", ".", "feature_sz", "+", "(", "self", ".", "feature_sz", "+", "1", ")", "%", "2", "\n", "self", ".", "output_sz", "=", "self", ".", "params", ".", "score_upsample_factor", "*", "self", ".", "img_support_sz", "# Interpolated size of the output", "\n", "self", ".", "compressed_dim", "=", "self", ".", "fparams", ".", "attribute", "(", "'compressed_dim'", ")", "\n", "\n", "# Number of filters", "\n", "self", ".", "num_filters", "=", "len", "(", "self", ".", "filter_sz", ")", "\n", "\n", "# Get window function", "\n", "self", ".", "window", "=", "TensorList", "(", "[", "dcf", ".", "hann2d", "(", "sz", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "for", "sz", "in", "self", ".", "feature_sz", "]", ")", "\n", "\n", "# Get interpolation function", "\n", "self", ".", "interp_fs", "=", "TensorList", "(", "[", "dcf", ".", "get_interp_fourier", "(", "sz", ",", "self", ".", "params", ".", "interpolation_method", ",", "\n", "self", ".", "params", ".", "interpolation_bicubic_a", ",", "self", ".", "params", ".", "interpolation_centering", ",", "\n", "self", ".", "params", ".", "interpolation_windowing", ",", "self", ".", "params", ".", "device", ")", "for", "sz", "in", "self", ".", "filter_sz", "]", ")", "\n", "\n", "# Get regularization filter", "\n", "self", ".", "reg_filter", "=", "TensorList", "(", "[", "dcf", ".", "get_reg_filter", "(", "self", ".", "img_support_sz", ",", "self", ".", "base_target_sz", ",", "fparams", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "\n", "for", "fparams", "in", "self", ".", "fparams", "]", ")", "\n", "self", ".", "reg_energy", "=", "self", ".", "reg_filter", ".", "view", "(", "-", "1", ")", "@", "self", ".", "reg_filter", ".", "view", "(", "-", "1", ")", "\n", "\n", "# Get label function", "\n", "output_sigma_factor", "=", "self", ".", "fparams", ".", "attribute", "(", "'output_sigma_factor'", ")", "\n", "sigma", "=", "(", "self", ".", "filter_sz", "/", "self", ".", "img_support_sz", ")", "*", "torch", ".", "sqrt", "(", "self", ".", "base_target_sz", ".", "prod", "(", ")", ")", "*", "output_sigma_factor", "\n", "self", ".", "yf", "=", "TensorList", "(", "[", "dcf", ".", "label_function", "(", "sz", ",", "sig", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "for", "sz", ",", "sig", "in", "zip", "(", "self", ".", "filter_sz", ",", "sigma", ")", "]", ")", "\n", "\n", "# Optimization options", "\n", "self", ".", "params", ".", "precond_learning_rate", "=", "self", ".", "fparams", ".", "attribute", "(", "'learning_rate'", ")", "\n", "if", "self", ".", "params", ".", "CG_forgetting_rate", "is", "None", "or", "max", "(", "self", ".", "params", ".", "precond_learning_rate", ")", ">=", "1", ":", "\n", "            ", "self", ".", "params", ".", "direction_forget_factor", "=", "0", "\n", "", "else", ":", "\n", "            ", "self", ".", "params", ".", "direction_forget_factor", "=", "(", "1", "-", "max", "(", "self", ".", "params", ".", "precond_learning_rate", ")", ")", "**", "self", ".", "params", ".", "CG_forgetting_rate", "\n", "\n", "\n", "# Convert image", "\n", "", "im", "=", "numpy_to_torch", "(", "image", ")", "\n", "\n", "# Setup bounds", "\n", "self", ".", "image_sz", "=", "torch", ".", "Tensor", "(", "[", "im", ".", "shape", "[", "2", "]", ",", "im", ".", "shape", "[", "3", "]", "]", ")", "\n", "self", ".", "min_scale_factor", "=", "torch", ".", "max", "(", "10", "/", "self", ".", "base_target_sz", ")", "\n", "self", ".", "max_scale_factor", "=", "torch", ".", "min", "(", "self", ".", "image_sz", "/", "self", ".", "base_target_sz", ")", "\n", "\n", "# Extract and transform sample", "\n", "x", "=", "self", ".", "generate_init_samples", "(", "im", ")", "\n", "\n", "# Initialize projection matrix", "\n", "x_mat", "=", "TensorList", "(", "[", "e", ".", "permute", "(", "1", ",", "0", ",", "2", ",", "3", ")", ".", "reshape", "(", "e", ".", "shape", "[", "1", "]", ",", "-", "1", ")", ".", "clone", "(", ")", "for", "e", "in", "x", "]", ")", "\n", "x_mat", "-=", "x_mat", ".", "mean", "(", "dim", "=", "1", ",", "keepdim", "=", "True", ")", "\n", "cov_x", "=", "x_mat", "@", "x_mat", ".", "t", "(", ")", "\n", "self", ".", "projection_matrix", "=", "TensorList", "(", "[", "torch", ".", "svd", "(", "C", ")", "[", "0", "]", "[", ":", ",", ":", "cdim", "]", ".", "clone", "(", ")", "for", "C", ",", "cdim", "in", "zip", "(", "cov_x", ",", "self", ".", "compressed_dim", ")", "]", ")", "\n", "\n", "# Transform to get the training sample", "\n", "train_xf", "=", "self", ".", "preprocess_sample", "(", "x", ")", "\n", "\n", "# Shift the samples back", "\n", "if", "'shift'", "in", "self", ".", "params", ".", "augmentation", ":", "\n", "            ", "for", "xf", "in", "train_xf", ":", "\n", "                ", "if", "xf", ".", "shape", "[", "0", "]", "==", "1", ":", "\n", "                    ", "continue", "\n", "", "for", "i", ",", "shift", "in", "enumerate", "(", "self", ".", "params", ".", "augmentation", "[", "'shift'", "]", ")", ":", "\n", "                    ", "shift_samp", "=", "2", "*", "math", ".", "pi", "*", "torch", ".", "Tensor", "(", "shift", ")", "/", "self", ".", "img_support_sz", "\n", "xf", "[", "1", "+", "i", ":", "2", "+", "i", ",", "...", "]", "=", "fourier", ".", "shift_fs", "(", "xf", "[", "1", "+", "i", ":", "2", "+", "i", ",", "...", "]", ",", "shift", "=", "shift_samp", ")", "\n", "\n", "# Shift sample", "\n", "", "", "", "shift_samp", "=", "2", "*", "math", ".", "pi", "*", "(", "self", ".", "pos", "-", "self", ".", "pos", ".", "round", "(", ")", ")", "/", "(", "self", ".", "target_scale", "*", "self", ".", "img_support_sz", ")", "\n", "train_xf", "=", "fourier", ".", "shift_fs", "(", "train_xf", ",", "shift", "=", "shift_samp", ")", "\n", "\n", "# Initialize first-frame training samples", "\n", "num_init_samples", "=", "train_xf", ".", "size", "(", "0", ")", "\n", "self", ".", "init_sample_weights", "=", "TensorList", "(", "[", "xf", ".", "new_ones", "(", "1", ")", "/", "xf", ".", "shape", "[", "0", "]", "for", "xf", "in", "train_xf", "]", ")", "\n", "self", ".", "init_training_samples", "=", "train_xf", ".", "permute", "(", "2", ",", "3", ",", "0", ",", "1", ",", "4", ")", "\n", "\n", "\n", "# Sample counters and weights", "\n", "self", ".", "num_stored_samples", "=", "num_init_samples", "\n", "self", ".", "previous_replace_ind", "=", "[", "None", "]", "*", "len", "(", "self", ".", "num_stored_samples", ")", "\n", "self", ".", "sample_weights", "=", "TensorList", "(", "[", "xf", ".", "new_zeros", "(", "self", ".", "params", ".", "sample_memory_size", ")", "for", "xf", "in", "train_xf", "]", ")", "\n", "for", "sw", ",", "init_sw", ",", "num", "in", "zip", "(", "self", ".", "sample_weights", ",", "self", ".", "init_sample_weights", ",", "num_init_samples", ")", ":", "\n", "            ", "sw", "[", ":", "num", "]", "=", "init_sw", "\n", "\n", "# Initialize memory", "\n", "", "self", ".", "training_samples", "=", "TensorList", "(", "\n", "[", "xf", ".", "new_zeros", "(", "xf", ".", "shape", "[", "2", "]", ",", "xf", ".", "shape", "[", "3", "]", ",", "self", ".", "params", ".", "sample_memory_size", ",", "cdim", ",", "2", ")", "for", "xf", ",", "cdim", "in", "zip", "(", "train_xf", ",", "self", ".", "compressed_dim", ")", "]", ")", "\n", "\n", "# Initialize filter", "\n", "self", ".", "filter", "=", "TensorList", "(", "\n", "[", "xf", ".", "new_zeros", "(", "1", ",", "cdim", ",", "xf", ".", "shape", "[", "2", "]", ",", "xf", ".", "shape", "[", "3", "]", ",", "2", ")", "for", "xf", ",", "cdim", "in", "zip", "(", "train_xf", ",", "self", ".", "compressed_dim", ")", "]", ")", "\n", "\n", "# Do joint optimization", "\n", "self", ".", "joint_problem", "=", "FactorizedConvProblem", "(", "self", ".", "init_training_samples", ",", "self", ".", "yf", ",", "self", ".", "reg_filter", ",", "self", ".", "projection_matrix", ",", "self", ".", "params", ",", "self", ".", "init_sample_weights", ")", "\n", "joint_var", "=", "self", ".", "filter", ".", "concat", "(", "self", ".", "projection_matrix", ")", "\n", "self", ".", "joint_optimizer", "=", "GaussNewtonCG", "(", "self", ".", "joint_problem", ",", "joint_var", ",", "debug", "=", "(", "self", ".", "params", ".", "debug", ">=", "1", ")", ",", "visdom", "=", "self", ".", "visdom", ")", "\n", "\n", "if", "self", ".", "params", ".", "update_projection_matrix", ":", "\n", "            ", "self", ".", "joint_optimizer", ".", "run", "(", "self", ".", "params", ".", "init_CG_iter", "//", "self", ".", "params", ".", "init_GN_iter", ",", "self", ".", "params", ".", "init_GN_iter", ")", "\n", "\n", "# Re-project samples with the new projection matrix", "\n", "", "compressed_samples", "=", "complex", ".", "mtimes", "(", "self", ".", "init_training_samples", ",", "self", ".", "projection_matrix", ")", "\n", "for", "train_samp", ",", "init_samp", "in", "zip", "(", "self", ".", "training_samples", ",", "compressed_samples", ")", ":", "\n", "            ", "train_samp", "[", ":", ",", ":", ",", ":", "init_samp", ".", "shape", "[", "2", "]", ",", ":", ",", ":", "]", "=", "init_samp", "\n", "\n", "# Initialize optimizer", "\n", "", "self", ".", "filter_optimizer", "=", "FilterOptim", "(", "self", ".", "params", ",", "self", ".", "reg_energy", ")", "\n", "self", ".", "filter_optimizer", ".", "register", "(", "self", ".", "filter", ",", "self", ".", "training_samples", ",", "self", ".", "yf", ",", "self", ".", "sample_weights", ",", "self", ".", "reg_filter", ")", "\n", "self", ".", "filter_optimizer", ".", "sample_energy", "=", "self", ".", "joint_problem", ".", "sample_energy", "\n", "self", ".", "filter_optimizer", ".", "residuals", "=", "self", ".", "joint_optimizer", ".", "residuals", ".", "clone", "(", ")", "\n", "\n", "if", "not", "self", ".", "params", ".", "update_projection_matrix", ":", "\n", "            ", "self", ".", "filter_optimizer", ".", "run", "(", "self", ".", "params", ".", "init_CG_iter", ")", "\n", "\n", "# Post optimization", "\n", "", "self", ".", "filter_optimizer", ".", "run", "(", "self", ".", "params", ".", "post_init_CG_iter", ")", "\n", "\n", "self", ".", "symmetrize_filter", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.eco.ECO.track": [[181, 242], ["pytracking.features.preprocessing.numpy_to_torch", "eco.ECO.pos.round", "eco.ECO.extract_fourier_sample", "eco.ECO.apply_filter", "eco.ECO.localize_target", "eco.ECO.update_state", "torch.max().item", "torch.max().item", "torch.max().item", "torch.max().item", "pytracking.TensorList", "pytracking.fourier.shift_fs", "eco.ECO.update_memory", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "eco.ECO.visdom.register", "eco.ECO.visdom.register", "eco.ECO.filter_optimizer.run", "eco.ECO.symmetrize_filter", "torch.cat.tolist", "torch.cat.tolist", "torch.max", "torch.max", "torch.max", "torch.max", "pytracking.utils.plotting.show_tensor"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.numpy_to_torch", "home.repos.pwc.inspect_result.researchmm_Stark.eco.eco.ECO.extract_fourier_sample", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.localize_target", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.update_state", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.shift_fs", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.update_memory", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.run", "home.repos.pwc.inspect_result.researchmm_Stark.eco.eco.ECO.symmetrize_filter", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.show_tensor"], ["", "def", "track", "(", "self", ",", "image", ",", "info", ":", "dict", "=", "None", ")", "->", "dict", ":", "\n", "        ", "self", ".", "debug_info", "=", "{", "}", "\n", "\n", "self", ".", "frame_num", "+=", "1", "\n", "self", ".", "debug_info", "[", "'frame_num'", "]", "=", "self", ".", "frame_num", "\n", "\n", "# Convert image", "\n", "im", "=", "numpy_to_torch", "(", "image", ")", "\n", "\n", "# ------- LOCALIZATION ------- #", "\n", "\n", "# Get sample", "\n", "sample_pos", "=", "self", ".", "pos", ".", "round", "(", ")", "\n", "sample_scales", "=", "self", ".", "target_scale", "*", "self", ".", "params", ".", "scale_factors", "\n", "test_xf", "=", "self", ".", "extract_fourier_sample", "(", "im", ",", "self", ".", "pos", ",", "sample_scales", ",", "self", ".", "img_sample_sz", ")", "\n", "\n", "# Compute scores", "\n", "sf", "=", "self", ".", "apply_filter", "(", "test_xf", ")", "\n", "translation_vec", ",", "scale_ind", ",", "s", "=", "self", ".", "localize_target", "(", "sf", ")", "\n", "scale_change_factor", "=", "self", ".", "params", ".", "scale_factors", "[", "scale_ind", "]", "\n", "\n", "# Update position and scale", "\n", "self", ".", "update_state", "(", "sample_pos", "+", "translation_vec", ",", "self", ".", "target_scale", "*", "scale_change_factor", ")", "\n", "\n", "score_map", "=", "s", "[", "scale_ind", ",", "...", "]", "\n", "max_score", "=", "torch", ".", "max", "(", "score_map", ")", ".", "item", "(", ")", "\n", "self", ".", "debug_info", "[", "'max_score'", "]", "=", "max_score", "\n", "\n", "if", "self", ".", "visdom", "is", "not", "None", ":", "\n", "            ", "self", ".", "visdom", ".", "register", "(", "score_map", ",", "'heatmap'", ",", "2", ",", "'Score Map'", ")", "\n", "self", ".", "visdom", ".", "register", "(", "self", ".", "debug_info", ",", "'info_dict'", ",", "1", ",", "'Status'", ")", "\n", "", "elif", "self", ".", "params", ".", "debug", ">=", "2", ":", "\n", "            ", "show_tensor", "(", "score_map", ",", "5", ",", "title", "=", "'Max score = {:.2f}'", ".", "format", "(", "max_score", ")", ")", "\n", "\n", "# if self.params.debug >= 3:", "\n", "#     for i, hf in enumerate(self.filter):", "\n", "#         show_tensor(fourier.sample_fs(hf).abs().mean(1), 6+i)", "\n", "\n", "\n", "# ------- UPDATE ------- #", "\n", "\n", "# Get train sample", "\n", "", "train_xf", "=", "TensorList", "(", "[", "xf", "[", "scale_ind", ":", "scale_ind", "+", "1", ",", "...", "]", "for", "xf", "in", "test_xf", "]", ")", "\n", "\n", "# Shift the sample", "\n", "shift_samp", "=", "2", "*", "math", ".", "pi", "*", "(", "self", ".", "pos", "-", "sample_pos", ")", "/", "(", "sample_scales", "[", "scale_ind", "]", "*", "self", ".", "img_support_sz", ")", "\n", "train_xf", "=", "fourier", ".", "shift_fs", "(", "train_xf", ",", "shift", "=", "shift_samp", ")", "\n", "\n", "# Update memory", "\n", "self", ".", "update_memory", "(", "train_xf", ")", "\n", "\n", "# Train filter", "\n", "if", "self", ".", "frame_num", "%", "self", ".", "params", ".", "train_skipping", "==", "1", ":", "\n", "            ", "self", ".", "filter_optimizer", ".", "run", "(", "self", ".", "params", ".", "CG_iter", ",", "train_xf", ")", "\n", "self", ".", "symmetrize_filter", "(", ")", "\n", "\n", "# Return new state", "\n", "", "new_state", "=", "torch", ".", "cat", "(", "(", "self", ".", "pos", "[", "[", "1", ",", "0", "]", "]", "-", "(", "self", ".", "target_sz", "[", "[", "1", ",", "0", "]", "]", "-", "1", ")", "/", "2", ",", "self", ".", "target_sz", "[", "[", "1", ",", "0", "]", "]", ")", ")", "\n", "\n", "out", "=", "{", "'target_bbox'", ":", "new_state", ".", "tolist", "(", ")", "}", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.eco.ECO.apply_filter": [[244, 246], ["pytracking.complex.mult().sum", "pytracking.complex.mult"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult"], ["", "def", "apply_filter", "(", "self", ",", "sample_xf", ":", "TensorList", ")", "->", "torch", ".", "Tensor", ":", "\n", "        ", "return", "complex", ".", "mult", "(", "self", ".", "filter", ",", "sample_xf", ")", ".", "sum", "(", "1", ",", "keepdim", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.eco.ECO.localize_target": [[247, 288], ["pytracking.dcf.max2d", "torch.max", "torch.max", "torch.max", "torch.max", "max_disp.float().cpu.float().cpu.float().cpu", "pytracking.fourier.sample_fs", "pytracking.fourier.sum_fs", "eco.ECO.fparams.attribute", "pytracking.fourier.sample_fs", "max_disp.float().cpu.float().cpu.float", "disp[].view", "pytracking.fourier.sum_fs", "eco.ECO.fparams.attribute", "eco.ECO.fparams.attribute", "torch.round", "torch.round", "torch.round", "torch.round", "zip", "ValueError", "pytracking.fourier.shift_fs", "enumerate", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "eco.ECO.output_sz.view", "eco.ECO.params.scale_factors.view", "scores_scales.append", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.pad", "torch.pad", "pytracking.fourier.sample_fs", "torch.cat.mean", "torch.cat.mean", "math.floor", "math.ceil", "math.floor", "math.ceil", "pd[].item", "pd[].item", "pd[].item", "pd[].item"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.max2d", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.sample_fs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.sum_fs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.sample_fs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.sum_fs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.shift_fs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.sample_fs", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], ["", "def", "localize_target", "(", "self", ",", "sf", ":", "TensorList", ")", ":", "\n", "        ", "if", "self", ".", "params", ".", "score_fusion_strategy", "==", "'sum'", ":", "\n", "            ", "scores", "=", "fourier", ".", "sample_fs", "(", "fourier", ".", "sum_fs", "(", "sf", ")", ",", "self", ".", "output_sz", ")", "\n", "", "elif", "self", ".", "params", ".", "score_fusion_strategy", "==", "'weightedsum'", ":", "\n", "            ", "weight", "=", "self", ".", "fparams", ".", "attribute", "(", "'translation_weight'", ")", "\n", "scores", "=", "fourier", ".", "sample_fs", "(", "fourier", ".", "sum_fs", "(", "weight", "*", "sf", ")", ",", "self", ".", "output_sz", ")", "\n", "", "elif", "self", ".", "params", ".", "score_fusion_strategy", "==", "'transcale'", ":", "\n", "            ", "alpha", "=", "self", ".", "fparams", ".", "attribute", "(", "'scale_weight'", ")", "\n", "beta", "=", "self", ".", "fparams", ".", "attribute", "(", "'translation_weight'", ")", "\n", "sample_sz", "=", "torch", ".", "round", "(", "self", ".", "output_sz", ".", "view", "(", "1", ",", "-", "1", ")", "*", "self", ".", "params", ".", "scale_factors", ".", "view", "(", "-", "1", ",", "1", ")", ")", "\n", "scores", "=", "0", "\n", "for", "sfe", ",", "a", ",", "b", "in", "zip", "(", "sf", ",", "alpha", ",", "beta", ")", ":", "\n", "                ", "sfe", "=", "fourier", ".", "shift_fs", "(", "sfe", ",", "math", ".", "pi", "*", "torch", ".", "ones", "(", "2", ")", ")", "\n", "scores_scales", "=", "[", "]", "\n", "for", "sind", ",", "sz", "in", "enumerate", "(", "sample_sz", ")", ":", "\n", "                    ", "pd", "=", "(", "self", ".", "output_sz", "-", "sz", ")", "/", "2", "\n", "scores_scales", ".", "append", "(", "F", ".", "pad", "(", "fourier", ".", "sample_fs", "(", "sfe", "[", "sind", ":", "sind", "+", "1", ",", "...", "]", ",", "sz", ")", ",", "\n", "(", "math", ".", "floor", "(", "pd", "[", "1", "]", ".", "item", "(", ")", ")", ",", "math", ".", "ceil", "(", "pd", "[", "1", "]", ".", "item", "(", ")", ")", ",", "\n", "math", ".", "floor", "(", "pd", "[", "0", "]", ".", "item", "(", ")", ")", ",", "math", ".", "ceil", "(", "pd", "[", "0", "]", ".", "item", "(", ")", ")", ")", ")", ")", "\n", "", "scores_cat", "=", "torch", ".", "cat", "(", "scores_scales", ")", "\n", "scores", "=", "scores", "+", "(", "b", "-", "a", ")", "*", "scores_cat", ".", "mean", "(", "dim", "=", "0", ",", "keepdim", "=", "True", ")", "+", "a", "*", "scores_cat", "\n", "", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'Unknown score fusion strategy.'", ")", "\n", "\n", "# Get maximum", "\n", "", "max_score", ",", "max_disp", "=", "dcf", ".", "max2d", "(", "scores", ")", "\n", "_", ",", "scale_ind", "=", "torch", ".", "max", "(", "max_score", ",", "dim", "=", "0", ")", "\n", "max_disp", "=", "max_disp", ".", "float", "(", ")", ".", "cpu", "(", ")", "\n", "\n", "# Convert to displacements in the base scale", "\n", "if", "self", ".", "params", ".", "score_fusion_strategy", "in", "[", "'sum'", ",", "'weightedsum'", "]", ":", "\n", "            ", "disp", "=", "(", "max_disp", "+", "self", ".", "output_sz", "/", "2", ")", "%", "self", ".", "output_sz", "-", "self", ".", "output_sz", "/", "2", "\n", "", "elif", "self", ".", "params", ".", "score_fusion_strategy", "==", "'transcale'", ":", "\n", "            ", "disp", "=", "max_disp", "-", "self", ".", "output_sz", "/", "2", "\n", "\n", "# Compute translation vector and scale change factor", "\n", "", "translation_vec", "=", "disp", "[", "scale_ind", ",", "...", "]", ".", "view", "(", "-", "1", ")", "*", "(", "self", ".", "img_support_sz", "/", "self", ".", "output_sz", ")", "*", "self", ".", "target_scale", "\n", "if", "self", ".", "params", ".", "score_fusion_strategy", "in", "[", "'sum'", ",", "'weightedsum'", "]", ":", "\n", "            ", "translation_vec", "*=", "self", ".", "params", ".", "scale_factors", "[", "scale_ind", "]", "\n", "\n", "", "return", "translation_vec", ",", "scale_ind", ",", "scores", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.eco.ECO.extract_sample": [[290, 292], ["eco.ECO.params.features.extract"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.extract"], ["", "def", "extract_sample", "(", "self", ",", "im", ":", "torch", ".", "Tensor", ",", "pos", ":", "torch", ".", "Tensor", ",", "scales", ",", "sz", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "return", "self", ".", "params", ".", "features", ".", "extract", "(", "im", ",", "pos", ",", "scales", ",", "sz", ")", "[", "0", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.eco.ECO.extract_fourier_sample": [[293, 296], ["eco.ECO.extract_sample", "eco.ECO.preprocess_sample", "eco.ECO.project_sample"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.extract_sample", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.preprocess_sample", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.project_sample"], ["", "def", "extract_fourier_sample", "(", "self", ",", "im", ":", "torch", ".", "Tensor", ",", "pos", ":", "torch", ".", "Tensor", ",", "scales", ",", "sz", ":", "torch", ".", "Tensor", ")", "->", "TensorList", ":", "\n", "        ", "x", "=", "self", ".", "extract_sample", "(", "im", ",", "pos", ",", "scales", ",", "sz", ")", "\n", "return", "self", ".", "preprocess_sample", "(", "self", ".", "project_sample", "(", "x", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.eco.ECO.preprocess_sample": [[297, 301], ["pytracking.fourier.cfft2", "pytracking.TensorList", "pytracking.dcf.interpolate_dft", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.cfft2", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.interpolate_dft"], ["", "def", "preprocess_sample", "(", "self", ",", "x", ":", "TensorList", ")", "->", "TensorList", ":", "\n", "        ", "x", "*=", "self", ".", "window", "\n", "sample_xf", "=", "fourier", ".", "cfft2", "(", "x", ")", "\n", "return", "TensorList", "(", "[", "dcf", ".", "interpolate_dft", "(", "xf", ",", "bf", ")", "for", "xf", ",", "bf", "in", "zip", "(", "sample_xf", ",", "self", ".", "interp_fs", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.eco.ECO.project_sample": [[302, 310], ["eco.ECO.project_sample._project_sample"], "methods", ["None"], ["", "def", "project_sample", "(", "self", ",", "x", ":", "TensorList", ")", ":", "\n", "        ", "@", "tensor_operation", "\n", "def", "_project_sample", "(", "x", ":", "torch", ".", "Tensor", ",", "P", ":", "torch", ".", "Tensor", ")", ":", "\n", "            ", "if", "P", "is", "None", ":", "\n", "                ", "return", "x", "\n", "", "return", "torch", ".", "matmul", "(", "x", ".", "permute", "(", "2", ",", "3", ",", "0", ",", "1", ")", ",", "P", ")", ".", "permute", "(", "2", ",", "3", ",", "0", ",", "1", ")", "\n", "\n", "", "return", "_project_sample", "(", "x", ",", "self", ".", "projection_matrix", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.eco.ECO.generate_init_samples": [[311, 337], ["eco.ECO.params.features.extract_transformed", "enumerate", "pytracking.features.augmentation.Identity", "transforms.extend", "transforms.append", "transforms.extend", "transforms.extend", "eco.ECO.fparams.attribute", "enumerate", "pytracking.features.augmentation.FlipHorizontal", "eco.ECO.fparams.attribute", "pytracking.features.augmentation.Translation", "pytracking.features.augmentation.Rotate", "pytracking.features.augmentation.Blur", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.dropout2d", "torch.dropout2d", "[].expand"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.extract_transformed", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute"], ["", "def", "generate_init_samples", "(", "self", ",", "im", ":", "torch", ".", "Tensor", ")", "->", "TensorList", ":", "\n", "# Do data augmentation", "\n", "        ", "transforms", "=", "[", "augmentation", ".", "Identity", "(", ")", "]", "\n", "if", "'shift'", "in", "self", ".", "params", ".", "augmentation", ":", "\n", "            ", "transforms", ".", "extend", "(", "[", "augmentation", ".", "Translation", "(", "shift", ")", "for", "shift", "in", "self", ".", "params", ".", "augmentation", "[", "'shift'", "]", "]", ")", "\n", "", "if", "'fliplr'", "in", "self", ".", "params", ".", "augmentation", "and", "self", ".", "params", ".", "augmentation", "[", "'fliplr'", "]", ":", "\n", "            ", "transforms", ".", "append", "(", "augmentation", ".", "FlipHorizontal", "(", ")", ")", "\n", "", "if", "'rotate'", "in", "self", ".", "params", ".", "augmentation", ":", "\n", "            ", "transforms", ".", "extend", "(", "[", "augmentation", ".", "Rotate", "(", "angle", ")", "for", "angle", "in", "self", ".", "params", ".", "augmentation", "[", "'rotate'", "]", "]", ")", "\n", "", "if", "'blur'", "in", "self", ".", "params", ".", "augmentation", ":", "\n", "            ", "transforms", ".", "extend", "(", "[", "augmentation", ".", "Blur", "(", "sigma", ")", "for", "sigma", "in", "self", ".", "params", ".", "augmentation", "[", "'blur'", "]", "]", ")", "\n", "\n", "", "init_samples", "=", "self", ".", "params", ".", "features", ".", "extract_transformed", "(", "im", ",", "self", ".", "pos", ",", "self", ".", "target_scale", ",", "self", ".", "img_sample_sz", ",", "transforms", ")", "\n", "\n", "# Remove augmented samples for those that shall not have", "\n", "for", "i", ",", "use_aug", "in", "enumerate", "(", "self", ".", "fparams", ".", "attribute", "(", "'use_augmentation'", ")", ")", ":", "\n", "            ", "if", "not", "use_aug", ":", "\n", "                ", "init_samples", "[", "i", "]", "=", "init_samples", "[", "i", "]", "[", "0", ":", "1", ",", "...", "]", "\n", "\n", "", "", "if", "'dropout'", "in", "self", ".", "params", ".", "augmentation", ":", "\n", "            ", "num", ",", "prob", "=", "self", ".", "params", ".", "augmentation", "[", "'dropout'", "]", "\n", "for", "i", ",", "use_aug", "in", "enumerate", "(", "self", ".", "fparams", ".", "attribute", "(", "'use_augmentation'", ")", ")", ":", "\n", "                ", "if", "use_aug", ":", "\n", "                    ", "init_samples", "[", "i", "]", "=", "torch", ".", "cat", "(", "[", "init_samples", "[", "i", "]", ",", "F", ".", "dropout2d", "(", "init_samples", "[", "i", "]", "[", "0", ":", "1", ",", "...", "]", ".", "expand", "(", "num", ",", "-", "1", ",", "-", "1", ",", "-", "1", ")", ",", "p", "=", "prob", ",", "training", "=", "True", ")", "]", ")", "\n", "\n", "", "", "", "return", "init_samples", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.eco.ECO.update_memory": [[339, 344], ["eco.ECO.update_sample_weights", "zip", "xf.permute"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.update_sample_weights"], ["", "def", "update_memory", "(", "self", ",", "sample_xf", ":", "TensorList", ")", ":", "\n", "# Update weights and get index to replace", "\n", "        ", "replace_ind", "=", "self", ".", "update_sample_weights", "(", ")", "\n", "for", "train_samp", ",", "xf", ",", "ind", "in", "zip", "(", "self", ".", "training_samples", ",", "sample_xf", ",", "replace_ind", ")", ":", "\n", "            ", "train_samp", "[", ":", ",", ":", ",", "ind", ":", "ind", "+", "1", ",", ":", ",", ":", "]", "=", "xf", ".", "permute", "(", "2", ",", "3", ",", "0", ",", "1", ",", "4", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.eco.ECO.update_sample_weights": [[346, 371], ["zip", "replace_ind.copy", "sw.sum", "replace_ind.append", "torch.min", "torch.min", "torch.min", "torch.min", "r_ind.item.item.item"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy"], ["", "", "def", "update_sample_weights", "(", "self", ")", ":", "\n", "        ", "replace_ind", "=", "[", "]", "\n", "for", "sw", ",", "prev_ind", ",", "num_samp", ",", "fparams", "in", "zip", "(", "self", ".", "sample_weights", ",", "self", ".", "previous_replace_ind", ",", "self", ".", "num_stored_samples", ",", "self", ".", "fparams", ")", ":", "\n", "            ", "if", "num_samp", "==", "0", "or", "fparams", ".", "learning_rate", "==", "1", ":", "\n", "                ", "sw", "[", ":", "]", "=", "0", "\n", "sw", "[", "0", "]", "=", "1", "\n", "r_ind", "=", "0", "\n", "", "else", ":", "\n", "# Get index to replace", "\n", "                ", "_", ",", "r_ind", "=", "torch", ".", "min", "(", "sw", ",", "0", ")", "\n", "r_ind", "=", "r_ind", ".", "item", "(", ")", "\n", "\n", "# Update weights", "\n", "if", "prev_ind", "is", "None", ":", "\n", "                    ", "sw", "/=", "1", "-", "fparams", ".", "learning_rate", "\n", "sw", "[", "r_ind", "]", "=", "fparams", ".", "learning_rate", "\n", "", "else", ":", "\n", "                    ", "sw", "[", "r_ind", "]", "=", "sw", "[", "prev_ind", "]", "/", "(", "1", "-", "fparams", ".", "learning_rate", ")", "\n", "\n", "", "", "sw", "/=", "sw", ".", "sum", "(", ")", "\n", "replace_ind", ".", "append", "(", "r_ind", ")", "\n", "\n", "", "self", ".", "previous_replace_ind", "=", "replace_ind", ".", "copy", "(", ")", "\n", "self", ".", "num_stored_samples", "+=", "1", "\n", "return", "replace_ind", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.eco.ECO.update_state": [[372, 381], ["new_scale.clamp", "torch.max", "torch.max", "torch.max", "torch.max", "torch.min", "torch.min", "torch.min", "torch.min"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "update_state", "(", "self", ",", "new_pos", ",", "new_scale", ")", ":", "\n", "# Update scale", "\n", "        ", "self", ".", "target_scale", "=", "new_scale", ".", "clamp", "(", "self", ".", "min_scale_factor", ",", "self", ".", "max_scale_factor", ")", "\n", "self", ".", "target_sz", "=", "self", ".", "base_target_sz", "*", "self", ".", "target_scale", "\n", "\n", "# Update pos", "\n", "inside_ratio", "=", "0.2", "\n", "inside_offset", "=", "(", "inside_ratio", "-", "0.5", ")", "*", "self", ".", "target_sz", "\n", "self", ".", "pos", "=", "torch", ".", "max", "(", "torch", ".", "min", "(", "new_pos", ",", "self", ".", "image_sz", "-", "inside_offset", ")", ",", "inside_offset", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.eco.eco.ECO.symmetrize_filter": [[382, 386], ["pytracking.complex.conj", "hf[].flip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.conj"], ["", "def", "symmetrize_filter", "(", "self", ")", ":", "\n", "        ", "for", "hf", "in", "self", ".", "filter", ":", "\n", "            ", "hf", "[", ":", ",", ":", ",", ":", ",", "0", ",", ":", "]", "/=", "2", "\n", "hf", "[", ":", ",", ":", ",", ":", ",", "0", ",", ":", "]", "+=", "complex", ".", "conj", "(", "hf", "[", ":", ",", ":", ",", ":", ",", "0", ",", ":", "]", ".", "flip", "(", "(", "2", ",", ")", ")", ")", "", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.super_dimp.parameters": [[4, 71], ["pytracking.utils.TrackerParams", "pytracking.features.net_wrappers.NetWithBackbone"], "function", ["None"], ["def", "parameters", "(", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "\n", "params", ".", "debug", "=", "0", "\n", "params", ".", "visualization", "=", "False", "\n", "\n", "params", ".", "use_gpu", "=", "True", "\n", "\n", "params", ".", "image_sample_size", "=", "22", "*", "16", "\n", "params", ".", "search_area_scale", "=", "6", "\n", "params", ".", "border_mode", "=", "'inside_major'", "\n", "params", ".", "patch_max_scale_change", "=", "1.5", "\n", "\n", "# Learning parameters", "\n", "params", ".", "sample_memory_size", "=", "50", "\n", "params", ".", "learning_rate", "=", "0.01", "\n", "params", ".", "init_samples_minimum_weight", "=", "0.25", "\n", "params", ".", "train_skipping", "=", "20", "\n", "\n", "# Net optimization params", "\n", "params", ".", "update_classifier", "=", "True", "\n", "params", ".", "net_opt_iter", "=", "10", "\n", "params", ".", "net_opt_update_iter", "=", "2", "\n", "params", ".", "net_opt_hn_iter", "=", "1", "\n", "\n", "# Detection parameters", "\n", "params", ".", "window_output", "=", "False", "\n", "\n", "# Init augmentation parameters", "\n", "params", ".", "use_augmentation", "=", "True", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "10", ",", "-", "10", ",", "45", ",", "-", "45", "]", ",", "\n", "'blur'", ":", "[", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "2", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "\n", "params", ".", "target_not_found_threshold", "=", "0.25", "\n", "params", ".", "distractor_threshold", "=", "0.8", "\n", "params", ".", "hard_negative_threshold", "=", "0.5", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "\n", "params", ".", "dispalcement_scale", "=", "0.8", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "\n", "\n", "# IoUnet parameters", "\n", "params", ".", "box_refinement_space", "=", "'relative'", "\n", "params", ".", "iounet_augmentation", "=", "False", "# Use the augmented samples to compute the modulation vector", "\n", "params", ".", "iounet_k", "=", "3", "# Top-k average to estimate final box", "\n", "params", ".", "num_init_random_boxes", "=", "9", "# Num extra random boxes in addition to the classifier prediction", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "# How much to jitter the translation for random boxes", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "# How much to jitter the scale for random boxes", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "# Limit on the aspect ratio", "\n", "params", ".", "box_refinement_iter", "=", "10", "# Number of iterations for refining the boxes", "\n", "params", ".", "box_refinement_step_length", "=", "2.5e-3", "# 1   # Gradient step length in the bounding box refinement", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "# Multiplicative step length decay (1 means no decay)", "\n", "\n", "params", ".", "net", "=", "NetWithBackbone", "(", "net_path", "=", "'super_dimp.pth.tar'", ",", "\n", "use_gpu", "=", "params", ".", "use_gpu", ")", "\n", "\n", "params", ".", "vot_anno_conversion_type", "=", "'preserve_area'", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp50_vot.parameters": [[4, 72], ["pytracking.utils.TrackerParams", "pytracking.features.net_wrappers.NetWithBackbone"], "function", ["None"], ["def", "parameters", "(", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "\n", "params", ".", "debug", "=", "0", "\n", "params", ".", "visualization", "=", "False", "\n", "\n", "params", ".", "use_gpu", "=", "True", "\n", "\n", "params", ".", "image_sample_size", "=", "14", "*", "16", "\n", "params", ".", "search_area_scale", "=", "4", "\n", "\n", "# Learning parameters", "\n", "params", ".", "sample_memory_size", "=", "250", "\n", "params", ".", "learning_rate", "=", "0.0075", "\n", "params", ".", "init_samples_minimum_weight", "=", "0.0", "\n", "params", ".", "train_skipping", "=", "10", "\n", "\n", "# Net optimization params", "\n", "params", ".", "update_classifier", "=", "True", "\n", "params", ".", "net_opt_iter", "=", "25", "\n", "params", ".", "net_opt_update_iter", "=", "3", "\n", "params", ".", "net_opt_hn_iter", "=", "3", "\n", "\n", "# Detection parameters", "\n", "params", ".", "window_output", "=", "True", "\n", "\n", "# Init augmentation parameters", "\n", "params", ".", "use_augmentation", "=", "True", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "5", ",", "-", "5", ",", "10", ",", "-", "10", ",", "20", ",", "-", "20", ",", "30", ",", "-", "30", ",", "45", ",", "-", "45", ",", "-", "60", ",", "60", "]", ",", "\n", "'blur'", ":", "[", "(", "2", ",", "0.2", ")", ",", "(", "0.2", ",", "2", ")", ",", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "7", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "\n", "params", ".", "target_not_found_threshold", "=", "0.0", "\n", "params", ".", "distractor_threshold", "=", "100", "\n", "params", ".", "hard_negative_threshold", "=", "0.45", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "\n", "params", ".", "dispalcement_scale", "=", "0.7", "\n", "\n", "params", ".", "perform_hn_without_windowing", "=", "True", "\n", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "\n", "\n", "# IoUnet parameters", "\n", "params", ".", "iounet_augmentation", "=", "False", "\n", "params", ".", "iounet_use_log_scale", "=", "True", "\n", "params", ".", "iounet_k", "=", "3", "\n", "params", ".", "num_init_random_boxes", "=", "9", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "\n", "params", ".", "box_refinement_iter", "=", "5", "\n", "params", ".", "box_refinement_step_length", "=", "1", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "\n", "\n", "params", ".", "net", "=", "NetWithBackbone", "(", "net_path", "=", "'dimp50.pth'", ",", "\n", "use_gpu", "=", "params", ".", "use_gpu", ")", "\n", "\n", "params", ".", "vot_anno_conversion_type", "=", "'preserve_area'", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp50_vot19.parameters": [[4, 72], ["pytracking.utils.TrackerParams", "pytracking.features.net_wrappers.NetWithBackbone"], "function", ["None"], ["def", "parameters", "(", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "\n", "params", ".", "debug", "=", "0", "\n", "params", ".", "visualization", "=", "False", "\n", "\n", "params", ".", "use_gpu", "=", "True", "\n", "\n", "params", ".", "image_sample_size", "=", "16", "*", "16", "\n", "params", ".", "search_area_scale", "=", "4.5", "\n", "\n", "# Learning parameters", "\n", "params", ".", "sample_memory_size", "=", "100", "\n", "params", ".", "learning_rate", "=", "0.0075", "\n", "params", ".", "init_samples_minimum_weight", "=", "0.0", "\n", "params", ".", "train_skipping", "=", "10", "\n", "\n", "# Net optimization params", "\n", "params", ".", "update_classifier", "=", "True", "\n", "params", ".", "net_opt_iter", "=", "15", "\n", "params", ".", "net_opt_update_iter", "=", "2", "\n", "params", ".", "net_opt_hn_iter", "=", "2", "\n", "\n", "# Detection parameters", "\n", "params", ".", "window_output", "=", "True", "\n", "\n", "# Init augmentation parameters", "\n", "params", ".", "use_augmentation", "=", "True", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "-", "5", ",", "10", ",", "-", "30", ",", "60", "]", ",", "\n", "'blur'", ":", "[", "(", "2", ",", "0.2", ")", ",", "(", "1", ",", "3", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "3", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "1.4", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "\n", "params", ".", "target_not_found_threshold", "=", "0.0", "\n", "params", ".", "distractor_threshold", "=", "100", "\n", "params", ".", "hard_negative_threshold", "=", "0.45", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "\n", "params", ".", "dispalcement_scale", "=", "0.7", "\n", "\n", "params", ".", "perform_hn_without_windowing", "=", "True", "\n", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "\n", "\n", "# IoUnet parameters", "\n", "params", ".", "iounet_augmentation", "=", "False", "\n", "params", ".", "iounet_use_log_scale", "=", "True", "\n", "params", ".", "iounet_k", "=", "3", "\n", "params", ".", "num_init_random_boxes", "=", "9", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "\n", "params", ".", "box_refinement_iter", "=", "3", "\n", "params", ".", "box_refinement_step_length", "=", "1", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "\n", "\n", "params", ".", "net", "=", "NetWithBackbone", "(", "net_path", "=", "'dimp50.pth'", ",", "\n", "use_gpu", "=", "params", ".", "use_gpu", ")", "\n", "\n", "params", ".", "vot_anno_conversion_type", "=", "'preserve_area'", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.prdimp50.parameters": [[4, 72], ["pytracking.utils.TrackerParams", "pytracking.features.net_wrappers.NetWithBackbone"], "function", ["None"], ["def", "parameters", "(", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "\n", "params", ".", "debug", "=", "0", "\n", "params", ".", "visualization", "=", "False", "\n", "\n", "params", ".", "use_gpu", "=", "True", "\n", "\n", "params", ".", "image_sample_size", "=", "22", "*", "16", "\n", "params", ".", "search_area_scale", "=", "6", "\n", "params", ".", "border_mode", "=", "'inside_major'", "\n", "params", ".", "patch_max_scale_change", "=", "1.5", "\n", "\n", "# Learning parameters", "\n", "params", ".", "sample_memory_size", "=", "50", "\n", "params", ".", "learning_rate", "=", "0.01", "\n", "params", ".", "init_samples_minimum_weight", "=", "0.25", "\n", "params", ".", "train_skipping", "=", "20", "\n", "\n", "# Net optimization params", "\n", "params", ".", "update_classifier", "=", "True", "\n", "params", ".", "net_opt_iter", "=", "10", "\n", "params", ".", "net_opt_update_iter", "=", "2", "\n", "params", ".", "net_opt_hn_iter", "=", "1", "\n", "\n", "# Detection parameters", "\n", "params", ".", "window_output", "=", "False", "\n", "\n", "# Init augmentation parameters", "\n", "params", ".", "use_augmentation", "=", "True", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "10", ",", "-", "10", ",", "45", ",", "-", "45", "]", ",", "\n", "'blur'", ":", "[", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "2", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "\n", "params", ".", "score_preprocess", "=", "'softmax'", "\n", "params", ".", "target_not_found_threshold", "=", "0.04", "\n", "params", ".", "distractor_threshold", "=", "0.8", "\n", "params", ".", "hard_negative_threshold", "=", "0.5", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "\n", "params", ".", "dispalcement_scale", "=", "0.8", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "\n", "\n", "# IoUnet parameters", "\n", "params", ".", "box_refinement_space", "=", "'relative'", "\n", "params", ".", "iounet_augmentation", "=", "False", "# Use the augmented samples to compute the modulation vector", "\n", "params", ".", "iounet_k", "=", "3", "# Top-k average to estimate final box", "\n", "params", ".", "num_init_random_boxes", "=", "9", "# Num extra random boxes in addition to the classifier prediction", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "# How much to jitter the translation for random boxes", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "# How much to jitter the scale for random boxes", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "# Limit on the aspect ratio", "\n", "params", ".", "box_refinement_iter", "=", "10", "# Number of iterations for refining the boxes", "\n", "params", ".", "box_refinement_step_length", "=", "2.5e-3", "# 1   # Gradient step length in the bounding box refinement", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "# Multiplicative step length decay (1 means no decay)", "\n", "\n", "params", ".", "net", "=", "NetWithBackbone", "(", "net_path", "=", "'prdimp50.pth.tar'", ",", "\n", "use_gpu", "=", "params", ".", "use_gpu", ")", "\n", "\n", "params", ".", "vot_anno_conversion_type", "=", "'preserve_area'", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp50.parameters": [[4, 69], ["pytracking.utils.TrackerParams", "pytracking.features.net_wrappers.NetWithBackbone"], "function", ["None"], ["def", "parameters", "(", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "\n", "params", ".", "debug", "=", "0", "\n", "params", ".", "visualization", "=", "False", "\n", "\n", "params", ".", "use_gpu", "=", "True", "\n", "\n", "params", ".", "image_sample_size", "=", "18", "*", "16", "\n", "params", ".", "search_area_scale", "=", "5", "\n", "\n", "# Learning parameters", "\n", "params", ".", "sample_memory_size", "=", "50", "\n", "params", ".", "learning_rate", "=", "0.01", "\n", "params", ".", "init_samples_minimum_weight", "=", "0.25", "\n", "params", ".", "train_skipping", "=", "20", "\n", "\n", "# Net optimization params", "\n", "params", ".", "update_classifier", "=", "True", "\n", "params", ".", "net_opt_iter", "=", "10", "\n", "params", ".", "net_opt_update_iter", "=", "2", "\n", "params", ".", "net_opt_hn_iter", "=", "1", "\n", "\n", "# Detection parameters", "\n", "params", ".", "window_output", "=", "False", "\n", "\n", "# Init augmentation parameters", "\n", "params", ".", "use_augmentation", "=", "True", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "10", ",", "-", "10", ",", "45", ",", "-", "45", "]", ",", "\n", "'blur'", ":", "[", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "2", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "\n", "params", ".", "target_not_found_threshold", "=", "0.25", "\n", "params", ".", "distractor_threshold", "=", "0.8", "\n", "params", ".", "hard_negative_threshold", "=", "0.5", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "\n", "params", ".", "dispalcement_scale", "=", "0.8", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "\n", "\n", "# IoUnet parameters", "\n", "params", ".", "iounet_augmentation", "=", "False", "\n", "params", ".", "iounet_use_log_scale", "=", "True", "\n", "params", ".", "iounet_k", "=", "3", "\n", "params", ".", "num_init_random_boxes", "=", "9", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "\n", "params", ".", "box_refinement_iter", "=", "5", "\n", "params", ".", "box_refinement_step_length", "=", "1", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "\n", "\n", "params", ".", "net", "=", "NetWithBackbone", "(", "net_path", "=", "'dimp50.pth'", ",", "\n", "use_gpu", "=", "params", ".", "use_gpu", ")", "\n", "\n", "params", ".", "vot_anno_conversion_type", "=", "'preserve_area'", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.prdimp18.parameters": [[4, 70], ["pytracking.utils.TrackerParams", "pytracking.features.net_wrappers.NetWithBackbone"], "function", ["None"], ["def", "parameters", "(", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "\n", "params", ".", "debug", "=", "0", "\n", "params", ".", "visualization", "=", "False", "\n", "\n", "params", ".", "use_gpu", "=", "True", "\n", "\n", "params", ".", "image_sample_size", "=", "18", "*", "16", "\n", "params", ".", "search_area_scale", "=", "5", "\n", "\n", "# Learning parameters", "\n", "params", ".", "sample_memory_size", "=", "50", "\n", "params", ".", "learning_rate", "=", "0.01", "\n", "params", ".", "init_samples_minimum_weight", "=", "0.25", "\n", "params", ".", "train_skipping", "=", "20", "\n", "\n", "# Net optimization params", "\n", "params", ".", "update_classifier", "=", "True", "\n", "params", ".", "net_opt_iter", "=", "10", "\n", "params", ".", "net_opt_update_iter", "=", "2", "\n", "params", ".", "net_opt_hn_iter", "=", "1", "\n", "\n", "# Detection parameters", "\n", "params", ".", "window_output", "=", "False", "\n", "\n", "# Init augmentation parameters", "\n", "params", ".", "use_augmentation", "=", "True", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "10", ",", "-", "10", ",", "45", ",", "-", "45", "]", ",", "\n", "'blur'", ":", "[", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "2", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "\n", "params", ".", "score_preprocess", "=", "'softmax'", "\n", "params", ".", "target_not_found_threshold", "=", "0.04", "\n", "params", ".", "distractor_threshold", "=", "0.8", "\n", "params", ".", "hard_negative_threshold", "=", "0.5", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "\n", "params", ".", "dispalcement_scale", "=", "0.8", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "\n", "\n", "# IoUnet parameters", "\n", "params", ".", "box_refinement_space", "=", "'relative'", "\n", "params", ".", "iounet_augmentation", "=", "False", "# Use the augmented samples to compute the modulation vector", "\n", "params", ".", "iounet_k", "=", "3", "# Top-k average to estimate final box", "\n", "params", ".", "num_init_random_boxes", "=", "9", "# Num extra random boxes in addition to the classifier prediction", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "# How much to jitter the translation for random boxes", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "# How much to jitter the scale for random boxes", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "# Limit on the aspect ratio", "\n", "params", ".", "box_refinement_iter", "=", "10", "# Number of iterations for refining the boxes", "\n", "params", ".", "box_refinement_step_length", "=", "2.5e-3", "# 1   # Gradient step length in the bounding box refinement", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "# Multiplicative step length decay (1 means no decay)", "\n", "\n", "params", ".", "net", "=", "NetWithBackbone", "(", "net_path", "=", "'prdimp18.pth.tar'", ",", "\n", "use_gpu", "=", "params", ".", "use_gpu", ")", "\n", "\n", "params", ".", "vot_anno_conversion_type", "=", "'preserve_area'", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp18_vot.parameters": [[4, 73], ["pytracking.utils.TrackerParams", "pytracking.features.net_wrappers.NetWithBackbone"], "function", ["None"], ["def", "parameters", "(", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "\n", "params", ".", "debug", "=", "0", "\n", "params", ".", "visualization", "=", "False", "\n", "\n", "params", ".", "use_gpu", "=", "True", "\n", "\n", "params", ".", "image_sample_size", "=", "14", "*", "16", "\n", "params", ".", "search_area_scale", "=", "4", "\n", "params", ".", "feature_size_odd", "=", "False", "\n", "\n", "# Learning parameters", "\n", "params", ".", "sample_memory_size", "=", "250", "\n", "params", ".", "learning_rate", "=", "0.0075", "\n", "params", ".", "init_samples_minimum_weight", "=", "0.0", "\n", "params", ".", "train_skipping", "=", "10", "\n", "\n", "# Net optimization params", "\n", "params", ".", "update_classifier", "=", "True", "\n", "params", ".", "net_opt_iter", "=", "25", "\n", "params", ".", "net_opt_update_iter", "=", "3", "\n", "params", ".", "net_opt_hn_iter", "=", "3", "\n", "\n", "# Detection parameters", "\n", "params", ".", "window_output", "=", "True", "\n", "\n", "# Init augmentation parameters", "\n", "params", ".", "use_augmentation", "=", "True", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "5", ",", "-", "5", ",", "10", ",", "-", "10", ",", "20", ",", "-", "20", ",", "30", ",", "-", "30", ",", "45", ",", "-", "45", ",", "-", "60", ",", "60", "]", ",", "\n", "'blur'", ":", "[", "(", "2", ",", "0.2", ")", ",", "(", "0.2", ",", "2", ")", ",", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "7", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "\n", "params", ".", "target_not_found_threshold", "=", "0.0", "\n", "params", ".", "distractor_threshold", "=", "100", "\n", "params", ".", "hard_negative_threshold", "=", "0.45", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "\n", "params", ".", "dispalcement_scale", "=", "0.7", "\n", "\n", "params", ".", "perform_hn_without_windowing", "=", "True", "\n", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "\n", "\n", "# IoUnet parameters", "\n", "params", ".", "iounet_augmentation", "=", "False", "\n", "params", ".", "iounet_use_log_scale", "=", "True", "\n", "params", ".", "iounet_k", "=", "3", "\n", "params", ".", "num_init_random_boxes", "=", "9", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "\n", "params", ".", "box_refinement_iter", "=", "5", "\n", "params", ".", "box_refinement_step_length", "=", "1", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "\n", "\n", "params", ".", "net", "=", "NetWithBackbone", "(", "net_path", "=", "'dimp18.pth'", ",", "\n", "use_gpu", "=", "params", ".", "use_gpu", ")", "\n", "\n", "params", ".", "vot_anno_conversion_type", "=", "'preserve_area'", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp18.parameters": [[4, 69], ["pytracking.utils.TrackerParams", "pytracking.features.net_wrappers.NetWithBackbone"], "function", ["None"], ["def", "parameters", "(", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "\n", "params", ".", "debug", "=", "0", "\n", "params", ".", "visualization", "=", "False", "\n", "\n", "params", ".", "use_gpu", "=", "True", "\n", "\n", "params", ".", "image_sample_size", "=", "18", "*", "16", "\n", "params", ".", "search_area_scale", "=", "5", "\n", "\n", "# Learning parameters", "\n", "params", ".", "sample_memory_size", "=", "50", "\n", "params", ".", "learning_rate", "=", "0.01", "\n", "params", ".", "init_samples_minimum_weight", "=", "0.25", "\n", "params", ".", "train_skipping", "=", "20", "\n", "\n", "# Net optimization params", "\n", "params", ".", "update_classifier", "=", "True", "\n", "params", ".", "net_opt_iter", "=", "10", "\n", "params", ".", "net_opt_update_iter", "=", "2", "\n", "params", ".", "net_opt_hn_iter", "=", "1", "\n", "\n", "# Detection parameters", "\n", "params", ".", "window_output", "=", "False", "\n", "\n", "# Init augmentation parameters", "\n", "params", ".", "use_augmentation", "=", "True", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "10", ",", "-", "10", ",", "45", ",", "-", "45", "]", ",", "\n", "'blur'", ":", "[", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "2", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "\n", "params", ".", "target_not_found_threshold", "=", "0.25", "\n", "params", ".", "distractor_threshold", "=", "0.8", "\n", "params", ".", "hard_negative_threshold", "=", "0.5", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "\n", "params", ".", "dispalcement_scale", "=", "0.8", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "\n", "\n", "# IoUnet parameters", "\n", "params", ".", "iounet_augmentation", "=", "False", "\n", "params", ".", "iounet_use_log_scale", "=", "True", "\n", "params", ".", "iounet_k", "=", "3", "\n", "params", ".", "num_init_random_boxes", "=", "9", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "\n", "params", ".", "box_refinement_iter", "=", "5", "\n", "params", ".", "box_refinement_step_length", "=", "1", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "\n", "\n", "params", ".", "net", "=", "NetWithBackbone", "(", "net_path", "=", "'dimp18.pth'", ",", "\n", "use_gpu", "=", "params", ".", "use_gpu", ")", "\n", "\n", "params", ".", "vot_anno_conversion_type", "=", "'preserve_area'", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.initialize_features": [[20, 24], ["getattr", "dimp.DiMP.params.net.initialize"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize"], ["def", "initialize_features", "(", "self", ")", ":", "\n", "        ", "if", "not", "getattr", "(", "self", ",", "'features_initialized'", ",", "False", ")", ":", "\n", "            ", "self", ".", "params", ".", "net", ".", "initialize", "(", ")", "\n", "", "self", ".", "features_initialized", "=", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.initialize": [[25, 92], ["dimp.DiMP.initialize_features", "time.time", "pytracking.features.preprocessing.numpy_to_torch", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "dimp.DiMP.params.get", "torch.prod().item", "torch.prod().item", "torch.prod().item", "torch.prod().item", "torch.max", "torch.max", "torch.max", "torch.max", "torch.min", "torch.min", "torch.min", "torch.min", "dimp.DiMP.generate_init_samples", "dimp.DiMP.init_classifier", "dimp.DiMP.params.get", "dimp.DiMP.params.has", "info.get", "dimp.DiMP.params.get", "math.sqrt", "dimp.DiMP.img_sample_sz.prod().sqrt", "dimp.DiMP.params.has", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "isinstance", "dimp.DiMP.init_iou_net", "isinstance", "dimp.DiMP.image_sz.prod().sqrt", "torch.round", "torch.round", "torch.round", "torch.round", "torch.prod", "torch.prod", "torch.prod", "torch.prod", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "time.time", "torch.Tensor.prod().sqrt", "torch.Tensor.prod().sqrt", "dimp.DiMP.img_sample_sz.prod", "dimp.DiMP.image_sz.prod", "torch.Tensor.prod", "torch.Tensor.prod"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.initialize_features", "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.numpy_to_torch", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.generate_init_samples", "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.init_classifier", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.utils.params.TrackerParams.has", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.utils.params.TrackerParams.has", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.init_iou_net"], ["", "def", "initialize", "(", "self", ",", "image", ",", "info", ":", "dict", ")", "->", "dict", ":", "\n", "# Initialize some stuff", "\n", "        ", "self", ".", "frame_num", "=", "1", "\n", "if", "not", "self", ".", "params", ".", "has", "(", "'device'", ")", ":", "\n", "            ", "self", ".", "params", ".", "device", "=", "'cuda'", "if", "self", ".", "params", ".", "use_gpu", "else", "'cpu'", "\n", "\n", "# Initialize network", "\n", "", "self", ".", "initialize_features", "(", ")", "\n", "\n", "# The DiMP network", "\n", "self", ".", "net", "=", "self", ".", "params", ".", "net", "\n", "\n", "# Time initialization", "\n", "tic", "=", "time", ".", "time", "(", ")", "\n", "\n", "# Convert image", "\n", "im", "=", "numpy_to_torch", "(", "image", ")", "\n", "\n", "# Get target position and size", "\n", "state", "=", "info", "[", "'init_bbox'", "]", "\n", "self", ".", "pos", "=", "torch", ".", "Tensor", "(", "[", "state", "[", "1", "]", "+", "(", "state", "[", "3", "]", "-", "1", ")", "/", "2", ",", "state", "[", "0", "]", "+", "(", "state", "[", "2", "]", "-", "1", ")", "/", "2", "]", ")", "\n", "self", ".", "target_sz", "=", "torch", ".", "Tensor", "(", "[", "state", "[", "3", "]", ",", "state", "[", "2", "]", "]", ")", "\n", "\n", "# Get object id", "\n", "self", ".", "object_id", "=", "info", ".", "get", "(", "'object_ids'", ",", "[", "None", "]", ")", "[", "0", "]", "\n", "self", ".", "id_str", "=", "''", "if", "self", ".", "object_id", "is", "None", "else", "' {}'", ".", "format", "(", "self", ".", "object_id", ")", "\n", "\n", "# Set sizes", "\n", "self", ".", "image_sz", "=", "torch", ".", "Tensor", "(", "[", "im", ".", "shape", "[", "2", "]", ",", "im", ".", "shape", "[", "3", "]", "]", ")", "\n", "sz", "=", "self", ".", "params", ".", "image_sample_size", "\n", "sz", "=", "torch", ".", "Tensor", "(", "[", "sz", ",", "sz", "]", "if", "isinstance", "(", "sz", ",", "int", ")", "else", "sz", ")", "\n", "if", "self", ".", "params", ".", "get", "(", "'use_image_aspect_ratio'", ",", "False", ")", ":", "\n", "            ", "sz", "=", "self", ".", "image_sz", "*", "sz", ".", "prod", "(", ")", ".", "sqrt", "(", ")", "/", "self", ".", "image_sz", ".", "prod", "(", ")", ".", "sqrt", "(", ")", "\n", "stride", "=", "self", ".", "params", ".", "get", "(", "'feature_stride'", ",", "32", ")", "\n", "sz", "=", "torch", ".", "round", "(", "sz", "/", "stride", ")", "*", "stride", "\n", "", "self", ".", "img_sample_sz", "=", "sz", "\n", "self", ".", "img_support_sz", "=", "self", ".", "img_sample_sz", "\n", "\n", "# Set search area", "\n", "search_area", "=", "torch", ".", "prod", "(", "self", ".", "target_sz", "*", "self", ".", "params", ".", "search_area_scale", ")", ".", "item", "(", ")", "\n", "self", ".", "target_scale", "=", "math", ".", "sqrt", "(", "search_area", ")", "/", "self", ".", "img_sample_sz", ".", "prod", "(", ")", ".", "sqrt", "(", ")", "\n", "\n", "# Target size in base scale", "\n", "self", ".", "base_target_sz", "=", "self", ".", "target_sz", "/", "self", ".", "target_scale", "\n", "\n", "# Setup scale factors", "\n", "if", "not", "self", ".", "params", ".", "has", "(", "'scale_factors'", ")", ":", "\n", "            ", "self", ".", "params", ".", "scale_factors", "=", "torch", ".", "ones", "(", "1", ")", "\n", "", "elif", "isinstance", "(", "self", ".", "params", ".", "scale_factors", ",", "(", "list", ",", "tuple", ")", ")", ":", "\n", "            ", "self", ".", "params", ".", "scale_factors", "=", "torch", ".", "Tensor", "(", "self", ".", "params", ".", "scale_factors", ")", "\n", "\n", "# Setup scale bounds", "\n", "", "self", ".", "min_scale_factor", "=", "torch", ".", "max", "(", "10", "/", "self", ".", "base_target_sz", ")", "\n", "self", ".", "max_scale_factor", "=", "torch", ".", "min", "(", "self", ".", "image_sz", "/", "self", ".", "base_target_sz", ")", "\n", "\n", "# Extract and transform sample", "\n", "init_backbone_feat", "=", "self", ".", "generate_init_samples", "(", "im", ")", "\n", "\n", "# Initialize classifier", "\n", "self", ".", "init_classifier", "(", "init_backbone_feat", ")", "\n", "\n", "# Initialize IoUNet", "\n", "if", "self", ".", "params", ".", "get", "(", "'use_iou_net'", ",", "True", ")", ":", "\n", "            ", "self", ".", "init_iou_net", "(", "init_backbone_feat", ")", "\n", "\n", "", "out", "=", "{", "'time'", ":", "time", ".", "time", "(", ")", "-", "tic", "}", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.track": [[94, 177], ["pytracking.features.preprocessing.numpy_to_torch", "dimp.DiMP.extract_backbone_features", "dimp.DiMP.get_classification_features", "dimp.DiMP.get_sample_location", "dimp.DiMP.classify_target", "dimp.DiMP.localize_target", "torch.max().item", "torch.max().item", "torch.max().item", "torch.max().item", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "dimp.DiMP.get_centered_sample_pos", "dimp.DiMP.params.get", "dimp.DiMP.params.get", "dimp.DiMP.params.get", "dimp.DiMP.get_iounet_box", "dimp.DiMP.update_classifier", "dimp.DiMP.params.get", "hasattr", "dimp.DiMP.pos_iounet.clone", "dimp.DiMP.visdom.register", "dimp.DiMP.visdom.register", "dimp.DiMP.params.get", "torch.cat.tolist", "torch.cat.tolist", "dimp.DiMP.params.get", "dimp.DiMP.refine_target_box", "dimp.DiMP.params.get", "torch.max", "torch.max", "torch.max", "torch.max", "pytracking.utils.plotting.show_tensor", "dimp.DiMP.params.get", "dimp.DiMP.update_state", "dimp.DiMP.update_state"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.numpy_to_torch", "home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.extract_backbone_features", "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.get_classification_features", "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.get_sample_location", "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.classify_target", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.localize_target", "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.get_centered_sample_pos", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_iounet_box", "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.update_classifier", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.refine_target_box", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.show_tensor", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.update_state", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.update_state"], ["", "def", "track", "(", "self", ",", "image", ",", "info", ":", "dict", "=", "None", ")", "->", "dict", ":", "\n", "        ", "self", ".", "debug_info", "=", "{", "}", "\n", "\n", "self", ".", "frame_num", "+=", "1", "\n", "self", ".", "debug_info", "[", "'frame_num'", "]", "=", "self", ".", "frame_num", "\n", "\n", "# Convert image", "\n", "im", "=", "numpy_to_torch", "(", "image", ")", "\n", "\n", "# ------- LOCALIZATION ------- #", "\n", "\n", "# Extract backbone features", "\n", "backbone_feat", ",", "sample_coords", ",", "im_patches", "=", "self", ".", "extract_backbone_features", "(", "im", ",", "self", ".", "get_centered_sample_pos", "(", ")", ",", "\n", "self", ".", "target_scale", "*", "self", ".", "params", ".", "scale_factors", ",", "\n", "self", ".", "img_sample_sz", ")", "\n", "# Extract classification features", "\n", "test_x", "=", "self", ".", "get_classification_features", "(", "backbone_feat", ")", "\n", "\n", "# Location of sample", "\n", "sample_pos", ",", "sample_scales", "=", "self", ".", "get_sample_location", "(", "sample_coords", ")", "\n", "\n", "# Compute classification scores", "\n", "scores_raw", "=", "self", ".", "classify_target", "(", "test_x", ")", "\n", "\n", "# Localize the target", "\n", "translation_vec", ",", "scale_ind", ",", "s", ",", "flag", "=", "self", ".", "localize_target", "(", "scores_raw", ",", "sample_pos", ",", "sample_scales", ")", "\n", "new_pos", "=", "sample_pos", "[", "scale_ind", ",", ":", "]", "+", "translation_vec", "\n", "\n", "# Update position and scale", "\n", "if", "flag", "!=", "'not_found'", ":", "\n", "            ", "if", "self", ".", "params", ".", "get", "(", "'use_iou_net'", ",", "True", ")", ":", "\n", "                ", "update_scale_flag", "=", "self", ".", "params", ".", "get", "(", "'update_scale_when_uncertain'", ",", "True", ")", "or", "flag", "!=", "'uncertain'", "\n", "if", "self", ".", "params", ".", "get", "(", "'use_classifier'", ",", "True", ")", ":", "\n", "                    ", "self", ".", "update_state", "(", "new_pos", ")", "\n", "", "self", ".", "refine_target_box", "(", "backbone_feat", ",", "sample_pos", "[", "scale_ind", ",", ":", "]", ",", "sample_scales", "[", "scale_ind", "]", ",", "scale_ind", ",", "update_scale_flag", ")", "\n", "", "elif", "self", ".", "params", ".", "get", "(", "'use_classifier'", ",", "True", ")", ":", "\n", "                ", "self", ".", "update_state", "(", "new_pos", ",", "sample_scales", "[", "scale_ind", "]", ")", "\n", "\n", "\n", "# ------- UPDATE ------- #", "\n", "\n", "", "", "update_flag", "=", "flag", "not", "in", "[", "'not_found'", ",", "'uncertain'", "]", "\n", "hard_negative", "=", "(", "flag", "==", "'hard_negative'", ")", "\n", "learning_rate", "=", "self", ".", "params", ".", "get", "(", "'hard_negative_learning_rate'", ",", "None", ")", "if", "hard_negative", "else", "None", "\n", "\n", "if", "update_flag", "and", "self", ".", "params", ".", "get", "(", "'update_classifier'", ",", "False", ")", ":", "\n", "# Get train sample", "\n", "            ", "train_x", "=", "test_x", "[", "scale_ind", ":", "scale_ind", "+", "1", ",", "...", "]", "\n", "\n", "# Create target_box and label for spatial sample", "\n", "target_box", "=", "self", ".", "get_iounet_box", "(", "self", ".", "pos", ",", "self", ".", "target_sz", ",", "sample_pos", "[", "scale_ind", ",", ":", "]", ",", "sample_scales", "[", "scale_ind", "]", ")", "\n", "\n", "# Update the classifier model", "\n", "self", ".", "update_classifier", "(", "train_x", ",", "target_box", ",", "learning_rate", ",", "s", "[", "scale_ind", ",", "...", "]", ")", "\n", "\n", "# Set the pos of the tracker to iounet pos", "\n", "", "if", "self", ".", "params", ".", "get", "(", "'use_iou_net'", ",", "True", ")", "and", "flag", "!=", "'not_found'", "and", "hasattr", "(", "self", ",", "'pos_iounet'", ")", ":", "\n", "            ", "self", ".", "pos", "=", "self", ".", "pos_iounet", ".", "clone", "(", ")", "\n", "\n", "", "score_map", "=", "s", "[", "scale_ind", ",", "...", "]", "\n", "max_score", "=", "torch", ".", "max", "(", "score_map", ")", ".", "item", "(", ")", "\n", "\n", "# Visualize and set debug info", "\n", "self", ".", "search_area_box", "=", "torch", ".", "cat", "(", "(", "sample_coords", "[", "scale_ind", ",", "[", "1", ",", "0", "]", "]", ",", "sample_coords", "[", "scale_ind", ",", "[", "3", ",", "2", "]", "]", "-", "sample_coords", "[", "scale_ind", ",", "[", "1", ",", "0", "]", "]", "-", "1", ")", ")", "\n", "self", ".", "debug_info", "[", "'flag'", "+", "self", ".", "id_str", "]", "=", "flag", "\n", "self", ".", "debug_info", "[", "'max_score'", "+", "self", ".", "id_str", "]", "=", "max_score", "\n", "if", "self", ".", "visdom", "is", "not", "None", ":", "\n", "            ", "self", ".", "visdom", ".", "register", "(", "score_map", ",", "'heatmap'", ",", "2", ",", "'Score Map'", "+", "self", ".", "id_str", ")", "\n", "self", ".", "visdom", ".", "register", "(", "self", ".", "debug_info", ",", "'info_dict'", ",", "1", ",", "'Status'", ")", "\n", "", "elif", "self", ".", "params", ".", "debug", ">=", "2", ":", "\n", "            ", "show_tensor", "(", "score_map", ",", "5", ",", "title", "=", "'Max score = {:.2f}'", ".", "format", "(", "max_score", ")", ")", "\n", "\n", "# Compute output bounding box", "\n", "", "new_state", "=", "torch", ".", "cat", "(", "(", "self", ".", "pos", "[", "[", "1", ",", "0", "]", "]", "-", "(", "self", ".", "target_sz", "[", "[", "1", ",", "0", "]", "]", "-", "1", ")", "/", "2", ",", "self", ".", "target_sz", "[", "[", "1", ",", "0", "]", "]", ")", ")", "\n", "\n", "if", "self", ".", "params", ".", "get", "(", "'output_not_found_box'", ",", "False", ")", "and", "flag", "==", "'not_found'", ":", "\n", "            ", "output_state", "=", "[", "-", "1", ",", "-", "1", ",", "-", "1", ",", "-", "1", "]", "\n", "", "else", ":", "\n", "            ", "output_state", "=", "new_state", ".", "tolist", "(", ")", "\n", "", "'''2020.4.26 '''", "\n", "out", "=", "{", "'target_bbox'", ":", "output_state", ",", "\n", "'dcf_center'", ":", "new_pos", "[", "[", "1", ",", "0", "]", "]", "}", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.get_sample_location": [[179, 185], ["sample_coord.float.float.float"], "methods", ["None"], ["", "def", "get_sample_location", "(", "self", ",", "sample_coord", ")", ":", "\n", "        ", "\"\"\"Get the location of the extracted sample.\"\"\"", "\n", "sample_coord", "=", "sample_coord", ".", "float", "(", ")", "\n", "sample_pos", "=", "0.5", "*", "(", "sample_coord", "[", ":", ",", ":", "2", "]", "+", "sample_coord", "[", ":", ",", "2", ":", "]", "-", "1", ")", "\n", "sample_scales", "=", "(", "(", "sample_coord", "[", ":", ",", "2", ":", "]", "-", "sample_coord", "[", ":", ",", ":", "2", "]", ")", "/", "self", ".", "img_sample_sz", ")", ".", "prod", "(", "dim", "=", "1", ")", ".", "sqrt", "(", ")", "\n", "return", "sample_pos", ",", "sample_scales", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.get_centered_sample_pos": [[186, 190], ["None"], "methods", ["None"], ["", "def", "get_centered_sample_pos", "(", "self", ")", ":", "\n", "        ", "\"\"\"Get the center position for the new sample. Make sure the target is correctly centered.\"\"\"", "\n", "return", "self", ".", "pos", "+", "(", "(", "self", ".", "feature_sz", "+", "self", ".", "kernel_size", ")", "%", "2", ")", "*", "self", ".", "target_scale", "*", "self", ".", "img_support_sz", "/", "(", "2", "*", "self", ".", "feature_sz", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.classify_target": [[191, 196], ["torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "dimp.DiMP.net.classifier.classify"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.classify"], ["", "def", "classify_target", "(", "self", ",", "sample_x", ":", "TensorList", ")", ":", "\n", "        ", "\"\"\"Classify target by applying the DiMP filter.\"\"\"", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "scores", "=", "self", ".", "net", ".", "classifier", ".", "classify", "(", "self", ".", "target_filter", ",", "sample_x", ")", "\n", "", "return", "scores", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.localize_target": [[197, 237], ["activation.softmax_reg.view.squeeze", "dimp.DiMP.params.get", "dimp.DiMP.params.get", "dimp.DiMP.params.get", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "pytracking.dcf.max2d", "torch.max", "torch.max", "torch.max", "torch.max", "max_disp[].float().cpu().view", "activation.softmax_reg.view.new_ones", "torch.conv2d().view", "torch.conv2d().view", "dimp.DiMP.localize_advanced", "list", "activation.softmax_reg.view.exp", "max_disp[].float().cpu", "getattr", "activation.softmax_reg.view.view", "ltr.models.layers.activation.softmax_reg", "ltr.models.layers.activation.softmax_reg.view", "Exception", "torch.conv2d", "torch.conv2d", "activation.softmax_reg.view.view", "max_disp[].float"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.max2d", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.localize_advanced", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.layers.activation.softmax_reg", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d"], ["", "def", "localize_target", "(", "self", ",", "scores", ",", "sample_pos", ",", "sample_scales", ")", ":", "\n", "        ", "\"\"\"Run the target localization.\"\"\"", "\n", "\n", "scores", "=", "scores", ".", "squeeze", "(", "1", ")", "\n", "\n", "preprocess_method", "=", "self", ".", "params", ".", "get", "(", "'score_preprocess'", ",", "'none'", ")", "\n", "if", "preprocess_method", "==", "'none'", ":", "\n", "            ", "pass", "\n", "", "elif", "preprocess_method", "==", "'exp'", ":", "\n", "            ", "scores", "=", "scores", ".", "exp", "(", ")", "\n", "", "elif", "preprocess_method", "==", "'softmax'", ":", "\n", "            ", "reg_val", "=", "getattr", "(", "self", ".", "net", ".", "classifier", ".", "filter_optimizer", ",", "'softmax_reg'", ",", "None", ")", "\n", "scores_view", "=", "scores", ".", "view", "(", "scores", ".", "shape", "[", "0", "]", ",", "-", "1", ")", "\n", "scores_softmax", "=", "activation", ".", "softmax_reg", "(", "scores_view", ",", "dim", "=", "-", "1", ",", "reg", "=", "reg_val", ")", "\n", "scores", "=", "scores_softmax", ".", "view", "(", "scores", ".", "shape", ")", "\n", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "'Unknown score_preprocess in params.'", ")", "\n", "\n", "", "score_filter_ksz", "=", "self", ".", "params", ".", "get", "(", "'score_filter_ksz'", ",", "1", ")", "\n", "if", "score_filter_ksz", ">", "1", ":", "\n", "            ", "assert", "score_filter_ksz", "%", "2", "==", "1", "\n", "kernel", "=", "scores", ".", "new_ones", "(", "1", ",", "1", ",", "score_filter_ksz", ",", "score_filter_ksz", ")", "\n", "scores", "=", "F", ".", "conv2d", "(", "scores", ".", "view", "(", "-", "1", ",", "1", ",", "*", "scores", ".", "shape", "[", "-", "2", ":", "]", ")", ",", "kernel", ",", "padding", "=", "score_filter_ksz", "//", "2", ")", ".", "view", "(", "scores", ".", "shape", ")", "\n", "\n", "", "if", "self", ".", "params", ".", "get", "(", "'advanced_localization'", ",", "False", ")", ":", "\n", "            ", "return", "self", ".", "localize_advanced", "(", "scores", ",", "sample_pos", ",", "sample_scales", ")", "\n", "\n", "# Get maximum", "\n", "", "score_sz", "=", "torch", ".", "Tensor", "(", "list", "(", "scores", ".", "shape", "[", "-", "2", ":", "]", ")", ")", "\n", "score_center", "=", "(", "score_sz", "-", "1", ")", "/", "2", "\n", "max_score", ",", "max_disp", "=", "dcf", ".", "max2d", "(", "scores", ")", "\n", "_", ",", "scale_ind", "=", "torch", ".", "max", "(", "max_score", ",", "dim", "=", "0", ")", "\n", "max_disp", "=", "max_disp", "[", "scale_ind", ",", "...", "]", ".", "float", "(", ")", ".", "cpu", "(", ")", ".", "view", "(", "-", "1", ")", "\n", "target_disp", "=", "max_disp", "-", "score_center", "\n", "\n", "# Compute translation vector and scale change factor", "\n", "output_sz", "=", "score_sz", "-", "(", "self", ".", "kernel_size", "+", "1", ")", "%", "2", "\n", "translation_vec", "=", "target_disp", "*", "(", "self", ".", "img_support_sz", "/", "output_sz", ")", "*", "sample_scales", "[", "scale_ind", "]", "\n", "\n", "return", "translation_vec", ",", "scale_ind", ",", "scores", ",", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.localize_advanced": [[239, 305], ["torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "pytracking.dcf.max2d", "torch.max", "torch.max", "torch.max", "torch.max", "max_disp1[].float().cpu().view", "max", "min", "max", "min", "scores_hn[].clone", "pytracking.dcf.max2d", "max_disp2.float().cpu().view.float().cpu().view.float().cpu().view", "list", "dimp.DiMP.params.get", "scores.clone", "max_score1.item", "max_score1.item", "dimp.DiMP.params.get", "max_score1.item", "dimp.DiMP.params.get", "round", "round", "round", "round", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "max_disp1[].float().cpu", "max_disp2.float().cpu().view.float().cpu().view.float().cpu", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "float", "float", "max_disp1[].item", "max_disp1[].item", "math.sqrt", "max_disp1[].float", "target_neigh_sz[].item", "max_disp1[].item", "target_neigh_sz[].item", "max_disp1[].item", "max_disp2.float().cpu().view.float().cpu().view.float", "target_neigh_sz[].item", "target_neigh_sz[].item"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.max2d", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.max2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "def", "localize_advanced", "(", "self", ",", "scores", ",", "sample_pos", ",", "sample_scales", ")", ":", "\n", "        ", "\"\"\"Run the target advanced localization (as in ATOM).\"\"\"", "\n", "\n", "sz", "=", "scores", ".", "shape", "[", "-", "2", ":", "]", "\n", "score_sz", "=", "torch", ".", "Tensor", "(", "list", "(", "sz", ")", ")", "\n", "output_sz", "=", "score_sz", "-", "(", "self", ".", "kernel_size", "+", "1", ")", "%", "2", "\n", "score_center", "=", "(", "score_sz", "-", "1", ")", "/", "2", "\n", "\n", "scores_hn", "=", "scores", "\n", "if", "self", ".", "output_window", "is", "not", "None", "and", "self", ".", "params", ".", "get", "(", "'perform_hn_without_windowing'", ",", "False", ")", ":", "\n", "            ", "scores_hn", "=", "scores", ".", "clone", "(", ")", "\n", "scores", "*=", "self", ".", "output_window", "\n", "\n", "", "max_score1", ",", "max_disp1", "=", "dcf", ".", "max2d", "(", "scores", ")", "\n", "_", ",", "scale_ind", "=", "torch", ".", "max", "(", "max_score1", ",", "dim", "=", "0", ")", "\n", "sample_scale", "=", "sample_scales", "[", "scale_ind", "]", "\n", "max_score1", "=", "max_score1", "[", "scale_ind", "]", "\n", "max_disp1", "=", "max_disp1", "[", "scale_ind", ",", "...", "]", ".", "float", "(", ")", ".", "cpu", "(", ")", ".", "view", "(", "-", "1", ")", "\n", "target_disp1", "=", "max_disp1", "-", "score_center", "\n", "translation_vec1", "=", "target_disp1", "*", "(", "self", ".", "img_support_sz", "/", "output_sz", ")", "*", "sample_scale", "\n", "\n", "if", "max_score1", ".", "item", "(", ")", "<", "self", ".", "params", ".", "target_not_found_threshold", ":", "\n", "            ", "return", "translation_vec1", ",", "scale_ind", ",", "scores_hn", ",", "'not_found'", "\n", "", "if", "max_score1", ".", "item", "(", ")", "<", "self", ".", "params", ".", "get", "(", "'uncertain_threshold'", ",", "-", "float", "(", "'inf'", ")", ")", ":", "\n", "            ", "return", "translation_vec1", ",", "scale_ind", ",", "scores_hn", ",", "'uncertain'", "\n", "", "if", "max_score1", ".", "item", "(", ")", "<", "self", ".", "params", ".", "get", "(", "'hard_sample_threshold'", ",", "-", "float", "(", "'inf'", ")", ")", ":", "\n", "            ", "return", "translation_vec1", ",", "scale_ind", ",", "scores_hn", ",", "'hard_negative'", "\n", "\n", "# Mask out target neighborhood", "\n", "", "target_neigh_sz", "=", "self", ".", "params", ".", "target_neighborhood_scale", "*", "(", "self", ".", "target_sz", "/", "sample_scale", ")", "*", "(", "output_sz", "/", "self", ".", "img_support_sz", ")", "\n", "\n", "tneigh_top", "=", "max", "(", "round", "(", "max_disp1", "[", "0", "]", ".", "item", "(", ")", "-", "target_neigh_sz", "[", "0", "]", ".", "item", "(", ")", "/", "2", ")", ",", "0", ")", "\n", "tneigh_bottom", "=", "min", "(", "round", "(", "max_disp1", "[", "0", "]", ".", "item", "(", ")", "+", "target_neigh_sz", "[", "0", "]", ".", "item", "(", ")", "/", "2", "+", "1", ")", ",", "sz", "[", "0", "]", ")", "\n", "tneigh_left", "=", "max", "(", "round", "(", "max_disp1", "[", "1", "]", ".", "item", "(", ")", "-", "target_neigh_sz", "[", "1", "]", ".", "item", "(", ")", "/", "2", ")", ",", "0", ")", "\n", "tneigh_right", "=", "min", "(", "round", "(", "max_disp1", "[", "1", "]", ".", "item", "(", ")", "+", "target_neigh_sz", "[", "1", "]", ".", "item", "(", ")", "/", "2", "+", "1", ")", ",", "sz", "[", "1", "]", ")", "\n", "scores_masked", "=", "scores_hn", "[", "scale_ind", ":", "scale_ind", "+", "1", ",", "...", "]", ".", "clone", "(", ")", "\n", "scores_masked", "[", "...", ",", "tneigh_top", ":", "tneigh_bottom", ",", "tneigh_left", ":", "tneigh_right", "]", "=", "0", "\n", "\n", "# Find new maximum", "\n", "max_score2", ",", "max_disp2", "=", "dcf", ".", "max2d", "(", "scores_masked", ")", "\n", "max_disp2", "=", "max_disp2", ".", "float", "(", ")", ".", "cpu", "(", ")", ".", "view", "(", "-", "1", ")", "\n", "target_disp2", "=", "max_disp2", "-", "score_center", "\n", "translation_vec2", "=", "target_disp2", "*", "(", "self", ".", "img_support_sz", "/", "output_sz", ")", "*", "sample_scale", "\n", "\n", "prev_target_vec", "=", "(", "self", ".", "pos", "-", "sample_pos", "[", "scale_ind", ",", ":", "]", ")", "/", "(", "(", "self", ".", "img_support_sz", "/", "output_sz", ")", "*", "sample_scale", ")", "\n", "\n", "# Handle the different cases", "\n", "if", "max_score2", ">", "self", ".", "params", ".", "distractor_threshold", "*", "max_score1", ":", "\n", "            ", "disp_norm1", "=", "torch", ".", "sqrt", "(", "torch", ".", "sum", "(", "(", "target_disp1", "-", "prev_target_vec", ")", "**", "2", ")", ")", "\n", "disp_norm2", "=", "torch", ".", "sqrt", "(", "torch", ".", "sum", "(", "(", "target_disp2", "-", "prev_target_vec", ")", "**", "2", ")", ")", "\n", "disp_threshold", "=", "self", ".", "params", ".", "dispalcement_scale", "*", "math", ".", "sqrt", "(", "sz", "[", "0", "]", "*", "sz", "[", "1", "]", ")", "/", "2", "\n", "\n", "if", "disp_norm2", ">", "disp_threshold", "and", "disp_norm1", "<", "disp_threshold", ":", "\n", "                ", "return", "translation_vec1", ",", "scale_ind", ",", "scores_hn", ",", "'hard_negative'", "\n", "", "if", "disp_norm2", "<", "disp_threshold", "and", "disp_norm1", ">", "disp_threshold", ":", "\n", "                ", "return", "translation_vec2", ",", "scale_ind", ",", "scores_hn", ",", "'hard_negative'", "\n", "", "if", "disp_norm2", ">", "disp_threshold", "and", "disp_norm1", ">", "disp_threshold", ":", "\n", "                ", "return", "translation_vec1", ",", "scale_ind", ",", "scores_hn", ",", "'uncertain'", "\n", "\n", "# If also the distractor is close, return with highest score", "\n", "", "return", "translation_vec1", ",", "scale_ind", ",", "scores_hn", ",", "'uncertain'", "\n", "\n", "", "if", "max_score2", ">", "self", ".", "params", ".", "hard_negative_threshold", "*", "max_score1", "and", "max_score2", ">", "self", ".", "params", ".", "target_not_found_threshold", ":", "\n", "            ", "return", "translation_vec1", ",", "scale_ind", ",", "scores_hn", ",", "'hard_negative'", "\n", "\n", "", "return", "translation_vec1", ",", "scale_ind", ",", "scores_hn", ",", "'normal'", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.extract_backbone_features": [[306, 313], ["pytracking.features.preprocessing.sample_patch_multiscale", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "dimp.DiMP.net.extract_backbone", "dimp.DiMP.params.get", "dimp.DiMP.params.get"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.sample_patch_multiscale", "home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWithBackbone.extract_backbone", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "def", "extract_backbone_features", "(", "self", ",", "im", ":", "torch", ".", "Tensor", ",", "pos", ":", "torch", ".", "Tensor", ",", "scales", ",", "sz", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "im_patches", ",", "patch_coords", "=", "sample_patch_multiscale", "(", "im", ",", "pos", ",", "scales", ",", "sz", ",", "\n", "mode", "=", "self", ".", "params", ".", "get", "(", "'border_mode'", ",", "'replicate'", ")", ",", "\n", "max_scale_change", "=", "self", ".", "params", ".", "get", "(", "'patch_max_scale_change'", ",", "None", ")", ")", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "backbone_feat", "=", "self", ".", "net", ".", "extract_backbone", "(", "im_patches", ")", "\n", "", "return", "backbone_feat", ",", "patch_coords", ",", "im_patches", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.get_classification_features": [[314, 317], ["torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "dimp.DiMP.net.extract_classification_feat"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.extract_classification_feat"], ["", "def", "get_classification_features", "(", "self", ",", "backbone_feat", ")", ":", "\n", "        ", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "return", "self", ".", "net", ".", "extract_classification_feat", "(", "backbone_feat", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.get_iou_backbone_features": [[318, 320], ["dimp.DiMP.net.get_backbone_bbreg_feat"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.DiMPnet.get_backbone_bbreg_feat"], ["", "", "def", "get_iou_backbone_features", "(", "self", ",", "backbone_feat", ")", ":", "\n", "        ", "return", "self", ".", "net", ".", "get_backbone_bbreg_feat", "(", "backbone_feat", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.get_iou_features": [[321, 324], ["torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "dimp.DiMP.net.bb_regressor.get_iou_feat", "dimp.DiMP.get_iou_backbone_features"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.get_iou_feat", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_iou_backbone_features"], ["", "def", "get_iou_features", "(", "self", ",", "backbone_feat", ")", ":", "\n", "        ", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "return", "self", ".", "net", ".", "bb_regressor", ".", "get_iou_feat", "(", "self", ".", "get_iou_backbone_features", "(", "backbone_feat", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.get_iou_modulation": [[325, 328], ["torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "dimp.DiMP.net.bb_regressor.get_modulation"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.get_modulation"], ["", "", "def", "get_iou_modulation", "(", "self", ",", "iou_backbone_feat", ",", "target_boxes", ")", ":", "\n", "        ", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "return", "self", ".", "net", ".", "bb_regressor", ".", "get_modulation", "(", "iou_backbone_feat", ",", "target_boxes", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.generate_init_samples": [[330, 399], ["dimp.DiMP.params.get", "dimp.DiMP.pos.round", "dimp.DiMP.params.get", "dimp.DiMP.img_sample_sz.clone", "dimp.DiMP.params.get", "pytracking.features.preprocessing.sample_patch_transformed", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "shrink_factor.min.min.clamp_", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "aug_expansion_sz.float.float.float", "dimp.DiMP.img_sample_sz.long().tolist", "pytracking.features.augmentation.Identity", "dimp.DiMP.params.get", "dimp.DiMP.transforms.extend", "dimp.DiMP.transforms.extend", "dimp.DiMP.transforms.append", "dimp.DiMP.transforms.extend", "dimp.DiMP.transforms.extend", "dimp.DiMP.transforms.extend", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "dimp.DiMP.net.extract_backbone", "sample_sz.float", "shrink_factor.min.min.max", "sample_sz.float", "torch.zeros.long().tolist", "torch.zeros.long().tolist", "pytracking.features.augmentation.FlipHorizontal", "shrink_factor.min.min.min", "dimp.DiMP.params.get", "dimp.DiMP.img_sample_sz.long", "dimp.DiMP.img_sample_sz.long", "pytracking.features.augmentation.Translation", "pytracking.features.augmentation.Translation", "get_rand_shift", "pytracking.features.augmentation.Blur", "pytracking.features.augmentation.Scale", "pytracking.features.augmentation.Rotate", "torch.zeros.long", "torch.zeros.long", "torch.zeros.long().tolist", "torch.zeros.long().tolist", "get_absolute", "torch.zeros.long().tolist", "torch.zeros.long().tolist", "get_rand_shift", "get_rand_shift", "get_rand_shift", "torch.zeros.long", "torch.zeros.long", "torch.zeros.long", "torch.zeros.long", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.rand", "torch.rand", "torch.rand", "torch.rand"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.sample_patch_transformed", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWithBackbone.extract_backbone", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "", "def", "generate_init_samples", "(", "self", ",", "im", ":", "torch", ".", "Tensor", ")", "->", "TensorList", ":", "\n", "        ", "\"\"\"Perform data augmentation to generate initial training samples.\"\"\"", "\n", "\n", "mode", "=", "self", ".", "params", ".", "get", "(", "'border_mode'", ",", "'replicate'", ")", "\n", "if", "mode", "==", "'inside'", ":", "\n", "# Get new sample size if forced inside the image", "\n", "            ", "im_sz", "=", "torch", ".", "Tensor", "(", "[", "im", ".", "shape", "[", "2", "]", ",", "im", ".", "shape", "[", "3", "]", "]", ")", "\n", "sample_sz", "=", "self", ".", "target_scale", "*", "self", ".", "img_sample_sz", "\n", "shrink_factor", "=", "(", "sample_sz", ".", "float", "(", ")", "/", "im_sz", ")", "\n", "if", "mode", "==", "'inside'", ":", "\n", "                ", "shrink_factor", "=", "shrink_factor", ".", "max", "(", ")", "\n", "", "elif", "mode", "==", "'inside_major'", ":", "\n", "                ", "shrink_factor", "=", "shrink_factor", ".", "min", "(", ")", "\n", "", "shrink_factor", ".", "clamp_", "(", "min", "=", "1", ",", "max", "=", "self", ".", "params", ".", "get", "(", "'patch_max_scale_change'", ",", "None", ")", ")", "\n", "sample_sz", "=", "(", "sample_sz", ".", "float", "(", ")", "/", "shrink_factor", ")", "\n", "self", ".", "init_sample_scale", "=", "(", "sample_sz", "/", "self", ".", "img_sample_sz", ")", ".", "prod", "(", ")", ".", "sqrt", "(", ")", "\n", "tl", "=", "self", ".", "pos", "-", "(", "sample_sz", "-", "1", ")", "/", "2", "\n", "br", "=", "self", ".", "pos", "+", "sample_sz", "/", "2", "+", "1", "\n", "global_shift", "=", "-", "(", "(", "-", "tl", ")", ".", "clamp", "(", "0", ")", "-", "(", "br", "-", "im_sz", ")", ".", "clamp", "(", "0", ")", ")", "/", "self", ".", "init_sample_scale", "\n", "", "else", ":", "\n", "            ", "self", ".", "init_sample_scale", "=", "self", ".", "target_scale", "\n", "global_shift", "=", "torch", ".", "zeros", "(", "2", ")", "\n", "\n", "", "self", ".", "init_sample_pos", "=", "self", ".", "pos", ".", "round", "(", ")", "\n", "\n", "# Compute augmentation size", "\n", "aug_expansion_factor", "=", "self", ".", "params", ".", "get", "(", "'augmentation_expansion_factor'", ",", "None", ")", "\n", "aug_expansion_sz", "=", "self", ".", "img_sample_sz", ".", "clone", "(", ")", "\n", "aug_output_sz", "=", "None", "\n", "if", "aug_expansion_factor", "is", "not", "None", "and", "aug_expansion_factor", "!=", "1", ":", "\n", "            ", "aug_expansion_sz", "=", "(", "self", ".", "img_sample_sz", "*", "aug_expansion_factor", ")", ".", "long", "(", ")", "\n", "aug_expansion_sz", "+=", "(", "aug_expansion_sz", "-", "self", ".", "img_sample_sz", ".", "long", "(", ")", ")", "%", "2", "\n", "aug_expansion_sz", "=", "aug_expansion_sz", ".", "float", "(", ")", "\n", "aug_output_sz", "=", "self", ".", "img_sample_sz", ".", "long", "(", ")", ".", "tolist", "(", ")", "\n", "\n", "# Random shift for each sample", "\n", "", "get_rand_shift", "=", "lambda", ":", "None", "\n", "random_shift_factor", "=", "self", ".", "params", ".", "get", "(", "'random_shift_factor'", ",", "0", ")", "\n", "if", "random_shift_factor", ">", "0", ":", "\n", "            ", "get_rand_shift", "=", "lambda", ":", "(", "(", "torch", ".", "rand", "(", "2", ")", "-", "0.5", ")", "*", "self", ".", "img_sample_sz", "*", "random_shift_factor", "+", "global_shift", ")", ".", "long", "(", ")", ".", "tolist", "(", ")", "\n", "\n", "# Always put identity transformation first, since it is the unaugmented sample that is always used", "\n", "", "self", ".", "transforms", "=", "[", "augmentation", ".", "Identity", "(", "aug_output_sz", ",", "global_shift", ".", "long", "(", ")", ".", "tolist", "(", ")", ")", "]", "\n", "\n", "augs", "=", "self", ".", "params", ".", "augmentation", "if", "self", ".", "params", ".", "get", "(", "'use_augmentation'", ",", "True", ")", "else", "{", "}", "\n", "\n", "# Add all augmentations", "\n", "if", "'shift'", "in", "augs", ":", "\n", "            ", "self", ".", "transforms", ".", "extend", "(", "[", "augmentation", ".", "Translation", "(", "shift", ",", "aug_output_sz", ",", "global_shift", ".", "long", "(", ")", ".", "tolist", "(", ")", ")", "for", "shift", "in", "augs", "[", "'shift'", "]", "]", ")", "\n", "", "if", "'relativeshift'", "in", "augs", ":", "\n", "            ", "get_absolute", "=", "lambda", "shift", ":", "(", "torch", ".", "Tensor", "(", "shift", ")", "*", "self", ".", "img_sample_sz", "/", "2", ")", ".", "long", "(", ")", ".", "tolist", "(", ")", "\n", "self", ".", "transforms", ".", "extend", "(", "[", "augmentation", ".", "Translation", "(", "get_absolute", "(", "shift", ")", ",", "aug_output_sz", ",", "global_shift", ".", "long", "(", ")", ".", "tolist", "(", ")", ")", "for", "shift", "in", "augs", "[", "'relativeshift'", "]", "]", ")", "\n", "", "if", "'fliplr'", "in", "augs", "and", "augs", "[", "'fliplr'", "]", ":", "\n", "            ", "self", ".", "transforms", ".", "append", "(", "augmentation", ".", "FlipHorizontal", "(", "aug_output_sz", ",", "get_rand_shift", "(", ")", ")", ")", "\n", "", "if", "'blur'", "in", "augs", ":", "\n", "            ", "self", ".", "transforms", ".", "extend", "(", "[", "augmentation", ".", "Blur", "(", "sigma", ",", "aug_output_sz", ",", "get_rand_shift", "(", ")", ")", "for", "sigma", "in", "augs", "[", "'blur'", "]", "]", ")", "\n", "", "if", "'scale'", "in", "augs", ":", "\n", "            ", "self", ".", "transforms", ".", "extend", "(", "[", "augmentation", ".", "Scale", "(", "scale_factor", ",", "aug_output_sz", ",", "get_rand_shift", "(", ")", ")", "for", "scale_factor", "in", "augs", "[", "'scale'", "]", "]", ")", "\n", "", "if", "'rotate'", "in", "augs", ":", "\n", "            ", "self", ".", "transforms", ".", "extend", "(", "[", "augmentation", ".", "Rotate", "(", "angle", ",", "aug_output_sz", ",", "get_rand_shift", "(", ")", ")", "for", "angle", "in", "augs", "[", "'rotate'", "]", "]", ")", "\n", "\n", "# Extract augmented image patches", "\n", "", "im_patches", "=", "sample_patch_transformed", "(", "im", ",", "self", ".", "init_sample_pos", ",", "self", ".", "init_sample_scale", ",", "aug_expansion_sz", ",", "self", ".", "transforms", ")", "\n", "\n", "# Extract initial backbone features", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "init_backbone_feat", "=", "self", ".", "net", ".", "extract_backbone", "(", "im_patches", ")", "\n", "\n", "", "return", "init_backbone_feat", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.init_target_boxes": [[400, 410], ["dimp.DiMP.get_iounet_box", "pytracking.TensorList", "torch.cat().to", "torch.cat().to", "torch.cat().to", "torch.cat().to", "torch.cat().to.new_zeros", "torch.cat().to.new_zeros", "torch.cat().to.append", "torch.cat().to.append", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.cat().to.view", "torch.cat().to.view"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_iounet_box", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to"], ["", "def", "init_target_boxes", "(", "self", ")", ":", "\n", "        ", "\"\"\"Get the target bounding boxes for the initial augmented samples.\"\"\"", "\n", "self", ".", "classifier_target_box", "=", "self", ".", "get_iounet_box", "(", "self", ".", "pos", ",", "self", ".", "target_sz", ",", "self", ".", "init_sample_pos", ",", "self", ".", "init_sample_scale", ")", "\n", "init_target_boxes", "=", "TensorList", "(", ")", "\n", "for", "T", "in", "self", ".", "transforms", ":", "\n", "            ", "init_target_boxes", ".", "append", "(", "self", ".", "classifier_target_box", "+", "torch", ".", "Tensor", "(", "[", "T", ".", "shift", "[", "1", "]", ",", "T", ".", "shift", "[", "0", "]", ",", "0", ",", "0", "]", ")", ")", "\n", "", "init_target_boxes", "=", "torch", ".", "cat", "(", "init_target_boxes", ".", "view", "(", "1", ",", "4", ")", ",", "0", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "\n", "self", ".", "target_boxes", "=", "init_target_boxes", ".", "new_zeros", "(", "self", ".", "params", ".", "sample_memory_size", ",", "4", ")", "\n", "self", ".", "target_boxes", "[", ":", "init_target_boxes", ".", "shape", "[", "0", "]", ",", ":", "]", "=", "init_target_boxes", "\n", "return", "init_target_boxes", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.init_memory": [[411, 429], ["train_x.size", "pytracking.TensorList", "dimp.DiMP.num_init_samples.copy", "pytracking.TensorList", "zip", "pytracking.TensorList", "zip", "len", "x.new_zeros", "x.new_zeros", "x.new_ones"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy"], ["", "def", "init_memory", "(", "self", ",", "train_x", ":", "TensorList", ")", ":", "\n", "# Initialize first-frame spatial training samples", "\n", "        ", "self", ".", "num_init_samples", "=", "train_x", ".", "size", "(", "0", ")", "\n", "init_sample_weights", "=", "TensorList", "(", "[", "x", ".", "new_ones", "(", "1", ")", "/", "x", ".", "shape", "[", "0", "]", "for", "x", "in", "train_x", "]", ")", "\n", "\n", "# Sample counters and weights for spatial", "\n", "self", ".", "num_stored_samples", "=", "self", ".", "num_init_samples", ".", "copy", "(", ")", "\n", "self", ".", "previous_replace_ind", "=", "[", "None", "]", "*", "len", "(", "self", ".", "num_stored_samples", ")", "\n", "self", ".", "sample_weights", "=", "TensorList", "(", "[", "x", ".", "new_zeros", "(", "self", ".", "params", ".", "sample_memory_size", ")", "for", "x", "in", "train_x", "]", ")", "\n", "for", "sw", ",", "init_sw", ",", "num", "in", "zip", "(", "self", ".", "sample_weights", ",", "init_sample_weights", ",", "self", ".", "num_init_samples", ")", ":", "\n", "            ", "sw", "[", ":", "num", "]", "=", "init_sw", "\n", "\n", "# Initialize memory", "\n", "", "self", ".", "training_samples", "=", "TensorList", "(", "\n", "[", "x", ".", "new_zeros", "(", "self", ".", "params", ".", "sample_memory_size", ",", "x", ".", "shape", "[", "1", "]", ",", "x", ".", "shape", "[", "2", "]", ",", "x", ".", "shape", "[", "3", "]", ")", "for", "x", "in", "train_x", "]", ")", "\n", "\n", "for", "ts", ",", "x", "in", "zip", "(", "self", ".", "training_samples", ",", "train_x", ")", ":", "\n", "            ", "ts", "[", ":", "x", ".", "shape", "[", "0", "]", ",", "...", "]", "=", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.update_memory": [[431, 444], ["dimp.DiMP.update_sample_weights", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.update_sample_weights"], ["", "", "def", "update_memory", "(", "self", ",", "sample_x", ":", "TensorList", ",", "target_box", ",", "learning_rate", "=", "None", ")", ":", "\n", "# Update weights and get replace ind", "\n", "        ", "replace_ind", "=", "self", ".", "update_sample_weights", "(", "self", ".", "sample_weights", ",", "self", ".", "previous_replace_ind", ",", "self", ".", "num_stored_samples", ",", "self", ".", "num_init_samples", ",", "learning_rate", ")", "\n", "self", ".", "previous_replace_ind", "=", "replace_ind", "\n", "\n", "# Update sample and label memory", "\n", "for", "train_samp", ",", "x", ",", "ind", "in", "zip", "(", "self", ".", "training_samples", ",", "sample_x", ",", "replace_ind", ")", ":", "\n", "            ", "train_samp", "[", "ind", ":", "ind", "+", "1", ",", "...", "]", "=", "x", "\n", "\n", "# Update bb memory", "\n", "", "self", ".", "target_boxes", "[", "replace_ind", "[", "0", "]", ",", ":", "]", "=", "target_box", "\n", "\n", "self", ".", "num_stored_samples", "+=", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.update_sample_weights": [[446, 486], ["zip", "dimp.DiMP.params.get", "sw.sum", "replace_ind.append", "torch.min", "torch.min", "torch.min", "torch.min", "sw[].sum", "sw[].sum", "r_ind.item"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "def", "update_sample_weights", "(", "self", ",", "sample_weights", ",", "previous_replace_ind", ",", "num_stored_samples", ",", "num_init_samples", ",", "learning_rate", "=", "None", ")", ":", "\n", "# Update weights and get index to replace", "\n", "        ", "replace_ind", "=", "[", "]", "\n", "for", "sw", ",", "prev_ind", ",", "num_samp", ",", "num_init", "in", "zip", "(", "sample_weights", ",", "previous_replace_ind", ",", "num_stored_samples", ",", "num_init_samples", ")", ":", "\n", "            ", "lr", "=", "learning_rate", "\n", "if", "lr", "is", "None", ":", "\n", "                ", "lr", "=", "self", ".", "params", ".", "learning_rate", "\n", "\n", "", "init_samp_weight", "=", "self", ".", "params", ".", "get", "(", "'init_samples_minimum_weight'", ",", "None", ")", "\n", "if", "init_samp_weight", "==", "0", ":", "\n", "                ", "init_samp_weight", "=", "None", "\n", "", "s_ind", "=", "0", "if", "init_samp_weight", "is", "None", "else", "num_init", "\n", "\n", "if", "num_samp", "==", "0", "or", "lr", "==", "1", ":", "\n", "                ", "sw", "[", ":", "]", "=", "0", "\n", "sw", "[", "0", "]", "=", "1", "\n", "r_ind", "=", "0", "\n", "", "else", ":", "\n", "# Get index to replace", "\n", "                ", "if", "num_samp", "<", "sw", ".", "shape", "[", "0", "]", ":", "\n", "                    ", "r_ind", "=", "num_samp", "\n", "", "else", ":", "\n", "                    ", "_", ",", "r_ind", "=", "torch", ".", "min", "(", "sw", "[", "s_ind", ":", "]", ",", "0", ")", "\n", "r_ind", "=", "r_ind", ".", "item", "(", ")", "+", "s_ind", "\n", "\n", "# Update weights", "\n", "", "if", "prev_ind", "is", "None", ":", "\n", "                    ", "sw", "/=", "1", "-", "lr", "\n", "sw", "[", "r_ind", "]", "=", "lr", "\n", "", "else", ":", "\n", "                    ", "sw", "[", "r_ind", "]", "=", "sw", "[", "prev_ind", "]", "/", "(", "1", "-", "lr", ")", "\n", "\n", "", "", "sw", "/=", "sw", ".", "sum", "(", ")", "\n", "if", "init_samp_weight", "is", "not", "None", "and", "sw", "[", ":", "num_init", "]", ".", "sum", "(", ")", "<", "init_samp_weight", ":", "\n", "                ", "sw", "/=", "init_samp_weight", "+", "sw", "[", "num_init", ":", "]", ".", "sum", "(", ")", "\n", "sw", "[", ":", "num_init", "]", "=", "init_samp_weight", "/", "num_init", "\n", "\n", "", "replace_ind", ".", "append", "(", "r_ind", ")", "\n", "\n", "", "return", "replace_ind", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.update_state": [[487, 497], ["dimp.DiMP.params.get", "torch.max", "torch.max", "torch.max", "torch.max", "new_scale.clamp", "torch.min", "torch.min", "torch.min", "torch.min"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "update_state", "(", "self", ",", "new_pos", ",", "new_scale", "=", "None", ")", ":", "\n", "# Update scale", "\n", "        ", "if", "new_scale", "is", "not", "None", ":", "\n", "            ", "self", ".", "target_scale", "=", "new_scale", ".", "clamp", "(", "self", ".", "min_scale_factor", ",", "self", ".", "max_scale_factor", ")", "\n", "self", ".", "target_sz", "=", "self", ".", "base_target_sz", "*", "self", ".", "target_scale", "\n", "\n", "# Update pos", "\n", "", "inside_ratio", "=", "self", ".", "params", ".", "get", "(", "'target_inside_ratio'", ",", "0.2", ")", "\n", "inside_offset", "=", "(", "inside_ratio", "-", "0.5", ")", "*", "self", ".", "target_sz", "\n", "self", ".", "pos", "=", "torch", ".", "max", "(", "torch", ".", "min", "(", "new_pos", ",", "self", ".", "image_sz", "-", "inside_offset", ")", ",", "inside_offset", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.get_iounet_box": [[499, 506], ["torch.cat", "torch.cat", "torch.cat", "torch.cat", "target_ul.flip", "box_sz.flip"], "methods", ["None"], ["", "def", "get_iounet_box", "(", "self", ",", "pos", ",", "sz", ",", "sample_pos", ",", "sample_scale", ")", ":", "\n", "        ", "\"\"\"All inputs in original image coordinates.\n        Generates a box in the cropped image sample reference frame, in the format used by the IoUNet.\"\"\"", "\n", "box_center", "=", "(", "pos", "-", "sample_pos", ")", "/", "sample_scale", "+", "(", "self", ".", "img_sample_sz", "-", "1", ")", "/", "2", "\n", "box_sz", "=", "sz", "/", "sample_scale", "\n", "target_ul", "=", "box_center", "-", "(", "box_sz", "-", "1", ")", "/", "2", "\n", "return", "torch", ".", "cat", "(", "[", "target_ul", ".", "flip", "(", "(", "0", ",", ")", ")", ",", "box_sz", ".", "flip", "(", "(", "0", ",", ")", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.init_iou_net": [[508, 535], ["dimp.DiMP.net.bb_regressor.parameters", "dimp.DiMP.get_iounet_box", "pytracking.TensorList", "torch.cat().to", "torch.cat().to", "torch.cat().to", "torch.cat().to", "dimp.DiMP.get_iou_backbone_features", "pytracking.TensorList", "dimp.DiMP.get_iou_modulation", "torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "torch.cat().to.append", "torch.cat().to.append", "pytracking.TensorList", "torch.cat().to.append", "torch.cat().to.append", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "isinstance", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.cat().to.view", "torch.cat().to.view", "x.detach().mean", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "x.detach"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_iounet_box", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_iou_backbone_features", "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.get_iou_modulation", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], ["", "def", "init_iou_net", "(", "self", ",", "backbone_feat", ")", ":", "\n", "# Setup IoU net and objective", "\n", "        ", "for", "p", "in", "self", ".", "net", ".", "bb_regressor", ".", "parameters", "(", ")", ":", "\n", "            ", "p", ".", "requires_grad", "=", "False", "\n", "\n", "# Get target boxes for the different augmentations", "\n", "", "self", ".", "classifier_target_box", "=", "self", ".", "get_iounet_box", "(", "self", ".", "pos", ",", "self", ".", "target_sz", ",", "self", ".", "init_sample_pos", ",", "self", ".", "init_sample_scale", ")", "\n", "target_boxes", "=", "TensorList", "(", ")", "\n", "if", "self", ".", "params", ".", "iounet_augmentation", ":", "\n", "            ", "for", "T", "in", "self", ".", "transforms", ":", "\n", "                ", "if", "not", "isinstance", "(", "T", ",", "(", "augmentation", ".", "Identity", ",", "augmentation", ".", "Translation", ",", "augmentation", ".", "FlipHorizontal", ",", "augmentation", ".", "FlipVertical", ",", "augmentation", ".", "Blur", ")", ")", ":", "\n", "                    ", "break", "\n", "", "target_boxes", ".", "append", "(", "self", ".", "classifier_target_box", "+", "torch", ".", "Tensor", "(", "[", "T", ".", "shift", "[", "1", "]", ",", "T", ".", "shift", "[", "0", "]", ",", "0", ",", "0", "]", ")", ")", "\n", "", "", "else", ":", "\n", "            ", "target_boxes", ".", "append", "(", "self", ".", "classifier_target_box", "+", "torch", ".", "Tensor", "(", "[", "self", ".", "transforms", "[", "0", "]", ".", "shift", "[", "1", "]", ",", "self", ".", "transforms", "[", "0", "]", ".", "shift", "[", "0", "]", ",", "0", ",", "0", "]", ")", ")", "\n", "", "target_boxes", "=", "torch", ".", "cat", "(", "target_boxes", ".", "view", "(", "1", ",", "4", ")", ",", "0", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "\n", "\n", "# Get iou features", "\n", "iou_backbone_feat", "=", "self", ".", "get_iou_backbone_features", "(", "backbone_feat", ")", "\n", "\n", "# Remove other augmentations such as rotation", "\n", "iou_backbone_feat", "=", "TensorList", "(", "[", "x", "[", ":", "target_boxes", ".", "shape", "[", "0", "]", ",", "...", "]", "for", "x", "in", "iou_backbone_feat", "]", ")", "\n", "\n", "# Get modulation vector", "\n", "self", ".", "iou_modulation", "=", "self", ".", "get_iou_modulation", "(", "iou_backbone_feat", ",", "target_boxes", ")", "\n", "if", "torch", ".", "is_tensor", "(", "self", ".", "iou_modulation", "[", "0", "]", ")", ":", "\n", "            ", "self", ".", "iou_modulation", "=", "TensorList", "(", "[", "x", ".", "detach", "(", ")", ".", "mean", "(", "0", ")", "for", "x", "in", "self", ".", "iou_modulation", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.init_classifier": [[537, 589], ["dimp.DiMP.get_classification_features", "dimp.DiMP._overwrite_classifier_params", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "dimp.DiMP.params.get", "dimp.DiMP.init_target_boxes", "dimp.DiMP.params.get", "dimp.DiMP.params.get", "dimp.DiMP.params.get", "dimp.DiMP.transforms.extend", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "list", "dimp.DiMP.params.get", "dimp.DiMP.output_window.squeeze", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "dimp.DiMP.net.classifier.get_filter", "dimp.DiMP.init_memory", "isinstance", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "isinstance", "pytracking.dcf.hann2d_clipped().to", "pytracking.dcf.hann2d().to", "pytracking.TensorList", "dimp.DiMP.visdom.register", "torch.dropout2d", "torch.dropout2d", "pytracking.utils.plotting.plot_graph", "x[].expand", "pytracking.dcf.hann2d_clipped", "pytracking.dcf.hann2d", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "dimp.DiMP.output_sz.long", "dimp.DiMP.output_sz.long", "dimp.DiMP.losses.numel"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.get_classification_features", "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP._overwrite_classifier_params", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.init_target_boxes", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.get_filter", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.init_memory", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.plot_graph", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.hann2d_clipped", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.hann2d"], ["", "", "def", "init_classifier", "(", "self", ",", "init_backbone_feat", ")", ":", "\n", "# Get classification features", "\n", "        ", "x", "=", "self", ".", "get_classification_features", "(", "init_backbone_feat", ")", "\n", "\n", "# Overwrite some parameters in the classifier. (These are not generally changed)", "\n", "self", ".", "_overwrite_classifier_params", "(", "feature_dim", "=", "x", ".", "shape", "[", "-", "3", "]", ")", "\n", "\n", "# Add the dropout augmentation here, since it requires extraction of the classification features", "\n", "if", "'dropout'", "in", "self", ".", "params", ".", "augmentation", "and", "self", ".", "params", ".", "get", "(", "'use_augmentation'", ",", "True", ")", ":", "\n", "            ", "num", ",", "prob", "=", "self", ".", "params", ".", "augmentation", "[", "'dropout'", "]", "\n", "self", ".", "transforms", ".", "extend", "(", "self", ".", "transforms", "[", ":", "1", "]", "*", "num", ")", "\n", "x", "=", "torch", ".", "cat", "(", "[", "x", ",", "F", ".", "dropout2d", "(", "x", "[", "0", ":", "1", ",", "...", "]", ".", "expand", "(", "num", ",", "-", "1", ",", "-", "1", ",", "-", "1", ")", ",", "p", "=", "prob", ",", "training", "=", "True", ")", "]", ")", "\n", "\n", "# Set feature size and other related sizes", "\n", "", "self", ".", "feature_sz", "=", "torch", ".", "Tensor", "(", "list", "(", "x", ".", "shape", "[", "-", "2", ":", "]", ")", ")", "\n", "ksz", "=", "self", ".", "net", ".", "classifier", ".", "filter_size", "\n", "self", ".", "kernel_size", "=", "torch", ".", "Tensor", "(", "[", "ksz", ",", "ksz", "]", "if", "isinstance", "(", "ksz", ",", "(", "int", ",", "float", ")", ")", "else", "ksz", ")", "\n", "self", ".", "output_sz", "=", "self", ".", "feature_sz", "+", "(", "self", ".", "kernel_size", "+", "1", ")", "%", "2", "\n", "\n", "# Construct output window", "\n", "self", ".", "output_window", "=", "None", "\n", "if", "self", ".", "params", ".", "get", "(", "'window_output'", ",", "False", ")", ":", "\n", "            ", "if", "self", ".", "params", ".", "get", "(", "'use_clipped_window'", ",", "False", ")", ":", "\n", "                ", "self", ".", "output_window", "=", "dcf", ".", "hann2d_clipped", "(", "self", ".", "output_sz", ".", "long", "(", ")", ",", "(", "self", ".", "output_sz", "*", "self", ".", "params", ".", "effective_search_area", "/", "self", ".", "params", ".", "search_area_scale", ")", ".", "long", "(", ")", ",", "centered", "=", "True", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "\n", "", "else", ":", "\n", "                ", "self", ".", "output_window", "=", "dcf", ".", "hann2d", "(", "self", ".", "output_sz", ".", "long", "(", ")", ",", "centered", "=", "True", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "\n", "", "self", ".", "output_window", "=", "self", ".", "output_window", ".", "squeeze", "(", "0", ")", "\n", "\n", "# Get target boxes for the different augmentations", "\n", "", "target_boxes", "=", "self", ".", "init_target_boxes", "(", ")", "\n", "\n", "# Set number of iterations", "\n", "plot_loss", "=", "self", ".", "params", ".", "debug", ">", "0", "\n", "num_iter", "=", "self", ".", "params", ".", "get", "(", "'net_opt_iter'", ",", "None", ")", "\n", "\n", "# Get target filter by running the discriminative model prediction module", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "self", ".", "target_filter", ",", "_", ",", "losses", "=", "self", ".", "net", ".", "classifier", ".", "get_filter", "(", "x", ",", "target_boxes", ",", "num_iter", "=", "num_iter", ",", "\n", "compute_losses", "=", "plot_loss", ")", "\n", "\n", "# Init memory", "\n", "", "if", "self", ".", "params", ".", "get", "(", "'update_classifier'", ",", "True", ")", ":", "\n", "            ", "self", ".", "init_memory", "(", "TensorList", "(", "[", "x", "]", ")", ")", "\n", "\n", "", "if", "plot_loss", ":", "\n", "            ", "if", "isinstance", "(", "losses", ",", "dict", ")", ":", "\n", "                ", "losses", "=", "losses", "[", "'train'", "]", "\n", "", "self", ".", "losses", "=", "torch", ".", "cat", "(", "losses", ")", "\n", "if", "self", ".", "visdom", "is", "not", "None", ":", "\n", "                ", "self", ".", "visdom", ".", "register", "(", "(", "self", ".", "losses", ",", "torch", ".", "arange", "(", "self", ".", "losses", ".", "numel", "(", ")", ")", ")", ",", "'lineplot'", ",", "3", ",", "'Training Loss'", "+", "self", ".", "id_str", ")", "\n", "", "elif", "self", ".", "params", ".", "debug", ">=", "3", ":", "\n", "                ", "plot_graph", "(", "self", ".", "losses", ",", "10", ",", "title", "=", "'Training Loss'", "+", "self", ".", "id_str", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP._overwrite_classifier_params": [[590, 604], ["getattr", "dimp.DiMP.params.get", "dimp.DiMP.params.get", "dimp.DiMP.params.get", "dimp.DiMP.params.get", "dimp.DiMP.params.get", "ltr.models.target_classifier.initializer.FilterInitializerZero"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "", "", "def", "_overwrite_classifier_params", "(", "self", ",", "feature_dim", ")", ":", "\n", "# Overwrite some parameters in the classifier. (These are not generally changed)", "\n", "        ", "pred_module", "=", "getattr", "(", "self", ".", "net", ".", "classifier", ".", "filter_optimizer", ",", "'score_predictor'", ",", "self", ".", "net", ".", "classifier", ".", "filter_optimizer", ")", "\n", "if", "self", ".", "params", ".", "get", "(", "'label_threshold'", ",", "None", ")", "is", "not", "None", ":", "\n", "            ", "self", ".", "net", ".", "classifier", ".", "filter_optimizer", ".", "label_threshold", "=", "self", ".", "params", ".", "label_threshold", "\n", "", "if", "self", ".", "params", ".", "get", "(", "'label_shrink'", ",", "None", ")", "is", "not", "None", ":", "\n", "            ", "self", ".", "net", ".", "classifier", ".", "filter_optimizer", ".", "label_shrink", "=", "self", ".", "params", ".", "label_shrink", "\n", "", "if", "self", ".", "params", ".", "get", "(", "'softmax_reg'", ",", "None", ")", "is", "not", "None", ":", "\n", "            ", "self", ".", "net", ".", "classifier", ".", "filter_optimizer", ".", "softmax_reg", "=", "self", ".", "params", ".", "softmax_reg", "\n", "", "if", "self", ".", "params", ".", "get", "(", "'filter_reg'", ",", "None", ")", "is", "not", "None", ":", "\n", "            ", "pred_module", ".", "filter_reg", "[", "0", "]", "=", "self", ".", "params", ".", "filter_reg", "\n", "pred_module", ".", "min_filter_reg", "=", "self", ".", "params", ".", "filter_reg", "\n", "", "if", "self", ".", "params", ".", "get", "(", "'filter_init_zero'", ",", "False", ")", ":", "\n", "            ", "self", ".", "net", ".", "classifier", ".", "filter_initializer", "=", "FilterInitializerZero", "(", "self", ".", "net", ".", "classifier", ".", "filter_size", ",", "feature_dim", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.update_classifier": [[606, 650], ["dimp.DiMP.params.get", "dimp.DiMP.update_memory", "dimp.DiMP.params.get", "dimp.DiMP.target_boxes[].clone", "pytracking.TensorList", "dimp.DiMP.params.get", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "dimp.DiMP.net.classifier.filter_optimizer", "isinstance", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "dimp.DiMP.params.get", "scores.max().item", "dimp.DiMP.params.get", "dimp.DiMP.visdom.register", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "pytracking.utils.plotting.plot_graph", "scores.max", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "dimp.DiMP.losses.numel"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.update_memory", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.plot_graph", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "", "def", "update_classifier", "(", "self", ",", "train_x", ",", "target_box", ",", "learning_rate", "=", "None", ",", "scores", "=", "None", ")", ":", "\n", "# Set flags and learning rate", "\n", "        ", "hard_negative_flag", "=", "learning_rate", "is", "not", "None", "\n", "if", "learning_rate", "is", "None", ":", "\n", "            ", "learning_rate", "=", "self", ".", "params", ".", "learning_rate", "\n", "\n", "# Update the tracker memory", "\n", "", "if", "hard_negative_flag", "or", "self", ".", "frame_num", "%", "self", ".", "params", ".", "get", "(", "'train_sample_interval'", ",", "1", ")", "==", "0", ":", "\n", "            ", "self", ".", "update_memory", "(", "TensorList", "(", "[", "train_x", "]", ")", ",", "target_box", ",", "learning_rate", ")", "\n", "\n", "# Decide the number of iterations to run", "\n", "", "num_iter", "=", "0", "\n", "low_score_th", "=", "self", ".", "params", ".", "get", "(", "'low_score_opt_threshold'", ",", "None", ")", "\n", "if", "hard_negative_flag", ":", "\n", "            ", "num_iter", "=", "self", ".", "params", ".", "get", "(", "'net_opt_hn_iter'", ",", "None", ")", "\n", "", "elif", "low_score_th", "is", "not", "None", "and", "low_score_th", ">", "scores", ".", "max", "(", ")", ".", "item", "(", ")", ":", "\n", "            ", "num_iter", "=", "self", ".", "params", ".", "get", "(", "'net_opt_low_iter'", ",", "None", ")", "\n", "", "elif", "(", "self", ".", "frame_num", "-", "1", ")", "%", "self", ".", "params", ".", "train_skipping", "==", "0", ":", "\n", "            ", "num_iter", "=", "self", ".", "params", ".", "get", "(", "'net_opt_update_iter'", ",", "None", ")", "\n", "\n", "", "plot_loss", "=", "self", ".", "params", ".", "debug", ">", "0", "\n", "\n", "if", "num_iter", ">", "0", ":", "\n", "# Get inputs for the DiMP filter optimizer module", "\n", "            ", "samples", "=", "self", ".", "training_samples", "[", "0", "]", "[", ":", "self", ".", "num_stored_samples", "[", "0", "]", ",", "...", "]", "\n", "target_boxes", "=", "self", ".", "target_boxes", "[", ":", "self", ".", "num_stored_samples", "[", "0", "]", ",", ":", "]", ".", "clone", "(", ")", "\n", "sample_weights", "=", "self", ".", "sample_weights", "[", "0", "]", "[", ":", "self", ".", "num_stored_samples", "[", "0", "]", "]", "\n", "\n", "# Run the filter optimizer module", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "                ", "self", ".", "target_filter", ",", "_", ",", "losses", "=", "self", ".", "net", ".", "classifier", ".", "filter_optimizer", "(", "self", ".", "target_filter", ",", "\n", "num_iter", "=", "num_iter", ",", "feat", "=", "samples", ",", "\n", "bb", "=", "target_boxes", ",", "\n", "sample_weight", "=", "sample_weights", ",", "\n", "compute_losses", "=", "plot_loss", ")", "\n", "\n", "", "if", "plot_loss", ":", "\n", "                ", "if", "isinstance", "(", "losses", ",", "dict", ")", ":", "\n", "                    ", "losses", "=", "losses", "[", "'train'", "]", "\n", "", "self", ".", "losses", "=", "torch", ".", "cat", "(", "(", "self", ".", "losses", ",", "torch", ".", "cat", "(", "losses", ")", ")", ")", "\n", "if", "self", ".", "visdom", "is", "not", "None", ":", "\n", "                    ", "self", ".", "visdom", ".", "register", "(", "(", "self", ".", "losses", ",", "torch", ".", "arange", "(", "self", ".", "losses", ".", "numel", "(", ")", ")", ")", ",", "'lineplot'", ",", "3", ",", "'Training Loss'", "+", "self", ".", "id_str", ")", "\n", "", "elif", "self", ".", "params", ".", "debug", ">=", "3", ":", "\n", "                    ", "plot_graph", "(", "self", ".", "losses", ",", "10", ",", "title", "=", "'Training Loss'", "+", "self", ".", "id_str", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.refine_target_box": [[651, 713], ["hasattr", "dimp.DiMP.get_iounet_box", "dimp.DiMP.get_iou_features", "pytracking.TensorList", "dimp.DiMP.view().clone", "dimp.DiMP.optimize_boxes", "output_boxes[].clamp_", "dimp.DiMP.params.get", "min", "torch.topk", "torch.topk", "torch.topk", "torch.topk", "output_boxes[].mean", "[].mean", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "new_pos.clone", "dimp.DiMP.params.get", "dimp.DiMP.direct_box_regression", "init_box[].prod().sqrt", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "predicted_box[].flip", "new_pos.clone", "dimp.DiMP.view", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "init_box[].min", "new_target_sz.prod", "dimp.DiMP.base_target_sz.prod", "init_box[].prod", "torch.rand", "torch.rand", "torch.rand", "torch.rand", "dimp.DiMP.view", "output_iou.view", "new_pos.flip", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_iounet_box", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_iou_features", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.optimize_boxes", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.direct_box_regression"], ["", "", "", "", "def", "refine_target_box", "(", "self", ",", "backbone_feat", ",", "sample_pos", ",", "sample_scale", ",", "scale_ind", ",", "update_scale", "=", "True", ")", ":", "\n", "        ", "\"\"\"Run the ATOM IoUNet to refine the target bounding box.\"\"\"", "\n", "\n", "if", "hasattr", "(", "self", ".", "net", ".", "bb_regressor", ",", "'predict_bb'", ")", ":", "\n", "            ", "return", "self", ".", "direct_box_regression", "(", "backbone_feat", ",", "sample_pos", ",", "sample_scale", ",", "scale_ind", ",", "update_scale", ")", "\n", "\n", "# Initial box for refinement", "\n", "", "init_box", "=", "self", ".", "get_iounet_box", "(", "self", ".", "pos", ",", "self", ".", "target_sz", ",", "sample_pos", ",", "sample_scale", ")", "\n", "\n", "# Extract features from the relevant scale", "\n", "iou_features", "=", "self", ".", "get_iou_features", "(", "backbone_feat", ")", "\n", "iou_features", "=", "TensorList", "(", "[", "x", "[", "scale_ind", ":", "scale_ind", "+", "1", ",", "...", "]", "for", "x", "in", "iou_features", "]", ")", "\n", "\n", "# Generate random initial boxes", "\n", "init_boxes", "=", "init_box", ".", "view", "(", "1", ",", "4", ")", ".", "clone", "(", ")", "\n", "if", "self", ".", "params", ".", "num_init_random_boxes", ">", "0", ":", "\n", "            ", "square_box_sz", "=", "init_box", "[", "2", ":", "]", ".", "prod", "(", ")", ".", "sqrt", "(", ")", "\n", "rand_factor", "=", "square_box_sz", "*", "torch", ".", "cat", "(", "[", "self", ".", "params", ".", "box_jitter_pos", "*", "torch", ".", "ones", "(", "2", ")", ",", "self", ".", "params", ".", "box_jitter_sz", "*", "torch", ".", "ones", "(", "2", ")", "]", ")", "\n", "\n", "minimal_edge_size", "=", "init_box", "[", "2", ":", "]", ".", "min", "(", ")", "/", "3", "\n", "rand_bb", "=", "(", "torch", ".", "rand", "(", "self", ".", "params", ".", "num_init_random_boxes", ",", "4", ")", "-", "0.5", ")", "*", "rand_factor", "\n", "new_sz", "=", "(", "init_box", "[", "2", ":", "]", "+", "rand_bb", "[", ":", ",", "2", ":", "]", ")", ".", "clamp", "(", "minimal_edge_size", ")", "\n", "new_center", "=", "(", "init_box", "[", ":", "2", "]", "+", "init_box", "[", "2", ":", "]", "/", "2", ")", "+", "rand_bb", "[", ":", ",", ":", "2", "]", "\n", "init_boxes", "=", "torch", ".", "cat", "(", "[", "new_center", "-", "new_sz", "/", "2", ",", "new_sz", "]", ",", "1", ")", "\n", "init_boxes", "=", "torch", ".", "cat", "(", "[", "init_box", ".", "view", "(", "1", ",", "4", ")", ",", "init_boxes", "]", ")", "\n", "\n", "# Optimize the boxes", "\n", "", "output_boxes", ",", "output_iou", "=", "self", ".", "optimize_boxes", "(", "iou_features", ",", "init_boxes", ")", "\n", "\n", "# Remove weird boxes", "\n", "output_boxes", "[", ":", ",", "2", ":", "]", ".", "clamp_", "(", "1", ")", "\n", "aspect_ratio", "=", "output_boxes", "[", ":", ",", "2", "]", "/", "output_boxes", "[", ":", ",", "3", "]", "\n", "keep_ind", "=", "(", "aspect_ratio", "<", "self", ".", "params", ".", "maximal_aspect_ratio", ")", "*", "(", "aspect_ratio", ">", "1", "/", "self", ".", "params", ".", "maximal_aspect_ratio", ")", "\n", "output_boxes", "=", "output_boxes", "[", "keep_ind", ",", ":", "]", "\n", "output_iou", "=", "output_iou", "[", "keep_ind", "]", "\n", "\n", "# If no box found", "\n", "if", "output_boxes", ".", "shape", "[", "0", "]", "==", "0", ":", "\n", "            ", "return", "\n", "\n", "# Predict box", "\n", "", "k", "=", "self", ".", "params", ".", "get", "(", "'iounet_k'", ",", "5", ")", "\n", "topk", "=", "min", "(", "k", ",", "output_boxes", ".", "shape", "[", "0", "]", ")", "\n", "_", ",", "inds", "=", "torch", ".", "topk", "(", "output_iou", ",", "topk", ")", "\n", "predicted_box", "=", "output_boxes", "[", "inds", ",", ":", "]", ".", "mean", "(", "0", ")", "\n", "predicted_iou", "=", "output_iou", ".", "view", "(", "-", "1", ",", "1", ")", "[", "inds", ",", ":", "]", ".", "mean", "(", "0", ")", "\n", "\n", "# Get new position and size", "\n", "new_pos", "=", "predicted_box", "[", ":", "2", "]", "+", "predicted_box", "[", "2", ":", "]", "/", "2", "\n", "new_pos", "=", "(", "new_pos", ".", "flip", "(", "(", "0", ",", ")", ")", "-", "(", "self", ".", "img_sample_sz", "-", "1", ")", "/", "2", ")", "*", "sample_scale", "+", "sample_pos", "\n", "new_target_sz", "=", "predicted_box", "[", "2", ":", "]", ".", "flip", "(", "(", "0", ",", ")", ")", "*", "sample_scale", "\n", "new_scale", "=", "torch", ".", "sqrt", "(", "new_target_sz", ".", "prod", "(", ")", "/", "self", ".", "base_target_sz", ".", "prod", "(", ")", ")", "\n", "\n", "self", ".", "pos_iounet", "=", "new_pos", ".", "clone", "(", ")", "\n", "\n", "if", "self", ".", "params", ".", "get", "(", "'use_iounet_pos_for_learning'", ",", "True", ")", ":", "\n", "            ", "self", ".", "pos", "=", "new_pos", ".", "clone", "(", ")", "\n", "\n", "", "self", ".", "target_sz", "=", "new_target_sz", "\n", "\n", "if", "update_scale", ":", "\n", "            ", "self", ".", "target_scale", "=", "new_scale", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.optimize_boxes": [[717, 724], ["dimp.DiMP.params.get", "ValueError", "dimp.DiMP.optimize_boxes_default", "dimp.DiMP.optimize_boxes_relative"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.optimize_boxes_default", "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.optimize_boxes_relative"], ["", "", "def", "optimize_boxes", "(", "self", ",", "iou_features", ",", "init_boxes", ")", ":", "\n", "        ", "box_refinement_space", "=", "self", ".", "params", ".", "get", "(", "'box_refinement_space'", ",", "'default'", ")", "\n", "if", "box_refinement_space", "==", "'default'", ":", "\n", "            ", "return", "self", ".", "optimize_boxes_default", "(", "iou_features", ",", "init_boxes", ")", "\n", "", "if", "box_refinement_space", "==", "'relative'", ":", "\n", "            ", "return", "self", ".", "optimize_boxes_relative", "(", "iou_features", ",", "init_boxes", ")", "\n", "", "raise", "ValueError", "(", "'Unknown box_refinement_space {}'", ".", "format", "(", "box_refinement_space", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.optimize_boxes_default": [[726, 752], ["init_boxes.view().to", "isinstance", "range", "torch.Tensor().view", "torch.Tensor().view", "torch.Tensor().view", "torch.Tensor().view", "init_boxes.view().to.clone().detach", "dimp.DiMP.net.bb_regressor.predict_iou", "isinstance", "dimp.DiMP.backward", "init_boxes.view().to.detach_", "init_boxes.view().to.view().cpu", "dimp.DiMP.detach().view().cpu", "init_boxes.view", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "init_boxes.view().to.clone", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "bb_init[].repeat", "init_boxes.view().to.view", "dimp.DiMP.detach().view", "dimp.DiMP.detach"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.predict_iou"], ["", "def", "optimize_boxes_default", "(", "self", ",", "iou_features", ",", "init_boxes", ")", ":", "\n", "        ", "\"\"\"Optimize iounet boxes with the default parametrization\"\"\"", "\n", "output_boxes", "=", "init_boxes", ".", "view", "(", "1", ",", "-", "1", ",", "4", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "\n", "step_length", "=", "self", ".", "params", ".", "box_refinement_step_length", "\n", "if", "isinstance", "(", "step_length", ",", "(", "tuple", ",", "list", ")", ")", ":", "\n", "            ", "step_length", "=", "torch", ".", "Tensor", "(", "[", "step_length", "[", "0", "]", ",", "step_length", "[", "0", "]", ",", "step_length", "[", "1", "]", ",", "step_length", "[", "1", "]", "]", ",", "device", "=", "self", ".", "params", ".", "device", ")", ".", "view", "(", "1", ",", "1", ",", "4", ")", "\n", "\n", "", "for", "i_", "in", "range", "(", "self", ".", "params", ".", "box_refinement_iter", ")", ":", "\n", "# forward pass", "\n", "            ", "bb_init", "=", "output_boxes", ".", "clone", "(", ")", ".", "detach", "(", ")", "\n", "bb_init", ".", "requires_grad", "=", "True", "\n", "\n", "outputs", "=", "self", ".", "net", ".", "bb_regressor", ".", "predict_iou", "(", "self", ".", "iou_modulation", ",", "iou_features", ",", "bb_init", ")", "\n", "\n", "if", "isinstance", "(", "outputs", ",", "(", "list", ",", "tuple", ")", ")", ":", "\n", "                ", "outputs", "=", "outputs", "[", "0", "]", "\n", "\n", "", "outputs", ".", "backward", "(", "gradient", "=", "torch", ".", "ones_like", "(", "outputs", ")", ")", "\n", "\n", "# Update proposal", "\n", "output_boxes", "=", "bb_init", "+", "step_length", "*", "bb_init", ".", "grad", "*", "bb_init", "[", ":", ",", ":", ",", "2", ":", "]", ".", "repeat", "(", "1", ",", "1", ",", "2", ")", "\n", "output_boxes", ".", "detach_", "(", ")", "\n", "\n", "step_length", "*=", "self", ".", "params", ".", "box_refinement_step_decay", "\n", "\n", "", "return", "output_boxes", ".", "view", "(", "-", "1", ",", "4", ")", ".", "cpu", "(", ")", ",", "outputs", ".", "detach", "(", ")", ".", "view", "(", "-", "1", ")", ".", "cpu", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.optimize_boxes_relative": [[754, 790], ["init_boxes.view().to", "isinstance", "output_boxes[].clone", "ltr.rect_to_rel", "range", "ltr.rel_to_rect", "torch.Tensor().to().view", "torch.Tensor().to().view", "torch.Tensor().to().view", "torch.Tensor().to().view", "ltr.rect_to_rel.clone().detach", "ltr.rel_to_rect", "dimp.DiMP.net.bb_regressor.predict_iou", "isinstance", "dimp.DiMP.backward", "ltr.rect_to_rel.detach_", "ltr.rel_to_rect.view().cpu", "dimp.DiMP.detach().view().cpu", "init_boxes.view", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "ltr.rect_to_rel.clone", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "ltr.rel_to_rect.view", "dimp.DiMP.detach().view", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "dimp.DiMP.detach"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.rect_to_rel", "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.rel_to_rect", "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.rel_to_rect", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.predict_iou", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to"], ["", "def", "optimize_boxes_relative", "(", "self", ",", "iou_features", ",", "init_boxes", ")", ":", "\n", "        ", "\"\"\"Optimize iounet boxes with the relative parametrization ised in PrDiMP\"\"\"", "\n", "output_boxes", "=", "init_boxes", ".", "view", "(", "1", ",", "-", "1", ",", "4", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "\n", "step_length", "=", "self", ".", "params", ".", "box_refinement_step_length", "\n", "if", "isinstance", "(", "step_length", ",", "(", "tuple", ",", "list", ")", ")", ":", "\n", "            ", "step_length", "=", "torch", ".", "Tensor", "(", "[", "step_length", "[", "0", "]", ",", "step_length", "[", "0", "]", ",", "step_length", "[", "1", "]", ",", "step_length", "[", "1", "]", "]", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", ".", "view", "(", "1", ",", "1", ",", "4", ")", "\n", "\n", "", "sz_norm", "=", "output_boxes", "[", ":", ",", ":", "1", ",", "2", ":", "]", ".", "clone", "(", ")", "\n", "output_boxes_rel", "=", "bbutils", ".", "rect_to_rel", "(", "output_boxes", ",", "sz_norm", ")", "\n", "for", "i_", "in", "range", "(", "self", ".", "params", ".", "box_refinement_iter", ")", ":", "\n", "# forward pass", "\n", "            ", "bb_init_rel", "=", "output_boxes_rel", ".", "clone", "(", ")", ".", "detach", "(", ")", "\n", "bb_init_rel", ".", "requires_grad", "=", "True", "\n", "\n", "bb_init", "=", "bbutils", ".", "rel_to_rect", "(", "bb_init_rel", ",", "sz_norm", ")", "\n", "outputs", "=", "self", ".", "net", ".", "bb_regressor", ".", "predict_iou", "(", "self", ".", "iou_modulation", ",", "iou_features", ",", "bb_init", ")", "\n", "\n", "if", "isinstance", "(", "outputs", ",", "(", "list", ",", "tuple", ")", ")", ":", "\n", "                ", "outputs", "=", "outputs", "[", "0", "]", "\n", "\n", "", "outputs", ".", "backward", "(", "gradient", "=", "torch", ".", "ones_like", "(", "outputs", ")", ")", "\n", "\n", "# Update proposal", "\n", "output_boxes_rel", "=", "bb_init_rel", "+", "step_length", "*", "bb_init_rel", ".", "grad", "\n", "output_boxes_rel", ".", "detach_", "(", ")", "\n", "\n", "step_length", "*=", "self", ".", "params", ".", "box_refinement_step_decay", "\n", "\n", "#     for s in outputs.view(-1):", "\n", "#         print('{:.2f}  '.format(s.item()), end='')", "\n", "#     print('')", "\n", "# print('')", "\n", "\n", "", "output_boxes", "=", "bbutils", ".", "rel_to_rect", "(", "output_boxes_rel", ",", "sz_norm", ")", "\n", "\n", "return", "output_boxes", ".", "view", "(", "-", "1", ",", "4", ")", ".", "cpu", "(", ")", ",", "outputs", ".", "detach", "(", ")", ".", "view", "(", "-", "1", ")", ".", "cpu", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.direct_box_regression": [[791, 828], ["dimp.DiMP.get_iounet_box", "dimp.DiMP.get_iou_features", "pytracking.TensorList", "dimp.DiMP.view().clone().to", "dimp.DiMP.net.bb_regressor.predict_bb().view().cpu", "output_boxes[].clamp_", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "new_pos.clone", "dimp.DiMP.params.get", "predicted_box[].flip", "new_pos.clone", "dimp.DiMP.view().clone", "dimp.DiMP.net.bb_regressor.predict_bb().view", "new_target_sz.prod", "dimp.DiMP.base_target_sz.prod", "new_pos.flip", "dimp.DiMP.view", "dimp.DiMP.net.bb_regressor.predict_bb"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_iounet_box", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_iou_features", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "def", "direct_box_regression", "(", "self", ",", "backbone_feat", ",", "sample_pos", ",", "sample_scale", ",", "scale_ind", ",", "update_scale", "=", "True", ")", ":", "\n", "        ", "\"\"\"Implementation of direct bounding box regression.\"\"\"", "\n", "\n", "# Initial box for refinement", "\n", "init_box", "=", "self", ".", "get_iounet_box", "(", "self", ".", "pos", ",", "self", ".", "target_sz", ",", "sample_pos", ",", "sample_scale", ")", "\n", "\n", "# Extract features from the relevant scale", "\n", "iou_features", "=", "self", ".", "get_iou_features", "(", "backbone_feat", ")", "\n", "iou_features", "=", "TensorList", "(", "[", "x", "[", "scale_ind", ":", "scale_ind", "+", "1", ",", "...", "]", "for", "x", "in", "iou_features", "]", ")", "\n", "\n", "# Generate random initial boxes", "\n", "init_boxes", "=", "init_box", ".", "view", "(", "1", ",", "1", ",", "4", ")", ".", "clone", "(", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "\n", "\n", "# Optimize the boxes", "\n", "output_boxes", "=", "self", ".", "net", ".", "bb_regressor", ".", "predict_bb", "(", "self", ".", "iou_modulation", ",", "iou_features", ",", "init_boxes", ")", ".", "view", "(", "-", "1", ",", "4", ")", ".", "cpu", "(", ")", "\n", "\n", "# Remove weird boxes", "\n", "output_boxes", "[", ":", ",", "2", ":", "]", ".", "clamp_", "(", "1", ")", "\n", "\n", "predicted_box", "=", "output_boxes", "[", "0", ",", ":", "]", "\n", "\n", "# Get new position and size", "\n", "new_pos", "=", "predicted_box", "[", ":", "2", "]", "+", "predicted_box", "[", "2", ":", "]", "/", "2", "\n", "new_pos", "=", "(", "new_pos", ".", "flip", "(", "(", "0", ",", ")", ")", "-", "(", "self", ".", "img_sample_sz", "-", "1", ")", "/", "2", ")", "*", "sample_scale", "+", "sample_pos", "\n", "new_target_sz", "=", "predicted_box", "[", "2", ":", "]", ".", "flip", "(", "(", "0", ",", ")", ")", "*", "sample_scale", "\n", "new_scale_bbr", "=", "torch", ".", "sqrt", "(", "new_target_sz", ".", "prod", "(", ")", "/", "self", ".", "base_target_sz", ".", "prod", "(", ")", ")", "\n", "new_scale", "=", "new_scale_bbr", "\n", "\n", "self", ".", "pos_iounet", "=", "new_pos", ".", "clone", "(", ")", "\n", "\n", "if", "self", ".", "params", ".", "get", "(", "'use_iounet_pos_for_learning'", ",", "True", ")", ":", "\n", "            ", "self", ".", "pos", "=", "new_pos", ".", "clone", "(", ")", "\n", "\n", "", "self", ".", "target_sz", "=", "new_target_sz", "\n", "\n", "if", "update_scale", ":", "\n", "            ", "self", ".", "target_scale", "=", "new_scale", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.visualize_iou_pred": [[830, 860], ["center_box.view.view.view", "center_box[].clone", "ltr.rect_to_rel", "math.log", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.arange.clone", "torch.arange.clone", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.arange.clone", "torch.arange.clone", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.arange.clone", "torch.arange.clone", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.arange.clone", "torch.arange.clone", "ltr.rel_to_rect().view().to", "ltr.rel_to_rect().view().to", "dimp.DiMP.net.bb_regressor.predict_iou().exp", "dimp.DiMP.net.bb_regressor.predict_iou().exp", "pytracking.utils.plotting.show_tensor", "pytracking.utils.plotting.show_tensor", "torch.arange.numel", "torch.arange.numel", "torch.arange.numel", "torch.arange.numel", "torch.arange.numel", "torch.arange.numel", "torch.arange.numel", "torch.arange.numel", "dimp.DiMP.view", "dimp.DiMP.view", "ltr.rel_to_rect().view", "ltr.rel_to_rect().view", "dimp.DiMP.net.bb_regressor.predict_iou", "dimp.DiMP.net.bb_regressor.predict_iou", "torch.arange.numel", "torch.arange.numel", "torch.arange.numel", "torch.arange.numel", "ltr.rel_to_rect", "ltr.rel_to_rect"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.rect_to_rel", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.show_tensor", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.show_tensor", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.predict_iou", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.predict_iou", "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.rel_to_rect", "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.rel_to_rect"], ["", "", "def", "visualize_iou_pred", "(", "self", ",", "iou_features", ",", "center_box", ")", ":", "\n", "        ", "center_box", "=", "center_box", ".", "view", "(", "1", ",", "1", ",", "4", ")", "\n", "sz_norm", "=", "center_box", "[", "...", ",", "2", ":", "]", ".", "clone", "(", ")", "\n", "center_box_rel", "=", "bbutils", ".", "rect_to_rel", "(", "center_box", ",", "sz_norm", ")", "\n", "\n", "pos_dist", "=", "1.0", "\n", "sz_dist", "=", "math", ".", "log", "(", "3.0", ")", "\n", "pos_step", "=", "0.01", "\n", "sz_step", "=", "0.01", "\n", "\n", "pos_scale", "=", "torch", ".", "arange", "(", "-", "pos_dist", ",", "pos_dist", "+", "pos_step", ",", "step", "=", "pos_step", ")", "\n", "sz_scale", "=", "torch", ".", "arange", "(", "-", "sz_dist", ",", "sz_dist", "+", "sz_step", ",", "step", "=", "sz_step", ")", "\n", "\n", "bbx", "=", "torch", ".", "zeros", "(", "1", ",", "pos_scale", ".", "numel", "(", ")", ",", "4", ")", "\n", "bbx", "[", "0", ",", ":", ",", "0", "]", "=", "pos_scale", ".", "clone", "(", ")", "\n", "bby", "=", "torch", ".", "zeros", "(", "pos_scale", ".", "numel", "(", ")", ",", "1", ",", "4", ")", "\n", "bby", "[", ":", ",", "0", ",", "1", "]", "=", "pos_scale", ".", "clone", "(", ")", "\n", "bbw", "=", "torch", ".", "zeros", "(", "1", ",", "sz_scale", ".", "numel", "(", ")", ",", "4", ")", "\n", "bbw", "[", "0", ",", ":", ",", "2", "]", "=", "sz_scale", ".", "clone", "(", ")", "\n", "bbh", "=", "torch", ".", "zeros", "(", "sz_scale", ".", "numel", "(", ")", ",", "1", ",", "4", ")", "\n", "bbh", "[", ":", ",", "0", ",", "3", "]", "=", "sz_scale", ".", "clone", "(", ")", "\n", "\n", "pos_boxes", "=", "bbutils", ".", "rel_to_rect", "(", "(", "center_box_rel", "+", "bbx", ")", "+", "bby", ",", "sz_norm", ")", ".", "view", "(", "1", ",", "-", "1", ",", "4", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "\n", "sz_boxes", "=", "bbutils", ".", "rel_to_rect", "(", "(", "center_box_rel", "+", "bbw", ")", "+", "bbh", ",", "sz_norm", ")", ".", "view", "(", "1", ",", "-", "1", ",", "4", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "\n", "\n", "pos_scores", "=", "self", ".", "net", ".", "bb_regressor", ".", "predict_iou", "(", "self", ".", "iou_modulation", ",", "iou_features", ",", "pos_boxes", ")", ".", "exp", "(", ")", "\n", "sz_scores", "=", "self", ".", "net", ".", "bb_regressor", ".", "predict_iou", "(", "self", ".", "iou_modulation", ",", "iou_features", ",", "sz_boxes", ")", ".", "exp", "(", ")", "\n", "\n", "show_tensor", "(", "pos_scores", ".", "view", "(", "pos_scale", ".", "numel", "(", ")", ",", "-", "1", ")", ",", "title", "=", "'Position scores'", ",", "fig_num", "=", "21", ")", "\n", "show_tensor", "(", "sz_scores", ".", "view", "(", "sz_scale", ".", "numel", "(", ")", ",", "-", "1", ")", ",", "title", "=", "'Size scores'", ",", "fig_num", "=", "22", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp.DiMP.visdom_draw_tracking": [[862, 867], ["hasattr", "dimp.DiMP.visdom.register", "dimp.DiMP.visdom.register"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register"], ["", "def", "visdom_draw_tracking", "(", "self", ",", "image", ",", "box", ",", "segmentation", "=", "None", ")", ":", "\n", "        ", "if", "hasattr", "(", "self", ",", "'search_area_box'", ")", ":", "\n", "            ", "self", ".", "visdom", ".", "register", "(", "(", "image", ",", "box", ",", "self", ".", "search_area_box", ")", ",", "'Tracking'", ",", "1", ",", "'Tracking'", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "visdom", ".", "register", "(", "(", "image", ",", "box", ")", ",", "'Tracking'", ",", "1", ",", "'Tracking'", ")", "", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.__init__.get_tracker_class": [[3, 5], ["None"], "function", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.super_dimp.run": [[13, 133], ["ltr.dataset.Lasot", "ltr.dataset.Got10k", "ltr.dataset.TrackingNet", "ltr.dataset.MSCOCOSeq", "ltr.dataset.Got10k", "ltr.Transform", "ltr.Transform", "ltr.Transform", "ltr.data.processing.KLDiMPProcessing", "ltr.data.processing.KLDiMPProcessing", "ltr.data.sampler.DiMPSampler", "ltr.data.LTRLoader", "ltr.data.sampler.DiMPSampler", "ltr.data.LTRLoader", "ltr.models.tracking.dimpnet.dimpnet50", "ltr.KLDiMPActor", "torch.Adam", "torch.lr_scheduler.StepLR", "ltr.trainers.LTRTrainer", "ltr.trainers.LTRTrainer.train", "ltr.ToGrayscale", "ltr.RandomHorizontalFlip", "ltr.ToTensorAndJitter", "ltr.RandomHorizontalFlip", "ltr.Normalize", "ltr.ToTensor", "ltr.Normalize", "ltr.MultiGPU", "ltr.KLRegression", "ltr.LBHinge", "list", "range", "tracking_actors.KLDiMPActor.net.classifier.filter_initializer.parameters", "tracking_actors.KLDiMPActor.net.classifier.filter_optimizer.parameters", "tracking_actors.KLDiMPActor.net.classifier.feature_extractor.parameters", "tracking_actors.KLDiMPActor.net.bb_regressor.parameters", "tracking_actors.KLDiMPActor.net.feature_extractor.layer3.parameters"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.dimpnet50", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters"], ["params", ".", "search_area_scale", "=", "6", "\n", "params", ".", "border_mode", "=", "'inside_major'", "\n", "params", ".", "patch_max_scale_change", "=", "1.5", "\n", "\n", "# Learning parameters", "\n", "params", ".", "sample_memory_size", "=", "50", "\n", "params", ".", "learning_rate", "=", "0.01", "\n", "params", ".", "init_samples_minimum_weight", "=", "0.25", "\n", "params", ".", "train_skipping", "=", "20", "\n", "\n", "# Net optimization params", "\n", "params", ".", "update_classifier", "=", "True", "\n", "params", ".", "net_opt_iter", "=", "10", "\n", "params", ".", "net_opt_update_iter", "=", "2", "\n", "params", ".", "net_opt_hn_iter", "=", "1", "\n", "\n", "# Detection parameters", "\n", "params", ".", "window_output", "=", "False", "\n", "\n", "# Init augmentation parameters", "\n", "params", ".", "use_augmentation", "=", "True", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "10", ",", "-", "10", ",", "45", ",", "-", "45", "]", ",", "\n", "'blur'", ":", "[", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "2", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "\n", "params", ".", "target_not_found_threshold", "=", "0.25", "\n", "params", ".", "distractor_threshold", "=", "0.8", "\n", "params", ".", "hard_negative_threshold", "=", "0.5", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "\n", "params", ".", "dispalcement_scale", "=", "0.8", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "\n", "\n", "# IoUnet parameters", "\n", "params", ".", "box_refinement_space", "=", "'relative'", "\n", "params", ".", "iounet_augmentation", "=", "False", "# Use the augmented samples to compute the modulation vector", "\n", "params", ".", "iounet_k", "=", "3", "# Top-k average to estimate final box", "\n", "params", ".", "num_init_random_boxes", "=", "9", "# Num extra random boxes in addition to the classifier prediction", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "# How much to jitter the translation for random boxes", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "# How much to jitter the scale for random boxes", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "# Limit on the aspect ratio", "\n", "params", ".", "box_refinement_iter", "=", "10", "# Number of iterations for refining the boxes", "\n", "params", ".", "box_refinement_step_length", "=", "2.5e-3", "# 1   # Gradient step length in the bounding box refinement", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "# Multiplicative step length decay (1 means no decay)", "\n", "\n", "params", ".", "net", "=", "NetWithBackbone", "(", "net_path", "=", "'super_dimp.pth.tar'", ",", "\n", "use_gpu", "=", "params", ".", "use_gpu", ")", "\n", "\n", "params", ".", "vot_anno_conversion_type", "=", "'preserve_area'", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.prdimp50.run": [[13, 121], ["ltr.dataset.Lasot", "ltr.dataset.Got10k", "ltr.dataset.TrackingNet", "ltr.dataset.MSCOCOSeq", "ltr.dataset.Got10k", "ltr.Transform", "ltr.Transform", "ltr.Transform", "ltr.data.processing.KLDiMPProcessing", "ltr.data.processing.KLDiMPProcessing", "ltr.data.sampler.DiMPSampler", "ltr.data.LTRLoader", "ltr.data.sampler.DiMPSampler", "ltr.data.LTRLoader", "ltr.models.tracking.dimpnet.klcedimpnet50", "ltr.KLDiMPActor", "torch.Adam", "torch.lr_scheduler.StepLR", "ltr.trainers.LTRTrainer", "ltr.trainers.LTRTrainer.train", "ltr.ToGrayscale", "ltr.ToTensorAndJitter", "ltr.Normalize", "ltr.ToTensor", "ltr.Normalize", "ltr.MultiGPU", "ltr.KLRegression", "ltr.KLRegressionGrid", "list", "range", "tracking_actors.KLDiMPActor.net.classifier.parameters", "tracking_actors.KLDiMPActor.net.bb_regressor.parameters", "tracking_actors.KLDiMPActor.net.feature_extractor.parameters"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.klcedimpnet50", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters"], ["params", ".", "search_area_scale", "=", "6", "\n", "params", ".", "border_mode", "=", "'inside_major'", "\n", "params", ".", "patch_max_scale_change", "=", "1.5", "\n", "\n", "# Learning parameters", "\n", "params", ".", "sample_memory_size", "=", "50", "\n", "params", ".", "learning_rate", "=", "0.01", "\n", "params", ".", "init_samples_minimum_weight", "=", "0.25", "\n", "params", ".", "train_skipping", "=", "20", "\n", "\n", "# Net optimization params", "\n", "params", ".", "update_classifier", "=", "True", "\n", "params", ".", "net_opt_iter", "=", "10", "\n", "params", ".", "net_opt_update_iter", "=", "2", "\n", "params", ".", "net_opt_hn_iter", "=", "1", "\n", "\n", "# Detection parameters", "\n", "params", ".", "window_output", "=", "False", "\n", "\n", "# Init augmentation parameters", "\n", "params", ".", "use_augmentation", "=", "True", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "10", ",", "-", "10", ",", "45", ",", "-", "45", "]", ",", "\n", "'blur'", ":", "[", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "2", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "\n", "params", ".", "score_preprocess", "=", "'softmax'", "\n", "params", ".", "target_not_found_threshold", "=", "0.04", "\n", "params", ".", "distractor_threshold", "=", "0.8", "\n", "params", ".", "hard_negative_threshold", "=", "0.5", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "\n", "params", ".", "dispalcement_scale", "=", "0.8", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "\n", "\n", "# IoUnet parameters", "\n", "params", ".", "box_refinement_space", "=", "'relative'", "\n", "params", ".", "iounet_augmentation", "=", "False", "# Use the augmented samples to compute the modulation vector", "\n", "params", ".", "iounet_k", "=", "3", "# Top-k average to estimate final box", "\n", "params", ".", "num_init_random_boxes", "=", "9", "# Num extra random boxes in addition to the classifier prediction", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "# How much to jitter the translation for random boxes", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "# How much to jitter the scale for random boxes", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "# Limit on the aspect ratio", "\n", "params", ".", "box_refinement_iter", "=", "10", "# Number of iterations for refining the boxes", "\n", "params", ".", "box_refinement_step_length", "=", "2.5e-3", "# 1   # Gradient step length in the bounding box refinement", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "# Multiplicative step length decay (1 means no decay)", "\n", "\n", "params", ".", "net", "=", "NetWithBackbone", "(", "net_path", "=", "'prdimp50.pth.tar'", ",", "\n", "use_gpu", "=", "params", ".", "use_gpu", ")", "\n", "\n", "params", ".", "vot_anno_conversion_type", "=", "'preserve_area'", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp50.run": [[13, 120], ["ltr.dataset.Lasot", "ltr.dataset.Got10k", "ltr.dataset.TrackingNet", "ltr.dataset.MSCOCOSeq", "ltr.dataset.Got10k", "ltr.Transform", "ltr.Transform", "ltr.Transform", "ltr.data.processing.DiMPProcessing", "ltr.data.processing.DiMPProcessing", "ltr.data.sampler.DiMPSampler", "ltr.data.LTRLoader", "ltr.data.sampler.DiMPSampler", "ltr.data.LTRLoader", "ltr.models.tracking.dimpnet.dimpnet50", "ltr.actors.DiMPActor", "torch.Adam", "torch.lr_scheduler.StepLR", "ltr.trainers.LTRTrainer", "ltr.trainers.LTRTrainer.train", "ltr.ToGrayscale", "ltr.ToTensorAndJitter", "ltr.Normalize", "ltr.ToTensor", "ltr.Normalize", "ltr.MultiGPU", "torch.MSELoss", "ltr.LBHinge", "list", "range", "actors.DiMPActor.net.classifier.filter_initializer.parameters", "actors.DiMPActor.net.classifier.filter_optimizer.parameters", "actors.DiMPActor.net.classifier.feature_extractor.parameters", "actors.DiMPActor.net.bb_regressor.parameters", "actors.DiMPActor.net.feature_extractor.parameters"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.dimpnet50", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters"], ["params", ".", "search_area_scale", "=", "5", "\n", "\n", "# Learning parameters", "\n", "params", ".", "sample_memory_size", "=", "50", "\n", "params", ".", "learning_rate", "=", "0.01", "\n", "params", ".", "init_samples_minimum_weight", "=", "0.25", "\n", "params", ".", "train_skipping", "=", "20", "\n", "\n", "# Net optimization params", "\n", "params", ".", "update_classifier", "=", "True", "\n", "params", ".", "net_opt_iter", "=", "10", "\n", "params", ".", "net_opt_update_iter", "=", "2", "\n", "params", ".", "net_opt_hn_iter", "=", "1", "\n", "\n", "# Detection parameters", "\n", "params", ".", "window_output", "=", "False", "\n", "\n", "# Init augmentation parameters", "\n", "params", ".", "use_augmentation", "=", "True", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "10", ",", "-", "10", ",", "45", ",", "-", "45", "]", ",", "\n", "'blur'", ":", "[", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "2", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "\n", "params", ".", "target_not_found_threshold", "=", "0.25", "\n", "params", ".", "distractor_threshold", "=", "0.8", "\n", "params", ".", "hard_negative_threshold", "=", "0.5", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "\n", "params", ".", "dispalcement_scale", "=", "0.8", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "\n", "\n", "# IoUnet parameters", "\n", "params", ".", "iounet_augmentation", "=", "False", "\n", "params", ".", "iounet_use_log_scale", "=", "True", "\n", "params", ".", "iounet_k", "=", "3", "\n", "params", ".", "num_init_random_boxes", "=", "9", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "\n", "params", ".", "box_refinement_iter", "=", "5", "\n", "params", ".", "box_refinement_step_length", "=", "1", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "\n", "\n", "params", ".", "net", "=", "NetWithBackbone", "(", "net_path", "=", "'dimp50.pth'", ",", "\n", "use_gpu", "=", "params", ".", "use_gpu", ")", "\n", "\n", "params", ".", "vot_anno_conversion_type", "=", "'preserve_area'", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.prdimp18.run": [[13, 120], ["ltr.dataset.Lasot", "ltr.dataset.Got10k", "ltr.dataset.TrackingNet", "ltr.dataset.MSCOCOSeq", "ltr.dataset.Got10k", "ltr.Transform", "ltr.Transform", "ltr.Transform", "ltr.data.processing.KLDiMPProcessing", "ltr.data.processing.KLDiMPProcessing", "ltr.data.sampler.DiMPSampler", "ltr.data.LTRLoader", "ltr.data.sampler.DiMPSampler", "ltr.data.LTRLoader", "ltr.models.tracking.dimpnet.klcedimpnet18", "ltr.KLDiMPActor", "torch.Adam", "torch.lr_scheduler.StepLR", "ltr.trainers.LTRTrainer", "ltr.trainers.LTRTrainer.train", "ltr.ToGrayscale", "ltr.ToTensorAndJitter", "ltr.Normalize", "ltr.ToTensor", "ltr.Normalize", "ltr.MultiGPU", "ltr.KLRegression", "ltr.KLRegressionGrid", "list", "range", "tracking_actors.KLDiMPActor.net.classifier.parameters", "tracking_actors.KLDiMPActor.net.bb_regressor.parameters", "tracking_actors.KLDiMPActor.net.feature_extractor.parameters"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.klcedimpnet18", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters"], ["params", ".", "search_area_scale", "=", "5", "\n", "\n", "# Learning parameters", "\n", "params", ".", "sample_memory_size", "=", "50", "\n", "params", ".", "learning_rate", "=", "0.01", "\n", "params", ".", "init_samples_minimum_weight", "=", "0.25", "\n", "params", ".", "train_skipping", "=", "20", "\n", "\n", "# Net optimization params", "\n", "params", ".", "update_classifier", "=", "True", "\n", "params", ".", "net_opt_iter", "=", "10", "\n", "params", ".", "net_opt_update_iter", "=", "2", "\n", "params", ".", "net_opt_hn_iter", "=", "1", "\n", "\n", "# Detection parameters", "\n", "params", ".", "window_output", "=", "False", "\n", "\n", "# Init augmentation parameters", "\n", "params", ".", "use_augmentation", "=", "True", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "10", ",", "-", "10", ",", "45", ",", "-", "45", "]", ",", "\n", "'blur'", ":", "[", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "2", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "\n", "params", ".", "score_preprocess", "=", "'softmax'", "\n", "params", ".", "target_not_found_threshold", "=", "0.04", "\n", "params", ".", "distractor_threshold", "=", "0.8", "\n", "params", ".", "hard_negative_threshold", "=", "0.5", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "\n", "params", ".", "dispalcement_scale", "=", "0.8", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "\n", "\n", "# IoUnet parameters", "\n", "params", ".", "box_refinement_space", "=", "'relative'", "\n", "params", ".", "iounet_augmentation", "=", "False", "# Use the augmented samples to compute the modulation vector", "\n", "params", ".", "iounet_k", "=", "3", "# Top-k average to estimate final box", "\n", "params", ".", "num_init_random_boxes", "=", "9", "# Num extra random boxes in addition to the classifier prediction", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "# How much to jitter the translation for random boxes", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "# How much to jitter the scale for random boxes", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "# Limit on the aspect ratio", "\n", "params", ".", "box_refinement_iter", "=", "10", "# Number of iterations for refining the boxes", "\n", "params", ".", "box_refinement_step_length", "=", "2.5e-3", "# 1   # Gradient step length in the bounding box refinement", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "# Multiplicative step length decay (1 means no decay)", "\n", "\n", "params", ".", "net", "=", "NetWithBackbone", "(", "net_path", "=", "'prdimp18.pth.tar'", ",", "\n", "use_gpu", "=", "params", ".", "use_gpu", ")", "\n", "\n", "params", ".", "vot_anno_conversion_type", "=", "'preserve_area'", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.dimp.dimp18.run": [[13, 119], ["ltr.dataset.Lasot", "ltr.dataset.Got10k", "ltr.dataset.TrackingNet", "ltr.dataset.MSCOCOSeq", "ltr.dataset.Got10k", "ltr.Transform", "ltr.Transform", "ltr.Transform", "ltr.data.processing.DiMPProcessing", "ltr.data.processing.DiMPProcessing", "ltr.data.sampler.DiMPSampler", "ltr.data.LTRLoader", "ltr.data.sampler.DiMPSampler", "ltr.data.LTRLoader", "ltr.models.tracking.dimpnet.dimpnet18", "ltr.actors.DiMPActor", "torch.Adam", "torch.lr_scheduler.StepLR", "ltr.trainers.LTRTrainer", "ltr.trainers.LTRTrainer.train", "ltr.ToGrayscale", "ltr.ToTensorAndJitter", "ltr.Normalize", "ltr.ToTensor", "ltr.Normalize", "ltr.MultiGPU", "torch.MSELoss", "ltr.LBHinge", "list", "range", "actors.DiMPActor.net.classifier.filter_initializer.parameters", "actors.DiMPActor.net.classifier.filter_optimizer.parameters", "actors.DiMPActor.net.classifier.feature_extractor.parameters", "actors.DiMPActor.net.bb_regressor.parameters", "actors.DiMPActor.net.feature_extractor.parameters"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.dimpnet.dimpnet18", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters"], ["params", ".", "search_area_scale", "=", "5", "\n", "\n", "# Learning parameters", "\n", "params", ".", "sample_memory_size", "=", "50", "\n", "params", ".", "learning_rate", "=", "0.01", "\n", "params", ".", "init_samples_minimum_weight", "=", "0.25", "\n", "params", ".", "train_skipping", "=", "20", "\n", "\n", "# Net optimization params", "\n", "params", ".", "update_classifier", "=", "True", "\n", "params", ".", "net_opt_iter", "=", "10", "\n", "params", ".", "net_opt_update_iter", "=", "2", "\n", "params", ".", "net_opt_hn_iter", "=", "1", "\n", "\n", "# Detection parameters", "\n", "params", ".", "window_output", "=", "False", "\n", "\n", "# Init augmentation parameters", "\n", "params", ".", "use_augmentation", "=", "True", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "10", ",", "-", "10", ",", "45", ",", "-", "45", "]", ",", "\n", "'blur'", ":", "[", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "2", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "\n", "params", ".", "target_not_found_threshold", "=", "0.25", "\n", "params", ".", "distractor_threshold", "=", "0.8", "\n", "params", ".", "hard_negative_threshold", "=", "0.5", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "\n", "params", ".", "dispalcement_scale", "=", "0.8", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "\n", "\n", "# IoUnet parameters", "\n", "params", ".", "iounet_augmentation", "=", "False", "\n", "params", ".", "iounet_use_log_scale", "=", "True", "\n", "params", ".", "iounet_k", "=", "3", "\n", "params", ".", "num_init_random_boxes", "=", "9", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "\n", "params", ".", "box_refinement_iter", "=", "5", "\n", "params", ".", "box_refinement_step_length", "=", "1", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "\n", "\n", "params", ".", "net", "=", "NetWithBackbone", "(", "net_path", "=", "'dimp18.pth'", ",", "\n", "use_gpu", "=", "params", ".", "use_gpu", ")", "\n", "\n", "params", ".", "vot_anno_conversion_type", "=", "'preserve_area'", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom_gmm_sampl.parameters": [[6, 106], ["pytracking.utils.TrackerParams", "pytracking.utils.TrackerParams", "torch.ones", "pytracking.utils.FeatureParams", "pytracking.features.deep.ATOMResNet18", "pytracking.features.extractor.MultiResolutionExtractor"], "function", ["None"], ["def", "parameters", "(", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "\n", "# These are usually set from outside", "\n", "params", ".", "debug", "=", "0", "# Debug level", "\n", "params", ".", "visualization", "=", "False", "# Do visualization", "\n", "\n", "# Use GPU or not (IoUNet requires this to be True)", "\n", "params", ".", "use_gpu", "=", "True", "\n", "\n", "# Feature specific parameters", "\n", "deep_params", "=", "TrackerParams", "(", ")", "\n", "\n", "# Patch sampling parameters", "\n", "params", ".", "max_image_sample_size", "=", "(", "18", "*", "16", ")", "**", "2", "# Maximum image sample size", "\n", "params", ".", "min_image_sample_size", "=", "(", "18", "*", "16", ")", "**", "2", "# Minimum image sample size", "\n", "params", ".", "search_area_scale", "=", "5", "# Scale relative to target size", "\n", "params", ".", "feature_size_odd", "=", "False", "# Good to use False for even-sized kernels and vice versa", "\n", "\n", "# Optimization parameters", "\n", "params", ".", "CG_iter", "=", "5", "# The number of Conjugate Gradient iterations in each update after the first frame", "\n", "params", ".", "init_CG_iter", "=", "60", "# The total number of Conjugate Gradient iterations used in the first frame", "\n", "params", ".", "init_GN_iter", "=", "6", "# The number of Gauss-Newton iterations used in the first frame (only if the projection matrix is updated)", "\n", "params", ".", "post_init_CG_iter", "=", "0", "# CG iterations to run after GN", "\n", "params", ".", "fletcher_reeves", "=", "False", "# Use the Fletcher-Reeves (true) or Polak-Ribiere (false) formula in the Conjugate Gradient", "\n", "params", ".", "standard_alpha", "=", "True", "# Use the standard formula for computing the step length in Conjugate Gradient", "\n", "params", ".", "CG_forgetting_rate", "=", "None", "# Forgetting rate of the last conjugate direction", "\n", "\n", "# Learning parameters for each feature type", "\n", "deep_params", ".", "learning_rate", "=", "0.01", "# Learning rate", "\n", "deep_params", ".", "init_samples_minimum_weight", "=", "0.25", "# Minimum weight of initial samples in memory", "\n", "deep_params", ".", "output_sigma_factor", "=", "1", "/", "4", "# Standard deviation of Gaussian label relative to target size", "\n", "\n", "# Training parameters", "\n", "params", ".", "sample_memory_size", "=", "250", "# Memory size", "\n", "params", ".", "train_skipping", "=", "10", "# How often to run training (every n-th frame)", "\n", "\n", "# Online model parameters", "\n", "deep_params", ".", "kernel_size", "=", "(", "4", ",", "4", ")", "# Kernel size of filter", "\n", "deep_params", ".", "compressed_dim", "=", "64", "# Dimension output of projection matrix", "\n", "deep_params", ".", "filter_reg", "=", "1e-1", "# Filter regularization factor", "\n", "deep_params", ".", "projection_reg", "=", "1e-4", "# Projection regularization factor", "\n", "\n", "# Windowing", "\n", "params", ".", "feature_window", "=", "False", "# Perform windowing of features", "\n", "params", ".", "window_output", "=", "False", "# Perform windowing of output scores", "\n", "\n", "# Detection parameters", "\n", "params", ".", "scale_factors", "=", "torch", ".", "ones", "(", "1", ")", "# What scales to use for localization (only one scale if IoUNet is used)", "\n", "params", ".", "score_upsample_factor", "=", "1", "# How much Fourier upsampling to use", "\n", "\n", "# Init data augmentation parameters", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "5", ",", "-", "5", ",", "10", ",", "-", "10", ",", "20", ",", "-", "20", ",", "30", ",", "-", "30", ",", "45", ",", "-", "45", ",", "-", "60", ",", "60", "]", ",", "\n", "'blur'", ":", "[", "(", "2", ",", "0.2", ")", ",", "(", "0.2", ",", "2", ")", ",", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "7", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "# How much to expand sample when doing augmentation", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "# How much random shift to do on each augmented sample", "\n", "deep_params", ".", "use_augmentation", "=", "True", "# Whether to use augmentation for this feature", "\n", "\n", "# Factorized convolution parameters", "\n", "# params.use_projection_matrix = True       # Use projection matrix, i.e. use the factorized convolution formulation", "\n", "params", ".", "update_projection_matrix", "=", "True", "# Whether the projection matrix should be optimized or not", "\n", "params", ".", "proj_init_method", "=", "'randn'", "# Method for initializing the projection matrix", "\n", "params", ".", "filter_init_method", "=", "'randn'", "# Method for initializing the spatial filter", "\n", "params", ".", "projection_activation", "=", "'none'", "# Activation function after projection ('none', 'relu', 'elu' or 'mlu')", "\n", "params", ".", "response_activation", "=", "(", "'mlu'", ",", "0.05", ")", "# Activation function on the output scores ('none', 'relu', 'elu' or 'mlu')", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "# Use this or not", "\n", "params", ".", "target_not_found_threshold", "=", "0.25", "# Absolute score threshold to detect target missing", "\n", "params", ".", "distractor_threshold", "=", "0.8", "# Relative threshold to find distractors", "\n", "params", ".", "hard_negative_threshold", "=", "0.5", "# Relative threshold to find hard negative samples", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "# Target neighborhood to remove", "\n", "params", ".", "dispalcement_scale", "=", "0.8", "# Dispacement to consider for distractors", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "# Learning rate if hard negative detected", "\n", "params", ".", "hard_negative_CG_iter", "=", "5", "# Number of optimization iterations to use if hard negative detected", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "# Update scale or not if distractor is close", "\n", "\n", "# IoUNet parameters", "\n", "params", ".", "use_iou_net", "=", "True", "# Use IoU net or not", "\n", "params", ".", "box_refinement_space", "=", "'relative'", "\n", "params", ".", "iounet_augmentation", "=", "False", "# Use the augmented samples to compute the modulation vector", "\n", "params", ".", "iounet_k", "=", "3", "# Top-k average to estimate final box", "\n", "params", ".", "num_init_random_boxes", "=", "9", "# Num extra random boxes in addition to the classifier prediction", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "# How much to jitter the translation for random boxes", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "# How much to jitter the scale for random boxes", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "# Limit on the aspect ratio", "\n", "params", ".", "box_refinement_iter", "=", "10", "# Number of iterations for refining the boxes", "\n", "params", ".", "box_refinement_step_length", "=", "(", "1e-2", ",", "5e-2", ")", "# 1   # Gradient step length in the bounding box refinement 5e-3 2e-2", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "# Multiplicative step length decay (1 means no decay)", "\n", "\n", "# Setup the feature extractor (which includes the IoUNet)", "\n", "deep_fparams", "=", "FeatureParams", "(", "feature_params", "=", "[", "deep_params", "]", ")", "\n", "deep_feat", "=", "deep", ".", "ATOMResNet18", "(", "net_path", "=", "'atom_gmm_sampl'", ",", "output_layers", "=", "[", "'layer3'", "]", ",", "fparams", "=", "deep_fparams", ",", "normalize_power", "=", "2", ")", "\n", "params", ".", "features", "=", "MultiResolutionExtractor", "(", "[", "deep_feat", "]", ")", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.multiscale_no_iounet.parameters": [[6, 105], ["pytracking.utils.TrackerParams", "pytracking.utils.TrackerParams", "pytracking.utils.FeatureParams", "pytracking.features.deep.ATOMResNet18", "pytracking.features.extractor.MultiResolutionExtractor", "torch.arange().float", "torch.arange"], "function", ["None"], ["def", "parameters", "(", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "\n", "# These are usually set from outside", "\n", "params", ".", "debug", "=", "0", "# Debug level", "\n", "params", ".", "visualization", "=", "False", "# Do visualization", "\n", "\n", "# Use GPU or not (IoUNet requires this to be True)", "\n", "params", ".", "use_gpu", "=", "True", "\n", "\n", "# Feature specific parameters", "\n", "deep_params", "=", "TrackerParams", "(", ")", "\n", "\n", "# Patch sampling parameters", "\n", "params", ".", "max_image_sample_size", "=", "(", "18", "*", "16", ")", "**", "2", "# Maximum image sample size", "\n", "params", ".", "min_image_sample_size", "=", "(", "18", "*", "16", ")", "**", "2", "# Minimum image sample size", "\n", "params", ".", "search_area_scale", "=", "5", "# Scale relative to target size", "\n", "params", ".", "feature_size_odd", "=", "False", "# Good to use False for even-sized kernels and vice versa", "\n", "\n", "# Optimization parameters", "\n", "params", ".", "CG_iter", "=", "5", "# The number of Conjugate Gradient iterations in each update after the first frame", "\n", "params", ".", "init_CG_iter", "=", "60", "# The total number of Conjugate Gradient iterations used in the first frame", "\n", "params", ".", "init_GN_iter", "=", "6", "# The number of Gauss-Newton iterations used in the first frame (only if the projection matrix is updated)", "\n", "params", ".", "post_init_CG_iter", "=", "0", "# CG iterations to run after GN", "\n", "params", ".", "fletcher_reeves", "=", "False", "# Use the Fletcher-Reeves (true) or Polak-Ribiere (false) formula in the Conjugate Gradient", "\n", "params", ".", "standard_alpha", "=", "True", "# Use the standard formula for computing the step length in Conjugate Gradient", "\n", "params", ".", "CG_forgetting_rate", "=", "None", "# Forgetting rate of the last conjugate direction", "\n", "\n", "# Learning parameters for each feature type", "\n", "deep_params", ".", "learning_rate", "=", "0.01", "# Learning rate", "\n", "deep_params", ".", "init_samples_minimum_weight", "=", "0.25", "# Minimum weight of initial samples in memory", "\n", "deep_params", ".", "output_sigma_factor", "=", "1", "/", "4", "# Standard deviation of Gaussian label relative to target size", "\n", "\n", "# Training parameters", "\n", "params", ".", "sample_memory_size", "=", "250", "# Memory size", "\n", "params", ".", "train_skipping", "=", "10", "# How often to run training (every n-th frame)", "\n", "\n", "# Online model parameters", "\n", "deep_params", ".", "kernel_size", "=", "(", "4", ",", "4", ")", "# Kernel size of filter", "\n", "deep_params", ".", "compressed_dim", "=", "64", "# Dimension output of projection matrix", "\n", "deep_params", ".", "filter_reg", "=", "1e-1", "# Filter regularization factor", "\n", "deep_params", ".", "projection_reg", "=", "1e-4", "# Projection regularization factor", "\n", "\n", "# Windowing", "\n", "params", ".", "feature_window", "=", "False", "# Perform windowing of features", "\n", "params", ".", "window_output", "=", "False", "# Perform windowing of output scores", "\n", "\n", "# Detection parameters", "\n", "params", ".", "scale_factors", "=", "1.02", "**", "torch", ".", "arange", "(", "-", "2", ",", "3", ")", ".", "float", "(", ")", "# What scales to use for localization (only one scale if IoUNet is used)", "\n", "params", ".", "score_upsample_factor", "=", "1", "# How much Fourier upsampling to use", "\n", "\n", "# Init data augmentation parameters", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "5", ",", "-", "5", ",", "10", ",", "-", "10", ",", "20", ",", "-", "20", ",", "30", ",", "-", "30", ",", "45", ",", "-", "45", ",", "-", "60", ",", "60", "]", ",", "\n", "'blur'", ":", "[", "(", "2", ",", "0.2", ")", ",", "(", "0.2", ",", "2", ")", ",", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "7", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "# How much to expand sample when doing augmentation", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "# How much random shift to do on each augmented sample", "\n", "deep_params", ".", "use_augmentation", "=", "True", "# Whether to use augmentation for this feature", "\n", "\n", "# Factorized convolution parameters", "\n", "# params.use_projection_matrix = True       # Use projection matrix, i.e. use the factorized convolution formulation", "\n", "params", ".", "update_projection_matrix", "=", "True", "# Whether the projection matrix should be optimized or not", "\n", "params", ".", "proj_init_method", "=", "'randn'", "# Method for initializing the projection matrix", "\n", "params", ".", "filter_init_method", "=", "'randn'", "# Method for initializing the spatial filter", "\n", "params", ".", "projection_activation", "=", "'none'", "# Activation function after projection ('none', 'relu', 'elu' or 'mlu')", "\n", "params", ".", "response_activation", "=", "(", "'mlu'", ",", "0.05", ")", "# Activation function on the output scores ('none', 'relu', 'elu' or 'mlu')", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "# Use this or not", "\n", "params", ".", "target_not_found_threshold", "=", "0.25", "# Absolute score threshold to detect target missing", "\n", "params", ".", "distractor_threshold", "=", "0.8", "# Relative threshold to find distractors", "\n", "params", ".", "hard_negative_threshold", "=", "0.5", "# Relative threshold to find hard negative samples", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "# Target neighborhood to remove", "\n", "params", ".", "dispalcement_scale", "=", "0.8", "# Dispacement to consider for distractors", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "# Learning rate if hard negative detected", "\n", "params", ".", "hard_negative_CG_iter", "=", "5", "# Number of optimization iterations to use if hard negative detected", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "# Update scale or not if distractor is close", "\n", "\n", "# IoUNet parameters", "\n", "params", ".", "use_iou_net", "=", "False", "# Use IoU net or not", "\n", "params", ".", "iounet_augmentation", "=", "False", "# Use the augmented samples to compute the modulation vector", "\n", "params", ".", "iounet_k", "=", "3", "# Top-k average to estimate final box", "\n", "params", ".", "num_init_random_boxes", "=", "9", "# Num extra random boxes in addition to the classifier prediction", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "# How much to jitter the translation for random boxes", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "# How much to jitter the scale for random boxes", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "# Limit on the aspect ratio", "\n", "params", ".", "box_refinement_iter", "=", "5", "# Number of iterations for refining the boxes", "\n", "params", ".", "box_refinement_step_length", "=", "1", "# Gradient step length in the bounding box refinement", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "# Multiplicative step length decay (1 means no decay)", "\n", "\n", "# Setup the feature extractor (which includes the IoUNet)", "\n", "deep_fparams", "=", "FeatureParams", "(", "feature_params", "=", "[", "deep_params", "]", ")", "\n", "deep_feat", "=", "deep", ".", "ATOMResNet18", "(", "net_path", "=", "'atom_default.pth'", ",", "output_layers", "=", "[", "'layer3'", "]", ",", "fparams", "=", "deep_fparams", ",", "normalize_power", "=", "2", ")", "\n", "params", ".", "features", "=", "MultiResolutionExtractor", "(", "[", "deep_feat", "]", ")", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.default.parameters": [[6, 105], ["pytracking.utils.TrackerParams", "pytracking.utils.TrackerParams", "torch.ones", "pytracking.utils.FeatureParams", "pytracking.features.deep.ATOMResNet18", "pytracking.features.extractor.MultiResolutionExtractor"], "function", ["None"], ["def", "parameters", "(", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "\n", "params", ".", "debug", "=", "0", "\n", "params", ".", "visualization", "=", "False", "\n", "\n", "params", ".", "use_gpu", "=", "True", "\n", "\n", "# Feature specific parameters", "\n", "shallow_params", "=", "TrackerParams", "(", ")", "\n", "deep_params", "=", "TrackerParams", "(", ")", "\n", "\n", "# Patch sampling parameters", "\n", "params", ".", "max_image_sample_size", "=", "250", "**", "2", "# Maximum image sample size", "\n", "params", ".", "min_image_sample_size", "=", "200", "**", "2", "# Minimum image sample size", "\n", "params", ".", "search_area_scale", "=", "4.5", "# Scale relative to target size", "\n", "\n", "# Conjugate Gradient parameters", "\n", "params", ".", "CG_iter", "=", "5", "# The number of Conjugate Gradient iterations in each update after the first frame", "\n", "params", ".", "init_CG_iter", "=", "100", "# The total number of Conjugate Gradient iterations used in the first frame", "\n", "params", ".", "init_GN_iter", "=", "10", "# The number of Gauss-Newton iterations used in the first frame (only if the projection matrix is updated)", "\n", "params", ".", "post_init_CG_iter", "=", "0", "# CG iterations to run after GN", "\n", "params", ".", "fletcher_reeves", "=", "False", "# Use the Fletcher-Reeves (true) or Polak-Ribiere (false) formula in the Conjugate Gradient", "\n", "params", ".", "standard_alpha", "=", "True", "# Use the standard formula for computing the step length in Conjugate Gradient", "\n", "params", ".", "CG_forgetting_rate", "=", "75", "# Forgetting rate of the last conjugate direction", "\n", "params", ".", "precond_data_param", "=", "0.3", "# Weight of the data term in the preconditioner", "\n", "params", ".", "precond_reg_param", "=", "0.15", "# Weight of the regularization term in the preconditioner", "\n", "params", ".", "precond_proj_param", "=", "35", "# Weight of the projection matrix part in the preconditioner", "\n", "\n", "# Learning parameters", "\n", "shallow_params", ".", "learning_rate", "=", "0.025", "\n", "deep_params", ".", "learning_rate", "=", "0.0075", "\n", "shallow_params", ".", "output_sigma_factor", "=", "1", "/", "16", "\n", "deep_params", ".", "output_sigma_factor", "=", "1", "/", "4", "\n", "\n", "# Training parameters", "\n", "params", ".", "sample_memory_size", "=", "200", "# Memory size", "\n", "params", ".", "train_skipping", "=", "10", "# How often to run training (every n-th frame)", "\n", "\n", "# Detection parameters", "\n", "params", ".", "scale_factors", "=", "1.02", "**", "torch", ".", "arange", "(", "-", "2", ",", "3", ")", ".", "float", "(", ")", "# What scales to use for localization", "\n", "params", ".", "score_upsample_factor", "=", "1", "# How much Fourier upsampling to use", "\n", "params", ".", "score_fusion_strategy", "=", "'weightedsum'", "# Fusion strategy", "\n", "shallow_params", ".", "translation_weight", "=", "0.4", "# Weight of this feature", "\n", "deep_params", ".", "translation_weight", "=", "1", "-", "shallow_params", ".", "translation_weight", "\n", "\n", "# Init augmentation parameters", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "5", ",", "-", "5", ",", "10", ",", "-", "10", ",", "20", ",", "-", "20", ",", "30", ",", "-", "30", ",", "45", ",", "-", "45", ",", "-", "60", ",", "60", "]", ",", "\n", "'blur'", ":", "[", "(", "2", ",", "0.2", ")", ",", "(", "0.2", ",", "2", ")", ",", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'shift'", ":", "[", "(", "6", ",", "6", ")", ",", "(", "-", "6", ",", "6", ")", ",", "(", "6", ",", "-", "6", ")", ",", "(", "-", "6", ",", "-", "6", ")", "]", ",", "\n", "'dropout'", ":", "(", "7", ",", "0.2", ")", "}", "\n", "\n", "# Whether to use augmentation for this feature", "\n", "deep_params", ".", "use_augmentation", "=", "True", "\n", "shallow_params", ".", "use_augmentation", "=", "True", "\n", "\n", "# Factorized convolution parameters", "\n", "# params.use_projection_matrix = True    # Use projection matrix, i.e. use the factorized convolution formulation", "\n", "params", ".", "update_projection_matrix", "=", "True", "# Whether the projection matrix should be optimized or not", "\n", "# params.proj_init_method = 'pca'        # Method for initializing the projection matrix", "\n", "params", ".", "projection_reg", "=", "5e-8", "# Regularization paremeter of the projection matrix", "\n", "shallow_params", ".", "compressed_dim", "=", "16", "# Dimension output of projection matrix for shallow features", "\n", "deep_params", ".", "compressed_dim", "=", "64", "# Dimension output of projection matrix for deep features", "\n", "\n", "# Interpolation parameters", "\n", "params", ".", "interpolation_method", "=", "'bicubic'", "# The kind of interpolation kernel", "\n", "params", ".", "interpolation_bicubic_a", "=", "-", "0.75", "# The parameter for the bicubic interpolation kernel", "\n", "params", ".", "interpolation_centering", "=", "True", "# Center the kernel at the feature sample", "\n", "params", ".", "interpolation_windowing", "=", "False", "# Do additional windowing on the Fourier coefficients of the kernel", "\n", "\n", "# Regularization parameters", "\n", "shallow_params", ".", "use_reg_window", "=", "True", "# Use spatial regularization or not", "\n", "shallow_params", ".", "reg_window_min", "=", "1e-4", "# The minimum value of the regularization window", "\n", "shallow_params", ".", "reg_window_edge", "=", "10e-3", "# The impact of the spatial regularization", "\n", "shallow_params", ".", "reg_window_power", "=", "2", "# The degree of the polynomial to use (e.g. 2 is a quadratic window)", "\n", "shallow_params", ".", "reg_sparsity_threshold", "=", "0.05", "# A relative threshold of which DFT coefficients that should be set to zero", "\n", "\n", "deep_params", ".", "use_reg_window", "=", "True", "# Use spatial regularization or not", "\n", "deep_params", ".", "reg_window_min", "=", "10e-4", "# The minimum value of the regularization window", "\n", "deep_params", ".", "reg_window_edge", "=", "50e-3", "# The impact of the spatial regularization", "\n", "deep_params", ".", "reg_window_power", "=", "2", "# The degree of the polynomial to use (e.g. 2 is a quadratic window)", "\n", "deep_params", ".", "reg_sparsity_threshold", "=", "0.1", "# A relative threshold of which DFT coefficients that should be set to zero", "\n", "\n", "\n", "fparams", "=", "FeatureParams", "(", "feature_params", "=", "[", "shallow_params", ",", "deep_params", "]", ")", "\n", "features", "=", "deep", ".", "ResNet18m1", "(", "output_layers", "=", "[", "'vggconv1'", ",", "'layer3'", "]", ",", "use_gpu", "=", "params", ".", "use_gpu", ",", "fparams", "=", "fparams", ",", "\n", "pool_stride", "=", "[", "2", ",", "1", "]", ",", "normalize_power", "=", "2", ")", "\n", "\n", "params", ".", "features", "=", "MultiResolutionExtractor", "(", "[", "features", "]", ")", "\n", "\n", "return", "params", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom_prob_ml.parameters": [[6, 106], ["pytracking.utils.TrackerParams", "pytracking.utils.TrackerParams", "torch.ones", "pytracking.utils.FeatureParams", "pytracking.features.deep.ATOMResNet18", "pytracking.features.extractor.MultiResolutionExtractor"], "function", ["None"], ["def", "parameters", "(", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "\n", "# These are usually set from outside", "\n", "params", ".", "debug", "=", "0", "# Debug level", "\n", "params", ".", "visualization", "=", "False", "# Do visualization", "\n", "\n", "# Use GPU or not (IoUNet requires this to be True)", "\n", "params", ".", "use_gpu", "=", "True", "\n", "\n", "# Feature specific parameters", "\n", "deep_params", "=", "TrackerParams", "(", ")", "\n", "\n", "# Patch sampling parameters", "\n", "params", ".", "max_image_sample_size", "=", "(", "18", "*", "16", ")", "**", "2", "# Maximum image sample size", "\n", "params", ".", "min_image_sample_size", "=", "(", "18", "*", "16", ")", "**", "2", "# Minimum image sample size", "\n", "params", ".", "search_area_scale", "=", "5", "# Scale relative to target size", "\n", "params", ".", "feature_size_odd", "=", "False", "# Good to use False for even-sized kernels and vice versa", "\n", "\n", "# Optimization parameters", "\n", "params", ".", "CG_iter", "=", "5", "# The number of Conjugate Gradient iterations in each update after the first frame", "\n", "params", ".", "init_CG_iter", "=", "60", "# The total number of Conjugate Gradient iterations used in the first frame", "\n", "params", ".", "init_GN_iter", "=", "6", "# The number of Gauss-Newton iterations used in the first frame (only if the projection matrix is updated)", "\n", "params", ".", "post_init_CG_iter", "=", "0", "# CG iterations to run after GN", "\n", "params", ".", "fletcher_reeves", "=", "False", "# Use the Fletcher-Reeves (true) or Polak-Ribiere (false) formula in the Conjugate Gradient", "\n", "params", ".", "standard_alpha", "=", "True", "# Use the standard formula for computing the step length in Conjugate Gradient", "\n", "params", ".", "CG_forgetting_rate", "=", "None", "# Forgetting rate of the last conjugate direction", "\n", "\n", "# Learning parameters for each feature type", "\n", "deep_params", ".", "learning_rate", "=", "0.01", "# Learning rate", "\n", "deep_params", ".", "init_samples_minimum_weight", "=", "0.25", "# Minimum weight of initial samples in memory", "\n", "deep_params", ".", "output_sigma_factor", "=", "1", "/", "4", "# Standard deviation of Gaussian label relative to target size", "\n", "\n", "# Training parameters", "\n", "params", ".", "sample_memory_size", "=", "250", "# Memory size", "\n", "params", ".", "train_skipping", "=", "10", "# How often to run training (every n-th frame)", "\n", "\n", "# Online model parameters", "\n", "deep_params", ".", "kernel_size", "=", "(", "4", ",", "4", ")", "# Kernel size of filter", "\n", "deep_params", ".", "compressed_dim", "=", "64", "# Dimension output of projection matrix", "\n", "deep_params", ".", "filter_reg", "=", "1e-1", "# Filter regularization factor", "\n", "deep_params", ".", "projection_reg", "=", "1e-4", "# Projection regularization factor", "\n", "\n", "# Windowing", "\n", "params", ".", "feature_window", "=", "False", "# Perform windowing of features", "\n", "params", ".", "window_output", "=", "False", "# Perform windowing of output scores", "\n", "\n", "# Detection parameters", "\n", "params", ".", "scale_factors", "=", "torch", ".", "ones", "(", "1", ")", "# What scales to use for localization (only one scale if IoUNet is used)", "\n", "params", ".", "score_upsample_factor", "=", "1", "# How much Fourier upsampling to use", "\n", "\n", "# Init data augmentation parameters", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "5", ",", "-", "5", ",", "10", ",", "-", "10", ",", "20", ",", "-", "20", ",", "30", ",", "-", "30", ",", "45", ",", "-", "45", ",", "-", "60", ",", "60", "]", ",", "\n", "'blur'", ":", "[", "(", "2", ",", "0.2", ")", ",", "(", "0.2", ",", "2", ")", ",", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "7", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "# How much to expand sample when doing augmentation", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "# How much random shift to do on each augmented sample", "\n", "deep_params", ".", "use_augmentation", "=", "True", "# Whether to use augmentation for this feature", "\n", "\n", "# Factorized convolution parameters", "\n", "# params.use_projection_matrix = True       # Use projection matrix, i.e. use the factorized convolution formulation", "\n", "params", ".", "update_projection_matrix", "=", "True", "# Whether the projection matrix should be optimized or not", "\n", "params", ".", "proj_init_method", "=", "'randn'", "# Method for initializing the projection matrix", "\n", "params", ".", "filter_init_method", "=", "'randn'", "# Method for initializing the spatial filter", "\n", "params", ".", "projection_activation", "=", "'none'", "# Activation function after projection ('none', 'relu', 'elu' or 'mlu')", "\n", "params", ".", "response_activation", "=", "(", "'mlu'", ",", "0.05", ")", "# Activation function on the output scores ('none', 'relu', 'elu' or 'mlu')", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "# Use this or not", "\n", "params", ".", "target_not_found_threshold", "=", "0.25", "# Absolute score threshold to detect target missing", "\n", "params", ".", "distractor_threshold", "=", "0.8", "# Relative threshold to find distractors", "\n", "params", ".", "hard_negative_threshold", "=", "0.5", "# Relative threshold to find hard negative samples", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "# Target neighborhood to remove", "\n", "params", ".", "dispalcement_scale", "=", "0.8", "# Dispacement to consider for distractors", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "# Learning rate if hard negative detected", "\n", "params", ".", "hard_negative_CG_iter", "=", "5", "# Number of optimization iterations to use if hard negative detected", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "# Update scale or not if distractor is close", "\n", "\n", "# IoUNet parameters", "\n", "params", ".", "use_iou_net", "=", "True", "# Use IoU net or not", "\n", "params", ".", "box_refinement_space", "=", "'relative'", "\n", "params", ".", "iounet_augmentation", "=", "False", "# Use the augmented samples to compute the modulation vector", "\n", "params", ".", "iounet_k", "=", "3", "# Top-k average to estimate final box", "\n", "params", ".", "num_init_random_boxes", "=", "9", "# Num extra random boxes in addition to the classifier prediction", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "# How much to jitter the translation for random boxes", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "# How much to jitter the scale for random boxes", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "# Limit on the aspect ratio", "\n", "params", ".", "box_refinement_iter", "=", "10", "# Number of iterations for refining the boxes", "\n", "params", ".", "box_refinement_step_length", "=", "(", "2e-4", ",", "10e-4", ")", "# 1   # Gradient step length in the bounding box refinement", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "# Multiplicative step length decay (1 means no decay)", "\n", "\n", "# Setup the feature extractor (which includes the IoUNet)", "\n", "deep_fparams", "=", "FeatureParams", "(", "feature_params", "=", "[", "deep_params", "]", ")", "\n", "deep_feat", "=", "deep", ".", "ATOMResNet18", "(", "net_path", "=", "'atom_prob_ml'", ",", "output_layers", "=", "[", "'layer3'", "]", ",", "fparams", "=", "deep_fparams", ",", "normalize_power", "=", "2", ")", "\n", "params", ".", "features", "=", "MultiResolutionExtractor", "(", "[", "deep_feat", "]", ")", "\n", "\n", "return", "params", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters": [[6, 105], ["pytracking.utils.TrackerParams", "pytracking.utils.TrackerParams", "torch.ones", "pytracking.utils.FeatureParams", "pytracking.features.deep.ATOMResNet18", "pytracking.features.extractor.MultiResolutionExtractor"], "function", ["None"], ["def", "parameters", "(", ")", ":", "\n", "    ", "params", "=", "TrackerParams", "(", ")", "\n", "\n", "# These are usually set from outside", "\n", "params", ".", "debug", "=", "0", "# Debug level", "\n", "params", ".", "visualization", "=", "False", "# Do visualization", "\n", "\n", "# Use GPU or not (IoUNet requires this to be True)", "\n", "params", ".", "use_gpu", "=", "True", "\n", "\n", "# Feature specific parameters", "\n", "deep_params", "=", "TrackerParams", "(", ")", "\n", "\n", "# Patch sampling parameters", "\n", "params", ".", "max_image_sample_size", "=", "(", "14", "*", "16", ")", "**", "2", "# Maximum image sample size", "\n", "params", ".", "min_image_sample_size", "=", "(", "14", "*", "16", ")", "**", "2", "# Minimum image sample size", "\n", "params", ".", "search_area_scale", "=", "4", "# Scale relative to target size", "\n", "params", ".", "feature_size_odd", "=", "False", "# Good to use False for even-sized kernels and vice versa", "\n", "\n", "# Optimization parameters", "\n", "params", ".", "CG_iter", "=", "5", "# The number of Conjugate Gradient iterations in each update after the first frame", "\n", "params", ".", "init_CG_iter", "=", "60", "# The total number of Conjugate Gradient iterations used in the first frame", "\n", "params", ".", "init_GN_iter", "=", "6", "# The number of Gauss-Newton iterations used in the first frame (only if the projection matrix is updated)", "\n", "params", ".", "post_init_CG_iter", "=", "0", "# CG iterations to run after GN", "\n", "params", ".", "fletcher_reeves", "=", "False", "# Use the Fletcher-Reeves (true) or Polak-Ribiere (false) formula in the Conjugate Gradient", "\n", "params", ".", "standard_alpha", "=", "True", "# Use the standard formula for computing the step length in Conjugate Gradient", "\n", "params", ".", "CG_forgetting_rate", "=", "None", "# Forgetting rate of the last conjugate direction", "\n", "\n", "# Learning parameters for each feature type", "\n", "deep_params", ".", "learning_rate", "=", "0.0075", "# Learning rate", "\n", "deep_params", ".", "output_sigma_factor", "=", "1", "/", "4", "# Standard deviation of Gaussian label relative to target size", "\n", "\n", "# Training parameters", "\n", "params", ".", "sample_memory_size", "=", "250", "# Memory size", "\n", "params", ".", "train_skipping", "=", "10", "# How often to run training (every n-th frame)", "\n", "\n", "# Online model parameters", "\n", "deep_params", ".", "kernel_size", "=", "(", "4", ",", "4", ")", "# Kernel size of filter", "\n", "deep_params", ".", "compressed_dim", "=", "64", "# Dimension output of projection matrix", "\n", "deep_params", ".", "filter_reg", "=", "1e-1", "# Filter regularization factor", "\n", "deep_params", ".", "projection_reg", "=", "1e-4", "# Projection regularization factor", "\n", "\n", "# Windowing", "\n", "params", ".", "feature_window", "=", "False", "# Perform windowing of features", "\n", "params", ".", "window_output", "=", "True", "# Perform windowing of output scores", "\n", "\n", "# Detection parameters", "\n", "params", ".", "scale_factors", "=", "torch", ".", "ones", "(", "1", ")", "# What scales to use for localization (only one scale if IoUNet is used)", "\n", "params", ".", "score_upsample_factor", "=", "1", "# How much Fourier upsampling to use", "\n", "\n", "# Init data augmentation parameters", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "5", ",", "-", "5", ",", "10", ",", "-", "10", ",", "20", ",", "-", "20", ",", "30", ",", "-", "30", ",", "45", ",", "-", "45", ",", "-", "60", ",", "60", "]", ",", "\n", "'blur'", ":", "[", "(", "2", ",", "0.2", ")", ",", "(", "0.2", ",", "2", ")", ",", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "7", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "# How much to expand sample when doing augmentation", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "# How much random shift to do on each augmented sample", "\n", "deep_params", ".", "use_augmentation", "=", "True", "# Whether to use augmentation for this feature", "\n", "\n", "# Factorized convolution parameters", "\n", "# params.use_projection_matrix = True       # Use projection matrix, i.e. use the factorized convolution formulation", "\n", "params", ".", "update_projection_matrix", "=", "True", "# Whether the projection matrix should be optimized or not", "\n", "params", ".", "proj_init_method", "=", "'randn'", "# Method for initializing the projection matrix", "\n", "params", ".", "filter_init_method", "=", "'randn'", "# Method for initializing the spatial filter", "\n", "params", ".", "projection_activation", "=", "'none'", "# Activation function after projection ('none', 'relu', 'elu' or 'mlu')", "\n", "params", ".", "response_activation", "=", "(", "'mlu'", ",", "0.05", ")", "# Activation function on the output scores ('none', 'relu', 'elu' or 'mlu')", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "# Use this or not", "\n", "params", ".", "target_not_found_threshold", "=", "-", "1", "# Absolute score threshold to detect target missing", "\n", "params", ".", "distractor_threshold", "=", "100", "# Relative threshold to find distractors", "\n", "params", ".", "hard_negative_threshold", "=", "0.3", "# Relative threshold to find hard negative samples", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "# Target neighborhood to remove", "\n", "params", ".", "dispalcement_scale", "=", "0.7", "# Dispacement to consider for distractors", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "# Learning rate if hard negative detected", "\n", "params", ".", "hard_negative_CG_iter", "=", "5", "# Number of optimization iterations to use if hard negative detected", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "# Update scale or not if distractor is close", "\n", "\n", "# IoUNet parameters", "\n", "params", ".", "iounet_augmentation", "=", "False", "# Use the augmented samples to compute the modulation vector", "\n", "params", ".", "iounet_k", "=", "3", "# Top-k average to estimate final box", "\n", "params", ".", "num_init_random_boxes", "=", "9", "# Num extra random boxes in addition to the classifier prediction", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "# How much to jitter the translation for random boxes", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "# How much to jitter the scale for random boxes", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "# Limit on the aspect ratio", "\n", "params", ".", "box_refinement_iter", "=", "5", "# Number of iterations for refining the boxes", "\n", "params", ".", "box_refinement_step_length", "=", "1", "# Gradient step length in the bounding box refinement", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "# Multiplicative step length decay (1 means no decay)", "\n", "\n", "# Setup the feature extractor (which includes the IoUNet)", "\n", "deep_fparams", "=", "FeatureParams", "(", "feature_params", "=", "[", "deep_params", "]", ")", "\n", "deep_feat", "=", "deep", ".", "ATOMResNet18", "(", "net_path", "=", "'atom_default.pth'", ",", "output_layers", "=", "[", "'layer3'", "]", ",", "fparams", "=", "deep_fparams", ",", "\n", "normalize_power", "=", "2", ")", "\n", "params", ".", "features", "=", "MultiResolutionExtractor", "(", "[", "deep_feat", "]", ")", "\n", "\n", "params", ".", "vot_anno_conversion_type", "=", "'preserve_area'", "\n", "return", "params", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.__init__.get_tracker_class": [[3, 5], ["None"], "function", ["None"], []], "home.repos.pwc.inspect_result.researchmm_Stark.atom.optim.FactorizedConvProblem.__init__": [[7, 19], ["optim.FactorizedConvProblem.filter_reg.concat"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.concat"], ["\n", "class", "FactorizedConvProblem", "(", "optimization", ".", "L2Problem", ")", ":", "\n", "    ", "def", "__init__", "(", "self", ",", "training_samples", ":", "TensorList", ",", "yf", ":", "TensorList", ",", "reg_filter", ":", "torch", ".", "Tensor", ",", "init_proj_mat", ":", "TensorList", ",", "params", ",", "sample_weights", ":", "torch", ".", "Tensor", "=", "None", ")", ":", "\n", "        ", "self", ".", "training_samples", "=", "training_samples", "\n", "self", ".", "yf", "=", "complex", ".", "complex", "(", "yf", ")", ".", "permute", "(", "2", ",", "3", ",", "0", ",", "1", ",", "4", ")", "\n", "self", ".", "reg_filter", "=", "reg_filter", "\n", "self", ".", "sample_weights_sqrt", "=", "None", "if", "sample_weights", "is", "None", "else", "sample_weights", ".", "sqrt", "(", ")", "\n", "self", ".", "params", "=", "params", "\n", "\n", "# Sample energy for preconditioner", "\n", "compressed_samples", "=", "complex", ".", "mtimes", "(", "self", ".", "training_samples", ",", "init_proj_mat", ")", "\n", "self", ".", "sample_energy", "=", "complex", ".", "abs_sqr", "(", "compressed_samples", ")", ".", "mean", "(", "dim", "=", "2", ",", "keepdim", "=", "True", ")", ".", "permute", "(", "2", ",", "3", ",", "0", ",", "1", ")", "\n", "self", ".", "reg_energy", "=", "self", ".", "reg_filter", ".", "view", "(", "-", "1", ")", "@", "self", ".", "reg_filter", ".", "view", "(", "-", "1", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.optim.FactorizedConvProblem.__call__": [[20, 47], ["pytracking.operation.conv1x1().apply", "pytracking.operation.conv2d().apply", "pytracking.operation.conv2d().apply.extend", "pytracking.operation.conv2d().apply.extend", "optim.FactorizedConvProblem.sample_weights.sqrt().view", "pytracking.operation.conv1x1", "pytracking.operation.conv2d", "optim.FactorizedConvProblem.filter_reg.apply", "optim.FactorizedConvProblem.projection_reg.apply", "len", "len", "optim.FactorizedConvProblem.sample_weights.sqrt"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv1x1", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply"], ["\n", "# Projection energy for preconditioner", "\n", "self", ".", "proj_energy", "=", "2", "*", "fourier", ".", "inner_prod_fs", "(", "yf", ",", "yf", ")", "/", "self", ".", "training_samples", ".", "size", "(", "3", ")", "\n", "\n", "# Filter part of preconditioner", "\n", "self", ".", "diag_M", "=", "(", "1", "-", "self", ".", "params", ".", "precond_reg_param", ")", "*", "(", "self", ".", "params", ".", "precond_data_param", "*", "self", ".", "sample_energy", "+", "\n", "(", "1", "-", "self", ".", "params", ".", "precond_data_param", ")", "*", "self", ".", "sample_energy", ".", "mean", "(", "1", ",", "keepdim", "=", "True", ")", ")", "+", "self", ".", "params", ".", "precond_reg_param", "*", "self", ".", "reg_energy", "\n", "self", ".", "diag_M", ".", "unsqueeze_", "(", "-", "1", ")", "\n", "\n", "# Projection matrix part of preconditioner", "\n", "self", ".", "diag_M", ".", "extend", "(", "self", ".", "params", ".", "precond_proj_param", "*", "(", "self", ".", "proj_energy", "+", "self", ".", "params", ".", "projection_reg", ")", ")", "\n", "\n", "\n", "", "def", "__call__", "(", "self", ",", "x", ":", "TensorList", ")", ":", "\n", "        ", "\"\"\"\n        Compute residuals\n        :param x: [filters, projection_matrices]\n        :return: [data_terms, filter_regularizations, proj_mat_regularizations]\n        \"\"\"", "\n", "hf", "=", "x", "[", ":", "len", "(", "x", ")", "//", "2", "]", "\n", "P", "=", "x", "[", "len", "(", "x", ")", "//", "2", ":", "]", "\n", "\n", "compressed_samples", "=", "complex", ".", "mtimes", "(", "self", ".", "training_samples", ",", "P", ")", "\n", "residuals", "=", "complex", ".", "mtimes", "(", "compressed_samples", ",", "hf", ".", "permute", "(", "2", ",", "3", ",", "1", ",", "0", ",", "4", ")", ")", "# (h, w, num_samp, num_filt, 2)", "\n", "residuals", "=", "residuals", "-", "self", ".", "yf", "\n", "\n", "if", "self", ".", "sample_weights_sqrt", "is", "not", "None", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.optim.FactorizedConvProblem.ip_input": [[49, 66], ["pytracking.operation.conv2d().view", "pytracking.operation.conv2d().view", "pytracking.operation.conv2d().view.concat", "len", "pytracking.operation.conv2d().view.clone", "pytracking.operation.conv2d", "pytracking.operation.conv2d", "a_P.view", "b_P.view"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.concat", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d"], ["\n", "\n", "# Add spatial regularization", "\n", "", "for", "hfe", ",", "reg_filter", "in", "zip", "(", "hf", ",", "self", ".", "reg_filter", ")", ":", "\n", "            ", "reg_pad1", "=", "min", "(", "reg_filter", ".", "shape", "[", "-", "2", "]", "-", "1", ",", "hfe", ".", "shape", "[", "-", "3", "]", "-", "1", ")", "\n", "reg_pad2", "=", "min", "(", "reg_filter", ".", "shape", "[", "-", "1", "]", "-", "1", ",", "hfe", ".", "shape", "[", "-", "2", "]", "-", "1", ")", "\n", "\n", "# Add part needed for convolution", "\n", "if", "reg_pad2", ">", "0", ":", "\n", "                ", "hfe_left_padd", "=", "complex", ".", "conj", "(", "hfe", "[", "...", ",", "1", ":", "reg_pad2", "+", "1", ",", ":", "]", ".", "clone", "(", ")", ".", "detach", "(", ")", ".", "flip", "(", "(", "2", ",", "3", ")", ")", ")", "\n", "hfe_conv", "=", "torch", ".", "cat", "(", "[", "hfe_left_padd", ",", "hfe", "]", ",", "-", "2", ")", "\n", "", "else", ":", "\n", "                ", "hfe_conv", "=", "hfe", ".", "clone", "(", ")", "\n", "\n", "# Shift data to batch dimension", "\n", "", "hfe_conv", "=", "hfe_conv", ".", "permute", "(", "0", ",", "1", ",", "4", ",", "2", ",", "3", ")", ".", "reshape", "(", "-", "1", ",", "1", ",", "hfe_conv", ".", "shape", "[", "-", "3", "]", ",", "hfe_conv", ".", "shape", "[", "-", "2", "]", ")", "\n", "\n", "# Do first convolution", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.optim.FactorizedConvProblem.M1": [[67, 69], ["None"], "methods", ["None"], ["hfe_conv", "=", "F", ".", "conv2d", "(", "hfe_conv", ",", "reg_filter", ",", "padding", "=", "(", "reg_pad1", ",", "reg_pad2", ")", ")", "\n", "\n", "residuals", ".", "append", "(", "hfe_conv", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.optim.ConvProblem.__init__": [[72, 78], ["None"], "methods", ["None"], ["", "residuals", ".", "extend", "(", "math", ".", "sqrt", "(", "self", ".", "params", ".", "projection_reg", ")", "*", "P", ")", "\n", "\n", "return", "residuals", "\n", "\n", "\n", "", "def", "ip_input", "(", "self", ",", "a", ":", "TensorList", ",", "b", ":", "TensorList", ")", ":", "\n", "        ", "num", "=", "len", "(", "a", ")", "//", "2", "# Number of filters", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.optim.ConvProblem.__call__": [[79, 95], ["pytracking.operation.conv2d().apply", "pytracking.operation.conv2d().apply.extend", "optim.ConvProblem.sample_weights.sqrt().view", "pytracking.operation.conv2d", "optim.ConvProblem.filter_reg.apply", "optim.ConvProblem.sample_weights.sqrt"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply"], ["a_filter", "=", "a", "[", ":", "num", "]", "\n", "b_filter", "=", "b", "[", ":", "num", "]", "\n", "a_P", "=", "a", "[", "num", ":", "]", "\n", "b_P", "=", "b", "[", "num", ":", "]", "\n", "\n", "# Filter inner product", "\n", "ip_out", "=", "fourier", ".", "inner_prod_fs", "(", "a_filter", ",", "b_filter", ")", "\n", "\n", "# Add projection matrix part", "\n", "ip_out", "+=", "a_P", ".", "reshape", "(", "-", "1", ")", "@", "b_P", ".", "reshape", "(", "-", "1", ")", "\n", "\n", "# Have independent inner products for each filter", "\n", "return", "ip_out", ".", "concat", "(", "ip_out", ".", "clone", "(", ")", ")", "\n", "\n", "\n", "", "def", "ip_output", "(", "self", ",", "a", ":", "TensorList", ",", "b", ":", "TensorList", ")", ":", "\n", "        ", "num", "=", "len", "(", "a", ")", "//", "3", "# Number of filters", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.optim.ConvProblem.ip_input": [[96, 100], ["pytracking.operation.conv2d().view", "pytracking.operation.conv2d"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d"], ["a_data", "=", "a", "[", ":", "num", "]", ".", "permute", "(", "2", ",", "3", ",", "0", ",", "1", ",", "4", ")", "\n", "b_data", "=", "b", "[", ":", "num", "]", ".", "permute", "(", "2", ",", "3", ",", "0", ",", "1", ",", "4", ")", "\n", "a_filt_reg", "=", "a", "[", "num", ":", "2", "*", "num", "]", "\n", "b_filt_reg", "=", "b", "[", "num", ":", "2", "*", "num", "]", "\n", "a_P_reg", "=", "a", "[", "2", "*", "num", ":", "]", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.initialize_features": [[20, 24], ["getattr", "atom.ATOM.params.features.initialize"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize"], ["def", "initialize_features", "(", "self", ")", ":", "\n", "        ", "if", "not", "getattr", "(", "self", ",", "'features_initialized'", ",", "False", ")", ":", "\n", "            ", "self", ".", "params", ".", "features", ".", "initialize", "(", ")", "\n", "", "self", ".", "features_initialized", "=", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.initialize": [[26, 136], ["atom.ATOM.initialize_features", "atom.ATOM.params.features.set_is_color", "atom.ATOM.params.features.get_fparams", "time.time", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.prod().item", "torch.prod().item", "torch.prod().item", "torch.prod().item", "torch.prod().item", "torch.prod().item", "torch.prod().item", "torch.prod().item", "torch.prod().item", "atom.ATOM.params.get", "max", "atom.ATOM.params.features.size", "atom.ATOM.fparams.attribute", "atom.ATOM.fparams.attribute", "atom.ATOM.params.get", "atom.ATOM.init_learning", "pytracking.features.preprocessing.numpy_to_torch", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.min", "torch.min", "torch.min", "torch.min", "torch.min", "torch.min", "torch.min", "torch.min", "torch.min", "atom.ATOM.generate_init_samples", "atom.ATOM.init_projection_matrix", "atom.ATOM.preprocess_sample", "atom.ATOM.init_label_function", "atom.ATOM.init_memory", "atom.ATOM.init_optimization", "atom.ATOM.pos.clone", "atom.ATOM.params.has", "math.sqrt", "atom.ATOM.params.features.stride", "atom.ATOM.params.get", "atom.ATOM.params.get", "atom.ATOM.init_iou_net", "torch.prod", "torch.prod", "torch.prod", "torch.prod", "torch.prod", "torch.prod", "torch.prod", "torch.prod", "torch.prod", "math.sqrt", "torch.round", "torch.round", "torch.round", "torch.round", "torch.round", "torch.round", "torch.round", "torch.round", "torch.round", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.round", "torch.round", "torch.round", "torch.round", "torch.round", "torch.round", "torch.round", "torch.round", "torch.round", "ValueError", "max", "pytracking.dcf.hann2d_clipped().to", "pytracking.dcf.hann2d().to", "time.time", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "max", "torch.prod", "torch.prod", "torch.prod", "torch.prod", "torch.prod", "torch.prod", "torch.prod", "torch.prod", "torch.prod", "pytracking.dcf.hann2d_clipped", "pytracking.dcf.hann2d", "atom.ATOM.output_sz.long", "atom.ATOM.output_sz.long", "atom.ATOM.output_sz.long"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.initialize_features", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.set_is_color", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.get_fparams", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.init_learning", "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.numpy_to_torch", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.generate_init_samples", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.init_projection_matrix", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.preprocess_sample", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.init_label_function", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.init_memory", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.init_optimization", "home.repos.pwc.inspect_result.researchmm_Stark.utils.params.TrackerParams.has", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.stride", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.init_iou_net", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.hann2d_clipped", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.hann2d"], ["", "def", "initialize", "(", "self", ",", "image", ",", "info", ":", "dict", ")", "->", "dict", ":", "\n", "        ", "state", "=", "info", "[", "'init_bbox'", "]", "\n", "\n", "# Initialize some stuff", "\n", "self", ".", "frame_num", "=", "1", "\n", "if", "not", "self", ".", "params", ".", "has", "(", "'device'", ")", ":", "\n", "            ", "self", ".", "params", ".", "device", "=", "'cuda'", "if", "self", ".", "params", ".", "use_gpu", "else", "'cpu'", "\n", "\n", "# Initialize features", "\n", "", "self", ".", "initialize_features", "(", ")", "\n", "\n", "# Check if image is color", "\n", "self", ".", "params", ".", "features", ".", "set_is_color", "(", "image", ".", "shape", "[", "2", "]", "==", "3", ")", "\n", "\n", "# Get feature specific params", "\n", "self", ".", "fparams", "=", "self", ".", "params", ".", "features", ".", "get_fparams", "(", "'feature_params'", ")", "\n", "\n", "tic", "=", "time", ".", "time", "(", ")", "\n", "\n", "# Get position and size", "\n", "self", ".", "pos", "=", "torch", ".", "Tensor", "(", "[", "state", "[", "1", "]", "+", "(", "state", "[", "3", "]", "-", "1", ")", "/", "2", ",", "state", "[", "0", "]", "+", "(", "state", "[", "2", "]", "-", "1", ")", "/", "2", "]", ")", "\n", "self", ".", "target_sz", "=", "torch", ".", "Tensor", "(", "[", "state", "[", "3", "]", ",", "state", "[", "2", "]", "]", ")", "\n", "\n", "# Set search area", "\n", "self", ".", "target_scale", "=", "1.0", "\n", "search_area", "=", "torch", ".", "prod", "(", "self", ".", "target_sz", "*", "self", ".", "params", ".", "search_area_scale", ")", ".", "item", "(", ")", "\n", "if", "search_area", ">", "self", ".", "params", ".", "max_image_sample_size", ":", "\n", "            ", "self", ".", "target_scale", "=", "math", ".", "sqrt", "(", "search_area", "/", "self", ".", "params", ".", "max_image_sample_size", ")", "\n", "", "elif", "search_area", "<", "self", ".", "params", ".", "min_image_sample_size", ":", "\n", "            ", "self", ".", "target_scale", "=", "math", ".", "sqrt", "(", "search_area", "/", "self", ".", "params", ".", "min_image_sample_size", ")", "\n", "\n", "# Check if IoUNet is used", "\n", "", "self", ".", "use_iou_net", "=", "self", ".", "params", ".", "get", "(", "'use_iou_net'", ",", "True", ")", "\n", "\n", "# Target size in base scale", "\n", "self", ".", "base_target_sz", "=", "self", ".", "target_sz", "/", "self", ".", "target_scale", "\n", "\n", "# Use odd square search area and set sizes", "\n", "feat_max_stride", "=", "max", "(", "self", ".", "params", ".", "features", ".", "stride", "(", ")", ")", "\n", "if", "self", ".", "params", ".", "get", "(", "'search_area_shape'", ",", "'square'", ")", "==", "'square'", ":", "\n", "            ", "self", ".", "img_sample_sz", "=", "torch", ".", "round", "(", "torch", ".", "sqrt", "(", "torch", ".", "prod", "(", "self", ".", "base_target_sz", "*", "self", ".", "params", ".", "search_area_scale", ")", ")", ")", "*", "torch", ".", "ones", "(", "2", ")", "\n", "", "elif", "self", ".", "params", ".", "search_area_shape", "==", "'initrect'", ":", "\n", "            ", "self", ".", "img_sample_sz", "=", "torch", ".", "round", "(", "self", ".", "base_target_sz", "*", "self", ".", "params", ".", "search_area_scale", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'Unknown search area shape'", ")", "\n", "", "if", "self", ".", "params", ".", "feature_size_odd", ":", "\n", "            ", "self", ".", "img_sample_sz", "+=", "feat_max_stride", "-", "self", ".", "img_sample_sz", "%", "(", "2", "*", "feat_max_stride", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "img_sample_sz", "+=", "feat_max_stride", "-", "(", "self", ".", "img_sample_sz", "+", "feat_max_stride", ")", "%", "(", "2", "*", "feat_max_stride", ")", "\n", "\n", "# Set sizes", "\n", "", "self", ".", "img_support_sz", "=", "self", ".", "img_sample_sz", "\n", "self", ".", "feature_sz", "=", "self", ".", "params", ".", "features", ".", "size", "(", "self", ".", "img_sample_sz", ")", "\n", "self", ".", "output_sz", "=", "self", ".", "params", ".", "score_upsample_factor", "*", "self", ".", "img_support_sz", "# Interpolated size of the output", "\n", "self", ".", "kernel_size", "=", "self", ".", "fparams", ".", "attribute", "(", "'kernel_size'", ")", "\n", "\n", "self", ".", "iou_img_sample_sz", "=", "self", ".", "img_sample_sz", "\n", "\n", "# Optimization options", "\n", "self", ".", "params", ".", "precond_learning_rate", "=", "self", ".", "fparams", ".", "attribute", "(", "'learning_rate'", ")", "\n", "if", "self", ".", "params", ".", "CG_forgetting_rate", "is", "None", "or", "max", "(", "self", ".", "params", ".", "precond_learning_rate", ")", ">=", "1", ":", "\n", "            ", "self", ".", "params", ".", "direction_forget_factor", "=", "0", "\n", "", "else", ":", "\n", "            ", "self", ".", "params", ".", "direction_forget_factor", "=", "(", "1", "-", "max", "(", "self", ".", "params", ".", "precond_learning_rate", ")", ")", "**", "self", ".", "params", ".", "CG_forgetting_rate", "\n", "\n", "", "self", ".", "output_window", "=", "None", "\n", "if", "self", ".", "params", ".", "get", "(", "'window_output'", ",", "False", ")", ":", "\n", "            ", "if", "self", ".", "params", ".", "get", "(", "'use_clipped_window'", ",", "False", ")", ":", "\n", "                ", "self", ".", "output_window", "=", "dcf", ".", "hann2d_clipped", "(", "self", ".", "output_sz", ".", "long", "(", ")", ",", "self", ".", "output_sz", ".", "long", "(", ")", "*", "self", ".", "params", ".", "effective_search_area", "/", "self", ".", "params", ".", "search_area_scale", ",", "centered", "=", "False", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "\n", "", "else", ":", "\n", "                ", "self", ".", "output_window", "=", "dcf", ".", "hann2d", "(", "self", ".", "output_sz", ".", "long", "(", ")", ",", "centered", "=", "False", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "\n", "\n", "# Initialize some learning things", "\n", "", "", "self", ".", "init_learning", "(", ")", "\n", "\n", "# Convert image", "\n", "im", "=", "numpy_to_torch", "(", "image", ")", "\n", "self", ".", "im", "=", "im", "# For debugging only", "\n", "\n", "# Setup scale bounds", "\n", "self", ".", "image_sz", "=", "torch", ".", "Tensor", "(", "[", "im", ".", "shape", "[", "2", "]", ",", "im", ".", "shape", "[", "3", "]", "]", ")", "\n", "self", ".", "min_scale_factor", "=", "torch", ".", "max", "(", "10", "/", "self", ".", "base_target_sz", ")", "\n", "self", ".", "max_scale_factor", "=", "torch", ".", "min", "(", "self", ".", "image_sz", "/", "self", ".", "base_target_sz", ")", "\n", "\n", "# Extract and transform sample", "\n", "x", "=", "self", ".", "generate_init_samples", "(", "im", ")", "\n", "\n", "# Initialize iounet", "\n", "if", "self", ".", "use_iou_net", ":", "\n", "            ", "self", ".", "init_iou_net", "(", ")", "\n", "\n", "# Initialize projection matrix", "\n", "", "self", ".", "init_projection_matrix", "(", "x", ")", "\n", "\n", "# Transform to get the training sample", "\n", "train_x", "=", "self", ".", "preprocess_sample", "(", "x", ")", "\n", "\n", "# Generate label function", "\n", "init_y", "=", "self", ".", "init_label_function", "(", "train_x", ")", "\n", "\n", "# Init memory", "\n", "self", ".", "init_memory", "(", "train_x", ")", "\n", "\n", "# Init optimizer and do initial optimization", "\n", "self", ".", "init_optimization", "(", "train_x", ",", "init_y", ")", "\n", "\n", "self", ".", "pos_iounet", "=", "self", ".", "pos", ".", "clone", "(", ")", "\n", "\n", "out", "=", "{", "'time'", ":", "time", ".", "time", "(", ")", "-", "tic", "}", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.init_optimization": [[138, 223], ["atom.ATOM.params.get", "pytracking.TensorList", "atom.ATOM.params.get", "atom.ATOM.project_sample", "zip", "optim.ConvProblem", "atom.ATOM.filter_optimizer.run", "atom.ATOM.params.get", "optim.FactorizedConvProblem", "atom.ATOM.filter.concat", "atom.ATOM.params.get", "isinstance", "pytracking.libs.optimization.ConjugateGradient", "atom.ATOM.filter_optimizer.run", "x.new_zeros", "ValueError", "atom.ATOM.fparams.attribute", "pytracking.libs.optimization.GaussNewtonCG", "atom.ATOM.joint_optimizer.run", "atom.ATOM.joint_optimizer.run", "zip", "RuntimeError", "pytracking.libs.optimization.GradientDescentL2", "zip", "f.normal_", "pytracking.libs.optimization.GradientDescentL2", "atom.ATOM.params.get", "open", "f.write", "f.numel", "v.item"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.project_sample", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.run", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.concat", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.run", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.run", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.run", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "def", "init_optimization", "(", "self", ",", "train_x", ",", "init_y", ")", ":", "\n", "# Initialize filter", "\n", "        ", "filter_init_method", "=", "self", ".", "params", ".", "get", "(", "'filter_init_method'", ",", "'zeros'", ")", "\n", "self", ".", "filter", "=", "TensorList", "(", "\n", "[", "x", ".", "new_zeros", "(", "1", ",", "cdim", ",", "sz", "[", "0", "]", ",", "sz", "[", "1", "]", ")", "for", "x", ",", "cdim", ",", "sz", "in", "zip", "(", "train_x", ",", "self", ".", "compressed_dim", ",", "self", ".", "kernel_size", ")", "]", ")", "\n", "if", "filter_init_method", "==", "'zeros'", ":", "\n", "            ", "pass", "\n", "", "elif", "filter_init_method", "==", "'randn'", ":", "\n", "            ", "for", "f", "in", "self", ".", "filter", ":", "\n", "                ", "f", ".", "normal_", "(", "0", ",", "1", "/", "f", ".", "numel", "(", ")", ")", "\n", "", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'Unknown \"filter_init_method\"'", ")", "\n", "\n", "# Get parameters", "\n", "", "self", ".", "params", ".", "update_projection_matrix", "=", "self", ".", "params", ".", "get", "(", "'update_projection_matrix'", ",", "True", ")", "and", "self", ".", "params", ".", "use_projection_matrix", "\n", "optimizer", "=", "self", ".", "params", ".", "get", "(", "'optimizer'", ",", "'GaussNewtonCG'", ")", "\n", "\n", "# Setup factorized joint optimization", "\n", "if", "self", ".", "params", ".", "update_projection_matrix", ":", "\n", "            ", "self", ".", "joint_problem", "=", "FactorizedConvProblem", "(", "self", ".", "init_training_samples", ",", "init_y", ",", "self", ".", "filter_reg", ",", "\n", "self", ".", "fparams", ".", "attribute", "(", "'projection_reg'", ")", ",", "self", ".", "params", ",", "self", ".", "init_sample_weights", ",", "\n", "self", ".", "projection_activation", ",", "self", ".", "response_activation", ")", "\n", "\n", "# Variable containing both filter and projection matrix", "\n", "joint_var", "=", "self", ".", "filter", ".", "concat", "(", "self", ".", "projection_matrix", ")", "\n", "\n", "# Initialize optimizer", "\n", "analyze_convergence", "=", "self", ".", "params", ".", "get", "(", "'analyze_convergence'", ",", "False", ")", "\n", "if", "optimizer", "==", "'GaussNewtonCG'", ":", "\n", "                ", "self", ".", "joint_optimizer", "=", "GaussNewtonCG", "(", "self", ".", "joint_problem", ",", "joint_var", ",", "debug", "=", "(", "self", ".", "params", ".", "debug", ">=", "1", ")", ",", "\n", "plotting", "=", "(", "self", ".", "params", ".", "debug", ">=", "3", ")", ",", "analyze", "=", "analyze_convergence", ",", "\n", "visdom", "=", "self", ".", "visdom", ")", "\n", "", "elif", "optimizer", "==", "'GradientDescentL2'", ":", "\n", "                ", "self", ".", "joint_optimizer", "=", "GradientDescentL2", "(", "self", ".", "joint_problem", ",", "joint_var", ",", "self", ".", "params", ".", "optimizer_step_length", ",", "self", ".", "params", ".", "optimizer_momentum", ",", "plotting", "=", "(", "self", ".", "params", ".", "debug", ">=", "3", ")", ",", "debug", "=", "(", "self", ".", "params", ".", "debug", ">=", "1", ")", ",", "\n", "visdom", "=", "self", ".", "visdom", ")", "\n", "\n", "# Do joint optimization", "\n", "", "if", "isinstance", "(", "self", ".", "params", ".", "init_CG_iter", ",", "(", "list", ",", "tuple", ")", ")", ":", "\n", "                ", "self", ".", "joint_optimizer", ".", "run", "(", "self", ".", "params", ".", "init_CG_iter", ")", "\n", "", "else", ":", "\n", "                ", "self", ".", "joint_optimizer", ".", "run", "(", "self", ".", "params", ".", "init_CG_iter", "//", "self", ".", "params", ".", "init_GN_iter", ",", "self", ".", "params", ".", "init_GN_iter", ")", "\n", "\n", "", "if", "analyze_convergence", ":", "\n", "                ", "opt_name", "=", "'CG'", "if", "self", ".", "params", ".", "get", "(", "'CG_optimizer'", ",", "True", ")", "else", "'GD'", "\n", "for", "val_name", ",", "values", "in", "zip", "(", "[", "'loss'", ",", "'gradient'", "]", ",", "[", "self", ".", "joint_optimizer", ".", "losses", ",", "self", ".", "joint_optimizer", ".", "gradient_mags", "]", ")", ":", "\n", "                    ", "val_str", "=", "' '", ".", "join", "(", "[", "'{:.8e}'", ".", "format", "(", "v", ".", "item", "(", ")", ")", "for", "v", "in", "values", "]", ")", "\n", "file_name", "=", "'{}_{}.txt'", ".", "format", "(", "opt_name", ",", "val_name", ")", "\n", "with", "open", "(", "file_name", ",", "'a'", ")", "as", "f", ":", "\n", "                        ", "f", ".", "write", "(", "val_str", "+", "'\\n'", ")", "\n", "", "", "raise", "RuntimeError", "(", "'Exiting'", ")", "\n", "\n", "# Re-project samples with the new projection matrix", "\n", "", "", "compressed_samples", "=", "self", ".", "project_sample", "(", "self", ".", "init_training_samples", ",", "self", ".", "projection_matrix", ")", "\n", "for", "train_samp", ",", "init_samp", "in", "zip", "(", "self", ".", "training_samples", ",", "compressed_samples", ")", ":", "\n", "            ", "train_samp", "[", ":", "init_samp", ".", "shape", "[", "0", "]", ",", "...", "]", "=", "init_samp", "\n", "\n", "", "self", ".", "hinge_mask", "=", "None", "\n", "\n", "# Initialize optimizer", "\n", "self", ".", "conv_problem", "=", "ConvProblem", "(", "self", ".", "training_samples", ",", "self", ".", "y", ",", "self", ".", "filter_reg", ",", "self", ".", "sample_weights", ",", "self", ".", "response_activation", ")", "\n", "\n", "if", "optimizer", "==", "'GaussNewtonCG'", ":", "\n", "            ", "self", ".", "filter_optimizer", "=", "ConjugateGradient", "(", "self", ".", "conv_problem", ",", "self", ".", "filter", ",", "fletcher_reeves", "=", "self", ".", "params", ".", "fletcher_reeves", ",", "\n", "direction_forget_factor", "=", "self", ".", "params", ".", "direction_forget_factor", ",", "debug", "=", "(", "self", ".", "params", ".", "debug", ">=", "1", ")", ",", "\n", "plotting", "=", "(", "self", ".", "params", ".", "debug", ">=", "3", ")", ",", "visdom", "=", "self", ".", "visdom", ")", "\n", "", "elif", "optimizer", "==", "'GradientDescentL2'", ":", "\n", "            ", "self", ".", "filter_optimizer", "=", "GradientDescentL2", "(", "self", ".", "conv_problem", ",", "self", ".", "filter", ",", "self", ".", "params", ".", "optimizer_step_length", ",", "\n", "self", ".", "params", ".", "optimizer_momentum", ",", "debug", "=", "(", "self", ".", "params", ".", "debug", ">=", "1", ")", ",", "\n", "plotting", "=", "(", "self", ".", "params", ".", "debug", ">=", "3", ")", ",", "visdom", "=", "self", ".", "visdom", ")", "\n", "\n", "# Transfer losses from previous optimization", "\n", "", "if", "self", ".", "params", ".", "update_projection_matrix", ":", "\n", "            ", "self", ".", "filter_optimizer", ".", "residuals", "=", "self", ".", "joint_optimizer", ".", "residuals", "\n", "self", ".", "filter_optimizer", ".", "losses", "=", "self", ".", "joint_optimizer", ".", "losses", "\n", "\n", "", "if", "not", "self", ".", "params", ".", "update_projection_matrix", ":", "\n", "            ", "self", ".", "filter_optimizer", ".", "run", "(", "self", ".", "params", ".", "init_CG_iter", ")", "\n", "\n", "# Post optimization", "\n", "", "self", ".", "filter_optimizer", ".", "run", "(", "self", ".", "params", ".", "post_init_CG_iter", ")", "\n", "\n", "# Free memory", "\n", "del", "self", ".", "init_training_samples", "\n", "if", "self", ".", "params", ".", "use_projection_matrix", ":", "\n", "            ", "del", "self", ".", "joint_problem", ",", "self", ".", "joint_optimizer", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.track": [[225, 299], ["pytracking.features.preprocessing.numpy_to_torch", "atom.ATOM.pos.round", "atom.ATOM.extract_processed_sample", "atom.ATOM.apply_filter", "atom.ATOM.localize_target", "torch.max().item", "torch.max().item", "torch.max().item", "torch.max().item", "torch.max().item", "torch.max().item", "torch.max().item", "torch.max().item", "torch.max().item", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "atom.ATOM.visdom.register", "atom.ATOM.visdom.register", "pytracking.TensorList", "atom.ATOM.get_label_function", "atom.ATOM.update_memory", "atom.ATOM.filter_optimizer.run", "atom.ATOM.pos_iounet.clone", "torch.cat.tolist", "torch.cat.tolist", "torch.cat.tolist", "atom.ATOM.params.get", "atom.ATOM.refine_target_box", "atom.ATOM.params.get", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "pytracking.utils.plotting.show_tensor", "atom.ATOM.filter_optimizer.run", "atom.ATOM.params.get", "atom.ATOM.update_state", "atom.ATOM.update_state"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.numpy_to_torch", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.extract_processed_sample", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.localize_target", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_label_function", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.update_memory", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.run", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.refine_target_box", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.show_tensor", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.run", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.update_state", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.update_state"], ["", "", "def", "track", "(", "self", ",", "image", ",", "info", ":", "dict", "=", "None", ")", "->", "dict", ":", "\n", "        ", "self", ".", "debug_info", "=", "{", "}", "\n", "\n", "self", ".", "frame_num", "+=", "1", "\n", "self", ".", "debug_info", "[", "'frame_num'", "]", "=", "self", ".", "frame_num", "\n", "\n", "# Convert image", "\n", "im", "=", "numpy_to_torch", "(", "image", ")", "\n", "self", ".", "im", "=", "im", "# For debugging only", "\n", "\n", "# ------- LOCALIZATION ------- #", "\n", "\n", "# Get sample", "\n", "sample_pos", "=", "self", ".", "pos", ".", "round", "(", ")", "\n", "sample_scales", "=", "self", ".", "target_scale", "*", "self", ".", "params", ".", "scale_factors", "\n", "test_x", "=", "self", ".", "extract_processed_sample", "(", "im", ",", "self", ".", "pos", ",", "sample_scales", ",", "self", ".", "img_sample_sz", ")", "\n", "\n", "# Compute scores", "\n", "scores_raw", "=", "self", ".", "apply_filter", "(", "test_x", ")", "\n", "translation_vec", ",", "scale_ind", ",", "s", ",", "flag", "=", "self", ".", "localize_target", "(", "scores_raw", ")", "\n", "\n", "# Update position and scale", "\n", "if", "flag", "!=", "'not_found'", ":", "\n", "            ", "if", "self", ".", "use_iou_net", ":", "\n", "                ", "update_scale_flag", "=", "self", ".", "params", ".", "get", "(", "'update_scale_when_uncertain'", ",", "True", ")", "or", "flag", "!=", "'uncertain'", "\n", "if", "self", ".", "params", ".", "get", "(", "'use_classifier'", ",", "True", ")", ":", "\n", "                    ", "self", ".", "update_state", "(", "sample_pos", "+", "translation_vec", ")", "\n", "", "self", ".", "refine_target_box", "(", "sample_pos", ",", "sample_scales", "[", "scale_ind", "]", ",", "scale_ind", ",", "update_scale_flag", ")", "\n", "", "elif", "self", ".", "params", ".", "get", "(", "'use_classifier'", ",", "True", ")", ":", "\n", "                ", "self", ".", "update_state", "(", "sample_pos", "+", "translation_vec", ",", "sample_scales", "[", "scale_ind", "]", ")", "\n", "\n", "", "", "score_map", "=", "s", "[", "scale_ind", ",", "...", "]", "\n", "max_score", "=", "torch", ".", "max", "(", "score_map", ")", ".", "item", "(", ")", "\n", "self", ".", "debug_info", "[", "'max_score'", "]", "=", "max_score", "\n", "self", ".", "debug_info", "[", "'flag'", "]", "=", "flag", "\n", "\n", "if", "self", ".", "visdom", "is", "not", "None", ":", "\n", "            ", "self", ".", "visdom", ".", "register", "(", "score_map", ",", "'heatmap'", ",", "2", ",", "'Score Map'", ")", "\n", "self", ".", "visdom", ".", "register", "(", "self", ".", "debug_info", ",", "'info_dict'", ",", "1", ",", "'Status'", ")", "\n", "", "elif", "self", ".", "params", ".", "debug", ">=", "2", ":", "\n", "            ", "show_tensor", "(", "score_map", ",", "5", ",", "title", "=", "'Max score = {:.2f}'", ".", "format", "(", "max_score", ")", ")", "\n", "\n", "# ------- UPDATE ------- #", "\n", "\n", "# Check flags and set learning rate if hard negative", "\n", "", "update_flag", "=", "flag", "not", "in", "[", "'not_found'", ",", "'uncertain'", "]", "\n", "hard_negative", "=", "(", "flag", "==", "'hard_negative'", ")", "\n", "learning_rate", "=", "self", ".", "params", ".", "hard_negative_learning_rate", "if", "hard_negative", "else", "None", "\n", "\n", "if", "update_flag", ":", "\n", "# Get train sample", "\n", "            ", "train_x", "=", "TensorList", "(", "[", "x", "[", "scale_ind", ":", "scale_ind", "+", "1", ",", "...", "]", "for", "x", "in", "test_x", "]", ")", "\n", "\n", "# Create label for sample", "\n", "train_y", "=", "self", ".", "get_label_function", "(", "sample_pos", ",", "sample_scales", "[", "scale_ind", "]", ")", "\n", "\n", "# Update memory", "\n", "self", ".", "update_memory", "(", "train_x", ",", "train_y", ",", "learning_rate", ")", "\n", "\n", "# Train filter", "\n", "", "if", "hard_negative", ":", "\n", "            ", "self", ".", "filter_optimizer", ".", "run", "(", "self", ".", "params", ".", "hard_negative_CG_iter", ")", "\n", "", "elif", "(", "self", ".", "frame_num", "-", "1", ")", "%", "self", ".", "params", ".", "train_skipping", "==", "0", ":", "\n", "            ", "self", ".", "filter_optimizer", ".", "run", "(", "self", ".", "params", ".", "CG_iter", ")", "\n", "\n", "# Set the pos of the tracker to iounet pos", "\n", "", "if", "self", ".", "use_iou_net", "and", "flag", "!=", "'not_found'", ":", "\n", "            ", "self", ".", "pos", "=", "self", ".", "pos_iounet", ".", "clone", "(", ")", "\n", "\n", "# Return new state", "\n", "", "new_state", "=", "torch", ".", "cat", "(", "(", "self", ".", "pos", "[", "[", "1", ",", "0", "]", "]", "-", "(", "self", ".", "target_sz", "[", "[", "1", ",", "0", "]", "]", "-", "1", ")", "/", "2", ",", "self", ".", "target_sz", "[", "[", "1", ",", "0", "]", "]", ")", ")", "\n", "\n", "out", "=", "{", "'target_bbox'", ":", "new_state", ".", "tolist", "(", ")", "}", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.apply_filter": [[301, 303], ["pytracking.operation.conv2d"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d"], ["", "def", "apply_filter", "(", "self", ",", "sample_x", ":", "TensorList", ")", ":", "\n", "        ", "return", "operation", ".", "conv2d", "(", "sample_x", ",", "self", ".", "filter", ",", "mode", "=", "'same'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.localize_target": [[304, 340], ["atom.ATOM.fparams.attribute", "enumerate", "pytracking.fourier.sum_fs", "pytracking.fourier.sample_fs", "atom.ATOM.params.get", "pytracking.dcf.max2d", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "max_disp.float().cpu.float().cpu.float().cpu", "pytracking.fourier.cfft2", "zip", "pytracking.fourier.shift_fs", "atom.ATOM.localize_advanced", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "scores_raw.size", "scores_raw.size", "atom.ATOM.params.get", "max_disp.float().cpu.float().cpu.float", "disp[].view", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.sum_fs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.sample_fs", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.max2d", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.cfft2", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.shift_fs", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.localize_advanced", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "def", "localize_target", "(", "self", ",", "scores_raw", ")", ":", "\n", "# Weighted sum (if multiple features) with interpolation in fourier domain", "\n", "        ", "weight", "=", "self", ".", "fparams", ".", "attribute", "(", "'translation_weight'", ",", "1.0", ")", "\n", "scores_raw", "=", "weight", "*", "scores_raw", "\n", "sf_weighted", "=", "fourier", ".", "cfft2", "(", "scores_raw", ")", "/", "(", "scores_raw", ".", "size", "(", "2", ")", "*", "scores_raw", ".", "size", "(", "3", ")", ")", "\n", "for", "i", ",", "(", "sz", ",", "ksz", ")", "in", "enumerate", "(", "zip", "(", "self", ".", "feature_sz", ",", "self", ".", "kernel_size", ")", ")", ":", "\n", "            ", "sf_weighted", "[", "i", "]", "=", "fourier", ".", "shift_fs", "(", "sf_weighted", "[", "i", "]", ",", "math", ".", "pi", "*", "(", "1", "-", "torch", ".", "Tensor", "(", "[", "ksz", "[", "0", "]", "%", "2", ",", "ksz", "[", "1", "]", "%", "2", "]", ")", "/", "sz", ")", ")", "\n", "\n", "", "scores_fs", "=", "fourier", ".", "sum_fs", "(", "sf_weighted", ")", "\n", "scores", "=", "fourier", ".", "sample_fs", "(", "scores_fs", ",", "self", ".", "output_sz", ")", "\n", "\n", "if", "self", ".", "output_window", "is", "not", "None", "and", "not", "self", ".", "params", ".", "get", "(", "'perform_hn_without_windowing'", ",", "False", ")", ":", "\n", "            ", "scores", "*=", "self", ".", "output_window", "\n", "\n", "", "if", "self", ".", "params", ".", "get", "(", "'advanced_localization'", ",", "False", ")", ":", "\n", "            ", "return", "self", ".", "localize_advanced", "(", "scores", ")", "\n", "\n", "# Get maximum", "\n", "", "max_score", ",", "max_disp", "=", "dcf", ".", "max2d", "(", "scores", ")", "\n", "_", ",", "scale_ind", "=", "torch", ".", "max", "(", "max_score", ",", "dim", "=", "0", ")", "\n", "max_disp", "=", "max_disp", ".", "float", "(", ")", ".", "cpu", "(", ")", "\n", "\n", "# Convert to displacements in the base scale", "\n", "disp", "=", "(", "max_disp", "+", "self", ".", "output_sz", "/", "2", ")", "%", "self", ".", "output_sz", "-", "self", ".", "output_sz", "/", "2", "\n", "\n", "# Compute translation vector and scale change factor", "\n", "translation_vec", "=", "disp", "[", "scale_ind", ",", "...", "]", ".", "view", "(", "-", "1", ")", "*", "(", "self", ".", "img_support_sz", "/", "self", ".", "output_sz", ")", "*", "self", ".", "target_scale", "\n", "translation_vec", "*=", "self", ".", "params", ".", "scale_factors", "[", "scale_ind", "]", "\n", "\n", "# Shift the score output for visualization purposes", "\n", "if", "self", ".", "params", ".", "debug", ">=", "2", ":", "\n", "            ", "sz", "=", "scores", ".", "shape", "[", "-", "2", ":", "]", "\n", "scores", "=", "torch", ".", "cat", "(", "[", "scores", "[", "...", ",", "sz", "[", "0", "]", "//", "2", ":", ",", ":", "]", ",", "scores", "[", "...", ",", ":", "sz", "[", "0", "]", "//", "2", ",", ":", "]", "]", ",", "-", "2", ")", "\n", "scores", "=", "torch", ".", "cat", "(", "[", "scores", "[", "...", ",", ":", ",", "sz", "[", "1", "]", "//", "2", ":", "]", ",", "scores", "[", "...", ",", ":", ",", ":", "sz", "[", "1", "]", "//", "2", "]", "]", ",", "-", "1", ")", "\n", "\n", "", "return", "translation_vec", ",", "scale_ind", ",", "scores", ",", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.localize_advanced": [[341, 407], ["torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "pytracking.dcf.max2d", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "max_disp1[].float().cpu().view", "max", "min", "max", "min", "scores[].clone", "pytracking.dcf.max2d", "max_disp2.float().cpu().view.float().cpu().view.float().cpu().view", "atom.ATOM.params.get", "torch.cat.clone", "torch.cat.clone", "torch.cat.clone", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "max_score1.item", "atom.ATOM.params.get", "round", "round", "round", "round", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "max_disp1[].float().cpu", "max_disp2.float().cpu().view.float().cpu().view.float().cpu", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "max_disp1[].item", "max_disp1[].item", "math.sqrt", "max_disp1[].float", "target_neigh_sz[].item", "max_disp1[].item", "target_neigh_sz[].item", "max_disp1[].item", "max_disp2.float().cpu().view.float().cpu().view.float", "target_neigh_sz[].item", "target_neigh_sz[].item"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.max2d", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.max2d", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "def", "localize_advanced", "(", "self", ",", "scores", ")", ":", "\n", "        ", "\"\"\"Dows the advanced localization with hard negative detection and target not found.\"\"\"", "\n", "\n", "sz", "=", "scores", ".", "shape", "[", "-", "2", ":", "]", "\n", "\n", "if", "self", ".", "output_window", "is", "not", "None", "and", "self", ".", "params", ".", "get", "(", "'perform_hn_without_windowing'", ",", "False", ")", ":", "\n", "            ", "scores_orig", "=", "scores", ".", "clone", "(", ")", "\n", "\n", "scores_orig", "=", "torch", ".", "cat", "(", "[", "scores_orig", "[", "...", ",", "(", "sz", "[", "0", "]", "+", "1", ")", "//", "2", ":", ",", ":", "]", ",", "scores_orig", "[", "...", ",", ":", "(", "sz", "[", "0", "]", "+", "1", ")", "//", "2", ",", ":", "]", "]", ",", "-", "2", ")", "\n", "scores_orig", "=", "torch", ".", "cat", "(", "[", "scores_orig", "[", "...", ",", ":", ",", "(", "sz", "[", "1", "]", "+", "1", ")", "//", "2", ":", "]", ",", "scores_orig", "[", "...", ",", ":", ",", ":", "(", "sz", "[", "1", "]", "+", "1", ")", "//", "2", "]", "]", ",", "-", "1", ")", "\n", "\n", "scores", "*=", "self", ".", "output_window", "\n", "\n", "# Shift scores back", "\n", "", "scores", "=", "torch", ".", "cat", "(", "[", "scores", "[", "...", ",", "(", "sz", "[", "0", "]", "+", "1", ")", "//", "2", ":", ",", ":", "]", ",", "scores", "[", "...", ",", ":", "(", "sz", "[", "0", "]", "+", "1", ")", "//", "2", ",", ":", "]", "]", ",", "-", "2", ")", "\n", "scores", "=", "torch", ".", "cat", "(", "[", "scores", "[", "...", ",", ":", ",", "(", "sz", "[", "1", "]", "+", "1", ")", "//", "2", ":", "]", ",", "scores", "[", "...", ",", ":", ",", ":", "(", "sz", "[", "1", "]", "+", "1", ")", "//", "2", "]", "]", ",", "-", "1", ")", "\n", "\n", "# Find maximum", "\n", "max_score1", ",", "max_disp1", "=", "dcf", ".", "max2d", "(", "scores", ")", "\n", "_", ",", "scale_ind", "=", "torch", ".", "max", "(", "max_score1", ",", "dim", "=", "0", ")", "\n", "max_score1", "=", "max_score1", "[", "scale_ind", "]", "\n", "max_disp1", "=", "max_disp1", "[", "scale_ind", ",", "...", "]", ".", "float", "(", ")", ".", "cpu", "(", ")", ".", "view", "(", "-", "1", ")", "\n", "target_disp1", "=", "max_disp1", "-", "self", ".", "output_sz", "//", "2", "\n", "translation_vec1", "=", "target_disp1", "*", "(", "self", ".", "img_support_sz", "/", "self", ".", "output_sz", ")", "*", "self", ".", "target_scale", "\n", "\n", "if", "max_score1", ".", "item", "(", ")", "<", "self", ".", "params", ".", "target_not_found_threshold", ":", "\n", "            ", "return", "translation_vec1", ",", "scale_ind", ",", "scores", ",", "'not_found'", "\n", "\n", "", "if", "self", ".", "output_window", "is", "not", "None", "and", "self", ".", "params", ".", "get", "(", "'perform_hn_without_windowing'", ",", "False", ")", ":", "\n", "            ", "scores", "=", "scores_orig", "\n", "\n", "# Mask out target neighborhood", "\n", "", "target_neigh_sz", "=", "self", ".", "params", ".", "target_neighborhood_scale", "*", "self", ".", "target_sz", "/", "self", ".", "target_scale", "\n", "tneigh_top", "=", "max", "(", "round", "(", "max_disp1", "[", "0", "]", ".", "item", "(", ")", "-", "target_neigh_sz", "[", "0", "]", ".", "item", "(", ")", "/", "2", ")", ",", "0", ")", "\n", "tneigh_bottom", "=", "min", "(", "round", "(", "max_disp1", "[", "0", "]", ".", "item", "(", ")", "+", "target_neigh_sz", "[", "0", "]", ".", "item", "(", ")", "/", "2", "+", "1", ")", ",", "sz", "[", "0", "]", ")", "\n", "tneigh_left", "=", "max", "(", "round", "(", "max_disp1", "[", "1", "]", ".", "item", "(", ")", "-", "target_neigh_sz", "[", "1", "]", ".", "item", "(", ")", "/", "2", ")", ",", "0", ")", "\n", "tneigh_right", "=", "min", "(", "round", "(", "max_disp1", "[", "1", "]", ".", "item", "(", ")", "+", "target_neigh_sz", "[", "1", "]", ".", "item", "(", ")", "/", "2", "+", "1", ")", ",", "sz", "[", "1", "]", ")", "\n", "scores_masked", "=", "scores", "[", "scale_ind", ":", "scale_ind", "+", "1", ",", "...", "]", ".", "clone", "(", ")", "\n", "scores_masked", "[", "...", ",", "tneigh_top", ":", "tneigh_bottom", ",", "tneigh_left", ":", "tneigh_right", "]", "=", "0", "\n", "\n", "# Find new maximum", "\n", "max_score2", ",", "max_disp2", "=", "dcf", ".", "max2d", "(", "scores_masked", ")", "\n", "max_disp2", "=", "max_disp2", ".", "float", "(", ")", ".", "cpu", "(", ")", ".", "view", "(", "-", "1", ")", "\n", "target_disp2", "=", "max_disp2", "-", "self", ".", "output_sz", "//", "2", "\n", "translation_vec2", "=", "target_disp2", "*", "(", "self", ".", "img_support_sz", "/", "self", ".", "output_sz", ")", "*", "self", ".", "target_scale", "\n", "\n", "# Handle the different cases", "\n", "if", "max_score2", ">", "self", ".", "params", ".", "distractor_threshold", "*", "max_score1", ":", "\n", "            ", "disp_norm1", "=", "torch", ".", "sqrt", "(", "torch", ".", "sum", "(", "target_disp1", "**", "2", ")", ")", "\n", "disp_norm2", "=", "torch", ".", "sqrt", "(", "torch", ".", "sum", "(", "target_disp2", "**", "2", ")", ")", "\n", "disp_threshold", "=", "self", ".", "params", ".", "dispalcement_scale", "*", "math", ".", "sqrt", "(", "sz", "[", "0", "]", "*", "sz", "[", "1", "]", ")", "/", "2", "\n", "\n", "if", "disp_norm2", ">", "disp_threshold", "and", "disp_norm1", "<", "disp_threshold", ":", "\n", "                ", "return", "translation_vec1", ",", "scale_ind", ",", "scores", ",", "'hard_negative'", "\n", "", "if", "disp_norm2", "<", "disp_threshold", "and", "disp_norm1", ">", "disp_threshold", ":", "\n", "                ", "return", "translation_vec2", ",", "scale_ind", ",", "scores", ",", "'hard_negative'", "\n", "", "if", "disp_norm2", ">", "disp_threshold", "and", "disp_norm1", ">", "disp_threshold", ":", "\n", "                ", "return", "translation_vec1", ",", "scale_ind", ",", "scores", ",", "'uncertain'", "\n", "\n", "# If also the distractor is close, return with highest score", "\n", "", "return", "translation_vec1", ",", "scale_ind", ",", "scores", ",", "'uncertain'", "\n", "\n", "", "if", "max_score2", ">", "self", ".", "params", ".", "hard_negative_threshold", "*", "max_score1", "and", "max_score2", ">", "self", ".", "params", ".", "target_not_found_threshold", ":", "\n", "            ", "return", "translation_vec1", ",", "scale_ind", ",", "scores", ",", "'hard_negative'", "\n", "\n", "", "return", "translation_vec1", ",", "scale_ind", ",", "scores", ",", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.extract_sample": [[409, 411], ["atom.ATOM.params.features.extract"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.extract"], ["", "def", "extract_sample", "(", "self", ",", "im", ":", "torch", ".", "Tensor", ",", "pos", ":", "torch", ".", "Tensor", ",", "scales", ",", "sz", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "return", "self", ".", "params", ".", "features", ".", "extract", "(", "im", ",", "pos", ",", "scales", ",", "sz", ")", "[", "0", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_iou_features": [[412, 414], ["atom.ATOM.params.features.get_unique_attribute"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.get_unique_attribute"], ["", "def", "get_iou_features", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "params", ".", "features", ".", "get_unique_attribute", "(", "'iounet_features'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_iou_backbone_features": [[415, 417], ["atom.ATOM.params.features.get_unique_attribute"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.get_unique_attribute"], ["", "def", "get_iou_backbone_features", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "params", ".", "features", ".", "get_unique_attribute", "(", "'iounet_backbone_features'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.extract_processed_sample": [[418, 421], ["atom.ATOM.extract_sample", "atom.ATOM.preprocess_sample", "atom.ATOM.project_sample"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.extract_sample", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.preprocess_sample", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.project_sample"], ["", "def", "extract_processed_sample", "(", "self", ",", "im", ":", "torch", ".", "Tensor", ",", "pos", ":", "torch", ".", "Tensor", ",", "scales", ",", "sz", ":", "torch", ".", "Tensor", ")", "->", "(", "TensorList", ",", "TensorList", ")", ":", "\n", "        ", "x", "=", "self", ".", "extract_sample", "(", "im", ",", "pos", ",", "scales", ",", "sz", ")", "\n", "return", "self", ".", "preprocess_sample", "(", "self", ".", "project_sample", "(", "x", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.preprocess_sample": [[422, 426], ["atom.ATOM.params.get"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "def", "preprocess_sample", "(", "self", ",", "x", ":", "TensorList", ")", "->", "(", "TensorList", ",", "TensorList", ")", ":", "\n", "        ", "if", "self", ".", "params", ".", "get", "(", "'_feature_window'", ",", "False", ")", ":", "\n", "            ", "x", "=", "x", "*", "self", ".", "feature_window", "\n", "", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.project_sample": [[427, 432], ["pytracking.operation.conv2d().apply", "pytracking.operation.conv2d"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d"], ["", "def", "project_sample", "(", "self", ",", "x", ":", "TensorList", ",", "proj_matrix", "=", "None", ")", ":", "\n", "# Apply projection matrix", "\n", "        ", "if", "proj_matrix", "is", "None", ":", "\n", "            ", "proj_matrix", "=", "self", ".", "projection_matrix", "\n", "", "return", "operation", ".", "conv2d", "(", "x", ",", "proj_matrix", ")", ".", "apply", "(", "self", ".", "projection_activation", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.init_learning": [[433, 471], ["pytracking.TensorList", "atom.ATOM.fparams.attribute", "atom.ATOM.params.get", "isinstance", "atom.ATOM.params.get", "isinstance", "pytracking.dcf.hann2d().to", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ReLU", "torch.nn.ELU", "torch.nn.ELU", "torch.nn.ELU", "torch.nn.ELU", "torch.nn.ELU", "torch.nn.ELU", "torch.nn.ELU", "torch.nn.ELU", "torch.nn.ELU", "torch.nn.ELU", "torch.nn.ELU", "torch.nn.ELU", "torch.nn.ELU", "torch.nn.ELU", "torch.nn.ELU", "torch.nn.ELU", "torch.nn.ELU", "torch.nn.ELU", "pytracking.dcf.hann2d", "ValueError", "ValueError", "torch.elu", "torch.elu", "torch.elu", "torch.elu", "torch.elu", "torch.elu", "torch.leaky_relu", "torch.leaky_relu", "torch.leaky_relu", "torch.leaky_relu", "torch.leaky_relu", "torch.leaky_relu"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.hann2d"], ["", "def", "init_learning", "(", "self", ")", ":", "\n", "# Get window function", "\n", "        ", "self", ".", "feature_window", "=", "TensorList", "(", "[", "dcf", ".", "hann2d", "(", "sz", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "for", "sz", "in", "self", ".", "feature_sz", "]", ")", "\n", "\n", "# Filter regularization", "\n", "self", ".", "filter_reg", "=", "self", ".", "fparams", ".", "attribute", "(", "'filter_reg'", ")", "\n", "\n", "# Activation function after the projection matrix (phi_1 in the paper)", "\n", "projection_activation", "=", "self", ".", "params", ".", "get", "(", "'projection_activation'", ",", "'none'", ")", "\n", "if", "isinstance", "(", "projection_activation", ",", "tuple", ")", ":", "\n", "            ", "projection_activation", ",", "act_param", "=", "projection_activation", "\n", "\n", "", "if", "projection_activation", "==", "'none'", ":", "\n", "            ", "self", ".", "projection_activation", "=", "lambda", "x", ":", "x", "\n", "", "elif", "projection_activation", "==", "'relu'", ":", "\n", "            ", "self", ".", "projection_activation", "=", "torch", ".", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "", "elif", "projection_activation", "==", "'elu'", ":", "\n", "            ", "self", ".", "projection_activation", "=", "torch", ".", "nn", ".", "ELU", "(", "inplace", "=", "True", ")", "\n", "", "elif", "projection_activation", "==", "'mlu'", ":", "\n", "            ", "self", ".", "projection_activation", "=", "lambda", "x", ":", "F", ".", "elu", "(", "F", ".", "leaky_relu", "(", "x", ",", "1", "/", "act_param", ")", ",", "act_param", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'Unknown activation'", ")", "\n", "\n", "# Activation function after the output scores (phi_2 in the paper)", "\n", "", "response_activation", "=", "self", ".", "params", ".", "get", "(", "'response_activation'", ",", "'none'", ")", "\n", "if", "isinstance", "(", "response_activation", ",", "tuple", ")", ":", "\n", "            ", "response_activation", ",", "act_param", "=", "response_activation", "\n", "\n", "", "if", "response_activation", "==", "'none'", ":", "\n", "            ", "self", ".", "response_activation", "=", "lambda", "x", ":", "x", "\n", "", "elif", "response_activation", "==", "'relu'", ":", "\n", "            ", "self", ".", "response_activation", "=", "torch", ".", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "", "elif", "response_activation", "==", "'elu'", ":", "\n", "            ", "self", ".", "response_activation", "=", "torch", ".", "nn", ".", "ELU", "(", "inplace", "=", "True", ")", "\n", "", "elif", "response_activation", "==", "'mlu'", ":", "\n", "            ", "self", ".", "response_activation", "=", "lambda", "x", ":", "F", ".", "elu", "(", "F", ".", "leaky_relu", "(", "x", ",", "1", "/", "act_param", ")", ",", "act_param", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'Unknown activation'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.generate_init_samples": [[473, 525], ["atom.ATOM.params.get", "atom.ATOM.img_sample_sz.clone", "atom.ATOM.params.get", "atom.ATOM.params.features.extract_transformed", "enumerate", "aug_expansion_sz.float.float.float", "atom.ATOM.img_sample_sz.long().tolist", "pytracking.features.augmentation.Identity", "atom.ATOM.transforms.extend", "atom.ATOM.transforms.extend", "atom.ATOM.transforms.append", "atom.ATOM.transforms.extend", "atom.ATOM.transforms.extend", "atom.ATOM.transforms.extend", "atom.ATOM.fparams.attribute", "atom.ATOM.transforms.extend", "enumerate", "pytracking.features.augmentation.FlipHorizontal", "atom.ATOM.fparams.attribute", "atom.ATOM.img_sample_sz.long", "atom.ATOM.img_sample_sz.long", "pytracking.features.augmentation.Translation", "pytracking.features.augmentation.Translation", "get_rand_shift", "pytracking.features.augmentation.Blur", "pytracking.features.augmentation.Scale", "pytracking.features.augmentation.Rotate", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "get_absolute", "get_rand_shift", "get_rand_shift", "get_rand_shift", "torch.dropout2d", "torch.dropout2d", "torch.dropout2d", "[].expand", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.rand", "torch.rand", "torch.rand", "torch.rand", "torch.rand", "torch.rand", "torch.rand", "torch.rand", "torch.rand"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.extract_transformed", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute"], ["", "", "def", "generate_init_samples", "(", "self", ",", "im", ":", "torch", ".", "Tensor", ")", "->", "TensorList", ":", "\n", "        ", "\"\"\"Generate augmented initial samples.\"\"\"", "\n", "\n", "# Compute augmentation size", "\n", "aug_expansion_factor", "=", "self", ".", "params", ".", "get", "(", "'augmentation_expansion_factor'", ",", "None", ")", "\n", "aug_expansion_sz", "=", "self", ".", "img_sample_sz", ".", "clone", "(", ")", "\n", "aug_output_sz", "=", "None", "\n", "if", "aug_expansion_factor", "is", "not", "None", "and", "aug_expansion_factor", "!=", "1", ":", "\n", "            ", "aug_expansion_sz", "=", "(", "self", ".", "img_sample_sz", "*", "aug_expansion_factor", ")", ".", "long", "(", ")", "\n", "aug_expansion_sz", "+=", "(", "aug_expansion_sz", "-", "self", ".", "img_sample_sz", ".", "long", "(", ")", ")", "%", "2", "\n", "aug_expansion_sz", "=", "aug_expansion_sz", ".", "float", "(", ")", "\n", "aug_output_sz", "=", "self", ".", "img_sample_sz", ".", "long", "(", ")", ".", "tolist", "(", ")", "\n", "\n", "# Random shift operator", "\n", "", "get_rand_shift", "=", "lambda", ":", "None", "\n", "random_shift_factor", "=", "self", ".", "params", ".", "get", "(", "'random_shift_factor'", ",", "0", ")", "\n", "if", "random_shift_factor", ">", "0", ":", "\n", "            ", "get_rand_shift", "=", "lambda", ":", "(", "(", "torch", ".", "rand", "(", "2", ")", "-", "0.5", ")", "*", "self", ".", "img_sample_sz", "*", "random_shift_factor", ")", ".", "long", "(", ")", ".", "tolist", "(", ")", "\n", "\n", "# Create transofmations", "\n", "", "self", ".", "transforms", "=", "[", "augmentation", ".", "Identity", "(", "aug_output_sz", ")", "]", "\n", "if", "'shift'", "in", "self", ".", "params", ".", "augmentation", ":", "\n", "            ", "self", ".", "transforms", ".", "extend", "(", "[", "augmentation", ".", "Translation", "(", "shift", ",", "aug_output_sz", ")", "for", "shift", "in", "self", ".", "params", ".", "augmentation", "[", "'shift'", "]", "]", ")", "\n", "", "if", "'relativeshift'", "in", "self", ".", "params", ".", "augmentation", ":", "\n", "            ", "get_absolute", "=", "lambda", "shift", ":", "(", "torch", ".", "Tensor", "(", "shift", ")", "*", "self", ".", "img_sample_sz", "/", "2", ")", ".", "long", "(", ")", ".", "tolist", "(", ")", "\n", "self", ".", "transforms", ".", "extend", "(", "[", "augmentation", ".", "Translation", "(", "get_absolute", "(", "shift", ")", ",", "aug_output_sz", ")", "for", "shift", "in", "self", ".", "params", ".", "augmentation", "[", "'relativeshift'", "]", "]", ")", "\n", "", "if", "'fliplr'", "in", "self", ".", "params", ".", "augmentation", "and", "self", ".", "params", ".", "augmentation", "[", "'fliplr'", "]", ":", "\n", "            ", "self", ".", "transforms", ".", "append", "(", "augmentation", ".", "FlipHorizontal", "(", "aug_output_sz", ",", "get_rand_shift", "(", ")", ")", ")", "\n", "", "if", "'blur'", "in", "self", ".", "params", ".", "augmentation", ":", "\n", "            ", "self", ".", "transforms", ".", "extend", "(", "[", "augmentation", ".", "Blur", "(", "sigma", ",", "aug_output_sz", ",", "get_rand_shift", "(", ")", ")", "for", "sigma", "in", "self", ".", "params", ".", "augmentation", "[", "'blur'", "]", "]", ")", "\n", "", "if", "'scale'", "in", "self", ".", "params", ".", "augmentation", ":", "\n", "            ", "self", ".", "transforms", ".", "extend", "(", "[", "augmentation", ".", "Scale", "(", "scale_factor", ",", "aug_output_sz", ",", "get_rand_shift", "(", ")", ")", "for", "scale_factor", "in", "self", ".", "params", ".", "augmentation", "[", "'scale'", "]", "]", ")", "\n", "", "if", "'rotate'", "in", "self", ".", "params", ".", "augmentation", ":", "\n", "            ", "self", ".", "transforms", ".", "extend", "(", "[", "augmentation", ".", "Rotate", "(", "angle", ",", "aug_output_sz", ",", "get_rand_shift", "(", ")", ")", "for", "angle", "in", "self", ".", "params", ".", "augmentation", "[", "'rotate'", "]", "]", ")", "\n", "\n", "# Generate initial samples", "\n", "", "init_samples", "=", "self", ".", "params", ".", "features", ".", "extract_transformed", "(", "im", ",", "self", ".", "pos", ",", "self", ".", "target_scale", ",", "aug_expansion_sz", ",", "self", ".", "transforms", ")", "\n", "\n", "# Remove augmented samples for those that shall not have", "\n", "for", "i", ",", "use_aug", "in", "enumerate", "(", "self", ".", "fparams", ".", "attribute", "(", "'use_augmentation'", ")", ")", ":", "\n", "            ", "if", "not", "use_aug", ":", "\n", "                ", "init_samples", "[", "i", "]", "=", "init_samples", "[", "i", "]", "[", "0", ":", "1", ",", "...", "]", "\n", "\n", "# Add dropout samples", "\n", "", "", "if", "'dropout'", "in", "self", ".", "params", ".", "augmentation", ":", "\n", "            ", "num", ",", "prob", "=", "self", ".", "params", ".", "augmentation", "[", "'dropout'", "]", "\n", "self", ".", "transforms", ".", "extend", "(", "self", ".", "transforms", "[", ":", "1", "]", "*", "num", ")", "\n", "for", "i", ",", "use_aug", "in", "enumerate", "(", "self", ".", "fparams", ".", "attribute", "(", "'use_augmentation'", ")", ")", ":", "\n", "                ", "if", "use_aug", ":", "\n", "                    ", "init_samples", "[", "i", "]", "=", "torch", ".", "cat", "(", "[", "init_samples", "[", "i", "]", ",", "F", ".", "dropout2d", "(", "init_samples", "[", "i", "]", "[", "0", ":", "1", ",", "...", "]", ".", "expand", "(", "num", ",", "-", "1", ",", "-", "1", ",", "-", "1", ")", ",", "p", "=", "prob", ",", "training", "=", "True", ")", "]", ")", "\n", "\n", "", "", "", "return", "init_samples", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.init_projection_matrix": [[527, 549], ["atom.ATOM.params.get", "atom.ATOM.fparams.attribute", "atom.ATOM.params.get", "x.size", "pytracking.TensorList", "pytracking.TensorList", "pytracking.TensorList.mean", "pytracking.TensorList", "pytracking.TensorList.t", "pytracking.TensorList", "len", "e.permute().reshape().clone", "[].t().unsqueeze().unsqueeze().clone", "zip", "e.permute().reshape", "ex.new_zeros().normal_", "zip", "[].t().unsqueeze().unsqueeze", "e.permute", "ex.new_zeros", "math.sqrt", "[].t().unsqueeze", "[].t", "torch.svd", "torch.svd", "torch.svd", "torch.svd", "torch.svd", "torch.svd", "torch.svd", "torch.svd", "torch.svd"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], ["", "def", "init_projection_matrix", "(", "self", ",", "x", ")", ":", "\n", "# Set if using projection matrix", "\n", "        ", "self", ".", "params", ".", "use_projection_matrix", "=", "self", ".", "params", ".", "get", "(", "'use_projection_matrix'", ",", "True", ")", "\n", "\n", "if", "self", ".", "params", ".", "use_projection_matrix", ":", "\n", "            ", "self", ".", "compressed_dim", "=", "self", ".", "fparams", ".", "attribute", "(", "'compressed_dim'", ",", "None", ")", "\n", "\n", "proj_init_method", "=", "self", ".", "params", ".", "get", "(", "'proj_init_method'", ",", "'pca'", ")", "\n", "if", "proj_init_method", "==", "'pca'", ":", "\n", "                ", "x_mat", "=", "TensorList", "(", "[", "e", ".", "permute", "(", "1", ",", "0", ",", "2", ",", "3", ")", ".", "reshape", "(", "e", ".", "shape", "[", "1", "]", ",", "-", "1", ")", ".", "clone", "(", ")", "for", "e", "in", "x", "]", ")", "\n", "x_mat", "-=", "x_mat", ".", "mean", "(", "dim", "=", "1", ",", "keepdim", "=", "True", ")", "\n", "cov_x", "=", "x_mat", "@", "x_mat", ".", "t", "(", ")", "\n", "self", ".", "projection_matrix", "=", "TensorList", "(", "\n", "[", "None", "if", "cdim", "is", "None", "else", "torch", ".", "svd", "(", "C", ")", "[", "0", "]", "[", ":", ",", ":", "cdim", "]", ".", "t", "(", ")", ".", "unsqueeze", "(", "-", "1", ")", ".", "unsqueeze", "(", "-", "1", ")", ".", "clone", "(", ")", "for", "C", ",", "cdim", "in", "\n", "zip", "(", "cov_x", ",", "self", ".", "compressed_dim", ")", "]", ")", "\n", "", "elif", "proj_init_method", "==", "'randn'", ":", "\n", "                ", "self", ".", "projection_matrix", "=", "TensorList", "(", "\n", "[", "None", "if", "cdim", "is", "None", "else", "ex", ".", "new_zeros", "(", "cdim", ",", "ex", ".", "shape", "[", "1", "]", ",", "1", ",", "1", ")", ".", "normal_", "(", "0", ",", "1", "/", "math", ".", "sqrt", "(", "ex", ".", "shape", "[", "1", "]", ")", ")", "for", "ex", ",", "cdim", "in", "\n", "zip", "(", "x", ",", "self", ".", "compressed_dim", ")", "]", ")", "\n", "", "", "else", ":", "\n", "            ", "self", ".", "compressed_dim", "=", "x", ".", "size", "(", "1", ")", "\n", "self", ".", "projection_matrix", "=", "TensorList", "(", "[", "None", "]", "*", "len", "(", "x", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.init_label_function": [[550, 570], ["pytracking.TensorList", "atom.ATOM.fparams.attribute", "zip", "pytracking.TensorList", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "enumerate", "x.new_zeros", "atom.ATOM.pos.round", "pytracking.dcf.label_function_spatial", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "zip", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.label_function_spatial"], ["", "", "def", "init_label_function", "(", "self", ",", "train_x", ")", ":", "\n", "# Allocate label function", "\n", "        ", "self", ".", "y", "=", "TensorList", "(", "[", "x", ".", "new_zeros", "(", "self", ".", "params", ".", "sample_memory_size", ",", "1", ",", "x", ".", "shape", "[", "2", "]", ",", "x", ".", "shape", "[", "3", "]", ")", "for", "x", "in", "train_x", "]", ")", "\n", "\n", "# Output sigma factor", "\n", "output_sigma_factor", "=", "self", ".", "fparams", ".", "attribute", "(", "'output_sigma_factor'", ")", "\n", "self", ".", "sigma", "=", "(", "self", ".", "feature_sz", "/", "self", ".", "img_support_sz", "*", "self", ".", "base_target_sz", ")", ".", "prod", "(", ")", ".", "sqrt", "(", ")", "*", "output_sigma_factor", "*", "torch", ".", "ones", "(", "2", ")", "\n", "\n", "# Center pos in normalized coords", "\n", "target_center_norm", "=", "(", "self", ".", "pos", "-", "self", ".", "pos", ".", "round", "(", ")", ")", "/", "(", "self", ".", "target_scale", "*", "self", ".", "img_support_sz", ")", "\n", "\n", "# Generate label functions", "\n", "for", "y", ",", "sig", ",", "sz", ",", "ksz", ",", "x", "in", "zip", "(", "self", ".", "y", ",", "self", ".", "sigma", ",", "self", ".", "feature_sz", ",", "self", ".", "kernel_size", ",", "train_x", ")", ":", "\n", "            ", "center_pos", "=", "sz", "*", "target_center_norm", "+", "0.5", "*", "torch", ".", "Tensor", "(", "[", "(", "ksz", "[", "0", "]", "+", "1", ")", "%", "2", ",", "(", "ksz", "[", "1", "]", "+", "1", ")", "%", "2", "]", ")", "\n", "for", "i", ",", "T", "in", "enumerate", "(", "self", ".", "transforms", "[", ":", "x", ".", "shape", "[", "0", "]", "]", ")", ":", "\n", "                ", "sample_center", "=", "center_pos", "+", "torch", ".", "Tensor", "(", "T", ".", "shift", ")", "/", "self", ".", "img_support_sz", "*", "sz", "\n", "y", "[", "i", ",", "0", ",", "...", "]", "=", "dcf", ".", "label_function_spatial", "(", "sz", ",", "sig", ",", "sample_center", ")", "\n", "\n", "# Return only the ones to use for initial training", "\n", "", "", "return", "TensorList", "(", "[", "y", "[", ":", "x", ".", "shape", "[", "0", "]", ",", "...", "]", "for", "y", ",", "x", "in", "zip", "(", "self", ".", "y", ",", "train_x", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.init_memory": [[572, 589], ["train_x.size", "pytracking.TensorList", "atom.ATOM.num_init_samples.copy", "pytracking.TensorList", "zip", "pytracking.TensorList", "len", "x.new_zeros", "x.new_zeros", "x.new_ones", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy"], ["", "def", "init_memory", "(", "self", ",", "train_x", ")", ":", "\n", "# Initialize first-frame training samples", "\n", "        ", "self", ".", "num_init_samples", "=", "train_x", ".", "size", "(", "0", ")", "\n", "self", ".", "init_sample_weights", "=", "TensorList", "(", "[", "x", ".", "new_ones", "(", "1", ")", "/", "x", ".", "shape", "[", "0", "]", "for", "x", "in", "train_x", "]", ")", "\n", "self", ".", "init_training_samples", "=", "train_x", "\n", "\n", "# Sample counters and weights", "\n", "self", ".", "num_stored_samples", "=", "self", ".", "num_init_samples", ".", "copy", "(", ")", "\n", "self", ".", "previous_replace_ind", "=", "[", "None", "]", "*", "len", "(", "self", ".", "num_stored_samples", ")", "\n", "self", ".", "sample_weights", "=", "TensorList", "(", "[", "x", ".", "new_zeros", "(", "self", ".", "params", ".", "sample_memory_size", ")", "for", "x", "in", "train_x", "]", ")", "\n", "for", "sw", ",", "init_sw", ",", "num", "in", "zip", "(", "self", ".", "sample_weights", ",", "self", ".", "init_sample_weights", ",", "self", ".", "num_init_samples", ")", ":", "\n", "            ", "sw", "[", ":", "num", "]", "=", "init_sw", "\n", "\n", "# Initialize memory", "\n", "", "self", ".", "training_samples", "=", "TensorList", "(", "\n", "[", "x", ".", "new_zeros", "(", "self", ".", "params", ".", "sample_memory_size", ",", "cdim", ",", "x", ".", "shape", "[", "2", "]", ",", "x", ".", "shape", "[", "3", "]", ")", "for", "x", ",", "cdim", "in", "\n", "zip", "(", "train_x", ",", "self", ".", "compressed_dim", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.update_memory": [[590, 601], ["atom.ATOM.update_sample_weights", "zip", "zip", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.update_sample_weights"], ["", "def", "update_memory", "(", "self", ",", "sample_x", ":", "TensorList", ",", "sample_y", ":", "TensorList", ",", "learning_rate", "=", "None", ")", ":", "\n", "        ", "replace_ind", "=", "self", ".", "update_sample_weights", "(", "self", ".", "sample_weights", ",", "self", ".", "previous_replace_ind", ",", "self", ".", "num_stored_samples", ",", "self", ".", "num_init_samples", ",", "self", ".", "fparams", ",", "learning_rate", ")", "\n", "self", ".", "previous_replace_ind", "=", "replace_ind", "\n", "for", "train_samp", ",", "x", ",", "ind", "in", "zip", "(", "self", ".", "training_samples", ",", "sample_x", ",", "replace_ind", ")", ":", "\n", "            ", "train_samp", "[", "ind", ":", "ind", "+", "1", ",", "...", "]", "=", "x", "\n", "", "for", "y_memory", ",", "y", ",", "ind", "in", "zip", "(", "self", ".", "y", ",", "sample_y", ",", "replace_ind", ")", ":", "\n", "            ", "y_memory", "[", "ind", ":", "ind", "+", "1", ",", "...", "]", "=", "y", "\n", "", "if", "self", ".", "hinge_mask", "is", "not", "None", ":", "\n", "            ", "for", "m", ",", "y", ",", "ind", "in", "zip", "(", "self", ".", "hinge_mask", ",", "sample_y", ",", "replace_ind", ")", ":", "\n", "                ", "m", "[", "ind", ":", "ind", "+", "1", ",", "...", "]", "=", "(", "y", ">=", "self", ".", "params", ".", "hinge_threshold", ")", ".", "float", "(", ")", "\n", "", "", "self", ".", "num_stored_samples", "+=", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.update_sample_weights": [[603, 640], ["zip", "getattr", "sw.sum", "replace_ind.append", "torch.min", "torch.min", "torch.min", "torch.min", "torch.min", "torch.min", "torch.min", "torch.min", "torch.min", "r_ind.item", "sw[].sum", "sw[].sum"], "methods", ["None"], ["", "def", "update_sample_weights", "(", "self", ",", "sample_weights", ",", "previous_replace_ind", ",", "num_stored_samples", ",", "num_init_samples", ",", "fparams", ",", "learning_rate", "=", "None", ")", ":", "\n", "# Update weights and get index to replace in memory", "\n", "        ", "replace_ind", "=", "[", "]", "\n", "for", "sw", ",", "prev_ind", ",", "num_samp", ",", "num_init", ",", "fpar", "in", "zip", "(", "sample_weights", ",", "previous_replace_ind", ",", "num_stored_samples", ",", "num_init_samples", ",", "fparams", ")", ":", "\n", "            ", "lr", "=", "learning_rate", "\n", "if", "lr", "is", "None", ":", "\n", "                ", "lr", "=", "fpar", ".", "learning_rate", "\n", "\n", "", "init_samp_weight", "=", "getattr", "(", "fpar", ",", "'init_samples_minimum_weight'", ",", "None", ")", "\n", "if", "init_samp_weight", "==", "0", ":", "\n", "                ", "init_samp_weight", "=", "None", "\n", "", "s_ind", "=", "0", "if", "init_samp_weight", "is", "None", "else", "num_init", "\n", "\n", "if", "num_samp", "==", "0", "or", "lr", "==", "1", ":", "\n", "                ", "sw", "[", ":", "]", "=", "0", "\n", "sw", "[", "0", "]", "=", "1", "\n", "r_ind", "=", "0", "\n", "", "else", ":", "\n", "# Get index to replace", "\n", "                ", "_", ",", "r_ind", "=", "torch", ".", "min", "(", "sw", "[", "s_ind", ":", "]", ",", "0", ")", "\n", "r_ind", "=", "r_ind", ".", "item", "(", ")", "+", "s_ind", "\n", "\n", "# Update weights", "\n", "if", "prev_ind", "is", "None", ":", "\n", "                    ", "sw", "/=", "1", "-", "lr", "\n", "sw", "[", "r_ind", "]", "=", "lr", "\n", "", "else", ":", "\n", "                    ", "sw", "[", "r_ind", "]", "=", "sw", "[", "prev_ind", "]", "/", "(", "1", "-", "lr", ")", "\n", "\n", "", "", "sw", "/=", "sw", ".", "sum", "(", ")", "\n", "if", "init_samp_weight", "is", "not", "None", "and", "sw", "[", ":", "num_init", "]", ".", "sum", "(", ")", "<", "init_samp_weight", ":", "\n", "                ", "sw", "/=", "init_samp_weight", "+", "sw", "[", "num_init", ":", "]", ".", "sum", "(", ")", "\n", "sw", "[", ":", "num_init", "]", "=", "init_samp_weight", "/", "num_init", "\n", "\n", "", "replace_ind", ".", "append", "(", "r_ind", ")", "\n", "\n", "", "return", "replace_ind", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_label_function": [[641, 649], ["pytracking.TensorList", "zip", "pytracking.TensorList.append", "pytracking.dcf.label_function_spatial", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.label_function_spatial"], ["", "def", "get_label_function", "(", "self", ",", "sample_pos", ",", "sample_scale", ")", ":", "\n", "# Generate label function", "\n", "        ", "train_y", "=", "TensorList", "(", ")", "\n", "target_center_norm", "=", "(", "self", ".", "pos", "-", "sample_pos", ")", "/", "(", "sample_scale", "*", "self", ".", "img_support_sz", ")", "\n", "for", "sig", ",", "sz", ",", "ksz", "in", "zip", "(", "self", ".", "sigma", ",", "self", ".", "feature_sz", ",", "self", ".", "kernel_size", ")", ":", "\n", "            ", "center", "=", "sz", "*", "target_center_norm", "+", "0.5", "*", "torch", ".", "Tensor", "(", "[", "(", "ksz", "[", "0", "]", "+", "1", ")", "%", "2", ",", "(", "ksz", "[", "1", "]", "+", "1", ")", "%", "2", "]", ")", "\n", "train_y", ".", "append", "(", "dcf", ".", "label_function_spatial", "(", "sz", ",", "sig", ",", "center", ")", ")", "\n", "", "return", "train_y", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.update_state": [[650, 660], ["torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "torch.max", "new_scale.clamp", "torch.min", "torch.min", "torch.min", "torch.min", "torch.min", "torch.min", "torch.min", "torch.min", "torch.min"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "update_state", "(", "self", ",", "new_pos", ",", "new_scale", "=", "None", ")", ":", "\n", "# Update scale", "\n", "        ", "if", "new_scale", "is", "not", "None", ":", "\n", "            ", "self", ".", "target_scale", "=", "new_scale", ".", "clamp", "(", "self", ".", "min_scale_factor", ",", "self", ".", "max_scale_factor", ")", "\n", "self", ".", "target_sz", "=", "self", ".", "base_target_sz", "*", "self", ".", "target_scale", "\n", "\n", "# Update pos", "\n", "", "inside_ratio", "=", "0.2", "\n", "inside_offset", "=", "(", "inside_ratio", "-", "0.5", ")", "*", "self", ".", "target_sz", "\n", "self", ".", "pos", "=", "torch", ".", "max", "(", "torch", ".", "min", "(", "new_pos", ",", "self", ".", "image_sz", "-", "inside_offset", ")", ",", "inside_offset", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_iounet_box": [[661, 667], ["torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "target_ul.flip", "box_sz.flip"], "methods", ["None"], ["", "def", "get_iounet_box", "(", "self", ",", "pos", ",", "sz", ",", "sample_pos", ",", "sample_scale", ")", ":", "\n", "        ", "\"\"\"All inputs in original image coordinates\"\"\"", "\n", "box_center", "=", "(", "pos", "-", "sample_pos", ")", "/", "sample_scale", "+", "(", "self", ".", "iou_img_sample_sz", "-", "1", ")", "/", "2", "\n", "box_sz", "=", "sz", "/", "sample_scale", "\n", "target_ul", "=", "box_center", "-", "(", "box_sz", "-", "1", ")", "/", "2", "\n", "return", "torch", ".", "cat", "(", "[", "target_ul", ".", "flip", "(", "(", "0", ",", ")", ")", ",", "box_sz", ".", "flip", "(", "(", "0", ",", ")", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.init_iou_net": [[668, 699], ["atom.ATOM.params.features.get_unique_attribute", "atom.ATOM.iou_predictor.parameters", "atom.ATOM.get_iounet_box", "pytracking.TensorList", "torch.cat().to", "torch.cat().to", "torch.cat().to", "torch.cat().to", "torch.cat().to", "torch.cat().to", "torch.cat().to", "torch.cat().to", "torch.cat().to", "atom.ATOM.get_iou_backbone_features", "pytracking.TensorList", "pytracking.TensorList", "atom.ATOM.params.get", "atom.ATOM.pos.round", "torch.cat().to.append", "torch.cat().to.append", "torch.cat().to.append", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "torch.no_grad", "atom.ATOM.iou_predictor.get_modulation", "pytracking.TensorList", "torch.cat().to.append", "torch.cat().to.append", "torch.cat().to.append", "atom.ATOM.iou_target_box.clone", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "x.detach().mean", "isinstance", "torch.cat().to.view", "torch.cat().to.view", "torch.cat().to.view", "torch.full_like", "torch.full_like", "torch.full_like", "torch.full_like", "torch.full_like", "torch.full_like", "torch.full_like", "torch.full_like", "torch.full_like", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "x.detach", "tf.norm", "tf.numel"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.get_unique_attribute", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_iounet_box", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_iou_backbone_features", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.get_modulation", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], ["", "def", "init_iou_net", "(", "self", ")", ":", "\n", "# Setup IoU net", "\n", "        ", "self", ".", "iou_predictor", "=", "self", ".", "params", ".", "features", ".", "get_unique_attribute", "(", "'iou_predictor'", ")", "\n", "for", "p", "in", "self", ".", "iou_predictor", ".", "parameters", "(", ")", ":", "\n", "            ", "p", ".", "requires_grad", "=", "False", "\n", "\n", "# Get target boxes for the different augmentations", "\n", "", "self", ".", "iou_target_box", "=", "self", ".", "get_iounet_box", "(", "self", ".", "pos", ",", "self", ".", "target_sz", ",", "self", ".", "pos", ".", "round", "(", ")", ",", "self", ".", "target_scale", ")", "\n", "target_boxes", "=", "TensorList", "(", ")", "\n", "if", "self", ".", "params", ".", "iounet_augmentation", ":", "\n", "            ", "for", "T", "in", "self", ".", "transforms", ":", "\n", "                ", "if", "not", "isinstance", "(", "T", ",", "(", "augmentation", ".", "Identity", ",", "augmentation", ".", "Translation", ",", "augmentation", ".", "FlipHorizontal", ",", "augmentation", ".", "FlipVertical", ",", "augmentation", ".", "Blur", ")", ")", ":", "\n", "                    ", "break", "\n", "", "target_boxes", ".", "append", "(", "self", ".", "iou_target_box", "+", "torch", ".", "Tensor", "(", "[", "T", ".", "shift", "[", "1", "]", ",", "T", ".", "shift", "[", "0", "]", ",", "0", ",", "0", "]", ")", ")", "\n", "", "", "else", ":", "\n", "            ", "target_boxes", ".", "append", "(", "self", ".", "iou_target_box", ".", "clone", "(", ")", ")", "\n", "", "target_boxes", "=", "torch", ".", "cat", "(", "target_boxes", ".", "view", "(", "1", ",", "4", ")", ",", "0", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "\n", "\n", "# Get iou features", "\n", "iou_backbone_features", "=", "self", ".", "get_iou_backbone_features", "(", ")", "\n", "\n", "# Remove other augmentations such as rotation", "\n", "iou_backbone_features", "=", "TensorList", "(", "[", "x", "[", ":", "target_boxes", ".", "shape", "[", "0", "]", ",", "...", "]", "for", "x", "in", "iou_backbone_features", "]", ")", "\n", "\n", "# Extract target feat", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "target_feat", "=", "self", ".", "iou_predictor", ".", "get_modulation", "(", "iou_backbone_features", ",", "target_boxes", ")", "\n", "", "self", ".", "target_feat", "=", "TensorList", "(", "[", "x", ".", "detach", "(", ")", ".", "mean", "(", "0", ")", "for", "x", "in", "target_feat", "]", ")", "\n", "\n", "if", "self", ".", "params", ".", "get", "(", "'iounet_not_use_reference'", ",", "False", ")", ":", "\n", "            ", "self", ".", "target_feat", "=", "TensorList", "(", "[", "torch", ".", "full_like", "(", "tf", ",", "tf", ".", "norm", "(", ")", "/", "tf", ".", "numel", "(", ")", ")", "for", "tf", "in", "self", ".", "target_feat", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.refine_target_box": [[701, 757], ["atom.ATOM.get_iounet_box", "atom.ATOM.get_iou_features", "pytracking.TensorList", "atom.ATOM.view().clone", "atom.ATOM.optimize_boxes", "output_boxes[].clamp_", "atom.ATOM.params.get", "min", "torch.topk", "torch.topk", "torch.topk", "torch.topk", "torch.topk", "torch.topk", "torch.topk", "torch.topk", "torch.topk", "output_boxes[].mean", "[].mean", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "new_pos.clone", "atom.ATOM.params.get", "init_box[].prod().sqrt", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "predicted_box[].flip", "new_pos.clone", "atom.ATOM.view", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "init_box[].min", "new_pos.flip", "new_target_sz.prod", "atom.ATOM.base_target_sz.prod", "init_box[].prod", "torch.rand", "torch.rand", "torch.rand", "torch.rand", "torch.rand", "torch.rand", "torch.rand", "torch.rand", "torch.rand", "atom.ATOM.view", "output_iou.view", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_iounet_box", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.get_iou_features", "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.optimize_boxes", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get"], ["", "", "def", "refine_target_box", "(", "self", ",", "sample_pos", ",", "sample_scale", ",", "scale_ind", ",", "update_scale", "=", "True", ")", ":", "\n", "# Initial box for refinement", "\n", "        ", "init_box", "=", "self", ".", "get_iounet_box", "(", "self", ".", "pos", ",", "self", ".", "target_sz", ",", "sample_pos", ",", "sample_scale", ")", "\n", "\n", "# Extract features from the relevant scale", "\n", "iou_features", "=", "self", ".", "get_iou_features", "(", ")", "\n", "iou_features", "=", "TensorList", "(", "[", "x", "[", "scale_ind", ":", "scale_ind", "+", "1", ",", "...", "]", "for", "x", "in", "iou_features", "]", ")", "\n", "\n", "init_boxes", "=", "init_box", ".", "view", "(", "1", ",", "4", ")", ".", "clone", "(", ")", "\n", "if", "self", ".", "params", ".", "num_init_random_boxes", ">", "0", ":", "\n", "# Get random initial boxes", "\n", "            ", "square_box_sz", "=", "init_box", "[", "2", ":", "]", ".", "prod", "(", ")", ".", "sqrt", "(", ")", "\n", "rand_factor", "=", "square_box_sz", "*", "torch", ".", "cat", "(", "[", "self", ".", "params", ".", "box_jitter_pos", "*", "torch", ".", "ones", "(", "2", ")", ",", "self", ".", "params", ".", "box_jitter_sz", "*", "torch", ".", "ones", "(", "2", ")", "]", ")", "\n", "minimal_edge_size", "=", "init_box", "[", "2", ":", "]", ".", "min", "(", ")", "/", "3", "\n", "rand_bb", "=", "(", "torch", ".", "rand", "(", "self", ".", "params", ".", "num_init_random_boxes", ",", "4", ")", "-", "0.5", ")", "*", "rand_factor", "\n", "new_sz", "=", "(", "init_box", "[", "2", ":", "]", "+", "rand_bb", "[", ":", ",", "2", ":", "]", ")", ".", "clamp", "(", "minimal_edge_size", ")", "\n", "new_center", "=", "(", "init_box", "[", ":", "2", "]", "+", "init_box", "[", "2", ":", "]", "/", "2", ")", "+", "rand_bb", "[", ":", ",", ":", "2", "]", "\n", "init_boxes", "=", "torch", ".", "cat", "(", "[", "new_center", "-", "new_sz", "/", "2", ",", "new_sz", "]", ",", "1", ")", "\n", "init_boxes", "=", "torch", ".", "cat", "(", "[", "init_box", ".", "view", "(", "1", ",", "4", ")", ",", "init_boxes", "]", ")", "\n", "\n", "# Refine boxes by maximizing iou", "\n", "", "output_boxes", ",", "output_iou", "=", "self", ".", "optimize_boxes", "(", "iou_features", ",", "init_boxes", ")", "\n", "\n", "# Remove weird boxes with extreme aspect ratios", "\n", "output_boxes", "[", ":", ",", "2", ":", "]", ".", "clamp_", "(", "1", ")", "\n", "aspect_ratio", "=", "output_boxes", "[", ":", ",", "2", "]", "/", "output_boxes", "[", ":", ",", "3", "]", "\n", "keep_ind", "=", "(", "aspect_ratio", "<", "self", ".", "params", ".", "maximal_aspect_ratio", ")", "*", "(", "aspect_ratio", ">", "1", "/", "self", ".", "params", ".", "maximal_aspect_ratio", ")", "\n", "output_boxes", "=", "output_boxes", "[", "keep_ind", ",", ":", "]", "\n", "output_iou", "=", "output_iou", "[", "keep_ind", "]", "\n", "\n", "# If no box found", "\n", "if", "output_boxes", ".", "shape", "[", "0", "]", "==", "0", ":", "\n", "            ", "return", "\n", "\n", "# Take average of top k boxes", "\n", "", "k", "=", "self", ".", "params", ".", "get", "(", "'iounet_k'", ",", "5", ")", "\n", "topk", "=", "min", "(", "k", ",", "output_boxes", ".", "shape", "[", "0", "]", ")", "\n", "_", ",", "inds", "=", "torch", ".", "topk", "(", "output_iou", ",", "topk", ")", "\n", "predicted_box", "=", "output_boxes", "[", "inds", ",", ":", "]", ".", "mean", "(", "0", ")", "\n", "predicted_iou", "=", "output_iou", ".", "view", "(", "-", "1", ",", "1", ")", "[", "inds", ",", ":", "]", ".", "mean", "(", "0", ")", "\n", "\n", "# Update position", "\n", "new_pos", "=", "predicted_box", "[", ":", "2", "]", "+", "predicted_box", "[", "2", ":", "]", "/", "2", "-", "(", "self", ".", "iou_img_sample_sz", "-", "1", ")", "/", "2", "\n", "new_pos", "=", "new_pos", ".", "flip", "(", "(", "0", ",", ")", ")", "*", "sample_scale", "+", "sample_pos", "\n", "new_target_sz", "=", "predicted_box", "[", "2", ":", "]", ".", "flip", "(", "(", "0", ",", ")", ")", "*", "sample_scale", "\n", "new_scale", "=", "torch", ".", "sqrt", "(", "new_target_sz", ".", "prod", "(", ")", "/", "self", ".", "base_target_sz", ".", "prod", "(", ")", ")", "\n", "\n", "self", ".", "pos_iounet", "=", "new_pos", ".", "clone", "(", ")", "\n", "\n", "if", "self", ".", "params", ".", "get", "(", "'use_iounet_pos_for_learning'", ",", "True", ")", ":", "\n", "            ", "self", ".", "pos", "=", "new_pos", ".", "clone", "(", ")", "\n", "\n", "", "self", ".", "target_sz", "=", "new_target_sz", "\n", "\n", "if", "update_scale", ":", "\n", "            ", "self", ".", "target_scale", "=", "new_scale", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.atom.atom.ATOM.optimize_boxes": [[758, 837], ["init_boxes.view().to", "isinstance", "atom.ATOM.params.get", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.Tensor().to().view", "torch.Tensor().to().view", "torch.Tensor().to().view", "torch.Tensor().to().view", "torch.Tensor().to().view", "torch.Tensor().to().view", "torch.Tensor().to().view", "torch.Tensor().to().view", "torch.Tensor().to().view", "ltr.rel_to_rect.new_ones", "ltr.rel_to_rect.new_ones", "range", "ltr.rel_to_rect.view().cpu", "atom.ATOM.detach().view().cpu", "init_boxes.view", "ltr.rel_to_rect.clone().detach", "atom.ATOM.iou_predictor.predict_iou", "isinstance", "atom.ATOM.backward", "update_mask.view().float", "atom.ATOM.detach().clone", "ltr.rel_to_rect.detach_", "output_boxes[].clone", "ltr.rect_to_rel", "range", "ltr.rel_to_rect", "ValueError", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "ltr.rect_to_rel.clone().detach", "ltr.rel_to_rect", "atom.ATOM.iou_predictor.predict_iou", "isinstance", "atom.ATOM.backward", "update_mask.view().float", "atom.ATOM.detach().clone", "ltr.rect_to_rel.detach_", "ltr.rel_to_rect.view", "atom.ATOM.detach().view", "ltr.rel_to_rect.clone", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "atom.ATOM.detach", "update_mask.view", "atom.ATOM.detach", "bb_init[].repeat", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "ltr.rect_to_rel.clone", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "torch.ones_like", "atom.ATOM.detach", "update_mask.view", "atom.ATOM.detach", "atom.ATOM.detach"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.admin.model_constructor.NetConstructor.get", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.predict_iou", "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.rect_to_rel", "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.rel_to_rect", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.data.bounding_box_utils.rel_to_rect", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.predict_iou"], ["", "", "def", "optimize_boxes", "(", "self", ",", "iou_features", ",", "init_boxes", ")", ":", "\n", "# Optimize iounet boxes", "\n", "        ", "output_boxes", "=", "init_boxes", ".", "view", "(", "1", ",", "-", "1", ",", "4", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "\n", "step_length", "=", "self", ".", "params", ".", "box_refinement_step_length", "\n", "init_step_length", "=", "self", ".", "params", ".", "box_refinement_step_length", "\n", "if", "isinstance", "(", "step_length", ",", "(", "tuple", ",", "list", ")", ")", ":", "\n", "            ", "init_step_length", "=", "torch", ".", "Tensor", "(", "[", "step_length", "[", "0", "]", ",", "step_length", "[", "0", "]", ",", "step_length", "[", "1", "]", ",", "step_length", "[", "1", "]", "]", ")", ".", "to", "(", "\n", "self", ".", "params", ".", "device", ")", ".", "view", "(", "1", ",", "1", ",", "4", ")", "\n", "", "box_refinement_space", "=", "self", ".", "params", ".", "get", "(", "'box_refinement_space'", ",", "'default'", ")", "\n", "\n", "step_length", "=", "init_step_length", "*", "output_boxes", ".", "new_ones", "(", "1", ",", "output_boxes", ".", "shape", "[", "1", "]", ",", "1", ")", "\n", "outputs_prev", "=", "-", "99999999", "*", "output_boxes", ".", "new_ones", "(", "1", ",", "output_boxes", ".", "shape", "[", "1", "]", ")", "\n", "step", "=", "torch", ".", "zeros_like", "(", "output_boxes", ")", "\n", "\n", "if", "box_refinement_space", "==", "'default'", ":", "\n", "# Optimization using bounding box space used in original IoUNet", "\n", "            ", "for", "i_", "in", "range", "(", "self", ".", "params", ".", "box_refinement_iter", ")", ":", "\n", "# forward pass", "\n", "                ", "bb_init", "=", "output_boxes", ".", "clone", "(", ")", ".", "detach", "(", ")", "\n", "bb_init", ".", "requires_grad", "=", "True", "\n", "\n", "outputs", "=", "self", ".", "iou_predictor", ".", "predict_iou", "(", "self", ".", "target_feat", ",", "iou_features", ",", "bb_init", ")", "\n", "\n", "if", "isinstance", "(", "outputs", ",", "(", "list", ",", "tuple", ")", ")", ":", "\n", "                    ", "outputs", "=", "outputs", "[", "0", "]", "\n", "\n", "", "outputs", ".", "backward", "(", "gradient", "=", "torch", ".", "ones_like", "(", "outputs", ")", ")", "\n", "\n", "# Update mask and step length", "\n", "update_mask", "=", "(", "outputs", ".", "detach", "(", ")", ">", "outputs_prev", ")", "|", "(", "self", ".", "params", ".", "box_refinement_step_decay", ">=", "1", ")", "\n", "update_mask_float", "=", "update_mask", ".", "view", "(", "1", ",", "-", "1", ",", "1", ")", ".", "float", "(", ")", "\n", "step_length", "[", "~", "update_mask", ",", ":", "]", "*=", "self", ".", "params", ".", "box_refinement_step_decay", "\n", "outputs_prev", "=", "outputs", ".", "detach", "(", ")", ".", "clone", "(", ")", "\n", "\n", "# Update proposal", "\n", "step", "=", "update_mask_float", "*", "step_length", "*", "bb_init", ".", "grad", "*", "bb_init", "[", ":", ",", ":", ",", "2", ":", "]", ".", "repeat", "(", "1", ",", "1", ",", "2", ")", "-", "(", "\n", "1.0", "-", "update_mask_float", ")", "*", "step", "\n", "output_boxes", "=", "bb_init", "+", "step", "\n", "output_boxes", ".", "detach_", "(", ")", "\n", "\n", "", "", "elif", "box_refinement_space", "==", "'relative'", ":", "\n", "# Optimization using relative bounding box space", "\n", "            ", "sz_norm", "=", "output_boxes", "[", ":", ",", ":", "1", ",", "2", ":", "]", ".", "clone", "(", ")", "\n", "output_boxes_rel", "=", "bbutils", ".", "rect_to_rel", "(", "output_boxes", ",", "sz_norm", ")", "\n", "for", "i_", "in", "range", "(", "self", ".", "params", ".", "box_refinement_iter", ")", ":", "\n", "# forward pass", "\n", "                ", "bb_init_rel", "=", "output_boxes_rel", ".", "clone", "(", ")", ".", "detach", "(", ")", "\n", "bb_init_rel", ".", "requires_grad", "=", "True", "\n", "\n", "bb_init", "=", "bbutils", ".", "rel_to_rect", "(", "bb_init_rel", ",", "sz_norm", ")", "\n", "outputs", "=", "self", ".", "iou_predictor", ".", "predict_iou", "(", "self", ".", "target_feat", ",", "iou_features", ",", "bb_init", ")", "\n", "\n", "if", "isinstance", "(", "outputs", ",", "(", "list", ",", "tuple", ")", ")", ":", "\n", "                    ", "outputs", "=", "outputs", "[", "0", "]", "\n", "\n", "", "outputs", ".", "backward", "(", "gradient", "=", "torch", ".", "ones_like", "(", "outputs", ")", ")", "\n", "\n", "# Update mask and step length", "\n", "update_mask", "=", "(", "outputs", ".", "detach", "(", ")", ">", "outputs_prev", ")", "|", "(", "self", ".", "params", ".", "box_refinement_step_decay", ">=", "1", ")", "\n", "update_mask_float", "=", "update_mask", ".", "view", "(", "1", ",", "-", "1", ",", "1", ")", ".", "float", "(", ")", "\n", "step_length", "[", "~", "update_mask", ",", ":", "]", "*=", "self", ".", "params", ".", "box_refinement_step_decay", "\n", "outputs_prev", "=", "outputs", ".", "detach", "(", ")", ".", "clone", "(", ")", "\n", "\n", "# Update proposal", "\n", "step", "=", "update_mask_float", "*", "step_length", "*", "bb_init_rel", ".", "grad", "-", "(", "1.0", "-", "update_mask_float", ")", "*", "step", "\n", "output_boxes_rel", "=", "bb_init_rel", "+", "step", "\n", "output_boxes_rel", ".", "detach_", "(", ")", "\n", "\n", "# for s in outputs.view(-1):", "\n", "#     print('{:.2f}  '.format(s.item()), end='')", "\n", "# print('')", "\n", "# print('')", "\n", "\n", "", "output_boxes", "=", "bbutils", ".", "rel_to_rect", "(", "output_boxes_rel", ",", "sz_norm", ")", "\n", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'Unknown box_refinement_space {}'", ".", "format", "(", "box_refinement_space", ")", ")", "\n", "\n", "", "return", "output_boxes", ".", "view", "(", "-", "1", ",", "4", ")", ".", "cpu", "(", ")", ",", "outputs", ".", "detach", "(", ")", ".", "view", "(", "-", "1", ")", ".", "cpu", "(", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.__init__": [[24, 57], ["trax.Server", "vot.VOT._trax.wait", "isinstance", "vot.VOT._trax.status", "Polygon", "isinstance", "x.path", "len", "dict", "vot.VOT.region.array", "Rectangle", "vot.VOT.image.items", "Point", "Exception", "vot.VOT.region.bounds"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "region_format", ",", "channels", "=", "None", ")", ":", "\n", "        ", "\"\"\" Constructor\n        Args:\n            region_format: Region format options\n        \"\"\"", "\n", "assert", "(", "region_format", "in", "[", "trax", ".", "Region", ".", "RECTANGLE", ",", "trax", ".", "Region", ".", "POLYGON", ",", "trax", ".", "Region", ".", "MASK", "]", ")", "\n", "\n", "if", "channels", "is", "None", ":", "\n", "            ", "channels", "=", "[", "'color'", "]", "\n", "", "elif", "channels", "==", "'rgbd'", ":", "\n", "            ", "channels", "=", "[", "'color'", ",", "'depth'", "]", "\n", "", "elif", "channels", "==", "'rgbt'", ":", "\n", "            ", "channels", "=", "[", "'color'", ",", "'ir'", "]", "\n", "", "elif", "channels", "==", "'ir'", ":", "\n", "            ", "channels", "=", "[", "'ir'", "]", "\n", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "'Illegal configuration {}.'", ".", "format", "(", "channels", ")", ")", "\n", "\n", "", "self", ".", "_trax", "=", "trax", ".", "Server", "(", "[", "region_format", "]", ",", "[", "trax", ".", "Image", ".", "PATH", "]", ",", "channels", ",", "customMetadata", "=", "dict", "(", "vot", "=", "\"python\"", ")", ")", "\n", "\n", "request", "=", "self", ".", "_trax", ".", "wait", "(", ")", "\n", "assert", "(", "request", ".", "type", "==", "'initialize'", ")", "\n", "if", "isinstance", "(", "request", ".", "region", ",", "trax", ".", "Polygon", ")", ":", "\n", "            ", "self", ".", "_region", "=", "Polygon", "(", "[", "Point", "(", "x", "[", "0", "]", ",", "x", "[", "1", "]", ")", "for", "x", "in", "request", ".", "region", "]", ")", "\n", "", "elif", "isinstance", "(", "request", ".", "region", ",", "trax", ".", "Mask", ")", ":", "\n", "            ", "self", ".", "_region", "=", "request", ".", "region", ".", "array", "(", "True", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "_region", "=", "Rectangle", "(", "*", "request", ".", "region", ".", "bounds", "(", ")", ")", "\n", "", "self", ".", "_image", "=", "[", "x", ".", "path", "(", ")", "for", "k", ",", "x", "in", "request", ".", "image", ".", "items", "(", ")", "]", "\n", "if", "len", "(", "self", ".", "_image", ")", "==", "1", ":", "\n", "            ", "self", ".", "_image", "=", "self", ".", "_image", "[", "0", "]", "\n", "\n", "", "self", ".", "_trax", ".", "status", "(", "request", ".", "region", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.region": [[58, 67], ["None"], "methods", ["None"], ["", "def", "region", "(", "self", ")", ":", "\n", "        ", "\"\"\"\n        Send configuration message to the client and receive the initialization\n        region and the path of the first image\n        Returns:\n            initialization region\n        \"\"\"", "\n", "\n", "return", "self", ".", "_region", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.report": [[68, 85], ["isinstance", "isinstance", "vot.VOT._trax.status", "trax.Polygon.create", "isinstance", "trax.Mask.create", "trax.Rectangle.create"], "methods", ["None"], ["", "def", "report", "(", "self", ",", "region", ",", "confidence", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        Report the tracking results to the client\n        Arguments:\n            region: region for the frame\n        \"\"\"", "\n", "assert", "(", "isinstance", "(", "region", ",", "(", "Rectangle", ",", "Polygon", ",", "np", ".", "ndarray", ")", ")", ")", "\n", "if", "isinstance", "(", "region", ",", "Polygon", ")", ":", "\n", "            ", "tregion", "=", "trax", ".", "Polygon", ".", "create", "(", "[", "(", "x", ".", "x", ",", "x", ".", "y", ")", "for", "x", "in", "region", ".", "points", "]", ")", "\n", "", "elif", "isinstance", "(", "region", ",", "np", ".", "ndarray", ")", ":", "\n", "            ", "tregion", "=", "trax", ".", "Mask", ".", "create", "(", "region", ")", "\n", "", "else", ":", "\n", "            ", "tregion", "=", "trax", ".", "Rectangle", ".", "create", "(", "region", ".", "x", ",", "region", ".", "y", ",", "region", ".", "width", ",", "region", ".", "height", ")", "\n", "", "properties", "=", "{", "}", "\n", "if", "not", "confidence", "is", "None", ":", "\n", "            ", "properties", "[", "'confidence'", "]", "=", "confidence", "\n", "", "self", ".", "_trax", ".", "status", "(", "tregion", ",", "properties", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.frame": [[86, 106], ["hasattr", "vot.VOT._trax.wait", "x.path", "len", "vot.VOT.image.items"], "methods", ["None"], ["", "def", "frame", "(", "self", ")", ":", "\n", "        ", "\"\"\"\n        Get a frame (image path) from client\n        Returns:\n            absolute path of the image\n        \"\"\"", "\n", "if", "hasattr", "(", "self", ",", "\"_image\"", ")", ":", "\n", "            ", "image", "=", "self", ".", "_image", "\n", "del", "self", ".", "_image", "\n", "return", "image", "\n", "\n", "", "request", "=", "self", ".", "_trax", ".", "wait", "(", ")", "\n", "\n", "if", "request", ".", "type", "==", "'frame'", ":", "\n", "            ", "image", "=", "[", "x", ".", "path", "(", ")", "for", "k", ",", "x", "in", "request", ".", "image", ".", "items", "(", ")", "]", "\n", "if", "len", "(", "image", ")", "==", "1", ":", "\n", "                ", "return", "image", "[", "0", "]", "\n", "", "return", "image", "\n", "", "else", ":", "\n", "            ", "return", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.quit": [[108, 111], ["hasattr", "vot.VOT._trax.quit"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.quit"], ["", "", "def", "quit", "(", "self", ")", ":", "\n", "        ", "if", "hasattr", "(", "self", ",", "'_trax'", ")", ":", "\n", "            ", "self", ".", "_trax", ".", "quit", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.__del__": [[112, 114], ["vot.VOT.quit"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.quit"], ["", "", "def", "__del__", "(", "self", ")", ":", "\n", "        ", "self", ".", "quit", "(", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.dimp_alpha_seg_class.DIMP_ALPHA.__init__": [[23, 40], ["pytracking.evaluation.Tracker", "pytracking.evaluation.Tracker.get_parameters", "pytracking.evaluation.Tracker.tracker_class", "os.path.join", "os.path.join", "os.path.join", "pytracking.ARcm_seg.ARcm_seg", "os.path.dirname"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.get_parameters"], ["    ", "def", "__init__", "(", "self", ",", "tracker_name", "=", "'dimp'", ",", "para_name", "=", "'dimp50_vot19'", ",", "\n", "refine_model_name", "=", "'ARcm_coco_seg'", ",", "threshold", "=", "0.15", ")", ":", "\n", "        ", "self", ".", "THRES", "=", "threshold", "\n", "'''create tracker'''", "\n", "'''DIMP'''", "\n", "tracker_info", "=", "Tracker", "(", "tracker_name", ",", "para_name", ",", "None", ")", "\n", "params", "=", "tracker_info", ".", "get_parameters", "(", ")", "\n", "params", ".", "visualization", "=", "False", "\n", "params", ".", "debug", "=", "False", "\n", "params", ".", "visdom_info", "=", "{", "'use_visdom'", ":", "False", ",", "'server'", ":", "'127.0.0.1'", ",", "'port'", ":", "8097", "}", "\n", "self", ".", "dimp", "=", "tracker_info", ".", "tracker_class", "(", "params", ")", "\n", "'''Alpha-Refine'''", "\n", "project_path", "=", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "__file__", ")", ",", "'..'", ",", "'..'", ")", "\n", "refine_root", "=", "os", ".", "path", ".", "join", "(", "project_path", ",", "'ltr/checkpoints/ltr/ARcm_seg/'", ")", "\n", "refine_path", "=", "os", ".", "path", ".", "join", "(", "refine_root", ",", "refine_model_name", ")", "\n", "'''2020.4.25 input size: 384x384'''", "\n", "self", ".", "alpha", "=", "ARcm_seg", "(", "refine_path", ",", "input_sz", "=", "384", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.dimp_alpha_seg_class.DIMP_ALPHA.initialize": [[41, 52], ["rect_from_mask", "np.array().astype", "torch.from_numpy", "dimp_alpha_seg_class.DIMP_ALPHA.dimp.initialize", "dimp_alpha_seg_class.DIMP_ALPHA.alpha.initialize", "np.array", "np.array"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.pytracking.vot20_utils.rect_from_mask", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize"], ["", "def", "initialize", "(", "self", ",", "img_RGB", ",", "mask", ")", ":", "\n", "        ", "region", "=", "rect_from_mask", "(", "mask", ")", "\n", "self", ".", "H", ",", "self", ".", "W", ",", "_", "=", "img_RGB", ".", "shape", "\n", "gt_bbox_np", "=", "np", ".", "array", "(", "region", ")", ".", "astype", "(", "np", ".", "float32", ")", "\n", "'''Initialize dimp for specific video'''", "\n", "gt_bbox_torch", "=", "torch", ".", "from_numpy", "(", "gt_bbox_np", ")", "\n", "init_info", "=", "{", "}", "\n", "init_info", "[", "'init_bbox'", "]", "=", "gt_bbox_torch", "\n", "_", "=", "self", ".", "dimp", ".", "initialize", "(", "img_RGB", ",", "init_info", ")", "\n", "'''initilize refinement module for specific video'''", "\n", "self", ".", "alpha", ".", "initialize", "(", "img_RGB", ",", "np", ".", "array", "(", "gt_bbox_np", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.dimp_alpha_seg_class.DIMP_ALPHA.track": [[53, 78], ["dimp_alpha_seg_class.DIMP_ALPHA.dimp.track", "bbox_clip", "torch.from_numpy", "torch.from_numpy", "torch.sqrt", "torch.from_numpy.clone", "dimp_alpha_seg_class.DIMP_ALPHA.alpha.get_mask", "search.astype", "np.array().astype", "np.array().astype", "np.array", "torch.from_numpy.prod", "dimp_alpha_seg_class.DIMP_ALPHA.dimp.base_target_sz.prod", "np.array", "np.array"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.track", "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.vot20_utils.bbox_clip", "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.ARcm_seg.ARcm_seg.get_mask"], ["", "def", "track", "(", "self", ",", "img_RGB", ")", ":", "\n", "        ", "'''TRACK'''", "\n", "'''base tracker'''", "\n", "outputs", "=", "self", ".", "dimp", ".", "track", "(", "img_RGB", ")", "\n", "pred_bbox", "=", "outputs", "[", "'target_bbox'", "]", "\n", "'''Step1: Post-Process'''", "\n", "x1", ",", "y1", ",", "w", ",", "h", "=", "pred_bbox", "\n", "# add boundary and min size limit", "\n", "x1", ",", "y1", ",", "x2", ",", "y2", "=", "bbox_clip", "(", "x1", ",", "y1", ",", "x1", "+", "w", ",", "y1", "+", "h", ",", "(", "self", ".", "H", ",", "self", ".", "W", ")", ")", "\n", "w", "=", "x2", "-", "x1", "\n", "h", "=", "y2", "-", "y1", "\n", "new_pos", "=", "torch", ".", "from_numpy", "(", "np", ".", "array", "(", "[", "y1", "+", "h", "/", "2", ",", "x1", "+", "w", "/", "2", "]", ")", ".", "astype", "(", "np", ".", "float32", ")", ")", "\n", "new_target_sz", "=", "torch", ".", "from_numpy", "(", "np", ".", "array", "(", "[", "h", ",", "w", "]", ")", ".", "astype", "(", "np", ".", "float32", ")", ")", "\n", "new_scale", "=", "torch", ".", "sqrt", "(", "new_target_sz", ".", "prod", "(", ")", "/", "self", ".", "dimp", ".", "base_target_sz", ".", "prod", "(", ")", ")", "\n", "##### update", "\n", "self", ".", "dimp", ".", "pos", "=", "new_pos", ".", "clone", "(", ")", "\n", "self", ".", "dimp", ".", "target_sz", "=", "new_target_sz", "\n", "self", ".", "dimp", ".", "target_scale", "=", "new_scale", "\n", "bbox_new", "=", "[", "x1", ",", "y1", ",", "w", ",", "h", "]", "\n", "'''Step2: Mask report'''", "\n", "pred_mask", ",", "search", ",", "search_mask", "=", "self", ".", "alpha", ".", "get_mask", "(", "img_RGB", ",", "np", ".", "array", "(", "bbox_new", ")", ",", "vis", "=", "True", ")", "\n", "final_mask", "=", "(", "pred_mask", ">", "self", ".", "THRES", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "search_region", "=", "search", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "search_mask", "=", "(", "search_mask", ">", "self", ".", "THRES", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "return", "bbox_new", ",", "final_mask", ",", "search_region", ",", "search_mask", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.dimp_alpha_seg_class.run_vot_exp": [[80, 155], ["torch.set_num_threads", "os.path.join", "dimp_alpha_seg_class.DIMP_ALPHA", "vot.VOT", "vot.VOT.region", "vot.VOT.frame", "cv2.cvtColor", "make_full_size", "dimp_alpha_seg_class.DIMP_ALPHA.initialize", "os.mkdir", "sys.exit", "os.path.join", "int", "os.path.join", "cv2.imread", "vot.VOT.frame", "cv2.cvtColor", "dimp_alpha_seg_class.DIMP_ALPHA.track", "vot.VOT.report", "os.path.exists", "handle.frame.split", "os.path.exists", "os.mkdir", "str", "os.path.exists", "os.makedirs", "cv2.imread", "image[].copy", "os.path.join", "cv2.imwrite", "image[].copy.copy", "cv2.rectangle", "image_name.replace", "os.path.join", "cv2.imwrite", "search[].copy", "image_name.replace", "os.path.join", "cv2.imwrite", "search[].copy.astype", "cv2.findContours", "cv2.drawContours", "search_bgr_m.clip().astype.clip().astype", "image_name.replace", "os.path.join", "cv2.imwrite", "image[].copy.copy().astype", "cv2.findContours", "cv2.drawContours", "image_m.clip().astype.clip().astype", "image_name.replace", "os.path.join", "cv2.imwrite", "time.time", "handle.frame.split", "int", "int", "int", "int", "search_bgr_m.clip().astype.clip", "image[].copy.copy", "image_m.clip().astype.clip"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.region", "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.frame", "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.vot20_utils.make_full_size", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize", "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.frame", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.track", "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.report", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy"], ["", "", "def", "run_vot_exp", "(", "tracker_name", ",", "para_name", ",", "refine_model_name", ",", "threshold", ",", "VIS", "=", "False", ")", ":", "\n", "    ", "torch", ".", "set_num_threads", "(", "1", ")", "\n", "# torch.cuda.set_device(CUDA_ID)  # set GPU id", "\n", "save_root", "=", "os", ".", "path", ".", "join", "(", "'<SAVE_DIR>'", ",", "para_name", ")", "\n", "if", "VIS", "and", "(", "not", "os", ".", "path", ".", "exists", "(", "save_root", ")", ")", ":", "\n", "        ", "os", ".", "mkdir", "(", "save_root", ")", "\n", "", "tracker", "=", "DIMP_ALPHA", "(", "tracker_name", "=", "tracker_name", ",", "para_name", "=", "para_name", ",", "\n", "refine_model_name", "=", "refine_model_name", ",", "threshold", "=", "threshold", ")", "\n", "handle", "=", "vot", ".", "VOT", "(", "\"mask\"", ")", "\n", "selection", "=", "handle", ".", "region", "(", ")", "\n", "imagefile", "=", "handle", ".", "frame", "(", ")", "\n", "if", "not", "imagefile", ":", "\n", "        ", "sys", ".", "exit", "(", "0", ")", "\n", "", "if", "VIS", ":", "\n", "        ", "'''for vis'''", "\n", "seq_name", "=", "imagefile", ".", "split", "(", "'/'", ")", "[", "-", "3", "]", "\n", "save_v_dir", "=", "os", ".", "path", ".", "join", "(", "save_root", ",", "seq_name", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "save_v_dir", ")", ":", "\n", "            ", "os", ".", "mkdir", "(", "save_v_dir", ")", "\n", "", "cur_time", "=", "int", "(", "time", ".", "time", "(", ")", "%", "10000", ")", "\n", "save_dir", "=", "os", ".", "path", ".", "join", "(", "save_v_dir", ",", "str", "(", "cur_time", ")", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "save_dir", ")", ":", "\n", "            ", "os", ".", "makedirs", "(", "save_dir", ")", "\n", "\n", "", "", "image", "=", "cv2", ".", "cvtColor", "(", "cv2", ".", "imread", "(", "imagefile", ")", ",", "cv2", ".", "COLOR_BGR2RGB", ")", "# Right", "\n", "# mask given by the toolkit ends with the target (zero-padding to the right and down is needed)", "\n", "mask", "=", "make_full_size", "(", "selection", ",", "(", "image", ".", "shape", "[", "1", "]", ",", "image", ".", "shape", "[", "0", "]", ")", ")", "\n", "tracker", ".", "initialize", "(", "image", ",", "mask", ")", "\n", "\n", "while", "True", ":", "\n", "        ", "imagefile", "=", "handle", ".", "frame", "(", ")", "\n", "if", "not", "imagefile", ":", "\n", "            ", "break", "\n", "", "image", "=", "cv2", ".", "cvtColor", "(", "cv2", ".", "imread", "(", "imagefile", ")", ",", "cv2", ".", "COLOR_BGR2RGB", ")", "# Right", "\n", "b1", ",", "m", ",", "search", ",", "search_m", "=", "tracker", ".", "track", "(", "image", ")", "\n", "handle", ".", "report", "(", "m", ")", "\n", "if", "VIS", ":", "\n", "            ", "'''Visualization'''", "\n", "# original image", "\n", "image_ori", "=", "image", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", ".", "copy", "(", ")", "# RGB --> BGR", "\n", "image_name", "=", "imagefile", ".", "split", "(", "'/'", ")", "[", "-", "1", "]", "\n", "save_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "image_name", ")", "\n", "cv2", ".", "imwrite", "(", "save_path", ",", "image_ori", ")", "\n", "# dimp box", "\n", "image_b", "=", "image_ori", ".", "copy", "(", ")", "\n", "cv2", ".", "rectangle", "(", "image_b", ",", "(", "int", "(", "b1", "[", "0", "]", ")", ",", "int", "(", "b1", "[", "1", "]", ")", ")", ",", "\n", "(", "int", "(", "b1", "[", "0", "]", "+", "b1", "[", "2", "]", ")", ",", "int", "(", "b1", "[", "1", "]", "+", "b1", "[", "3", "]", ")", ")", ",", "(", "0", ",", "0", ",", "255", ")", ",", "2", ")", "\n", "image_b_name", "=", "image_name", ".", "replace", "(", "'.jpg'", ",", "'_bbox.jpg'", ")", "\n", "save_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "image_b_name", ")", "\n", "cv2", ".", "imwrite", "(", "save_path", ",", "image_b", ")", "\n", "# search region", "\n", "search_bgr", "=", "search", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", ".", "copy", "(", ")", "\n", "search_name", "=", "image_name", ".", "replace", "(", "'.jpg'", ",", "'_search.jpg'", ")", "\n", "save_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "search_name", ")", "\n", "cv2", ".", "imwrite", "(", "save_path", ",", "search_bgr", ")", "\n", "# search region mask", "\n", "search_bgr_m", "=", "search_bgr", ".", "astype", "(", "np", ".", "float32", ")", "\n", "search_bgr_m", "[", ":", ",", ":", ",", "1", "]", "+=", "127.0", "*", "search_m", "\n", "search_bgr_m", "[", ":", ",", ":", ",", "2", "]", "+=", "127.0", "*", "search_m", "\n", "contours", ",", "_", "=", "cv2", ".", "findContours", "(", "search_m", ",", "cv2", ".", "RETR_TREE", ",", "cv2", ".", "CHAIN_APPROX_SIMPLE", ")", "\n", "search_bgr_m", "=", "cv2", ".", "drawContours", "(", "search_bgr_m", ",", "contours", ",", "-", "1", ",", "(", "0", ",", "255", ",", "255", ")", ",", "4", ")", "\n", "search_bgr_m", "=", "search_bgr_m", ".", "clip", "(", "0", ",", "255", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "search_name_m", "=", "image_name", ".", "replace", "(", "'.jpg'", ",", "'_search_mask.jpg'", ")", "\n", "save_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "search_name_m", ")", "\n", "cv2", ".", "imwrite", "(", "save_path", ",", "search_bgr_m", ")", "\n", "# original image + mask", "\n", "image_m", "=", "image_ori", ".", "copy", "(", ")", ".", "astype", "(", "np", ".", "float32", ")", "\n", "image_m", "[", ":", ",", ":", ",", "1", "]", "+=", "127.0", "*", "m", "\n", "image_m", "[", ":", ",", ":", ",", "2", "]", "+=", "127.0", "*", "m", "\n", "contours", ",", "_", "=", "cv2", ".", "findContours", "(", "m", ",", "cv2", ".", "RETR_TREE", ",", "cv2", ".", "CHAIN_APPROX_SIMPLE", ")", "\n", "image_m", "=", "cv2", ".", "drawContours", "(", "image_m", ",", "contours", ",", "-", "1", ",", "(", "0", ",", "255", ",", "255", ")", ",", "2", ")", "\n", "image_m", "=", "image_m", ".", "clip", "(", "0", ",", "255", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "image_mask_name_m", "=", "image_name", ".", "replace", "(", "'.jpg'", ",", "'_mask.jpg'", ")", "\n", "save_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "image_mask_name_m", ")", "\n", "cv2", ".", "imwrite", "(", "save_path", ",", "image_m", ")", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.stark_alpha_seg_class.STARK_ALPHA_SEG.__init__": [[18, 35], ["lib.test.evaluation.Tracker", "lib.test.evaluation.Tracker.get_parameters", "lib.test.evaluation.Tracker.create_tracker", "os.path.join", "os.path.join", "os.path.join", "pytracking.ARcm_seg.ARcm_seg", "os.path.dirname"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.Tracker.get_parameters", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.multi_object_wrapper.MultiObjectWrapper.create_tracker"], ["    ", "def", "__init__", "(", "self", ",", "tracker_name", "=", "'stark_s'", ",", "para_name", "=", "'baseline'", ",", "\n", "refine_model_name", "=", "'ARcm_coco_seg'", ",", "threshold", "=", "0.15", ")", ":", "\n", "        ", "self", ".", "THRES", "=", "threshold", "\n", "'''create tracker'''", "\n", "'''STARK'''", "\n", "tracker_info", "=", "Tracker", "(", "tracker_name", ",", "para_name", ",", "\"vot20\"", ",", "None", ")", "\n", "params", "=", "tracker_info", ".", "get_parameters", "(", ")", "\n", "params", ".", "visualization", "=", "False", "\n", "params", ".", "debug", "=", "False", "\n", "params", ".", "visdom_info", "=", "{", "'use_visdom'", ":", "False", ",", "'server'", ":", "'127.0.0.1'", ",", "'port'", ":", "8097", "}", "\n", "self", ".", "stark", "=", "tracker_info", ".", "create_tracker", "(", "params", ")", "\n", "'''Alpha-Refine'''", "\n", "project_path", "=", "os", ".", "path", ".", "join", "(", "os", ".", "path", ".", "dirname", "(", "__file__", ")", ",", "'..'", ",", "'..'", ")", "\n", "refine_root", "=", "os", ".", "path", ".", "join", "(", "project_path", ",", "'ltr/checkpoints/ltr/ARcm_seg/'", ")", "\n", "refine_path", "=", "os", ".", "path", ".", "join", "(", "refine_root", ",", "refine_model_name", ")", "\n", "'''2020.4.25 input size: 384x384'''", "\n", "self", ".", "alpha", "=", "ARcm_seg", "(", "refine_path", ",", "input_sz", "=", "384", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.stark_alpha_seg_class.STARK_ALPHA_SEG.initialize": [[36, 45], ["rect_from_mask", "np.array().astype", "stark_alpha_seg_class.STARK_ALPHA_SEG.stark.initialize", "stark_alpha_seg_class.STARK_ALPHA_SEG.alpha.initialize", "list", "np.array", "np.array"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.pytracking.vot20_utils.rect_from_mask", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "initialize", "(", "self", ",", "img_RGB", ",", "mask", ")", ":", "\n", "        ", "region", "=", "rect_from_mask", "(", "mask", ")", "\n", "self", ".", "H", ",", "self", ".", "W", ",", "_", "=", "img_RGB", ".", "shape", "\n", "gt_bbox_np", "=", "np", ".", "array", "(", "region", ")", ".", "astype", "(", "np", ".", "float32", ")", "\n", "'''Initialize STARK for specific video'''", "\n", "init_info", "=", "{", "'init_bbox'", ":", "list", "(", "gt_bbox_np", ")", "}", "\n", "_", "=", "self", ".", "stark", ".", "initialize", "(", "img_RGB", ",", "init_info", ")", "\n", "'''initilize refinement module for specific video'''", "\n", "self", ".", "alpha", ".", "initialize", "(", "img_RGB", ",", "np", ".", "array", "(", "gt_bbox_np", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.stark_alpha_seg_class.STARK_ALPHA_SEG.track": [[46, 57], ["stark_alpha_seg_class.STARK_ALPHA_SEG.stark.track", "stark_alpha_seg_class.STARK_ALPHA_SEG.alpha.get_mask", "search.astype", "np.array"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.track", "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.ARcm_seg.ARcm_seg.get_mask"], ["", "def", "track", "(", "self", ",", "img_RGB", ")", ":", "\n", "        ", "'''TRACK'''", "\n", "'''base tracker'''", "\n", "outputs", "=", "self", ".", "stark", ".", "track", "(", "img_RGB", ")", "\n", "pred_bbox", "=", "outputs", "[", "'target_bbox'", "]", "\n", "'''Step2: Mask report'''", "\n", "pred_mask", ",", "search", ",", "search_mask", "=", "self", ".", "alpha", ".", "get_mask", "(", "img_RGB", ",", "np", ".", "array", "(", "pred_bbox", ")", ",", "vis", "=", "True", ")", "\n", "final_mask", "=", "(", "pred_mask", ">", "self", ".", "THRES", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "search_region", "=", "search", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "search_mask", "=", "(", "search_mask", ">", "self", ".", "THRES", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "return", "pred_bbox", ",", "final_mask", ",", "search_region", ",", "search_mask", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.stark_alpha_seg_class.run_vot_exp": [[59, 134], ["torch.set_num_threads", "os.path.join", "stark_alpha_seg_class.STARK_ALPHA_SEG", "vot.VOT", "vot.VOT.region", "vot.VOT.frame", "cv2.cvtColor", "make_full_size", "stark_alpha_seg_class.STARK_ALPHA_SEG.initialize", "os.makedirs", "sys.exit", "os.path.join", "int", "os.path.join", "cv2.imread", "vot.VOT.frame", "cv2.cvtColor", "stark_alpha_seg_class.STARK_ALPHA_SEG.track", "vot.VOT.report", "os.path.exists", "handle.frame.split", "os.path.exists", "os.mkdir", "str", "os.path.exists", "os.makedirs", "cv2.imread", "image[].copy", "os.path.join", "cv2.imwrite", "image[].copy.copy", "cv2.rectangle", "image_name.replace", "os.path.join", "cv2.imwrite", "search[].copy", "image_name.replace", "os.path.join", "cv2.imwrite", "search[].copy.astype", "cv2.findContours", "cv2.drawContours", "search_bgr_m.clip().astype.clip().astype", "image_name.replace", "os.path.join", "cv2.imwrite", "image[].copy.copy().astype", "cv2.findContours", "cv2.drawContours", "image_m.clip().astype.clip().astype", "image_name.replace", "os.path.join", "cv2.imwrite", "time.time", "handle.frame.split", "int", "int", "int", "int", "search_bgr_m.clip().astype.clip", "image[].copy.copy", "image_m.clip().astype.clip"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.region", "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.frame", "home.repos.pwc.inspect_result.researchmm_Stark.pytracking.vot20_utils.make_full_size", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize", "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.frame", "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.track", "home.repos.pwc.inspect_result.researchmm_Stark.VOT2020_super_only_mask_384_HP.vot.VOT.report", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy"], ["", "", "def", "run_vot_exp", "(", "tracker_name", ",", "para_name", ",", "refine_model_name", ",", "threshold", ",", "VIS", "=", "False", ")", ":", "\n", "    ", "torch", ".", "set_num_threads", "(", "1", ")", "\n", "# torch.cuda.set_device(CUDA_ID)  # set GPU id", "\n", "save_root", "=", "os", ".", "path", ".", "join", "(", "'<SAVE_DIR>'", ",", "para_name", ")", "\n", "if", "VIS", "and", "(", "not", "os", ".", "path", ".", "exists", "(", "save_root", ")", ")", ":", "\n", "        ", "os", ".", "makedirs", "(", "save_root", ")", "\n", "", "tracker", "=", "STARK_ALPHA_SEG", "(", "tracker_name", "=", "tracker_name", ",", "para_name", "=", "para_name", ",", "\n", "refine_model_name", "=", "refine_model_name", ",", "threshold", "=", "threshold", ")", "\n", "handle", "=", "vot", ".", "VOT", "(", "\"mask\"", ")", "\n", "selection", "=", "handle", ".", "region", "(", ")", "\n", "imagefile", "=", "handle", ".", "frame", "(", ")", "\n", "if", "not", "imagefile", ":", "\n", "        ", "sys", ".", "exit", "(", "0", ")", "\n", "", "if", "VIS", ":", "\n", "        ", "'''for vis'''", "\n", "seq_name", "=", "imagefile", ".", "split", "(", "'/'", ")", "[", "-", "3", "]", "\n", "save_v_dir", "=", "os", ".", "path", ".", "join", "(", "save_root", ",", "seq_name", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "save_v_dir", ")", ":", "\n", "            ", "os", ".", "mkdir", "(", "save_v_dir", ")", "\n", "", "cur_time", "=", "int", "(", "time", ".", "time", "(", ")", "%", "10000", ")", "\n", "save_dir", "=", "os", ".", "path", ".", "join", "(", "save_v_dir", ",", "str", "(", "cur_time", ")", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "save_dir", ")", ":", "\n", "            ", "os", ".", "makedirs", "(", "save_dir", ")", "\n", "\n", "", "", "image", "=", "cv2", ".", "cvtColor", "(", "cv2", ".", "imread", "(", "imagefile", ")", ",", "cv2", ".", "COLOR_BGR2RGB", ")", "# Right", "\n", "# mask given by the toolkit ends with the target (zero-padding to the right and down is needed)", "\n", "mask", "=", "make_full_size", "(", "selection", ",", "(", "image", ".", "shape", "[", "1", "]", ",", "image", ".", "shape", "[", "0", "]", ")", ")", "\n", "tracker", ".", "initialize", "(", "image", ",", "mask", ")", "\n", "\n", "while", "True", ":", "\n", "        ", "imagefile", "=", "handle", ".", "frame", "(", ")", "\n", "if", "not", "imagefile", ":", "\n", "            ", "break", "\n", "", "image", "=", "cv2", ".", "cvtColor", "(", "cv2", ".", "imread", "(", "imagefile", ")", ",", "cv2", ".", "COLOR_BGR2RGB", ")", "# Right", "\n", "b1", ",", "m", ",", "search", ",", "search_m", "=", "tracker", ".", "track", "(", "image", ")", "\n", "handle", ".", "report", "(", "m", ")", "\n", "if", "VIS", ":", "\n", "            ", "'''Visualization'''", "\n", "# original image", "\n", "image_ori", "=", "image", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", ".", "copy", "(", ")", "# RGB --> BGR", "\n", "image_name", "=", "imagefile", ".", "split", "(", "'/'", ")", "[", "-", "1", "]", "\n", "save_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "image_name", ")", "\n", "cv2", ".", "imwrite", "(", "save_path", ",", "image_ori", ")", "\n", "# dimp box", "\n", "image_b", "=", "image_ori", ".", "copy", "(", ")", "\n", "cv2", ".", "rectangle", "(", "image_b", ",", "(", "int", "(", "b1", "[", "0", "]", ")", ",", "int", "(", "b1", "[", "1", "]", ")", ")", ",", "\n", "(", "int", "(", "b1", "[", "0", "]", "+", "b1", "[", "2", "]", ")", ",", "int", "(", "b1", "[", "1", "]", "+", "b1", "[", "3", "]", ")", ")", ",", "(", "0", ",", "0", ",", "255", ")", ",", "2", ")", "\n", "image_b_name", "=", "image_name", ".", "replace", "(", "'.jpg'", ",", "'_bbox.jpg'", ")", "\n", "save_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "image_b_name", ")", "\n", "cv2", ".", "imwrite", "(", "save_path", ",", "image_b", ")", "\n", "# search region", "\n", "search_bgr", "=", "search", "[", ":", ",", ":", ",", ":", ":", "-", "1", "]", ".", "copy", "(", ")", "\n", "search_name", "=", "image_name", ".", "replace", "(", "'.jpg'", ",", "'_search.jpg'", ")", "\n", "save_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "search_name", ")", "\n", "cv2", ".", "imwrite", "(", "save_path", ",", "search_bgr", ")", "\n", "# search region mask", "\n", "search_bgr_m", "=", "search_bgr", ".", "astype", "(", "np", ".", "float32", ")", "\n", "search_bgr_m", "[", ":", ",", ":", ",", "1", "]", "+=", "127.0", "*", "search_m", "\n", "search_bgr_m", "[", ":", ",", ":", ",", "2", "]", "+=", "127.0", "*", "search_m", "\n", "contours", ",", "_", "=", "cv2", ".", "findContours", "(", "search_m", ",", "cv2", ".", "RETR_TREE", ",", "cv2", ".", "CHAIN_APPROX_SIMPLE", ")", "\n", "search_bgr_m", "=", "cv2", ".", "drawContours", "(", "search_bgr_m", ",", "contours", ",", "-", "1", ",", "(", "0", ",", "255", ",", "255", ")", ",", "4", ")", "\n", "search_bgr_m", "=", "search_bgr_m", ".", "clip", "(", "0", ",", "255", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "search_name_m", "=", "image_name", ".", "replace", "(", "'.jpg'", ",", "'_search_mask.jpg'", ")", "\n", "save_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "search_name_m", ")", "\n", "cv2", ".", "imwrite", "(", "save_path", ",", "search_bgr_m", ")", "\n", "# original image + mask", "\n", "image_m", "=", "image_ori", ".", "copy", "(", ")", ".", "astype", "(", "np", ".", "float32", ")", "\n", "image_m", "[", ":", ",", ":", ",", "1", "]", "+=", "127.0", "*", "m", "\n", "image_m", "[", ":", ",", ":", ",", "2", "]", "+=", "127.0", "*", "m", "\n", "contours", ",", "_", "=", "cv2", ".", "findContours", "(", "m", ",", "cv2", ".", "RETR_TREE", ",", "cv2", ".", "CHAIN_APPROX_SIMPLE", ")", "\n", "image_m", "=", "cv2", ".", "drawContours", "(", "image_m", ",", "contours", ",", "-", "1", ",", "(", "0", ",", "255", ",", "255", ")", ",", "2", ")", "\n", "image_m", "=", "image_m", ".", "clip", "(", "0", ",", "255", ")", ".", "astype", "(", "np", ".", "uint8", ")", "\n", "image_mask_name_m", "=", "image_name", ".", "replace", "(", "'.jpg'", ",", "'_mask.jpg'", ")", "\n", "save_path", "=", "os", ".", "path", ".", "join", "(", "save_dir", ",", "image_mask_name_m", ")", "\n", "cv2", ".", "imwrite", "(", "save_path", ",", "image_m", ")", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.experiments.myexperiments.atom_nfs_uav": [[4, 10], ["pytracking.evaluation.trackerlist", "pytracking.evaluation.get_dataset", "range"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.trackerlist", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.datasets.get_dataset"], ["def", "atom_nfs_uav", "(", ")", ":", "\n", "# Run three runs of ATOM on NFS and UAV datasets", "\n", "    ", "trackers", "=", "trackerlist", "(", "'atom'", ",", "'default'", ",", "range", "(", "3", ")", ")", "\n", "\n", "dataset", "=", "get_dataset", "(", "'nfs'", ",", "'uav'", ")", "\n", "return", "trackers", ",", "dataset", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.experiments.myexperiments.uav_test": [[12, 20], ["pytracking.evaluation.get_dataset", "pytracking.evaluation.trackerlist", "pytracking.evaluation.trackerlist", "pytracking.evaluation.trackerlist", "range", "range", "range"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.datasets.get_dataset", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.trackerlist", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.trackerlist", "home.repos.pwc.inspect_result.researchmm_Stark.evaluation.tracker.trackerlist"], ["", "def", "uav_test", "(", ")", ":", "\n", "# Run DiMP18, ATOM and ECO on the UAV dataset", "\n", "    ", "trackers", "=", "trackerlist", "(", "'dimp'", ",", "'dimp18'", ",", "range", "(", "1", ")", ")", "+", "trackerlist", "(", "'atom'", ",", "'default'", ",", "range", "(", "1", ")", ")", "+", "trackerlist", "(", "'eco'", ",", "'default'", ",", "range", "(", "1", ")", ")", "\n", "\n", "dataset", "=", "get_dataset", "(", "'uav'", ")", "\n", "return", "trackers", ",", "dataset", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWrapper.__init__": [[9, 16], ["net_wrappers.NetWrapper.initialize"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize"], ["def", "__init__", "(", "self", ",", "net_path", ",", "use_gpu", "=", "True", ",", "initialize", "=", "False", ",", "**", "kwargs", ")", ":", "\n", "        ", "self", ".", "net_path", "=", "net_path", "\n", "self", ".", "use_gpu", "=", "use_gpu", "\n", "self", ".", "net", "=", "None", "\n", "self", ".", "net_kwargs", "=", "kwargs", "\n", "if", "initialize", ":", "\n", "            ", "self", ".", "initialize", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWrapper.__getattr__": [[17, 29], ["getattr"], "methods", ["None"], ["", "", "def", "__getattr__", "(", "self", ",", "name", ")", ":", "\n", "        ", "if", "self", ".", "_rec_iter", ">", "0", ":", "\n", "            ", "self", ".", "_rec_iter", "=", "0", "\n", "return", "None", "\n", "", "self", ".", "_rec_iter", "+=", "1", "\n", "try", ":", "\n", "            ", "ret_val", "=", "getattr", "(", "self", ".", "net", ",", "name", ")", "\n", "", "except", "Exception", "as", "e", ":", "\n", "            ", "self", ".", "_rec_iter", "=", "0", "\n", "raise", "e", "\n", "", "self", ".", "_rec_iter", "=", "0", "\n", "return", "ret_val", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWrapper.load_network": [[30, 35], ["pytracking.utils.loading.load_network", "net_wrappers.NetWrapper.eval", "net_wrappers.NetWrapper.cuda"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWrapper.load_network", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.eval"], ["", "def", "load_network", "(", "self", ")", ":", "\n", "        ", "self", ".", "net", "=", "load_network", "(", "self", ".", "net_path", ",", "**", "self", ".", "net_kwargs", ")", "\n", "if", "self", ".", "use_gpu", ":", "\n", "            ", "self", ".", "cuda", "(", ")", "\n", "", "self", ".", "eval", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWrapper.initialize": [[36, 38], ["net_wrappers.NetWrapper.load_network"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWrapper.load_network"], ["", "def", "initialize", "(", "self", ")", ":", "\n", "        ", "self", ".", "load_network", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWithBackbone.__init__": [[44, 51], ["net_wrappers.NetWrapper.__init__", "torch.Tensor().view", "torch.Tensor().view", "torch.Tensor", "torch.Tensor"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "net_path", ",", "use_gpu", "=", "True", ",", "initialize", "=", "False", ",", "image_format", "=", "'rgb'", ",", "\n", "mean", "=", "(", "0.485", ",", "0.456", ",", "0.406", ")", ",", "std", "=", "(", "0.229", ",", "0.224", ",", "0.225", ")", ",", "**", "kwargs", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "net_path", ",", "use_gpu", ",", "initialize", ",", "**", "kwargs", ")", "\n", "\n", "self", ".", "image_format", "=", "image_format", "\n", "self", ".", "_mean", "=", "torch", ".", "Tensor", "(", "mean", ")", ".", "view", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "self", ".", "_std", "=", "torch", ".", "Tensor", "(", "std", ")", ".", "view", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWithBackbone.initialize": [[52, 54], ["net_wrappers.NetWrapper.initialize"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize"], ["", "def", "initialize", "(", "self", ",", "image_format", "=", "'rgb'", ",", "mean", "=", "(", "0.485", ",", "0.456", ",", "0.406", ")", ",", "std", "=", "(", "0.229", ",", "0.224", ",", "0.225", ")", ")", ":", "\n", "        ", "super", "(", ")", ".", "initialize", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWithBackbone.preprocess_image": [[55, 70], ["im.cuda.cuda.cuda"], "methods", ["None"], ["", "def", "preprocess_image", "(", "self", ",", "im", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "\"\"\"Normalize the image with the mean and standard deviation used by the network.\"\"\"", "\n", "\n", "if", "self", ".", "image_format", "in", "[", "'rgb'", ",", "'bgr'", "]", ":", "\n", "            ", "im", "=", "im", "/", "255", "\n", "\n", "", "if", "self", ".", "image_format", "in", "[", "'bgr'", ",", "'bgr255'", "]", ":", "\n", "            ", "im", "=", "im", "[", ":", ",", "[", "2", ",", "1", ",", "0", "]", ",", ":", ",", ":", "]", "\n", "", "im", "-=", "self", ".", "_mean", "\n", "im", "/=", "self", ".", "_std", "\n", "\n", "if", "self", ".", "use_gpu", ":", "\n", "            ", "im", "=", "im", ".", "cuda", "(", ")", "\n", "\n", "", "return", "im", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWithBackbone.extract_backbone": [[71, 76], ["net_wrappers.NetWithBackbone.preprocess_image", "net_wrappers.NetWithBackbone.net.extract_backbone_features"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWithBackbone.preprocess_image", "home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.extract_backbone_features"], ["", "def", "extract_backbone", "(", "self", ",", "im", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "\"\"\"Extract backbone features from the network.\n        Expects a float tensor image with pixel range [0, 255].\"\"\"", "\n", "im", "=", "self", ".", "preprocess_image", "(", "im", ")", "\n", "return", "self", ".", "net", ".", "extract_backbone_features", "(", "im", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.features.featurebase.FeatureBase.__init__": [[16, 23], ["None"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "fparams", "=", "None", ",", "pool_stride", "=", "None", ",", "output_size", "=", "None", ",", "normalize_power", "=", "None", ",", "use_for_color", "=", "True", ",", "use_for_gray", "=", "True", ")", ":", "\n", "        ", "self", ".", "fparams", "=", "fparams", "\n", "self", ".", "pool_stride", "=", "1", "if", "pool_stride", "is", "None", "else", "pool_stride", "\n", "self", ".", "output_size", "=", "output_size", "\n", "self", ".", "normalize_power", "=", "normalize_power", "\n", "self", ".", "use_for_color", "=", "use_for_color", "\n", "self", ".", "use_for_gray", "=", "use_for_gray", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.featurebase.FeatureBase.initialize": [[24, 26], ["None"], "methods", ["None"], ["", "def", "initialize", "(", "self", ")", ":", "\n", "        ", "pass", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.featurebase.FeatureBase.dim": [[27, 29], ["None"], "methods", ["None"], ["", "def", "dim", "(", "self", ")", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.featurebase.FeatureBase.stride": [[30, 32], ["None"], "methods", ["None"], ["", "def", "stride", "(", "self", ")", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.featurebase.FeatureBase.size": [[33, 39], ["isinstance", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "featurebase.FeatureBase.stride"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.stride"], ["", "def", "size", "(", "self", ",", "im_sz", ")", ":", "\n", "        ", "if", "self", ".", "output_size", "is", "None", ":", "\n", "            ", "return", "im_sz", "//", "self", ".", "stride", "(", ")", "\n", "", "if", "isinstance", "(", "im_sz", ",", "torch", ".", "Tensor", ")", ":", "\n", "            ", "return", "torch", ".", "Tensor", "(", "[", "self", ".", "output_size", "[", "0", "]", ",", "self", ".", "output_size", "[", "1", "]", "]", ")", "\n", "", "return", "self", ".", "output_size", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.featurebase.FeatureBase.extract": [[40, 43], ["None"], "methods", ["None"], ["", "def", "extract", "(", "self", ",", "im", ")", ":", "\n", "        ", "\"\"\"Performs feature extraction.\"\"\"", "\n", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.featurebase.FeatureBase.get_feature": [[44, 70], ["featurebase.FeatureBase.extract", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.adaptive_avg_pool2d", "torch.adaptive_avg_pool2d", "torch.avg_pool2d", "torch.avg_pool2d", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.avg_pool2d.abs().view", "torch.avg_pool2d.abs"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.extract", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs"], ["", "def", "get_feature", "(", "self", ",", "im", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "\"\"\"Get the feature. Generally, call this function.\n        args:\n            im: image patch as a torch.Tensor.\n        \"\"\"", "\n", "\n", "# Return empty tensor if it should not be used", "\n", "is_color", "=", "im", ".", "shape", "[", "1", "]", "==", "3", "\n", "if", "is_color", "and", "not", "self", ".", "use_for_color", "or", "not", "is_color", "and", "not", "self", ".", "use_for_gray", ":", "\n", "            ", "return", "torch", ".", "Tensor", "(", "[", "]", ")", "\n", "\n", "# Extract feature", "\n", "", "feat", "=", "self", ".", "extract", "(", "im", ")", "\n", "\n", "# Pool/downsample", "\n", "if", "self", ".", "output_size", "is", "not", "None", ":", "\n", "            ", "feat", "=", "F", ".", "adaptive_avg_pool2d", "(", "feat", ",", "self", ".", "output_size", ")", "\n", "", "elif", "self", ".", "pool_stride", "!=", "1", ":", "\n", "            ", "feat", "=", "F", ".", "avg_pool2d", "(", "feat", ",", "self", ".", "pool_stride", ",", "self", ".", "pool_stride", ")", "\n", "\n", "# Normalize", "\n", "", "if", "self", ".", "normalize_power", "is", "not", "None", ":", "\n", "            ", "feat", "/=", "(", "torch", ".", "sum", "(", "feat", ".", "abs", "(", ")", ".", "view", "(", "feat", ".", "shape", "[", "0", "]", ",", "1", ",", "1", ",", "-", "1", ")", "**", "self", ".", "normalize_power", ",", "dim", "=", "3", ",", "keepdim", "=", "True", ")", "/", "\n", "(", "feat", ".", "shape", "[", "1", "]", "*", "feat", ".", "shape", "[", "2", "]", "*", "feat", ".", "shape", "[", "3", "]", ")", "+", "1e-10", ")", "**", "(", "1", "/", "self", ".", "normalize_power", ")", "\n", "\n", "", "return", "feat", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.featurebase.MultiFeatureBase.size": [[76, 81], ["isinstance", "pytracking.TensorList", "pytracking.TensorList", "featurebase.MultiFeatureBase.stride", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "zip", "featurebase.MultiFeatureBase.stride"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.stride", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.stride"], ["def", "size", "(", "self", ",", "im_sz", ")", ":", "\n", "        ", "if", "self", ".", "output_size", "is", "None", ":", "\n", "            ", "return", "TensorList", "(", "[", "im_sz", "//", "s", "for", "s", "in", "self", ".", "stride", "(", ")", "]", ")", "\n", "", "if", "isinstance", "(", "im_sz", ",", "torch", ".", "Tensor", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "im_sz", "//", "s", "if", "sz", "is", "None", "else", "torch", ".", "Tensor", "(", "[", "sz", "[", "0", "]", ",", "sz", "[", "1", "]", "]", ")", "for", "sz", ",", "s", "in", "zip", "(", "self", ".", "output_size", ",", "self", ".", "stride", "(", ")", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.featurebase.MultiFeatureBase.get_feature": [[82, 111], ["featurebase.MultiFeatureBase.extract", "enumerate", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "zip", "len", "torch.adaptive_avg_pool2d", "torch.adaptive_avg_pool2d", "torch.avg_pool2d", "torch.avg_pool2d", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "feat.abs().view", "feat.abs"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.extract", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs"], ["", "", "def", "get_feature", "(", "self", ",", "im", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "\"\"\"Get the feature. Generally, call this function.\n        args:\n            im: image patch as a torch.Tensor.\n        \"\"\"", "\n", "\n", "# Return empty tensor if it should not be used", "\n", "is_color", "=", "im", ".", "shape", "[", "1", "]", "==", "3", "\n", "if", "is_color", "and", "not", "self", ".", "use_for_color", "or", "not", "is_color", "and", "not", "self", ".", "use_for_gray", ":", "\n", "            ", "return", "torch", ".", "Tensor", "(", "[", "]", ")", "\n", "\n", "", "feat_list", "=", "self", ".", "extract", "(", "im", ")", "\n", "\n", "output_sz", "=", "[", "None", "]", "*", "len", "(", "feat_list", ")", "if", "self", ".", "output_size", "is", "None", "else", "self", ".", "output_size", "\n", "\n", "# Pool/downsample", "\n", "for", "i", ",", "(", "sz", ",", "s", ")", "in", "enumerate", "(", "zip", "(", "output_sz", ",", "self", ".", "pool_stride", ")", ")", ":", "\n", "            ", "if", "sz", "is", "not", "None", ":", "\n", "                ", "feat_list", "[", "i", "]", "=", "F", ".", "adaptive_avg_pool2d", "(", "feat_list", "[", "i", "]", ",", "sz", ")", "\n", "", "elif", "s", "!=", "1", ":", "\n", "                ", "feat_list", "[", "i", "]", "=", "F", ".", "avg_pool2d", "(", "feat_list", "[", "i", "]", ",", "s", ",", "s", ")", "\n", "\n", "# Normalize", "\n", "", "", "if", "self", ".", "normalize_power", "is", "not", "None", ":", "\n", "            ", "for", "feat", "in", "feat_list", ":", "\n", "                ", "feat", "/=", "(", "torch", ".", "sum", "(", "feat", ".", "abs", "(", ")", ".", "view", "(", "feat", ".", "shape", "[", "0", "]", ",", "1", ",", "1", ",", "-", "1", ")", "**", "self", ".", "normalize_power", ",", "dim", "=", "3", ",", "keepdim", "=", "True", ")", "/", "\n", "(", "feat", ".", "shape", "[", "1", "]", "*", "feat", ".", "shape", "[", "2", "]", "*", "feat", ".", "shape", "[", "3", "]", ")", "+", "1e-10", ")", "**", "(", "1", "/", "self", ".", "normalize_power", ")", "\n", "\n", "", "", "return", "feat_list", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.ExtractorBase.__init__": [[10, 12], ["None"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "features", ")", ":", "\n", "        ", "self", ".", "features", "=", "features", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.ExtractorBase.initialize": [[13, 16], ["f.initialize"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize"], ["", "def", "initialize", "(", "self", ")", ":", "\n", "        ", "for", "f", "in", "self", ".", "features", ":", "\n", "            ", "f", ".", "initialize", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.SingleResolutionExtractor.__init__": [[23, 29], ["extractor.ExtractorBase.__init__", "extractor.SingleResolutionExtractor.features[].stride", "isinstance"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.stride"], ["def", "__init__", "(", "self", ",", "features", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "features", ")", "\n", "\n", "self", ".", "feature_stride", "=", "self", ".", "features", "[", "0", "]", ".", "stride", "(", ")", "\n", "if", "isinstance", "(", "self", ".", "feature_stride", ",", "(", "list", ",", "TensorList", ")", ")", ":", "\n", "            ", "self", ".", "feature_stride", "=", "self", ".", "feature_stride", "[", "0", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.SingleResolutionExtractor.stride": [[30, 32], ["None"], "methods", ["None"], ["", "", "def", "stride", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "feature_stride", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.SingleResolutionExtractor.size": [[33, 35], ["extractor.SingleResolutionExtractor.stride"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.stride"], ["", "def", "size", "(", "self", ",", "input_sz", ")", ":", "\n", "        ", "return", "input_sz", "//", "self", ".", "stride", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.SingleResolutionExtractor.extract": [[36, 47], ["isinstance", "torch.cat", "torch.cat", "pytracking.TensorList().unroll", "pytracking.features.preprocessing.sample_patch", "pytracking.TensorList", "f.get_feature"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.unroll", "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.sample_patch", "home.repos.pwc.inspect_result.researchmm_Stark.features.featurebase.MultiFeatureBase.get_feature"], ["", "def", "extract", "(", "self", ",", "im", ",", "pos", ",", "scales", ",", "image_sz", ")", ":", "\n", "        ", "if", "isinstance", "(", "scales", ",", "(", "int", ",", "float", ")", ")", ":", "\n", "            ", "scales", "=", "[", "scales", "]", "\n", "\n", "# Get image patches", "\n", "", "im_patches", "=", "torch", ".", "cat", "(", "[", "sample_patch", "(", "im", ",", "pos", ",", "s", "*", "image_sz", ",", "image_sz", ")", "for", "s", "in", "scales", "]", ")", "\n", "\n", "# Compute features", "\n", "feature_map", "=", "torch", ".", "cat", "(", "TensorList", "(", "[", "f", ".", "get_feature", "(", "im_patches", ")", "for", "f", "in", "self", ".", "features", "]", ")", ".", "unroll", "(", ")", ",", "dim", "=", "1", ")", "\n", "\n", "return", "feature_map", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.__init__": [[54, 59], ["extractor.ExtractorBase.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "features", ",", "patch_mode", "=", "'replicate'", ",", "max_scale_change", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "features", ")", "\n", "self", ".", "patch_mode", "=", "patch_mode", "\n", "self", ".", "max_scale_change", "=", "max_scale_change", "\n", "self", ".", "is_color", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.stride": [[60, 62], ["torch.Tensor", "pytracking.TensorList().unroll().list", "pytracking.TensorList().unroll", "pytracking.TensorList", "f.stride", "extractor.MultiResolutionExtractor._return_feature"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.unroll", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.stride", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor._return_feature"], ["", "def", "stride", "(", "self", ")", ":", "\n", "        ", "return", "torch", ".", "Tensor", "(", "TensorList", "(", "[", "f", ".", "stride", "(", ")", "for", "f", "in", "self", ".", "features", "if", "self", ".", "_return_feature", "(", "f", ")", "]", ")", ".", "unroll", "(", ")", ".", "list", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size": [[63, 65], ["pytracking.TensorList().unroll", "pytracking.TensorList", "f.size", "extractor.MultiResolutionExtractor._return_feature"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.unroll", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor._return_feature"], ["", "def", "size", "(", "self", ",", "input_sz", ")", ":", "\n", "        ", "return", "TensorList", "(", "[", "f", ".", "size", "(", "input_sz", ")", "for", "f", "in", "self", ".", "features", "if", "self", ".", "_return_feature", "(", "f", ")", "]", ")", ".", "unroll", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.dim": [[66, 68], ["pytracking.TensorList().unroll", "pytracking.TensorList", "f.dim", "extractor.MultiResolutionExtractor._return_feature"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.unroll", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor._return_feature"], ["", "def", "dim", "(", "self", ")", ":", "\n", "        ", "return", "TensorList", "(", "[", "f", ".", "dim", "(", ")", "for", "f", "in", "self", ".", "features", "if", "self", ".", "_return_feature", "(", "f", ")", "]", ")", ".", "unroll", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.get_fparams": [[69, 73], ["pytracking.TensorList().unroll", "pytracking.TensorList", "extractor.MultiResolutionExtractor._return_feature", "getattr", "extractor.MultiResolutionExtractor._return_feature"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.unroll", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor._return_feature", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor._return_feature"], ["", "def", "get_fparams", "(", "self", ",", "name", ":", "str", "=", "None", ")", ":", "\n", "        ", "if", "name", "is", "None", ":", "\n", "            ", "return", "[", "f", ".", "fparams", "for", "f", "in", "self", ".", "features", "if", "self", ".", "_return_feature", "(", "f", ")", "]", "\n", "", "return", "TensorList", "(", "[", "getattr", "(", "f", ".", "fparams", ",", "name", ")", "for", "f", "in", "self", ".", "features", "if", "self", ".", "_return_feature", "(", "f", ")", "]", ")", ".", "unroll", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.get_attribute": [[74, 79], ["pytracking.TensorList", "pytracking.TensorList", "getattr", "getattr", "extractor.MultiResolutionExtractor._return_feature", "extractor.MultiResolutionExtractor._return_feature", "hasattr"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor._return_feature", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor._return_feature"], ["", "def", "get_attribute", "(", "self", ",", "name", ":", "str", ",", "ignore_missing", ":", "bool", "=", "False", ")", ":", "\n", "        ", "if", "ignore_missing", ":", "\n", "            ", "return", "TensorList", "(", "[", "getattr", "(", "f", ",", "name", ")", "for", "f", "in", "self", ".", "features", "if", "self", ".", "_return_feature", "(", "f", ")", "and", "hasattr", "(", "f", ",", "name", ")", "]", ")", "\n", "", "else", ":", "\n", "            ", "return", "TensorList", "(", "[", "getattr", "(", "f", ",", "name", ",", "None", ")", "for", "f", "in", "self", ".", "features", "if", "self", ".", "_return_feature", "(", "f", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.get_unique_attribute": [[80, 90], ["getattr", "RuntimeError", "extractor.MultiResolutionExtractor._return_feature", "hasattr", "RuntimeError"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor._return_feature"], ["", "", "def", "get_unique_attribute", "(", "self", ",", "name", ":", "str", ")", ":", "\n", "        ", "feat", "=", "None", "\n", "for", "f", "in", "self", ".", "features", ":", "\n", "            ", "if", "self", ".", "_return_feature", "(", "f", ")", "and", "hasattr", "(", "f", ",", "name", ")", ":", "\n", "                ", "if", "feat", "is", "not", "None", ":", "\n", "                    ", "raise", "RuntimeError", "(", "'The attribute was not unique.'", ")", "\n", "", "feat", "=", "f", "\n", "", "", "if", "feat", "is", "None", ":", "\n", "            ", "raise", "RuntimeError", "(", "'The attribute did not exist'", ")", "\n", "", "return", "getattr", "(", "feat", ",", "name", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor._return_feature": [[91, 93], ["None"], "methods", ["None"], ["", "def", "_return_feature", "(", "self", ",", "f", ")", ":", "\n", "        ", "return", "self", ".", "is_color", "is", "None", "or", "self", ".", "is_color", "and", "f", ".", "use_for_color", "or", "not", "self", ".", "is_color", "and", "f", ".", "use_for_gray", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.set_is_color": [[94, 96], ["None"], "methods", ["None"], ["", "def", "set_is_color", "(", "self", ",", "is_color", ":", "bool", ")", ":", "\n", "        ", "self", ".", "is_color", "=", "is_color", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.extract": [[97, 123], ["isinstance", "zip", "torch.cat", "torch.cat", "pytracking.TensorList().unroll", "list", "list", "pytracking.TensorList", "pytracking.features.preprocessing.sample_patch", "f.get_feature"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.unroll", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.sample_patch", "home.repos.pwc.inspect_result.researchmm_Stark.features.featurebase.MultiFeatureBase.get_feature"], ["", "def", "extract", "(", "self", ",", "im", ",", "pos", ",", "scales", ",", "image_sz", ",", "return_patches", "=", "False", ")", ":", "\n", "        ", "\"\"\"Extract features.\n        args:\n            im: Image.\n            pos: Center position for extraction.\n            scales: Image scales to extract features from.\n            image_sz: Size to resize the image samples to before extraction.\n        \"\"\"", "\n", "if", "isinstance", "(", "scales", ",", "(", "int", ",", "float", ")", ")", ":", "\n", "            ", "scales", "=", "[", "scales", "]", "\n", "\n", "# Get image patches", "\n", "", "patch_iter", ",", "coord_iter", "=", "zip", "(", "*", "(", "sample_patch", "(", "im", ",", "pos", ",", "s", "*", "image_sz", ",", "image_sz", ",", "mode", "=", "self", ".", "patch_mode", ",", "\n", "max_scale_change", "=", "self", ".", "max_scale_change", ")", "for", "s", "in", "scales", ")", ")", "\n", "im_patches", "=", "torch", ".", "cat", "(", "list", "(", "patch_iter", ")", ")", "\n", "patch_coords", "=", "torch", ".", "cat", "(", "list", "(", "coord_iter", ")", ")", "\n", "\n", "# im_patches = torch.cat([sample_patch(im, pos, s*image_sz, image_sz) for s in scales])", "\n", "\n", "# Compute features", "\n", "feature_map", "=", "TensorList", "(", "[", "f", ".", "get_feature", "(", "im_patches", ")", "for", "f", "in", "self", ".", "features", "]", ")", ".", "unroll", "(", ")", "\n", "\n", "if", "return_patches", ":", "\n", "            ", "return", "feature_map", ",", "patch_coords", ",", "im_patches", "\n", "", "else", ":", "\n", "            ", "return", "feature_map", ",", "patch_coords", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.extract_transformed": [[124, 144], ["pytracking.features.preprocessing.sample_patch", "torch.cat", "pytracking.TensorList().unroll", "T", "pytracking.TensorList", "f.get_feature"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.sample_patch", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.unroll", "home.repos.pwc.inspect_result.researchmm_Stark.features.featurebase.MultiFeatureBase.get_feature"], ["", "", "def", "extract_transformed", "(", "self", ",", "im", ",", "pos", ",", "scale", ",", "image_sz", ",", "transforms", ")", ":", "\n", "        ", "\"\"\"Extract features from a set of transformed image samples.\n        args:\n            im: Image.\n            pos: Center position for extraction.\n            scale: Image scale to extract features from.\n            image_sz: Size to resize the image samples to before extraction.\n            transforms: A set of image transforms to apply.\n        \"\"\"", "\n", "\n", "# Get image patche", "\n", "im_patch", ",", "_", "=", "sample_patch", "(", "im", ",", "pos", ",", "scale", "*", "image_sz", ",", "image_sz", ")", "\n", "\n", "# Apply transforms", "\n", "im_patches", "=", "torch", ".", "cat", "(", "[", "T", "(", "im_patch", ")", "for", "T", "in", "transforms", "]", ")", "\n", "\n", "# Compute features", "\n", "feature_map", "=", "TensorList", "(", "[", "f", ".", "get_feature", "(", "im_patches", ")", "for", "f", "in", "self", ".", "features", "]", ")", ".", "unroll", "(", ")", "\n", "\n", "return", "feature_map", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.features.deep.ResNet18m1.__init__": [[22, 32], ["pytracking.features.featurebase.MultiFeatureBase.__init__", "list", "ValueError"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["def", "__init__", "(", "self", ",", "output_layers", ",", "net_path", "=", "None", ",", "use_gpu", "=", "True", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "super", "(", "ResNet18m1", ",", "self", ")", ".", "__init__", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "\n", "for", "l", "in", "output_layers", ":", "\n", "            ", "if", "l", "not", "in", "[", "'vggconv1'", ",", "'conv1'", ",", "'layer1'", ",", "'layer2'", ",", "'layer3'", ",", "'layer4'", ",", "'fc'", "]", ":", "\n", "                ", "raise", "ValueError", "(", "'Unknown layer'", ")", "\n", "\n", "", "", "self", ".", "output_layers", "=", "list", "(", "output_layers", ")", "\n", "self", ".", "use_gpu", "=", "use_gpu", "\n", "self", ".", "net_path", "=", "'resnet18_vggmconv1/resnet18_vggmconv1.pth'", "if", "net_path", "is", "None", "else", "net_path", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.deep.ResNet18m1.initialize": [[33, 67], ["torch.Tensor().view", "torch.Tensor().view", "os.path.isabs", "deep.ResNet18m1.net.eval", "isinstance", "isinstance", "Exception", "deep.ResNet18m1.net.cuda", "len", "torch.Tensor", "torch.Tensor", "pytracking.evaluation.environment.env_settings", "os.path.join", "ltr.models.backbone.resnet18_vggm.resnet18_vggmconv1"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.eval", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.resnet18_vggmconv1"], ["", "def", "initialize", "(", "self", ")", ":", "\n", "\n", "        ", "if", "isinstance", "(", "self", ".", "pool_stride", ",", "int", ")", "and", "self", ".", "pool_stride", "==", "1", ":", "\n", "            ", "self", ".", "pool_stride", "=", "[", "1", "]", "*", "len", "(", "self", ".", "output_layers", ")", "\n", "\n", "", "self", ".", "layer_stride", "=", "{", "'vggconv1'", ":", "2", ",", "'conv1'", ":", "2", ",", "'layer1'", ":", "4", ",", "'layer2'", ":", "8", ",", "'layer3'", ":", "16", ",", "'layer4'", ":", "32", ",", "\n", "'fc'", ":", "None", "}", "\n", "self", ".", "layer_dim", "=", "{", "'vggconv1'", ":", "96", ",", "'conv1'", ":", "64", ",", "'layer1'", ":", "64", ",", "'layer2'", ":", "128", ",", "'layer3'", ":", "256", ",", "'layer4'", ":", "512", ",", "\n", "'fc'", ":", "None", "}", "\n", "\n", "self", ".", "mean", "=", "torch", ".", "Tensor", "(", "[", "0.485", ",", "0.456", ",", "0.406", "]", ")", ".", "view", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "self", ".", "std", "=", "torch", ".", "Tensor", "(", "[", "0.229", ",", "0.224", ",", "0.225", "]", ")", ".", "view", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "\n", "if", "os", ".", "path", ".", "isabs", "(", "self", ".", "net_path", ")", ":", "\n", "            ", "net_path_full", "=", "[", "self", ".", "net_path", "]", "\n", "", "else", ":", "\n", "            ", "root_paths", "=", "env_settings", "(", ")", ".", "network_path", "\n", "if", "isinstance", "(", "root_paths", ",", "str", ")", ":", "\n", "                ", "root_paths", "=", "[", "root_paths", "]", "\n", "", "net_path_full", "=", "[", "os", ".", "path", ".", "join", "(", "root", ",", "self", ".", "net_path", ")", "for", "root", "in", "root_paths", "]", "\n", "\n", "", "self", ".", "net", "=", "None", "\n", "for", "net_path", "in", "net_path_full", ":", "\n", "            ", "try", ":", "\n", "                ", "self", ".", "net", "=", "resnet18_vggmconv1", "(", "self", ".", "output_layers", ",", "path", "=", "net_path", ")", "\n", "break", "\n", "", "except", ":", "\n", "                ", "pass", "\n", "", "", "if", "self", ".", "net", "is", "None", ":", "\n", "            ", "raise", "Exception", "(", "'Did not find network file {}'", ".", "format", "(", "self", ".", "net_path", ")", ")", "\n", "\n", "", "if", "self", ".", "use_gpu", ":", "\n", "            ", "self", ".", "net", ".", "cuda", "(", ")", "\n", "", "self", ".", "net", ".", "eval", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.deep.ResNet18m1.dim": [[68, 70], ["pytracking.TensorList"], "methods", ["None"], ["", "def", "dim", "(", "self", ")", ":", "\n", "        ", "return", "TensorList", "(", "[", "self", ".", "layer_dim", "[", "l", "]", "for", "l", "in", "self", ".", "output_layers", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.deep.ResNet18m1.stride": [[71, 73], ["pytracking.TensorList", "zip"], "methods", ["None"], ["", "def", "stride", "(", "self", ")", ":", "\n", "        ", "return", "TensorList", "(", "[", "s", "*", "self", ".", "layer_stride", "[", "l", "]", "for", "l", ",", "s", "in", "zip", "(", "self", ".", "output_layers", ",", "self", ".", "pool_stride", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.deep.ResNet18m1.extract": [[74, 84], ["im.cuda.cuda.cuda", "torch.no_grad", "pytracking.TensorList", "deep.ResNet18m1.net().values", "deep.ResNet18m1.net"], "methods", ["None"], ["", "def", "extract", "(", "self", ",", "im", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "im", "=", "im", "/", "255", "\n", "im", "-=", "self", ".", "mean", "\n", "im", "/=", "self", ".", "std", "\n", "\n", "if", "self", ".", "use_gpu", ":", "\n", "            ", "im", "=", "im", ".", "cuda", "(", ")", "\n", "\n", "", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "return", "TensorList", "(", "self", ".", "net", "(", "im", ")", ".", "values", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.deep.ATOMResNet18.__init__": [[94, 100], ["pytracking.features.featurebase.MultiFeatureBase.__init__", "list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["def", "__init__", "(", "self", ",", "output_layers", "=", "(", "'layer3'", ",", ")", ",", "net_path", "=", "'atom_iou'", ",", "use_gpu", "=", "True", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "\n", "self", ".", "output_layers", "=", "list", "(", "output_layers", ")", "\n", "self", ".", "use_gpu", "=", "use_gpu", "\n", "self", ".", "net_path", "=", "net_path", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.deep.ATOMResNet18.initialize": [[101, 124], ["pytracking.utils.loading.load_network", "deep.ATOMResNet18.net.eval", "sorted", "torch.Tensor().view", "torch.Tensor().view", "deep.ATOMResNet18.net.cuda", "isinstance", "list", "len", "set", "torch.Tensor", "torch.Tensor"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.net_wrappers.NetWrapper.load_network", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.eval", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "initialize", "(", "self", ")", ":", "\n", "        ", "self", ".", "net", "=", "load_network", "(", "self", ".", "net_path", ")", "\n", "\n", "if", "self", ".", "use_gpu", ":", "\n", "            ", "self", ".", "net", ".", "cuda", "(", ")", "\n", "", "self", ".", "net", ".", "eval", "(", ")", "\n", "\n", "self", ".", "iou_predictor", "=", "self", ".", "net", ".", "bb_regressor", "\n", "\n", "self", ".", "layer_stride", "=", "{", "'conv1'", ":", "2", ",", "'layer1'", ":", "4", ",", "'layer2'", ":", "8", ",", "'layer3'", ":", "16", ",", "'layer4'", ":", "32", ",", "'classification'", ":", "16", ",", "\n", "'fc'", ":", "None", "}", "\n", "self", ".", "layer_dim", "=", "{", "'conv1'", ":", "64", ",", "'layer1'", ":", "64", ",", "'layer2'", ":", "128", ",", "'layer3'", ":", "256", ",", "'layer4'", ":", "512", ",", "'classification'", ":", "256", ",", "\n", "'fc'", ":", "None", "}", "\n", "\n", "self", ".", "iounet_feature_layers", "=", "self", ".", "net", ".", "bb_regressor_layer", "\n", "\n", "if", "isinstance", "(", "self", ".", "pool_stride", ",", "int", ")", "and", "self", ".", "pool_stride", "==", "1", ":", "\n", "            ", "self", ".", "pool_stride", "=", "[", "1", "]", "*", "len", "(", "self", ".", "output_layers", ")", "\n", "\n", "", "self", ".", "feature_layers", "=", "sorted", "(", "list", "(", "set", "(", "self", ".", "output_layers", "+", "self", ".", "iounet_feature_layers", ")", ")", ")", "\n", "\n", "self", ".", "mean", "=", "torch", ".", "Tensor", "(", "[", "0.485", ",", "0.456", ",", "0.406", "]", ")", ".", "view", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "self", ".", "std", "=", "torch", ".", "Tensor", "(", "[", "0.229", ",", "0.224", ",", "0.225", "]", ")", ".", "view", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.deep.ATOMResNet18.dim": [[125, 127], ["pytracking.TensorList"], "methods", ["None"], ["", "def", "dim", "(", "self", ")", ":", "\n", "        ", "return", "TensorList", "(", "[", "self", ".", "layer_dim", "[", "l", "]", "for", "l", "in", "self", ".", "output_layers", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.deep.ATOMResNet18.stride": [[128, 130], ["pytracking.TensorList", "zip"], "methods", ["None"], ["", "def", "stride", "(", "self", ")", ":", "\n", "        ", "return", "TensorList", "(", "[", "s", "*", "self", ".", "layer_stride", "[", "l", "]", "for", "l", ",", "s", "in", "zip", "(", "self", ".", "output_layers", ",", "self", ".", "pool_stride", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.deep.ATOMResNet18.extract": [[131, 151], ["pytracking.TensorList", "pytracking.TensorList", "im.cuda.cuda.cuda", "torch.no_grad", "deep.ATOMResNet18.net.extract_features", "torch.no_grad", "pytracking.TensorList", "output_features[].clone", "deep.ATOMResNet18.iou_predictor.get_iou_feat"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.extract_features", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.get_iou_feat"], ["", "def", "extract", "(", "self", ",", "im", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "im", "=", "im", "/", "255", "\n", "im", "-=", "self", ".", "mean", "\n", "im", "/=", "self", ".", "std", "\n", "\n", "if", "self", ".", "use_gpu", ":", "\n", "            ", "im", "=", "im", ".", "cuda", "(", ")", "\n", "\n", "", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "output_features", "=", "self", ".", "net", ".", "extract_features", "(", "im", ",", "self", ".", "feature_layers", ")", "\n", "\n", "# Store the raw resnet features which are input to iounet", "\n", "", "self", ".", "iounet_backbone_features", "=", "TensorList", "(", "\n", "[", "output_features", "[", "layer", "]", ".", "clone", "(", ")", "for", "layer", "in", "self", ".", "iounet_feature_layers", "]", ")", "\n", "\n", "# Store the processed features from iounet, just before pooling", "\n", "with", "torch", ".", "no_grad", "(", ")", ":", "\n", "            ", "self", ".", "iounet_features", "=", "TensorList", "(", "self", ".", "iou_predictor", ".", "get_iou_feat", "(", "self", ".", "iounet_backbone_features", ")", ")", "\n", "\n", "", "return", "TensorList", "(", "[", "output_features", "[", "layer", "]", "for", "layer", "in", "self", ".", "output_layers", "]", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.features.color.RGB.dim": [[7, 9], ["None"], "methods", ["None"], ["def", "dim", "(", "self", ")", ":", "\n", "        ", "return", "3", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.color.RGB.stride": [[10, 12], ["None"], "methods", ["None"], ["", "def", "stride", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "pool_stride", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.color.RGB.extract": [[13, 15], ["None"], "methods", ["None"], ["", "def", "extract", "(", "self", ",", "im", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "return", "im", "/", "255", "-", "0.5", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.color.Grayscale.dim": [[19, 21], ["None"], "methods", ["None"], ["def", "dim", "(", "self", ")", ":", "\n", "        ", "return", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.color.Grayscale.stride": [[22, 24], ["None"], "methods", ["None"], ["", "def", "stride", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "pool_stride", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.color.Grayscale.extract": [[25, 27], ["torch.mean"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], ["", "def", "extract", "(", "self", ",", "im", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "return", "torch", ".", "mean", "(", "im", "/", "255", "-", "0.5", ",", "1", ",", "keepdim", "=", "True", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.numpy_to_torch": [[6, 8], ["torch.from_numpy().float().permute().unsqueeze", "torch.from_numpy().float().permute().unsqueeze", "torch.from_numpy().float().permute", "torch.from_numpy().float().permute", "torch.from_numpy().float", "torch.from_numpy().float", "torch.from_numpy", "torch.from_numpy"], "function", ["None"], ["def", "numpy_to_torch", "(", "a", ":", "np", ".", "ndarray", ")", ":", "\n", "    ", "return", "torch", ".", "from_numpy", "(", "a", ")", ".", "float", "(", ")", ".", "permute", "(", "2", ",", "0", ",", "1", ")", ".", "unsqueeze", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.torch_to_numpy": [[10, 12], ["a.squeeze().permute().numpy", "a.squeeze().permute", "a.squeeze"], "function", ["None"], ["", "def", "torch_to_numpy", "(", "a", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "return", "a", ".", "squeeze", "(", "0", ")", ".", "permute", "(", "1", ",", "2", ",", "0", ")", ".", "numpy", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.sample_patch_transformed": [[14, 31], ["preprocessing.sample_patch", "torch.cat", "torch.cat", "T"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.sample_patch"], ["", "def", "sample_patch_transformed", "(", "im", ",", "pos", ",", "scale", ",", "image_sz", ",", "transforms", ",", "is_mask", "=", "False", ")", ":", "\n", "    ", "\"\"\"Extract transformed image samples.\n    args:\n        im: Image.\n        pos: Center position for extraction.\n        scale: Image scale to extract features from.\n        image_sz: Size to resize the image samples to before extraction.\n        transforms: A set of image transforms to apply.\n    \"\"\"", "\n", "\n", "# Get image patche", "\n", "im_patch", ",", "_", "=", "sample_patch", "(", "im", ",", "pos", ",", "scale", "*", "image_sz", ",", "image_sz", ",", "is_mask", "=", "is_mask", ")", "\n", "\n", "# Apply transforms", "\n", "im_patches", "=", "torch", ".", "cat", "(", "[", "T", "(", "im_patch", ",", "is_mask", "=", "is_mask", ")", "for", "T", "in", "transforms", "]", ")", "\n", "\n", "return", "im_patches", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.sample_patch_multiscale": [[33, 53], ["isinstance", "zip", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "list", "list", "preprocessing.sample_patch"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.sample_patch"], ["", "def", "sample_patch_multiscale", "(", "im", ",", "pos", ",", "scales", ",", "image_sz", ",", "mode", ":", "str", "=", "'replicate'", ",", "max_scale_change", "=", "None", ")", ":", "\n", "    ", "\"\"\"Extract image patches at multiple scales.\n    args:\n        im: Image.\n        pos: Center position for extraction.\n        scales: Image scales to extract image patches from.\n        image_sz: Size to resize the image samples to\n        mode: how to treat image borders: 'replicate' (default), 'inside' or 'inside_major'\n        max_scale_change: maximum allowed scale change when using 'inside' and 'inside_major' mode\n    \"\"\"", "\n", "if", "isinstance", "(", "scales", ",", "(", "int", ",", "float", ")", ")", ":", "\n", "        ", "scales", "=", "[", "scales", "]", "\n", "\n", "# Get image patches", "\n", "", "patch_iter", ",", "coord_iter", "=", "zip", "(", "*", "(", "sample_patch", "(", "im", ",", "pos", ",", "s", "*", "image_sz", ",", "image_sz", ",", "mode", "=", "mode", ",", "\n", "max_scale_change", "=", "max_scale_change", ")", "for", "s", "in", "scales", ")", ")", "\n", "im_patches", "=", "torch", ".", "cat", "(", "list", "(", "patch_iter", ")", ")", "\n", "patch_coords", "=", "torch", ".", "cat", "(", "list", "(", "coord_iter", ")", ")", "\n", "\n", "return", "im_patches", ",", "patch_coords", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.sample_patch": [[55, 146], ["pos.long().clone", "torch.max().long", "torch.max().long", "torch.Tensor", "torch.Tensor", "shrink_factor.min.clamp_", "torch.min().item", "torch.min().item", "int", "int", "sample_sz.float", "torch.LongTensor", "torch.LongTensor", "torch.pad", "torch.pad", "torch.cat().view", "torch.cat().view", "torch.interpolate", "torch.interpolate", "pos.long", "sample_sz.float", "shrink_factor.min.max", "max", "torch.max", "torch.max", "F.interpolate.clone", "output_sz.long().tolist", "output_sz.long().tolist", "shrink_factor.min.min", "torch.min", "torch.min", "int", "sz.round", "torch.Tensor", "torch.Tensor", "torch.cat", "torch.cat", "sample_sz.float", "os[].item", "os[].item", "tl[].item", "br[].item", "tl[].item", "br[].item", "tl[].item", "br[].item", "tl[].item", "br[].item", "output_sz.long", "output_sz.long", "sample_sz.float", "output_sz.float"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "sample_patch", "(", "im", ":", "torch", ".", "Tensor", ",", "pos", ":", "torch", ".", "Tensor", ",", "sample_sz", ":", "torch", ".", "Tensor", ",", "output_sz", ":", "torch", ".", "Tensor", "=", "None", ",", "\n", "mode", ":", "str", "=", "'replicate'", ",", "max_scale_change", "=", "None", ",", "is_mask", "=", "False", ")", ":", "\n", "    ", "\"\"\"Sample an image patch.\n\n    args:\n        im: Image\n        pos: center position of crop\n        sample_sz: size to crop\n        output_sz: size to resize to\n        mode: how to treat image borders: 'replicate' (default), 'inside' or 'inside_major'\n        max_scale_change: maximum allowed scale change when using 'inside' and 'inside_major' mode\n    \"\"\"", "\n", "\n", "# if mode not in ['replicate', 'inside']:", "\n", "#     raise ValueError('Unknown border mode \\'{}\\'.'.format(mode))", "\n", "\n", "# copy and convert", "\n", "posl", "=", "pos", ".", "long", "(", ")", ".", "clone", "(", ")", "\n", "\n", "pad_mode", "=", "mode", "\n", "\n", "# Get new sample size if forced inside the image", "\n", "if", "mode", "==", "'inside'", "or", "mode", "==", "'inside_major'", ":", "\n", "        ", "pad_mode", "=", "'replicate'", "\n", "im_sz", "=", "torch", ".", "Tensor", "(", "[", "im", ".", "shape", "[", "2", "]", ",", "im", ".", "shape", "[", "3", "]", "]", ")", "\n", "shrink_factor", "=", "(", "sample_sz", ".", "float", "(", ")", "/", "im_sz", ")", "\n", "if", "mode", "==", "'inside'", ":", "\n", "            ", "shrink_factor", "=", "shrink_factor", ".", "max", "(", ")", "\n", "", "elif", "mode", "==", "'inside_major'", ":", "\n", "            ", "shrink_factor", "=", "shrink_factor", ".", "min", "(", ")", "\n", "", "shrink_factor", ".", "clamp_", "(", "min", "=", "1", ",", "max", "=", "max_scale_change", ")", "\n", "sample_sz", "=", "(", "sample_sz", ".", "float", "(", ")", "/", "shrink_factor", ")", ".", "long", "(", ")", "\n", "\n", "# Compute pre-downsampling factor", "\n", "", "if", "output_sz", "is", "not", "None", ":", "\n", "        ", "resize_factor", "=", "torch", ".", "min", "(", "sample_sz", ".", "float", "(", ")", "/", "output_sz", ".", "float", "(", ")", ")", ".", "item", "(", ")", "\n", "df", "=", "int", "(", "max", "(", "int", "(", "resize_factor", "-", "0.1", ")", ",", "1", ")", ")", "\n", "", "else", ":", "\n", "        ", "df", "=", "int", "(", "1", ")", "\n", "\n", "", "sz", "=", "sample_sz", ".", "float", "(", ")", "/", "df", "# new size", "\n", "\n", "# Do downsampling", "\n", "if", "df", ">", "1", ":", "\n", "        ", "os", "=", "posl", "%", "df", "# offset", "\n", "posl", "=", "(", "posl", "-", "os", ")", "/", "df", "# new position", "\n", "im2", "=", "im", "[", "...", ",", "os", "[", "0", "]", ".", "item", "(", ")", ":", ":", "df", ",", "os", "[", "1", "]", ".", "item", "(", ")", ":", ":", "df", "]", "# downsample", "\n", "", "else", ":", "\n", "        ", "im2", "=", "im", "\n", "\n", "# compute size to crop", "\n", "", "szl", "=", "torch", ".", "max", "(", "sz", ".", "round", "(", ")", ",", "torch", ".", "Tensor", "(", "[", "2", "]", ")", ")", ".", "long", "(", ")", "\n", "\n", "# Extract top and bottom coordinates", "\n", "tl", "=", "posl", "-", "(", "szl", "-", "1", ")", "/", "2", "\n", "br", "=", "posl", "+", "szl", "/", "2", "+", "1", "\n", "\n", "# Shift the crop to inside", "\n", "if", "mode", "==", "'inside'", "or", "mode", "==", "'inside_major'", ":", "\n", "        ", "im2_sz", "=", "torch", ".", "LongTensor", "(", "[", "im2", ".", "shape", "[", "2", "]", ",", "im2", ".", "shape", "[", "3", "]", "]", ")", "\n", "shift", "=", "(", "-", "tl", ")", ".", "clamp", "(", "0", ")", "-", "(", "br", "-", "im2_sz", ")", ".", "clamp", "(", "0", ")", "\n", "tl", "+=", "shift", "\n", "br", "+=", "shift", "\n", "\n", "outside", "=", "(", "(", "-", "tl", ")", ".", "clamp", "(", "0", ")", "+", "(", "br", "-", "im2_sz", ")", ".", "clamp", "(", "0", ")", ")", "//", "2", "\n", "shift", "=", "(", "-", "tl", "-", "outside", ")", "*", "(", "outside", ">", "0", ")", ".", "long", "(", ")", "\n", "tl", "+=", "shift", "\n", "br", "+=", "shift", "\n", "\n", "# Get image patch", "\n", "# im_patch = im2[...,tl[0].item():br[0].item(),tl[1].item():br[1].item()]", "\n", "\n", "# Get image patch", "\n", "", "if", "not", "is_mask", ":", "\n", "        ", "im_patch", "=", "F", ".", "pad", "(", "im2", ",", "(", "-", "tl", "[", "1", "]", ".", "item", "(", ")", ",", "br", "[", "1", "]", ".", "item", "(", ")", "-", "im2", ".", "shape", "[", "3", "]", ",", "-", "tl", "[", "0", "]", ".", "item", "(", ")", ",", "br", "[", "0", "]", ".", "item", "(", ")", "-", "im2", ".", "shape", "[", "2", "]", ")", ",", "pad_mode", ")", "\n", "", "else", ":", "\n", "        ", "im_patch", "=", "F", ".", "pad", "(", "im2", ",", "(", "-", "tl", "[", "1", "]", ".", "item", "(", ")", ",", "br", "[", "1", "]", ".", "item", "(", ")", "-", "im2", ".", "shape", "[", "3", "]", ",", "-", "tl", "[", "0", "]", ".", "item", "(", ")", ",", "br", "[", "0", "]", ".", "item", "(", ")", "-", "im2", ".", "shape", "[", "2", "]", ")", ")", "\n", "\n", "# Get image coordinates", "\n", "", "patch_coord", "=", "df", "*", "torch", ".", "cat", "(", "(", "tl", ",", "br", ")", ")", ".", "view", "(", "1", ",", "4", ")", "\n", "\n", "if", "output_sz", "is", "None", "or", "(", "im_patch", ".", "shape", "[", "-", "2", "]", "==", "output_sz", "[", "0", "]", "and", "im_patch", ".", "shape", "[", "-", "1", "]", "==", "output_sz", "[", "1", "]", ")", ":", "\n", "        ", "return", "im_patch", ".", "clone", "(", ")", ",", "patch_coord", "\n", "\n", "# Resample", "\n", "", "if", "not", "is_mask", ":", "\n", "        ", "im_patch", "=", "F", ".", "interpolate", "(", "im_patch", ",", "output_sz", ".", "long", "(", ")", ".", "tolist", "(", ")", ",", "mode", "=", "'bilinear'", ")", "\n", "", "else", ":", "\n", "        ", "im_patch", "=", "F", ".", "interpolate", "(", "im_patch", ",", "output_sz", ".", "long", "(", ")", ".", "tolist", "(", ")", ",", "mode", "=", "'nearest'", ")", "\n", "\n", "", "return", "im_patch", ",", "patch_coord", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.__init__": [[10, 19], ["pytracking.features.featurebase.FeatureBase.__init__", "util.Concatenate.features[].stride", "feat.stride", "ValueError"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.stride", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.stride"], ["def", "__init__", "(", "self", ",", "features", ",", "pool_stride", "=", "None", ",", "normalize_power", "=", "None", ",", "use_for_color", "=", "True", ",", "use_for_gray", "=", "True", ")", ":", "\n", "        ", "super", "(", "Concatenate", ",", "self", ")", ".", "__init__", "(", "pool_stride", ",", "normalize_power", ",", "use_for_color", ",", "use_for_gray", ")", "\n", "self", ".", "features", "=", "features", "\n", "\n", "self", ".", "input_stride", "=", "self", ".", "features", "[", "0", "]", ".", "stride", "(", ")", "\n", "\n", "for", "feat", "in", "self", ".", "features", ":", "\n", "            ", "if", "self", ".", "input_stride", "!=", "feat", ".", "stride", "(", ")", ":", "\n", "                ", "raise", "ValueError", "(", "'Strides for the features must be the same for a bultiresolution feature.'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim": [[20, 22], ["sum", "f.dim"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "", "", "def", "dim", "(", "self", ")", ":", "\n", "        ", "return", "sum", "(", "[", "f", ".", "dim", "(", ")", "for", "f", "in", "self", ".", "features", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.stride": [[23, 25], ["None"], "methods", ["None"], ["", "def", "stride", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "pool_stride", "*", "self", ".", "input_stride", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.extract": [[26, 28], ["torch.cat", "f.get_feature"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.featurebase.MultiFeatureBase.get_feature"], ["", "def", "extract", "(", "self", ",", "im", ":", "torch", ".", "Tensor", ")", ":", "\n", "        ", "return", "torch", ".", "cat", "(", "[", "f", ".", "get_feature", "(", "im", ")", "for", "f", "in", "self", ".", "features", "]", ",", "1", ")", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Transform.__init__": [[13, 16], ["None"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "output_sz", "=", "None", ",", "shift", "=", "None", ")", ":", "\n", "        ", "self", ".", "output_sz", "=", "output_sz", "\n", "self", ".", "shift", "=", "(", "0", ",", "0", ")", "if", "shift", "is", "None", "else", "shift", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Transform.__call__": [[17, 19], ["None"], "methods", ["None"], ["", "def", "__call__", "(", "self", ",", "image", ",", "is_mask", "=", "False", ")", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Transform.crop_to_output": [[20, 38], ["isinstance", "torch.pad", "torch.pad", "math.floor", "math.ceil", "math.floor", "math.ceil"], "methods", ["None"], ["", "def", "crop_to_output", "(", "self", ",", "image", ")", ":", "\n", "        ", "if", "isinstance", "(", "image", ",", "torch", ".", "Tensor", ")", ":", "\n", "            ", "imsz", "=", "image", ".", "shape", "[", "2", ":", "]", "\n", "if", "self", ".", "output_sz", "is", "None", ":", "\n", "                ", "pad_h", "=", "0", "\n", "pad_w", "=", "0", "\n", "", "else", ":", "\n", "                ", "pad_h", "=", "(", "self", ".", "output_sz", "[", "0", "]", "-", "imsz", "[", "0", "]", ")", "/", "2", "\n", "pad_w", "=", "(", "self", ".", "output_sz", "[", "1", "]", "-", "imsz", "[", "1", "]", ")", "/", "2", "\n", "\n", "", "pad_left", "=", "math", ".", "floor", "(", "pad_w", ")", "+", "self", ".", "shift", "[", "1", "]", "\n", "pad_right", "=", "math", ".", "ceil", "(", "pad_w", ")", "-", "self", ".", "shift", "[", "1", "]", "\n", "pad_top", "=", "math", ".", "floor", "(", "pad_h", ")", "+", "self", ".", "shift", "[", "0", "]", "\n", "pad_bottom", "=", "math", ".", "ceil", "(", "pad_h", ")", "-", "self", ".", "shift", "[", "0", "]", "\n", "\n", "return", "F", ".", "pad", "(", "image", ",", "(", "pad_left", ",", "pad_right", ",", "pad_top", ",", "pad_bottom", ")", ",", "'replicate'", ")", "\n", "", "else", ":", "\n", "            ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Identity.__call__": [[41, 43], ["augmentation.Identity.crop_to_output"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Transform.crop_to_output"], ["def", "__call__", "(", "self", ",", "image", ",", "is_mask", "=", "False", ")", ":", "\n", "        ", "return", "self", ".", "crop_to_output", "(", "image", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.FlipHorizontal.__call__": [[46, 51], ["isinstance", "augmentation.FlipHorizontal.crop_to_output", "numpy.fliplr", "image.flip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Transform.crop_to_output"], ["def", "__call__", "(", "self", ",", "image", ",", "is_mask", "=", "False", ")", ":", "\n", "        ", "if", "isinstance", "(", "image", ",", "torch", ".", "Tensor", ")", ":", "\n", "            ", "return", "self", ".", "crop_to_output", "(", "image", ".", "flip", "(", "(", "3", ",", ")", ")", ")", "\n", "", "else", ":", "\n", "            ", "return", "np", ".", "fliplr", "(", "image", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.FlipVertical.__call__": [[54, 59], ["isinstance", "augmentation.FlipVertical.crop_to_output", "numpy.flipud", "image.flip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Transform.crop_to_output"], ["def", "__call__", "(", "self", ",", "image", ":", "torch", ".", "Tensor", ",", "is_mask", "=", "False", ")", ":", "\n", "        ", "if", "isinstance", "(", "image", ",", "torch", ".", "Tensor", ")", ":", "\n", "            ", "return", "self", ".", "crop_to_output", "(", "image", ".", "flip", "(", "(", "2", ",", ")", ")", ")", "\n", "", "else", ":", "\n", "            ", "return", "np", ".", "flipud", "(", "image", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Translation.__init__": [[62, 65], ["augmentation.Transform.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "translation", ",", "output_sz", "=", "None", ",", "shift", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "output_sz", ",", "shift", ")", "\n", "self", ".", "shift", "=", "(", "self", ".", "shift", "[", "0", "]", "+", "translation", "[", "0", "]", ",", "self", ".", "shift", "[", "1", "]", "+", "translation", "[", "1", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Translation.__call__": [[66, 71], ["isinstance", "augmentation.Translation.crop_to_output"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Transform.crop_to_output"], ["", "def", "__call__", "(", "self", ",", "image", ",", "is_mask", "=", "False", ")", ":", "\n", "        ", "if", "isinstance", "(", "image", ",", "torch", ".", "Tensor", ")", ":", "\n", "            ", "return", "self", ".", "crop_to_output", "(", "image", ")", "\n", "", "else", ":", "\n", "            ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Scale.__init__": [[74, 77], ["augmentation.Transform.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "scale_factor", ",", "output_sz", "=", "None", ",", "shift", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "output_sz", ",", "shift", ")", "\n", "self", ".", "scale_factor", "=", "scale_factor", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Scale.__call__": [[78, 96], ["isinstance", "round", "round", "torch.interpolate", "torch.interpolate", "augmentation.Scale.crop_to_output"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Transform.crop_to_output"], ["", "def", "__call__", "(", "self", ",", "image", ",", "is_mask", "=", "False", ")", ":", "\n", "        ", "if", "isinstance", "(", "image", ",", "torch", ".", "Tensor", ")", ":", "\n", "# Calculate new size. Ensure that it is even so that crop/pad becomes easier", "\n", "            ", "h_orig", ",", "w_orig", "=", "image", ".", "shape", "[", "2", ":", "]", "\n", "\n", "if", "h_orig", "!=", "w_orig", ":", "\n", "                ", "raise", "NotImplementedError", "\n", "\n", "", "h_new", "=", "round", "(", "h_orig", "/", "self", ".", "scale_factor", ")", "\n", "h_new", "+=", "(", "h_new", "-", "h_orig", ")", "%", "2", "\n", "w_new", "=", "round", "(", "w_orig", "/", "self", ".", "scale_factor", ")", "\n", "w_new", "+=", "(", "w_new", "-", "w_orig", ")", "%", "2", "\n", "\n", "image_resized", "=", "F", ".", "interpolate", "(", "image", ",", "[", "h_new", ",", "w_new", "]", ",", "mode", "=", "'bilinear'", ")", "\n", "\n", "return", "self", ".", "crop_to_output", "(", "image_resized", ")", "\n", "", "else", ":", "\n", "            ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Affine.__init__": [[100, 103], ["augmentation.Transform.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "transform_matrix", ",", "output_sz", "=", "None", ",", "shift", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "output_sz", ",", "shift", ")", "\n", "self", ".", "transform_matrix", "=", "transform_matrix", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Affine.__call__": [[104, 109], ["isinstance", "augmentation.Affine.crop_to_output", "cv2.warpAffine", "pytracking.features.preprocessing.numpy_to_torch", "augmentation.Affine.", "pytracking.features.preprocessing.torch_to_numpy"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Transform.crop_to_output", "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.numpy_to_torch", "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.torch_to_numpy"], ["", "def", "__call__", "(", "self", ",", "image", ",", "is_mask", "=", "False", ")", ":", "\n", "        ", "if", "isinstance", "(", "image", ",", "torch", ".", "Tensor", ")", ":", "\n", "            ", "return", "self", ".", "crop_to_output", "(", "numpy_to_torch", "(", "self", "(", "torch_to_numpy", "(", "image", ")", ")", ")", ")", "\n", "", "else", ":", "\n", "            ", "return", "cv", ".", "warpAffine", "(", "image", ",", "self", ".", "transform_matrix", ",", "image", ".", "shape", "[", "1", ":", ":", "-", "1", "]", ",", "borderMode", "=", "cv", ".", "BORDER_REPLICATE", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Rotate.__init__": [[113, 116], ["augmentation.Transform.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "angle", ",", "output_sz", "=", "None", ",", "shift", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "output_sz", ",", "shift", ")", "\n", "self", ".", "angle", "=", "math", ".", "pi", "*", "angle", "/", "180", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Rotate.__call__": [[117, 126], ["isinstance", "augmentation.Rotate.crop_to_output", "numpy.array", "numpy.concatenate", "cv2.warpAffine", "pytracking.features.preprocessing.numpy_to_torch", "augmentation.Rotate.", "numpy.expand_dims", "pytracking.features.preprocessing.torch_to_numpy", "numpy.array", "math.cos", "math.sin", "math.cos", "math.sin"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Transform.crop_to_output", "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.numpy_to_torch", "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.torch_to_numpy"], ["", "def", "__call__", "(", "self", ",", "image", ",", "is_mask", "=", "False", ")", ":", "\n", "        ", "if", "isinstance", "(", "image", ",", "torch", ".", "Tensor", ")", ":", "\n", "            ", "return", "self", ".", "crop_to_output", "(", "numpy_to_torch", "(", "self", "(", "torch_to_numpy", "(", "image", ")", ")", ")", ")", "\n", "", "else", ":", "\n", "            ", "c", "=", "(", "np", ".", "expand_dims", "(", "np", ".", "array", "(", "image", ".", "shape", "[", ":", "2", "]", ")", ",", "1", ")", "-", "1", ")", "/", "2", "\n", "R", "=", "np", ".", "array", "(", "[", "[", "math", ".", "cos", "(", "self", ".", "angle", ")", ",", "math", ".", "sin", "(", "self", ".", "angle", ")", "]", ",", "\n", "[", "-", "math", ".", "sin", "(", "self", ".", "angle", ")", ",", "math", ".", "cos", "(", "self", ".", "angle", ")", "]", "]", ")", "\n", "H", "=", "np", ".", "concatenate", "(", "[", "R", ",", "c", "-", "R", "@", "c", "]", ",", "1", ")", "\n", "return", "cv", ".", "warpAffine", "(", "image", ",", "H", ",", "image", ".", "shape", "[", "1", ":", ":", "-", "1", "]", ",", "borderMode", "=", "cv", ".", "BORDER_REPLICATE", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Blur.__init__": [[130, 140], ["augmentation.Transform.__init__", "isinstance", "math.ceil", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "augmentation.Blur.filter[].view", "augmentation.Blur.filter[].sum", "augmentation.Blur.filter[].view", "augmentation.Blur.filter[].sum", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "sigma", ",", "output_sz", "=", "None", ",", "shift", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "output_sz", ",", "shift", ")", "\n", "if", "isinstance", "(", "sigma", ",", "(", "float", ",", "int", ")", ")", ":", "\n", "            ", "sigma", "=", "(", "sigma", ",", "sigma", ")", "\n", "", "self", ".", "sigma", "=", "sigma", "\n", "self", ".", "filter_size", "=", "[", "math", ".", "ceil", "(", "2", "*", "s", ")", "for", "s", "in", "self", ".", "sigma", "]", "\n", "x_coord", "=", "[", "torch", ".", "arange", "(", "-", "sz", ",", "sz", "+", "1", ",", "dtype", "=", "torch", ".", "float32", ")", "for", "sz", "in", "self", ".", "filter_size", "]", "\n", "self", ".", "filter", "=", "[", "torch", ".", "exp", "(", "-", "(", "x", "**", "2", ")", "/", "(", "2", "*", "s", "**", "2", ")", ")", "for", "x", ",", "s", "in", "zip", "(", "x_coord", ",", "self", ".", "sigma", ")", "]", "\n", "self", ".", "filter", "[", "0", "]", "=", "self", ".", "filter", "[", "0", "]", ".", "view", "(", "1", ",", "1", ",", "-", "1", ",", "1", ")", "/", "self", ".", "filter", "[", "0", "]", ".", "sum", "(", ")", "\n", "self", ".", "filter", "[", "1", "]", "=", "self", ".", "filter", "[", "1", "]", ".", "view", "(", "1", ",", "1", ",", "1", ",", "-", "1", ")", "/", "self", ".", "filter", "[", "1", "]", ".", "sum", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Blur.__call__": [[141, 148], ["isinstance", "torch.conv2d", "torch.conv2d", "augmentation.Blur.crop_to_output", "image.view", "torch.conv2d().view", "torch.conv2d().view", "torch.conv2d", "torch.conv2d"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Transform.crop_to_output", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d"], ["", "def", "__call__", "(", "self", ",", "image", ",", "is_mask", "=", "False", ")", ":", "\n", "        ", "if", "isinstance", "(", "image", ",", "torch", ".", "Tensor", ")", ":", "\n", "            ", "sz", "=", "image", ".", "shape", "[", "2", ":", "]", "\n", "im1", "=", "F", ".", "conv2d", "(", "image", ".", "view", "(", "-", "1", ",", "1", ",", "sz", "[", "0", "]", ",", "sz", "[", "1", "]", ")", ",", "self", ".", "filter", "[", "0", "]", ",", "padding", "=", "(", "self", ".", "filter_size", "[", "0", "]", ",", "0", ")", ")", "\n", "return", "self", ".", "crop_to_output", "(", "F", ".", "conv2d", "(", "im1", ",", "self", ".", "filter", "[", "1", "]", ",", "padding", "=", "(", "0", ",", "self", ".", "filter_size", "[", "1", "]", ")", ")", ".", "view", "(", "1", ",", "-", "1", ",", "sz", "[", "0", "]", ",", "sz", "[", "1", "]", ")", ")", "\n", "", "else", ":", "\n", "            ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.__init__": [[152, 170], ["augmentation.Transform.__init__", "augmentation.RandomAffine.roll"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll"], ["def", "__init__", "(", "self", ",", "p_flip", "=", "0.0", ",", "max_rotation", "=", "0.0", ",", "max_shear", "=", "0.0", ",", "max_scale", "=", "0.0", ",", "max_ar_factor", "=", "0.0", ",", "\n", "border_mode", "=", "'constant'", ",", "output_sz", "=", "None", ",", "shift", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "output_sz", ",", "shift", ")", "\n", "self", ".", "p_flip", "=", "p_flip", "\n", "self", ".", "max_rotation", "=", "max_rotation", "\n", "self", ".", "max_shear", "=", "max_shear", "\n", "self", ".", "max_scale", "=", "max_scale", "\n", "self", ".", "max_ar_factor", "=", "max_ar_factor", "\n", "\n", "self", ".", "pad_amount", "=", "0", "\n", "if", "border_mode", "==", "'constant'", ":", "\n", "            ", "self", ".", "border_flag", "=", "cv", ".", "BORDER_CONSTANT", "\n", "", "elif", "border_mode", "==", "'replicate'", ":", "\n", "            ", "self", ".", "border_flag", "==", "cv", ".", "BORDER_REPLICATE", "\n", "", "else", ":", "\n", "            ", "raise", "Exception", "\n", "\n", "", "self", ".", "roll_values", "=", "self", ".", "roll", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.roll": [[171, 182], ["random.uniform", "random.uniform", "random.uniform", "numpy.exp", "numpy.exp", "random.random", "random.uniform", "random.uniform"], "methods", ["None"], ["", "def", "roll", "(", "self", ")", ":", "\n", "        ", "do_flip", "=", "random", ".", "random", "(", ")", "<", "self", ".", "p_flip", "\n", "theta", "=", "random", ".", "uniform", "(", "-", "self", ".", "max_rotation", ",", "self", ".", "max_rotation", ")", "\n", "\n", "shear_x", "=", "random", ".", "uniform", "(", "-", "self", ".", "max_shear", ",", "self", ".", "max_shear", ")", "\n", "shear_y", "=", "random", ".", "uniform", "(", "-", "self", ".", "max_shear", ",", "self", ".", "max_shear", ")", "\n", "\n", "ar_factor", "=", "np", ".", "exp", "(", "random", ".", "uniform", "(", "-", "self", ".", "max_ar_factor", ",", "self", ".", "max_ar_factor", ")", ")", "\n", "scale_factor", "=", "np", ".", "exp", "(", "random", ".", "uniform", "(", "-", "self", ".", "max_scale", ",", "self", ".", "max_scale", ")", ")", "\n", "\n", "return", "do_flip", ",", "theta", ",", "(", "shear_x", ",", "shear_y", ")", ",", "(", "scale_factor", ",", "scale_factor", "*", "ar_factor", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine._construct_t_mat": [[183, 211], ["numpy.identity", "cv2.getRotationMatrix2D", "numpy.concatenate", "numpy.array", "numpy.array", "numpy.array().reshape", "numpy.array"], "methods", ["None"], ["", "def", "_construct_t_mat", "(", "self", ",", "image_shape", ",", "do_flip", ",", "theta", ",", "shear_values", ",", "scale_factors", ")", ":", "\n", "        ", "im_h", ",", "im_w", "=", "image_shape", "\n", "t_mat", "=", "np", ".", "identity", "(", "3", ")", "\n", "\n", "if", "do_flip", ":", "\n", "            ", "if", "do_flip", ":", "\n", "                ", "t_mat", "[", "0", ",", "0", "]", "=", "-", "1.0", "\n", "t_mat", "[", "0", ",", "2", "]", "=", "im_w", "\n", "\n", "", "", "t_rot", "=", "cv", ".", "getRotationMatrix2D", "(", "(", "im_w", "*", "0.5", ",", "im_h", "*", "0.5", ")", ",", "theta", ",", "1.0", ")", "\n", "t_rot", "=", "np", ".", "concatenate", "(", "(", "t_rot", ",", "np", ".", "array", "(", "[", "0.0", ",", "0.0", ",", "1.0", "]", ")", ".", "reshape", "(", "1", ",", "3", ")", ")", ")", "\n", "\n", "t_shear", "=", "np", ".", "array", "(", "[", "[", "1.0", ",", "shear_values", "[", "0", "]", ",", "-", "shear_values", "[", "0", "]", "*", "0.5", "*", "im_w", "]", ",", "\n", "[", "shear_values", "[", "1", "]", ",", "1.0", ",", "-", "shear_values", "[", "1", "]", "*", "0.5", "*", "im_h", "]", ",", "\n", "[", "0.0", ",", "0.0", ",", "1.0", "]", "]", ")", "\n", "\n", "t_scale", "=", "np", ".", "array", "(", "[", "[", "scale_factors", "[", "0", "]", ",", "0.0", ",", "(", "1.0", "-", "scale_factors", "[", "0", "]", ")", "*", "0.5", "*", "im_w", "]", ",", "\n", "[", "0.0", ",", "scale_factors", "[", "1", "]", ",", "(", "1.0", "-", "scale_factors", "[", "1", "]", ")", "*", "0.5", "*", "im_h", "]", ",", "\n", "[", "0.0", ",", "0.0", ",", "1.0", "]", "]", ")", "\n", "\n", "t_mat", "=", "t_scale", "@", "t_rot", "@", "t_shear", "@", "t_mat", "\n", "\n", "t_mat", "[", "0", ",", "2", "]", "+=", "self", ".", "pad_amount", "\n", "t_mat", "[", "1", ",", "2", "]", "+=", "self", ".", "pad_amount", "\n", "\n", "t_mat", "=", "t_mat", "[", ":", "2", ",", ":", "]", "\n", "\n", "return", "t_mat", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine.__call__": [[212, 233], ["torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "augmentation.RandomAffine._construct_t_mat", "augmentation.RandomAffine.crop_to_output", "pytracking.features.preprocessing.torch_to_numpy", "cv2.warpAffine", "cv2.warpAffine", "pytracking.features.preprocessing.numpy_to_torch.reshape", "pytracking.features.preprocessing.numpy_to_torch"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.RandomAffine._construct_t_mat", "home.repos.pwc.inspect_result.researchmm_Stark.features.augmentation.Transform.crop_to_output", "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.torch_to_numpy", "home.repos.pwc.inspect_result.researchmm_Stark.features.preprocessing.numpy_to_torch"], ["", "def", "__call__", "(", "self", ",", "image", ",", "is_mask", "=", "False", ")", ":", "\n", "        ", "input_tensor", "=", "torch", ".", "is_tensor", "(", "image", ")", "\n", "if", "input_tensor", ":", "\n", "            ", "image", "=", "torch_to_numpy", "(", "image", ")", "\n", "\n", "", "do_flip", ",", "theta", ",", "shear_values", ",", "scale_factors", "=", "self", ".", "roll_values", "\n", "t_mat", "=", "self", ".", "_construct_t_mat", "(", "image", ".", "shape", "[", ":", "2", "]", ",", "do_flip", ",", "theta", ",", "shear_values", ",", "scale_factors", ")", "\n", "output_sz", "=", "(", "image", ".", "shape", "[", "1", "]", "+", "2", "*", "self", ".", "pad_amount", ",", "image", ".", "shape", "[", "0", "]", "+", "2", "*", "self", ".", "pad_amount", ")", "\n", "\n", "if", "not", "is_mask", ":", "\n", "            ", "image_t", "=", "cv", ".", "warpAffine", "(", "image", ",", "t_mat", ",", "output_sz", ",", "flags", "=", "cv", ".", "INTER_LINEAR", ",", "\n", "borderMode", "=", "self", ".", "border_flag", ")", "\n", "", "else", ":", "\n", "            ", "image_t", "=", "cv", ".", "warpAffine", "(", "image", ",", "t_mat", ",", "output_sz", ",", "flags", "=", "cv", ".", "INTER_NEAREST", ",", "\n", "borderMode", "=", "self", ".", "border_flag", ")", "\n", "image_t", "=", "image_t", ".", "reshape", "(", "image", ".", "shape", ")", "\n", "\n", "", "if", "input_tensor", ":", "\n", "            ", "image_t", "=", "numpy_to_torch", "(", "image_t", ")", "\n", "\n", "", "return", "self", ".", "crop_to_output", "(", "image_t", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.__init__": [[6, 9], ["None"], "methods", ["None"], ["\n", "def", "__init__", "(", "self", ",", "params", ")", ":", "\n", "        ", "self", ".", "params", "=", "params", "\n", "self", ".", "visdom", "=", "None", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.initialize": [[11, 14], ["None"], "methods", ["None"], ["", "def", "predicts_segmentation_mask", "(", "self", ")", ":", "\n", "        ", "return", "False", "\n", "\n", "", "def", "initialize", "(", "self", ",", "image", ",", "info", ":", "dict", ")", "->", "dict", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.track": [[16, 19], ["None"], "methods", ["None"], ["raise", "NotImplementedError", "\n", "\n", "", "def", "track", "(", "self", ",", "image", ",", "info", ":", "dict", "=", "None", ")", "->", "dict", ":", "\n", "        ", "\"\"\"Overload this function in your tracker. This should track in the frame and update the model.\"\"\"", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.base.basetracker.BaseTracker.visdom_draw_tracking": [[21, 30], ["isinstance", "basetracker.BaseTracker.visdom.register", "basetracker.BaseTracker.visdom.register", "box.items"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register"], ["\n", "", "def", "visdom_draw_tracking", "(", "self", ",", "image", ",", "box", ",", "segmentation", "=", "None", ")", ":", "\n", "        ", "if", "isinstance", "(", "box", ",", "OrderedDict", ")", ":", "\n", "            ", "box", "=", "[", "v", "for", "k", ",", "v", "in", "box", ".", "items", "(", ")", "]", "\n", "", "else", ":", "\n", "            ", "box", "=", "(", "box", ",", ")", "\n", "", "if", "segmentation", "is", "None", ":", "\n", "            ", "self", ".", "visdom", ".", "register", "(", "(", "image", ",", "*", "box", ")", ",", "'Tracking'", ",", "1", ",", "'Tracking'", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "visdom", ".", "register", "(", "(", "image", ",", "*", "box", ",", "segmentation", ")", ",", "'Tracking'", ",", "1", ",", "'Tracking'", ")", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.rfftshift2": [[7, 11], ["torch.cat", "torch.cat"], "function", ["None"], ["@", "tensor_operation", "\n", "def", "rfftshift2", "(", "a", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "h", "=", "a", ".", "shape", "[", "2", "]", "+", "2", "\n", "return", "torch", ".", "cat", "(", "(", "a", "[", ":", ",", ":", ",", "(", "h", "-", "1", ")", "//", "2", ":", ",", "...", "]", ",", "a", "[", ":", ",", ":", ",", ":", "h", "//", "2", ",", "...", "]", ")", ",", "2", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.irfftshift2": [[13, 17], ["int", "torch.cat", "torch.cat"], "function", ["None"], ["", "@", "tensor_operation", "\n", "def", "irfftshift2", "(", "a", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "mid", "=", "int", "(", "(", "a", ".", "shape", "[", "2", "]", "-", "1", ")", "/", "2", ")", "\n", "return", "torch", ".", "cat", "(", "(", "a", "[", ":", ",", ":", ",", "mid", ":", ",", "...", "]", ",", "a", "[", ":", ",", ":", ",", ":", "mid", ",", "...", "]", ")", ",", "2", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.cfft2": [[19, 25], ["fourier.rfftshift2", "torch.rfft", "torch.rfft"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.rfftshift2"], ["", "@", "tensor_operation", "\n", "def", "cfft2", "(", "a", ")", ":", "\n", "    ", "\"\"\"Do FFT and center the low frequency component.\n    Always produces odd (full) output sizes.\"\"\"", "\n", "\n", "return", "rfftshift2", "(", "torch", ".", "rfft", "(", "a", ",", "2", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.cifft2": [[27, 32], ["torch.irfft", "torch.irfft", "fourier.irfftshift2"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.irfftshift2"], ["", "@", "tensor_operation", "\n", "def", "cifft2", "(", "a", ",", "signal_sizes", "=", "None", ")", ":", "\n", "    ", "\"\"\"Do inverse FFT corresponding to cfft2.\"\"\"", "\n", "\n", "return", "torch", ".", "irfft", "(", "irfftshift2", "(", "a", ")", ",", "2", ",", "signal_sizes", "=", "signal_sizes", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.sample_fs": [[34, 62], ["torch.Tensor().float", "torch.Tensor().float", "int", "int", "fourier.cifft2", "ValueError", "int", "int", "fourier.cifft2", "torch.Tensor", "torch.Tensor", "grid_sz.prod().item", "fourier.cifft2", "torch.pad", "torch.Tensor().float.prod().item", "fourier.cifft2", "s.item", "torch.pad", "grid_sz.long().tolist", "grid_sz.prod", "grid_sz.long().tolist", "torch.Tensor().float.prod", "grid_sz.long", "grid_sz.long"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.cifft2", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.cifft2", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.cifft2", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.cifft2"], ["", "@", "tensor_operation", "\n", "def", "sample_fs", "(", "a", ":", "torch", ".", "Tensor", ",", "grid_sz", ":", "torch", ".", "Tensor", "=", "None", ",", "rescale", "=", "True", ")", ":", "\n", "    ", "\"\"\"Samples the Fourier series.\"\"\"", "\n", "\n", "# Size of the fourier series", "\n", "sz", "=", "torch", ".", "Tensor", "(", "[", "a", ".", "shape", "[", "2", "]", ",", "2", "*", "a", ".", "shape", "[", "3", "]", "-", "1", "]", ")", ".", "float", "(", ")", "\n", "\n", "# Default grid", "\n", "if", "grid_sz", "is", "None", "or", "sz", "[", "0", "]", "==", "grid_sz", "[", "0", "]", "and", "sz", "[", "1", "]", "==", "grid_sz", "[", "1", "]", ":", "\n", "        ", "if", "rescale", ":", "\n", "            ", "return", "sz", ".", "prod", "(", ")", ".", "item", "(", ")", "*", "cifft2", "(", "a", ")", "\n", "", "return", "cifft2", "(", "a", ")", "\n", "\n", "", "if", "sz", "[", "0", "]", ">", "grid_sz", "[", "0", "]", "or", "sz", "[", "1", "]", ">", "grid_sz", "[", "1", "]", ":", "\n", "        ", "raise", "ValueError", "(", "\"Only grid sizes that are smaller than the Fourier series size are supported.\"", ")", "\n", "\n", "", "tot_pad", "=", "(", "grid_sz", "-", "sz", ")", ".", "tolist", "(", ")", "\n", "is_even", "=", "[", "s", ".", "item", "(", ")", "%", "2", "==", "0", "for", "s", "in", "sz", "]", "\n", "\n", "# Compute paddings", "\n", "pad_top", "=", "int", "(", "(", "tot_pad", "[", "0", "]", "+", "1", ")", "/", "2", ")", "if", "is_even", "[", "0", "]", "else", "int", "(", "tot_pad", "[", "0", "]", "/", "2", ")", "\n", "pad_bottom", "=", "int", "(", "tot_pad", "[", "0", "]", "-", "pad_top", ")", "\n", "pad_right", "=", "int", "(", "(", "tot_pad", "[", "1", "]", "+", "1", ")", "/", "2", ")", "\n", "\n", "if", "rescale", ":", "\n", "        ", "return", "grid_sz", ".", "prod", "(", ")", ".", "item", "(", ")", "*", "cifft2", "(", "F", ".", "pad", "(", "a", ",", "(", "0", ",", "0", ",", "0", ",", "pad_right", ",", "pad_top", ",", "pad_bottom", ")", ")", ",", "signal_sizes", "=", "grid_sz", ".", "long", "(", ")", ".", "tolist", "(", ")", ")", "\n", "", "else", ":", "\n", "        ", "return", "cifft2", "(", "F", ".", "pad", "(", "a", ",", "(", "0", ",", "0", ",", "0", ",", "pad_right", ",", "pad_top", ",", "pad_bottom", ")", ")", ",", "signal_sizes", "=", "grid_sz", ".", "long", "(", ")", ".", "tolist", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.get_frequency_coord": [[64, 75], ["torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "ky.unsqueeze.unsqueeze", "kx.unsqueeze.unsqueeze", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "int", "int", "int"], "function", ["None"], ["", "", "def", "get_frequency_coord", "(", "sz", ",", "add_complex_dim", "=", "False", ",", "device", "=", "'cpu'", ")", ":", "\n", "    ", "\"\"\"Frequency coordinates.\"\"\"", "\n", "\n", "ky", "=", "torch", ".", "arange", "(", "-", "int", "(", "(", "sz", "[", "0", "]", "-", "1", ")", "/", "2", ")", ",", "int", "(", "sz", "[", "0", "]", "/", "2", "+", "1", ")", ",", "dtype", "=", "torch", ".", "float32", ",", "device", "=", "device", ")", ".", "view", "(", "1", ",", "1", ",", "-", "1", ",", "1", ")", "\n", "kx", "=", "torch", ".", "arange", "(", "0", ",", "int", "(", "sz", "[", "1", "]", "/", "2", "+", "1", ")", ",", "dtype", "=", "torch", ".", "float32", ",", "device", "=", "device", ")", ".", "view", "(", "1", ",", "1", ",", "1", ",", "-", "1", ")", "\n", "\n", "if", "add_complex_dim", ":", "\n", "        ", "ky", "=", "ky", ".", "unsqueeze", "(", "-", "1", ")", "\n", "kx", "=", "kx", ".", "unsqueeze", "(", "-", "1", ")", "\n", "\n", "", "return", "ky", ",", "kx", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.shift_fs": [[77, 93], ["fourier.get_frequency_coord", "pytracking.complex.mult", "a.dim", "ValueError", "pytracking.complex.mult", "pytracking.complex.exp_imag", "pytracking.complex.exp_imag", "shift[].item", "shift[].item"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.get_frequency_coord", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.exp_imag", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.exp_imag"], ["", "@", "tensor_operation", "\n", "def", "shift_fs", "(", "a", ":", "torch", ".", "Tensor", ",", "shift", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "\"\"\"Shift a sample a in the Fourier domain.\n    Params:\n        a : The fourier coefficiens of the sample.\n        shift : The shift to be performed normalized to the range [-pi, pi].\"\"\"", "\n", "\n", "if", "a", ".", "dim", "(", ")", "!=", "5", ":", "\n", "        ", "raise", "ValueError", "(", "'a must be the Fourier coefficients, a 5-dimensional tensor.'", ")", "\n", "\n", "", "if", "shift", "[", "0", "]", "==", "0", "and", "shift", "[", "1", "]", "==", "0", ":", "\n", "        ", "return", "a", "\n", "\n", "", "ky", ",", "kx", "=", "get_frequency_coord", "(", "(", "a", ".", "shape", "[", "2", "]", ",", "2", "*", "a", ".", "shape", "[", "3", "]", "-", "1", ")", ",", "device", "=", "a", ".", "device", ")", "\n", "\n", "return", "complex", ".", "mult", "(", "complex", ".", "mult", "(", "a", ",", "complex", ".", "exp_imag", "(", "shift", "[", "0", "]", ".", "item", "(", ")", "*", "ky", ")", ")", ",", "complex", ".", "exp_imag", "(", "shift", "[", "1", "]", ".", "item", "(", ")", "*", "kx", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.sum_fs": [[95, 115], ["sorted", "e.clone", "int", "int", "int"], "function", ["None"], ["", "def", "sum_fs", "(", "a", ":", "TensorList", ")", "->", "torch", ".", "Tensor", ":", "\n", "    ", "\"\"\"Sum a list of Fourier series expansions.\"\"\"", "\n", "\n", "s", "=", "None", "\n", "mid", "=", "None", "\n", "\n", "for", "e", "in", "sorted", "(", "a", ",", "key", "=", "lambda", "elem", ":", "elem", ".", "shape", "[", "-", "3", "]", ",", "reverse", "=", "True", ")", ":", "\n", "        ", "if", "s", "is", "None", ":", "\n", "            ", "s", "=", "e", ".", "clone", "(", ")", "\n", "mid", "=", "int", "(", "(", "s", ".", "shape", "[", "-", "3", "]", "-", "1", ")", "/", "2", ")", "\n", "", "else", ":", "\n", "# Compute coordinates", "\n", "            ", "top", "=", "mid", "-", "int", "(", "(", "e", ".", "shape", "[", "-", "3", "]", "-", "1", ")", "/", "2", ")", "\n", "bottom", "=", "mid", "+", "int", "(", "e", ".", "shape", "[", "-", "3", "]", "/", "2", ")", "+", "1", "\n", "right", "=", "e", ".", "shape", "[", "-", "2", "]", "\n", "\n", "# Add the data", "\n", "s", "[", "...", ",", "top", ":", "bottom", ",", ":", "right", ",", ":", "]", "+=", "e", "\n", "\n", "", "", "return", "s", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.sum_fs12": [[117, 137], ["sorted", "e.clone", "int", "int", "int"], "function", ["None"], ["", "def", "sum_fs12", "(", "a", ":", "TensorList", ")", "->", "torch", ".", "Tensor", ":", "\n", "    ", "\"\"\"Sum a list of Fourier series expansions.\"\"\"", "\n", "\n", "s", "=", "None", "\n", "mid", "=", "None", "\n", "\n", "for", "e", "in", "sorted", "(", "a", ",", "key", "=", "lambda", "elem", ":", "elem", ".", "shape", "[", "0", "]", ",", "reverse", "=", "True", ")", ":", "\n", "        ", "if", "s", "is", "None", ":", "\n", "            ", "s", "=", "e", ".", "clone", "(", ")", "\n", "mid", "=", "int", "(", "(", "s", ".", "shape", "[", "0", "]", "-", "1", ")", "/", "2", ")", "\n", "", "else", ":", "\n", "# Compute coordinates", "\n", "            ", "top", "=", "mid", "-", "int", "(", "(", "e", ".", "shape", "[", "0", "]", "-", "1", ")", "/", "2", ")", "\n", "bottom", "=", "mid", "+", "int", "(", "e", ".", "shape", "[", "0", "]", "/", "2", ")", "+", "1", "\n", "right", "=", "e", ".", "shape", "[", "1", "]", "\n", "\n", "# Add the data", "\n", "s", "[", "top", ":", "bottom", ",", ":", "right", ",", "...", "]", "+=", "e", "\n", "\n", "", "", "return", "s", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.inner_prod_fs": [[139, 147], ["pytracking.complex.is_complex", "pytracking.complex.is_complex", "pytracking.complex.is_real", "pytracking.complex.is_real", "NotImplementedError", "a[].reshape", "b[].reshape", "a.reshape", "b.reshape", "a[].reshape", "b[].reshape", "a.reshape", "b.reshape"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_complex", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_complex", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real"], ["", "@", "tensor_operation", "\n", "def", "inner_prod_fs", "(", "a", ":", "torch", ".", "Tensor", ",", "b", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "if", "complex", ".", "is_complex", "(", "a", ")", "and", "complex", ".", "is_complex", "(", "b", ")", ":", "\n", "        ", "return", "2", "*", "(", "a", ".", "reshape", "(", "-", "1", ")", "@", "b", ".", "reshape", "(", "-", "1", ")", ")", "-", "a", "[", ":", ",", ":", ",", ":", ",", "0", ",", ":", "]", ".", "reshape", "(", "-", "1", ")", "@", "b", "[", ":", ",", ":", ",", ":", ",", "0", ",", ":", "]", ".", "reshape", "(", "-", "1", ")", "\n", "", "elif", "complex", ".", "is_real", "(", "a", ")", "and", "complex", ".", "is_real", "(", "b", ")", ":", "\n", "        ", "return", "2", "*", "(", "a", ".", "reshape", "(", "-", "1", ")", "@", "b", ".", "reshape", "(", "-", "1", ")", ")", "-", "a", "[", ":", ",", ":", ",", ":", ",", "0", "]", ".", "reshape", "(", "-", "1", ")", "@", "b", "[", ":", ",", ":", ",", ":", ",", "0", "]", ".", "reshape", "(", "-", "1", ")", "\n", "", "else", ":", "\n", "        ", "raise", "NotImplementedError", "(", "'Not implemented for mixed real and complex.'", ")", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.L2Problem.__call__": [[12, 15], ["None"], "methods", ["None"], ["def", "__call__", "(", "self", ",", "x", ":", "TensorList", ")", "->", "TensorList", ":", "\n", "        ", "\"\"\"Shall compute the residuals of the problem.\"\"\"", "\n", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.L2Problem.ip_input": [[16, 19], ["sum", "a.view", "b.view"], "methods", ["None"], ["", "def", "ip_input", "(", "self", ",", "a", ",", "b", ")", ":", "\n", "        ", "\"\"\"Inner product of the input space.\"\"\"", "\n", "return", "sum", "(", "a", ".", "view", "(", "-", "1", ")", "@", "b", ".", "view", "(", "-", "1", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.L2Problem.ip_output": [[20, 23], ["sum", "a.view", "b.view"], "methods", ["None"], ["", "def", "ip_output", "(", "self", ",", "a", ",", "b", ")", ":", "\n", "        ", "\"\"\"Inner product of the output space.\"\"\"", "\n", "return", "sum", "(", "a", ".", "view", "(", "-", "1", ")", "@", "b", ".", "view", "(", "-", "1", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.L2Problem.M1": [[24, 27], ["None"], "methods", ["None"], ["", "def", "M1", "(", "self", ",", "x", ")", ":", "\n", "        ", "\"\"\"M1 preconditioner.\"\"\"", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.L2Problem.M2": [[28, 31], ["None"], "methods", ["None"], ["", "def", "M2", "(", "self", ",", "x", ")", ":", "\n", "        ", "\"\"\"M2 preconditioner.\"\"\"", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.MinimizationProblem.__call__": [[34, 37], ["None"], "methods", ["None"], ["def", "__call__", "(", "self", ",", "x", ":", "TensorList", ")", "->", "TensorList", ":", "\n", "        ", "\"\"\"Shall compute the loss.\"\"\"", "\n", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.MinimizationProblem.ip_input": [[38, 41], ["sum", "a.view", "b.view"], "methods", ["None"], ["", "def", "ip_input", "(", "self", ",", "a", ",", "b", ")", ":", "\n", "        ", "\"\"\"Inner product of the input space.\"\"\"", "\n", "return", "sum", "(", "a", ".", "view", "(", "-", "1", ")", "@", "b", ".", "view", "(", "-", "1", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.MinimizationProblem.M1": [[42, 44], ["None"], "methods", ["None"], ["", "def", "M1", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.MinimizationProblem.M2": [[45, 47], ["None"], "methods", ["None"], ["", "def", "M2", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.__init__": [[52, 65], ["torch.ones", "torch.ones", "torch.ones", "torch.ones"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "fletcher_reeves", "=", "True", ",", "standard_alpha", "=", "True", ",", "direction_forget_factor", "=", "0", ",", "debug", "=", "False", ")", ":", "\n", "        ", "self", ".", "fletcher_reeves", "=", "fletcher_reeves", "\n", "self", ".", "standard_alpha", "=", "standard_alpha", "\n", "self", ".", "direction_forget_factor", "=", "direction_forget_factor", "\n", "self", ".", "debug", "=", "debug", "\n", "\n", "# State", "\n", "self", ".", "p", "=", "None", "\n", "self", ".", "rho", "=", "torch", ".", "ones", "(", "1", ")", "\n", "self", ".", "r_prev", "=", "None", "\n", "\n", "# Right hand side", "\n", "self", ".", "b", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.reset_state": [[66, 70], ["torch.ones", "torch.ones", "torch.ones", "torch.ones"], "methods", ["None"], ["", "def", "reset_state", "(", "self", ")", ":", "\n", "        ", "self", ".", "p", "=", "None", "\n", "self", ".", "rho", "=", "torch", ".", "ones", "(", "1", ")", "\n", "self", ".", "r_prev", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.run_CG": [[72, 164], ["range", "optimization.ConjugateGradientBase.reset_state", "optimization.ConjugateGradientBase.b.clone", "optimization.ConjugateGradientBase.residual_norm", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "optimization.ConjugateGradientBase.M1", "optimization.ConjugateGradientBase.M2", "optimization.ConjugateGradientBase.ip", "optimization.ConjugateGradientBase.check_zero", "optimization.ConjugateGradientBase.A", "optimization.ConjugateGradientBase.ip", "optimization.ConjugateGradientBase.A", "optimization.ConjugateGradientBase.clone", "beta.clamp.clamp.clamp", "optimization.ConjugateGradientBase.clone", "optimization.ConjugateGradientBase.residual_norm", "optimization.ConjugateGradientBase.evaluate_CG_iteration", "print", "optimization.ConjugateGradientBase.ip", "optimization.ConjugateGradientBase.ip", "print"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.reset_state", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.residual_norm", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.M1", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.M2", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.ip", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.check_zero", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.A", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.ip", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.A", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.residual_norm", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.evaluate_CG_iteration", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.ip", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.ip"], ["", "def", "run_CG", "(", "self", ",", "num_iter", ",", "x", "=", "None", ",", "eps", "=", "0.0", ")", ":", "\n", "        ", "\"\"\"Main conjugate gradient method.\n\n        args:\n            num_iter: Number of iterations.\n            x: Initial guess. Assumed zero if None.\n            eps: Stop if the residual norm gets smaller than this.\n        \"\"\"", "\n", "\n", "# Apply forgetting factor", "\n", "if", "self", ".", "direction_forget_factor", "==", "0", ":", "\n", "            ", "self", ".", "reset_state", "(", ")", "\n", "", "elif", "self", ".", "p", "is", "not", "None", ":", "\n", "            ", "self", ".", "rho", "/=", "self", ".", "direction_forget_factor", "\n", "\n", "", "if", "x", "is", "None", ":", "\n", "            ", "r", "=", "self", ".", "b", ".", "clone", "(", ")", "\n", "", "else", ":", "\n", "            ", "r", "=", "self", ".", "b", "-", "self", ".", "A", "(", "x", ")", "\n", "\n", "# Norms of residuals etc for debugging", "\n", "", "resvec", "=", "None", "\n", "if", "self", ".", "debug", ":", "\n", "            ", "normr", "=", "self", ".", "residual_norm", "(", "r", ")", "\n", "resvec", "=", "torch", ".", "zeros", "(", "num_iter", "+", "1", ")", "\n", "resvec", "[", "0", "]", "=", "normr", "\n", "\n", "# Loop over iterations", "\n", "", "for", "ii", "in", "range", "(", "num_iter", ")", ":", "\n", "# Preconditioners", "\n", "            ", "y", "=", "self", ".", "M1", "(", "r", ")", "\n", "z", "=", "self", ".", "M2", "(", "y", ")", "\n", "\n", "rho1", "=", "self", ".", "rho", "\n", "self", ".", "rho", "=", "self", ".", "ip", "(", "r", ",", "z", ")", "\n", "\n", "if", "self", ".", "check_zero", "(", "self", ".", "rho", ")", ":", "\n", "                ", "if", "self", ".", "debug", ":", "\n", "                    ", "print", "(", "'Stopped CG since rho = 0'", ")", "\n", "if", "resvec", "is", "not", "None", ":", "\n", "                        ", "resvec", "=", "resvec", "[", ":", "ii", "+", "1", "]", "\n", "", "", "return", "x", ",", "resvec", "\n", "\n", "", "if", "self", ".", "p", "is", "None", ":", "\n", "                ", "self", ".", "p", "=", "z", ".", "clone", "(", ")", "\n", "", "else", ":", "\n", "                ", "if", "self", ".", "fletcher_reeves", ":", "\n", "                    ", "beta", "=", "self", ".", "rho", "/", "rho1", "\n", "", "else", ":", "\n", "                    ", "rho2", "=", "self", ".", "ip", "(", "self", ".", "r_prev", ",", "z", ")", "\n", "beta", "=", "(", "self", ".", "rho", "-", "rho2", ")", "/", "rho1", "\n", "\n", "", "beta", "=", "beta", ".", "clamp", "(", "0", ")", "\n", "self", ".", "p", "=", "z", "+", "self", ".", "p", "*", "beta", "\n", "\n", "", "q", "=", "self", ".", "A", "(", "self", ".", "p", ")", "\n", "pq", "=", "self", ".", "ip", "(", "self", ".", "p", ",", "q", ")", "\n", "\n", "if", "self", ".", "standard_alpha", ":", "\n", "                ", "alpha", "=", "self", ".", "rho", "/", "pq", "\n", "", "else", ":", "\n", "                ", "alpha", "=", "self", ".", "ip", "(", "self", ".", "p", ",", "r", ")", "/", "pq", "\n", "\n", "# Save old r for PR formula", "\n", "", "if", "not", "self", ".", "fletcher_reeves", ":", "\n", "                ", "self", ".", "r_prev", "=", "r", ".", "clone", "(", ")", "\n", "\n", "# Form new iterate", "\n", "", "if", "x", "is", "None", ":", "\n", "                ", "x", "=", "self", ".", "p", "*", "alpha", "\n", "", "else", ":", "\n", "                ", "x", "+=", "self", ".", "p", "*", "alpha", "\n", "\n", "", "if", "ii", "<", "num_iter", "-", "1", "or", "self", ".", "debug", ":", "\n", "                ", "r", "-=", "q", "*", "alpha", "\n", "\n", "", "if", "eps", ">", "0.0", "or", "self", ".", "debug", ":", "\n", "                ", "normr", "=", "self", ".", "residual_norm", "(", "r", ")", "\n", "\n", "", "if", "self", ".", "debug", ":", "\n", "                ", "self", ".", "evaluate_CG_iteration", "(", "x", ")", "\n", "resvec", "[", "ii", "+", "1", "]", "=", "normr", "\n", "\n", "", "if", "eps", ">", "0", "and", "normr", "<=", "eps", ":", "\n", "                ", "if", "self", ".", "debug", ":", "\n", "                    ", "print", "(", "'Stopped CG since norm smaller than eps'", ")", "\n", "", "break", "\n", "\n", "", "", "if", "resvec", "is", "not", "None", ":", "\n", "            ", "resvec", "=", "resvec", "[", ":", "ii", "+", "2", "]", "\n", "\n", "", "return", "x", ",", "resvec", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.A": [[166, 169], ["None"], "methods", ["None"], ["", "def", "A", "(", "self", ",", "x", ")", ":", "\n", "# Implements the left hand operation", "\n", "        ", "raise", "NotImplementedError", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.ip": [[170, 173], ["a.view", "b.view"], "methods", ["None"], ["", "def", "ip", "(", "self", ",", "a", ",", "b", ")", ":", "\n", "# Implements the inner product", "\n", "        ", "return", "a", ".", "view", "(", "-", "1", ")", "@", "b", ".", "view", "(", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.residual_norm": [[174, 179], ["optimization.ConjugateGradientBase.ip().sum", "isinstance", "sum.sqrt", "sum", "optimization.ConjugateGradientBase.ip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.ip"], ["", "def", "residual_norm", "(", "self", ",", "r", ")", ":", "\n", "        ", "res", "=", "self", ".", "ip", "(", "r", ",", "r", ")", ".", "sum", "(", ")", "\n", "if", "isinstance", "(", "res", ",", "(", "TensorList", ",", "list", ",", "tuple", ")", ")", ":", "\n", "            ", "res", "=", "sum", "(", "res", ")", "\n", "", "return", "res", ".", "sqrt", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.check_zero": [[180, 185], ["isinstance", "s.abs", "sum", "sum.item"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs"], ["", "def", "check_zero", "(", "self", ",", "s", ",", "eps", "=", "0.0", ")", ":", "\n", "        ", "ss", "=", "s", ".", "abs", "(", ")", "<=", "eps", "\n", "if", "isinstance", "(", "ss", ",", "(", "TensorList", ",", "list", ",", "tuple", ")", ")", ":", "\n", "            ", "ss", "=", "sum", "(", "ss", ")", "\n", "", "return", "ss", ".", "item", "(", ")", ">", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.M1": [[186, 189], ["None"], "methods", ["None"], ["", "def", "M1", "(", "self", ",", "x", ")", ":", "\n", "# M1 preconditioner", "\n", "        ", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.M2": [[190, 193], ["None"], "methods", ["None"], ["", "def", "M2", "(", "self", ",", "x", ")", ":", "\n", "# M2 preconditioner", "\n", "        ", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.evaluate_CG_iteration": [[194, 196], ["None"], "methods", ["None"], ["", "def", "evaluate_CG_iteration", "(", "self", ",", "x", ")", ":", "\n", "        ", "pass", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradient.__init__": [[202, 220], ["optimization.ConjugateGradientBase.__init__", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "problem", ":", "L2Problem", ",", "variable", ":", "TensorList", ",", "cg_eps", "=", "0.0", ",", "fletcher_reeves", "=", "True", ",", "\n", "standard_alpha", "=", "True", ",", "direction_forget_factor", "=", "0", ",", "debug", "=", "False", ",", "plotting", "=", "False", ",", "visdom", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "fletcher_reeves", ",", "standard_alpha", ",", "direction_forget_factor", ",", "debug", "or", "plotting", ")", "\n", "\n", "self", ".", "problem", "=", "problem", "\n", "self", ".", "x", "=", "variable", "\n", "\n", "self", ".", "plotting", "=", "plotting", "\n", "self", ".", "fig_num", "=", "(", "10", ",", "11", ")", "\n", "self", ".", "visdom", "=", "visdom", "\n", "\n", "self", ".", "cg_eps", "=", "cg_eps", "\n", "self", ".", "f0", "=", "None", "\n", "self", ".", "g", "=", "None", "\n", "self", ".", "dfdxt_g", "=", "None", "\n", "\n", "self", ".", "residuals", "=", "torch", ".", "zeros", "(", "0", ")", "\n", "self", ".", "losses", "=", "torch", ".", "zeros", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradient.clear_temp": [[221, 225], ["None"], "methods", ["None"], ["", "def", "clear_temp", "(", "self", ")", ":", "\n", "        ", "self", ".", "f0", "=", "None", "\n", "self", ".", "g", "=", "None", "\n", "self", ".", "dfdxt_g", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradient.run": [[227, 276], ["optimization.ConjugateGradient.x.requires_grad_", "optimization.ConjugateGradient.problem", "optimization.ConjugateGradient.f0.detach", "optimization.ConjugateGradient.g.requires_grad_", "pytracking.libs.TensorList", "optimization.ConjugateGradient.run_CG", "optimization.ConjugateGradient.x.detach_", "optimization.ConjugateGradient.x.detach_", "optimization.ConjugateGradient.clear_temp", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "optimization.ConjugateGradient.problem.ip_output", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "optimization.ConjugateGradient.dfdxt_g.detach", "optimization.ConjugateGradient.problem", "optimization.ConjugateGradient.problem.ip_output", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "optimization.ConjugateGradient.visdom.register", "optimization.ConjugateGradient.visdom.register", "pytracking.utils.plotting.plot_graph", "pytracking.utils.plotting.plot_graph"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.run_CG", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GradientDescent.clear_temp", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.L2Problem.ip_output", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.L2Problem.ip_output", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.plot_graph", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.plot_graph"], ["", "def", "run", "(", "self", ",", "num_cg_iter", ")", ":", "\n", "        ", "\"\"\"Run the oprimizer with the provided number of iterations.\"\"\"", "\n", "\n", "if", "num_cg_iter", "==", "0", ":", "\n", "            ", "return", "\n", "\n", "", "lossvec", "=", "None", "\n", "if", "self", ".", "debug", ":", "\n", "            ", "lossvec", "=", "torch", ".", "zeros", "(", "2", ")", "\n", "\n", "", "self", ".", "x", ".", "requires_grad_", "(", "True", ")", "\n", "\n", "# Evaluate function at current estimate", "\n", "self", ".", "f0", "=", "self", ".", "problem", "(", "self", ".", "x", ")", "\n", "\n", "# Create copy with graph detached", "\n", "self", ".", "g", "=", "self", ".", "f0", ".", "detach", "(", ")", "\n", "\n", "if", "self", ".", "debug", ":", "\n", "            ", "lossvec", "[", "0", "]", "=", "self", ".", "problem", ".", "ip_output", "(", "self", ".", "g", ",", "self", ".", "g", ")", "\n", "\n", "", "self", ".", "g", ".", "requires_grad_", "(", "True", ")", "\n", "\n", "# Get df/dx^t @ f0", "\n", "self", ".", "dfdxt_g", "=", "TensorList", "(", "torch", ".", "autograd", ".", "grad", "(", "self", ".", "f0", ",", "self", ".", "x", ",", "self", ".", "g", ",", "create_graph", "=", "True", ")", ")", "\n", "\n", "# Get the right hand side", "\n", "self", ".", "b", "=", "-", "self", ".", "dfdxt_g", ".", "detach", "(", ")", "\n", "\n", "# Run CG", "\n", "delta_x", ",", "res", "=", "self", ".", "run_CG", "(", "num_cg_iter", ",", "eps", "=", "self", ".", "cg_eps", ")", "\n", "\n", "self", ".", "x", ".", "detach_", "(", ")", "\n", "self", ".", "x", "+=", "delta_x", "\n", "\n", "if", "self", ".", "debug", ":", "\n", "            ", "self", ".", "f0", "=", "self", ".", "problem", "(", "self", ".", "x", ")", "\n", "lossvec", "[", "-", "1", "]", "=", "self", ".", "problem", ".", "ip_output", "(", "self", ".", "f0", ",", "self", ".", "f0", ")", "\n", "self", ".", "residuals", "=", "torch", ".", "cat", "(", "(", "self", ".", "residuals", ",", "res", ")", ")", "\n", "self", ".", "losses", "=", "torch", ".", "cat", "(", "(", "self", ".", "losses", ",", "lossvec", ")", ")", "\n", "if", "self", ".", "visdom", "is", "not", "None", ":", "\n", "                ", "self", ".", "visdom", ".", "register", "(", "self", ".", "losses", ",", "'lineplot'", ",", "3", ",", "'Loss'", ")", "\n", "self", ".", "visdom", ".", "register", "(", "self", ".", "residuals", ",", "'lineplot'", ",", "3", ",", "'CG residuals'", ")", "\n", "", "elif", "self", ".", "plotting", ":", "\n", "                ", "plot_graph", "(", "self", ".", "losses", ",", "self", ".", "fig_num", "[", "0", "]", ",", "title", "=", "'Loss'", ")", "\n", "plot_graph", "(", "self", ".", "residuals", ",", "self", ".", "fig_num", "[", "1", "]", ",", "title", "=", "'CG residuals'", ")", "\n", "\n", "", "", "self", ".", "x", ".", "detach_", "(", ")", "\n", "self", ".", "clear_temp", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradient.A": [[278, 281], ["torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "pytracking.libs.TensorList", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad"], "methods", ["None"], ["", "def", "A", "(", "self", ",", "x", ")", ":", "\n", "        ", "dfdx_x", "=", "torch", ".", "autograd", ".", "grad", "(", "self", ".", "dfdxt_g", ",", "self", ".", "g", ",", "x", ",", "retain_graph", "=", "True", ")", "\n", "return", "TensorList", "(", "torch", ".", "autograd", ".", "grad", "(", "self", ".", "f0", ",", "self", ".", "x", ",", "dfdx_x", ",", "retain_graph", "=", "True", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradient.ip": [[282, 284], ["optimization.ConjugateGradient.problem.ip_input"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.MinimizationProblem.ip_input"], ["", "def", "ip", "(", "self", ",", "a", ",", "b", ")", ":", "\n", "        ", "return", "self", ".", "problem", ".", "ip_input", "(", "a", ",", "b", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradient.M1": [[285, 287], ["optimization.ConjugateGradient.problem.M1"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.M1"], ["", "def", "M1", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "self", ".", "problem", ".", "M1", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradient.M2": [[288, 290], ["optimization.ConjugateGradient.problem.M2"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.M2"], ["", "def", "M2", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "self", ".", "problem", ".", "M2", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GaussNewtonCG.__init__": [[296, 317], ["optimization.ConjugateGradientBase.__init__", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "problem", ":", "L2Problem", ",", "variable", ":", "TensorList", ",", "cg_eps", "=", "0.0", ",", "fletcher_reeves", "=", "True", ",", "\n", "standard_alpha", "=", "True", ",", "direction_forget_factor", "=", "0", ",", "debug", "=", "False", ",", "analyze", "=", "False", ",", "plotting", "=", "False", ",", "\n", "visdom", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "fletcher_reeves", ",", "standard_alpha", ",", "direction_forget_factor", ",", "debug", "or", "analyze", "or", "plotting", ")", "\n", "\n", "self", ".", "problem", "=", "problem", "\n", "self", ".", "x", "=", "variable", "\n", "\n", "self", ".", "analyze_convergence", "=", "analyze", "\n", "self", ".", "plotting", "=", "plotting", "\n", "self", ".", "fig_num", "=", "(", "10", ",", "11", ",", "12", ")", "\n", "self", ".", "visdom", "=", "visdom", "\n", "\n", "self", ".", "cg_eps", "=", "cg_eps", "\n", "self", ".", "f0", "=", "None", "\n", "self", ".", "g", "=", "None", "\n", "self", ".", "dfdxt_g", "=", "None", "\n", "\n", "self", ".", "residuals", "=", "torch", ".", "zeros", "(", "0", ")", "\n", "self", ".", "losses", "=", "torch", ".", "zeros", "(", "0", ")", "\n", "self", ".", "gradient_mags", "=", "torch", ".", "zeros", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GaussNewtonCG.clear_temp": [[318, 322], ["None"], "methods", ["None"], ["", "def", "clear_temp", "(", "self", ")", ":", "\n", "        ", "self", ".", "f0", "=", "None", "\n", "self", ".", "g", "=", "None", "\n", "self", ".", "dfdxt_g", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GaussNewtonCG.run_GN": [[324, 326], ["optimization.GaussNewtonCG.run"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.run"], ["", "def", "run_GN", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "return", "self", ".", "run", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GaussNewtonCG.run": [[328, 375], ["isinstance", "len", "optimization.GaussNewtonCG.x.detach_", "optimization.GaussNewtonCG.clear_temp", "optimization.GaussNewtonCG.evaluate_CG_iteration", "optimization.GaussNewtonCG.run_GN_iter", "ValueError", "optimization.GaussNewtonCG.problem", "optimization.GaussNewtonCG.problem.ip_output", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "optimization.GaussNewtonCG.visdom.register", "optimization.GaussNewtonCG.visdom.register", "optimization.GaussNewtonCG.visdom.register", "pytracking.utils.plotting.plot_graph", "pytracking.utils.plotting.plot_graph", "optimization.GaussNewtonCG.detach().cpu().view", "pytracking.utils.plotting.plot_graph", "optimization.GaussNewtonCG.detach().cpu", "optimization.GaussNewtonCG.detach"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GradientDescent.clear_temp", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.evaluate_CG_iteration", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GaussNewtonCG.run_GN_iter", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.L2Problem.ip_output", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.plot_graph", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.plot_graph", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.plot_graph"], ["", "def", "run", "(", "self", ",", "num_cg_iter", ",", "num_gn_iter", "=", "None", ")", ":", "\n", "        ", "\"\"\"Run the optimizer.\n        args:\n            num_cg_iter: Number of CG iterations per GN iter. If list, then each entry specifies number of CG iterations\n                         and number of GN iterations is given by the length of the list.\n            num_gn_iter: Number of GN iterations. Shall only be given if num_cg_iter is an integer.\n        \"\"\"", "\n", "\n", "if", "isinstance", "(", "num_cg_iter", ",", "int", ")", ":", "\n", "            ", "if", "num_gn_iter", "is", "None", ":", "\n", "                ", "raise", "ValueError", "(", "'Must specify number of GN iter if CG iter is constant'", ")", "\n", "", "num_cg_iter", "=", "[", "num_cg_iter", "]", "*", "num_gn_iter", "\n", "\n", "", "num_gn_iter", "=", "len", "(", "num_cg_iter", ")", "\n", "if", "num_gn_iter", "==", "0", ":", "\n", "            ", "return", "\n", "\n", "", "if", "self", ".", "analyze_convergence", ":", "\n", "            ", "self", ".", "evaluate_CG_iteration", "(", "0", ")", "\n", "\n", "# Outer loop for running the GN iterations.", "\n", "", "for", "cg_iter", "in", "num_cg_iter", ":", "\n", "            ", "self", ".", "run_GN_iter", "(", "cg_iter", ")", "\n", "\n", "", "if", "self", ".", "debug", ":", "\n", "            ", "if", "not", "self", ".", "analyze_convergence", ":", "\n", "                ", "self", ".", "f0", "=", "self", ".", "problem", "(", "self", ".", "x", ")", "\n", "loss", "=", "self", ".", "problem", ".", "ip_output", "(", "self", ".", "f0", ",", "self", ".", "f0", ")", "\n", "self", ".", "losses", "=", "torch", ".", "cat", "(", "(", "self", ".", "losses", ",", "loss", ".", "detach", "(", ")", ".", "cpu", "(", ")", ".", "view", "(", "-", "1", ")", ")", ")", "\n", "\n", "", "if", "self", ".", "visdom", "is", "not", "None", ":", "\n", "                ", "self", ".", "visdom", ".", "register", "(", "self", ".", "losses", ",", "'lineplot'", ",", "3", ",", "'Loss'", ")", "\n", "self", ".", "visdom", ".", "register", "(", "self", ".", "residuals", ",", "'lineplot'", ",", "3", ",", "'CG residuals'", ")", "\n", "\n", "if", "self", ".", "analyze_convergence", ":", "\n", "                    ", "self", ".", "visdom", ".", "register", "(", "self", ".", "gradient_mags", ",", "'lineplot'", ",", "4", ",", "'Gradient magnitude'", ")", "\n", "", "", "elif", "self", ".", "plotting", ":", "\n", "                ", "plot_graph", "(", "self", ".", "losses", ",", "self", ".", "fig_num", "[", "0", "]", ",", "title", "=", "'Loss'", ")", "\n", "plot_graph", "(", "self", ".", "residuals", ",", "self", ".", "fig_num", "[", "1", "]", ",", "title", "=", "'CG residuals'", ")", "\n", "if", "self", ".", "analyze_convergence", ":", "\n", "                    ", "plot_graph", "(", "self", ".", "gradient_mags", ",", "self", ".", "fig_num", "[", "2", "]", ",", "'Gradient magnitude'", ")", "\n", "\n", "\n", "", "", "", "self", ".", "x", ".", "detach_", "(", ")", "\n", "self", ".", "clear_temp", "(", ")", "\n", "\n", "return", "self", ".", "losses", ",", "self", ".", "residuals", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GaussNewtonCG.run_GN_iter": [[377, 408], ["optimization.GaussNewtonCG.x.requires_grad_", "optimization.GaussNewtonCG.problem", "optimization.GaussNewtonCG.f0.detach", "optimization.GaussNewtonCG.g.requires_grad_", "pytracking.libs.TensorList", "optimization.GaussNewtonCG.run_CG", "optimization.GaussNewtonCG.x.detach_", "optimization.GaussNewtonCG.problem.ip_output", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "optimization.GaussNewtonCG.dfdxt_g.detach", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "optimization.GaussNewtonCG.detach().cpu().view", "optimization.GaussNewtonCG.detach().cpu", "optimization.GaussNewtonCG.detach"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.run_CG", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.L2Problem.ip_output"], ["", "def", "run_GN_iter", "(", "self", ",", "num_cg_iter", ")", ":", "\n", "        ", "\"\"\"Runs a single GN iteration.\"\"\"", "\n", "\n", "self", ".", "x", ".", "requires_grad_", "(", "True", ")", "\n", "\n", "# Evaluate function at current estimate", "\n", "self", ".", "f0", "=", "self", ".", "problem", "(", "self", ".", "x", ")", "\n", "\n", "# Create copy with graph detached", "\n", "self", ".", "g", "=", "self", ".", "f0", ".", "detach", "(", ")", "\n", "\n", "if", "self", ".", "debug", "and", "not", "self", ".", "analyze_convergence", ":", "\n", "            ", "loss", "=", "self", ".", "problem", ".", "ip_output", "(", "self", ".", "g", ",", "self", ".", "g", ")", "\n", "self", ".", "losses", "=", "torch", ".", "cat", "(", "(", "self", ".", "losses", ",", "loss", ".", "detach", "(", ")", ".", "cpu", "(", ")", ".", "view", "(", "-", "1", ")", ")", ")", "\n", "\n", "", "self", ".", "g", ".", "requires_grad_", "(", "True", ")", "\n", "\n", "# Get df/dx^t @ f0", "\n", "self", ".", "dfdxt_g", "=", "TensorList", "(", "torch", ".", "autograd", ".", "grad", "(", "self", ".", "f0", ",", "self", ".", "x", ",", "self", ".", "g", ",", "create_graph", "=", "True", ")", ")", "\n", "\n", "# Get the right hand side", "\n", "self", ".", "b", "=", "-", "self", ".", "dfdxt_g", ".", "detach", "(", ")", "\n", "\n", "# Run CG", "\n", "delta_x", ",", "res", "=", "self", ".", "run_CG", "(", "num_cg_iter", ",", "eps", "=", "self", ".", "cg_eps", ")", "\n", "\n", "self", ".", "x", ".", "detach_", "(", ")", "\n", "self", ".", "x", "+=", "delta_x", "\n", "\n", "if", "self", ".", "debug", ":", "\n", "            ", "self", ".", "residuals", "=", "torch", ".", "cat", "(", "(", "self", ".", "residuals", ",", "res", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GaussNewtonCG.A": [[410, 413], ["torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "pytracking.libs.TensorList", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad"], "methods", ["None"], ["", "", "def", "A", "(", "self", ",", "x", ")", ":", "\n", "        ", "dfdx_x", "=", "torch", ".", "autograd", ".", "grad", "(", "self", ".", "dfdxt_g", ",", "self", ".", "g", ",", "x", ",", "retain_graph", "=", "True", ")", "\n", "return", "TensorList", "(", "torch", ".", "autograd", ".", "grad", "(", "self", ".", "f0", ",", "self", ".", "x", ",", "dfdx_x", ",", "retain_graph", "=", "True", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GaussNewtonCG.ip": [[414, 416], ["optimization.GaussNewtonCG.problem.ip_input"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.MinimizationProblem.ip_input"], ["", "def", "ip", "(", "self", ",", "a", ",", "b", ")", ":", "\n", "        ", "return", "self", ".", "problem", ".", "ip_input", "(", "a", ",", "b", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GaussNewtonCG.M1": [[417, 419], ["optimization.GaussNewtonCG.problem.M1"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.M1"], ["", "def", "M1", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "self", ".", "problem", ".", "M1", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GaussNewtonCG.M2": [[420, 422], ["optimization.GaussNewtonCG.problem.M2"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.M2"], ["", "def", "M2", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "self", ".", "problem", ".", "M2", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GaussNewtonCG.evaluate_CG_iteration": [[423, 436], ["x.requires_grad_", "optimization.GaussNewtonCG.problem", "optimization.GaussNewtonCG.problem.ip_output", "pytracking.libs.TensorList", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "optimization.GaussNewtonCG.detach().cpu().view", "sum().cpu().sqrt().detach().view", "optimization.GaussNewtonCG.detach().cpu", "sum().cpu().sqrt().detach", "optimization.GaussNewtonCG.detach", "sum().cpu().sqrt", "sum().cpu", "sum", "pytracking.libs.TensorList.view", "pytracking.libs.TensorList.view"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.L2Problem.ip_output"], ["", "def", "evaluate_CG_iteration", "(", "self", ",", "delta_x", ")", ":", "\n", "        ", "if", "self", ".", "analyze_convergence", ":", "\n", "            ", "x", "=", "(", "self", ".", "x", "+", "delta_x", ")", ".", "detach", "(", ")", "\n", "x", ".", "requires_grad_", "(", "True", ")", "\n", "\n", "# compute loss and gradient", "\n", "f", "=", "self", ".", "problem", "(", "x", ")", "\n", "loss", "=", "self", ".", "problem", ".", "ip_output", "(", "f", ",", "f", ")", "\n", "grad", "=", "TensorList", "(", "torch", ".", "autograd", ".", "grad", "(", "loss", ",", "x", ")", ")", "\n", "\n", "# store in the vectors", "\n", "self", ".", "losses", "=", "torch", ".", "cat", "(", "(", "self", ".", "losses", ",", "loss", ".", "detach", "(", ")", ".", "cpu", "(", ")", ".", "view", "(", "-", "1", ")", ")", ")", "\n", "self", ".", "gradient_mags", "=", "torch", ".", "cat", "(", "(", "self", ".", "gradient_mags", ",", "sum", "(", "grad", ".", "view", "(", "-", "1", ")", "@", "grad", ".", "view", "(", "-", "1", ")", ")", ".", "cpu", "(", ")", ".", "sqrt", "(", ")", ".", "detach", "(", ")", ".", "view", "(", "-", "1", ")", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GradientDescentL2.__init__": [[441, 458], ["torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "optimization.GradientDescentL2.clear_temp"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GradientDescent.clear_temp"], ["def", "__init__", "(", "self", ",", "problem", ":", "L2Problem", ",", "variable", ":", "TensorList", ",", "step_length", ":", "float", ",", "momentum", ":", "float", "=", "0.0", ",", "debug", "=", "False", ",", "plotting", "=", "False", ",", "visdom", "=", "None", ")", ":", "\n", "\n", "        ", "self", ".", "problem", "=", "problem", "\n", "self", ".", "x", "=", "variable", "\n", "\n", "self", ".", "step_legnth", "=", "step_length", "\n", "self", ".", "momentum", "=", "momentum", "\n", "\n", "self", ".", "debug", "=", "debug", "or", "plotting", "\n", "self", ".", "plotting", "=", "plotting", "\n", "self", ".", "fig_num", "=", "(", "10", ",", "11", ")", "\n", "self", ".", "visdom", "=", "visdom", "\n", "self", ".", "losses", "=", "torch", ".", "zeros", "(", "0", ")", "\n", "self", ".", "gradient_mags", "=", "torch", ".", "zeros", "(", "0", ")", "\n", "self", ".", "residuals", "=", "None", "\n", "\n", "self", ".", "clear_temp", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GradientDescentL2.clear_temp": [[460, 463], ["None"], "methods", ["None"], ["", "def", "clear_temp", "(", "self", ")", ":", "\n", "        ", "self", ".", "f0", "=", "None", "\n", "self", ".", "dir", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GradientDescentL2.run": [[465, 519], ["range", "optimization.GradientDescentL2.x.detach_", "optimization.GradientDescentL2.clear_temp", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "optimization.GradientDescentL2.x.requires_grad_", "optimization.GradientDescentL2.problem", "optimization.GradientDescentL2.problem.ip_output", "pytracking.libs.TensorList", "optimization.GradientDescentL2.x.detach_", "optimization.GradientDescentL2.x.requires_grad_", "optimization.GradientDescentL2.problem", "optimization.GradientDescentL2.problem.ip_output", "pytracking.libs.TensorList", "optimization.GradientDescentL2.problem.ip_output().item", "sum().cpu().sqrt().item", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "optimization.GradientDescentL2.item", "sum().sqrt().item", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "optimization.GradientDescentL2.visdom.register", "optimization.GradientDescentL2.visdom.register", "optimization.GradientDescentL2.problem.ip_output", "sum().cpu().sqrt", "pytracking.utils.plotting.plot_graph", "pytracking.utils.plotting.plot_graph", "sum().sqrt", "sum().cpu", "sum", "sum", "pytracking.libs.TensorList.view", "pytracking.libs.TensorList.view", "pytracking.libs.TensorList.view", "pytracking.libs.TensorList.view"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GradientDescent.clear_temp", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.L2Problem.ip_output", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.L2Problem.ip_output", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.eco.optim.FilterOptim.register", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.L2Problem.ip_output", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.plot_graph", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.plot_graph"], ["", "def", "run", "(", "self", ",", "num_iter", ",", "dummy", "=", "None", ")", ":", "\n", "\n", "        ", "if", "num_iter", "==", "0", ":", "\n", "            ", "return", "\n", "\n", "", "lossvec", "=", "None", "\n", "if", "self", ".", "debug", ":", "\n", "            ", "lossvec", "=", "torch", ".", "zeros", "(", "num_iter", "+", "1", ")", "\n", "grad_mags", "=", "torch", ".", "zeros", "(", "num_iter", "+", "1", ")", "\n", "\n", "", "for", "i", "in", "range", "(", "num_iter", ")", ":", "\n", "            ", "self", ".", "x", ".", "requires_grad_", "(", "True", ")", "\n", "\n", "# Evaluate function at current estimate", "\n", "self", ".", "f0", "=", "self", ".", "problem", "(", "self", ".", "x", ")", "\n", "\n", "# Compute loss", "\n", "loss", "=", "self", ".", "problem", ".", "ip_output", "(", "self", ".", "f0", ",", "self", ".", "f0", ")", "\n", "\n", "# Compute grad", "\n", "grad", "=", "TensorList", "(", "torch", ".", "autograd", ".", "grad", "(", "loss", ",", "self", ".", "x", ")", ")", "\n", "\n", "# Update direction", "\n", "if", "self", ".", "dir", "is", "None", ":", "\n", "                ", "self", ".", "dir", "=", "grad", "\n", "", "else", ":", "\n", "                ", "self", ".", "dir", "=", "grad", "+", "self", ".", "momentum", "*", "self", ".", "dir", "\n", "\n", "", "self", ".", "x", ".", "detach_", "(", ")", "\n", "self", ".", "x", "-=", "self", ".", "step_legnth", "*", "self", ".", "dir", "\n", "\n", "if", "self", ".", "debug", ":", "\n", "                ", "lossvec", "[", "i", "]", "=", "loss", ".", "item", "(", ")", "\n", "grad_mags", "[", "i", "]", "=", "sum", "(", "grad", ".", "view", "(", "-", "1", ")", "@", "grad", ".", "view", "(", "-", "1", ")", ")", ".", "sqrt", "(", ")", ".", "item", "(", ")", "\n", "\n", "", "", "if", "self", ".", "debug", ":", "\n", "            ", "self", ".", "x", ".", "requires_grad_", "(", "True", ")", "\n", "self", ".", "f0", "=", "self", ".", "problem", "(", "self", ".", "x", ")", "\n", "loss", "=", "self", ".", "problem", ".", "ip_output", "(", "self", ".", "f0", ",", "self", ".", "f0", ")", "\n", "grad", "=", "TensorList", "(", "torch", ".", "autograd", ".", "grad", "(", "loss", ",", "self", ".", "x", ")", ")", "\n", "lossvec", "[", "-", "1", "]", "=", "self", ".", "problem", ".", "ip_output", "(", "self", ".", "f0", ",", "self", ".", "f0", ")", ".", "item", "(", ")", "\n", "grad_mags", "[", "-", "1", "]", "=", "sum", "(", "grad", ".", "view", "(", "-", "1", ")", "@", "grad", ".", "view", "(", "-", "1", ")", ")", ".", "cpu", "(", ")", ".", "sqrt", "(", ")", ".", "item", "(", ")", "\n", "self", ".", "losses", "=", "torch", ".", "cat", "(", "(", "self", ".", "losses", ",", "lossvec", ")", ")", "\n", "self", ".", "gradient_mags", "=", "torch", ".", "cat", "(", "(", "self", ".", "gradient_mags", ",", "grad_mags", ")", ")", "\n", "\n", "if", "self", ".", "visdom", "is", "not", "None", ":", "\n", "                ", "self", ".", "visdom", ".", "register", "(", "self", ".", "losses", ",", "'lineplot'", ",", "3", ",", "'Loss'", ")", "\n", "self", ".", "visdom", ".", "register", "(", "self", ".", "gradient_mags", ",", "'lineplot'", ",", "4", ",", "'Gradient magnitude'", ")", "\n", "", "elif", "self", ".", "plotting", ":", "\n", "                ", "plot_graph", "(", "self", ".", "losses", ",", "self", ".", "fig_num", "[", "0", "]", ",", "title", "=", "'Loss'", ")", "\n", "plot_graph", "(", "self", ".", "gradient_mags", ",", "self", ".", "fig_num", "[", "1", "]", ",", "title", "=", "'Gradient magnitude'", ")", "\n", "\n", "", "", "self", ".", "x", ".", "detach_", "(", ")", "\n", "self", ".", "clear_temp", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.__init__": [[525, 546], ["optimization.ConjugateGradientBase.__init__", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "problem", ":", "MinimizationProblem", ",", "variable", ":", "TensorList", ",", "init_hessian_reg", "=", "0.0", ",", "hessian_reg_factor", "=", "1.0", ",", "\n", "cg_eps", "=", "0.0", ",", "fletcher_reeves", "=", "True", ",", "standard_alpha", "=", "True", ",", "direction_forget_factor", "=", "0", ",", "\n", "debug", "=", "False", ",", "analyze", "=", "False", ",", "plotting", "=", "False", ",", "fig_num", "=", "(", "10", ",", "11", ",", "12", ")", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", "fletcher_reeves", ",", "standard_alpha", ",", "direction_forget_factor", ",", "debug", "or", "analyze", "or", "plotting", ")", "\n", "\n", "self", ".", "problem", "=", "problem", "\n", "self", ".", "x", "=", "variable", "\n", "\n", "self", ".", "analyze_convergence", "=", "analyze", "\n", "self", ".", "plotting", "=", "plotting", "\n", "self", ".", "fig_num", "=", "fig_num", "\n", "\n", "self", ".", "hessian_reg", "=", "init_hessian_reg", "\n", "self", ".", "hessian_reg_factor", "=", "hessian_reg_factor", "\n", "self", ".", "cg_eps", "=", "cg_eps", "\n", "self", ".", "f0", "=", "None", "\n", "self", ".", "g", "=", "None", "\n", "\n", "self", ".", "residuals", "=", "torch", ".", "zeros", "(", "0", ")", "\n", "self", ".", "losses", "=", "torch", ".", "zeros", "(", "0", ")", "\n", "self", ".", "gradient_mags", "=", "torch", ".", "zeros", "(", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.clear_temp": [[547, 550], ["None"], "methods", ["None"], ["", "def", "clear_temp", "(", "self", ")", ":", "\n", "        ", "self", ".", "f0", "=", "None", "\n", "self", ".", "g", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.run": [[552, 587], ["isinstance", "len", "optimization.NewtonCG.x.detach_", "optimization.NewtonCG.clear_temp", "optimization.NewtonCG.evaluate_CG_iteration", "optimization.NewtonCG.run_newton_iter", "optimization.NewtonCG.problem", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "pytracking.utils.plotting.plot_graph", "pytracking.utils.plotting.plot_graph", "pytracking.utils.plotting.plot_graph", "optimization.NewtonCG.detach().cpu().view", "optimization.NewtonCG.detach().cpu", "optimization.NewtonCG.detach"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GradientDescent.clear_temp", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.evaluate_CG_iteration", "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.run_newton_iter", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.plot_graph", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.plot_graph", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.plot_graph"], ["", "def", "run", "(", "self", ",", "num_cg_iter", ",", "num_newton_iter", "=", "None", ")", ":", "\n", "\n", "        ", "if", "isinstance", "(", "num_cg_iter", ",", "int", ")", ":", "\n", "            ", "if", "num_cg_iter", "==", "0", ":", "\n", "                ", "return", "\n", "", "if", "num_newton_iter", "is", "None", ":", "\n", "                ", "num_newton_iter", "=", "1", "\n", "", "num_cg_iter", "=", "[", "num_cg_iter", "]", "*", "num_newton_iter", "\n", "\n", "", "num_newton_iter", "=", "len", "(", "num_cg_iter", ")", "\n", "if", "num_newton_iter", "==", "0", ":", "\n", "            ", "return", "\n", "\n", "", "if", "self", ".", "analyze_convergence", ":", "\n", "            ", "self", ".", "evaluate_CG_iteration", "(", "0", ")", "\n", "\n", "", "for", "cg_iter", "in", "num_cg_iter", ":", "\n", "            ", "self", ".", "run_newton_iter", "(", "cg_iter", ")", "\n", "self", ".", "hessian_reg", "*=", "self", ".", "hessian_reg_factor", "\n", "\n", "", "if", "self", ".", "debug", ":", "\n", "            ", "if", "not", "self", ".", "analyze_convergence", ":", "\n", "                ", "loss", "=", "self", ".", "problem", "(", "self", ".", "x", ")", "\n", "self", ".", "losses", "=", "torch", ".", "cat", "(", "(", "self", ".", "losses", ",", "loss", ".", "detach", "(", ")", ".", "cpu", "(", ")", ".", "view", "(", "-", "1", ")", ")", ")", "\n", "\n", "", "if", "self", ".", "plotting", ":", "\n", "                ", "plot_graph", "(", "self", ".", "losses", ",", "self", ".", "fig_num", "[", "0", "]", ",", "title", "=", "'Loss'", ")", "\n", "plot_graph", "(", "self", ".", "residuals", ",", "self", ".", "fig_num", "[", "1", "]", ",", "title", "=", "'CG residuals'", ")", "\n", "if", "self", ".", "analyze_convergence", ":", "\n", "                    ", "plot_graph", "(", "self", ".", "gradient_mags", ",", "self", ".", "fig_num", "[", "2", "]", ",", "'Gradient magnitude'", ")", "\n", "\n", "", "", "", "self", ".", "x", ".", "detach_", "(", ")", "\n", "self", ".", "clear_temp", "(", ")", "\n", "\n", "return", "self", ".", "losses", ",", "self", ".", "residuals", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.run_newton_iter": [[589, 613], ["optimization.NewtonCG.x.requires_grad_", "optimization.NewtonCG.problem", "pytracking.libs.TensorList", "optimization.NewtonCG.run_CG", "optimization.NewtonCG.x.detach_", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "optimization.NewtonCG.g.detach", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "optimization.NewtonCG.f0.detach().cpu().view", "optimization.NewtonCG.f0.detach().cpu", "optimization.NewtonCG.f0.detach"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.ConjugateGradientBase.run_CG"], ["", "def", "run_newton_iter", "(", "self", ",", "num_cg_iter", ")", ":", "\n", "\n", "        ", "self", ".", "x", ".", "requires_grad_", "(", "True", ")", "\n", "\n", "# Evaluate function at current estimate", "\n", "self", ".", "f0", "=", "self", ".", "problem", "(", "self", ".", "x", ")", "\n", "\n", "if", "self", ".", "debug", "and", "not", "self", ".", "analyze_convergence", ":", "\n", "            ", "self", ".", "losses", "=", "torch", ".", "cat", "(", "(", "self", ".", "losses", ",", "self", ".", "f0", ".", "detach", "(", ")", ".", "cpu", "(", ")", ".", "view", "(", "-", "1", ")", ")", ")", "\n", "\n", "# Gradient of loss", "\n", "", "self", ".", "g", "=", "TensorList", "(", "torch", ".", "autograd", ".", "grad", "(", "self", ".", "f0", ",", "self", ".", "x", ",", "create_graph", "=", "True", ")", ")", "\n", "\n", "# Get the right hand side", "\n", "self", ".", "b", "=", "-", "self", ".", "g", ".", "detach", "(", ")", "\n", "\n", "# Run CG", "\n", "delta_x", ",", "res", "=", "self", ".", "run_CG", "(", "num_cg_iter", ",", "eps", "=", "self", ".", "cg_eps", ")", "\n", "\n", "self", ".", "x", ".", "detach_", "(", ")", "\n", "self", ".", "x", "+=", "delta_x", "\n", "\n", "if", "self", ".", "debug", ":", "\n", "            ", "self", ".", "residuals", "=", "torch", ".", "cat", "(", "(", "self", ".", "residuals", ",", "res", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.A": [[615, 617], ["pytracking.libs.TensorList", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad"], "methods", ["None"], ["", "", "def", "A", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "TensorList", "(", "torch", ".", "autograd", ".", "grad", "(", "self", ".", "g", ",", "self", ".", "x", ",", "x", ",", "retain_graph", "=", "True", ")", ")", "+", "self", ".", "hessian_reg", "*", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.ip": [[618, 621], ["optimization.NewtonCG.problem.ip_input"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.MinimizationProblem.ip_input"], ["", "def", "ip", "(", "self", ",", "a", ",", "b", ")", ":", "\n", "# Implements the inner product", "\n", "        ", "return", "self", ".", "problem", ".", "ip_input", "(", "a", ",", "b", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.M1": [[622, 624], ["optimization.NewtonCG.problem.M1"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.M1"], ["", "def", "M1", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "self", ".", "problem", ".", "M1", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.M2": [[625, 627], ["optimization.NewtonCG.problem.M2"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.M2"], ["", "def", "M2", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "self", ".", "problem", ".", "M2", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.NewtonCG.evaluate_CG_iteration": [[628, 640], ["x.requires_grad_", "optimization.NewtonCG.problem", "pytracking.libs.TensorList", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "optimization.NewtonCG.detach().cpu().view", "sum().cpu().sqrt().detach().view", "optimization.NewtonCG.detach().cpu", "sum().cpu().sqrt().detach", "optimization.NewtonCG.detach", "sum().cpu().sqrt", "sum().cpu", "sum", "pytracking.libs.TensorList.view", "pytracking.libs.TensorList.view"], "methods", ["None"], ["", "def", "evaluate_CG_iteration", "(", "self", ",", "delta_x", ")", ":", "\n", "        ", "if", "self", ".", "analyze_convergence", ":", "\n", "            ", "x", "=", "(", "self", ".", "x", "+", "delta_x", ")", ".", "detach", "(", ")", "\n", "x", ".", "requires_grad_", "(", "True", ")", "\n", "\n", "# compute loss and gradient", "\n", "loss", "=", "self", ".", "problem", "(", "x", ")", "\n", "grad", "=", "TensorList", "(", "torch", ".", "autograd", ".", "grad", "(", "loss", ",", "x", ")", ")", "\n", "\n", "# store in the vectors", "\n", "self", ".", "losses", "=", "torch", ".", "cat", "(", "(", "self", ".", "losses", ",", "loss", ".", "detach", "(", ")", ".", "cpu", "(", ")", ".", "view", "(", "-", "1", ")", ")", ")", "\n", "self", ".", "gradient_mags", "=", "torch", ".", "cat", "(", "(", "self", ".", "gradient_mags", ",", "sum", "(", "grad", ".", "view", "(", "-", "1", ")", "@", "grad", ".", "view", "(", "-", "1", ")", ")", ".", "cpu", "(", ")", ".", "sqrt", "(", ")", ".", "detach", "(", ")", ".", "view", "(", "-", "1", ")", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GradientDescent.__init__": [[645, 663], ["torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "optimization.GradientDescent.clear_temp"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GradientDescent.clear_temp"], ["def", "__init__", "(", "self", ",", "problem", ":", "MinimizationProblem", ",", "variable", ":", "TensorList", ",", "step_length", ":", "float", ",", "momentum", ":", "float", "=", "0.0", ",", "\n", "debug", "=", "False", ",", "plotting", "=", "False", ",", "fig_num", "=", "(", "10", ",", "11", ")", ")", ":", "\n", "\n", "        ", "self", ".", "problem", "=", "problem", "\n", "self", ".", "x", "=", "variable", "\n", "\n", "self", ".", "step_legnth", "=", "step_length", "\n", "self", ".", "momentum", "=", "momentum", "\n", "\n", "self", ".", "debug", "=", "debug", "or", "plotting", "\n", "self", ".", "plotting", "=", "plotting", "\n", "self", ".", "fig_num", "=", "fig_num", "\n", "\n", "self", ".", "losses", "=", "torch", ".", "zeros", "(", "0", ")", "\n", "self", ".", "gradient_mags", "=", "torch", ".", "zeros", "(", "0", ")", "\n", "self", ".", "residuals", "=", "None", "\n", "\n", "self", ".", "clear_temp", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GradientDescent.clear_temp": [[665, 667], ["None"], "methods", ["None"], ["", "def", "clear_temp", "(", "self", ")", ":", "\n", "        ", "self", ".", "dir", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GradientDescent.run": [[669, 715], ["range", "optimization.GradientDescent.x.detach_", "optimization.GradientDescent.clear_temp", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "optimization.GradientDescent.x.requires_grad_", "optimization.GradientDescent.problem", "pytracking.libs.TensorList", "optimization.GradientDescent.x.detach_", "optimization.GradientDescent.x.requires_grad_", "optimization.GradientDescent.problem", "pytracking.libs.TensorList", "optimization.GradientDescent.item", "sum().cpu().sqrt().item", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "optimization.GradientDescent.item", "sum().sqrt().item", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "pytracking.utils.plotting.plot_graph", "pytracking.utils.plotting.plot_graph", "sum().cpu().sqrt", "sum().sqrt", "sum().cpu", "sum", "sum", "pytracking.libs.TensorList.view", "pytracking.libs.TensorList.view", "pytracking.libs.TensorList.view", "pytracking.libs.TensorList.view"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.optimization.GradientDescent.clear_temp", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.plot_graph", "home.repos.pwc.inspect_result.researchmm_Stark.utils.plotting.plot_graph"], ["", "def", "run", "(", "self", ",", "num_iter", ",", "dummy", "=", "None", ")", ":", "\n", "\n", "        ", "if", "num_iter", "==", "0", ":", "\n", "            ", "return", "\n", "\n", "", "lossvec", "=", "None", "\n", "if", "self", ".", "debug", ":", "\n", "            ", "lossvec", "=", "torch", ".", "zeros", "(", "num_iter", "+", "1", ")", "\n", "grad_mags", "=", "torch", ".", "zeros", "(", "num_iter", "+", "1", ")", "\n", "\n", "", "for", "i", "in", "range", "(", "num_iter", ")", ":", "\n", "            ", "self", ".", "x", ".", "requires_grad_", "(", "True", ")", "\n", "\n", "# Evaluate function at current estimate", "\n", "loss", "=", "self", ".", "problem", "(", "self", ".", "x", ")", "\n", "\n", "# Compute grad", "\n", "grad", "=", "TensorList", "(", "torch", ".", "autograd", ".", "grad", "(", "loss", ",", "self", ".", "x", ")", ")", "\n", "\n", "# Update direction", "\n", "if", "self", ".", "dir", "is", "None", ":", "\n", "                ", "self", ".", "dir", "=", "grad", "\n", "", "else", ":", "\n", "                ", "self", ".", "dir", "=", "grad", "+", "self", ".", "momentum", "*", "self", ".", "dir", "\n", "\n", "", "self", ".", "x", ".", "detach_", "(", ")", "\n", "self", ".", "x", "-=", "self", ".", "step_legnth", "*", "self", ".", "dir", "\n", "\n", "if", "self", ".", "debug", ":", "\n", "                ", "lossvec", "[", "i", "]", "=", "loss", ".", "item", "(", ")", "\n", "grad_mags", "[", "i", "]", "=", "sum", "(", "grad", ".", "view", "(", "-", "1", ")", "@", "grad", ".", "view", "(", "-", "1", ")", ")", ".", "sqrt", "(", ")", ".", "item", "(", ")", "\n", "\n", "", "", "if", "self", ".", "debug", ":", "\n", "            ", "self", ".", "x", ".", "requires_grad_", "(", "True", ")", "\n", "loss", "=", "self", ".", "problem", "(", "self", ".", "x", ")", "\n", "grad", "=", "TensorList", "(", "torch", ".", "autograd", ".", "grad", "(", "loss", ",", "self", ".", "x", ")", ")", "\n", "lossvec", "[", "-", "1", "]", "=", "loss", ".", "item", "(", ")", "\n", "grad_mags", "[", "-", "1", "]", "=", "sum", "(", "grad", ".", "view", "(", "-", "1", ")", "@", "grad", ".", "view", "(", "-", "1", ")", ")", ".", "cpu", "(", ")", ".", "sqrt", "(", ")", ".", "item", "(", ")", "\n", "self", ".", "losses", "=", "torch", ".", "cat", "(", "(", "self", ".", "losses", ",", "lossvec", ")", ")", "\n", "self", ".", "gradient_mags", "=", "torch", ".", "cat", "(", "(", "self", ".", "gradient_mags", ",", "grad_mags", ")", ")", "\n", "if", "self", ".", "plotting", ":", "\n", "                ", "plot_graph", "(", "self", ".", "losses", ",", "self", ".", "fig_num", "[", "0", "]", ",", "title", "=", "'Loss'", ")", "\n", "plot_graph", "(", "self", ".", "gradient_mags", ",", "self", ".", "fig_num", "[", "1", "]", ",", "title", "=", "'Gradient magnitude'", ")", "\n", "\n", "", "", "self", ".", "x", ".", "detach_", "(", ")", "\n", "self", ".", "clear_temp", "(", ")", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_complex": [[5, 7], ["a.dim"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["def", "is_complex", "(", "a", ":", "torch", ".", "Tensor", ")", "->", "bool", ":", "\n", "    ", "return", "a", ".", "dim", "(", ")", ">=", "4", "and", "a", ".", "shape", "[", "-", "1", "]", "==", "2", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real": [[9, 11], ["complex.is_complex"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_complex"], ["", "def", "is_real", "(", "a", ":", "torch", ".", "Tensor", ")", "->", "bool", ":", "\n", "    ", "return", "not", "is_complex", "(", "a", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult": [[13, 33], ["complex.is_real", "complex.is_real", "complex.mult_real_cplx", "complex.mult_real_cplx", "complex.mult_real_cplx", "a.dim", "b.dim", "ValueError", "b.dim", "a.dim", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult_real_cplx", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult_real_cplx", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult_real_cplx", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "@", "tensor_operation", "\n", "def", "mult", "(", "a", ":", "torch", ".", "Tensor", ",", "b", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "\"\"\"Pointwise complex multiplication of complex tensors.\"\"\"", "\n", "\n", "if", "is_real", "(", "a", ")", ":", "\n", "        ", "if", "a", ".", "dim", "(", ")", ">=", "b", ".", "dim", "(", ")", ":", "\n", "            ", "raise", "ValueError", "(", "'Incorrect dimensions.'", ")", "\n", "# a is real", "\n", "", "return", "mult_real_cplx", "(", "a", ",", "b", ")", "\n", "", "if", "is_real", "(", "b", ")", ":", "\n", "        ", "if", "b", ".", "dim", "(", ")", ">=", "a", ".", "dim", "(", ")", ":", "\n", "            ", "raise", "ValueError", "(", "'Incorrect dimensions.'", ")", "\n", "# b is real", "\n", "", "return", "mult_real_cplx", "(", "b", ",", "a", ")", "\n", "\n", "# Both complex", "\n", "", "c", "=", "mult_real_cplx", "(", "a", "[", "...", ",", "0", "]", ",", "b", ")", "\n", "c", "[", "...", ",", "0", "]", "-=", "a", "[", "...", ",", "1", "]", "*", "b", "[", "...", ",", "1", "]", "\n", "c", "[", "...", ",", "1", "]", "+=", "a", "[", "...", ",", "1", "]", "*", "b", "[", "...", ",", "0", "]", "\n", "return", "c", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult_conj": [[35, 55], ["complex.is_real", "complex.is_real", "complex.mult_real_cplx", "complex.mult_real_cplx", "complex.mult_real_cplx", "a.dim", "b.dim", "ValueError", "complex.conj", "b.dim", "a.dim", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult_real_cplx", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult_real_cplx", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult_real_cplx", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.conj", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "@", "tensor_operation", "\n", "def", "mult_conj", "(", "a", ":", "torch", ".", "Tensor", ",", "b", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "\"\"\"Pointwise complex multiplication of complex tensors, with conjugate on b: a*conj(b).\"\"\"", "\n", "\n", "if", "is_real", "(", "a", ")", ":", "\n", "        ", "if", "a", ".", "dim", "(", ")", ">=", "b", ".", "dim", "(", ")", ":", "\n", "            ", "raise", "ValueError", "(", "'Incorrect dimensions.'", ")", "\n", "# a is real", "\n", "", "return", "mult_real_cplx", "(", "a", ",", "conj", "(", "b", ")", ")", "\n", "", "if", "is_real", "(", "b", ")", ":", "\n", "        ", "if", "b", ".", "dim", "(", ")", ">=", "a", ".", "dim", "(", ")", ":", "\n", "            ", "raise", "ValueError", "(", "'Incorrect dimensions.'", ")", "\n", "# b is real", "\n", "", "return", "mult_real_cplx", "(", "b", ",", "a", ")", "\n", "\n", "# Both complex", "\n", "", "c", "=", "mult_real_cplx", "(", "b", "[", "...", ",", "0", "]", ",", "a", ")", "\n", "c", "[", "...", ",", "0", "]", "+=", "a", "[", "...", ",", "1", "]", "*", "b", "[", "...", ",", "1", "]", "\n", "c", "[", "...", ",", "1", "]", "-=", "a", "[", "...", ",", "0", "]", "*", "b", "[", "...", ",", "1", "]", "\n", "return", "c", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult_real_cplx": [[57, 65], ["complex.is_real", "ValueError", "a.unsqueeze"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real"], ["", "@", "tensor_operation", "\n", "def", "mult_real_cplx", "(", "a", ":", "torch", ".", "Tensor", ",", "b", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "\"\"\"Pointwise complex multiplication of real tensor a with complex tensor b.\"\"\"", "\n", "\n", "if", "is_real", "(", "b", ")", ":", "\n", "        ", "raise", "ValueError", "(", "'Last dimension must have length 2.'", ")", "\n", "\n", "", "return", "a", ".", "unsqueeze", "(", "-", "1", ")", "*", "b", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.div": [[67, 78], ["complex.is_real", "complex.div_cplx_real", "complex.div_cplx_real", "complex.mult_conj", "complex.abs_sqr", "b.dim", "a.dim", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.div_cplx_real", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.div_cplx_real", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult_conj", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs_sqr", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "@", "tensor_operation", "\n", "def", "div", "(", "a", ":", "torch", ".", "Tensor", ",", "b", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "\"\"\"Pointwise complex division of complex tensors.\"\"\"", "\n", "\n", "if", "is_real", "(", "b", ")", ":", "\n", "        ", "if", "b", ".", "dim", "(", ")", ">=", "a", ".", "dim", "(", ")", ":", "\n", "            ", "raise", "ValueError", "(", "'Incorrect dimensions.'", ")", "\n", "# b is real", "\n", "", "return", "div_cplx_real", "(", "a", ",", "b", ")", "\n", "\n", "", "return", "div_cplx_real", "(", "mult_conj", "(", "a", ",", "b", ")", ",", "abs_sqr", "(", "b", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.div_cplx_real": [[80, 88], ["complex.is_real", "ValueError", "b.unsqueeze"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real"], ["", "@", "tensor_operation", "\n", "def", "div_cplx_real", "(", "a", ":", "torch", ".", "Tensor", ",", "b", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "\"\"\"Pointwise complex division of complex tensor a with real tensor b.\"\"\"", "\n", "\n", "if", "is_real", "(", "a", ")", ":", "\n", "        ", "raise", "ValueError", "(", "'Last dimension must have length 2.'", ")", "\n", "\n", "", "return", "a", "/", "b", ".", "unsqueeze", "(", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs_sqr": [[90, 98], ["complex.is_real", "torch.sum", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real"], ["", "@", "tensor_operation", "\n", "def", "abs_sqr", "(", "a", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "\"\"\"Squared absolute value.\"\"\"", "\n", "\n", "if", "is_real", "(", "a", ")", ":", "\n", "        ", "raise", "ValueError", "(", "'Last dimension must have length 2.'", ")", "\n", "\n", "", "return", "torch", ".", "sum", "(", "a", "*", "a", ",", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs": [[100, 108], ["complex.is_real", "torch.sqrt", "ValueError", "complex.abs_sqr"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs_sqr"], ["", "@", "tensor_operation", "\n", "def", "abs", "(", "a", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "\"\"\"Absolute value.\"\"\"", "\n", "\n", "if", "is_real", "(", "a", ")", ":", "\n", "        ", "raise", "ValueError", "(", "'Last dimension must have length 2.'", ")", "\n", "\n", "", "return", "torch", ".", "sqrt", "(", "abs_sqr", "(", "a", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.conj": [[110, 119], ["complex.is_real", "complex.complex", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.complex"], ["", "@", "tensor_operation", "\n", "def", "conj", "(", "a", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "\"\"\"Complex conjugate.\"\"\"", "\n", "\n", "if", "is_real", "(", "a", ")", ":", "\n", "        ", "raise", "ValueError", "(", "'Last dimension must have length 2.'", ")", "\n", "\n", "# return a * torch.Tensor([1, -1], device=a.device)", "\n", "", "return", "complex", "(", "a", "[", "...", ",", "0", "]", ",", "-", "a", "[", "...", ",", "1", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.real": [[121, 129], ["complex.is_real", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real"], ["", "@", "tensor_operation", "\n", "def", "real", "(", "a", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "\"\"\"Real part.\"\"\"", "\n", "\n", "if", "is_real", "(", "a", ")", ":", "\n", "        ", "raise", "ValueError", "(", "'Last dimension must have length 2.'", ")", "\n", "\n", "", "return", "a", "[", "...", ",", "0", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.imag": [[131, 139], ["complex.is_real", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real"], ["", "@", "tensor_operation", "\n", "def", "imag", "(", "a", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "\"\"\"Imaginary part.\"\"\"", "\n", "\n", "if", "is_real", "(", "a", ")", ":", "\n", "        ", "raise", "ValueError", "(", "'Last dimension must have length 2.'", ")", "\n", "\n", "", "return", "a", "[", "...", ",", "1", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.complex": [[141, 151], ["torch.cat", "b.new_zeros.new_zeros", "a.new_zeros.new_zeros", "b.new_zeros.unsqueeze", "a.new_zeros.unsqueeze"], "function", ["None"], ["", "@", "tensor_operation", "\n", "def", "complex", "(", "a", ":", "torch", ".", "Tensor", ",", "b", ":", "torch", ".", "Tensor", "=", "None", ")", ":", "\n", "    ", "\"\"\"Create complex tensor from real and imaginary part.\"\"\"", "\n", "\n", "if", "b", "is", "None", ":", "\n", "        ", "b", "=", "a", ".", "new_zeros", "(", "a", ".", "shape", ")", "\n", "", "elif", "a", "is", "None", ":", "\n", "        ", "a", "=", "b", ".", "new_zeros", "(", "b", ".", "shape", ")", "\n", "\n", "", "return", "torch", ".", "cat", "(", "(", "a", ".", "unsqueeze", "(", "-", "1", ")", ",", "b", ".", "unsqueeze", "(", "-", "1", ")", ")", ",", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mtimes": [[153, 179], ["complex.is_real", "complex.is_real", "complex.mtimes_real_complex", "complex.mtimes_complex_real", "complex.complex", "complex.complex", "complex.complex", "complex.complex", "a.dim", "b.dim", "ValueError", "b.dim", "a.dim", "ValueError", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mtimes_real_complex", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mtimes_complex_real", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.complex", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.complex", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.complex", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.complex", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "@", "tensor_operation", "\n", "def", "mtimes", "(", "a", ":", "torch", ".", "Tensor", ",", "b", ":", "torch", ".", "Tensor", ",", "conj_a", "=", "False", ",", "conj_b", "=", "False", ")", ":", "\n", "    ", "\"\"\"Complex matrix multiplication of complex tensors.\n    The dimensions (-3, -2) are matrix multiplied. -1 is the complex dimension.\"\"\"", "\n", "\n", "if", "is_real", "(", "a", ")", ":", "\n", "        ", "if", "a", ".", "dim", "(", ")", ">=", "b", ".", "dim", "(", ")", ":", "\n", "            ", "raise", "ValueError", "(", "'Incorrect dimensions.'", ")", "\n", "", "return", "mtimes_real_complex", "(", "a", ",", "b", ",", "conj_b", "=", "conj_b", ")", "\n", "", "if", "is_real", "(", "b", ")", ":", "\n", "        ", "if", "b", ".", "dim", "(", ")", ">=", "a", ".", "dim", "(", ")", ":", "\n", "            ", "raise", "ValueError", "(", "'Incorrect dimensions.'", ")", "\n", "", "return", "mtimes_complex_real", "(", "a", ",", "b", ",", "conj_a", "=", "conj_a", ")", "\n", "\n", "", "if", "not", "conj_a", "and", "not", "conj_b", ":", "\n", "        ", "return", "complex", "(", "torch", ".", "matmul", "(", "a", "[", "...", ",", "0", "]", ",", "b", "[", "...", ",", "0", "]", ")", "-", "torch", ".", "matmul", "(", "a", "[", "...", ",", "1", "]", ",", "b", "[", "...", ",", "1", "]", ")", ",", "\n", "torch", ".", "matmul", "(", "a", "[", "...", ",", "0", "]", ",", "b", "[", "...", ",", "1", "]", ")", "+", "torch", ".", "matmul", "(", "a", "[", "...", ",", "1", "]", ",", "b", "[", "...", ",", "0", "]", ")", ")", "\n", "", "if", "conj_a", "and", "not", "conj_b", ":", "\n", "        ", "return", "complex", "(", "torch", ".", "matmul", "(", "a", "[", "...", ",", "0", "]", ",", "b", "[", "...", ",", "0", "]", ")", "+", "torch", ".", "matmul", "(", "a", "[", "...", ",", "1", "]", ",", "b", "[", "...", ",", "1", "]", ")", ",", "\n", "torch", ".", "matmul", "(", "a", "[", "...", ",", "0", "]", ",", "b", "[", "...", ",", "1", "]", ")", "-", "torch", ".", "matmul", "(", "a", "[", "...", ",", "1", "]", ",", "b", "[", "...", ",", "0", "]", ")", ")", "\n", "", "if", "not", "conj_a", "and", "conj_b", ":", "\n", "        ", "return", "complex", "(", "torch", ".", "matmul", "(", "a", "[", "...", ",", "0", "]", ",", "b", "[", "...", ",", "0", "]", ")", "+", "torch", ".", "matmul", "(", "a", "[", "...", ",", "1", "]", ",", "b", "[", "...", ",", "1", "]", ")", ",", "\n", "torch", ".", "matmul", "(", "a", "[", "...", ",", "1", "]", ",", "b", "[", "...", ",", "0", "]", ")", "-", "torch", ".", "matmul", "(", "a", "[", "...", ",", "0", "]", ",", "b", "[", "...", ",", "1", "]", ")", ")", "\n", "", "if", "conj_a", "and", "conj_b", ":", "\n", "        ", "return", "complex", "(", "torch", ".", "matmul", "(", "a", "[", "...", ",", "0", "]", ",", "b", "[", "...", ",", "0", "]", ")", "-", "torch", ".", "matmul", "(", "a", "[", "...", ",", "1", "]", ",", "b", "[", "...", ",", "1", "]", ")", ",", "\n", "-", "torch", ".", "matmul", "(", "a", "[", "...", ",", "0", "]", ",", "b", "[", "...", ",", "1", "]", ")", "-", "torch", ".", "matmul", "(", "a", "[", "...", ",", "1", "]", ",", "b", "[", "...", ",", "0", "]", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mtimes_real_complex": [[181, 190], ["complex.is_real", "ValueError", "complex.complex", "complex.complex", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.complex", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.complex"], ["", "", "@", "tensor_operation", "\n", "def", "mtimes_real_complex", "(", "a", ":", "torch", ".", "Tensor", ",", "b", ":", "torch", ".", "Tensor", ",", "conj_b", "=", "False", ")", ":", "\n", "    ", "if", "is_real", "(", "b", ")", ":", "\n", "        ", "raise", "ValueError", "(", "'Incorrect dimensions.'", ")", "\n", "\n", "", "if", "not", "conj_b", ":", "\n", "        ", "return", "complex", "(", "torch", ".", "matmul", "(", "a", ",", "b", "[", "...", ",", "0", "]", ")", ",", "torch", ".", "matmul", "(", "a", ",", "b", "[", "...", ",", "1", "]", ")", ")", "\n", "", "if", "conj_b", ":", "\n", "        ", "return", "complex", "(", "torch", ".", "matmul", "(", "a", ",", "b", "[", "...", ",", "0", "]", ")", ",", "-", "torch", ".", "matmul", "(", "a", ",", "b", "[", "...", ",", "1", "]", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mtimes_complex_real": [[192, 201], ["complex.is_real", "ValueError", "complex.complex", "complex.complex", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.is_real", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.complex", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.complex"], ["", "", "@", "tensor_operation", "\n", "def", "mtimes_complex_real", "(", "a", ":", "torch", ".", "Tensor", ",", "b", ":", "torch", ".", "Tensor", ",", "conj_a", "=", "False", ")", ":", "\n", "    ", "if", "is_real", "(", "a", ")", ":", "\n", "        ", "raise", "ValueError", "(", "'Incorrect dimensions.'", ")", "\n", "\n", "", "if", "not", "conj_a", ":", "\n", "        ", "return", "complex", "(", "torch", ".", "matmul", "(", "a", "[", "...", ",", "0", "]", ",", "b", ")", ",", "torch", ".", "matmul", "(", "a", "[", "...", ",", "1", "]", ",", "b", ")", ")", "\n", "", "if", "conj_a", ":", "\n", "        ", "return", "complex", "(", "torch", ".", "matmul", "(", "a", "[", "...", ",", "0", "]", ",", "b", ")", ",", "-", "torch", ".", "matmul", "(", "a", "[", "...", ",", "1", "]", ",", "b", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.exp_imag": [[203, 209], ["a.unsqueeze.unsqueeze", "torch.cat", "torch.cos", "torch.sin"], "function", ["None"], ["", "", "@", "tensor_operation", "\n", "def", "exp_imag", "(", "a", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "\"\"\"Complex exponential with imaginary input: e^(i*a)\"\"\"", "\n", "\n", "a", "=", "a", ".", "unsqueeze", "(", "-", "1", ")", "\n", "return", "torch", ".", "cat", "(", "(", "torch", ".", "cos", "(", "a", ")", ",", "torch", ".", "sin", "(", "a", ")", ")", ",", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensordict.TensorDict.concat": [[9, 12], ["tensordict.TensorDict"], "methods", ["None"], ["def", "concat", "(", "self", ",", "other", ")", ":", "\n", "        ", "\"\"\"Concatenates two dicts without copying internal data.\"\"\"", "\n", "return", "TensorDict", "(", "self", ",", "**", "other", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensordict.TensorDict.copy": [[13, 15], ["tensordict.TensorDict", "super().copy"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy"], ["", "def", "copy", "(", "self", ")", ":", "\n", "        ", "return", "TensorDict", "(", "super", "(", "TensorDict", ",", "self", ")", ".", "copy", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensordict.TensorDict.__deepcopy__": [[16, 18], ["tensordict.TensorDict", "copy.deepcopy", "list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "__deepcopy__", "(", "self", ",", "memodict", "=", "{", "}", ")", ":", "\n", "        ", "return", "TensorDict", "(", "copy", ".", "deepcopy", "(", "list", "(", "self", ")", ",", "memodict", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensordict.TensorDict.__getattr__": [[19, 26], ["hasattr", "AttributeError", "tensordict.TensorDict", "hasattr", "tensordict.TensorDict.items", "getattr"], "methods", ["None"], ["", "def", "__getattr__", "(", "self", ",", "name", ")", ":", "\n", "        ", "if", "not", "hasattr", "(", "torch", ".", "Tensor", ",", "name", ")", ":", "\n", "            ", "raise", "AttributeError", "(", "'\\'TensorDict\\' object has not attribute \\'{}\\''", ".", "format", "(", "name", ")", ")", "\n", "\n", "", "def", "apply_attr", "(", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "            ", "return", "TensorDict", "(", "{", "n", ":", "getattr", "(", "e", ",", "name", ")", "(", "*", "args", ",", "**", "kwargs", ")", "if", "hasattr", "(", "e", ",", "name", ")", "else", "e", "for", "n", ",", "e", "in", "self", ".", "items", "(", ")", "}", ")", "\n", "", "return", "apply_attr", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensordict.TensorDict.attribute": [[27, 29], ["tensordict.TensorDict", "getattr", "tensordict.TensorDict.items"], "methods", ["None"], ["", "def", "attribute", "(", "self", ",", "attr", ":", "str", ",", "*", "args", ")", ":", "\n", "        ", "return", "TensorDict", "(", "{", "n", ":", "getattr", "(", "e", ",", "attr", ",", "*", "args", ")", "for", "n", ",", "e", "in", "self", ".", "items", "(", ")", "}", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensordict.TensorDict.apply": [[30, 32], ["tensordict.TensorDict", "fn", "tensordict.TensorDict.items"], "methods", ["None"], ["", "def", "apply", "(", "self", ",", "fn", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "return", "TensorDict", "(", "{", "n", ":", "fn", "(", "e", ",", "*", "args", ",", "**", "kwargs", ")", "for", "n", ",", "e", "in", "self", ".", "items", "(", ")", "}", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensordict.TensorDict._iterable": [[33, 36], ["isinstance"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "_iterable", "(", "a", ")", ":", "\n", "        ", "return", "isinstance", "(", "a", ",", "(", "TensorDict", ",", "list", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__init__": [[9, 13], ["list.__init__", "tensorlist.TensorList.list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["def", "__init__", "(", "self", ",", "list_of_tensors", "=", "None", ")", ":", "\n", "        ", "if", "list_of_tensors", "is", "None", ":", "\n", "            ", "list_of_tensors", "=", "list", "(", ")", "\n", "", "super", "(", "TensorList", ",", "self", ")", ".", "__init__", "(", "list_of_tensors", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__deepcopy__": [[14, 16], ["tensorlist.TensorList", "copy.deepcopy", "tensorlist.TensorList.list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "__deepcopy__", "(", "self", ",", "memodict", "=", "{", "}", ")", ":", "\n", "        ", "return", "TensorList", "(", "copy", ".", "deepcopy", "(", "list", "(", "self", ")", ",", "memodict", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__getitem__": [[17, 24], ["isinstance", "list.__getitem__", "isinstance", "tensorlist.TensorList", "tensorlist.TensorList", "list.__getitem__", "list.__getitem__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__getitem__", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__getitem__", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__getitem__"], ["", "def", "__getitem__", "(", "self", ",", "item", ")", ":", "\n", "        ", "if", "isinstance", "(", "item", ",", "int", ")", ":", "\n", "            ", "return", "super", "(", "TensorList", ",", "self", ")", ".", "__getitem__", "(", "item", ")", "\n", "", "elif", "isinstance", "(", "item", ",", "(", "tuple", ",", "list", ")", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "super", "(", "TensorList", ",", "self", ")", ".", "__getitem__", "(", "i", ")", "for", "i", "in", "item", "]", ")", "\n", "", "else", ":", "\n", "            ", "return", "TensorList", "(", "super", "(", "TensorList", ",", "self", ")", ".", "__getitem__", "(", "item", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__add__": [[25, 29], ["tensorlist.TensorList._iterable", "tensorlist.TensorList", "tensorlist.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "", "def", "__add__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e1", "+", "e2", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "e", "+", "other", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__radd__": [[30, 34], ["tensorlist.TensorList._iterable", "tensorlist.TensorList", "tensorlist.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__radd__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e2", "+", "e1", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "other", "+", "e", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__iadd__": [[35, 43], ["tensorlist.TensorList._iterable", "enumerate", "range", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__iadd__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "for", "i", ",", "e2", "in", "enumerate", "(", "other", ")", ":", "\n", "                ", "self", "[", "i", "]", "+=", "e2", "\n", "", "", "else", ":", "\n", "            ", "for", "i", "in", "range", "(", "len", "(", "self", ")", ")", ":", "\n", "                ", "self", "[", "i", "]", "+=", "other", "\n", "", "", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__sub__": [[44, 48], ["tensorlist.TensorList._iterable", "tensorlist.TensorList", "tensorlist.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__sub__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e1", "-", "e2", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "e", "-", "other", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__rsub__": [[49, 53], ["tensorlist.TensorList._iterable", "tensorlist.TensorList", "tensorlist.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__rsub__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e2", "-", "e1", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "other", "-", "e", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__isub__": [[54, 62], ["tensorlist.TensorList._iterable", "enumerate", "range", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__isub__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "for", "i", ",", "e2", "in", "enumerate", "(", "other", ")", ":", "\n", "                ", "self", "[", "i", "]", "-=", "e2", "\n", "", "", "else", ":", "\n", "            ", "for", "i", "in", "range", "(", "len", "(", "self", ")", ")", ":", "\n", "                ", "self", "[", "i", "]", "-=", "other", "\n", "", "", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__mul__": [[63, 67], ["tensorlist.TensorList._iterable", "tensorlist.TensorList", "tensorlist.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__mul__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e1", "*", "e2", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "e", "*", "other", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__rmul__": [[68, 72], ["tensorlist.TensorList._iterable", "tensorlist.TensorList", "tensorlist.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__rmul__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e2", "*", "e1", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "other", "*", "e", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__imul__": [[73, 81], ["tensorlist.TensorList._iterable", "enumerate", "range", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__imul__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "for", "i", ",", "e2", "in", "enumerate", "(", "other", ")", ":", "\n", "                ", "self", "[", "i", "]", "*=", "e2", "\n", "", "", "else", ":", "\n", "            ", "for", "i", "in", "range", "(", "len", "(", "self", ")", ")", ":", "\n", "                ", "self", "[", "i", "]", "*=", "other", "\n", "", "", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__truediv__": [[82, 86], ["tensorlist.TensorList._iterable", "tensorlist.TensorList", "tensorlist.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__truediv__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e1", "/", "e2", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "e", "/", "other", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__rtruediv__": [[87, 91], ["tensorlist.TensorList._iterable", "tensorlist.TensorList", "tensorlist.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__rtruediv__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e2", "/", "e1", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "other", "/", "e", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__itruediv__": [[92, 100], ["tensorlist.TensorList._iterable", "enumerate", "range", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__itruediv__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "for", "i", ",", "e2", "in", "enumerate", "(", "other", ")", ":", "\n", "                ", "self", "[", "i", "]", "/=", "e2", "\n", "", "", "else", ":", "\n", "            ", "for", "i", "in", "range", "(", "len", "(", "self", ")", ")", ":", "\n", "                ", "self", "[", "i", "]", "/=", "other", "\n", "", "", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__matmul__": [[101, 105], ["tensorlist.TensorList._iterable", "tensorlist.TensorList", "tensorlist.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__matmul__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e1", "@", "e2", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "e", "@", "other", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__rmatmul__": [[106, 110], ["tensorlist.TensorList._iterable", "tensorlist.TensorList", "tensorlist.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__rmatmul__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e2", "@", "e1", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "other", "@", "e", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__imatmul__": [[111, 119], ["tensorlist.TensorList._iterable", "enumerate", "range", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__imatmul__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "for", "i", ",", "e2", "in", "enumerate", "(", "other", ")", ":", "\n", "                ", "self", "[", "i", "]", "@=", "e2", "\n", "", "", "else", ":", "\n", "            ", "for", "i", "in", "range", "(", "len", "(", "self", ")", ")", ":", "\n", "                ", "self", "[", "i", "]", "@=", "other", "\n", "", "", "return", "self", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__mod__": [[120, 124], ["tensorlist.TensorList._iterable", "tensorlist.TensorList", "tensorlist.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__mod__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e1", "%", "e2", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "e", "%", "other", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__rmod__": [[125, 129], ["tensorlist.TensorList._iterable", "tensorlist.TensorList", "tensorlist.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__rmod__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e2", "%", "e1", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "other", "%", "e", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__pos__": [[130, 132], ["tensorlist.TensorList"], "methods", ["None"], ["", "def", "__pos__", "(", "self", ")", ":", "\n", "        ", "return", "TensorList", "(", "[", "+", "e", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__neg__": [[133, 135], ["tensorlist.TensorList"], "methods", ["None"], ["", "def", "__neg__", "(", "self", ")", ":", "\n", "        ", "return", "TensorList", "(", "[", "-", "e", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__le__": [[136, 140], ["tensorlist.TensorList._iterable", "tensorlist.TensorList", "tensorlist.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__le__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e1", "<=", "e2", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "e", "<=", "other", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__ge__": [[141, 145], ["tensorlist.TensorList._iterable", "tensorlist.TensorList", "tensorlist.TensorList", "zip"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable"], ["", "def", "__ge__", "(", "self", ",", "other", ")", ":", "\n", "        ", "if", "TensorList", ".", "_iterable", "(", "other", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "e1", ">=", "e2", "for", "e1", ",", "e2", "in", "zip", "(", "self", ",", "other", ")", "]", ")", "\n", "", "return", "TensorList", "(", "[", "e", ">=", "other", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.concat": [[146, 148], ["tensorlist.TensorList", "list.__add__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__add__"], ["", "def", "concat", "(", "self", ",", "other", ")", ":", "\n", "        ", "return", "TensorList", "(", "super", "(", "TensorList", ",", "self", ")", ".", "__add__", "(", "other", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy": [[149, 151], ["tensorlist.TensorList", "super().copy"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.copy"], ["", "def", "copy", "(", "self", ")", ":", "\n", "        ", "return", "TensorList", "(", "super", "(", "TensorList", ",", "self", ")", ".", "copy", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.unroll": [[152, 163], ["tensorlist.TensorList", "any", "isinstance", "TensorList.extend", "TensorList.append", "isinstance", "t.unroll"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.unroll"], ["", "def", "unroll", "(", "self", ")", ":", "\n", "        ", "if", "not", "any", "(", "isinstance", "(", "t", ",", "TensorList", ")", "for", "t", "in", "self", ")", ":", "\n", "            ", "return", "self", "\n", "\n", "", "new_list", "=", "TensorList", "(", ")", "\n", "for", "t", "in", "self", ":", "\n", "            ", "if", "isinstance", "(", "t", ",", "TensorList", ")", ":", "\n", "                ", "new_list", ".", "extend", "(", "t", ".", "unroll", "(", ")", ")", "\n", "", "else", ":", "\n", "                ", "new_list", ".", "append", "(", "t", ")", "\n", "", "", "return", "new_list", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list": [[164, 166], ["tensorlist.TensorList.list"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["", "def", "list", "(", "self", ")", ":", "\n", "        ", "return", "list", "(", "self", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.attribute": [[167, 169], ["tensorlist.TensorList", "getattr"], "methods", ["None"], ["", "def", "attribute", "(", "self", ",", "attr", ":", "str", ",", "*", "args", ")", ":", "\n", "        ", "return", "TensorList", "(", "[", "getattr", "(", "e", ",", "attr", ",", "*", "args", ")", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply": [[170, 172], ["tensorlist.TensorList", "fn"], "methods", ["None"], ["", "def", "apply", "(", "self", ",", "fn", ")", ":", "\n", "        ", "return", "TensorList", "(", "[", "fn", "(", "e", ")", "for", "e", "in", "self", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.__getattr__": [[173, 181], ["hasattr", "AttributeError", "tensorlist.TensorList", "getattr"], "methods", ["None"], ["", "def", "__getattr__", "(", "self", ",", "name", ")", ":", "\n", "        ", "if", "not", "hasattr", "(", "torch", ".", "Tensor", ",", "name", ")", ":", "\n", "            ", "raise", "AttributeError", "(", "'\\'TensorList\\' object has not attribute \\'{}\\''", ".", "format", "(", "name", ")", ")", "\n", "\n", "", "def", "apply_attr", "(", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "            ", "return", "TensorList", "(", "[", "getattr", "(", "e", ",", "name", ")", "(", "*", "args", ",", "**", "kwargs", ")", "for", "e", "in", "self", "]", ")", "\n", "\n", "", "return", "apply_attr", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList._iterable": [[182, 185], ["isinstance"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "_iterable", "(", "a", ")", ":", "\n", "        ", "return", "isinstance", "(", "a", ",", "(", "TensorList", ",", "list", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.tensor_operation": [[188, 213], ["functools.wraps", "isinstance", "op", "len", "ValueError", "len", "tensorlist.tensor_operation.islist"], "function", ["None"], ["", "", "def", "tensor_operation", "(", "op", ")", ":", "\n", "    ", "def", "islist", "(", "a", ")", ":", "\n", "        ", "return", "isinstance", "(", "a", ",", "TensorList", ")", "\n", "\n", "", "@", "functools", ".", "wraps", "(", "op", ")", "\n", "def", "oplist", "(", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "if", "len", "(", "args", ")", "==", "0", ":", "\n", "            ", "raise", "ValueError", "(", "'Must be at least one argument without keyword (i.e. operand).'", ")", "\n", "\n", "", "if", "len", "(", "args", ")", "==", "1", ":", "\n", "            ", "if", "islist", "(", "args", "[", "0", "]", ")", ":", "\n", "                ", "return", "TensorList", "(", "[", "op", "(", "a", ",", "**", "kwargs", ")", "for", "a", "in", "args", "[", "0", "]", "]", ")", "\n", "", "", "else", ":", "\n", "# Multiple operands, assume max two", "\n", "            ", "if", "islist", "(", "args", "[", "0", "]", ")", "and", "islist", "(", "args", "[", "1", "]", ")", ":", "\n", "                ", "return", "TensorList", "(", "[", "op", "(", "a", ",", "b", ",", "*", "args", "[", "2", ":", "]", ",", "**", "kwargs", ")", "for", "a", ",", "b", "in", "zip", "(", "*", "args", "[", ":", "2", "]", ")", "]", ")", "\n", "", "if", "islist", "(", "args", "[", "0", "]", ")", ":", "\n", "                ", "return", "TensorList", "(", "[", "op", "(", "a", ",", "*", "args", "[", "1", ":", "]", ",", "**", "kwargs", ")", "for", "a", "in", "args", "[", "0", "]", "]", ")", "\n", "", "if", "islist", "(", "args", "[", "1", "]", ")", ":", "\n", "                ", "return", "TensorList", "(", "[", "op", "(", "args", "[", "0", "]", ",", "b", ",", "*", "args", "[", "2", ":", "]", ",", "**", "kwargs", ")", "for", "b", "in", "args", "[", "1", "]", "]", ")", "\n", "\n", "# None of the operands are lists", "\n", "", "", "return", "op", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "\n", "", "return", "oplist", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d": [[6, 33], ["torch.conv2d", "ValueError", "ValueError", "slice", "slice", "slice", "slice"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d"], ["@", "tensor_operation", "\n", "def", "conv2d", "(", "input", ":", "torch", ".", "Tensor", ",", "weight", ":", "torch", ".", "Tensor", ",", "bias", ":", "torch", ".", "Tensor", "=", "None", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "dilation", "=", "1", ",", "groups", "=", "1", ",", "mode", "=", "None", ")", ":", "\n", "    ", "\"\"\"Standard conv2d. Returns the input if weight=None.\"\"\"", "\n", "\n", "if", "weight", "is", "None", ":", "\n", "        ", "return", "input", "\n", "\n", "", "ind", "=", "None", "\n", "if", "mode", "is", "not", "None", ":", "\n", "        ", "if", "padding", "!=", "0", ":", "\n", "            ", "raise", "ValueError", "(", "'Cannot input both padding and mode.'", ")", "\n", "", "if", "mode", "==", "'same'", ":", "\n", "            ", "padding", "=", "(", "weight", ".", "shape", "[", "2", "]", "//", "2", ",", "weight", ".", "shape", "[", "3", "]", "//", "2", ")", "\n", "if", "weight", ".", "shape", "[", "2", "]", "%", "2", "==", "0", "or", "weight", ".", "shape", "[", "3", "]", "%", "2", "==", "0", ":", "\n", "                ", "ind", "=", "(", "slice", "(", "-", "1", ")", "if", "weight", ".", "shape", "[", "2", "]", "%", "2", "==", "0", "else", "slice", "(", "None", ")", ",", "\n", "slice", "(", "-", "1", ")", "if", "weight", ".", "shape", "[", "3", "]", "%", "2", "==", "0", "else", "slice", "(", "None", ")", ")", "\n", "", "", "elif", "mode", "==", "'valid'", ":", "\n", "            ", "padding", "=", "(", "0", ",", "0", ")", "\n", "", "elif", "mode", "==", "'full'", ":", "\n", "            ", "padding", "=", "(", "weight", ".", "shape", "[", "2", "]", "-", "1", ",", "weight", ".", "shape", "[", "3", "]", "-", "1", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'Unknown mode for padding.'", ")", "\n", "\n", "", "", "out", "=", "F", ".", "conv2d", "(", "input", ",", "weight", ",", "bias", "=", "bias", ",", "stride", "=", "stride", ",", "padding", "=", "padding", ",", "dilation", "=", "dilation", ",", "groups", "=", "groups", ")", "\n", "if", "ind", "is", "None", ":", "\n", "        ", "return", "out", "\n", "", "return", "out", "[", ":", ",", ":", ",", "ind", "[", "0", "]", ",", "ind", "[", "1", "]", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv1x1": [[35, 43], ["torch.conv2d", "torch.conv2d"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d"], ["", "@", "tensor_operation", "\n", "def", "conv1x1", "(", "input", ":", "torch", ".", "Tensor", ",", "weight", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "\"\"\"Do a convolution with a 1x1 kernel weights. Implemented with matmul, which can be faster than using conv.\"\"\"", "\n", "\n", "if", "weight", "is", "None", ":", "\n", "        ", "return", "input", "\n", "\n", "", "return", "torch", ".", "conv2d", "(", "input", ",", "weight", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.hann1d": [[8, 14], ["torch.cat", "torch.cat", "torch.cos", "torch.cos", "w[].flip", "torch.cos", "torch.cos", "torch.arange().float", "torch.arange().float", "torch.arange().float", "torch.arange().float", "torch.arange", "torch.arange", "torch.arange", "torch.arange"], "function", ["None"], ["def", "hann1d", "(", "sz", ":", "int", ",", "centered", "=", "True", ")", "->", "torch", ".", "Tensor", ":", "\n", "    ", "\"\"\"1D cosine window.\"\"\"", "\n", "if", "centered", ":", "\n", "        ", "return", "0.5", "*", "(", "1", "-", "torch", ".", "cos", "(", "(", "2", "*", "math", ".", "pi", "/", "(", "sz", "+", "1", ")", ")", "*", "torch", ".", "arange", "(", "1", ",", "sz", "+", "1", ")", ".", "float", "(", ")", ")", ")", "\n", "", "w", "=", "0.5", "*", "(", "1", "+", "torch", ".", "cos", "(", "(", "2", "*", "math", ".", "pi", "/", "(", "sz", "+", "2", ")", ")", "*", "torch", ".", "arange", "(", "0", ",", "sz", "//", "2", "+", "1", ")", ".", "float", "(", ")", ")", ")", "\n", "return", "torch", ".", "cat", "(", "[", "w", ",", "w", "[", "1", ":", "sz", "-", "sz", "//", "2", "]", ".", "flip", "(", "(", "0", ",", ")", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.hann2d": [[16, 19], ["hann1d().reshape", "hann1d().reshape", "dcf.hann1d", "dcf.hann1d", "sz[].item", "sz[].item"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.hann1d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.hann1d"], ["", "def", "hann2d", "(", "sz", ":", "torch", ".", "Tensor", ",", "centered", "=", "True", ")", "->", "torch", ".", "Tensor", ":", "\n", "    ", "\"\"\"2D cosine window.\"\"\"", "\n", "return", "hann1d", "(", "sz", "[", "0", "]", ".", "item", "(", ")", ",", "centered", ")", ".", "reshape", "(", "1", ",", "1", ",", "-", "1", ",", "1", ")", "*", "hann1d", "(", "sz", "[", "1", "]", ".", "item", "(", ")", ",", "centered", ")", ".", "reshape", "(", "1", ",", "1", ",", "1", ",", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.hann2d_clipped": [[21, 38], ["torch.pad", "hann1d().reshape", "hann1d().reshape", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "pad[].item", "pad[].item", "pad[].item", "pad[].item", "dcf.hann1d", "dcf.hann1d", "effective_sz[].item", "effective_sz[].item"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.hann1d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.hann1d"], ["", "def", "hann2d_clipped", "(", "sz", ":", "torch", ".", "Tensor", ",", "effective_sz", ":", "torch", ".", "Tensor", ",", "centered", "=", "True", ")", "->", "torch", ".", "Tensor", ":", "\n", "    ", "\"\"\"1D clipped cosine window.\"\"\"", "\n", "\n", "# Ensure that the difference is even", "\n", "effective_sz", "+=", "(", "effective_sz", "-", "sz", ")", "%", "2", "\n", "effective_window", "=", "hann1d", "(", "effective_sz", "[", "0", "]", ".", "item", "(", ")", ",", "True", ")", ".", "reshape", "(", "1", ",", "1", ",", "-", "1", ",", "1", ")", "*", "hann1d", "(", "effective_sz", "[", "1", "]", ".", "item", "(", ")", ",", "True", ")", ".", "reshape", "(", "1", ",", "1", ",", "1", ",", "-", "1", ")", "\n", "\n", "pad", "=", "(", "sz", "-", "effective_sz", ")", "/", "2", "\n", "\n", "window", "=", "F", ".", "pad", "(", "effective_window", ",", "(", "pad", "[", "1", "]", ".", "item", "(", ")", ",", "pad", "[", "1", "]", ".", "item", "(", ")", ",", "pad", "[", "0", "]", ".", "item", "(", ")", ",", "pad", "[", "0", "]", ".", "item", "(", ")", ")", ",", "'replicate'", ")", "\n", "\n", "if", "centered", ":", "\n", "        ", "return", "window", "\n", "", "else", ":", "\n", "        ", "mid", "=", "(", "sz", "/", "2", ")", ".", "int", "(", ")", "\n", "window_shift_lr", "=", "torch", ".", "cat", "(", "(", "window", "[", ":", ",", ":", ",", ":", ",", "mid", "[", "1", "]", ":", "]", ",", "window", "[", ":", ",", ":", ",", ":", ",", ":", "mid", "[", "1", "]", "]", ")", ",", "3", ")", "\n", "return", "torch", ".", "cat", "(", "(", "window_shift_lr", "[", ":", ",", ":", ",", "mid", "[", "0", "]", ":", ",", ":", "]", ",", "window_shift_lr", "[", ":", ",", ":", ",", ":", "mid", "[", "0", "]", ",", ":", "]", ")", ",", "2", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.gauss_fourier": [[40, 46], ["torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.exp", "torch.exp", "int", "int", "int", "math.sqrt", "torch.arange.float"], "function", ["None"], ["", "", "def", "gauss_fourier", "(", "sz", ":", "int", ",", "sigma", ":", "float", ",", "half", ":", "bool", "=", "False", ")", "->", "torch", ".", "Tensor", ":", "\n", "    ", "if", "half", ":", "\n", "        ", "k", "=", "torch", ".", "arange", "(", "0", ",", "int", "(", "sz", "/", "2", "+", "1", ")", ")", "\n", "", "else", ":", "\n", "        ", "k", "=", "torch", ".", "arange", "(", "-", "int", "(", "(", "sz", "-", "1", ")", "/", "2", ")", ",", "int", "(", "sz", "/", "2", "+", "1", ")", ")", "\n", "", "return", "(", "math", ".", "sqrt", "(", "2", "*", "math", ".", "pi", ")", "*", "sigma", "/", "sz", ")", "*", "torch", ".", "exp", "(", "-", "2", "*", "(", "math", ".", "pi", "*", "sigma", "*", "k", ".", "float", "(", ")", "/", "sz", ")", "**", "2", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.gauss_spatial": [[48, 51], ["torch.arange", "torch.arange", "torch.exp", "torch.exp"], "function", ["None"], ["", "def", "gauss_spatial", "(", "sz", ",", "sigma", ",", "center", "=", "0", ",", "end_pad", "=", "0", ")", ":", "\n", "    ", "k", "=", "torch", ".", "arange", "(", "-", "(", "sz", "-", "1", ")", "/", "2", ",", "(", "sz", "+", "1", ")", "/", "2", "+", "end_pad", ")", "\n", "return", "torch", ".", "exp", "(", "-", "1.0", "/", "(", "2", "*", "sigma", "**", "2", ")", "*", "(", "k", "-", "center", ")", "**", "2", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.label_function": [[53, 55], ["gauss_fourier().reshape", "gauss_fourier().reshape", "dcf.gauss_fourier", "dcf.gauss_fourier", "sz[].item", "sigma[].item", "sz[].item", "sigma[].item"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.gauss_fourier", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.gauss_fourier"], ["", "def", "label_function", "(", "sz", ":", "torch", ".", "Tensor", ",", "sigma", ":", "torch", ".", "Tensor", ")", ":", "\n", "    ", "return", "gauss_fourier", "(", "sz", "[", "0", "]", ".", "item", "(", ")", ",", "sigma", "[", "0", "]", ".", "item", "(", ")", ")", ".", "reshape", "(", "1", ",", "1", ",", "-", "1", ",", "1", ")", "*", "gauss_fourier", "(", "sz", "[", "1", "]", ".", "item", "(", ")", ",", "sigma", "[", "1", "]", ".", "item", "(", ")", ",", "True", ")", ".", "reshape", "(", "1", ",", "1", ",", "1", ",", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.label_function_spatial": [[56, 60], ["torch.zeros", "torch.zeros", "torch.zeros", "torch.zeros", "gauss_spatial().reshape", "gauss_spatial().reshape", "dcf.gauss_spatial", "dcf.gauss_spatial", "sz[].item", "sigma[].item", "end_pad[].item", "sz[].item", "sigma[].item", "end_pad[].item"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.gauss_spatial", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.gauss_spatial"], ["", "def", "label_function_spatial", "(", "sz", ":", "torch", ".", "Tensor", ",", "sigma", ":", "torch", ".", "Tensor", ",", "center", ":", "torch", ".", "Tensor", "=", "torch", ".", "zeros", "(", "2", ")", ",", "end_pad", ":", "torch", ".", "Tensor", "=", "torch", ".", "zeros", "(", "2", ")", ")", ":", "\n", "    ", "\"\"\"The origin is in the middle of the image.\"\"\"", "\n", "return", "gauss_spatial", "(", "sz", "[", "0", "]", ".", "item", "(", ")", ",", "sigma", "[", "0", "]", ".", "item", "(", ")", ",", "center", "[", "0", "]", ",", "end_pad", "[", "0", "]", ".", "item", "(", ")", ")", ".", "reshape", "(", "1", ",", "1", ",", "-", "1", ",", "1", ")", "*", "gauss_spatial", "(", "sz", "[", "1", "]", ".", "item", "(", ")", ",", "sigma", "[", "1", "]", ".", "item", "(", ")", ",", "center", "[", "1", "]", ",", "end_pad", "[", "1", "]", ".", "item", "(", ")", ")", ".", "reshape", "(", "1", ",", "1", ",", "1", ",", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.cubic_spline_fourier": [[62, 72], ["torch.sin", "torch.sin", "torch.sin", "torch.sin", "torch.cos", "torch.cos", "torch.cos", "torch.cos"], "function", ["None"], ["", "def", "cubic_spline_fourier", "(", "f", ",", "a", ")", ":", "\n", "    ", "\"\"\"The continuous Fourier transform of a cubic spline kernel.\"\"\"", "\n", "\n", "bf", "=", "(", "6", "*", "(", "1", "-", "torch", ".", "cos", "(", "2", "*", "math", ".", "pi", "*", "f", ")", ")", "+", "3", "*", "a", "*", "(", "1", "-", "torch", ".", "cos", "(", "4", "*", "math", ".", "pi", "*", "f", ")", ")", "\n", "-", "(", "6", "+", "8", "*", "a", ")", "*", "math", ".", "pi", "*", "f", "*", "torch", ".", "sin", "(", "2", "*", "math", ".", "pi", "*", "f", ")", "-", "2", "*", "a", "*", "math", ".", "pi", "*", "f", "*", "torch", ".", "sin", "(", "4", "*", "math", ".", "pi", "*", "f", ")", ")", "/", "(", "4", "*", "math", ".", "pi", "**", "4", "*", "f", "**", "4", ")", "\n", "\n", "bf", "[", "f", "==", "0", "]", "=", "1", "\n", "\n", "return", "bf", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.get_interp_fourier": [[74, 95], ["pytracking.fourier.get_frequency_coord", "pytracking.complex.mult", "pytracking.complex.mult", "complex.mult.to", "complex.mult.to", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "ValueError", "pytracking.complex.exp_imag", "pytracking.complex.exp_imag", "dcf.cubic_spline_fourier", "dcf.cubic_spline_fourier"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.get_frequency_coord", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.exp_imag", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.exp_imag", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.cubic_spline_fourier", "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.cubic_spline_fourier"], ["", "def", "get_interp_fourier", "(", "sz", ":", "torch", ".", "Tensor", ",", "method", "=", "'ideal'", ",", "bicubic_param", "=", "0.5", ",", "centering", "=", "True", ",", "windowing", "=", "False", ",", "device", "=", "'cpu'", ")", ":", "\n", "\n", "    ", "ky", ",", "kx", "=", "fourier", ".", "get_frequency_coord", "(", "sz", ")", "\n", "\n", "if", "method", "==", "'ideal'", ":", "\n", "        ", "interp_y", "=", "torch", ".", "ones", "(", "ky", ".", "shape", ")", "/", "sz", "[", "0", "]", "\n", "interp_x", "=", "torch", ".", "ones", "(", "kx", ".", "shape", ")", "/", "sz", "[", "1", "]", "\n", "", "elif", "method", "==", "'bicubic'", ":", "\n", "        ", "interp_y", "=", "cubic_spline_fourier", "(", "ky", "/", "sz", "[", "0", "]", ",", "bicubic_param", ")", "/", "sz", "[", "0", "]", "\n", "interp_x", "=", "cubic_spline_fourier", "(", "kx", "/", "sz", "[", "1", "]", ",", "bicubic_param", ")", "/", "sz", "[", "1", "]", "\n", "", "else", ":", "\n", "        ", "raise", "ValueError", "(", "'Unknown method.'", ")", "\n", "\n", "", "if", "centering", ":", "\n", "        ", "interp_y", "=", "complex", ".", "mult", "(", "interp_y", ",", "complex", ".", "exp_imag", "(", "(", "-", "math", ".", "pi", "/", "sz", "[", "0", "]", ")", "*", "ky", ")", ")", "\n", "interp_x", "=", "complex", ".", "mult", "(", "interp_x", ",", "complex", ".", "exp_imag", "(", "(", "-", "math", ".", "pi", "/", "sz", "[", "1", "]", ")", "*", "kx", ")", ")", "\n", "\n", "", "if", "windowing", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "\n", "", "return", "interp_y", ".", "to", "(", "device", ")", ",", "interp_x", ".", "to", "(", "device", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.interpolate_dft": [[97, 104], ["isinstance", "isinstance", "ValueError", "pytracking.complex.mult", "pytracking.complex.mult", "pytracking.complex.mult"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.mult"], ["", "def", "interpolate_dft", "(", "a", ":", "torch", ".", "Tensor", ",", "interp_fs", ")", "->", "torch", ".", "Tensor", ":", "\n", "\n", "    ", "if", "isinstance", "(", "interp_fs", ",", "torch", ".", "Tensor", ")", ":", "\n", "        ", "return", "complex", ".", "mult", "(", "a", ",", "interp_fs", ")", "\n", "", "if", "isinstance", "(", "interp_fs", ",", "(", "tuple", ",", "list", ")", ")", ":", "\n", "        ", "return", "complex", ".", "mult", "(", "complex", ".", "mult", "(", "a", ",", "interp_fs", "[", "0", "]", ")", ",", "interp_fs", "[", "1", "]", ")", "\n", "", "raise", "ValueError", "(", "'\"interp_fs\" must be tensor or tuple of tensors.'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.get_reg_filter": [[106, 154], ["getattr", "getattr", "pytracking.complex.abs", "torch.irfft", "torch.irfft", "pytracking.complex.real", "torch.cat.nonzero().max", "int", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.cat().view", "torch.cat().view", "torch.cat().view", "torch.cat().view", "torch.rfft", "torch.rfft", "sz.prod", "pytracking.fourier.rfftshift2", "max_inds[].item", "max_inds[].item", "max_inds[].item", "torch.cat", "torch.cat", "torch.ones", "torch.ones", "target_sz.prod().sqrt", "torch.ones", "torch.ones", "sz.long().tolist", "sz.prod", "torch.irfft.min", "torch.cat.nonzero", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "reg_window_dft[].flip", "target_sz.prod", "int", "int", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "sz.long", "int", "int", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "complex.abs.max", "int", "int", "int", "int"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.real", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.libs.fourier.rfftshift2", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "get_reg_filter", "(", "sz", ":", "torch", ".", "Tensor", ",", "target_sz", ":", "torch", ".", "Tensor", ",", "params", ")", ":", "\n", "    ", "\"\"\"Computes regularization filter in CCOT and ECO.\"\"\"", "\n", "\n", "if", "not", "params", ".", "use_reg_window", ":", "\n", "        ", "return", "params", ".", "reg_window_min", "*", "torch", ".", "ones", "(", "1", ",", "1", ",", "1", ",", "1", ")", "\n", "\n", "", "if", "getattr", "(", "params", ",", "'reg_window_square'", ",", "False", ")", ":", "\n", "        ", "target_sz", "=", "target_sz", ".", "prod", "(", ")", ".", "sqrt", "(", ")", "*", "torch", ".", "ones", "(", "2", ")", "\n", "\n", "# Normalization factor", "\n", "", "reg_scale", "=", "0.5", "*", "target_sz", "\n", "\n", "# Construct grid", "\n", "if", "getattr", "(", "params", ",", "'reg_window_centered'", ",", "True", ")", ":", "\n", "        ", "wrg", "=", "torch", ".", "arange", "(", "-", "int", "(", "(", "sz", "[", "0", "]", "-", "1", ")", "/", "2", ")", ",", "int", "(", "sz", "[", "0", "]", "/", "2", "+", "1", ")", ",", "dtype", "=", "torch", ".", "float32", ")", ".", "view", "(", "1", ",", "1", ",", "-", "1", ",", "1", ")", "\n", "wcg", "=", "torch", ".", "arange", "(", "-", "int", "(", "(", "sz", "[", "1", "]", "-", "1", ")", "/", "2", ")", ",", "int", "(", "sz", "[", "1", "]", "/", "2", "+", "1", ")", ",", "dtype", "=", "torch", ".", "float32", ")", ".", "view", "(", "1", ",", "1", ",", "1", ",", "-", "1", ")", "\n", "", "else", ":", "\n", "        ", "wrg", "=", "torch", ".", "cat", "(", "[", "torch", ".", "arange", "(", "0", ",", "int", "(", "sz", "[", "0", "]", "/", "2", "+", "1", ")", ",", "dtype", "=", "torch", ".", "float32", ")", ",", "\n", "torch", ".", "arange", "(", "-", "int", "(", "(", "sz", "[", "0", "]", "-", "1", ")", "/", "2", ")", ",", "0", ",", "dtype", "=", "torch", ".", "float32", ")", "]", ")", ".", "view", "(", "1", ",", "1", ",", "-", "1", ",", "1", ")", "\n", "wcg", "=", "torch", ".", "cat", "(", "[", "torch", ".", "arange", "(", "0", ",", "int", "(", "sz", "[", "1", "]", "/", "2", "+", "1", ")", ",", "dtype", "=", "torch", ".", "float32", ")", ",", "\n", "torch", ".", "arange", "(", "-", "int", "(", "(", "sz", "[", "1", "]", "-", "1", ")", "/", "2", ")", ",", "0", ",", "dtype", "=", "torch", ".", "float32", ")", "]", ")", ".", "view", "(", "1", ",", "1", ",", "1", ",", "-", "1", ")", "\n", "\n", "# Construct regularization window", "\n", "", "reg_window", "=", "(", "params", ".", "reg_window_edge", "-", "params", ".", "reg_window_min", ")", "*", "(", "torch", ".", "abs", "(", "wrg", "/", "reg_scale", "[", "0", "]", ")", "**", "params", ".", "reg_window_power", "+", "\n", "torch", ".", "abs", "(", "wcg", "/", "reg_scale", "[", "1", "]", ")", "**", "params", ".", "reg_window_power", ")", "+", "params", ".", "reg_window_min", "\n", "\n", "# Compute DFT and enforce sparsity", "\n", "reg_window_dft", "=", "torch", ".", "rfft", "(", "reg_window", ",", "2", ")", "/", "sz", ".", "prod", "(", ")", "\n", "reg_window_dft_abs", "=", "complex", ".", "abs", "(", "reg_window_dft", ")", "\n", "reg_window_dft", "[", "reg_window_dft_abs", "<", "params", ".", "reg_sparsity_threshold", "*", "reg_window_dft_abs", ".", "max", "(", ")", ",", ":", "]", "=", "0", "\n", "\n", "# Do the inverse transform to correct for the window minimum", "\n", "reg_window_sparse", "=", "torch", ".", "irfft", "(", "reg_window_dft", ",", "2", ",", "signal_sizes", "=", "sz", ".", "long", "(", ")", ".", "tolist", "(", ")", ")", "\n", "reg_window_dft", "[", "0", ",", "0", ",", "0", ",", "0", ",", "0", "]", "+=", "params", ".", "reg_window_min", "-", "sz", ".", "prod", "(", ")", "*", "reg_window_sparse", ".", "min", "(", ")", "\n", "reg_window_dft", "=", "complex", ".", "real", "(", "fourier", ".", "rfftshift2", "(", "reg_window_dft", ")", ")", "\n", "\n", "# Remove zeros", "\n", "max_inds", ",", "_", "=", "reg_window_dft", ".", "nonzero", "(", ")", ".", "max", "(", "dim", "=", "0", ")", "\n", "mid_ind", "=", "int", "(", "(", "reg_window_dft", ".", "shape", "[", "2", "]", "-", "1", ")", "/", "2", ")", "\n", "top", "=", "max_inds", "[", "-", "2", "]", ".", "item", "(", ")", "+", "1", "\n", "bottom", "=", "2", "*", "mid_ind", "-", "max_inds", "[", "-", "2", "]", ".", "item", "(", ")", "\n", "right", "=", "max_inds", "[", "-", "1", "]", ".", "item", "(", ")", "+", "1", "\n", "reg_window_dft", "=", "reg_window_dft", "[", "...", ",", "bottom", ":", "top", ",", ":", "right", "]", "\n", "if", "reg_window_dft", ".", "shape", "[", "-", "1", "]", ">", "1", ":", "\n", "        ", "reg_window_dft", "=", "torch", ".", "cat", "(", "[", "reg_window_dft", "[", "...", ",", "1", ":", "]", ".", "flip", "(", "(", "2", ",", "3", ")", ")", ",", "reg_window_dft", "]", ",", "-", "1", ")", "\n", "\n", "", "return", "reg_window_dft", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.libs.dcf.max2d": [[156, 165], ["torch.max", "torch.max", "torch.max", "torch.max", "argmax_row.reshape.reshape", "torch.cat", "torch.cat", "argmax_row.reshape.view", "argmax_col.numel", "argmax_row.reshape.unsqueeze", "argmax_col.unsqueeze", "torch.arange", "torch.arange", "argmax_col.view", "argmax_col.numel"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], ["", "def", "max2d", "(", "a", ":", "torch", ".", "Tensor", ")", "->", "(", "torch", ".", "Tensor", ",", "torch", ".", "Tensor", ")", ":", "\n", "    ", "\"\"\"Computes maximum and argmax in the last two dimensions.\"\"\"", "\n", "\n", "max_val_row", ",", "argmax_row", "=", "torch", ".", "max", "(", "a", ",", "dim", "=", "-", "2", ")", "\n", "max_val", ",", "argmax_col", "=", "torch", ".", "max", "(", "max_val_row", ",", "dim", "=", "-", "1", ")", "\n", "argmax_row", "=", "argmax_row", ".", "view", "(", "argmax_col", ".", "numel", "(", ")", ",", "-", "1", ")", "[", "torch", ".", "arange", "(", "argmax_col", ".", "numel", "(", ")", ")", ",", "argmax_col", ".", "view", "(", "-", "1", ")", "]", "\n", "argmax_row", "=", "argmax_row", ".", "reshape", "(", "argmax_col", ".", "shape", ")", "\n", "argmax", "=", "torch", ".", "cat", "(", "(", "argmax_row", ".", "unsqueeze", "(", "-", "1", ")", ",", "argmax_col", ".", "unsqueeze", "(", "-", "1", ")", ")", ",", "-", "1", ")", "\n", "return", "max_val", ",", "argmax", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.util_scripts.download_results._download_file": [[57, 60], ["gdown.download"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.dataset.COCO_tool.COCO.download"], ["def", "_download_file", "(", "file_id", ",", "path", ")", ":", "\n", "    ", "link", "=", "'https://drive.google.com/uc?id='", "+", "file_id", "\n", "gdown", ".", "download", "(", "link", ",", "path", ",", "quiet", "=", "True", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.util_scripts.download_results.download_results": [[62, 108], ["print", "os.makedirs", "isinstance", "trackers.items", "isinstance", "os.path.join", "Exception", "os.path.exists", "os.makedirs", "results_link_dict[].items", "isinstance", "Exception", "print", "download_results._download_file", "Exception", "results_link_dict.keys", "os.path.join", "results_link_dict[].items", "re.match", "print", "download_results._download_file", "os.path.join"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.util_scripts.download_results._download_file", "home.repos.pwc.inspect_result.researchmm_Stark.util_scripts.download_results._download_file"], ["", "def", "download_results", "(", "download_path", ",", "trackers", "=", "'all'", ")", ":", "\n", "    ", "\"\"\"\n    Script to automatically download tracker results for PyTracking.\n\n    args:\n        download_path - Directory where the zipped results are downloaded\n        trackers - Tracker results which are to be downloaded. If set to 'all', all available results are downloaded.\n                   If set to a name of a tracker (e.g. atom), all results for that tracker are downloaded.\n                   Otherwise, it can be set to a dict, where the keys are the names of the trackers for which results are\n                   downloaded. The value can be set to either 'all', in which case all available results for the\n                    tracker are downloaded. Else the value should be a list of parameter file names.\n    \"\"\"", "\n", "print", "(", "'Using download path '", "'{}'", "''", ".", "format", "(", "download_path", ")", ")", "\n", "\n", "os", ".", "makedirs", "(", "download_path", ",", "exist_ok", "=", "True", ")", "\n", "\n", "if", "isinstance", "(", "trackers", ",", "str", ")", ":", "\n", "        ", "if", "trackers", "==", "'all'", ":", "\n", "            ", "trackers", "=", "{", "k", ":", "'all'", "for", "k", "in", "results_link_dict", ".", "keys", "(", ")", "}", "\n", "", "elif", "trackers", "in", "results_link_dict", ":", "\n", "            ", "trackers", "=", "{", "trackers", ":", "'all'", "}", "\n", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "'tracker_list must be set to '", "'all'", "', a tracker name, or be a dict'", ")", "\n", "", "", "elif", "isinstance", "(", "trackers", ",", "dict", ")", ":", "\n", "        ", "pass", "\n", "", "else", ":", "\n", "        ", "raise", "Exception", "(", "'tracker_list must be set to '", "'all'", "', or be a dict'", ")", "\n", "\n", "", "for", "trk", ",", "runfiles", "in", "trackers", ".", "items", "(", ")", ":", "\n", "        ", "trk_path", "=", "os", ".", "path", ".", "join", "(", "download_path", ",", "trk", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "trk_path", ")", ":", "\n", "            ", "os", ".", "makedirs", "(", "trk_path", ")", "\n", "\n", "", "if", "runfiles", "==", "'all'", ":", "\n", "            ", "for", "params", ",", "fileid", "in", "results_link_dict", "[", "trk", "]", ".", "items", "(", ")", ":", "\n", "                ", "print", "(", "'Downloading: {}/{}'", ".", "format", "(", "trk", ",", "params", ")", ")", "\n", "_download_file", "(", "fileid", ",", "os", ".", "path", ".", "join", "(", "trk_path", ",", "params", ")", ")", "\n", "", "", "elif", "isinstance", "(", "runfiles", ",", "(", "list", ",", "tuple", ")", ")", ":", "\n", "            ", "for", "p", "in", "runfiles", ":", "\n", "                ", "for", "params", ",", "fileid", "in", "results_link_dict", "[", "trk", "]", ".", "items", "(", ")", ":", "\n", "                    ", "if", "re", ".", "match", "(", "r'{}(|_(\\d\\d\\d)).zip'", ".", "format", "(", "p", ")", ",", "params", ")", "is", "not", "None", ":", "\n", "                        ", "print", "(", "'Downloading: {}/{}'", ".", "format", "(", "trk", ",", "params", ")", ")", "\n", "_download_file", "(", "fileid", ",", "os", ".", "path", ".", "join", "(", "trk_path", ",", "params", ")", ")", "\n", "\n", "", "", "", "", "else", ":", "\n", "            ", "raise", "Exception", "(", "'tracker_list values must either be set to '", "'all'", "', or be a list of param names'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.util_scripts.download_results.unpack_tracking_results": [[111, 148], ["os.listdir", "os.path.exists", "os.makedirs", "os.listdir", "pytracking.evaluation.environment.env_settings", "os.path.join", "os.path.join", "shutil.unpack_archive", "os.path.exists", "os.makedirs", "os.path.join", "os.path.join"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["", "", "", "def", "unpack_tracking_results", "(", "download_path", ",", "output_path", "=", "None", ")", ":", "\n", "    ", "\"\"\"\n    Unpacks zipped benchmark results. The directory 'download_path' should have the following structure\n    - root\n        - tracker1\n            - param1.zip\n            - param2.zip\n            .\n            .\n        - tracker2\n            - param1.zip\n            - param2.zip\n        .\n        .\n\n    args:\n        download_path - Path to the directory where the zipped results are stored\n        output_path - Path to the directory where the results will be unpacked. Set to env_settings().results_path\n                      by default\n    \"\"\"", "\n", "\n", "if", "output_path", "is", "None", ":", "\n", "        ", "output_path", "=", "env_settings", "(", ")", ".", "results_path", "\n", "\n", "", "if", "not", "os", ".", "path", ".", "exists", "(", "output_path", ")", ":", "\n", "        ", "os", ".", "makedirs", "(", "output_path", ")", "\n", "\n", "", "trackers", "=", "os", ".", "listdir", "(", "download_path", ")", "\n", "\n", "for", "t", "in", "trackers", ":", "\n", "        ", "runfiles", "=", "os", ".", "listdir", "(", "os", ".", "path", ".", "join", "(", "download_path", ",", "t", ")", ")", "\n", "\n", "for", "r", "in", "runfiles", ":", "\n", "            ", "save_path", "=", "os", ".", "path", ".", "join", "(", "output_path", ",", "t", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "save_path", ")", ":", "\n", "                ", "os", ".", "makedirs", "(", "save_path", ")", "\n", "", "shutil", ".", "unpack_archive", "(", "os", ".", "path", ".", "join", "(", "download_path", ",", "t", ",", "r", ")", ",", "os", ".", "path", ".", "join", "(", "save_path", ",", "r", "[", ":", "-", "4", "]", ")", ",", "'zip'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.util_scripts.download_results.main": [[150, 170], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.parse_args", "download_results.unpack_tracking_results", "download_results.download_results", "tempfile.gettempdir"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.parse_args", "home.repos.pwc.inspect_result.researchmm_Stark.util_scripts.download_results.unpack_tracking_results", "home.repos.pwc.inspect_result.researchmm_Stark.util_scripts.download_results.download_results"], ["", "", "", "def", "main", "(", ")", ":", "\n", "    ", "parser", "=", "argparse", ".", "ArgumentParser", "(", "description", "=", "'Download and unpack zipped results'", ")", "\n", "parser", ".", "add_argument", "(", "'--tracker'", ",", "type", "=", "str", ",", "default", "=", "'all'", ",", "\n", "help", "=", "'Name of tracker results to download, or '", "'all'", "'.'", ")", "\n", "parser", ".", "add_argument", "(", "'--output_path'", ",", "type", "=", "str", ",", "default", "=", "None", ",", "\n", "help", "=", "'Path to the directory where the results will be unpacked.'", ")", "\n", "parser", ".", "add_argument", "(", "'--temp_download_path'", ",", "type", "=", "str", ",", "default", "=", "None", ",", "\n", "help", "=", "'Temporary path used for downloading the Zip files.'", ")", "\n", "parser", ".", "add_argument", "(", "'--download'", ",", "type", "=", "bool", ",", "default", "=", "True", ",", "\n", "help", "=", "'Whether to download results or unpack existing downloaded files.'", ")", "\n", "args", "=", "parser", ".", "parse_args", "(", ")", "\n", "\n", "download_path", "=", "args", ".", "temp_download_path", "\n", "if", "download_path", "is", "None", ":", "\n", "        ", "download_path", "=", "'{}/pytracking_results/'", ".", "format", "(", "tempfile", ".", "gettempdir", "(", ")", ")", "\n", "\n", "", "if", "args", ".", "download", ":", "\n", "        ", "download_results", "(", "download_path", ",", "args", ".", "tracker", ")", "\n", "\n", "", "unpack_tracking_results", "(", "download_path", ",", "args", ".", "output_path", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.util_scripts.pack_trackingnet_results.pack_trackingnet_results": [[8, 51], ["os.path.join", "pytracking.evaluation.datasets.get_dataset", "shutil.make_archive", "shutil.rmtree", "os.path.exists", "os.makedirs", "pytracking.evaluation.environment.env_settings", "numpy.loadtxt", "numpy.savetxt", "pytracking.evaluation.environment.env_settings"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.evaluation.datasets.get_dataset", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "pack_trackingnet_results", "(", "tracker_name", ",", "param_name", ",", "run_id", "=", "None", ",", "output_name", "=", "None", ")", ":", "\n", "    ", "\"\"\" Packs trackingnet results into a zip folder which can be directly uploaded to the evaluation server. The packed\n    file is saved in the folder env_settings().tn_packed_results_path\n\n    args:\n        tracker_name - name of the tracker\n        param_name - name of the parameter file\n        run_id - run id for the tracker\n        output_name - name of the packed zip file\n    \"\"\"", "\n", "\n", "if", "output_name", "is", "None", ":", "\n", "        ", "if", "run_id", "is", "None", ":", "\n", "            ", "output_name", "=", "'{}_{}'", ".", "format", "(", "tracker_name", ",", "param_name", ")", "\n", "", "else", ":", "\n", "            ", "output_name", "=", "'{}_{}_{:03d}'", ".", "format", "(", "tracker_name", ",", "param_name", ",", "run_id", ")", "\n", "\n", "", "", "output_path", "=", "os", ".", "path", ".", "join", "(", "env_settings", "(", ")", ".", "tn_packed_results_path", ",", "output_name", ")", "\n", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "output_path", ")", ":", "\n", "        ", "os", ".", "makedirs", "(", "output_path", ")", "\n", "\n", "", "results_path", "=", "env_settings", "(", ")", ".", "results_path", "\n", "\n", "tn_dataset", "=", "get_dataset", "(", "'trackingnet'", ")", "\n", "\n", "for", "seq", "in", "tn_dataset", ":", "\n", "        ", "seq_name", "=", "seq", ".", "name", "\n", "\n", "if", "run_id", "is", "None", ":", "\n", "            ", "seq_results_path", "=", "'{}/{}/{}/{}.txt'", ".", "format", "(", "results_path", ",", "tracker_name", ",", "param_name", ",", "seq_name", ")", "\n", "", "else", ":", "\n", "            ", "seq_results_path", "=", "'{}/{}/{}_{:03d}/{}.txt'", ".", "format", "(", "results_path", ",", "tracker_name", ",", "param_name", ",", "run_id", ",", "seq_name", ")", "\n", "\n", "", "results", "=", "np", ".", "loadtxt", "(", "seq_results_path", ",", "dtype", "=", "np", ".", "float64", ")", "\n", "\n", "np", ".", "savetxt", "(", "'{}/{}.txt'", ".", "format", "(", "output_path", ",", "seq_name", ")", ",", "results", ",", "delimiter", "=", "','", ",", "fmt", "=", "'%.2f'", ")", "\n", "\n", "# Generate ZIP file", "\n", "", "shutil", ".", "make_archive", "(", "output_path", ",", "'zip'", ",", "output_path", ")", "\n", "\n", "# Remove raw text files", "\n", "shutil", ".", "rmtree", "(", "output_path", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.util_scripts.pack_got10k_results.pack_got10k_results": [[7, 43], ["os.path.join", "range", "shutil.make_archive", "shutil.rmtree", "os.path.exists", "os.makedirs", "pytracking.evaluation.environment.env_settings", "range", "pytracking.evaluation.environment.env_settings", "os.path.exists", "os.makedirs", "numpy.loadtxt", "numpy.loadtxt", "numpy.savetxt", "numpy.savetxt"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings", "home.repos.pwc.inspect_result.researchmm_Stark.admin.environment.env_settings"], ["def", "pack_got10k_results", "(", "tracker_name", ",", "param_name", ",", "output_name", ")", ":", "\n", "    ", "\"\"\" Packs got10k results into a zip folder which can be directly uploaded to the evaluation server. The packed\n    file is saved in the folder env_settings().got_packed_results_path\n\n    args:\n        tracker_name - name of the tracker\n        param_name - name of the parameter file\n        output_name - name of the packed zip file\n    \"\"\"", "\n", "output_path", "=", "os", ".", "path", ".", "join", "(", "env_settings", "(", ")", ".", "got_packed_results_path", ",", "output_name", ")", "\n", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "output_path", ")", ":", "\n", "        ", "os", ".", "makedirs", "(", "output_path", ")", "\n", "\n", "", "results_path", "=", "env_settings", "(", ")", ".", "results_path", "\n", "for", "i", "in", "range", "(", "1", ",", "181", ")", ":", "\n", "        ", "seq_name", "=", "'GOT-10k_Test_{:06d}'", ".", "format", "(", "i", ")", "\n", "\n", "seq_output_path", "=", "'{}/{}'", ".", "format", "(", "output_path", ",", "seq_name", ")", "\n", "if", "not", "os", ".", "path", ".", "exists", "(", "seq_output_path", ")", ":", "\n", "            ", "os", ".", "makedirs", "(", "seq_output_path", ")", "\n", "\n", "", "for", "run_id", "in", "range", "(", "3", ")", ":", "\n", "            ", "res", "=", "np", ".", "loadtxt", "(", "'{}/{}/{}_{:03d}/{}.txt'", ".", "format", "(", "results_path", ",", "tracker_name", ",", "param_name", ",", "run_id", ",", "seq_name", ")", ",", "dtype", "=", "np", ".", "float64", ")", "\n", "times", "=", "np", ".", "loadtxt", "(", "\n", "'{}/{}/{}_{:03d}/{}_time.txt'", ".", "format", "(", "results_path", ",", "tracker_name", ",", "param_name", ",", "run_id", ",", "seq_name", ")", ",", "\n", "dtype", "=", "np", ".", "float64", ")", "\n", "\n", "np", ".", "savetxt", "(", "'{}/{}_{:03d}.txt'", ".", "format", "(", "seq_output_path", ",", "seq_name", ",", "run_id", "+", "1", ")", ",", "res", ",", "delimiter", "=", "','", ",", "fmt", "=", "'%f'", ")", "\n", "np", ".", "savetxt", "(", "'{}/{}_time.txt'", ".", "format", "(", "seq_output_path", ",", "seq_name", ")", ",", "times", ",", "fmt", "=", "'%f'", ")", "\n", "\n", "# Generate ZIP file", "\n", "", "", "shutil", ".", "make_archive", "(", "output_path", ",", "'zip'", ",", "output_path", ")", "\n", "\n", "# Remove raw text files", "\n", "shutil", ".", "rmtree", "(", "output_path", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.ltr.run_training.run_training": [[16, 40], ["cv2.setNumThreads", "print", "ltr.Settings", "importlib.import_module", "getattr", "getattr."], "function", ["None"], ["\n", "def", "init_seeds", "(", "seed", ")", ":", "\n", "    ", "random", ".", "seed", "(", "seed", ")", "\n", "np", ".", "random", ".", "seed", "(", "seed", ")", "\n", "torch", ".", "manual_seed", "(", "seed", ")", "\n", "torch", ".", "cuda", ".", "manual_seed", "(", "seed", ")", "\n", "torch", ".", "backends", ".", "cudnn", ".", "deterministic", "=", "True", "\n", "torch", ".", "backends", ".", "cudnn", ".", "benchmark", "=", "False", "\n", "\n", "\n", "", "def", "run_training", "(", "script_name", ",", "config_name", ",", "cudnn_benchmark", "=", "True", ",", "local_rank", "=", "-", "1", ",", "save_dir", "=", "None", ",", "base_seed", "=", "None", ",", "\n", "use_lmdb", "=", "False", ",", "script_name_prv", "=", "None", ",", "config_name_prv", "=", "None", ",", "\n", "distill", "=", "None", ",", "script_teacher", "=", "None", ",", "config_teacher", "=", "None", ")", ":", "\n", "    ", "\"\"\"Run the train script.\n    args:\n        script_name: Name of emperiment in the \"experiments/\" folder.\n        config_name: Name of the yaml file in the \"experiments/<script_name>\".\n        cudnn_benchmark: Use cudnn benchmark or not (default is True).\n    \"\"\"", "\n", "if", "save_dir", "is", "None", ":", "\n", "        ", "print", "(", "\"save_dir dir is not given. Use the default dir instead.\"", ")", "\n", "# This is needed to avoid strange crashes related to opencv", "\n", "", "cv", ".", "setNumThreads", "(", "0", ")", "\n", "\n", "torch", ".", "backends", ".", "cudnn", ".", "benchmark", "=", "cudnn_benchmark", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.ltr.run_training.main": [[42, 51], ["argparse.ArgumentParser", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.add_argument", "argparse.ArgumentParser.parse_args", "run_training.run_training"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.tracking.ORT_lightning_X_trt_backbone_bottleneck_pe.parse_args", "home.repos.pwc.inspect_result.researchmm_Stark.ltr.run_training.run_training"], ["print", "(", "'script_name: {}.py  config_name: {}.yaml'", ".", "format", "(", "script_name", ",", "config_name", ")", ")", "\n", "\n", "'''2021.1.5 set seed for different process'''", "\n", "if", "base_seed", "is", "not", "None", ":", "\n", "        ", "if", "local_rank", "!=", "-", "1", ":", "\n", "            ", "init_seeds", "(", "base_seed", "+", "local_rank", ")", "\n", "", "else", ":", "\n", "            ", "init_seeds", "(", "base_seed", ")", "\n", "\n", "", "", "settings", "=", "ws_settings", ".", "Settings", "(", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_gmm_sampl.run": [[11, 97], ["ltr.dataset.Lasot", "ltr.dataset.Got10k", "ltr.dataset.TrackingNet", "ltr.dataset.MSCOCOSeq", "ltr.dataset.Got10k", "ltr.Transform", "ltr.Transform", "ltr.Transform", "ltr.data.processing.ATOMProcessing", "ltr.data.processing.ATOMProcessing", "ltr.data.sampler.ATOMSampler", "ltr.data.LTRLoader", "ltr.data.sampler.ATOMSampler", "ltr.data.LTRLoader", "ltr.atom_resnet18", "torch.MSELoss", "ltr.actors.AtomActor", "torch.Adam", "torch.lr_scheduler.StepLR", "ltr.trainers.LTRTrainer", "ltr.trainers.LTRTrainer.train", "ltr.ToGrayscale", "ltr.ToTensorAndJitter", "ltr.Normalize", "ltr.ToTensor", "ltr.Normalize", "actors.AtomActor.net.bb_regressor.parameters", "list", "range"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.atom_resnet18", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["params", ".", "visualization", "=", "False", "# Do visualization", "\n", "\n", "# Use GPU or not (IoUNet requires this to be True)", "\n", "params", ".", "use_gpu", "=", "True", "\n", "\n", "# Feature specific parameters", "\n", "deep_params", "=", "TrackerParams", "(", ")", "\n", "\n", "# Patch sampling parameters", "\n", "params", ".", "max_image_sample_size", "=", "(", "18", "*", "16", ")", "**", "2", "# Maximum image sample size", "\n", "params", ".", "min_image_sample_size", "=", "(", "18", "*", "16", ")", "**", "2", "# Minimum image sample size", "\n", "params", ".", "search_area_scale", "=", "5", "# Scale relative to target size", "\n", "params", ".", "feature_size_odd", "=", "False", "# Good to use False for even-sized kernels and vice versa", "\n", "\n", "# Optimization parameters", "\n", "params", ".", "CG_iter", "=", "5", "# The number of Conjugate Gradient iterations in each update after the first frame", "\n", "params", ".", "init_CG_iter", "=", "60", "# The total number of Conjugate Gradient iterations used in the first frame", "\n", "params", ".", "init_GN_iter", "=", "6", "# The number of Gauss-Newton iterations used in the first frame (only if the projection matrix is updated)", "\n", "params", ".", "post_init_CG_iter", "=", "0", "# CG iterations to run after GN", "\n", "params", ".", "fletcher_reeves", "=", "False", "# Use the Fletcher-Reeves (true) or Polak-Ribiere (false) formula in the Conjugate Gradient", "\n", "params", ".", "standard_alpha", "=", "True", "# Use the standard formula for computing the step length in Conjugate Gradient", "\n", "params", ".", "CG_forgetting_rate", "=", "None", "# Forgetting rate of the last conjugate direction", "\n", "\n", "# Learning parameters for each feature type", "\n", "deep_params", ".", "learning_rate", "=", "0.01", "# Learning rate", "\n", "deep_params", ".", "init_samples_minimum_weight", "=", "0.25", "# Minimum weight of initial samples in memory", "\n", "deep_params", ".", "output_sigma_factor", "=", "1", "/", "4", "# Standard deviation of Gaussian label relative to target size", "\n", "\n", "# Training parameters", "\n", "params", ".", "sample_memory_size", "=", "250", "# Memory size", "\n", "params", ".", "train_skipping", "=", "10", "# How often to run training (every n-th frame)", "\n", "\n", "# Online model parameters", "\n", "deep_params", ".", "kernel_size", "=", "(", "4", ",", "4", ")", "# Kernel size of filter", "\n", "deep_params", ".", "compressed_dim", "=", "64", "# Dimension output of projection matrix", "\n", "deep_params", ".", "filter_reg", "=", "1e-1", "# Filter regularization factor", "\n", "deep_params", ".", "projection_reg", "=", "1e-4", "# Projection regularization factor", "\n", "\n", "# Windowing", "\n", "params", ".", "feature_window", "=", "False", "# Perform windowing of features", "\n", "params", ".", "window_output", "=", "False", "# Perform windowing of output scores", "\n", "\n", "# Detection parameters", "\n", "params", ".", "scale_factors", "=", "torch", ".", "ones", "(", "1", ")", "# What scales to use for localization (only one scale if IoUNet is used)", "\n", "params", ".", "score_upsample_factor", "=", "1", "# How much Fourier upsampling to use", "\n", "\n", "# Init data augmentation parameters", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "5", ",", "-", "5", ",", "10", ",", "-", "10", ",", "20", ",", "-", "20", ",", "30", ",", "-", "30", ",", "45", ",", "-", "45", ",", "-", "60", ",", "60", "]", ",", "\n", "'blur'", ":", "[", "(", "2", ",", "0.2", ")", ",", "(", "0.2", ",", "2", ")", ",", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "7", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "# How much to expand sample when doing augmentation", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "# How much random shift to do on each augmented sample", "\n", "deep_params", ".", "use_augmentation", "=", "True", "# Whether to use augmentation for this feature", "\n", "\n", "# Factorized convolution parameters", "\n", "# params.use_projection_matrix = True       # Use projection matrix, i.e. use the factorized convolution formulation", "\n", "params", ".", "update_projection_matrix", "=", "True", "# Whether the projection matrix should be optimized or not", "\n", "params", ".", "proj_init_method", "=", "'randn'", "# Method for initializing the projection matrix", "\n", "params", ".", "filter_init_method", "=", "'randn'", "# Method for initializing the spatial filter", "\n", "params", ".", "projection_activation", "=", "'none'", "# Activation function after projection ('none', 'relu', 'elu' or 'mlu')", "\n", "params", ".", "response_activation", "=", "(", "'mlu'", ",", "0.05", ")", "# Activation function on the output scores ('none', 'relu', 'elu' or 'mlu')", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "# Use this or not", "\n", "params", ".", "target_not_found_threshold", "=", "0.25", "# Absolute score threshold to detect target missing", "\n", "params", ".", "distractor_threshold", "=", "0.8", "# Relative threshold to find distractors", "\n", "params", ".", "hard_negative_threshold", "=", "0.5", "# Relative threshold to find hard negative samples", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "# Target neighborhood to remove", "\n", "params", ".", "dispalcement_scale", "=", "0.8", "# Dispacement to consider for distractors", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "# Learning rate if hard negative detected", "\n", "params", ".", "hard_negative_CG_iter", "=", "5", "# Number of optimization iterations to use if hard negative detected", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "# Update scale or not if distractor is close", "\n", "\n", "# IoUNet parameters", "\n", "params", ".", "use_iou_net", "=", "True", "# Use IoU net or not", "\n", "params", ".", "box_refinement_space", "=", "'relative'", "\n", "params", ".", "iounet_augmentation", "=", "False", "# Use the augmented samples to compute the modulation vector", "\n", "params", ".", "iounet_k", "=", "3", "# Top-k average to estimate final box", "\n", "params", ".", "num_init_random_boxes", "=", "9", "# Num extra random boxes in addition to the classifier prediction", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "# How much to jitter the translation for random boxes", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "# How much to jitter the scale for random boxes", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "# Limit on the aspect ratio", "\n", "params", ".", "box_refinement_iter", "=", "10", "# Number of iterations for refining the boxes", "\n", "params", ".", "box_refinement_step_length", "=", "(", "1e-2", ",", "5e-2", ")", "# 1   # Gradient step length in the bounding box refinement 5e-3 2e-2", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_paper.run": [[11, 95], ["ltr.dataset.Lasot", "ltr.dataset.TrackingNet", "ltr.dataset.MSCOCOSeq", "ltr.dataset.TrackingNet", "ltr.Transform", "ltr.Transform", "ltr.Transform", "ltr.data.processing.ATOMProcessing", "ltr.data.processing.ATOMProcessing", "ltr.data.sampler.ATOMSampler", "ltr.data.LTRLoader", "ltr.data.sampler.ATOMSampler", "ltr.data.LTRLoader", "ltr.atom_resnet18", "torch.MSELoss", "ltr.actors.AtomActor", "torch.Adam", "torch.lr_scheduler.StepLR", "ltr.trainers.LTRTrainer", "ltr.trainers.LTRTrainer.train", "ltr.ToGrayscale", "ltr.ToTensorAndJitter", "ltr.Normalize", "ltr.ToTensor", "ltr.Normalize", "actors.AtomActor.net.bb_regressor.parameters", "list", "list", "range", "range"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.atom_resnet18", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["def", "run", "(", "settings", ")", ":", "\n", "# Most common settings are assigned in the settings struct", "\n", "    ", "settings", ".", "description", "=", "'ATOM IoUNet with default settings according to the paper.'", "\n", "settings", ".", "batch_size", "=", "64", "\n", "settings", ".", "num_workers", "=", "8", "\n", "settings", ".", "print_interval", "=", "1", "\n", "settings", ".", "normalize_mean", "=", "[", "0.485", ",", "0.456", ",", "0.406", "]", "\n", "settings", ".", "normalize_std", "=", "[", "0.229", ",", "0.224", ",", "0.225", "]", "\n", "settings", ".", "search_area_factor", "=", "5.0", "\n", "settings", ".", "feature_sz", "=", "18", "\n", "settings", ".", "output_sz", "=", "settings", ".", "feature_sz", "*", "16", "\n", "settings", ".", "center_jitter_factor", "=", "{", "'train'", ":", "0", ",", "'test'", ":", "4.5", "}", "\n", "settings", ".", "scale_jitter_factor", "=", "{", "'train'", ":", "0", ",", "'test'", ":", "0.5", "}", "\n", "\n", "# Train datasets", "\n", "lasot_train", "=", "Lasot", "(", "settings", ".", "env", ".", "lasot_dir", ",", "split", "=", "'train'", ")", "\n", "trackingnet_train", "=", "TrackingNet", "(", "settings", ".", "env", ".", "trackingnet_dir", ",", "set_ids", "=", "list", "(", "range", "(", "11", ")", ")", ")", "\n", "coco_train", "=", "MSCOCOSeq", "(", "settings", ".", "env", ".", "coco_dir", ")", "\n", "\n", "# Validation datasets", "\n", "trackingnet_val", "=", "TrackingNet", "(", "settings", ".", "env", ".", "trackingnet_dir", ",", "set_ids", "=", "list", "(", "range", "(", "11", ",", "12", ")", ")", ")", "\n", "\n", "# The joint augmentation transform, that is applied to the pairs jointly", "\n", "transform_joint", "=", "tfm", ".", "Transform", "(", "tfm", ".", "ToGrayscale", "(", "probability", "=", "0.05", ")", ")", "\n", "\n", "# The augmentation transform applied to the training set (individually to each image in the pair)", "\n", "transform_train", "=", "tfm", ".", "Transform", "(", "tfm", ".", "ToTensorAndJitter", "(", "0.2", ")", ",", "\n", "tfm", ".", "Normalize", "(", "mean", "=", "settings", ".", "normalize_mean", ",", "std", "=", "settings", ".", "normalize_std", ")", ")", "\n", "\n", "# The augmentation transform applied to the validation set (individually to each image in the pair)", "\n", "transform_val", "=", "tfm", ".", "Transform", "(", "tfm", ".", "ToTensor", "(", ")", ",", "\n", "tfm", ".", "Normalize", "(", "mean", "=", "settings", ".", "normalize_mean", ",", "std", "=", "settings", ".", "normalize_std", ")", ")", "\n", "\n", "# Data processing to do on the training pairs", "\n", "proposal_params", "=", "{", "'min_iou'", ":", "0.1", ",", "'boxes_per_frame'", ":", "16", ",", "'sigma_factor'", ":", "[", "0.01", ",", "0.05", ",", "0.1", ",", "0.2", ",", "0.3", "]", "}", "\n", "data_processing_train", "=", "processing", ".", "ATOMProcessing", "(", "search_area_factor", "=", "settings", ".", "search_area_factor", ",", "\n", "output_sz", "=", "settings", ".", "output_sz", ",", "\n", "center_jitter_factor", "=", "settings", ".", "center_jitter_factor", ",", "\n", "scale_jitter_factor", "=", "settings", ".", "scale_jitter_factor", ",", "\n", "mode", "=", "'sequence'", ",", "\n", "proposal_params", "=", "proposal_params", ",", "\n", "transform", "=", "transform_train", ",", "\n", "joint_transform", "=", "transform_joint", ")", "\n", "\n", "# Data processing to do on the validation pairs", "\n", "data_processing_val", "=", "processing", ".", "ATOMProcessing", "(", "search_area_factor", "=", "settings", ".", "search_area_factor", ",", "\n", "output_sz", "=", "settings", ".", "output_sz", ",", "\n", "center_jitter_factor", "=", "settings", ".", "center_jitter_factor", ",", "\n", "scale_jitter_factor", "=", "settings", ".", "scale_jitter_factor", ",", "\n", "mode", "=", "'sequence'", ",", "\n", "proposal_params", "=", "proposal_params", ",", "\n", "transform", "=", "transform_val", ",", "\n", "joint_transform", "=", "transform_joint", ")", "\n", "\n", "# The sampler for training", "\n", "dataset_train", "=", "sampler", ".", "ATOMSampler", "(", "[", "lasot_train", ",", "trackingnet_train", ",", "coco_train", "]", ",", "[", "1", ",", "1", ",", "1", "]", ",", "\n", "samples_per_epoch", "=", "1000", "*", "settings", ".", "batch_size", ",", "max_gap", "=", "50", ",", "processing", "=", "data_processing_train", ")", "\n", "\n", "# The loader for training", "\n", "loader_train", "=", "LTRLoader", "(", "'train'", ",", "dataset_train", ",", "training", "=", "True", ",", "batch_size", "=", "settings", ".", "batch_size", ",", "num_workers", "=", "settings", ".", "num_workers", ",", "\n", "shuffle", "=", "True", ",", "drop_last", "=", "True", ",", "stack_dim", "=", "1", ")", "\n", "\n", "# The sampler for validation", "\n", "dataset_val", "=", "sampler", ".", "ATOMSampler", "(", "[", "trackingnet_val", "]", ",", "[", "1", "]", ",", "samples_per_epoch", "=", "500", "*", "settings", ".", "batch_size", ",", "max_gap", "=", "50", ",", "\n", "processing", "=", "data_processing_val", ")", "\n", "\n", "# The loader for validation", "\n", "loader_val", "=", "LTRLoader", "(", "'val'", ",", "dataset_val", ",", "training", "=", "False", ",", "batch_size", "=", "settings", ".", "batch_size", ",", "num_workers", "=", "settings", ".", "num_workers", ",", "\n", "shuffle", "=", "False", ",", "drop_last", "=", "True", ",", "epoch_interval", "=", "5", ",", "stack_dim", "=", "1", ")", "\n", "\n", "# Create network and actor", "\n", "net", "=", "atom_models", ".", "atom_resnet18", "(", "backbone_pretrained", "=", "True", ")", "\n", "objective", "=", "nn", ".", "MSELoss", "(", ")", "\n", "actor", "=", "actors", ".", "AtomActor", "(", "net", "=", "net", ",", "objective", "=", "objective", ")", "\n", "\n", "# Optimizer", "\n", "optimizer", "=", "optim", ".", "Adam", "(", "actor", ".", "net", ".", "bb_regressor", ".", "parameters", "(", ")", ",", "lr", "=", "1e-3", ")", "\n", "lr_scheduler", "=", "optim", ".", "lr_scheduler", ".", "StepLR", "(", "optimizer", ",", "step_size", "=", "15", ",", "gamma", "=", "0.2", ")", "\n", "\n", "# Create trainer", "\n", "trainer", "=", "LTRTrainer", "(", "actor", ",", "[", "loader_train", ",", "loader_val", "]", ",", "optimizer", ",", "settings", ",", "lr_scheduler", ")", "\n", "\n", "# Run training (set fail_safe=False if you are debugging)", "\n", "trainer", ".", "train", "(", "50", ",", "load_latest", "=", "True", ",", "fail_safe", "=", "True", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_prob_ml.run": [[11, 98], ["ltr.dataset.Lasot", "ltr.dataset.Got10k", "ltr.dataset.TrackingNet", "ltr.dataset.MSCOCOSeq", "ltr.dataset.Got10k", "ltr.Transform", "ltr.Transform", "ltr.Transform", "ltr.data.processing.KLBBregProcessing", "ltr.data.processing.KLBBregProcessing", "ltr.data.sampler.ATOMSampler", "ltr.data.LTRLoader", "ltr.data.sampler.ATOMSampler", "ltr.data.LTRLoader", "ltr.atom_resnet18", "ltr.MLRegression", "ltr.AtomBBKLActor", "torch.Adam", "torch.lr_scheduler.StepLR", "ltr.trainers.LTRTrainer", "ltr.trainers.LTRTrainer.train", "ltr.ToGrayscale", "ltr.ToTensorAndJitter", "ltr.Normalize", "ltr.ToTensor", "ltr.Normalize", "bbreg_actors.AtomBBKLActor.net.bb_regressor.parameters", "list", "range"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.atom_resnet18", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["params", ".", "visualization", "=", "False", "# Do visualization", "\n", "\n", "# Use GPU or not (IoUNet requires this to be True)", "\n", "params", ".", "use_gpu", "=", "True", "\n", "\n", "# Feature specific parameters", "\n", "deep_params", "=", "TrackerParams", "(", ")", "\n", "\n", "# Patch sampling parameters", "\n", "params", ".", "max_image_sample_size", "=", "(", "18", "*", "16", ")", "**", "2", "# Maximum image sample size", "\n", "params", ".", "min_image_sample_size", "=", "(", "18", "*", "16", ")", "**", "2", "# Minimum image sample size", "\n", "params", ".", "search_area_scale", "=", "5", "# Scale relative to target size", "\n", "params", ".", "feature_size_odd", "=", "False", "# Good to use False for even-sized kernels and vice versa", "\n", "\n", "# Optimization parameters", "\n", "params", ".", "CG_iter", "=", "5", "# The number of Conjugate Gradient iterations in each update after the first frame", "\n", "params", ".", "init_CG_iter", "=", "60", "# The total number of Conjugate Gradient iterations used in the first frame", "\n", "params", ".", "init_GN_iter", "=", "6", "# The number of Gauss-Newton iterations used in the first frame (only if the projection matrix is updated)", "\n", "params", ".", "post_init_CG_iter", "=", "0", "# CG iterations to run after GN", "\n", "params", ".", "fletcher_reeves", "=", "False", "# Use the Fletcher-Reeves (true) or Polak-Ribiere (false) formula in the Conjugate Gradient", "\n", "params", ".", "standard_alpha", "=", "True", "# Use the standard formula for computing the step length in Conjugate Gradient", "\n", "params", ".", "CG_forgetting_rate", "=", "None", "# Forgetting rate of the last conjugate direction", "\n", "\n", "# Learning parameters for each feature type", "\n", "deep_params", ".", "learning_rate", "=", "0.01", "# Learning rate", "\n", "deep_params", ".", "init_samples_minimum_weight", "=", "0.25", "# Minimum weight of initial samples in memory", "\n", "deep_params", ".", "output_sigma_factor", "=", "1", "/", "4", "# Standard deviation of Gaussian label relative to target size", "\n", "\n", "# Training parameters", "\n", "params", ".", "sample_memory_size", "=", "250", "# Memory size", "\n", "params", ".", "train_skipping", "=", "10", "# How often to run training (every n-th frame)", "\n", "\n", "# Online model parameters", "\n", "deep_params", ".", "kernel_size", "=", "(", "4", ",", "4", ")", "# Kernel size of filter", "\n", "deep_params", ".", "compressed_dim", "=", "64", "# Dimension output of projection matrix", "\n", "deep_params", ".", "filter_reg", "=", "1e-1", "# Filter regularization factor", "\n", "deep_params", ".", "projection_reg", "=", "1e-4", "# Projection regularization factor", "\n", "\n", "# Windowing", "\n", "params", ".", "feature_window", "=", "False", "# Perform windowing of features", "\n", "params", ".", "window_output", "=", "False", "# Perform windowing of output scores", "\n", "\n", "# Detection parameters", "\n", "params", ".", "scale_factors", "=", "torch", ".", "ones", "(", "1", ")", "# What scales to use for localization (only one scale if IoUNet is used)", "\n", "params", ".", "score_upsample_factor", "=", "1", "# How much Fourier upsampling to use", "\n", "\n", "# Init data augmentation parameters", "\n", "params", ".", "augmentation", "=", "{", "'fliplr'", ":", "True", ",", "\n", "'rotate'", ":", "[", "5", ",", "-", "5", ",", "10", ",", "-", "10", ",", "20", ",", "-", "20", ",", "30", ",", "-", "30", ",", "45", ",", "-", "45", ",", "-", "60", ",", "60", "]", ",", "\n", "'blur'", ":", "[", "(", "2", ",", "0.2", ")", ",", "(", "0.2", ",", "2", ")", ",", "(", "3", ",", "1", ")", ",", "(", "1", ",", "3", ")", ",", "(", "2", ",", "2", ")", "]", ",", "\n", "'relativeshift'", ":", "[", "(", "0.6", ",", "0.6", ")", ",", "(", "-", "0.6", ",", "0.6", ")", ",", "(", "0.6", ",", "-", "0.6", ")", ",", "(", "-", "0.6", ",", "-", "0.6", ")", "]", ",", "\n", "'dropout'", ":", "(", "7", ",", "0.2", ")", "}", "\n", "\n", "params", ".", "augmentation_expansion_factor", "=", "2", "# How much to expand sample when doing augmentation", "\n", "params", ".", "random_shift_factor", "=", "1", "/", "3", "# How much random shift to do on each augmented sample", "\n", "deep_params", ".", "use_augmentation", "=", "True", "# Whether to use augmentation for this feature", "\n", "\n", "# Factorized convolution parameters", "\n", "# params.use_projection_matrix = True       # Use projection matrix, i.e. use the factorized convolution formulation", "\n", "params", ".", "update_projection_matrix", "=", "True", "# Whether the projection matrix should be optimized or not", "\n", "params", ".", "proj_init_method", "=", "'randn'", "# Method for initializing the projection matrix", "\n", "params", ".", "filter_init_method", "=", "'randn'", "# Method for initializing the spatial filter", "\n", "params", ".", "projection_activation", "=", "'none'", "# Activation function after projection ('none', 'relu', 'elu' or 'mlu')", "\n", "params", ".", "response_activation", "=", "(", "'mlu'", ",", "0.05", ")", "# Activation function on the output scores ('none', 'relu', 'elu' or 'mlu')", "\n", "\n", "# Advanced localization parameters", "\n", "params", ".", "advanced_localization", "=", "True", "# Use this or not", "\n", "params", ".", "target_not_found_threshold", "=", "0.25", "# Absolute score threshold to detect target missing", "\n", "params", ".", "distractor_threshold", "=", "0.8", "# Relative threshold to find distractors", "\n", "params", ".", "hard_negative_threshold", "=", "0.5", "# Relative threshold to find hard negative samples", "\n", "params", ".", "target_neighborhood_scale", "=", "2.2", "# Target neighborhood to remove", "\n", "params", ".", "dispalcement_scale", "=", "0.8", "# Dispacement to consider for distractors", "\n", "params", ".", "hard_negative_learning_rate", "=", "0.02", "# Learning rate if hard negative detected", "\n", "params", ".", "hard_negative_CG_iter", "=", "5", "# Number of optimization iterations to use if hard negative detected", "\n", "params", ".", "update_scale_when_uncertain", "=", "True", "# Update scale or not if distractor is close", "\n", "\n", "# IoUNet parameters", "\n", "params", ".", "use_iou_net", "=", "True", "# Use IoU net or not", "\n", "params", ".", "box_refinement_space", "=", "'relative'", "\n", "params", ".", "iounet_augmentation", "=", "False", "# Use the augmented samples to compute the modulation vector", "\n", "params", ".", "iounet_k", "=", "3", "# Top-k average to estimate final box", "\n", "params", ".", "num_init_random_boxes", "=", "9", "# Num extra random boxes in addition to the classifier prediction", "\n", "params", ".", "box_jitter_pos", "=", "0.1", "# How much to jitter the translation for random boxes", "\n", "params", ".", "box_jitter_sz", "=", "0.5", "# How much to jitter the scale for random boxes", "\n", "params", ".", "maximal_aspect_ratio", "=", "6", "# Limit on the aspect ratio", "\n", "params", ".", "box_refinement_iter", "=", "10", "# Number of iterations for refining the boxes", "\n", "params", ".", "box_refinement_step_length", "=", "(", "2e-4", ",", "10e-4", ")", "# 1   # Gradient step length in the bounding box refinement", "\n", "params", ".", "box_refinement_step_decay", "=", "1", "# Multiplicative step length decay (1 means no decay)", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.run": [[11, 96], ["ltr.dataset.Lasot", "ltr.dataset.Got10k", "ltr.dataset.TrackingNet", "ltr.dataset.MSCOCOSeq", "ltr.dataset.Got10k", "ltr.Transform", "ltr.Transform", "ltr.Transform", "ltr.data.processing.ATOMProcessing", "ltr.data.processing.ATOMProcessing", "ltr.data.sampler.ATOMSampler", "ltr.data.LTRLoader", "ltr.data.sampler.ATOMSampler", "ltr.data.LTRLoader", "ltr.atom_resnet18", "torch.MSELoss", "ltr.actors.AtomActor", "torch.Adam", "torch.lr_scheduler.StepLR", "ltr.trainers.LTRTrainer", "ltr.trainers.LTRTrainer.train", "ltr.ToGrayscale", "ltr.ToTensorAndJitter", "ltr.Normalize", "ltr.ToTensor", "ltr.Normalize", "actors.AtomActor.net.bb_regressor.parameters", "list", "range"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.atom_resnet18", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list"], ["from", ".", "optim", "import", "ConvProblem", ",", "FactorizedConvProblem", "\n", "from", "pytracking", ".", "features", "import", "augmentation", "\n", "import", "ltr", ".", "data", ".", "bounding_box_utils", "as", "bbutils", "\n", "\n", "\n", "class", "ATOM", "(", "BaseTracker", ")", ":", "\n", "\n", "    ", "multiobj_mode", "=", "'parallel'", "\n", "\n", "def", "initialize_features", "(", "self", ")", ":", "\n", "        ", "if", "not", "getattr", "(", "self", ",", "'features_initialized'", ",", "False", ")", ":", "\n", "            ", "self", ".", "params", ".", "features", ".", "initialize", "(", ")", "\n", "", "self", ".", "features_initialized", "=", "True", "\n", "\n", "\n", "", "def", "initialize", "(", "self", ",", "image", ",", "info", ":", "dict", ")", "->", "dict", ":", "\n", "        ", "state", "=", "info", "[", "'init_bbox'", "]", "\n", "\n", "# Initialize some stuff", "\n", "self", ".", "frame_num", "=", "1", "\n", "if", "not", "self", ".", "params", ".", "has", "(", "'device'", ")", ":", "\n", "            ", "self", ".", "params", ".", "device", "=", "'cuda'", "if", "self", ".", "params", ".", "use_gpu", "else", "'cpu'", "\n", "\n", "# Initialize features", "\n", "", "self", ".", "initialize_features", "(", ")", "\n", "\n", "# Check if image is color", "\n", "self", ".", "params", ".", "features", ".", "set_is_color", "(", "image", ".", "shape", "[", "2", "]", "==", "3", ")", "\n", "\n", "# Get feature specific params", "\n", "self", ".", "fparams", "=", "self", ".", "params", ".", "features", ".", "get_fparams", "(", "'feature_params'", ")", "\n", "\n", "tic", "=", "time", ".", "time", "(", ")", "\n", "\n", "# Get position and size", "\n", "self", ".", "pos", "=", "torch", ".", "Tensor", "(", "[", "state", "[", "1", "]", "+", "(", "state", "[", "3", "]", "-", "1", ")", "/", "2", ",", "state", "[", "0", "]", "+", "(", "state", "[", "2", "]", "-", "1", ")", "/", "2", "]", ")", "\n", "self", ".", "target_sz", "=", "torch", ".", "Tensor", "(", "[", "state", "[", "3", "]", ",", "state", "[", "2", "]", "]", ")", "\n", "\n", "# Set search area", "\n", "self", ".", "target_scale", "=", "1.0", "\n", "search_area", "=", "torch", ".", "prod", "(", "self", ".", "target_sz", "*", "self", ".", "params", ".", "search_area_scale", ")", ".", "item", "(", ")", "\n", "if", "search_area", ">", "self", ".", "params", ".", "max_image_sample_size", ":", "\n", "            ", "self", ".", "target_scale", "=", "math", ".", "sqrt", "(", "search_area", "/", "self", ".", "params", ".", "max_image_sample_size", ")", "\n", "", "elif", "search_area", "<", "self", ".", "params", ".", "min_image_sample_size", ":", "\n", "            ", "self", ".", "target_scale", "=", "math", ".", "sqrt", "(", "search_area", "/", "self", ".", "params", ".", "min_image_sample_size", ")", "\n", "\n", "# Check if IoUNet is used", "\n", "", "self", ".", "use_iou_net", "=", "self", ".", "params", ".", "get", "(", "'use_iou_net'", ",", "True", ")", "\n", "\n", "# Target size in base scale", "\n", "self", ".", "base_target_sz", "=", "self", ".", "target_sz", "/", "self", ".", "target_scale", "\n", "\n", "# Use odd square search area and set sizes", "\n", "feat_max_stride", "=", "max", "(", "self", ".", "params", ".", "features", ".", "stride", "(", ")", ")", "\n", "if", "self", ".", "params", ".", "get", "(", "'search_area_shape'", ",", "'square'", ")", "==", "'square'", ":", "\n", "            ", "self", ".", "img_sample_sz", "=", "torch", ".", "round", "(", "torch", ".", "sqrt", "(", "torch", ".", "prod", "(", "self", ".", "base_target_sz", "*", "self", ".", "params", ".", "search_area_scale", ")", ")", ")", "*", "torch", ".", "ones", "(", "2", ")", "\n", "", "elif", "self", ".", "params", ".", "search_area_shape", "==", "'initrect'", ":", "\n", "            ", "self", ".", "img_sample_sz", "=", "torch", ".", "round", "(", "self", ".", "base_target_sz", "*", "self", ".", "params", ".", "search_area_scale", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'Unknown search area shape'", ")", "\n", "", "if", "self", ".", "params", ".", "feature_size_odd", ":", "\n", "            ", "self", ".", "img_sample_sz", "+=", "feat_max_stride", "-", "self", ".", "img_sample_sz", "%", "(", "2", "*", "feat_max_stride", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "img_sample_sz", "+=", "feat_max_stride", "-", "(", "self", ".", "img_sample_sz", "+", "feat_max_stride", ")", "%", "(", "2", "*", "feat_max_stride", ")", "\n", "\n", "# Set sizes", "\n", "", "self", ".", "img_support_sz", "=", "self", ".", "img_sample_sz", "\n", "self", ".", "feature_sz", "=", "self", ".", "params", ".", "features", ".", "size", "(", "self", ".", "img_sample_sz", ")", "\n", "self", ".", "output_sz", "=", "self", ".", "params", ".", "score_upsample_factor", "*", "self", ".", "img_support_sz", "# Interpolated size of the output", "\n", "self", ".", "kernel_size", "=", "self", ".", "fparams", ".", "attribute", "(", "'kernel_size'", ")", "\n", "\n", "self", ".", "iou_img_sample_sz", "=", "self", ".", "img_sample_sz", "\n", "\n", "# Optimization options", "\n", "self", ".", "params", ".", "precond_learning_rate", "=", "self", ".", "fparams", ".", "attribute", "(", "'learning_rate'", ")", "\n", "if", "self", ".", "params", ".", "CG_forgetting_rate", "is", "None", "or", "max", "(", "self", ".", "params", ".", "precond_learning_rate", ")", ">=", "1", ":", "\n", "            ", "self", ".", "params", ".", "direction_forget_factor", "=", "0", "\n", "", "else", ":", "\n", "            ", "self", ".", "params", ".", "direction_forget_factor", "=", "(", "1", "-", "max", "(", "self", ".", "params", ".", "precond_learning_rate", ")", ")", "**", "self", ".", "params", ".", "CG_forgetting_rate", "\n", "\n", "", "self", ".", "output_window", "=", "None", "\n", "if", "self", ".", "params", ".", "get", "(", "'window_output'", ",", "False", ")", ":", "\n", "            ", "if", "self", ".", "params", ".", "get", "(", "'use_clipped_window'", ",", "False", ")", ":", "\n", "                ", "self", ".", "output_window", "=", "dcf", ".", "hann2d_clipped", "(", "self", ".", "output_sz", ".", "long", "(", ")", ",", "self", ".", "output_sz", ".", "long", "(", ")", "*", "self", ".", "params", ".", "effective_search_area", "/", "self", ".", "params", ".", "search_area_scale", ",", "centered", "=", "False", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "\n", "", "else", ":", "\n", "                ", "self", ".", "output_window", "=", "dcf", ".", "hann2d", "(", "self", ".", "output_sz", ".", "long", "(", ")", ",", "centered", "=", "False", ")", ".", "to", "(", "self", ".", "params", ".", "device", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.__init__": [[23, 65], ["torch.Module.__init__", "atom_iou_net.conv", "atom_iou_net.conv", "atom_iou_net.conv", "ltr.external.PreciseRoIPooling.pytorch.prroi_pool.PrRoIPool2D", "ltr.external.PreciseRoIPooling.pytorch.prroi_pool.PrRoIPool2D", "atom_iou_net.conv", "atom_iou_net.conv", "atom_iou_net.conv", "atom_iou_net.conv", "ltr.external.PreciseRoIPooling.pytorch.prroi_pool.PrRoIPool2D", "ltr.external.PreciseRoIPooling.pytorch.prroi_pool.PrRoIPool2D", "atom_iou_net.conv", "atom_iou_net.conv", "ltr.models.layers.blocks.LinearBlock", "ltr.models.layers.blocks.LinearBlock", "torch.Linear", "torch.Linear", "atom_iou_net.AtomIoUNet.modules", "isinstance", "isinstance", "isinstance", "torch.init.kaiming_normal_", "torch.init.kaiming_normal_", "isinstance", "m.bias.data.zero_", "m.weight.data.uniform_", "m.bias.data.zero_"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv"], ["def", "__init__", "(", "self", ",", "input_dim", "=", "(", "128", ",", "256", ")", ",", "pred_input_dim", "=", "(", "256", ",", "256", ")", ",", "pred_inter_dim", "=", "(", "256", ",", "256", ")", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "# _r for reference, _t for test", "\n", "self", ".", "conv3_1r", "=", "conv", "(", "input_dim", "[", "0", "]", ",", "128", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ")", "\n", "self", ".", "conv3_1t", "=", "conv", "(", "input_dim", "[", "0", "]", ",", "256", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ")", "\n", "\n", "self", ".", "conv3_2t", "=", "conv", "(", "256", ",", "pred_input_dim", "[", "0", "]", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ")", "\n", "\n", "self", ".", "prroi_pool3r", "=", "PrRoIPool2D", "(", "3", ",", "3", ",", "1", "/", "8", ")", "\n", "self", ".", "prroi_pool3t", "=", "PrRoIPool2D", "(", "5", ",", "5", ",", "1", "/", "8", ")", "\n", "\n", "self", ".", "fc3_1r", "=", "conv", "(", "128", ",", "256", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "0", ")", "\n", "\n", "self", ".", "conv4_1r", "=", "conv", "(", "input_dim", "[", "1", "]", ",", "256", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ")", "\n", "self", ".", "conv4_1t", "=", "conv", "(", "input_dim", "[", "1", "]", ",", "256", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ")", "\n", "\n", "self", ".", "conv4_2t", "=", "conv", "(", "256", ",", "pred_input_dim", "[", "1", "]", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ")", "\n", "\n", "self", ".", "prroi_pool4r", "=", "PrRoIPool2D", "(", "1", ",", "1", ",", "1", "/", "16", ")", "\n", "self", ".", "prroi_pool4t", "=", "PrRoIPool2D", "(", "3", ",", "3", ",", "1", "/", "16", ")", "\n", "\n", "self", ".", "fc34_3r", "=", "conv", "(", "256", "+", "256", ",", "pred_input_dim", "[", "0", "]", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ")", "\n", "self", ".", "fc34_4r", "=", "conv", "(", "256", "+", "256", ",", "pred_input_dim", "[", "1", "]", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ")", "\n", "\n", "self", ".", "fc3_rt", "=", "LinearBlock", "(", "pred_input_dim", "[", "0", "]", ",", "pred_inter_dim", "[", "0", "]", ",", "5", ")", "\n", "self", ".", "fc4_rt", "=", "LinearBlock", "(", "pred_input_dim", "[", "1", "]", ",", "pred_inter_dim", "[", "1", "]", ",", "3", ")", "\n", "\n", "self", ".", "iou_predictor", "=", "nn", ".", "Linear", "(", "pred_inter_dim", "[", "0", "]", "+", "pred_inter_dim", "[", "1", "]", ",", "1", ",", "bias", "=", "True", ")", "\n", "\n", "# Init weights", "\n", "for", "m", "in", "self", ".", "modules", "(", ")", ":", "\n", "            ", "if", "isinstance", "(", "m", ",", "nn", ".", "Conv2d", ")", "or", "isinstance", "(", "m", ",", "nn", ".", "ConvTranspose2d", ")", "or", "isinstance", "(", "m", ",", "nn", ".", "Linear", ")", ":", "\n", "                ", "nn", ".", "init", ".", "kaiming_normal_", "(", "m", ".", "weight", ".", "data", ",", "mode", "=", "'fan_in'", ")", "\n", "if", "m", ".", "bias", "is", "not", "None", ":", "\n", "                    ", "m", ".", "bias", ".", "data", ".", "zero_", "(", ")", "\n", "", "", "elif", "isinstance", "(", "m", ",", "nn", ".", "BatchNorm2d", ")", ":", "\n", "# In earlier versions batch norm parameters was initialized with default initialization,", "\n", "# which changed in pytorch 1.2. In 1.1 and earlier the weight was set to U(0,1).", "\n", "# So we use the same initialization here.", "\n", "# m.weight.data.fill_(1)", "\n", "                ", "m", ".", "weight", ".", "data", ".", "uniform_", "(", ")", "\n", "m", ".", "bias", ".", "data", ".", "zero_", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.forward": [[66, 95], ["atom_iou_net.AtomIoUNet.get_modulation", "atom_iou_net.AtomIoUNet.get_iou_feat", "proposals2.reshape.reshape.reshape", "atom_iou_net.AtomIoUNet.predict_iou", "atom_iou_net.AtomIoUNet.reshape", "bb1.dim", "proposals2.reshape.reshape.dim", "f.reshape().repeat().reshape", "f.dim", "f.reshape", "f.reshape().repeat", "f.reshape"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.get_modulation", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.get_iou_feat", "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.predict_iou", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "", "", "def", "forward", "(", "self", ",", "feat1", ",", "feat2", ",", "bb1", ",", "proposals2", ")", ":", "\n", "        ", "\"\"\"Runs the ATOM IoUNet during training operation.\n        This forward pass is mainly used for training. Call the individual functions during tracking instead.\n        args:\n            feat1:  Features from the reference frames (4 or 5 dims).\n            feat2:  Features from the test frames (4 or 5 dims).\n            bb1:  Target boxes (x,y,w,h) in image coords in the reference samples. Dims (images, sequences, 4).\n            proposals2:  Proposal boxes for which the IoU will be predicted (images, sequences, num_proposals, 4).\"\"\"", "\n", "\n", "assert", "bb1", ".", "dim", "(", ")", "==", "3", "\n", "assert", "proposals2", ".", "dim", "(", ")", "==", "4", "\n", "\n", "num_images", "=", "proposals2", ".", "shape", "[", "0", "]", "\n", "num_sequences", "=", "proposals2", ".", "shape", "[", "1", "]", "\n", "\n", "# Extract first train sample", "\n", "feat1", "=", "[", "f", "[", "0", ",", "...", "]", "if", "f", ".", "dim", "(", ")", "==", "5", "else", "f", ".", "reshape", "(", "-", "1", ",", "num_sequences", ",", "*", "f", ".", "shape", "[", "-", "3", ":", "]", ")", "[", "0", ",", "...", "]", "for", "f", "in", "feat1", "]", "\n", "bb1", "=", "bb1", "[", "0", ",", "...", "]", "\n", "\n", "# Get modulation vector", "\n", "modulation", "=", "self", ".", "get_modulation", "(", "feat1", ",", "bb1", ")", "\n", "\n", "iou_feat", "=", "self", ".", "get_iou_feat", "(", "feat2", ")", "\n", "\n", "modulation", "=", "[", "f", ".", "reshape", "(", "1", ",", "num_sequences", ",", "-", "1", ")", ".", "repeat", "(", "num_images", ",", "1", ",", "1", ")", ".", "reshape", "(", "num_sequences", "*", "num_images", ",", "-", "1", ")", "for", "f", "in", "modulation", "]", "\n", "\n", "proposals2", "=", "proposals2", ".", "reshape", "(", "num_sequences", "*", "num_images", ",", "-", "1", ",", "4", ")", "\n", "pred_iou", "=", "self", ".", "predict_iou", "(", "modulation", ",", "iou_feat", ",", "proposals2", ")", "\n", "return", "pred_iou", ".", "reshape", "(", "num_images", ",", "num_sequences", ",", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.predict_iou": [[96, 137], ["torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "roi2.reshape().to.reshape().to.reshape().to", "atom_iou_net.AtomIoUNet.prroi_pool3t", "atom_iou_net.AtomIoUNet.prroi_pool4t", "atom_iou_net.AtomIoUNet.fc3_rt", "atom_iou_net.AtomIoUNet.fc4_rt", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "atom_iou_net.AtomIoUNet.iou_predictor().reshape", "c3_t.size", "fc34_3_r.reshape", "fc34_4_r.reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape().to.reshape().expand", "torch.arange().reshape().to.reshape().expand", "roi2.reshape().to.reshape().to.reshape", "atom_iou_net.AtomIoUNet.iou_predictor", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange().reshape().to.reshape", "torch.arange().reshape().to.reshape"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size"], ["", "def", "predict_iou", "(", "self", ",", "modulation", ",", "feat", ",", "proposals", ")", ":", "\n", "        ", "\"\"\"Predicts IoU for the give proposals.\n        args:\n            modulation:  Modulation vectors for the targets. Dims (batch, feature_dim).\n            feat:  IoU features (from get_iou_feat) for test images. Dims (batch, feature_dim, H, W).\n            proposals:  Proposal boxes for which the IoU will be predicted (batch, num_proposals, 4).\"\"\"", "\n", "\n", "fc34_3_r", ",", "fc34_4_r", "=", "modulation", "\n", "c3_t", ",", "c4_t", "=", "feat", "\n", "\n", "batch_size", "=", "c3_t", ".", "size", "(", ")", "[", "0", "]", "\n", "\n", "# Modulation", "\n", "c3_t_att", "=", "c3_t", "*", "fc34_3_r", ".", "reshape", "(", "batch_size", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "c4_t_att", "=", "c4_t", "*", "fc34_4_r", ".", "reshape", "(", "batch_size", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "\n", "# Add batch_index to rois", "\n", "batch_index", "=", "torch", ".", "arange", "(", "batch_size", ",", "dtype", "=", "torch", ".", "float32", ")", ".", "reshape", "(", "-", "1", ",", "1", ")", ".", "to", "(", "c3_t", ".", "device", ")", "\n", "\n", "# Push the different rois for the same image along the batch dimension", "\n", "num_proposals_per_batch", "=", "proposals", ".", "shape", "[", "1", "]", "\n", "\n", "# input proposals2 is in format xywh, convert it to x0y0x1y1 format", "\n", "proposals_xyxy", "=", "torch", ".", "cat", "(", "(", "proposals", "[", ":", ",", ":", ",", "0", ":", "2", "]", ",", "proposals", "[", ":", ",", ":", ",", "0", ":", "2", "]", "+", "proposals", "[", ":", ",", ":", ",", "2", ":", "4", "]", ")", ",", "dim", "=", "2", ")", "\n", "\n", "# Add batch index", "\n", "roi2", "=", "torch", ".", "cat", "(", "(", "batch_index", ".", "reshape", "(", "batch_size", ",", "-", "1", ",", "1", ")", ".", "expand", "(", "-", "1", ",", "num_proposals_per_batch", ",", "-", "1", ")", ",", "\n", "proposals_xyxy", ")", ",", "dim", "=", "2", ")", "\n", "roi2", "=", "roi2", ".", "reshape", "(", "-", "1", ",", "5", ")", ".", "to", "(", "proposals_xyxy", ".", "device", ")", "\n", "\n", "roi3t", "=", "self", ".", "prroi_pool3t", "(", "c3_t_att", ",", "roi2", ")", "\n", "roi4t", "=", "self", ".", "prroi_pool4t", "(", "c4_t_att", ",", "roi2", ")", "\n", "\n", "fc3_rt", "=", "self", ".", "fc3_rt", "(", "roi3t", ")", "\n", "fc4_rt", "=", "self", ".", "fc4_rt", "(", "roi4t", ")", "\n", "\n", "fc34_rt_cat", "=", "torch", ".", "cat", "(", "(", "fc3_rt", ",", "fc4_rt", ")", ",", "dim", "=", "1", ")", "\n", "\n", "iou_pred", "=", "self", ".", "iou_predictor", "(", "fc34_rt_cat", ")", ".", "reshape", "(", "batch_size", ",", "num_proposals_per_batch", ")", "\n", "\n", "return", "iou_pred", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.get_modulation": [[138, 171], ["atom_iou_net.AtomIoUNet.conv3_1r", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "bb.clone.clone.clone", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "atom_iou_net.AtomIoUNet.prroi_pool3r", "atom_iou_net.AtomIoUNet.conv4_1r", "atom_iou_net.AtomIoUNet.prroi_pool4r", "atom_iou_net.AtomIoUNet.fc3_1r", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "atom_iou_net.AtomIoUNet.fc34_3r", "atom_iou_net.AtomIoUNet.fc34_4r", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange", "torch.arange", "torch.arange", "torch.arange"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to"], ["", "def", "get_modulation", "(", "self", ",", "feat", ",", "bb", ")", ":", "\n", "        ", "\"\"\"Get modulation vectors for the targets.\n        args:\n            feat: Backbone features from reference images. Dims (batch, feature_dim, H, W).\n            bb:  Target boxes (x,y,w,h) in image coords in the reference samples. Dims (batch, 4).\"\"\"", "\n", "\n", "feat3_r", ",", "feat4_r", "=", "feat", "\n", "\n", "c3_r", "=", "self", ".", "conv3_1r", "(", "feat3_r", ")", "\n", "\n", "# Add batch_index to rois", "\n", "batch_size", "=", "bb", ".", "shape", "[", "0", "]", "\n", "batch_index", "=", "torch", ".", "arange", "(", "batch_size", ",", "dtype", "=", "torch", ".", "float32", ")", ".", "reshape", "(", "-", "1", ",", "1", ")", ".", "to", "(", "bb", ".", "device", ")", "\n", "\n", "# input bb is in format xywh, convert it to x0y0x1y1 format", "\n", "bb", "=", "bb", ".", "clone", "(", ")", "\n", "bb", "[", ":", ",", "2", ":", "4", "]", "=", "bb", "[", ":", ",", "0", ":", "2", "]", "+", "bb", "[", ":", ",", "2", ":", "4", "]", "\n", "roi1", "=", "torch", ".", "cat", "(", "(", "batch_index", ",", "bb", ")", ",", "dim", "=", "1", ")", "\n", "\n", "roi3r", "=", "self", ".", "prroi_pool3r", "(", "c3_r", ",", "roi1", ")", "\n", "\n", "c4_r", "=", "self", ".", "conv4_1r", "(", "feat4_r", ")", "\n", "roi4r", "=", "self", ".", "prroi_pool4r", "(", "c4_r", ",", "roi1", ")", "\n", "\n", "fc3_r", "=", "self", ".", "fc3_1r", "(", "roi3r", ")", "\n", "\n", "# Concatenate from block 3 and 4", "\n", "fc34_r", "=", "torch", ".", "cat", "(", "(", "fc3_r", ",", "roi4r", ")", ",", "dim", "=", "1", ")", "\n", "\n", "fc34_3_r", "=", "self", ".", "fc34_3r", "(", "fc34_r", ")", "\n", "fc34_4_r", "=", "self", ".", "fc34_4r", "(", "fc34_r", ")", "\n", "\n", "return", "fc34_3_r", ",", "fc34_4_r", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.AtomIoUNet.get_iou_feat": [[172, 180], ["atom_iou_net.AtomIoUNet.conv3_2t", "atom_iou_net.AtomIoUNet.conv4_2t", "atom_iou_net.AtomIoUNet.conv3_1t", "atom_iou_net.AtomIoUNet.conv4_1t", "f.reshape", "f.dim"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "get_iou_feat", "(", "self", ",", "feat2", ")", ":", "\n", "        ", "\"\"\"Get IoU prediction features from a 4 or 5 dimensional backbone input.\"\"\"", "\n", "feat2", "=", "[", "f", ".", "reshape", "(", "-", "1", ",", "*", "f", ".", "shape", "[", "-", "3", ":", "]", ")", "if", "f", ".", "dim", "(", ")", "==", "5", "else", "f", "for", "f", "in", "feat2", "]", "\n", "feat3_t", ",", "feat4_t", "=", "feat2", "\n", "c3_t", "=", "self", ".", "conv3_2t", "(", "self", ".", "conv3_1t", "(", "feat3_t", ")", ")", "\n", "c4_t", "=", "self", ".", "conv4_2t", "(", "self", ".", "conv4_1t", "(", "feat4_t", ")", ")", "\n", "\n", "return", "c3_t", ",", "c4_t", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom_iou_net.conv": [[7, 13], ["torch.Sequential", "torch.Conv2d", "torch.BatchNorm2d", "torch.ReLU"], "function", ["None"], ["def", "conv", "(", "in_planes", ",", "out_planes", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "1", ",", "dilation", "=", "1", ")", ":", "\n", "    ", "return", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "in_planes", ",", "out_planes", ",", "kernel_size", "=", "kernel_size", ",", "stride", "=", "stride", ",", "\n", "padding", "=", "padding", ",", "dilation", "=", "dilation", ",", "bias", "=", "True", ")", ",", "\n", "nn", ".", "BatchNorm2d", "(", "out_planes", ")", ",", "\n", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.ATOMnet.__init__": [[9, 27], ["torch.Module.__init__", "atom.ATOMnet.feature_extractor.parameters", "p.requires_grad_"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters"], ["from", "pytracking", ".", "utils", ".", "plotting", "import", "show_tensor", "\n", "from", "pytracking", ".", "libs", ".", "optimization", "import", "GaussNewtonCG", ",", "ConjugateGradient", ",", "GradientDescentL2", "\n", "from", ".", "optim", "import", "ConvProblem", ",", "FactorizedConvProblem", "\n", "from", "pytracking", ".", "features", "import", "augmentation", "\n", "import", "ltr", ".", "data", ".", "bounding_box_utils", "as", "bbutils", "\n", "\n", "\n", "class", "ATOM", "(", "BaseTracker", ")", ":", "\n", "\n", "    ", "multiobj_mode", "=", "'parallel'", "\n", "\n", "def", "initialize_features", "(", "self", ")", ":", "\n", "        ", "if", "not", "getattr", "(", "self", ",", "'features_initialized'", ",", "False", ")", ":", "\n", "            ", "self", ".", "params", ".", "features", ".", "initialize", "(", ")", "\n", "", "self", ".", "features_initialized", "=", "True", "\n", "\n", "\n", "", "def", "initialize", "(", "self", ",", "image", ",", "info", ":", "dict", ")", "->", "dict", ":", "\n", "        ", "state", "=", "info", "[", "'init_bbox'", "]", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.ATOMnet.forward": [[28, 49], ["atom.ATOMnet.extract_backbone_features", "atom.ATOMnet.extract_backbone_features", "atom.ATOMnet.bb_regressor", "train_imgs.reshape", "test_imgs.reshape", "train_bb.reshape", "test_proposals.reshape", "train_imgs.dim", "test_imgs.dim", "atom.ATOMnet.values", "atom.ATOMnet.values"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.extract_backbone_features", "home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.extract_backbone_features", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["\n", "# Initialize some stuff", "\n", "self", ".", "frame_num", "=", "1", "\n", "if", "not", "self", ".", "params", ".", "has", "(", "'device'", ")", ":", "\n", "            ", "self", ".", "params", ".", "device", "=", "'cuda'", "if", "self", ".", "params", ".", "use_gpu", "else", "'cpu'", "\n", "\n", "# Initialize features", "\n", "", "self", ".", "initialize_features", "(", ")", "\n", "\n", "# Check if image is color", "\n", "self", ".", "params", ".", "features", ".", "set_is_color", "(", "image", ".", "shape", "[", "2", "]", "==", "3", ")", "\n", "\n", "# Get feature specific params", "\n", "self", ".", "fparams", "=", "self", ".", "params", ".", "features", ".", "get_fparams", "(", "'feature_params'", ")", "\n", "\n", "tic", "=", "time", ".", "time", "(", ")", "\n", "\n", "# Get position and size", "\n", "self", ".", "pos", "=", "torch", ".", "Tensor", "(", "[", "state", "[", "1", "]", "+", "(", "state", "[", "3", "]", "-", "1", ")", "/", "2", ",", "state", "[", "0", "]", "+", "(", "state", "[", "2", "]", "-", "1", ")", "/", "2", "]", ")", "\n", "self", ".", "target_sz", "=", "torch", ".", "Tensor", "(", "[", "state", "[", "3", "]", ",", "state", "[", "2", "]", "]", ")", "\n", "\n", "# Set search area", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.ATOMnet.extract_backbone_features": [[50, 54], ["atom.ATOMnet.feature_extractor"], "methods", ["None"], ["self", ".", "target_scale", "=", "1.0", "\n", "search_area", "=", "torch", ".", "prod", "(", "self", ".", "target_sz", "*", "self", ".", "params", ".", "search_area_scale", ")", ".", "item", "(", ")", "\n", "if", "search_area", ">", "self", ".", "params", ".", "max_image_sample_size", ":", "\n", "            ", "self", ".", "target_scale", "=", "math", ".", "sqrt", "(", "search_area", "/", "self", ".", "params", ".", "max_image_sample_size", ")", "\n", "", "elif", "search_area", "<", "self", ".", "params", ".", "min_image_sample_size", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.ATOMnet.extract_features": [[55, 57], ["atom.ATOMnet.feature_extractor"], "methods", ["None"], ["            ", "self", ".", "target_scale", "=", "math", ".", "sqrt", "(", "search_area", "/", "self", ".", "params", ".", "min_image_sample_size", ")", "\n", "\n", "# Check if IoUNet is used", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.atom_resnet18": [[60, 72], ["ltr.resnet18", "ltr.AtomIoUNet", "atom.ATOMnet"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.resnet18"], ["# Target size in base scale", "\n", "self", ".", "base_target_sz", "=", "self", ".", "target_sz", "/", "self", ".", "target_scale", "\n", "\n", "# Use odd square search area and set sizes", "\n", "feat_max_stride", "=", "max", "(", "self", ".", "params", ".", "features", ".", "stride", "(", ")", ")", "\n", "if", "self", ".", "params", ".", "get", "(", "'search_area_shape'", ",", "'square'", ")", "==", "'square'", ":", "\n", "            ", "self", ".", "img_sample_sz", "=", "torch", ".", "round", "(", "torch", ".", "sqrt", "(", "torch", ".", "prod", "(", "self", ".", "base_target_sz", "*", "self", ".", "params", ".", "search_area_scale", ")", ")", ")", "*", "torch", ".", "ones", "(", "2", ")", "\n", "", "elif", "self", ".", "params", ".", "search_area_shape", "==", "'initrect'", ":", "\n", "            ", "self", ".", "img_sample_sz", "=", "torch", ".", "round", "(", "self", ".", "base_target_sz", "*", "self", ".", "params", ".", "search_area_scale", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'Unknown search area shape'", ")", "\n", "", "if", "self", ".", "params", ".", "feature_size_odd", ":", "\n", "            ", "self", ".", "img_sample_sz", "+=", "feat_max_stride", "-", "self", ".", "img_sample_sz", "%", "(", "2", "*", "feat_max_stride", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.bbreg.atom.atom_resnet50": [[74, 86], ["ltr.resnet50", "ltr.AtomIoUNet", "atom.ATOMnet"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.resnet50"], ["            ", "self", ".", "img_sample_sz", "+=", "feat_max_stride", "-", "(", "self", ".", "img_sample_sz", "+", "feat_max_stride", ")", "%", "(", "2", "*", "feat_max_stride", ")", "\n", "\n", "# Set sizes", "\n", "", "self", ".", "img_support_sz", "=", "self", ".", "img_sample_sz", "\n", "self", ".", "feature_sz", "=", "self", ".", "params", ".", "features", ".", "size", "(", "self", ".", "img_sample_sz", ")", "\n", "self", ".", "output_sz", "=", "self", ".", "params", ".", "score_upsample_factor", "*", "self", ".", "img_support_sz", "# Interpolated size of the output", "\n", "self", ".", "kernel_size", "=", "self", ".", "fparams", ".", "attribute", "(", "'kernel_size'", ")", "\n", "\n", "self", ".", "iou_img_sample_sz", "=", "self", ".", "img_sample_sz", "\n", "\n", "# Optimization options", "\n", "self", ".", "params", ".", "precond_learning_rate", "=", "self", ".", "fparams", ".", "attribute", "(", "'learning_rate'", ")", "\n", "if", "self", ".", "params", ".", "CG_forgetting_rate", "is", "None", "or", "max", "(", "self", ".", "params", ".", "precond_learning_rate", ")", ">=", "1", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.seg_network.TSE.__init__": [[9, 15], ["torch.nn.Module.__init__", "torch.nn.Sequential", "torch.nn.Sequential", "ltr.models.head.utils.conv", "ltr.models.head.utils.relu", "ltr.models.head.utils.conv", "ltr.models.head.utils.conv", "ltr.models.head.utils.relu", "ltr.models.head.utils.conv", "ltr.models.head.utils.relu", "ltr.models.head.utils.conv", "ltr.models.head.utils.relu"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu"], ["    ", "def", "__init__", "(", "self", ",", "fc", ",", "ic", ",", "oc", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "nc", "=", "ic", "+", "oc", "\n", "self", ".", "reduce", "=", "nn", ".", "Sequential", "(", "conv", "(", "fc", ",", "oc", ",", "1", ")", ",", "relu", "(", ")", ",", "conv", "(", "oc", ",", "oc", ",", "1", ")", ")", "\n", "self", ".", "transform", "=", "nn", ".", "Sequential", "(", "conv", "(", "nc", ",", "nc", ",", "3", ")", ",", "relu", "(", ")", ",", "conv", "(", "nc", ",", "nc", ",", "3", ")", ",", "relu", "(", ")", ",", "conv", "(", "nc", ",", "oc", ",", "3", ")", ",", "relu", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.seg_network.TSE.forward": [[16, 22], ["seg_network.TSE.reduce", "ltr.models.head.utils.adaptive_cat", "seg_network.TSE.transform", "torch.nn.functional.adaptive_avg_pool2d"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.adaptive_cat", "home.repos.pwc.inspect_result.researchmm_Stark.data.transforms.RandomBlur.transform"], ["", "def", "forward", "(", "self", ",", "ft", ",", "score", ",", "x", "=", "None", ")", ":", "\n", "        ", "h", "=", "self", ".", "reduce", "(", "ft", ")", "\n", "hpool", "=", "F", ".", "adaptive_avg_pool2d", "(", "h", ",", "(", "1", ",", "1", ")", ")", "if", "x", "is", "None", "else", "x", "\n", "h", "=", "adaptive_cat", "(", "(", "h", ",", "score", ")", ",", "dim", "=", "1", ",", "ref_tensor", "=", "0", ")", "\n", "h", "=", "self", ".", "transform", "(", "h", ")", "\n", "return", "h", ",", "hpool", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.seg_network.CAB.__init__": [[26, 31], ["torch.nn.Module.__init__", "torch.nn.Sequential", "ltr.models.head.utils.conv", "ltr.models.head.utils.relu", "ltr.models.head.utils.conv"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv"], ["    ", "def", "__init__", "(", "self", ",", "oc", ",", "deepest", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "convreluconv", "=", "nn", ".", "Sequential", "(", "conv", "(", "2", "*", "oc", ",", "oc", ",", "1", ")", ",", "relu", "(", ")", ",", "conv", "(", "oc", ",", "oc", ",", "1", ")", ")", "\n", "self", ".", "deepest", "=", "deepest", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.seg_network.CAB.forward": [[32, 45], ["torch.nn.functional.adaptive_avg_pool2d", "seg_network.CAB.convreluconv", "torch.nn.functional.adaptive_avg_pool2d", "torch.cat", "torch.cat", "torch.sigmoid", "ltr.models.head.utils.interpolate"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], ["", "def", "forward", "(", "self", ",", "deeper", ",", "shallower", ",", "att_vec", "=", "None", ")", ":", "\n", "\n", "        ", "shallow_pool", "=", "F", ".", "adaptive_avg_pool2d", "(", "shallower", ",", "(", "1", ",", "1", ")", ")", "\n", "deeper_pool", "=", "deeper", "if", "self", ".", "deepest", "else", "F", ".", "adaptive_avg_pool2d", "(", "deeper", ",", "(", "1", ",", "1", ")", ")", "\n", "if", "att_vec", "is", "not", "None", ":", "\n", "            ", "global_pool", "=", "torch", ".", "cat", "(", "[", "shallow_pool", ",", "deeper_pool", ",", "att_vec", "]", ",", "dim", "=", "1", ")", "\n", "", "else", ":", "\n", "            ", "global_pool", "=", "torch", ".", "cat", "(", "(", "shallow_pool", ",", "deeper_pool", ")", ",", "dim", "=", "1", ")", "\n", "", "conv_1x1", "=", "self", ".", "convreluconv", "(", "global_pool", ")", "\n", "inputs", "=", "shallower", "*", "torch", ".", "sigmoid", "(", "conv_1x1", ")", "\n", "out", "=", "inputs", "+", "interpolate", "(", "deeper", ",", "inputs", ".", "shape", "[", "-", "2", ":", "]", ")", "\n", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.seg_network.RRB.__init__": [[49, 56], ["torch.nn.Module.__init__", "ltr.models.head.utils.conv", "torch.nn.Sequential", "torch.nn.Sequential", "ltr.models.head.utils.conv", "torch.nn.BatchNorm2d", "ltr.models.head.utils.relu", "ltr.models.head.utils.conv", "ltr.models.head.utils.conv", "ltr.models.head.utils.relu", "ltr.models.head.utils.conv"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv"], ["    ", "def", "__init__", "(", "self", ",", "oc", ",", "use_bn", "=", "False", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv1x1", "=", "conv", "(", "oc", ",", "oc", ",", "1", ")", "\n", "if", "use_bn", ":", "\n", "            ", "self", ".", "bblock", "=", "nn", ".", "Sequential", "(", "conv", "(", "oc", ",", "oc", ",", "3", ")", ",", "nn", ".", "BatchNorm2d", "(", "oc", ")", ",", "relu", "(", ")", ",", "conv", "(", "oc", ",", "oc", ",", "3", ",", "bias", "=", "False", ")", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "bblock", "=", "nn", ".", "Sequential", "(", "conv", "(", "oc", ",", "oc", ",", "3", ")", ",", "relu", "(", ")", ",", "conv", "(", "oc", ",", "oc", ",", "3", ",", "bias", "=", "False", ")", ")", "# Basic block", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.seg_network.RRB.forward": [[57, 60], ["seg_network.RRB.conv1x1", "torch.nn.functional.relu", "seg_network.RRB.bblock"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv1x1", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu"], ["", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "h", "=", "self", ".", "conv1x1", "(", "x", ")", "\n", "return", "F", ".", "relu", "(", "h", "+", "self", ".", "bblock", "(", "h", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.seg_network.Upsampler.__init__": [[64, 69], ["torch.nn.Module.__init__", "ltr.models.head.utils.conv", "ltr.models.head.utils.conv"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv"], ["    ", "def", "__init__", "(", "self", ",", "in_channels", "=", "64", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "conv1", "=", "conv", "(", "in_channels", ",", "in_channels", "//", "2", ",", "3", ")", "\n", "self", ".", "conv2", "=", "conv", "(", "in_channels", "//", "2", ",", "1", ",", "3", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.seg_network.Upsampler.forward": [[70, 77], ["print", "torch.nn.functional.interpolate", "torch.nn.functional.relu", "torch.nn.functional.interpolate", "seg_network.Upsampler.conv2", "seg_network.Upsampler.conv1"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], ["", "def", "forward", "(", "self", ",", "x", ",", "image_size", ")", ":", "\n", "        ", "print", "(", "x", ".", "shape", ")", "\n", "x", "=", "F", ".", "interpolate", "(", "x", ",", "(", "2", "*", "x", ".", "shape", "[", "-", "2", "]", ",", "2", "*", "x", ".", "shape", "[", "-", "1", "]", ")", ",", "mode", "=", "'bicubic'", ",", "align_corners", "=", "False", ")", "\n", "x", "=", "F", ".", "relu", "(", "self", ".", "conv1", "(", "x", ")", ")", "\n", "x", "=", "F", ".", "interpolate", "(", "x", ",", "image_size", "[", "-", "2", ":", "]", ",", "mode", "=", "'bicubic'", ",", "align_corners", "=", "False", ")", "\n", "x", "=", "self", ".", "conv2", "(", "x", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.seg_network.PyrUpBicubic2d.__init__": [[81, 107], ["torch.nn.Module.__init__", "seg_network.PyrUpBicubic2d.__init__.kernel"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "channels", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "channels", "=", "channels", "\n", "\n", "def", "kernel", "(", "d", ")", ":", "\n", "            ", "x", "=", "d", "+", "torch", ".", "arange", "(", "-", "1", ",", "3", ",", "dtype", "=", "torch", ".", "float32", ")", "\n", "x", "=", "torch", ".", "abs", "(", "x", ")", "\n", "a", "=", "-", "0.75", "\n", "f", "=", "(", "x", "<", "1", ")", ".", "float", "(", ")", "*", "(", "(", "a", "+", "2", ")", "*", "x", "*", "x", "*", "x", "-", "(", "a", "+", "3", ")", "*", "x", "*", "x", "+", "1", ")", "+", "(", "(", "x", ">=", "1", ")", "*", "(", "x", "<", "2", ")", ")", ".", "float", "(", ")", "*", "(", "a", "*", "x", "*", "x", "*", "x", "-", "5", "*", "a", "*", "x", "*", "x", "+", "8", "*", "a", "*", "x", "-", "4", "*", "a", ")", "\n", "W", "=", "f", ".", "reshape", "(", "1", ",", "1", ",", "1", ",", "len", "(", "x", ")", ")", ".", "float", "(", ")", "\n", "Wt", "=", "W", ".", "permute", "(", "0", ",", "1", ",", "3", ",", "2", ")", "\n", "return", "W", ",", "Wt", "\n", "\n", "", "We", ",", "We_t", "=", "kernel", "(", "-", "0.25", ")", "\n", "Wo", ",", "Wo_t", "=", "kernel", "(", "-", "0.25", "-", "0.5", ")", "\n", "\n", "# Building non-separable filters for now. It would make sense to", "\n", "# have separable filters if it proves to be faster.", "\n", "\n", "# .contiguous() is needed until a bug is fixed in nn.Conv2d.", "\n", "self", ".", "W00", "=", "(", "We_t", "@", "We", ")", ".", "expand", "(", "channels", ",", "1", ",", "4", ",", "4", ")", ".", "contiguous", "(", ")", "\n", "self", ".", "W01", "=", "(", "We_t", "@", "Wo", ")", ".", "expand", "(", "channels", ",", "1", ",", "4", ",", "4", ")", ".", "contiguous", "(", ")", "\n", "self", ".", "W10", "=", "(", "Wo_t", "@", "We", ")", ".", "expand", "(", "channels", ",", "1", ",", "4", ",", "4", ")", ".", "contiguous", "(", ")", "\n", "self", ".", "W11", "=", "(", "Wo_t", "@", "Wo", ")", ".", "expand", "(", "channels", ",", "1", ",", "4", ",", "4", ")", ".", "contiguous", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.seg_network.PyrUpBicubic2d.forward": [[108, 131], ["torch.nn.functional.pad", "torch.nn.functional.conv2d", "torch.nn.functional.conv2d", "torch.nn.functional.conv2d", "torch.nn.functional.conv2d", "torch.stack().view", "torch.stack().view", "torch.stack().view", "torch.nn.functional.pad", "seg_network.PyrUpBicubic2d.W00.to", "seg_network.PyrUpBicubic2d.W01.to", "seg_network.PyrUpBicubic2d.W10.to", "seg_network.PyrUpBicubic2d.W11.to", "torch.stack", "torch.stack", "torch.stack"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to"], ["", "def", "forward", "(", "self", ",", "input", ")", ":", "\n", "\n", "        ", "if", "input", ".", "device", "!=", "self", ".", "W00", ".", "device", ":", "\n", "            ", "self", ".", "W00", "=", "self", ".", "W00", ".", "to", "(", "input", ".", "device", ")", "\n", "self", ".", "W01", "=", "self", ".", "W01", ".", "to", "(", "input", ".", "device", ")", "\n", "self", ".", "W10", "=", "self", ".", "W10", ".", "to", "(", "input", ".", "device", ")", "\n", "self", ".", "W11", "=", "self", ".", "W11", ".", "to", "(", "input", ".", "device", ")", "\n", "\n", "", "a", "=", "F", ".", "pad", "(", "input", ",", "(", "2", ",", "2", ",", "2", ",", "2", ")", ",", "'replicate'", ")", "\n", "\n", "I00", "=", "F", ".", "conv2d", "(", "a", ",", "self", ".", "W00", ",", "groups", "=", "self", ".", "channels", ")", "\n", "I01", "=", "F", ".", "conv2d", "(", "a", ",", "self", ".", "W01", ",", "groups", "=", "self", ".", "channels", ")", "\n", "I10", "=", "F", ".", "conv2d", "(", "a", ",", "self", ".", "W10", ",", "groups", "=", "self", ".", "channels", ")", "\n", "I11", "=", "F", ".", "conv2d", "(", "a", ",", "self", ".", "W11", ",", "groups", "=", "self", ".", "channels", ")", "\n", "\n", "n", ",", "c", ",", "h", ",", "w", "=", "I11", ".", "shape", "\n", "\n", "J0", "=", "torch", ".", "stack", "(", "(", "I00", ",", "I01", ")", ",", "dim", "=", "-", "1", ")", ".", "view", "(", "n", ",", "c", ",", "h", ",", "2", "*", "w", ")", "\n", "J1", "=", "torch", ".", "stack", "(", "(", "I10", ",", "I11", ")", ",", "dim", "=", "-", "1", ")", ".", "view", "(", "n", ",", "c", ",", "h", ",", "2", "*", "w", ")", "\n", "out", "=", "torch", ".", "stack", "(", "(", "J0", ",", "J1", ")", ",", "dim", "=", "-", "2", ")", ".", "view", "(", "n", ",", "c", ",", "2", "*", "h", ",", "2", "*", "w", ")", "\n", "\n", "out", "=", "F", ".", "pad", "(", "out", ",", "(", "-", "1", ",", "-", "1", ",", "-", "1", ",", "-", "1", ")", ")", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.seg_network.BackwardCompatibleUpsampler.__init__": [[136, 143], ["torch.nn.Module.__init__", "ltr.models.head.utils.conv", "seg_network.PyrUpBicubic2d", "ltr.models.head.utils.conv", "seg_network.PyrUpBicubic2d"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv", "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv"], ["def", "__init__", "(", "self", ",", "in_channels", "=", "64", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "conv1", "=", "conv", "(", "in_channels", ",", "in_channels", "//", "2", ",", "3", ")", "\n", "self", ".", "up1", "=", "PyrUpBicubic2d", "(", "in_channels", ")", "\n", "self", ".", "conv2", "=", "conv", "(", "in_channels", "//", "2", ",", "1", ",", "3", ")", "\n", "self", ".", "up2", "=", "PyrUpBicubic2d", "(", "in_channels", "//", "2", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.seg_network.BackwardCompatibleUpsampler.forward": [[144, 151], ["seg_network.BackwardCompatibleUpsampler.up1", "torch.nn.functional.relu", "seg_network.BackwardCompatibleUpsampler.up2", "torch.nn.functional.interpolate", "seg_network.BackwardCompatibleUpsampler.conv2", "seg_network.BackwardCompatibleUpsampler.conv1"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], ["", "def", "forward", "(", "self", ",", "x", ",", "image_size", ")", ":", "\n", "        ", "x", "=", "self", ".", "up1", "(", "x", ")", "\n", "x", "=", "F", ".", "relu", "(", "self", ".", "conv1", "(", "x", ")", ")", "\n", "x", "=", "self", ".", "up2", "(", "x", ")", "\n", "x", "=", "F", ".", "interpolate", "(", "x", ",", "image_size", "[", "-", "2", ":", "]", ",", "mode", "=", "'bilinear'", ",", "align_corners", "=", "False", ")", "\n", "x", "=", "self", ".", "conv2", "(", "x", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.seg_network.SegNetwork.__init__": [[155, 178], ["torch.nn.Module.__init__", "torch.nn.ModuleDict", "torch.nn.ModuleDict", "torch.nn.ModuleDict", "torch.nn.ModuleDict", "seg_network.SegNetwork.ft_channels.items", "seg_network.BackwardCompatibleUpsampler", "seg_network.TSE", "seg_network.RRB", "seg_network.CAB", "seg_network.RRB"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "in_channels", "=", "1", ",", "out_channels", "=", "32", ",", "ft_channels", "=", "None", ",", "use_bn", "=", "False", ")", ":", "\n", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "assert", "ft_channels", "is", "not", "None", "\n", "self", ".", "ft_channels", "=", "ft_channels", "\n", "\n", "self", ".", "TSE", "=", "nn", ".", "ModuleDict", "(", ")", "\n", "self", ".", "RRB1", "=", "nn", ".", "ModuleDict", "(", ")", "\n", "self", ".", "CAB", "=", "nn", ".", "ModuleDict", "(", ")", "\n", "self", ".", "RRB2", "=", "nn", ".", "ModuleDict", "(", ")", "\n", "\n", "ic", "=", "in_channels", "\n", "oc", "=", "out_channels", "\n", "\n", "for", "L", ",", "fc", "in", "self", ".", "ft_channels", ".", "items", "(", ")", ":", "\n", "            ", "self", ".", "TSE", "[", "L", "]", "=", "TSE", "(", "fc", ",", "ic", ",", "oc", ")", "\n", "self", ".", "RRB1", "[", "L", "]", "=", "RRB", "(", "oc", ",", "use_bn", "=", "use_bn", ")", "\n", "self", ".", "CAB", "[", "L", "]", "=", "CAB", "(", "oc", ",", "L", "==", "'layer5'", ")", "\n", "self", ".", "RRB2", "[", "L", "]", "=", "RRB", "(", "oc", ",", "use_bn", "=", "use_bn", ")", "\n", "\n", "#if torch.__version__ == '1.0.1'", "\n", "", "self", ".", "project", "=", "BackwardCompatibleUpsampler", "(", "out_channels", ")", "\n", "#self.project = Upsampler(out_channels)", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.seg_network.SegNetwork.forward": [[180, 205], ["enumerate", "seg_network.SegNetwork.project", "ltr.models.head.utils.interpolate", "ft.repeat", "next", "iter"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], ["", "def", "forward", "(", "self", ",", "scores", ",", "features", ",", "image_size", ")", ":", "\n", "\n", "        ", "num_targets", "=", "scores", ".", "shape", "[", "0", "]", "\n", "num_fmaps", "=", "features", "[", "next", "(", "iter", "(", "self", ".", "ft_channels", ")", ")", "]", ".", "shape", "[", "0", "]", "\n", "if", "num_targets", ">", "num_fmaps", ":", "\n", "            ", "multi_targets", "=", "True", "\n", "", "else", ":", "\n", "            ", "multi_targets", "=", "False", "\n", "\n", "", "x", "=", "None", "\n", "for", "i", ",", "L", "in", "enumerate", "(", "self", ".", "ft_channels", ")", ":", "\n", "            ", "ft", "=", "features", "[", "L", "]", "\n", "s", "=", "interpolate", "(", "scores", ",", "ft", ".", "shape", "[", "-", "2", ":", "]", ")", "# Resample scores to match features size", "\n", "\n", "if", "multi_targets", ":", "\n", "                ", "h", ",", "hpool", "=", "self", ".", "TSE", "[", "L", "]", "(", "ft", ".", "repeat", "(", "num_targets", ",", "1", ",", "1", ",", "1", ")", ",", "s", ",", "x", ")", "\n", "", "else", ":", "\n", "                ", "h", ",", "hpool", "=", "self", ".", "TSE", "[", "L", "]", "(", "ft", ",", "s", ",", "x", ")", "\n", "\n", "", "h", "=", "self", ".", "RRB1", "[", "L", "]", "(", "h", ")", "\n", "h", "=", "self", ".", "CAB", "[", "L", "]", "(", "hpool", ",", "h", ")", "\n", "x", "=", "self", ".", "RRB2", "[", "L", "]", "(", "h", ")", "\n", "\n", "", "x", "=", "self", ".", "project", "(", "x", ",", "image_size", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.ModuleWrapper.__init__": [[31, 33], ["None"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "wrapped_module", ")", ":", "\n", "        ", "self", ".", "__wrapped_module__", "=", "wrapped_module", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.ModuleWrapper.__getattr__": [[34, 47], ["utils.ModuleWrapper.__wrapped_module__.__getattribute__", "callable", "utils.ModuleWrapper."], "methods", ["None"], ["", "def", "__getattr__", "(", "self", ",", "attr", ")", ":", "\n", "        ", "orig_attr", "=", "self", ".", "__wrapped_module__", ".", "__getattribute__", "(", "attr", ")", "\n", "if", "callable", "(", "orig_attr", ")", ":", "\n", "            ", "def", "hooked", "(", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "                ", "result", "=", "orig_attr", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "# prevent wrapped_class from becoming unwrapped", "\n", "if", "result", "==", "self", ".", "__wrapped_module__", ":", "\n", "                    ", "return", "self", "\n", "", "return", "result", "\n", "\n", "", "return", "hooked", "\n", "", "else", ":", "\n", "            ", "return", "orig_attr", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.ModuleWrapper.__call__": [[48, 50], ["utils.ModuleWrapper.__wrapped_module__"], "methods", ["None"], ["", "", "def", "__call__", "(", "self", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "return", "self", ".", "__wrapped_module__", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.__init__": [[96, 102], ["None"], "methods", ["None"], ["def", "__init__", "(", "self", ")", ":", "\n", "        ", "self", ".", "val", "=", "0", "\n", "self", ".", "avg", "=", "0", "\n", "self", ".", "sum", "=", "0", "\n", "self", ".", "count", "=", "0", "\n", "self", ".", "seq_avg", "=", "[", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.reset": [[103, 105], ["utils.AverageMeter.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["", "def", "reset", "(", "self", ")", ":", "\n", "        ", "self", ".", "__init__", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update": [[106, 112], ["numpy.isnan"], "methods", ["None"], ["", "def", "update", "(", "self", ",", "val", ",", "n", "=", "1", ")", ":", "\n", "        ", "if", "not", "np", ".", "isnan", "(", "val", ")", ":", "\n", "            ", "self", ".", "val", "=", "val", "\n", "self", ".", "sum", "+=", "val", "*", "n", "\n", "self", ".", "count", "+=", "n", "\n", "self", ".", "avg", "=", "self", ".", "sum", "/", "self", ".", "count", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.AverageMeter.update_multi": [[113, 121], ["numpy.array", "len", "numpy.nansum", "numpy.isnan"], "methods", ["None"], ["", "", "def", "update_multi", "(", "self", ",", "val", ")", ":", "\n", "        ", "val", "=", "np", ".", "array", "(", "val", ")", "\n", "v", "=", "val", "[", "~", "np", ".", "isnan", "(", "val", ")", "]", "\n", "n", "=", "len", "(", "v", ")", "\n", "self", ".", "val", "=", "val", "\n", "self", ".", "sum", "+=", "np", ".", "nansum", "(", "v", ")", "\n", "self", ".", "count", "+=", "n", "\n", "self", ".", "avg", "=", "self", ".", "sum", "/", "self", ".", "count", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.text_bargraph": [[9, 23], ["numpy.array", "numpy.array", "numpy.isnan", "str.join", "len", "len"], "function", ["None"], ["def", "text_bargraph", "(", "values", ")", ":", "\n", "    ", "blocks", "=", "np", ".", "array", "(", "(", "'u'", ",", "' '", ",", "'\u2581'", ",", "'\u2582'", ",", "'\u2583'", ",", "'\u2584'", ",", "'\u2585'", ",", "'\u2586'", ",", "'\u2587'", ",", "'\u2588'", ",", "'o'", ")", ")", "\n", "nsteps", "=", "len", "(", "blocks", ")", "-", "2", "-", "1", "\n", "hstep", "=", "1", "/", "(", "2", "*", "nsteps", ")", "\n", "values", "=", "np", ".", "array", "(", "values", ")", "\n", "nans", "=", "np", ".", "isnan", "(", "values", ")", "\n", "values", "[", "nans", "]", "=", "0", "# '\u2591'", "\n", "indices", "=", "(", "(", "values", "+", "hstep", ")", "*", "nsteps", "+", "1", ")", ".", "astype", "(", "np", ".", "int", ")", "\n", "indices", "[", "values", "<", "0", "]", "=", "0", "\n", "indices", "[", "values", ">", "1", "]", "=", "len", "(", "blocks", ")", "-", "1", "\n", "graph", "=", "blocks", "[", "indices", "]", "\n", "graph", "[", "nans", "]", "=", "'\u2591'", "\n", "graph", "=", "str", ".", "join", "(", "''", ",", "graph", ")", "\n", "return", "graph", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.conv": [[52, 54], ["torch.nn.Conv2d"], "function", ["None"], ["", "", "def", "conv", "(", "ic", ",", "oc", ",", "ksize", ",", "bias", "=", "True", ",", "dilation", "=", "1", ",", "stride", "=", "1", ")", ":", "\n", "    ", "return", "nn", ".", "Conv2d", "(", "ic", ",", "oc", ",", "ksize", ",", "padding", "=", "ksize", "//", "2", ",", "bias", "=", "bias", ",", "dilation", "=", "dilation", ",", "stride", "=", "stride", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu": [[56, 58], ["torch.nn.LeakyReLU"], "function", ["None"], ["", "def", "relu", "(", "negative_slope", "=", "0.0", ",", "inplace", "=", "False", ")", ":", "\n", "    ", "return", "nn", ".", "LeakyReLU", "(", "negative_slope", ",", "inplace", "=", "inplace", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.interpolate": [[60, 63], ["torch.is_tensor", "sz.tolist", "torch.nn.functional.interpolate"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], ["", "def", "interpolate", "(", "t", ",", "sz", ")", ":", "\n", "    ", "sz", "=", "sz", ".", "tolist", "(", ")", "if", "torch", ".", "is_tensor", "(", "sz", ")", "else", "sz", "\n", "return", "F", ".", "interpolate", "(", "t", ",", "sz", ",", "mode", "=", "'bilinear'", ",", "align_corners", "=", "False", ")", "if", "t", ".", "shape", "[", "-", "2", ":", "]", "!=", "sz", "else", "t", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.adaptive_cat": [[65, 69], ["torch.cat", "utils.interpolate"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], ["", "def", "adaptive_cat", "(", "seq", ",", "dim", "=", "0", ",", "ref_tensor", "=", "0", ")", ":", "\n", "    ", "sz", "=", "seq", "[", "ref_tensor", "]", ".", "shape", "[", "-", "2", ":", "]", "\n", "t", "=", "torch", ".", "cat", "(", "[", "interpolate", "(", "t", ",", "sz", ")", "for", "t", "in", "seq", "]", ",", "dim", "=", "dim", ")", "\n", "return", "t", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.get_out_channels": [[71, 87], ["hasattr", "hasattr", "utils.get_out_channels", "reversed", "ocs.append", "utils.get_out_channels"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.ResNet.get_out_channels", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.ResNet.get_out_channels"], ["", "def", "get_out_channels", "(", "layer", ")", ":", "\n", "    ", "if", "hasattr", "(", "layer", ",", "'out_channels'", ")", ":", "\n", "        ", "oc", "=", "layer", ".", "out_channels", "\n", "", "elif", "hasattr", "(", "layer", ",", "'_modules'", ")", ":", "\n", "        ", "oc", "=", "get_out_channels", "(", "layer", ".", "_modules", ")", "\n", "", "else", ":", "\n", "        ", "ocs", "=", "[", "]", "\n", "for", "key", "in", "reversed", "(", "layer", ")", ":", "\n", "            ", "ocs", ".", "append", "(", "get_out_channels", "(", "layer", "[", "key", "]", ")", ")", "\n", "\n", "", "oc", "=", "0", "\n", "for", "elem", "in", "ocs", ":", "\n", "            ", "if", "elem", ":", "\n", "                ", "return", "elem", "\n", "\n", "", "", "", "return", "oc", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.is_finite": [[89, 91], ["torch.isnan", "torch.isinf"], "function", ["None"], ["", "def", "is_finite", "(", "t", ")", ":", "\n", "    ", "return", "(", "torch", ".", "isnan", "(", "t", ")", "+", "torch", ".", "isinf", "(", "t", ")", ")", "==", "0", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.meta.steepestdescent.GNSteepestDescent.__init__": [[10, 23], ["float", "torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "residual_module", ",", "num_iter", "=", "1", ",", "compute_losses", "=", "False", ",", "detach_length", "=", "float", "(", "'Inf'", ")", ",", "\n", "parameter_batch_dim", "=", "0", ",", "residual_batch_dim", "=", "0", ",", "steplength_reg", "=", "0.0", ",", "\n", "filter_dilation_factors", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "residual_module", "=", "residual_module", "\n", "self", ".", "num_iter", "=", "num_iter", "\n", "self", ".", "compute_losses", "=", "compute_losses", "\n", "self", ".", "detach_length", "=", "detach_length", "\n", "self", ".", "steplength_reg", "=", "steplength_reg", "\n", "self", ".", "_parameter_batch_dim", "=", "parameter_batch_dim", "\n", "self", ".", "_residual_batch_dim", "=", "residual_batch_dim", "\n", "self", ".", "filter_dilation_factors", "=", "filter_dilation_factors", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.meta.steepestdescent.GNSteepestDescent._sqr_norm": [[24, 27], ["sum", "e.sum", "range", "e.dim"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "_sqr_norm", "(", "self", ",", "x", ":", "TensorList", ",", "batch_dim", "=", "0", ")", ":", "\n", "        ", "sum_keep_batch_dim", "=", "lambda", "e", ":", "e", ".", "sum", "(", "dim", "=", "[", "d", "for", "d", "in", "range", "(", "e", ".", "dim", "(", ")", ")", "if", "d", "!=", "batch_dim", "]", ")", "\n", "return", "sum", "(", "(", "x", "*", "x", ")", ".", "apply", "(", "sum_keep_batch_dim", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.meta.steepestdescent.GNSteepestDescent._compute_loss": [[29, 31], ["sum", "sum", "res.numel"], "methods", ["None"], ["", "def", "_compute_loss", "(", "self", ",", "res", ")", ":", "\n", "        ", "return", "sum", "(", "(", "res", "*", "res", ")", ".", "sum", "(", ")", ")", "/", "sum", "(", "res", ".", "numel", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.meta.steepestdescent.GNSteepestDescent.forward": [[33, 93], ["torch.is_grad_enabled", "torch.is_grad_enabled", "torch.is_grad_enabled", "torch.is_grad_enabled", "torch.set_grad_enabled", "torch.set_grad_enabled", "torch.set_grad_enabled", "torch.set_grad_enabled", "range", "torch.set_grad_enabled", "torch.set_grad_enabled", "torch.set_grad_enabled", "torch.set_grad_enabled", "meta_parameter.detach.detach.requires_grad_", "steepestdescent.GNSteepestDescent.residual_module", "steepestdescent.GNSteepestDescent.clone", "pytracking.TensorList", "pytracking.TensorList", "steepestdescent.GNSteepestDescent._sqr_norm", "steepestdescent.GNSteepestDescent._sqr_norm", "pytracking.TensorList.apply", "meta_parameter_iterates.append", "losses.append", "meta_parameter.detach.detach.detach_", "meta_parameter.detach.detach.detach", "losses.append", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "torch.autograd.grad", "steepestdescent.GNSteepestDescent._compute_loss", "w.detach_", "l.detach_", "steepestdescent.GNSteepestDescent._compute_loss", "steepestdescent.GNSteepestDescent.residual_module", "alpha.reshape", "range", "e.dim"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.meta.steepestdescent.GNSteepestDescent._sqr_norm", "home.repos.pwc.inspect_result.researchmm_Stark.meta.steepestdescent.GNSteepestDescent._sqr_norm", "home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.apply", "home.repos.pwc.inspect_result.researchmm_Stark.meta.steepestdescent.GNSteepestDescent._compute_loss", "home.repos.pwc.inspect_result.researchmm_Stark.meta.steepestdescent.GNSteepestDescent._compute_loss", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "forward", "(", "self", ",", "meta_parameter", ":", "TensorList", ",", "num_iter", "=", "None", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "# Make sure grad is enabled", "\n", "        ", "torch_grad_enabled", "=", "torch", ".", "is_grad_enabled", "(", ")", "\n", "torch", ".", "set_grad_enabled", "(", "True", ")", "\n", "\n", "num_iter", "=", "self", ".", "num_iter", "if", "num_iter", "is", "None", "else", "num_iter", "\n", "\n", "meta_parameter_iterates", "=", "[", "meta_parameter", "]", "\n", "losses", "=", "[", "]", "\n", "\n", "for", "i", "in", "range", "(", "num_iter", ")", ":", "\n", "            ", "if", "i", ">", "0", "and", "i", "%", "self", ".", "detach_length", "==", "0", ":", "\n", "                ", "meta_parameter", "=", "meta_parameter", ".", "detach", "(", ")", "\n", "\n", "", "meta_parameter", ".", "requires_grad_", "(", "True", ")", "\n", "\n", "# Compute residual vector", "\n", "r", "=", "self", ".", "residual_module", "(", "meta_parameter", ",", "filter_dilation_factors", "=", "self", ".", "filter_dilation_factors", ",", "**", "kwargs", ")", "\n", "\n", "if", "self", ".", "compute_losses", ":", "\n", "                ", "losses", ".", "append", "(", "self", ".", "_compute_loss", "(", "r", ")", ")", "\n", "\n", "# Compute gradient of loss", "\n", "", "u", "=", "r", ".", "clone", "(", ")", "\n", "g", "=", "TensorList", "(", "torch", ".", "autograd", ".", "grad", "(", "r", ",", "meta_parameter", ",", "u", ",", "create_graph", "=", "True", ")", ")", "\n", "\n", "# Multiply gradient with Jacobian", "\n", "h", "=", "TensorList", "(", "torch", ".", "autograd", ".", "grad", "(", "g", ",", "u", ",", "g", ",", "create_graph", "=", "True", ")", ")", "\n", "\n", "# Compute squared norms", "\n", "ip_gg", "=", "self", ".", "_sqr_norm", "(", "g", ",", "batch_dim", "=", "self", ".", "_parameter_batch_dim", ")", "\n", "ip_hh", "=", "self", ".", "_sqr_norm", "(", "h", ",", "batch_dim", "=", "self", ".", "_residual_batch_dim", ")", "\n", "\n", "# Compute step length", "\n", "alpha", "=", "ip_gg", "/", "(", "ip_hh", "+", "self", ".", "steplength_reg", "*", "ip_gg", ")", ".", "clamp", "(", "1e-8", ")", "\n", "\n", "# Compute optimization step", "\n", "step", "=", "g", ".", "apply", "(", "lambda", "e", ":", "alpha", ".", "reshape", "(", "[", "-", "1", "if", "d", "==", "self", ".", "_parameter_batch_dim", "else", "1", "for", "d", "in", "range", "(", "e", ".", "dim", "(", ")", ")", "]", ")", "*", "e", ")", "\n", "\n", "# Add step to parameter", "\n", "meta_parameter", "=", "meta_parameter", "-", "step", "\n", "\n", "meta_parameter_iterates", ".", "append", "(", "meta_parameter", ")", "\n", "\n", "\n", "", "if", "self", ".", "compute_losses", ":", "\n", "            ", "losses", ".", "append", "(", "self", ".", "_compute_loss", "(", "self", ".", "residual_module", "(", "meta_parameter", ",", "\n", "filter_dilation_factors", "=", "self", ".", "filter_dilation_factors", ",", "\n", "**", "kwargs", ")", ")", ")", "\n", "\n", "# Reset the grad enabled flag", "\n", "", "torch", ".", "set_grad_enabled", "(", "torch_grad_enabled", ")", "\n", "if", "not", "torch_grad_enabled", ":", "\n", "            ", "meta_parameter", ".", "detach_", "(", ")", "\n", "for", "w", "in", "meta_parameter_iterates", ":", "\n", "                ", "w", ".", "detach_", "(", ")", "\n", "", "for", "l", "in", "losses", ":", "\n", "                ", "l", ".", "detach_", "(", ")", "\n", "\n", "", "", "return", "meta_parameter", ",", "meta_parameter_iterates", ",", "losses", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.__init__": [[16, 37], ["torch.Module.__init__", "AR_seg_mask.ARnet_seg_mask.feature_extractor.parameters", "p.requires_grad_"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters"], ["def", "__init__", "(", "self", ",", "feature_extractor", ",", "neck_module", ",", "head_module", ",", "used_layers", ",", "\n", "extractor_grad", "=", "True", ",", "output_size", "=", "(", "256", ",", "256", ")", ")", ":", "\n", "        ", "\"\"\"\n        args:\n            feature_extractor - backbone feature extractor\n            bb_regressor - IoU prediction module\n            bb_regressor_layer - List containing the name of the layers from feature_extractor, which are input to\n                                    bb_regressor\n            extractor_grad - Bool indicating whether backbone feature extractor requires gradients\n        \"\"\"", "\n", "super", "(", "ARnet_seg_mask", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "feature_extractor", "=", "feature_extractor", "\n", "self", ".", "neck", "=", "neck_module", "\n", "self", ".", "refiner", "=", "head_module", "\n", "self", ".", "used_layers", "=", "used_layers", "\n", "self", ".", "output_size", "=", "output_size", "\n", "\n", "if", "not", "extractor_grad", ":", "\n", "            ", "for", "p", "in", "self", ".", "feature_extractor", ".", "parameters", "(", ")", ":", "\n", "                ", "p", ".", "requires_grad_", "(", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.forward": [[38, 46], ["AR_seg_mask.ARnet_seg_mask.forward_ref", "AR_seg_mask.ARnet_seg_mask.forward_test"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.forward_ref", "home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.forward_test"], ["", "", "", "def", "forward", "(", "self", ",", "train_imgs", ",", "test_imgs", ",", "train_bb", ",", "mode", "=", "'train'", ")", ":", "\n", "        ", "\"\"\" Forward pass\n        Note: If the training is done in sequence mode, that is, test_imgs.dim() == 5, then the batch dimension\n        corresponds to the first dimensions. test_imgs is thus of the form [sequence, batch, feature, row, col]\n        \"\"\"", "\n", "self", ".", "forward_ref", "(", "train_imgs", ",", "train_bb", ")", "\n", "pred_dict", "=", "self", ".", "forward_test", "(", "test_imgs", ",", "mode", ")", "\n", "return", "pred_dict", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.forward_ref": [[47, 61], ["AR_seg_mask.ARnet_seg_mask.extract_backbone_features", "AR_seg_mask.ARnet_seg_mask.neck.get_ref_kernel", "train_imgs.view", "train_bb.view", "train_imgs.dim", "AR_seg_mask.ARnet_seg_mask.values"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.extract_backbone_features", "home.repos.pwc.inspect_result.researchmm_Stark.neck.CorrNL.CorrNL.get_ref_kernel", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "forward_ref", "(", "self", ",", "train_imgs", ",", "train_bb", ")", ":", "\n", "        ", "\"\"\" Forward pass of reference branch.\n        size of train_imgs is (1,batch,3,H,W), train_bb is (1,batch,4)\"\"\"", "\n", "num_sequences", "=", "train_imgs", ".", "shape", "[", "-", "4", "]", "# batch", "\n", "num_train_images", "=", "train_imgs", ".", "shape", "[", "0", "]", "if", "train_imgs", ".", "dim", "(", ")", "==", "5", "else", "1", "# 1", "\n", "\n", "# Extract backbone features", "\n", "'''train_feat OrderedDict, key:'layer4' '''", "\n", "train_feat_dict", "=", "self", ".", "extract_backbone_features", "(", "train_imgs", ".", "view", "(", "-", "1", ",", "*", "train_imgs", ".", "shape", "[", "-", "3", ":", "]", ")", ")", "# \u8f93\u5165size\u662f(batch,3,256,256)", "\n", "\n", "train_feat_list", "=", "[", "feat", "for", "feat", "in", "train_feat_dict", ".", "values", "(", ")", "]", "#list,\u5176\u4e2d\u6bcf\u4e2a\u5143\u7d20\u5bf9\u5e94\u4e00\u5c42\u8f93\u51fa\u7684\u7279\u5f81(tensor)", "\n", "\n", "# get reference feature", "\n", "self", ".", "neck", ".", "get_ref_kernel", "(", "train_feat_list", ",", "train_bb", ".", "view", "(", "num_train_images", ",", "num_sequences", ",", "4", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.forward_test": [[63, 83], ["AR_seg_mask.ARnet_seg_mask.extract_backbone_features", "AR_seg_mask.ARnet_seg_mask.neck.fuse_feat", "test_imgs.view", "torch.sigmoid", "torch.sigmoid", "torch.sigmoid", "torch.sigmoid", "AR_seg_mask.ARnet_seg_mask.refiner", "torch.sigmoid", "torch.sigmoid", "torch.sigmoid", "torch.sigmoid", "ValueError", "AR_seg_mask.ARnet_seg_mask.refiner"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.extract_backbone_features", "home.repos.pwc.inspect_result.researchmm_Stark.neck.CorrNL.CorrNL.fuse_feat"], ["", "def", "forward_test", "(", "self", ",", "test_imgs", ",", "mode", "=", "'train'", ")", ":", "\n", "        ", "\"\"\" Forward pass of test branch. size of test_imgs is (1,batch,3,256,256)\"\"\"", "\n", "output", "=", "{", "}", "\n", "# Extract backbone features", "\n", "test_feat_dict", "=", "self", ".", "extract_backbone_features", "(", "test_imgs", ".", "view", "(", "-", "1", ",", "*", "test_imgs", ".", "shape", "[", "-", "3", ":", "]", ")", ",", "\n", "layers", "=", "[", "'layer1'", ",", "'layer2'", ",", "'layer3'", ",", "'layer4'", ",", "'layer5'", "]", ")", "# \u8f93\u5165size\u662f(batch,3,256,256)", "\n", "'''list,tensor'''", "\n", "# Save low-level feature list", "\n", "# Lfeat_list = [feat for name, feat in test_feat_dict.items() if name != 'layer3']", "\n", "\n", "# fuse feature from two branches", "\n", "fusion_feat", "=", "self", ".", "neck", ".", "fuse_feat", "(", "[", "test_feat_dict", "[", "'layer4'", "]", "]", ")", "\n", "# Obtain bbox prediction", "\n", "if", "mode", "==", "'train'", ":", "\n", "            ", "output", "[", "'mask'", "]", "=", "torch", ".", "sigmoid", "(", "self", ".", "refiner", "(", "fusion_feat", ",", "test_feat_dict", ",", "self", ".", "output_size", ")", ")", "\n", "", "elif", "mode", "==", "'mask'", ":", "\n", "            ", "output", "=", "torch", ".", "sigmoid", "(", "self", ".", "refiner", "(", "fusion_feat", ",", "test_feat_dict", ",", "self", ".", "output_size", ")", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "\"mode should be train or test\"", ")", "\n", "", "return", "output", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.extract_backbone_features": [[84, 88], ["AR_seg_mask.ARnet_seg_mask.feature_extractor"], "methods", ["None"], ["", "def", "extract_backbone_features", "(", "self", ",", "im", ",", "layers", "=", "None", ")", ":", "\n", "        ", "if", "layers", "is", "None", ":", "\n", "            ", "layers", "=", "self", ".", "used_layers", "\n", "", "return", "self", ".", "feature_extractor", "(", "im", ",", "layers", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask.extract_features": [[89, 91], ["AR_seg_mask.ARnet_seg_mask.feature_extractor"], "methods", ["None"], ["", "def", "extract_features", "(", "self", ",", "im", ",", "layers", ")", ":", "\n", "        ", "return", "self", ".", "feature_extractor", "(", "im", ",", "layers", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.AR_seg_mask.AR_seg_mask.ARnet_seg_mask_resnet50": [[94, 120], ["ltr.resnet50", "ltr.models.neck.CorrNL.CorrNL", "easydict.EasyDict", "easydict.EasyDict", "ltr.models.head.seg_network.SegNetwork", "AR_seg_mask.ARnet_seg_mask", "resnet_seg.resnet50.get_out_channels", "resnet_seg.resnet50.get_out_channels().items", "int", "int", "resnet_seg.resnet50.get_out_channels"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.resnet50", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.ResNet.get_out_channels", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.ResNet.get_out_channels"], ["", "", "@", "model_constructor", "\n", "def", "ARnet_seg_mask_resnet50", "(", "backbone_pretrained", "=", "True", ",", "used_layers", "=", "(", "'layer4'", ",", ")", ",", "pool_size", "=", "None", ")", ":", "\n", "# backbone", "\n", "    ", "backbone_net", "=", "resnet_seg", ".", "resnet50", "(", "pretrained", "=", "backbone_pretrained", ")", "\n", "# neck", "\n", "neck_net", "=", "CorrNL", ".", "CorrNL", "(", "pool_size", "=", "pool_size", ")", "\n", "# multiple heads", "\n", "'''create segnet'''", "\n", "in_channels", "=", "1024", "\n", "# disc_params = edict(layer=\"layer4\", in_channels=in_channels, c_channels=96, out_channels=64) # non-local feat (64 channels rather than 1)", "\n", "'''2020.4.22 change \"out_channels\" to pool_size * pool_size'''", "\n", "disc_params", "=", "edict", "(", "layer", "=", "\"layer4\"", ",", "in_channels", "=", "in_channels", ",", "c_channels", "=", "96", ",", "out_channels", "=", "pool_size", "*", "pool_size", ")", "# non-local feat (64 channels rather than 1)", "\n", "refnet_params", "=", "edict", "(", "\n", "layers", "=", "(", "\"layer5\"", ",", "\"layer4\"", ",", "\"layer3\"", ",", "\"layer2\"", ")", ",", "\n", "nchannels", "=", "64", ",", "use_batch_norm", "=", "True", ")", "\n", "disc_params", ".", "in_channels", "=", "backbone_net", ".", "get_out_channels", "(", ")", "[", "disc_params", ".", "layer", "]", "\n", "\n", "p", "=", "refnet_params", "\n", "refinement_layers_channels", "=", "{", "L", ":", "nch", "for", "L", ",", "nch", "in", "backbone_net", ".", "get_out_channels", "(", ")", ".", "items", "(", ")", "if", "L", "in", "p", ".", "layers", "}", "\n", "refiner", "=", "seg_network", ".", "SegNetwork", "(", "disc_params", ".", "out_channels", ",", "p", ".", "nchannels", ",", "refinement_layers_channels", ",", "p", ".", "use_batch_norm", ")", "\n", "'''create Alpha-Refine'''", "\n", "net", "=", "ARnet_seg_mask", "(", "feature_extractor", "=", "backbone_net", ",", "neck_module", "=", "neck_net", ",", "\n", "head_module", "=", "refiner", ",", "\n", "used_layers", "=", "used_layers", ",", "extractor_grad", "=", "True", ",", "\n", "output_size", "=", "(", "int", "(", "pool_size", "*", "2", "*", "16", ")", ",", "int", "(", "pool_size", "*", "2", "*", "16", ")", ")", ")", "\n", "return", "net", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.__init__": [[14, 34], ["torch.Module.__init__", "linear_filter.LinearFilter.feature_extractor.modules", "isinstance", "m.weight.data.normal_", "isinstance", "math.sqrt", "m.bias.data.zero_", "m.weight.data.fill_", "m.bias.data.zero_"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "filter_size", ",", "filter_initializer", ",", "filter_optimizer", "=", "None", ",", "feature_extractor", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "filter_size", "=", "filter_size", "\n", "\n", "# Modules", "\n", "self", ".", "filter_initializer", "=", "filter_initializer", "\n", "self", ".", "filter_optimizer", "=", "filter_optimizer", "\n", "self", ".", "feature_extractor", "=", "feature_extractor", "\n", "\n", "# Init weights", "\n", "for", "m", "in", "self", ".", "feature_extractor", ".", "modules", "(", ")", ":", "\n", "            ", "if", "isinstance", "(", "m", ",", "nn", ".", "Conv2d", ")", ":", "\n", "                ", "n", "=", "m", ".", "kernel_size", "[", "0", "]", "*", "m", ".", "kernel_size", "[", "1", "]", "*", "m", ".", "out_channels", "\n", "m", ".", "weight", ".", "data", ".", "normal_", "(", "0", ",", "math", ".", "sqrt", "(", "2.", "/", "n", ")", ")", "\n", "if", "m", ".", "bias", "is", "not", "None", ":", "\n", "                    ", "m", ".", "bias", ".", "data", ".", "zero_", "(", ")", "\n", "", "", "elif", "isinstance", "(", "m", ",", "nn", ".", "BatchNorm2d", ")", ":", "\n", "                ", "m", ".", "weight", ".", "data", ".", "fill_", "(", "1", ")", "\n", "m", ".", "bias", ".", "data", ".", "zero_", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.forward": [[35, 67], ["linear_filter.LinearFilter.extract_classification_feat", "linear_filter.LinearFilter.extract_classification_feat", "linear_filter.LinearFilter.get_filter", "train_bb.dim", "train_feat.reshape.reshape.dim", "train_feat.reshape.reshape.reshape", "test_feat.reshape.reshape.dim", "test_feat.reshape.reshape.reshape", "linear_filter.LinearFilter.classify"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.extract_classification_feat", "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.extract_classification_feat", "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.get_filter", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.classify"], ["", "", "", "def", "forward", "(", "self", ",", "train_feat", ",", "test_feat", ",", "train_bb", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "\"\"\"Learns a target classification filter based on the train samples and return the resulting classification\n        scores on the test samples.\n        The forward function is ONLY used for training. Call the individual functions during tracking.\n        args:\n            train_feat:  Backbone features for the train samples (4 or 5 dims).\n            test_feat:  Backbone features for the test samples (4 or 5 dims).\n            trian_bb:  Target boxes (x,y,w,h) for the train samples in image coordinates. Dims (images, sequences, 4).\n            *args, **kwargs:  These are passed to the optimizer module.\n        returns:\n            test_scores:  Classification scores on the test samples.\"\"\"", "\n", "\n", "assert", "train_bb", ".", "dim", "(", ")", "==", "3", "\n", "\n", "num_sequences", "=", "train_bb", ".", "shape", "[", "1", "]", "\n", "\n", "if", "train_feat", ".", "dim", "(", ")", "==", "5", ":", "\n", "            ", "train_feat", "=", "train_feat", ".", "reshape", "(", "-", "1", ",", "*", "train_feat", ".", "shape", "[", "-", "3", ":", "]", ")", "\n", "", "if", "test_feat", ".", "dim", "(", ")", "==", "5", ":", "\n", "            ", "test_feat", "=", "test_feat", ".", "reshape", "(", "-", "1", ",", "*", "test_feat", ".", "shape", "[", "-", "3", ":", "]", ")", "\n", "\n", "# Extract features", "\n", "", "train_feat", "=", "self", ".", "extract_classification_feat", "(", "train_feat", ",", "num_sequences", ")", "\n", "test_feat", "=", "self", ".", "extract_classification_feat", "(", "test_feat", ",", "num_sequences", ")", "\n", "\n", "# Train filter", "\n", "filter", ",", "filter_iter", ",", "losses", "=", "self", ".", "get_filter", "(", "train_feat", ",", "train_bb", ",", "*", "args", ",", "**", "kwargs", ")", "\n", "\n", "# Classify samples using all return filters", "\n", "test_scores", "=", "[", "self", ".", "classify", "(", "f", ",", "test_feat", ")", "for", "f", "in", "filter_iter", "]", "\n", "\n", "return", "test_scores", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.extract_classification_feat": [[68, 77], ["linear_filter.LinearFilter.feature_extractor", "linear_filter.LinearFilter.reshape", "linear_filter.LinearFilter.feature_extractor"], "methods", ["None"], ["", "def", "extract_classification_feat", "(", "self", ",", "feat", ",", "num_sequences", "=", "None", ")", ":", "\n", "        ", "\"\"\"Extract classification features based on the input backbone features.\"\"\"", "\n", "if", "self", ".", "feature_extractor", "is", "None", ":", "\n", "            ", "return", "feat", "\n", "", "if", "num_sequences", "is", "None", ":", "\n", "            ", "return", "self", ".", "feature_extractor", "(", "feat", ")", "\n", "\n", "", "output", "=", "self", ".", "feature_extractor", "(", "feat", ")", "\n", "return", "output", ".", "reshape", "(", "-", "1", ",", "num_sequences", ",", "*", "output", ".", "shape", "[", "-", "3", ":", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.classify": [[78, 84], ["ltr.apply_filter"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter"], ["", "def", "classify", "(", "self", ",", "weights", ",", "feat", ")", ":", "\n", "        ", "\"\"\"Run classifier (filter) on the features (feat).\"\"\"", "\n", "\n", "scores", "=", "filter_layer", ".", "apply_filter", "(", "feat", ",", "weights", ")", "\n", "\n", "return", "scores", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.get_filter": [[85, 106], ["linear_filter.LinearFilter.filter_initializer", "linear_filter.LinearFilter.filter_optimizer"], "methods", ["None"], ["", "def", "get_filter", "(", "self", ",", "feat", ",", "bb", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "        ", "\"\"\"Outputs the learned filter based on the input features (feat) and target boxes (bb) by running the\n        filter initializer and optimizer. Note that [] denotes an optional dimension.\n        args:\n            feat:  Input feature maps. Dims (images_in_sequence, [sequences], feat_dim, H, W).\n            bb:  Target bounding boxes (x, y, w, h) in the image coords. Dims (images_in_sequence, [sequences], 4).\n            *args, **kwargs:  These are passed to the optimizer module.\n        returns:\n            weights:  The final oprimized weights. Dims (sequences, feat_dim, wH, wW).\n            weight_iterates:  The weights computed in each iteration (including initial input and final output).\n            losses:  Train losses.\"\"\"", "\n", "\n", "weights", "=", "self", ".", "filter_initializer", "(", "feat", ",", "bb", ")", "\n", "\n", "if", "self", ".", "filter_optimizer", "is", "not", "None", ":", "\n", "            ", "weights", ",", "weights_iter", ",", "losses", "=", "self", ".", "filter_optimizer", "(", "weights", ",", "feat", "=", "feat", ",", "bb", "=", "bb", ",", "*", "args", ",", "**", "kwargs", ")", "\n", "", "else", ":", "\n", "            ", "weights_iter", "=", "[", "weights", "]", "\n", "losses", "=", "None", "\n", "\n", "", "return", "weights", ",", "weights_iter", ",", "losses", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.train_classifier": [[107, 119], ["linear_filter.LinearFilter.extract_classification_feat", "linear_filter.LinearFilter.get_filter", "backbone_feat.reshape.reshape.dim", "backbone_feat.reshape.reshape.reshape"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.extract_classification_feat", "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.get_filter", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "train_classifier", "(", "self", ",", "backbone_feat", ",", "bb", ")", ":", "\n", "        ", "num_sequences", "=", "bb", ".", "shape", "[", "1", "]", "\n", "\n", "if", "backbone_feat", ".", "dim", "(", ")", "==", "5", ":", "\n", "            ", "backbone_feat", "=", "backbone_feat", ".", "reshape", "(", "-", "1", ",", "*", "backbone_feat", ".", "shape", "[", "-", "3", ":", "]", ")", "\n", "\n", "# Extract features", "\n", "", "train_feat", "=", "self", ".", "extract_classification_feat", "(", "backbone_feat", ",", "num_sequences", ")", "\n", "\n", "# Get filters from each iteration", "\n", "final_filter", ",", "_", ",", "train_losses", "=", "self", ".", "get_filter", "(", "train_feat", ",", "bb", ")", "\n", "return", "final_filter", ",", "train_losses", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.track_frame": [[120, 132], ["linear_filter.LinearFilter.extract_classification_feat", "ltr.apply_filter", "backbone_feat.reshape.reshape.dim", "backbone_feat.reshape.reshape.reshape"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.linear_filter.LinearFilter.extract_classification_feat", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "track_frame", "(", "self", ",", "filter_weights", ",", "backbone_feat", ")", ":", "\n", "        ", "if", "backbone_feat", ".", "dim", "(", ")", "==", "5", ":", "\n", "            ", "num_sequences", "=", "backbone_feat", ".", "shape", "[", "1", "]", "\n", "backbone_feat", "=", "backbone_feat", ".", "reshape", "(", "-", "1", ",", "*", "backbone_feat", ".", "shape", "[", "-", "3", ":", "]", ")", "\n", "", "else", ":", "\n", "            ", "num_sequences", "=", "None", "\n", "\n", "", "test_feat", "=", "self", ".", "extract_classification_feat", "(", "backbone_feat", ",", "num_sequences", ")", "\n", "\n", "scores", "=", "filter_layer", ".", "apply_filter", "(", "test_feat", ",", "filter_weights", ")", "\n", "\n", "return", "scores", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.initializer.FilterPool.__init__": [[16, 20], ["torch.Module.__init__", "ltr.external.PreciseRoIPooling.pytorch.prroi_pool.PrRoIPool2D"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "filter_size", "=", "1", ",", "feature_stride", "=", "16", ",", "pool_square", "=", "False", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "prroi_pool", "=", "PrRoIPool2D", "(", "filter_size", ",", "filter_size", ",", "1", "/", "feature_stride", ")", "\n", "self", ".", "pool_square", "=", "pool_square", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.initializer.FilterPool.forward": [[21, 46], ["bb.reshape.reshape.reshape", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "bb.reshape.reshape.clone", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "initializer.FilterPool.prroi_pool", "pool_bb[].prod().sqrt", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "pool_bb[].prod", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to"], ["", "def", "forward", "(", "self", ",", "feat", ",", "bb", ")", ":", "\n", "        ", "\"\"\"Pool the regions in bb.\n        args:\n            feat:  Input feature maps. Dims (num_samples, feat_dim, H, W).\n            bb:  Target bounding boxes (x, y, w, h) in the image coords. Dims (num_samples, 4).\n        returns:\n            pooled_feat:  Pooled features. Dims (num_samples, feat_dim, wH, wW).\"\"\"", "\n", "\n", "# Add batch_index to rois", "\n", "bb", "=", "bb", ".", "reshape", "(", "-", "1", ",", "4", ")", "\n", "num_images_total", "=", "bb", ".", "shape", "[", "0", "]", "\n", "batch_index", "=", "torch", ".", "arange", "(", "num_images_total", ",", "dtype", "=", "torch", ".", "float32", ")", ".", "reshape", "(", "-", "1", ",", "1", ")", ".", "to", "(", "bb", ".", "device", ")", "\n", "\n", "# input bb is in format xywh, convert it to x0y0x1y1 format", "\n", "pool_bb", "=", "bb", ".", "clone", "(", ")", "\n", "\n", "if", "self", ".", "pool_square", ":", "\n", "            ", "bb_sz", "=", "pool_bb", "[", ":", ",", "2", ":", "4", "]", ".", "prod", "(", "dim", "=", "1", ",", "keepdim", "=", "True", ")", ".", "sqrt", "(", ")", "\n", "pool_bb", "[", ":", ",", ":", "2", "]", "+=", "pool_bb", "[", ":", ",", "2", ":", "]", "/", "2", "-", "bb_sz", "/", "2", "\n", "pool_bb", "[", ":", ",", "2", ":", "]", "=", "bb_sz", "\n", "\n", "", "pool_bb", "[", ":", ",", "2", ":", "4", "]", "=", "pool_bb", "[", ":", ",", "0", ":", "2", "]", "+", "pool_bb", "[", ":", ",", "2", ":", "4", "]", "\n", "roi1", "=", "torch", ".", "cat", "(", "(", "batch_index", ",", "pool_bb", ")", ",", "dim", "=", "1", ")", "\n", "\n", "return", "self", ".", "prroi_pool", "(", "feat", ",", "roi1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.initializer.FilterInitializer.__init__": [[60, 90], ["torch.Module.__init__", "initializer.FilterPool", "range", "range", "post_conv_layers.append", "torch.Sequential", "torch.Sequential", "torch.Sequential", "initializer.FilterInitializer.modules", "pre_conv_layers.append", "torch.Sequential", "torch.Sequential", "torch.Sequential", "post_conv_layers.append", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "isinstance", "ltr.models.layers.blocks.conv_block", "ltr.models.layers.blocks.conv_block", "m.weight.data.normal_", "isinstance", "math.sqrt", "m.bias.data.zero_", "m.weight.data.fill_", "m.bias.data.zero_"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.layers.blocks.conv_block", "home.repos.pwc.inspect_result.researchmm_Stark.layers.blocks.conv_block"], ["def", "__init__", "(", "self", ",", "filter_size", "=", "1", ",", "feature_dim", "=", "256", ",", "feature_stride", "=", "16", ",", "pool_square", "=", "False", ",", "filter_norm", "=", "True", ",", "\n", "num_filter_pre_convs", "=", "1", ",", "num_filter_post_convs", "=", "0", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "filter_pool", "=", "FilterPool", "(", "filter_size", "=", "filter_size", ",", "feature_stride", "=", "feature_stride", ",", "pool_square", "=", "pool_square", ")", "\n", "self", ".", "filter_norm", "=", "filter_norm", "\n", "\n", "# Make pre conv", "\n", "pre_conv_layers", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "num_filter_pre_convs", ")", ":", "\n", "            ", "pre_conv_layers", ".", "append", "(", "conv_block", "(", "feature_dim", ",", "feature_dim", ",", "kernel_size", "=", "3", ",", "padding", "=", "1", ")", ")", "\n", "", "self", ".", "filter_pre_layers", "=", "nn", ".", "Sequential", "(", "*", "pre_conv_layers", ")", "if", "pre_conv_layers", "else", "None", "\n", "\n", "# Make post conv", "\n", "post_conv_layers", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "num_filter_post_convs", ")", ":", "\n", "            ", "post_conv_layers", ".", "append", "(", "conv_block", "(", "feature_dim", ",", "feature_dim", ",", "kernel_size", "=", "1", ",", "padding", "=", "0", ")", ")", "\n", "", "post_conv_layers", ".", "append", "(", "nn", ".", "Conv2d", "(", "feature_dim", ",", "feature_dim", ",", "kernel_size", "=", "1", ",", "padding", "=", "0", ")", ")", "\n", "self", ".", "filter_post_layers", "=", "nn", ".", "Sequential", "(", "*", "post_conv_layers", ")", "\n", "\n", "# Init weights", "\n", "for", "m", "in", "self", ".", "modules", "(", ")", ":", "\n", "            ", "if", "isinstance", "(", "m", ",", "nn", ".", "Conv2d", ")", ":", "\n", "                ", "n", "=", "m", ".", "kernel_size", "[", "0", "]", "*", "m", ".", "kernel_size", "[", "1", "]", "*", "m", ".", "out_channels", "\n", "m", ".", "weight", ".", "data", ".", "normal_", "(", "0", ",", "math", ".", "sqrt", "(", "2.", "/", "n", ")", ")", "\n", "if", "m", ".", "bias", "is", "not", "None", ":", "\n", "                    ", "m", ".", "bias", ".", "data", ".", "zero_", "(", ")", "\n", "", "", "elif", "isinstance", "(", "m", ",", "nn", ".", "BatchNorm2d", ")", ":", "\n", "                ", "m", ".", "weight", ".", "data", ".", "fill_", "(", "1", ")", "\n", "m", ".", "bias", ".", "data", ".", "zero_", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.initializer.FilterInitializer.forward": [[92, 116], ["initializer.FilterInitializer.filter_pool", "initializer.FilterInitializer.filter_post_layers", "initializer.FilterInitializer.filter_pre_layers", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "bb.dim", "initializer.FilterInitializer.reshape", "torch.mean.reshape", "torch.mean.reshape", "torch.mean.reshape"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "", "", "def", "forward", "(", "self", ",", "feat", ",", "bb", ")", ":", "\n", "        ", "\"\"\"Runs the initializer module.\n        Note that [] denotes an optional dimension.\n        args:\n            feat:  Input feature maps. Dims (images_in_sequence, [sequences], feat_dim, H, W).\n            bb:  Target bounding boxes (x, y, w, h) in the image coords. Dims (images_in_sequence, [sequences], 4).\n        returns:\n            weights:  The output weights. Dims (sequences, feat_dim, wH, wW).\"\"\"", "\n", "\n", "num_images", "=", "bb", ".", "shape", "[", "0", "]", "if", "bb", ".", "dim", "(", ")", "==", "3", "else", "1", "\n", "\n", "if", "self", ".", "filter_pre_layers", "is", "not", "None", ":", "\n", "            ", "feat", "=", "self", ".", "filter_pre_layers", "(", "feat", ".", "reshape", "(", "-", "1", ",", "feat", ".", "shape", "[", "-", "3", "]", ",", "feat", ".", "shape", "[", "-", "2", "]", ",", "feat", ".", "shape", "[", "-", "1", "]", ")", ")", "\n", "\n", "", "feat_post", "=", "self", ".", "filter_pool", "(", "feat", ",", "bb", ")", "\n", "weights", "=", "self", ".", "filter_post_layers", "(", "feat_post", ")", "\n", "\n", "if", "num_images", ">", "1", ":", "\n", "            ", "weights", "=", "torch", ".", "mean", "(", "weights", ".", "reshape", "(", "num_images", ",", "-", "1", ",", "weights", ".", "shape", "[", "-", "3", "]", ",", "weights", ".", "shape", "[", "-", "2", "]", ",", "weights", ".", "shape", "[", "-", "1", "]", ")", ",", "dim", "=", "0", ")", "\n", "\n", "", "if", "self", ".", "filter_norm", ":", "\n", "            ", "weights", "=", "weights", "/", "(", "weights", ".", "shape", "[", "1", "]", "*", "weights", ".", "shape", "[", "2", "]", "*", "weights", ".", "shape", "[", "3", "]", ")", "\n", "\n", "", "return", "weights", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.initializer.FilterInitializerLinear.__init__": [[128, 149], ["torch.Module.__init__", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "initializer.FilterPool", "initializer.FilterInitializerLinear.modules", "isinstance", "isinstance", "m.weight.data.normal_", "m.bias.data.zero_", "m.weight.data.fill_", "m.bias.data.zero_", "math.sqrt", "m.weight.data.zero_"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "filter_size", "=", "1", ",", "feature_dim", "=", "256", ",", "feature_stride", "=", "16", ",", "pool_square", "=", "False", ",", "filter_norm", "=", "True", ",", "\n", "conv_ksz", "=", "3", ",", "init_weights", "=", "'default'", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "filter_conv", "=", "nn", ".", "Conv2d", "(", "feature_dim", ",", "feature_dim", ",", "kernel_size", "=", "conv_ksz", ",", "padding", "=", "conv_ksz", "//", "2", ")", "\n", "self", ".", "filter_pool", "=", "FilterPool", "(", "filter_size", "=", "filter_size", ",", "feature_stride", "=", "feature_stride", ",", "pool_square", "=", "pool_square", ")", "\n", "self", ".", "filter_norm", "=", "filter_norm", "\n", "\n", "# Init weights", "\n", "for", "m", "in", "self", ".", "modules", "(", ")", ":", "\n", "            ", "if", "isinstance", "(", "m", ",", "nn", ".", "Conv2d", ")", ":", "\n", "                ", "if", "init_weights", "==", "'default'", ":", "\n", "                    ", "n", "=", "m", ".", "kernel_size", "[", "0", "]", "*", "m", ".", "kernel_size", "[", "1", "]", "*", "m", ".", "out_channels", "\n", "m", ".", "weight", ".", "data", ".", "normal_", "(", "0", ",", "math", ".", "sqrt", "(", "2.", "/", "n", ")", ")", "\n", "", "elif", "init_weights", "==", "'zero'", ":", "\n", "                    ", "m", ".", "weight", ".", "data", ".", "zero_", "(", ")", "\n", "", "if", "m", ".", "bias", "is", "not", "None", ":", "\n", "                    ", "m", ".", "bias", ".", "data", ".", "zero_", "(", ")", "\n", "", "", "elif", "isinstance", "(", "m", ",", "nn", ".", "BatchNorm2d", ")", ":", "\n", "                ", "m", ".", "weight", ".", "data", ".", "fill_", "(", "1", ")", "\n", "m", ".", "bias", ".", "data", ".", "zero_", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.initializer.FilterInitializerLinear.forward": [[151, 174], ["initializer.FilterInitializerLinear.filter_conv", "initializer.FilterInitializerLinear.filter_pool", "initializer.FilterInitializerLinear.reshape", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean.reshape", "torch.mean.reshape", "torch.mean.reshape"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], ["", "", "", "def", "forward", "(", "self", ",", "feat", ",", "bb", ")", ":", "\n", "        ", "\"\"\"Runs the initializer module.\n        Note that [] denotes an optional dimension.\n        args:\n            feat:  Input feature maps. Dims (images_in_sequence, [sequences], feat_dim, H, W).\n            bb:  Target bounding boxes (x, y, w, h) in the image coords. Dims (images_in_sequence, [sequences], 4).\n        returns:\n            weights:  The output weights. Dims (sequences, feat_dim, wH, wW).\"\"\"", "\n", "\n", "num_images", "=", "feat", ".", "shape", "[", "0", "]", "\n", "\n", "feat", "=", "self", ".", "filter_conv", "(", "feat", ".", "reshape", "(", "-", "1", ",", "feat", ".", "shape", "[", "-", "3", "]", ",", "feat", ".", "shape", "[", "-", "2", "]", ",", "feat", ".", "shape", "[", "-", "1", "]", ")", ")", "\n", "\n", "weights", "=", "self", ".", "filter_pool", "(", "feat", ",", "bb", ")", "\n", "\n", "# If multiple input images, compute the initial filter as the average filter.", "\n", "if", "num_images", ">", "1", ":", "\n", "            ", "weights", "=", "torch", ".", "mean", "(", "weights", ".", "reshape", "(", "num_images", ",", "-", "1", ",", "weights", ".", "shape", "[", "-", "3", "]", ",", "weights", ".", "shape", "[", "-", "2", "]", ",", "weights", ".", "shape", "[", "-", "1", "]", ")", ",", "dim", "=", "0", ")", "\n", "\n", "", "if", "self", ".", "filter_norm", ":", "\n", "            ", "weights", "=", "weights", "/", "(", "weights", ".", "shape", "[", "1", "]", "*", "weights", ".", "shape", "[", "2", "]", "*", "weights", ".", "shape", "[", "3", "]", ")", "\n", "\n", "", "return", "weights", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.initializer.FilterInitializerZero.__init__": [[183, 187], ["torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "filter_size", "=", "1", ",", "feature_dim", "=", "256", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "filter_size", "=", "(", "feature_dim", ",", "filter_size", ",", "filter_size", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.initializer.FilterInitializerZero.forward": [[188, 200], ["feat.new_zeros", "feat.dim"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "forward", "(", "self", ",", "feat", ",", "bb", ")", ":", "\n", "        ", "\"\"\"Runs the initializer module.\n        Note that [] denotes an optional dimension.\n        args:\n            feat:  Input feature maps. Dims (images_in_sequence, [sequences], feat_dim, H, W).\n            bb:  Target bounding boxes (x, y, w, h) in the image coords. Dims (images_in_sequence, [sequences], 4).\n        returns:\n            weights:  The output weights. Dims (sequences, feat_dim, wH, wW).\"\"\"", "\n", "\n", "num_sequences", "=", "feat", ".", "shape", "[", "1", "]", "if", "feat", ".", "dim", "(", ")", "==", "5", "else", "1", "\n", "\n", "return", "feat", ".", "new_zeros", "(", "num_sequences", ",", "self", ".", "filter_size", "[", "0", "]", ",", "self", ".", "filter_size", "[", "1", "]", ",", "self", ".", "filter_size", "[", "2", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.initializer.FilterInitializerSiamese.__init__": [[210, 226], ["torch.Module.__init__", "initializer.FilterPool", "initializer.FilterInitializerSiamese.modules", "isinstance", "m.weight.data.normal_", "isinstance", "math.sqrt", "m.bias.data.zero_", "m.weight.data.fill_", "m.bias.data.zero_"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "filter_size", "=", "1", ",", "feature_stride", "=", "16", ",", "pool_square", "=", "False", ",", "filter_norm", "=", "True", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "filter_pool", "=", "FilterPool", "(", "filter_size", "=", "filter_size", ",", "feature_stride", "=", "feature_stride", ",", "pool_square", "=", "pool_square", ")", "\n", "self", ".", "filter_norm", "=", "filter_norm", "\n", "\n", "# Init weights", "\n", "for", "m", "in", "self", ".", "modules", "(", ")", ":", "\n", "            ", "if", "isinstance", "(", "m", ",", "nn", ".", "Conv2d", ")", ":", "\n", "                ", "n", "=", "m", ".", "kernel_size", "[", "0", "]", "*", "m", ".", "kernel_size", "[", "1", "]", "*", "m", ".", "out_channels", "\n", "m", ".", "weight", ".", "data", ".", "normal_", "(", "0", ",", "math", ".", "sqrt", "(", "2.", "/", "n", ")", ")", "\n", "if", "m", ".", "bias", "is", "not", "None", ":", "\n", "                    ", "m", ".", "bias", ".", "data", ".", "zero_", "(", ")", "\n", "", "", "elif", "isinstance", "(", "m", ",", "nn", ".", "BatchNorm2d", ")", ":", "\n", "                ", "m", ".", "weight", ".", "data", ".", "fill_", "(", "1", ")", "\n", "m", ".", "bias", ".", "data", ".", "zero_", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.initializer.FilterInitializerSiamese.forward": [[228, 249], ["feat.reshape.reshape.reshape", "initializer.FilterInitializerSiamese.filter_pool", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.mean.reshape", "torch.mean.reshape", "torch.mean.reshape"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], ["", "", "", "def", "forward", "(", "self", ",", "feat", ",", "bb", ")", ":", "\n", "        ", "\"\"\"Runs the initializer module.\n        Note that [] denotes an optional dimension.\n        args:\n            feat:  Input feature maps. Dims (images_in_sequence, [sequences], feat_dim, H, W).\n            bb:  Target bounding boxes (x, y, w, h) in the image coords. Dims (images_in_sequence, [sequences], 4).\n        returns:\n            weights:  The output weights. Dims (sequences, feat_dim, wH, wW).\"\"\"", "\n", "\n", "num_images", "=", "feat", ".", "shape", "[", "0", "]", "\n", "\n", "feat", "=", "feat", ".", "reshape", "(", "-", "1", ",", "feat", ".", "shape", "[", "-", "3", "]", ",", "feat", ".", "shape", "[", "-", "2", "]", ",", "feat", ".", "shape", "[", "-", "1", "]", ")", "\n", "weights", "=", "self", ".", "filter_pool", "(", "feat", ",", "bb", ")", "\n", "\n", "if", "num_images", ">", "1", ":", "\n", "            ", "weights", "=", "torch", ".", "mean", "(", "weights", ".", "reshape", "(", "num_images", ",", "-", "1", ",", "weights", ".", "shape", "[", "-", "3", "]", ",", "weights", ".", "shape", "[", "-", "2", "]", ",", "weights", ".", "shape", "[", "-", "1", "]", ")", ",", "dim", "=", "0", ")", "\n", "\n", "", "if", "self", ".", "filter_norm", ":", "\n", "            ", "weights", "=", "weights", "/", "(", "weights", ".", "shape", "[", "1", "]", "*", "weights", ".", "shape", "[", "2", "]", "*", "weights", ".", "shape", "[", "3", "]", ")", "\n", "\n", "", "return", "weights", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.optimizer.DiMPSteepestDescentGN.__init__": [[31, 83], ["float", "torch.Module.__init__", "torch.Parameter", "torch.Parameter", "torch.Parameter", "torch.Parameter", "torch.Parameter", "torch.Parameter", "ltr.models.layers.distance.DistanceMap", "ltr.models.layers.distance.DistanceMap", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "optimizer.DiMPSteepestDescentGN.spatial_weight_predictor.weight.data.fill_", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp.min", "torch.exp.min", "torch.exp.min", "torch.Conv2d", "torch.Conv2d", "torch.Conv2d", "mask_layers.append", "ltr.BentIdentPar", "ltr.BentIdentPar", "ltr.BentIdentParDeriv", "ltr.BentIdentParDeriv", "math.log", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.Sigmoid", "torch.Sigmoid", "torch.Sigmoid", "ValueError", "torch.tanh", "torch.tanh", "torch.tanh", "torch.tanh", "torch.tanh", "torch.tanh", "torch.tanh", "torch.tanh", "torch.tanh", "ltr.LeakyReluPar", "ltr.LeakyReluPar", "ltr.LeakyReluParDeriv", "ltr.LeakyReluParDeriv", "ValueError", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "num_iter", "=", "1", ",", "feat_stride", "=", "16", ",", "init_step_length", "=", "1.0", ",", "\n", "init_filter_reg", "=", "1e-2", ",", "init_gauss_sigma", "=", "1.0", ",", "num_dist_bins", "=", "5", ",", "bin_displacement", "=", "1.0", ",", "mask_init_factor", "=", "4.0", ",", "\n", "score_act", "=", "'relu'", ",", "act_param", "=", "None", ",", "min_filter_reg", "=", "1e-3", ",", "mask_act", "=", "'sigmoid'", ",", "\n", "detach_length", "=", "float", "(", "'Inf'", ")", ",", "alpha_eps", "=", "0", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "num_iter", "=", "num_iter", "\n", "self", ".", "feat_stride", "=", "feat_stride", "\n", "self", ".", "log_step_length", "=", "nn", ".", "Parameter", "(", "math", ".", "log", "(", "init_step_length", ")", "*", "torch", ".", "ones", "(", "1", ")", ")", "\n", "self", ".", "filter_reg", "=", "nn", ".", "Parameter", "(", "init_filter_reg", "*", "torch", ".", "ones", "(", "1", ")", ")", "\n", "self", ".", "distance_map", "=", "DistanceMap", "(", "num_dist_bins", ",", "bin_displacement", ")", "\n", "self", ".", "min_filter_reg", "=", "min_filter_reg", "\n", "self", ".", "detach_length", "=", "detach_length", "\n", "self", ".", "alpha_eps", "=", "alpha_eps", "\n", "\n", "# Distance coordinates", "\n", "d", "=", "torch", ".", "arange", "(", "num_dist_bins", ",", "dtype", "=", "torch", ".", "float32", ")", ".", "reshape", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "*", "bin_displacement", "\n", "if", "init_gauss_sigma", "==", "0", ":", "\n", "            ", "init_gauss", "=", "torch", ".", "zeros_like", "(", "d", ")", "\n", "init_gauss", "[", "0", ",", "0", ",", "0", ",", "0", "]", "=", "1", "\n", "", "else", ":", "\n", "            ", "init_gauss", "=", "torch", ".", "exp", "(", "-", "1", "/", "2", "*", "(", "d", "/", "init_gauss_sigma", ")", "**", "2", ")", "\n", "\n", "# Module that predicts the target label function (y in the paper)", "\n", "", "self", ".", "label_map_predictor", "=", "nn", ".", "Conv2d", "(", "num_dist_bins", ",", "1", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "label_map_predictor", ".", "weight", ".", "data", "=", "init_gauss", "-", "init_gauss", ".", "min", "(", ")", "\n", "\n", "# Module that predicts the target mask (m in the paper)", "\n", "mask_layers", "=", "[", "nn", ".", "Conv2d", "(", "num_dist_bins", ",", "1", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", "]", "\n", "if", "mask_act", "==", "'sigmoid'", ":", "\n", "            ", "mask_layers", ".", "append", "(", "nn", ".", "Sigmoid", "(", ")", ")", "\n", "init_bias", "=", "0.0", "\n", "", "elif", "mask_act", "==", "'linear'", ":", "\n", "            ", "init_bias", "=", "0.5", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'Unknown activation'", ")", "\n", "", "self", ".", "target_mask_predictor", "=", "nn", ".", "Sequential", "(", "*", "mask_layers", ")", "\n", "self", ".", "target_mask_predictor", "[", "0", "]", ".", "weight", ".", "data", "=", "mask_init_factor", "*", "torch", ".", "tanh", "(", "2.0", "-", "d", ")", "+", "init_bias", "\n", "\n", "# Module that predicts the residual weights (v in the paper)", "\n", "self", ".", "spatial_weight_predictor", "=", "nn", ".", "Conv2d", "(", "num_dist_bins", ",", "1", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "spatial_weight_predictor", ".", "weight", ".", "data", ".", "fill_", "(", "1.0", ")", "\n", "\n", "# The score actvation and its derivative", "\n", "if", "score_act", "==", "'bentpar'", ":", "\n", "            ", "self", ".", "score_activation", "=", "activation", ".", "BentIdentPar", "(", "act_param", ")", "\n", "self", ".", "score_activation_deriv", "=", "activation", ".", "BentIdentParDeriv", "(", "act_param", ")", "\n", "", "elif", "score_act", "==", "'relu'", ":", "\n", "            ", "self", ".", "score_activation", "=", "activation", ".", "LeakyReluPar", "(", ")", "\n", "self", ".", "score_activation_deriv", "=", "activation", ".", "LeakyReluParDeriv", "(", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'Unknown score activation'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.optimizer.DiMPSteepestDescentGN.forward": [[85, 171], ["torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "optimizer.DiMPSteepestDescentGN.distance_map", "optimizer.DiMPSteepestDescentGN.label_map_predictor().reshape", "optimizer.DiMPSteepestDescentGN.target_mask_predictor().reshape", "optimizer.DiMPSteepestDescentGN.spatial_weight_predictor().reshape", "range", "isinstance", "ltr.apply_filter", "ltr.apply_filter", "optimizer.DiMPSteepestDescentGN.score_activation", "optimizer.DiMPSteepestDescentGN.score_activation_deriv", "ltr.apply_filter", "ltr.apply_filter", "weight_iterates.append", "ltr.apply_filter", "ltr.apply_filter", "optimizer.DiMPSteepestDescentGN.score_activation", "losses.append", "feat.dim", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "optimizer.DiMPSteepestDescentGN.label_map_predictor", "optimizer.DiMPSteepestDescentGN.target_mask_predictor", "optimizer.DiMPSteepestDescentGN.spatial_weight_predictor", "math.sqrt", "weights.detach.detach.detach", "losses.append", "ltr.apply_feat_transpose", "ltr.apply_feat_transpose", "sample_weight.sqrt().reshape", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "alpha.reshape", "sample_weight.sqrt"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_feat_transpose", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_feat_transpose"], ["", "", "def", "forward", "(", "self", ",", "weights", ",", "feat", ",", "bb", ",", "sample_weight", "=", "None", ",", "num_iter", "=", "None", ",", "compute_losses", "=", "True", ")", ":", "\n", "        ", "\"\"\"Runs the optimizer module.\n        Note that [] denotes an optional dimension.\n        args:\n            weights:  Initial weights. Dims (sequences, feat_dim, wH, wW).\n            feat:  Input feature maps. Dims (images_in_sequence, [sequences], feat_dim, H, W).\n            bb:  Target bounding boxes (x, y, w, h) in the image coords. Dims (images_in_sequence, [sequences], 4).\n            sample_weight:  Optional weight for each sample. Dims: (images_in_sequence, [sequences]).\n            num_iter:  Number of iterations to run.\n            compute_losses:  Whether to compute the (train) loss in each iteration.\n        returns:\n            weights:  The final oprimized weights.\n            weight_iterates:  The weights computed in each iteration (including initial input and final output).\n            losses:  Train losses.\"\"\"", "\n", "\n", "# Sizes", "\n", "num_iter", "=", "self", ".", "num_iter", "if", "num_iter", "is", "None", "else", "num_iter", "\n", "num_images", "=", "feat", ".", "shape", "[", "0", "]", "\n", "num_sequences", "=", "feat", ".", "shape", "[", "1", "]", "if", "feat", ".", "dim", "(", ")", "==", "5", "else", "1", "\n", "filter_sz", "=", "(", "weights", ".", "shape", "[", "-", "2", "]", ",", "weights", ".", "shape", "[", "-", "1", "]", ")", "\n", "output_sz", "=", "(", "feat", ".", "shape", "[", "-", "2", "]", "+", "(", "weights", ".", "shape", "[", "-", "2", "]", "+", "1", ")", "%", "2", ",", "feat", ".", "shape", "[", "-", "1", "]", "+", "(", "weights", ".", "shape", "[", "-", "1", "]", "+", "1", ")", "%", "2", ")", "\n", "\n", "# Get learnable scalars", "\n", "step_length_factor", "=", "torch", ".", "exp", "(", "self", ".", "log_step_length", ")", "\n", "reg_weight", "=", "(", "self", ".", "filter_reg", "*", "self", ".", "filter_reg", ")", ".", "clamp", "(", "min", "=", "self", ".", "min_filter_reg", "**", "2", ")", "\n", "\n", "# Compute distance map", "\n", "dmap_offset", "=", "(", "torch", ".", "Tensor", "(", "filter_sz", ")", ".", "to", "(", "bb", ".", "device", ")", "%", "2", ")", "/", "2.0", "\n", "center", "=", "(", "(", "bb", "[", "...", ",", ":", "2", "]", "+", "bb", "[", "...", ",", "2", ":", "]", "/", "2", ")", "/", "self", ".", "feat_stride", ")", ".", "reshape", "(", "-", "1", ",", "2", ")", ".", "flip", "(", "(", "1", ",", ")", ")", "-", "dmap_offset", "\n", "dist_map", "=", "self", ".", "distance_map", "(", "center", ",", "output_sz", ")", "\n", "\n", "# Compute label map masks and weight", "\n", "label_map", "=", "self", ".", "label_map_predictor", "(", "dist_map", ")", ".", "reshape", "(", "num_images", ",", "num_sequences", ",", "*", "dist_map", ".", "shape", "[", "-", "2", ":", "]", ")", "\n", "target_mask", "=", "self", ".", "target_mask_predictor", "(", "dist_map", ")", ".", "reshape", "(", "num_images", ",", "num_sequences", ",", "*", "dist_map", ".", "shape", "[", "-", "2", ":", "]", ")", "\n", "spatial_weight", "=", "self", ".", "spatial_weight_predictor", "(", "dist_map", ")", ".", "reshape", "(", "num_images", ",", "num_sequences", ",", "*", "dist_map", ".", "shape", "[", "-", "2", ":", "]", ")", "\n", "\n", "# Get total sample weights", "\n", "if", "sample_weight", "is", "None", ":", "\n", "            ", "sample_weight", "=", "math", ".", "sqrt", "(", "1.0", "/", "num_images", ")", "*", "spatial_weight", "\n", "", "elif", "isinstance", "(", "sample_weight", ",", "torch", ".", "Tensor", ")", ":", "\n", "            ", "sample_weight", "=", "sample_weight", ".", "sqrt", "(", ")", ".", "reshape", "(", "num_images", ",", "num_sequences", ",", "1", ",", "1", ")", "*", "spatial_weight", "\n", "\n", "", "backprop_through_learning", "=", "(", "self", ".", "detach_length", ">", "0", ")", "\n", "\n", "weight_iterates", "=", "[", "weights", "]", "\n", "losses", "=", "[", "]", "\n", "\n", "for", "i", "in", "range", "(", "num_iter", ")", ":", "\n", "            ", "if", "not", "backprop_through_learning", "or", "(", "i", ">", "0", "and", "i", "%", "self", ".", "detach_length", "==", "0", ")", ":", "\n", "                ", "weights", "=", "weights", ".", "detach", "(", ")", "\n", "\n", "# Compute residuals", "\n", "", "scores", "=", "filter_layer", ".", "apply_filter", "(", "feat", ",", "weights", ")", "\n", "scores_act", "=", "self", ".", "score_activation", "(", "scores", ",", "target_mask", ")", "\n", "score_mask", "=", "self", ".", "score_activation_deriv", "(", "scores", ",", "target_mask", ")", "\n", "residuals", "=", "sample_weight", "*", "(", "scores_act", "-", "label_map", ")", "\n", "\n", "if", "compute_losses", ":", "\n", "                ", "losses", ".", "append", "(", "(", "(", "residuals", "**", "2", ")", ".", "sum", "(", ")", "+", "reg_weight", "*", "(", "weights", "**", "2", ")", ".", "sum", "(", ")", ")", "/", "num_sequences", ")", "\n", "\n", "# Compute gradient", "\n", "", "residuals_mapped", "=", "score_mask", "*", "(", "sample_weight", "*", "residuals", ")", "\n", "weights_grad", "=", "filter_layer", ".", "apply_feat_transpose", "(", "feat", ",", "residuals_mapped", ",", "filter_sz", ",", "training", "=", "self", ".", "training", ")", "+", "reg_weight", "*", "weights", "\n", "\n", "# Map the gradient with the Jacobian", "\n", "scores_grad", "=", "filter_layer", ".", "apply_filter", "(", "feat", ",", "weights_grad", ")", "\n", "scores_grad", "=", "sample_weight", "*", "(", "score_mask", "*", "scores_grad", ")", "\n", "\n", "# Compute optimal step length", "\n", "alpha_num", "=", "(", "weights_grad", "*", "weights_grad", ")", ".", "sum", "(", "dim", "=", "(", "1", ",", "2", ",", "3", ")", ")", "\n", "alpha_den", "=", "(", "(", "scores_grad", "*", "scores_grad", ")", ".", "reshape", "(", "num_images", ",", "num_sequences", ",", "-", "1", ")", ".", "sum", "(", "dim", "=", "(", "0", ",", "2", ")", ")", "+", "(", "reg_weight", "+", "self", ".", "alpha_eps", ")", "*", "alpha_num", ")", ".", "clamp", "(", "1e-8", ")", "\n", "alpha", "=", "alpha_num", "/", "alpha_den", "\n", "\n", "# Update filter", "\n", "weights", "=", "weights", "-", "(", "step_length_factor", "*", "alpha", ".", "reshape", "(", "-", "1", ",", "1", ",", "1", ",", "1", ")", ")", "*", "weights_grad", "\n", "\n", "# Add the weight iterate", "\n", "weight_iterates", ".", "append", "(", "weights", ")", "\n", "\n", "", "if", "compute_losses", ":", "\n", "            ", "scores", "=", "filter_layer", ".", "apply_filter", "(", "feat", ",", "weights", ")", "\n", "scores", "=", "self", ".", "score_activation", "(", "scores", ",", "target_mask", ")", "\n", "losses", ".", "append", "(", "(", "(", "(", "sample_weight", "*", "(", "scores", "-", "label_map", ")", ")", "**", "2", ")", ".", "sum", "(", ")", "+", "reg_weight", "*", "(", "weights", "**", "2", ")", ".", "sum", "(", ")", ")", "/", "num_sequences", ")", "\n", "\n", "", "return", "weights", ",", "weight_iterates", ",", "losses", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.optimizer.DiMPL2SteepestDescentGN.__init__": [[187, 200], ["float", "torch.Module.__init__", "torch.Parameter", "torch.Parameter", "torch.Parameter", "torch.Parameter", "torch.Parameter", "torch.Parameter", "math.log", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "num_iter", "=", "1", ",", "feat_stride", "=", "16", ",", "init_step_length", "=", "1.0", ",", "gauss_sigma", "=", "1.0", ",", "hinge_threshold", "=", "-", "999", ",", "\n", "init_filter_reg", "=", "1e-2", ",", "min_filter_reg", "=", "1e-3", ",", "detach_length", "=", "float", "(", "'Inf'", ")", ",", "alpha_eps", "=", "0.0", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "num_iter", "=", "num_iter", "\n", "self", ".", "feat_stride", "=", "feat_stride", "\n", "self", ".", "log_step_length", "=", "nn", ".", "Parameter", "(", "math", ".", "log", "(", "init_step_length", ")", "*", "torch", ".", "ones", "(", "1", ")", ")", "\n", "self", ".", "filter_reg", "=", "nn", ".", "Parameter", "(", "init_filter_reg", "*", "torch", ".", "ones", "(", "1", ")", ")", "\n", "self", ".", "min_filter_reg", "=", "min_filter_reg", "\n", "self", ".", "detach_length", "=", "detach_length", "\n", "self", ".", "hinge_threshold", "=", "hinge_threshold", "\n", "self", ".", "gauss_sigma", "=", "gauss_sigma", "\n", "self", ".", "alpha_eps", "=", "alpha_eps", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.optimizer.DiMPL2SteepestDescentGN.get_label": [[201, 209], ["center.reshape.reshape.reshape", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "center[].reshape", "center[].reshape"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to"], ["", "def", "get_label", "(", "self", ",", "center", ",", "output_sz", ")", ":", "\n", "        ", "center", "=", "center", ".", "reshape", "(", "center", ".", "shape", "[", "0", "]", ",", "-", "1", ",", "center", ".", "shape", "[", "-", "1", "]", ")", "\n", "k0", "=", "torch", ".", "arange", "(", "output_sz", "[", "0", "]", ",", "dtype", "=", "torch", ".", "float32", ")", ".", "reshape", "(", "1", ",", "1", ",", "-", "1", ",", "1", ")", ".", "to", "(", "center", ".", "device", ")", "\n", "k1", "=", "torch", ".", "arange", "(", "output_sz", "[", "1", "]", ",", "dtype", "=", "torch", ".", "float32", ")", ".", "reshape", "(", "1", ",", "1", ",", "1", ",", "-", "1", ")", ".", "to", "(", "center", ".", "device", ")", "\n", "g0", "=", "torch", ".", "exp", "(", "-", "1.0", "/", "(", "2", "*", "self", ".", "gauss_sigma", "**", "2", ")", "*", "(", "k0", "-", "center", "[", ":", ",", ":", ",", "0", "]", ".", "reshape", "(", "*", "center", ".", "shape", "[", ":", "2", "]", ",", "1", ",", "1", ")", ")", "**", "2", ")", "\n", "g1", "=", "torch", ".", "exp", "(", "-", "1.0", "/", "(", "2", "*", "self", ".", "gauss_sigma", "**", "2", ")", "*", "(", "k1", "-", "center", "[", ":", ",", ":", ",", "1", "]", ".", "reshape", "(", "*", "center", ".", "shape", "[", ":", "2", "]", ",", "1", ",", "1", ")", ")", "**", "2", ")", "\n", "gauss", "=", "g0", "*", "g1", "\n", "return", "gauss", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.optimizer.DiMPL2SteepestDescentGN.forward": [[211, 292], ["torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "optimizer.DiMPL2SteepestDescentGN.get_label", "range", "math.sqrt", "isinstance", "ltr.apply_filter", "ltr.apply_filter", "ltr.apply_filter", "ltr.apply_filter", "weight_iterates.append", "ltr.apply_filter", "ltr.apply_filter", "losses.append", "feat.dim", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "sample_weight.sqrt().reshape.sqrt().reshape.sqrt().reshape", "weights.detach.detach.detach", "losses.append", "ltr.apply_feat_transpose", "ltr.apply_feat_transpose", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.relu", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "torch.Tensor", "sample_weight.sqrt().reshape.sqrt().reshape.sqrt", "alpha.reshape", "ltr.apply_filter.detach"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.optimizer.DiMPL2SteepestDescentGN.get_label", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_feat_transpose", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_feat_transpose", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu"], ["", "def", "forward", "(", "self", ",", "weights", ",", "feat", ",", "bb", ",", "sample_weight", "=", "None", ",", "num_iter", "=", "None", ",", "compute_losses", "=", "True", ")", ":", "\n", "        ", "\"\"\"Runs the optimizer module.\n        Note that [] denotes an optional dimension.\n        args:\n            weights:  Initial weights. Dims (sequences, feat_dim, wH, wW).\n            feat:  Input feature maps. Dims (images_in_sequence, [sequences], feat_dim, H, W).\n            bb:  Target bounding boxes (x, y, w, h) in the image coords. Dims (images_in_sequence, [sequences], 4).\n            sample_weight:  Optional weight for each sample. Dims: (images_in_sequence, [sequences]).\n            num_iter:  Number of iterations to run.\n            compute_losses:  Whether to compute the (train) loss in each iteration.\n        returns:\n            weights:  The final oprimized weights.\n            weight_iterates:  The weights computed in each iteration (including initial input and final output).\n            losses:  Train losses.\"\"\"", "\n", "\n", "# Sizes", "\n", "num_iter", "=", "self", ".", "num_iter", "if", "num_iter", "is", "None", "else", "num_iter", "\n", "num_images", "=", "feat", ".", "shape", "[", "0", "]", "\n", "num_sequences", "=", "feat", ".", "shape", "[", "1", "]", "if", "feat", ".", "dim", "(", ")", "==", "5", "else", "1", "\n", "filter_sz", "=", "(", "weights", ".", "shape", "[", "-", "2", "]", ",", "weights", ".", "shape", "[", "-", "1", "]", ")", "\n", "output_sz", "=", "(", "feat", ".", "shape", "[", "-", "2", "]", "+", "(", "weights", ".", "shape", "[", "-", "2", "]", "+", "1", ")", "%", "2", ",", "feat", ".", "shape", "[", "-", "1", "]", "+", "(", "weights", ".", "shape", "[", "-", "1", "]", "+", "1", ")", "%", "2", ")", "\n", "\n", "# Get learnable scalars", "\n", "step_length_factor", "=", "torch", ".", "exp", "(", "self", ".", "log_step_length", ")", "\n", "reg_weight", "=", "(", "self", ".", "filter_reg", "*", "self", ".", "filter_reg", ")", ".", "clamp", "(", "min", "=", "self", ".", "min_filter_reg", "**", "2", ")", "\n", "\n", "# Compute distance map", "\n", "dmap_offset", "=", "(", "torch", ".", "Tensor", "(", "filter_sz", ")", ".", "to", "(", "bb", ".", "device", ")", "%", "2", ")", "/", "2.0", "\n", "center", "=", "(", "(", "bb", "[", "...", ",", ":", "2", "]", "+", "bb", "[", "...", ",", "2", ":", "]", "/", "2", ")", "/", "self", ".", "feat_stride", ")", ".", "flip", "(", "(", "-", "1", ",", ")", ")", "-", "dmap_offset", "\n", "label_map", "=", "self", ".", "get_label", "(", "center", ",", "output_sz", ")", "\n", "target_mask", "=", "(", "label_map", ">", "self", ".", "hinge_threshold", ")", ".", "float", "(", ")", "\n", "label_map", "*=", "target_mask", "\n", "\n", "# Get total sample weights", "\n", "if", "sample_weight", "is", "None", ":", "\n", "            ", "sample_weight", "=", "math", ".", "sqrt", "(", "1.0", "/", "num_images", ")", "\n", "", "elif", "isinstance", "(", "sample_weight", ",", "torch", ".", "Tensor", ")", ":", "\n", "            ", "sample_weight", "=", "sample_weight", ".", "sqrt", "(", ")", ".", "reshape", "(", "num_images", ",", "num_sequences", ",", "1", ",", "1", ")", "\n", "\n", "", "weight_iterates", "=", "[", "weights", "]", "\n", "losses", "=", "[", "]", "\n", "\n", "for", "i", "in", "range", "(", "num_iter", ")", ":", "\n", "            ", "if", "i", ">", "0", "and", "i", "%", "self", ".", "detach_length", "==", "0", ":", "\n", "                ", "weights", "=", "weights", ".", "detach", "(", ")", "\n", "\n", "# Compute residuals", "\n", "", "scores", "=", "filter_layer", ".", "apply_filter", "(", "feat", ",", "weights", ")", "\n", "scores_act", "=", "target_mask", "*", "scores", "+", "(", "1.0", "-", "target_mask", ")", "*", "F", ".", "relu", "(", "scores", ")", "\n", "score_mask", "=", "target_mask", "+", "(", "1.0", "-", "target_mask", ")", "*", "(", "scores", ".", "detach", "(", ")", ">", "0", ")", ".", "float", "(", ")", "\n", "residuals", "=", "sample_weight", "*", "(", "scores_act", "-", "label_map", ")", "\n", "\n", "if", "compute_losses", ":", "\n", "                ", "losses", ".", "append", "(", "(", "(", "residuals", "**", "2", ")", ".", "sum", "(", ")", "+", "reg_weight", "*", "(", "weights", "**", "2", ")", ".", "sum", "(", ")", ")", "/", "num_sequences", ")", "\n", "\n", "# Compute gradient", "\n", "", "residuals_mapped", "=", "score_mask", "*", "(", "sample_weight", "*", "residuals", ")", "\n", "weights_grad", "=", "filter_layer", ".", "apply_feat_transpose", "(", "feat", ",", "residuals_mapped", ",", "filter_sz", ",", "training", "=", "self", ".", "training", ")", "+", "reg_weight", "*", "weights", "\n", "\n", "# Map the gradient with the Jacobian", "\n", "scores_grad", "=", "filter_layer", ".", "apply_filter", "(", "feat", ",", "weights_grad", ")", "\n", "scores_grad", "=", "sample_weight", "*", "(", "score_mask", "*", "scores_grad", ")", "\n", "\n", "# Compute optimal step length", "\n", "alpha_num", "=", "(", "weights_grad", "*", "weights_grad", ")", ".", "sum", "(", "dim", "=", "(", "1", ",", "2", ",", "3", ")", ")", "\n", "alpha_den", "=", "(", "(", "scores_grad", "*", "scores_grad", ")", ".", "reshape", "(", "num_images", ",", "num_sequences", ",", "-", "1", ")", ".", "sum", "(", "dim", "=", "(", "0", ",", "2", ")", ")", "+", "(", "reg_weight", "+", "self", ".", "alpha_eps", ")", "*", "alpha_num", ")", ".", "clamp", "(", "1e-8", ")", "\n", "alpha", "=", "alpha_num", "/", "alpha_den", "\n", "\n", "# Update filter", "\n", "weights", "=", "weights", "-", "(", "step_length_factor", "*", "alpha", ".", "reshape", "(", "-", "1", ",", "1", ",", "1", ",", "1", ")", ")", "*", "weights_grad", "\n", "\n", "# Add the weight iterate", "\n", "weight_iterates", ".", "append", "(", "weights", ")", "\n", "\n", "", "if", "compute_losses", ":", "\n", "            ", "scores", "=", "filter_layer", ".", "apply_filter", "(", "feat", ",", "weights", ")", "\n", "scores", "=", "target_mask", "*", "scores", "+", "(", "1.0", "-", "target_mask", ")", "*", "F", ".", "relu", "(", "scores", ")", "\n", "losses", ".", "append", "(", "(", "(", "(", "sample_weight", "*", "(", "scores", "-", "label_map", ")", ")", "**", "2", ")", ".", "sum", "(", ")", "+", "reg_weight", "*", "(", "weights", "**", "2", ")", ".", "sum", "(", ")", ")", "/", "num_sequences", ")", "\n", "\n", "", "return", "weights", ",", "weight_iterates", ",", "losses", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.optimizer.PrDiMPSteepestDescentNewton.__init__": [[312, 330], ["float", "torch.Module.__init__", "torch.Parameter", "torch.Parameter", "torch.Parameter", "torch.Parameter", "torch.Parameter", "torch.Parameter", "math.log", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.ones"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "num_iter", "=", "1", ",", "feat_stride", "=", "16", ",", "init_step_length", "=", "1.0", ",", "\n", "init_filter_reg", "=", "1e-2", ",", "gauss_sigma", "=", "1.0", ",", "min_filter_reg", "=", "1e-3", ",", "detach_length", "=", "float", "(", "'Inf'", ")", ",", "\n", "alpha_eps", "=", "0.0", ",", "init_uni_weight", "=", "None", ",", "normalize_label", "=", "False", ",", "label_shrink", "=", "0", ",", "softmax_reg", "=", "None", ",", "label_threshold", "=", "0.0", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "num_iter", "=", "num_iter", "\n", "self", ".", "feat_stride", "=", "feat_stride", "\n", "self", ".", "log_step_length", "=", "nn", ".", "Parameter", "(", "math", ".", "log", "(", "init_step_length", ")", "*", "torch", ".", "ones", "(", "1", ")", ")", "\n", "self", ".", "filter_reg", "=", "nn", ".", "Parameter", "(", "init_filter_reg", "*", "torch", ".", "ones", "(", "1", ")", ")", "\n", "self", ".", "gauss_sigma", "=", "gauss_sigma", "\n", "self", ".", "min_filter_reg", "=", "min_filter_reg", "\n", "self", ".", "detach_length", "=", "detach_length", "\n", "self", ".", "alpha_eps", "=", "alpha_eps", "\n", "self", ".", "uni_weight", "=", "0", "if", "init_uni_weight", "is", "None", "else", "init_uni_weight", "\n", "self", ".", "normalize_label", "=", "normalize_label", "\n", "self", ".", "label_shrink", "=", "label_shrink", "\n", "self", ".", "softmax_reg", "=", "softmax_reg", "\n", "self", ".", "label_threshold", "=", "label_threshold", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.optimizer.PrDiMPSteepestDescentNewton.get_label_density": [[331, 354], ["center.reshape.reshape.reshape", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "torch.arange().reshape().to", "dist0.reshape", "dist1.reshape", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "center[].reshape", "center[].reshape", "torch.zeros_like.reshape", "torch.zeros_like.reshape", "torch.zeros_like.reshape", "torch.zeros_like.reshape", "torch.zeros_like.reshape", "torch.zeros_like.reshape", "gauss.sum", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "dist0.reshape.argmin", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "dist1.reshape.argmin"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to"], ["", "def", "get_label_density", "(", "self", ",", "center", ",", "output_sz", ")", ":", "\n", "        ", "center", "=", "center", ".", "reshape", "(", "center", ".", "shape", "[", "0", "]", ",", "-", "1", ",", "center", ".", "shape", "[", "-", "1", "]", ")", "\n", "k0", "=", "torch", ".", "arange", "(", "output_sz", "[", "0", "]", ",", "dtype", "=", "torch", ".", "float32", ")", ".", "reshape", "(", "1", ",", "1", ",", "-", "1", ",", "1", ")", ".", "to", "(", "center", ".", "device", ")", "\n", "k1", "=", "torch", ".", "arange", "(", "output_sz", "[", "1", "]", ",", "dtype", "=", "torch", ".", "float32", ")", ".", "reshape", "(", "1", ",", "1", ",", "1", ",", "-", "1", ")", ".", "to", "(", "center", ".", "device", ")", "\n", "dist0", "=", "(", "k0", "-", "center", "[", ":", ",", ":", ",", "0", "]", ".", "reshape", "(", "*", "center", ".", "shape", "[", ":", "2", "]", ",", "1", ",", "1", ")", ")", "**", "2", "\n", "dist1", "=", "(", "k1", "-", "center", "[", ":", ",", ":", ",", "1", "]", ".", "reshape", "(", "*", "center", ".", "shape", "[", ":", "2", "]", ",", "1", ",", "1", ")", ")", "**", "2", "\n", "if", "self", ".", "gauss_sigma", "==", "0", ":", "\n", "            ", "dist0_view", "=", "dist0", ".", "reshape", "(", "-", "1", ",", "dist0", ".", "shape", "[", "-", "2", "]", ")", "\n", "dist1_view", "=", "dist1", ".", "reshape", "(", "-", "1", ",", "dist1", ".", "shape", "[", "-", "1", "]", ")", "\n", "one_hot0", "=", "torch", ".", "zeros_like", "(", "dist0_view", ")", "\n", "one_hot1", "=", "torch", ".", "zeros_like", "(", "dist1_view", ")", "\n", "one_hot0", "[", "torch", ".", "arange", "(", "one_hot0", ".", "shape", "[", "0", "]", ")", ",", "dist0_view", ".", "argmin", "(", "dim", "=", "-", "1", ")", "]", "=", "1.0", "\n", "one_hot1", "[", "torch", ".", "arange", "(", "one_hot1", ".", "shape", "[", "0", "]", ")", ",", "dist1_view", ".", "argmin", "(", "dim", "=", "-", "1", ")", "]", "=", "1.0", "\n", "gauss", "=", "one_hot0", ".", "reshape", "(", "dist0", ".", "shape", ")", "*", "one_hot1", ".", "reshape", "(", "dist1", ".", "shape", ")", "\n", "", "else", ":", "\n", "            ", "g0", "=", "torch", ".", "exp", "(", "-", "1.0", "/", "(", "2", "*", "self", ".", "gauss_sigma", "**", "2", ")", "*", "dist0", ")", "\n", "g1", "=", "torch", ".", "exp", "(", "-", "1.0", "/", "(", "2", "*", "self", ".", "gauss_sigma", "**", "2", ")", "*", "dist1", ")", "\n", "gauss", "=", "(", "g0", "/", "(", "2", "*", "math", ".", "pi", "*", "self", ".", "gauss_sigma", "**", "2", ")", ")", "*", "g1", "\n", "", "gauss", "=", "gauss", "*", "(", "gauss", ">", "self", ".", "label_threshold", ")", ".", "float", "(", ")", "\n", "if", "self", ".", "normalize_label", ":", "\n", "            ", "gauss", "/=", "(", "gauss", ".", "sum", "(", "dim", "=", "(", "-", "2", ",", "-", "1", ")", ",", "keepdim", "=", "True", ")", "+", "1e-8", ")", "\n", "", "label_dens", "=", "(", "1.0", "-", "self", ".", "label_shrink", ")", "*", "(", "(", "1.0", "-", "self", ".", "uni_weight", ")", "*", "gauss", "+", "self", ".", "uni_weight", "/", "(", "output_sz", "[", "0", "]", "*", "output_sz", "[", "1", "]", ")", ")", "\n", "return", "label_dens", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.optimizer.PrDiMPSteepestDescentNewton.forward": [[355, 440], ["torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "optimizer.PrDiMPSteepestDescentNewton.get_label_density", "range", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "isinstance", "math.exp", "ltr.apply_filter", "ltr.apply_filter", "ltr.softmax_reg().reshape", "ltr.softmax_reg().reshape", "ltr.apply_filter", "ltr.apply_filter", "weight_iterates.append", "ltr.apply_filter", "ltr.apply_filter", "losses.append", "feat.dim", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "torch.Tensor().to", "sample_weight.reshape.reshape.reshape", "weights.detach.detach.detach", "losses.append", "ltr.apply_feat_transpose", "ltr.apply_feat_transpose", "optimizer.PrDiMPSteepestDescentNewton.forward._compute_loss"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.optimizer.PrDiMPSteepestDescentNewton.get_label_density", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_feat_transpose", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_feat_transpose", "home.repos.pwc.inspect_result.researchmm_Stark.meta.steepestdescent.GNSteepestDescent._compute_loss"], ["", "def", "forward", "(", "self", ",", "weights", ",", "feat", ",", "bb", ",", "sample_weight", "=", "None", ",", "num_iter", "=", "None", ",", "compute_losses", "=", "True", ")", ":", "\n", "        ", "\"\"\"Runs the optimizer module.\n        Note that [] denotes an optional dimension.\n        args:\n            weights:  Initial weights. Dims (sequences, feat_dim, wH, wW).\n            feat:  Input feature maps. Dims (images_in_sequence, [sequences], feat_dim, H, W).\n            bb:  Target bounding boxes (x, y, w, h) in the image coords. Dims (images_in_sequence, [sequences], 4).\n            sample_weight:  Optional weight for each sample. Dims: (images_in_sequence, [sequences]).\n            num_iter:  Number of iterations to run.\n            compute_losses:  Whether to compute the (train) loss in each iteration.\n        returns:\n            weights:  The final oprimized weights.\n            weight_iterates:  The weights computed in each iteration (including initial input and final output).\n            losses:  Train losses.\"\"\"", "\n", "\n", "# Sizes", "\n", "num_iter", "=", "self", ".", "num_iter", "if", "num_iter", "is", "None", "else", "num_iter", "\n", "num_images", "=", "feat", ".", "shape", "[", "0", "]", "\n", "num_sequences", "=", "feat", ".", "shape", "[", "1", "]", "if", "feat", ".", "dim", "(", ")", "==", "5", "else", "1", "\n", "filter_sz", "=", "(", "weights", ".", "shape", "[", "-", "2", "]", ",", "weights", ".", "shape", "[", "-", "1", "]", ")", "\n", "output_sz", "=", "(", "feat", ".", "shape", "[", "-", "2", "]", "+", "(", "weights", ".", "shape", "[", "-", "2", "]", "+", "1", ")", "%", "2", ",", "feat", ".", "shape", "[", "-", "1", "]", "+", "(", "weights", ".", "shape", "[", "-", "1", "]", "+", "1", ")", "%", "2", ")", "\n", "\n", "# Get learnable scalars", "\n", "step_length_factor", "=", "torch", ".", "exp", "(", "self", ".", "log_step_length", ")", "\n", "reg_weight", "=", "(", "self", ".", "filter_reg", "*", "self", ".", "filter_reg", ")", ".", "clamp", "(", "min", "=", "self", ".", "min_filter_reg", "**", "2", ")", "\n", "\n", "# Compute label density", "\n", "offset", "=", "(", "torch", ".", "Tensor", "(", "filter_sz", ")", ".", "to", "(", "bb", ".", "device", ")", "%", "2", ")", "/", "2.0", "\n", "center", "=", "(", "(", "bb", "[", "...", ",", ":", "2", "]", "+", "bb", "[", "...", ",", "2", ":", "]", "/", "2", ")", "/", "self", ".", "feat_stride", ")", ".", "flip", "(", "(", "-", "1", ",", ")", ")", "-", "offset", "\n", "label_density", "=", "self", ".", "get_label_density", "(", "center", ",", "output_sz", ")", "\n", "\n", "# Get total sample weights", "\n", "if", "sample_weight", "is", "None", ":", "\n", "            ", "sample_weight", "=", "torch", ".", "Tensor", "(", "[", "1.0", "/", "num_images", "]", ")", ".", "to", "(", "feat", ".", "device", ")", "\n", "", "elif", "isinstance", "(", "sample_weight", ",", "torch", ".", "Tensor", ")", ":", "\n", "            ", "sample_weight", "=", "sample_weight", ".", "reshape", "(", "num_images", ",", "num_sequences", ",", "1", ",", "1", ")", "\n", "\n", "", "exp_reg", "=", "0", "if", "self", ".", "softmax_reg", "is", "None", "else", "math", ".", "exp", "(", "self", ".", "softmax_reg", ")", "\n", "def", "_compute_loss", "(", "scores", ",", "weights", ")", ":", "\n", "            ", "return", "torch", ".", "sum", "(", "sample_weight", ".", "reshape", "(", "sample_weight", ".", "shape", "[", "0", "]", ",", "-", "1", ")", "*", "\n", "(", "torch", ".", "log", "(", "scores", ".", "exp", "(", ")", ".", "sum", "(", "dim", "=", "(", "-", "2", ",", "-", "1", ")", ")", "+", "exp_reg", ")", "-", "(", "label_density", "*", "scores", ")", ".", "sum", "(", "dim", "=", "(", "-", "2", ",", "-", "1", ")", ")", ")", ")", "/", "num_sequences", "+", "reg_weight", "*", "(", "weights", "**", "2", ")", ".", "sum", "(", ")", "/", "num_sequences", "\n", "\n", "", "weight_iterates", "=", "[", "weights", "]", "\n", "losses", "=", "[", "]", "\n", "\n", "for", "i", "in", "range", "(", "num_iter", ")", ":", "\n", "            ", "if", "i", ">", "0", "and", "i", "%", "self", ".", "detach_length", "==", "0", ":", "\n", "                ", "weights", "=", "weights", ".", "detach", "(", ")", "\n", "\n", "# Compute \"residuals\"", "\n", "", "scores", "=", "filter_layer", ".", "apply_filter", "(", "feat", ",", "weights", ")", "\n", "scores_softmax", "=", "activation", ".", "softmax_reg", "(", "scores", ".", "reshape", "(", "num_images", ",", "num_sequences", ",", "-", "1", ")", ",", "dim", "=", "2", ",", "reg", "=", "self", ".", "softmax_reg", ")", ".", "reshape", "(", "scores", ".", "shape", ")", "\n", "res", "=", "sample_weight", "*", "(", "scores_softmax", "-", "label_density", ")", "\n", "\n", "if", "compute_losses", ":", "\n", "                ", "losses", ".", "append", "(", "_compute_loss", "(", "scores", ",", "weights", ")", ")", "\n", "\n", "# Compute gradient", "\n", "", "weights_grad", "=", "filter_layer", ".", "apply_feat_transpose", "(", "feat", ",", "res", ",", "filter_sz", ",", "training", "=", "self", ".", "training", ")", "+", "reg_weight", "*", "weights", "\n", "\n", "# Map the gradient with the Hessian", "\n", "scores_grad", "=", "filter_layer", ".", "apply_filter", "(", "feat", ",", "weights_grad", ")", "\n", "sm_scores_grad", "=", "scores_softmax", "*", "scores_grad", "\n", "hes_scores_grad", "=", "sm_scores_grad", "-", "scores_softmax", "*", "torch", ".", "sum", "(", "sm_scores_grad", ",", "dim", "=", "(", "-", "2", ",", "-", "1", ")", ",", "keepdim", "=", "True", ")", "\n", "grad_hes_grad", "=", "(", "scores_grad", "*", "hes_scores_grad", ")", ".", "reshape", "(", "num_images", ",", "num_sequences", ",", "-", "1", ")", ".", "sum", "(", "dim", "=", "2", ")", ".", "clamp", "(", "min", "=", "0", ")", "\n", "grad_hes_grad", "=", "(", "sample_weight", ".", "reshape", "(", "sample_weight", ".", "shape", "[", "0", "]", ",", "-", "1", ")", "*", "grad_hes_grad", ")", ".", "sum", "(", "dim", "=", "0", ")", "\n", "\n", "# Compute optimal step length", "\n", "alpha_num", "=", "(", "weights_grad", "*", "weights_grad", ")", ".", "sum", "(", "dim", "=", "(", "1", ",", "2", ",", "3", ")", ")", "\n", "alpha_den", "=", "(", "grad_hes_grad", "+", "(", "reg_weight", "+", "self", ".", "alpha_eps", ")", "*", "alpha_num", ")", ".", "clamp", "(", "1e-8", ")", "\n", "alpha", "=", "alpha_num", "/", "alpha_den", "\n", "\n", "# Update filter", "\n", "weights", "=", "weights", "-", "(", "step_length_factor", "*", "alpha", ".", "reshape", "(", "-", "1", ",", "1", ",", "1", ",", "1", ")", ")", "*", "weights_grad", "\n", "\n", "# Add the weight iterate", "\n", "weight_iterates", ".", "append", "(", "weights", ")", "\n", "\n", "", "if", "compute_losses", ":", "\n", "            ", "scores", "=", "filter_layer", ".", "apply_filter", "(", "feat", ",", "weights", ")", "\n", "losses", ".", "append", "(", "_compute_loss", "(", "scores", ",", "weights", ")", ")", "\n", "\n", "", "return", "weights", ",", "weight_iterates", ",", "losses", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.features.residual_basic_block": [[9, 29], ["range", "torch.nn.Sequential", "feat_layers.append", "feat_layers.append", "feat_layers.append", "feat_layers.append", "feat_layers.append", "ltr.models.layers.transform.InterpCat", "torch.nn.MaxPool2d", "torchvision.models.resnet.BasicBlock", "torch.nn.Conv2d", "feat_layers.append", "ltr.models.layers.normalization.InstanceL2Norm", "torch.nn.ReLU", "int"], "function", ["None"], ["def", "residual_basic_block", "(", "feature_dim", "=", "256", ",", "num_blocks", "=", "1", ",", "l2norm", "=", "True", ",", "final_conv", "=", "False", ",", "norm_scale", "=", "1.0", ",", "out_dim", "=", "None", ",", "\n", "interp_cat", "=", "False", ",", "final_relu", "=", "False", ",", "init_pool", "=", "False", ")", ":", "\n", "    ", "\"\"\"Construct a network block based on the BasicBlock used in ResNet 18 and 34.\"\"\"", "\n", "if", "out_dim", "is", "None", ":", "\n", "        ", "out_dim", "=", "feature_dim", "\n", "", "feat_layers", "=", "[", "]", "\n", "if", "interp_cat", ":", "\n", "        ", "feat_layers", ".", "append", "(", "InterpCat", "(", ")", ")", "\n", "", "if", "init_pool", ":", "\n", "        ", "feat_layers", ".", "append", "(", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ")", ")", "\n", "", "for", "i", "in", "range", "(", "num_blocks", ")", ":", "\n", "        ", "odim", "=", "feature_dim", "if", "i", "<", "num_blocks", "-", "1", "+", "int", "(", "final_conv", ")", "else", "out_dim", "\n", "feat_layers", ".", "append", "(", "BasicBlock", "(", "feature_dim", ",", "odim", ")", ")", "\n", "", "if", "final_conv", ":", "\n", "        ", "feat_layers", ".", "append", "(", "nn", ".", "Conv2d", "(", "feature_dim", ",", "out_dim", ",", "kernel_size", "=", "3", ",", "padding", "=", "1", ",", "bias", "=", "False", ")", ")", "\n", "if", "final_relu", ":", "\n", "            ", "feat_layers", ".", "append", "(", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", ")", "\n", "", "", "if", "l2norm", ":", "\n", "        ", "feat_layers", ".", "append", "(", "InstanceL2Norm", "(", "scale", "=", "norm_scale", ")", ")", "\n", "", "return", "nn", ".", "Sequential", "(", "*", "feat_layers", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.features.residual_basic_block_pool": [[31, 48], ["range", "torch.nn.Sequential", "feat_layers.append", "feat_layers.append", "feat_layers.append", "feat_layers.append", "torchvision.models.resnet.BasicBlock", "torch.nn.Conv2d", "torch.nn.MaxPool2d", "ltr.models.layers.normalization.InstanceL2Norm", "int"], "function", ["None"], ["", "def", "residual_basic_block_pool", "(", "feature_dim", "=", "256", ",", "num_blocks", "=", "1", ",", "l2norm", "=", "True", ",", "final_conv", "=", "False", ",", "norm_scale", "=", "1.0", ",", "out_dim", "=", "None", ",", "\n", "pool", "=", "True", ")", ":", "\n", "    ", "\"\"\"Construct a network block based on the BasicBlock used in ResNet.\"\"\"", "\n", "if", "out_dim", "is", "None", ":", "\n", "        ", "out_dim", "=", "feature_dim", "\n", "", "feat_layers", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "num_blocks", ")", ":", "\n", "        ", "odim", "=", "feature_dim", "if", "i", "<", "num_blocks", "-", "1", "+", "int", "(", "final_conv", ")", "else", "out_dim", "\n", "feat_layers", ".", "append", "(", "BasicBlock", "(", "feature_dim", ",", "odim", ")", ")", "\n", "", "if", "final_conv", ":", "\n", "        ", "feat_layers", ".", "append", "(", "nn", ".", "Conv2d", "(", "feature_dim", ",", "out_dim", ",", "kernel_size", "=", "3", ",", "padding", "=", "1", ",", "bias", "=", "False", ")", ")", "\n", "", "if", "pool", ":", "\n", "        ", "feat_layers", ".", "append", "(", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ")", ")", "\n", "", "if", "l2norm", ":", "\n", "        ", "feat_layers", ".", "append", "(", "InstanceL2Norm", "(", "scale", "=", "norm_scale", ")", ")", "\n", "\n", "", "return", "nn", ".", "Sequential", "(", "*", "feat_layers", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.features.residual_bottleneck": [[50, 70], ["range", "torch.nn.Sequential", "feat_layers.append", "feat_layers.append", "feat_layers.append", "feat_layers.append", "ltr.models.layers.transform.InterpCat", "torchvision.models.resnet.Bottleneck", "torch.nn.Conv2d", "feat_layers.append", "feat_layers.append", "ltr.models.layers.normalization.InstanceL2Norm", "torch.nn.ReLU", "torch.nn.MaxPool2d", "int"], "function", ["None"], ["", "def", "residual_bottleneck", "(", "feature_dim", "=", "256", ",", "num_blocks", "=", "1", ",", "l2norm", "=", "True", ",", "final_conv", "=", "False", ",", "norm_scale", "=", "1.0", ",", "out_dim", "=", "None", ",", "\n", "interp_cat", "=", "False", ",", "final_relu", "=", "False", ",", "final_pool", "=", "False", ")", ":", "\n", "    ", "\"\"\"Construct a network block based on the Bottleneck block used in ResNet.\"\"\"", "\n", "if", "out_dim", "is", "None", ":", "\n", "        ", "out_dim", "=", "feature_dim", "\n", "", "feat_layers", "=", "[", "]", "\n", "if", "interp_cat", ":", "\n", "        ", "feat_layers", ".", "append", "(", "InterpCat", "(", ")", ")", "\n", "", "for", "i", "in", "range", "(", "num_blocks", ")", ":", "\n", "        ", "planes", "=", "feature_dim", "if", "i", "<", "num_blocks", "-", "1", "+", "int", "(", "final_conv", ")", "else", "out_dim", "//", "4", "\n", "feat_layers", ".", "append", "(", "Bottleneck", "(", "4", "*", "feature_dim", ",", "planes", ")", ")", "\n", "", "if", "final_conv", ":", "\n", "        ", "feat_layers", ".", "append", "(", "nn", ".", "Conv2d", "(", "4", "*", "feature_dim", ",", "out_dim", ",", "kernel_size", "=", "3", ",", "padding", "=", "1", ",", "bias", "=", "False", ")", ")", "\n", "if", "final_relu", ":", "\n", "            ", "feat_layers", ".", "append", "(", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", ")", "\n", "", "if", "final_pool", ":", "\n", "            ", "feat_layers", ".", "append", "(", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ")", ")", "\n", "", "", "if", "l2norm", ":", "\n", "        ", "feat_layers", ".", "append", "(", "InstanceL2Norm", "(", "scale", "=", "norm_scale", ")", ")", "\n", "", "return", "nn", ".", "Sequential", "(", "*", "feat_layers", ")", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.residual_modules.LinearFilterLearnGen.__init__": [[11, 50], ["torch.Module.__init__", "torch.Parameter", "torch.Parameter", "ltr.models.layers.distance.DistanceMap", "ltr.models.layers.distance.DistanceMap", "torch.Conv2d", "torch.Conv2d", "torch.Sequential", "torch.Sequential", "torch.Conv2d", "torch.Conv2d", "residual_modules.LinearFilterLearnGen.spatial_weight_predictor.weight.data.fill_", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.arange().reshape", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.zeros_like", "torch.exp", "torch.exp", "torch.exp", "torch.exp", "torch.exp.min", "torch.exp.min", "torch.Conv2d", "torch.Conv2d", "mask_layers.append", "ltr.BentIdentPar", "ltr.BentIdentPar", "torch.ones", "torch.ones", "torch.ones", "torch.ones", "torch.Sigmoid", "torch.Sigmoid", "ValueError", "torch.tanh", "torch.tanh", "torch.tanh", "torch.tanh", "ltr.LeakyReluPar", "ltr.LeakyReluPar", "ValueError", "torch.arange", "torch.arange", "torch.arange", "torch.arange"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "feat_stride", "=", "16", ",", "init_filter_reg", "=", "1e-2", ",", "init_gauss_sigma", "=", "1.0", ",", "num_dist_bins", "=", "5", ",", "bin_displacement", "=", "1.0", ",", "\n", "mask_init_factor", "=", "4.0", ",", "score_act", "=", "'bentpar'", ",", "act_param", "=", "None", ",", "mask_act", "=", "'sigmoid'", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "filter_reg", "=", "nn", ".", "Parameter", "(", "init_filter_reg", "*", "torch", ".", "ones", "(", "1", ")", ")", "\n", "self", ".", "feat_stride", "=", "feat_stride", "\n", "self", ".", "distance_map", "=", "DistanceMap", "(", "num_dist_bins", ",", "bin_displacement", ")", "\n", "\n", "# Distance coordinates", "\n", "d", "=", "torch", ".", "arange", "(", "num_dist_bins", ",", "dtype", "=", "torch", ".", "float32", ")", ".", "reshape", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "*", "bin_displacement", "\n", "if", "init_gauss_sigma", "==", "0", ":", "\n", "            ", "init_gauss", "=", "torch", ".", "zeros_like", "(", "d", ")", "\n", "init_gauss", "[", "0", ",", "0", ",", "0", ",", "0", "]", "=", "1", "\n", "", "else", ":", "\n", "            ", "init_gauss", "=", "torch", ".", "exp", "(", "-", "1", "/", "2", "*", "(", "d", "/", "init_gauss_sigma", ")", "**", "2", ")", "\n", "\n", "", "self", ".", "label_map_predictor", "=", "nn", ".", "Conv2d", "(", "num_dist_bins", ",", "1", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "label_map_predictor", ".", "weight", ".", "data", "=", "init_gauss", "-", "init_gauss", ".", "min", "(", ")", "\n", "\n", "mask_layers", "=", "[", "nn", ".", "Conv2d", "(", "num_dist_bins", ",", "1", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", "]", "\n", "if", "mask_act", "==", "'sigmoid'", ":", "\n", "            ", "mask_layers", ".", "append", "(", "nn", ".", "Sigmoid", "(", ")", ")", "\n", "init_bias", "=", "0.0", "\n", "", "elif", "mask_act", "==", "'linear'", ":", "\n", "            ", "init_bias", "=", "0.5", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'Unknown activation'", ")", "\n", "", "self", ".", "target_mask_predictor", "=", "nn", ".", "Sequential", "(", "*", "mask_layers", ")", "\n", "self", ".", "target_mask_predictor", "[", "0", "]", ".", "weight", ".", "data", "=", "mask_init_factor", "*", "torch", ".", "tanh", "(", "2.0", "-", "d", ")", "+", "init_bias", "\n", "\n", "self", ".", "spatial_weight_predictor", "=", "nn", ".", "Conv2d", "(", "num_dist_bins", ",", "1", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "spatial_weight_predictor", ".", "weight", ".", "data", ".", "fill_", "(", "1.0", ")", "\n", "\n", "if", "score_act", "==", "'bentpar'", ":", "\n", "            ", "self", ".", "score_activation", "=", "activation", ".", "BentIdentPar", "(", "act_param", ")", "\n", "", "elif", "score_act", "==", "'relu'", ":", "\n", "            ", "self", ".", "score_activation", "=", "activation", ".", "LeakyReluPar", "(", ")", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "'Unknown activation'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.target_classifier.residual_modules.LinearFilterLearnGen.forward": [[52, 86], ["ltr.apply_filter", "ltr.apply_filter", "residual_modules.LinearFilterLearnGen.distance_map", "residual_modules.LinearFilterLearnGen.label_map_predictor().reshape", "residual_modules.LinearFilterLearnGen.target_mask_predictor().reshape", "residual_modules.LinearFilterLearnGen.spatial_weight_predictor().reshape", "residual_modules.LinearFilterLearnGen.score_activation", "pytracking.TensorList", "isinstance", "filter.reshape", "feat.dim", "residual_modules.LinearFilterLearnGen.label_map_predictor", "residual_modules.LinearFilterLearnGen.target_mask_predictor", "residual_modules.LinearFilterLearnGen.spatial_weight_predictor", "math.sqrt", "sample_weight.sqrt().reshape", "is_distractor.reshape", "sample_weight.sqrt"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "", "def", "forward", "(", "self", ",", "meta_parameter", ":", "TensorList", ",", "feat", ",", "bb", ",", "sample_weight", "=", "None", ",", "is_distractor", "=", "None", ")", ":", "\n", "        ", "filter", "=", "meta_parameter", "[", "0", "]", "\n", "\n", "num_images", "=", "feat", ".", "shape", "[", "0", "]", "\n", "num_sequences", "=", "feat", ".", "shape", "[", "1", "]", "if", "feat", ".", "dim", "(", ")", "==", "5", "else", "1", "\n", "filter_sz", "=", "(", "filter", ".", "shape", "[", "-", "2", "]", ",", "filter", ".", "shape", "[", "-", "1", "]", ")", "\n", "\n", "# Compute scores", "\n", "scores", "=", "filter_layer", ".", "apply_filter", "(", "feat", ",", "filter", ")", "\n", "\n", "# Compute distance map", "\n", "center", "=", "(", "(", "bb", "[", "...", ",", ":", "2", "]", "+", "bb", "[", "...", ",", "2", ":", "]", "/", "2", ")", "/", "self", ".", "feat_stride", ")", ".", "reshape", "(", "-", "1", ",", "2", ")", ".", "flip", "(", "(", "1", ",", ")", ")", "\n", "if", "is_distractor", "is", "not", "None", ":", "\n", "            ", "center", "[", "is_distractor", ".", "reshape", "(", "-", "1", ")", ",", ":", "]", "=", "99999", "\n", "", "dist_map", "=", "self", ".", "distance_map", "(", "center", ",", "scores", ".", "shape", "[", "-", "2", ":", "]", ")", "\n", "\n", "# Compute label map masks and weight", "\n", "label_map", "=", "self", ".", "label_map_predictor", "(", "dist_map", ")", ".", "reshape", "(", "num_images", ",", "num_sequences", ",", "dist_map", ".", "shape", "[", "-", "2", "]", ",", "dist_map", ".", "shape", "[", "-", "1", "]", ")", "\n", "target_mask", "=", "self", ".", "target_mask_predictor", "(", "dist_map", ")", ".", "reshape", "(", "num_images", ",", "num_sequences", ",", "dist_map", ".", "shape", "[", "-", "2", "]", ",", "dist_map", ".", "shape", "[", "-", "1", "]", ")", "\n", "spatial_weight", "=", "self", ".", "spatial_weight_predictor", "(", "dist_map", ")", ".", "reshape", "(", "num_images", ",", "num_sequences", ",", "dist_map", ".", "shape", "[", "-", "2", "]", ",", "dist_map", ".", "shape", "[", "-", "1", "]", ")", "\n", "\n", "if", "sample_weight", "is", "None", ":", "\n", "            ", "sample_weight", "=", "math", ".", "sqrt", "(", "1.0", "/", "num_images", ")", "*", "spatial_weight", "\n", "", "elif", "isinstance", "(", "sample_weight", ",", "torch", ".", "Tensor", ")", ":", "\n", "            ", "sample_weight", "=", "sample_weight", ".", "sqrt", "(", ")", ".", "reshape", "(", "-", "1", ",", "1", ",", "1", ",", "1", ")", "*", "spatial_weight", "\n", "\n", "# Compute data residual", "\n", "", "scores_act", "=", "self", ".", "score_activation", "(", "scores", ",", "target_mask", ")", "\n", "data_residual", "=", "sample_weight", "*", "(", "scores_act", "-", "label_map", ")", "\n", "\n", "# Compute regularization residual. Put batch in second dimension", "\n", "reg_residual", "=", "self", ".", "filter_reg", "*", "filter", ".", "reshape", "(", "1", ",", "num_sequences", ",", "-", "1", ")", "\n", "\n", "return", "TensorList", "(", "[", "data_residual", ",", "reg_residual", "]", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.activation.MLU.__init__": [[23, 27], ["torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "min_val", ",", "inplace", "=", "False", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "min_val", "=", "min_val", "\n", "self", ".", "inplace", "=", "inplace", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.activation.MLU.forward": [[28, 30], ["torch.elu", "torch.elu", "torch.elu", "torch.leaky_relu", "torch.leaky_relu", "torch.leaky_relu"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "input", ")", ":", "\n", "        ", "return", "F", ".", "elu", "(", "F", ".", "leaky_relu", "(", "input", ",", "1", "/", "self", ".", "min_val", ",", "inplace", "=", "self", ".", "inplace", ")", ",", "self", ".", "min_val", ",", "inplace", "=", "self", ".", "inplace", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.activation.LeakyReluPar.forward": [[36, 38], ["torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs"], ["def", "forward", "(", "self", ",", "x", ",", "a", ")", ":", "\n", "        ", "return", "(", "1.0", "-", "a", ")", "/", "2.0", "*", "torch", ".", "abs", "(", "x", ")", "+", "(", "1.0", "+", "a", ")", "/", "2.0", "*", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.activation.LeakyReluParDeriv.forward": [[43, 45], ["torch.sign", "torch.sign", "torch.sign", "torch.sign", "torch.sign", "torch.sign", "torch.sign", "torch.sign", "torch.sign", "x.detach"], "methods", ["None"], ["def", "forward", "(", "self", ",", "x", ",", "a", ")", ":", "\n", "        ", "return", "(", "1.0", "-", "a", ")", "/", "2.0", "*", "torch", ".", "sign", "(", "x", ".", "detach", "(", ")", ")", "+", "(", "1.0", "+", "a", ")", "/", "2.0", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.activation.BentIdentPar.__init__": [[50, 53], ["torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "b", "=", "1.0", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "b", "=", "b", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.activation.BentIdentPar.forward": [[54, 56], ["torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ",", "a", ")", ":", "\n", "        ", "return", "(", "1.0", "-", "a", ")", "/", "2.0", "*", "(", "torch", ".", "sqrt", "(", "x", "*", "x", "+", "4.0", "*", "self", ".", "b", "*", "self", ".", "b", ")", "-", "2.0", "*", "self", ".", "b", ")", "+", "(", "1.0", "+", "a", ")", "/", "2.0", "*", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.activation.BentIdentParDeriv.__init__": [[61, 64], ["torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "b", "=", "1.0", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "b", "=", "b", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.activation.BentIdentParDeriv.forward": [[65, 67], ["torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "x", ",", "a", ")", ":", "\n", "        ", "return", "(", "1.0", "-", "a", ")", "/", "2.0", "*", "(", "x", "/", "torch", ".", "sqrt", "(", "x", "*", "x", "+", "4.0", "*", "self", ".", "b", "*", "self", ".", "b", ")", ")", "+", "(", "1.0", "+", "a", ")", "/", "2.0", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.activation.softmax_reg": [[7, 17], ["torch.cat.dim", "isinstance", "x.new_tensor.expand", "torch.cat", "torch.cat", "torch.cat", "torch.softmax", "torch.softmax", "torch.softmax", "torch.cat.new_tensor", "torch.softmax", "torch.softmax", "torch.softmax", "range", "torch.cat.dim", "slice", "slice", "range", "torch.cat.dim"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["def", "softmax_reg", "(", "x", ":", "torch", ".", "Tensor", ",", "dim", ",", "reg", "=", "None", ")", ":", "\n", "    ", "\"\"\"Softmax with optinal denominator regularization.\"\"\"", "\n", "if", "reg", "is", "None", ":", "\n", "        ", "return", "torch", ".", "softmax", "(", "x", ",", "dim", "=", "dim", ")", "\n", "", "dim", "%=", "x", ".", "dim", "(", ")", "\n", "if", "isinstance", "(", "reg", ",", "(", "float", ",", "int", ")", ")", ":", "\n", "        ", "reg", "=", "x", ".", "new_tensor", "(", "[", "reg", "]", ")", "\n", "", "reg", "=", "reg", ".", "expand", "(", "[", "1", "if", "d", "==", "dim", "else", "x", ".", "shape", "[", "d", "]", "for", "d", "in", "range", "(", "x", ".", "dim", "(", ")", ")", "]", ")", "\n", "x", "=", "torch", ".", "cat", "(", "(", "x", ",", "reg", ")", ",", "dim", "=", "dim", ")", "\n", "return", "torch", ".", "softmax", "(", "x", ",", "dim", "=", "dim", ")", "[", "[", "slice", "(", "-", "1", ")", "if", "d", "==", "dim", "else", "slice", "(", "None", ")", "for", "d", "in", "range", "(", "x", ".", "dim", "(", ")", ")", "]", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.normalization.InstanceL2Norm.__init__": [[9, 14], ["torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "size_average", "=", "True", ",", "eps", "=", "1e-5", ",", "scale", "=", "1.0", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "size_average", "=", "size_average", "\n", "self", ".", "eps", "=", "eps", "\n", "self", ".", "scale", "=", "scale", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.normalization.InstanceL2Norm.forward": [[15, 21], ["torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.sum"], "methods", ["None"], ["", "def", "forward", "(", "self", ",", "input", ")", ":", "\n", "        ", "if", "self", ".", "size_average", ":", "\n", "            ", "return", "input", "*", "(", "self", ".", "scale", "*", "(", "(", "input", ".", "shape", "[", "1", "]", "*", "input", ".", "shape", "[", "2", "]", "*", "input", ".", "shape", "[", "3", "]", ")", "/", "(", "\n", "torch", ".", "sum", "(", "(", "input", "*", "input", ")", ".", "view", "(", "input", ".", "shape", "[", "0", "]", ",", "1", ",", "1", ",", "-", "1", ")", ",", "dim", "=", "3", ",", "keepdim", "=", "True", ")", "+", "self", ".", "eps", ")", ")", ".", "sqrt", "(", ")", ")", "\n", "", "else", ":", "\n", "            ", "return", "input", "*", "(", "self", ".", "scale", "/", "(", "torch", ".", "sum", "(", "(", "input", "*", "input", ")", ".", "view", "(", "input", ".", "shape", "[", "0", "]", ",", "1", ",", "1", ",", "-", "1", ")", ",", "dim", "=", "3", ",", "keepdim", "=", "True", ")", "+", "self", ".", "eps", ")", ".", "sqrt", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.distance.DistanceMap.__init__": [[12, 16], ["torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "num_bins", ",", "bin_displacement", "=", "1.0", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "num_bins", "=", "num_bins", "\n", "self", ".", "bin_displacement", "=", "bin_displacement", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.distance.DistanceMap.forward": [[17, 40], ["center.view.view.view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.sqrt", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "center[].view", "center[].view", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.arange", "torch.relu", "torch.relu", "torch.relu", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs", "torch.abs"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs", "home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.abs"], ["", "def", "forward", "(", "self", ",", "center", ",", "output_sz", ")", ":", "\n", "        ", "\"\"\"Create the distance map.\n        args:\n            center: Torch tensor with (y,x) center position. Dims (batch, 2)\n            output_sz: Size of output distance map. 2-dimensional tuple.\"\"\"", "\n", "\n", "center", "=", "center", ".", "view", "(", "-", "1", ",", "2", ")", "\n", "\n", "bin_centers", "=", "torch", ".", "arange", "(", "self", ".", "num_bins", ",", "dtype", "=", "torch", ".", "float32", ",", "device", "=", "center", ".", "device", ")", ".", "view", "(", "1", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "\n", "k0", "=", "torch", ".", "arange", "(", "output_sz", "[", "0", "]", ",", "dtype", "=", "torch", ".", "float32", ",", "device", "=", "center", ".", "device", ")", ".", "view", "(", "1", ",", "1", ",", "-", "1", ",", "1", ")", "\n", "k1", "=", "torch", ".", "arange", "(", "output_sz", "[", "1", "]", ",", "dtype", "=", "torch", ".", "float32", ",", "device", "=", "center", ".", "device", ")", ".", "view", "(", "1", ",", "1", ",", "1", ",", "-", "1", ")", "\n", "\n", "d0", "=", "k0", "-", "center", "[", ":", ",", "0", "]", ".", "view", "(", "-", "1", ",", "1", ",", "1", ",", "1", ")", "\n", "d1", "=", "k1", "-", "center", "[", ":", ",", "1", "]", ".", "view", "(", "-", "1", ",", "1", ",", "1", ",", "1", ")", "\n", "\n", "dist", "=", "torch", ".", "sqrt", "(", "d0", "*", "d0", "+", "d1", "*", "d1", ")", "\n", "bin_diff", "=", "dist", "/", "self", ".", "bin_displacement", "-", "bin_centers", "\n", "\n", "bin_val", "=", "torch", ".", "cat", "(", "(", "F", ".", "relu", "(", "1.0", "-", "torch", ".", "abs", "(", "bin_diff", "[", ":", ",", ":", "-", "1", ",", ":", ",", ":", "]", ")", ",", "inplace", "=", "True", ")", ",", "\n", "(", "1.0", "+", "bin_diff", "[", ":", ",", "-", "1", ":", ",", ":", ",", ":", "]", ")", ".", "clamp", "(", "0", ",", "1", ")", ")", ",", "dim", "=", "1", ")", "\n", "\n", "return", "bin_val", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.blocks.LinearBlock.__init__": [[24, 29], ["torch.nn.Module.__init__", "torch.nn.Linear", "torch.nn.BatchNorm2d", "torch.nn.ReLU"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "in_planes", ",", "out_planes", ",", "input_sz", ",", "bias", "=", "True", ",", "batch_norm", "=", "True", ",", "relu", "=", "True", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "linear", "=", "nn", ".", "Linear", "(", "in_planes", "*", "input_sz", "*", "input_sz", ",", "out_planes", ",", "bias", "=", "bias", ")", "\n", "self", ".", "bn", "=", "nn", ".", "BatchNorm2d", "(", "out_planes", ")", "if", "batch_norm", "else", "None", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "if", "relu", "else", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.blocks.LinearBlock.forward": [[30, 37], ["blocks.LinearBlock.linear", "blocks.LinearBlock.reshape", "blocks.LinearBlock.reshape", "blocks.LinearBlock.bn", "blocks.LinearBlock.relu", "blocks.LinearBlock.reshape"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "linear", "(", "x", ".", "reshape", "(", "x", ".", "shape", "[", "0", "]", ",", "-", "1", ")", ")", "\n", "if", "self", ".", "bn", "is", "not", "None", ":", "\n", "            ", "x", "=", "self", ".", "bn", "(", "x", ".", "reshape", "(", "x", ".", "shape", "[", "0", "]", ",", "x", ".", "shape", "[", "1", "]", ",", "1", ",", "1", ")", ")", "\n", "", "if", "self", ".", "relu", "is", "not", "None", ":", "\n", "            ", "x", "=", "self", ".", "relu", "(", "x", ")", "\n", "", "return", "x", ".", "reshape", "(", "x", ".", "shape", "[", "0", "]", ",", "-", "1", ")", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.blocks.conv_block": [[4, 21], ["layers.append", "torch.nn.Sequential", "isinstance", "layers.append", "torch.nn.Conv2d", "layers.append", "layers.append", "torch.nn.ReflectionPad2d", "torch.nn.BatchNorm2d", "torch.nn.ReLU"], "function", ["None"], ["def", "conv_block", "(", "in_planes", ",", "out_planes", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "1", ",", "dilation", "=", "1", ",", "bias", "=", "True", ",", "\n", "batch_norm", "=", "True", ",", "relu", "=", "True", ",", "padding_mode", "=", "'zeros'", ")", ":", "\n", "    ", "layers", "=", "[", "]", "\n", "assert", "padding_mode", "==", "'zeros'", "or", "padding_mode", "==", "'replicate'", "\n", "\n", "if", "padding_mode", "==", "'replicate'", "and", "padding", ">", "0", ":", "\n", "        ", "assert", "isinstance", "(", "padding", ",", "int", ")", "\n", "layers", ".", "append", "(", "nn", ".", "ReflectionPad2d", "(", "padding", ")", ")", "\n", "padding", "=", "0", "\n", "\n", "", "layers", ".", "append", "(", "nn", ".", "Conv2d", "(", "in_planes", ",", "out_planes", ",", "kernel_size", "=", "kernel_size", ",", "stride", "=", "stride", ",", "\n", "padding", "=", "padding", ",", "dilation", "=", "dilation", ",", "bias", "=", "bias", ")", ")", "\n", "if", "batch_norm", ":", "\n", "        ", "layers", ".", "append", "(", "nn", ".", "BatchNorm2d", "(", "out_planes", ")", ")", "\n", "", "if", "relu", ":", "\n", "        ", "layers", ".", "append", "(", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", ")", "\n", "", "return", "nn", ".", "Sequential", "(", "*", "layers", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.InterpCat.forward": [[16, 26], ["isinstance", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "list", "list.values", "transform.interpolate"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.tensorlist.TensorList.list", "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], ["def", "forward", "(", "self", ",", "input", ")", ":", "\n", "        ", "if", "isinstance", "(", "input", ",", "(", "dict", ",", "OrderedDict", ")", ")", ":", "\n", "            ", "input", "=", "list", "(", "input", ".", "values", "(", ")", ")", "\n", "\n", "", "output_shape", "=", "None", "\n", "for", "x", "in", "input", ":", "\n", "            ", "if", "output_shape", "is", "None", "or", "output_shape", "[", "0", "]", ">", "x", ".", "shape", "[", "-", "2", "]", ":", "\n", "                ", "output_shape", "=", "x", ".", "shape", "[", "-", "2", ":", "]", "\n", "\n", "", "", "return", "torch", ".", "cat", "(", "[", "interpolate", "(", "x", ",", "output_shape", ")", "for", "x", "in", "input", "]", ",", "dim", "=", "-", "3", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate": [[7, 11], ["torch.is_tensor", "torch.is_tensor", "torch.is_tensor", "sz.tolist", "torch.interpolate"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.layers.transform.interpolate"], ["def", "interpolate", "(", "x", ",", "sz", ")", ":", "\n", "    ", "\"\"\"Interpolate 4D tensor x to size sz.\"\"\"", "\n", "sz", "=", "sz", ".", "tolist", "(", ")", "if", "torch", ".", "is_tensor", "(", "sz", ")", "else", "sz", "\n", "return", "F", ".", "interpolate", "(", "x", ",", "sz", ",", "mode", "=", "'bilinear'", ",", "align_corners", "=", "False", ")", "if", "x", ".", "shape", "[", "-", "2", ":", "]", "!=", "sz", "else", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter": [[5, 55], ["torch.conv2d", "torch.cat.view", "filter.dim", "feat.reshape", "feat.dim", "torch.conv2d", "torch.cat.view", "dilation_factors.items", "torch.cat", "torch.cat", "feat.reshape", "filter.view", "filter[].contiguous", "torch.conv2d", "scores_d.view.view", "scores_all.append", "feat.reshape", "filter[].contiguous.view"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d"], ["def", "apply_filter", "(", "feat", ",", "filter", ",", "dilation_factors", "=", "None", ")", ":", "\n", "    ", "\"\"\"Applies the filter on the input features (feat). The number of groups is automatically calculated.\n    args:\n        feat: These are the input features. Must have dimensions (images_in_sequence, sequences, feat_dim, H, W)\n        filter: The filter to apply. Must have dimensions (sequences, feat_dim, fH, fW) or (sequences, filters, feat_dim/groups, fH, fW)\n    output:\n        scores: Output of filtering. Dimensions (images_in_sequence, sequences, yH, yW) or (images_in_sequence, sequences, filters, yH, yW)\n    \"\"\"", "\n", "\n", "multiple_filters", "=", "(", "filter", ".", "dim", "(", ")", "==", "5", ")", "\n", "\n", "padding", "=", "(", "filter", ".", "shape", "[", "-", "2", "]", "//", "2", ",", "filter", ".", "shape", "[", "-", "1", "]", "//", "2", ")", "\n", "\n", "num_images", "=", "feat", ".", "shape", "[", "0", "]", "\n", "num_sequences", "=", "feat", ".", "shape", "[", "1", "]", "if", "feat", ".", "dim", "(", ")", "==", "5", "else", "1", "\n", "num_filters", "=", "filter", ".", "shape", "[", "1", "]", "if", "multiple_filters", "else", "1", "\n", "num_channels", "=", "feat", ".", "shape", "[", "-", "3", "]", "\n", "groups", "=", "num_channels", "//", "filter", ".", "shape", "[", "-", "3", "]", "\n", "\n", "assert", "num_filters", "%", "groups", "==", "0", "and", "num_channels", "%", "groups", "==", "0", "\n", "\n", "if", "multiple_filters", ":", "\n", "        ", "if", "dilation_factors", "is", "None", ":", "\n", "            ", "scores", "=", "F", ".", "conv2d", "(", "feat", ".", "reshape", "(", "num_images", ",", "-", "1", ",", "feat", ".", "shape", "[", "-", "2", "]", ",", "feat", ".", "shape", "[", "-", "1", "]", ")", ",", "filter", ".", "view", "(", "-", "1", ",", "*", "filter", ".", "shape", "[", "-", "3", ":", "]", ")", ",", "\n", "padding", "=", "padding", ",", "groups", "=", "num_sequences", "*", "groups", ")", "\n", "\n", "return", "scores", ".", "view", "(", "num_images", ",", "num_sequences", ",", "-", "1", ",", "scores", ".", "shape", "[", "-", "2", "]", ",", "scores", ".", "shape", "[", "-", "1", "]", ")", "\n", "", "else", ":", "\n", "            ", "scores_all", "=", "[", "]", "\n", "start_id", "=", "0", "\n", "\n", "for", "d_factor", ",", "num_filters_with_d", "in", "dilation_factors", ".", "items", "(", ")", ":", "\n", "                ", "f_d", "=", "filter", "[", ":", ",", "start_id", ":", "start_id", "+", "num_filters_with_d", ",", "...", "]", ".", "contiguous", "(", ")", "\n", "\n", "padding_d", "=", "[", "p", "+", "d_factor", "-", "1", "for", "p", "in", "padding", "]", "\n", "scores_d", "=", "F", ".", "conv2d", "(", "feat", ".", "reshape", "(", "num_images", ",", "-", "1", ",", "feat", ".", "shape", "[", "-", "2", "]", ",", "feat", ".", "shape", "[", "-", "1", "]", ")", ",", "\n", "f_d", ".", "view", "(", "-", "1", ",", "*", "f_d", ".", "shape", "[", "-", "3", ":", "]", ")", ",", "\n", "padding", "=", "padding_d", ",", "groups", "=", "num_sequences", "*", "groups", ",", "\n", "dilation", "=", "d_factor", ")", "\n", "scores_d", "=", "scores_d", ".", "view", "(", "num_images", ",", "num_sequences", ",", "-", "1", ",", "scores_d", ".", "shape", "[", "-", "2", "]", ",", "scores_d", ".", "shape", "[", "-", "1", "]", ")", "\n", "scores_all", ".", "append", "(", "scores_d", ")", "\n", "start_id", "+=", "num_filters_with_d", "\n", "\n", "", "scores", "=", "torch", ".", "cat", "(", "scores_all", ",", "dim", "=", "2", ")", "\n", "return", "scores", "\n", "\n", "", "", "scores", "=", "F", ".", "conv2d", "(", "feat", ".", "reshape", "(", "num_images", ",", "-", "1", ",", "feat", ".", "shape", "[", "-", "2", "]", ",", "feat", ".", "shape", "[", "-", "1", "]", ")", ",", "filter", ",", "\n", "padding", "=", "padding", ",", "groups", "=", "num_sequences", ")", "\n", "\n", "return", "scores", ".", "view", "(", "num_images", ",", "num_sequences", ",", "scores", ".", "shape", "[", "-", "2", "]", ",", "scores", ".", "shape", "[", "-", "1", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_feat_transpose": [[57, 74], ["filter._apply_feat_transpose_v2", "NotImplementedError", "filter._apply_feat_transpose_v3", "input.dim"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.layers.filter._apply_feat_transpose_v2", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter._apply_feat_transpose_v3", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "apply_feat_transpose", "(", "feat", ",", "input", ",", "filter_ksz", ",", "training", "=", "True", ",", "groups", "=", "1", ")", ":", "\n", "    ", "\"\"\"Applies the transposed operation off apply_filter w.r.t. filter itself. Can be used to compute the filter gradient.\n    args:\n        feat: These are the input features. Must have dimensions (images_in_sequence, sequences, feat_dim, H, W)\n        input: Input activation (e.g. residuals). Must have dimensions (images_in_sequence, sequences, yH, yW) or\n                (images_in_sequence, sequences, filters, yH, yW)\n        training: Choose the faster implementation whether training or not.\n    output:\n        Output of transposed operation. Dimensions (sequences, feat_dim, fH, fW)\n    \"\"\"", "\n", "\n", "if", "groups", "!=", "1", ":", "\n", "        ", "raise", "NotImplementedError", "(", "'Not implemented other values of group.'", ")", "\n", "\n", "", "if", "training", "or", "input", ".", "dim", "(", ")", "==", "5", ":", "\n", "        ", "return", "_apply_feat_transpose_v3", "(", "feat", ",", "input", ",", "filter_ksz", ")", "\n", "", "return", "_apply_feat_transpose_v2", "(", "feat", ",", "input", ",", "filter_ksz", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter._apply_feat_transpose_v1": [[76, 93], ["isinstance", "torch.conv_transpose2d", "F.conv_transpose2d.view().sum", "input.flip().view", "feat.reshape", "feat.dim", "zip", "F.conv_transpose2d.view", "input.flip"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "_apply_feat_transpose_v1", "(", "feat", ",", "input", ",", "filter_ksz", ")", ":", "\n", "    ", "\"\"\"This one is slow as hell!!!!\"\"\"", "\n", "\n", "num_images", "=", "feat", ".", "shape", "[", "0", "]", "\n", "num_sequences", "=", "feat", ".", "shape", "[", "1", "]", "if", "feat", ".", "dim", "(", ")", "==", "5", "else", "1", "\n", "feat_sz", "=", "(", "feat", ".", "shape", "[", "-", "2", "]", ",", "feat", ".", "shape", "[", "-", "1", "]", ")", "\n", "if", "isinstance", "(", "filter_ksz", ",", "int", ")", ":", "\n", "        ", "filter_ksz", "=", "(", "filter_ksz", ",", "filter_ksz", ")", "\n", "\n", "# trans_pad = sz + padding - filter_ksz", "\n", "", "trans_pad", "=", "[", "sz", "+", "ksz", "//", "2", "-", "ksz", "for", "sz", ",", "ksz", "in", "zip", "(", "feat_sz", ",", "filter_ksz", ")", "]", "\n", "\n", "filter_grad", "=", "F", ".", "conv_transpose2d", "(", "input", ".", "flip", "(", "(", "2", ",", "3", ")", ")", ".", "view", "(", "1", ",", "-", "1", ",", "input", ".", "shape", "[", "-", "2", "]", ",", "input", ".", "shape", "[", "-", "1", "]", ")", ",", "\n", "feat", ".", "reshape", "(", "-", "1", ",", "feat", ".", "shape", "[", "-", "3", "]", ",", "feat", ".", "shape", "[", "-", "2", "]", ",", "feat", ".", "shape", "[", "-", "1", "]", ")", ",", "\n", "padding", "=", "trans_pad", ",", "groups", "=", "num_images", "*", "num_sequences", ")", "\n", "\n", "return", "filter_grad", ".", "view", "(", "num_images", ",", "num_sequences", ",", "-", "1", ",", "filter_grad", ".", "shape", "[", "-", "2", "]", ",", "filter_grad", ".", "shape", "[", "-", "1", "]", ")", ".", "sum", "(", "dim", "=", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter._apply_feat_transpose_v2": [[95, 122], ["isinstance", "torch.conv2d", "F.conv2d.view().sum().flip", "input.dim", "torch.conv2d", "F.conv2d.view().sum().flip().permute", "input.reshape", "feat.reshape", "feat.dim", "input.reshape().permute", "feat.reshape", "F.conv2d.view().flip().permute", "F.conv2d.view().sum", "F.conv2d.view().sum().flip", "input.reshape", "F.conv2d.view().flip", "F.conv2d.view", "F.conv2d.view().sum", "F.conv2d.view", "F.conv2d.view"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "_apply_feat_transpose_v2", "(", "feat", ",", "input", ",", "filter_ksz", ")", ":", "\n", "    ", "\"\"\"Fast forward and slow backward\"\"\"", "\n", "\n", "multiple_filters", "=", "(", "input", ".", "dim", "(", ")", "==", "5", ")", "\n", "\n", "num_images", "=", "feat", ".", "shape", "[", "0", "]", "\n", "num_sequences", "=", "feat", ".", "shape", "[", "1", "]", "if", "feat", ".", "dim", "(", ")", "==", "5", "else", "1", "\n", "num_filters", "=", "input", ".", "shape", "[", "2", "]", "if", "multiple_filters", "else", "1", "\n", "if", "isinstance", "(", "filter_ksz", ",", "int", ")", ":", "\n", "        ", "filter_ksz", "=", "(", "filter_ksz", ",", "filter_ksz", ")", "\n", "\n", "", "trans_pad", "=", "[", "(", "ksz", "-", "1", ")", "//", "2", "for", "ksz", "in", "filter_ksz", "]", "\n", "\n", "if", "multiple_filters", ":", "\n", "        ", "filter_grad", "=", "F", ".", "conv2d", "(", "input", ".", "reshape", "(", "-", "1", ",", "num_filters", ",", "input", ".", "shape", "[", "-", "2", "]", ",", "input", ".", "shape", "[", "-", "1", "]", ")", ".", "permute", "(", "1", ",", "0", ",", "2", ",", "3", ")", ",", "\n", "feat", ".", "reshape", "(", "-", "1", ",", "1", ",", "feat", ".", "shape", "[", "-", "2", "]", ",", "feat", ".", "shape", "[", "-", "1", "]", ")", ",", "\n", "padding", "=", "trans_pad", ",", "groups", "=", "num_images", "*", "num_sequences", ")", "\n", "\n", "if", "num_images", "==", "1", ":", "\n", "            ", "return", "filter_grad", ".", "view", "(", "num_filters", ",", "num_sequences", ",", "-", "1", ",", "filter_grad", ".", "shape", "[", "-", "2", "]", ",", "filter_grad", ".", "shape", "[", "-", "1", "]", ")", ".", "flip", "(", "(", "3", ",", "4", ")", ")", ".", "permute", "(", "1", ",", "0", ",", "2", ",", "3", ",", "4", ")", "\n", "", "return", "filter_grad", ".", "view", "(", "num_filters", ",", "num_images", ",", "num_sequences", ",", "-", "1", ",", "filter_grad", ".", "shape", "[", "-", "2", "]", ",", "filter_grad", ".", "shape", "[", "-", "1", "]", ")", ".", "sum", "(", "dim", "=", "1", ")", ".", "flip", "(", "(", "3", ",", "4", ")", ")", ".", "permute", "(", "1", ",", "0", ",", "2", ",", "3", ",", "4", ")", "\n", "\n", "", "filter_grad", "=", "F", ".", "conv2d", "(", "input", ".", "reshape", "(", "1", ",", "-", "1", ",", "input", ".", "shape", "[", "-", "2", "]", ",", "input", ".", "shape", "[", "-", "1", "]", ")", ",", "\n", "feat", ".", "reshape", "(", "-", "1", ",", "1", ",", "feat", ".", "shape", "[", "-", "2", "]", ",", "feat", ".", "shape", "[", "-", "1", "]", ")", ",", "\n", "padding", "=", "trans_pad", ",", "groups", "=", "num_images", "*", "num_sequences", ")", "\n", "\n", "return", "filter_grad", ".", "view", "(", "num_images", ",", "num_sequences", ",", "-", "1", ",", "filter_grad", ".", "shape", "[", "-", "2", "]", ",", "filter_grad", ".", "shape", "[", "-", "1", "]", ")", ".", "sum", "(", "dim", "=", "0", ")", ".", "flip", "(", "(", "2", ",", "3", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter._apply_feat_transpose_v3": [[124, 149], ["isinstance", "torch.conv2d", "F.conv2d.view().sum().permute", "input.dim", "feat.reshape().permute", "input.reshape", "F.conv2d.view().sum().permute", "F.conv2d.permute", "feat.dim", "F.conv2d.view().permute", "F.conv2d.view().sum", "feat.reshape", "F.conv2d.view().sum", "F.conv2d.view", "F.conv2d.view", "F.conv2d.view"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "_apply_feat_transpose_v3", "(", "feat", ",", "input", ",", "filter_ksz", ")", ":", "\n", "    ", "\"\"\"Slow forward fast backward\"\"\"", "\n", "\n", "multiple_filters", "=", "(", "input", ".", "dim", "(", ")", "==", "5", ")", "\n", "\n", "num_images", "=", "feat", ".", "shape", "[", "0", "]", "\n", "num_sequences", "=", "feat", ".", "shape", "[", "1", "]", "if", "feat", ".", "dim", "(", ")", "==", "5", "else", "1", "\n", "num_filters", "=", "input", ".", "shape", "[", "2", "]", "if", "multiple_filters", "else", "1", "\n", "if", "isinstance", "(", "filter_ksz", ",", "int", ")", ":", "\n", "        ", "filter_ksz", "=", "(", "filter_ksz", ",", "filter_ksz", ")", "\n", "\n", "", "trans_pad", "=", "[", "ksz", "//", "2", "for", "ksz", "in", "filter_ksz", "]", "\n", "\n", "filter_grad", "=", "F", ".", "conv2d", "(", "feat", ".", "reshape", "(", "-", "1", ",", "feat", ".", "shape", "[", "-", "3", "]", ",", "feat", ".", "shape", "[", "-", "2", "]", ",", "feat", ".", "shape", "[", "-", "1", "]", ")", ".", "permute", "(", "1", ",", "0", ",", "2", ",", "3", ")", ",", "\n", "input", ".", "reshape", "(", "-", "1", ",", "1", ",", "input", ".", "shape", "[", "-", "2", "]", ",", "input", ".", "shape", "[", "-", "1", "]", ")", ",", "\n", "padding", "=", "trans_pad", ",", "groups", "=", "num_images", "*", "num_sequences", ")", "\n", "\n", "if", "multiple_filters", ":", "\n", "        ", "if", "num_images", "==", "1", ":", "\n", "            ", "return", "filter_grad", ".", "view", "(", "-", "1", ",", "num_sequences", ",", "num_filters", ",", "filter_grad", ".", "shape", "[", "-", "2", "]", ",", "filter_grad", ".", "shape", "[", "-", "1", "]", ")", ".", "permute", "(", "1", ",", "2", ",", "0", ",", "3", ",", "4", ")", "\n", "", "return", "filter_grad", ".", "view", "(", "-", "1", ",", "num_images", ",", "num_sequences", ",", "num_filters", ",", "filter_grad", ".", "shape", "[", "-", "2", "]", ",", "filter_grad", ".", "shape", "[", "-", "1", "]", ")", ".", "sum", "(", "dim", "=", "1", ")", ".", "permute", "(", "1", ",", "2", ",", "0", ",", "3", ",", "4", ")", "\n", "\n", "", "if", "num_images", "==", "1", ":", "\n", "        ", "return", "filter_grad", ".", "permute", "(", "1", ",", "0", ",", "2", ",", "3", ")", "\n", "", "return", "filter_grad", ".", "view", "(", "-", "1", ",", "num_images", ",", "num_sequences", ",", "filter_grad", ".", "shape", "[", "-", "2", "]", ",", "filter_grad", ".", "shape", "[", "-", "1", "]", ")", ".", "sum", "(", "dim", "=", "1", ")", ".", "permute", "(", "1", ",", "0", ",", "2", ",", "3", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter._apply_feat_transpose_v4": [[151, 166], ["isinstance", "torch.conv2d", "F.conv2d.permute", "feat.permute().reshape", "input.permute", "feat.dim", "feat.permute"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "_apply_feat_transpose_v4", "(", "feat", ",", "input", ",", "filter_ksz", ")", ":", "\n", "    ", "\"\"\"Slow forward fast backward\"\"\"", "\n", "\n", "num_images", "=", "feat", ".", "shape", "[", "0", "]", "\n", "num_sequences", "=", "feat", ".", "shape", "[", "1", "]", "if", "feat", ".", "dim", "(", ")", "==", "5", "else", "1", "\n", "if", "isinstance", "(", "filter_ksz", ",", "int", ")", ":", "\n", "        ", "filter_ksz", "=", "(", "filter_ksz", ",", "filter_ksz", ")", "\n", "\n", "", "trans_pad", "=", "[", "ksz", "//", "2", "for", "ksz", "in", "filter_ksz", "]", "\n", "\n", "filter_grad", "=", "F", ".", "conv2d", "(", "feat", ".", "permute", "(", "2", ",", "1", ",", "0", ",", "3", ",", "4", ")", ".", "reshape", "(", "feat", ".", "shape", "[", "-", "3", "]", ",", "-", "1", ",", "feat", ".", "shape", "[", "-", "2", "]", ",", "feat", ".", "shape", "[", "-", "1", "]", ")", ",", "\n", "input", ".", "permute", "(", "1", ",", "0", ",", "2", ",", "3", ")", ",", "\n", "padding", "=", "trans_pad", ",", "groups", "=", "num_sequences", ")", "\n", "\n", "return", "filter_grad", ".", "permute", "(", "1", ",", "0", ",", "2", ",", "3", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.filter_gradient": [[169, 184], ["filter.apply_filter", "filter.apply_feat_transpose"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_filter", "home.repos.pwc.inspect_result.researchmm_Stark.layers.filter.apply_feat_transpose"], ["", "def", "filter_gradient", "(", "feat", ",", "filter", ",", "label", "=", "None", ",", "training", "=", "True", ")", ":", "\n", "    ", "\"\"\"Computes gradient of the filter when applied on the input features and ground truth label.\n    args:\n        feat: These are the input features. Must have dimensions (images_in_sequence, sequences, feat_dim, H, W)\n        filter: The filter to apply. Must have dimensions (sequences, feat_dim, fH, fW)\n        label: Ground truth label in the L2 loss. Dimensions (images_in_sequence, sequences, yH, yW)\n    output:\n        filter_gradient: Dimensions same as input filter (sequences, feat_dim, fH, fW)\n    \"\"\"", "\n", "\n", "residuals", "=", "apply_filter", "(", "feat", ",", "filter", ")", "\n", "if", "label", "is", "not", "None", ":", "\n", "        ", "residuals", "=", "residuals", "-", "label", "\n", "", "filter_ksz", "=", "(", "filter", ".", "shape", "[", "-", "2", "]", ",", "filter", ".", "shape", "[", "-", "1", "]", ")", "\n", "return", "apply_feat_transpose", "(", "feat", ",", "residuals", ",", "filter_ksz", ",", "training", "=", "training", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.__init__": [[10, 21], ["torch.Module.__init__", "isinstance", "frozen_layers.lower", "frozen_layers.lower", "ValueError"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "frozen_layers", "=", "(", ")", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "if", "isinstance", "(", "frozen_layers", ",", "str", ")", ":", "\n", "            ", "if", "frozen_layers", ".", "lower", "(", ")", "==", "'none'", ":", "\n", "                ", "frozen_layers", "=", "(", ")", "\n", "", "elif", "frozen_layers", ".", "lower", "(", ")", "!=", "'all'", ":", "\n", "                ", "raise", "ValueError", "(", "'Unknown option for frozen layers: \\\"{}\\\". Should be \\\"all\\\", \\\"none\\\" or list of layer names.'", ".", "format", "(", "frozen_layers", ")", ")", "\n", "\n", "", "", "self", ".", "frozen_layers", "=", "frozen_layers", "\n", "self", ".", "_is_frozen_nograd", "=", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train": [[23, 30], ["super().train", "base.Backbone._set_frozen_to_eval", "base.Backbone._set_frozen_to_nograd"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone.train", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone._set_frozen_to_eval", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone._set_frozen_to_nograd"], ["", "def", "train", "(", "self", ",", "mode", "=", "True", ")", ":", "\n", "        ", "super", "(", ")", ".", "train", "(", "mode", ")", "\n", "if", "mode", "==", "True", ":", "\n", "            ", "self", ".", "_set_frozen_to_eval", "(", ")", "\n", "", "if", "not", "self", ".", "_is_frozen_nograd", ":", "\n", "            ", "self", ".", "_set_frozen_to_nograd", "(", ")", "\n", "self", ".", "_is_frozen_nograd", "=", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone._set_frozen_to_eval": [[32, 38], ["isinstance", "base.Backbone.eval", "base.Backbone.frozen_layers.lower", "getattr().eval", "getattr"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.eval", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.eval"], ["", "", "def", "_set_frozen_to_eval", "(", "self", ")", ":", "\n", "        ", "if", "isinstance", "(", "self", ".", "frozen_layers", ",", "str", ")", "and", "self", ".", "frozen_layers", ".", "lower", "(", ")", "==", "'all'", ":", "\n", "            ", "self", ".", "eval", "(", ")", "\n", "", "else", ":", "\n", "            ", "for", "layer", "in", "self", ".", "frozen_layers", ":", "\n", "                ", "getattr", "(", "self", ",", "layer", ")", ".", "eval", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.base.Backbone._set_frozen_to_nograd": [[40, 48], ["isinstance", "base.Backbone.parameters", "base.Backbone.frozen_layers.lower", "p.requires_grad_", "getattr().parameters", "p.requires_grad_", "getattr"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters", "home.repos.pwc.inspect_result.researchmm_Stark.atom.default_vot.parameters"], ["", "", "", "def", "_set_frozen_to_nograd", "(", "self", ")", ":", "\n", "        ", "if", "isinstance", "(", "self", ".", "frozen_layers", ",", "str", ")", "and", "self", ".", "frozen_layers", ".", "lower", "(", ")", "==", "'all'", ":", "\n", "            ", "for", "p", "in", "self", ".", "parameters", "(", ")", ":", "\n", "                ", "p", ".", "requires_grad_", "(", "False", ")", "\n", "", "", "else", ":", "\n", "            ", "for", "layer", "in", "self", ".", "frozen_layers", ":", "\n", "                ", "for", "p", "in", "getattr", "(", "self", ",", "layer", ")", ".", "parameters", "(", ")", ":", "\n", "                    ", "p", ".", "requires_grad_", "(", "False", ")", "", "", "", "", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.BasicBlock.__init__": [[19, 28], ["torch.Module.__init__", "resnet_seg.conv3x3", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.ReLU", "torch.ReLU", "resnet_seg.conv3x3", "torch.BatchNorm2d", "torch.BatchNorm2d"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.conv3x3", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.conv3x3"], ["def", "__init__", "(", "self", ",", "inplanes", ",", "planes", ",", "stride", "=", "1", ",", "downsample", "=", "None", ",", "dilation", "=", "1", ")", ":", "\n", "        ", "super", "(", "BasicBlock", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv1", "=", "conv3x3", "(", "inplanes", ",", "planes", ",", "stride", ",", "dilation", "=", "dilation", ")", "\n", "self", ".", "bn1", "=", "nn", ".", "BatchNorm2d", "(", "planes", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "self", ".", "conv2", "=", "conv3x3", "(", "planes", ",", "planes", ",", "dilation", "=", "dilation", ")", "\n", "self", ".", "bn2", "=", "nn", ".", "BatchNorm2d", "(", "planes", ")", "\n", "self", ".", "downsample", "=", "downsample", "\n", "self", ".", "stride", "=", "stride", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.BasicBlock.forward": [[29, 46], ["resnet_seg.BasicBlock.conv1", "resnet_seg.BasicBlock.bn1", "resnet_seg.BasicBlock.relu", "resnet_seg.BasicBlock.conv2", "resnet_seg.BasicBlock.bn2", "resnet_seg.BasicBlock.relu", "resnet_seg.BasicBlock.downsample"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "residual", "=", "x", "\n", "\n", "out", "=", "self", ".", "conv1", "(", "x", ")", "\n", "out", "=", "self", ".", "bn1", "(", "out", ")", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "out", "=", "self", ".", "conv2", "(", "out", ")", "\n", "out", "=", "self", ".", "bn2", "(", "out", ")", "\n", "\n", "if", "self", ".", "downsample", "is", "not", "None", ":", "\n", "            ", "residual", "=", "self", ".", "downsample", "(", "x", ")", "\n", "\n", "", "out", "+=", "residual", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.Bottleneck.__init__": [[51, 63], ["torch.Module.__init__", "torch.Conv2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.Conv2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.Conv2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.ReLU", "torch.ReLU"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "inplanes", ",", "planes", ",", "stride", "=", "1", ",", "downsample", "=", "None", ",", "dilation", "=", "1", ")", ":", "\n", "        ", "super", "(", "Bottleneck", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "inplanes", ",", "planes", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "bn1", "=", "nn", ".", "BatchNorm2d", "(", "planes", ")", "\n", "self", ".", "conv2", "=", "nn", ".", "Conv2d", "(", "planes", ",", "planes", ",", "kernel_size", "=", "3", ",", "stride", "=", "stride", ",", "\n", "padding", "=", "dilation", ",", "bias", "=", "False", ",", "dilation", "=", "dilation", ")", "\n", "self", ".", "bn2", "=", "nn", ".", "BatchNorm2d", "(", "planes", ")", "\n", "self", ".", "conv3", "=", "nn", ".", "Conv2d", "(", "planes", ",", "planes", "*", "4", ",", "kernel_size", "=", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "bn3", "=", "nn", ".", "BatchNorm2d", "(", "planes", "*", "4", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "self", ".", "downsample", "=", "downsample", "\n", "self", ".", "stride", "=", "stride", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.Bottleneck.forward": [[64, 85], ["resnet_seg.Bottleneck.conv1", "resnet_seg.Bottleneck.bn1", "resnet_seg.Bottleneck.relu", "resnet_seg.Bottleneck.conv2", "resnet_seg.Bottleneck.bn2", "resnet_seg.Bottleneck.relu", "resnet_seg.Bottleneck.conv3", "resnet_seg.Bottleneck.bn3", "resnet_seg.Bottleneck.relu", "resnet_seg.Bottleneck.downsample"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "residual", "=", "x", "\n", "\n", "out", "=", "self", ".", "conv1", "(", "x", ")", "\n", "out", "=", "self", ".", "bn1", "(", "out", ")", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "out", "=", "self", ".", "conv2", "(", "out", ")", "\n", "out", "=", "self", ".", "bn2", "(", "out", ")", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "out", "=", "self", ".", "conv3", "(", "out", ")", "\n", "out", "=", "self", ".", "bn3", "(", "out", ")", "\n", "\n", "if", "self", ".", "downsample", "is", "not", "None", ":", "\n", "            ", "residual", "=", "self", ".", "downsample", "(", "x", ")", "\n", "\n", "", "out", "+=", "residual", "\n", "out", "=", "self", ".", "relu", "(", "out", ")", "\n", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.ResNet.__init__": [[89, 121], ["torch.Module.__init__", "torch.Conv2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.ReLU", "torch.ReLU", "torch.MaxPool2d", "torch.MaxPool2d", "resnet_seg.ResNet._make_layer", "resnet_seg.ResNet._make_layer", "resnet_seg.ResNet._make_layer", "resnet_seg.ResNet._make_layer", "torch.AdaptiveAvgPool2d", "torch.AdaptiveAvgPool2d", "torch.Linear", "torch.Linear", "resnet_seg.ResNet.modules", "collections.OrderedDict", "isinstance", "max", "max", "max", "m.weight.data.normal_", "isinstance", "ltr.models.head.utils.get_out_channels", "ltr.models.head.utils.get_out_channels", "ltr.models.head.utils.get_out_channels", "ltr.models.head.utils.get_out_channels", "ltr.models.head.utils.get_out_channels", "math.sqrt", "m.weight.data.fill_", "m.bias.data.zero_"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._make_layer", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._make_layer", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._make_layer", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._make_layer", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.ResNet.get_out_channels", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.ResNet.get_out_channels", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.ResNet.get_out_channels", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.ResNet.get_out_channels", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.ResNet.get_out_channels"], ["def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "output_layers", ",", "num_classes", "=", "1000", ",", "inplanes", "=", "64", ",", "dilation_factor", "=", "1", ")", ":", "\n", "        ", "self", ".", "inplanes", "=", "inplanes", "\n", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "output_layers", "=", "output_layers", "\n", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "3", ",", "inplanes", ",", "kernel_size", "=", "7", ",", "stride", "=", "2", ",", "padding", "=", "3", ",", "\n", "bias", "=", "False", ")", "\n", "self", ".", "bn1", "=", "nn", ".", "BatchNorm2d", "(", "inplanes", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ")", "\n", "stride", "=", "[", "1", "+", "(", "dilation_factor", "<", "l", ")", "for", "l", "in", "(", "8", ",", "4", ",", "2", ")", "]", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "inplanes", ",", "layers", "[", "0", "]", ",", "dilation", "=", "max", "(", "dilation_factor", "//", "8", ",", "1", ")", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "inplanes", "*", "2", ",", "layers", "[", "1", "]", ",", "stride", "=", "stride", "[", "0", "]", ",", "dilation", "=", "max", "(", "dilation_factor", "//", "4", ",", "1", ")", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "inplanes", "*", "4", ",", "layers", "[", "2", "]", ",", "stride", "=", "stride", "[", "1", "]", ",", "dilation", "=", "max", "(", "dilation_factor", "//", "2", ",", "1", ")", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "inplanes", "*", "8", ",", "layers", "[", "3", "]", ",", "stride", "=", "stride", "[", "2", "]", ",", "dilation", "=", "dilation_factor", ")", "\n", "# self.avgpool = nn.AvgPool2d(7, stride=1)", "\n", "self", ".", "avgpool", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "(", "1", ",", "1", ")", ")", "\n", "self", ".", "fc", "=", "nn", ".", "Linear", "(", "inplanes", "*", "8", "*", "block", ".", "expansion", ",", "num_classes", ")", "\n", "\n", "for", "m", "in", "self", ".", "modules", "(", ")", ":", "\n", "            ", "if", "isinstance", "(", "m", ",", "nn", ".", "Conv2d", ")", ":", "\n", "                ", "n", "=", "m", ".", "kernel_size", "[", "0", "]", "*", "m", ".", "kernel_size", "[", "1", "]", "*", "m", ".", "out_channels", "\n", "m", ".", "weight", ".", "data", ".", "normal_", "(", "0", ",", "math", ".", "sqrt", "(", "2.", "/", "n", ")", ")", "\n", "", "elif", "isinstance", "(", "m", ",", "nn", ".", "BatchNorm2d", ")", ":", "\n", "                ", "m", ".", "weight", ".", "data", ".", "fill_", "(", "1", ")", "\n", "m", ".", "bias", ".", "data", ".", "zero_", "(", ")", "\n", "", "", "'''2020.4.14 newly added'''", "\n", "self", ".", "_out_channels", "=", "odict", "(", "# Deep-to-shallow order is required by SegNetwork", "\n", "layer5", "=", "get_out_channels", "(", "self", ".", "layer4", ")", ",", "\n", "layer4", "=", "get_out_channels", "(", "self", ".", "layer3", ")", ",", "\n", "layer3", "=", "get_out_channels", "(", "self", ".", "layer2", ")", ",", "\n", "layer2", "=", "get_out_channels", "(", "self", ".", "layer1", ")", ",", "\n", "layer1", "=", "get_out_channels", "(", "self", ".", "conv1", ")", ")", "\n", "", "def", "_make_layer", "(", "self", ",", "block", ",", "planes", ",", "blocks", ",", "stride", "=", "1", ",", "dilation", "=", "1", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.ResNet._make_layer": [[121, 137], ["layers.append", "range", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "block", "layers.append", "torch.Conv2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "block"], "methods", ["None"], ["", "def", "_make_layer", "(", "self", ",", "block", ",", "planes", ",", "blocks", ",", "stride", "=", "1", ",", "dilation", "=", "1", ")", ":", "\n", "        ", "downsample", "=", "None", "\n", "if", "stride", "!=", "1", "or", "self", ".", "inplanes", "!=", "planes", "*", "block", ".", "expansion", ":", "\n", "            ", "downsample", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "self", ".", "inplanes", ",", "planes", "*", "block", ".", "expansion", ",", "\n", "kernel_size", "=", "1", ",", "stride", "=", "stride", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm2d", "(", "planes", "*", "block", ".", "expansion", ")", ",", "\n", ")", "\n", "\n", "", "layers", "=", "[", "]", "\n", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "stride", ",", "downsample", ",", "dilation", "=", "dilation", ")", ")", "\n", "self", ".", "inplanes", "=", "planes", "*", "block", ".", "expansion", "\n", "for", "i", "in", "range", "(", "1", ",", "blocks", ")", ":", "\n", "            ", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ")", ")", "\n", "\n", "", "return", "nn", ".", "Sequential", "(", "*", "layers", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.ResNet._add_output_and_check": [[138, 142], ["len", "len"], "methods", ["None"], ["", "def", "_add_output_and_check", "(", "self", ",", "name", ",", "x", ",", "outputs", ",", "output_layers", ")", ":", "\n", "        ", "if", "name", "in", "output_layers", ":", "\n", "            ", "outputs", "[", "name", "]", "=", "x", "\n", "", "return", "len", "(", "output_layers", ")", "==", "len", "(", "outputs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.ResNet.forward": [[143, 188], ["collections.OrderedDict", "resnet_seg.ResNet.conv1", "resnet_seg.ResNet.bn1", "resnet_seg.ResNet.relu", "resnet_seg.ResNet.maxpool", "resnet_seg.ResNet._add_output_and_check", "resnet_seg.ResNet.layer1", "resnet_seg.ResNet._add_output_and_check", "resnet_seg.ResNet.layer2", "resnet_seg.ResNet._add_output_and_check", "resnet_seg.ResNet.layer3", "resnet_seg.ResNet._add_output_and_check", "resnet_seg.ResNet.layer4", "resnet_seg.ResNet._add_output_and_check", "resnet_seg.ResNet.avgpool", "resnet_seg.ResNet.view", "resnet_seg.ResNet.fc", "resnet_seg.ResNet._add_output_and_check", "ValueError", "resnet_seg.ResNet.size", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size"], ["", "def", "forward", "(", "self", ",", "x", ",", "output_layers", "=", "None", ")", ":", "\n", "        ", "\"\"\" Forward pass with input x. The output_layers specify the feature blocks which must be returned \"\"\"", "\n", "outputs", "=", "OrderedDict", "(", ")", "\n", "\n", "if", "output_layers", "is", "None", ":", "\n", "            ", "output_layers", "=", "self", ".", "output_layers", "\n", "\n", "", "x", "=", "self", ".", "conv1", "(", "x", ")", "\n", "x", "=", "self", ".", "bn1", "(", "x", ")", "\n", "x", "=", "self", ".", "relu", "(", "x", ")", "\n", "x", "=", "self", ".", "maxpool", "(", "x", ")", "# conv1: (batch,64,128,128)", "\n", "'''2020.4.14 change names for every layers'''", "\n", "if", "self", ".", "_add_output_and_check", "(", "'layer1'", ",", "x", ",", "outputs", ",", "output_layers", ")", ":", "\n", "            ", "return", "outputs", "\n", "\n", "", "x", "=", "self", ".", "layer1", "(", "x", ")", "# (batch,256,64,64)", "\n", "if", "self", ".", "_add_output_and_check", "(", "'layer2'", ",", "x", ",", "outputs", ",", "output_layers", ")", ":", "\n", "            ", "return", "outputs", "\n", "\n", "", "x", "=", "self", ".", "layer2", "(", "x", ")", "# (batch,512,32,32)", "\n", "\n", "if", "self", ".", "_add_output_and_check", "(", "'layer3'", ",", "x", ",", "outputs", ",", "output_layers", ")", ":", "\n", "            ", "return", "outputs", "\n", "\n", "", "x", "=", "self", ".", "layer3", "(", "x", ")", "# (batch,1024,16,16)", "\n", "\n", "if", "self", ".", "_add_output_and_check", "(", "'layer4'", ",", "x", ",", "outputs", ",", "output_layers", ")", ":", "\n", "            ", "return", "outputs", "\n", "\n", "", "x", "=", "self", ".", "layer4", "(", "x", ")", "\n", "\n", "if", "self", ".", "_add_output_and_check", "(", "'layer5'", ",", "x", ",", "outputs", ",", "output_layers", ")", ":", "\n", "            ", "return", "outputs", "\n", "\n", "", "x", "=", "self", ".", "avgpool", "(", "x", ")", "\n", "x", "=", "x", ".", "view", "(", "x", ".", "size", "(", "0", ")", ",", "-", "1", ")", "\n", "x", "=", "self", ".", "fc", "(", "x", ")", "\n", "\n", "if", "self", ".", "_add_output_and_check", "(", "'fc'", ",", "x", ",", "outputs", ",", "output_layers", ")", ":", "\n", "            ", "return", "outputs", "\n", "\n", "", "if", "len", "(", "output_layers", ")", "==", "1", "and", "output_layers", "[", "0", "]", "==", "'default'", ":", "\n", "            ", "return", "x", "\n", "\n", "", "raise", "ValueError", "(", "'output_layer is wrong.'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.ResNet.get_out_channels": [[190, 192], ["None"], "methods", ["None"], ["def", "get_out_channels", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "_out_channels", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.conv3x3": [[10, 14], ["torch.Conv2d"], "function", ["None"], ["def", "conv3x3", "(", "in_planes", ",", "out_planes", ",", "stride", "=", "1", ",", "dilation", "=", "1", ")", ":", "\n", "    ", "\"\"\"3x3 convolution with padding\"\"\"", "\n", "return", "nn", ".", "Conv2d", "(", "in_planes", ",", "out_planes", ",", "kernel_size", "=", "3", ",", "stride", "=", "stride", ",", "\n", "padding", "=", "dilation", ",", "bias", "=", "False", ",", "dilation", "=", "dilation", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.resnet18": [[194, 210], ["resnet_seg.ResNet", "ResNet.load_state_dict", "torch.load_url", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict"], ["", "", "def", "resnet18", "(", "output_layers", "=", "None", ",", "pretrained", "=", "False", ",", "dilation_factor", "=", "1", ")", ":", "\n", "    ", "\"\"\"Constructs a ResNet-18 model.\n    \"\"\"", "\n", "\n", "if", "output_layers", "is", "None", ":", "\n", "        ", "output_layers", "=", "[", "'default'", "]", "\n", "", "else", ":", "\n", "        ", "for", "l", "in", "output_layers", ":", "\n", "            ", "if", "l", "not", "in", "[", "'conv1'", ",", "'layer1'", ",", "'layer2'", ",", "'layer3'", ",", "'layer4'", ",", "'fc'", "]", ":", "\n", "                ", "raise", "ValueError", "(", "'Unknown layer: {}'", ".", "format", "(", "l", ")", ")", "\n", "\n", "", "", "", "model", "=", "ResNet", "(", "BasicBlock", ",", "[", "2", ",", "2", ",", "2", ",", "2", "]", ",", "output_layers", ",", "dilation_factor", "=", "dilation_factor", ")", "\n", "\n", "if", "pretrained", ":", "\n", "        ", "model", ".", "load_state_dict", "(", "model_zoo", ".", "load_url", "(", "model_urls", "[", "'resnet18'", "]", ")", ")", "\n", "", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.resnet50": [[212, 227], ["resnet_seg.ResNet", "ResNet.load_state_dict", "torch.load_url", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict"], ["", "def", "resnet50", "(", "output_layers", "=", "None", ",", "pretrained", "=", "False", ",", "dilation_factor", "=", "1", ")", ":", "\n", "    ", "\"\"\"Constructs a ResNet-50 model.\n    \"\"\"", "\n", "\n", "if", "output_layers", "is", "None", ":", "\n", "        ", "output_layers", "=", "[", "'default'", "]", "\n", "", "else", ":", "\n", "        ", "for", "l", "in", "output_layers", ":", "\n", "            ", "if", "l", "not", "in", "[", "'conv1'", ",", "'layer1'", ",", "'layer2'", ",", "'layer3'", ",", "'layer4'", ",", "'fc'", "]", ":", "\n", "                ", "raise", "ValueError", "(", "'Unknown layer: {}'", ".", "format", "(", "l", ")", ")", "\n", "\n", "", "", "", "model", "=", "ResNet", "(", "Bottleneck", ",", "[", "3", ",", "4", ",", "6", ",", "3", "]", ",", "output_layers", ",", "dilation_factor", "=", "dilation_factor", ")", "\n", "if", "pretrained", ":", "\n", "        ", "model", ".", "load_state_dict", "(", "model_zoo", ".", "load_url", "(", "model_urls", "[", "'resnet50'", "]", ")", ")", "\n", "", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet_seg.resnet101": [[229, 244], ["resnet_seg.ResNet", "ResNet.load_state_dict", "torch.load_url", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict"], ["def", "resnet101", "(", "output_layers", "=", "None", ",", "pretrained", "=", "False", ",", "dilation_factor", "=", "1", ")", ":", "\n", "    ", "\"\"\"Constructs a ResNet-101 model.\n    \"\"\"", "\n", "\n", "if", "output_layers", "is", "None", ":", "\n", "        ", "output_layers", "=", "[", "'default'", "]", "\n", "", "else", ":", "\n", "        ", "for", "l", "in", "output_layers", ":", "\n", "            ", "if", "l", "not", "in", "[", "'conv1'", ",", "'layer1'", ",", "'layer2'", ",", "'layer3'", ",", "'layer4'", ",", "'fc'", "]", ":", "\n", "                ", "raise", "ValueError", "(", "'Unknown layer: {}'", ".", "format", "(", "l", ")", ")", "\n", "\n", "", "", "", "model", "=", "ResNet", "(", "Bottleneck", ",", "[", "3", ",", "4", ",", "23", ",", "3", "]", ",", "output_layers", ",", "dilation_factor", "=", "dilation_factor", ")", "\n", "if", "pretrained", ":", "\n", "        ", "model", ".", "load_state_dict", "(", "model_zoo", ".", "load_url", "(", "model_urls", "[", "'resnet101'", "]", ")", ")", "\n", "", "return", "model", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.BasicBlock.__init__": [[18, 32], ["torch.Module.__init__", "resnet.conv3x3", "torch.ReLU", "torch.ReLU", "resnet.conv3x3", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.BatchNorm2d"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.conv3x3", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.conv3x3"], ["'resnet101'", ":", "'https://download.pytorch.org/models/resnet101-5d3b4d8f.pth'", ",", "\n", "'resnet152'", ":", "'https://download.pytorch.org/models/resnet152-b121ed2d.pth'", ",", "\n", "'resnext50_32x4d'", ":", "'https://download.pytorch.org/models/resnext50_32x4d-7cdf4587.pth'", ",", "\n", "'resnext101_32x8d'", ":", "'https://download.pytorch.org/models/resnext101_32x8d-8ba56ff5.pth'", ",", "\n", "'wide_resnet50_2'", ":", "'https://download.pytorch.org/models/wide_resnet50_2-95faca4d.pth'", ",", "\n", "'wide_resnet101_2'", ":", "'https://download.pytorch.org/models/wide_resnet101_2-32ee1156.pth'", ",", "\n", "}", "\n", "\n", "\n", "class", "ResNet", "(", "nn", ".", "Module", ")", ":", "\n", "\n", "    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "num_classes", "=", "1000", ",", "zero_init_residual", "=", "False", ",", "\n", "groups", "=", "1", ",", "width_per_group", "=", "64", ",", "replace_stride_with_dilation", "=", "None", ",", "\n", "norm_layer", "=", "None", ",", "last_layer", "=", "None", ")", ":", "\n", "        ", "super", "(", "ResNet", ",", "self", ")", ".", "__init__", "(", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.BasicBlock.forward": [[33, 54], ["resnet.BasicBlock.conv1", "resnet.BasicBlock.relu", "resnet.BasicBlock.conv2", "resnet.BasicBlock.relu", "resnet.BasicBlock.bn1", "resnet.BasicBlock.bn2", "resnet.BasicBlock.downsample"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu"], ["assert", "last_layer", "in", "[", "'layer1'", ",", "'layer2'", ",", "'layer3'", ",", "'layer4'", ",", "'fc'", "]", "\n", "self", ".", "last_layer", "=", "last_layer", "\n", "if", "norm_layer", "is", "None", ":", "\n", "            ", "norm_layer", "=", "nn", ".", "BatchNorm2d", "\n", "", "self", ".", "_norm_layer", "=", "norm_layer", "\n", "\n", "self", ".", "inplanes", "=", "64", "\n", "self", ".", "dilation", "=", "1", "\n", "if", "replace_stride_with_dilation", "is", "None", ":", "\n", "# each element in the tuple indicates if we should replace", "\n", "# the 2x2 stride with a dilated convolution instead", "\n", "            ", "replace_stride_with_dilation", "=", "[", "False", ",", "False", ",", "False", "]", "\n", "", "if", "len", "(", "replace_stride_with_dilation", ")", "!=", "3", ":", "\n", "            ", "raise", "ValueError", "(", "\"replace_stride_with_dilation should be None \"", "\n", "\"or a 3-element tuple, got {}\"", ".", "format", "(", "replace_stride_with_dilation", ")", ")", "\n", "", "self", ".", "groups", "=", "groups", "\n", "self", ".", "base_width", "=", "width_per_group", "\n", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "3", ",", "self", ".", "inplanes", ",", "kernel_size", "=", "7", ",", "stride", "=", "2", ",", "padding", "=", "3", ",", "\n", "bias", "=", "False", ")", "\n", "self", ".", "bn1", "=", "norm_layer", "(", "self", ".", "inplanes", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.Bottleneck.__init__": [[59, 71], ["torch.Module.__init__", "torch.Conv2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.Conv2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.Conv2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.ReLU", "torch.ReLU"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["if", "self", ".", "last_layer", "!=", "'layer2'", ":", "\n", "                ", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "2", ",", "\n", "dilate", "=", "replace_stride_with_dilation", "[", "1", "]", ")", "\n", "if", "self", ".", "last_layer", "!=", "'layer3'", ":", "\n", "                    ", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "2", ",", "\n", "dilate", "=", "replace_stride_with_dilation", "[", "2", "]", ")", "\n", "if", "self", ".", "last_layer", "!=", "'layer4'", ":", "\n", "                        ", "self", ".", "avgpool", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "(", "1", ",", "1", ")", ")", "\n", "self", ".", "fc", "=", "nn", ".", "Linear", "(", "512", "*", "block", ".", "expansion", ",", "num_classes", ")", "\n", "\n", "", "", "", "", "for", "m", "in", "self", ".", "modules", "(", ")", ":", "\n", "            ", "if", "isinstance", "(", "m", ",", "nn", ".", "Conv2d", ")", ":", "\n", "                ", "nn", ".", "init", ".", "kaiming_normal_", "(", "m", ".", "weight", ",", "mode", "=", "'fan_out'", ",", "nonlinearity", "=", "'relu'", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.Bottleneck.forward": [[72, 93], ["resnet.Bottleneck.conv1", "resnet.Bottleneck.bn1", "resnet.Bottleneck.relu", "resnet.Bottleneck.conv2", "resnet.Bottleneck.bn2", "resnet.Bottleneck.relu", "resnet.Bottleneck.conv3", "resnet.Bottleneck.bn3", "resnet.Bottleneck.relu", "resnet.Bottleneck.downsample"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu"], ["", "elif", "isinstance", "(", "m", ",", "(", "nn", ".", "BatchNorm2d", ",", "nn", ".", "GroupNorm", ")", ")", ":", "\n", "                ", "nn", ".", "init", ".", "constant_", "(", "m", ".", "weight", ",", "1", ")", "\n", "nn", ".", "init", ".", "constant_", "(", "m", ".", "bias", ",", "0", ")", "\n", "\n", "# Zero-initialize the last BN in each residual branch,", "\n", "# so that the residual branch starts with zeros, and each residual block behaves like an identity.", "\n", "# This improves the model by 0.2~0.3% according to https://arxiv.org/abs/1706.02677", "\n", "", "", "if", "zero_init_residual", ":", "\n", "            ", "for", "m", "in", "self", ".", "modules", "(", ")", ":", "\n", "                ", "if", "isinstance", "(", "m", ",", "Bottleneck", ")", ":", "\n", "                    ", "nn", ".", "init", ".", "constant_", "(", "m", ".", "bn3", ".", "weight", ",", "0", ")", "\n", "", "elif", "isinstance", "(", "m", ",", "BasicBlock", ")", ":", "\n", "                    ", "nn", ".", "init", ".", "constant_", "(", "m", ".", "bn2", ".", "weight", ",", "0", ")", "\n", "\n", "", "", "", "", "def", "_make_layer", "(", "self", ",", "block", ",", "planes", ",", "blocks", ",", "stride", "=", "1", ",", "dilate", "=", "False", ")", ":", "\n", "        ", "norm_layer", "=", "self", ".", "_norm_layer", "\n", "downsample", "=", "None", "\n", "previous_dilation", "=", "self", ".", "dilation", "\n", "if", "dilate", ":", "\n", "            ", "self", ".", "dilation", "*=", "stride", "\n", "stride", "=", "1", "\n", "", "if", "stride", "!=", "1", "or", "self", ".", "inplanes", "!=", "planes", "*", "block", ".", "expansion", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.ResNet.__init__": [[97, 140], ["base.Backbone.__init__", "torch.Conv2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.ReLU", "torch.ReLU", "torch.MaxPool2d", "torch.MaxPool2d", "resnet.ResNet._make_layer", "resnet.ResNet._make_layer", "resnet.ResNet._make_layer", "resnet.ResNet._make_layer", "isinstance", "torch.AdaptiveAvgPool2d", "torch.AdaptiveAvgPool2d", "torch.Linear", "torch.Linear", "resnet.ResNet.modules", "isinstance", "isinstance", "max", "max", "max", "Exception", "m.weight.data.normal_", "isinstance", "math.sqrt", "m.weight.data.fill_", "m.bias.data.zero_"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._make_layer", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._make_layer", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._make_layer", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._make_layer", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max", "home.repos.pwc.inspect_result.researchmm_Stark.utils.misc.SmoothedValue.max"], [")", "\n", "\n", "", "layers", "=", "[", "]", "\n", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "stride", ",", "downsample", ",", "self", ".", "groups", ",", "\n", "self", ".", "base_width", ",", "previous_dilation", ",", "norm_layer", ")", ")", "\n", "self", ".", "inplanes", "=", "planes", "*", "block", ".", "expansion", "\n", "for", "_", "in", "range", "(", "1", ",", "blocks", ")", ":", "\n", "            ", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "groups", "=", "self", ".", "groups", ",", "\n", "base_width", "=", "self", ".", "base_width", ",", "dilation", "=", "self", ".", "dilation", ",", "\n", "norm_layer", "=", "norm_layer", ")", ")", "\n", "\n", "", "return", "nn", ".", "Sequential", "(", "*", "layers", ")", "\n", "\n", "", "def", "_forward_impl", "(", "self", ",", "x", ")", ":", "\n", "# See note [TorchScript super()]", "\n", "        ", "x", "=", "self", ".", "conv1", "(", "x", ")", "\n", "x", "=", "self", ".", "bn1", "(", "x", ")", "\n", "x", "=", "self", ".", "relu", "(", "x", ")", "\n", "x", "=", "self", ".", "maxpool", "(", "x", ")", "\n", "\n", "x", "=", "self", ".", "layer1", "(", "x", ")", "\n", "if", "self", ".", "last_layer", "!=", "'layer1'", ":", "\n", "            ", "x", "=", "self", ".", "layer2", "(", "x", ")", "\n", "if", "self", ".", "last_layer", "!=", "'layer2'", ":", "\n", "                ", "x", "=", "self", ".", "layer3", "(", "x", ")", "\n", "if", "self", ".", "last_layer", "!=", "'layer3'", ":", "\n", "                    ", "x", "=", "self", ".", "layer4", "(", "x", ")", "\n", "if", "self", ".", "last_layer", "!=", "'layer4'", ":", "\n", "                        ", "x", "=", "self", ".", "avgpool", "(", "x", ")", "\n", "x", "=", "torch", ".", "flatten", "(", "x", ",", "1", ")", "\n", "x", "=", "self", ".", "fc", "(", "x", ")", "\n", "\n", "", "", "", "", "return", "x", "\n", "\n", "", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "self", ".", "_forward_impl", "(", "x", ")", "\n", "\n", "\n", "", "", "def", "_resnet", "(", "arch", ",", "block", ",", "layers", ",", "pretrained", ",", "progress", ",", "**", "kwargs", ")", ":", "\n", "    ", "model", "=", "ResNet", "(", "block", ",", "layers", ",", "**", "kwargs", ")", "\n", "if", "pretrained", ":", "\n", "        ", "state_dict", "=", "load_state_dict_from_url", "(", "model_urls", "[", "arch", "]", ",", "\n", "progress", "=", "progress", ")", "\n", "try", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.ResNet.out_feature_strides": [[141, 146], ["None"], "methods", ["None"], ["            ", "model", ".", "load_state_dict", "(", "state_dict", ")", "\n", "", "except", ":", "\n", "# model_keys = model.state_dict().keys()", "\n", "# checkpoint_keys = state_dict.keys()", "\n", "# for key in model_keys:", "\n", "#     if key not in checkpoint_keys:", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.ResNet.out_feature_channels": [[147, 152], ["None"], "methods", ["None"], ["#         print(\"key %s is not found in the checkpoint.\" % key)", "\n", "# for key in checkpoint_keys:", "\n", "#     if key not in model_keys:", "\n", "#         print(\"the checkpoint contains additional key %s\" % key)", "\n", "            ", "model", ".", "load_state_dict", "(", "state_dict", ",", "strict", "=", "False", ")", "\n", "", "", "return", "model", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.ResNet._make_layer": [[153, 169], ["layers.append", "range", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "block", "layers.append", "torch.Conv2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "block"], "methods", ["None"], ["\n", "\n", "", "def", "resnet18", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    ", "r\"\"\"ResNet-18 model from\n    `\"Deep Residual Learning for Image Recognition\" <https://arxiv.org/pdf/1512.03385.pdf>`_\n\n    Args:\n        pretrained (bool): If True, returns a model pre-trained on ImageNet\n        progress (bool): If True, displays a progress bar of the download to stderr\n    \"\"\"", "\n", "return", "_resnet", "(", "'resnet18'", ",", "BasicBlock", ",", "[", "2", ",", "2", ",", "2", ",", "2", "]", ",", "pretrained", ",", "progress", ",", "\n", "**", "kwargs", ")", "\n", "\n", "\n", "", "def", "resnet34", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    "]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.ResNet._add_output_and_check": [[170, 174], ["len", "len"], "methods", ["None"], ["\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.ResNet.forward": [[175, 222], ["collections.OrderedDict", "resnet.ResNet.conv1", "resnet.ResNet.bn1", "resnet.ResNet.relu", "resnet.ResNet._add_output_and_check", "resnet.ResNet.maxpool", "resnet.ResNet.layer1", "resnet.ResNet._add_output_and_check", "resnet.ResNet.layer2", "resnet.ResNet._add_output_and_check", "resnet.ResNet.layer3", "resnet.ResNet._add_output_and_check", "resnet.ResNet.layer4", "resnet.ResNet._add_output_and_check", "resnet.ResNet.avgpool", "resnet.ResNet.view", "resnet.ResNet.fc", "resnet.ResNet._add_output_and_check", "ValueError", "resnet.ResNet.size", "len"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size"], ["return", "_resnet", "(", "'resnet34'", ",", "BasicBlock", ",", "[", "3", ",", "4", ",", "6", ",", "3", "]", ",", "pretrained", ",", "progress", ",", "\n", "**", "kwargs", ")", "\n", "\n", "\n", "", "def", "resnet50", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    ", "r\"\"\"ResNet-50 model from\n    `\"Deep Residual Learning for Image Recognition\" <https://arxiv.org/pdf/1512.03385.pdf>`_\n\n    Args:\n        pretrained (bool): If True, returns a model pre-trained on ImageNet\n        progress (bool): If True, displays a progress bar of the download to stderr\n    \"\"\"", "\n", "return", "_resnet", "(", "'resnet50'", ",", "Bottleneck", ",", "[", "3", ",", "4", ",", "6", ",", "3", "]", ",", "pretrained", ",", "progress", ",", "\n", "**", "kwargs", ")", "\n", "\n", "\n", "", "def", "resnet101", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    ", "r\"\"\"ResNet-101 model from\n    `\"Deep Residual Learning for Image Recognition\" <https://arxiv.org/pdf/1512.03385.pdf>`_\n\n    Args:\n        pretrained (bool): If True, returns a model pre-trained on ImageNet\n        progress (bool): If True, displays a progress bar of the download to stderr\n    \"\"\"", "\n", "return", "_resnet", "(", "'resnet101'", ",", "Bottleneck", ",", "[", "3", ",", "4", ",", "23", ",", "3", "]", ",", "pretrained", ",", "progress", ",", "\n", "**", "kwargs", ")", "\n", "\n", "\n", "", "def", "resnet152", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    ", "r\"\"\"ResNet-152 model from\n    `\"Deep Residual Learning for Image Recognition\" <https://arxiv.org/pdf/1512.03385.pdf>`_\n\n    Args:\n        pretrained (bool): If True, returns a model pre-trained on ImageNet\n        progress (bool): If True, displays a progress bar of the download to stderr\n    \"\"\"", "\n", "return", "_resnet", "(", "'resnet152'", ",", "Bottleneck", ",", "[", "3", ",", "8", ",", "36", ",", "3", "]", ",", "pretrained", ",", "progress", ",", "\n", "**", "kwargs", ")", "\n", "\n", "\n", "", "def", "resnext50_32x4d", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    ", "r\"\"\"ResNeXt-50 32x4d model from\n    `\"Aggregated Residual Transformation for Deep Neural Networks\" <https://arxiv.org/pdf/1611.05431.pdf>`_\n\n    Args:\n        pretrained (bool): If True, returns a model pre-trained on ImageNet\n        progress (bool): If True, displays a progress bar of the download to stderr\n    \"\"\"", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.conv3x3": [[9, 13], ["torch.Conv2d"], "function", ["None"], ["__all__", "=", "[", "'ResNet'", ",", "'resnet18'", ",", "'resnet34'", ",", "'resnet50'", ",", "'resnet101'", ",", "\n", "'resnet152'", ",", "'resnext50_32x4d'", ",", "'resnext101_32x8d'", ",", "\n", "'wide_resnet50_2'", ",", "'wide_resnet101_2'", "]", "\n", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.resnet_baby": [[224, 240], ["resnet.ResNet", "ValueError"], "function", ["None"], ["kwargs", "[", "'width_per_group'", "]", "=", "4", "\n", "return", "_resnet", "(", "'resnext50_32x4d'", ",", "Bottleneck", ",", "[", "3", ",", "4", ",", "6", ",", "3", "]", ",", "\n", "pretrained", ",", "progress", ",", "**", "kwargs", ")", "\n", "\n", "\n", "", "def", "resnext101_32x8d", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    ", "r\"\"\"ResNeXt-101 32x8d model from\n    `\"Aggregated Residual Transformation for Deep Neural Networks\" <https://arxiv.org/pdf/1611.05431.pdf>`_\n\n    Args:\n        pretrained (bool): If True, returns a model pre-trained on ImageNet\n        progress (bool): If True, displays a progress bar of the download to stderr\n    \"\"\"", "\n", "kwargs", "[", "'groups'", "]", "=", "32", "\n", "kwargs", "[", "'width_per_group'", "]", "=", "8", "\n", "return", "_resnet", "(", "'resnext101_32x8d'", ",", "Bottleneck", ",", "[", "3", ",", "4", ",", "23", ",", "3", "]", ",", "\n", "pretrained", ",", "progress", ",", "**", "kwargs", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.resnet18": [[242, 258], ["resnet.ResNet", "ResNet.load_state_dict", "torch.load_url", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict"], ["\n", "", "def", "wide_resnet50_2", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    ", "r\"\"\"Wide ResNet-50-2 model from\n    `\"Wide Residual Networks\" <https://arxiv.org/pdf/1605.07146.pdf>`_\n\n    The model is the same as ResNet except for the bottleneck number of channels\n    which is twice larger in every block. The number of channels in outer 1x1\n    convolutions is the same, e.g. last block in ResNet-50 has 2048-512-2048\n    channels, and in Wide ResNet-50-2 has 2048-1024-2048.\n\n    Args:\n        pretrained (bool): If True, returns a model pre-trained on ImageNet\n        progress (bool): If True, displays a progress bar of the download to stderr\n    \"\"\"", "\n", "kwargs", "[", "'width_per_group'", "]", "=", "64", "*", "2", "\n", "return", "_resnet", "(", "'wide_resnet50_2'", ",", "Bottleneck", ",", "[", "3", ",", "4", ",", "6", ",", "3", "]", ",", "\n", "pretrained", ",", "progress", ",", "**", "kwargs", ")", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet.resnet50": [[260, 275], ["resnet.ResNet", "ResNet.load_state_dict", "torch.load_url", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict"], ["\n", "", "def", "wide_resnet101_2", "(", "pretrained", "=", "False", ",", "progress", "=", "True", ",", "**", "kwargs", ")", ":", "\n", "    ", "r\"\"\"Wide ResNet-101-2 model from\n    `\"Wide Residual Networks\" <https://arxiv.org/pdf/1605.07146.pdf>`_\n\n    The model is the same as ResNet except for the bottleneck number of channels\n    which is twice larger in every block. The number of channels in outer 1x1\n    convolutions is the same, e.g. last block in ResNet-50 has 2048-512-2048\n    channels, and in Wide ResNet-50-2 has 2048-1024-2048.\n\n    Args:\n        pretrained (bool): If True, returns a model pre-trained on ImageNet\n        progress (bool): If True, displays a progress bar of the download to stderr\n    \"\"\"", "\n", "kwargs", "[", "'width_per_group'", "]", "=", "64", "*", "2", "\n", "return", "_resnet", "(", "'wide_resnet101_2'", ",", "Bottleneck", ",", "[", "3", ",", "4", ",", "23", ",", "3", "]", ",", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.SpatialCrossMapLRN.__init__": [[10, 24], ["torch.Module.__init__", "torch.AvgPool3d", "torch.AvgPool3d", "torch.AvgPool2d", "torch.AvgPool2d", "int", "int"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "local_size", "=", "1", ",", "alpha", "=", "1.0", ",", "beta", "=", "0.75", ",", "k", "=", "1", ",", "ACROSS_CHANNELS", "=", "True", ")", ":", "\n", "        ", "super", "(", "SpatialCrossMapLRN", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "ACROSS_CHANNELS", "=", "ACROSS_CHANNELS", "\n", "if", "ACROSS_CHANNELS", ":", "\n", "            ", "self", ".", "average", "=", "nn", ".", "AvgPool3d", "(", "kernel_size", "=", "(", "local_size", ",", "1", ",", "1", ")", ",", "\n", "stride", "=", "1", ",", "\n", "padding", "=", "(", "int", "(", "(", "local_size", "-", "1.0", ")", "/", "2", ")", ",", "0", ",", "0", ")", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "average", "=", "nn", ".", "AvgPool2d", "(", "kernel_size", "=", "local_size", ",", "\n", "stride", "=", "1", ",", "\n", "padding", "=", "int", "(", "(", "local_size", "-", "1.0", ")", "/", "2", ")", ")", "\n", "", "self", ".", "alpha", "=", "alpha", "\n", "self", ".", "beta", "=", "beta", "\n", "self", ".", "k", "=", "k", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.SpatialCrossMapLRN.forward": [[25, 36], ["x.div.div.div", "x.div.div.pow().unsqueeze", "resnet18_vggm.SpatialCrossMapLRN.average().squeeze", "div.mul().add().pow.mul().add().pow.mul().add().pow", "x.div.div.pow", "resnet18_vggm.SpatialCrossMapLRN.average", "div.mul().add().pow.mul().add().pow.mul().add().pow", "x.div.div.pow", "resnet18_vggm.SpatialCrossMapLRN.average", "div.mul().add().pow.mul().add().pow.mul().add", "div.mul().add().pow.mul().add().pow.mul().add", "div.mul().add().pow.mul().add().pow.mul", "div.mul().add().pow.mul().add().pow.mul"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.libs.complex.div"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "if", "self", ".", "ACROSS_CHANNELS", ":", "\n", "            ", "div", "=", "x", ".", "pow", "(", "2", ")", ".", "unsqueeze", "(", "1", ")", "\n", "div", "=", "self", ".", "average", "(", "div", ")", ".", "squeeze", "(", "1", ")", "\n", "div", "=", "div", ".", "mul", "(", "self", ".", "alpha", ")", ".", "add", "(", "self", ".", "k", ")", ".", "pow", "(", "self", ".", "beta", ")", "\n", "", "else", ":", "\n", "            ", "div", "=", "x", ".", "pow", "(", "2", ")", "\n", "div", "=", "self", ".", "average", "(", "div", ")", "\n", "div", "=", "div", ".", "mul", "(", "self", ".", "alpha", ")", ".", "add", "(", "self", ".", "k", ")", ".", "pow", "(", "self", ".", "beta", ")", "\n", "", "x", "=", "x", ".", "div", "(", "div", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1.__init__": [[40, 66], ["base.Backbone.__init__", "torch.Conv2d", "torch.Conv2d", "resnet18_vggm.SpatialCrossMapLRN", "torch.Conv2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "torch.ReLU", "torch.ReLU", "torch.MaxPool2d", "torch.MaxPool2d", "resnet18_vggm.ResNetVGGm1._make_layer", "resnet18_vggm.ResNetVGGm1._make_layer", "resnet18_vggm.ResNetVGGm1._make_layer", "resnet18_vggm.ResNetVGGm1._make_layer", "torch.AdaptiveAvgPool2d", "torch.AdaptiveAvgPool2d", "torch.Linear", "torch.Linear", "resnet18_vggm.ResNetVGGm1.modules", "isinstance", "m.weight.data.normal_", "isinstance", "math.sqrt", "m.weight.data.fill_", "m.bias.data.zero_"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._make_layer", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._make_layer", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._make_layer", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._make_layer"], ["    ", "def", "__init__", "(", "self", ",", "block", ",", "layers", ",", "output_layers", ",", "num_classes", "=", "1000", ",", "frozen_layers", "=", "(", ")", ")", ":", "\n", "        ", "self", ".", "inplanes", "=", "64", "\n", "super", "(", "ResNetVGGm1", ",", "self", ")", ".", "__init__", "(", "frozen_layers", "=", "frozen_layers", ")", "\n", "self", ".", "output_layers", "=", "output_layers", "\n", "self", ".", "vggmconv1", "=", "nn", ".", "Conv2d", "(", "3", ",", "96", ",", "(", "7", ",", "7", ")", ",", "(", "2", ",", "2", ")", ",", "padding", "=", "3", ")", "\n", "self", ".", "vgglrn", "=", "SpatialCrossMapLRN", "(", "5", ",", "0.0005", ",", "0.75", ",", "2", ")", "\n", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "3", ",", "64", ",", "kernel_size", "=", "7", ",", "stride", "=", "2", ",", "padding", "=", "3", ",", "\n", "bias", "=", "False", ")", "\n", "self", ".", "bn1", "=", "nn", ".", "BatchNorm2d", "(", "64", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "self", ".", "maxpool", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "3", ",", "stride", "=", "2", ",", "padding", "=", "1", ")", "\n", "self", ".", "layer1", "=", "self", ".", "_make_layer", "(", "block", ",", "64", ",", "layers", "[", "0", "]", ")", "\n", "self", ".", "layer2", "=", "self", ".", "_make_layer", "(", "block", ",", "128", ",", "layers", "[", "1", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer3", "=", "self", ".", "_make_layer", "(", "block", ",", "256", ",", "layers", "[", "2", "]", ",", "stride", "=", "2", ")", "\n", "self", ".", "layer4", "=", "self", ".", "_make_layer", "(", "block", ",", "512", ",", "layers", "[", "3", "]", ",", "stride", "=", "2", ")", "\n", "# self.avgpool = nn.AvgPool2d(7, stride=1)", "\n", "self", ".", "avgpool", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "(", "1", ",", "1", ")", ")", "\n", "self", ".", "fc", "=", "nn", ".", "Linear", "(", "512", "*", "block", ".", "expansion", ",", "num_classes", ")", "\n", "\n", "for", "m", "in", "self", ".", "modules", "(", ")", ":", "\n", "            ", "if", "isinstance", "(", "m", ",", "nn", ".", "Conv2d", ")", ":", "\n", "                ", "n", "=", "m", ".", "kernel_size", "[", "0", "]", "*", "m", ".", "kernel_size", "[", "1", "]", "*", "m", ".", "out_channels", "\n", "m", ".", "weight", ".", "data", ".", "normal_", "(", "0", ",", "math", ".", "sqrt", "(", "2.", "/", "n", ")", ")", "\n", "", "elif", "isinstance", "(", "m", ",", "nn", ".", "BatchNorm2d", ")", ":", "\n", "                ", "m", ".", "weight", ".", "data", ".", "fill_", "(", "1", ")", "\n", "m", ".", "bias", ".", "data", ".", "zero_", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._make_layer": [[67, 83], ["layers.append", "range", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "block", "layers.append", "torch.Conv2d", "torch.Conv2d", "torch.BatchNorm2d", "torch.BatchNorm2d", "block"], "methods", ["None"], ["", "", "", "def", "_make_layer", "(", "self", ",", "block", ",", "planes", ",", "blocks", ",", "stride", "=", "1", ")", ":", "\n", "        ", "downsample", "=", "None", "\n", "if", "stride", "!=", "1", "or", "self", ".", "inplanes", "!=", "planes", "*", "block", ".", "expansion", ":", "\n", "            ", "downsample", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "self", ".", "inplanes", ",", "planes", "*", "block", ".", "expansion", ",", "\n", "kernel_size", "=", "1", ",", "stride", "=", "stride", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm2d", "(", "planes", "*", "block", ".", "expansion", ")", ",", "\n", ")", "\n", "\n", "", "layers", "=", "[", "]", "\n", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ",", "stride", ",", "downsample", ")", ")", "\n", "self", ".", "inplanes", "=", "planes", "*", "block", ".", "expansion", "\n", "for", "i", "in", "range", "(", "1", ",", "blocks", ")", ":", "\n", "            ", "layers", ".", "append", "(", "block", "(", "self", ".", "inplanes", ",", "planes", ")", ")", "\n", "\n", "", "return", "nn", ".", "Sequential", "(", "*", "layers", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check": [[85, 89], ["len", "len"], "methods", ["None"], ["", "def", "_add_output_and_check", "(", "self", ",", "name", ",", "x", ",", "outputs", ",", "output_layers", ")", ":", "\n", "        ", "if", "name", "in", "output_layers", ":", "\n", "            ", "outputs", "[", "name", "]", "=", "x", "\n", "", "return", "len", "(", "output_layers", ")", "==", "len", "(", "outputs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1.forward": [[91, 142], ["collections.OrderedDict", "resnet18_vggm.ResNetVGGm1.conv1", "resnet18_vggm.ResNetVGGm1.bn1", "resnet18_vggm.ResNetVGGm1.relu", "resnet18_vggm.ResNetVGGm1._add_output_and_check", "resnet18_vggm.ResNetVGGm1.maxpool", "resnet18_vggm.ResNetVGGm1.layer1", "resnet18_vggm.ResNetVGGm1._add_output_and_check", "resnet18_vggm.ResNetVGGm1.layer2", "resnet18_vggm.ResNetVGGm1._add_output_and_check", "resnet18_vggm.ResNetVGGm1.layer3", "resnet18_vggm.ResNetVGGm1._add_output_and_check", "resnet18_vggm.ResNetVGGm1.layer4", "resnet18_vggm.ResNetVGGm1._add_output_and_check", "resnet18_vggm.ResNetVGGm1.avgpool", "resnet18_vggm.ResNetVGGm1.view", "resnet18_vggm.ResNetVGGm1.fc", "resnet18_vggm.ResNetVGGm1._add_output_and_check", "ValueError", "resnet18_vggm.ResNetVGGm1.vgglrn", "resnet18_vggm.ResNetVGGm1._add_output_and_check", "resnet18_vggm.ResNetVGGm1.size", "resnet18_vggm.ResNetVGGm1.relu", "len", "resnet18_vggm.ResNetVGGm1.vggmconv1"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.ResNetVGGm1._add_output_and_check", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu"], ["", "def", "forward", "(", "self", ",", "x", ",", "output_layers", "=", "None", ")", ":", "\n", "        ", "outputs", "=", "OrderedDict", "(", ")", "\n", "\n", "if", "output_layers", "is", "None", ":", "\n", "            ", "output_layers", "=", "self", ".", "output_layers", "\n", "\n", "", "if", "'vggconv1'", "in", "output_layers", ":", "\n", "            ", "c1", "=", "self", ".", "vgglrn", "(", "self", ".", "relu", "(", "self", ".", "vggmconv1", "(", "x", ")", ")", ")", "\n", "if", "self", ".", "_add_output_and_check", "(", "'vggconv1'", ",", "c1", ",", "outputs", ",", "output_layers", ")", ":", "\n", "                ", "return", "outputs", "\n", "\n", "", "", "x", "=", "self", ".", "conv1", "(", "x", ")", "\n", "x", "=", "self", ".", "bn1", "(", "x", ")", "\n", "x", "=", "self", ".", "relu", "(", "x", ")", "\n", "\n", "if", "self", ".", "_add_output_and_check", "(", "'conv1'", ",", "x", ",", "outputs", ",", "output_layers", ")", ":", "\n", "            ", "return", "outputs", "\n", "\n", "", "x", "=", "self", ".", "maxpool", "(", "x", ")", "\n", "\n", "x", "=", "self", ".", "layer1", "(", "x", ")", "\n", "\n", "if", "self", ".", "_add_output_and_check", "(", "'layer1'", ",", "x", ",", "outputs", ",", "output_layers", ")", ":", "\n", "            ", "return", "outputs", "\n", "\n", "", "x", "=", "self", ".", "layer2", "(", "x", ")", "\n", "\n", "if", "self", ".", "_add_output_and_check", "(", "'layer2'", ",", "x", ",", "outputs", ",", "output_layers", ")", ":", "\n", "            ", "return", "outputs", "\n", "\n", "", "x", "=", "self", ".", "layer3", "(", "x", ")", "\n", "\n", "if", "self", ".", "_add_output_and_check", "(", "'layer3'", ",", "x", ",", "outputs", ",", "output_layers", ")", ":", "\n", "            ", "return", "outputs", "\n", "\n", "", "x", "=", "self", ".", "layer4", "(", "x", ")", "\n", "\n", "if", "self", ".", "_add_output_and_check", "(", "'layer4'", ",", "x", ",", "outputs", ",", "output_layers", ")", ":", "\n", "            ", "return", "outputs", "\n", "\n", "", "x", "=", "self", ".", "avgpool", "(", "x", ")", "\n", "x", "=", "x", ".", "view", "(", "x", ".", "size", "(", "0", ")", ",", "-", "1", ")", "\n", "x", "=", "self", ".", "fc", "(", "x", ")", "\n", "\n", "if", "self", ".", "_add_output_and_check", "(", "'fc'", ",", "x", ",", "outputs", ",", "output_layers", ")", ":", "\n", "            ", "return", "outputs", "\n", "\n", "", "if", "len", "(", "output_layers", ")", "==", "1", "and", "output_layers", "[", "0", "]", "==", "'default'", ":", "\n", "            ", "return", "x", "\n", "\n", "", "raise", "ValueError", "(", "'output_layer is wrong.'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.backbone.resnet18_vggm.resnet18_vggmconv1": [[144, 160], ["resnet18_vggm.ResNetVGGm1", "ResNetVGGm1.load_state_dict", "torch.load", "torch.load", "ValueError"], "function", ["home.repos.pwc.inspect_result.researchmm_Stark.trainers.base_trainer.BaseTrainer.load_state_dict", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load", "home.repos.pwc.inspect_result.researchmm_Stark.dataset.vos_base.VOSMeta.load"], ["", "", "def", "resnet18_vggmconv1", "(", "output_layers", "=", "None", ",", "path", "=", "None", ",", "**", "kwargs", ")", ":", "\n", "    ", "\"\"\"Constructs a ResNet-18 model with first-layer VGGm features.\n    \"\"\"", "\n", "\n", "if", "output_layers", "is", "None", ":", "\n", "        ", "output_layers", "=", "[", "'default'", "]", "\n", "", "else", ":", "\n", "        ", "for", "l", "in", "output_layers", ":", "\n", "            ", "if", "l", "not", "in", "[", "'vggconv1'", ",", "'conv1'", ",", "'layer1'", ",", "'layer2'", ",", "'layer3'", ",", "'layer4'", ",", "'fc'", "]", ":", "\n", "                ", "raise", "ValueError", "(", "'Unknown layer: {}'", ".", "format", "(", "l", ")", ")", "\n", "\n", "", "", "", "model", "=", "ResNetVGGm1", "(", "BasicBlock", ",", "[", "2", ",", "2", ",", "2", ",", "2", "]", ",", "output_layers", ",", "**", "kwargs", ")", "\n", "\n", "if", "path", "is", "not", "None", ":", "\n", "        ", "model", ".", "load_state_dict", "(", "torch", ".", "load", "(", "path", ")", ",", "strict", "=", "False", ")", "\n", "", "return", "model", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.SEModule.__init__": [[15, 24], ["torch.Module.__init__", "torch.AdaptiveAvgPool2d", "torch.AdaptiveAvgPool2d", "torch.Conv2d", "torch.Conv2d", "torch.ReLU", "torch.ReLU", "torch.Conv2d", "torch.Conv2d", "torch.Sigmoid", "torch.Sigmoid"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "channels", ",", "reduction", "=", "4", ")", ":", "\n", "        ", "super", "(", "SEModule", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "avg_pool", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "1", ")", "\n", "self", ".", "fc1", "=", "nn", ".", "Conv2d", "(", "channels", ",", "channels", "//", "reduction", ",", "kernel_size", "=", "1", ",", "\n", "padding", "=", "0", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", "\n", "self", ".", "fc2", "=", "nn", ".", "Conv2d", "(", "channels", "//", "reduction", ",", "channels", ",", "kernel_size", "=", "1", ",", "\n", "padding", "=", "0", ")", "\n", "self", ".", "sigmoid", "=", "nn", ".", "Sigmoid", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.SEModule.forward": [[25, 33], ["neck_utils.SEModule.avg_pool", "neck_utils.SEModule.fc1", "neck_utils.SEModule.relu", "neck_utils.SEModule.fc2", "neck_utils.SEModule.sigmoid"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu"], ["", "def", "forward", "(", "self", ",", "x", ")", ":", "\n", "        ", "module_input", "=", "x", "\n", "x", "=", "self", ".", "avg_pool", "(", "x", ")", "\n", "x", "=", "self", ".", "fc1", "(", "x", ")", "\n", "x", "=", "self", ".", "relu", "(", "x", ")", "\n", "x", "=", "self", ".", "fc2", "(", "x", ")", "\n", "x", "=", "self", ".", "sigmoid", "(", "x", ")", "\n", "return", "module_input", "*", "x", "\n", "", "", "'''Non-local module'''", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils._NonLocalBlockND.__init__": [[35, 96], ["torch.Module.__init__", "conv_nd", "conv_nd", "conv_nd", "torch.MaxPool3d", "torch.MaxPool3d", "torch.Sequential", "torch.Sequential", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "conv_nd", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.init.constant_", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.Sequential", "torch.MaxPool2d", "torch.MaxPool2d", "torch.MaxPool1d", "torch.MaxPool1d", "conv_nd", "bn"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "in_channels", ",", "inter_channels", "=", "None", ",", "dimension", "=", "3", ",", "sub_sample", "=", "True", ",", "bn_layer", "=", "True", ")", ":", "\n", "        ", "\"\"\"\n        :param in_channels:\n        :param inter_channels:\n        :param dimension:\n        :param sub_sample:\n        :param bn_layer:\n        \"\"\"", "\n", "super", "(", "_NonLocalBlockND", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "assert", "dimension", "in", "[", "1", ",", "2", ",", "3", "]", "\n", "\n", "self", ".", "dimension", "=", "dimension", "\n", "self", ".", "sub_sample", "=", "sub_sample", "\n", "\n", "self", ".", "in_channels", "=", "in_channels", "\n", "self", ".", "inter_channels", "=", "inter_channels", "\n", "\n", "if", "self", ".", "inter_channels", "is", "None", ":", "\n", "            ", "self", ".", "inter_channels", "=", "in_channels", "//", "2", "\n", "if", "self", ".", "inter_channels", "==", "0", ":", "\n", "                ", "self", ".", "inter_channels", "=", "1", "\n", "\n", "", "", "if", "dimension", "==", "3", ":", "\n", "            ", "conv_nd", "=", "nn", ".", "Conv3d", "\n", "max_pool_layer", "=", "nn", ".", "MaxPool3d", "(", "kernel_size", "=", "(", "1", ",", "2", ",", "2", ")", ")", "\n", "bn", "=", "nn", ".", "BatchNorm3d", "\n", "", "elif", "dimension", "==", "2", ":", "\n", "            ", "conv_nd", "=", "nn", ".", "Conv2d", "\n", "max_pool_layer", "=", "nn", ".", "MaxPool2d", "(", "kernel_size", "=", "(", "2", ",", "2", ")", ")", "\n", "bn", "=", "nn", ".", "BatchNorm2d", "\n", "", "else", ":", "\n", "            ", "conv_nd", "=", "nn", ".", "Conv1d", "\n", "max_pool_layer", "=", "nn", ".", "MaxPool1d", "(", "kernel_size", "=", "(", "2", ")", ")", "\n", "bn", "=", "nn", ".", "BatchNorm1d", "\n", "\n", "", "self", ".", "g", "=", "conv_nd", "(", "in_channels", "=", "self", ".", "in_channels", ",", "out_channels", "=", "self", ".", "inter_channels", ",", "\n", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ")", "\n", "\n", "if", "bn_layer", ":", "\n", "            ", "self", ".", "W", "=", "nn", ".", "Sequential", "(", "\n", "conv_nd", "(", "in_channels", "=", "self", ".", "inter_channels", ",", "out_channels", "=", "self", ".", "in_channels", ",", "\n", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ")", ",", "\n", "bn", "(", "self", ".", "in_channels", ")", "\n", ")", "\n", "nn", ".", "init", ".", "constant_", "(", "self", ".", "W", "[", "1", "]", ".", "weight", ",", "0", ")", "\n", "nn", ".", "init", ".", "constant_", "(", "self", ".", "W", "[", "1", "]", ".", "bias", ",", "0", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "W", "=", "conv_nd", "(", "in_channels", "=", "self", ".", "inter_channels", ",", "out_channels", "=", "self", ".", "in_channels", ",", "\n", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ")", "\n", "nn", ".", "init", ".", "constant_", "(", "self", ".", "W", ".", "weight", ",", "0", ")", "\n", "nn", ".", "init", ".", "constant_", "(", "self", ".", "W", ".", "bias", ",", "0", ")", "\n", "\n", "", "self", ".", "theta", "=", "conv_nd", "(", "in_channels", "=", "self", ".", "in_channels", ",", "out_channels", "=", "self", ".", "inter_channels", ",", "\n", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ")", "\n", "self", ".", "phi", "=", "conv_nd", "(", "in_channels", "=", "self", ".", "in_channels", ",", "out_channels", "=", "self", ".", "inter_channels", ",", "\n", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ")", "\n", "\n", "if", "sub_sample", ":", "\n", "            ", "self", ".", "g", "=", "nn", ".", "Sequential", "(", "self", ".", "g", ",", "max_pool_layer", ")", "\n", "self", ".", "phi", "=", "nn", ".", "Sequential", "(", "self", ".", "phi", ",", "max_pool_layer", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils._NonLocalBlockND.forward": [[97, 124], ["x.size", "neck_utils._NonLocalBlockND.g().view", "g_x.permute.permute.permute", "neck_utils._NonLocalBlockND.theta().view", "theta_x.permute.permute.permute", "neck_utils._NonLocalBlockND.phi().view", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "torch.nn.functional.softmax", "torch.nn.functional.softmax", "torch.matmul", "torch.matmul", "torch.matmul", "torch.matmul", "y.view.view.permute().contiguous", "y.view.view.view", "neck_utils._NonLocalBlockND.W", "neck_utils._NonLocalBlockND.g", "neck_utils._NonLocalBlockND.theta", "neck_utils._NonLocalBlockND.phi", "y.view.view.permute", "x.size"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size"], ["", "", "def", "forward", "(", "self", ",", "x", ",", "return_nl_map", "=", "False", ")", ":", "\n", "        ", "\"\"\"\n        :param x: (b, c, t, h, w)\n        :param return_nl_map: if True return z, nl_map, else only return z.\n        :return:\n        \"\"\"", "\n", "\n", "batch_size", "=", "x", ".", "size", "(", "0", ")", "\n", "\n", "g_x", "=", "self", ".", "g", "(", "x", ")", ".", "view", "(", "batch_size", ",", "self", ".", "inter_channels", ",", "-", "1", ")", "\n", "g_x", "=", "g_x", ".", "permute", "(", "0", ",", "2", ",", "1", ")", "\n", "\n", "theta_x", "=", "self", ".", "theta", "(", "x", ")", ".", "view", "(", "batch_size", ",", "self", ".", "inter_channels", ",", "-", "1", ")", "\n", "theta_x", "=", "theta_x", ".", "permute", "(", "0", ",", "2", ",", "1", ")", "\n", "phi_x", "=", "self", ".", "phi", "(", "x", ")", ".", "view", "(", "batch_size", ",", "self", ".", "inter_channels", ",", "-", "1", ")", "\n", "f", "=", "torch", ".", "matmul", "(", "theta_x", ",", "phi_x", ")", "\n", "f_div_C", "=", "F", ".", "softmax", "(", "f", ",", "-", "1", ")", "\n", "\n", "y", "=", "torch", ".", "matmul", "(", "f_div_C", ",", "g_x", ")", "\n", "y", "=", "y", ".", "permute", "(", "0", ",", "2", ",", "1", ")", ".", "contiguous", "(", ")", "\n", "y", "=", "y", ".", "view", "(", "batch_size", ",", "self", ".", "inter_channels", ",", "*", "x", ".", "size", "(", ")", "[", "2", ":", "]", ")", "\n", "W_y", "=", "self", ".", "W", "(", "y", ")", "\n", "z", "=", "W_y", "+", "x", "\n", "\n", "if", "return_nl_map", ":", "\n", "            ", "return", "z", ",", "f_div_C", "\n", "", "return", "z", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.NONLocalBlock2D.__init__": [[126, 131], ["neck_utils._NonLocalBlockND.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["    ", "def", "__init__", "(", "self", ",", "in_channels", ",", "inter_channels", "=", "None", ",", "sub_sample", "=", "True", ",", "bn_layer", "=", "True", ")", ":", "\n", "        ", "super", "(", "NONLocalBlock2D", ",", "self", ")", ".", "__init__", "(", "in_channels", ",", "\n", "inter_channels", "=", "inter_channels", ",", "\n", "dimension", "=", "2", ",", "sub_sample", "=", "sub_sample", ",", "\n", "bn_layer", "=", "bn_layer", ",", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.neck.neck_utils.conv": [[5, 11], ["torch.Sequential", "torch.Conv2d", "torch.BatchNorm2d", "torch.ReLU"], "function", ["None"], ["def", "conv", "(", "in_planes", ",", "out_planes", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "1", ",", "dilation", "=", "1", ")", ":", "\n", "    ", "return", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "in_planes", ",", "out_planes", ",", "kernel_size", "=", "kernel_size", ",", "stride", "=", "stride", ",", "\n", "padding", "=", "padding", ",", "dilation", "=", "dilation", ",", "bias", "=", "True", ")", ",", "\n", "nn", ".", "BatchNorm2d", "(", "out_planes", ")", ",", "\n", "nn", ".", "ReLU", "(", "inplace", "=", "True", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.neck.CorrNL.CorrNL.__init__": [[15, 22], ["torch.Module.__init__", "ltr.external.PreciseRoIPooling.pytorch.prroi_pool.PrRoIPool2D", "SEModule", "NONLocalBlock2D"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "pool_size", "=", "8", ",", "use_NL", "=", "True", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "prroi_pool", "=", "PrRoIPool2D", "(", "pool_size", ",", "pool_size", ",", "1", "/", "16", ")", "\n", "num_corr_channel", "=", "pool_size", "*", "pool_size", "\n", "self", ".", "channel_attention", "=", "SEModule", "(", "num_corr_channel", ",", "reduction", "=", "4", ")", "\n", "self", ".", "spatial_attention", "=", "NONLocalBlock2D", "(", "in_channels", "=", "num_corr_channel", ")", "\n", "self", ".", "use_NL", "=", "use_NL", "\n", "", "def", "forward", "(", "self", ",", "feat1", ",", "feat2", ",", "bb1", ")", ":", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.neck.CorrNL.CorrNL.forward": [[22, 57], ["torch.arange().view().to", "torch.arange().view().to", "torch.arange().view().to", "torch.arange().view().to", "bb1.clone.clone.clone", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "CorrNL.CorrNL.prroi_pool", "CorrNL.CorrNL.corr_fun", "CorrNL.CorrNL.channel_attention", "CorrNL.CorrNL.spatial_attention", "bb1.clone.clone.dim", "len", "ValueError", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange", "torch.arange", "torch.arange", "torch.arange"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.neck.CorrNL.CorrNL.corr_fun", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "forward", "(", "self", ",", "feat1", ",", "feat2", ",", "bb1", ")", ":", "\n", "        ", "\"\"\"Runs the ATOM IoUNet during training operation.\n        This forward pass is mainly used for training. Call the individual functions during tracking instead.\n        args:\n            feat1:  Features from the reference frames (4 or 5 dims).\n            feat2:  Features from the test frames (4 or 5 dims).\n            bb1:  Target boxes (x,y,w,h) in image coords in the reference samples. Dims (images, sequences, 4).\n            proposals2:  Proposal boxes for which the IoU will be predicted (images, sequences, num_proposals, 4).\"\"\"", "\n", "\n", "assert", "bb1", ".", "dim", "(", ")", "==", "3", "\n", "# num_images, num_sequences = bb1.size()[:2] # 1, 64", "\n", "\n", "# Extract first train sample", "\n", "if", "len", "(", "feat1", ")", "==", "1", ":", "\n", "            ", "feat1", "=", "feat1", "[", "0", "]", "# size\u4e3a(64,C,H,W)", "\n", "feat2", "=", "feat2", "[", "0", "]", "# size\u4e3a(64,C,H,W)", "\n", "bb1", "=", "bb1", "[", "0", ",", "...", "]", "# (64,4)", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "\"Only support single-layer feature map\"", ")", "\n", "", "'''get PrRoIPool feature '''", "\n", "# Add batch_index to rois", "\n", "batch_size", "=", "bb1", ".", "shape", "[", "0", "]", "\n", "batch_index", "=", "torch", ".", "arange", "(", "batch_size", ",", "dtype", "=", "torch", ".", "float32", ")", ".", "view", "(", "-", "1", ",", "1", ")", ".", "to", "(", "bb1", ".", "device", ")", "# (64,1)", "\n", "# input bb is in format xywh, convert it to x0y0x1y1 format", "\n", "bb1", "=", "bb1", ".", "clone", "(", ")", "\n", "bb1", "[", ":", ",", "2", ":", "4", "]", "=", "bb1", "[", ":", ",", "0", ":", "2", "]", "+", "bb1", "[", ":", ",", "2", ":", "4", "]", "\n", "roi1", "=", "torch", ".", "cat", "(", "(", "batch_index", ",", "bb1", ")", ",", "dim", "=", "1", ")", "#(64,1),(64,4) ---> (64,5)", "\n", "feat_roi1", "=", "self", ".", "prroi_pool", "(", "feat1", ",", "roi1", ")", "# (64,C,H,W)", "\n", "feat_corr", ",", "_", "=", "self", ".", "corr_fun", "(", "feat_roi1", ",", "feat2", ")", "\n", "# print('\u76f8\u5173\u540e\u7684\u7279\u5f81\u7ef4\u5ea6\u662f:',feat_corr.size())#(batch,StxSt,Sr,Sr)", "\n", "'''channel attention: Squeeze and Excitation'''", "\n", "feat_ca", "=", "self", ".", "channel_attention", "(", "feat_corr", ")", "# \u8ba1\u7b97\u901a\u9053\u6ce8\u610f\u529b\u7279\u5f81", "\n", "'''spatial attention: Non-local 2D'''", "\n", "feat_sa", "=", "self", ".", "spatial_attention", "(", "feat_ca", ")", "\n", "return", "feat_sa", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.neck.CorrNL.CorrNL.get_ref_kernel": [[58, 78], ["torch.arange().view().to", "torch.arange().view().to", "torch.arange().view().to", "torch.arange().view().to", "bb1.clone.clone.clone", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "CorrNL.CorrNL.prroi_pool", "bb1.clone.clone.dim", "len", "ValueError", "feat1.float", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange().view", "torch.arange", "torch.arange", "torch.arange", "torch.arange"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.actors.base_actor.BaseActor.to", "home.repos.pwc.inspect_result.researchmm_Stark.features.util.Concatenate.dim"], ["", "def", "get_ref_kernel", "(", "self", ",", "feat1", ",", "bb1", ")", ":", "\n", "        ", "assert", "bb1", ".", "dim", "(", ")", "==", "3", "\n", "# num_images, num_sequences = bb1.size()[:2] # 1, 64", "\n", "\n", "# Extract first train sample", "\n", "if", "len", "(", "feat1", ")", "==", "1", ":", "\n", "            ", "feat1", "=", "feat1", "[", "0", "]", "# size\u4e3a(64,C,H,W)", "\n", "bb1", "=", "bb1", "[", "0", ",", "...", "]", "# (64,4)", "\n", "", "else", ":", "\n", "            ", "raise", "ValueError", "(", "\"Only support single-layer feature map\"", ")", "\n", "", "'''get PrRoIPool feature '''", "\n", "# Add batch_index to rois", "\n", "batch_size", "=", "bb1", ".", "shape", "[", "0", "]", "\n", "batch_index", "=", "torch", ".", "arange", "(", "batch_size", ",", "dtype", "=", "torch", ".", "float32", ")", ".", "view", "(", "-", "1", ",", "1", ")", ".", "to", "(", "bb1", ".", "device", ")", "# (64,1)", "\n", "# input bb is in format xywh, convert it to x0y0x1y1 format", "\n", "bb1", "=", "bb1", ".", "clone", "(", ")", "\n", "bb1", "[", ":", ",", "2", ":", "4", "]", "=", "bb1", "[", ":", ",", "0", ":", "2", "]", "+", "bb1", "[", ":", ",", "2", ":", "4", "]", "\n", "roi1", "=", "torch", ".", "cat", "(", "(", "batch_index", ",", "bb1", ")", ",", "dim", "=", "1", ")", "# (64,1),(64,4) ---> (64,5)", "\n", "'''\u6ce8\u610f: feat1 and roi1 must be cuda tensor'''", "\n", "self", ".", "ref_kernel", "=", "self", ".", "prroi_pool", "(", "feat1", ".", "float", "(", ")", ",", "roi1", ")", "# (64,C,H,W)", "\n", "# self.ref_kernel.half()", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.neck.CorrNL.CorrNL.fuse_feat": [[80, 96], ["CorrNL.CorrNL.corr_fun", "CorrNL.CorrNL.channel_attention", "len", "CorrNL.CorrNL.spatial_attention"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.neck.CorrNL.CorrNL.corr_fun"], ["", "def", "fuse_feat", "(", "self", ",", "feat2", ")", ":", "\n", "        ", "'''fuse features from reference and test branch'''", "\n", "if", "len", "(", "feat2", ")", "==", "1", ":", "\n", "            ", "feat2", "=", "feat2", "[", "0", "]", "\n", "", "'''Step1: pixel-wise correlation'''", "\n", "feat_corr", ",", "_", "=", "self", ".", "corr_fun", "(", "self", ".", "ref_kernel", ",", "feat2", ")", "\n", "# print('\u76f8\u5173\u540e\u7684\u7279\u5f81\u7ef4\u5ea6\u662f:',feat_corr.size())#(batch,StxSt,Sr,Sr) (batch,64,16,16)", "\n", "'''Step2: channel attention: Squeeze and Excitation'''", "\n", "feat_ca", "=", "self", ".", "channel_attention", "(", "feat_corr", ")", "# \u8ba1\u7b97\u901a\u9053\u6ce8\u610f\u529b\u7279\u5f81", "\n", "if", "not", "self", ".", "use_NL", ":", "\n", "# print('not use non-local')", "\n", "            ", "return", "feat_ca", "\n", "", "else", ":", "\n", "            ", "'''Step3: spatial attention: Non-local 2D'''", "\n", "feat_sa", "=", "self", ".", "spatial_attention", "(", "feat_ca", ")", "\n", "return", "feat_sa", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.neck.CorrNL.CorrNL.corr_fun": [[98, 116], ["Kernel_tmp.size", "range", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "len", "torch.cat.view().transpose", "torch.cat.view().transpose", "torch.cat.unsqueeze().unsqueeze", "torch.cat.unsqueeze().unsqueeze", "torch.nn.functional.conv2d", "torch.nn.functional.conv2d", "CORR.append", "torch.cat.unsqueeze", "torch.cat.unsqueeze", "torch.cat.append", "torch.cat.append", "torch.cat", "torch.cat", "torch.cat", "torch.cat", "torch.cat.contiguous", "torch.cat.contiguous", "torch.cat.view", "torch.cat.view", "torch.cat.unsqueeze", "torch.cat.unsqueeze", "type", "type"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.features.extractor.MultiResolutionExtractor.size", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d", "home.repos.pwc.inspect_result.researchmm_Stark.libs.operation.conv2d"], ["", "", "def", "corr_fun", "(", "self", ",", "Kernel_tmp", ",", "Feature", ",", "KERs", "=", "None", ")", ":", "\n", "        ", "size", "=", "Kernel_tmp", ".", "size", "(", ")", "\n", "CORR", "=", "[", "]", "\n", "Kernel", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "len", "(", "Feature", ")", ")", ":", "\n", "            ", "ker", "=", "Kernel_tmp", "[", "i", ":", "i", "+", "1", "]", "\n", "fea", "=", "Feature", "[", "i", ":", "i", "+", "1", "]", "\n", "ker", "=", "ker", ".", "view", "(", "size", "[", "1", "]", ",", "size", "[", "2", "]", "*", "size", "[", "3", "]", ")", ".", "transpose", "(", "0", ",", "1", ")", "\n", "ker", "=", "ker", ".", "unsqueeze", "(", "2", ")", ".", "unsqueeze", "(", "3", ")", "\n", "if", "not", "(", "type", "(", "KERs", ")", "==", "type", "(", "None", ")", ")", ":", "\n", "                ", "ker", "=", "torch", ".", "cat", "(", "[", "ker", ",", "KERs", "[", "i", "]", "]", ",", "0", ")", "\n", "", "co", "=", "F", ".", "conv2d", "(", "fea", ",", "ker", ".", "contiguous", "(", ")", ")", "\n", "CORR", ".", "append", "(", "co", ")", "\n", "ker", "=", "ker", ".", "unsqueeze", "(", "0", ")", "\n", "Kernel", ".", "append", "(", "ker", ")", "\n", "", "corr", "=", "torch", ".", "cat", "(", "CORR", ",", "0", ")", "\n", "Kernel", "=", "torch", ".", "cat", "(", "Kernel", ",", "0", ")", "\n", "return", "corr", ",", "Kernel", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.loss.target_classification.LBHinge.__init__": [[15, 20], ["torch.MSELoss", "torch.MSELoss", "torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "error_metric", "=", "nn", ".", "MSELoss", "(", ")", ",", "threshold", "=", "None", ",", "clip", "=", "None", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "error_metric", "=", "error_metric", "\n", "self", ".", "threshold", "=", "threshold", "if", "threshold", "is", "not", "None", "else", "-", "100", "\n", "self", ".", "clip", "=", "clip", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.loss.target_classification.LBHinge.forward": [[21, 32], ["target_classification.LBHinge.error_metric", "torch.min", "torch.min", "torch.min", "torch.min", "torch.nn.functional.relu", "torch.nn.functional.relu", "torch.tensor", "torch.tensor", "torch.tensor", "torch.tensor"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu", "home.repos.pwc.inspect_result.researchmm_Stark.head.utils.relu"], ["", "def", "forward", "(", "self", ",", "prediction", ",", "label", ",", "target_bb", "=", "None", ")", ":", "\n", "        ", "negative_mask", "=", "(", "label", "<", "self", ".", "threshold", ")", ".", "float", "(", ")", "\n", "positive_mask", "=", "(", "1.0", "-", "negative_mask", ")", "\n", "\n", "prediction", "=", "negative_mask", "*", "F", ".", "relu", "(", "prediction", ")", "+", "positive_mask", "*", "prediction", "\n", "\n", "loss", "=", "self", ".", "error_metric", "(", "prediction", ",", "positive_mask", "*", "label", ")", "\n", "\n", "if", "self", ".", "clip", "is", "not", "None", ":", "\n", "            ", "loss", "=", "torch", ".", "min", "(", "loss", ",", "torch", ".", "tensor", "(", "[", "self", ".", "clip", "]", ",", "device", "=", "loss", ".", "device", ")", ")", "\n", "", "return", "loss", "\n", "", "", ""]], "home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.KLRegression.__init__": [[11, 14], ["torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "eps", "=", "0.0", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "eps", "=", "eps", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.KLRegression.forward": [[15, 28], ["L.mean", "torch.log", "torch.log", "torch.log", "torch.log", "torch.mean", "torch.mean", "torch.mean", "torch.mean", "torch.logsumexp", "torch.logsumexp", "torch.logsumexp", "torch.logsumexp", "math.log"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean", "home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], ["", "def", "forward", "(", "self", ",", "scores", ",", "sample_density", ",", "gt_density", ",", "mc_dim", "=", "-", "1", ")", ":", "\n", "        ", "\"\"\"Args:\n            scores: predicted score values\n            sample_density: probability density of the sample distribution\n            gt_density: probability density of the ground truth distribution\n            mc_dim: dimension of the MC samples\"\"\"", "\n", "\n", "exp_val", "=", "scores", "-", "torch", ".", "log", "(", "sample_density", "+", "self", ".", "eps", ")", "\n", "\n", "L", "=", "torch", ".", "logsumexp", "(", "exp_val", ",", "dim", "=", "mc_dim", ")", "-", "math", ".", "log", "(", "scores", ".", "shape", "[", "mc_dim", "]", ")", "-", "torch", ".", "mean", "(", "scores", "*", "(", "gt_density", "/", "(", "sample_density", "+", "self", ".", "eps", ")", ")", ",", "dim", "=", "mc_dim", ")", "\n", "\n", "return", "L", ".", "mean", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__": [[34, 37], ["torch.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.__init__"], ["def", "__init__", "(", "self", ",", "eps", "=", "0.0", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "eps", "=", "eps", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.MLRegression.forward": [[38, 53], ["L.mean", "torch.log", "torch.log", "torch.log", "torch.log", "torch.logsumexp", "torch.logsumexp", "torch.logsumexp", "torch.logsumexp", "math.log"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], ["", "def", "forward", "(", "self", ",", "scores", ",", "sample_density", ",", "gt_density", "=", "None", ",", "mc_dim", "=", "-", "1", ")", ":", "\n", "        ", "\"\"\"Args:\n            scores: predicted score values. First sample must be ground-truth\n            sample_density: probability density of the sample distribution\n            gt_density: not used\n            mc_dim: dimension of the MC samples. Only mc_dim=1 supported\"\"\"", "\n", "\n", "assert", "mc_dim", "==", "1", "\n", "assert", "(", "sample_density", "[", ":", ",", "0", ",", "...", "]", "==", "-", "1", ")", ".", "all", "(", ")", "\n", "\n", "exp_val", "=", "scores", "[", ":", ",", "1", ":", ",", "...", "]", "-", "torch", ".", "log", "(", "sample_density", "[", ":", ",", "1", ":", ",", "...", "]", "+", "self", ".", "eps", ")", "\n", "\n", "L", "=", "torch", ".", "logsumexp", "(", "exp_val", ",", "dim", "=", "mc_dim", ")", "-", "math", ".", "log", "(", "scores", ".", "shape", "[", "mc_dim", "]", "-", "1", ")", "-", "scores", "[", ":", ",", "0", ",", "...", "]", "\n", "loss", "=", "L", ".", "mean", "(", ")", "\n", "return", "loss", "\n", "\n"]], "home.repos.pwc.inspect_result.researchmm_Stark.loss.kl_regression.KLRegressionGrid.forward": [[59, 71], ["L.mean", "torch.sum", "torch.sum", "torch.sum", "torch.sum", "torch.logsumexp", "torch.logsumexp", "torch.logsumexp", "torch.logsumexp", "math.log"], "methods", ["home.repos.pwc.inspect_result.researchmm_Stark.analysis.vos_utils.mean"], ["def", "forward", "(", "self", ",", "scores", ",", "gt_density", ",", "grid_dim", "=", "-", "1", ",", "grid_scale", "=", "1.0", ")", ":", "\n", "        ", "\"\"\"Args:\n            scores: predicted score values\n            gt_density: probability density of the ground truth distribution\n            grid_dim: dimension(s) of the grid\n            grid_scale: area of one grid cell\"\"\"", "\n", "\n", "score_corr", "=", "grid_scale", "*", "torch", ".", "sum", "(", "scores", "*", "gt_density", ",", "dim", "=", "grid_dim", ")", "\n", "\n", "L", "=", "torch", ".", "logsumexp", "(", "scores", ",", "dim", "=", "grid_dim", ")", "+", "math", ".", "log", "(", "grid_scale", ")", "-", "score_corr", "\n", "\n", "return", "L", ".", "mean", "(", ")", "\n", "", "", ""]]}