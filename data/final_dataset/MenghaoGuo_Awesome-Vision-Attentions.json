{"home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.gct_module.GCT.__init__": [[8, 17], ["jittor.nn.Module.__init__", "jittor.ones", "jittor.zeros", "jittor.zeros"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "num_channels", ",", "epsilon", "=", "1e-5", ",", "mode", "=", "'l2'", ",", "after_relu", "=", "False", ")", ":", "\n", "        ", "super", "(", "GCT", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "alpha", "=", "jt", ".", "ones", "(", "(", "1", ",", "num_channels", ",", "1", ",", "1", ")", ")", "\n", "self", ".", "gamma", "=", "jt", ".", "zeros", "(", "(", "1", ",", "num_channels", ",", "1", ",", "1", ")", ")", "\n", "self", ".", "beta", "=", "jt", ".", "zeros", "(", "(", "1", ",", "num_channels", ",", "1", ",", "1", ")", ")", "\n", "self", ".", "epsilon", "=", "epsilon", "\n", "self", ".", "mode", "=", "mode", "\n", "self", ".", "after_relu", "=", "after_relu", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.gct_module.GCT.execute": [[18, 41], ["jittor.tanh", "print", "jittor.abs", "jittor.abs.sum().sum", "jittor.abs().mean", "x.pow().sum().sum", "embedding.pow().mean", "jittor.abs.sum", "jittor.abs", "x.pow().sum", "embedding.pow", "x.pow"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "\n", "        ", "if", "self", ".", "mode", "==", "'l2'", ":", "\n", "            ", "embedding", "=", "(", "x", ".", "pow", "(", "2", ")", ".", "sum", "(", "2", ",", "keepdims", "=", "True", ")", ".", "sum", "(", "3", ",", "keepdims", "=", "True", ")", "+", "\n", "self", ".", "epsilon", ")", ".", "pow", "(", "0.5", ")", "*", "self", ".", "alpha", "\n", "norm", "=", "self", ".", "gamma", "/", "(", "embedding", ".", "pow", "(", "2", ")", ".", "mean", "(", "dim", "=", "1", ",", "keepdims", "=", "True", ")", "+", "self", ".", "epsilon", ")", ".", "pow", "(", "0.5", ")", "\n", "\n", "", "elif", "self", ".", "mode", "==", "'l1'", ":", "\n", "            ", "if", "not", "self", ".", "after_relu", ":", "\n", "                ", "_x", "=", "jt", ".", "abs", "(", "x", ")", "\n", "", "else", ":", "\n", "                ", "_x", "=", "x", "\n", "", "embedding", "=", "_x", ".", "sum", "(", "2", ",", "keepdims", "=", "True", ")", ".", "sum", "(", "\n", "3", ",", "keepdims", "=", "True", ")", "*", "self", ".", "alpha", "\n", "norm", "=", "self", ".", "gamma", "/", "(", "jt", ".", "abs", "(", "embedding", ")", ".", "mean", "(", "dim", "=", "1", ",", "keepdims", "=", "True", ")", "+", "self", ".", "epsilon", ")", "\n", "", "else", ":", "\n", "            ", "print", "(", "'Unknown mode!'", ")", "\n", "\n", "", "gate", "=", "1.", "+", "jt", ".", "tanh", "(", "embedding", "*", "norm", "+", "self", ".", "beta", ")", "\n", "\n", "return", "x", "*", "gate", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.gct_module.main": [[43, 48], ["gct_module.GCT", "jittor.rand", "GCT.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "GCT", "(", "64", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.se_module.SELayer.__init__": [[6, 14], ["jittor.Module.__init__", "jittor.AdaptiveAvgPool2d", "jittor.AdaptiveAvgPool2d", "jittor.Sequential", "jittor.Sequential", "jittor.Linear", "jittor.Linear", "jittor.ReLU", "jittor.ReLU", "jittor.Linear", "jittor.Linear", "jittor.Sigmoid", "jittor.Sigmoid"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "channel", ",", "reduction", "=", "16", ")", ":", "\n", "        ", "super", "(", "SELayer", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "avg_pool", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "1", ")", "\n", "self", ".", "fc", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Linear", "(", "channel", ",", "channel", "//", "reduction", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ",", "\n", "nn", ".", "Linear", "(", "channel", "//", "reduction", ",", "channel", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "Sigmoid", "(", ")", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.se_module.SELayer.execute": [[16, 21], ["x.size", "se_module.SELayer.avg_pool().view", "se_module.SELayer.fc().view", "se_module.SELayer.expand_as", "se_module.SELayer.avg_pool", "se_module.SELayer.fc"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "b", ",", "c", ",", "_", ",", "_", "=", "x", ".", "size", "(", ")", "\n", "y", "=", "self", ".", "avg_pool", "(", "x", ")", ".", "view", "(", "b", ",", "c", ")", "\n", "y", "=", "self", ".", "fc", "(", "y", ")", ".", "view", "(", "b", ",", "c", ",", "1", ",", "1", ")", "\n", "return", "x", "*", "y", ".", "expand_as", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.se_module.main": [[23, 28], ["se_module.SELayer", "jittor.rand", "SELayer.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "SELayer", "(", "64", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.soca_module.Covpool.execute": [[7, 20], ["x.reshape.reshape.reshape", "I_hat.view().repeat.view().repeat.view().repeat", "jittor.nn.bmm", "jittor.nn.bmm", "x.reshape.reshape.transpose", "jittor.ones", "jittor.init.eye", "I_hat.view().repeat.view().repeat.view"], "methods", ["None"], ["    ", "def", "execute", "(", "self", ",", "input", ")", ":", "\n", "        ", "x", "=", "input", "\n", "batchSize", "=", "x", ".", "data", ".", "shape", "[", "0", "]", "\n", "dim", "=", "x", ".", "data", ".", "shape", "[", "1", "]", "\n", "h", "=", "x", ".", "data", ".", "shape", "[", "2", "]", "\n", "w", "=", "x", ".", "data", ".", "shape", "[", "3", "]", "\n", "M", "=", "h", "*", "w", "\n", "x", "=", "x", ".", "reshape", "(", "batchSize", ",", "dim", ",", "M", ")", "\n", "I_hat", "=", "(", "-", "1.", "/", "M", "/", "M", ")", "*", "jt", ".", "ones", "(", "(", "M", ",", "M", ")", ")", "+", "(", "1.", "/", "M", ")", "*", "jt", ".", "init", ".", "eye", "(", "(", "M", ",", "M", ")", ")", "\n", "I_hat", "=", "I_hat", ".", "view", "(", "1", ",", "M", ",", "M", ")", ".", "repeat", "(", "batchSize", ",", "1", ",", "1", ")", "\n", "y", "=", "nn", ".", "bmm", "(", "nn", ".", "bmm", "(", "x", ",", "I_hat", ")", ",", "x", ".", "transpose", "(", "0", ",", "2", ",", "1", ")", ")", "\n", "self", ".", "save_vars", "=", "(", "input", ",", "I_hat", ")", "\n", "return", "y", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.soca_module.Covpool.grad": [[21, 34], ["x.reshape.reshape.reshape", "jittor.nn.bmm", "grad_input.reshape.reshape.reshape", "grad_output.transpose", "jittor.nn.bmm"], "methods", ["None"], ["", "def", "grad", "(", "self", ",", "grad_output", ")", ":", "\n", "        ", "input", ",", "I_hat", "=", "self", ".", "save_vars", "\n", "x", "=", "input", "\n", "batchSize", "=", "x", ".", "data", ".", "shape", "[", "0", "]", "\n", "dim", "=", "x", ".", "data", ".", "shape", "[", "1", "]", "\n", "h", "=", "x", ".", "data", ".", "shape", "[", "2", "]", "\n", "w", "=", "x", ".", "data", ".", "shape", "[", "3", "]", "\n", "M", "=", "h", "*", "w", "\n", "x", "=", "x", ".", "reshape", "(", "batchSize", ",", "dim", ",", "M", ")", "\n", "grad_input", "=", "grad_output", "+", "grad_output", ".", "transpose", "(", "0", ",", "2", ",", "1", ")", "\n", "grad_input", "=", "nn", ".", "bmm", "(", "nn", ".", "bmm", "(", "grad_input", ",", "x", ")", ",", "I_hat", ")", "\n", "grad_input", "=", "grad_input", ".", "reshape", "(", "batchSize", ",", "dim", ",", "h", ",", "w", ")", "\n", "return", "grad_input", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.soca_module.Sqrtm.execute": [[37, 66], ["x.divide", "jittor.zeros", "jittor.init.eye().view().repeat", "jittor.init.eye().view().repeat", "x.matmul().sum().sum", "normA.view().expand_as", "jittor.nn.bmm", "jittor.nn.bmm", "range", "jittor.nn.bmm", "jittor.sqrt().view().expand_as", "jittor.init.eye().view", "jittor.nn.bmm", "jittor.nn.bmm", "jittor.nn.bmm", "jittor.init.eye().view", "x.matmul().sum", "normA.view", "jittor.nn.bmm", "jittor.sqrt().view", "jittor.init.eye", "jittor.init.eye", "x.matmul", "jittor.sqrt"], "methods", ["None"], ["    ", "def", "execute", "(", "self", ",", "input", ",", "iterN", ")", ":", "\n", "        ", "x", "=", "input", "\n", "batchSize", "=", "x", ".", "data", ".", "shape", "[", "0", "]", "\n", "dim", "=", "x", ".", "data", ".", "shape", "[", "1", "]", "\n", "I3", "=", "3.0", "*", "jt", ".", "init", ".", "eye", "(", "(", "dim", ",", "dim", ")", ")", ".", "view", "(", "1", ",", "\n", "dim", ",", "dim", ")", ".", "repeat", "(", "batchSize", ",", "1", ",", "1", ")", "\n", "normA", "=", "(", "1.0", "/", "3.0", ")", "*", "x", ".", "matmul", "(", "I3", ")", ".", "sum", "(", "dim", "=", "1", ")", ".", "sum", "(", "dim", "=", "1", ")", "\n", "A", "=", "x", ".", "divide", "(", "normA", ".", "view", "(", "batchSize", ",", "1", ",", "1", ")", ".", "expand_as", "(", "x", ")", ")", "\n", "Y", "=", "jt", ".", "zeros", "(", "(", "batchSize", ",", "iterN", ",", "dim", ",", "dim", ")", ")", "\n", "Y", ".", "requires_grad", "=", "False", "\n", "Z", "=", "jt", ".", "init", ".", "eye", "(", "(", "dim", ",", "dim", ")", ")", ".", "view", "(", "\n", "1", ",", "dim", ",", "dim", ")", ".", "repeat", "(", "batchSize", ",", "iterN", ",", "1", ",", "1", ")", "\n", "if", "iterN", "<", "2", ":", "\n", "            ", "ZY", "=", "0.5", "*", "(", "I3", "-", "A", ")", "\n", "Y", "[", ":", ",", "0", ",", ":", ",", ":", "]", "=", "nn", ".", "bmm", "(", "A", ",", "ZY", ")", "\n", "", "else", ":", "\n", "            ", "ZY", "=", "0.5", "*", "(", "I3", "-", "A", ")", "\n", "Y", "[", ":", ",", "0", ",", ":", ",", ":", "]", "=", "nn", ".", "bmm", "(", "A", ",", "ZY", ")", "\n", "Z", "[", ":", ",", "0", ",", ":", ",", ":", "]", "=", "ZY", "\n", "for", "i", "in", "range", "(", "1", ",", "iterN", "-", "1", ")", ":", "\n", "                ", "ZY", "=", "0.5", "*", "nn", ".", "bmm", "(", "I3", "-", "Z", "[", ":", ",", "i", "-", "1", ",", ":", ",", ":", "]", ",", "Y", "[", ":", ",", "i", "-", "1", ",", ":", ",", ":", "]", ")", "\n", "Y", "[", ":", ",", "i", ",", ":", ",", ":", "]", "=", "nn", ".", "bmm", "(", "Y", "[", ":", ",", "i", "-", "1", ",", ":", ",", ":", "]", ",", "ZY", ")", "\n", "Z", "[", ":", ",", "i", ",", ":", ",", ":", "]", "=", "nn", ".", "bmm", "(", "ZY", ",", "Z", "[", ":", ",", "i", "-", "1", ",", ":", ",", ":", "]", ")", "\n", "", "ZY", "=", "nn", ".", "bmm", "(", "\n", "nn", ".", "bmm", "(", "0.5", "*", "Y", "[", ":", ",", "iterN", "-", "2", ",", ":", ",", ":", "]", ",", "I3", "-", "Z", "[", ":", ",", "iterN", "-", "2", ",", ":", ",", ":", "]", ")", ",", "Y", "[", ":", ",", "iterN", "-", "2", ",", ":", ",", ":", "]", ")", "\n", "", "y", "=", "ZY", "*", "jt", ".", "sqrt", "(", "normA", ")", ".", "view", "(", "batchSize", ",", "1", ",", "1", ")", ".", "expand_as", "(", "x", ")", "\n", "self", ".", "save_vars", "=", "(", "input", ",", "A", ",", "ZY", ",", "normA", ",", "Y", ",", "Z", ")", "\n", "self", ".", "iterN", "=", "iterN", "\n", "return", "y", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.soca_module.Sqrtm.grad": [[67, 105], ["der_NSiter.divide", "der_NSiter.matmul().sum().sum", "range", "jittor.sqrt().view().expand_as", "jittor.init.eye().view().repeat", "range", "normA.view().expand_as", "jittor.sqrt", "jittor.nn.bmm", "jittor.nn.bmm", "der_NSiter.matmul().sum", "jittor.ones().diag", "jittor.sqrt().view", "jittor.init.eye().view", "der_postCom.bmm", "A.bmm", "jittor.nn.bmm", "jittor.nn.bmm", "jittor.nn.bmm", "jittor.nn.bmm", "jittor.nn.bmm", "normA.view", "jittor.nn.bmm", "jittor.nn.bmm", "jittor.nn.bmm", "jittor.nn.bmm", "der_NSiter.matmul", "jittor.ones", "jittor.sqrt", "jittor.init.eye", "jittor.nn.bmm", "jittor.nn.bmm", "jittor.nn.bmm", "jittor.nn.bmm", "jittor.nn.bmm", "jittor.nn.bmm", "jittor.nn.bmm"], "methods", ["None"], ["", "def", "grad", "(", "self", ",", "grad_output", ")", ":", "\n", "        ", "input", ",", "A", ",", "ZY", ",", "normA", ",", "Y", ",", "Z", "=", "self", ".", "save_vars", "\n", "iterN", "=", "self", ".", "iterN", "\n", "x", "=", "input", "\n", "batchSize", "=", "x", ".", "data", ".", "shape", "[", "0", "]", "\n", "dim", "=", "x", ".", "data", ".", "shape", "[", "1", "]", "\n", "der_postCom", "=", "grad_output", "*", "jt", ".", "sqrt", "(", "normA", ")", ".", "view", "(", "batchSize", ",", "1", ",", "1", ")", ".", "expand_as", "(", "x", ")", "\n", "der_postComAux", "=", "(", "\n", "grad_output", "*", "ZY", ")", ".", "sum", "(", "dim", "=", "1", ")", ".", "sum", "(", "dim", "=", "1", ")", ".", "divide", "(", "2", "*", "jt", ".", "sqrt", "(", "normA", ")", ")", "\n", "I3", "=", "3.0", "*", "jt", ".", "init", ".", "eye", "(", "(", "dim", ",", "dim", ")", ")", ".", "view", "(", "1", ",", "dim", ",", "\n", "dim", ")", ".", "repeat", "(", "batchSize", ",", "1", ",", "1", ")", "\n", "if", "iterN", "<", "2", ":", "\n", "            ", "der_NSiter", "=", "0.5", "*", "(", "der_postCom", ".", "bmm", "(", "I3", "-", "A", ")", "-", "A", ".", "bmm", "(", "der_sacleTrace", ")", ")", "\n", "", "else", ":", "\n", "            ", "dldY", "=", "0.5", "*", "(", "nn", ".", "bmm", "(", "der_postCom", ",", "I3", "-", "nn", ".", "bmm", "(", "Y", "[", ":", ",", "iterN", "-", "2", ",", ":", ",", ":", "]", ",", "Z", "[", ":", ",", "iterN", "-", "2", ",", ":", ",", ":", "]", ")", ")", "-", "nn", ".", "bmm", "(", "\n", "nn", ".", "bmm", "(", "Z", "[", ":", ",", "iterN", "-", "2", ",", ":", ",", ":", "]", ",", "Y", "[", ":", ",", "iterN", "-", "2", ",", ":", ",", ":", "]", ")", ",", "der_postCom", ")", ")", "\n", "dldZ", "=", "-", "0.5", "*", "nn", ".", "bmm", "(", "\n", "nn", ".", "bmm", "(", "Y", "[", ":", ",", "iterN", "-", "2", ",", ":", ",", ":", "]", ",", "der_postCom", ")", ",", "Y", "[", ":", ",", "iterN", "-", "2", ",", ":", ",", ":", "]", ")", "\n", "for", "i", "in", "range", "(", "iterN", "-", "3", ",", "-", "1", ",", "-", "1", ")", ":", "\n", "                ", "YZ", "=", "I3", "-", "nn", ".", "bmm", "(", "Y", "[", ":", ",", "i", ",", ":", ",", ":", "]", ",", "Z", "[", ":", ",", "i", ",", ":", ",", ":", "]", ")", "\n", "ZY", "=", "nn", ".", "bmm", "(", "Z", "[", ":", ",", "i", ",", ":", ",", ":", "]", ",", "Y", "[", ":", ",", "i", ",", ":", ",", ":", "]", ")", "\n", "dldY_", "=", "0.5", "*", "(", "nn", ".", "bmm", "(", "dldY", ",", "YZ", ")", "-", "\n", "nn", ".", "bmm", "(", "nn", ".", "bmm", "(", "Z", "[", ":", ",", "i", ",", ":", ",", ":", "]", ",", "dldZ", ")", ",", "Z", "[", ":", ",", "i", ",", ":", ",", ":", "]", ")", "-", "\n", "nn", ".", "bmm", "(", "ZY", ",", "dldY", ")", ")", "\n", "dldZ_", "=", "0.5", "*", "(", "nn", ".", "bmm", "(", "YZ", ",", "dldZ", ")", "-", "\n", "nn", ".", "bmm", "(", "nn", ".", "bmm", "(", "Y", "[", ":", ",", "i", ",", ":", ",", ":", "]", ",", "dldY", ")", ",", "Y", "[", ":", ",", "i", ",", ":", ",", ":", "]", ")", "-", "\n", "nn", ".", "bmm", "(", "dldZ", ",", "ZY", ")", ")", "\n", "dldY", "=", "dldY_", "\n", "dldZ", "=", "dldZ_", "\n", "", "der_NSiter", "=", "0.5", "*", "(", "nn", ".", "bmm", "(", "dldY", ",", "I3", "-", "A", ")", "-", "dldZ", "-", "nn", ".", "bmm", "(", "A", ",", "dldY", ")", ")", "\n", "", "grad_input", "=", "der_NSiter", ".", "divide", "(", "\n", "normA", ".", "view", "(", "batchSize", ",", "1", ",", "1", ")", ".", "expand_as", "(", "x", ")", ")", "\n", "grad_aux", "=", "der_NSiter", ".", "matmul", "(", "x", ")", ".", "sum", "(", "dim", "=", "1", ")", ".", "sum", "(", "dim", "=", "1", ")", "\n", "for", "i", "in", "range", "(", "batchSize", ")", ":", "\n", "            ", "grad_input", "[", "i", ",", ":", ",", ":", "]", "+=", "(", "der_postComAux", "[", "i", "]", "\n", "-", "grad_aux", "[", "i", "]", "/", "(", "normA", "[", "i", "]", "*", "normA", "[", "i", "]", ")", ")", "*", "jt", ".", "ones", "(", "(", "dim", ",", ")", ")", ".", "diag", "(", ")", "\n", "", "return", "grad_input", ",", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.soca_module.SOCA.__init__": [[108, 119], ["jittor.nn.Module.__init__", "jittor.nn.Sequential", "soca_module.Covpool", "soca_module.Sqrtm", "jittor.nn.Conv2d", "jittor.nn.ReLU", "jittor.nn.Conv2d", "jittor.nn.Sigmoid"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "channel", ",", "reduction", "=", "8", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "conv_du", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "channel", ",", "channel", "//", "reduction", ",", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ",", "\n", "nn", ".", "Conv2d", "(", "channel", "//", "reduction", ",", "channel", ",", "1", ",", "padding", "=", "0", ",", "bias", "=", "True", ")", ",", "\n", "nn", ".", "Sigmoid", "(", ")", "\n", ")", "\n", "self", ".", "CovpoolLayer", "=", "Covpool", "(", ")", "\n", "self", ".", "SqrtmLayer", "=", "Sqrtm", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.soca_module.SOCA.execute": [[120, 148], ["soca_module.SOCA.CovpoolLayer", "soca_module.SOCA.SqrtmLayer", "jittor.mean", "cov_mat_sum.view.view.view", "soca_module.SOCA.conv_du"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "b", ",", "c", ",", "h", ",", "w", "=", "x", ".", "shape", "\n", "\n", "h1", "=", "1000", "\n", "w1", "=", "1000", "\n", "if", "h", "<", "h1", "and", "w", "<", "w1", ":", "\n", "            ", "x_sub", "=", "x", "\n", "", "elif", "h", "<", "h1", "and", "w", ">", "w1", ":", "\n", "            ", "W", "=", "(", "w", "-", "w1", ")", "//", "2", "\n", "x_sub", "=", "x", "[", ":", ",", ":", ",", ":", ",", "W", ":", "(", "W", "+", "w1", ")", "]", "\n", "", "elif", "w", "<", "w1", "and", "h", ">", "h1", ":", "\n", "            ", "H", "=", "(", "h", "-", "h1", ")", "//", "2", "\n", "x_sub", "=", "x", "[", ":", ",", ":", ",", "H", ":", "H", "+", "h1", ",", ":", "]", "\n", "", "else", ":", "\n", "            ", "H", "=", "(", "h", "-", "h1", ")", "//", "2", "\n", "W", "=", "(", "w", "-", "w1", ")", "//", "2", "\n", "x_sub", "=", "x", "[", ":", ",", ":", ",", "H", ":", "(", "H", "+", "h1", ")", ",", "W", ":", "(", "W", "+", "w1", ")", "]", "\n", "\n", "# MPN-COV", "\n", "", "cov_mat", "=", "self", ".", "CovpoolLayer", "(", "x_sub", ")", "\n", "cov_mat_sqrt", "=", "self", ".", "SqrtmLayer", "(", "cov_mat", ",", "5", ")", "\n", "\n", "cov_mat_sum", "=", "jt", ".", "mean", "(", "cov_mat_sqrt", ",", "1", ")", "\n", "cov_mat_sum", "=", "cov_mat_sum", ".", "view", "(", "b", ",", "c", ",", "1", ",", "1", ")", "\n", "\n", "y_cov", "=", "self", ".", "conv_du", "(", "cov_mat_sum", ")", "\n", "\n", "return", "y_cov", "*", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.soca_module.main": [[150, 156], ["soca_module.SOCA", "jittor.rand", "SOCA.", "jittor.grad", "print", "jt.rand.size", "attention_block.size"], "function", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.soca_module.Sqrtm.grad"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "SOCA", "(", "64", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "jt", ".", "grad", "(", "output", ",", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.eca_module.ECALayer.__init__": [[12, 18], ["jittor.Module.__init__", "jittor.AdaptiveAvgPool2d", "jittor.AdaptiveAvgPool2d", "jittor.Conv1d", "jittor.Conv1d", "jittor.Sigmoid", "jittor.Sigmoid"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["def", "__init__", "(", "self", ",", "k_size", "=", "3", ")", ":", "\n", "        ", "super", "(", "ECALayer", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "avg_pool", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "1", ")", "\n", "self", ".", "conv", "=", "nn", ".", "Conv1d", "(", "1", ",", "1", ",", "kernel_size", "=", "k_size", ",", "\n", "padding", "=", "(", "k_size", "-", "1", ")", "//", "2", ",", "bias", "=", "False", ")", "\n", "self", ".", "sigmoid", "=", "nn", ".", "Sigmoid", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.eca_module.ECALayer.execute": [[19, 30], ["eca_module.ECALayer.avg_pool", "eca_module.ECALayer.conv().transpose().unsqueeze", "eca_module.ECALayer.sigmoid", "eca_module.ECALayer.expand_as", "eca_module.ECALayer.conv().transpose", "eca_module.ECALayer.conv", "eca_module.ECALayer.squeeze().transpose", "eca_module.ECALayer.squeeze"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "# feature descriptor on the global spatial information", "\n", "        ", "y", "=", "self", ".", "avg_pool", "(", "x", ")", "\n", "\n", "# Two different branches of ECA module", "\n", "y", "=", "self", ".", "conv", "(", "y", ".", "squeeze", "(", "-", "1", ")", ".", "transpose", "(", "-", "1", ",", "-", "2", ")", "\n", ")", ".", "transpose", "(", "-", "1", ",", "-", "2", ")", ".", "unsqueeze", "(", "-", "1", ")", "\n", "\n", "y", "=", "self", ".", "sigmoid", "(", "y", ")", "\n", "\n", "return", "x", "*", "y", ".", "expand_as", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.eca_module.main": [[32, 37], ["eca_module.ECALayer", "jittor.rand", "ECALayer.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "ECALayer", "(", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.fcanet.MultiSpectralAttentionLayer.__init__": [[39, 61], ["jittor.nn.Module.__init__", "fcanet.get_freq_indices", "len", "fcanet.MultiSpectralDCTLayer", "jittor.nn.Sequential", "jittor.nn.AdaptiveAvgPool2d", "jittor.nn.Linear", "jittor.nn.ReLU", "jittor.nn.Linear", "jittor.nn.Sigmoid"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__", "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.fcanet.get_freq_indices"], ["    ", "def", "__init__", "(", "self", ",", "channel", ",", "dct_h", ",", "dct_w", ",", "reduction", "=", "16", ",", "freq_sel_method", "=", "'top16'", ")", ":", "\n", "        ", "super", "(", "MultiSpectralAttentionLayer", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "reduction", "=", "reduction", "\n", "self", ".", "dct_h", "=", "dct_h", "\n", "self", ".", "dct_w", "=", "dct_w", "\n", "\n", "mapper_x", ",", "mapper_y", "=", "get_freq_indices", "(", "freq_sel_method", ")", "\n", "self", ".", "num_split", "=", "len", "(", "mapper_x", ")", "\n", "mapper_x", "=", "[", "temp_x", "*", "(", "dct_h", "//", "7", ")", "for", "temp_x", "in", "mapper_x", "]", "\n", "mapper_y", "=", "[", "temp_y", "*", "(", "dct_w", "//", "7", ")", "for", "temp_y", "in", "mapper_y", "]", "\n", "# make the frequencies in different sizes are identical to a 7x7 frequency space", "\n", "# eg, (2,2) in 14x14 is identical to (1,1) in 7x7", "\n", "\n", "self", ".", "dct_layer", "=", "MultiSpectralDCTLayer", "(", "\n", "dct_h", ",", "dct_w", ",", "mapper_x", ",", "mapper_y", ",", "channel", ")", "\n", "self", ".", "fc", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Linear", "(", "channel", ",", "channel", "//", "reduction", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ",", "\n", "nn", ".", "Linear", "(", "channel", "//", "reduction", ",", "channel", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "Sigmoid", "(", ")", "\n", ")", "\n", "self", ".", "avgpool", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "(", "self", ".", "dct_h", ",", "self", ".", "dct_w", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.fcanet.MultiSpectralAttentionLayer.execute": [[62, 74], ["fcanet.MultiSpectralAttentionLayer.dct_layer", "fcanet.MultiSpectralAttentionLayer.fc().view", "fcanet.MultiSpectralAttentionLayer.avgpool", "fcanet.MultiSpectralAttentionLayer.expand_as", "fcanet.MultiSpectralAttentionLayer.fc"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "n", ",", "c", ",", "h", ",", "w", "=", "x", ".", "shape", "\n", "x_pooled", "=", "x", "\n", "if", "h", "!=", "self", ".", "dct_h", "or", "w", "!=", "self", ".", "dct_w", ":", "\n", "            ", "x_pooled", "=", "self", ".", "avgpool", "(", "x", ")", "\n", "# If you have concerns about one-line-change, don't worry.   :)", "\n", "# In the ImageNet models, this line will never be triggered.", "\n", "# This is for compatibility in instance segmentation and object detection.", "\n", "", "y", "=", "self", ".", "dct_layer", "(", "x_pooled", ")", "\n", "\n", "y", "=", "self", ".", "fc", "(", "y", ")", ".", "view", "(", "n", ",", "c", ",", "1", ",", "1", ")", "\n", "return", "x", "*", "y", ".", "expand_as", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.fcanet.MultiSpectralDCTLayer.__init__": [[81, 92], ["jittor.nn.Module.__init__", "len", "fcanet.MultiSpectralDCTLayer.get_dct_filter", "len", "len", "len"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__", "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.fcanet.MultiSpectralDCTLayer.get_dct_filter"], ["def", "__init__", "(", "self", ",", "height", ",", "width", ",", "mapper_x", ",", "mapper_y", ",", "channel", ")", ":", "\n", "        ", "super", "(", "MultiSpectralDCTLayer", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "assert", "len", "(", "mapper_x", ")", "==", "len", "(", "mapper_y", ")", "\n", "assert", "channel", "%", "len", "(", "mapper_x", ")", "==", "0", "\n", "\n", "self", ".", "num_freq", "=", "len", "(", "mapper_x", ")", "\n", "\n", "# fixed DCT init", "\n", "self", ".", "weight", "=", "self", ".", "get_dct_filter", "(", "\n", "height", ",", "width", ",", "mapper_x", ",", "mapper_y", ",", "channel", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.fcanet.MultiSpectralDCTLayer.execute": [[93, 101], ["jittor.sum", "len", "str", "jittor.sum", "len"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "assert", "len", "(", "x", ".", "shape", ")", "==", "4", ",", "'x must been 4 dimensions, but got '", "+", "str", "(", "len", "(", "x", ".", "shape", ")", ")", "\n", "# n, c, h, w = x.shape", "\n", "\n", "x", "=", "x", "*", "self", ".", "weight", "\n", "result", "=", "jt", ".", "sum", "(", "jt", ".", "sum", "(", "x", ",", "dim", "=", "2", ")", ",", "dim", "=", "2", ")", "\n", "return", "result", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.fcanet.MultiSpectralDCTLayer.build_filter": [[102, 108], ["math.cos", "math.sqrt", "math.sqrt"], "methods", ["None"], ["", "def", "build_filter", "(", "self", ",", "pos", ",", "freq", ",", "POS", ")", ":", "\n", "        ", "result", "=", "math", ".", "cos", "(", "math", ".", "pi", "*", "freq", "*", "(", "pos", "+", "0.5", ")", "/", "POS", ")", "/", "math", ".", "sqrt", "(", "POS", ")", "\n", "if", "freq", "==", "0", ":", "\n", "            ", "return", "result", "\n", "", "else", ":", "\n", "            ", "return", "result", "*", "math", ".", "sqrt", "(", "2", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.fcanet.MultiSpectralDCTLayer.get_dct_filter": [[109, 121], ["jittor.zeros", "enumerate", "len", "zip", "range", "range", "fcanet.MultiSpectralDCTLayer.build_filter", "fcanet.MultiSpectralDCTLayer.build_filter"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.fcanet.MultiSpectralDCTLayer.build_filter", "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.fcanet.MultiSpectralDCTLayer.build_filter"], ["", "", "def", "get_dct_filter", "(", "self", ",", "tile_size_x", ",", "tile_size_y", ",", "mapper_x", ",", "mapper_y", ",", "channel", ")", ":", "\n", "        ", "dct_filter", "=", "jt", ".", "zeros", "(", "(", "channel", ",", "tile_size_x", ",", "tile_size_y", ")", ")", "\n", "\n", "c_part", "=", "channel", "//", "len", "(", "mapper_x", ")", "\n", "\n", "for", "i", ",", "(", "u_x", ",", "v_y", ")", "in", "enumerate", "(", "zip", "(", "mapper_x", ",", "mapper_y", ")", ")", ":", "\n", "            ", "for", "t_x", "in", "range", "(", "tile_size_x", ")", ":", "\n", "                ", "for", "t_y", "in", "range", "(", "tile_size_y", ")", ":", "\n", "                    ", "dct_filter", "[", "i", "*", "c_part", ":", "(", "i", "+", "1", ")", "*", "c_part", ",", "t_x", ",", "t_y", "]", "=", "self", ".", "build_filter", "(", "\n", "t_x", ",", "u_x", ",", "tile_size_x", ")", "*", "self", ".", "build_filter", "(", "t_y", ",", "v_y", ",", "tile_size_y", ")", "\n", "\n", "", "", "", "return", "dct_filter", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.fcanet.get_freq_indices": [[7, 36], ["int"], "function", ["None"], ["def", "get_freq_indices", "(", "method", ")", ":", "\n", "    ", "assert", "method", "in", "[", "'top1'", ",", "'top2'", ",", "'top4'", ",", "'top8'", ",", "'top16'", ",", "'top32'", ",", "\n", "'bot1'", ",", "'bot2'", ",", "'bot4'", ",", "'bot8'", ",", "'bot16'", ",", "'bot32'", ",", "\n", "'low1'", ",", "'low2'", ",", "'low4'", ",", "'low8'", ",", "'low16'", ",", "'low32'", "]", "\n", "num_freq", "=", "int", "(", "method", "[", "3", ":", "]", ")", "\n", "if", "'top'", "in", "method", ":", "\n", "        ", "all_top_indices_x", "=", "[", "0", ",", "0", ",", "6", ",", "0", ",", "0", ",", "1", ",", "1", ",", "4", ",", "5", ",", "1", ",", "3", ",", "0", ",", "0", ",", "\n", "0", ",", "3", ",", "2", ",", "4", ",", "6", ",", "3", ",", "5", ",", "5", ",", "2", ",", "6", ",", "5", ",", "5", ",", "3", ",", "3", ",", "4", ",", "2", ",", "2", ",", "6", ",", "1", "]", "\n", "all_top_indices_y", "=", "[", "0", ",", "1", ",", "0", ",", "5", ",", "2", ",", "0", ",", "2", ",", "0", ",", "0", ",", "6", ",", "0", ",", "4", ",", "6", ",", "\n", "3", ",", "5", ",", "2", ",", "6", ",", "3", ",", "3", ",", "3", ",", "5", ",", "1", ",", "1", ",", "2", ",", "4", ",", "2", ",", "1", ",", "1", ",", "3", ",", "0", ",", "5", ",", "3", "]", "\n", "mapper_x", "=", "all_top_indices_x", "[", ":", "num_freq", "]", "\n", "mapper_y", "=", "all_top_indices_y", "[", ":", "num_freq", "]", "\n", "", "elif", "'low'", "in", "method", ":", "\n", "        ", "all_low_indices_x", "=", "[", "0", ",", "0", ",", "1", ",", "1", ",", "0", ",", "2", ",", "2", ",", "1", ",", "2", ",", "0", ",", "3", ",", "4", ",", "0", ",", "\n", "1", ",", "3", ",", "0", ",", "1", ",", "2", ",", "3", ",", "4", ",", "5", ",", "0", ",", "1", ",", "2", ",", "3", ",", "4", ",", "5", ",", "6", ",", "1", ",", "2", ",", "3", ",", "4", "]", "\n", "all_low_indices_y", "=", "[", "0", ",", "1", ",", "0", ",", "1", ",", "2", ",", "0", ",", "1", ",", "2", ",", "2", ",", "3", ",", "0", ",", "0", ",", "4", ",", "\n", "3", ",", "1", ",", "5", ",", "4", ",", "3", ",", "2", ",", "1", ",", "0", ",", "6", ",", "5", ",", "4", ",", "3", ",", "2", ",", "1", ",", "0", ",", "6", ",", "5", ",", "4", ",", "3", "]", "\n", "mapper_x", "=", "all_low_indices_x", "[", ":", "num_freq", "]", "\n", "mapper_y", "=", "all_low_indices_y", "[", ":", "num_freq", "]", "\n", "", "elif", "'bot'", "in", "method", ":", "\n", "        ", "all_bot_indices_x", "=", "[", "6", ",", "1", ",", "3", ",", "3", ",", "2", ",", "4", ",", "1", ",", "2", ",", "4", ",", "4", ",", "5", ",", "1", ",", "4", ",", "\n", "6", ",", "2", ",", "5", ",", "6", ",", "1", ",", "6", ",", "2", ",", "2", ",", "4", ",", "3", ",", "3", ",", "5", ",", "5", ",", "6", ",", "2", ",", "5", ",", "5", ",", "3", ",", "6", "]", "\n", "all_bot_indices_y", "=", "[", "6", ",", "4", ",", "4", ",", "6", ",", "6", ",", "3", ",", "1", ",", "4", ",", "4", ",", "5", ",", "6", ",", "5", ",", "2", ",", "\n", "2", ",", "5", ",", "1", ",", "4", ",", "3", ",", "5", ",", "0", ",", "3", ",", "1", ",", "1", ",", "2", ",", "4", ",", "2", ",", "1", ",", "1", ",", "5", ",", "3", ",", "3", ",", "3", "]", "\n", "mapper_x", "=", "all_bot_indices_x", "[", ":", "num_freq", "]", "\n", "mapper_y", "=", "all_bot_indices_y", "[", ":", "num_freq", "]", "\n", "", "else", ":", "\n", "        ", "raise", "NotImplementedError", "\n", "", "return", "mapper_x", ",", "mapper_y", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.fcanet.main": [[123, 128], ["fcanet.MultiSpectralAttentionLayer", "jittor.ones", "MultiSpectralAttentionLayer.", "print", "jt.ones.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "MultiSpectralAttentionLayer", "(", "64", ",", "16", ",", "16", ")", "\n", "input", "=", "jt", ".", "ones", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.enc_module.Encoding.__init__": [[7, 17], ["jittor.nn.Module.__init__", "jittor.init.uniform_", "jittor.init.uniform_", "jittor.random", "jittor.random"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "channels", ",", "num_codes", ")", ":", "\n", "        ", "super", "(", "Encoding", ",", "self", ")", ".", "__init__", "(", ")", "\n", "# init codewords and smoothing factor", "\n", "self", ".", "channels", ",", "self", ".", "num_codes", "=", "channels", ",", "num_codes", "\n", "std", "=", "1.", "/", "(", "(", "num_codes", "*", "channels", ")", "**", "0.5", ")", "\n", "# [num_codes, channels]", "\n", "self", ".", "codewords", "=", "init", ".", "uniform_", "(", "\n", "jt", ".", "random", "(", "(", "num_codes", ",", "channels", ")", ")", ",", "-", "std", ",", "std", ")", "\n", "# [num_codes]", "\n", "self", ".", "scale", "=", "init", ".", "uniform_", "(", "jt", ".", "random", "(", "(", "num_codes", ",", ")", ")", ",", "-", "1", ",", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.enc_module.Encoding.scaled_l2": [[18, 30], ["codewords.size", "x.size", "scale.view", "x.unsqueeze().expand", "codewords.view", "x.unsqueeze", "x.size"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "scaled_l2", "(", "x", ",", "codewords", ",", "scale", ")", ":", "\n", "        ", "num_codes", ",", "channels", "=", "codewords", ".", "size", "(", ")", "\n", "batch_size", "=", "x", ".", "size", "(", "0", ")", "\n", "reshaped_scale", "=", "scale", ".", "view", "(", "(", "1", ",", "1", ",", "num_codes", ")", ")", "\n", "expanded_x", "=", "x", ".", "unsqueeze", "(", "2", ")", ".", "expand", "(", "\n", "(", "batch_size", ",", "x", ".", "size", "(", "1", ")", ",", "num_codes", ",", "channels", ")", ")", "\n", "reshaped_codewords", "=", "codewords", ".", "view", "(", "(", "1", ",", "1", ",", "num_codes", ",", "channels", ")", ")", "\n", "\n", "scaled_l2_norm", "=", "reshaped_scale", "*", "(", "\n", "expanded_x", "-", "reshaped_codewords", ")", ".", "pow", "(", "2", ")", ".", "sum", "(", "dim", "=", "3", ")", "\n", "return", "scaled_l2_norm", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.enc_module.Encoding.aggregate": [[31, 42], ["codewords.size", "codewords.view", "x.size", "x.unsqueeze().expand", "x.unsqueeze", "x.size", "assignment_weights.unsqueeze"], "methods", ["None"], ["", "@", "staticmethod", "\n", "def", "aggregate", "(", "assignment_weights", ",", "x", ",", "codewords", ")", ":", "\n", "        ", "num_codes", ",", "channels", "=", "codewords", ".", "size", "(", ")", "\n", "reshaped_codewords", "=", "codewords", ".", "view", "(", "(", "1", ",", "1", ",", "num_codes", ",", "channels", ")", ")", "\n", "batch_size", "=", "x", ".", "size", "(", "0", ")", "\n", "\n", "expanded_x", "=", "x", ".", "unsqueeze", "(", "2", ")", ".", "expand", "(", "\n", "(", "batch_size", ",", "x", ".", "size", "(", "1", ")", ",", "num_codes", ",", "channels", ")", ")", "\n", "encoded_feat", "=", "(", "assignment_weights", ".", "unsqueeze", "(", "3", ")", "*", "\n", "(", "expanded_x", "-", "reshaped_codewords", ")", ")", ".", "sum", "(", "dim", "=", "1", ")", "\n", "return", "encoded_feat", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.enc_module.Encoding.execute": [[43, 55], ["x.view().transpose.view().transpose.size", "x.view().transpose.view().transpose.view().transpose", "jittor.nn.softmax", "enc_module.Encoding.aggregate", "enc_module.Encoding.scaled_l2", "x.view().transpose.view().transpose.size", "x.view().transpose.view().transpose.view"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.enc_module.Encoding.aggregate", "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.enc_module.Encoding.scaled_l2"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "assert", "x", ".", "ndim", "==", "4", "and", "x", ".", "size", "(", "1", ")", "==", "self", ".", "channels", "\n", "# [batch_size, channels, height, width]", "\n", "batch_size", "=", "x", ".", "size", "(", "0", ")", "\n", "# [batch_size, height x width, channels]", "\n", "x", "=", "x", ".", "view", "(", "batch_size", ",", "self", ".", "channels", ",", "-", "1", ")", ".", "transpose", "(", "0", ",", "2", ",", "1", ")", "\n", "# assignment_weights: [batch_size, channels, num_codes]", "\n", "assignment_weights", "=", "nn", ".", "softmax", "(", "\n", "self", ".", "scaled_l2", "(", "x", ",", "self", ".", "codewords", ",", "self", ".", "scale", ")", ",", "dim", "=", "2", ")", "\n", "# aggregate", "\n", "encoded_feat", "=", "self", ".", "aggregate", "(", "assignment_weights", ",", "x", ",", "self", ".", "codewords", ")", "\n", "return", "encoded_feat", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.enc_module.EncModule.__init__": [[58, 67], ["jittor.nn.Module.__init__", "jittor.nn.Conv2d", "jittor.nn.Sequential", "jittor.nn.Sequential", "enc_module.Encoding", "jittor.nn.BatchNorm", "jittor.nn.ReLU", "jittor.nn.Linear", "jittor.nn.Sigmoid"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "in_channels", ",", "num_codes", ")", ":", "\n", "        ", "super", "(", "EncModule", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "encoding_project", "=", "nn", ".", "Conv2d", "(", "in_channels", ",", "in_channels", ",", "1", ")", "\n", "self", ".", "encoding", "=", "nn", ".", "Sequential", "(", "\n", "Encoding", "(", "channels", "=", "in_channels", ",", "num_codes", "=", "num_codes", ")", ",", "\n", "nn", ".", "BatchNorm", "(", "num_codes", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ")", "\n", "self", ".", "fc", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Linear", "(", "in_channels", ",", "in_channels", ")", ",", "nn", ".", "Sigmoid", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.enc_module.EncModule.execute": [[68, 74], ["enc_module.EncModule.encoding_project", "enc_module.EncModule.encoding().mean", "x.size", "enc_module.EncModule.fc", "enc_module.EncModule.view", "enc_module.EncModule.encoding"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "encoding_projection", "=", "self", ".", "encoding_project", "(", "x", ")", "\n", "encoding_feat", "=", "self", ".", "encoding", "(", "encoding_projection", ")", ".", "mean", "(", "dim", "=", "1", ")", "\n", "batch_size", ",", "channels", ",", "_", ",", "_", "=", "x", ".", "size", "(", ")", "\n", "gamma", "=", "self", ".", "fc", "(", "encoding_feat", ")", "\n", "return", "x", "*", "gamma", ".", "view", "(", "batch_size", ",", "channels", ",", "1", ",", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.enc_module.main": [[76, 81], ["enc_module.EncModule", "jittor.rand", "EncModule.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "EncModule", "(", "64", ",", "32", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.dia_module.small_cell.__init__": [[7, 13], ["jittor.nn.Module.__init__", "jittor.nn.Sequential", "jittor.nn.Linear", "jittor.nn.ReLU", "jittor.nn.Linear"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "input_size", ",", "hidden_size", ")", ":", "\n", "        ", "\"\"\"\"Constructor of the class\"\"\"", "\n", "super", "(", "small_cell", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "seq", "=", "nn", ".", "Sequential", "(", "nn", ".", "Linear", "(", "input_size", ",", "input_size", "//", "4", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ",", "\n", "nn", ".", "Linear", "(", "input_size", "//", "4", ",", "4", "*", "hidden_size", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.dia_module.small_cell.execute": [[14, 16], ["dia_module.small_cell.seq"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "self", ".", "seq", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.dia_module.LSTMCell.__init__": [[19, 38], ["jittor.nn.Module.__init__", "jittor.nn.Dropout", "range", "jittor.nn.ModuleList", "jittor.nn.ModuleList", "ih.append", "hh.append", "ih.append", "hh.append", "dia_module.small_cell", "dia_module.small_cell", "jittor.nn.Linear", "jittor.nn.Linear"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "input_size", ",", "hidden_size", ",", "nlayers", ",", "dropout", "=", "0.1", ")", ":", "\n", "        ", "\"\"\"\"Constructor of the class\"\"\"", "\n", "super", "(", "LSTMCell", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "nlayers", "=", "nlayers", "\n", "self", ".", "dropout", "=", "nn", ".", "Dropout", "(", "p", "=", "dropout", ")", "\n", "\n", "ih", ",", "hh", "=", "[", "]", ",", "[", "]", "\n", "for", "i", "in", "range", "(", "nlayers", ")", ":", "\n", "            ", "if", "i", "==", "0", ":", "\n", "# ih.append(nn.Linear(input_size, 4 * hidden_size))", "\n", "                ", "ih", ".", "append", "(", "small_cell", "(", "input_size", ",", "hidden_size", ")", ")", "\n", "# hh.append(nn.Linear(hidden_size, 4 * hidden_size))", "\n", "hh", ".", "append", "(", "small_cell", "(", "hidden_size", ",", "hidden_size", ")", ")", "\n", "", "else", ":", "\n", "                ", "ih", ".", "append", "(", "nn", ".", "Linear", "(", "hidden_size", ",", "4", "*", "hidden_size", ")", ")", "\n", "hh", ".", "append", "(", "nn", ".", "Linear", "(", "hidden_size", ",", "4", "*", "hidden_size", ")", ")", "\n", "", "", "self", ".", "w_ih", "=", "nn", ".", "ModuleList", "(", "ih", ")", "\n", "self", ".", "w_hh", "=", "nn", ".", "ModuleList", "(", "hh", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.dia_module.LSTMCell.execute": [[39, 60], ["range", "gates.chunk", "i_gate.sigmoid.sigmoid.sigmoid", "f_gate.sigmoid.sigmoid.sigmoid", "jittor.tanh", "o_gate.sigmoid.sigmoid.sigmoid", "cy.append", "hy.append", "dia_module.LSTMCell.dropout", "jittor.stack", "jittor.stack", "ncx.sigmoid"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "input", ",", "hidden", ")", ":", "\n", "        ", "\"\"\"\"Defines the forward computation of the LSTMCell\"\"\"", "\n", "hy", ",", "cy", "=", "[", "]", ",", "[", "]", "\n", "for", "i", "in", "range", "(", "self", ".", "nlayers", ")", ":", "\n", "            ", "hx", ",", "cx", "=", "hidden", "[", "0", "]", "[", "i", "]", ",", "hidden", "[", "1", "]", "[", "i", "]", "\n", "gates", "=", "self", ".", "w_ih", "[", "i", "]", "(", "input", ")", "+", "self", ".", "w_hh", "[", "i", "]", "(", "hx", ")", "\n", "i_gate", ",", "f_gate", ",", "c_gate", ",", "o_gate", "=", "gates", ".", "chunk", "(", "4", ",", "1", ")", "\n", "i_gate", "=", "i_gate", ".", "sigmoid", "(", ")", "\n", "f_gate", "=", "f_gate", ".", "sigmoid", "(", ")", "\n", "c_gate", "=", "jt", ".", "tanh", "(", "c_gate", ")", "\n", "o_gate", "=", "o_gate", ".", "sigmoid", "(", ")", "\n", "ncx", "=", "(", "f_gate", "*", "cx", ")", "+", "(", "i_gate", "*", "c_gate", ")", "\n", "# nhx = o_gate * torch.tanh(ncx)", "\n", "nhx", "=", "o_gate", "*", "ncx", ".", "sigmoid", "(", ")", "\n", "cy", ".", "append", "(", "ncx", ")", "\n", "hy", ".", "append", "(", "nhx", ")", "\n", "input", "=", "self", ".", "dropout", "(", "nhx", ")", "\n", "\n", "", "hy", ",", "cy", "=", "jt", ".", "stack", "(", "hy", ",", "0", ")", ",", "jt", ".", "stack", "(", "\n", "cy", ",", "0", ")", "# number of layer * batch * hidden", "\n", "return", "hy", ",", "cy", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.dia_module.Attention.__init__": [[63, 69], ["jittor.nn.Module.__init__", "dia_module.LSTMCell", "jittor.nn.AdaptiveAvgPool2d", "jittor.nn.ReLU"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "channel", ")", ":", "\n", "        ", "super", "(", "Attention", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "lstm", "=", "LSTMCell", "(", "channel", ",", "channel", ",", "1", ")", "\n", "\n", "self", ".", "GlobalAvg", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "(", "1", ",", "1", ")", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.dia_module.Attention.execute": [[70, 84], ["dia_module.Attention.GlobalAvg", "seq.view.view.view", "jittor.zeros", "jittor.zeros", "dia_module.Attention.lstm", "dia_module.Attention.relu", "seq.view.view.size", "seq.view.view.size", "ht[].view", "seq.view.view.size", "seq.view.view.size", "seq.view.view.size", "seq.view.view.size", "jittor.zeros.size", "jittor.zeros.size"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "org", "=", "x", "\n", "seq", "=", "self", ".", "GlobalAvg", "(", "x", ")", "\n", "seq", "=", "seq", ".", "view", "(", "seq", ".", "size", "(", "0", ")", ",", "seq", ".", "size", "(", "1", ")", ")", "\n", "ht", "=", "jt", ".", "zeros", "(", "(", "1", ",", "seq", ".", "size", "(", "0", ")", ",", "seq", ".", "size", "(", "\n", "1", ")", ")", ")", "# 1 mean number of layers", "\n", "ct", "=", "jt", ".", "zeros", "(", "(", "1", ",", "seq", ".", "size", "(", "0", ")", ",", "seq", ".", "size", "(", "1", ")", ")", ")", "\n", "ht", ",", "ct", "=", "self", ".", "lstm", "(", "seq", ",", "(", "ht", ",", "ct", ")", ")", "# 1 * batch size * length", "\n", "# ht = self.sigmoid(ht)", "\n", "x", "=", "x", "*", "(", "ht", "[", "-", "1", "]", ".", "view", "(", "ht", ".", "size", "(", "1", ")", ",", "ht", ".", "size", "(", "2", ")", ",", "1", ",", "1", ")", ")", "\n", "x", "+=", "org", "\n", "x", "=", "self", ".", "relu", "(", "x", ")", "\n", "\n", "return", "x", "# , list", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.dia_module.main": [[86, 91], ["dia_module.Attention", "jittor.rand", "Attention.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "Attention", "(", "64", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.stn.STN.__init__": [[76, 78], ["jittor.nn.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", "STN", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.stn.STN.execute": [[79, 91], ["theta.reshape.reshape.reshape", "stn.affine_grid_generator", "stn.bilinear_sampler"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.stn.affine_grid_generator", "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.stn.bilinear_sampler"], ["", "def", "execute", "(", "self", ",", "x1", ",", "theta", ")", ":", "\n", "        ", "B", ",", "C", ",", "H", ",", "W", "=", "x1", ".", "shape", "\n", "theta", "=", "theta", ".", "reshape", "(", "-", "1", ",", "2", ",", "3", ")", "\n", "\n", "batch_grids", "=", "affine_grid_generator", "(", "H", ",", "W", ",", "theta", ")", "\n", "\n", "x_s", "=", "batch_grids", "[", ":", ",", "0", ",", ":", ",", ":", "]", "\n", "y_s", "=", "batch_grids", "[", ":", ",", "1", ",", ":", ",", ":", "]", "\n", "\n", "out_fmap", "=", "bilinear_sampler", "(", "x1", ",", "x_s", ",", "y_s", ")", "\n", "\n", "return", "out_fmap", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.stn.get_pixel_value": [[6, 9], ["img.reindex"], "function", ["None"], ["def", "get_pixel_value", "(", "img", ",", "x", ",", "y", ")", ":", "\n", "    ", "B", ",", "C", ",", "H", ",", "W", "=", "img", ".", "shape", "\n", "return", "img", ".", "reindex", "(", "[", "B", ",", "C", ",", "H", ",", "W", "]", ",", "[", "'i0'", ",", "'i1'", ",", "'@e0(i0, i2, i3)'", ",", "'@e1(i0, i2, i3)'", "]", ",", "extras", "=", "[", "x", ",", "y", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.stn.affine_grid_generator": [[11, 37], ["jittor.linspace", "jittor.linspace", "jittor.meshgrid", "x_t.reshape", "y_t.reshape", "print", "jittor.ones_like", "jittor.stack", "sampling_grid.unsqueeze().expand.unsqueeze().expand", "jittor.matmul", "batch_grids.reshape.reshape", "sampling_grid.unsqueeze().expand.unsqueeze"], "function", ["None"], ["", "def", "affine_grid_generator", "(", "height", ",", "width", ",", "theta", ")", ":", "\n", "    ", "num_batch", "=", "theta", ".", "shape", "[", "0", "]", "\n", "\n", "# create normalized 2D grid", "\n", "x", "=", "jt", ".", "linspace", "(", "-", "1.0", ",", "1.0", ",", "width", ")", "\n", "y", "=", "jt", ".", "linspace", "(", "-", "1.0", ",", "1.0", ",", "height", ")", "\n", "x_t", ",", "y_t", "=", "jt", ".", "meshgrid", "(", "x", ",", "y", ")", "\n", "\n", "# flatten", "\n", "x_t_flat", "=", "x_t", ".", "reshape", "(", "-", "1", ")", "\n", "y_t_flat", "=", "y_t", ".", "reshape", "(", "-", "1", ")", "\n", "print", "(", "x_t", ".", "shape", ")", "\n", "# reshape to [x_t, y_t , 1] - (homogeneous form)", "\n", "ones", "=", "jt", ".", "ones_like", "(", "x_t_flat", ")", "\n", "sampling_grid", "=", "jt", ".", "stack", "(", "[", "x_t_flat", ",", "y_t_flat", ",", "ones", "]", ")", "\n", "\n", "# repeat grid num_batch times", "\n", "sampling_grid", "=", "sampling_grid", ".", "unsqueeze", "(", "0", ")", ".", "expand", "(", "num_batch", ",", "-", "1", ",", "-", "1", ")", "\n", "\n", "\n", "# transform the sampling grid - batch multiply", "\n", "batch_grids", "=", "jt", ".", "matmul", "(", "theta", ",", "sampling_grid", ")", "\n", "\n", "# reshape to (num_batch, H, W, 2)", "\n", "batch_grids", "=", "batch_grids", ".", "reshape", "(", "num_batch", ",", "2", ",", "height", ",", "width", ")", "\n", "return", "batch_grids", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.stn.bilinear_sampler": [[39, 74], ["jittor.floor().astype", "jittor.floor().astype", "jittor.minimum", "jittor.minimum", "jittor.minimum", "jittor.minimum", "stn.get_pixel_value", "stn.get_pixel_value", "stn.get_pixel_value", "stn.get_pixel_value", "jittor.maximum", "jittor.maximum", "jittor.maximum", "jittor.maximum", "jittor.floor", "jittor.floor"], "function", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.stn.get_pixel_value", "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.stn.get_pixel_value", "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.stn.get_pixel_value", "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.stn.get_pixel_value"], ["", "def", "bilinear_sampler", "(", "img", ",", "x", ",", "y", ")", ":", "\n", "    ", "B", ",", "C", ",", "H", ",", "W", "=", "img", ".", "shape", "\n", "max_y", "=", "H", "-", "1", "\n", "max_x", "=", "W", "-", "1", "\n", "\n", "# rescale x and y to [0, W-1/H-1]", "\n", "x", "=", "0.5", "*", "(", "x", "+", "1.0", ")", "*", "(", "max_x", "-", "1", ")", "\n", "y", "=", "0.5", "*", "(", "y", "+", "1.0", ")", "*", "(", "max_y", "-", "1", ")", "\n", "\n", "# grab 4 nearest corner points for each (x_i, y_i)", "\n", "x0", "=", "jt", ".", "floor", "(", "x", ")", ".", "astype", "(", "'int32'", ")", "\n", "x1", "=", "x0", "+", "1", "\n", "y0", "=", "jt", ".", "floor", "(", "y", ")", ".", "astype", "(", "'int32'", ")", "\n", "y1", "=", "y0", "+", "1", "\n", "\n", "x0", "=", "jt", ".", "minimum", "(", "jt", ".", "maximum", "(", "0", ",", "x0", ")", ",", "max_x", ")", "\n", "x1", "=", "jt", ".", "minimum", "(", "jt", ".", "maximum", "(", "0", ",", "x1", ")", ",", "max_x", ")", "\n", "y0", "=", "jt", ".", "minimum", "(", "jt", ".", "maximum", "(", "0", ",", "y0", ")", ",", "max_y", ")", "\n", "y1", "=", "jt", ".", "minimum", "(", "jt", ".", "maximum", "(", "0", ",", "y1", ")", ",", "max_y", ")", "\n", "\n", "# get pixel value at corner coords", "\n", "Ia", "=", "get_pixel_value", "(", "img", ",", "x0", ",", "y0", ")", "\n", "Ib", "=", "get_pixel_value", "(", "img", ",", "x0", ",", "y1", ")", "\n", "Ic", "=", "get_pixel_value", "(", "img", ",", "x1", ",", "y0", ")", "\n", "Id", "=", "get_pixel_value", "(", "img", ",", "x1", ",", "y1", ")", "\n", "\n", "# calculate deltas", "\n", "wa", "=", "(", "x1", "-", "x", ")", "*", "(", "y1", "-", "y", ")", "\n", "wb", "=", "(", "x1", "-", "x", ")", "*", "(", "y", "-", "y0", ")", "\n", "wc", "=", "(", "x", "-", "x0", ")", "*", "(", "y1", "-", "y", ")", "\n", "wd", "=", "(", "x", "-", "x0", ")", "*", "(", "y", "-", "y0", ")", "\n", "\n", "# compute output", "\n", "out", "=", "wa", "*", "Ia", "+", "wb", "*", "Ib", "+", "wc", "*", "Ic", "+", "wd", "*", "Id", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.stn.main": [[93, 99], ["stn.STN", "jittor.randn", "jittor.array", "STN.", "print", "numpy.random.uniform"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "stn", "=", "STN", "(", ")", "\n", "x", "=", "jt", ".", "randn", "(", "1", ",", "3", ",", "224", ",", "224", ")", "\n", "theta", "=", "jt", ".", "array", "(", "np", ".", "random", ".", "uniform", "(", "0", ",", "1", ",", "(", "1", ",", "6", ")", ")", ")", "\n", "y", "=", "stn", "(", "x", ",", "theta", ")", "\n", "print", "(", "y", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.AugmentedConv.__init__": [[7, 24], ["jittor.nn.Module.__init__", "jittor.nn.Conv2d", "jittor.nn.Conv2d", "jittor.nn.Conv2d"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "in_channels", ",", "out_channels", ",", "kernel_size", ",", "dk", ",", "dv", ",", "Nh", ",", "relative", ")", ":", "\n", "        ", "super", "(", "AugmentedConv", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "in_channels", "=", "in_channels", "\n", "self", ".", "out_channels", "=", "out_channels", "\n", "self", ".", "kernel_size", "=", "kernel_size", "\n", "self", ".", "dk", "=", "dk", "\n", "self", ".", "dv", "=", "dv", "\n", "self", ".", "Nh", "=", "Nh", "\n", "self", ".", "relative", "=", "relative", "\n", "\n", "self", ".", "conv_out", "=", "nn", ".", "Conv2d", "(", "\n", "self", ".", "in_channels", ",", "self", ".", "out_channels", "-", "self", ".", "dv", ",", "self", ".", "kernel_size", ",", "padding", "=", "1", ")", "\n", "\n", "self", ".", "qkv_conv", "=", "nn", ".", "Conv2d", "(", "\n", "self", ".", "in_channels", ",", "2", "*", "self", ".", "dk", "+", "self", ".", "dv", ",", "kernel_size", "=", "1", ")", "\n", "\n", "self", ".", "attn_out", "=", "nn", ".", "Conv2d", "(", "self", ".", "dv", ",", "self", ".", "dv", ",", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.AugmentedConv.execute": [[25, 59], ["x.size", "attention_augmented_module.AugmentedConv.conv_out", "attention_augmented_module.AugmentedConv.compute_flat_qkv", "jittor.matmul", "jittor.nn.softmax", "jittor.matmul", "jittor.reshape", "attention_augmented_module.AugmentedConv.combine_heads_2d", "attention_augmented_module.AugmentedConv.attn_out", "jittor.concat", "flat_q.transpose", "attention_augmented_module.AugmentedConv.relative_logits", "flat_v.transpose"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.AugmentedConv.compute_flat_qkv", "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.AugmentedConv.combine_heads_2d", "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.AugmentedConv.relative_logits"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "# Input x", "\n", "# (batch_size, channels, height, width)", "\n", "        ", "batch", ",", "_", ",", "height", ",", "width", "=", "x", ".", "size", "(", ")", "\n", "\n", "# conv_out", "\n", "# (batch_size, out_channels, height, width)", "\n", "conv_out", "=", "self", ".", "conv_out", "(", "x", ")", "\n", "\n", "# flat_q, flat_k, flat_v", "\n", "# (batch_size, Nh, height * width, dvh or dkh)", "\n", "# dvh = dv / Nh, dkh = dk / Nh", "\n", "# q, k, v", "\n", "# (batch_size, Nh, height, width, dv or dk)", "\n", "flat_q", ",", "flat_k", ",", "flat_v", ",", "q", ",", "k", ",", "v", "=", "self", ".", "compute_flat_qkv", "(", "\n", "x", ",", "self", ".", "dk", ",", "self", ".", "dv", ",", "self", ".", "Nh", ")", "\n", "logits", "=", "jt", ".", "matmul", "(", "flat_q", ".", "transpose", "(", "2", ",", "3", ")", ",", "flat_k", ")", "\n", "\n", "if", "self", ".", "relative", ":", "\n", "            ", "h_rel_logits", ",", "w_rel_logits", "=", "self", ".", "relative_logits", "(", "q", ")", "\n", "logits", "+=", "h_rel_logits", "\n", "logits", "+=", "w_rel_logits", "\n", "", "weights", "=", "nn", ".", "softmax", "(", "logits", ",", "dim", "=", "-", "1", ")", "\n", "\n", "# attn_out", "\n", "# (batch, Nh, height * width, dvh)", "\n", "attn_out", "=", "jt", ".", "matmul", "(", "weights", ",", "flat_v", ".", "transpose", "(", "2", ",", "3", ")", ")", "\n", "attn_out", "=", "jt", ".", "reshape", "(", "\n", "attn_out", ",", "(", "batch", ",", "self", ".", "Nh", ",", "self", ".", "dv", "//", "self", ".", "Nh", ",", "height", ",", "width", ")", ")", "\n", "# combine_heads_2d", "\n", "# (batch, out_channels, height, width)", "\n", "attn_out", "=", "self", ".", "combine_heads_2d", "(", "attn_out", ")", "\n", "attn_out", "=", "self", ".", "attn_out", "(", "attn_out", ")", "\n", "return", "jt", ".", "concat", "(", "(", "conv_out", ",", "attn_out", ")", ",", "dim", "=", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.AugmentedConv.compute_flat_qkv": [[60, 74], ["x.size", "attention_augmented_module.AugmentedConv.qkv_conv", "jittor.split", "attention_augmented_module.AugmentedConv.split_heads_2d", "attention_augmented_module.AugmentedConv.split_heads_2d", "attention_augmented_module.AugmentedConv.split_heads_2d", "jittor.reshape", "jittor.reshape", "jittor.reshape"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.AugmentedConv.split_heads_2d", "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.AugmentedConv.split_heads_2d", "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.AugmentedConv.split_heads_2d"], ["", "def", "compute_flat_qkv", "(", "self", ",", "x", ",", "dk", ",", "dv", ",", "Nh", ")", ":", "\n", "        ", "N", ",", "_", ",", "H", ",", "W", "=", "x", ".", "size", "(", ")", "\n", "qkv", "=", "self", ".", "qkv_conv", "(", "x", ")", "\n", "q", ",", "k", ",", "v", "=", "jt", ".", "split", "(", "qkv", ",", "[", "dk", ",", "dk", ",", "dv", "]", ",", "dim", "=", "1", ")", "\n", "q", "=", "self", ".", "split_heads_2d", "(", "q", ",", "Nh", ")", "\n", "k", "=", "self", ".", "split_heads_2d", "(", "k", ",", "Nh", ")", "\n", "v", "=", "self", ".", "split_heads_2d", "(", "v", ",", "Nh", ")", "\n", "\n", "dkh", "=", "dk", "//", "Nh", "\n", "q", "*=", "dkh", "**", "-", "0.5", "\n", "flat_q", "=", "jt", ".", "reshape", "(", "q", ",", "(", "N", ",", "Nh", ",", "dk", "//", "Nh", ",", "H", "*", "W", ")", ")", "\n", "flat_k", "=", "jt", ".", "reshape", "(", "k", ",", "(", "N", ",", "Nh", ",", "dk", "//", "Nh", ",", "H", "*", "W", ")", ")", "\n", "flat_v", "=", "jt", ".", "reshape", "(", "v", ",", "(", "N", ",", "Nh", ",", "dv", "//", "Nh", ",", "H", "*", "W", ")", ")", "\n", "return", "flat_q", ",", "flat_k", ",", "flat_v", ",", "q", ",", "k", ",", "v", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.AugmentedConv.split_heads_2d": [[75, 80], ["x.size", "jittor.reshape"], "methods", ["None"], ["", "def", "split_heads_2d", "(", "self", ",", "x", ",", "Nh", ")", ":", "\n", "        ", "batch", ",", "channels", ",", "height", ",", "width", "=", "x", ".", "size", "(", ")", "\n", "ret_shape", "=", "(", "batch", ",", "Nh", ",", "channels", "//", "Nh", ",", "height", ",", "width", ")", "\n", "split", "=", "jt", ".", "reshape", "(", "x", ",", "ret_shape", ")", "\n", "return", "split", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.AugmentedConv.combine_heads_2d": [[81, 85], ["x.size", "jittor.reshape"], "methods", ["None"], ["", "def", "combine_heads_2d", "(", "self", ",", "x", ")", ":", "\n", "        ", "batch", ",", "Nh", ",", "dv", ",", "H", ",", "W", "=", "x", ".", "size", "(", ")", "\n", "ret_shape", "=", "(", "batch", ",", "Nh", "*", "dv", ",", "H", ",", "W", ")", "\n", "return", "jt", ".", "reshape", "(", "x", ",", "ret_shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.AugmentedConv.relative_logits": [[86, 98], ["jittor.transpose().transpose.size", "jittor.transpose().transpose", "jittor.randn", "attention_augmented_module.AugmentedConv.relative_logits_1d", "jittor.randn", "attention_augmented_module.AugmentedConv.relative_logits_1d", "jittor.transpose", "jittor.transpose"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.AugmentedConv.relative_logits_1d", "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.AugmentedConv.relative_logits_1d"], ["", "def", "relative_logits", "(", "self", ",", "q", ")", ":", "\n", "        ", "B", ",", "Nh", ",", "dk", ",", "H", ",", "W", "=", "q", ".", "size", "(", ")", "\n", "q", "=", "jt", ".", "transpose", "(", "q", ",", "2", ",", "4", ")", ".", "transpose", "(", "2", ",", "3", ")", "\n", "\n", "key_rel_w", "=", "jt", ".", "randn", "(", "(", "2", "*", "W", "-", "1", ",", "dk", ")", ")", "\n", "rel_logits_w", "=", "self", ".", "relative_logits_1d", "(", "q", ",", "key_rel_w", ",", "H", ",", "W", ",", "Nh", ",", "\"w\"", ")", "\n", "\n", "key_rel_h", "=", "jt", ".", "randn", "(", "(", "2", "*", "H", "-", "1", ",", "dk", ")", ")", "\n", "rel_logits_h", "=", "self", ".", "relative_logits_1d", "(", "\n", "jt", ".", "transpose", "(", "q", ",", "2", ",", "3", ")", ",", "key_rel_h", ",", "W", ",", "H", ",", "Nh", ",", "\"h\"", ")", "\n", "\n", "return", "rel_logits_h", ",", "rel_logits_w", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.AugmentedConv.relative_logits_1d": [[99, 115], ["jittor.matmul", "jittor.reshape", "attention_augmented_module.AugmentedConv.rel_to_abs", "jittor.reshape", "jittor.unsqueeze", "jittor.transpose().transpose().transpose.repeat", "jittor.reshape", "rel_k.transpose", "jittor.transpose", "jittor.transpose().transpose().transpose", "jittor.transpose().transpose", "jittor.transpose"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.AugmentedConv.rel_to_abs"], ["", "def", "relative_logits_1d", "(", "self", ",", "q", ",", "rel_k", ",", "H", ",", "W", ",", "Nh", ",", "case", ")", ":", "\n", "        ", "rel_logits", "=", "jt", ".", "matmul", "(", "q", ",", "rel_k", ".", "transpose", "(", "0", ",", "1", ")", ")", "\n", "rel_logits", "=", "jt", ".", "reshape", "(", "rel_logits", ",", "(", "-", "1", ",", "Nh", "*", "H", ",", "W", ",", "2", "*", "W", "-", "1", ")", ")", "\n", "rel_logits", "=", "self", ".", "rel_to_abs", "(", "rel_logits", ")", "\n", "\n", "rel_logits", "=", "jt", ".", "reshape", "(", "rel_logits", ",", "(", "-", "1", ",", "Nh", ",", "H", ",", "W", ",", "W", ")", ")", "\n", "rel_logits", "=", "jt", ".", "unsqueeze", "(", "rel_logits", ",", "dim", "=", "3", ")", "\n", "rel_logits", "=", "rel_logits", ".", "repeat", "(", "(", "1", ",", "1", ",", "1", ",", "H", ",", "1", ",", "1", ")", ")", "\n", "\n", "if", "case", "==", "\"w\"", ":", "\n", "            ", "rel_logits", "=", "jt", ".", "transpose", "(", "rel_logits", ",", "3", ",", "4", ")", "\n", "", "elif", "case", "==", "\"h\"", ":", "\n", "            ", "rel_logits", "=", "jt", ".", "transpose", "(", "\n", "rel_logits", ",", "2", ",", "4", ")", ".", "transpose", "(", "4", ",", "5", ")", ".", "transpose", "(", "3", ",", "5", ")", "\n", "", "rel_logits", "=", "jt", ".", "reshape", "(", "rel_logits", ",", "(", "-", "1", ",", "Nh", ",", "H", "*", "W", ",", "H", "*", "W", ")", ")", "\n", "return", "rel_logits", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.AugmentedConv.rel_to_abs": [[116, 129], ["jittor.concat.size", "jittor.zeros", "jittor.concat", "jittor.reshape", "jittor.zeros", "jittor.concat", "jittor.reshape"], "methods", ["None"], ["", "def", "rel_to_abs", "(", "self", ",", "x", ")", ":", "\n", "        ", "B", ",", "Nh", ",", "L", ",", "_", "=", "x", ".", "size", "(", ")", "\n", "\n", "col_pad", "=", "jt", ".", "zeros", "(", "(", "B", ",", "Nh", ",", "L", ",", "1", ")", ")", "\n", "x", "=", "jt", ".", "concat", "(", "(", "x", ",", "col_pad", ")", ",", "dim", "=", "3", ")", "\n", "\n", "flat_x", "=", "jt", ".", "reshape", "(", "x", ",", "(", "B", ",", "Nh", ",", "L", "*", "2", "*", "L", ")", ")", "\n", "flat_pad", "=", "jt", ".", "zeros", "(", "(", "B", ",", "Nh", ",", "L", "-", "1", ")", ")", "\n", "flat_x_padded", "=", "jt", ".", "concat", "(", "(", "flat_x", ",", "flat_pad", ")", ",", "dim", "=", "2", ")", "\n", "\n", "final_x", "=", "jt", ".", "reshape", "(", "flat_x_padded", ",", "(", "B", ",", "Nh", ",", "L", "+", "1", ",", "2", "*", "L", "-", "1", ")", ")", "\n", "final_x", "=", "final_x", "[", ":", ",", ":", ",", ":", "L", ",", "L", "-", "1", ":", "]", "\n", "return", "final_x", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.attention_augmented_module.main": [[131, 136], ["attention_augmented_module.AugmentedConv", "jittor.rand", "AugmentedConv.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "AugmentedConv", "(", "64", ",", "64", ",", "3", ",", "40", ",", "4", ",", "4", ",", "True", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.doub_attention.DoubleAtten.__init__": [[7, 13], ["jittor.nn.Module.__init__", "jittor.nn.Conv2d", "jittor.nn.Conv2d", "jittor.nn.Conv2d"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "in_c", ")", ":", "\n", "        ", "super", "(", "DoubleAtten", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "in_c", "=", "in_c", "\n", "self", ".", "convA", "=", "nn", ".", "Conv2d", "(", "in_c", ",", "in_c", ",", "kernel_size", "=", "1", ")", "\n", "self", ".", "convB", "=", "nn", ".", "Conv2d", "(", "in_c", ",", "in_c", ",", "kernel_size", "=", "1", ")", "\n", "self", ".", "convV", "=", "nn", ".", "Conv2d", "(", "in_c", ",", "in_c", ",", "kernel_size", "=", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.doub_attention.DoubleAtten.execute": [[14, 32], ["doub_attention.DoubleAtten.convA", "doub_attention.DoubleAtten.convB", "feature_maps.view.view.view", "atten_map.view.view.view", "jittor.mean", "doub_attention.DoubleAtten.convV", "jittor.nn.softmax", "jittor.nn.bmm().permute", "jittor.nn.bmm().permute.view", "doub_attention.DoubleAtten.view", "jittor.nn.softmax", "jittor.nn.bmm", "jittor.nn.softmax.permute"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "input", ")", ":", "\n", "\n", "        ", "feature_maps", "=", "self", ".", "convA", "(", "input", ")", "\n", "atten_map", "=", "self", ".", "convB", "(", "input", ")", "\n", "b", ",", "_", ",", "h", ",", "w", "=", "feature_maps", ".", "shape", "\n", "\n", "feature_maps", "=", "feature_maps", ".", "view", "(", "b", ",", "1", ",", "self", ".", "in_c", ",", "h", "*", "w", ")", "\n", "atten_map", "=", "atten_map", ".", "view", "(", "b", ",", "self", ".", "in_c", ",", "1", ",", "h", "*", "w", ")", "\n", "global_descriptors", "=", "jt", ".", "mean", "(", "\n", "(", "feature_maps", "*", "nn", ".", "softmax", "(", "atten_map", ",", "dim", "=", "-", "1", ")", ")", ",", "dim", "=", "-", "1", ")", "\n", "\n", "v", "=", "self", ".", "convV", "(", "input", ")", "\n", "atten_vectors", "=", "nn", ".", "softmax", "(", "\n", "v", ".", "view", "(", "b", ",", "self", ".", "in_c", ",", "h", "*", "w", ")", ",", "dim", "=", "-", "1", ")", "\n", "out", "=", "nn", ".", "bmm", "(", "atten_vectors", ".", "permute", "(", "0", ",", "2", ",", "1", ")", ",", "\n", "global_descriptors", ")", ".", "permute", "(", "0", ",", "2", ",", "1", ")", "\n", "\n", "return", "out", ".", "view", "(", "b", ",", "_", ",", "h", ",", "w", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.doub_attention.main": [[34, 40], ["doub_attention.DoubleAtten", "jittor.rand", "DoubleAtten.", "jittor.grad", "print", "jt.rand.size", "attention_block.size"], "function", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_attentions.soca_module.Sqrtm.grad"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "DoubleAtten", "(", "64", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "jt", ".", "grad", "(", "output", ",", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.hamnet.NMF.__init__": [[13, 30], ["jittor.nn.Module.__init__", "jittor.zeros().uniform_", "jittor.zeros().uniform_", "jittor.zeros", "jittor.zeros"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "\n", "self", ",", "\n", "dim", ",", "\n", "n", ",", "\n", "ratio", "=", "8", ",", "\n", "K", "=", "6", ",", "\n", "eps", "=", "2e-8", "\n", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "r", "=", "dim", "//", "ratio", "\n", "\n", "self", ".", "D", "=", "jt", ".", "zeros", "(", "(", "dim", ",", "r", ")", ")", ".", "uniform_", "(", "0", ",", "1", ")", "\n", "self", ".", "C", "=", "jt", ".", "zeros", "(", "(", "r", ",", "n", ")", ")", ".", "uniform_", "(", "0", ",", "1", ")", "\n", "\n", "self", ".", "K", "=", "K", "\n", "\n", "self", ".", "eps", "=", "eps", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.hamnet.NMF.execute": [[31, 51], ["jittor.nn.relu", "D.unsqueeze().repeat.unsqueeze().repeat.unsqueeze().repeat", "C.unsqueeze().repeat.unsqueeze().repeat.unsqueeze().repeat", "reversed", "tensor.transpose", "range", "D.unsqueeze().repeat.unsqueeze().repeat.unsqueeze", "C.unsqueeze().repeat.unsqueeze().repeat.unsqueeze", "context", "hamnet.NMF.execute.t"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "b", ",", "D", ",", "C", ",", "eps", "=", "x", ".", "shape", "[", "0", "]", ",", "self", ".", "D", ",", "self", ".", "C", ",", "self", ".", "eps", "\n", "\n", "# x is made non-negative with relu as proposed in paper", "\n", "x", "=", "nn", ".", "relu", "(", "x", ")", "\n", "D", "=", "D", ".", "unsqueeze", "(", "0", ")", ".", "repeat", "(", "b", ",", "1", ",", "1", ")", "\n", "C", "=", "C", ".", "unsqueeze", "(", "0", ")", ".", "repeat", "(", "b", ",", "1", ",", "1", ")", "\n", "\n", "# transpose", "\n", "def", "t", "(", "tensor", ")", ":", "return", "tensor", ".", "transpose", "(", "1", ",", "2", ")", "\n", "\n", "for", "k", "in", "reversed", "(", "range", "(", "self", ".", "K", ")", ")", ":", "\n", "# only calculate gradients on the last step, per propose 'One-step Gradient'", "\n", "            ", "context", "=", "null_context", "if", "k", "==", "0", "else", "jt", ".", "no_grad", "\n", "with", "context", "(", ")", ":", "\n", "                ", "C_new", "=", "C", "*", "(", "(", "t", "(", "D", ")", "@", "x", ")", "/", "(", "(", "t", "(", "D", ")", "@", "D", "@", "C", ")", "+", "eps", ")", ")", "\n", "D_new", "=", "D", "*", "(", "(", "x", "@", "t", "(", "C", ")", ")", "/", "(", "(", "D", "@", "C", "@", "t", "(", "C", ")", ")", "+", "eps", ")", ")", "\n", "C", ",", "D", "=", "C_new", ",", "D_new", "\n", "\n", "", "", "return", "D", "@", "C", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.hamnet.Hamburger.__init__": [[54, 67], ["jittor.nn.Module.__init__", "jittor.nn.Conv1d", "hamnet.NMF", "jittor.nn.Conv1d"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "\n", "self", ",", "\n", "dim", ",", "\n", "n", ",", "\n", "inner_dim", ",", "\n", "ratio", "=", "8", ",", "\n", "K", "=", "6", "\n", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "lower_bread", "=", "nn", ".", "Conv1d", "(", "dim", ",", "inner_dim", ",", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "ham", "=", "NMF", "(", "inner_dim", ",", "n", ",", "ratio", "=", "ratio", ",", "K", "=", "K", ")", "\n", "self", ".", "upper_bread", "=", "nn", ".", "Conv1d", "(", "inner_dim", ",", "dim", ",", "1", ",", "bias", "=", "False", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.hamnet.Hamburger.execute": [[68, 77], ["hamnet.Hamburger.flatten", "hamnet.Hamburger.lower_bread", "hamnet.Hamburger.ham", "hamnet.Hamburger.upper_bread", "hamnet.Hamburger.reshape"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "input", "=", "x", "\n", "shape", "=", "x", ".", "shape", "\n", "x", "=", "x", ".", "flatten", "(", "2", ")", "\n", "\n", "x", "=", "self", ".", "lower_bread", "(", "x", ")", "\n", "x", "=", "self", ".", "ham", "(", "x", ")", "\n", "x", "=", "self", ".", "upper_bread", "(", "x", ")", "\n", "return", "input", "+", "x", ".", "reshape", "(", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.hamnet.null_context": [[7, 10], ["None"], "function", ["None"], ["@", "contextmanager", "\n", "def", "null_context", "(", ")", ":", "\n", "    ", "yield", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.hamnet.main": [[79, 84], ["hamnet.Hamburger", "jittor.rand", "Hamburger.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "Hamburger", "(", "64", ",", "32", "*", "32", ",", "64", ",", "8", ",", "6", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.external_attention.External_attention.__init__": [[12, 28], ["jittor.nn.Module.__init__", "jittor.nn.Conv2d", "jittor.nn.Conv1d", "jittor.nn.Conv1d", "external_attention.External_attention.linear_0.weight.permute", "jittor.nn.Sequential", "jittor.nn.ReLU", "jittor.nn.Conv2d", "jittor.nn.BatchNorm"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["def", "__init__", "(", "self", ",", "c", ")", ":", "\n", "        ", "super", "(", "External_attention", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "c", ",", "c", ",", "1", ")", "\n", "\n", "self", ".", "k", "=", "64", "\n", "self", ".", "linear_0", "=", "nn", ".", "Conv1d", "(", "c", ",", "self", ".", "k", ",", "1", ",", "bias", "=", "False", ")", "\n", "\n", "self", ".", "linear_1", "=", "nn", ".", "Conv1d", "(", "self", ".", "k", ",", "c", ",", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "linear_1", ".", "weight", "=", "self", ".", "linear_0", ".", "weight", ".", "permute", "(", "1", ",", "0", ",", "2", ")", "\n", "\n", "self", ".", "conv2", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "c", ",", "c", ",", "1", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm", "(", "c", ")", ")", "\n", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.external_attention.External_attention.execute": [[29, 48], ["external_attention.External_attention.conv1", "external_attention.External_attention.size", "external_attention.External_attention.view", "external_attention.External_attention.linear_0", "jittor.nn.softmax", "external_attention.External_attention.linear_1", "external_attention.External_attention.view", "external_attention.External_attention.conv2", "external_attention.External_attention.relu", "jittor.nn.softmax.sum"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "idn", "=", "x", "\n", "x", "=", "self", ".", "conv1", "(", "x", ")", "\n", "\n", "b", ",", "c", ",", "h", ",", "w", "=", "x", ".", "size", "(", ")", "\n", "n", "=", "h", "*", "w", "\n", "x", "=", "x", ".", "view", "(", "b", ",", "c", ",", "h", "*", "w", ")", "# b * c * n", "\n", "\n", "attn", "=", "self", ".", "linear_0", "(", "x", ")", "# b, k, n", "\n", "attn", "=", "nn", ".", "softmax", "(", "attn", ",", "dim", "=", "-", "1", ")", "# b, k, n", "\n", "\n", "attn", "=", "attn", "/", "(", "1e-9", "+", "attn", ".", "sum", "(", "dim", "=", "1", ",", "keepdims", "=", "True", ")", ")", "# b, k, n", "\n", "x", "=", "self", ".", "linear_1", "(", "attn", ")", "# b, c, n", "\n", "\n", "x", "=", "x", ".", "view", "(", "b", ",", "c", ",", "h", ",", "w", ")", "\n", "x", "=", "self", ".", "conv2", "(", "x", ")", "\n", "x", "=", "x", "+", "idn", "\n", "x", "=", "self", ".", "relu", "(", "x", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.external_attention.main": [[50, 55], ["external_attention.External_attention", "jittor.rand", "External_attention.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "External_attention", "(", "64", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.self_attention.SelfAttention.__init__": [[8, 20], ["jittor.Module.__init__", "jittor.Conv", "jittor.Conv", "jittor.Conv", "jittor.Conv", "jittor.Conv", "jittor.Conv", "jittor.Softmax", "jittor.Softmax"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["def", "__init__", "(", "self", ",", "in_dim", ")", ":", "\n", "        ", "super", "(", "SelfAttention", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "chanel_in", "=", "in_dim", "\n", "\n", "self", ".", "query", "=", "nn", ".", "Conv", "(", "in_channels", "=", "in_dim", ",", "\n", "out_channels", "=", "in_dim", ",", "kernel_size", "=", "1", ")", "\n", "self", ".", "key", "=", "nn", ".", "Conv", "(", "in_channels", "=", "in_dim", ",", "\n", "out_channels", "=", "in_dim", ",", "kernel_size", "=", "1", ")", "\n", "self", ".", "value", "=", "nn", ".", "Conv", "(", "in_channels", "=", "in_dim", ",", "\n", "out_channels", "=", "in_dim", ",", "kernel_size", "=", "1", ")", "\n", "\n", "self", ".", "softmax", "=", "nn", ".", "Softmax", "(", "dim", "=", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.self_attention.SelfAttention.execute": [[21, 41], ["x.size", "self_attention.SelfAttention.SelfAttention.query().reshape().transpose", "self_attention.SelfAttention.SelfAttention.key().reshape", "jittor.bmm", "jittor.bmm", "self_attention.SelfAttention.SelfAttention.softmax", "self_attention.SelfAttention.SelfAttention.value().reshape", "jittor.bmm", "jittor.bmm", "out.reshape.reshape.reshape", "self_attention.SelfAttention.SelfAttention.transpose", "self_attention.SelfAttention.SelfAttention.query().reshape", "self_attention.SelfAttention.SelfAttention.key", "self_attention.SelfAttention.SelfAttention.value", "self_attention.SelfAttention.SelfAttention.query"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "\"\"\"\n            inputs :\n                x : input feature maps( B X C X H X W)\n            returns :\n                out : attention value + input feature\n                attention: B X (HxW) X (HxW)\n        \"\"\"", "\n", "m_batchsize", ",", "C", ",", "height", ",", "width", "=", "x", ".", "size", "(", ")", "\n", "proj_query", "=", "self", ".", "query", "(", "x", ")", ".", "reshape", "(", "\n", "m_batchsize", ",", "-", "1", ",", "width", "*", "height", ")", ".", "transpose", "(", "0", ",", "2", ",", "1", ")", "\n", "proj_key", "=", "self", ".", "key", "(", "x", ")", ".", "reshape", "(", "m_batchsize", ",", "-", "1", ",", "width", "*", "height", ")", "\n", "energy", "=", "nn", ".", "bmm", "(", "proj_query", ",", "proj_key", ")", "\n", "attention", "=", "self", ".", "softmax", "(", "energy", ")", "\n", "proj_value", "=", "self", ".", "value", "(", "x", ")", ".", "reshape", "(", "m_batchsize", ",", "-", "1", ",", "width", "*", "height", ")", "\n", "\n", "out", "=", "nn", ".", "bmm", "(", "proj_value", ",", "attention", ".", "transpose", "(", "0", ",", "2", ",", "1", ")", ")", "\n", "out", "=", "out", ".", "reshape", "(", "m_batchsize", ",", "C", ",", "height", ",", "width", ")", "\n", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.self_attention.main": [[43, 48], ["self_attention.SelfAttention", "jittor.rand", "SelfAttention.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "SelfAttention", "(", "64", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.offset_module.SA_Layer.__init__": [[8, 18], ["jittor.nn.Module.__init__", "jittor.nn.Conv1d", "jittor.nn.Conv1d", "jittor.nn.Conv1d", "jittor.nn.Conv1d", "jittor.nn.BatchNorm1d", "jittor.nn.ReLU", "jittor.nn.Softmax"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "channels", ")", ":", "\n", "        ", "super", "(", "SA_Layer", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "q_conv", "=", "nn", ".", "Conv1d", "(", "channels", ",", "channels", "//", "4", ",", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "k_conv", "=", "nn", ".", "Conv1d", "(", "channels", ",", "channels", "//", "4", ",", "1", ",", "bias", "=", "False", ")", "\n", "self", ".", "q_conv", ".", "weight", "=", "self", ".", "k_conv", ".", "weight", "\n", "self", ".", "v_conv", "=", "nn", ".", "Conv1d", "(", "channels", ",", "channels", ",", "1", ")", "\n", "self", ".", "trans_conv", "=", "nn", ".", "Conv1d", "(", "channels", ",", "channels", ",", "1", ")", "\n", "self", ".", "after_norm", "=", "nn", ".", "BatchNorm1d", "(", "channels", ")", "\n", "self", ".", "act", "=", "nn", ".", "ReLU", "(", ")", "\n", "self", ".", "softmax", "=", "nn", ".", "Softmax", "(", "dim", "=", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.offset_module.SA_Layer.execute": [[19, 30], ["offset_module.SA_Layer.q_conv().permute", "offset_module.SA_Layer.k_conv", "offset_module.SA_Layer.v_conv", "jittor.nn.bmm", "offset_module.SA_Layer.softmax", "jittor.nn.bmm", "offset_module.SA_Layer.act", "offset_module.SA_Layer.after_norm", "offset_module.SA_Layer.q_conv", "offset_module.SA_Layer.sum", "offset_module.SA_Layer.trans_conv"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "x_q", "=", "self", ".", "q_conv", "(", "x", ")", ".", "permute", "(", "0", ",", "2", ",", "1", ")", "# b, n, c", "\n", "x_k", "=", "self", ".", "k_conv", "(", "x", ")", "# b, c, n", "\n", "x_v", "=", "self", ".", "v_conv", "(", "x", ")", "\n", "energy", "=", "nn", ".", "bmm", "(", "x_q", ",", "x_k", ")", "# b, n, n", "\n", "attention", "=", "self", ".", "softmax", "(", "energy", ")", "\n", "attention", "=", "attention", "/", "(", "1e-9", "+", "attention", ".", "sum", "(", "dim", "=", "1", ",", "keepdims", "=", "True", ")", ")", "\n", "x_r", "=", "nn", ".", "bmm", "(", "x_v", ",", "attention", ")", "# b, c, n", "\n", "x_r", "=", "self", ".", "act", "(", "self", ".", "after_norm", "(", "self", ".", "trans_conv", "(", "x", "-", "x_r", ")", ")", ")", "\n", "x", "=", "x", "+", "x_r", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.offset_module.main": [[32, 37], ["offset_module.SA_Layer", "jittor.rand", "SA_Layer.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "SA_Layer", "(", "64", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.gc_module.GlobalContextBlock.__init__": [[6, 21], ["jittor.nn.Module.__init__", "int", "jittor.nn.Conv2d", "jittor.nn.Softmax", "jittor.nn.Sequential", "jittor.nn.Conv2d", "jittor.nn.LayerNorm", "jittor.nn.ReLU", "jittor.nn.Conv2d"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "\n", "inplanes", ",", "\n", "ratio", ")", ":", "\n", "        ", "super", "(", "GlobalContextBlock", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "inplanes", "=", "inplanes", "\n", "self", ".", "ratio", "=", "ratio", "\n", "self", ".", "planes", "=", "int", "(", "inplanes", "*", "ratio", ")", "\n", "self", ".", "conv_mask", "=", "nn", ".", "Conv2d", "(", "inplanes", ",", "1", ",", "kernel_size", "=", "1", ")", "\n", "self", ".", "softmax", "=", "nn", ".", "Softmax", "(", "dim", "=", "2", ")", "\n", "\n", "self", ".", "channel_add_conv", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "self", ".", "inplanes", ",", "self", ".", "planes", ",", "kernel_size", "=", "1", ")", ",", "\n", "nn", ".", "LayerNorm", "(", "[", "self", ".", "planes", ",", "1", ",", "1", "]", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ",", "# yapf: disable", "\n", "nn", ".", "Conv2d", "(", "self", ".", "planes", ",", "self", ".", "inplanes", ",", "kernel_size", "=", "1", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.gc_module.GlobalContextBlock.spatial_pool": [[22, 44], ["x.size", "input_x.unsqueeze.unsqueeze.view", "input_x.unsqueeze.unsqueeze.unsqueeze", "gc_module.GlobalContextBlock.conv_mask", "context_mask.unsqueeze.unsqueeze.view", "gc_module.GlobalContextBlock.softmax", "context_mask.unsqueeze.unsqueeze.unsqueeze", "jittor.matmul", "context.view.view.view"], "methods", ["None"], ["", "def", "spatial_pool", "(", "self", ",", "x", ")", ":", "\n", "        ", "batch", ",", "channel", ",", "height", ",", "width", "=", "x", ".", "size", "(", ")", "\n", "\n", "input_x", "=", "x", "\n", "# [N, C, H * W]", "\n", "input_x", "=", "input_x", ".", "view", "(", "batch", ",", "channel", ",", "height", "*", "width", ")", "\n", "# [N, 1, C, H * W]", "\n", "input_x", "=", "input_x", ".", "unsqueeze", "(", "1", ")", "\n", "# [N, 1, H, W]", "\n", "context_mask", "=", "self", ".", "conv_mask", "(", "x", ")", "\n", "# [N, 1, H * W]", "\n", "context_mask", "=", "context_mask", ".", "view", "(", "batch", ",", "1", ",", "height", "*", "width", ")", "\n", "# [N, 1, H * W]", "\n", "context_mask", "=", "self", ".", "softmax", "(", "context_mask", ")", "\n", "# [N, 1, H * W, 1]", "\n", "context_mask", "=", "context_mask", ".", "unsqueeze", "(", "-", "1", ")", "\n", "# [N, 1, C, 1]", "\n", "context", "=", "jt", ".", "matmul", "(", "input_x", ",", "context_mask", ")", "\n", "# [N, C, 1, 1]", "\n", "context", "=", "context", ".", "view", "(", "batch", ",", "channel", ",", "1", ",", "1", ")", "\n", "\n", "return", "context", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.gc_module.GlobalContextBlock.execute": [[45, 55], ["gc_module.GlobalContextBlock.spatial_pool", "gc_module.GlobalContextBlock.channel_add_conv"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.gc_module.GlobalContextBlock.spatial_pool"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "# [N, C, 1, 1]", "\n", "        ", "context", "=", "self", ".", "spatial_pool", "(", "x", ")", "\n", "\n", "out", "=", "x", "\n", "# [N, C, 1, 1]", "\n", "channel_add_term", "=", "self", ".", "channel_add_conv", "(", "context", ")", "\n", "out", "=", "out", "+", "channel_add_term", "\n", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.gc_module.main": [[57, 62], ["gc_module.GlobalContextBlock", "jittor.rand", "GlobalContextBlock.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "GlobalContextBlock", "(", "64", ",", "1", "/", "4", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.mhsa.MHSA.__init__": [[6, 17], ["jittor.Module.__init__", "jittor.Linear", "jittor.Linear", "jittor.Dropout", "jittor.Dropout", "jittor.Linear", "jittor.Linear", "jittor.Dropout", "jittor.Dropout"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "dim", ",", "num_heads", "=", "8", ",", "qkv_bias", "=", "False", ",", "qk_scale", "=", "None", ",", "attn_drop", "=", "0.", ",", "proj_drop", "=", "0.", ")", ":", "\n", "        ", "super", "(", "MHSA", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "num_heads", "=", "num_heads", "\n", "head_dim", "=", "dim", "//", "num_heads", "\n", "# NOTE scale factor was wrong in my original version, can set manually to be compat with prev weights", "\n", "self", ".", "scale", "=", "qk_scale", "or", "head_dim", "**", "-", "0.5", "\n", "\n", "self", ".", "qkv", "=", "nn", ".", "Linear", "(", "dim", ",", "dim", "*", "3", ",", "bias", "=", "qkv_bias", ")", "\n", "self", ".", "attn_drop", "=", "nn", ".", "Dropout", "(", "attn_drop", ")", "\n", "self", ".", "proj", "=", "nn", ".", "Linear", "(", "dim", ",", "dim", ")", "\n", "self", ".", "proj_drop", "=", "nn", ".", "Dropout", "(", "proj_drop", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.mhsa.MHSA.execute": [[18, 38], ["mhsa.MHSA.qkv().reshape().permute", "jittor.softmax", "jittor.softmax", "mhsa.MHSA.attn_drop", "jittor.bmm", "jittor.bmm", "mhsa.MHSA.transpose().reshape", "mhsa.MHSA.proj", "mhsa.MHSA.proj_drop", "jittor.bmm_transpose", "jittor.bmm_transpose", "mhsa.MHSA.qkv().reshape", "mhsa.MHSA.transpose", "mhsa.MHSA.qkv"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "b", ",", "n", ",", "c", "=", "x", ".", "shape", "\n", "qkv", "=", "self", ".", "qkv", "(", "x", ")", ".", "reshape", "(", "b", ",", "n", ",", "3", ",", "self", ".", "num_heads", ",", "c", "//", "\n", "self", ".", "num_heads", ")", ".", "permute", "(", "2", ",", "0", ",", "3", ",", "1", ",", "4", ")", "\n", "\n", "q", ",", "k", ",", "v", "=", "qkv", "[", "0", "]", ",", "qkv", "[", "1", "]", ",", "qkv", "[", "2", "]", "\n", "\n", "# attn = nn.bmm(q,k.transpose(0,1,3,2))*self.scale", "\n", "attn", "=", "nn", ".", "bmm_transpose", "(", "q", ",", "k", ")", "*", "self", ".", "scale", "\n", "\n", "attn", "=", "nn", ".", "softmax", "(", "attn", ",", "dim", "=", "-", "1", ")", "\n", "\n", "attn", "=", "self", ".", "attn_drop", "(", "attn", ")", "\n", "\n", "out", "=", "nn", ".", "bmm", "(", "attn", ",", "v", ")", "\n", "out", "=", "out", ".", "transpose", "(", "0", ",", "2", ",", "1", ",", "3", ")", ".", "reshape", "(", "b", ",", "n", ",", "c", ")", "\n", "out", "=", "self", ".", "proj", "(", "out", ")", "\n", "out", "=", "self", ".", "proj_drop", "(", "out", ")", "\n", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.mhsa.main": [[40, 45], ["mhsa.MHSA", "jittor.rand", "MHSA.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "MHSA", "(", "64", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "128", ",", "64", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.segformer_module.EfficientAttention.__init__": [[7, 27], ["jittor.nn.Module.__init__", "jittor.nn.Linear", "jittor.nn.Linear", "jittor.nn.Dropout", "jittor.nn.Linear", "jittor.nn.Dropout", "jittor.nn.Conv2d", "jittor.nn.LayerNorm"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "dim", ",", "num_heads", "=", "8", ",", "qkv_bias", "=", "False", ",", "qk_scale", "=", "None", ",", "attn_drop", "=", "0.", ",", "proj_drop", "=", "0.", ",", "sr_ratio", "=", "1", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "assert", "dim", "%", "num_heads", "==", "0", ",", "f\"dim {dim} should be divided by num_heads {num_heads}.\"", "\n", "\n", "self", ".", "dim", "=", "dim", "\n", "self", ".", "num_heads", "=", "num_heads", "\n", "head_dim", "=", "dim", "//", "num_heads", "\n", "self", ".", "scale", "=", "qk_scale", "or", "head_dim", "**", "-", "0.5", "\n", "\n", "self", ".", "q", "=", "nn", ".", "Linear", "(", "dim", ",", "dim", ",", "bias", "=", "qkv_bias", ")", "\n", "self", ".", "kv", "=", "nn", ".", "Linear", "(", "dim", ",", "dim", "*", "2", ",", "bias", "=", "qkv_bias", ")", "\n", "self", ".", "attn_drop", "=", "nn", ".", "Dropout", "(", "attn_drop", ")", "\n", "self", ".", "proj", "=", "nn", ".", "Linear", "(", "dim", ",", "dim", ")", "\n", "self", ".", "proj_drop", "=", "nn", ".", "Dropout", "(", "proj_drop", ")", "\n", "\n", "self", ".", "sr_ratio", "=", "sr_ratio", "\n", "if", "sr_ratio", ">", "1", ":", "\n", "            ", "self", ".", "sr", "=", "nn", ".", "Conv2d", "(", "\n", "dim", ",", "dim", ",", "kernel_size", "=", "sr_ratio", ",", "stride", "=", "sr_ratio", ")", "\n", "self", ".", "norm", "=", "nn", ".", "LayerNorm", "(", "dim", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.segformer_module.EfficientAttention.execute": [[28, 53], ["segformer_module.EfficientAttention.q().reshape().permute", "jittor.nn.softmax", "segformer_module.EfficientAttention.attn_drop", "segformer_module.EfficientAttention.proj", "segformer_module.EfficientAttention.proj_drop", "segformer_module.EfficientAttention.permute().reshape", "segformer_module.EfficientAttention.sr().reshape().permute", "segformer_module.EfficientAttention.norm", "segformer_module.EfficientAttention.kv().reshape().permute", "segformer_module.EfficientAttention.kv().reshape().permute", "segformer_module.EfficientAttention.q().reshape", "k.transpose", "segformer_module.EfficientAttention.permute", "segformer_module.EfficientAttention.sr().reshape", "segformer_module.EfficientAttention.kv().reshape", "segformer_module.EfficientAttention.kv().reshape", "segformer_module.EfficientAttention.q", "segformer_module.EfficientAttention.sr", "segformer_module.EfficientAttention.kv", "segformer_module.EfficientAttention.kv"], "methods", ["None"], ["", "", "def", "execute", "(", "self", ",", "x", ",", "H", ",", "W", ")", ":", "\n", "        ", "B", ",", "N", ",", "C", "=", "x", ".", "shape", "\n", "q", "=", "self", ".", "q", "(", "x", ")", ".", "reshape", "(", "B", ",", "N", ",", "self", ".", "num_heads", ",", "C", "//", "\n", "self", ".", "num_heads", ")", ".", "permute", "(", "0", ",", "2", ",", "1", ",", "3", ")", "\n", "\n", "if", "self", ".", "sr_ratio", ">", "1", ":", "\n", "            ", "x_", "=", "x", ".", "permute", "(", "0", ",", "2", ",", "1", ")", ".", "reshape", "(", "B", ",", "C", ",", "H", ",", "W", ")", "\n", "x_", "=", "self", ".", "sr", "(", "x_", ")", ".", "reshape", "(", "B", ",", "C", ",", "-", "1", ")", ".", "permute", "(", "0", ",", "2", ",", "1", ")", "\n", "x_", "=", "self", ".", "norm", "(", "x_", ")", "\n", "kv", "=", "self", ".", "kv", "(", "x_", ")", ".", "reshape", "(", "B", ",", "-", "1", ",", "2", ",", "self", ".", "num_heads", ",", "\n", "C", "//", "self", ".", "num_heads", ")", ".", "permute", "(", "2", ",", "0", ",", "3", ",", "1", ",", "4", ")", "\n", "", "else", ":", "\n", "            ", "kv", "=", "self", ".", "kv", "(", "x", ")", ".", "reshape", "(", "B", ",", "-", "1", ",", "2", ",", "self", ".", "num_heads", ",", "C", "//", "\n", "self", ".", "num_heads", ")", ".", "permute", "(", "2", ",", "0", ",", "3", ",", "1", ",", "4", ")", "\n", "", "k", ",", "v", "=", "kv", "[", "0", "]", ",", "kv", "[", "1", "]", "\n", "\n", "attn", "=", "(", "q", "@", "k", ".", "transpose", "(", "0", ",", "1", ",", "3", ",", "2", ")", ")", "*", "self", ".", "scale", "\n", "attn", "=", "nn", ".", "softmax", "(", "attn", ",", "dim", "=", "-", "1", ")", "\n", "attn", "=", "self", ".", "attn_drop", "(", "attn", ")", "\n", "\n", "x", "=", "(", "attn", "@", "v", ")", ".", "transpose", "(", "0", ",", "2", ",", "1", ",", "3", ")", ".", "reshape", "(", "B", ",", "N", ",", "C", ")", "\n", "x", "=", "self", ".", "proj", "(", "x", ")", "\n", "x", "=", "self", ".", "proj_drop", "(", "x", ")", "\n", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.segformer_module.main": [[55, 60], ["segformer_module.EfficientAttention", "jittor.rand", "EfficientAttention.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "EfficientAttention", "(", "64", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "128", ",", "64", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ",", "8", ",", "8", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.ocr.OCRHead.__init__": [[6, 14], ["jittor.Module.__init__", "jittor.ReLU", "jittor.ReLU", "jittor.Softmax", "jittor.Softmax", "jittor.Conv", "jittor.Conv", "jittor.Conv", "jittor.Conv", "ocr.OCRHead._zero_init_conv"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__", "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.ocr.OCRHead._zero_init_conv"], ["    ", "def", "__init__", "(", "self", ",", "in_channels", ",", "n_cls", "=", "19", ")", ":", "\n", "        ", "super", "(", "OCRHead", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", ")", "\n", "self", ".", "in_channels", "=", "in_channels", "\n", "self", ".", "softmax", "=", "nn", ".", "Softmax", "(", "dim", "=", "2", ")", "\n", "self", ".", "conv_1x1", "=", "nn", ".", "Conv", "(", "in_channels", ",", "in_channels", ",", "kernel_size", "=", "1", ")", "\n", "self", ".", "last_conv", "=", "nn", ".", "Conv", "(", "in_channels", "*", "2", ",", "n_cls", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "1", ")", "\n", "self", ".", "_zero_init_conv", "(", ")", "\n", "", "def", "_zero_init_conv", "(", "self", ")", ":", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.ocr.OCRHead._zero_init_conv": [[14, 16], ["jittor.init.constant", "jittor.init.constant"], "methods", ["None"], ["", "def", "_zero_init_conv", "(", "self", ")", ":", "\n", "        ", "self", ".", "conv_1x1", ".", "weight", "=", "init", ".", "constant", "(", "[", "self", ".", "in_channels", ",", "self", ".", "in_channels", ",", "1", ",", "1", "]", ",", "'float'", ",", "value", "=", "0.0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_attentions.ocr.OCRHead.execute": [[17, 31], ["feature.reshape().transpose.reshape().transpose.reshape().transpose", "context.reshape.reshape.reshape", "ocr.OCRHead.softmax", "jittor.bmm().transpose", "jittor.bmm().transpose", "jittor.bmm().transpose", "jittor.bmm().transpose", "ocr.OCRHead.softmax", "jittor.bmm().reshape", "jittor.bmm().reshape", "ocr.OCRHead.conv_1x1", "jittor.concat", "jittor.concat", "ocr.OCRHead.last_conv", "feature.reshape().transpose.reshape().transpose.reshape", "jittor.bmm", "jittor.bmm", "jittor.bmm", "jittor.bmm", "jittor.bmm", "jittor.bmm"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "context", ",", "feature", ")", ":", "\n", "        ", "batch_size", ",", "c", ",", "h", ",", "w", "=", "feature", ".", "shape", "\n", "origin_feature", "=", "feature", "\n", "feature", "=", "feature", ".", "reshape", "(", "batch_size", ",", "c", ",", "-", "1", ")", ".", "transpose", "(", "0", ",", "2", ",", "1", ")", "# b, h*w, c", "\n", "context", "=", "context", ".", "reshape", "(", "batch_size", ",", "context", ".", "shape", "[", "1", "]", ",", "-", "1", ")", "# b, n_cls, h*w", "\n", "attention", "=", "self", ".", "softmax", "(", "context", ")", "\n", "ocr_context", "=", "nn", ".", "bmm", "(", "attention", ",", "feature", ")", ".", "transpose", "(", "0", ",", "2", ",", "1", ")", "# b, c, n_cls", "\n", "relation", "=", "nn", ".", "bmm", "(", "feature", ",", "ocr_context", ")", ".", "transpose", "(", "0", ",", "2", ",", "1", ")", "# b, n_cls, h*w", "\n", "attention", "=", "self", ".", "softmax", "(", "relation", ")", "#b , n_cls, h*w ", "\n", "result", "=", "nn", ".", "bmm", "(", "ocr_context", ",", "attention", ")", ".", "reshape", "(", "batch_size", ",", "c", ",", "h", ",", "w", ")", "\n", "result", "=", "self", ".", "conv_1x1", "(", "result", ")", "\n", "result", "=", "jt", ".", "concat", "(", "[", "result", ",", "origin_feature", "]", ",", "dim", "=", "1", ")", "\n", "result", "=", "self", ".", "last_conv", "(", "result", ")", "\n", "return", "result", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_temporal_attentions.dstt_module.Attention.__init__": [[12, 15], ["jittor.nn.Module.__init__", "jittor.nn.Dropout"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["def", "__init__", "(", "self", ",", "p", "=", "0.1", ")", ":", "\n", "        ", "super", "(", "Attention", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "dropout", "=", "nn", ".", "Dropout", "(", "p", "=", "p", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_temporal_attentions.dstt_module.Attention.execute": [[16, 23], ["jittor.nn.softmax", "dstt_module.Attention.dropout", "jittor.matmul", "jittor.matmul", "math.sqrt", "key.transpose", "query.size"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "query", ",", "key", ",", "value", ")", ":", "\n", "        ", "scores", "=", "jt", ".", "matmul", "(", "query", ",", "key", ".", "transpose", "(", "-", "2", ",", "-", "1", ")", "\n", ")", "/", "math", ".", "sqrt", "(", "query", ".", "size", "(", "-", "1", ")", ")", "\n", "p_attn", "=", "nn", ".", "softmax", "(", "scores", ",", "dim", "=", "-", "1", ")", "\n", "p_attn", "=", "self", ".", "dropout", "(", "p_attn", ")", "\n", "p_val", "=", "jt", ".", "matmul", "(", "p_attn", ",", "value", ")", "\n", "return", "p_val", ",", "p_attn", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_temporal_attentions.dstt_module.MultiHeadedAttention.__init__": [[30, 40], ["jittor.nn.Module.__init__", "jittor.nn.Linear", "jittor.nn.Linear", "jittor.nn.Linear", "jittor.nn.Linear", "dstt_module.Attention"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["def", "__init__", "(", "self", ",", "tokensize", ",", "d_model", ",", "head", ",", "mode", ",", "p", "=", "0.1", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "mode", "=", "mode", "\n", "self", ".", "query_embedding", "=", "nn", ".", "Linear", "(", "d_model", ",", "d_model", ")", "\n", "self", ".", "value_embedding", "=", "nn", ".", "Linear", "(", "d_model", ",", "d_model", ")", "\n", "self", ".", "key_embedding", "=", "nn", ".", "Linear", "(", "d_model", ",", "d_model", ")", "\n", "self", ".", "output_linear", "=", "nn", ".", "Linear", "(", "d_model", ",", "d_model", ")", "\n", "self", ".", "attention", "=", "Attention", "(", "p", "=", "p", ")", "\n", "self", ".", "head", "=", "head", "\n", "self", ".", "h", ",", "self", ".", "w", "=", "tokensize", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_temporal_attentions.dstt_module.MultiHeadedAttention.execute": [[41, 72], ["x.size", "dstt_module.MultiHeadedAttention.key_embedding", "dstt_module.MultiHeadedAttention.query_embedding", "dstt_module.MultiHeadedAttention.value_embedding", "dstt_module.MultiHeadedAttention.output_linear", "key.permute().view.permute().view.view().permute", "query.permute().view.permute().view.view().permute", "value.permute().view.permute().view.view().permute", "dstt_module.MultiHeadedAttention.attention", "att.permute().view.permute().view.permute().view", "key.permute().view.permute().view.view", "key.permute().view.permute().view.permute().view", "query.permute().view.permute().view.view", "query.permute().view.permute().view.permute().view", "value.permute().view.permute().view.view", "value.permute().view.permute().view.permute().view", "dstt_module.MultiHeadedAttention.attention", "att.permute().view.permute().view.view", "att.permute().view.permute().view.permute().view", "key.permute().view.permute().view.view", "query.permute().view.permute().view.view", "value.permute().view.permute().view.view", "att.permute().view.permute().view.permute", "key.permute().view.permute().view.permute", "query.permute().view.permute().view.permute", "value.permute().view.permute().view.permute", "att.permute().view.permute().view.permute"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ",", "t", ")", ":", "\n", "        ", "bt", ",", "n", ",", "c", "=", "x", ".", "size", "(", ")", "\n", "b", "=", "bt", "//", "t", "\n", "c_h", "=", "c", "//", "self", ".", "head", "\n", "key", "=", "self", ".", "key_embedding", "(", "x", ")", "\n", "query", "=", "self", ".", "query_embedding", "(", "x", ")", "\n", "value", "=", "self", ".", "value_embedding", "(", "x", ")", "\n", "if", "self", ".", "mode", "==", "'s'", ":", "\n", "            ", "key", "=", "key", ".", "view", "(", "b", ",", "t", ",", "n", ",", "self", ".", "head", ",", "c_h", ")", ".", "permute", "(", "0", ",", "1", ",", "3", ",", "2", ",", "4", ")", "\n", "query", "=", "query", ".", "view", "(", "b", ",", "t", ",", "n", ",", "self", ".", "head", ",", "c_h", ")", ".", "permute", "(", "0", ",", "1", ",", "3", ",", "2", ",", "4", ")", "\n", "value", "=", "value", ".", "view", "(", "b", ",", "t", ",", "n", ",", "self", ".", "head", ",", "c_h", ")", ".", "permute", "(", "0", ",", "1", ",", "3", ",", "2", ",", "4", ")", "\n", "att", ",", "_", "=", "self", ".", "attention", "(", "query", ",", "key", ",", "value", ")", "\n", "att", "=", "att", ".", "permute", "(", "0", ",", "1", ",", "3", ",", "2", ",", "4", ")", ".", "view", "(", "bt", ",", "n", ",", "c", ")", "\n", "", "elif", "self", ".", "mode", "==", "'t'", ":", "\n", "            ", "key", "=", "key", ".", "view", "(", "b", ",", "t", ",", "2", ",", "self", ".", "h", "//", "2", ",", "2", ",", "self", ".", "w", "//", "2", ",", "self", ".", "head", ",", "c_h", ")", "\n", "key", "=", "key", ".", "permute", "(", "0", ",", "2", ",", "4", ",", "6", ",", "1", ",", "3", ",", "5", ",", "7", ")", ".", "view", "(", "\n", "b", ",", "4", ",", "self", ".", "head", ",", "-", "1", ",", "c_h", ")", "\n", "query", "=", "query", ".", "view", "(", "b", ",", "t", ",", "2", ",", "self", ".", "h", "//", "2", ",", "2", ",", "\n", "self", ".", "w", "//", "2", ",", "self", ".", "head", ",", "c_h", ")", "\n", "query", "=", "query", ".", "permute", "(", "0", ",", "2", ",", "4", ",", "6", ",", "1", ",", "3", ",", "5", ",", "7", ")", ".", "view", "(", "\n", "b", ",", "4", ",", "self", ".", "head", ",", "-", "1", ",", "c_h", ")", "\n", "value", "=", "value", ".", "view", "(", "b", ",", "t", ",", "2", ",", "self", ".", "h", "//", "2", ",", "2", ",", "\n", "self", ".", "w", "//", "2", ",", "self", ".", "head", ",", "c_h", ")", "\n", "value", "=", "value", ".", "permute", "(", "0", ",", "2", ",", "4", ",", "6", ",", "1", ",", "3", ",", "5", ",", "7", ")", ".", "view", "(", "\n", "b", ",", "4", ",", "self", ".", "head", ",", "-", "1", ",", "c_h", ")", "\n", "att", ",", "_", "=", "self", ".", "attention", "(", "query", ",", "key", ",", "value", ")", "\n", "att", "=", "att", ".", "view", "(", "b", ",", "2", ",", "2", ",", "self", ".", "head", ",", "t", ",", "self", ".", "h", "//", "2", ",", "self", ".", "w", "//", "2", ",", "c_h", ")", "\n", "att", "=", "att", ".", "permute", "(", "0", ",", "4", ",", "1", ",", "5", ",", "2", ",", "6", ",", "3", ",", "\n", "7", ")", ".", "view", "(", "bt", ",", "n", ",", "c", ")", "\n", "", "output", "=", "self", ".", "output_linear", "(", "att", ")", "\n", "return", "output", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.spatial_temporal_attentions.dstt_module.main": [[74, 83], ["dstt_module.MultiHeadedAttention", "dstt_module.MultiHeadedAttention", "jittor.rand", "MultiHeadedAttention.", "MultiHeadedAttention.", "print", "jt.rand.size", "attention_block_t.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block_s", "=", "MultiHeadedAttention", "(", "\n", "tokensize", "=", "[", "4", ",", "8", "]", ",", "d_model", "=", "64", ",", "head", "=", "4", ",", "mode", "=", "'s'", ")", "\n", "attention_block_t", "=", "MultiHeadedAttention", "(", "\n", "tokensize", "=", "[", "4", ",", "8", "]", ",", "d_model", "=", "64", ",", "head", "=", "4", ",", "mode", "=", "'t'", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "8", ",", "32", ",", "64", "]", ")", "\n", "output", "=", "attention_block_s", "(", "input", ",", "2", ")", "\n", "output", "=", "attention_block_t", "(", "output", ",", "2", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.resnest_module.RadixSoftmax.__init__": [[16, 20], ["jittor.nn.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "radix", ",", "cardinality", ")", ":", "\n", "        ", "super", "(", "RadixSoftmax", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "radix", "=", "radix", "\n", "self", ".", "cardinality", "=", "cardinality", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.resnest_module.RadixSoftmax.execute": [[21, 30], ["x.sigmoid.sigmoid.size", "x.sigmoid.sigmoid.view().transpose", "jittor.nn.softmax", "x.sigmoid.sigmoid.reshape", "x.sigmoid.sigmoid.sigmoid", "x.sigmoid.sigmoid.view"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "batch", "=", "x", ".", "size", "(", "0", ")", "\n", "if", "self", ".", "radix", ">", "1", ":", "\n", "            ", "x", "=", "x", ".", "view", "(", "batch", ",", "self", ".", "cardinality", ",", "self", ".", "radix", ",", "-", "1", ")", ".", "transpose", "(", "1", ",", "2", ")", "\n", "x", "=", "nn", ".", "softmax", "(", "x", ",", "dim", "=", "1", ")", "\n", "x", "=", "x", ".", "reshape", "(", "batch", ",", "-", "1", ")", "\n", "", "else", ":", "\n", "            ", "x", "=", "x", ".", "sigmoid", "(", ")", "\n", "", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.resnest_module.SplitAttn.__init__": [[36, 61], ["jittor.nn.Module.__init__", "jittor.nn.Conv2d", "act_layer", "jittor.nn.Conv2d", "act_layer", "jittor.nn.Conv2d", "resnest_module.RadixSoftmax", "resnest_module.make_divisible", "norm_layer", "jittor.nn.Identity", "norm_layer", "jittor.nn.Identity"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__", "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.resnest_module.make_divisible"], ["def", "__init__", "(", "self", ",", "in_channels", ",", "out_channels", "=", "None", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "padding", "=", "None", ",", "\n", "dilation", "=", "1", ",", "groups", "=", "1", ",", "bias", "=", "False", ",", "radix", "=", "2", ",", "rd_ratio", "=", "0.25", ",", "rd_channels", "=", "None", ",", "rd_divisor", "=", "8", ",", "\n", "act_layer", "=", "nn", ".", "ReLU", ",", "norm_layer", "=", "None", ",", "drop_block", "=", "None", ",", "**", "kwargs", ")", ":", "\n", "        ", "super", "(", "SplitAttn", ",", "self", ")", ".", "__init__", "(", ")", "\n", "out_channels", "=", "out_channels", "or", "in_channels", "\n", "self", ".", "radix", "=", "radix", "\n", "self", ".", "drop_block", "=", "drop_block", "\n", "mid_chs", "=", "out_channels", "*", "radix", "\n", "if", "rd_channels", "is", "None", ":", "\n", "            ", "attn_chs", "=", "make_divisible", "(", "\n", "in_channels", "*", "radix", "*", "rd_ratio", ",", "min_value", "=", "32", ",", "divisor", "=", "rd_divisor", ")", "\n", "", "else", ":", "\n", "            ", "attn_chs", "=", "rd_channels", "*", "radix", "\n", "\n", "", "padding", "=", "kernel_size", "//", "2", "if", "padding", "is", "None", "else", "padding", "\n", "self", ".", "conv", "=", "nn", ".", "Conv2d", "(", "\n", "in_channels", ",", "mid_chs", ",", "kernel_size", ",", "stride", ",", "padding", ",", "dilation", ",", "\n", "groups", "=", "groups", "*", "radix", ",", "bias", "=", "bias", ",", "**", "kwargs", ")", "\n", "self", ".", "bn0", "=", "norm_layer", "(", "mid_chs", ")", "if", "norm_layer", "else", "nn", ".", "Identity", "(", ")", "\n", "self", ".", "act0", "=", "act_layer", "(", ")", "\n", "self", ".", "fc1", "=", "nn", ".", "Conv2d", "(", "out_channels", ",", "attn_chs", ",", "1", ",", "groups", "=", "groups", ")", "\n", "self", ".", "bn1", "=", "norm_layer", "(", "attn_chs", ")", "if", "norm_layer", "else", "nn", ".", "Identity", "(", ")", "\n", "self", ".", "act1", "=", "act_layer", "(", ")", "\n", "self", ".", "fc2", "=", "nn", ".", "Conv2d", "(", "attn_chs", ",", "mid_chs", ",", "1", ",", "groups", "=", "groups", ")", "\n", "self", ".", "rsoftmax", "=", "RadixSoftmax", "(", "radix", ",", "groups", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.resnest_module.SplitAttn.execute": [[62, 88], ["resnest_module.SplitAttn.conv", "resnest_module.SplitAttn.bn0", "resnest_module.SplitAttn.act0", "x.reshape.sum.mean().mean", "resnest_module.SplitAttn.fc1", "resnest_module.SplitAttn.bn1", "resnest_module.SplitAttn.act1", "resnest_module.SplitAttn.fc2", "resnest_module.SplitAttn.rsoftmax().view", "resnest_module.SplitAttn.drop_block", "x.reshape.reshape.reshape", "x.reshape.reshape.sum", "x.reshape.sum.mean", "resnest_module.SplitAttn.rsoftmax", "resnest_module.SplitAttn.reshape"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "conv", "(", "x", ")", "\n", "x", "=", "self", ".", "bn0", "(", "x", ")", "\n", "if", "self", ".", "drop_block", "is", "not", "None", ":", "\n", "            ", "x", "=", "self", ".", "drop_block", "(", "x", ")", "\n", "", "x", "=", "self", ".", "act0", "(", "x", ")", "\n", "\n", "B", ",", "RC", ",", "H", ",", "W", "=", "x", ".", "shape", "\n", "if", "self", ".", "radix", ">", "1", ":", "\n", "            ", "x", "=", "x", ".", "reshape", "(", "(", "B", ",", "self", ".", "radix", ",", "RC", "//", "self", ".", "radix", ",", "H", ",", "W", ")", ")", "\n", "x_gap", "=", "x", ".", "sum", "(", "dim", "=", "1", ")", "\n", "", "else", ":", "\n", "            ", "x_gap", "=", "x", "\n", "", "x_gap", "=", "x_gap", ".", "mean", "(", "2", ",", "keepdims", "=", "True", ")", ".", "mean", "(", "3", ",", "keepdims", "=", "True", ")", "\n", "x_gap", "=", "self", ".", "fc1", "(", "x_gap", ")", "\n", "x_gap", "=", "self", ".", "bn1", "(", "x_gap", ")", "\n", "x_gap", "=", "self", ".", "act1", "(", "x_gap", ")", "\n", "x_attn", "=", "self", ".", "fc2", "(", "x_gap", ")", "\n", "\n", "x_attn", "=", "self", ".", "rsoftmax", "(", "x_attn", ")", ".", "view", "(", "B", ",", "-", "1", ",", "1", ",", "1", ")", "\n", "if", "self", ".", "radix", ">", "1", ":", "\n", "            ", "out", "=", "(", "x", "*", "x_attn", ".", "reshape", "(", "(", "B", ",", "self", ".", "radix", ",", "\n", "RC", "//", "self", ".", "radix", ",", "1", ",", "1", ")", ")", ")", ".", "sum", "(", "dim", "=", "1", ")", "\n", "", "else", ":", "\n", "            ", "out", "=", "x", "*", "x_attn", "\n", "", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.resnest_module.make_divisible": [[6, 13], ["max", "int"], "function", ["None"], ["def", "make_divisible", "(", "v", ",", "divisor", "=", "8", ",", "min_value", "=", "None", ",", "round_limit", "=", ".9", ")", ":", "\n", "    ", "min_value", "=", "min_value", "or", "divisor", "\n", "new_v", "=", "max", "(", "min_value", ",", "int", "(", "v", "+", "divisor", "/", "2", ")", "//", "divisor", "*", "divisor", ")", "\n", "# Make sure that round down does not go down by more than 10%.", "\n", "if", "new_v", "<", "round_limit", "*", "v", ":", "\n", "        ", "new_v", "+=", "divisor", "\n", "", "return", "new_v", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.resnest_module.main": [[90, 95], ["resnest_module.SplitAttn", "jittor.ones", "SplitAttn.", "print", "jt.ones.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "SplitAttn", "(", "64", ")", "\n", "input", "=", "jt", ".", "ones", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.highway.Highway.__init__": [[6, 21], ["jittor.Module.__init__", "jittor.ModuleList", "jittor.ModuleList", "jittor.ModuleList", "jittor.ModuleList", "jittor.ModuleList", "jittor.ModuleList", "jittor.ReLU", "jittor.ReLU", "jittor.Sigmoid", "jittor.Sigmoid", "jittor.Linear", "jittor.Linear", "jittor.Linear", "jittor.Linear", "jittor.Linear", "jittor.Linear", "range", "range", "range"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "dim", ",", "num_layers", "=", "2", ")", ":", "\n", "\n", "        ", "super", "(", "Highway", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "num_layers", "=", "num_layers", "\n", "\n", "self", ".", "nonlinear", "=", "nn", ".", "ModuleList", "(", "\n", "[", "nn", ".", "Linear", "(", "dim", ",", "dim", ")", "for", "_", "in", "range", "(", "num_layers", ")", "]", ")", "\n", "self", ".", "linear", "=", "nn", ".", "ModuleList", "(", "[", "nn", ".", "Linear", "(", "dim", ",", "dim", ")", "\n", "for", "_", "in", "range", "(", "num_layers", ")", "]", ")", "\n", "self", ".", "gate", "=", "nn", ".", "ModuleList", "(", "[", "nn", ".", "Linear", "(", "dim", ",", "dim", ")", "\n", "for", "_", "in", "range", "(", "num_layers", ")", "]", ")", "\n", "\n", "self", ".", "f", "=", "nn", ".", "ReLU", "(", ")", "\n", "self", ".", "sigmoid", "=", "nn", ".", "Sigmoid", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.highway.Highway.execute": [[22, 38], ["range", "highway.Highway.sigmoid", "highway.Highway.f", "print", "x.size"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "\"\"\"\n            :param x: tensor with shape of [batch_size, size]\n            :return: tensor with shape of [batch_size, size]\n            applies \u03c3(x) \u2a00 (f(G(x))) + (1 - \u03c3(x)) \u2a00 (Q(x)) transformation | G and Q is affine transformation,\n            f is non-linear transformation, \u03c3(x) is affine transformation with sigmoid non-linearition\n            and \u2a00 is element-wise multiplication\n            \"\"\"", "\n", "\n", "for", "layer", "in", "range", "(", "self", ".", "num_layers", ")", ":", "\n", "            ", "gate", "=", "self", ".", "sigmoid", "(", "self", ".", "gate", "[", "layer", "]", "(", "x", ")", ")", "\n", "nonlinear", "=", "self", ".", "f", "(", "self", ".", "nonlinear", "[", "layer", "]", "(", "x", ")", ")", "\n", "linear", "=", "self", ".", "linear", "[", "layer", "]", "(", "x", ")", "\n", "x", "=", "gate", "*", "nonlinear", "+", "(", "1", "-", "gate", ")", "*", "linear", "\n", "print", "(", "x", ".", "size", "(", ")", ")", "\n", "", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.highway.main": [[40, 45], ["highway.Highway", "jittor.rand", "Highway.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "Highway", "(", "32", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.sk_module.SKModule.__init__": [[7, 39], ["jittor.Module.__init__", "max", "jittor.ModuleList", "jittor.ModuleList", "range", "jittor.AdaptiveAvgPool2d", "jittor.AdaptiveAvgPool2d", "jittor.Sequential", "jittor.Sequential", "jittor.ModuleList", "jittor.ModuleList", "range", "jittor.Softmax", "jittor.Softmax", "int", "sk_module.SKModule.convs.append", "jittor.Conv2d", "jittor.Conv2d", "jittor.BatchNorm2d", "jittor.BatchNorm2d", "jittor.ReLU", "jittor.ReLU", "sk_module.SKModule.fcs.append", "jittor.Sequential", "jittor.Sequential", "jittor.Conv2d", "jittor.Conv2d", "jittor.Conv2d", "jittor.Conv2d", "jittor.BatchNorm2d", "jittor.BatchNorm2d", "jittor.ReLU", "jittor.ReLU"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "features", ",", "M", "=", "2", ",", "G", "=", "32", ",", "r", "=", "16", ",", "stride", "=", "1", ",", "L", "=", "32", ")", ":", "\n", "        ", "\"\"\" Constructor\n        Args:\n            features: input channel dimensionality.\n            M: the number of branchs.\n            G: num of convolution groups.\n            r: the ratio for compute d, the length of z.\n            stride: stride, default 1.\n            L: the minimum dim of the vector z in paper, default 32.\n        \"\"\"", "\n", "super", "(", "SKModule", ",", "self", ")", ".", "__init__", "(", ")", "\n", "d", "=", "max", "(", "int", "(", "features", "/", "r", ")", ",", "L", ")", "\n", "self", ".", "M", "=", "M", "\n", "self", ".", "features", "=", "features", "\n", "self", ".", "convs", "=", "nn", ".", "ModuleList", "(", "[", "]", ")", "\n", "for", "i", "in", "range", "(", "M", ")", ":", "\n", "            ", "self", ".", "convs", ".", "append", "(", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "features", ",", "features", ",", "kernel_size", "=", "3", ",", "stride", "=", "stride", ",", "\n", "padding", "=", "1", "+", "i", ",", "dilation", "=", "1", "+", "i", ",", "groups", "=", "G", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm2d", "(", "features", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", "\n", ")", ")", "\n", "", "self", ".", "gap", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "(", "1", ",", "1", ")", ")", "\n", "self", ".", "fc", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "features", ",", "d", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm2d", "(", "d", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ")", "\n", "self", ".", "fcs", "=", "nn", ".", "ModuleList", "(", "[", "]", ")", "\n", "for", "i", "in", "range", "(", "M", ")", ":", "\n", "            ", "self", ".", "fcs", ".", "append", "(", "\n", "nn", ".", "Conv2d", "(", "d", ",", "features", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ")", "\n", ")", "\n", "", "self", ".", "softmax", "=", "nn", ".", "Softmax", "(", "dim", "=", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.sk_module.SKModule.execute": [[40, 62], ["jittor.concat", "jittor.concat", "feats.view.view.view", "jittor.sum", "jittor.sum", "sk_module.SKModule.gap", "sk_module.SKModule.fc", "jittor.concat", "jittor.concat", "sk_module.SKModule.view", "sk_module.SKModule.softmax", "jittor.sum", "jittor.sum", "conv", "fc"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "\n", "        ", "batch_size", "=", "x", ".", "shape", "[", "0", "]", "\n", "\n", "feats", "=", "[", "conv", "(", "x", ")", "for", "conv", "in", "self", ".", "convs", "]", "\n", "feats", "=", "jt", ".", "concat", "(", "feats", ",", "dim", "=", "1", ")", "\n", "feats", "=", "feats", ".", "view", "(", "batch_size", ",", "self", ".", "M", ",", "self", ".", "features", ",", "\n", "feats", ".", "shape", "[", "2", "]", ",", "feats", ".", "shape", "[", "3", "]", ")", "\n", "\n", "feats_U", "=", "jt", ".", "sum", "(", "feats", ",", "dim", "=", "1", ")", "\n", "feats_S", "=", "self", ".", "gap", "(", "feats_U", ")", "\n", "feats_Z", "=", "self", ".", "fc", "(", "feats_S", ")", "\n", "\n", "attention_vectors", "=", "[", "fc", "(", "feats_Z", ")", "for", "fc", "in", "self", ".", "fcs", "]", "\n", "attention_vectors", "=", "jt", ".", "concat", "(", "attention_vectors", ",", "dim", "=", "1", ")", "\n", "attention_vectors", "=", "attention_vectors", ".", "view", "(", "\n", "batch_size", ",", "self", ".", "M", ",", "self", ".", "features", ",", "1", ",", "1", ")", "\n", "attention_vectors", "=", "self", ".", "softmax", "(", "attention_vectors", ")", "\n", "\n", "feats_V", "=", "jt", ".", "sum", "(", "feats", "*", "attention_vectors", ",", "dim", "=", "1", ")", "\n", "\n", "return", "feats_V", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.sk_module.main": [[64, 69], ["sk_module.SKModule", "jittor.rand", "SKModule.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "SKModule", "(", "64", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.dynamic_conv.attention2d.__init__": [[7, 22], ["jittor.nn.Module.__init__", "jittor.nn.AdaptiveAvgPool2d", "jittor.nn.Conv2d", "jittor.nn.Conv2d", "int"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "in_planes", ",", "ratios", ",", "K", ",", "temperature", ")", ":", "\n", "        ", "super", "(", "attention2d", ",", "self", ")", ".", "__init__", "(", ")", "\n", "# for reducing \u03c4 temperature from 30 to 1 linearly in the first 10 epochs.", "\n", "assert", "temperature", "%", "3", "==", "1", "\n", "self", ".", "avgpool", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "1", ")", "\n", "\n", "if", "in_planes", "!=", "3", ":", "\n", "            ", "hidden_planes", "=", "int", "(", "in_planes", "*", "ratios", ")", "+", "1", "\n", "", "else", ":", "\n", "            ", "hidden_planes", "=", "K", "\n", "\n", "", "self", ".", "fc1", "=", "nn", ".", "Conv2d", "(", "in_planes", ",", "hidden_planes", ",", "1", ",", "bias", "=", "False", ")", "\n", "# self.relu  = nn.ReLU()", "\n", "self", ".", "fc2", "=", "nn", ".", "Conv2d", "(", "hidden_planes", ",", "K", ",", "1", ",", "bias", "=", "True", ")", "\n", "self", ".", "temperature", "=", "temperature", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.dynamic_conv.attention2d.update__temperature": [[23, 26], ["None"], "methods", ["None"], ["", "def", "update__temperature", "(", "self", ")", ":", "\n", "        ", "if", "self", ".", "temperature", "!=", "1", ":", "\n", "            ", "self", ".", "temperature", "-=", "3", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.dynamic_conv.attention2d.execute": [[27, 37], ["dynamic_conv.attention2d.avgpool", "dynamic_conv.attention2d.fc1", "jittor.nn.relu", "dynamic_conv.attention2d.fc2", "z.view.view.view", "jittor.nn.softmax", "z.view.view.size"], "methods", ["None"], ["", "", "def", "execute", "(", "self", ",", "z", ")", ":", "\n", "        ", "z", "=", "self", ".", "avgpool", "(", "z", ")", "\n", "z", "=", "self", ".", "fc1", "(", "z", ")", "\n", "# z = self.relu(z)", "\n", "z", "=", "nn", ".", "relu", "(", "z", ")", "\n", "z", "=", "self", ".", "fc2", "(", "z", ")", "\n", "z", "=", "z", ".", "view", "(", "z", ".", "size", "(", "0", ")", ",", "-", "1", ")", "\n", "# z = self.fc2(z).view(z.size(0), -1)", "\n", "\n", "return", "nn", ".", "softmax", "(", "z", "/", "self", ".", "temperature", ",", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.dynamic_conv.Dynamic_conv2d.__init__": [[40, 62], ["jittor.nn.Module.__init__", "dynamic_conv.attention2d", "jittor.random", "ValueError", "jittor.random"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "in_planes", ",", "out_planes", ",", "kernel_size", ",", "ratio", "=", "0.25", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "dilation", "=", "1", ",", "groups", "=", "1", ",", "bias", "=", "True", ",", "K", "=", "4", ",", "temperature", "=", "34", ")", ":", "\n", "        ", "super", "(", "Dynamic_conv2d", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "if", "in_planes", "%", "groups", "!=", "0", ":", "\n", "            ", "raise", "ValueError", "(", "'Error : in_planes%groups != 0'", ")", "\n", "", "self", ".", "in_planes", "=", "in_planes", "\n", "self", ".", "out_planes", "=", "out_planes", "\n", "self", ".", "kernel_size", "=", "kernel_size", "\n", "self", ".", "stride", "=", "stride", "\n", "self", ".", "padding", "=", "padding", "\n", "self", ".", "dilation", "=", "dilation", "\n", "self", ".", "groups", "=", "groups", "\n", "self", ".", "bias", "=", "bias", "\n", "self", ".", "K", "=", "K", "\n", "self", ".", "attention", "=", "attention2d", "(", "in_planes", ",", "ratio", ",", "K", ",", "temperature", ")", "\n", "self", ".", "weight", "=", "jt", ".", "random", "(", "(", "\n", "K", ",", "out_planes", ",", "in_planes", "//", "groups", ",", "kernel_size", ",", "kernel_size", ")", ")", "\n", "\n", "if", "bias", ":", "\n", "            ", "self", ".", "bias", "=", "jt", ".", "random", "(", "(", "K", ",", "out_planes", ")", ")", "\n", "", "else", ":", "\n", "            ", "self", ".", "bias", "=", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.dynamic_conv.Dynamic_conv2d.update_temperature": [[63, 65], ["dynamic_conv.Dynamic_conv2d.attention.update__temperature"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.dynamic_conv.attention2d.update__temperature"], ["", "", "def", "update_temperature", "(", "self", ")", ":", "\n", "        ", "self", ".", "attention", ".", "update__temperature", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.dynamic_conv.Dynamic_conv2d.execute": [[66, 93], ["dynamic_conv.Dynamic_conv2d.attention", "z.view.view.size", "z.view.view.view", "dynamic_conv.Dynamic_conv2d.weight.view", "jittor.matmul().view", "jittor.nn.conv2d.view", "jittor.matmul().view", "jittor.nn.conv2d", "jittor.nn.conv2d", "jittor.nn.conv2d.size", "jittor.nn.conv2d.size", "jittor.matmul", "jittor.matmul"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "z", ")", ":", "\n", "\n", "#         Regard batch as a dimensional variable, perform group convolution,", "\n", "#         because the weight of group convolution is different,", "\n", "#         and the weight of dynamic convolution is also different", "\n", "        ", "softmax_attention", "=", "self", ".", "attention", "(", "z", ")", "\n", "batch_size", ",", "in_planes", ",", "height", ",", "width", "=", "z", ".", "size", "(", ")", "\n", "# changing into dimension for group convolution", "\n", "z", "=", "z", ".", "view", "(", "1", ",", "-", "1", ",", "height", ",", "width", ")", "\n", "weight", "=", "self", ".", "weight", ".", "view", "(", "self", ".", "K", ",", "-", "1", ")", "\n", "\n", "#         The generation of the weight of dynamic convolution,", "\n", "#         which generates batch_size convolution parameters", "\n", "#         (each parameter is different)", "\n", "aggregate_weight", "=", "jt", ".", "matmul", "(", "softmax_attention", ",", "weight", ")", ".", "view", "(", "-", "1", ",", "self", ".", "in_planes", ",", "\n", "self", ".", "kernel_size", ",", "self", ".", "kernel_size", ")", "# expects two matrices (2D tensors)", "\n", "if", "self", ".", "bias", "is", "not", "None", ":", "\n", "            ", "aggregate_bias", "=", "jt", ".", "matmul", "(", "softmax_attention", ",", "self", ".", "bias", ")", ".", "view", "(", "-", "1", ")", "\n", "output", "=", "nn", ".", "conv2d", "(", "z", ",", "weight", "=", "aggregate_weight", ",", "bias", "=", "aggregate_bias", ",", "stride", "=", "self", ".", "stride", ",", "padding", "=", "self", ".", "padding", ",", "\n", "dilation", "=", "self", ".", "dilation", ",", "groups", "=", "self", ".", "groups", "*", "batch_size", ")", "\n", "", "else", ":", "\n", "            ", "output", "=", "nn", ".", "conv2d", "(", "z", ",", "weight", "=", "aggregate_weight", ",", "bias", "=", "None", ",", "stride", "=", "self", ".", "stride", ",", "padding", "=", "self", ".", "padding", ",", "\n", "dilation", "=", "self", ".", "dilation", ",", "groups", "=", "self", ".", "groups", "*", "batch_size", ")", "\n", "", "output", "=", "output", ".", "view", "(", "batch_size", ",", "self", ".", "out_planes", ",", "\n", "output", ".", "size", "(", "-", "2", ")", ",", "output", ".", "size", "(", "-", "1", ")", ")", "\n", "# print('2d-att-for')", "\n", "return", "output", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.branch_attentions.dynamic_conv.main": [[95, 100], ["dynamic_conv.Dynamic_conv2d", "jittor.ones", "Dynamic_conv2d.", "print", "jt.ones.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "Dynamic_conv2d", "(", "64", ",", "64", ",", "3", ",", "padding", "=", "1", ")", "\n", "input", "=", "jt", ".", "ones", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.bam.Flatten.execute": [[7, 9], ["x.view", "x.size"], "methods", ["None"], ["    ", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "x", ".", "view", "(", "x", ".", "size", "(", "0", ")", ",", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.bam.ChannelGate.__init__": [[12, 26], ["jittor.nn.Module.__init__", "jittor.nn.ModuleList", "bam.ChannelGate.gate_c.append", "range", "bam.ChannelGate.gate_c.append", "bam.Flatten", "bam.ChannelGate.gate_c.append", "bam.ChannelGate.gate_c.append", "bam.ChannelGate.gate_c.append", "jittor.nn.Linear", "len", "jittor.nn.Linear", "jittor.nn.BatchNorm1d", "jittor.nn.ReLU"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "gate_channel", ",", "reduction_ratio", "=", "16", ",", "num_layers", "=", "1", ")", ":", "\n", "        ", "super", "(", "ChannelGate", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "gate_c", "=", "nn", ".", "ModuleList", "(", ")", "\n", "self", ".", "gate_c", ".", "append", "(", "Flatten", "(", ")", ")", "\n", "gate_channels", "=", "[", "gate_channel", "]", "\n", "gate_channels", "+=", "[", "gate_channel", "//", "reduction_ratio", "]", "*", "num_layers", "\n", "gate_channels", "+=", "[", "gate_channel", "]", "\n", "for", "i", "in", "range", "(", "len", "(", "gate_channels", ")", "-", "2", ")", ":", "\n", "            ", "self", ".", "gate_c", ".", "append", "(", "nn", ".", "Linear", "(", "\n", "gate_channels", "[", "i", "]", ",", "gate_channels", "[", "i", "+", "1", "]", ")", ")", "\n", "self", ".", "gate_c", ".", "append", "(", "nn", ".", "BatchNorm1d", "(", "gate_channels", "[", "i", "+", "1", "]", ")", ")", "\n", "self", ".", "gate_c", ".", "append", "(", "nn", ".", "ReLU", "(", ")", ")", "\n", "", "self", ".", "gate_c", ".", "append", "(", "nn", ".", "Linear", "(", "\n", "gate_channels", "[", "-", "2", "]", ",", "gate_channels", "[", "-", "1", "]", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.bam.ChannelGate.execute": [[27, 31], ["jittor.nn.avg_pool2d", "bam.ChannelGate.gate_c().unsqueeze().unsqueeze().expand_as", "x.size", "x.size", "bam.ChannelGate.gate_c().unsqueeze().unsqueeze", "bam.ChannelGate.gate_c().unsqueeze", "bam.ChannelGate.gate_c"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "avg_pool", "=", "nn", ".", "avg_pool2d", "(", "\n", "x", ",", "x", ".", "size", "(", "2", ")", ",", "stride", "=", "x", ".", "size", "(", "2", ")", ")", "\n", "return", "self", ".", "gate_c", "(", "avg_pool", ")", ".", "unsqueeze", "(", "2", ")", ".", "unsqueeze", "(", "3", ")", ".", "expand_as", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.bam.SpatialGate.__init__": [[34, 50], ["jittor.nn.Module.__init__", "jittor.nn.ModuleList", "bam.SpatialGate.gate_s.append", "bam.SpatialGate.gate_s.append", "bam.SpatialGate.gate_s.append", "range", "bam.SpatialGate.gate_s.append", "jittor.nn.Conv2d", "jittor.nn.BatchNorm2d", "jittor.nn.ReLU", "bam.SpatialGate.gate_s.append", "bam.SpatialGate.gate_s.append", "bam.SpatialGate.gate_s.append", "jittor.nn.Conv2d", "jittor.nn.Conv2d", "jittor.nn.BatchNorm2d", "jittor.nn.ReLU"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "gate_channel", ",", "reduction_ratio", "=", "16", ",", "dilation_conv_num", "=", "2", ",", "dilation_val", "=", "4", ")", ":", "\n", "        ", "super", "(", "SpatialGate", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "gate_s", "=", "nn", ".", "ModuleList", "(", ")", "\n", "self", ".", "gate_s", ".", "append", "(", "nn", ".", "Conv2d", "(", "\n", "gate_channel", ",", "gate_channel", "//", "reduction_ratio", ",", "kernel_size", "=", "1", ")", ")", "\n", "self", ".", "gate_s", ".", "append", "(", "nn", ".", "BatchNorm2d", "(", "\n", "gate_channel", "//", "reduction_ratio", ")", ")", "\n", "self", ".", "gate_s", ".", "append", "(", "nn", ".", "ReLU", "(", ")", ")", "\n", "for", "i", "in", "range", "(", "dilation_conv_num", ")", ":", "\n", "            ", "self", ".", "gate_s", ".", "append", "(", "nn", ".", "Conv2d", "(", "gate_channel", "//", "reduction_ratio", ",", "gate_channel", "//", "reduction_ratio", ",", "kernel_size", "=", "3", ",", "\n", "padding", "=", "dilation_val", ",", "dilation", "=", "dilation_val", ")", ")", "\n", "self", ".", "gate_s", ".", "append", "(", "nn", ".", "BatchNorm2d", "(", "\n", "gate_channel", "//", "reduction_ratio", ")", ")", "\n", "self", ".", "gate_s", ".", "append", "(", "nn", ".", "ReLU", "(", ")", ")", "\n", "", "self", ".", "gate_s", ".", "append", "(", "nn", ".", "Conv2d", "(", "\n", "gate_channel", "//", "reduction_ratio", ",", "1", ",", "kernel_size", "=", "1", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.bam.SpatialGate.execute": [[51, 53], ["bam.SpatialGate.gate_s().expand_as", "bam.SpatialGate.gate_s"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "self", ".", "gate_s", "(", "x", ")", ".", "expand_as", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.bam.BAM.__init__": [[56, 61], ["jittor.nn.Module.__init__", "bam.ChannelGate", "bam.SpatialGate", "jittor.nn.Sigmoid"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "gate_channel", ")", ":", "\n", "        ", "super", "(", "BAM", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "channel_att", "=", "ChannelGate", "(", "gate_channel", ")", "\n", "self", ".", "spatial_att", "=", "SpatialGate", "(", "gate_channel", ")", "\n", "self", ".", "sigmoid", "=", "nn", ".", "Sigmoid", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.bam.BAM.execute": [[62, 65], ["bam.BAM.sigmoid", "bam.BAM.channel_att", "bam.BAM.spatial_att"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "att", "=", "1", "+", "self", ".", "sigmoid", "(", "self", ".", "channel_att", "(", "x", ")", "*", "self", ".", "spatial_att", "(", "x", ")", ")", "\n", "return", "att", "*", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.bam.main": [[67, 72], ["bam.BAM", "jittor.rand", "BAM.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "BAM", "(", "64", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.cbam.BasicConv.__init__": [[6, 14], ["jittor.Module.__init__", "jittor.Conv2d", "jittor.Conv2d", "jittor.BatchNorm2d", "jittor.BatchNorm2d", "jittor.ReLU", "jittor.ReLU"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "in_planes", ",", "out_planes", ",", "kernel_size", ",", "stride", "=", "1", ",", "padding", "=", "0", ",", "dilation", "=", "1", ",", "groups", "=", "1", ",", "relu", "=", "True", ",", "bn", "=", "True", ",", "bias", "=", "False", ")", ":", "\n", "        ", "super", "(", "BasicConv", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "out_channels", "=", "out_planes", "\n", "self", ".", "conv", "=", "nn", ".", "Conv2d", "(", "in_planes", ",", "out_planes", ",", "kernel_size", "=", "kernel_size", ",", "\n", "stride", "=", "stride", ",", "padding", "=", "padding", ",", "dilation", "=", "dilation", ",", "groups", "=", "groups", ",", "bias", "=", "bias", ")", "\n", "self", ".", "bn", "=", "nn", ".", "BatchNorm2d", "(", "out_planes", ",", "eps", "=", "1e-5", ",", "\n", "momentum", "=", "0.01", ",", "affine", "=", "True", ")", "if", "bn", "else", "None", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", ")", "if", "relu", "else", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.cbam.BasicConv.execute": [[15, 22], ["cbam.BasicConv.conv", "cbam.BasicConv.bn", "cbam.BasicConv.relu"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "conv", "(", "x", ")", "\n", "if", "self", ".", "bn", "is", "not", "None", ":", "\n", "            ", "x", "=", "self", ".", "bn", "(", "x", ")", "\n", "", "if", "self", ".", "relu", "is", "not", "None", ":", "\n", "            ", "x", "=", "self", ".", "relu", "(", "x", ")", "\n", "", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.cbam.ChannelGate.__init__": [[25, 41], ["jittor.Module.__init__", "jittor.AdaptiveAvgPool2d", "jittor.AdaptiveAvgPool2d", "jittor.Sequential", "jittor.Sequential", "jittor.AdaptiveMaxPool2d", "jittor.AdaptiveMaxPool2d", "jittor.Sequential", "jittor.Sequential", "jittor.Sigmoid", "jittor.Sigmoid", "jittor.Linear", "jittor.Linear", "jittor.ReLU", "jittor.ReLU", "jittor.Linear", "jittor.Linear", "jittor.Linear", "jittor.Linear", "jittor.ReLU", "jittor.ReLU", "jittor.Linear", "jittor.Linear"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "channel", ",", "reduction", "=", "16", ")", ":", "\n", "        ", "super", "(", "ChannelGate", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "avg_pool", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "1", ")", "\n", "self", ".", "fc_avg", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Linear", "(", "channel", ",", "channel", "//", "reduction", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ",", "\n", "nn", ".", "Linear", "(", "channel", "//", "reduction", ",", "channel", ",", "bias", "=", "False", ")", ",", "\n", ")", "\n", "self", ".", "max_pool", "=", "nn", ".", "AdaptiveMaxPool2d", "(", "1", ")", "\n", "self", ".", "fc_max", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Linear", "(", "channel", ",", "channel", "//", "reduction", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ",", "\n", "nn", ".", "Linear", "(", "channel", "//", "reduction", ",", "channel", ",", "bias", "=", "False", ")", ",", "\n", ")", "\n", "\n", "self", ".", "sigmoid", "=", "nn", ".", "Sigmoid", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.cbam.ChannelGate.execute": [[42, 52], ["x.size", "cbam.ChannelGate.avg_pool().view", "cbam.ChannelGate.fc_avg().view", "cbam.ChannelGate.max_pool().view", "cbam.ChannelGate.fc_max().view", "cbam.ChannelGate.sigmoid", "cbam.ChannelGate.expand_as", "cbam.ChannelGate.avg_pool", "cbam.ChannelGate.fc_avg", "cbam.ChannelGate.max_pool", "cbam.ChannelGate.fc_max"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "b", ",", "c", ",", "_", ",", "_", "=", "x", ".", "size", "(", ")", "\n", "y_avg", "=", "self", ".", "avg_pool", "(", "x", ")", ".", "view", "(", "b", ",", "c", ")", "\n", "y_avg", "=", "self", ".", "fc_avg", "(", "y_avg", ")", ".", "view", "(", "b", ",", "c", ",", "1", ",", "1", ")", "\n", "\n", "y_max", "=", "self", ".", "max_pool", "(", "x", ")", ".", "view", "(", "b", ",", "c", ")", "\n", "y_max", "=", "self", ".", "fc_max", "(", "y_max", ")", ".", "view", "(", "b", ",", "c", ",", "1", ",", "1", ")", "\n", "\n", "y", "=", "self", ".", "sigmoid", "(", "y_avg", "+", "y_avg", ")", "\n", "return", "x", "*", "y", ".", "expand_as", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.cbam.ChannelPool.__init__": [[55, 57], ["jittor.Module.__init__"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.cbam.ChannelPool.execute": [[58, 63], ["jittor.max().unsqueeze", "jittor.max().unsqueeze", "jittor.mean().unsqueeze", "jittor.mean().unsqueeze", "jittor.concat", "jittor.concat", "jittor.max", "jittor.max", "jittor.mean", "jittor.mean"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "x_max", "=", "jt", ".", "max", "(", "x", ",", "1", ")", ".", "unsqueeze", "(", "1", ")", "\n", "x_avg", "=", "jt", ".", "mean", "(", "x", ",", "1", ")", ".", "unsqueeze", "(", "1", ")", "\n", "x", "=", "jt", ".", "concat", "(", "[", "x_max", ",", "x_avg", "]", ",", "dim", "=", "1", ")", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.cbam.SpatialGate.__init__": [[66, 73], ["jittor.Module.__init__", "cbam.ChannelPool", "cbam.BasicConv", "jittor.Sigmoid", "jittor.Sigmoid"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", "SpatialGate", ",", "self", ")", ".", "__init__", "(", ")", "\n", "kernel_size", "=", "7", "\n", "self", ".", "compress", "=", "ChannelPool", "(", ")", "\n", "self", ".", "spatial", "=", "BasicConv", "(", "2", ",", "1", ",", "kernel_size", ",", "stride", "=", "1", ",", "padding", "=", "(", "\n", "kernel_size", "-", "1", ")", "//", "2", ",", "relu", "=", "False", ")", "\n", "self", ".", "sigmoid", "=", "nn", ".", "Sigmoid", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.cbam.SpatialGate.execute": [[74, 79], ["cbam.SpatialGate.compress", "cbam.SpatialGate.spatial", "cbam.SpatialGate.sigmoid"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "x_compress", "=", "self", ".", "compress", "(", "x", ")", "\n", "x_out", "=", "self", ".", "spatial", "(", "x_compress", ")", "\n", "scale", "=", "self", ".", "sigmoid", "(", "x_out", ")", "# broadcasting", "\n", "return", "x", "*", "scale", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.cbam.CBAM.__init__": [[82, 86], ["jittor.Module.__init__", "cbam.ChannelGate", "cbam.SpatialGate"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "gate_channels", ",", "reduction_ratio", "=", "16", ")", ":", "\n", "        ", "super", "(", "CBAM", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "ChannelGate", "=", "ChannelGate", "(", "gate_channels", ",", "reduction_ratio", ")", "\n", "self", ".", "SpatialGate", "=", "SpatialGate", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.cbam.CBAM.execute": [[87, 91], ["cbam.CBAM.ChannelGate", "cbam.CBAM.SpatialGate"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "x_out", "=", "self", ".", "ChannelGate", "(", "x", ")", "\n", "x_out", "=", "self", ".", "SpatialGate", "(", "x_out", ")", "\n", "return", "x_out", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.cbam.main": [[93, 98], ["cbam.CBAM", "jittor.rand", "CBAM.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "CBAM", "(", "64", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.triplet_attention.BasicConv.__init__": [[7, 38], ["jittor.nn.Module.__init__", "jittor.nn.Conv2d", "jittor.nn.BatchNorm2d", "jittor.nn.ReLU"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "\n", "self", ",", "\n", "in_planes", ",", "\n", "out_planes", ",", "\n", "kernel_size", ",", "\n", "stride", "=", "1", ",", "\n", "padding", "=", "0", ",", "\n", "dilation", "=", "1", ",", "\n", "groups", "=", "1", ",", "\n", "relu", "=", "True", ",", "\n", "bn", "=", "True", ",", "\n", "bias", "=", "False", ",", "\n", ")", ":", "\n", "        ", "super", "(", "BasicConv", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "out_channels", "=", "out_planes", "\n", "self", ".", "conv", "=", "nn", ".", "Conv2d", "(", "\n", "in_planes", ",", "\n", "out_planes", ",", "\n", "kernel_size", "=", "kernel_size", ",", "\n", "stride", "=", "stride", ",", "\n", "padding", "=", "padding", ",", "\n", "dilation", "=", "dilation", ",", "\n", "groups", "=", "groups", ",", "\n", "bias", "=", "bias", ",", "\n", ")", "\n", "self", ".", "bn", "=", "(", "\n", "nn", ".", "BatchNorm2d", "(", "out_planes", ",", "eps", "=", "1e-5", ",", "momentum", "=", "0.01", ",", "affine", "=", "True", ")", "\n", "if", "bn", "\n", "else", "None", "\n", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU", "(", ")", "if", "relu", "else", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.triplet_attention.BasicConv.execute": [[39, 46], ["triplet_attention.BasicConv.conv", "triplet_attention.BasicConv.bn", "triplet_attention.BasicConv.relu"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "x", "=", "self", ".", "conv", "(", "x", ")", "\n", "if", "self", ".", "bn", "is", "not", "None", ":", "\n", "            ", "x", "=", "self", ".", "bn", "(", "x", ")", "\n", "", "if", "self", ".", "relu", "is", "not", "None", ":", "\n", "            ", "x", "=", "self", ".", "relu", "(", "x", ")", "\n", "", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.triplet_attention.ZPool.execute": [[49, 52], ["jittor.concat", "x.max().unsqueeze", "x.mean().unsqueeze", "x.max", "x.mean"], "methods", ["None"], ["    ", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "jt", ".", "concat", "(", "\n", "(", "x", ".", "max", "(", "1", ")", ".", "unsqueeze", "(", "1", ")", ",", "x", ".", "mean", "(", "1", ")", ".", "unsqueeze", "(", "1", ")", ")", ",", "dim", "=", "1", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.triplet_attention.AttentionGate.__init__": [[56, 62], ["jittor.nn.Module.__init__", "triplet_attention.ZPool", "triplet_attention.BasicConv"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", "AttentionGate", ",", "self", ")", ".", "__init__", "(", ")", "\n", "kernel_size", "=", "7", "\n", "self", ".", "compress", "=", "ZPool", "(", ")", "\n", "self", ".", "conv", "=", "BasicConv", "(", "\n", "2", ",", "1", ",", "kernel_size", ",", "stride", "=", "1", ",", "padding", "=", "(", "kernel_size", "-", "1", ")", "//", "2", ",", "relu", "=", "False", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.triplet_attention.AttentionGate.execute": [[64, 69], ["triplet_attention.AttentionGate.compress", "triplet_attention.AttentionGate.conv", "triplet_attention.AttentionGate.sigmoid"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "x_compress", "=", "self", ".", "compress", "(", "x", ")", "\n", "x_out", "=", "self", ".", "conv", "(", "x_compress", ")", "\n", "scale", "=", "x_out", ".", "sigmoid", "(", ")", "\n", "return", "x", "*", "scale", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.triplet_attention.TripletAttention.__init__": [[72, 79], ["jittor.nn.Module.__init__", "triplet_attention.AttentionGate", "triplet_attention.AttentionGate", "triplet_attention.AttentionGate"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "no_spatial", "=", "False", ")", ":", "\n", "        ", "super", "(", "TripletAttention", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "cw", "=", "AttentionGate", "(", ")", "\n", "self", ".", "hc", "=", "AttentionGate", "(", ")", "\n", "self", ".", "no_spatial", "=", "no_spatial", "\n", "if", "not", "no_spatial", ":", "\n", "            ", "self", ".", "hw", "=", "AttentionGate", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.triplet_attention.TripletAttention.execute": [[80, 93], ["x.permute", "triplet_attention.TripletAttention.cw", "triplet_attention.TripletAttention.permute", "x.permute", "triplet_attention.TripletAttention.hc", "triplet_attention.TripletAttention.permute", "triplet_attention.TripletAttention.hw"], "methods", ["None"], ["", "", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "x_perm1", "=", "x", ".", "permute", "(", "0", ",", "2", ",", "1", ",", "3", ")", "\n", "x_out1", "=", "self", ".", "cw", "(", "x_perm1", ")", "\n", "x_out11", "=", "x_out1", ".", "permute", "(", "0", ",", "2", ",", "1", ",", "3", ")", "\n", "x_perm2", "=", "x", ".", "permute", "(", "0", ",", "3", ",", "2", ",", "1", ")", "\n", "x_out2", "=", "self", ".", "hc", "(", "x_perm2", ")", "\n", "x_out21", "=", "x_out2", ".", "permute", "(", "0", ",", "3", ",", "2", ",", "1", ")", "\n", "if", "not", "self", ".", "no_spatial", ":", "\n", "            ", "x_out", "=", "self", ".", "hw", "(", "x", ")", "\n", "x_out", "=", "1", "/", "3", "*", "(", "x_out", "+", "x_out11", "+", "x_out21", ")", "\n", "", "else", ":", "\n", "            ", "x_out", "=", "1", "/", "2", "*", "(", "x_out11", "+", "x_out21", ")", "\n", "", "return", "x_out", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.triplet_attention.main": [[95, 100], ["triplet_attention.TripletAttention", "jittor.ones", "TripletAttention.", "print", "jt.ones.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "TripletAttention", "(", ")", "\n", "input", "=", "jt", ".", "ones", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.strip_pooling_module.StripPooling.__init__": [[11, 45], ["jittor.nn.Module.__init__", "jittor.nn.AdaptiveAvgPool2d", "jittor.nn.AdaptiveAvgPool2d", "jittor.nn.AdaptiveAvgPool2d", "jittor.nn.AdaptiveAvgPool2d", "int", "jittor.nn.Sequential", "jittor.nn.Sequential", "jittor.nn.Sequential", "jittor.nn.Sequential", "jittor.nn.Sequential", "jittor.nn.Sequential", "jittor.nn.Sequential", "jittor.nn.Sequential", "jittor.nn.Sequential", "jittor.nn.Sequential", "jittor.nn.Conv2d", "norm_layer", "jittor.nn.ReLU", "jittor.nn.Conv2d", "norm_layer", "jittor.nn.ReLU", "jittor.nn.Conv2d", "norm_layer", "jittor.nn.Conv2d", "norm_layer", "jittor.nn.Conv2d", "norm_layer", "jittor.nn.Conv2d", "norm_layer", "jittor.nn.Conv2d", "norm_layer", "jittor.nn.Conv2d", "norm_layer", "jittor.nn.ReLU", "jittor.nn.Conv2d", "norm_layer", "jittor.nn.ReLU", "jittor.nn.Conv2d", "norm_layer"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["def", "__init__", "(", "self", ",", "in_channels", ",", "pool_size", ",", "norm_layer", ",", "up_kwargs", ")", ":", "\n", "        ", "super", "(", "StripPooling", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "pool1", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "pool_size", "[", "0", "]", ")", "\n", "self", ".", "pool2", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "pool_size", "[", "1", "]", ")", "\n", "self", ".", "pool3", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "(", "1", ",", "None", ")", ")", "\n", "self", ".", "pool4", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "(", "None", ",", "1", ")", ")", "\n", "\n", "inter_channels", "=", "int", "(", "in_channels", "/", "4", ")", "\n", "self", ".", "conv1_1", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "in_channels", ",", "inter_channels", ",", "1", ",", "bias", "=", "False", ")", ",", "\n", "norm_layer", "(", "inter_channels", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ")", "\n", "self", ".", "conv1_2", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "in_channels", ",", "inter_channels", ",", "1", ",", "bias", "=", "False", ")", ",", "\n", "norm_layer", "(", "inter_channels", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ")", "\n", "self", ".", "conv2_0", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "inter_channels", ",", "inter_channels", ",", "3", ",", "1", ",", "1", ",", "bias", "=", "False", ")", ",", "\n", "norm_layer", "(", "inter_channels", ")", ")", "\n", "self", ".", "conv2_1", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "inter_channels", ",", "inter_channels", ",", "3", ",", "1", ",", "1", ",", "bias", "=", "False", ")", ",", "\n", "norm_layer", "(", "inter_channels", ")", ")", "\n", "self", ".", "conv2_2", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "inter_channels", ",", "inter_channels", ",", "3", ",", "1", ",", "1", ",", "bias", "=", "False", ")", ",", "\n", "norm_layer", "(", "inter_channels", ")", ")", "\n", "self", ".", "conv2_3", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "inter_channels", ",", "inter_channels", ",", "(", "1", ",", "3", ")", ",", "1", ",", "(", "0", ",", "1", ")", ",", "bias", "=", "False", ")", ",", "\n", "norm_layer", "(", "inter_channels", ")", ")", "\n", "self", ".", "conv2_4", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "inter_channels", ",", "inter_channels", ",", "(", "3", ",", "1", ")", ",", "1", ",", "(", "1", ",", "0", ")", ",", "bias", "=", "False", ")", ",", "\n", "norm_layer", "(", "inter_channels", ")", ")", "\n", "self", ".", "conv2_5", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "inter_channels", ",", "inter_channels", ",", "3", ",", "1", ",", "1", ",", "bias", "=", "False", ")", ",", "\n", "norm_layer", "(", "inter_channels", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ")", "\n", "self", ".", "conv2_6", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "inter_channels", ",", "inter_channels", ",", "3", ",", "1", ",", "1", ",", "bias", "=", "False", ")", ",", "\n", "norm_layer", "(", "inter_channels", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ")", "\n", "self", ".", "conv3", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv2d", "(", "inter_channels", "*", "2", ",", "in_channels", ",", "1", ",", "bias", "=", "False", ")", ",", "\n", "norm_layer", "(", "in_channels", ")", ")", "\n", "# bilinear interpolate options", "\n", "self", ".", "_up_kwargs", "=", "up_kwargs", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.strip_pooling_module.StripPooling.execute": [[46, 63], ["x.size", "strip_pooling_module.StripPooling.conv1_1", "strip_pooling_module.StripPooling.conv1_2", "strip_pooling_module.StripPooling.conv2_0", "jittor.nn.interpolate", "jittor.nn.interpolate", "jittor.nn.interpolate", "jittor.nn.interpolate", "strip_pooling_module.StripPooling.conv2_5", "strip_pooling_module.StripPooling.conv2_6", "strip_pooling_module.StripPooling.conv3", "jittor.nn.relu", "strip_pooling_module.StripPooling.conv2_1", "strip_pooling_module.StripPooling.conv2_2", "strip_pooling_module.StripPooling.conv2_3", "strip_pooling_module.StripPooling.conv2_4", "jittor.nn.relu", "jittor.nn.relu", "jittor.concat", "strip_pooling_module.StripPooling.pool1", "strip_pooling_module.StripPooling.pool2", "strip_pooling_module.StripPooling.pool3", "strip_pooling_module.StripPooling.pool4"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "_", ",", "_", ",", "h", ",", "w", "=", "x", ".", "size", "(", ")", "\n", "x1", "=", "self", ".", "conv1_1", "(", "x", ")", "\n", "x2", "=", "self", ".", "conv1_2", "(", "x", ")", "\n", "x2_1", "=", "self", ".", "conv2_0", "(", "x1", ")", "\n", "x2_2", "=", "nn", ".", "interpolate", "(", "self", ".", "conv2_1", "(", "self", ".", "pool1", "(", "x1", ")", ")", ",", "\n", "(", "h", ",", "w", ")", ",", "**", "self", ".", "_up_kwargs", ")", "\n", "x2_3", "=", "nn", ".", "interpolate", "(", "self", ".", "conv2_2", "(", "self", ".", "pool2", "(", "x1", ")", ")", ",", "\n", "(", "h", ",", "w", ")", ",", "**", "self", ".", "_up_kwargs", ")", "\n", "x2_4", "=", "nn", ".", "interpolate", "(", "self", ".", "conv2_3", "(", "self", ".", "pool3", "(", "x2", ")", ")", ",", "\n", "(", "h", ",", "w", ")", ",", "**", "self", ".", "_up_kwargs", ")", "\n", "x2_5", "=", "nn", ".", "interpolate", "(", "self", ".", "conv2_4", "(", "self", ".", "pool4", "(", "x2", ")", ")", ",", "\n", "(", "h", ",", "w", ")", ",", "**", "self", ".", "_up_kwargs", ")", "\n", "x1", "=", "self", ".", "conv2_5", "(", "nn", ".", "relu", "(", "x2_1", "+", "x2_2", "+", "x2_3", ")", ")", "\n", "x2", "=", "self", ".", "conv2_6", "(", "nn", ".", "relu", "(", "x2_5", "+", "x2_4", ")", ")", "\n", "out", "=", "self", ".", "conv3", "(", "jt", ".", "concat", "(", "[", "x1", ",", "x2", "]", ",", "dim", "=", "1", ")", ")", "\n", "return", "nn", ".", "relu", "(", "x", "+", "out", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.strip_pooling_module.main": [[65, 71], ["strip_pooling_module.StripPooling", "jittor.rand", "StripPooling.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "StripPooling", "(", "\n", "64", ",", "(", "20", ",", "12", ")", ",", "nn", ".", "BatchNorm2d", ",", "{", "'mode'", ":", "'bilinear'", ",", "'align_corners'", ":", "True", "}", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.danet.DANetHead.__init__": [[7, 29], ["jittor.Module.__init__", "jittor.Sequential", "jittor.Sequential", "jittor.Sequential", "jittor.Sequential", "danet.PAM_Module", "danet.CAM_Module", "jittor.Sequential", "jittor.Sequential", "jittor.Sequential", "jittor.Sequential", "jittor.Sequential", "jittor.Sequential", "jittor.Conv", "jittor.Conv", "jittor.BatchNorm", "jittor.BatchNorm", "jittor.ReLU", "jittor.ReLU", "jittor.Conv", "jittor.Conv", "jittor.BatchNorm", "jittor.BatchNorm", "jittor.ReLU", "jittor.ReLU", "jittor.Conv", "jittor.Conv", "jittor.BatchNorm", "jittor.BatchNorm", "jittor.ReLU", "jittor.ReLU", "jittor.Conv", "jittor.Conv", "jittor.BatchNorm", "jittor.BatchNorm", "jittor.ReLU", "jittor.ReLU", "jittor.Dropout", "jittor.Dropout", "jittor.Conv", "jittor.Conv"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "in_channels", ",", "out_channels", ")", ":", "\n", "        ", "super", "(", "DANetHead", ",", "self", ")", ".", "__init__", "(", ")", "\n", "inter_channels", "=", "in_channels", "//", "4", "\n", "self", ".", "conv5a", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv", "(", "in_channels", ",", "inter_channels", ",", "3", ",", "padding", "=", "1", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm", "(", "inter_channels", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ")", "\n", "\n", "self", ".", "conv5c", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv", "(", "in_channels", ",", "inter_channels", ",", "3", ",", "padding", "=", "1", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm", "(", "inter_channels", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ")", "\n", "\n", "self", ".", "sa", "=", "PAM_Module", "(", "inter_channels", ")", "\n", "self", ".", "sc", "=", "CAM_Module", "(", "inter_channels", ")", "\n", "self", ".", "conv51", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv", "(", "inter_channels", ",", "inter_channels", ",", "3", ",", "padding", "=", "1", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm", "(", "inter_channels", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ")", "\n", "self", ".", "conv52", "=", "nn", ".", "Sequential", "(", "nn", ".", "Conv", "(", "inter_channels", ",", "inter_channels", ",", "3", ",", "padding", "=", "1", ",", "bias", "=", "False", ")", ",", "\n", "nn", ".", "BatchNorm", "(", "inter_channels", ")", ",", "\n", "nn", ".", "ReLU", "(", ")", ")", "\n", "\n", "self", ".", "conv8", "=", "nn", ".", "Sequential", "(", "nn", ".", "Dropout", "(", "\n", "0.1", ",", "False", ")", ",", "nn", ".", "Conv", "(", "inter_channels", ",", "out_channels", ",", "1", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.danet.DANetHead.execute": [[30, 45], ["danet.DANetHead.conv5a", "danet.DANetHead.sa", "danet.DANetHead.conv51", "danet.DANetHead.conv5c", "danet.DANetHead.sc", "danet.DANetHead.conv52", "danet.DANetHead.conv8"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "\n", "        ", "feat1", "=", "self", ".", "conv5a", "(", "x", ")", "\n", "sa_feat", "=", "self", ".", "sa", "(", "feat1", ")", "\n", "sa_conv", "=", "self", ".", "conv51", "(", "sa_feat", ")", "\n", "\n", "feat2", "=", "self", ".", "conv5c", "(", "x", ")", "\n", "sc_feat", "=", "self", ".", "sc", "(", "feat2", ")", "\n", "sc_conv", "=", "self", ".", "conv52", "(", "sc_feat", ")", "\n", "\n", "feat_sum", "=", "sa_conv", "+", "sc_conv", "\n", "\n", "sasc_output", "=", "self", ".", "conv8", "(", "feat_sum", ")", "\n", "\n", "return", "sasc_output", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.danet.PAM_Module.__init__": [[51, 64], ["jittor.Module.__init__", "jittor.Conv", "jittor.Conv", "jittor.Conv", "jittor.Conv", "jittor.Conv", "jittor.Conv", "jittor.zeros", "jittor.zeros", "jittor.Softmax", "jittor.Softmax"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["def", "__init__", "(", "self", ",", "in_dim", ")", ":", "\n", "        ", "super", "(", "PAM_Module", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "chanel_in", "=", "in_dim", "\n", "\n", "self", ".", "query_conv", "=", "nn", ".", "Conv", "(", "\n", "in_channels", "=", "in_dim", ",", "out_channels", "=", "in_dim", "//", "8", ",", "kernel_size", "=", "1", ")", "\n", "self", ".", "key_conv", "=", "nn", ".", "Conv", "(", "\n", "in_channels", "=", "in_dim", ",", "out_channels", "=", "in_dim", "//", "8", ",", "kernel_size", "=", "1", ")", "\n", "self", ".", "value_conv", "=", "nn", ".", "Conv", "(", "\n", "in_channels", "=", "in_dim", ",", "out_channels", "=", "in_dim", ",", "kernel_size", "=", "1", ")", "\n", "self", ".", "gamma", "=", "jt", ".", "zeros", "(", "1", ")", "\n", "\n", "self", ".", "softmax", "=", "nn", ".", "Softmax", "(", "dim", "=", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.danet.PAM_Module.execute": [[65, 86], ["x.size", "danet.PAM_Module.query_conv().reshape().transpose", "danet.PAM_Module.key_conv().reshape", "jittor.bmm", "jittor.bmm", "danet.PAM_Module.softmax", "danet.PAM_Module.value_conv().reshape", "jittor.bmm", "jittor.bmm", "out.reshape.reshape.reshape", "danet.PAM_Module.transpose", "danet.PAM_Module.query_conv().reshape", "danet.PAM_Module.key_conv", "danet.PAM_Module.value_conv", "danet.PAM_Module.query_conv"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "\"\"\"\n            inputs :\n                x : input feature maps( B X C X H X W)\n            returns :\n                out : attention value + input feature\n                attention: B X (HxW) X (HxW)\n        \"\"\"", "\n", "m_batchsize", ",", "C", ",", "height", ",", "width", "=", "x", ".", "size", "(", ")", "\n", "proj_query", "=", "self", ".", "query_conv", "(", "x", ")", ".", "reshape", "(", "\n", "m_batchsize", ",", "-", "1", ",", "width", "*", "height", ")", ".", "transpose", "(", "0", ",", "2", ",", "1", ")", "\n", "proj_key", "=", "self", ".", "key_conv", "(", "x", ")", ".", "reshape", "(", "m_batchsize", ",", "-", "1", ",", "width", "*", "height", ")", "\n", "energy", "=", "nn", ".", "bmm", "(", "proj_query", ",", "proj_key", ")", "\n", "attention", "=", "self", ".", "softmax", "(", "energy", ")", "\n", "proj_value", "=", "self", ".", "value_conv", "(", "x", ")", ".", "reshape", "(", "m_batchsize", ",", "-", "1", ",", "width", "*", "height", ")", "\n", "\n", "out", "=", "nn", ".", "bmm", "(", "proj_value", ",", "attention", ".", "transpose", "(", "0", ",", "2", ",", "1", ")", ")", "\n", "out", "=", "out", ".", "reshape", "(", "m_batchsize", ",", "C", ",", "height", ",", "width", ")", "\n", "\n", "out", "=", "self", ".", "gamma", "*", "out", "+", "x", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.danet.CAM_Module.__init__": [[91, 96], ["jittor.Module.__init__", "jittor.zeros", "jittor.zeros", "jittor.Softmax", "jittor.Softmax"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["def", "__init__", "(", "self", ",", "in_dim", ")", ":", "\n", "        ", "super", "(", "CAM_Module", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "chanel_in", "=", "in_dim", "\n", "self", ".", "gamma", "=", "jt", ".", "zeros", "(", "1", ")", "\n", "self", ".", "softmax", "=", "nn", ".", "Softmax", "(", "dim", "=", "-", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.danet.CAM_Module.execute": [[97, 118], ["x.size", "x.reshape", "x.reshape().transpose", "jittor.bmm", "jittor.bmm", "danet.CAM_Module.softmax", "x.reshape", "jittor.bmm", "jittor.bmm", "out.reshape.reshape.reshape", "x.reshape"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "\"\"\"\n            inputs :\n                x : input feature maps( B X C X H X W)\n            returns :\n                out : attention value + input feature\n                attention: B X C X C\n        \"\"\"", "\n", "m_batchsize", ",", "C", ",", "height", ",", "width", "=", "x", ".", "size", "(", ")", "\n", "proj_query", "=", "x", ".", "reshape", "(", "m_batchsize", ",", "C", ",", "-", "1", ")", "\n", "proj_key", "=", "x", ".", "reshape", "(", "m_batchsize", ",", "C", ",", "-", "1", ")", ".", "transpose", "(", "0", ",", "2", ",", "1", ")", "\n", "energy", "=", "nn", ".", "bmm", "(", "proj_query", ",", "proj_key", ")", "\n", "#energy_new = jt.max(energy, -1, keepdim=True)[0].expand_as(energy)-energy", "\n", "attention", "=", "self", ".", "softmax", "(", "energy", ")", "\n", "proj_value", "=", "x", ".", "reshape", "(", "m_batchsize", ",", "C", ",", "-", "1", ")", "\n", "\n", "out", "=", "nn", ".", "bmm", "(", "attention", ",", "proj_value", ")", "\n", "out", "=", "out", ".", "reshape", "(", "m_batchsize", ",", "C", ",", "height", ",", "width", ")", "\n", "\n", "out", "=", "self", ".", "gamma", "*", "out", "+", "x", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.danet.main": [[120, 125], ["danet.DANetHead", "jittor.rand", "DANetHead.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "DANetHead", "(", "64", ",", "64", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.scnet.SCConv.__init__": [[7, 27], ["jittor.nn.Module.__init__", "jittor.nn.Sequential", "jittor.nn.Sequential", "jittor.nn.Sequential", "jittor.nn.AvgPool2d", "jittor.nn.Conv2d", "norm_layer", "jittor.nn.Conv2d", "norm_layer", "jittor.nn.Conv2d", "norm_layer"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "inplanes", ",", "planes", ",", "stride", ",", "padding", ",", "dilation", ",", "groups", ",", "pooling_r", ",", "norm_layer", ")", ":", "\n", "        ", "super", "(", "SCConv", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "k2", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "AvgPool2d", "(", "kernel_size", "=", "pooling_r", ",", "stride", "=", "pooling_r", ")", ",", "\n", "nn", ".", "Conv2d", "(", "inplanes", ",", "planes", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "\n", "padding", "=", "padding", ",", "dilation", "=", "dilation", ",", "\n", "groups", "=", "groups", ",", "bias", "=", "False", ")", ",", "\n", "norm_layer", "(", "planes", ")", ",", "\n", ")", "\n", "self", ".", "k3", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "inplanes", ",", "planes", ",", "kernel_size", "=", "3", ",", "stride", "=", "1", ",", "\n", "padding", "=", "padding", ",", "dilation", "=", "dilation", ",", "\n", "groups", "=", "groups", ",", "bias", "=", "False", ")", ",", "\n", "norm_layer", "(", "planes", ")", ",", "\n", ")", "\n", "self", ".", "k4", "=", "nn", ".", "Sequential", "(", "\n", "nn", ".", "Conv2d", "(", "inplanes", ",", "planes", ",", "kernel_size", "=", "3", ",", "stride", "=", "stride", ",", "\n", "padding", "=", "padding", ",", "dilation", "=", "dilation", ",", "\n", "groups", "=", "groups", ",", "bias", "=", "False", ")", ",", "\n", "norm_layer", "(", "planes", ")", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.scnet.SCConv.execute": [[29, 38], ["jittor.sigmoid", "jittor.multiply", "scnet.SCConv.k4", "jittor.add", "scnet.SCConv.k3", "jittor.nn.interpolate", "scnet.SCConv.k2", "identity.size"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "identity", "=", "x", "\n", "\n", "out", "=", "jt", ".", "sigmoid", "(", "jt", ".", "add", "(", "identity", ",", "nn", ".", "interpolate", "(", "\n", "self", ".", "k2", "(", "x", ")", ",", "identity", ".", "size", "(", ")", "[", "2", ":", "]", ")", ")", ")", "# sigmoid(identity + k2)", "\n", "out", "=", "jt", ".", "multiply", "(", "self", ".", "k3", "(", "x", ")", ",", "out", ")", "# k3 * sigmoid(identity + k2)", "\n", "out", "=", "self", ".", "k4", "(", "out", ")", "# k4", "\n", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.scnet.main": [[40, 46], ["scnet.SCConv", "jittor.rand", "SCConv.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "SCConv", "(", "64", ",", "64", ",", "stride", "=", "1", ",", "\n", "padding", "=", "2", ",", "dilation", "=", "2", ",", "groups", "=", "1", ",", "pooling_r", "=", "4", ",", "norm_layer", "=", "nn", ".", "BatchNorm2d", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.simam_module.simam_module.__init__": [[7, 12], ["jittor.nn.Module.__init__", "jittor.nn.Sigmoid"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "e_lambda", "=", "1e-4", ")", ":", "\n", "        ", "super", "(", "simam_module", ",", "self", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "activaton", "=", "nn", ".", "Sigmoid", "(", ")", "\n", "self", ".", "e_lambda", "=", "e_lambda", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.simam_module.simam_module.execute": [[13, 27], ["x.size", "simam_module.simam_module.activaton", "x.mean().mean", "x.mean", "x_minus_mu_square.sum().sum", "x_minus_mu_square.sum"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "\n", "        ", "b", ",", "c", ",", "h", ",", "w", "=", "x", ".", "size", "(", ")", "\n", "\n", "n", "=", "w", "*", "h", "-", "1", "\n", "\n", "x_minus_mu_square", "=", "(", "\n", "x", "-", "x", ".", "mean", "(", "dim", "=", "2", ",", "keepdims", "=", "True", ")", ".", "mean", "(", "dim", "=", "3", ",", "keepdims", "=", "True", ")", ")", ".", "pow", "(", "2", ")", "\n", "y", "=", "x_minus_mu_square", "/", "(", "4", "*", "(", "x_minus_mu_square", ".", "sum", "(", "dim", "=", "2", ",", "\n", "keepdims", "=", "True", ")", ".", "sum", "(", "dim", "=", "3", ",", "\n", "keepdims", "=", "True", ")", "/", "n", "+", "self", ".", "e_lambda", ")", ")", "+", "0.5", "\n", "\n", "return", "x", "*", "self", ".", "activaton", "(", "y", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.simam_module.main": [[29, 34], ["simam_module.simam_module", "jittor.ones", "simam_module.", "print", "jt.ones.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "simam_module", "(", ")", "\n", "input", "=", "jt", ".", "ones", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.coordatt_module.h_sigmoid.__init__": [[7, 10], ["jittor.nn.Module.__init__", "jittor.nn.ReLU6"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", "h_sigmoid", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "relu", "=", "nn", ".", "ReLU6", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.coordatt_module.h_sigmoid.execute": [[11, 13], ["coordatt_module.h_sigmoid.relu"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "self", ".", "relu", "(", "x", "+", "3", ")", "/", "6", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.coordatt_module.h_swish.__init__": [[16, 19], ["jittor.nn.Module.__init__", "coordatt_module.h_sigmoid"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ")", ":", "\n", "        ", "super", "(", "h_swish", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "sigmoid", "=", "h_sigmoid", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.coordatt_module.h_swish.execute": [[20, 22], ["coordatt_module.h_swish.sigmoid"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "return", "x", "*", "self", ".", "sigmoid", "(", "x", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.coordatt_module.CoordAtt.__init__": [[25, 38], ["jittor.nn.Module.__init__", "jittor.nn.AdaptiveAvgPool2d", "jittor.nn.AdaptiveAvgPool2d", "max", "jittor.nn.Conv2d", "jittor.nn.BatchNorm2d", "coordatt_module.h_swish", "jittor.nn.Conv2d", "jittor.nn.Conv2d"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "inp", ",", "oup", ",", "reduction", "=", "32", ")", ":", "\n", "        ", "super", "(", "CoordAtt", ",", "self", ")", ".", "__init__", "(", ")", "\n", "self", ".", "pool_h", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "(", "None", ",", "1", ")", ")", "\n", "self", ".", "pool_w", "=", "nn", ".", "AdaptiveAvgPool2d", "(", "(", "1", ",", "None", ")", ")", "\n", "\n", "mip", "=", "max", "(", "8", ",", "inp", "//", "reduction", ")", "\n", "\n", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "inp", ",", "mip", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ")", "\n", "self", ".", "bn1", "=", "nn", ".", "BatchNorm2d", "(", "mip", ")", "\n", "self", ".", "act", "=", "h_swish", "(", ")", "\n", "\n", "self", ".", "conv_h", "=", "nn", ".", "Conv2d", "(", "mip", ",", "oup", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ")", "\n", "self", ".", "conv_w", "=", "nn", ".", "Conv2d", "(", "mip", ",", "oup", ",", "kernel_size", "=", "1", ",", "stride", "=", "1", ",", "padding", "=", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.coordatt_module.CoordAtt.execute": [[39, 60], ["x.size", "coordatt_module.CoordAtt.pool_h", "coordatt_module.CoordAtt.pool_w().permute", "jittor.concat", "coordatt_module.CoordAtt.conv1", "coordatt_module.CoordAtt.bn1", "coordatt_module.CoordAtt.act", "jittor.split", "x_w.permute.permute.permute", "coordatt_module.CoordAtt.conv_h().sigmoid", "coordatt_module.CoordAtt.conv_w().sigmoid", "coordatt_module.CoordAtt.pool_w", "coordatt_module.CoordAtt.conv_h", "coordatt_module.CoordAtt.conv_w"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "identity", "=", "x", "\n", "\n", "n", ",", "c", ",", "h", ",", "w", "=", "x", ".", "size", "(", ")", "\n", "x_h", "=", "self", ".", "pool_h", "(", "x", ")", "\n", "x_w", "=", "self", ".", "pool_w", "(", "x", ")", ".", "permute", "(", "0", ",", "1", ",", "3", ",", "2", ")", "\n", "\n", "y", "=", "jt", ".", "concat", "(", "[", "x_h", ",", "x_w", "]", ",", "dim", "=", "2", ")", "\n", "y", "=", "self", ".", "conv1", "(", "y", ")", "\n", "y", "=", "self", ".", "bn1", "(", "y", ")", "\n", "y", "=", "self", ".", "act", "(", "y", ")", "\n", "\n", "x_h", ",", "x_w", "=", "jt", ".", "split", "(", "y", ",", "[", "h", ",", "w", "]", ",", "dim", "=", "2", ")", "\n", "x_w", "=", "x_w", ".", "permute", "(", "0", ",", "1", ",", "3", ",", "2", ")", "\n", "\n", "a_h", "=", "self", ".", "conv_h", "(", "x_h", ")", ".", "sigmoid", "(", ")", "\n", "a_w", "=", "self", ".", "conv_w", "(", "x_w", ")", ".", "sigmoid", "(", ")", "\n", "\n", "out", "=", "identity", "*", "a_w", "*", "a_h", "\n", "\n", "return", "out", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.coordatt_module.main": [[62, 67], ["coordatt_module.CoordAtt", "jittor.rand", "CoordAtt.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "CoordAtt", "(", "64", ",", "64", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.AttentionModule.__init__": [[7, 13], ["jittor.Module.__init__", "jittor.Conv2d", "jittor.Conv2d", "jittor.Conv2d", "jittor.Conv2d", "jittor.Conv2d", "jittor.Conv2d"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "dim", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "self", ".", "conv0", "=", "nn", ".", "Conv2d", "(", "dim", ",", "dim", ",", "5", ",", "padding", "=", "2", ",", "groups", "=", "dim", ")", "\n", "self", ".", "conv_spatial", "=", "nn", ".", "Conv2d", "(", "\n", "dim", ",", "dim", ",", "7", ",", "stride", "=", "1", ",", "padding", "=", "9", ",", "groups", "=", "dim", ",", "dilation", "=", "3", ")", "\n", "self", ".", "conv1", "=", "nn", ".", "Conv2d", "(", "dim", ",", "dim", ",", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.AttentionModule.execute": [[14, 21], ["x.clone", "lka.AttentionModule.conv0", "lka.AttentionModule.conv_spatial", "lka.AttentionModule.conv1"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "u", "=", "x", ".", "clone", "(", ")", "\n", "attn", "=", "self", ".", "conv0", "(", "x", ")", "\n", "attn", "=", "self", ".", "conv_spatial", "(", "attn", ")", "\n", "attn", "=", "self", ".", "conv1", "(", "attn", ")", "\n", "\n", "return", "u", "*", "attn", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__": [[24, 31], ["jittor.Module.__init__", "jittor.Conv2d", "jittor.Conv2d", "jittor.GELU", "jittor.GELU", "lka.AttentionModule", "jittor.Conv2d", "jittor.Conv2d"], "methods", ["home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.__init__"], ["    ", "def", "__init__", "(", "self", ",", "d_model", ")", ":", "\n", "        ", "super", "(", ")", ".", "__init__", "(", ")", "\n", "\n", "self", ".", "proj_1", "=", "nn", ".", "Conv2d", "(", "d_model", ",", "d_model", ",", "1", ")", "\n", "self", ".", "activation", "=", "nn", ".", "GELU", "(", ")", "\n", "self", ".", "spatial_gating_unit", "=", "AttentionModule", "(", "d_model", ")", "\n", "self", ".", "proj_2", "=", "nn", ".", "Conv2d", "(", "d_model", ",", "d_model", ",", "1", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.SpatialAttention.execute": [[32, 40], ["lka.SpatialAttention.clone", "lka.SpatialAttention.proj_1", "lka.SpatialAttention.activation", "lka.SpatialAttention.spatial_gating_unit", "lka.SpatialAttention.proj_2"], "methods", ["None"], ["", "def", "execute", "(", "self", ",", "x", ")", ":", "\n", "        ", "shorcut", "=", "x", ".", "clone", "(", ")", "\n", "x", "=", "self", ".", "proj_1", "(", "x", ")", "\n", "x", "=", "self", ".", "activation", "(", "x", ")", "\n", "x", "=", "self", ".", "spatial_gating_unit", "(", "x", ")", "\n", "x", "=", "self", ".", "proj_2", "(", "x", ")", "\n", "x", "=", "x", "+", "shorcut", "\n", "return", "x", "\n", "\n"]], "home.repos.pwc.inspect_result.MenghaoGuo_Awesome-Vision-Attentions.channel_spatial_attentions.lka.main": [[42, 47], ["lka.SpatialAttention", "jittor.rand", "SpatialAttention.", "print", "jt.rand.size", "attention_block.size"], "function", ["None"], ["", "", "def", "main", "(", ")", ":", "\n", "    ", "attention_block", "=", "SpatialAttention", "(", "64", ")", "\n", "input", "=", "jt", ".", "rand", "(", "[", "4", ",", "64", ",", "32", ",", "32", "]", ")", "\n", "output", "=", "attention_block", "(", "input", ")", "\n", "print", "(", "input", ".", "size", "(", ")", ",", "output", ".", "size", "(", ")", ")", "\n", "\n"]]}