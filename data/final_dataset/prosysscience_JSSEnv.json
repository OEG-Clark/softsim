{"home.repos.pwc.inspect_result.prosysscience_JSSEnv.JSSEnv.utils.assign_env_config": [[4, 17], ["kwargs.items", "hasattr", "setattr", "utils..env_config.items", "hasattr", "setattr", "type", "setattr", "setattr", "getattr", "type", "getattr"], "function", ["None"], ["def", "assign_env_config", "(", "self", ",", "kwargs", ")", ":", "\n", "    ", "for", "key", ",", "value", "in", "kwargs", ".", "items", "(", ")", ":", "\n", "        ", "setattr", "(", "self", ",", "key", ",", "value", ")", "\n", "", "if", "hasattr", "(", "self", ",", "\"env_config\"", ")", ":", "\n", "        ", "for", "key", ",", "value", "in", "self", ".", "env_config", ".", "items", "(", ")", ":", "\n", "# Check types based on default settings", "\n", "            ", "if", "hasattr", "(", "self", ",", "key", ")", ":", "\n", "                ", "if", "type", "(", "getattr", "(", "self", ",", "key", ")", ")", "==", "np", ".", "ndarray", ":", "\n", "                    ", "setattr", "(", "self", ",", "key", ",", "value", ")", "\n", "", "else", ":", "\n", "                    ", "setattr", "(", "self", ",", "key", ",", "type", "(", "getattr", "(", "self", ",", "key", ")", ")", "(", "value", ")", ")", "\n", "", "", "else", ":", "\n", "                ", "setattr", "(", "self", ",", "key", ",", "value", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.JSSEnv.utils.create_env": [[20, 30], ["type", "NotImplementedError"], "function", ["None"], ["", "", "", "", "def", "create_env", "(", "config", ",", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "    ", "if", "type", "(", "config", ")", "==", "dict", ":", "\n", "        ", "env_name", "=", "config", "[", "\"env\"", "]", "\n", "", "else", ":", "\n", "        ", "env_name", "=", "config", "\n", "", "if", "env_name", "==", "\"jss-v1\"", ":", "\n", "        ", "from", "JSSEnv", ".", "envs", ".", "jss_env", "import", "JssEnv", "as", "env", "\n", "", "else", ":", "\n", "        ", "raise", "NotImplementedError", "(", "\"Environment {} not recognized.\"", ".", "format", "(", "env_name", ")", ")", "\n", "", "return", "env", "\n", "", ""]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.__init__": [[13, 125], ["float", "float", "list", "list", "datetime.datetime.now().timestamp", "open", "open.readline", "open.close", "max", "gym.spaces.Discrete", "gym.spaces.Dict", "open.readline.split", "open.readline", "tuple", "datetime.datetime.now", "numpy.zeros", "numpy.zeros", "range", "gym.spaces.Box", "gym.spaces.Box", "str", "int", "int", "len", "max", "random.random", "pathlib.Path().parent.absolute", "len", "len", "int", "int", "range", "pathlib.Path"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "env_config", "=", "None", ")", ":", "\n", "        ", "\"\"\"\n        This environment model the job shop scheduling problem as a single agent problem:\n\n        -The actions correspond to a job allocation + one action for no allocation at this time step (NOPE action)\n\n        -We keep a time with next possible time steps\n\n        -Each time we allocate a job, the end of the job is added to the stack of time steps\n\n        -If we don't have a legal action (i.e. we can't allocate a job),\n        we automatically go to the next time step until we have a legal action\n\n        -\n        :param env_config: Ray dictionary of config parameter\n        \"\"\"", "\n", "if", "env_config", "is", "None", ":", "\n", "            ", "env_config", "=", "{", "\n", "\"instance_path\"", ":", "str", "(", "Path", "(", "__file__", ")", ".", "parent", ".", "absolute", "(", ")", ")", "\n", "+", "\"/instances/ta80\"", "\n", "}", "\n", "", "instance_path", "=", "env_config", "[", "\"instance_path\"", "]", "\n", "\n", "# initial values for variables used for instance", "\n", "self", ".", "jobs", "=", "0", "\n", "self", ".", "machines", "=", "0", "\n", "self", ".", "instance_matrix", "=", "None", "\n", "self", ".", "jobs_length", "=", "None", "\n", "self", ".", "max_time_op", "=", "0", "\n", "self", ".", "max_time_jobs", "=", "0", "\n", "self", ".", "nb_legal_actions", "=", "0", "\n", "self", ".", "nb_machine_legal", "=", "0", "\n", "# initial values for variables used for solving (to reinitialize when reset() is called)", "\n", "self", ".", "solution", "=", "None", "\n", "self", ".", "last_time_step", "=", "float", "(", "\"inf\"", ")", "\n", "self", ".", "current_time_step", "=", "float", "(", "\"inf\"", ")", "\n", "self", ".", "next_time_step", "=", "list", "(", ")", "\n", "self", ".", "next_jobs", "=", "list", "(", ")", "\n", "self", ".", "legal_actions", "=", "None", "\n", "self", ".", "time_until_available_machine", "=", "None", "\n", "self", ".", "time_until_finish_current_op_jobs", "=", "None", "\n", "self", ".", "todo_time_step_job", "=", "None", "\n", "self", ".", "total_perform_op_time_jobs", "=", "None", "\n", "self", ".", "needed_machine_jobs", "=", "None", "\n", "self", ".", "total_idle_time_jobs", "=", "None", "\n", "self", ".", "idle_time_jobs_last_op", "=", "None", "\n", "self", ".", "state", "=", "None", "\n", "self", ".", "illegal_actions", "=", "None", "\n", "self", ".", "action_illegal_no_op", "=", "None", "\n", "self", ".", "machine_legal", "=", "None", "\n", "# initial values for variables used for representation", "\n", "self", ".", "start_timestamp", "=", "datetime", ".", "datetime", ".", "now", "(", ")", ".", "timestamp", "(", ")", "\n", "self", ".", "sum_op", "=", "0", "\n", "instance_file", "=", "open", "(", "instance_path", ",", "\"r\"", ")", "\n", "line_str", "=", "instance_file", ".", "readline", "(", ")", "\n", "line_cnt", "=", "1", "\n", "while", "line_str", ":", "\n", "            ", "split_data", "=", "line_str", ".", "split", "(", ")", "\n", "if", "line_cnt", "==", "1", ":", "\n", "                ", "self", ".", "jobs", ",", "self", ".", "machines", "=", "int", "(", "split_data", "[", "0", "]", ")", ",", "int", "(", "split_data", "[", "1", "]", ")", "\n", "# matrix which store tuple of (machine, length of the job)", "\n", "self", ".", "instance_matrix", "=", "np", ".", "zeros", "(", "\n", "(", "self", ".", "jobs", ",", "self", ".", "machines", ")", ",", "dtype", "=", "(", "int", ",", "2", ")", "\n", ")", "\n", "# contains all the time to complete jobs", "\n", "self", ".", "jobs_length", "=", "np", ".", "zeros", "(", "self", ".", "jobs", ",", "dtype", "=", "int", ")", "\n", "", "else", ":", "\n", "# couple (machine, time)", "\n", "                ", "assert", "len", "(", "split_data", ")", "%", "2", "==", "0", "\n", "# each jobs must pass a number of operation equal to the number of machines", "\n", "assert", "len", "(", "split_data", ")", "/", "2", "==", "self", ".", "machines", "\n", "i", "=", "0", "\n", "# we get the actual jobs", "\n", "job_nb", "=", "line_cnt", "-", "2", "\n", "while", "i", "<", "len", "(", "split_data", ")", ":", "\n", "                    ", "machine", ",", "time", "=", "int", "(", "split_data", "[", "i", "]", ")", ",", "int", "(", "split_data", "[", "i", "+", "1", "]", ")", "\n", "self", ".", "instance_matrix", "[", "job_nb", "]", "[", "i", "//", "2", "]", "=", "(", "machine", ",", "time", ")", "\n", "self", ".", "max_time_op", "=", "max", "(", "self", ".", "max_time_op", ",", "time", ")", "\n", "self", ".", "jobs_length", "[", "job_nb", "]", "+=", "time", "\n", "self", ".", "sum_op", "+=", "time", "\n", "i", "+=", "2", "\n", "", "", "line_str", "=", "instance_file", ".", "readline", "(", ")", "\n", "line_cnt", "+=", "1", "\n", "", "instance_file", ".", "close", "(", ")", "\n", "self", ".", "max_time_jobs", "=", "max", "(", "self", ".", "jobs_length", ")", "\n", "# check the parsed data are correct", "\n", "assert", "self", ".", "max_time_op", ">", "0", "\n", "assert", "self", ".", "max_time_jobs", ">", "0", "\n", "assert", "self", ".", "jobs", ">", "0", "\n", "assert", "self", ".", "machines", ">", "1", ",", "\"We need at least 2 machines\"", "\n", "assert", "self", ".", "instance_matrix", "is", "not", "None", "\n", "# allocate a job + one to wait", "\n", "self", ".", "action_space", "=", "gym", ".", "spaces", ".", "Discrete", "(", "self", ".", "jobs", "+", "1", ")", "\n", "# used for plotting", "\n", "self", ".", "colors", "=", "[", "\n", "tuple", "(", "[", "random", ".", "random", "(", ")", "for", "_", "in", "range", "(", "3", ")", "]", ")", "for", "_", "in", "range", "(", "self", ".", "machines", ")", "\n", "]", "\n", "\"\"\"\n        matrix with the following attributes for each job:\n            -Legal job\n            -Left over time on the current op\n            -Current operation %\n            -Total left over time\n            -When next machine available\n            -Time since IDLE: 0 if not available, time otherwise\n            -Total IDLE time in the schedule\n        \"\"\"", "\n", "self", ".", "observation_space", "=", "gym", ".", "spaces", ".", "Dict", "(", "\n", "{", "\n", "\"action_mask\"", ":", "gym", ".", "spaces", ".", "Box", "(", "0", ",", "1", ",", "shape", "=", "(", "self", ".", "jobs", "+", "1", ",", ")", ")", ",", "\n", "\"real_obs\"", ":", "gym", ".", "spaces", ".", "Box", "(", "\n", "low", "=", "0.0", ",", "high", "=", "1.0", ",", "shape", "=", "(", "self", ".", "jobs", ",", "7", ")", ",", "dtype", "=", "float", "\n", ")", ",", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv._get_current_state_representation": [[129, 134], ["None"], "methods", ["None"], ["", "def", "_get_current_state_representation", "(", "self", ")", ":", "\n", "        ", "self", ".", "state", "[", ":", ",", "0", "]", "=", "self", ".", "legal_actions", "[", ":", "-", "1", "]", "\n", "return", "{", "\n", "\"real_obs\"", ":", "self", ".", "state", ",", "\n", "\"action_mask\"", ":", "self", ".", "legal_actions", ",", "\n", "}", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.get_legal_actions": [[136, 138], ["None"], "methods", ["None"], ["", "def", "get_legal_actions", "(", "self", ")", ":", "\n", "        ", "return", "self", ".", "legal_actions", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset": [[139, 168], ["list", "list", "numpy.ones", "numpy.full", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "numpy.zeros", "range", "numpy.zeros", "jss_env.JssEnv._get_current_state_representation"], "methods", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv._get_current_state_representation"], ["", "def", "reset", "(", "self", ")", ":", "\n", "        ", "self", ".", "current_time_step", "=", "0", "\n", "self", ".", "next_time_step", "=", "list", "(", ")", "\n", "self", ".", "next_jobs", "=", "list", "(", ")", "\n", "self", ".", "nb_legal_actions", "=", "self", ".", "jobs", "\n", "self", ".", "nb_machine_legal", "=", "0", "\n", "# represent all the legal actions", "\n", "self", ".", "legal_actions", "=", "np", ".", "ones", "(", "self", ".", "jobs", "+", "1", ",", "dtype", "=", "bool", ")", "\n", "self", ".", "legal_actions", "[", "self", ".", "jobs", "]", "=", "False", "\n", "# used to represent the solution", "\n", "self", ".", "solution", "=", "np", ".", "full", "(", "(", "self", ".", "jobs", ",", "self", ".", "machines", ")", ",", "-", "1", ",", "dtype", "=", "int", ")", "\n", "self", ".", "time_until_available_machine", "=", "np", ".", "zeros", "(", "self", ".", "machines", ",", "dtype", "=", "int", ")", "\n", "self", ".", "time_until_finish_current_op_jobs", "=", "np", ".", "zeros", "(", "self", ".", "jobs", ",", "dtype", "=", "int", ")", "\n", "self", ".", "todo_time_step_job", "=", "np", ".", "zeros", "(", "self", ".", "jobs", ",", "dtype", "=", "int", ")", "\n", "self", ".", "total_perform_op_time_jobs", "=", "np", ".", "zeros", "(", "self", ".", "jobs", ",", "dtype", "=", "int", ")", "\n", "self", ".", "needed_machine_jobs", "=", "np", ".", "zeros", "(", "self", ".", "jobs", ",", "dtype", "=", "int", ")", "\n", "self", ".", "total_idle_time_jobs", "=", "np", ".", "zeros", "(", "self", ".", "jobs", ",", "dtype", "=", "int", ")", "\n", "self", ".", "idle_time_jobs_last_op", "=", "np", ".", "zeros", "(", "self", ".", "jobs", ",", "dtype", "=", "int", ")", "\n", "self", ".", "illegal_actions", "=", "np", ".", "zeros", "(", "(", "self", ".", "machines", ",", "self", ".", "jobs", ")", ",", "dtype", "=", "bool", ")", "\n", "self", ".", "action_illegal_no_op", "=", "np", ".", "zeros", "(", "self", ".", "jobs", ",", "dtype", "=", "bool", ")", "\n", "self", ".", "machine_legal", "=", "np", ".", "zeros", "(", "self", ".", "machines", ",", "dtype", "=", "bool", ")", "\n", "for", "job", "in", "range", "(", "self", ".", "jobs", ")", ":", "\n", "            ", "needed_machine", "=", "self", ".", "instance_matrix", "[", "job", "]", "[", "0", "]", "[", "0", "]", "\n", "self", ".", "needed_machine_jobs", "[", "job", "]", "=", "needed_machine", "\n", "if", "not", "self", ".", "machine_legal", "[", "needed_machine", "]", ":", "\n", "                ", "self", ".", "machine_legal", "[", "needed_machine", "]", "=", "True", "\n", "self", ".", "nb_machine_legal", "+=", "1", "\n", "", "", "self", ".", "state", "=", "np", ".", "zeros", "(", "(", "self", ".", "jobs", ",", "7", ")", ",", "dtype", "=", "float", ")", "\n", "return", "self", ".", "_get_current_state_representation", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv._prioritization_non_final": [[169, 212], ["range", "list", "list", "float", "range", "len", "list.append", "min", "list.append"], "methods", ["None"], ["", "def", "_prioritization_non_final", "(", "self", ")", ":", "\n", "        ", "if", "self", ".", "nb_machine_legal", ">=", "1", ":", "\n", "            ", "for", "machine", "in", "range", "(", "self", ".", "machines", ")", ":", "\n", "                ", "if", "self", ".", "machine_legal", "[", "machine", "]", ":", "\n", "                    ", "final_job", "=", "list", "(", ")", "\n", "non_final_job", "=", "list", "(", ")", "\n", "min_non_final", "=", "float", "(", "\"inf\"", ")", "\n", "for", "job", "in", "range", "(", "self", ".", "jobs", ")", ":", "\n", "                        ", "if", "(", "\n", "self", ".", "needed_machine_jobs", "[", "job", "]", "==", "machine", "\n", "and", "self", ".", "legal_actions", "[", "job", "]", "\n", ")", ":", "\n", "                            ", "if", "self", ".", "todo_time_step_job", "[", "job", "]", "==", "(", "self", ".", "machines", "-", "1", ")", ":", "\n", "                                ", "final_job", ".", "append", "(", "job", ")", "\n", "", "else", ":", "\n", "                                ", "current_time_step_non_final", "=", "self", ".", "todo_time_step_job", "[", "\n", "job", "\n", "]", "\n", "time_needed_legal", "=", "self", ".", "instance_matrix", "[", "job", "]", "[", "\n", "current_time_step_non_final", "\n", "]", "[", "1", "]", "\n", "machine_needed_nextstep", "=", "self", ".", "instance_matrix", "[", "job", "]", "[", "\n", "current_time_step_non_final", "+", "1", "\n", "]", "[", "0", "]", "\n", "if", "(", "\n", "self", ".", "time_until_available_machine", "[", "\n", "machine_needed_nextstep", "\n", "]", "\n", "==", "0", "\n", ")", ":", "\n", "                                    ", "min_non_final", "=", "min", "(", "\n", "min_non_final", ",", "time_needed_legal", "\n", ")", "\n", "non_final_job", ".", "append", "(", "job", ")", "\n", "", "", "", "", "if", "len", "(", "non_final_job", ")", ">", "0", ":", "\n", "                        ", "for", "job", "in", "final_job", ":", "\n", "                            ", "current_time_step_final", "=", "self", ".", "todo_time_step_job", "[", "job", "]", "\n", "time_needed_legal", "=", "self", ".", "instance_matrix", "[", "job", "]", "[", "\n", "current_time_step_final", "\n", "]", "[", "1", "]", "\n", "if", "time_needed_legal", ">", "min_non_final", ":", "\n", "                                ", "self", ".", "legal_actions", "[", "job", "]", "=", "False", "\n", "self", ".", "nb_legal_actions", "-=", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv._check_no_op": [[213, 287], ["set", "range", "range", "len", "range", "min", "max", "set.add", "len", "set.add", "len"], "methods", ["None"], ["", "", "", "", "", "", "", "def", "_check_no_op", "(", "self", ")", ":", "\n", "        ", "self", ".", "legal_actions", "[", "self", ".", "jobs", "]", "=", "False", "\n", "if", "(", "\n", "len", "(", "self", ".", "next_time_step", ")", ">", "0", "\n", "and", "self", ".", "nb_machine_legal", "<=", "3", "\n", "and", "self", ".", "nb_legal_actions", "<=", "4", "\n", ")", ":", "\n", "            ", "machine_next", "=", "set", "(", ")", "\n", "next_time_step", "=", "self", ".", "next_time_step", "[", "0", "]", "\n", "max_horizon", "=", "self", ".", "current_time_step", "\n", "max_horizon_machine", "=", "[", "\n", "self", ".", "current_time_step", "+", "self", ".", "max_time_op", "for", "_", "in", "range", "(", "self", ".", "machines", ")", "\n", "]", "\n", "for", "job", "in", "range", "(", "self", ".", "jobs", ")", ":", "\n", "                ", "if", "self", ".", "legal_actions", "[", "job", "]", ":", "\n", "                    ", "time_step", "=", "self", ".", "todo_time_step_job", "[", "job", "]", "\n", "machine_needed", "=", "self", ".", "instance_matrix", "[", "job", "]", "[", "time_step", "]", "[", "0", "]", "\n", "time_needed", "=", "self", ".", "instance_matrix", "[", "job", "]", "[", "time_step", "]", "[", "1", "]", "\n", "end_job", "=", "self", ".", "current_time_step", "+", "time_needed", "\n", "if", "end_job", "<", "next_time_step", ":", "\n", "                        ", "return", "\n", "", "max_horizon_machine", "[", "machine_needed", "]", "=", "min", "(", "\n", "max_horizon_machine", "[", "machine_needed", "]", ",", "end_job", "\n", ")", "\n", "max_horizon", "=", "max", "(", "max_horizon", ",", "max_horizon_machine", "[", "machine_needed", "]", ")", "\n", "", "", "for", "job", "in", "range", "(", "self", ".", "jobs", ")", ":", "\n", "                ", "if", "not", "self", ".", "legal_actions", "[", "job", "]", ":", "\n", "                    ", "if", "(", "\n", "self", ".", "time_until_finish_current_op_jobs", "[", "job", "]", ">", "0", "\n", "and", "self", ".", "todo_time_step_job", "[", "job", "]", "+", "1", "<", "self", ".", "machines", "\n", ")", ":", "\n", "                        ", "time_step", "=", "self", ".", "todo_time_step_job", "[", "job", "]", "+", "1", "\n", "time_needed", "=", "(", "\n", "self", ".", "current_time_step", "\n", "+", "self", ".", "time_until_finish_current_op_jobs", "[", "job", "]", "\n", ")", "\n", "while", "(", "\n", "time_step", "<", "self", ".", "machines", "-", "1", "and", "max_horizon", ">", "time_needed", "\n", ")", ":", "\n", "                            ", "machine_needed", "=", "self", ".", "instance_matrix", "[", "job", "]", "[", "time_step", "]", "[", "0", "]", "\n", "if", "(", "\n", "max_horizon_machine", "[", "machine_needed", "]", ">", "time_needed", "\n", "and", "self", ".", "machine_legal", "[", "machine_needed", "]", "\n", ")", ":", "\n", "                                ", "machine_next", ".", "add", "(", "machine_needed", ")", "\n", "if", "len", "(", "machine_next", ")", "==", "self", ".", "nb_machine_legal", ":", "\n", "                                    ", "self", ".", "legal_actions", "[", "self", ".", "jobs", "]", "=", "True", "\n", "return", "\n", "", "", "time_needed", "+=", "self", ".", "instance_matrix", "[", "job", "]", "[", "time_step", "]", "[", "1", "]", "\n", "time_step", "+=", "1", "\n", "", "", "elif", "(", "\n", "not", "self", ".", "action_illegal_no_op", "[", "job", "]", "\n", "and", "self", ".", "todo_time_step_job", "[", "job", "]", "<", "self", ".", "machines", "\n", ")", ":", "\n", "                        ", "time_step", "=", "self", ".", "todo_time_step_job", "[", "job", "]", "\n", "machine_needed", "=", "self", ".", "instance_matrix", "[", "job", "]", "[", "time_step", "]", "[", "0", "]", "\n", "time_needed", "=", "(", "\n", "self", ".", "current_time_step", "\n", "+", "self", ".", "time_until_available_machine", "[", "machine_needed", "]", "\n", ")", "\n", "while", "(", "\n", "time_step", "<", "self", ".", "machines", "-", "1", "and", "max_horizon", ">", "time_needed", "\n", ")", ":", "\n", "                            ", "machine_needed", "=", "self", ".", "instance_matrix", "[", "job", "]", "[", "time_step", "]", "[", "0", "]", "\n", "if", "(", "\n", "max_horizon_machine", "[", "machine_needed", "]", ">", "time_needed", "\n", "and", "self", ".", "machine_legal", "[", "machine_needed", "]", "\n", ")", ":", "\n", "                                ", "machine_next", ".", "add", "(", "machine_needed", ")", "\n", "if", "len", "(", "machine_next", ")", "==", "self", ".", "nb_machine_legal", ":", "\n", "                                    ", "self", ".", "legal_actions", "[", "self", ".", "jobs", "]", "=", "True", "\n", "return", "\n", "", "", "time_needed", "+=", "self", ".", "instance_matrix", "[", "job", "]", "[", "time_step", "]", "[", "1", "]", "\n", "time_step", "+=", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step": [[288, 350], ["range", "jss_env.JssEnv._reward_scaler", "jss_env.JssEnv._prioritization_non_final", "jss_env.JssEnv._check_no_op", "range", "range", "jss_env.JssEnv._prioritization_non_final", "jss_env.JssEnv._check_no_op", "jss_env.JssEnv._reward_scaler", "jss_env.JssEnv.increase_time_step", "jss_env.JssEnv._get_current_state_representation", "jss_env.JssEnv._is_done", "bisect.bisect_left", "jss_env.JssEnv.next_time_step.insert", "jss_env.JssEnv.next_jobs.insert", "jss_env.JssEnv.increase_time_step", "jss_env.JssEnv._get_current_state_representation", "jss_env.JssEnv._is_done", "len"], "methods", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv._reward_scaler", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv._prioritization_non_final", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv._check_no_op", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv._prioritization_non_final", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv._check_no_op", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv._reward_scaler", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.increase_time_step", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv._get_current_state_representation", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv._is_done", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.increase_time_step", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv._get_current_state_representation", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv._is_done"], ["", "", "", "", "", "", "def", "step", "(", "self", ",", "action", ":", "int", ")", ":", "\n", "        ", "reward", "=", "0.0", "\n", "if", "action", "==", "self", ".", "jobs", ":", "\n", "            ", "self", ".", "nb_machine_legal", "=", "0", "\n", "self", ".", "nb_legal_actions", "=", "0", "\n", "for", "job", "in", "range", "(", "self", ".", "jobs", ")", ":", "\n", "                ", "if", "self", ".", "legal_actions", "[", "job", "]", ":", "\n", "                    ", "self", ".", "legal_actions", "[", "job", "]", "=", "False", "\n", "needed_machine", "=", "self", ".", "needed_machine_jobs", "[", "job", "]", "\n", "self", ".", "machine_legal", "[", "needed_machine", "]", "=", "False", "\n", "self", ".", "illegal_actions", "[", "needed_machine", "]", "[", "job", "]", "=", "True", "\n", "self", ".", "action_illegal_no_op", "[", "job", "]", "=", "True", "\n", "", "", "while", "self", ".", "nb_machine_legal", "==", "0", ":", "\n", "                ", "reward", "-=", "self", ".", "increase_time_step", "(", ")", "\n", "", "scaled_reward", "=", "self", ".", "_reward_scaler", "(", "reward", ")", "\n", "self", ".", "_prioritization_non_final", "(", ")", "\n", "self", ".", "_check_no_op", "(", ")", "\n", "return", "(", "\n", "self", ".", "_get_current_state_representation", "(", ")", ",", "\n", "scaled_reward", ",", "\n", "self", ".", "_is_done", "(", ")", ",", "\n", "{", "}", ",", "\n", ")", "\n", "", "else", ":", "\n", "            ", "current_time_step_job", "=", "self", ".", "todo_time_step_job", "[", "action", "]", "\n", "machine_needed", "=", "self", ".", "needed_machine_jobs", "[", "action", "]", "\n", "time_needed", "=", "self", ".", "instance_matrix", "[", "action", "]", "[", "current_time_step_job", "]", "[", "1", "]", "\n", "reward", "+=", "time_needed", "\n", "self", ".", "time_until_available_machine", "[", "machine_needed", "]", "=", "time_needed", "\n", "self", ".", "time_until_finish_current_op_jobs", "[", "action", "]", "=", "time_needed", "\n", "self", ".", "state", "[", "action", "]", "[", "1", "]", "=", "time_needed", "/", "self", ".", "max_time_op", "\n", "to_add_time_step", "=", "self", ".", "current_time_step", "+", "time_needed", "\n", "if", "to_add_time_step", "not", "in", "self", ".", "next_time_step", ":", "\n", "                ", "index", "=", "bisect", ".", "bisect_left", "(", "self", ".", "next_time_step", ",", "to_add_time_step", ")", "\n", "self", ".", "next_time_step", ".", "insert", "(", "index", ",", "to_add_time_step", ")", "\n", "self", ".", "next_jobs", ".", "insert", "(", "index", ",", "action", ")", "\n", "", "self", ".", "solution", "[", "action", "]", "[", "current_time_step_job", "]", "=", "self", ".", "current_time_step", "\n", "for", "job", "in", "range", "(", "self", ".", "jobs", ")", ":", "\n", "                ", "if", "(", "\n", "self", ".", "needed_machine_jobs", "[", "job", "]", "==", "machine_needed", "\n", "and", "self", ".", "legal_actions", "[", "job", "]", "\n", ")", ":", "\n", "                    ", "self", ".", "legal_actions", "[", "job", "]", "=", "False", "\n", "self", ".", "nb_legal_actions", "-=", "1", "\n", "", "", "self", ".", "nb_machine_legal", "-=", "1", "\n", "self", ".", "machine_legal", "[", "machine_needed", "]", "=", "False", "\n", "for", "job", "in", "range", "(", "self", ".", "jobs", ")", ":", "\n", "                ", "if", "self", ".", "illegal_actions", "[", "machine_needed", "]", "[", "job", "]", ":", "\n", "                    ", "self", ".", "action_illegal_no_op", "[", "job", "]", "=", "False", "\n", "self", ".", "illegal_actions", "[", "machine_needed", "]", "[", "job", "]", "=", "False", "\n", "# if we can't allocate new job in the current timestep, we pass to the next one", "\n", "", "", "while", "self", ".", "nb_machine_legal", "==", "0", "and", "len", "(", "self", ".", "next_time_step", ")", ">", "0", ":", "\n", "                ", "reward", "-=", "self", ".", "increase_time_step", "(", ")", "\n", "", "self", ".", "_prioritization_non_final", "(", ")", "\n", "self", ".", "_check_no_op", "(", ")", "\n", "# we then need to scale the reward", "\n", "scaled_reward", "=", "self", ".", "_reward_scaler", "(", "reward", ")", "\n", "return", "(", "\n", "self", ".", "_get_current_state_representation", "(", ")", ",", "\n", "scaled_reward", ",", "\n", "self", ".", "_is_done", "(", ")", ",", "\n", "{", "}", ",", "\n", ")", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv._reward_scaler": [[352, 354], ["None"], "methods", ["None"], ["", "", "def", "_reward_scaler", "(", "self", ",", "reward", ")", ":", "\n", "        ", "return", "reward", "/", "self", ".", "max_time_op", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.increase_time_step": [[355, 434], ["jss_env.JssEnv.next_time_step.pop", "jss_env.JssEnv.next_jobs.pop", "range", "range", "max", "min", "max", "range", "max"], "methods", ["None"], ["", "def", "increase_time_step", "(", "self", ")", ":", "\n", "        ", "\"\"\"\n        The heart of the logic his here, we need to increase every counter when we have a nope action called\n        and return the time elapsed\n        :return: time elapsed\n        \"\"\"", "\n", "hole_planning", "=", "0", "\n", "next_time_step_to_pick", "=", "self", ".", "next_time_step", ".", "pop", "(", "0", ")", "\n", "self", ".", "next_jobs", ".", "pop", "(", "0", ")", "\n", "difference", "=", "next_time_step_to_pick", "-", "self", ".", "current_time_step", "\n", "self", ".", "current_time_step", "=", "next_time_step_to_pick", "\n", "for", "job", "in", "range", "(", "self", ".", "jobs", ")", ":", "\n", "            ", "was_left_time", "=", "self", ".", "time_until_finish_current_op_jobs", "[", "job", "]", "\n", "if", "was_left_time", ">", "0", ":", "\n", "                ", "performed_op_job", "=", "min", "(", "difference", ",", "was_left_time", ")", "\n", "self", ".", "time_until_finish_current_op_jobs", "[", "job", "]", "=", "max", "(", "\n", "0", ",", "self", ".", "time_until_finish_current_op_jobs", "[", "job", "]", "-", "difference", "\n", ")", "\n", "self", ".", "state", "[", "job", "]", "[", "1", "]", "=", "(", "\n", "self", ".", "time_until_finish_current_op_jobs", "[", "job", "]", "/", "self", ".", "max_time_op", "\n", ")", "\n", "self", ".", "total_perform_op_time_jobs", "[", "job", "]", "+=", "performed_op_job", "\n", "self", ".", "state", "[", "job", "]", "[", "3", "]", "=", "(", "\n", "self", ".", "total_perform_op_time_jobs", "[", "job", "]", "/", "self", ".", "max_time_jobs", "\n", ")", "\n", "if", "self", ".", "time_until_finish_current_op_jobs", "[", "job", "]", "==", "0", ":", "\n", "                    ", "self", ".", "total_idle_time_jobs", "[", "job", "]", "+=", "difference", "-", "was_left_time", "\n", "self", ".", "state", "[", "job", "]", "[", "6", "]", "=", "self", ".", "total_idle_time_jobs", "[", "job", "]", "/", "self", ".", "sum_op", "\n", "self", ".", "idle_time_jobs_last_op", "[", "job", "]", "=", "difference", "-", "was_left_time", "\n", "self", ".", "state", "[", "job", "]", "[", "5", "]", "=", "self", ".", "idle_time_jobs_last_op", "[", "job", "]", "/", "self", ".", "sum_op", "\n", "self", ".", "todo_time_step_job", "[", "job", "]", "+=", "1", "\n", "self", ".", "state", "[", "job", "]", "[", "2", "]", "=", "self", ".", "todo_time_step_job", "[", "job", "]", "/", "self", ".", "machines", "\n", "if", "self", ".", "todo_time_step_job", "[", "job", "]", "<", "self", ".", "machines", ":", "\n", "                        ", "self", ".", "needed_machine_jobs", "[", "job", "]", "=", "self", ".", "instance_matrix", "[", "job", "]", "[", "\n", "self", ".", "todo_time_step_job", "[", "job", "]", "\n", "]", "[", "0", "]", "\n", "self", ".", "state", "[", "job", "]", "[", "4", "]", "=", "(", "\n", "max", "(", "\n", "0", ",", "\n", "self", ".", "time_until_available_machine", "[", "\n", "self", ".", "needed_machine_jobs", "[", "job", "]", "\n", "]", "\n", "-", "difference", ",", "\n", ")", "\n", "/", "self", ".", "max_time_op", "\n", ")", "\n", "", "else", ":", "\n", "                        ", "self", ".", "needed_machine_jobs", "[", "job", "]", "=", "-", "1", "\n", "# this allow to have 1 is job is over (not 0 because, 0 strongly indicate that the job is a", "\n", "# good candidate)", "\n", "self", ".", "state", "[", "job", "]", "[", "4", "]", "=", "1.0", "\n", "if", "self", ".", "legal_actions", "[", "job", "]", ":", "\n", "                            ", "self", ".", "legal_actions", "[", "job", "]", "=", "False", "\n", "self", ".", "nb_legal_actions", "-=", "1", "\n", "", "", "", "", "elif", "self", ".", "todo_time_step_job", "[", "job", "]", "<", "self", ".", "machines", ":", "\n", "                ", "self", ".", "total_idle_time_jobs", "[", "job", "]", "+=", "difference", "\n", "self", ".", "idle_time_jobs_last_op", "[", "job", "]", "+=", "difference", "\n", "self", ".", "state", "[", "job", "]", "[", "5", "]", "=", "self", ".", "idle_time_jobs_last_op", "[", "job", "]", "/", "self", ".", "sum_op", "\n", "self", ".", "state", "[", "job", "]", "[", "6", "]", "=", "self", ".", "total_idle_time_jobs", "[", "job", "]", "/", "self", ".", "sum_op", "\n", "", "", "for", "machine", "in", "range", "(", "self", ".", "machines", ")", ":", "\n", "            ", "if", "self", ".", "time_until_available_machine", "[", "machine", "]", "<", "difference", ":", "\n", "                ", "empty", "=", "difference", "-", "self", ".", "time_until_available_machine", "[", "machine", "]", "\n", "hole_planning", "+=", "empty", "\n", "", "self", ".", "time_until_available_machine", "[", "machine", "]", "=", "max", "(", "\n", "0", ",", "self", ".", "time_until_available_machine", "[", "machine", "]", "-", "difference", "\n", ")", "\n", "if", "self", ".", "time_until_available_machine", "[", "machine", "]", "==", "0", ":", "\n", "                ", "for", "job", "in", "range", "(", "self", ".", "jobs", ")", ":", "\n", "                    ", "if", "(", "\n", "self", ".", "needed_machine_jobs", "[", "job", "]", "==", "machine", "\n", "and", "not", "self", ".", "legal_actions", "[", "job", "]", "\n", "and", "not", "self", ".", "illegal_actions", "[", "machine", "]", "[", "job", "]", "\n", ")", ":", "\n", "                        ", "self", ".", "legal_actions", "[", "job", "]", "=", "True", "\n", "self", ".", "nb_legal_actions", "+=", "1", "\n", "if", "not", "self", ".", "machine_legal", "[", "machine", "]", ":", "\n", "                            ", "self", ".", "machine_legal", "[", "machine", "]", "=", "True", "\n", "self", ".", "nb_machine_legal", "+=", "1", "\n", "", "", "", "", "", "return", "hole_planning", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv._is_done": [[435, 440], ["None"], "methods", ["None"], ["", "def", "_is_done", "(", "self", ")", ":", "\n", "        ", "if", "self", ".", "nb_legal_actions", "==", "0", ":", "\n", "            ", "self", ".", "last_time_step", "=", "self", ".", "current_time_step", "\n", "return", "True", "\n", "", "return", "False", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.render": [[441, 471], ["range", "len", "pandas.DataFrame", "plotly.create_gantt", "plotly.create_gantt.update_yaxes", "dict", "datetime.datetime.fromtimestamp", "datetime.datetime.fromtimestamp", "pandas.DataFrame.append"], "methods", ["None"], ["", "def", "render", "(", "self", ",", "mode", "=", "\"human\"", ")", ":", "\n", "        ", "df", "=", "[", "]", "\n", "for", "job", "in", "range", "(", "self", ".", "jobs", ")", ":", "\n", "            ", "i", "=", "0", "\n", "while", "i", "<", "self", ".", "machines", "and", "self", ".", "solution", "[", "job", "]", "[", "i", "]", "!=", "-", "1", ":", "\n", "                ", "dict_op", "=", "dict", "(", ")", "\n", "dict_op", "[", "\"Task\"", "]", "=", "\"Job {}\"", ".", "format", "(", "job", ")", "\n", "start_sec", "=", "self", ".", "start_timestamp", "+", "self", ".", "solution", "[", "job", "]", "[", "i", "]", "\n", "finish_sec", "=", "start_sec", "+", "self", ".", "instance_matrix", "[", "job", "]", "[", "i", "]", "[", "1", "]", "\n", "dict_op", "[", "\"Start\"", "]", "=", "datetime", ".", "datetime", ".", "fromtimestamp", "(", "start_sec", ")", "\n", "dict_op", "[", "\"Finish\"", "]", "=", "datetime", ".", "datetime", ".", "fromtimestamp", "(", "finish_sec", ")", "\n", "dict_op", "[", "\"Resource\"", "]", "=", "\"Machine {}\"", ".", "format", "(", "\n", "self", ".", "instance_matrix", "[", "job", "]", "[", "i", "]", "[", "0", "]", "\n", ")", "\n", "df", ".", "append", "(", "dict_op", ")", "\n", "i", "+=", "1", "\n", "", "", "fig", "=", "None", "\n", "if", "len", "(", "df", ")", ">", "0", ":", "\n", "            ", "df", "=", "pd", ".", "DataFrame", "(", "df", ")", "\n", "fig", "=", "ff", ".", "create_gantt", "(", "\n", "df", ",", "\n", "index_col", "=", "\"Resource\"", ",", "\n", "colors", "=", "self", ".", "colors", ",", "\n", "show_colorbar", "=", "True", ",", "\n", "group_tasks", "=", "True", ",", "\n", ")", "\n", "fig", ".", "update_yaxes", "(", "\n", "autorange", "=", "\"reversed\"", "\n", ")", "# otherwise tasks are listed from the bottom up", "\n", "", "return", "fig", "\n", "", "", ""]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.register": [[6, 8], ["registry.register"], "function", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.register"], ["def", "register", "(", "id", ",", "**", "kwargs", ")", ":", "\n", "    ", "return", "registry", ".", "register", "(", "id", ",", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.make": [[10, 12], ["registry.make"], "function", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.make"], ["", "def", "make", "(", "id", ",", "**", "kwargs", ")", ":", "\n", "    ", "return", "registry", ".", "make", "(", "id", ",", "**", "kwargs", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.spec": [[14, 16], ["registry.spec"], "function", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.spec"], ["", "def", "spec", "(", "id", ")", ":", "\n", "    ", "return", "registry", ".", "spec", "(", "id", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.tests.test_solutions.TestSolution.test_optimum_ta01": [[7, 77], ["gym.make", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "len", "len", "test_solutions.TestSolution.assertEqual", "test_solutions.TestSolution.assertEqual", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "range", "sum", "range", "len", "test_solutions.TestSolution.assertTrue", "gym.make.increase_time_step", "test_solutions.TestSolution.assertTrue", "len", "len", "test_solutions.TestSolution.assertTrue", "test_solutions.TestSolution.assertEqual", "gym.make.step", "len", "str", "sum", "pathlib.Path().parent.absolute", "pathlib.Path"], "methods", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.make", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.increase_time_step", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step"], ["    ", "def", "test_optimum_ta01", "(", "self", ")", ":", "\n", "# http://optimizizer.com/solution.php?name=ta01&UB=1231&problemclass=ta", "\n", "        ", "env", "=", "gym", ".", "make", "(", "\n", "\"jss-v1\"", ",", "\n", "env_config", "=", "{", "\n", "\"instance_path\"", ":", "f\"{str(Path(__file__).parent.absolute())}/../JSSEnv/envs/instances/ta01\"", "\n", "}", ",", "\n", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "# for every machine give the jobs to process in order for every machine", "\n", "solution_sequence", "=", "[", "\n", "[", "7", ",", "11", ",", "9", ",", "10", ",", "8", ",", "3", ",", "12", ",", "2", ",", "14", ",", "5", ",", "1", ",", "6", ",", "4", ",", "0", ",", "13", "]", ",", "\n", "[", "2", ",", "8", ",", "7", ",", "14", ",", "6", ",", "13", ",", "9", ",", "11", ",", "4", ",", "5", ",", "12", ",", "3", ",", "10", ",", "1", ",", "0", "]", ",", "\n", "[", "11", ",", "9", ",", "3", ",", "0", ",", "4", ",", "12", ",", "8", ",", "7", ",", "5", ",", "2", ",", "6", ",", "14", ",", "13", ",", "10", ",", "1", "]", ",", "\n", "[", "6", ",", "5", ",", "0", ",", "9", ",", "12", ",", "7", ",", "11", ",", "10", ",", "14", ",", "1", ",", "13", ",", "2", ",", "3", ",", "4", ",", "8", "]", ",", "\n", "[", "10", ",", "13", ",", "0", ",", "4", ",", "1", ",", "5", ",", "14", ",", "3", ",", "7", ",", "6", ",", "12", ",", "8", ",", "2", ",", "9", ",", "11", "]", ",", "\n", "[", "5", ",", "7", ",", "3", ",", "12", ",", "13", ",", "10", ",", "1", ",", "11", ",", "8", ",", "4", ",", "2", ",", "6", ",", "0", ",", "9", ",", "14", "]", ",", "\n", "[", "9", ",", "0", ",", "4", ",", "8", ",", "3", ",", "11", ",", "13", ",", "14", ",", "6", ",", "12", ",", "10", ",", "2", ",", "1", ",", "7", ",", "5", "]", ",", "\n", "[", "4", ",", "6", ",", "7", ",", "10", ",", "0", ",", "11", ",", "1", ",", "9", ",", "3", ",", "5", ",", "13", ",", "14", ",", "8", ",", "2", ",", "12", "]", ",", "\n", "[", "13", ",", "4", ",", "6", ",", "2", ",", "9", ",", "14", ",", "12", ",", "11", ",", "7", ",", "10", ",", "0", ",", "1", ",", "3", ",", "8", ",", "5", "]", ",", "\n", "[", "9", ",", "3", ",", "2", ",", "4", ",", "13", ",", "11", ",", "12", ",", "1", ",", "0", ",", "7", ",", "8", ",", "5", ",", "14", ",", "10", ",", "6", "]", ",", "\n", "[", "8", ",", "14", ",", "4", ",", "3", ",", "11", ",", "12", ",", "9", ",", "0", ",", "10", ",", "13", ",", "5", ",", "1", ",", "6", ",", "2", ",", "7", "]", ",", "\n", "[", "7", ",", "9", ",", "8", ",", "5", ",", "6", ",", "0", ",", "2", ",", "3", ",", "1", ",", "13", ",", "14", ",", "12", ",", "4", ",", "10", ",", "11", "]", ",", "\n", "[", "6", ",", "0", ",", "7", ",", "11", ",", "5", ",", "14", ",", "10", ",", "2", ",", "4", ",", "13", ",", "8", ",", "9", ",", "3", ",", "12", ",", "1", "]", ",", "\n", "[", "13", ",", "10", ",", "7", ",", "9", ",", "5", ",", "3", ",", "11", ",", "1", ",", "12", ",", "14", ",", "2", ",", "4", ",", "0", ",", "6", ",", "8", "]", ",", "\n", "[", "13", ",", "11", ",", "6", ",", "8", ",", "7", ",", "4", ",", "1", ",", "5", ",", "3", ",", "10", ",", "0", ",", "14", ",", "9", ",", "2", ",", "12", "]", ",", "\n", "]", "\n", "done", "=", "False", "\n", "job_nb", "=", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", "machine_nb", "=", "len", "(", "solution_sequence", ")", "\n", "index_machine", "=", "[", "0", "for", "_", "in", "range", "(", "machine_nb", ")", "]", "\n", "step_nb", "=", "0", "\n", "while", "not", "done", ":", "\n", "# if we haven't performed any action, we go to the next time step", "\n", "            ", "no_op", "=", "True", "\n", "for", "machine", "in", "range", "(", "len", "(", "solution_sequence", ")", ")", ":", "\n", "                ", "if", "done", ":", "\n", "                    ", "break", "\n", "", "if", "env", ".", "machine_legal", "[", "machine", "]", "and", "index_machine", "[", "machine", "]", "<", "job_nb", ":", "\n", "                    ", "action_to_do", "=", "solution_sequence", "[", "machine", "]", "[", "index_machine", "[", "machine", "]", "]", "\n", "if", "(", "\n", "env", ".", "needed_machine_jobs", "[", "action_to_do", "]", "==", "machine", "\n", "and", "env", ".", "legal_actions", "[", "action_to_do", "]", "\n", ")", ":", "\n", "                        ", "no_op", "=", "False", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "legal_actions", "[", "action_to_do", "]", ",", "\n", "\"We don't perform illegal actions\"", ",", "\n", ")", "\n", "self", ".", "assertEqual", "(", "\n", "sum", "(", "env", ".", "legal_actions", "[", ":", "-", "1", "]", ")", ",", "env", ".", "nb_legal_actions", "\n", ")", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "action_to_do", ")", "\n", "index_machine", "[", "machine", "]", "+=", "1", "\n", "step_nb", "+=", "1", "\n", "", "", "", "if", "no_op", "and", "not", "done", ":", "\n", "                ", "self", ".", "assertTrue", "(", "len", "(", "env", ".", "next_time_step", ")", ">", "0", ",", "\"step {}\"", ".", "format", "(", "step_nb", ")", ")", "\n", "previous_time_step", "=", "env", ".", "current_time_step", "\n", "env", ".", "increase_time_step", "(", ")", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "current_time_step", ">", "previous_time_step", ",", "\n", "\"we increase the time step\"", ",", "\n", ")", "\n", "", "", "self", ".", "assertEqual", "(", "\n", "sum", "(", "index_machine", ")", ",", "len", "(", "solution_sequence", ")", "*", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "1231", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.tests.test_solutions.TestSolution.test_optimum_ta41": [[78, 773], ["gym.make", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "len", "len", "test_solutions.TestSolution.assertEqual", "test_solutions.TestSolution.assertEqual", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "range", "sum", "range", "len", "test_solutions.TestSolution.assertTrue", "gym.make.step", "test_solutions.TestSolution.assertTrue", "len", "len", "test_solutions.TestSolution.assertTrue", "test_solutions.TestSolution.assertEqual", "gym.make.step", "len", "str", "sum", "pathlib.Path().parent.absolute", "pathlib.Path"], "methods", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.make", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step"], ["", "def", "test_optimum_ta41", "(", "self", ")", ":", "\n", "# http://optimizizer.com/solution.php?name=ta41&UB=2006&problemclass=ta", "\n", "        ", "env", "=", "gym", ".", "make", "(", "\n", "\"jss-v1\"", ",", "\n", "env_config", "=", "{", "\n", "\"instance_path\"", ":", "f\"{str(Path(__file__).parent.absolute())}/../JSSEnv/envs/instances/ta41\"", "\n", "}", ",", "\n", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "# for every machine give the jobs to process in order for every machine", "\n", "solution_sequence", "=", "[", "\n", "[", "\n", "9", ",", "\n", "21", ",", "\n", "27", ",", "\n", "23", ",", "\n", "5", ",", "\n", "8", ",", "\n", "10", ",", "\n", "11", ",", "\n", "3", ",", "\n", "16", ",", "\n", "1", ",", "\n", "19", ",", "\n", "13", ",", "\n", "24", ",", "\n", "17", ",", "\n", "18", ",", "\n", "2", ",", "\n", "15", ",", "\n", "25", ",", "\n", "22", ",", "\n", "28", ",", "\n", "6", ",", "\n", "29", ",", "\n", "20", ",", "\n", "0", ",", "\n", "26", ",", "\n", "14", ",", "\n", "7", ",", "\n", "4", ",", "\n", "12", ",", "\n", "]", ",", "\n", "[", "\n", "5", ",", "\n", "10", ",", "\n", "22", ",", "\n", "25", ",", "\n", "18", ",", "\n", "14", ",", "\n", "26", ",", "\n", "1", ",", "\n", "17", ",", "\n", "12", ",", "\n", "9", ",", "\n", "29", ",", "\n", "15", ",", "\n", "13", ",", "\n", "16", ",", "\n", "4", ",", "\n", "21", ",", "\n", "11", ",", "\n", "8", ",", "\n", "2", ",", "\n", "24", ",", "\n", "6", ",", "\n", "20", ",", "\n", "7", ",", "\n", "0", ",", "\n", "23", ",", "\n", "3", ",", "\n", "27", ",", "\n", "19", ",", "\n", "28", ",", "\n", "]", ",", "\n", "[", "\n", "6", ",", "\n", "9", ",", "\n", "1", ",", "\n", "20", ",", "\n", "4", ",", "\n", "26", ",", "\n", "12", ",", "\n", "5", ",", "\n", "11", ",", "\n", "2", ",", "\n", "8", ",", "\n", "21", ",", "\n", "16", ",", "\n", "29", ",", "\n", "17", ",", "\n", "13", ",", "\n", "15", ",", "\n", "7", ",", "\n", "24", ",", "\n", "0", ",", "\n", "25", ",", "\n", "22", ",", "\n", "27", ",", "\n", "23", ",", "\n", "19", ",", "\n", "3", ",", "\n", "18", ",", "\n", "28", ",", "\n", "14", ",", "\n", "10", ",", "\n", "]", ",", "\n", "[", "\n", "6", ",", "\n", "8", ",", "\n", "9", ",", "\n", "17", ",", "\n", "13", ",", "\n", "21", ",", "\n", "15", ",", "\n", "1", ",", "\n", "29", ",", "\n", "18", ",", "\n", "11", ",", "\n", "12", ",", "\n", "0", ",", "\n", "3", ",", "\n", "7", ",", "\n", "4", ",", "\n", "2", ",", "\n", "20", ",", "\n", "28", ",", "\n", "23", ",", "\n", "27", ",", "\n", "5", ",", "\n", "14", ",", "\n", "19", ",", "\n", "25", ",", "\n", "26", ",", "\n", "24", ",", "\n", "16", ",", "\n", "10", ",", "\n", "22", ",", "\n", "]", ",", "\n", "[", "\n", "14", ",", "\n", "15", ",", "\n", "22", ",", "\n", "10", ",", "\n", "1", ",", "\n", "13", ",", "\n", "19", ",", "\n", "12", ",", "\n", "7", ",", "\n", "5", ",", "\n", "4", ",", "\n", "9", ",", "\n", "2", ",", "\n", "26", ",", "\n", "16", ",", "\n", "3", ",", "\n", "28", ",", "\n", "0", ",", "\n", "29", ",", "\n", "8", ",", "\n", "21", ",", "\n", "11", ",", "\n", "24", ",", "\n", "20", ",", "\n", "23", ",", "\n", "18", ",", "\n", "25", ",", "\n", "27", ",", "\n", "6", ",", "\n", "17", ",", "\n", "]", ",", "\n", "[", "\n", "11", ",", "\n", "22", ",", "\n", "12", ",", "\n", "23", ",", "\n", "0", ",", "\n", "2", ",", "\n", "1", ",", "\n", "17", ",", "\n", "5", ",", "\n", "15", ",", "\n", "16", ",", "\n", "26", ",", "\n", "14", ",", "\n", "18", ",", "\n", "4", ",", "\n", "21", ",", "\n", "19", ",", "\n", "9", ",", "\n", "25", ",", "\n", "29", ",", "\n", "3", ",", "\n", "24", ",", "\n", "13", ",", "\n", "20", ",", "\n", "27", ",", "\n", "6", ",", "\n", "8", ",", "\n", "7", ",", "\n", "28", ",", "\n", "10", ",", "\n", "]", ",", "\n", "[", "\n", "11", ",", "\n", "4", ",", "\n", "24", ",", "\n", "17", ",", "\n", "22", ",", "\n", "20", ",", "\n", "21", ",", "\n", "1", ",", "\n", "19", ",", "\n", "29", ",", "\n", "12", ",", "\n", "9", ",", "\n", "5", ",", "\n", "14", ",", "\n", "0", ",", "\n", "18", ",", "\n", "8", ",", "\n", "3", ",", "\n", "15", ",", "\n", "2", ",", "\n", "28", ",", "\n", "25", ",", "\n", "7", ",", "\n", "10", ",", "\n", "13", ",", "\n", "23", ",", "\n", "16", ",", "\n", "27", ",", "\n", "26", ",", "\n", "6", ",", "\n", "]", ",", "\n", "[", "\n", "21", ",", "\n", "20", ",", "\n", "19", ",", "\n", "8", ",", "\n", "17", ",", "\n", "1", ",", "\n", "26", ",", "\n", "11", ",", "\n", "22", ",", "\n", "5", ",", "\n", "16", ",", "\n", "3", ",", "\n", "18", ",", "\n", "25", ",", "\n", "4", ",", "\n", "24", ",", "\n", "2", ",", "\n", "0", ",", "\n", "29", ",", "\n", "7", ",", "\n", "12", ",", "\n", "14", ",", "\n", "28", ",", "\n", "9", ",", "\n", "23", ",", "\n", "27", ",", "\n", "6", ",", "\n", "13", ",", "\n", "10", ",", "\n", "15", ",", "\n", "]", ",", "\n", "[", "\n", "4", ",", "\n", "2", ",", "\n", "19", ",", "\n", "14", ",", "\n", "3", ",", "\n", "9", ",", "\n", "27", ",", "\n", "1", ",", "\n", "13", ",", "\n", "15", ",", "\n", "22", ",", "\n", "5", ",", "\n", "11", ",", "\n", "21", ",", "\n", "16", ",", "\n", "6", ",", "\n", "7", ",", "\n", "26", ",", "\n", "0", ",", "\n", "28", ",", "\n", "17", ",", "\n", "24", ",", "\n", "10", ",", "\n", "20", ",", "\n", "25", ",", "\n", "29", ",", "\n", "12", ",", "\n", "18", ",", "\n", "8", ",", "\n", "23", ",", "\n", "]", ",", "\n", "[", "\n", "18", ",", "\n", "15", ",", "\n", "17", ",", "\n", "11", ",", "\n", "9", ",", "\n", "22", ",", "\n", "1", ",", "\n", "13", ",", "\n", "26", ",", "\n", "14", ",", "\n", "28", ",", "\n", "29", ",", "\n", "27", ",", "\n", "4", ",", "\n", "21", ",", "\n", "19", ",", "\n", "0", ",", "\n", "25", ",", "\n", "6", ",", "\n", "24", ",", "\n", "23", ",", "\n", "20", ",", "\n", "7", ",", "\n", "10", ",", "\n", "12", ",", "\n", "3", ",", "\n", "16", ",", "\n", "5", ",", "\n", "2", ",", "\n", "8", ",", "\n", "]", ",", "\n", "[", "\n", "22", ",", "\n", "8", ",", "\n", "5", ",", "\n", "13", ",", "\n", "16", ",", "\n", "11", ",", "\n", "25", ",", "\n", "26", ",", "\n", "7", ",", "\n", "6", ",", "\n", "14", ",", "\n", "21", ",", "\n", "18", ",", "\n", "10", ",", "\n", "9", ",", "\n", "12", ",", "\n", "24", ",", "\n", "0", ",", "\n", "1", ",", "\n", "19", ",", "\n", "23", ",", "\n", "4", ",", "\n", "15", ",", "\n", "27", ",", "\n", "3", ",", "\n", "2", ",", "\n", "28", ",", "\n", "20", ",", "\n", "17", ",", "\n", "29", ",", "\n", "]", ",", "\n", "[", "\n", "24", ",", "\n", "18", ",", "\n", "12", ",", "\n", "28", ",", "\n", "14", ",", "\n", "26", ",", "\n", "22", ",", "\n", "4", ",", "\n", "3", ",", "\n", "23", ",", "\n", "11", ",", "\n", "15", ",", "\n", "16", ",", "\n", "8", ",", "\n", "29", ",", "\n", "13", ",", "\n", "7", ",", "\n", "2", ",", "\n", "19", ",", "\n", "10", ",", "\n", "21", ",", "\n", "27", ",", "\n", "5", ",", "\n", "6", ",", "\n", "0", ",", "\n", "17", ",", "\n", "20", ",", "\n", "25", ",", "\n", "1", ",", "\n", "9", ",", "\n", "]", ",", "\n", "[", "\n", "7", ",", "\n", "21", ",", "\n", "1", ",", "\n", "22", ",", "\n", "25", ",", "\n", "9", ",", "\n", "5", ",", "\n", "16", ",", "\n", "4", ",", "\n", "11", ",", "\n", "27", ",", "\n", "20", ",", "\n", "6", ",", "\n", "12", ",", "\n", "13", ",", "\n", "0", ",", "\n", "15", ",", "\n", "17", ",", "\n", "19", ",", "\n", "14", ",", "\n", "29", ",", "\n", "2", ",", "\n", "23", ",", "\n", "24", ",", "\n", "28", ",", "\n", "8", ",", "\n", "10", ",", "\n", "26", ",", "\n", "3", ",", "\n", "18", ",", "\n", "]", ",", "\n", "[", "\n", "1", ",", "\n", "5", ",", "\n", "12", ",", "\n", "17", ",", "\n", "3", ",", "\n", "19", ",", "\n", "25", ",", "\n", "4", ",", "\n", "16", ",", "\n", "18", ",", "\n", "0", ",", "\n", "22", ",", "\n", "9", ",", "\n", "11", ",", "\n", "6", ",", "\n", "26", ",", "\n", "21", ",", "\n", "14", ",", "\n", "7", ",", "\n", "10", ",", "\n", "27", ",", "\n", "28", ",", "\n", "8", ",", "\n", "23", ",", "\n", "15", ",", "\n", "24", ",", "\n", "29", ",", "\n", "13", ",", "\n", "2", ",", "\n", "20", ",", "\n", "]", ",", "\n", "[", "\n", "23", ",", "\n", "8", ",", "\n", "14", ",", "\n", "26", ",", "\n", "24", ",", "\n", "12", ",", "\n", "1", ",", "\n", "16", ",", "\n", "17", ",", "\n", "2", ",", "\n", "15", ",", "\n", "3", ",", "\n", "28", ",", "\n", "11", ",", "\n", "20", ",", "\n", "0", ",", "\n", "5", ",", "\n", "22", ",", "\n", "7", ",", "\n", "10", ",", "\n", "6", ",", "\n", "19", ",", "\n", "25", ",", "\n", "29", ",", "\n", "21", ",", "\n", "13", ",", "\n", "18", ",", "\n", "9", ",", "\n", "4", ",", "\n", "27", ",", "\n", "]", ",", "\n", "[", "\n", "1", ",", "\n", "14", ",", "\n", "12", ",", "\n", "15", ",", "\n", "4", ",", "\n", "26", ",", "\n", "17", ",", "\n", "6", ",", "\n", "5", ",", "\n", "0", ",", "\n", "9", ",", "\n", "10", ",", "\n", "27", ",", "\n", "13", ",", "\n", "21", ",", "\n", "23", ",", "\n", "16", ",", "\n", "28", ",", "\n", "7", ",", "\n", "19", ",", "\n", "29", ",", "\n", "2", ",", "\n", "3", ",", "\n", "24", ",", "\n", "18", ",", "\n", "11", ",", "\n", "8", ",", "\n", "20", ",", "\n", "22", ",", "\n", "25", ",", "\n", "]", ",", "\n", "[", "\n", "29", ",", "\n", "21", ",", "\n", "6", ",", "\n", "20", ",", "\n", "4", ",", "\n", "24", ",", "\n", "17", ",", "\n", "26", ",", "\n", "9", ",", "\n", "15", ",", "\n", "5", ",", "\n", "18", ",", "\n", "14", ",", "\n", "16", ",", "\n", "19", ",", "\n", "27", ",", "\n", "8", ",", "\n", "11", ",", "\n", "28", ",", "\n", "10", ",", "\n", "2", ",", "\n", "25", ",", "\n", "0", ",", "\n", "13", ",", "\n", "7", ",", "\n", "12", ",", "\n", "1", ",", "\n", "23", ",", "\n", "22", ",", "\n", "3", ",", "\n", "]", ",", "\n", "[", "\n", "20", ",", "\n", "19", ",", "\n", "16", ",", "\n", "18", ",", "\n", "17", ",", "\n", "8", ",", "\n", "6", ",", "\n", "15", ",", "\n", "13", ",", "\n", "7", ",", "\n", "5", ",", "\n", "2", ",", "\n", "14", ",", "\n", "24", ",", "\n", "27", ",", "\n", "4", ",", "\n", "22", ",", "\n", "11", ",", "\n", "9", ",", "\n", "21", ",", "\n", "25", ",", "\n", "23", ",", "\n", "1", ",", "\n", "0", ",", "\n", "10", ",", "\n", "3", ",", "\n", "12", ",", "\n", "28", ",", "\n", "26", ",", "\n", "29", ",", "\n", "]", ",", "\n", "[", "\n", "22", ",", "\n", "28", ",", "\n", "15", ",", "\n", "25", ",", "\n", "24", ",", "\n", "27", ",", "\n", "2", ",", "\n", "16", ",", "\n", "5", ",", "\n", "17", ",", "\n", "29", ",", "\n", "21", ",", "\n", "14", ",", "\n", "19", ",", "\n", "3", ",", "\n", "13", ",", "\n", "12", ",", "\n", "6", ",", "\n", "20", ",", "\n", "8", ",", "\n", "1", ",", "\n", "4", ",", "\n", "7", ",", "\n", "23", ",", "\n", "26", ",", "\n", "18", ",", "\n", "11", ",", "\n", "0", ",", "\n", "10", ",", "\n", "9", ",", "\n", "]", ",", "\n", "[", "\n", "17", ",", "\n", "12", ",", "\n", "15", ",", "\n", "26", ",", "\n", "16", ",", "\n", "8", ",", "\n", "21", ",", "\n", "5", ",", "\n", "1", ",", "\n", "13", ",", "\n", "4", ",", "\n", "0", ",", "\n", "9", ",", "\n", "11", ",", "\n", "27", ",", "\n", "6", ",", "\n", "7", ",", "\n", "23", ",", "\n", "14", ",", "\n", "3", ",", "\n", "10", ",", "\n", "24", ",", "\n", "19", ",", "\n", "22", ",", "\n", "20", ",", "\n", "2", ",", "\n", "28", ",", "\n", "29", ",", "\n", "18", ",", "\n", "25", ",", "\n", "]", ",", "\n", "]", "\n", "done", "=", "False", "\n", "machine_nb", "=", "len", "(", "solution_sequence", ")", "\n", "job_nb", "=", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", "index_machine", "=", "[", "0", "for", "_", "in", "range", "(", "machine_nb", ")", "]", "\n", "step_nb", "=", "0", "\n", "while", "not", "done", ":", "\n", "# if we haven't performed any action, we go to the next time step", "\n", "            ", "no_op", "=", "True", "\n", "for", "machine", "in", "range", "(", "len", "(", "solution_sequence", ")", ")", ":", "\n", "                ", "if", "done", ":", "\n", "                    ", "break", "\n", "", "if", "env", ".", "machine_legal", "[", "machine", "]", "and", "index_machine", "[", "machine", "]", "<", "job_nb", ":", "\n", "                    ", "action_to_do", "=", "solution_sequence", "[", "machine", "]", "[", "index_machine", "[", "machine", "]", "]", "\n", "if", "(", "\n", "env", ".", "needed_machine_jobs", "[", "action_to_do", "]", "==", "machine", "\n", "and", "env", ".", "legal_actions", "[", "action_to_do", "]", "\n", ")", ":", "\n", "                        ", "no_op", "=", "False", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "legal_actions", "[", "action_to_do", "]", ",", "\n", "\"We don't perform illegal actions\"", ",", "\n", ")", "\n", "self", ".", "assertEqual", "(", "\n", "sum", "(", "env", ".", "legal_actions", "[", ":", "-", "1", "]", ")", ",", "env", ".", "nb_legal_actions", "\n", ")", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "action_to_do", ")", "\n", "index_machine", "[", "machine", "]", "+=", "1", "\n", "step_nb", "+=", "1", "\n", "", "", "", "if", "no_op", "and", "not", "done", ":", "\n", "                ", "self", ".", "assertTrue", "(", "len", "(", "env", ".", "next_time_step", ")", ">", "0", ",", "\"step {}\"", ".", "format", "(", "step_nb", ")", ")", "\n", "previous_time_step", "=", "env", ".", "current_time_step", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "env", ".", "jobs", ")", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "current_time_step", ">", "previous_time_step", ",", "\n", "\"we increase the time step\"", ",", "\n", ")", "\n", "", "", "self", ".", "assertEqual", "(", "\n", "sum", "(", "index_machine", ")", ",", "len", "(", "solution_sequence", ")", "*", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "2006", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.tests.test_solutions.TestSolution.test_optimum_ta42": [[774, 1469], ["gym.make", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "len", "len", "test_solutions.TestSolution.assertEqual", "test_solutions.TestSolution.assertEqual", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "range", "sum", "range", "len", "test_solutions.TestSolution.assertTrue", "gym.make.step", "test_solutions.TestSolution.assertTrue", "len", "len", "test_solutions.TestSolution.assertTrue", "test_solutions.TestSolution.assertEqual", "gym.make.step", "len", "str", "sum", "pathlib.Path().parent.absolute", "pathlib.Path"], "methods", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.make", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step"], ["", "def", "test_optimum_ta42", "(", "self", ")", ":", "\n", "# http://optimizizer.com/solution.php?name=ta42&UB=1939&problemclass=ta", "\n", "        ", "env", "=", "gym", ".", "make", "(", "\n", "\"jss-v1\"", ",", "\n", "env_config", "=", "{", "\n", "\"instance_path\"", ":", "f\"{str(Path(__file__).parent.absolute())}/../JSSEnv/envs/instances/ta42\"", "\n", "}", ",", "\n", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "# for every machine give the jobs to process in order for every machine", "\n", "solution_sequence", "=", "[", "\n", "[", "\n", "12", ",", "\n", "8", ",", "\n", "26", ",", "\n", "24", ",", "\n", "14", ",", "\n", "21", ",", "\n", "4", ",", "\n", "15", ",", "\n", "18", ",", "\n", "11", ",", "\n", "7", ",", "\n", "0", ",", "\n", "10", ",", "\n", "13", ",", "\n", "20", ",", "\n", "19", ",", "\n", "28", ",", "\n", "29", ",", "\n", "2", ",", "\n", "1", ",", "\n", "22", ",", "\n", "16", ",", "\n", "17", ",", "\n", "23", ",", "\n", "9", ",", "\n", "27", ",", "\n", "5", ",", "\n", "25", ",", "\n", "3", ",", "\n", "6", ",", "\n", "]", ",", "\n", "[", "\n", "14", ",", "\n", "9", ",", "\n", "1", ",", "\n", "23", ",", "\n", "4", ",", "\n", "20", ",", "\n", "6", ",", "\n", "21", ",", "\n", "26", ",", "\n", "7", ",", "\n", "28", ",", "\n", "3", ",", "\n", "2", ",", "\n", "16", ",", "\n", "27", ",", "\n", "18", ",", "\n", "29", ",", "\n", "0", ",", "\n", "11", ",", "\n", "24", ",", "\n", "5", ",", "\n", "13", ",", "\n", "19", ",", "\n", "17", ",", "\n", "12", ",", "\n", "25", ",", "\n", "15", ",", "\n", "8", ",", "\n", "22", ",", "\n", "10", ",", "\n", "]", ",", "\n", "[", "\n", "12", ",", "\n", "17", ",", "\n", "1", ",", "\n", "15", ",", "\n", "6", ",", "\n", "4", ",", "\n", "14", ",", "\n", "13", ",", "\n", "8", ",", "\n", "23", ",", "\n", "24", ",", "\n", "25", ",", "\n", "20", ",", "\n", "3", ",", "\n", "5", ",", "\n", "28", ",", "\n", "21", ",", "\n", "11", ",", "\n", "26", ",", "\n", "27", ",", "\n", "0", ",", "\n", "7", ",", "\n", "10", ",", "\n", "16", ",", "\n", "9", ",", "\n", "2", ",", "\n", "18", ",", "\n", "19", ",", "\n", "22", ",", "\n", "29", ",", "\n", "]", ",", "\n", "[", "\n", "24", ",", "\n", "6", ",", "\n", "1", ",", "\n", "4", ",", "\n", "9", ",", "\n", "11", ",", "\n", "0", ",", "\n", "15", ",", "\n", "28", ",", "\n", "16", ",", "\n", "25", ",", "\n", "14", ",", "\n", "29", ",", "\n", "10", ",", "\n", "27", ",", "\n", "5", ",", "\n", "13", ",", "\n", "20", ",", "\n", "26", ",", "\n", "22", ",", "\n", "8", ",", "\n", "17", ",", "\n", "18", ",", "\n", "3", ",", "\n", "21", ",", "\n", "19", ",", "\n", "23", ",", "\n", "2", ",", "\n", "7", ",", "\n", "12", ",", "\n", "]", ",", "\n", "[", "\n", "6", ",", "\n", "0", ",", "\n", "28", ",", "\n", "23", ",", "\n", "13", ",", "\n", "24", ",", "\n", "16", ",", "\n", "22", ",", "\n", "25", ",", "\n", "15", ",", "\n", "8", ",", "\n", "5", ",", "\n", "18", ",", "\n", "19", ",", "\n", "11", ",", "\n", "21", ",", "\n", "10", ",", "\n", "1", ",", "\n", "12", ",", "\n", "3", ",", "\n", "9", ",", "\n", "20", ",", "\n", "7", ",", "\n", "26", ",", "\n", "14", ",", "\n", "17", ",", "\n", "2", ",", "\n", "27", ",", "\n", "29", ",", "\n", "4", ",", "\n", "]", ",", "\n", "[", "\n", "11", ",", "\n", "12", ",", "\n", "0", ",", "\n", "28", ",", "\n", "29", ",", "\n", "24", ",", "\n", "20", ",", "\n", "10", ",", "\n", "8", ",", "\n", "25", ",", "\n", "16", ",", "\n", "26", ",", "\n", "23", ",", "\n", "5", ",", "\n", "1", ",", "\n", "13", ",", "\n", "27", ",", "\n", "6", ",", "\n", "9", ",", "\n", "2", ",", "\n", "22", ",", "\n", "21", ",", "\n", "7", ",", "\n", "14", ",", "\n", "15", ",", "\n", "18", ",", "\n", "17", ",", "\n", "3", ",", "\n", "4", ",", "\n", "19", ",", "\n", "]", ",", "\n", "[", "\n", "1", ",", "\n", "11", ",", "\n", "22", ",", "\n", "17", ",", "\n", "9", ",", "\n", "25", ",", "\n", "14", ",", "\n", "23", ",", "\n", "16", ",", "\n", "0", ",", "\n", "24", ",", "\n", "28", ",", "\n", "6", ",", "\n", "29", ",", "\n", "5", ",", "\n", "2", ",", "\n", "18", ",", "\n", "4", ",", "\n", "7", ",", "\n", "13", ",", "\n", "10", ",", "\n", "20", ",", "\n", "21", ",", "\n", "3", ",", "\n", "26", ",", "\n", "15", ",", "\n", "19", ",", "\n", "12", ",", "\n", "27", ",", "\n", "8", ",", "\n", "]", ",", "\n", "[", "\n", "22", ",", "\n", "3", ",", "\n", "4", ",", "\n", "16", ",", "\n", "8", ",", "\n", "6", ",", "\n", "1", ",", "\n", "25", ",", "\n", "20", ",", "\n", "12", ",", "\n", "18", ",", "\n", "10", ",", "\n", "7", ",", "\n", "14", ",", "\n", "17", ",", "\n", "28", ",", "\n", "19", ",", "\n", "29", ",", "\n", "21", ",", "\n", "26", ",", "\n", "24", ",", "\n", "0", ",", "\n", "15", ",", "\n", "13", ",", "\n", "9", ",", "\n", "5", ",", "\n", "23", ",", "\n", "11", ",", "\n", "27", ",", "\n", "2", ",", "\n", "]", ",", "\n", "[", "\n", "20", ",", "\n", "16", ",", "\n", "28", ",", "\n", "29", ",", "\n", "13", ",", "\n", "25", ",", "\n", "0", ",", "\n", "2", ",", "\n", "6", ",", "\n", "5", ",", "\n", "19", ",", "\n", "10", ",", "\n", "24", ",", "\n", "21", ",", "\n", "27", ",", "\n", "18", ",", "\n", "26", ",", "\n", "22", ",", "\n", "3", ",", "\n", "14", ",", "\n", "9", ",", "\n", "17", ",", "\n", "15", ",", "\n", "12", ",", "\n", "11", ",", "\n", "23", ",", "\n", "7", ",", "\n", "8", ",", "\n", "4", ",", "\n", "1", ",", "\n", "]", ",", "\n", "[", "\n", "23", ",", "\n", "9", ",", "\n", "11", ",", "\n", "8", ",", "\n", "15", ",", "\n", "12", ",", "\n", "14", ",", "\n", "24", ",", "\n", "16", ",", "\n", "28", ",", "\n", "5", ",", "\n", "25", ",", "\n", "29", ",", "\n", "6", ",", "\n", "20", ",", "\n", "18", ",", "\n", "19", ",", "\n", "3", ",", "\n", "2", ",", "\n", "21", ",", "\n", "27", ",", "\n", "10", ",", "\n", "26", ",", "\n", "1", ",", "\n", "22", ",", "\n", "13", ",", "\n", "4", ",", "\n", "0", ",", "\n", "7", ",", "\n", "17", ",", "\n", "]", ",", "\n", "[", "\n", "13", ",", "\n", "4", ",", "\n", "0", ",", "\n", "26", ",", "\n", "24", ",", "\n", "7", ",", "\n", "10", ",", "\n", "1", ",", "\n", "21", ",", "\n", "9", ",", "\n", "14", ",", "\n", "6", ",", "\n", "18", ",", "\n", "2", ",", "\n", "19", ",", "\n", "28", ",", "\n", "16", ",", "\n", "12", ",", "\n", "22", ",", "\n", "11", ",", "\n", "23", ",", "\n", "25", ",", "\n", "20", ",", "\n", "29", ",", "\n", "17", ",", "\n", "27", ",", "\n", "8", ",", "\n", "15", ",", "\n", "5", ",", "\n", "3", ",", "\n", "]", ",", "\n", "[", "\n", "9", ",", "\n", "28", ",", "\n", "29", ",", "\n", "1", ",", "\n", "23", ",", "\n", "20", ",", "\n", "24", ",", "\n", "18", ",", "\n", "16", ",", "\n", "26", ",", "\n", "10", ",", "\n", "8", ",", "\n", "6", ",", "\n", "0", ",", "\n", "19", ",", "\n", "12", ",", "\n", "25", ",", "\n", "4", ",", "\n", "5", ",", "\n", "13", ",", "\n", "7", ",", "\n", "14", ",", "\n", "15", ",", "\n", "21", ",", "\n", "27", ",", "\n", "11", ",", "\n", "3", ",", "\n", "17", ",", "\n", "2", ",", "\n", "22", ",", "\n", "]", ",", "\n", "[", "\n", "24", ",", "\n", "13", ",", "\n", "0", ",", "\n", "9", ",", "\n", "11", ",", "\n", "1", ",", "\n", "16", ",", "\n", "23", ",", "\n", "15", ",", "\n", "29", ",", "\n", "26", ",", "\n", "28", ",", "\n", "6", ",", "\n", "4", ",", "\n", "5", ",", "\n", "20", ",", "\n", "19", ",", "\n", "8", ",", "\n", "2", ",", "\n", "27", ",", "\n", "21", ",", "\n", "14", ",", "\n", "7", ",", "\n", "22", ",", "\n", "10", ",", "\n", "18", ",", "\n", "17", ",", "\n", "3", ",", "\n", "12", ",", "\n", "25", ",", "\n", "]", ",", "\n", "[", "\n", "17", ",", "\n", "6", ",", "\n", "25", ",", "\n", "1", ",", "\n", "21", ",", "\n", "28", ",", "\n", "13", ",", "\n", "16", ",", "\n", "9", ",", "\n", "26", ",", "\n", "10", ",", "\n", "27", ",", "\n", "15", ",", "\n", "29", ",", "\n", "2", ",", "\n", "24", ",", "\n", "0", ",", "\n", "14", ",", "\n", "8", ",", "\n", "4", ",", "\n", "20", ",", "\n", "18", ",", "\n", "19", ",", "\n", "5", ",", "\n", "3", ",", "\n", "23", ",", "\n", "22", ",", "\n", "11", ",", "\n", "7", ",", "\n", "12", ",", "\n", "]", ",", "\n", "[", "\n", "29", ",", "\n", "24", ",", "\n", "15", ",", "\n", "10", ",", "\n", "17", ",", "\n", "1", ",", "\n", "11", ",", "\n", "23", ",", "\n", "21", ",", "\n", "28", ",", "\n", "9", ",", "\n", "22", ",", "\n", "2", ",", "\n", "14", ",", "\n", "6", ",", "\n", "8", ",", "\n", "27", ",", "\n", "18", ",", "\n", "16", ",", "\n", "0", ",", "\n", "3", ",", "\n", "20", ",", "\n", "13", ",", "\n", "7", ",", "\n", "5", ",", "\n", "12", ",", "\n", "25", ",", "\n", "26", ",", "\n", "19", ",", "\n", "4", ",", "\n", "]", ",", "\n", "[", "\n", "6", ",", "\n", "18", ",", "\n", "2", ",", "\n", "14", ",", "\n", "21", ",", "\n", "11", ",", "\n", "24", ",", "\n", "0", ",", "\n", "29", ",", "\n", "22", ",", "\n", "13", ",", "\n", "27", ",", "\n", "20", ",", "\n", "23", ",", "\n", "1", ",", "\n", "16", ",", "\n", "7", ",", "\n", "15", ",", "\n", "3", ",", "\n", "12", ",", "\n", "9", ",", "\n", "28", ",", "\n", "26", ",", "\n", "10", ",", "\n", "4", ",", "\n", "5", ",", "\n", "8", ",", "\n", "19", ",", "\n", "17", ",", "\n", "25", ",", "\n", "]", ",", "\n", "[", "\n", "29", ",", "\n", "14", ",", "\n", "9", ",", "\n", "21", ",", "\n", "27", ",", "\n", "15", ",", "\n", "23", ",", "\n", "20", ",", "\n", "6", ",", "\n", "2", ",", "\n", "1", ",", "\n", "13", ",", "\n", "10", ",", "\n", "4", ",", "\n", "3", ",", "\n", "7", ",", "\n", "0", ",", "\n", "19", ",", "\n", "24", ",", "\n", "17", ",", "\n", "25", ",", "\n", "22", ",", "\n", "11", ",", "\n", "5", ",", "\n", "16", ",", "\n", "28", ",", "\n", "26", ",", "\n", "18", ",", "\n", "12", ",", "\n", "8", ",", "\n", "]", ",", "\n", "[", "\n", "6", ",", "\n", "16", ",", "\n", "8", ",", "\n", "2", ",", "\n", "11", ",", "\n", "4", ",", "\n", "23", ",", "\n", "14", ",", "\n", "13", ",", "\n", "29", ",", "\n", "28", ",", "\n", "19", ",", "\n", "20", ",", "\n", "22", ",", "\n", "7", ",", "\n", "1", ",", "\n", "21", ",", "\n", "3", ",", "\n", "24", ",", "\n", "15", ",", "\n", "0", ",", "\n", "27", ",", "\n", "5", ",", "\n", "9", ",", "\n", "12", ",", "\n", "26", ",", "\n", "10", ",", "\n", "18", ",", "\n", "25", ",", "\n", "17", ",", "\n", "]", ",", "\n", "[", "\n", "11", ",", "\n", "10", ",", "\n", "12", ",", "\n", "16", ",", "\n", "17", ",", "\n", "28", ",", "\n", "4", ",", "\n", "1", ",", "\n", "14", ",", "\n", "7", ",", "\n", "8", ",", "\n", "29", ",", "\n", "25", ",", "\n", "21", ",", "\n", "5", ",", "\n", "24", ",", "\n", "6", ",", "\n", "18", ",", "\n", "0", ",", "\n", "19", ",", "\n", "9", ",", "\n", "15", ",", "\n", "13", ",", "\n", "3", ",", "\n", "2", ",", "\n", "23", ",", "\n", "27", ",", "\n", "22", ",", "\n", "20", ",", "\n", "26", ",", "\n", "]", ",", "\n", "[", "\n", "10", ",", "\n", "6", ",", "\n", "14", ",", "\n", "16", ",", "\n", "18", ",", "\n", "29", ",", "\n", "12", ",", "\n", "20", ",", "\n", "1", ",", "\n", "0", ",", "\n", "27", ",", "\n", "13", ",", "\n", "25", ",", "\n", "11", ",", "\n", "28", ",", "\n", "22", ",", "\n", "21", ",", "\n", "15", ",", "\n", "26", ",", "\n", "5", ",", "\n", "8", ",", "\n", "9", ",", "\n", "19", ",", "\n", "17", ",", "\n", "3", ",", "\n", "7", ",", "\n", "4", ",", "\n", "2", ",", "\n", "24", ",", "\n", "23", ",", "\n", "]", ",", "\n", "]", "\n", "done", "=", "False", "\n", "machine_nb", "=", "len", "(", "solution_sequence", ")", "\n", "job_nb", "=", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", "index_machine", "=", "[", "0", "for", "_", "in", "range", "(", "machine_nb", ")", "]", "\n", "step_nb", "=", "0", "\n", "while", "not", "done", ":", "\n", "# if we haven't performed any action, we go to the next time step", "\n", "            ", "no_op", "=", "True", "\n", "for", "machine", "in", "range", "(", "len", "(", "solution_sequence", ")", ")", ":", "\n", "                ", "if", "done", ":", "\n", "                    ", "break", "\n", "", "if", "env", ".", "machine_legal", "[", "machine", "]", "and", "index_machine", "[", "machine", "]", "<", "job_nb", ":", "\n", "                    ", "action_to_do", "=", "solution_sequence", "[", "machine", "]", "[", "index_machine", "[", "machine", "]", "]", "\n", "if", "(", "\n", "env", ".", "needed_machine_jobs", "[", "action_to_do", "]", "==", "machine", "\n", "and", "env", ".", "legal_actions", "[", "action_to_do", "]", "\n", ")", ":", "\n", "                        ", "no_op", "=", "False", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "legal_actions", "[", "action_to_do", "]", ",", "\n", "\"We don't perform illegal actions\"", ",", "\n", ")", "\n", "self", ".", "assertEqual", "(", "\n", "sum", "(", "env", ".", "legal_actions", "[", ":", "-", "1", "]", ")", ",", "env", ".", "nb_legal_actions", "\n", ")", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "action_to_do", ")", "\n", "index_machine", "[", "machine", "]", "+=", "1", "\n", "step_nb", "+=", "1", "\n", "", "", "", "if", "no_op", "and", "not", "done", ":", "\n", "                ", "self", ".", "assertTrue", "(", "len", "(", "env", ".", "next_time_step", ")", ">", "0", ",", "\"step {}\"", ".", "format", "(", "step_nb", ")", ")", "\n", "previous_time_step", "=", "env", ".", "current_time_step", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "env", ".", "jobs", ")", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "current_time_step", ">", "previous_time_step", ",", "\n", "\"we increase the time step\"", ",", "\n", ")", "\n", "", "", "self", ".", "assertEqual", "(", "\n", "sum", "(", "index_machine", ")", ",", "len", "(", "solution_sequence", ")", "*", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "1939", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.tests.test_solutions.TestSolution.test_optimum_ta43": [[1470, 2165], ["gym.make", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "len", "len", "test_solutions.TestSolution.assertEqual", "test_solutions.TestSolution.assertEqual", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "range", "sum", "range", "len", "test_solutions.TestSolution.assertTrue", "gym.make.step", "test_solutions.TestSolution.assertTrue", "len", "len", "test_solutions.TestSolution.assertTrue", "test_solutions.TestSolution.assertEqual", "gym.make.step", "len", "str", "sum", "pathlib.Path().parent.absolute", "pathlib.Path"], "methods", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.make", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step"], ["", "def", "test_optimum_ta43", "(", "self", ")", ":", "\n", "# http://optimizizer.com/solution.php?name=ta43&UB=1846&problemclass=ta", "\n", "        ", "env", "=", "gym", ".", "make", "(", "\n", "\"jss-v1\"", ",", "\n", "env_config", "=", "{", "\n", "\"instance_path\"", ":", "f\"{str(Path(__file__).parent.absolute())}/../JSSEnv/envs/instances/ta43\"", "\n", "}", ",", "\n", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "# for every machine give the jobs to process in order for every machine", "\n", "solution_sequence", "=", "[", "\n", "[", "\n", "12", ",", "\n", "26", ",", "\n", "21", ",", "\n", "10", ",", "\n", "17", ",", "\n", "9", ",", "\n", "15", ",", "\n", "8", ",", "\n", "2", ",", "\n", "28", ",", "\n", "18", ",", "\n", "27", ",", "\n", "23", ",", "\n", "7", ",", "\n", "24", ",", "\n", "6", ",", "\n", "20", ",", "\n", "5", ",", "\n", "25", ",", "\n", "29", ",", "\n", "1", ",", "\n", "3", ",", "\n", "14", ",", "\n", "16", ",", "\n", "11", ",", "\n", "4", ",", "\n", "13", ",", "\n", "0", ",", "\n", "22", ",", "\n", "19", ",", "\n", "]", ",", "\n", "[", "\n", "9", ",", "\n", "11", ",", "\n", "3", ",", "\n", "5", ",", "\n", "10", ",", "\n", "2", ",", "\n", "23", ",", "\n", "6", ",", "\n", "13", ",", "\n", "1", ",", "\n", "19", ",", "\n", "28", ",", "\n", "24", ",", "\n", "18", ",", "\n", "26", ",", "\n", "8", ",", "\n", "14", ",", "\n", "15", ",", "\n", "0", ",", "\n", "21", ",", "\n", "17", ",", "\n", "7", ",", "\n", "16", ",", "\n", "22", ",", "\n", "27", ",", "\n", "4", ",", "\n", "12", ",", "\n", "20", ",", "\n", "25", ",", "\n", "29", ",", "\n", "]", ",", "\n", "[", "\n", "6", ",", "\n", "23", ",", "\n", "17", ",", "\n", "9", ",", "\n", "12", ",", "\n", "3", ",", "\n", "11", ",", "\n", "4", ",", "\n", "7", ",", "\n", "16", ",", "\n", "28", ",", "\n", "15", ",", "\n", "10", ",", "\n", "26", ",", "\n", "5", ",", "\n", "18", ",", "\n", "22", ",", "\n", "14", ",", "\n", "8", ",", "\n", "25", ",", "\n", "13", ",", "\n", "1", ",", "\n", "29", ",", "\n", "2", ",", "\n", "20", ",", "\n", "19", ",", "\n", "0", ",", "\n", "27", ",", "\n", "21", ",", "\n", "24", ",", "\n", "]", ",", "\n", "[", "\n", "17", ",", "\n", "28", ",", "\n", "0", ",", "\n", "8", ",", "\n", "19", ",", "\n", "3", ",", "\n", "13", ",", "\n", "10", ",", "\n", "15", ",", "\n", "14", ",", "\n", "27", ",", "\n", "25", ",", "\n", "26", ",", "\n", "23", ",", "\n", "11", ",", "\n", "12", ",", "\n", "21", ",", "\n", "29", ",", "\n", "16", ",", "\n", "9", ",", "\n", "1", ",", "\n", "6", ",", "\n", "4", ",", "\n", "20", ",", "\n", "18", ",", "\n", "7", ",", "\n", "2", ",", "\n", "24", ",", "\n", "5", ",", "\n", "22", ",", "\n", "]", ",", "\n", "[", "\n", "26", ",", "\n", "25", ",", "\n", "6", ",", "\n", "3", ",", "\n", "11", ",", "\n", "17", ",", "\n", "12", ",", "\n", "22", ",", "\n", "9", ",", "\n", "8", ",", "\n", "19", ",", "\n", "24", ",", "\n", "4", ",", "\n", "23", ",", "\n", "1", ",", "\n", "14", ",", "\n", "18", ",", "\n", "2", ",", "\n", "29", ",", "\n", "15", ",", "\n", "5", ",", "\n", "20", ",", "\n", "0", ",", "\n", "7", ",", "\n", "16", ",", "\n", "10", ",", "\n", "27", ",", "\n", "21", ",", "\n", "28", ",", "\n", "13", ",", "\n", "]", ",", "\n", "[", "\n", "4", ",", "\n", "26", ",", "\n", "22", ",", "\n", "5", ",", "\n", "13", ",", "\n", "28", ",", "\n", "6", ",", "\n", "0", ",", "\n", "9", ",", "\n", "21", ",", "\n", "8", ",", "\n", "17", ",", "\n", "7", ",", "\n", "10", ",", "\n", "25", ",", "\n", "2", ",", "\n", "27", ",", "\n", "14", ",", "\n", "3", ",", "\n", "15", ",", "\n", "20", ",", "\n", "29", ",", "\n", "16", ",", "\n", "23", ",", "\n", "11", ",", "\n", "24", ",", "\n", "1", ",", "\n", "19", ",", "\n", "12", ",", "\n", "18", ",", "\n", "]", ",", "\n", "[", "\n", "25", ",", "\n", "6", ",", "\n", "19", ",", "\n", "24", ",", "\n", "16", ",", "\n", "22", ",", "\n", "9", ",", "\n", "15", ",", "\n", "17", ",", "\n", "5", ",", "\n", "2", ",", "\n", "8", ",", "\n", "27", ",", "\n", "18", ",", "\n", "7", ",", "\n", "26", ",", "\n", "28", ",", "\n", "4", ",", "\n", "1", ",", "\n", "12", ",", "\n", "0", ",", "\n", "29", ",", "\n", "14", ",", "\n", "3", ",", "\n", "20", ",", "\n", "21", ",", "\n", "10", ",", "\n", "23", ",", "\n", "11", ",", "\n", "13", ",", "\n", "]", ",", "\n", "[", "\n", "29", ",", "\n", "6", ",", "\n", "25", ",", "\n", "9", ",", "\n", "27", ",", "\n", "1", ",", "\n", "24", ",", "\n", "7", ",", "\n", "13", ",", "\n", "19", ",", "\n", "26", ",", "\n", "11", ",", "\n", "4", ",", "\n", "20", ",", "\n", "12", ",", "\n", "10", ",", "\n", "16", ",", "\n", "3", ",", "\n", "22", ",", "\n", "0", ",", "\n", "21", ",", "\n", "15", ",", "\n", "23", ",", "\n", "8", ",", "\n", "2", ",", "\n", "14", ",", "\n", "5", ",", "\n", "18", ",", "\n", "28", ",", "\n", "17", ",", "\n", "]", ",", "\n", "[", "\n", "25", ",", "\n", "7", ",", "\n", "21", ",", "\n", "26", ",", "\n", "1", ",", "\n", "20", ",", "\n", "15", ",", "\n", "8", ",", "\n", "28", ",", "\n", "27", ",", "\n", "4", ",", "\n", "0", ",", "\n", "22", ",", "\n", "19", ",", "\n", "23", ",", "\n", "10", ",", "\n", "16", ",", "\n", "17", ",", "\n", "9", ",", "\n", "3", ",", "\n", "2", ",", "\n", "14", ",", "\n", "6", ",", "\n", "12", ",", "\n", "5", ",", "\n", "18", ",", "\n", "24", ",", "\n", "13", ",", "\n", "11", ",", "\n", "29", ",", "\n", "]", ",", "\n", "[", "\n", "5", ",", "\n", "10", ",", "\n", "12", ",", "\n", "15", ",", "\n", "28", ",", "\n", "26", ",", "\n", "21", ",", "\n", "23", ",", "\n", "17", ",", "\n", "27", ",", "\n", "16", ",", "\n", "19", ",", "\n", "8", ",", "\n", "11", ",", "\n", "1", ",", "\n", "4", ",", "\n", "6", ",", "\n", "2", ",", "\n", "20", ",", "\n", "0", ",", "\n", "9", ",", "\n", "22", ",", "\n", "29", ",", "\n", "3", ",", "\n", "13", ",", "\n", "7", ",", "\n", "14", ",", "\n", "25", ",", "\n", "18", ",", "\n", "24", ",", "\n", "]", ",", "\n", "[", "\n", "4", ",", "\n", "12", ",", "\n", "0", ",", "\n", "9", ",", "\n", "25", ",", "\n", "26", ",", "\n", "7", ",", "\n", "22", ",", "\n", "17", ",", "\n", "6", ",", "\n", "15", ",", "\n", "3", ",", "\n", "13", ",", "\n", "29", ",", "\n", "23", ",", "\n", "24", ",", "\n", "14", ",", "\n", "21", ",", "\n", "27", ",", "\n", "5", ",", "\n", "8", ",", "\n", "18", ",", "\n", "19", ",", "\n", "11", ",", "\n", "10", ",", "\n", "1", ",", "\n", "2", ",", "\n", "20", ",", "\n", "16", ",", "\n", "28", ",", "\n", "]", ",", "\n", "[", "\n", "28", ",", "\n", "3", ",", "\n", "13", ",", "\n", "11", ",", "\n", "2", ",", "\n", "15", ",", "\n", "5", ",", "\n", "26", ",", "\n", "24", ",", "\n", "17", ",", "\n", "23", ",", "\n", "27", ",", "\n", "4", ",", "\n", "12", ",", "\n", "29", ",", "\n", "20", ",", "\n", "18", ",", "\n", "14", ",", "\n", "16", ",", "\n", "25", ",", "\n", "7", ",", "\n", "1", ",", "\n", "9", ",", "\n", "6", ",", "\n", "10", ",", "\n", "19", ",", "\n", "0", ",", "\n", "22", ",", "\n", "8", ",", "\n", "21", ",", "\n", "]", ",", "\n", "[", "\n", "16", ",", "\n", "6", ",", "\n", "28", ",", "\n", "1", ",", "\n", "26", ",", "\n", "2", ",", "\n", "9", ",", "\n", "0", ",", "\n", "22", ",", "\n", "13", ",", "\n", "11", ",", "\n", "7", ",", "\n", "10", ",", "\n", "12", ",", "\n", "27", ",", "\n", "18", ",", "\n", "15", ",", "\n", "8", ",", "\n", "3", ",", "\n", "23", ",", "\n", "20", ",", "\n", "17", ",", "\n", "4", ",", "\n", "14", ",", "\n", "24", ",", "\n", "25", ",", "\n", "21", ",", "\n", "19", ",", "\n", "29", ",", "\n", "5", ",", "\n", "]", ",", "\n", "[", "\n", "23", ",", "\n", "7", ",", "\n", "4", ",", "\n", "6", ",", "\n", "10", ",", "\n", "19", ",", "\n", "21", ",", "\n", "16", ",", "\n", "28", ",", "\n", "26", ",", "\n", "9", ",", "\n", "25", ",", "\n", "5", ",", "\n", "15", ",", "\n", "22", ",", "\n", "8", ",", "\n", "17", ",", "\n", "3", ",", "\n", "13", ",", "\n", "27", ",", "\n", "2", ",", "\n", "11", ",", "\n", "12", ",", "\n", "20", ",", "\n", "24", ",", "\n", "14", ",", "\n", "18", ",", "\n", "0", ",", "\n", "29", ",", "\n", "1", ",", "\n", "]", ",", "\n", "[", "\n", "22", ",", "\n", "6", ",", "\n", "11", ",", "\n", "7", ",", "\n", "2", ",", "\n", "0", ",", "\n", "24", ",", "\n", "16", ",", "\n", "26", ",", "\n", "15", ",", "\n", "8", ",", "\n", "13", ",", "\n", "1", ",", "\n", "27", ",", "\n", "17", ",", "\n", "10", ",", "\n", "9", ",", "\n", "5", ",", "\n", "20", ",", "\n", "3", ",", "\n", "25", ",", "\n", "23", ",", "\n", "4", ",", "\n", "12", ",", "\n", "29", ",", "\n", "14", ",", "\n", "28", ",", "\n", "21", ",", "\n", "19", ",", "\n", "18", ",", "\n", "]", ",", "\n", "[", "\n", "21", ",", "\n", "3", ",", "\n", "17", ",", "\n", "28", ",", "\n", "4", ",", "\n", "6", ",", "\n", "25", ",", "\n", "24", ",", "\n", "26", ",", "\n", "8", ",", "\n", "22", ",", "\n", "13", ",", "\n", "27", ",", "\n", "9", ",", "\n", "15", ",", "\n", "2", ",", "\n", "0", ",", "\n", "1", ",", "\n", "5", ",", "\n", "12", ",", "\n", "14", ",", "\n", "23", ",", "\n", "18", ",", "\n", "20", ",", "\n", "11", ",", "\n", "19", ",", "\n", "16", ",", "\n", "7", ",", "\n", "29", ",", "\n", "10", ",", "\n", "]", ",", "\n", "[", "\n", "5", ",", "\n", "29", ",", "\n", "22", ",", "\n", "6", ",", "\n", "28", ",", "\n", "7", ",", "\n", "16", ",", "\n", "4", ",", "\n", "10", ",", "\n", "24", ",", "\n", "17", ",", "\n", "26", ",", "\n", "19", ",", "\n", "11", ",", "\n", "8", ",", "\n", "21", ",", "\n", "3", ",", "\n", "9", ",", "\n", "13", ",", "\n", "23", ",", "\n", "18", ",", "\n", "2", ",", "\n", "25", ",", "\n", "20", ",", "\n", "1", ",", "\n", "0", ",", "\n", "27", ",", "\n", "15", ",", "\n", "12", ",", "\n", "14", ",", "\n", "]", ",", "\n", "[", "\n", "16", ",", "\n", "22", ",", "\n", "13", ",", "\n", "0", ",", "\n", "23", ",", "\n", "9", ",", "\n", "28", ",", "\n", "3", ",", "\n", "8", ",", "\n", "1", ",", "\n", "18", ",", "\n", "17", ",", "\n", "4", ",", "\n", "6", ",", "\n", "12", ",", "\n", "5", ",", "\n", "15", ",", "\n", "24", ",", "\n", "2", ",", "\n", "29", ",", "\n", "21", ",", "\n", "11", ",", "\n", "19", ",", "\n", "14", ",", "\n", "20", ",", "\n", "25", ",", "\n", "7", ",", "\n", "26", ",", "\n", "27", ",", "\n", "10", ",", "\n", "]", ",", "\n", "[", "\n", "29", ",", "\n", "2", ",", "\n", "27", ",", "\n", "16", ",", "\n", "26", ",", "\n", "19", ",", "\n", "20", ",", "\n", "25", ",", "\n", "4", ",", "\n", "22", ",", "\n", "0", ",", "\n", "9", ",", "\n", "17", ",", "\n", "23", ",", "\n", "18", ",", "\n", "15", ",", "\n", "3", ",", "\n", "6", ",", "\n", "13", ",", "\n", "11", ",", "\n", "5", ",", "\n", "8", ",", "\n", "10", ",", "\n", "24", ",", "\n", "28", ",", "\n", "7", ",", "\n", "12", ",", "\n", "21", ",", "\n", "14", ",", "\n", "1", ",", "\n", "]", ",", "\n", "[", "\n", "23", ",", "\n", "9", ",", "\n", "22", ",", "\n", "19", ",", "\n", "28", ",", "\n", "4", ",", "\n", "14", ",", "\n", "7", ",", "\n", "25", ",", "\n", "27", ",", "\n", "1", ",", "\n", "15", ",", "\n", "16", ",", "\n", "17", ",", "\n", "26", ",", "\n", "5", ",", "\n", "24", ",", "\n", "10", ",", "\n", "6", ",", "\n", "13", ",", "\n", "8", ",", "\n", "2", ",", "\n", "12", ",", "\n", "20", ",", "\n", "18", ",", "\n", "29", ",", "\n", "21", ",", "\n", "3", ",", "\n", "0", ",", "\n", "11", ",", "\n", "]", ",", "\n", "]", "\n", "done", "=", "False", "\n", "machine_nb", "=", "len", "(", "solution_sequence", ")", "\n", "job_nb", "=", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", "index_machine", "=", "[", "0", "for", "_", "in", "range", "(", "machine_nb", ")", "]", "\n", "step_nb", "=", "0", "\n", "while", "not", "done", ":", "\n", "# if we haven't performed any action, we go to the next time step", "\n", "            ", "no_op", "=", "True", "\n", "for", "machine", "in", "range", "(", "len", "(", "solution_sequence", ")", ")", ":", "\n", "                ", "if", "done", ":", "\n", "                    ", "break", "\n", "", "if", "env", ".", "machine_legal", "[", "machine", "]", "and", "index_machine", "[", "machine", "]", "<", "job_nb", ":", "\n", "                    ", "action_to_do", "=", "solution_sequence", "[", "machine", "]", "[", "index_machine", "[", "machine", "]", "]", "\n", "if", "(", "\n", "env", ".", "needed_machine_jobs", "[", "action_to_do", "]", "==", "machine", "\n", "and", "env", ".", "legal_actions", "[", "action_to_do", "]", "\n", ")", ":", "\n", "                        ", "no_op", "=", "False", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "legal_actions", "[", "action_to_do", "]", ",", "\n", "\"We don't perform illegal actions\"", ",", "\n", ")", "\n", "self", ".", "assertEqual", "(", "\n", "sum", "(", "env", ".", "legal_actions", "[", ":", "-", "1", "]", ")", ",", "env", ".", "nb_legal_actions", "\n", ")", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "action_to_do", ")", "\n", "index_machine", "[", "machine", "]", "+=", "1", "\n", "step_nb", "+=", "1", "\n", "", "", "", "if", "no_op", "and", "not", "done", ":", "\n", "                ", "self", ".", "assertTrue", "(", "len", "(", "env", ".", "next_time_step", ")", ">", "0", ",", "\"step {}\"", ".", "format", "(", "step_nb", ")", ")", "\n", "previous_time_step", "=", "env", ".", "current_time_step", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "env", ".", "jobs", ")", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "current_time_step", ">", "previous_time_step", ",", "\n", "\"we increase the time step\"", ",", "\n", ")", "\n", "", "", "self", ".", "assertEqual", "(", "\n", "sum", "(", "index_machine", ")", ",", "len", "(", "solution_sequence", ")", "*", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "1846", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.tests.test_solutions.TestSolution.test_optimum_ta44": [[2166, 2861], ["gym.make", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "len", "len", "test_solutions.TestSolution.assertEqual", "test_solutions.TestSolution.assertEqual", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "range", "sum", "range", "len", "test_solutions.TestSolution.assertTrue", "gym.make.step", "test_solutions.TestSolution.assertTrue", "len", "len", "test_solutions.TestSolution.assertTrue", "test_solutions.TestSolution.assertEqual", "gym.make.step", "len", "str", "sum", "pathlib.Path().parent.absolute", "pathlib.Path"], "methods", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.make", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step"], ["", "def", "test_optimum_ta44", "(", "self", ")", ":", "\n", "# http://optimizizer.com/solution.php?name=ta44&UB=1979&problemclass=ta", "\n", "        ", "env", "=", "gym", ".", "make", "(", "\n", "\"jss-v1\"", ",", "\n", "env_config", "=", "{", "\n", "\"instance_path\"", ":", "f\"{str(Path(__file__).parent.absolute())}/../JSSEnv/envs/instances/ta44\"", "\n", "}", ",", "\n", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "# for every machine give the jobs to process in order for every machine", "\n", "solution_sequence", "=", "[", "\n", "[", "\n", "29", ",", "\n", "6", ",", "\n", "0", ",", "\n", "27", ",", "\n", "19", ",", "\n", "10", ",", "\n", "4", ",", "\n", "11", ",", "\n", "12", ",", "\n", "13", ",", "\n", "18", ",", "\n", "20", ",", "\n", "2", ",", "\n", "5", ",", "\n", "26", ",", "\n", "16", ",", "\n", "23", ",", "\n", "14", ",", "\n", "21", ",", "\n", "3", ",", "\n", "25", ",", "\n", "17", ",", "\n", "1", ",", "\n", "24", ",", "\n", "7", ",", "\n", "22", ",", "\n", "28", ",", "\n", "8", ",", "\n", "15", ",", "\n", "9", ",", "\n", "]", ",", "\n", "[", "\n", "22", ",", "\n", "9", ",", "\n", "3", ",", "\n", "4", ",", "\n", "1", ",", "\n", "2", ",", "\n", "17", ",", "\n", "20", ",", "\n", "18", ",", "\n", "13", ",", "\n", "26", ",", "\n", "5", ",", "\n", "14", ",", "\n", "29", ",", "\n", "8", ",", "\n", "16", ",", "\n", "23", ",", "\n", "0", ",", "\n", "28", ",", "\n", "7", ",", "\n", "6", ",", "\n", "19", ",", "\n", "24", ",", "\n", "11", ",", "\n", "27", ",", "\n", "21", ",", "\n", "12", ",", "\n", "15", ",", "\n", "10", ",", "\n", "25", ",", "\n", "]", ",", "\n", "[", "\n", "25", ",", "\n", "27", ",", "\n", "4", ",", "\n", "22", ",", "\n", "11", ",", "\n", "0", ",", "\n", "19", ",", "\n", "13", ",", "\n", "9", ",", "\n", "17", ",", "\n", "8", ",", "\n", "3", ",", "\n", "29", ",", "\n", "21", ",", "\n", "12", ",", "\n", "1", ",", "\n", "2", ",", "\n", "10", ",", "\n", "20", ",", "\n", "18", ",", "\n", "26", ",", "\n", "5", ",", "\n", "23", ",", "\n", "24", ",", "\n", "14", ",", "\n", "6", ",", "\n", "28", ",", "\n", "7", ",", "\n", "16", ",", "\n", "15", ",", "\n", "]", ",", "\n", "[", "\n", "12", ",", "\n", "4", ",", "\n", "15", ",", "\n", "18", ",", "\n", "23", ",", "\n", "13", ",", "\n", "21", ",", "\n", "9", ",", "\n", "19", ",", "\n", "5", ",", "\n", "0", ",", "\n", "25", ",", "\n", "22", ",", "\n", "29", ",", "\n", "1", ",", "\n", "3", ",", "\n", "26", ",", "\n", "6", ",", "\n", "14", ",", "\n", "7", ",", "\n", "10", ",", "\n", "28", ",", "\n", "24", ",", "\n", "17", ",", "\n", "16", ",", "\n", "2", ",", "\n", "27", ",", "\n", "11", ",", "\n", "20", ",", "\n", "8", ",", "\n", "]", ",", "\n", "[", "\n", "8", ",", "\n", "21", ",", "\n", "18", ",", "\n", "1", ",", "\n", "29", ",", "\n", "20", ",", "\n", "0", ",", "\n", "23", ",", "\n", "14", ",", "\n", "10", ",", "\n", "25", ",", "\n", "28", ",", "\n", "16", ",", "\n", "12", ",", "\n", "13", ",", "\n", "5", ",", "\n", "26", ",", "\n", "9", ",", "\n", "4", ",", "\n", "17", ",", "\n", "19", ",", "\n", "11", ",", "\n", "24", ",", "\n", "27", ",", "\n", "3", ",", "\n", "6", ",", "\n", "7", ",", "\n", "22", ",", "\n", "2", ",", "\n", "15", ",", "\n", "]", ",", "\n", "[", "\n", "0", ",", "\n", "17", ",", "\n", "13", ",", "\n", "21", ",", "\n", "12", ",", "\n", "11", ",", "\n", "9", ",", "\n", "16", ",", "\n", "8", ",", "\n", "27", ",", "\n", "29", ",", "\n", "5", ",", "\n", "10", ",", "\n", "4", ",", "\n", "18", ",", "\n", "23", ",", "\n", "25", ",", "\n", "6", ",", "\n", "26", ",", "\n", "22", ",", "\n", "14", ",", "\n", "1", ",", "\n", "7", ",", "\n", "15", ",", "\n", "3", ",", "\n", "19", ",", "\n", "28", ",", "\n", "24", ",", "\n", "2", ",", "\n", "20", ",", "\n", "]", ",", "\n", "[", "\n", "5", ",", "\n", "18", ",", "\n", "27", ",", "\n", "13", ",", "\n", "0", ",", "\n", "24", ",", "\n", "29", ",", "\n", "8", ",", "\n", "14", ",", "\n", "4", ",", "\n", "19", ",", "\n", "10", ",", "\n", "22", ",", "\n", "9", ",", "\n", "26", ",", "\n", "25", ",", "\n", "16", ",", "\n", "3", ",", "\n", "15", ",", "\n", "6", ",", "\n", "28", ",", "\n", "11", ",", "\n", "1", ",", "\n", "7", ",", "\n", "12", ",", "\n", "20", ",", "\n", "23", ",", "\n", "17", ",", "\n", "21", ",", "\n", "2", ",", "\n", "]", ",", "\n", "[", "\n", "23", ",", "\n", "27", ",", "\n", "1", ",", "\n", "10", ",", "\n", "5", ",", "\n", "20", ",", "\n", "9", ",", "\n", "24", ",", "\n", "18", ",", "\n", "19", ",", "\n", "8", ",", "\n", "2", ",", "\n", "15", ",", "\n", "16", ",", "\n", "12", ",", "\n", "21", ",", "\n", "26", ",", "\n", "4", ",", "\n", "13", ",", "\n", "25", ",", "\n", "11", ",", "\n", "0", ",", "\n", "14", ",", "\n", "7", ",", "\n", "29", ",", "\n", "22", ",", "\n", "6", ",", "\n", "28", ",", "\n", "3", ",", "\n", "17", ",", "\n", "]", ",", "\n", "[", "\n", "18", ",", "\n", "22", ",", "\n", "21", ",", "\n", "7", ",", "\n", "24", ",", "\n", "23", ",", "\n", "9", ",", "\n", "19", ",", "\n", "2", ",", "\n", "5", ",", "\n", "1", ",", "\n", "13", ",", "\n", "14", ",", "\n", "16", ",", "\n", "12", ",", "\n", "8", ",", "\n", "3", ",", "\n", "20", ",", "\n", "6", ",", "\n", "29", ",", "\n", "28", ",", "\n", "15", ",", "\n", "26", ",", "\n", "17", ",", "\n", "0", ",", "\n", "4", ",", "\n", "27", ",", "\n", "10", ",", "\n", "11", ",", "\n", "25", ",", "\n", "]", ",", "\n", "[", "\n", "7", ",", "\n", "2", ",", "\n", "24", ",", "\n", "23", ",", "\n", "15", ",", "\n", "13", ",", "\n", "8", ",", "\n", "10", ",", "\n", "9", ",", "\n", "11", ",", "\n", "21", ",", "\n", "4", ",", "\n", "12", ",", "\n", "27", ",", "\n", "0", ",", "\n", "14", ",", "\n", "6", ",", "\n", "17", ",", "\n", "25", ",", "\n", "5", ",", "\n", "3", ",", "\n", "19", ",", "\n", "29", ",", "\n", "26", ",", "\n", "1", ",", "\n", "18", ",", "\n", "20", ",", "\n", "16", ",", "\n", "28", ",", "\n", "22", ",", "\n", "]", ",", "\n", "[", "\n", "27", ",", "\n", "19", ",", "\n", "7", ",", "\n", "14", ",", "\n", "21", ",", "\n", "0", ",", "\n", "6", ",", "\n", "1", ",", "\n", "24", ",", "\n", "3", ",", "\n", "18", ",", "\n", "13", ",", "\n", "10", ",", "\n", "16", ",", "\n", "5", ",", "\n", "23", ",", "\n", "4", ",", "\n", "9", ",", "\n", "29", ",", "\n", "20", ",", "\n", "22", ",", "\n", "17", ",", "\n", "28", ",", "\n", "26", ",", "\n", "12", ",", "\n", "8", ",", "\n", "15", ",", "\n", "11", ",", "\n", "25", ",", "\n", "2", ",", "\n", "]", ",", "\n", "[", "\n", "23", ",", "\n", "26", ",", "\n", "18", ",", "\n", "1", ",", "\n", "10", ",", "\n", "29", ",", "\n", "28", ",", "\n", "11", ",", "\n", "24", ",", "\n", "6", ",", "\n", "5", ",", "\n", "12", ",", "\n", "19", ",", "\n", "25", ",", "\n", "13", ",", "\n", "4", ",", "\n", "15", ",", "\n", "20", ",", "\n", "22", ",", "\n", "14", ",", "\n", "17", ",", "\n", "7", ",", "\n", "9", ",", "\n", "27", ",", "\n", "2", ",", "\n", "3", ",", "\n", "16", ",", "\n", "21", ",", "\n", "8", ",", "\n", "0", ",", "\n", "]", ",", "\n", "[", "\n", "9", ",", "\n", "13", ",", "\n", "27", ",", "\n", "18", ",", "\n", "21", ",", "\n", "0", ",", "\n", "5", ",", "\n", "12", ",", "\n", "19", ",", "\n", "22", ",", "\n", "29", ",", "\n", "10", ",", "\n", "17", ",", "\n", "14", ",", "\n", "26", ",", "\n", "8", ",", "\n", "16", ",", "\n", "1", ",", "\n", "4", ",", "\n", "28", ",", "\n", "6", ",", "\n", "15", ",", "\n", "11", ",", "\n", "2", ",", "\n", "24", ",", "\n", "25", ",", "\n", "3", ",", "\n", "20", ",", "\n", "7", ",", "\n", "23", ",", "\n", "]", ",", "\n", "[", "\n", "4", ",", "\n", "26", ",", "\n", "11", ",", "\n", "3", ",", "\n", "13", ",", "\n", "16", ",", "\n", "1", ",", "\n", "12", ",", "\n", "22", ",", "\n", "0", ",", "\n", "29", ",", "\n", "7", ",", "\n", "28", ",", "\n", "2", ",", "\n", "20", ",", "\n", "17", ",", "\n", "21", ",", "\n", "5", ",", "\n", "23", ",", "\n", "19", ",", "\n", "14", ",", "\n", "8", ",", "\n", "10", ",", "\n", "18", ",", "\n", "6", ",", "\n", "27", ",", "\n", "25", ",", "\n", "9", ",", "\n", "15", ",", "\n", "24", ",", "\n", "]", ",", "\n", "[", "\n", "21", ",", "\n", "18", ",", "\n", "22", ",", "\n", "11", ",", "\n", "27", ",", "\n", "19", ",", "\n", "5", ",", "\n", "20", ",", "\n", "26", ",", "\n", "12", ",", "\n", "24", ",", "\n", "1", ",", "\n", "4", ",", "\n", "13", ",", "\n", "2", ",", "\n", "6", ",", "\n", "23", ",", "\n", "25", ",", "\n", "9", ",", "\n", "10", ",", "\n", "17", ",", "\n", "15", ",", "\n", "28", ",", "\n", "7", ",", "\n", "3", ",", "\n", "29", ",", "\n", "0", ",", "\n", "8", ",", "\n", "14", ",", "\n", "16", ",", "\n", "]", ",", "\n", "[", "\n", "13", ",", "\n", "28", ",", "\n", "2", ",", "\n", "10", ",", "\n", "0", ",", "\n", "17", ",", "\n", "4", ",", "\n", "18", ",", "\n", "6", ",", "\n", "14", ",", "\n", "11", ",", "\n", "26", ",", "\n", "9", ",", "\n", "5", ",", "\n", "20", ",", "\n", "12", ",", "\n", "25", ",", "\n", "21", ",", "\n", "7", ",", "\n", "8", ",", "\n", "16", ",", "\n", "23", ",", "\n", "19", ",", "\n", "27", ",", "\n", "1", ",", "\n", "3", ",", "\n", "24", ",", "\n", "22", ",", "\n", "15", ",", "\n", "29", ",", "\n", "]", ",", "\n", "[", "\n", "25", ",", "\n", "21", ",", "\n", "13", ",", "\n", "0", ",", "\n", "26", ",", "\n", "1", ",", "\n", "24", ",", "\n", "19", ",", "\n", "27", ",", "\n", "2", ",", "\n", "11", ",", "\n", "20", ",", "\n", "15", ",", "\n", "8", ",", "\n", "12", ",", "\n", "4", ",", "\n", "5", ",", "\n", "7", ",", "\n", "17", ",", "\n", "29", ",", "\n", "10", ",", "\n", "6", ",", "\n", "3", ",", "\n", "14", ",", "\n", "28", ",", "\n", "16", ",", "\n", "18", ",", "\n", "9", ",", "\n", "22", ",", "\n", "23", ",", "\n", "]", ",", "\n", "[", "\n", "9", ",", "\n", "21", ",", "\n", "10", ",", "\n", "13", ",", "\n", "1", ",", "\n", "5", ",", "\n", "20", ",", "\n", "24", ",", "\n", "19", ",", "\n", "2", ",", "\n", "28", ",", "\n", "25", ",", "\n", "11", ",", "\n", "18", ",", "\n", "14", ",", "\n", "6", ",", "\n", "26", ",", "\n", "4", ",", "\n", "29", ",", "\n", "17", ",", "\n", "22", ",", "\n", "0", ",", "\n", "12", ",", "\n", "23", ",", "\n", "8", ",", "\n", "15", ",", "\n", "7", ",", "\n", "3", ",", "\n", "27", ",", "\n", "16", ",", "\n", "]", ",", "\n", "[", "\n", "29", ",", "\n", "13", ",", "\n", "2", ",", "\n", "16", ",", "\n", "27", ",", "\n", "4", ",", "\n", "28", ",", "\n", "5", ",", "\n", "20", ",", "\n", "23", ",", "\n", "17", ",", "\n", "8", ",", "\n", "21", ",", "\n", "25", ",", "\n", "14", ",", "\n", "7", ",", "\n", "22", ",", "\n", "11", ",", "\n", "24", ",", "\n", "0", ",", "\n", "15", ",", "\n", "18", ",", "\n", "9", ",", "\n", "12", ",", "\n", "6", ",", "\n", "26", ",", "\n", "19", ",", "\n", "3", ",", "\n", "1", ",", "\n", "10", ",", "\n", "]", ",", "\n", "[", "\n", "24", ",", "\n", "29", ",", "\n", "28", ",", "\n", "27", ",", "\n", "4", ",", "\n", "2", ",", "\n", "0", ",", "\n", "19", ",", "\n", "5", ",", "\n", "8", ",", "\n", "14", ",", "\n", "3", ",", "\n", "21", ",", "\n", "17", ",", "\n", "20", ",", "\n", "9", ",", "\n", "12", ",", "\n", "1", ",", "\n", "18", ",", "\n", "13", ",", "\n", "25", ",", "\n", "10", ",", "\n", "11", ",", "\n", "23", ",", "\n", "6", ",", "\n", "15", ",", "\n", "16", ",", "\n", "22", ",", "\n", "26", ",", "\n", "7", ",", "\n", "]", ",", "\n", "]", "\n", "done", "=", "False", "\n", "machine_nb", "=", "len", "(", "solution_sequence", ")", "\n", "job_nb", "=", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", "index_machine", "=", "[", "0", "for", "_", "in", "range", "(", "machine_nb", ")", "]", "\n", "step_nb", "=", "0", "\n", "while", "not", "done", ":", "\n", "# if we haven't performed any action, we go to the next time step", "\n", "            ", "no_op", "=", "True", "\n", "for", "machine", "in", "range", "(", "len", "(", "solution_sequence", ")", ")", ":", "\n", "                ", "if", "done", ":", "\n", "                    ", "break", "\n", "", "if", "env", ".", "machine_legal", "[", "machine", "]", "and", "index_machine", "[", "machine", "]", "<", "job_nb", ":", "\n", "                    ", "action_to_do", "=", "solution_sequence", "[", "machine", "]", "[", "index_machine", "[", "machine", "]", "]", "\n", "if", "(", "\n", "env", ".", "needed_machine_jobs", "[", "action_to_do", "]", "==", "machine", "\n", "and", "env", ".", "legal_actions", "[", "action_to_do", "]", "\n", ")", ":", "\n", "                        ", "no_op", "=", "False", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "legal_actions", "[", "action_to_do", "]", ",", "\n", "\"We don't perform illegal actions\"", ",", "\n", ")", "\n", "self", ".", "assertEqual", "(", "\n", "sum", "(", "env", ".", "legal_actions", "[", ":", "-", "1", "]", ")", ",", "env", ".", "nb_legal_actions", "\n", ")", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "action_to_do", ")", "\n", "index_machine", "[", "machine", "]", "+=", "1", "\n", "step_nb", "+=", "1", "\n", "", "", "", "if", "no_op", "and", "not", "done", ":", "\n", "                ", "self", ".", "assertTrue", "(", "len", "(", "env", ".", "next_time_step", ")", ">", "0", ",", "\"step {}\"", ".", "format", "(", "step_nb", ")", ")", "\n", "previous_time_step", "=", "env", ".", "current_time_step", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "env", ".", "jobs", ")", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "current_time_step", ">", "previous_time_step", ",", "\n", "\"we increase the time step\"", ",", "\n", ")", "\n", "", "", "self", ".", "assertEqual", "(", "\n", "sum", "(", "index_machine", ")", ",", "len", "(", "solution_sequence", ")", "*", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "1979", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.tests.test_solutions.TestSolution.test_optimum_ta45": [[2862, 3557], ["gym.make", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "len", "len", "test_solutions.TestSolution.assertEqual", "test_solutions.TestSolution.assertEqual", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "range", "sum", "range", "len", "test_solutions.TestSolution.assertTrue", "gym.make.step", "test_solutions.TestSolution.assertTrue", "len", "len", "test_solutions.TestSolution.assertTrue", "test_solutions.TestSolution.assertEqual", "gym.make.step", "len", "str", "sum", "pathlib.Path().parent.absolute", "pathlib.Path"], "methods", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.make", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step"], ["", "def", "test_optimum_ta45", "(", "self", ")", ":", "\n", "# http://optimizizer.com/solution.php?name=ta45&UB=2000&problemclass=ta", "\n", "        ", "env", "=", "gym", ".", "make", "(", "\n", "\"jss-v1\"", ",", "\n", "env_config", "=", "{", "\n", "\"instance_path\"", ":", "f\"{str(Path(__file__).parent.absolute())}/../JSSEnv/envs/instances/ta45\"", "\n", "}", ",", "\n", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "# for every machine give the jobs to process in order for every machine", "\n", "solution_sequence", "=", "[", "\n", "[", "\n", "29", ",", "\n", "25", ",", "\n", "11", ",", "\n", "17", ",", "\n", "22", ",", "\n", "26", ",", "\n", "27", ",", "\n", "21", ",", "\n", "13", ",", "\n", "7", ",", "\n", "18", ",", "\n", "15", ",", "\n", "1", ",", "\n", "8", ",", "\n", "28", ",", "\n", "0", ",", "\n", "19", ",", "\n", "6", ",", "\n", "24", ",", "\n", "10", ",", "\n", "2", ",", "\n", "23", ",", "\n", "20", ",", "\n", "4", ",", "\n", "5", ",", "\n", "9", ",", "\n", "14", ",", "\n", "16", ",", "\n", "12", ",", "\n", "3", ",", "\n", "]", ",", "\n", "[", "\n", "29", ",", "\n", "14", ",", "\n", "19", ",", "\n", "28", ",", "\n", "27", ",", "\n", "0", ",", "\n", "24", ",", "\n", "21", ",", "\n", "22", ",", "\n", "26", ",", "\n", "7", ",", "\n", "12", ",", "\n", "5", ",", "\n", "8", ",", "\n", "10", ",", "\n", "15", ",", "\n", "18", ",", "\n", "25", ",", "\n", "11", ",", "\n", "17", ",", "\n", "13", ",", "\n", "9", ",", "\n", "6", ",", "\n", "20", ",", "\n", "4", ",", "\n", "16", ",", "\n", "2", ",", "\n", "23", ",", "\n", "3", ",", "\n", "1", ",", "\n", "]", ",", "\n", "[", "\n", "3", ",", "\n", "2", ",", "\n", "28", ",", "\n", "15", ",", "\n", "5", ",", "\n", "27", ",", "\n", "6", ",", "\n", "4", ",", "\n", "8", ",", "\n", "14", ",", "\n", "10", ",", "\n", "1", ",", "\n", "17", ",", "\n", "7", ",", "\n", "12", ",", "\n", "18", ",", "\n", "22", ",", "\n", "11", ",", "\n", "23", ",", "\n", "26", ",", "\n", "19", ",", "\n", "20", ",", "\n", "21", ",", "\n", "25", ",", "\n", "0", ",", "\n", "29", ",", "\n", "13", ",", "\n", "16", ",", "\n", "9", ",", "\n", "24", ",", "\n", "]", ",", "\n", "[", "\n", "11", ",", "\n", "6", ",", "\n", "14", ",", "\n", "20", ",", "\n", "17", ",", "\n", "26", ",", "\n", "0", ",", "\n", "15", ",", "\n", "27", ",", "\n", "22", ",", "\n", "21", ",", "\n", "7", ",", "\n", "16", ",", "\n", "23", ",", "\n", "18", ",", "\n", "13", ",", "\n", "3", ",", "\n", "29", ",", "\n", "28", ",", "\n", "4", ",", "\n", "12", ",", "\n", "1", ",", "\n", "24", ",", "\n", "5", ",", "\n", "10", ",", "\n", "19", ",", "\n", "9", ",", "\n", "8", ",", "\n", "25", ",", "\n", "2", ",", "\n", "]", ",", "\n", "[", "\n", "5", ",", "\n", "3", ",", "\n", "21", ",", "\n", "13", ",", "\n", "4", ",", "\n", "2", ",", "\n", "19", ",", "\n", "20", ",", "\n", "6", ",", "\n", "26", ",", "\n", "23", ",", "\n", "12", ",", "\n", "17", ",", "\n", "27", ",", "\n", "11", ",", "\n", "28", ",", "\n", "8", ",", "\n", "0", ",", "\n", "7", ",", "\n", "22", ",", "\n", "16", ",", "\n", "18", ",", "\n", "29", ",", "\n", "10", ",", "\n", "9", ",", "\n", "24", ",", "\n", "14", ",", "\n", "1", ",", "\n", "25", ",", "\n", "15", ",", "\n", "]", ",", "\n", "[", "\n", "21", ",", "\n", "28", ",", "\n", "22", ",", "\n", "24", ",", "\n", "20", ",", "\n", "13", ",", "\n", "8", ",", "\n", "7", ",", "\n", "3", ",", "\n", "25", ",", "\n", "29", ",", "\n", "0", ",", "\n", "10", ",", "\n", "14", ",", "\n", "16", ",", "\n", "5", ",", "\n", "4", ",", "\n", "12", ",", "\n", "27", ",", "\n", "18", ",", "\n", "26", ",", "\n", "17", ",", "\n", "23", ",", "\n", "2", ",", "\n", "6", ",", "\n", "9", ",", "\n", "15", ",", "\n", "19", ",", "\n", "1", ",", "\n", "11", ",", "\n", "]", ",", "\n", "[", "\n", "7", ",", "\n", "5", ",", "\n", "17", ",", "\n", "12", ",", "\n", "24", ",", "\n", "6", ",", "\n", "26", ",", "\n", "3", ",", "\n", "28", ",", "\n", "9", ",", "\n", "11", ",", "\n", "1", ",", "\n", "29", ",", "\n", "27", ",", "\n", "18", ",", "\n", "16", ",", "\n", "23", ",", "\n", "4", ",", "\n", "0", ",", "\n", "20", ",", "\n", "25", ",", "\n", "13", ",", "\n", "21", ",", "\n", "14", ",", "\n", "8", ",", "\n", "15", ",", "\n", "10", ",", "\n", "22", ",", "\n", "2", ",", "\n", "19", ",", "\n", "]", ",", "\n", "[", "\n", "17", ",", "\n", "15", ",", "\n", "28", ",", "\n", "27", ",", "\n", "11", ",", "\n", "21", ",", "\n", "22", ",", "\n", "23", ",", "\n", "18", ",", "\n", "5", ",", "\n", "10", ",", "\n", "0", ",", "\n", "20", ",", "\n", "25", ",", "\n", "9", ",", "\n", "7", ",", "\n", "2", ",", "\n", "4", ",", "\n", "1", ",", "\n", "3", ",", "\n", "29", ",", "\n", "6", ",", "\n", "8", ",", "\n", "19", ",", "\n", "14", ",", "\n", "16", ",", "\n", "24", ",", "\n", "26", ",", "\n", "13", ",", "\n", "12", ",", "\n", "]", ",", "\n", "[", "\n", "24", ",", "\n", "1", ",", "\n", "28", ",", "\n", "21", ",", "\n", "3", ",", "\n", "17", ",", "\n", "18", ",", "\n", "7", ",", "\n", "11", ",", "\n", "27", ",", "\n", "25", ",", "\n", "12", ",", "\n", "14", ",", "\n", "5", ",", "\n", "6", ",", "\n", "10", ",", "\n", "19", ",", "\n", "4", ",", "\n", "20", ",", "\n", "9", ",", "\n", "26", ",", "\n", "15", ",", "\n", "16", ",", "\n", "0", ",", "\n", "22", ",", "\n", "13", ",", "\n", "8", ",", "\n", "23", ",", "\n", "2", ",", "\n", "29", ",", "\n", "]", ",", "\n", "[", "\n", "11", ",", "\n", "7", ",", "\n", "3", ",", "\n", "18", ",", "\n", "17", ",", "\n", "0", ",", "\n", "26", ",", "\n", "6", ",", "\n", "4", ",", "\n", "12", ",", "\n", "16", ",", "\n", "5", ",", "\n", "23", ",", "\n", "9", ",", "\n", "24", ",", "\n", "25", ",", "\n", "15", ",", "\n", "14", ",", "\n", "20", ",", "\n", "28", ",", "\n", "1", ",", "\n", "22", ",", "\n", "13", ",", "\n", "10", ",", "\n", "8", ",", "\n", "29", ",", "\n", "21", ",", "\n", "19", ",", "\n", "2", ",", "\n", "27", ",", "\n", "]", ",", "\n", "[", "\n", "20", ",", "\n", "29", ",", "\n", "3", ",", "\n", "8", ",", "\n", "28", ",", "\n", "15", ",", "\n", "12", ",", "\n", "0", ",", "\n", "10", ",", "\n", "25", ",", "\n", "27", ",", "\n", "6", ",", "\n", "23", ",", "\n", "11", ",", "\n", "5", ",", "\n", "9", ",", "\n", "2", ",", "\n", "1", ",", "\n", "13", ",", "\n", "21", ",", "\n", "18", ",", "\n", "4", ",", "\n", "24", ",", "\n", "16", ",", "\n", "14", ",", "\n", "26", ",", "\n", "7", ",", "\n", "19", ",", "\n", "17", ",", "\n", "22", ",", "\n", "]", ",", "\n", "[", "\n", "28", ",", "\n", "0", ",", "\n", "6", ",", "\n", "26", ",", "\n", "13", ",", "\n", "4", ",", "\n", "27", ",", "\n", "15", ",", "\n", "9", ",", "\n", "21", ",", "\n", "23", ",", "\n", "10", ",", "\n", "11", ",", "\n", "17", ",", "\n", "14", ",", "\n", "18", ",", "\n", "20", ",", "\n", "1", ",", "\n", "19", ",", "\n", "22", ",", "\n", "25", ",", "\n", "24", ",", "\n", "3", ",", "\n", "7", ",", "\n", "5", ",", "\n", "2", ",", "\n", "16", ",", "\n", "29", ",", "\n", "8", ",", "\n", "12", ",", "\n", "]", ",", "\n", "[", "\n", "15", ",", "\n", "26", ",", "\n", "14", ",", "\n", "18", ",", "\n", "7", ",", "\n", "3", ",", "\n", "28", ",", "\n", "25", ",", "\n", "16", ",", "\n", "22", ",", "\n", "13", ",", "\n", "6", ",", "\n", "4", ",", "\n", "17", ",", "\n", "29", ",", "\n", "5", ",", "\n", "27", ",", "\n", "10", ",", "\n", "11", ",", "\n", "19", ",", "\n", "2", ",", "\n", "24", ",", "\n", "12", ",", "\n", "1", ",", "\n", "20", ",", "\n", "8", ",", "\n", "21", ",", "\n", "23", ",", "\n", "9", ",", "\n", "0", ",", "\n", "]", ",", "\n", "[", "\n", "22", ",", "\n", "24", ",", "\n", "27", ",", "\n", "15", ",", "\n", "11", ",", "\n", "12", ",", "\n", "26", ",", "\n", "0", ",", "\n", "18", ",", "\n", "28", ",", "\n", "13", ",", "\n", "6", ",", "\n", "7", ",", "\n", "17", ",", "\n", "1", ",", "\n", "23", ",", "\n", "16", ",", "\n", "21", ",", "\n", "5", ",", "\n", "2", ",", "\n", "8", ",", "\n", "19", ",", "\n", "4", ",", "\n", "10", ",", "\n", "9", ",", "\n", "14", ",", "\n", "20", ",", "\n", "25", ",", "\n", "3", ",", "\n", "29", ",", "\n", "]", ",", "\n", "[", "\n", "23", ",", "\n", "22", ",", "\n", "6", ",", "\n", "26", ",", "\n", "15", ",", "\n", "29", ",", "\n", "11", ",", "\n", "5", ",", "\n", "28", ",", "\n", "18", ",", "\n", "27", ",", "\n", "24", ",", "\n", "12", ",", "\n", "8", ",", "\n", "25", ",", "\n", "10", ",", "\n", "9", ",", "\n", "7", ",", "\n", "2", ",", "\n", "13", ",", "\n", "21", ",", "\n", "20", ",", "\n", "17", ",", "\n", "4", ",", "\n", "3", ",", "\n", "1", ",", "\n", "14", ",", "\n", "16", ",", "\n", "0", ",", "\n", "19", ",", "\n", "]", ",", "\n", "[", "\n", "23", ",", "\n", "27", ",", "\n", "1", ",", "\n", "6", ",", "\n", "14", ",", "\n", "8", ",", "\n", "13", ",", "\n", "9", ",", "\n", "11", ",", "\n", "0", ",", "\n", "5", ",", "\n", "10", ",", "\n", "26", ",", "\n", "20", ",", "\n", "21", ",", "\n", "7", ",", "\n", "17", ",", "\n", "4", ",", "\n", "15", ",", "\n", "28", ",", "\n", "2", ",", "\n", "18", ",", "\n", "22", ",", "\n", "25", ",", "\n", "3", ",", "\n", "24", ",", "\n", "29", ",", "\n", "19", ",", "\n", "16", ",", "\n", "12", ",", "\n", "]", ",", "\n", "[", "\n", "16", ",", "\n", "23", ",", "\n", "22", ",", "\n", "5", ",", "\n", "29", ",", "\n", "20", ",", "\n", "12", ",", "\n", "8", ",", "\n", "7", ",", "\n", "17", ",", "\n", "25", ",", "\n", "1", ",", "\n", "18", ",", "\n", "15", ",", "\n", "4", ",", "\n", "21", ",", "\n", "14", ",", "\n", "28", ",", "\n", "9", ",", "\n", "19", ",", "\n", "13", ",", "\n", "6", ",", "\n", "10", ",", "\n", "3", ",", "\n", "2", ",", "\n", "0", ",", "\n", "27", ",", "\n", "26", ",", "\n", "24", ",", "\n", "11", ",", "\n", "]", ",", "\n", "[", "\n", "3", ",", "\n", "2", ",", "\n", "7", ",", "\n", "8", ",", "\n", "28", ",", "\n", "24", ",", "\n", "9", ",", "\n", "6", ",", "\n", "22", ",", "\n", "21", ",", "\n", "15", ",", "\n", "12", ",", "\n", "16", ",", "\n", "17", ",", "\n", "27", ",", "\n", "14", ",", "\n", "5", ",", "\n", "23", ",", "\n", "25", ",", "\n", "1", ",", "\n", "10", ",", "\n", "29", ",", "\n", "13", ",", "\n", "0", ",", "\n", "11", ",", "\n", "20", ",", "\n", "19", ",", "\n", "18", ",", "\n", "26", ",", "\n", "4", ",", "\n", "]", ",", "\n", "[", "\n", "27", ",", "\n", "2", ",", "\n", "0", ",", "\n", "5", ",", "\n", "4", ",", "\n", "22", ",", "\n", "19", ",", "\n", "1", ",", "\n", "12", ",", "\n", "8", ",", "\n", "3", ",", "\n", "26", ",", "\n", "23", ",", "\n", "25", ",", "\n", "17", ",", "\n", "15", ",", "\n", "7", ",", "\n", "20", ",", "\n", "13", ",", "\n", "11", ",", "\n", "29", ",", "\n", "28", ",", "\n", "18", ",", "\n", "6", ",", "\n", "10", ",", "\n", "24", ",", "\n", "9", ",", "\n", "21", ",", "\n", "14", ",", "\n", "16", ",", "\n", "]", ",", "\n", "[", "\n", "15", ",", "\n", "11", ",", "\n", "29", ",", "\n", "6", ",", "\n", "23", ",", "\n", "25", ",", "\n", "0", ",", "\n", "17", ",", "\n", "18", ",", "\n", "16", ",", "\n", "24", ",", "\n", "22", ",", "\n", "13", ",", "\n", "10", ",", "\n", "20", ",", "\n", "21", ",", "\n", "5", ",", "\n", "9", ",", "\n", "1", ",", "\n", "28", ",", "\n", "2", ",", "\n", "27", ",", "\n", "3", ",", "\n", "19", ",", "\n", "12", ",", "\n", "4", ",", "\n", "14", ",", "\n", "8", ",", "\n", "7", ",", "\n", "26", ",", "\n", "]", ",", "\n", "]", "\n", "done", "=", "False", "\n", "machine_nb", "=", "len", "(", "solution_sequence", ")", "\n", "job_nb", "=", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", "index_machine", "=", "[", "0", "for", "_", "in", "range", "(", "machine_nb", ")", "]", "\n", "step_nb", "=", "0", "\n", "while", "not", "done", ":", "\n", "# if we haven't performed any action, we go to the next time step", "\n", "            ", "no_op", "=", "True", "\n", "for", "machine", "in", "range", "(", "len", "(", "solution_sequence", ")", ")", ":", "\n", "                ", "if", "done", ":", "\n", "                    ", "break", "\n", "", "if", "env", ".", "machine_legal", "[", "machine", "]", "and", "index_machine", "[", "machine", "]", "<", "job_nb", ":", "\n", "                    ", "action_to_do", "=", "solution_sequence", "[", "machine", "]", "[", "index_machine", "[", "machine", "]", "]", "\n", "if", "(", "\n", "env", ".", "needed_machine_jobs", "[", "action_to_do", "]", "==", "machine", "\n", "and", "env", ".", "legal_actions", "[", "action_to_do", "]", "\n", ")", ":", "\n", "                        ", "no_op", "=", "False", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "legal_actions", "[", "action_to_do", "]", ",", "\n", "\"We don't perform illegal actions\"", ",", "\n", ")", "\n", "self", ".", "assertEqual", "(", "\n", "sum", "(", "env", ".", "legal_actions", "[", ":", "-", "1", "]", ")", ",", "env", ".", "nb_legal_actions", "\n", ")", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "action_to_do", ")", "\n", "index_machine", "[", "machine", "]", "+=", "1", "\n", "step_nb", "+=", "1", "\n", "", "", "", "if", "no_op", "and", "not", "done", ":", "\n", "                ", "self", ".", "assertTrue", "(", "len", "(", "env", ".", "next_time_step", ")", ">", "0", ",", "\"step {}\"", ".", "format", "(", "step_nb", ")", ")", "\n", "previous_time_step", "=", "env", ".", "current_time_step", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "env", ".", "jobs", ")", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "current_time_step", ">", "previous_time_step", ",", "\n", "\"we increase the time step\"", ",", "\n", ")", "\n", "", "", "self", ".", "assertEqual", "(", "\n", "sum", "(", "index_machine", ")", ",", "len", "(", "solution_sequence", ")", "*", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "2000", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.tests.test_solutions.TestSolution.test_optimum_ta46": [[3558, 4253], ["gym.make", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "len", "len", "test_solutions.TestSolution.assertEqual", "test_solutions.TestSolution.assertEqual", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "range", "sum", "range", "len", "test_solutions.TestSolution.assertTrue", "gym.make.step", "test_solutions.TestSolution.assertTrue", "len", "len", "test_solutions.TestSolution.assertTrue", "test_solutions.TestSolution.assertEqual", "gym.make.step", "len", "str", "sum", "pathlib.Path().parent.absolute", "pathlib.Path"], "methods", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.make", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step"], ["", "def", "test_optimum_ta46", "(", "self", ")", ":", "\n", "# http://optimizizer.com/solution.php?name=ta46&UB=2006&problemclass=ta", "\n", "        ", "env", "=", "gym", ".", "make", "(", "\n", "\"jss-v1\"", ",", "\n", "env_config", "=", "{", "\n", "\"instance_path\"", ":", "f\"{str(Path(__file__).parent.absolute())}/../JSSEnv/envs/instances/ta46\"", "\n", "}", ",", "\n", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "# for every machine give the jobs to process in order for every machine", "\n", "solution_sequence", "=", "[", "\n", "[", "\n", "29", ",", "\n", "6", ",", "\n", "14", ",", "\n", "19", ",", "\n", "13", ",", "\n", "5", ",", "\n", "8", ",", "\n", "16", ",", "\n", "11", ",", "\n", "17", ",", "\n", "1", ",", "\n", "28", ",", "\n", "22", ",", "\n", "21", ",", "\n", "18", ",", "\n", "27", ",", "\n", "20", ",", "\n", "12", ",", "\n", "15", ",", "\n", "23", ",", "\n", "9", ",", "\n", "0", ",", "\n", "4", ",", "\n", "24", ",", "\n", "25", ",", "\n", "10", ",", "\n", "3", ",", "\n", "7", ",", "\n", "2", ",", "\n", "26", ",", "\n", "]", ",", "\n", "[", "\n", "10", ",", "\n", "14", ",", "\n", "22", ",", "\n", "25", ",", "\n", "15", ",", "\n", "26", ",", "\n", "27", ",", "\n", "4", ",", "\n", "11", ",", "\n", "3", ",", "\n", "13", ",", "\n", "0", ",", "\n", "6", ",", "\n", "18", ",", "\n", "1", ",", "\n", "16", ",", "\n", "21", ",", "\n", "5", ",", "\n", "12", ",", "\n", "2", ",", "\n", "23", ",", "\n", "20", ",", "\n", "28", ",", "\n", "24", ",", "\n", "19", ",", "\n", "9", ",", "\n", "17", ",", "\n", "7", ",", "\n", "29", ",", "\n", "8", ",", "\n", "]", ",", "\n", "[", "\n", "13", ",", "\n", "26", ",", "\n", "16", ",", "\n", "11", ",", "\n", "17", ",", "\n", "19", ",", "\n", "21", ",", "\n", "4", ",", "\n", "14", ",", "\n", "10", ",", "\n", "15", ",", "\n", "27", ",", "\n", "6", ",", "\n", "28", ",", "\n", "3", ",", "\n", "24", ",", "\n", "29", ",", "\n", "9", ",", "\n", "8", ",", "\n", "20", ",", "\n", "22", ",", "\n", "12", ",", "\n", "1", ",", "\n", "25", ",", "\n", "23", ",", "\n", "0", ",", "\n", "2", ",", "\n", "18", ",", "\n", "5", ",", "\n", "7", ",", "\n", "]", ",", "\n", "[", "\n", "19", ",", "\n", "4", ",", "\n", "15", ",", "\n", "26", ",", "\n", "17", ",", "\n", "29", ",", "\n", "9", ",", "\n", "7", ",", "\n", "13", ",", "\n", "16", ",", "\n", "12", ",", "\n", "5", ",", "\n", "11", ",", "\n", "20", ",", "\n", "8", ",", "\n", "3", ",", "\n", "18", ",", "\n", "1", ",", "\n", "27", ",", "\n", "2", ",", "\n", "23", ",", "\n", "6", ",", "\n", "22", ",", "\n", "14", ",", "\n", "0", ",", "\n", "24", ",", "\n", "21", ",", "\n", "10", ",", "\n", "28", ",", "\n", "25", ",", "\n", "]", ",", "\n", "[", "\n", "18", ",", "\n", "22", ",", "\n", "17", ",", "\n", "13", ",", "\n", "29", ",", "\n", "15", ",", "\n", "25", ",", "\n", "26", ",", "\n", "16", ",", "\n", "11", ",", "\n", "21", ",", "\n", "6", ",", "\n", "7", ",", "\n", "8", ",", "\n", "4", ",", "\n", "9", ",", "\n", "20", ",", "\n", "14", ",", "\n", "3", ",", "\n", "28", ",", "\n", "23", ",", "\n", "24", ",", "\n", "1", ",", "\n", "27", ",", "\n", "10", ",", "\n", "2", ",", "\n", "12", ",", "\n", "0", ",", "\n", "5", ",", "\n", "19", ",", "\n", "]", ",", "\n", "[", "\n", "17", ",", "\n", "14", ",", "\n", "6", ",", "\n", "8", ",", "\n", "15", ",", "\n", "16", ",", "\n", "1", ",", "\n", "19", ",", "\n", "9", ",", "\n", "28", ",", "\n", "22", ",", "\n", "7", ",", "\n", "11", ",", "\n", "18", ",", "\n", "12", ",", "\n", "26", ",", "\n", "13", ",", "\n", "21", ",", "\n", "20", ",", "\n", "23", ",", "\n", "4", ",", "\n", "29", ",", "\n", "2", ",", "\n", "24", ",", "\n", "10", ",", "\n", "0", ",", "\n", "3", ",", "\n", "25", ",", "\n", "5", ",", "\n", "27", ",", "\n", "]", ",", "\n", "[", "\n", "12", ",", "\n", "13", ",", "\n", "5", ",", "\n", "25", ",", "\n", "19", ",", "\n", "28", ",", "\n", "23", ",", "\n", "26", ",", "\n", "16", ",", "\n", "10", ",", "\n", "6", ",", "\n", "1", ",", "\n", "27", ",", "\n", "18", ",", "\n", "8", ",", "\n", "14", ",", "\n", "7", ",", "\n", "22", ",", "\n", "11", ",", "\n", "2", ",", "\n", "24", ",", "\n", "9", ",", "\n", "29", ",", "\n", "3", ",", "\n", "15", ",", "\n", "21", ",", "\n", "4", ",", "\n", "17", ",", "\n", "0", ",", "\n", "20", ",", "\n", "]", ",", "\n", "[", "\n", "29", ",", "\n", "14", ",", "\n", "5", ",", "\n", "11", ",", "\n", "25", ",", "\n", "16", ",", "\n", "15", ",", "\n", "17", ",", "\n", "0", ",", "\n", "13", ",", "\n", "21", ",", "\n", "18", ",", "\n", "6", ",", "\n", "10", ",", "\n", "19", ",", "\n", "28", ",", "\n", "7", ",", "\n", "9", ",", "\n", "20", ",", "\n", "2", ",", "\n", "1", ",", "\n", "8", ",", "\n", "4", ",", "\n", "26", ",", "\n", "27", ",", "\n", "12", ",", "\n", "23", ",", "\n", "24", ",", "\n", "3", ",", "\n", "22", ",", "\n", "]", ",", "\n", "[", "\n", "29", ",", "\n", "26", ",", "\n", "25", ",", "\n", "6", ",", "\n", "8", ",", "\n", "1", ",", "\n", "14", ",", "\n", "4", ",", "\n", "5", ",", "\n", "22", ",", "\n", "18", ",", "\n", "11", ",", "\n", "9", ",", "\n", "17", ",", "\n", "13", ",", "\n", "27", ",", "\n", "19", ",", "\n", "12", ",", "\n", "28", ",", "\n", "21", ",", "\n", "24", ",", "\n", "0", ",", "\n", "15", ",", "\n", "20", ",", "\n", "16", ",", "\n", "3", ",", "\n", "2", ",", "\n", "23", ",", "\n", "10", ",", "\n", "7", ",", "\n", "]", ",", "\n", "[", "\n", "14", ",", "\n", "25", ",", "\n", "9", ",", "\n", "6", ",", "\n", "5", ",", "\n", "24", ",", "\n", "18", ",", "\n", "3", ",", "\n", "21", ",", "\n", "29", ",", "\n", "19", ",", "\n", "26", ",", "\n", "16", ",", "\n", "8", ",", "\n", "28", ",", "\n", "12", ",", "\n", "13", ",", "\n", "27", ",", "\n", "7", ",", "\n", "11", ",", "\n", "2", ",", "\n", "17", ",", "\n", "23", ",", "\n", "15", ",", "\n", "22", ",", "\n", "4", ",", "\n", "1", ",", "\n", "10", ",", "\n", "0", ",", "\n", "20", ",", "\n", "]", ",", "\n", "[", "\n", "6", ",", "\n", "1", ",", "\n", "19", ",", "\n", "15", ",", "\n", "8", ",", "\n", "17", ",", "\n", "10", ",", "\n", "0", ",", "\n", "4", ",", "\n", "13", ",", "\n", "16", ",", "\n", "25", ",", "\n", "14", ",", "\n", "22", ",", "\n", "11", ",", "\n", "5", ",", "\n", "2", ",", "\n", "28", ",", "\n", "23", ",", "\n", "20", ",", "\n", "3", ",", "\n", "27", ",", "\n", "9", ",", "\n", "18", ",", "\n", "21", ",", "\n", "29", ",", "\n", "7", ",", "\n", "26", ",", "\n", "12", ",", "\n", "24", ",", "\n", "]", ",", "\n", "[", "\n", "11", ",", "\n", "5", ",", "\n", "15", ",", "\n", "14", ",", "\n", "1", ",", "\n", "8", ",", "\n", "16", ",", "\n", "26", ",", "\n", "23", ",", "\n", "0", ",", "\n", "17", ",", "\n", "12", ",", "\n", "24", ",", "\n", "3", ",", "\n", "10", ",", "\n", "20", ",", "\n", "21", ",", "\n", "29", ",", "\n", "27", ",", "\n", "4", ",", "\n", "22", ",", "\n", "7", ",", "\n", "2", ",", "\n", "25", ",", "\n", "13", ",", "\n", "18", ",", "\n", "9", ",", "\n", "6", ",", "\n", "19", ",", "\n", "28", ",", "\n", "]", ",", "\n", "[", "\n", "22", ",", "\n", "8", ",", "\n", "16", ",", "\n", "13", ",", "\n", "9", ",", "\n", "0", ",", "\n", "6", ",", "\n", "19", ",", "\n", "14", ",", "\n", "26", ",", "\n", "25", ",", "\n", "5", ",", "\n", "7", ",", "\n", "27", ",", "\n", "17", ",", "\n", "18", ",", "\n", "12", ",", "\n", "11", ",", "\n", "29", ",", "\n", "4", ",", "\n", "10", ",", "\n", "20", ",", "\n", "3", ",", "\n", "24", ",", "\n", "21", ",", "\n", "2", ",", "\n", "28", ",", "\n", "1", ",", "\n", "15", ",", "\n", "23", ",", "\n", "]", ",", "\n", "[", "\n", "23", ",", "\n", "3", ",", "\n", "20", ",", "\n", "24", ",", "\n", "5", ",", "\n", "16", ",", "\n", "18", ",", "\n", "15", ",", "\n", "6", ",", "\n", "19", ",", "\n", "9", ",", "\n", "26", ",", "\n", "28", ",", "\n", "27", ",", "\n", "8", ",", "\n", "12", ",", "\n", "7", ",", "\n", "1", ",", "\n", "11", ",", "\n", "14", ",", "\n", "21", ",", "\n", "10", ",", "\n", "25", ",", "\n", "29", ",", "\n", "4", ",", "\n", "22", ",", "\n", "17", ",", "\n", "2", ",", "\n", "0", ",", "\n", "13", ",", "\n", "]", ",", "\n", "[", "\n", "19", ",", "\n", "15", ",", "\n", "28", ",", "\n", "24", ",", "\n", "26", ",", "\n", "11", ",", "\n", "5", ",", "\n", "0", ",", "\n", "16", ",", "\n", "17", ",", "\n", "22", ",", "\n", "7", ",", "\n", "3", ",", "\n", "6", ",", "\n", "10", ",", "\n", "12", ",", "\n", "14", ",", "\n", "8", ",", "\n", "20", ",", "\n", "1", ",", "\n", "29", ",", "\n", "2", ",", "\n", "9", ",", "\n", "23", ",", "\n", "13", ",", "\n", "21", ",", "\n", "27", ",", "\n", "25", ",", "\n", "4", ",", "\n", "18", ",", "\n", "]", ",", "\n", "[", "\n", "6", ",", "\n", "2", ",", "\n", "26", ",", "\n", "9", ",", "\n", "17", ",", "\n", "11", ",", "\n", "5", ",", "\n", "0", ",", "\n", "20", ",", "\n", "15", ",", "\n", "1", ",", "\n", "16", ",", "\n", "10", ",", "\n", "7", ",", "\n", "22", ",", "\n", "14", ",", "\n", "4", ",", "\n", "18", ",", "\n", "21", ",", "\n", "29", ",", "\n", "27", ",", "\n", "24", ",", "\n", "13", ",", "\n", "8", ",", "\n", "28", ",", "\n", "19", ",", "\n", "12", ",", "\n", "25", ",", "\n", "3", ",", "\n", "23", ",", "\n", "]", ",", "\n", "[", "\n", "19", ",", "\n", "20", ",", "\n", "25", ",", "\n", "13", ",", "\n", "1", ",", "\n", "5", ",", "\n", "16", ",", "\n", "28", ",", "\n", "9", ",", "\n", "26", ",", "\n", "8", ",", "\n", "17", ",", "\n", "23", ",", "\n", "11", ",", "\n", "6", ",", "\n", "18", ",", "\n", "14", ",", "\n", "10", ",", "\n", "21", ",", "\n", "22", ",", "\n", "2", ",", "\n", "4", ",", "\n", "27", ",", "\n", "3", ",", "\n", "7", ",", "\n", "15", ",", "\n", "29", ",", "\n", "24", ",", "\n", "12", ",", "\n", "0", ",", "\n", "]", ",", "\n", "[", "\n", "28", ",", "\n", "20", ",", "\n", "11", ",", "\n", "13", ",", "\n", "16", ",", "\n", "21", ",", "\n", "27", ",", "\n", "26", ",", "\n", "8", ",", "\n", "6", ",", "\n", "0", ",", "\n", "17", ",", "\n", "18", ",", "\n", "10", ",", "\n", "15", ",", "\n", "23", ",", "\n", "9", ",", "\n", "1", ",", "\n", "22", ",", "\n", "24", ",", "\n", "25", ",", "\n", "29", ",", "\n", "3", ",", "\n", "2", ",", "\n", "5", ",", "\n", "4", ",", "\n", "19", ",", "\n", "7", ",", "\n", "12", ",", "\n", "14", ",", "\n", "]", ",", "\n", "[", "\n", "25", ",", "\n", "22", ",", "\n", "5", ",", "\n", "6", ",", "\n", "10", ",", "\n", "29", ",", "\n", "28", ",", "\n", "3", ",", "\n", "13", ",", "\n", "16", ",", "\n", "21", ",", "\n", "9", ",", "\n", "7", ",", "\n", "14", ",", "\n", "26", ",", "\n", "19", ",", "\n", "1", ",", "\n", "15", ",", "\n", "12", ",", "\n", "23", ",", "\n", "0", ",", "\n", "24", ",", "\n", "2", ",", "\n", "27", ",", "\n", "11", ",", "\n", "20", ",", "\n", "18", ",", "\n", "17", ",", "\n", "8", ",", "\n", "4", ",", "\n", "]", ",", "\n", "[", "\n", "5", ",", "\n", "29", ",", "\n", "11", ",", "\n", "26", ",", "\n", "0", ",", "\n", "6", ",", "\n", "8", ",", "\n", "10", ",", "\n", "27", ",", "\n", "22", ",", "\n", "7", ",", "\n", "16", ",", "\n", "17", ",", "\n", "1", ",", "\n", "9", ",", "\n", "14", ",", "\n", "28", ",", "\n", "2", ",", "\n", "3", ",", "\n", "21", ",", "\n", "23", ",", "\n", "19", ",", "\n", "12", ",", "\n", "15", ",", "\n", "13", ",", "\n", "18", ",", "\n", "20", ",", "\n", "24", ",", "\n", "25", ",", "\n", "4", ",", "\n", "]", ",", "\n", "]", "\n", "done", "=", "False", "\n", "machine_nb", "=", "len", "(", "solution_sequence", ")", "\n", "job_nb", "=", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", "index_machine", "=", "[", "0", "for", "_", "in", "range", "(", "machine_nb", ")", "]", "\n", "step_nb", "=", "0", "\n", "while", "not", "done", ":", "\n", "# if we haven't performed any action, we go to the next time step", "\n", "            ", "no_op", "=", "True", "\n", "for", "machine", "in", "range", "(", "len", "(", "solution_sequence", ")", ")", ":", "\n", "                ", "if", "done", ":", "\n", "                    ", "break", "\n", "", "if", "env", ".", "machine_legal", "[", "machine", "]", "and", "index_machine", "[", "machine", "]", "<", "job_nb", ":", "\n", "                    ", "action_to_do", "=", "solution_sequence", "[", "machine", "]", "[", "index_machine", "[", "machine", "]", "]", "\n", "if", "(", "\n", "env", ".", "needed_machine_jobs", "[", "action_to_do", "]", "==", "machine", "\n", "and", "env", ".", "legal_actions", "[", "action_to_do", "]", "\n", ")", ":", "\n", "                        ", "no_op", "=", "False", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "legal_actions", "[", "action_to_do", "]", ",", "\n", "\"We don't perform illegal actions\"", ",", "\n", ")", "\n", "self", ".", "assertEqual", "(", "\n", "sum", "(", "env", ".", "legal_actions", "[", ":", "-", "1", "]", ")", ",", "env", ".", "nb_legal_actions", "\n", ")", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "action_to_do", ")", "\n", "index_machine", "[", "machine", "]", "+=", "1", "\n", "step_nb", "+=", "1", "\n", "", "", "", "if", "no_op", "and", "not", "done", ":", "\n", "                ", "self", ".", "assertTrue", "(", "len", "(", "env", ".", "next_time_step", ")", ">", "0", ",", "\"step {}\"", ".", "format", "(", "step_nb", ")", ")", "\n", "previous_time_step", "=", "env", ".", "current_time_step", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "env", ".", "jobs", ")", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "current_time_step", ">", "previous_time_step", ",", "\n", "\"we increase the time step\"", ",", "\n", ")", "\n", "", "", "self", ".", "assertEqual", "(", "\n", "sum", "(", "index_machine", ")", ",", "len", "(", "solution_sequence", ")", "*", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "2006", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.tests.test_solutions.TestSolution.test_optimum_ta47": [[4254, 4949], ["gym.make", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "len", "len", "test_solutions.TestSolution.assertEqual", "test_solutions.TestSolution.assertEqual", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "range", "sum", "range", "len", "test_solutions.TestSolution.assertTrue", "gym.make.step", "test_solutions.TestSolution.assertTrue", "len", "len", "test_solutions.TestSolution.assertTrue", "test_solutions.TestSolution.assertEqual", "gym.make.step", "len", "str", "sum", "pathlib.Path().parent.absolute", "pathlib.Path"], "methods", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.make", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step"], ["", "def", "test_optimum_ta47", "(", "self", ")", ":", "\n", "# http://optimizizer.com/solution.php?name=ta47&UB=1889&problemclass=ta", "\n", "        ", "env", "=", "gym", ".", "make", "(", "\n", "\"jss-v1\"", ",", "\n", "env_config", "=", "{", "\n", "\"instance_path\"", ":", "f\"{str(Path(__file__).parent.absolute())}/../JSSEnv/envs/instances/ta47\"", "\n", "}", ",", "\n", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "# for every machine give the jobs to process in order for every machine", "\n", "solution_sequence", "=", "[", "\n", "[", "\n", "15", ",", "\n", "8", ",", "\n", "19", ",", "\n", "23", ",", "\n", "1", ",", "\n", "11", ",", "\n", "25", ",", "\n", "26", ",", "\n", "24", ",", "\n", "28", ",", "\n", "16", ",", "\n", "2", ",", "\n", "4", ",", "\n", "7", ",", "\n", "18", ",", "\n", "0", ",", "\n", "14", ",", "\n", "20", ",", "\n", "13", ",", "\n", "12", ",", "\n", "29", ",", "\n", "27", ",", "\n", "21", ",", "\n", "3", ",", "\n", "10", ",", "\n", "5", ",", "\n", "6", ",", "\n", "9", ",", "\n", "17", ",", "\n", "22", ",", "\n", "]", ",", "\n", "[", "\n", "16", ",", "\n", "17", ",", "\n", "7", ",", "\n", "8", ",", "\n", "1", ",", "\n", "0", ",", "\n", "23", ",", "\n", "15", ",", "\n", "3", ",", "\n", "28", ",", "\n", "18", ",", "\n", "25", ",", "\n", "26", ",", "\n", "6", ",", "\n", "27", ",", "\n", "2", ",", "\n", "19", ",", "\n", "14", ",", "\n", "29", ",", "\n", "11", ",", "\n", "10", ",", "\n", "13", ",", "\n", "22", ",", "\n", "4", ",", "\n", "12", ",", "\n", "24", ",", "\n", "21", ",", "\n", "5", ",", "\n", "20", ",", "\n", "9", ",", "\n", "]", ",", "\n", "[", "\n", "3", ",", "\n", "20", ",", "\n", "8", ",", "\n", "6", ",", "\n", "28", ",", "\n", "23", ",", "\n", "27", ",", "\n", "4", ",", "\n", "18", ",", "\n", "1", ",", "\n", "22", ",", "\n", "2", ",", "\n", "16", ",", "\n", "19", ",", "\n", "0", ",", "\n", "24", ",", "\n", "9", ",", "\n", "26", ",", "\n", "21", ",", "\n", "11", ",", "\n", "12", ",", "\n", "14", ",", "\n", "25", ",", "\n", "5", ",", "\n", "15", ",", "\n", "29", ",", "\n", "10", ",", "\n", "17", ",", "\n", "13", ",", "\n", "7", ",", "\n", "]", ",", "\n", "[", "\n", "17", ",", "\n", "12", ",", "\n", "15", ",", "\n", "28", ",", "\n", "24", ",", "\n", "11", ",", "\n", "13", ",", "\n", "8", ",", "\n", "2", ",", "\n", "1", ",", "\n", "29", ",", "\n", "18", ",", "\n", "16", ",", "\n", "9", ",", "\n", "4", ",", "\n", "26", ",", "\n", "7", ",", "\n", "10", ",", "\n", "25", ",", "\n", "5", ",", "\n", "0", ",", "\n", "14", ",", "\n", "21", ",", "\n", "22", ",", "\n", "20", ",", "\n", "6", ",", "\n", "27", ",", "\n", "3", ",", "\n", "19", ",", "\n", "23", ",", "\n", "]", ",", "\n", "[", "\n", "1", ",", "\n", "23", ",", "\n", "8", ",", "\n", "15", ",", "\n", "12", ",", "\n", "27", ",", "\n", "6", ",", "\n", "14", ",", "\n", "4", ",", "\n", "18", ",", "\n", "26", ",", "\n", "25", ",", "\n", "7", ",", "\n", "3", ",", "\n", "11", ",", "\n", "21", ",", "\n", "24", ",", "\n", "5", ",", "\n", "16", ",", "\n", "28", ",", "\n", "20", ",", "\n", "13", ",", "\n", "2", ",", "\n", "22", ",", "\n", "17", ",", "\n", "10", ",", "\n", "19", ",", "\n", "0", ",", "\n", "29", ",", "\n", "9", ",", "\n", "]", ",", "\n", "[", "\n", "13", ",", "\n", "5", ",", "\n", "24", ",", "\n", "28", ",", "\n", "19", ",", "\n", "1", ",", "\n", "22", ",", "\n", "7", ",", "\n", "16", ",", "\n", "12", ",", "\n", "23", ",", "\n", "3", ",", "\n", "6", ",", "\n", "15", ",", "\n", "11", ",", "\n", "18", ",", "\n", "25", ",", "\n", "26", ",", "\n", "29", ",", "\n", "8", ",", "\n", "9", ",", "\n", "21", ",", "\n", "2", ",", "\n", "20", ",", "\n", "17", ",", "\n", "0", ",", "\n", "14", ",", "\n", "27", ",", "\n", "10", ",", "\n", "4", ",", "\n", "]", ",", "\n", "[", "\n", "9", ",", "\n", "24", ",", "\n", "28", ",", "\n", "3", ",", "\n", "5", ",", "\n", "7", ",", "\n", "8", ",", "\n", "1", ",", "\n", "13", ",", "\n", "12", ",", "\n", "6", ",", "\n", "19", ",", "\n", "21", ",", "\n", "0", ",", "\n", "18", ",", "\n", "29", ",", "\n", "4", ",", "\n", "20", ",", "\n", "10", ",", "\n", "17", ",", "\n", "23", ",", "\n", "27", ",", "\n", "15", ",", "\n", "25", ",", "\n", "22", ",", "\n", "16", ",", "\n", "11", ",", "\n", "14", ",", "\n", "2", ",", "\n", "26", ",", "\n", "]", ",", "\n", "[", "\n", "14", ",", "\n", "0", ",", "\n", "7", ",", "\n", "12", ",", "\n", "18", ",", "\n", "15", ",", "\n", "10", ",", "\n", "24", ",", "\n", "27", ",", "\n", "6", ",", "\n", "16", ",", "\n", "17", ",", "\n", "23", ",", "\n", "19", ",", "\n", "11", ",", "\n", "13", ",", "\n", "20", ",", "\n", "29", ",", "\n", "21", ",", "\n", "5", ",", "\n", "26", ",", "\n", "1", ",", "\n", "9", ",", "\n", "3", ",", "\n", "4", ",", "\n", "25", ",", "\n", "2", ",", "\n", "22", ",", "\n", "8", ",", "\n", "28", ",", "\n", "]", ",", "\n", "[", "\n", "4", ",", "\n", "1", ",", "\n", "21", ",", "\n", "6", ",", "\n", "15", ",", "\n", "23", ",", "\n", "18", ",", "\n", "24", ",", "\n", "0", ",", "\n", "12", ",", "\n", "5", ",", "\n", "26", ",", "\n", "7", ",", "\n", "11", ",", "\n", "13", ",", "\n", "14", ",", "\n", "17", ",", "\n", "27", ",", "\n", "9", ",", "\n", "8", ",", "\n", "3", ",", "\n", "16", ",", "\n", "28", ",", "\n", "22", ",", "\n", "19", ",", "\n", "25", ",", "\n", "20", ",", "\n", "29", ",", "\n", "2", ",", "\n", "10", ",", "\n", "]", ",", "\n", "[", "\n", "25", ",", "\n", "21", ",", "\n", "19", ",", "\n", "20", ",", "\n", "18", ",", "\n", "6", ",", "\n", "15", ",", "\n", "5", ",", "\n", "28", ",", "\n", "24", ",", "\n", "3", ",", "\n", "27", ",", "\n", "12", ",", "\n", "2", ",", "\n", "10", ",", "\n", "4", ",", "\n", "17", ",", "\n", "7", ",", "\n", "29", ",", "\n", "8", ",", "\n", "1", ",", "\n", "14", ",", "\n", "9", ",", "\n", "22", ",", "\n", "16", ",", "\n", "26", ",", "\n", "13", ",", "\n", "11", ",", "\n", "23", ",", "\n", "0", ",", "\n", "]", ",", "\n", "[", "\n", "29", ",", "\n", "2", ",", "\n", "18", ",", "\n", "24", ",", "\n", "4", ",", "\n", "23", ",", "\n", "15", ",", "\n", "5", ",", "\n", "14", ",", "\n", "1", ",", "\n", "0", ",", "\n", "11", ",", "\n", "13", ",", "\n", "16", ",", "\n", "7", ",", "\n", "27", ",", "\n", "10", ",", "\n", "19", ",", "\n", "9", ",", "\n", "28", ",", "\n", "12", ",", "\n", "25", ",", "\n", "22", ",", "\n", "3", ",", "\n", "17", ",", "\n", "21", ",", "\n", "8", ",", "\n", "6", ",", "\n", "20", ",", "\n", "26", ",", "\n", "]", ",", "\n", "[", "\n", "0", ",", "\n", "18", ",", "\n", "16", ",", "\n", "15", ",", "\n", "10", ",", "\n", "24", ",", "\n", "29", ",", "\n", "1", ",", "\n", "11", ",", "\n", "25", ",", "\n", "14", ",", "\n", "3", ",", "\n", "2", ",", "\n", "19", ",", "\n", "6", ",", "\n", "9", ",", "\n", "27", ",", "\n", "8", ",", "\n", "5", ",", "\n", "4", ",", "\n", "7", ",", "\n", "26", ",", "\n", "22", ",", "\n", "28", ",", "\n", "12", ",", "\n", "21", ",", "\n", "20", ",", "\n", "23", ",", "\n", "13", ",", "\n", "17", ",", "\n", "]", ",", "\n", "[", "\n", "8", ",", "\n", "13", ",", "\n", "10", ",", "\n", "17", ",", "\n", "0", ",", "\n", "18", ",", "\n", "3", ",", "\n", "1", ",", "\n", "7", ",", "\n", "28", ",", "\n", "14", ",", "\n", "16", ",", "\n", "19", ",", "\n", "5", ",", "\n", "12", ",", "\n", "2", ",", "\n", "25", ",", "\n", "15", ",", "\n", "29", ",", "\n", "24", ",", "\n", "4", ",", "\n", "21", ",", "\n", "26", ",", "\n", "27", ",", "\n", "20", ",", "\n", "23", ",", "\n", "9", ",", "\n", "6", ",", "\n", "22", ",", "\n", "11", ",", "\n", "]", ",", "\n", "[", "\n", "9", ",", "\n", "19", ",", "\n", "20", ",", "\n", "15", ",", "\n", "5", ",", "\n", "27", ",", "\n", "3", ",", "\n", "14", ",", "\n", "1", ",", "\n", "23", ",", "\n", "13", ",", "\n", "12", ",", "\n", "2", ",", "\n", "11", ",", "\n", "6", ",", "\n", "0", ",", "\n", "18", ",", "\n", "16", ",", "\n", "28", ",", "\n", "17", ",", "\n", "24", ",", "\n", "22", ",", "\n", "25", ",", "\n", "21", ",", "\n", "29", ",", "\n", "7", ",", "\n", "26", ",", "\n", "8", ",", "\n", "4", ",", "\n", "10", ",", "\n", "]", ",", "\n", "[", "\n", "20", ",", "\n", "13", ",", "\n", "2", ",", "\n", "15", ",", "\n", "3", ",", "\n", "8", ",", "\n", "19", ",", "\n", "25", ",", "\n", "28", ",", "\n", "7", ",", "\n", "23", ",", "\n", "6", ",", "\n", "9", ",", "\n", "0", ",", "\n", "21", ",", "\n", "5", ",", "\n", "29", ",", "\n", "11", ",", "\n", "10", ",", "\n", "12", ",", "\n", "1", ",", "\n", "26", ",", "\n", "14", ",", "\n", "4", ",", "\n", "24", ",", "\n", "17", ",", "\n", "27", ",", "\n", "16", ",", "\n", "22", ",", "\n", "18", ",", "\n", "]", ",", "\n", "[", "\n", "3", ",", "\n", "15", ",", "\n", "18", ",", "\n", "17", ",", "\n", "19", ",", "\n", "27", ",", "\n", "11", ",", "\n", "12", ",", "\n", "24", ",", "\n", "1", ",", "\n", "5", ",", "\n", "7", ",", "\n", "28", ",", "\n", "26", ",", "\n", "20", ",", "\n", "14", ",", "\n", "13", ",", "\n", "21", ",", "\n", "23", ",", "\n", "29", ",", "\n", "9", ",", "\n", "25", ",", "\n", "0", ",", "\n", "10", ",", "\n", "4", ",", "\n", "22", ",", "\n", "16", ",", "\n", "8", ",", "\n", "6", ",", "\n", "2", ",", "\n", "]", ",", "\n", "[", "\n", "21", ",", "\n", "7", ",", "\n", "0", ",", "\n", "20", ",", "\n", "4", ",", "\n", "9", ",", "\n", "8", ",", "\n", "26", ",", "\n", "5", ",", "\n", "15", ",", "\n", "14", ",", "\n", "22", ",", "\n", "3", ",", "\n", "19", ",", "\n", "27", ",", "\n", "1", ",", "\n", "24", ",", "\n", "18", ",", "\n", "17", ",", "\n", "28", ",", "\n", "23", ",", "\n", "2", ",", "\n", "13", ",", "\n", "16", ",", "\n", "11", ",", "\n", "29", ",", "\n", "6", ",", "\n", "25", ",", "\n", "12", ",", "\n", "10", ",", "\n", "]", ",", "\n", "[", "\n", "4", ",", "\n", "26", ",", "\n", "9", ",", "\n", "15", ",", "\n", "21", ",", "\n", "1", ",", "\n", "3", ",", "\n", "27", ",", "\n", "28", ",", "\n", "16", ",", "\n", "19", ",", "\n", "29", ",", "\n", "8", ",", "\n", "10", ",", "\n", "24", ",", "\n", "12", ",", "\n", "18", ",", "\n", "0", ",", "\n", "25", ",", "\n", "13", ",", "\n", "11", ",", "\n", "6", ",", "\n", "20", ",", "\n", "5", ",", "\n", "14", ",", "\n", "23", ",", "\n", "7", ",", "\n", "17", ",", "\n", "22", ",", "\n", "2", ",", "\n", "]", ",", "\n", "[", "\n", "25", ",", "\n", "28", ",", "\n", "10", ",", "\n", "11", ",", "\n", "9", ",", "\n", "23", ",", "\n", "16", ",", "\n", "26", ",", "\n", "14", ",", "\n", "15", ",", "\n", "0", ",", "\n", "1", ",", "\n", "21", ",", "\n", "7", ",", "\n", "20", ",", "\n", "3", ",", "\n", "2", ",", "\n", "12", ",", "\n", "13", ",", "\n", "27", ",", "\n", "29", ",", "\n", "5", ",", "\n", "6", ",", "\n", "24", ",", "\n", "19", ",", "\n", "17", ",", "\n", "18", ",", "\n", "22", ",", "\n", "4", ",", "\n", "8", ",", "\n", "]", ",", "\n", "[", "\n", "16", ",", "\n", "2", ",", "\n", "0", ",", "\n", "1", ",", "\n", "3", ",", "\n", "6", ",", "\n", "9", ",", "\n", "20", ",", "\n", "4", ",", "\n", "18", ",", "\n", "28", ",", "\n", "5", ",", "\n", "8", ",", "\n", "22", ",", "\n", "23", ",", "\n", "21", ",", "\n", "25", ",", "\n", "11", ",", "\n", "24", ",", "\n", "14", ",", "\n", "10", ",", "\n", "26", ",", "\n", "17", ",", "\n", "19", ",", "\n", "15", ",", "\n", "29", ",", "\n", "12", ",", "\n", "7", ",", "\n", "27", ",", "\n", "13", ",", "\n", "]", ",", "\n", "]", "\n", "done", "=", "False", "\n", "machine_nb", "=", "len", "(", "solution_sequence", ")", "\n", "job_nb", "=", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", "index_machine", "=", "[", "0", "for", "_", "in", "range", "(", "machine_nb", ")", "]", "\n", "step_nb", "=", "0", "\n", "while", "not", "done", ":", "\n", "# if we haven't performed any action, we go to the next time step", "\n", "            ", "no_op", "=", "True", "\n", "for", "machine", "in", "range", "(", "len", "(", "solution_sequence", ")", ")", ":", "\n", "                ", "if", "done", ":", "\n", "                    ", "break", "\n", "", "if", "env", ".", "machine_legal", "[", "machine", "]", "and", "index_machine", "[", "machine", "]", "<", "job_nb", ":", "\n", "                    ", "action_to_do", "=", "solution_sequence", "[", "machine", "]", "[", "index_machine", "[", "machine", "]", "]", "\n", "if", "(", "\n", "env", ".", "needed_machine_jobs", "[", "action_to_do", "]", "==", "machine", "\n", "and", "env", ".", "legal_actions", "[", "action_to_do", "]", "\n", ")", ":", "\n", "                        ", "no_op", "=", "False", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "legal_actions", "[", "action_to_do", "]", ",", "\n", "\"We don't perform illegal actions\"", ",", "\n", ")", "\n", "self", ".", "assertEqual", "(", "\n", "sum", "(", "env", ".", "legal_actions", "[", ":", "-", "1", "]", ")", ",", "env", ".", "nb_legal_actions", "\n", ")", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "action_to_do", ")", "\n", "index_machine", "[", "machine", "]", "+=", "1", "\n", "step_nb", "+=", "1", "\n", "", "", "", "if", "no_op", "and", "not", "done", ":", "\n", "                ", "self", ".", "assertTrue", "(", "len", "(", "env", ".", "next_time_step", ")", ">", "0", ",", "\"step {}\"", ".", "format", "(", "step_nb", ")", ")", "\n", "previous_time_step", "=", "env", ".", "current_time_step", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "env", ".", "jobs", ")", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "current_time_step", ">", "previous_time_step", ",", "\n", "\"we increase the time step\"", ",", "\n", ")", "\n", "", "", "self", ".", "assertEqual", "(", "\n", "sum", "(", "index_machine", ")", ",", "len", "(", "solution_sequence", ")", "*", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "1889", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.tests.test_solutions.TestSolution.test_optimum_ta48": [[4950, 5645], ["gym.make", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "len", "len", "test_solutions.TestSolution.assertEqual", "test_solutions.TestSolution.assertEqual", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "range", "sum", "range", "len", "test_solutions.TestSolution.assertTrue", "gym.make.step", "test_solutions.TestSolution.assertTrue", "len", "len", "test_solutions.TestSolution.assertTrue", "test_solutions.TestSolution.assertEqual", "gym.make.step", "len", "str", "sum", "pathlib.Path().parent.absolute", "pathlib.Path"], "methods", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.make", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step"], ["", "def", "test_optimum_ta48", "(", "self", ")", ":", "\n", "# http://optimizizer.com/solution.php?name=ta48&UB=1937&problemclass=ta", "\n", "        ", "env", "=", "gym", ".", "make", "(", "\n", "\"jss-v1\"", ",", "\n", "env_config", "=", "{", "\n", "\"instance_path\"", ":", "f\"{str(Path(__file__).parent.absolute())}/../JSSEnv/envs/instances/ta48\"", "\n", "}", ",", "\n", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "# for every machine give the jobs to process in order for every machine", "\n", "solution_sequence", "=", "[", "\n", "[", "\n", "24", ",", "\n", "13", ",", "\n", "22", ",", "\n", "18", ",", "\n", "2", ",", "\n", "15", ",", "\n", "9", ",", "\n", "11", ",", "\n", "12", ",", "\n", "25", ",", "\n", "5", ",", "\n", "29", ",", "\n", "8", ",", "\n", "16", ",", "\n", "4", ",", "\n", "14", ",", "\n", "17", ",", "\n", "21", ",", "\n", "27", ",", "\n", "7", ",", "\n", "0", ",", "\n", "3", ",", "\n", "23", ",", "\n", "20", ",", "\n", "28", ",", "\n", "19", ",", "\n", "10", ",", "\n", "6", ",", "\n", "1", ",", "\n", "26", ",", "\n", "]", ",", "\n", "[", "\n", "28", ",", "\n", "26", ",", "\n", "24", ",", "\n", "22", ",", "\n", "8", ",", "\n", "23", ",", "\n", "4", ",", "\n", "16", ",", "\n", "2", ",", "\n", "14", ",", "\n", "12", ",", "\n", "5", ",", "\n", "9", ",", "\n", "10", ",", "\n", "7", ",", "\n", "27", ",", "\n", "20", ",", "\n", "19", ",", "\n", "13", ",", "\n", "29", ",", "\n", "18", ",", "\n", "3", ",", "\n", "17", ",", "\n", "21", ",", "\n", "0", ",", "\n", "1", ",", "\n", "11", ",", "\n", "15", ",", "\n", "6", ",", "\n", "25", ",", "\n", "]", ",", "\n", "[", "\n", "1", ",", "\n", "13", ",", "\n", "10", ",", "\n", "12", ",", "\n", "7", ",", "\n", "29", ",", "\n", "23", ",", "\n", "5", ",", "\n", "27", ",", "\n", "24", ",", "\n", "19", ",", "\n", "3", ",", "\n", "6", ",", "\n", "26", ",", "\n", "22", ",", "\n", "15", ",", "\n", "8", ",", "\n", "21", ",", "\n", "25", ",", "\n", "0", ",", "\n", "2", ",", "\n", "14", ",", "\n", "28", ",", "\n", "17", ",", "\n", "11", ",", "\n", "20", ",", "\n", "16", ",", "\n", "18", ",", "\n", "4", ",", "\n", "9", ",", "\n", "]", ",", "\n", "[", "\n", "17", ",", "\n", "9", ",", "\n", "4", ",", "\n", "27", ",", "\n", "13", ",", "\n", "16", ",", "\n", "8", ",", "\n", "2", ",", "\n", "5", ",", "\n", "25", ",", "\n", "20", ",", "\n", "15", ",", "\n", "12", ",", "\n", "14", ",", "\n", "3", ",", "\n", "7", ",", "\n", "28", ",", "\n", "6", ",", "\n", "24", ",", "\n", "18", ",", "\n", "21", ",", "\n", "19", ",", "\n", "10", ",", "\n", "23", ",", "\n", "1", ",", "\n", "26", ",", "\n", "0", ",", "\n", "29", ",", "\n", "11", ",", "\n", "22", ",", "\n", "]", ",", "\n", "[", "\n", "8", ",", "\n", "1", ",", "\n", "24", ",", "\n", "25", ",", "\n", "28", ",", "\n", "10", ",", "\n", "27", ",", "\n", "16", ",", "\n", "15", ",", "\n", "19", ",", "\n", "12", ",", "\n", "4", ",", "\n", "18", ",", "\n", "7", ",", "\n", "23", ",", "\n", "5", ",", "\n", "13", ",", "\n", "9", ",", "\n", "29", ",", "\n", "3", ",", "\n", "20", ",", "\n", "21", ",", "\n", "2", ",", "\n", "0", ",", "\n", "14", ",", "\n", "22", ",", "\n", "11", ",", "\n", "17", ",", "\n", "26", ",", "\n", "6", ",", "\n", "]", ",", "\n", "[", "\n", "26", ",", "\n", "27", ",", "\n", "29", ",", "\n", "17", ",", "\n", "7", ",", "\n", "11", ",", "\n", "3", ",", "\n", "24", ",", "\n", "4", ",", "\n", "14", ",", "\n", "12", ",", "\n", "18", ",", "\n", "23", ",", "\n", "28", ",", "\n", "20", ",", "\n", "15", ",", "\n", "19", ",", "\n", "0", ",", "\n", "9", ",", "\n", "6", ",", "\n", "16", ",", "\n", "2", ",", "\n", "22", ",", "\n", "10", ",", "\n", "21", ",", "\n", "5", ",", "\n", "1", ",", "\n", "13", ",", "\n", "25", ",", "\n", "8", ",", "\n", "]", ",", "\n", "[", "\n", "29", ",", "\n", "24", ",", "\n", "0", ",", "\n", "25", ",", "\n", "27", ",", "\n", "5", ",", "\n", "23", ",", "\n", "28", ",", "\n", "11", ",", "\n", "22", ",", "\n", "13", ",", "\n", "9", ",", "\n", "20", ",", "\n", "8", ",", "\n", "17", ",", "\n", "21", ",", "\n", "10", ",", "\n", "6", ",", "\n", "2", ",", "\n", "18", ",", "\n", "3", ",", "\n", "12", ",", "\n", "26", ",", "\n", "4", ",", "\n", "15", ",", "\n", "19", ",", "\n", "7", ",", "\n", "1", ",", "\n", "16", ",", "\n", "14", ",", "\n", "]", ",", "\n", "[", "\n", "22", ",", "\n", "12", ",", "\n", "4", ",", "\n", "6", ",", "\n", "19", ",", "\n", "11", ",", "\n", "10", ",", "\n", "2", ",", "\n", "26", ",", "\n", "28", ",", "\n", "24", ",", "\n", "29", ",", "\n", "17", ",", "\n", "23", ",", "\n", "13", ",", "\n", "27", ",", "\n", "18", ",", "\n", "21", ",", "\n", "14", ",", "\n", "16", ",", "\n", "3", ",", "\n", "7", ",", "\n", "20", ",", "\n", "9", ",", "\n", "1", ",", "\n", "0", ",", "\n", "25", ",", "\n", "5", ",", "\n", "8", ",", "\n", "15", ",", "\n", "]", ",", "\n", "[", "\n", "4", ",", "\n", "28", ",", "\n", "13", ",", "\n", "27", ",", "\n", "24", ",", "\n", "9", ",", "\n", "29", ",", "\n", "5", ",", "\n", "7", ",", "\n", "20", ",", "\n", "8", ",", "\n", "25", ",", "\n", "17", ",", "\n", "10", ",", "\n", "18", ",", "\n", "3", ",", "\n", "14", ",", "\n", "23", ",", "\n", "21", ",", "\n", "0", ",", "\n", "6", ",", "\n", "16", ",", "\n", "11", ",", "\n", "2", ",", "\n", "19", ",", "\n", "22", ",", "\n", "15", ",", "\n", "26", ",", "\n", "1", ",", "\n", "12", ",", "\n", "]", ",", "\n", "[", "\n", "3", ",", "\n", "7", ",", "\n", "25", ",", "\n", "4", ",", "\n", "22", ",", "\n", "11", ",", "\n", "5", ",", "\n", "26", ",", "\n", "9", ",", "\n", "24", ",", "\n", "8", ",", "\n", "14", ",", "\n", "29", ",", "\n", "12", ",", "\n", "23", ",", "\n", "19", ",", "\n", "20", ",", "\n", "27", ",", "\n", "6", ",", "\n", "18", ",", "\n", "0", ",", "\n", "2", ",", "\n", "28", ",", "\n", "21", ",", "\n", "16", ",", "\n", "1", ",", "\n", "13", ",", "\n", "17", ",", "\n", "15", ",", "\n", "10", ",", "\n", "]", ",", "\n", "[", "\n", "21", ",", "\n", "3", ",", "\n", "26", ",", "\n", "23", ",", "\n", "13", ",", "\n", "12", ",", "\n", "16", ",", "\n", "9", ",", "\n", "7", ",", "\n", "28", ",", "\n", "29", ",", "\n", "20", ",", "\n", "25", ",", "\n", "22", ",", "\n", "27", ",", "\n", "18", ",", "\n", "4", ",", "\n", "5", ",", "\n", "17", ",", "\n", "14", ",", "\n", "8", ",", "\n", "10", ",", "\n", "0", ",", "\n", "24", ",", "\n", "15", ",", "\n", "19", ",", "\n", "11", ",", "\n", "2", ",", "\n", "6", ",", "\n", "1", ",", "\n", "]", ",", "\n", "[", "\n", "1", ",", "\n", "11", ",", "\n", "18", ",", "\n", "25", ",", "\n", "17", ",", "\n", "26", ",", "\n", "8", ",", "\n", "22", ",", "\n", "19", ",", "\n", "12", ",", "\n", "24", ",", "\n", "28", ",", "\n", "7", ",", "\n", "3", ",", "\n", "4", ",", "\n", "14", ",", "\n", "29", ",", "\n", "9", ",", "\n", "13", ",", "\n", "23", ",", "\n", "0", ",", "\n", "27", ",", "\n", "6", ",", "\n", "20", ",", "\n", "5", ",", "\n", "10", ",", "\n", "15", ",", "\n", "21", ",", "\n", "16", ",", "\n", "2", ",", "\n", "]", ",", "\n", "[", "\n", "24", ",", "\n", "12", ",", "\n", "23", ",", "\n", "1", ",", "\n", "6", ",", "\n", "17", ",", "\n", "18", ",", "\n", "2", ",", "\n", "4", ",", "\n", "13", ",", "\n", "26", ",", "\n", "3", ",", "\n", "15", ",", "\n", "5", ",", "\n", "25", ",", "\n", "8", ",", "\n", "9", ",", "\n", "14", ",", "\n", "28", ",", "\n", "16", ",", "\n", "19", ",", "\n", "27", ",", "\n", "22", ",", "\n", "0", ",", "\n", "7", ",", "\n", "21", ",", "\n", "20", ",", "\n", "10", ",", "\n", "11", ",", "\n", "29", ",", "\n", "]", ",", "\n", "[", "\n", "11", ",", "\n", "29", ",", "\n", "1", ",", "\n", "12", ",", "\n", "17", ",", "\n", "2", ",", "\n", "13", ",", "\n", "5", ",", "\n", "7", ",", "\n", "26", ",", "\n", "28", ",", "\n", "27", ",", "\n", "4", ",", "\n", "23", ",", "\n", "24", ",", "\n", "6", ",", "\n", "18", ",", "\n", "25", ",", "\n", "9", ",", "\n", "0", ",", "\n", "19", ",", "\n", "14", ",", "\n", "3", ",", "\n", "8", ",", "\n", "20", ",", "\n", "16", ",", "\n", "10", ",", "\n", "22", ",", "\n", "15", ",", "\n", "21", ",", "\n", "]", ",", "\n", "[", "\n", "18", ",", "\n", "9", ",", "\n", "22", ",", "\n", "28", ",", "\n", "2", ",", "\n", "26", ",", "\n", "12", ",", "\n", "3", ",", "\n", "29", ",", "\n", "5", ",", "\n", "27", ",", "\n", "13", ",", "\n", "4", ",", "\n", "14", ",", "\n", "19", ",", "\n", "15", ",", "\n", "1", ",", "\n", "7", ",", "\n", "10", ",", "\n", "24", ",", "\n", "17", ",", "\n", "21", ",", "\n", "23", ",", "\n", "20", ",", "\n", "6", ",", "\n", "16", ",", "\n", "8", ",", "\n", "0", ",", "\n", "11", ",", "\n", "25", ",", "\n", "]", ",", "\n", "[", "\n", "23", ",", "\n", "17", ",", "\n", "9", ",", "\n", "10", ",", "\n", "27", ",", "\n", "8", ",", "\n", "28", ",", "\n", "12", ",", "\n", "24", ",", "\n", "15", ",", "\n", "19", ",", "\n", "4", ",", "\n", "20", ",", "\n", "5", ",", "\n", "26", ",", "\n", "29", ",", "\n", "2", ",", "\n", "0", ",", "\n", "25", ",", "\n", "22", ",", "\n", "6", ",", "\n", "11", ",", "\n", "13", ",", "\n", "18", ",", "\n", "16", ",", "\n", "7", ",", "\n", "14", ",", "\n", "3", ",", "\n", "1", ",", "\n", "21", ",", "\n", "]", ",", "\n", "[", "\n", "8", ",", "\n", "12", ",", "\n", "17", ",", "\n", "23", ",", "\n", "2", ",", "\n", "6", ",", "\n", "15", ",", "\n", "10", ",", "\n", "1", ",", "\n", "26", ",", "\n", "27", ",", "\n", "11", ",", "\n", "13", ",", "\n", "9", ",", "\n", "4", ",", "\n", "28", ",", "\n", "19", ",", "\n", "18", ",", "\n", "24", ",", "\n", "7", ",", "\n", "25", ",", "\n", "20", ",", "\n", "5", ",", "\n", "14", ",", "\n", "21", ",", "\n", "0", ",", "\n", "3", ",", "\n", "16", ",", "\n", "29", ",", "\n", "22", ",", "\n", "]", ",", "\n", "[", "\n", "15", ",", "\n", "21", ",", "\n", "9", ",", "\n", "13", ",", "\n", "11", ",", "\n", "29", ",", "\n", "24", ",", "\n", "4", ",", "\n", "12", ",", "\n", "23", ",", "\n", "26", ",", "\n", "28", ",", "\n", "1", ",", "\n", "8", ",", "\n", "16", ",", "\n", "7", ",", "\n", "17", ",", "\n", "20", ",", "\n", "22", ",", "\n", "5", ",", "\n", "0", ",", "\n", "6", ",", "\n", "10", ",", "\n", "14", ",", "\n", "25", ",", "\n", "18", ",", "\n", "2", ",", "\n", "19", ",", "\n", "27", ",", "\n", "3", ",", "\n", "]", ",", "\n", "[", "\n", "23", ",", "\n", "28", ",", "\n", "25", ",", "\n", "2", ",", "\n", "13", ",", "\n", "1", ",", "\n", "29", ",", "\n", "26", ",", "\n", "3", ",", "\n", "9", ",", "\n", "18", ",", "\n", "17", ",", "\n", "12", ",", "\n", "5", ",", "\n", "20", ",", "\n", "10", ",", "\n", "8", ",", "\n", "27", ",", "\n", "6", ",", "\n", "24", ",", "\n", "15", ",", "\n", "22", ",", "\n", "11", ",", "\n", "7", ",", "\n", "21", ",", "\n", "14", ",", "\n", "0", ",", "\n", "4", ",", "\n", "19", ",", "\n", "16", ",", "\n", "]", ",", "\n", "[", "\n", "13", ",", "\n", "12", ",", "\n", "27", ",", "\n", "29", ",", "\n", "17", ",", "\n", "25", ",", "\n", "9", ",", "\n", "2", ",", "\n", "5", ",", "\n", "1", ",", "\n", "19", ",", "\n", "7", ",", "\n", "10", ",", "\n", "21", ",", "\n", "23", ",", "\n", "20", ",", "\n", "3", ",", "\n", "22", ",", "\n", "4", ",", "\n", "16", ",", "\n", "14", ",", "\n", "0", ",", "\n", "8", ",", "\n", "11", ",", "\n", "24", ",", "\n", "15", ",", "\n", "6", ",", "\n", "28", ",", "\n", "18", ",", "\n", "26", ",", "\n", "]", ",", "\n", "]", "\n", "done", "=", "False", "\n", "machine_nb", "=", "len", "(", "solution_sequence", ")", "\n", "job_nb", "=", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", "index_machine", "=", "[", "0", "for", "_", "in", "range", "(", "machine_nb", ")", "]", "\n", "step_nb", "=", "0", "\n", "while", "not", "done", ":", "\n", "# if we haven't performed any action, we go to the next time step", "\n", "            ", "no_op", "=", "True", "\n", "for", "machine", "in", "range", "(", "len", "(", "solution_sequence", ")", ")", ":", "\n", "                ", "if", "done", ":", "\n", "                    ", "break", "\n", "", "if", "env", ".", "machine_legal", "[", "machine", "]", "and", "index_machine", "[", "machine", "]", "<", "job_nb", ":", "\n", "                    ", "action_to_do", "=", "solution_sequence", "[", "machine", "]", "[", "index_machine", "[", "machine", "]", "]", "\n", "if", "(", "\n", "env", ".", "needed_machine_jobs", "[", "action_to_do", "]", "==", "machine", "\n", "and", "env", ".", "legal_actions", "[", "action_to_do", "]", "\n", ")", ":", "\n", "                        ", "no_op", "=", "False", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "legal_actions", "[", "action_to_do", "]", ",", "\n", "\"We don't perform illegal actions\"", ",", "\n", ")", "\n", "self", ".", "assertEqual", "(", "\n", "sum", "(", "env", ".", "legal_actions", "[", ":", "-", "1", "]", ")", ",", "env", ".", "nb_legal_actions", "\n", ")", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "action_to_do", ")", "\n", "index_machine", "[", "machine", "]", "+=", "1", "\n", "step_nb", "+=", "1", "\n", "", "", "", "if", "no_op", "and", "not", "done", ":", "\n", "                ", "self", ".", "assertTrue", "(", "len", "(", "env", ".", "next_time_step", ")", ">", "0", ",", "\"step {}\"", ".", "format", "(", "step_nb", ")", ")", "\n", "previous_time_step", "=", "env", ".", "current_time_step", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "env", ".", "jobs", ")", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "current_time_step", ">", "previous_time_step", ",", "\n", "\"we increase the time step\"", ",", "\n", ")", "\n", "", "", "self", ".", "assertEqual", "(", "\n", "sum", "(", "index_machine", ")", ",", "len", "(", "solution_sequence", ")", "*", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "1937", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.tests.test_solutions.TestSolution.test_optimum_ta49": [[5646, 6341], ["gym.make", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "len", "len", "test_solutions.TestSolution.assertEqual", "test_solutions.TestSolution.assertEqual", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "range", "sum", "range", "len", "test_solutions.TestSolution.assertTrue", "gym.make.step", "test_solutions.TestSolution.assertTrue", "len", "len", "test_solutions.TestSolution.assertTrue", "test_solutions.TestSolution.assertEqual", "gym.make.step", "len", "str", "sum", "pathlib.Path().parent.absolute", "pathlib.Path"], "methods", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.make", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step"], ["", "def", "test_optimum_ta49", "(", "self", ")", ":", "\n", "# http://optimizizer.com/solution.php?name=ta49&UB=1963&problemclass=ta", "\n", "        ", "env", "=", "gym", ".", "make", "(", "\n", "\"jss-v1\"", ",", "\n", "env_config", "=", "{", "\n", "\"instance_path\"", ":", "f\"{str(Path(__file__).parent.absolute())}/../JSSEnv/envs/instances/ta49\"", "\n", "}", ",", "\n", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "# for every machine give the jobs to process in order for every machine", "\n", "solution_sequence", "=", "[", "\n", "[", "\n", "19", ",", "\n", "6", ",", "\n", "27", ",", "\n", "25", ",", "\n", "14", ",", "\n", "8", ",", "\n", "24", ",", "\n", "28", ",", "\n", "20", ",", "\n", "21", ",", "\n", "3", ",", "\n", "15", ",", "\n", "29", ",", "\n", "23", ",", "\n", "0", ",", "\n", "16", ",", "\n", "4", ",", "\n", "18", ",", "\n", "26", ",", "\n", "10", ",", "\n", "11", ",", "\n", "9", ",", "\n", "17", ",", "\n", "7", ",", "\n", "2", ",", "\n", "1", ",", "\n", "5", ",", "\n", "12", ",", "\n", "22", ",", "\n", "13", ",", "\n", "]", ",", "\n", "[", "\n", "15", ",", "\n", "5", ",", "\n", "6", ",", "\n", "28", ",", "\n", "29", ",", "\n", "1", ",", "\n", "11", ",", "\n", "3", ",", "\n", "18", ",", "\n", "26", ",", "\n", "7", ",", "\n", "20", ",", "\n", "8", ",", "\n", "14", ",", "\n", "0", ",", "\n", "17", ",", "\n", "2", ",", "\n", "19", ",", "\n", "21", ",", "\n", "10", ",", "\n", "25", ",", "\n", "23", ",", "\n", "24", ",", "\n", "4", ",", "\n", "9", ",", "\n", "12", ",", "\n", "13", ",", "\n", "22", ",", "\n", "27", ",", "\n", "16", ",", "\n", "]", ",", "\n", "[", "\n", "11", ",", "\n", "5", ",", "\n", "8", ",", "\n", "10", ",", "\n", "1", ",", "\n", "16", ",", "\n", "14", ",", "\n", "3", ",", "\n", "23", ",", "\n", "21", ",", "\n", "2", ",", "\n", "22", ",", "\n", "13", ",", "\n", "0", ",", "\n", "12", ",", "\n", "18", ",", "\n", "7", ",", "\n", "9", ",", "\n", "26", ",", "\n", "28", ",", "\n", "20", ",", "\n", "6", ",", "\n", "17", ",", "\n", "19", ",", "\n", "4", ",", "\n", "29", ",", "\n", "25", ",", "\n", "24", ",", "\n", "27", ",", "\n", "15", ",", "\n", "]", ",", "\n", "[", "\n", "10", ",", "\n", "3", ",", "\n", "13", ",", "\n", "29", ",", "\n", "8", ",", "\n", "20", ",", "\n", "18", ",", "\n", "0", ",", "\n", "11", ",", "\n", "28", ",", "\n", "16", ",", "\n", "22", ",", "\n", "19", ",", "\n", "26", ",", "\n", "23", ",", "\n", "14", ",", "\n", "25", ",", "\n", "27", ",", "\n", "24", ",", "\n", "1", ",", "\n", "17", ",", "\n", "2", ",", "\n", "7", ",", "\n", "15", ",", "\n", "21", ",", "\n", "4", ",", "\n", "12", ",", "\n", "9", ",", "\n", "6", ",", "\n", "5", ",", "\n", "]", ",", "\n", "[", "\n", "20", ",", "\n", "10", ",", "\n", "24", ",", "\n", "5", ",", "\n", "11", ",", "\n", "22", ",", "\n", "26", ",", "\n", "16", ",", "\n", "18", ",", "\n", "13", ",", "\n", "17", ",", "\n", "8", ",", "\n", "19", ",", "\n", "2", ",", "\n", "3", ",", "\n", "23", ",", "\n", "0", ",", "\n", "4", ",", "\n", "27", ",", "\n", "7", ",", "\n", "21", ",", "\n", "14", ",", "\n", "9", ",", "\n", "28", ",", "\n", "12", ",", "\n", "1", ",", "\n", "25", ",", "\n", "15", ",", "\n", "29", ",", "\n", "6", ",", "\n", "]", ",", "\n", "[", "\n", "4", ",", "\n", "0", ",", "\n", "25", ",", "\n", "20", ",", "\n", "16", ",", "\n", "19", ",", "\n", "27", ",", "\n", "2", ",", "\n", "28", ",", "\n", "10", ",", "\n", "3", ",", "\n", "26", ",", "\n", "23", ",", "\n", "7", ",", "\n", "22", ",", "\n", "13", ",", "\n", "8", ",", "\n", "21", ",", "\n", "24", ",", "\n", "17", ",", "\n", "12", ",", "\n", "6", ",", "\n", "5", ",", "\n", "29", ",", "\n", "18", ",", "\n", "1", ",", "\n", "14", ",", "\n", "15", ",", "\n", "9", ",", "\n", "11", ",", "\n", "]", ",", "\n", "[", "\n", "20", ",", "\n", "24", ",", "\n", "21", ",", "\n", "2", ",", "\n", "5", ",", "\n", "27", ",", "\n", "10", ",", "\n", "23", ",", "\n", "17", ",", "\n", "8", ",", "\n", "9", ",", "\n", "3", ",", "\n", "6", ",", "\n", "1", ",", "\n", "22", ",", "\n", "11", ",", "\n", "19", ",", "\n", "29", ",", "\n", "18", ",", "\n", "16", ",", "\n", "14", ",", "\n", "0", ",", "\n", "12", ",", "\n", "4", ",", "\n", "25", ",", "\n", "13", ",", "\n", "15", ",", "\n", "7", ",", "\n", "28", ",", "\n", "26", ",", "\n", "]", ",", "\n", "[", "\n", "27", ",", "\n", "5", ",", "\n", "17", ",", "\n", "14", ",", "\n", "15", ",", "\n", "29", ",", "\n", "9", ",", "\n", "8", ",", "\n", "23", ",", "\n", "10", ",", "\n", "24", ",", "\n", "16", ",", "\n", "3", ",", "\n", "0", ",", "\n", "1", ",", "\n", "11", ",", "\n", "7", ",", "\n", "18", ",", "\n", "19", ",", "\n", "12", ",", "\n", "2", ",", "\n", "28", ",", "\n", "21", ",", "\n", "25", ",", "\n", "13", ",", "\n", "6", ",", "\n", "20", ",", "\n", "26", ",", "\n", "4", ",", "\n", "22", ",", "\n", "]", ",", "\n", "[", "\n", "0", ",", "\n", "21", ",", "\n", "20", ",", "\n", "22", ",", "\n", "8", ",", "\n", "23", ",", "\n", "9", ",", "\n", "3", ",", "\n", "25", ",", "\n", "16", ",", "\n", "13", ",", "\n", "18", ",", "\n", "6", ",", "\n", "2", ",", "\n", "26", ",", "\n", "11", ",", "\n", "17", ",", "\n", "1", ",", "\n", "10", ",", "\n", "7", ",", "\n", "29", ",", "\n", "5", ",", "\n", "19", ",", "\n", "14", ",", "\n", "27", ",", "\n", "28", ",", "\n", "24", ",", "\n", "15", ",", "\n", "12", ",", "\n", "4", ",", "\n", "]", ",", "\n", "[", "\n", "9", ",", "\n", "2", ",", "\n", "5", ",", "\n", "17", ",", "\n", "28", ",", "\n", "16", ",", "\n", "8", ",", "\n", "22", ",", "\n", "26", ",", "\n", "4", ",", "\n", "21", ",", "\n", "1", ",", "\n", "0", ",", "\n", "12", ",", "\n", "20", ",", "\n", "14", ",", "\n", "19", ",", "\n", "13", ",", "\n", "10", ",", "\n", "7", ",", "\n", "23", ",", "\n", "3", ",", "\n", "27", ",", "\n", "29", ",", "\n", "15", ",", "\n", "25", ",", "\n", "6", ",", "\n", "11", ",", "\n", "24", ",", "\n", "18", ",", "\n", "]", ",", "\n", "[", "\n", "8", ",", "\n", "16", ",", "\n", "23", ",", "\n", "0", ",", "\n", "9", ",", "\n", "3", ",", "\n", "19", ",", "\n", "18", ",", "\n", "2", ",", "\n", "12", ",", "\n", "21", ",", "\n", "4", ",", "\n", "26", ",", "\n", "7", ",", "\n", "17", ",", "\n", "25", ",", "\n", "22", ",", "\n", "14", ",", "\n", "24", ",", "\n", "5", ",", "\n", "29", ",", "\n", "6", ",", "\n", "1", ",", "\n", "13", ",", "\n", "15", ",", "\n", "28", ",", "\n", "10", ",", "\n", "27", ",", "\n", "11", ",", "\n", "20", ",", "\n", "]", ",", "\n", "[", "\n", "19", ",", "\n", "17", ",", "\n", "26", ",", "\n", "0", ",", "\n", "16", ",", "\n", "4", ",", "\n", "28", ",", "\n", "3", ",", "\n", "7", ",", "\n", "8", ",", "\n", "23", ",", "\n", "11", ",", "\n", "13", ",", "\n", "15", ",", "\n", "27", ",", "\n", "20", ",", "\n", "9", ",", "\n", "14", ",", "\n", "2", ",", "\n", "25", ",", "\n", "21", ",", "\n", "18", ",", "\n", "22", ",", "\n", "12", ",", "\n", "1", ",", "\n", "6", ",", "\n", "29", ",", "\n", "10", ",", "\n", "5", ",", "\n", "24", ",", "\n", "]", ",", "\n", "[", "\n", "17", ",", "\n", "22", ",", "\n", "6", ",", "\n", "13", ",", "\n", "20", ",", "\n", "21", ",", "\n", "9", ",", "\n", "24", ",", "\n", "8", ",", "\n", "19", ",", "\n", "12", ",", "\n", "10", ",", "\n", "28", ",", "\n", "0", ",", "\n", "16", ",", "\n", "11", ",", "\n", "23", ",", "\n", "3", ",", "\n", "25", ",", "\n", "7", ",", "\n", "15", ",", "\n", "27", ",", "\n", "2", ",", "\n", "14", ",", "\n", "18", ",", "\n", "26", ",", "\n", "1", ",", "\n", "29", ",", "\n", "4", ",", "\n", "5", ",", "\n", "]", ",", "\n", "[", "\n", "20", ",", "\n", "25", ",", "\n", "2", ",", "\n", "0", ",", "\n", "27", ",", "\n", "8", ",", "\n", "1", ",", "\n", "29", ",", "\n", "22", ",", "\n", "15", ",", "\n", "17", ",", "\n", "28", ",", "\n", "26", ",", "\n", "13", ",", "\n", "21", ",", "\n", "23", ",", "\n", "11", ",", "\n", "16", ",", "\n", "24", ",", "\n", "9", ",", "\n", "14", ",", "\n", "4", ",", "\n", "3", ",", "\n", "19", ",", "\n", "18", ",", "\n", "7", ",", "\n", "6", ",", "\n", "5", ",", "\n", "10", ",", "\n", "12", ",", "\n", "]", ",", "\n", "[", "\n", "1", ",", "\n", "3", ",", "\n", "15", ",", "\n", "9", ",", "\n", "21", ",", "\n", "6", ",", "\n", "25", ",", "\n", "7", ",", "\n", "18", ",", "\n", "12", ",", "\n", "27", ",", "\n", "28", ",", "\n", "20", ",", "\n", "23", ",", "\n", "0", ",", "\n", "16", ",", "\n", "22", ",", "\n", "26", ",", "\n", "11", ",", "\n", "19", ",", "\n", "24", ",", "\n", "8", ",", "\n", "17", ",", "\n", "2", ",", "\n", "4", ",", "\n", "10", ",", "\n", "29", ",", "\n", "5", ",", "\n", "13", ",", "\n", "14", ",", "\n", "]", ",", "\n", "[", "\n", "18", ",", "\n", "8", ",", "\n", "26", ",", "\n", "24", ",", "\n", "10", ",", "\n", "23", ",", "\n", "28", ",", "\n", "19", ",", "\n", "14", ",", "\n", "16", ",", "\n", "11", ",", "\n", "0", ",", "\n", "17", ",", "\n", "2", ",", "\n", "4", ",", "\n", "3", ",", "\n", "25", ",", "\n", "12", ",", "\n", "7", ",", "\n", "9", ",", "\n", "29", ",", "\n", "22", ",", "\n", "21", ",", "\n", "1", ",", "\n", "20", ",", "\n", "13", ",", "\n", "27", ",", "\n", "5", ",", "\n", "15", ",", "\n", "6", ",", "\n", "]", ",", "\n", "[", "\n", "26", ",", "\n", "28", ",", "\n", "22", ",", "\n", "24", ",", "\n", "27", ",", "\n", "17", ",", "\n", "29", ",", "\n", "7", ",", "\n", "16", ",", "\n", "3", ",", "\n", "12", ",", "\n", "4", ",", "\n", "10", ",", "\n", "1", ",", "\n", "11", ",", "\n", "0", ",", "\n", "18", ",", "\n", "15", ",", "\n", "20", ",", "\n", "25", ",", "\n", "8", ",", "\n", "2", ",", "\n", "19", ",", "\n", "9", ",", "\n", "6", ",", "\n", "23", ",", "\n", "14", ",", "\n", "13", ",", "\n", "21", ",", "\n", "5", ",", "\n", "]", ",", "\n", "[", "\n", "28", ",", "\n", "19", ",", "\n", "18", ",", "\n", "16", ",", "\n", "26", ",", "\n", "15", ",", "\n", "29", ",", "\n", "17", ",", "\n", "0", ",", "\n", "27", ",", "\n", "3", ",", "\n", "13", ",", "\n", "4", ",", "\n", "11", ",", "\n", "1", ",", "\n", "23", ",", "\n", "25", ",", "\n", "10", ",", "\n", "12", ",", "\n", "6", ",", "\n", "21", ",", "\n", "24", ",", "\n", "7", ",", "\n", "5", ",", "\n", "9", ",", "\n", "14", ",", "\n", "22", ",", "\n", "8", ",", "\n", "20", ",", "\n", "2", ",", "\n", "]", ",", "\n", "[", "\n", "26", ",", "\n", "27", ",", "\n", "8", ",", "\n", "20", ",", "\n", "10", ",", "\n", "23", ",", "\n", "1", ",", "\n", "14", ",", "\n", "16", ",", "\n", "3", ",", "\n", "6", ",", "\n", "0", ",", "\n", "7", ",", "\n", "18", ",", "\n", "28", ",", "\n", "4", ",", "\n", "21", ",", "\n", "12", ",", "\n", "9", ",", "\n", "11", ",", "\n", "2", ",", "\n", "25", ",", "\n", "5", ",", "\n", "13", ",", "\n", "24", ",", "\n", "29", ",", "\n", "15", ",", "\n", "19", ",", "\n", "22", ",", "\n", "17", ",", "\n", "]", ",", "\n", "[", "\n", "8", ",", "\n", "25", ",", "\n", "15", ",", "\n", "17", ",", "\n", "9", ",", "\n", "22", ",", "\n", "14", ",", "\n", "0", ",", "\n", "12", ",", "\n", "3", ",", "\n", "1", ",", "\n", "29", ",", "\n", "21", ",", "\n", "2", ",", "\n", "16", ",", "\n", "4", ",", "\n", "27", ",", "\n", "26", ",", "\n", "28", ",", "\n", "6", ",", "\n", "11", ",", "\n", "7", ",", "\n", "23", ",", "\n", "24", ",", "\n", "5", ",", "\n", "18", ",", "\n", "10", ",", "\n", "19", ",", "\n", "20", ",", "\n", "13", ",", "\n", "]", ",", "\n", "]", "\n", "done", "=", "False", "\n", "machine_nb", "=", "len", "(", "solution_sequence", ")", "\n", "job_nb", "=", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", "index_machine", "=", "[", "0", "for", "_", "in", "range", "(", "machine_nb", ")", "]", "\n", "step_nb", "=", "0", "\n", "while", "not", "done", ":", "\n", "# if we haven't performed any action, we go to the next time step", "\n", "            ", "no_op", "=", "True", "\n", "for", "machine", "in", "range", "(", "len", "(", "solution_sequence", ")", ")", ":", "\n", "                ", "if", "done", ":", "\n", "                    ", "break", "\n", "", "if", "env", ".", "machine_legal", "[", "machine", "]", "and", "index_machine", "[", "machine", "]", "<", "job_nb", ":", "\n", "                    ", "action_to_do", "=", "solution_sequence", "[", "machine", "]", "[", "index_machine", "[", "machine", "]", "]", "\n", "if", "(", "\n", "env", ".", "needed_machine_jobs", "[", "action_to_do", "]", "==", "machine", "\n", "and", "env", ".", "legal_actions", "[", "action_to_do", "]", "\n", ")", ":", "\n", "                        ", "no_op", "=", "False", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "legal_actions", "[", "action_to_do", "]", ",", "\n", "\"We don't perform illegal actions\"", ",", "\n", ")", "\n", "self", ".", "assertEqual", "(", "\n", "sum", "(", "env", ".", "legal_actions", "[", ":", "-", "1", "]", ")", ",", "env", ".", "nb_legal_actions", "\n", ")", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "action_to_do", ")", "\n", "index_machine", "[", "machine", "]", "+=", "1", "\n", "step_nb", "+=", "1", "\n", "", "", "", "if", "no_op", "and", "not", "done", ":", "\n", "                ", "self", ".", "assertTrue", "(", "len", "(", "env", ".", "next_time_step", ")", ">", "0", ",", "\"step {}\"", ".", "format", "(", "step_nb", ")", ")", "\n", "previous_time_step", "=", "env", ".", "current_time_step", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "env", ".", "jobs", ")", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "current_time_step", ">", "previous_time_step", ",", "\n", "\"we increase the time step\"", ",", "\n", ")", "\n", "", "", "self", ".", "assertEqual", "(", "\n", "sum", "(", "index_machine", ")", ",", "len", "(", "solution_sequence", ")", "*", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "1963", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.tests.test_solutions.TestSolution.test_optimum_ta50": [[6342, 7037], ["gym.make", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "len", "len", "test_solutions.TestSolution.assertEqual", "test_solutions.TestSolution.assertEqual", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "range", "sum", "range", "len", "test_solutions.TestSolution.assertTrue", "gym.make.step", "test_solutions.TestSolution.assertTrue", "len", "len", "test_solutions.TestSolution.assertTrue", "test_solutions.TestSolution.assertEqual", "gym.make.step", "len", "str", "sum", "pathlib.Path().parent.absolute", "pathlib.Path"], "methods", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.make", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step"], ["", "def", "test_optimum_ta50", "(", "self", ")", ":", "\n", "# http://optimizizer.com/solution.php?name=ta50&UB=1923&problemclass=ta", "\n", "        ", "env", "=", "gym", ".", "make", "(", "\n", "\"jss-v1\"", ",", "\n", "env_config", "=", "{", "\n", "\"instance_path\"", ":", "f\"{str(Path(__file__).parent.absolute())}/../JSSEnv/envs/instances/ta50\"", "\n", "}", ",", "\n", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "# for every machine give the jobs to process in order for every machine", "\n", "solution_sequence", "=", "[", "\n", "[", "\n", "4", ",", "\n", "11", ",", "\n", "1", ",", "\n", "2", ",", "\n", "12", ",", "\n", "25", ",", "\n", "9", ",", "\n", "6", ",", "\n", "29", ",", "\n", "0", ",", "\n", "28", ",", "\n", "13", ",", "\n", "5", ",", "\n", "8", ",", "\n", "21", ",", "\n", "23", ",", "\n", "22", ",", "\n", "14", ",", "\n", "20", ",", "\n", "16", ",", "\n", "15", ",", "\n", "7", ",", "\n", "26", ",", "\n", "27", ",", "\n", "17", ",", "\n", "19", ",", "\n", "3", ",", "\n", "18", ",", "\n", "24", ",", "\n", "10", ",", "\n", "]", ",", "\n", "[", "\n", "25", ",", "\n", "6", ",", "\n", "4", ",", "\n", "11", ",", "\n", "17", ",", "\n", "27", ",", "\n", "18", ",", "\n", "29", ",", "\n", "1", ",", "\n", "13", ",", "\n", "2", ",", "\n", "28", ",", "\n", "10", ",", "\n", "14", ",", "\n", "5", ",", "\n", "20", ",", "\n", "12", ",", "\n", "7", ",", "\n", "21", ",", "\n", "9", ",", "\n", "16", ",", "\n", "0", ",", "\n", "3", ",", "\n", "19", ",", "\n", "8", ",", "\n", "24", ",", "\n", "26", ",", "\n", "15", ",", "\n", "22", ",", "\n", "23", ",", "\n", "]", ",", "\n", "[", "\n", "12", ",", "\n", "23", ",", "\n", "14", ",", "\n", "10", ",", "\n", "0", ",", "\n", "26", ",", "\n", "16", ",", "\n", "1", ",", "\n", "6", ",", "\n", "28", ",", "\n", "17", ",", "\n", "22", ",", "\n", "4", ",", "\n", "27", ",", "\n", "25", ",", "\n", "13", ",", "\n", "5", ",", "\n", "7", ",", "\n", "11", ",", "\n", "9", ",", "\n", "19", ",", "\n", "24", ",", "\n", "18", ",", "\n", "21", ",", "\n", "15", ",", "\n", "20", ",", "\n", "8", ",", "\n", "29", ",", "\n", "3", ",", "\n", "2", ",", "\n", "]", ",", "\n", "[", "\n", "8", ",", "\n", "13", ",", "\n", "22", ",", "\n", "4", ",", "\n", "14", ",", "\n", "21", ",", "\n", "23", ",", "\n", "1", ",", "\n", "9", ",", "\n", "12", ",", "\n", "2", ",", "\n", "10", ",", "\n", "17", ",", "\n", "29", ",", "\n", "15", ",", "\n", "5", ",", "\n", "24", ",", "\n", "25", ",", "\n", "27", ",", "\n", "3", ",", "\n", "19", ",", "\n", "6", ",", "\n", "28", ",", "\n", "0", ",", "\n", "20", ",", "\n", "26", ",", "\n", "16", ",", "\n", "7", ",", "\n", "18", ",", "\n", "11", ",", "\n", "]", ",", "\n", "[", "\n", "10", ",", "\n", "25", ",", "\n", "22", ",", "\n", "21", ",", "\n", "29", ",", "\n", "12", ",", "\n", "14", ",", "\n", "0", ",", "\n", "13", ",", "\n", "20", ",", "\n", "28", ",", "\n", "9", ",", "\n", "24", ",", "\n", "4", ",", "\n", "6", ",", "\n", "27", ",", "\n", "16", ",", "\n", "3", ",", "\n", "7", ",", "\n", "11", ",", "\n", "8", ",", "\n", "23", ",", "\n", "5", ",", "\n", "19", ",", "\n", "2", ",", "\n", "17", ",", "\n", "15", ",", "\n", "1", ",", "\n", "26", ",", "\n", "18", ",", "\n", "]", ",", "\n", "[", "\n", "28", ",", "\n", "23", ",", "\n", "21", ",", "\n", "14", ",", "\n", "27", ",", "\n", "13", ",", "\n", "15", ",", "\n", "12", ",", "\n", "4", ",", "\n", "9", ",", "\n", "25", ",", "\n", "2", ",", "\n", "0", ",", "\n", "3", ",", "\n", "10", ",", "\n", "16", ",", "\n", "22", ",", "\n", "18", ",", "\n", "11", ",", "\n", "19", ",", "\n", "8", ",", "\n", "26", ",", "\n", "6", ",", "\n", "29", ",", "\n", "1", ",", "\n", "17", ",", "\n", "20", ",", "\n", "24", ",", "\n", "7", ",", "\n", "5", ",", "\n", "]", ",", "\n", "[", "\n", "11", ",", "\n", "4", ",", "\n", "13", ",", "\n", "23", ",", "\n", "26", ",", "\n", "20", ",", "\n", "0", ",", "\n", "6", ",", "\n", "3", ",", "\n", "12", ",", "\n", "15", ",", "\n", "14", ",", "\n", "19", ",", "\n", "29", ",", "\n", "25", ",", "\n", "9", ",", "\n", "16", ",", "\n", "17", ",", "\n", "2", ",", "\n", "7", ",", "\n", "28", ",", "\n", "21", ",", "\n", "5", ",", "\n", "24", ",", "\n", "18", ",", "\n", "22", ",", "\n", "8", ",", "\n", "10", ",", "\n", "1", ",", "\n", "27", ",", "\n", "]", ",", "\n", "[", "\n", "3", ",", "\n", "23", ",", "\n", "19", ",", "\n", "9", ",", "\n", "12", ",", "\n", "13", ",", "\n", "24", ",", "\n", "25", ",", "\n", "15", ",", "\n", "1", ",", "\n", "4", ",", "\n", "16", ",", "\n", "22", ",", "\n", "2", ",", "\n", "28", ",", "\n", "11", ",", "\n", "5", ",", "\n", "0", ",", "\n", "14", ",", "\n", "6", ",", "\n", "26", ",", "\n", "29", ",", "\n", "7", ",", "\n", "18", ",", "\n", "8", ",", "\n", "17", ",", "\n", "20", ",", "\n", "27", ",", "\n", "10", ",", "\n", "21", ",", "\n", "]", ",", "\n", "[", "\n", "5", ",", "\n", "19", ",", "\n", "15", ",", "\n", "13", ",", "\n", "10", ",", "\n", "29", ",", "\n", "0", ",", "\n", "20", ",", "\n", "9", ",", "\n", "26", ",", "\n", "21", ",", "\n", "28", ",", "\n", "11", ",", "\n", "7", ",", "\n", "18", ",", "\n", "24", ",", "\n", "4", ",", "\n", "23", ",", "\n", "14", ",", "\n", "1", ",", "\n", "22", ",", "\n", "3", ",", "\n", "16", ",", "\n", "6", ",", "\n", "17", ",", "\n", "2", ",", "\n", "27", ",", "\n", "12", ",", "\n", "8", ",", "\n", "25", ",", "\n", "]", ",", "\n", "[", "\n", "6", ",", "\n", "8", ",", "\n", "9", ",", "\n", "23", ",", "\n", "25", ",", "\n", "12", ",", "\n", "2", ",", "\n", "3", ",", "\n", "7", ",", "\n", "26", ",", "\n", "29", ",", "\n", "22", ",", "\n", "1", ",", "\n", "28", ",", "\n", "17", ",", "\n", "4", ",", "\n", "18", ",", "\n", "5", ",", "\n", "14", ",", "\n", "20", ",", "\n", "24", ",", "\n", "21", ",", "\n", "16", ",", "\n", "10", ",", "\n", "13", ",", "\n", "27", ",", "\n", "19", ",", "\n", "0", ",", "\n", "15", ",", "\n", "11", ",", "\n", "]", ",", "\n", "[", "\n", "15", ",", "\n", "26", ",", "\n", "18", ",", "\n", "25", ",", "\n", "1", ",", "\n", "3", ",", "\n", "23", ",", "\n", "19", ",", "\n", "28", ",", "\n", "4", ",", "\n", "16", ",", "\n", "11", ",", "\n", "6", ",", "\n", "24", ",", "\n", "21", ",", "\n", "10", ",", "\n", "12", ",", "\n", "5", ",", "\n", "0", ",", "\n", "8", ",", "\n", "13", ",", "\n", "14", ",", "\n", "9", ",", "\n", "2", ",", "\n", "22", ",", "\n", "27", ",", "\n", "20", ",", "\n", "17", ",", "\n", "29", ",", "\n", "7", ",", "\n", "]", ",", "\n", "[", "\n", "14", ",", "\n", "24", ",", "\n", "28", ",", "\n", "4", ",", "\n", "20", ",", "\n", "6", ",", "\n", "19", ",", "\n", "2", ",", "\n", "3", ",", "\n", "15", ",", "\n", "10", ",", "\n", "12", ",", "\n", "17", ",", "\n", "18", ",", "\n", "9", ",", "\n", "23", ",", "\n", "7", ",", "\n", "26", ",", "\n", "11", ",", "\n", "8", ",", "\n", "1", ",", "\n", "21", ",", "\n", "16", ",", "\n", "22", ",", "\n", "25", ",", "\n", "13", ",", "\n", "29", ",", "\n", "5", ",", "\n", "27", ",", "\n", "0", ",", "\n", "]", ",", "\n", "[", "\n", "11", ",", "\n", "18", ",", "\n", "28", ",", "\n", "26", ",", "\n", "24", ",", "\n", "13", ",", "\n", "4", ",", "\n", "23", ",", "\n", "10", ",", "\n", "3", ",", "\n", "12", ",", "\n", "5", ",", "\n", "29", ",", "\n", "20", ",", "\n", "0", ",", "\n", "6", ",", "\n", "14", ",", "\n", "17", ",", "\n", "21", ",", "\n", "27", ",", "\n", "8", ",", "\n", "25", ",", "\n", "16", ",", "\n", "19", ",", "\n", "7", ",", "\n", "15", ",", "\n", "22", ",", "\n", "1", ",", "\n", "2", ",", "\n", "9", ",", "\n", "]", ",", "\n", "[", "\n", "9", ",", "\n", "15", ",", "\n", "12", ",", "\n", "1", ",", "\n", "27", ",", "\n", "17", ",", "\n", "26", ",", "\n", "14", ",", "\n", "10", ",", "\n", "2", ",", "\n", "21", ",", "\n", "19", ",", "\n", "5", ",", "\n", "0", ",", "\n", "3", ",", "\n", "29", ",", "\n", "11", ",", "\n", "24", ",", "\n", "4", ",", "\n", "22", ",", "\n", "16", ",", "\n", "18", ",", "\n", "23", ",", "\n", "28", ",", "\n", "8", ",", "\n", "13", ",", "\n", "25", ",", "\n", "7", ",", "\n", "6", ",", "\n", "20", ",", "\n", "]", ",", "\n", "[", "\n", "13", ",", "\n", "8", ",", "\n", "23", ",", "\n", "29", ",", "\n", "26", ",", "\n", "19", ",", "\n", "27", ",", "\n", "11", ",", "\n", "7", ",", "\n", "3", ",", "\n", "28", ",", "\n", "15", ",", "\n", "12", ",", "\n", "25", ",", "\n", "9", ",", "\n", "5", ",", "\n", "6", ",", "\n", "4", ",", "\n", "14", ",", "\n", "21", ",", "\n", "10", ",", "\n", "0", ",", "\n", "18", ",", "\n", "22", ",", "\n", "2", ",", "\n", "17", ",", "\n", "16", ",", "\n", "20", ",", "\n", "24", ",", "\n", "1", ",", "\n", "]", ",", "\n", "[", "\n", "23", ",", "\n", "28", ",", "\n", "13", ",", "\n", "2", ",", "\n", "14", ",", "\n", "21", ",", "\n", "29", ",", "\n", "15", ",", "\n", "0", ",", "\n", "4", ",", "\n", "12", ",", "\n", "9", ",", "\n", "26", ",", "\n", "3", ",", "\n", "1", ",", "\n", "10", ",", "\n", "6", ",", "\n", "17", ",", "\n", "5", ",", "\n", "24", ",", "\n", "7", ",", "\n", "25", ",", "\n", "19", ",", "\n", "11", ",", "\n", "20", ",", "\n", "18", ",", "\n", "22", ",", "\n", "16", ",", "\n", "27", ",", "\n", "8", ",", "\n", "]", ",", "\n", "[", "\n", "21", ",", "\n", "15", ",", "\n", "28", ",", "\n", "18", ",", "\n", "4", ",", "\n", "23", ",", "\n", "12", ",", "\n", "5", ",", "\n", "13", ",", "\n", "11", ",", "\n", "6", ",", "\n", "0", ",", "\n", "1", ",", "\n", "3", ",", "\n", "19", ",", "\n", "22", ",", "\n", "17", ",", "\n", "7", ",", "\n", "25", ",", "\n", "14", ",", "\n", "20", ",", "\n", "8", ",", "\n", "29", ",", "\n", "26", ",", "\n", "16", ",", "\n", "24", ",", "\n", "10", ",", "\n", "9", ",", "\n", "2", ",", "\n", "27", ",", "\n", "]", ",", "\n", "[", "\n", "5", ",", "\n", "24", ",", "\n", "10", ",", "\n", "15", ",", "\n", "6", ",", "\n", "20", ",", "\n", "27", ",", "\n", "13", ",", "\n", "23", ",", "\n", "17", ",", "\n", "11", ",", "\n", "1", ",", "\n", "28", ",", "\n", "26", ",", "\n", "29", ",", "\n", "9", ",", "\n", "18", ",", "\n", "12", ",", "\n", "4", ",", "\n", "3", ",", "\n", "14", ",", "\n", "21", ",", "\n", "22", ",", "\n", "25", ",", "\n", "8", ",", "\n", "7", ",", "\n", "0", ",", "\n", "19", ",", "\n", "2", ",", "\n", "16", ",", "\n", "]", ",", "\n", "[", "\n", "14", ",", "\n", "6", ",", "\n", "18", ",", "\n", "24", ",", "\n", "11", ",", "\n", "26", ",", "\n", "21", ",", "\n", "23", ",", "\n", "10", ",", "\n", "12", ",", "\n", "2", ",", "\n", "17", ",", "\n", "13", ",", "\n", "16", ",", "\n", "4", ",", "\n", "25", ",", "\n", "28", ",", "\n", "1", ",", "\n", "27", ",", "\n", "19", ",", "\n", "15", ",", "\n", "20", ",", "\n", "9", ",", "\n", "22", ",", "\n", "7", ",", "\n", "0", ",", "\n", "3", ",", "\n", "29", ",", "\n", "8", ",", "\n", "5", ",", "\n", "]", ",", "\n", "[", "\n", "29", ",", "\n", "3", ",", "\n", "21", ",", "\n", "2", ",", "\n", "12", ",", "\n", "5", ",", "\n", "4", ",", "\n", "11", ",", "\n", "10", ",", "\n", "14", ",", "\n", "26", ",", "\n", "16", ",", "\n", "6", ",", "\n", "19", ",", "\n", "18", ",", "\n", "13", ",", "\n", "25", ",", "\n", "7", ",", "\n", "20", ",", "\n", "28", ",", "\n", "15", ",", "\n", "0", ",", "\n", "27", ",", "\n", "9", ",", "\n", "24", ",", "\n", "1", ",", "\n", "8", ",", "\n", "23", ",", "\n", "17", ",", "\n", "22", ",", "\n", "]", ",", "\n", "]", "\n", "done", "=", "False", "\n", "machine_nb", "=", "len", "(", "solution_sequence", ")", "\n", "job_nb", "=", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", "index_machine", "=", "[", "0", "for", "_", "in", "range", "(", "machine_nb", ")", "]", "\n", "step_nb", "=", "0", "\n", "while", "not", "done", ":", "\n", "# if we haven't performed any action, we go to the next time step", "\n", "            ", "no_op", "=", "True", "\n", "for", "machine", "in", "range", "(", "len", "(", "solution_sequence", ")", ")", ":", "\n", "                ", "if", "done", ":", "\n", "                    ", "break", "\n", "", "if", "env", ".", "machine_legal", "[", "machine", "]", "and", "index_machine", "[", "machine", "]", "<", "job_nb", ":", "\n", "                    ", "action_to_do", "=", "solution_sequence", "[", "machine", "]", "[", "index_machine", "[", "machine", "]", "]", "\n", "if", "(", "\n", "env", ".", "needed_machine_jobs", "[", "action_to_do", "]", "==", "machine", "\n", "and", "env", ".", "legal_actions", "[", "action_to_do", "]", "\n", ")", ":", "\n", "                        ", "no_op", "=", "False", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "legal_actions", "[", "action_to_do", "]", ",", "\n", "\"We don't perform illegal actions\"", ",", "\n", ")", "\n", "self", ".", "assertEqual", "(", "\n", "sum", "(", "env", ".", "legal_actions", "[", ":", "-", "1", "]", ")", ",", "env", ".", "nb_legal_actions", "\n", ")", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "action_to_do", ")", "\n", "index_machine", "[", "machine", "]", "+=", "1", "\n", "step_nb", "+=", "1", "\n", "", "", "", "if", "no_op", "and", "not", "done", ":", "\n", "                ", "self", ".", "assertTrue", "(", "len", "(", "env", ".", "next_time_step", ")", ">", "0", ",", "\"step {}\"", ".", "format", "(", "step_nb", ")", ")", "\n", "previous_time_step", "=", "env", ".", "current_time_step", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "env", ".", "jobs", ")", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "current_time_step", ">", "previous_time_step", ",", "\n", "\"we increase the time step\"", ",", "\n", ")", "\n", "", "", "self", ".", "assertEqual", "(", "\n", "sum", "(", "index_machine", ")", ",", "len", "(", "solution_sequence", ")", "*", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "1923", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.tests.test_solutions.TestSolution.test_optimum_ta51": [[7038, 7872], ["gym.make", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "len", "len", "test_solutions.TestSolution.assertEqual", "test_solutions.TestSolution.assertEqual", "gym.make.reset", "test_solutions.TestSolution.assertEqual", "range", "sum", "range", "len", "test_solutions.TestSolution.assertTrue", "gym.make.step", "test_solutions.TestSolution.assertTrue", "len", "len", "test_solutions.TestSolution.assertTrue", "test_solutions.TestSolution.assertEqual", "gym.make.step", "len", "str", "sum", "pathlib.Path().parent.absolute", "pathlib.Path"], "methods", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.make", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step"], ["", "def", "test_optimum_ta51", "(", "self", ")", ":", "\n", "        ", "env", "=", "gym", ".", "make", "(", "\n", "\"jss-v1\"", ",", "\n", "env_config", "=", "{", "\n", "\"instance_path\"", ":", "f\"{str(Path(__file__).parent.absolute())}/../JSSEnv/envs/instances/ta51\"", "\n", "}", ",", "\n", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "# for every machine give the jobs to process in order for every machine", "\n", "solution_sequence", "=", "[", "\n", "[", "\n", "37", ",", "\n", "5", ",", "\n", "24", ",", "\n", "19", ",", "\n", "41", ",", "\n", "31", ",", "\n", "17", ",", "\n", "45", ",", "\n", "4", ",", "\n", "26", ",", "\n", "34", ",", "\n", "22", ",", "\n", "0", ",", "\n", "14", ",", "\n", "8", ",", "\n", "38", ",", "\n", "44", ",", "\n", "6", ",", "\n", "32", ",", "\n", "39", ",", "\n", "15", ",", "\n", "13", ",", "\n", "35", ",", "\n", "12", ",", "\n", "33", ",", "\n", "29", ",", "\n", "9", ",", "\n", "20", ",", "\n", "7", ",", "\n", "10", ",", "\n", "3", ",", "\n", "16", ",", "\n", "23", ",", "\n", "28", ",", "\n", "25", ",", "\n", "48", ",", "\n", "18", ",", "\n", "43", ",", "\n", "27", ",", "\n", "21", ",", "\n", "11", ",", "\n", "30", ",", "\n", "1", ",", "\n", "47", ",", "\n", "42", ",", "\n", "36", ",", "\n", "40", ",", "\n", "46", ",", "\n", "49", ",", "\n", "2", ",", "\n", "]", ",", "\n", "[", "\n", "14", ",", "\n", "20", ",", "\n", "1", ",", "\n", "33", ",", "\n", "45", ",", "\n", "28", ",", "\n", "9", ",", "\n", "6", ",", "\n", "5", ",", "\n", "17", ",", "\n", "18", ",", "\n", "8", ",", "\n", "42", ",", "\n", "35", ",", "\n", "3", ",", "\n", "23", ",", "\n", "0", ",", "\n", "30", ",", "\n", "44", ",", "\n", "31", ",", "\n", "16", ",", "\n", "21", ",", "\n", "38", ",", "\n", "32", ",", "\n", "41", ",", "\n", "10", ",", "\n", "34", ",", "\n", "24", ",", "\n", "43", ",", "\n", "22", ",", "\n", "40", ",", "\n", "29", ",", "\n", "4", ",", "\n", "26", ",", "\n", "27", ",", "\n", "48", ",", "\n", "15", ",", "\n", "25", ",", "\n", "2", ",", "\n", "47", ",", "\n", "36", ",", "\n", "12", ",", "\n", "39", ",", "\n", "46", ",", "\n", "7", ",", "\n", "11", ",", "\n", "13", ",", "\n", "49", ",", "\n", "19", ",", "\n", "37", ",", "\n", "]", ",", "\n", "[", "\n", "28", ",", "\n", "2", ",", "\n", "34", ",", "\n", "44", ",", "\n", "5", ",", "\n", "20", ",", "\n", "8", ",", "\n", "37", ",", "\n", "18", ",", "\n", "42", ",", "\n", "14", ",", "\n", "22", ",", "\n", "41", ",", "\n", "24", ",", "\n", "12", ",", "\n", "32", ",", "\n", "49", ",", "\n", "15", ",", "\n", "40", ",", "\n", "33", ",", "\n", "10", ",", "\n", "13", ",", "\n", "26", ",", "\n", "11", ",", "\n", "19", ",", "\n", "3", ",", "\n", "9", ",", "\n", "45", ",", "\n", "21", ",", "\n", "1", ",", "\n", "4", ",", "\n", "16", ",", "\n", "23", ",", "\n", "35", ",", "\n", "39", ",", "\n", "47", ",", "\n", "29", ",", "\n", "6", ",", "\n", "0", ",", "\n", "36", ",", "\n", "7", ",", "\n", "38", ",", "\n", "48", ",", "\n", "31", ",", "\n", "27", ",", "\n", "46", ",", "\n", "43", ",", "\n", "17", ",", "\n", "25", ",", "\n", "30", ",", "\n", "]", ",", "\n", "[", "\n", "5", ",", "\n", "4", ",", "\n", "28", ",", "\n", "40", ",", "\n", "41", ",", "\n", "9", ",", "\n", "0", ",", "\n", "13", ",", "\n", "14", ",", "\n", "20", ",", "\n", "34", ",", "\n", "11", ",", "\n", "46", ",", "\n", "42", ",", "\n", "12", ",", "\n", "8", ",", "\n", "37", ",", "\n", "49", ",", "\n", "23", ",", "\n", "44", ",", "\n", "24", ",", "\n", "22", ",", "\n", "32", ",", "\n", "29", ",", "\n", "48", ",", "\n", "38", ",", "\n", "2", ",", "\n", "33", ",", "\n", "3", ",", "\n", "18", ",", "\n", "45", ",", "\n", "36", ",", "\n", "35", ",", "\n", "15", ",", "\n", "30", ",", "\n", "19", ",", "\n", "1", ",", "\n", "31", ",", "\n", "21", ",", "\n", "6", ",", "\n", "10", ",", "\n", "27", ",", "\n", "25", ",", "\n", "26", ",", "\n", "17", ",", "\n", "7", ",", "\n", "47", ",", "\n", "43", ",", "\n", "39", ",", "\n", "16", ",", "\n", "]", ",", "\n", "[", "\n", "15", ",", "\n", "9", ",", "\n", "47", ",", "\n", "29", ",", "\n", "20", ",", "\n", "14", ",", "\n", "34", ",", "\n", "12", ",", "\n", "5", ",", "\n", "40", ",", "\n", "49", ",", "\n", "2", ",", "\n", "23", ",", "\n", "0", ",", "\n", "37", ",", "\n", "8", ",", "\n", "10", ",", "\n", "46", ",", "\n", "18", ",", "\n", "41", ",", "\n", "11", ",", "\n", "38", ",", "\n", "3", ",", "\n", "16", ",", "\n", "7", ",", "\n", "39", ",", "\n", "33", ",", "\n", "30", ",", "\n", "4", ",", "\n", "35", ",", "\n", "26", ",", "\n", "44", ",", "\n", "45", ",", "\n", "24", ",", "\n", "48", ",", "\n", "1", ",", "\n", "19", ",", "\n", "21", ",", "\n", "17", ",", "\n", "31", ",", "\n", "27", ",", "\n", "25", ",", "\n", "43", ",", "\n", "42", ",", "\n", "22", ",", "\n", "28", ",", "\n", "6", ",", "\n", "32", ",", "\n", "13", ",", "\n", "36", ",", "\n", "]", ",", "\n", "[", "\n", "4", ",", "\n", "9", ",", "\n", "44", ",", "\n", "35", ",", "\n", "37", ",", "\n", "34", ",", "\n", "0", ",", "\n", "5", ",", "\n", "14", ",", "\n", "10", ",", "\n", "42", ",", "\n", "13", ",", "\n", "40", ",", "\n", "8", ",", "\n", "39", ",", "\n", "45", ",", "\n", "21", ",", "\n", "3", ",", "\n", "11", ",", "\n", "18", ",", "\n", "46", ",", "\n", "33", ",", "\n", "32", ",", "\n", "47", ",", "\n", "27", ",", "\n", "49", ",", "\n", "41", ",", "\n", "26", ",", "\n", "20", ",", "\n", "22", ",", "\n", "38", ",", "\n", "2", ",", "\n", "28", ",", "\n", "7", ",", "\n", "24", ",", "\n", "31", ",", "\n", "15", ",", "\n", "29", ",", "\n", "23", ",", "\n", "30", ",", "\n", "19", ",", "\n", "36", ",", "\n", "6", ",", "\n", "25", ",", "\n", "48", ",", "\n", "1", ",", "\n", "16", ",", "\n", "12", ",", "\n", "17", ",", "\n", "43", ",", "\n", "]", ",", "\n", "[", "\n", "5", ",", "\n", "34", ",", "\n", "49", ",", "\n", "14", ",", "\n", "6", ",", "\n", "42", ",", "\n", "39", ",", "\n", "7", ",", "\n", "26", ",", "\n", "4", ",", "\n", "43", ",", "\n", "40", ",", "\n", "10", ",", "\n", "37", ",", "\n", "38", ",", "\n", "8", ",", "\n", "9", ",", "\n", "41", ",", "\n", "12", ",", "\n", "27", ",", "\n", "45", ",", "\n", "25", ",", "\n", "15", ",", "\n", "48", ",", "\n", "30", ",", "\n", "44", ",", "\n", "0", ",", "\n", "29", ",", "\n", "2", ",", "\n", "11", ",", "\n", "19", ",", "\n", "23", ",", "\n", "21", ",", "\n", "13", ",", "\n", "16", ",", "\n", "33", ",", "\n", "24", ",", "\n", "17", ",", "\n", "35", ",", "\n", "3", ",", "\n", "22", ",", "\n", "46", ",", "\n", "20", ",", "\n", "18", ",", "\n", "36", ",", "\n", "31", ",", "\n", "28", ",", "\n", "32", ",", "\n", "47", ",", "\n", "1", ",", "\n", "]", ",", "\n", "[", "\n", "46", ",", "\n", "31", ",", "\n", "9", ",", "\n", "8", ",", "\n", "35", ",", "\n", "45", ",", "\n", "34", ",", "\n", "26", ",", "\n", "4", ",", "\n", "20", ",", "\n", "0", ",", "\n", "44", ",", "\n", "21", ",", "\n", "3", ",", "\n", "13", ",", "\n", "38", ",", "\n", "18", ",", "\n", "41", ",", "\n", "14", ",", "\n", "11", ",", "\n", "22", ",", "\n", "36", ",", "\n", "27", ",", "\n", "15", ",", "\n", "25", ",", "\n", "33", ",", "\n", "1", ",", "\n", "29", ",", "\n", "43", ",", "\n", "40", ",", "\n", "16", ",", "\n", "32", ",", "\n", "30", ",", "\n", "10", ",", "\n", "28", ",", "\n", "7", ",", "\n", "24", ",", "\n", "47", ",", "\n", "48", ",", "\n", "6", ",", "\n", "2", ",", "\n", "23", ",", "\n", "39", ",", "\n", "49", ",", "\n", "17", ",", "\n", "5", ",", "\n", "19", ",", "\n", "42", ",", "\n", "37", ",", "\n", "12", ",", "\n", "]", ",", "\n", "[", "\n", "29", ",", "\n", "12", ",", "\n", "35", ",", "\n", "28", ",", "\n", "20", ",", "\n", "6", ",", "\n", "0", ",", "\n", "13", ",", "\n", "10", ",", "\n", "8", ",", "\n", "34", ",", "\n", "31", ",", "\n", "24", ",", "\n", "15", ",", "\n", "32", ",", "\n", "40", ",", "\n", "45", ",", "\n", "30", ",", "\n", "14", ",", "\n", "9", ",", "\n", "2", ",", "\n", "49", ",", "\n", "41", ",", "\n", "37", ",", "\n", "38", ",", "\n", "48", ",", "\n", "11", ",", "\n", "26", ",", "\n", "16", ",", "\n", "1", ",", "\n", "44", ",", "\n", "36", ",", "\n", "18", ",", "\n", "3", ",", "\n", "39", ",", "\n", "46", ",", "\n", "23", ",", "\n", "42", ",", "\n", "4", ",", "\n", "43", ",", "\n", "21", ",", "\n", "22", ",", "\n", "25", ",", "\n", "19", ",", "\n", "27", ",", "\n", "17", ",", "\n", "5", ",", "\n", "7", ",", "\n", "47", ",", "\n", "33", ",", "\n", "]", ",", "\n", "[", "\n", "10", ",", "\n", "0", ",", "\n", "45", ",", "\n", "6", ",", "\n", "17", ",", "\n", "49", ",", "\n", "46", ",", "\n", "34", ",", "\n", "23", ",", "\n", "38", ",", "\n", "44", ",", "\n", "4", ",", "\n", "11", ",", "\n", "27", ",", "\n", "37", ",", "\n", "21", ",", "\n", "31", ",", "\n", "14", ",", "\n", "18", ",", "\n", "8", ",", "\n", "12", ",", "\n", "20", ",", "\n", "40", ",", "\n", "3", ",", "\n", "33", ",", "\n", "41", ",", "\n", "9", ",", "\n", "32", ",", "\n", "35", ",", "\n", "48", ",", "\n", "16", ",", "\n", "1", ",", "\n", "43", ",", "\n", "39", ",", "\n", "24", ",", "\n", "15", ",", "\n", "47", ",", "\n", "36", ",", "\n", "29", ",", "\n", "5", ",", "\n", "2", ",", "\n", "28", ",", "\n", "26", ",", "\n", "42", ",", "\n", "25", ",", "\n", "22", ",", "\n", "19", ",", "\n", "30", ",", "\n", "13", ",", "\n", "7", ",", "\n", "]", ",", "\n", "[", "\n", "16", ",", "\n", "0", ",", "\n", "6", ",", "\n", "7", ",", "\n", "46", ",", "\n", "3", ",", "\n", "14", ",", "\n", "18", ",", "\n", "41", ",", "\n", "5", ",", "\n", "8", ",", "\n", "35", ",", "\n", "32", ",", "\n", "39", ",", "\n", "43", ",", "\n", "34", ",", "\n", "37", ",", "\n", "22", ",", "\n", "4", ",", "\n", "24", ",", "\n", "13", ",", "\n", "48", ",", "\n", "12", ",", "\n", "11", ",", "\n", "45", ",", "\n", "49", ",", "\n", "2", ",", "\n", "44", ",", "\n", "40", ",", "\n", "9", ",", "\n", "10", ",", "\n", "29", ",", "\n", "38", ",", "\n", "31", ",", "\n", "19", ",", "\n", "27", ",", "\n", "21", ",", "\n", "17", ",", "\n", "23", ",", "\n", "33", ",", "\n", "30", ",", "\n", "25", ",", "\n", "15", ",", "\n", "28", ",", "\n", "42", ",", "\n", "47", ",", "\n", "20", ",", "\n", "36", ",", "\n", "1", ",", "\n", "26", ",", "\n", "]", ",", "\n", "[", "\n", "34", ",", "\n", "10", ",", "\n", "7", ",", "\n", "17", ",", "\n", "45", ",", "\n", "40", ",", "\n", "2", ",", "\n", "47", ",", "\n", "26", ",", "\n", "13", ",", "\n", "9", ",", "\n", "14", ",", "\n", "15", ",", "\n", "44", ",", "\n", "4", ",", "\n", "48", ",", "\n", "19", ",", "\n", "37", ",", "\n", "42", ",", "\n", "29", ",", "\n", "49", ",", "\n", "43", ",", "\n", "41", ",", "\n", "36", ",", "\n", "22", ",", "\n", "11", ",", "\n", "32", ",", "\n", "6", ",", "\n", "25", ",", "\n", "8", ",", "\n", "5", ",", "\n", "28", ",", "\n", "0", ",", "\n", "20", ",", "\n", "3", ",", "\n", "38", ",", "\n", "27", ",", "\n", "1", ",", "\n", "18", ",", "\n", "33", ",", "\n", "23", ",", "\n", "31", ",", "\n", "16", ",", "\n", "30", ",", "\n", "39", ",", "\n", "24", ",", "\n", "21", ",", "\n", "35", ",", "\n", "46", ",", "\n", "12", ",", "\n", "]", ",", "\n", "[", "\n", "9", ",", "\n", "16", ",", "\n", "29", ",", "\n", "44", ",", "\n", "17", ",", "\n", "34", ",", "\n", "28", ",", "\n", "7", ",", "\n", "12", ",", "\n", "3", ",", "\n", "20", ",", "\n", "21", ",", "\n", "41", ",", "\n", "13", ",", "\n", "0", ",", "\n", "8", ",", "\n", "46", ",", "\n", "32", ",", "\n", "4", ",", "\n", "6", ",", "\n", "37", ",", "\n", "14", ",", "\n", "36", ",", "\n", "10", ",", "\n", "15", ",", "\n", "24", ",", "\n", "38", ",", "\n", "11", ",", "\n", "33", ",", "\n", "26", ",", "\n", "25", ",", "\n", "48", ",", "\n", "39", ",", "\n", "1", ",", "\n", "31", ",", "\n", "42", ",", "\n", "47", ",", "\n", "27", ",", "\n", "22", ",", "\n", "30", ",", "\n", "19", ",", "\n", "45", ",", "\n", "43", ",", "\n", "23", ",", "\n", "35", ",", "\n", "2", ",", "\n", "40", ",", "\n", "5", ",", "\n", "49", ",", "\n", "18", ",", "\n", "]", ",", "\n", "[", "\n", "6", ",", "\n", "17", ",", "\n", "2", ",", "\n", "31", ",", "\n", "25", ",", "\n", "7", ",", "\n", "36", ",", "\n", "28", ",", "\n", "47", ",", "\n", "35", ",", "\n", "5", ",", "\n", "46", ",", "\n", "20", ",", "\n", "34", ",", "\n", "18", ",", "\n", "0", ",", "\n", "14", ",", "\n", "24", ",", "\n", "15", ",", "\n", "8", ",", "\n", "42", ",", "\n", "37", ",", "\n", "13", ",", "\n", "49", ",", "\n", "41", ",", "\n", "43", ",", "\n", "12", ",", "\n", "45", ",", "\n", "32", ",", "\n", "9", ",", "\n", "40", ",", "\n", "33", ",", "\n", "26", ",", "\n", "38", ",", "\n", "44", ",", "\n", "16", ",", "\n", "11", ",", "\n", "3", ",", "\n", "1", ",", "\n", "4", ",", "\n", "29", ",", "\n", "21", ",", "\n", "30", ",", "\n", "27", ",", "\n", "10", ",", "\n", "48", ",", "\n", "23", ",", "\n", "22", ",", "\n", "19", ",", "\n", "39", ",", "\n", "]", ",", "\n", "[", "\n", "7", ",", "\n", "35", ",", "\n", "37", ",", "\n", "13", ",", "\n", "34", ",", "\n", "14", ",", "\n", "42", ",", "\n", "39", ",", "\n", "5", ",", "\n", "18", ",", "\n", "40", ",", "\n", "45", ",", "\n", "8", ",", "\n", "6", ",", "\n", "23", ",", "\n", "32", ",", "\n", "2", ",", "\n", "49", ",", "\n", "9", ",", "\n", "3", ",", "\n", "43", ",", "\n", "47", ",", "\n", "25", ",", "\n", "41", ",", "\n", "22", ",", "\n", "10", ",", "\n", "11", ",", "\n", "20", ",", "\n", "26", ",", "\n", "16", ",", "\n", "33", ",", "\n", "4", ",", "\n", "30", ",", "\n", "44", ",", "\n", "21", ",", "\n", "1", ",", "\n", "29", ",", "\n", "27", ",", "\n", "38", ",", "\n", "12", ",", "\n", "17", ",", "\n", "46", ",", "\n", "0", ",", "\n", "24", ",", "\n", "36", ",", "\n", "19", ",", "\n", "28", ",", "\n", "15", ",", "\n", "31", ",", "\n", "48", ",", "\n", "]", ",", "\n", "]", "\n", "done", "=", "False", "\n", "machine_nb", "=", "len", "(", "solution_sequence", ")", "\n", "job_nb", "=", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", "index_machine", "=", "[", "0", "for", "_", "in", "range", "(", "machine_nb", ")", "]", "\n", "step_nb", "=", "0", "\n", "while", "not", "done", ":", "\n", "# if we haven't performed any action, we go to the next time step", "\n", "            ", "no_op", "=", "True", "\n", "for", "machine", "in", "range", "(", "len", "(", "solution_sequence", ")", ")", ":", "\n", "                ", "if", "done", ":", "\n", "                    ", "break", "\n", "", "if", "env", ".", "machine_legal", "[", "machine", "]", "and", "index_machine", "[", "machine", "]", "<", "job_nb", ":", "\n", "                    ", "action_to_do", "=", "solution_sequence", "[", "machine", "]", "[", "index_machine", "[", "machine", "]", "]", "\n", "if", "(", "\n", "env", ".", "needed_machine_jobs", "[", "action_to_do", "]", "==", "machine", "\n", "and", "env", ".", "legal_actions", "[", "action_to_do", "]", "\n", ")", ":", "\n", "                        ", "no_op", "=", "False", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "legal_actions", "[", "action_to_do", "]", ",", "\n", "\"We don't perform illegal actions\"", ",", "\n", ")", "\n", "self", ".", "assertEqual", "(", "\n", "sum", "(", "env", ".", "legal_actions", "[", ":", "-", "1", "]", ")", ",", "env", ".", "nb_legal_actions", "\n", ")", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "action_to_do", ")", "\n", "index_machine", "[", "machine", "]", "+=", "1", "\n", "step_nb", "+=", "1", "\n", "", "", "", "if", "no_op", "and", "not", "done", ":", "\n", "                ", "self", ".", "assertTrue", "(", "len", "(", "env", ".", "next_time_step", ")", ">", "0", ",", "\"step {}\"", ".", "format", "(", "step_nb", ")", ")", "\n", "previous_time_step", "=", "env", ".", "current_time_step", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "env", ".", "jobs", ")", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "current_time_step", ">", "previous_time_step", ",", "\n", "\"we increase the time step\"", ",", "\n", ")", "\n", "", "", "self", ".", "assertEqual", "(", "\n", "sum", "(", "index_machine", ")", ",", "len", "(", "solution_sequence", ")", "*", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "2760", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.tests.test_rendering.TestRendering.test_optimum_ta01_gif": [[8, 82], ["gym.make", "gym.make.reset", "test_rendering.TestRendering.assertEqual", "len", "len", "test_rendering.TestRendering.assertEqual", "test_rendering.TestRendering.assertEqual", "imageio.mimsave", "gym.make.reset", "test_rendering.TestRendering.assertEqual", "range", "sum", "range", "len", "test_rendering.TestRendering.assertTrue", "gym.make.increase_time_step", "test_rendering.TestRendering.assertTrue", "len", "len", "test_rendering.TestRendering.assertTrue", "test_rendering.TestRendering.assertEqual", "gym.make.step", "gym.make.render().to_image", "images.append", "len", "str", "sum", "imageio.imread", "pathlib.Path().parent.absolute", "gym.make.render", "pathlib.Path"], "methods", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.make", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.increase_time_step", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.render"], ["    ", "def", "test_optimum_ta01_gif", "(", "self", ")", ":", "\n", "# http://optimizizer.com/solution.php?name=ta01&UB=1231&problemclass=ta", "\n", "        ", "env", "=", "gym", ".", "make", "(", "\n", "\"jss-v1\"", ",", "\n", "env_config", "=", "{", "\n", "\"instance_path\"", ":", "f\"{str(Path(__file__).parent.absolute())}/../JSSEnv/envs/instances/ta01\"", "\n", "}", ",", "\n", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "# for every machine give the jobs to process in order for every machine", "\n", "solution_sequence", "=", "[", "\n", "[", "7", ",", "11", ",", "9", ",", "10", ",", "8", ",", "3", ",", "12", ",", "2", ",", "14", ",", "5", ",", "1", ",", "6", ",", "4", ",", "0", ",", "13", "]", ",", "\n", "[", "2", ",", "8", ",", "7", ",", "14", ",", "6", ",", "13", ",", "9", ",", "11", ",", "4", ",", "5", ",", "12", ",", "3", ",", "10", ",", "1", ",", "0", "]", ",", "\n", "[", "11", ",", "9", ",", "3", ",", "0", ",", "4", ",", "12", ",", "8", ",", "7", ",", "5", ",", "2", ",", "6", ",", "14", ",", "13", ",", "10", ",", "1", "]", ",", "\n", "[", "6", ",", "5", ",", "0", ",", "9", ",", "12", ",", "7", ",", "11", ",", "10", ",", "14", ",", "1", ",", "13", ",", "2", ",", "3", ",", "4", ",", "8", "]", ",", "\n", "[", "10", ",", "13", ",", "0", ",", "4", ",", "1", ",", "5", ",", "14", ",", "3", ",", "7", ",", "6", ",", "12", ",", "8", ",", "2", ",", "9", ",", "11", "]", ",", "\n", "[", "5", ",", "7", ",", "3", ",", "12", ",", "13", ",", "10", ",", "1", ",", "11", ",", "8", ",", "4", ",", "2", ",", "6", ",", "0", ",", "9", ",", "14", "]", ",", "\n", "[", "9", ",", "0", ",", "4", ",", "8", ",", "3", ",", "11", ",", "13", ",", "14", ",", "6", ",", "12", ",", "10", ",", "2", ",", "1", ",", "7", ",", "5", "]", ",", "\n", "[", "4", ",", "6", ",", "7", ",", "10", ",", "0", ",", "11", ",", "1", ",", "9", ",", "3", ",", "5", ",", "13", ",", "14", ",", "8", ",", "2", ",", "12", "]", ",", "\n", "[", "13", ",", "4", ",", "6", ",", "2", ",", "9", ",", "14", ",", "12", ",", "11", ",", "7", ",", "10", ",", "0", ",", "1", ",", "3", ",", "8", ",", "5", "]", ",", "\n", "[", "9", ",", "3", ",", "2", ",", "4", ",", "13", ",", "11", ",", "12", ",", "1", ",", "0", ",", "7", ",", "8", ",", "5", ",", "14", ",", "10", ",", "6", "]", ",", "\n", "[", "8", ",", "14", ",", "4", ",", "3", ",", "11", ",", "12", ",", "9", ",", "0", ",", "10", ",", "13", ",", "5", ",", "1", ",", "6", ",", "2", ",", "7", "]", ",", "\n", "[", "7", ",", "9", ",", "8", ",", "5", ",", "6", ",", "0", ",", "2", ",", "3", ",", "1", ",", "13", ",", "14", ",", "12", ",", "4", ",", "10", ",", "11", "]", ",", "\n", "[", "6", ",", "0", ",", "7", ",", "11", ",", "5", ",", "14", ",", "10", ",", "2", ",", "4", ",", "13", ",", "8", ",", "9", ",", "3", ",", "12", ",", "1", "]", ",", "\n", "[", "13", ",", "10", ",", "7", ",", "9", ",", "5", ",", "3", ",", "11", ",", "1", ",", "12", ",", "14", ",", "2", ",", "4", ",", "0", ",", "6", ",", "8", "]", ",", "\n", "[", "13", ",", "11", ",", "6", ",", "8", ",", "7", ",", "4", ",", "1", ",", "5", ",", "3", ",", "10", ",", "0", ",", "14", ",", "9", ",", "2", ",", "12", "]", ",", "\n", "]", "\n", "done", "=", "False", "\n", "job_nb", "=", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", "machine_nb", "=", "len", "(", "solution_sequence", ")", "\n", "index_machine", "=", "[", "0", "for", "_", "in", "range", "(", "machine_nb", ")", "]", "\n", "step_nb", "=", "0", "\n", "images", "=", "[", "]", "\n", "while", "not", "done", ":", "\n", "# if we haven't performed any action, we go to the next time step", "\n", "            ", "no_op", "=", "True", "\n", "for", "machine", "in", "range", "(", "len", "(", "solution_sequence", ")", ")", ":", "\n", "                ", "if", "done", ":", "\n", "                    ", "break", "\n", "", "if", "env", ".", "machine_legal", "[", "machine", "]", "and", "index_machine", "[", "machine", "]", "<", "job_nb", ":", "\n", "                    ", "action_to_do", "=", "solution_sequence", "[", "machine", "]", "[", "index_machine", "[", "machine", "]", "]", "\n", "if", "(", "\n", "env", ".", "needed_machine_jobs", "[", "action_to_do", "]", "==", "machine", "\n", "and", "env", ".", "legal_actions", "[", "action_to_do", "]", "\n", ")", ":", "\n", "                        ", "no_op", "=", "False", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "legal_actions", "[", "action_to_do", "]", ",", "\n", "\"We don't perform illegal actions\"", ",", "\n", ")", "\n", "self", ".", "assertEqual", "(", "\n", "sum", "(", "env", ".", "legal_actions", "[", ":", "-", "1", "]", ")", ",", "env", ".", "nb_legal_actions", "\n", ")", "\n", "state", ",", "reward", ",", "done", ",", "_", "=", "env", ".", "step", "(", "action_to_do", ")", "\n", "index_machine", "[", "machine", "]", "+=", "1", "\n", "step_nb", "+=", "1", "\n", "temp_image", "=", "env", ".", "render", "(", ")", ".", "to_image", "(", ")", "\n", "images", ".", "append", "(", "imageio", ".", "imread", "(", "temp_image", ")", ")", "\n", "", "", "", "if", "no_op", "and", "not", "done", ":", "\n", "                ", "self", ".", "assertTrue", "(", "len", "(", "env", ".", "next_time_step", ")", ">", "0", ",", "\"step {}\"", ".", "format", "(", "step_nb", ")", ")", "\n", "previous_time_step", "=", "env", ".", "current_time_step", "\n", "env", ".", "increase_time_step", "(", ")", "\n", "self", ".", "assertTrue", "(", "\n", "env", ".", "current_time_step", ">", "previous_time_step", ",", "\n", "\"we increase the time step\"", ",", "\n", ")", "\n", "", "", "self", ".", "assertEqual", "(", "\n", "sum", "(", "index_machine", ")", ",", "len", "(", "solution_sequence", ")", "*", "len", "(", "solution_sequence", "[", "0", "]", ")", "\n", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "1231", ")", "\n", "imageio", ".", "mimsave", "(", "\"ta01.gif\"", ",", "images", ")", "\n", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.prosysscience_JSSEnv.tests.test_state.TestState.test_random": [[8, 77], ["gym.make", "range", "gym.make.reset", "test_state.TestState.assertEqual", "gym.make.get_legal_actions", "test_state.TestState.assertTrue", "test_state.TestState.assertTrue", "test_state.TestState.assertTrue", "test_state.TestState.assertTrue", "set", "range", "test_state.TestState.assertEqual", "test_state.TestState.assertEqual", "test_state.TestState.assertNotEqual", "range", "len", "len", "gym.make.step", "gym.make.get_legal_actions", "test_state.TestState.assertTrue", "test_state.TestState.assertTrue", "test_state.TestState.assertTrue", "test_state.TestState.assertTrue", "set", "range", "len", "min", "numpy.array2string", "test_state.TestState.assertEqual", "max", "min", "numpy.isnan().any", "numpy.isinf().any", "set.add", "numpy.random.choice", "legal_actions[].sum", "len", "len", "gym.make.solution.flatten", "gym.make.solution.flatten", "state[].flatten", "state[].flatten", "len", "max", "min", "numpy.isnan().any", "numpy.isinf().any", "set.add", "str", "numpy.isnan", "numpy.isinf", "state[].flatten", "state[].flatten", "pathlib.Path().parent.absolute", "gym.make.get_legal_actions.sum", "numpy.isnan", "numpy.isinf", "pathlib.Path"], "methods", ["home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.registry.make", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.reset", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.get_legal_actions", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.step", "home.repos.pwc.inspect_result.prosysscience_JSSEnv.envs.jss_env.JssEnv.get_legal_actions"], ["    ", "def", "test_random", "(", "self", ")", ":", "\n", "        ", "env", "=", "gym", ".", "make", "(", "\n", "\"jss-v1\"", ",", "\n", "env_config", "=", "{", "\n", "\"instance_path\"", ":", "f\"{str(Path(__file__).parent.absolute())}/../JSSEnv/envs/instances/ta01\"", "\n", "}", ",", "\n", ")", "\n", "average", "=", "0", "\n", "for", "_", "in", "range", "(", "100", ")", ":", "\n", "            ", "state", "=", "env", ".", "reset", "(", ")", "\n", "self", ".", "assertEqual", "(", "env", ".", "current_time_step", ",", "0", ")", "\n", "legal_actions", "=", "env", ".", "get_legal_actions", "(", ")", "\n", "done", "=", "False", "\n", "total_reward", "=", "0", "\n", "self", ".", "assertTrue", "(", "\n", "max", "(", "state", "[", "\"real_obs\"", "]", ".", "flatten", "(", ")", ")", "<=", "1.0", ",", "\"Out of max bound state\"", "\n", ")", "\n", "self", ".", "assertTrue", "(", "\n", "min", "(", "state", "[", "\"real_obs\"", "]", ".", "flatten", "(", ")", ")", ">=", "0.0", ",", "\"Out of min bound state\"", "\n", ")", "\n", "self", ".", "assertTrue", "(", "\n", "not", "np", ".", "isnan", "(", "state", "[", "\"real_obs\"", "]", ")", ".", "any", "(", ")", ",", "\"NaN inside state rep!\"", "\n", ")", "\n", "self", ".", "assertTrue", "(", "\n", "not", "np", ".", "isinf", "(", "state", "[", "\"real_obs\"", "]", ")", ".", "any", "(", ")", ",", "\"Inf inside state rep!\"", "\n", ")", "\n", "machines_available", "=", "set", "(", ")", "\n", "for", "job", "in", "range", "(", "len", "(", "env", ".", "legal_actions", "[", ":", "-", "1", "]", ")", ")", ":", "\n", "                ", "if", "env", ".", "legal_actions", "[", "job", "]", ":", "\n", "                    ", "machine_needed", "=", "env", ".", "needed_machine_jobs", "[", "job", "]", "\n", "machines_available", ".", "add", "(", "machine_needed", ")", "\n", "", "", "self", ".", "assertEqual", "(", "\n", "len", "(", "machines_available", ")", ",", "\n", "env", ".", "nb_machine_legal", ",", "\n", "\"machine available and nb machine available are not coherant\"", ",", "\n", ")", "\n", "while", "not", "done", ":", "\n", "                ", "actions", "=", "np", ".", "random", ".", "choice", "(", "\n", "len", "(", "legal_actions", ")", ",", "1", ",", "p", "=", "(", "legal_actions", "/", "legal_actions", ".", "sum", "(", ")", ")", "\n", ")", "[", "0", "]", "\n", "assert", "legal_actions", "[", ":", "-", "1", "]", ".", "sum", "(", ")", "==", "env", ".", "nb_legal_actions", "\n", "state", ",", "rewards", ",", "done", ",", "_", "=", "env", ".", "step", "(", "actions", ")", "\n", "legal_actions", "=", "env", ".", "get_legal_actions", "(", ")", "\n", "total_reward", "+=", "rewards", "\n", "self", ".", "assertTrue", "(", "\n", "max", "(", "state", "[", "\"real_obs\"", "]", ".", "flatten", "(", ")", ")", "<=", "1.0", ",", "\"Out of max bound state\"", "\n", ")", "\n", "self", ".", "assertTrue", "(", "\n", "min", "(", "state", "[", "\"real_obs\"", "]", ".", "flatten", "(", ")", ")", ">=", "0.0", ",", "\"Out of min bound state\"", "\n", ")", "\n", "self", ".", "assertTrue", "(", "\n", "not", "np", ".", "isnan", "(", "state", "[", "\"real_obs\"", "]", ")", ".", "any", "(", ")", ",", "\"NaN inside state rep!\"", "\n", ")", "\n", "self", ".", "assertTrue", "(", "\n", "not", "np", ".", "isinf", "(", "state", "[", "\"real_obs\"", "]", ")", ".", "any", "(", ")", ",", "\"Inf inside state rep!\"", "\n", ")", "\n", "machines_available", "=", "set", "(", ")", "\n", "for", "job", "in", "range", "(", "len", "(", "env", ".", "legal_actions", "[", ":", "-", "1", "]", ")", ")", ":", "\n", "                    ", "if", "env", ".", "legal_actions", "[", "job", "]", ":", "\n", "                        ", "machine_needed", "=", "env", ".", "needed_machine_jobs", "[", "job", "]", "\n", "machines_available", ".", "add", "(", "machine_needed", ")", "\n", "", "", "assert", "len", "(", "machines_available", ")", "==", "env", ".", "nb_machine_legal", "\n", "", "average", "+=", "env", ".", "last_time_step", "\n", "self", ".", "assertEqual", "(", "len", "(", "env", ".", "next_time_step", ")", ",", "0", ")", "\n", "self", ".", "assertNotEqual", "(", "\n", "min", "(", "env", ".", "solution", ".", "flatten", "(", ")", ")", ",", "-", "1", ",", "np", ".", "array2string", "(", "env", ".", "solution", ".", "flatten", "(", ")", ")", "\n", ")", "\n", "for", "job", "in", "range", "(", "env", ".", "jobs", ")", ":", "\n", "                ", "self", ".", "assertEqual", "(", "env", ".", "todo_time_step_job", "[", "job", "]", ",", "env", ".", "machines", ")", "\n", "", "", "", "", ""]]}