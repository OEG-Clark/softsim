{"home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.None.train_image_classifier._configure_learning_rate": [[257, 295], ["int", "tensorflow.train.exponential_decay", "tensorflow.constant", "tensorflow.train.polynomial_decay", "ValueError"], "function", ["None"], ["def", "_configure_learning_rate", "(", "num_samples_per_epoch", ",", "global_step", ")", ":", "\n", "  ", "\"\"\"Configures the learning rate.\n\n  Args:\n    num_samples_per_epoch: The number of samples in each epoch of training.\n    global_step: The global_step tensor.\n\n  Returns:\n    A `Tensor` representing the learning rate.\n\n  Raises:\n    ValueError: if\n  \"\"\"", "\n", "decay_steps", "=", "int", "(", "num_samples_per_epoch", "/", "FLAGS", ".", "batch_size", "*", "\n", "FLAGS", ".", "num_epochs_per_decay", ")", "\n", "if", "FLAGS", ".", "sync_replicas", ":", "\n", "    ", "decay_steps", "/=", "FLAGS", ".", "replicas_to_aggregate", "\n", "\n", "", "if", "FLAGS", ".", "learning_rate_decay_type", "==", "'exponential'", ":", "\n", "    ", "return", "tf", ".", "train", ".", "exponential_decay", "(", "FLAGS", ".", "learning_rate", ",", "\n", "global_step", ",", "\n", "decay_steps", ",", "\n", "FLAGS", ".", "learning_rate_decay_factor", ",", "\n", "staircase", "=", "True", ",", "\n", "name", "=", "'exponential_decay_learning_rate'", ")", "\n", "", "elif", "FLAGS", ".", "learning_rate_decay_type", "==", "'fixed'", ":", "\n", "    ", "return", "tf", ".", "constant", "(", "FLAGS", ".", "learning_rate", ",", "name", "=", "'fixed_learning_rate'", ")", "\n", "", "elif", "FLAGS", ".", "learning_rate_decay_type", "==", "'polynomial'", ":", "\n", "    ", "return", "tf", ".", "train", ".", "polynomial_decay", "(", "FLAGS", ".", "learning_rate", ",", "\n", "global_step", ",", "\n", "decay_steps", ",", "\n", "FLAGS", ".", "end_learning_rate", ",", "\n", "power", "=", "1.0", ",", "\n", "cycle", "=", "False", ",", "\n", "name", "=", "'polynomial_decay_learning_rate'", ")", "\n", "", "else", ":", "\n", "    ", "raise", "ValueError", "(", "'learning_rate_decay_type [%s] was not recognized'", ",", "\n", "FLAGS", ".", "learning_rate_decay_type", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.None.train_image_classifier._configure_optimizer": [[297, 347], ["tensorflow.train.AdadeltaOptimizer", "tensorflow.train.AdagradOptimizer", "tensorflow.train.AdamOptimizer", "tensorflow.train.FtrlOptimizer", "tensorflow.train.MomentumOptimizer", "tensorflow.train.RMSPropOptimizer", "tensorflow.train.GradientDescentOptimizer", "ValueError"], "function", ["None"], ["", "", "def", "_configure_optimizer", "(", "learning_rate", ")", ":", "\n", "  ", "\"\"\"Configures the optimizer used for training.\n\n  Args:\n    learning_rate: A scalar or `Tensor` learning rate.\n\n  Returns:\n    An instance of an optimizer.\n\n  Raises:\n    ValueError: if FLAGS.optimizer is not recognized.\n  \"\"\"", "\n", "if", "FLAGS", ".", "optimizer", "==", "'adadelta'", ":", "\n", "    ", "optimizer", "=", "tf", ".", "train", ".", "AdadeltaOptimizer", "(", "\n", "learning_rate", ",", "\n", "rho", "=", "FLAGS", ".", "adadelta_rho", ",", "\n", "epsilon", "=", "FLAGS", ".", "opt_epsilon", ")", "\n", "", "elif", "FLAGS", ".", "optimizer", "==", "'adagrad'", ":", "\n", "    ", "optimizer", "=", "tf", ".", "train", ".", "AdagradOptimizer", "(", "\n", "learning_rate", ",", "\n", "initial_accumulator_value", "=", "FLAGS", ".", "adagrad_initial_accumulator_value", ")", "\n", "", "elif", "FLAGS", ".", "optimizer", "==", "'adam'", ":", "\n", "    ", "optimizer", "=", "tf", ".", "train", ".", "AdamOptimizer", "(", "\n", "learning_rate", ",", "\n", "beta1", "=", "FLAGS", ".", "adam_beta1", ",", "\n", "beta2", "=", "FLAGS", ".", "adam_beta2", ",", "\n", "epsilon", "=", "FLAGS", ".", "opt_epsilon", ")", "\n", "", "elif", "FLAGS", ".", "optimizer", "==", "'ftrl'", ":", "\n", "    ", "optimizer", "=", "tf", ".", "train", ".", "FtrlOptimizer", "(", "\n", "learning_rate", ",", "\n", "learning_rate_power", "=", "FLAGS", ".", "ftrl_learning_rate_power", ",", "\n", "initial_accumulator_value", "=", "FLAGS", ".", "ftrl_initial_accumulator_value", ",", "\n", "l1_regularization_strength", "=", "FLAGS", ".", "ftrl_l1", ",", "\n", "l2_regularization_strength", "=", "FLAGS", ".", "ftrl_l2", ")", "\n", "", "elif", "FLAGS", ".", "optimizer", "==", "'momentum'", ":", "\n", "    ", "optimizer", "=", "tf", ".", "train", ".", "MomentumOptimizer", "(", "\n", "learning_rate", ",", "\n", "momentum", "=", "FLAGS", ".", "momentum", ",", "\n", "name", "=", "'Momentum'", ")", "\n", "", "elif", "FLAGS", ".", "optimizer", "==", "'rmsprop'", ":", "\n", "    ", "optimizer", "=", "tf", ".", "train", ".", "RMSPropOptimizer", "(", "\n", "learning_rate", ",", "\n", "decay", "=", "FLAGS", ".", "rmsprop_decay", ",", "\n", "momentum", "=", "FLAGS", ".", "rmsprop_momentum", ",", "\n", "epsilon", "=", "FLAGS", ".", "opt_epsilon", ")", "\n", "", "elif", "FLAGS", ".", "optimizer", "==", "'sgd'", ":", "\n", "    ", "optimizer", "=", "tf", ".", "train", ".", "GradientDescentOptimizer", "(", "learning_rate", ")", "\n", "", "else", ":", "\n", "    ", "raise", "ValueError", "(", "'Optimizer [%s] was not recognized'", ",", "FLAGS", ".", "optimizer", ")", "\n", "", "return", "optimizer", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.None.train_image_classifier._add_variables_summaries": [[349, 355], ["slim.get_model_variables", "summaries.append", "summaries.append", "tensorflow.summary.scalar", "tensorflow.summary.histogram"], "function", ["None"], ["", "def", "_add_variables_summaries", "(", "learning_rate", ")", ":", "\n", "  ", "summaries", "=", "[", "]", "\n", "for", "variable", "in", "slim", ".", "get_model_variables", "(", ")", ":", "\n", "    ", "summaries", ".", "append", "(", "tf", ".", "summary", ".", "histogram", "(", "variable", ".", "op", ".", "name", ",", "variable", ")", ")", "\n", "", "summaries", ".", "append", "(", "tf", ".", "summary", ".", "scalar", "(", "'training/Learning Rate'", ",", "learning_rate", ")", ")", "\n", "return", "summaries", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.None.train_image_classifier._get_init_fn": [[357, 404], ["tensorflow.train.latest_checkpoint", "slim.get_model_variables", "tensorflow.gfile.IsDirectory", "tensorflow.logging.info", "slim.assign_from_checkpoint_fn", "tensorflow.logging.info", "tensorflow.train.latest_checkpoint", "scope.strip", "var.op.name.startswith", "variables_to_restore.append", "FLAGS.checkpoint_exclude_scopes.split"], "function", ["None"], ["", "def", "_get_init_fn", "(", ")", ":", "\n", "  ", "\"\"\"Returns a function run by the chief worker to warm-start the training.\n\n  Note that the init_fn is only run when initializing the model during the very\n  first global step.\n\n  Returns:\n    An init function run by the supervisor.\n  \"\"\"", "\n", "if", "FLAGS", ".", "checkpoint_path", "is", "None", ":", "\n", "    ", "return", "None", "\n", "\n", "# Warn the user if a checkpoint exists in the train_dir. Then we'll be", "\n", "# ignoring the checkpoint anyway.", "\n", "", "if", "tf", ".", "train", ".", "latest_checkpoint", "(", "FLAGS", ".", "train_dir", ")", ":", "\n", "    ", "tf", ".", "logging", ".", "info", "(", "\n", "'Ignoring --checkpoint_path because a checkpoint already exists in %s'", "\n", "%", "FLAGS", ".", "train_dir", ")", "\n", "return", "None", "\n", "\n", "", "exclusions", "=", "[", "]", "\n", "if", "FLAGS", ".", "checkpoint_exclude_scopes", ":", "\n", "    ", "exclusions", "=", "[", "scope", ".", "strip", "(", ")", "\n", "for", "scope", "in", "FLAGS", ".", "checkpoint_exclude_scopes", ".", "split", "(", "','", ")", "]", "\n", "\n", "# TODO(sguada) variables.filter_variables()", "\n", "", "variables_to_restore", "=", "[", "]", "\n", "for", "var", "in", "slim", ".", "get_model_variables", "(", ")", ":", "\n", "    ", "excluded", "=", "False", "\n", "for", "exclusion", "in", "exclusions", ":", "\n", "      ", "if", "var", ".", "op", ".", "name", ".", "startswith", "(", "exclusion", ")", ":", "\n", "        ", "excluded", "=", "True", "\n", "break", "\n", "", "", "if", "not", "excluded", ":", "\n", "      ", "variables_to_restore", ".", "append", "(", "var", ")", "\n", "\n", "", "", "if", "tf", ".", "gfile", ".", "IsDirectory", "(", "FLAGS", ".", "checkpoint_path", ")", ":", "\n", "    ", "checkpoint_path", "=", "tf", ".", "train", ".", "latest_checkpoint", "(", "FLAGS", ".", "checkpoint_path", ")", "\n", "", "else", ":", "\n", "    ", "checkpoint_path", "=", "FLAGS", ".", "checkpoint_path", "\n", "\n", "", "tf", ".", "logging", ".", "info", "(", "'Fine-tuning from %s'", "%", "checkpoint_path", ")", "\n", "\n", "return", "slim", ".", "assign_from_checkpoint_fn", "(", "\n", "checkpoint_path", ",", "\n", "variables_to_restore", ",", "\n", "ignore_missing_vars", "=", "FLAGS", ".", "ignore_missing_vars", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.None.train_image_classifier._get_variables_to_train": [[406, 422], ["tensorflow.trainable_variables", "tensorflow.get_collection", "variables_to_train.extend", "scope.strip", "FLAGS.trainable_scopes.split"], "function", ["None"], ["", "def", "_get_variables_to_train", "(", ")", ":", "\n", "  ", "\"\"\"Returns a list of variables to train.\n\n  Returns:\n    A list of variables to train by the optimizer.\n  \"\"\"", "\n", "if", "FLAGS", ".", "trainable_scopes", "is", "None", ":", "\n", "    ", "return", "tf", ".", "trainable_variables", "(", ")", "\n", "", "else", ":", "\n", "    ", "scopes", "=", "[", "scope", ".", "strip", "(", ")", "for", "scope", "in", "FLAGS", ".", "trainable_scopes", ".", "split", "(", "','", ")", "]", "\n", "\n", "", "variables_to_train", "=", "[", "]", "\n", "for", "scope", "in", "scopes", ":", "\n", "    ", "variables", "=", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "TRAINABLE_VARIABLES", ",", "scope", ")", "\n", "variables_to_train", ".", "extend", "(", "variables", ")", "\n", "", "return", "variables_to_train", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.None.train_image_classifier.main": [[424, 672], ["tensorflow.logging.set_verbosity", "ValueError", "ValueError", "tensorflow.Graph().as_default", "deployment.model_deploy.DeploymentConfig", "datasets.dataset_factory.get_dataset", "nets.nets_factory.get_network_fn", "preprocessing.preprocessing_factory.get_preprocessing", "set", "deployment.model_deploy.create_clones", "model_deploy.DeploymentConfig.clone_scope", "tensorflow.get_collection", "tensorflow.get_collection", "slim.get_model_variables", "train_image_classifier._get_variables_to_train", "deployment.model_deploy.optimize_clones", "set.add", "tf.train.SyncReplicasOptimizer.apply_gradients", "tf.get_collection.append", "tensorflow.group", "tensorflow.python.ops.control_flow_ops.with_dependencies", "set", "tensorflow.summary.merge", "tensorflow.ConfigProto", "signal.signal", "signal.signal", "datetime.datetime.utcnow", "print", "slim.learning.train", "datetime.datetime.utcnow", "tensorflow.device", "slim.create_global_step", "tensorflow.device", "slim.dataset_data_provider.DatasetDataProvider", "slim.dataset_data_provider.DatasetDataProvider.get", "tensorflow.train.batch", "slim.one_hot_encoding", "slim.prefetch_queue.prefetch_queue", "slim.prefetch_queue.prefetch_queue.dequeue", "nets_factory.get_network_fn.", "slim.losses.softmax_cross_entropy", "tensorflow.get_collection", "set.add", "set.add", "set.add", "set.add", "slim.get_model_variables", "tensorflow.train.ExponentialMovingAverage", "tensorflow.device", "train_image_classifier._configure_learning_rate", "train_image_classifier._configure_optimizer", "set.add", "tensorflow.train.SyncReplicasOptimizer", "tensorflow.summary.scalar", "tensorflow.get_collection", "list", "slim.learning.train_step", "datetime.datetime.utcnow", "print", "open", "print", "print", "print", "print", "sorted", "print", "print", "open.flush", "print", "print", "open.flush", "tensorflow.Graph", "model_deploy.DeploymentConfig.variables_device", "model_deploy.DeploymentConfig.inputs_device", "preprocessing_factory.get_preprocessing.", "preprocessing_factory.get_preprocessing.", "tensorflow.squeeze", "slim.losses.softmax_cross_entropy", "tensorflow.summary.histogram", "tensorflow.summary.scalar", "tensorflow.summary.scalar", "tensorflow.summary.histogram", "model_deploy.DeploymentConfig.optimizer_device", "tensorflow.summary.scalar", "tf.get_collection.append", "print", "open.flush", "FLAGS.__flags.keys", "print", "train_image_classifier._get_init_fn", "tensorflow.nn.zero_fraction", "tensorflow.constant", "tf.train.ExponentialMovingAverage.apply"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.dataset_factory.get_dataset", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.nets_factory.get_network_fn", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.preprocessing_factory.get_preprocessing", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.create_clones", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_scope", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.None.train_image_classifier._get_variables_to_train", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.optimize_clones", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.None.train_image_classifier._configure_learning_rate", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.None.train_image_classifier._configure_optimizer", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.variables_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.inputs_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.optimizer_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.None.train_image_classifier._get_init_fn"], ["", "def", "main", "(", "_", ")", ":", "\n", "  ", "if", "not", "FLAGS", ".", "dataset_dir", ":", "\n", "    ", "raise", "ValueError", "(", "'You must supply the dataset directory with --dataset_dir'", ")", "\n", "\n", "", "if", "not", "FLAGS", ".", "normalize_per_image", "in", "[", "0", ",", "1", ",", "2", "]", ":", "\n", "    ", "raise", "ValueError", "(", "'Invalid value for --normalize_per_image: must be 0, 1 or 2'", ")", "\n", "\n", "", "tf", ".", "logging", ".", "set_verbosity", "(", "tf", ".", "logging", ".", "INFO", ")", "\n", "with", "tf", ".", "Graph", "(", ")", ".", "as_default", "(", ")", ":", "\n", "######################", "\n", "# Config model_deploy#", "\n", "######################", "\n", "    ", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "\n", "num_clones", "=", "FLAGS", ".", "num_clones", ",", "\n", "clone_on_cpu", "=", "FLAGS", ".", "clone_on_cpu", ",", "\n", "replica_id", "=", "FLAGS", ".", "task", ",", "\n", "num_replicas", "=", "FLAGS", ".", "worker_replicas", ",", "\n", "num_ps_tasks", "=", "FLAGS", ".", "num_ps_tasks", ")", "\n", "\n", "# Create global_step", "\n", "with", "tf", ".", "device", "(", "deploy_config", ".", "variables_device", "(", ")", ")", ":", "\n", "      ", "global_step", "=", "slim", ".", "create_global_step", "(", ")", "\n", "\n", "######################", "\n", "# Select the dataset #", "\n", "######################", "\n", "", "dataset", "=", "dataset_factory", ".", "get_dataset", "(", "\n", "FLAGS", ".", "dataset_name", ",", "FLAGS", ".", "dataset_split_name", ",", "FLAGS", ".", "dataset_dir", ")", "\n", "\n", "####################", "\n", "# Select the network #", "\n", "####################", "\n", "network_fn", "=", "nets_factory", ".", "get_network_fn", "(", "\n", "FLAGS", ".", "model_name", ",", "\n", "num_classes", "=", "(", "dataset", ".", "num_classes", "-", "FLAGS", ".", "labels_offset", ")", ",", "\n", "weight_decay", "=", "FLAGS", ".", "weight_decay", ",", "\n", "is_training", "=", "True", ")", "\n", "\n", "#####################################", "\n", "# Select the preprocessing function #", "\n", "#####################################", "\n", "preprocessing_name", "=", "FLAGS", ".", "preprocessing_name", "or", "FLAGS", ".", "model_name", "\n", "image_preprocessing_fn", "=", "preprocessing_factory", ".", "get_preprocessing", "(", "\n", "preprocessing_name", ",", "\n", "is_training", "=", "True", ")", "\n", "\n", "##############################################################", "\n", "# Create a dataset provider that loads data from the dataset #", "\n", "##############################################################", "\n", "with", "tf", ".", "device", "(", "deploy_config", ".", "inputs_device", "(", ")", ")", ":", "\n", "      ", "provider", "=", "slim", ".", "dataset_data_provider", ".", "DatasetDataProvider", "(", "\n", "dataset", ",", "\n", "num_readers", "=", "FLAGS", ".", "num_readers", ",", "\n", "common_queue_capacity", "=", "20", "*", "FLAGS", ".", "batch_size", ",", "\n", "common_queue_min", "=", "10", "*", "FLAGS", ".", "batch_size", ")", "\n", "[", "image", ",", "label", "]", "=", "provider", ".", "get", "(", "[", "'image'", ",", "FLAGS", ".", "task_name", "]", ")", "\n", "label", "-=", "FLAGS", ".", "labels_offset", "\n", "\n", "train_image_size", "=", "FLAGS", ".", "train_image_size", "or", "network_fn", ".", "default_image_size", "\n", "\n", "if", "FLAGS", ".", "preprocessing_name", "==", "'dermatologic'", ":", "\n", "        ", "image", "=", "image_preprocessing_fn", "(", "image", ",", "train_image_size", ",", "train_image_size", ",", "\n", "bbox", "=", "None", ",", "\n", "fast_mode", "=", "not", "FLAGS", ".", "aggressive_augmentation", ",", "\n", "area_range", "=", "(", "FLAGS", ".", "minimum_area_to_crop", ",", "1.0", ")", ",", "\n", "add_rotations", "=", "FLAGS", ".", "add_rotations", ",", "\n", "normalize_per_image", "=", "FLAGS", ".", "normalize_per_image", ")", "\n", "", "else", ":", "\n", "        ", "image", "=", "image_preprocessing_fn", "(", "image", ",", "train_image_size", ",", "train_image_size", ")", "\n", "\n", "", "images", ",", "labels", "=", "tf", ".", "train", ".", "batch", "(", "\n", "[", "image", ",", "label", "]", ",", "\n", "batch_size", "=", "FLAGS", ".", "batch_size", ",", "\n", "num_threads", "=", "FLAGS", ".", "num_preprocessing_threads", ",", "\n", "capacity", "=", "5", "*", "FLAGS", ".", "batch_size", ")", "\n", "labels", "=", "slim", ".", "one_hot_encoding", "(", "\n", "labels", ",", "dataset", ".", "num_classes", "-", "FLAGS", ".", "labels_offset", ")", "\n", "batch_queue", "=", "slim", ".", "prefetch_queue", ".", "prefetch_queue", "(", "\n", "[", "images", ",", "labels", "]", ",", "capacity", "=", "2", "*", "deploy_config", ".", "num_clones", ")", "\n", "\n", "####################", "\n", "# Define the model #", "\n", "####################", "\n", "", "def", "clone_fn", "(", "batch_queue", ")", ":", "\n", "      ", "\"\"\"Allows data parallelism by creating multiple clones of network_fn.\"\"\"", "\n", "images", ",", "labels", "=", "batch_queue", ".", "dequeue", "(", ")", "\n", "logits", ",", "end_points", "=", "network_fn", "(", "images", ")", "\n", "if", "FLAGS", ".", "model_name", "[", ":", "6", "]", "==", "'resnet'", ":", "\n", "        ", "logits", "=", "tf", ".", "squeeze", "(", "logits", ",", "[", "1", ",", "2", "]", ")", "\n", "\n", "#############################", "\n", "# Specify the loss function #", "\n", "#############################", "\n", "", "if", "'AuxLogits'", "in", "end_points", ":", "\n", "        ", "slim", ".", "losses", ".", "softmax_cross_entropy", "(", "\n", "end_points", "[", "'AuxLogits'", "]", ",", "labels", ",", "\n", "label_smoothing", "=", "FLAGS", ".", "label_smoothing", ",", "weights", "=", "0.4", ",", "scope", "=", "'aux_loss'", ")", "\n", "", "slim", ".", "losses", ".", "softmax_cross_entropy", "(", "\n", "logits", ",", "labels", ",", "label_smoothing", "=", "FLAGS", ".", "label_smoothing", ",", "weights", "=", "1.0", ")", "\n", "return", "end_points", "\n", "\n", "# Gather initial summaries.", "\n", "", "summaries", "=", "set", "(", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "SUMMARIES", ")", ")", "\n", "\n", "clones", "=", "model_deploy", ".", "create_clones", "(", "deploy_config", ",", "clone_fn", ",", "[", "batch_queue", "]", ")", "\n", "first_clone_scope", "=", "deploy_config", ".", "clone_scope", "(", "0", ")", "\n", "# Gather update_ops from the first clone. These contain, for example,", "\n", "# the updates for the batch_norm variables created by network_fn.", "\n", "update_ops", "=", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "UPDATE_OPS", ",", "first_clone_scope", ")", "\n", "\n", "# Add summaries for end_points.", "\n", "end_points", "=", "clones", "[", "0", "]", ".", "outputs", "\n", "for", "end_point", "in", "end_points", ":", "\n", "      ", "x", "=", "end_points", "[", "end_point", "]", "\n", "summaries", ".", "add", "(", "tf", ".", "summary", ".", "histogram", "(", "'activations/'", "+", "end_point", ",", "x", ")", ")", "\n", "summaries", ".", "add", "(", "tf", ".", "summary", ".", "scalar", "(", "'sparsity/'", "+", "end_point", ",", "\n", "tf", ".", "nn", ".", "zero_fraction", "(", "x", ")", ")", ")", "\n", "\n", "# Add summaries for losses.", "\n", "", "for", "loss", "in", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "LOSSES", ",", "first_clone_scope", ")", ":", "\n", "      ", "summaries", ".", "add", "(", "tf", ".", "summary", ".", "scalar", "(", "'losses/%s'", "%", "loss", ".", "op", ".", "name", ",", "loss", ")", ")", "\n", "\n", "# Add summaries for variables.", "\n", "", "for", "variable", "in", "slim", ".", "get_model_variables", "(", ")", ":", "\n", "      ", "summaries", ".", "add", "(", "tf", ".", "summary", ".", "histogram", "(", "variable", ".", "op", ".", "name", ",", "variable", ")", ")", "\n", "\n", "#################################", "\n", "# Configure the moving averages #", "\n", "#################################", "\n", "", "if", "FLAGS", ".", "moving_average_decay", ":", "\n", "      ", "moving_average_variables", "=", "slim", ".", "get_model_variables", "(", ")", "\n", "variable_averages", "=", "tf", ".", "train", ".", "ExponentialMovingAverage", "(", "\n", "FLAGS", ".", "moving_average_decay", ",", "global_step", ")", "\n", "", "else", ":", "\n", "      ", "moving_average_variables", ",", "variable_averages", "=", "None", ",", "None", "\n", "\n", "#########################################", "\n", "# Configure the optimization procedure. #", "\n", "#########################################", "\n", "", "with", "tf", ".", "device", "(", "deploy_config", ".", "optimizer_device", "(", ")", ")", ":", "\n", "      ", "learning_rate", "=", "_configure_learning_rate", "(", "dataset", ".", "num_samples", ",", "global_step", ")", "\n", "optimizer", "=", "_configure_optimizer", "(", "learning_rate", ")", "\n", "summaries", ".", "add", "(", "tf", ".", "summary", ".", "scalar", "(", "'learning_rate'", ",", "learning_rate", ")", ")", "\n", "\n", "", "if", "FLAGS", ".", "sync_replicas", ":", "\n", "# If sync_replicas is enabled, the averaging will be done in the chief", "\n", "# queue runner.", "\n", "      ", "optimizer", "=", "tf", ".", "train", ".", "SyncReplicasOptimizer", "(", "\n", "opt", "=", "optimizer", ",", "\n", "replicas_to_aggregate", "=", "FLAGS", ".", "replicas_to_aggregate", ",", "\n", "variable_averages", "=", "variable_averages", ",", "\n", "variables_to_average", "=", "moving_average_variables", ",", "\n", "replica_id", "=", "tf", ".", "constant", "(", "FLAGS", ".", "task", ",", "tf", ".", "int32", ",", "shape", "=", "(", ")", ")", ",", "\n", "total_num_replicas", "=", "FLAGS", ".", "worker_replicas", ")", "\n", "", "elif", "FLAGS", ".", "moving_average_decay", ":", "\n", "# Update ops executed locally by trainer.", "\n", "      ", "update_ops", ".", "append", "(", "variable_averages", ".", "apply", "(", "moving_average_variables", ")", ")", "\n", "\n", "# Variables to train.", "\n", "", "variables_to_train", "=", "_get_variables_to_train", "(", ")", "\n", "\n", "#  and returns a train_tensor and summary_op", "\n", "total_loss", ",", "clones_gradients", "=", "model_deploy", ".", "optimize_clones", "(", "\n", "clones", ",", "\n", "optimizer", ",", "\n", "var_list", "=", "variables_to_train", ")", "\n", "# Add total_loss to summary.", "\n", "summaries", ".", "add", "(", "tf", ".", "summary", ".", "scalar", "(", "'total_loss'", ",", "total_loss", ")", ")", "\n", "\n", "# Create gradient updates.", "\n", "grad_updates", "=", "optimizer", ".", "apply_gradients", "(", "clones_gradients", ",", "\n", "global_step", "=", "global_step", ")", "\n", "update_ops", ".", "append", "(", "grad_updates", ")", "\n", "\n", "update_op", "=", "tf", ".", "group", "(", "*", "update_ops", ")", "\n", "train_tensor", "=", "control_flow_ops", ".", "with_dependencies", "(", "[", "update_op", "]", ",", "total_loss", ",", "\n", "name", "=", "'train_op'", ")", "\n", "\n", "# Add the summaries from the first clone. These contain the summaries", "\n", "# created by model_fn and either optimize_clones() or _gather_clone_loss().", "\n", "summaries", "|=", "set", "(", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "SUMMARIES", ",", "\n", "first_clone_scope", ")", ")", "\n", "\n", "# Merge all summaries together.", "\n", "summary_op", "=", "tf", ".", "summary", ".", "merge", "(", "list", "(", "summaries", ")", ",", "name", "=", "'summary_op'", ")", "\n", "\n", "session_config", "=", "tf", ".", "ConfigProto", "(", "\n", "log_device_placement", "=", "FLAGS", ".", "verbose_placement", ",", "\n", "allow_soft_placement", "=", "not", "FLAGS", ".", "hard_placement", ")", "\n", "if", "not", "FLAGS", ".", "fixed_memory", ":", "\n", "      ", "session_config", ".", "gpu_options", ".", "allow_growth", "=", "True", "\n", "\n", "###########################", "\n", "# Kicks off the training. #", "\n", "###########################", "\n", "\n", "", "def", "train_step_fn", "(", "sess", ",", "train_op", ",", "global_step", ",", "train_step_kwargs", ")", ":", "\n", "      ", "total_loss", ",", "should_stop", "=", "slim", ".", "learning", ".", "train_step", "(", "\n", "sess", ",", "train_op", ",", "global_step", ",", "train_step_kwargs", ")", "\n", "return", "total_loss", ",", "should_stop", "or", "train_step_fn", ".", "should_stop", "\n", "", "train_step_fn", ".", "should_stop", "=", "False", "\n", "\n", "def", "exit_gracefully", "(", "signum", ",", "frame", ")", ":", "\n", "      ", "interrupted", "=", "datetime", ".", "datetime", ".", "utcnow", "(", ")", "\n", "if", "not", "FLAGS", ".", "experiment_file", "is", "None", ":", "\n", "        ", "print", "(", "'Interrupted on (UTC): '", ",", "interrupted", ",", "sep", "=", "''", ",", "file", "=", "experiment_file", ")", "\n", "experiment_file", ".", "flush", "(", ")", "\n", "", "train_step_fn", ".", "should_stop", "=", "True", "\n", "print", "(", "'Interrupted on (UTC): '", ",", "interrupted", ",", "sep", "=", "''", ")", "\n", "\n", "", "signal", ".", "signal", "(", "signal", ".", "SIGINT", ",", "exit_gracefully", ")", "\n", "signal", ".", "signal", "(", "signal", ".", "SIGTERM", ",", "exit_gracefully", ")", "\n", "\n", "start", "=", "datetime", ".", "datetime", ".", "utcnow", "(", ")", "\n", "print", "(", "'Started on (UTC): '", ",", "start", ",", "sep", "=", "''", ")", "\n", "if", "not", "FLAGS", ".", "experiment_file", "is", "None", ":", "\n", "      ", "experiment_file", "=", "open", "(", "FLAGS", ".", "experiment_file", ",", "'w'", ")", "\n", "print", "(", "'Experiment metadata file:'", ",", "file", "=", "experiment_file", ")", "\n", "print", "(", "FLAGS", ".", "experiment_file", ",", "file", "=", "experiment_file", ")", "\n", "print", "(", "'========================'", ",", "file", "=", "experiment_file", ")", "\n", "print", "(", "'All command-line flags:'", ",", "file", "=", "experiment_file", ")", "\n", "for", "flag_key", "in", "sorted", "(", "FLAGS", ".", "__flags", ".", "keys", "(", ")", ")", ":", "\n", "        ", "print", "(", "flag_key", ",", "' : '", ",", "FLAGS", ".", "__flags", "[", "flag_key", "]", ",", "sep", "=", "''", ",", "file", "=", "experiment_file", ")", "\n", "", "print", "(", "'========================'", ",", "file", "=", "experiment_file", ")", "\n", "print", "(", "'Started on (UTC): '", ",", "start", ",", "sep", "=", "''", ",", "file", "=", "experiment_file", ")", "\n", "experiment_file", ".", "flush", "(", ")", "\n", "\n", "\n", "", "slim", ".", "learning", ".", "train", "(", "\n", "train_tensor", ",", "\n", "train_step_fn", "=", "train_step_fn", ",", "\n", "logdir", "=", "FLAGS", ".", "train_dir", ",", "\n", "master", "=", "FLAGS", ".", "master", ",", "\n", "is_chief", "=", "(", "FLAGS", ".", "task", "==", "0", ")", ",", "\n", "init_fn", "=", "_get_init_fn", "(", ")", ",", "\n", "summary_op", "=", "summary_op", ",", "\n", "number_of_steps", "=", "FLAGS", ".", "max_number_of_steps", ",", "\n", "log_every_n_steps", "=", "FLAGS", ".", "log_every_n_steps", ",", "\n", "save_summaries_secs", "=", "FLAGS", ".", "save_summaries_secs", ",", "\n", "save_interval_secs", "=", "FLAGS", ".", "save_interval_secs", ",", "\n", "sync_optimizer", "=", "optimizer", "if", "FLAGS", ".", "sync_replicas", "else", "None", ",", "\n", "session_config", "=", "session_config", ")", "\n", "\n", "finish", "=", "datetime", ".", "datetime", ".", "utcnow", "(", ")", "\n", "if", "not", "FLAGS", ".", "experiment_file", "is", "None", ":", "\n", "      ", "print", "(", "'Finished on (UTC): '", ",", "finish", ",", "sep", "=", "''", ",", "file", "=", "experiment_file", ")", "\n", "print", "(", "'Elapsed: '", ",", "finish", "-", "start", ",", "sep", "=", "''", ",", "file", "=", "experiment_file", ")", "\n", "experiment_file", ".", "flush", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.None.predict_image_classifier.main": [[151, 491], ["tensorflow.logging.set_verbosity", "ValueError", "ValueError", "ValueError", "ValueError", "ValueError", "ValueError", "ValueError", "ValueError", "ValueError", "ValueError", "ValueError", "ValueError", "tensorflow.Graph().as_default", "slim.get_or_create_global_step", "datasets.dataset_factory.get_dataset", "nets.nets_factory.get_network_fn", "slim.dataset_data_provider.DatasetDataProvider", "slim.dataset_data_provider.DatasetDataProvider.get", "preprocessing.preprocessing_factory.get_preprocessing", "tensorflow.pack", "nets_factory.get_network_fn.", "slim.get_variables_to_restore", "tensorflow.constant", "tensorflow.argmax", "tensorflow.gfile.IsDirectory", "tensorflow.logging.info", "tensorflow.ConfigProto", "slim.assign_from_checkpoint_fn", "numpy.asarray", "numpy.asarray", "numpy.asarray", "print", "sklearn.metrics.accuracy_score", "print", "ValueError", "range", "tensorflow.squeeze", "tensorflow.argmax", "tensorflow.range", "tensorflow.transpose", "tensorflow.gather_nd", "int", "tensorflow.nn.softmax", "tensorflow.reduce_mean", "tensorflow.reduce_mean", "tensorflow.train.latest_checkpoint", "open", "print", "tensorflow.Session", "slim.assign_from_checkpoint_fn.", "tensorflow.train.Coordinator", "tensorflow.train.start_queue_runners", "range", "print", "tf.train.Coordinator.request_stop", "tf.train.Coordinator.join", "open", "print", "print", "sklearn.metrics.confusion_matrix", "print", "range", "print", "print", "tensorflow.Graph", "preprocessing_factory.get_preprocessing.", "preprocessing_factory.get_preprocessing.", "aug_list.append", "predict_image_classifier.main.preprocess"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.dataset_factory.get_dataset", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.nets_factory.get_network_fn", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.preprocessing_factory.get_preprocessing"], ["def", "main", "(", "_", ")", ":", "\n", "  ", "if", "not", "FLAGS", ".", "dataset_dir", ":", "\n", "    ", "raise", "ValueError", "(", "'You must supply the dataset directory with --dataset_dir'", ")", "\n", "\n", "", "if", "FLAGS", ".", "extract_features", "and", "FLAGS", ".", "metrics_file", ":", "\n", "    ", "raise", "ValueError", "(", "'Option --metrics_file cannot be used with --extract_features'", ")", "\n", "\n", "", "if", "FLAGS", ".", "pool_scores", "==", "'none'", "and", "FLAGS", ".", "metrics_file", ":", "\n", "    ", "raise", "ValueError", "(", "'Option --metrics_file cannot be used without pooling'", ")", "\n", "\n", "", "valid_decisions", "=", "[", "'none'", ",", "'probs'", ",", "'logits'", "]", "\n", "if", "FLAGS", ".", "add_scores_to_features", "!=", "'none'", "and", "not", "FLAGS", ".", "extract_features", ":", "\n", "    ", "raise", "ValueError", "(", "'Option --add_scores_to_features must be used with --extract_features'", ")", "\n", "", "elif", "not", "FLAGS", ".", "add_scores_to_features", "in", "valid_decisions", ":", "\n", "    ", "raise", "ValueError", "(", "'Option --add_scores_to_features must be one of '", "+", "' '", ".", "join", "(", "valid_decisions", ")", ")", "\n", "\n", "", "valid_score_poolings", "=", "[", "'avg'", ",", "'max'", ",", "'avg_logits'", ",", "'max_logits'", ",", "'xtrm_logits'", ",", "'none'", "]", "\n", "if", "not", "FLAGS", ".", "pool_scores", "in", "valid_score_poolings", ":", "\n", "    ", "raise", "ValueError", "(", "'Option --pool_scores must be one of '", "+", "' '", ".", "join", "(", "valid_poolings", ")", ")", "\n", "\n", "", "if", "FLAGS", ".", "pool_features", "!=", "'avg'", "and", "not", "FLAGS", ".", "extract_features", ":", "\n", "    ", "raise", "ValueError", "(", "'Option --pool_features must be used with --extract_features'", ")", "\n", "\n", "", "valid_feature_poolings", "=", "[", "'avg'", ",", "'max'", ",", "'xtrm'", ",", "'none'", "]", "\n", "if", "not", "FLAGS", ".", "pool_features", "in", "valid_feature_poolings", ":", "\n", "    ", "raise", "ValueError", "(", "'Option --pool_features must be one of '", "+", "' '", ".", "join", "(", "valid_feature_poolings", ")", ")", "\n", "\n", "", "if", "(", "FLAGS", ".", "extract_features", "and", "FLAGS", ".", "add_scores_to_features", "!=", "'none'", "and", "\n", "(", "FLAGS", ".", "pool_scores", "!=", "FLAGS", ".", "pool_features", ")", "and", "\n", "(", "FLAGS", ".", "pool_scores", "==", "'none'", "or", "FLAGS", ".", "pool_features", "==", "'none'", ")", ")", ":", "\n", "    ", "raise", "ValueError", "(", "'Option --pool_features=none requires --pool_scores=none and vice-versa when extracting both features and decisions'", ")", "\n", "\n", "", "valid_output_formats", "=", "[", "'text'", ",", "'pickle'", "]", "\n", "if", "not", "FLAGS", ".", "output_format", "in", "valid_output_formats", ":", "\n", "    ", "raise", "ValueError", "(", "'Option --output_format must be one of '", "+", "' '", ".", "join", "(", "valid_output_formats", ")", ")", "\n", "\n", "", "if", "FLAGS", ".", "output_format", "==", "'pickle'", "and", "not", "FLAGS", ".", "extract_features", ":", "\n", "    ", "raise", "ValueError", "(", "'Option --output_format=pickle requires --extract_features'", ")", "\n", "\n", "", "if", "FLAGS", ".", "output_format", "==", "'pickle'", "and", "not", "FLAGS", ".", "output_file", ":", "\n", "    ", "raise", "ValueError", "(", "'Option --output_format=pickle requires --output_file'", ")", "\n", "\n", "", "if", "not", "FLAGS", ".", "normalize_per_image", "in", "[", "0", ",", "1", ",", "2", "]", ":", "\n", "    ", "raise", "ValueError", "(", "'Invalid value for --normalize_per_image: must be 0, 1 or 2'", ")", "\n", "\n", "", "tf", ".", "logging", ".", "set_verbosity", "(", "tf", ".", "logging", ".", "INFO", ")", "\n", "with", "tf", ".", "Graph", "(", ")", ".", "as_default", "(", ")", ":", "\n", "    ", "tf_global_step", "=", "slim", ".", "get_or_create_global_step", "(", ")", "\n", "\n", "######################", "\n", "# Select the dataset #", "\n", "######################", "\n", "dataset", "=", "dataset_factory", ".", "get_dataset", "(", "\n", "FLAGS", ".", "dataset_name", ",", "FLAGS", ".", "dataset_split_name", ",", "FLAGS", ".", "dataset_dir", ")", "\n", "\n", "####################", "\n", "# Select the model #", "\n", "####################", "\n", "num_classes", "=", "(", "dataset", ".", "num_classes", "-", "FLAGS", ".", "labels_offset", ")", "\n", "network_fn", "=", "nets_factory", ".", "get_network_fn", "(", "\n", "FLAGS", ".", "model_name", ",", "\n", "num_classes", "=", "num_classes", ",", "\n", "is_training", "=", "False", ")", "\n", "\n", "##############################################################", "\n", "# Create a dataset provider that loads data from the dataset #", "\n", "##############################################################", "\n", "provider", "=", "slim", ".", "dataset_data_provider", ".", "DatasetDataProvider", "(", "\n", "dataset", ",", "\n", "shuffle", "=", "False", ",", "\n", "common_queue_capacity", "=", "64", ",", "\n", "common_queue_min", "=", "0", ")", "\n", "\n", "if", "FLAGS", ".", "id_field_name", ":", "\n", "      ", "field_id", "=", "FLAGS", ".", "id_field_name", "\n", "", "else", ":", "\n", "      ", "field_id", "=", "FLAGS", ".", "task_name", "\n", "", "[", "image", ",", "image_id", ",", "label", "]", "=", "provider", ".", "get", "(", "[", "'image'", ",", "field_id", ",", "FLAGS", ".", "task_name", "]", ")", "\n", "label", "-=", "FLAGS", ".", "labels_offset", "\n", "\n", "#####################################", "\n", "# Select the preprocessing function #", "\n", "#####################################", "\n", "preprocessing_name", "=", "FLAGS", ".", "preprocessing_name", "or", "FLAGS", ".", "model_name", "\n", "image_preprocessing_fn", "=", "preprocessing_factory", ".", "get_preprocessing", "(", "\n", "preprocessing_name", ",", "\n", "is_training", "=", "FLAGS", ".", "eval_replicas", ">", "1", ")", "\n", "\n", "eval_image_size", "=", "FLAGS", ".", "eval_image_size", "or", "network_fn", ".", "default_image_size", "\n", "\n", "def", "preprocess", "(", "img", ")", ":", "\n", "      ", "if", "FLAGS", ".", "preprocessing_name", "==", "'dermatologic'", ":", "\n", "        ", "return", "image_preprocessing_fn", "(", "img", ",", "eval_image_size", ",", "eval_image_size", ",", "\n", "bbox", "=", "None", ",", "\n", "fast_mode", "=", "not", "FLAGS", ".", "aggressive_augmentation", ",", "\n", "area_range", "=", "(", "FLAGS", ".", "minimum_area_to_crop", ",", "1.0", ")", ",", "\n", "add_rotations", "=", "FLAGS", ".", "add_rotations", ",", "\n", "normalize_per_image", "=", "FLAGS", ".", "normalize_per_image", ")", "\n", "", "else", ":", "\n", "        ", "return", "image_preprocessing_fn", "(", "img", ",", "eval_image_size", ",", "eval_image_size", ")", "\n", "\n", "", "", "if", "FLAGS", ".", "eval_replicas", ">", "1", ":", "\n", "      ", "aug_list", "=", "[", "]", "\n", "for", "r", "in", "range", "(", "FLAGS", ".", "eval_replicas", ")", ":", "\n", "        ", "aug_list", ".", "append", "(", "preprocess", "(", "image", ")", ")", "\n", "", "", "else", ":", "\n", "      ", "aug_list", "=", "[", "preprocess", "(", "image", ")", "for", "r", "in", "range", "(", "FLAGS", ".", "eval_replicas", ")", "]", "\n", "\n", "", "image_aug", "=", "tf", ".", "pack", "(", "aug_list", ")", "\n", "\n", "####################", "\n", "# Define the model #", "\n", "####################", "\n", "logits", ",", "end_points", "=", "network_fn", "(", "image_aug", ")", "\n", "if", "FLAGS", ".", "model_name", "[", ":", "6", "]", "==", "'resnet'", ":", "\n", "      ", "logits", "=", "tf", ".", "squeeze", "(", "logits", ",", "[", "1", ",", "2", "]", ")", "\n", "\n", "", "variables_to_restore", "=", "slim", ".", "get_variables_to_restore", "(", ")", "\n", "\n", "def", "tf_reduce_maxabs_axis_0", "(", "tensor", ")", ":", "\n", "      ", "xtrm_rows", "=", "tf", ".", "argmax", "(", "tf", ".", "abs", "(", "tensor", ")", ",", "axis", "=", "0", ")", "\n", "xtrm_cols", "=", "tf", ".", "range", "(", "num_classes", ",", "dtype", "=", "tf", ".", "int64", ")", "\n", "# For other axes the indexing below must change", "\n", "xtrm_index", "=", "tf", ".", "transpose", "(", "tf", ".", "stack", "(", "[", "xtrm_rows", ",", "xtrm_cols", "]", ")", ")", "\n", "return", "tf", ".", "gather_nd", "(", "tensor", ",", "xtrm_index", ")", "\n", "\n", "", "pooled_features", "=", "True", "\n", "nada", "=", "tf", ".", "constant", "(", "[", "float", "(", "'nan'", ")", "]", ")", "\n", "if", "FLAGS", ".", "extract_features", ":", "\n", "      ", "features", "=", "end_points", "[", "'PreLogitsFlatten'", "]", "\n", "# Pools across replicas", "\n", "if", "FLAGS", ".", "pool_features", "==", "'avg'", ":", "\n", "        ", "features", "=", "tf", ".", "reduce_mean", "(", "features", ",", "axis", "=", "0", ")", "\n", "", "elif", "FLAGS", ".", "pool_features", "==", "'max'", ":", "\n", "        ", "features", "=", "tf", ".", "reduce_max", "(", "features", ",", "axis", "=", "0", ")", "\n", "", "elif", "FLAGS", ".", "pool_features", "==", "'xtrm'", ":", "\n", "        ", "features", "=", "tf_reduce_maxabs_axis_0", "(", "features", ")", "\n", "", "elif", "FLAGS", ".", "pool_features", "==", "'none'", ":", "\n", "        ", "pooled_features", "=", "False", "\n", "", "else", ":", "\n", "        ", "assert", "False", ",", "\"Invalid FLAGS.pool_features: '%s'\"", "%", "FLAGS", ".", "pool_features", "\n", "", "feature_size", "=", "int", "(", "features", ".", "get_shape", "(", ")", "[", "0", "if", "pooled_features", "else", "1", "]", ")", "\n", "", "else", ":", "\n", "      ", "features", "=", "nada", "\n", "feature_size", "=", "0", "\n", "\n", "", "pooled_scores", "=", "True", "\n", "# Pools across replicas", "\n", "if", "FLAGS", ".", "pool_scores", "==", "'avg'", ":", "\n", "      ", "probabilities", "=", "tf", ".", "nn", ".", "softmax", "(", "logits", ")", "\n", "probabilities", "=", "tf", ".", "reduce_mean", "(", "probabilities", ",", "axis", "=", "0", ")", "\n", "logits_out", "=", "tf", ".", "reduce_mean", "(", "logits", ",", "axis", "=", "0", ")", "\n", "", "elif", "FLAGS", ".", "pool_scores", "==", "'avg_logits'", ":", "\n", "      ", "logits_out", "=", "tf", ".", "reduce_mean", "(", "logits", ",", "axis", "=", "0", ")", "\n", "probabilities", "=", "tf", ".", "nn", ".", "softmax", "(", "logits_out", ")", "\n", "", "elif", "FLAGS", ".", "pool_scores", "==", "'max'", ":", "\n", "      ", "probabilities", "=", "tf", ".", "nn", ".", "softmax", "(", "logits", ")", "\n", "probabilities", "=", "tf", ".", "reduce_max", "(", "probabilities", ",", "axis", "=", "0", ")", "\n", "logits_out", "=", "tf", ".", "reduce_max", "(", "logits", ",", "axis", "=", "0", ")", "\n", "", "elif", "FLAGS", ".", "pool_scores", "==", "'max_logits'", ":", "\n", "      ", "logits_out", "=", "tf", ".", "reduce_max", "(", "logits", ",", "axis", "=", "0", ")", "\n", "probabilities", "=", "tf", ".", "nn", ".", "softmax", "(", "logits_out", ")", "\n", "", "elif", "FLAGS", ".", "pool_scores", "==", "'xtrm_logits'", ":", "\n", "      ", "logits_out", "=", "tf_reduce_maxabs_axis_0", "(", "logits", ")", "\n", "probabilities", "=", "tf", ".", "nn", ".", "softmax", "(", "logits_out", ")", "\n", "", "elif", "FLAGS", ".", "pool_scores", "==", "'none'", ":", "\n", "      ", "probabilities", "=", "tf", ".", "nn", ".", "softmax", "(", "logits", ")", "\n", "logits_out", "=", "logits", "\n", "pooled_scores", "=", "False", "\n", "", "else", ":", "\n", "      ", "assert", "False", ",", "\"Invalid FLAGS.pool_scores: '%s'\"", "%", "FLAGS", ".", "pool_scores", "\n", "\n", "", "assert", "pooled_scores", "==", "pooled_features", "\n", "\n", "# Predicts across classes (on each replica, if not pooled)", "\n", "predictions", "=", "tf", ".", "argmax", "(", "probabilities", ",", "axis", "=", "0", "if", "pooled_scores", "else", "1", ")", "\n", "\n", "###########################", "\n", "# Performs the prediction #", "\n", "###########################", "\n", "\n", "if", "tf", ".", "gfile", ".", "IsDirectory", "(", "FLAGS", ".", "checkpoint_path", ")", ":", "\n", "      ", "checkpoint_path", "=", "tf", ".", "train", ".", "latest_checkpoint", "(", "FLAGS", ".", "checkpoint_path", ")", "\n", "", "else", ":", "\n", "      ", "checkpoint_path", "=", "FLAGS", ".", "checkpoint_path", "\n", "\n", "", "tf", ".", "logging", ".", "info", "(", "'Evaluating %s'", "%", "checkpoint_path", ")", "\n", "\n", "session_config", "=", "tf", ".", "ConfigProto", "(", "\n", "log_device_placement", "=", "FLAGS", ".", "verbose_placement", ",", "\n", "allow_soft_placement", "=", "not", "FLAGS", ".", "hard_placement", ")", "\n", "if", "not", "FLAGS", ".", "fixed_memory", ":", "\n", "      ", "session_config", ".", "gpu_options", ".", "allow_growth", "=", "True", "\n", "\n", "# This ensures that we make a single pass over all of the data.", "\n", "", "num_samples", "=", "dataset", ".", "num_samples", "\n", "\n", "init_fn", "=", "slim", ".", "assign_from_checkpoint_fn", "(", "checkpoint_path", ",", "\n", "variables_to_restore", ")", "# slim.get_model_variables(FLAGS.model_name))", "\n", "\n", "outfile", "=", "open", "(", "FLAGS", ".", "output_file", ",", "'w'", ")", "if", "FLAGS", ".", "output_file", "else", "sys", ".", "stdout", "\n", "num_outputs", "=", "num_samples", "if", "pooled_features", "else", "num_samples", "*", "FLAGS", ".", "eval_replicas", "\n", "tensor_id", "=", "image_id", "if", "FLAGS", ".", "id_field_name", "else", "nada", "\n", "if", "FLAGS", ".", "extract_features", ":", "\n", "# Features - control message and targets", "\n", "      ", "openP", "=", "'{'", "\n", "closeP", "=", "'}'", "\n", "if", "FLAGS", ".", "add_scores_to_features", "==", "'probs'", ":", "\n", "        ", "feature_size", "+=", "num_classes", "\n", "targets", "=", "[", "tensor_id", ",", "label", ",", "features", ",", "probabilities", ",", "nada", "]", "\n", "", "elif", "FLAGS", ".", "add_scores_to_features", "==", "'logits'", ":", "\n", "        ", "feature_size", "+=", "num_classes", "\n", "targets", "=", "[", "tensor_id", ",", "label", ",", "features", ",", "logits_out", ",", "nada", "]", "\n", "", "else", ":", "\n", "        ", "targets", "=", "[", "tensor_id", ",", "label", ",", "features", ",", "nada", ",", "nada", "]", "\n", "# Features - outputs header", "\n", "", "if", "FLAGS", ".", "output_format", "==", "'text'", ":", "\n", "        ", "print", "(", "num_outputs", ",", "file", "=", "outfile", ")", "\n", "header", "=", "[", "FLAGS", ".", "id_field_name", "]", "if", "FLAGS", ".", "id_field_name", "else", "[", "]", "\n", "header", "+=", "[", "'truth'", "]", "\n", "header", "+=", "[", "'feature[%d]'", "%", "feature_size", "]", "\n", "print", "(", "', '", ".", "join", "(", "header", ")", ",", "file", "=", "outfile", ")", "\n", "", "else", ":", "\n", "        ", "pickle", ".", "dump", "(", "[", "num_outputs", ",", "feature_size", ",", "FLAGS", ".", "__flags", "]", ",", "outfile", ")", "\n", "# Features - outputs contents", "\n", "", "def", "print_replica", "(", "image_id", ",", "label", ",", "feats", ")", ":", "\n", "        ", "if", "FLAGS", ".", "output_format", "==", "'text'", ":", "\n", "          ", "record", "=", "[", "image_id", "]", "if", "FLAGS", ".", "id_field_name", "else", "[", "]", "\n", "record", "+=", "[", "str", "(", "label", ")", "]", "\n", "record", "+=", "[", "_PREDICTION_OUTPUT_FORMAT", "%", "feats", "[", "f", "]", "for", "f", "in", "range", "(", "feature_size", ")", "]", "\n", "print", "(", "', '", ".", "join", "(", "record", ")", ",", "file", "=", "outfile", ")", "\n", "", "else", ":", "\n", "          ", "pickle", ".", "dump", "(", "[", "image_id", ",", "label", ",", "feats", "]", ",", "outfile", ")", "\n", "", "", "", "else", ":", "# => FLAGS.extract_features==False", "\n", "      ", "if", "pooled_scores", ":", "\n", "        ", "list_ids", "=", "[", "]", "\n", "list_labels", "=", "[", "]", "\n", "list_scores", "=", "[", "]", "\n", "list_predictions", "=", "[", "]", "\n", "# Predictions - control message and targets", "\n", "", "openP", "=", "'['", "\n", "closeP", "=", "']'", "\n", "targets", "=", "[", "tensor_id", ",", "label", ",", "nada", ",", "probabilities", ",", "predictions", "]", "\n", "# Predictions - print header", "\n", "header", "=", "[", "FLAGS", ".", "id_field_name", "]", "if", "FLAGS", ".", "id_field_name", "else", "[", "]", "\n", "header", "+=", "[", "'truth'", "]", "\n", "header", "+=", "[", "'class%d'", "%", "c", "for", "c", "in", "range", "(", "num_classes", ")", "]", "if", "dataset", ".", "labels_to_names", "is", "None", "else", "[", "dataset", ".", "labels_to_names", "[", "c", "]", "+", "'[%d]'", "%", "c", "for", "c", "in", "range", "(", "num_classes", ")", "]", "\n", "header", "+=", "[", "'prediction'", "]", "\n", "print", "(", "', '", ".", "join", "(", "header", ")", ",", "file", "=", "outfile", ")", "\n", "# Predictions - print contents", "\n", "def", "print_replica", "(", "image_id", ",", "label", ",", "scores", ",", "pred", ")", ":", "\n", "        ", "record", "=", "[", "image_id", "]", "if", "FLAGS", ".", "id_field_name", "else", "[", "]", "\n", "record", "+=", "[", "str", "(", "label", ")", "]", "\n", "record", "+=", "[", "_PREDICTION_OUTPUT_FORMAT", "%", "scores", "[", "c", "]", "for", "c", "in", "range", "(", "num_classes", ")", "]", "\n", "record", "+=", "[", "str", "(", "pred", ")", "]", "\n", "print", "(", "', '", ".", "join", "(", "record", ")", ",", "file", "=", "outfile", ")", "\n", "\n", "", "", "with", "tf", ".", "Session", "(", "config", "=", "session_config", ")", "as", "sess", ":", "\n", "      ", "init_fn", "(", "sess", ")", "\n", "\n", "# init_op = tf.global_variables_initializer()", "\n", "# sess.run(init_op)", "\n", "\n", "coord", "=", "tf", ".", "train", ".", "Coordinator", "(", ")", "\n", "threads", "=", "tf", ".", "train", ".", "start_queue_runners", "(", "sess", "=", "sess", ",", "coord", "=", "coord", ")", "\n", "count_changes", "=", "0", "\n", "count_disagreements", "=", "0", "\n", "\n", "for", "s", "in", "range", "(", "num_samples", ")", ":", "\n", "        ", "print", "(", "openP", ",", "end", "=", "''", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "next_id", ",", "next_lab", ",", "next_feats", ",", "next_scores", ",", "next_preds", "=", "sess", ".", "run", "(", "\n", "targets", ",", "options", "=", "tf", ".", "RunOptions", "(", "timeout_in_ms", "=", "120000", ")", ")", "\n", "next_id", "=", "next_id", "if", "FLAGS", ".", "id_field_name", "else", "''", "\n", "if", "FLAGS", ".", "extract_features", ":", "\n", "          ", "if", "FLAGS", ".", "add_scores_to_features", "!=", "'none'", ":", "\n", "            ", "next_feats", "=", "np", ".", "concatenate", "(", "(", "next_feats", ",", "next_scores", ")", ",", "axis", "=", "0", "if", "pooled_features", "else", "1", ")", "\n", "", "if", "pooled_features", ":", "\n", "            ", "print_replica", "(", "next_id", ",", "next_lab", ",", "next_feats", ")", "\n", "", "else", ":", "\n", "            ", "for", "r", "in", "range", "(", "FLAGS", ".", "eval_replicas", ")", ":", "\n", "              ", "print_replica", "(", "next_id", ",", "next_lab", ",", "next_feats", "[", "r", "]", ")", "\n", "", "", "", "else", ":", "\n", "          ", "if", "pooled_scores", ":", "\n", "            ", "list_ids", ".", "append", "(", "next_id", ")", "\n", "list_labels", ".", "append", "(", "next_lab", ")", "\n", "list_scores", ".", "append", "(", "next_scores", ")", "\n", "list_predictions", ".", "append", "(", "next_preds", ")", "\n", "print_replica", "(", "next_id", ",", "next_lab", ",", "next_scores", ",", "next_preds", ")", "\n", "", "else", ":", "\n", "            ", "for", "r", "in", "range", "(", "FLAGS", ".", "eval_replicas", ")", ":", "\n", "              ", "print_replica", "(", "next_id", ",", "next_lab", ",", "next_scores", "[", "r", "]", ",", "next_preds", "[", "r", "]", ")", "\n", "", "", "", "print", "(", "closeP", ",", "end", "=", "'\\n'", "if", "(", "s", "+", "1", ")", "%", "40", "==", "0", "else", "''", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "# print('{All variables: ', len (tf.get_collection(tf.GraphKeys.GLOBAL_VARIABLES)), '}')", "\n", "", "print", "(", "''", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "\n", "coord", ".", "request_stop", "(", ")", "\n", "coord", ".", "join", "(", "threads", ")", "\n", "\n", "", "", "if", "pooled_scores", "and", "not", "FLAGS", ".", "extract_features", ":", "\n", "\n", "    ", "if", "FLAGS", ".", "metrics_file", ":", "\n", "      ", "metfile", "=", "open", "(", "FLAGS", ".", "metrics_file", ",", "'w'", ")", "\n", "print", "(", "'checkpoint, acc, auc[1], auc[2], map[1], map[2], isbi'", ",", "file", "=", "metfile", ")", "\n", "", "else", ":", "\n", "      ", "metfile", "=", "None", "\n", "\n", "", "np_labels", "=", "np", ".", "asarray", "(", "list_labels", ")", "\n", "np_predictions", "=", "np", ".", "asarray", "(", "list_predictions", ")", "\n", "np_probabilities", "=", "np", ".", "asarray", "(", "list_scores", ")", "\n", "\n", "metfile", "and", "print", "(", "checkpoint_path", ",", "', '", ",", "sep", "=", "''", ",", "end", "=", "''", ",", "file", "=", "metfile", ")", "\n", "print", "(", "'Confusion Matrix:\\n'", ",", "sklearn", ".", "metrics", ".", "confusion_matrix", "(", "np_labels", ",", "np_predictions", ")", ")", "\n", "m_acc", "=", "sklearn", ".", "metrics", ".", "accuracy_score", "(", "np_labels", ",", "np_predictions", ")", "\n", "print", "(", "'Acc: '", ",", "m_acc", ")", "\n", "metfile", "and", "print", "(", "m_acc", ",", "', '", ",", "sep", "=", "''", ",", "end", "=", "''", ",", "file", "=", "metfile", ")", "\n", "\n", "try", ":", "\n", "      ", "aucs", "=", "[", "]", "\n", "mAPs", "=", "[", "]", "\n", "for", "j", "in", "range", "(", "num_classes", ")", ":", "\n", "        ", "np_labels_j", "=", "np", ".", "int64", "(", "np_labels", "==", "j", ")", "\n", "np_scores_j", "=", "np_probabilities", "[", ":", ",", "j", "]", "\n", "# fpr, tpr, _ = sklearn.metrics.roc_curve(np_labels_j, np_scores_j)", "\n", "auc", "=", "sklearn", ".", "metrics", ".", "roc_auc_score", "(", "np_labels_j", ",", "np_scores_j", ")", "\n", "aucs", ".", "append", "(", "auc", ")", "\n", "print", "(", "'AUC[%d]: '", "%", "j", ",", "auc", ")", "\n", "# pre, rec, _ = sklearn.metrics.precision_recall_curve(np_labels_j, np_scores_j)", "\n", "mAP", "=", "sklearn", ".", "metrics", ".", "average_precision_score", "(", "np_labels_j", ",", "np_scores_j", ")", "\n", "mAPs", ".", "append", "(", "mAP", ")", "\n", "print", "(", "'mAP[%d]: '", "%", "j", ",", "mAP", ")", "\n", "", "metfile", "and", "print", "(", "aucs", "[", "1", "]", ",", "', '", ",", "sep", "=", "''", ",", "end", "=", "''", ",", "file", "=", "metfile", ")", "\n", "metfile", "and", "print", "(", "aucs", "[", "2", "]", ",", "', '", ",", "sep", "=", "''", ",", "end", "=", "''", ",", "file", "=", "metfile", ")", "\n", "metfile", "and", "print", "(", "mAPs", "[", "1", "]", ",", "', '", ",", "sep", "=", "''", ",", "end", "=", "''", ",", "file", "=", "metfile", ")", "\n", "metfile", "and", "print", "(", "mAPs", "[", "2", "]", ",", "', '", ",", "sep", "=", "''", ",", "end", "=", "''", ",", "file", "=", "metfile", ")", "\n", "metfile", "and", "print", "(", "(", "aucs", "[", "1", "]", "+", "aucs", "[", "2", "]", ")", "/", "2.0", ",", "sep", "=", "''", ",", "end", "=", "'\\n'", ",", "file", "=", "metfile", ")", "\n", "print", "(", "'AUCavg: '", ",", "sum", "(", "aucs", ")", "/", "num_classes", ")", "\n", "print", "(", "'mAPavg: '", ",", "sum", "(", "mAPs", ")", "/", "num_classes", ")", "\n", "", "except", "ValueError", ":", "\n", "      ", "pass", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.None.predict_svm_layer.probability_from_logits": [[58, 61], ["numpy.exp"], "function", ["None"], ["def", "probability_from_logits", "(", "logits", ")", ":", "\n", "    ", "odds", "=", "np", ".", "exp", "(", "logits", ")", "\n", "return", "odds", "/", "(", "odds", "+", "1.0", ")", "\n", "", "def", "logits_from_probability", "(", "prob", ")", ":", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.None.predict_svm_layer.logits_from_probability": [[61, 65], ["numpy.errstate", "numpy.log"], "function", ["None"], ["", "def", "logits_from_probability", "(", "prob", ")", ":", "\n", "    ", "with", "np", ".", "errstate", "(", "divide", "=", "'ignore'", ")", ":", "\n", "      ", "odds", "=", "prob", "/", "(", "1.0", "-", "prob", ")", "\n", "return", "np", ".", "log", "(", "odds", ")", "\n", "", "", "def", "extreme_probability", "(", "prob", ")", ":", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.None.predict_svm_layer.extreme_probability": [[65, 67], ["numpy.argmax", "numpy.abs", "predict_svm_layer.logits_from_probability"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.None.predict_svm_layer.logits_from_probability"], ["", "", "def", "extreme_probability", "(", "prob", ")", ":", "\n", "  ", "return", "prob", "[", "np", ".", "argmax", "(", "np", ".", "abs", "(", "logits_from_probability", "(", "prob", ")", ")", ")", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.dermatologic_preprocessing.apply_with_random_selector": [[28, 45], ["tensorflow.random_uniform", "tensorflow.python.ops.control_flow_ops.merge", "func", "range", "tensorflow.python.ops.control_flow_ops.switch", "tensorflow.equal"], "function", ["None"], ["def", "apply_with_random_selector", "(", "x", ",", "func", ",", "num_cases", ")", ":", "\n", "  ", "\"\"\"Computes func(x, sel), with sel sampled from [0...num_cases-1].\n\n  Args:\n    x: input Tensor.\n    func: Python function to apply.\n    num_cases: Python int32, number of cases to sample sel from.\n\n  Returns:\n    The result of func(x, sel), where func receives the value of the\n    selector as a python integer, but sel is sampled dynamically.\n  \"\"\"", "\n", "sel", "=", "tf", ".", "random_uniform", "(", "[", "]", ",", "maxval", "=", "num_cases", ",", "dtype", "=", "tf", ".", "int32", ")", "\n", "# Pass the real x only to one of the func calls.", "\n", "return", "control_flow_ops", ".", "merge", "(", "[", "\n", "func", "(", "control_flow_ops", ".", "switch", "(", "x", ",", "tf", ".", "equal", "(", "sel", ",", "case", ")", ")", "[", "1", "]", ",", "case", ")", "\n", "for", "case", "in", "range", "(", "num_cases", ")", "]", ")", "[", "0", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.dermatologic_preprocessing.distort_color": [[47, 99], ["tensorflow.name_scope", "tensorflow.clip_by_value", "tensorflow.image.random_brightness", "tensorflow.image.random_saturation", "tensorflow.image.random_saturation", "tensorflow.image.random_brightness", "tensorflow.image.random_brightness", "tensorflow.image.random_saturation", "tensorflow.image.random_hue", "tensorflow.image.random_contrast", "tensorflow.image.random_saturation", "tensorflow.image.random_brightness", "tensorflow.image.random_contrast", "tensorflow.image.random_hue", "tensorflow.image.random_contrast", "tensorflow.image.random_hue", "tensorflow.image.random_brightness", "tensorflow.image.random_saturation", "tensorflow.image.random_hue", "tensorflow.image.random_saturation", "tensorflow.image.random_contrast", "tensorflow.image.random_brightness", "ValueError"], "function", ["None"], ["", "def", "distort_color", "(", "image", ",", "color_ordering", "=", "0", ",", "fast_mode", "=", "True", ",", "scope", "=", "None", ")", ":", "\n", "  ", "\"\"\"Distort the color of a Tensor image.\n\n  Each color distortion is non-commutative and thus ordering of the color ops\n  matters. Ideally we would randomly permute the ordering of the color ops.\n  Rather then adding that level of complication, we select a distinct ordering\n  of color ops for each preprocessing thread.\n\n  Args:\n    image: 3-D Tensor containing single image in [0, 1].\n    color_ordering: Python int, a type of distortion (valid values: 0-3).\n    fast_mode: Avoids slower ops (random_hue and random_contrast)\n    scope: Optional scope for name_scope.\n  Returns:\n    3-D Tensor color-distorted image on range [0, 1]\n  Raises:\n    ValueError: if color_ordering not in [0, 3]\n  \"\"\"", "\n", "with", "tf", ".", "name_scope", "(", "scope", ",", "'distort_color'", ",", "[", "image", "]", ")", ":", "\n", "    ", "if", "fast_mode", ":", "\n", "      ", "if", "color_ordering", "==", "0", ":", "\n", "        ", "image", "=", "tf", ".", "image", ".", "random_brightness", "(", "image", ",", "max_delta", "=", "32.", "/", "255.", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_saturation", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "", "else", ":", "\n", "        ", "image", "=", "tf", ".", "image", ".", "random_saturation", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_brightness", "(", "image", ",", "max_delta", "=", "32.", "/", "255.", ")", "\n", "", "", "else", ":", "\n", "      ", "if", "color_ordering", "==", "0", ":", "\n", "        ", "image", "=", "tf", ".", "image", ".", "random_brightness", "(", "image", ",", "max_delta", "=", "32.", "/", "255.", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_saturation", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_hue", "(", "image", ",", "max_delta", "=", "0.2", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_contrast", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "", "elif", "color_ordering", "==", "1", ":", "\n", "        ", "image", "=", "tf", ".", "image", ".", "random_saturation", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_brightness", "(", "image", ",", "max_delta", "=", "32.", "/", "255.", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_contrast", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_hue", "(", "image", ",", "max_delta", "=", "0.2", ")", "\n", "", "elif", "color_ordering", "==", "2", ":", "\n", "        ", "image", "=", "tf", ".", "image", ".", "random_contrast", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_hue", "(", "image", ",", "max_delta", "=", "0.2", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_brightness", "(", "image", ",", "max_delta", "=", "32.", "/", "255.", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_saturation", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "", "elif", "color_ordering", "==", "3", ":", "\n", "        ", "image", "=", "tf", ".", "image", ".", "random_hue", "(", "image", ",", "max_delta", "=", "0.2", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_saturation", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_contrast", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_brightness", "(", "image", ",", "max_delta", "=", "32.", "/", "255.", ")", "\n", "", "else", ":", "\n", "        ", "raise", "ValueError", "(", "'color_ordering must be in [0, 3]'", ")", "\n", "\n", "# The random_* ops do not necessarily clamp.", "\n", "", "", "return", "tf", ".", "clip_by_value", "(", "image", ",", "0.0", ",", "1.0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.dermatologic_preprocessing.distorted_bounding_box_crop": [[100, 155], ["tensorflow.name_scope", "tensorflow.image.sample_distorted_bounding_box", "tensorflow.slice", "tensorflow.shape"], "function", ["None"], ["", "", "def", "distorted_bounding_box_crop", "(", "image", ",", "\n", "bbox", ",", "\n", "min_object_covered", "=", "0.1", ",", "\n", "aspect_ratio_range", "=", "(", "0.66", ",", "1.52", ")", ",", "\n", "area_range", "=", "(", "0.20", ",", "1.0", ")", ",", "\n", "max_attempts", "=", "100", ",", "\n", "scope", "=", "None", ")", ":", "\n", "  ", "\"\"\"Generates cropped_image using a one of the bboxes randomly distorted.\n\n  See `tf.image.sample_distorted_bounding_box` for more documentation.\n\n  Args:\n    image: 3-D Tensor of image (it will be converted to floats in [0, 1]).\n    bbox: 3-D float Tensor of bounding boxes arranged [1, num_boxes, coords]\n      where each coordinate is [0, 1) and the coordinates are arranged\n      as [ymin, xmin, ymax, xmax]. If num_boxes is 0 then it would use the whole\n      image.\n    min_object_covered: An optional `float`. Defaults to `0.1`. The cropped\n      area of the image must contain at least this fraction of any bounding box\n      supplied.\n    aspect_ratio_range: An optional list of `floats`. The cropped area of the\n      image must have an aspect ratio = width / height within this range.\n    area_range: An optional list of `floats`. The cropped area of the image\n      must contain a fraction of the supplied image within in this range.\n    max_attempts: An optional `int`. Number of attempts at generating a cropped\n      region of the image of the specified constraints. After `max_attempts`\n      failures, return the entire image.\n    scope: Optional scope for name_scope.\n  Returns:\n    A tuple, a 3-D Tensor cropped_image and the distorted bbox\n  \"\"\"", "\n", "with", "tf", ".", "name_scope", "(", "scope", ",", "'distorted_bounding_box_crop'", ",", "[", "image", ",", "bbox", "]", ")", ":", "\n", "# Each bounding box has shape [1, num_boxes, box coords] and", "\n", "# the coordinates are ordered [ymin, xmin, ymax, xmax].", "\n", "\n", "# A large fraction of image datasets contain a human-annotated bounding", "\n", "# box delineating the region of the image containing the object of interest.", "\n", "# We choose to create a new bounding box for the object which is a randomly", "\n", "# distorted version of the human-annotated bounding box that obeys an", "\n", "# allowed range of aspect ratios, sizes and overlap with the human-annotated", "\n", "# bounding box. If no box is supplied, then we assume the bounding box is", "\n", "# the entire image.", "\n", "    ", "sample_distorted_bounding_box", "=", "tf", ".", "image", ".", "sample_distorted_bounding_box", "(", "\n", "tf", ".", "shape", "(", "image", ")", ",", "\n", "bounding_boxes", "=", "bbox", ",", "\n", "min_object_covered", "=", "min_object_covered", ",", "\n", "aspect_ratio_range", "=", "aspect_ratio_range", ",", "\n", "area_range", "=", "area_range", ",", "\n", "max_attempts", "=", "max_attempts", ",", "\n", "use_image_if_no_bounding_boxes", "=", "True", ")", "\n", "bbox_begin", ",", "bbox_size", ",", "distort_bbox", "=", "sample_distorted_bounding_box", "\n", "\n", "# Crop the image to the specified bounding box.", "\n", "cropped_image", "=", "tf", ".", "slice", "(", "image", ",", "bbox_begin", ",", "bbox_size", ")", "\n", "return", "cropped_image", ",", "distort_bbox", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.dermatologic_preprocessing.apply_image_normalization": [[157, 173], ["tensorflow.sub", "tensorflow.mul", "tensorflow.mul", "tensorflow.reduce_mean", "tensorflow.image.per_image_standardization", "tensorflow.mul", "ValueError"], "function", ["None"], ["", "", "def", "apply_image_normalization", "(", "image", ",", "normalize_per_image", "=", "0", ")", ":", "\n", "    ", "if", "normalize_per_image", "==", "0", ":", "\n", "      ", "image", "=", "tf", ".", "sub", "(", "image", ",", "0.5", ")", "\n", "image", "=", "tf", ".", "mul", "(", "image", ",", "2.0", ")", "# All pixels now between -1.0 and 1.0", "\n", "return", "image", "\n", "", "elif", "normalize_per_image", "==", "1", ":", "\n", "      ", "image", "=", "tf", ".", "mul", "(", "image", ",", "2.0", ")", "# All pixels now between 0.0 and 2.0", "\n", "image", "=", "image", "-", "tf", ".", "reduce_mean", "(", "image", ",", "axis", "=", "[", "0", ",", "1", "]", ")", "\n", "# Most pixels should be between -1.0 and 1.0", "\n", "return", "image", "\n", "", "elif", "normalize_per_image", "==", "2", ":", "\n", "      ", "image", "=", "tf", ".", "image", ".", "per_image_standardization", "(", "image", ")", "\n", "image", "=", "tf", ".", "mul", "(", "image", ",", "0.4", ")", "# This makes 98.8% of pixels between -1.0 and 1.0", "\n", "return", "image", "\n", "", "else", ":", "\n", "      ", "raise", "ValueError", "(", "'invalid value for normalize_per_image: %d'", "%", "normalize_per_image", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.dermatologic_preprocessing.preprocess_for_train": [[175, 269], ["tensorflow.name_scope", "tensorflow.image.draw_bounding_boxes", "tensorflow.summary.image", "dermatologic_preprocessing.distorted_bounding_box_crop", "apply_image_normalization.set_shape", "tensorflow.image.draw_bounding_boxes", "tensorflow.summary.image", "dermatologic_preprocessing.apply_with_random_selector", "tensorflow.summary.image", "tensorflow.image.random_flip_left_right", "dermatologic_preprocessing.apply_with_random_selector", "tensorflow.summary.image", "dermatologic_preprocessing.apply_image_normalization", "tensorflow.constant", "tensorflow.image.convert_image_dtype", "tensorflow.expand_dims", "tensorflow.expand_dims", "tensorflow.expand_dims", "tensorflow.expand_dims", "tensorflow.image.resize_images", "dermatologic_preprocessing.distort_color"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.distorted_bounding_box_crop", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.apply_with_random_selector", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.apply_with_random_selector", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.dermatologic_preprocessing.apply_image_normalization", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.distort_color"], ["", "", "def", "preprocess_for_train", "(", "image", ",", "height", ",", "width", ",", "bbox", ",", "\n", "fast_mode", "=", "True", ",", "\n", "aspect_ratio_range", "=", "(", "0.75", ",", "1.33", ")", ",", "\n", "area_range", "=", "(", "0.05", ",", "1.0", ")", ",", "\n", "add_rotations", "=", "False", ",", "\n", "normalize_per_image", "=", "0", ",", "\n", "scope", "=", "None", ")", ":", "\n", "  ", "\"\"\"Distort one image for training a network.\n\n  Distorting images provides a useful technique for augmenting the data\n  set during training in order to make the network invariant to aspects\n  of the image that do not effect the label.\n\n  Additionally it would create image_summaries to display the different\n  transformations applied to the image.\n\n  Args:\n    image: 3-D Tensor of image. If dtype is tf.float32 then the range should be\n      [0, 1], otherwise it would converted to tf.float32 assuming that the range\n      is [0, MAX], where MAX is largest positive representable number for\n      int(8/16/32) data type (see `tf.image.convert_image_dtype` for details).\n    height: integer\n    width: integer\n    bbox: 3-D float Tensor of bounding boxes arranged [1, num_boxes, coords]\n      where each coordinate is [0, 1) and the coordinates are arranged\n      as [ymin, xmin, ymax, xmax].\n    fast_mode: Optional boolean, if True avoids slower transformations (i.e.\n      bi-cubic resizing, random_hue or random_contrast).\n    normalize_per_image: 0 - None; 1 - Subtracts Mean; 2 - Subtracts Mean and Div Stdev\n    scope: Optional scope for name_scope.\n  Returns:\n    3-D float Tensor of distorted image used for training with range [-1, 1].\n  \"\"\"", "\n", "with", "tf", ".", "name_scope", "(", "scope", ",", "'distort_image'", ",", "[", "image", ",", "height", ",", "width", ",", "bbox", "]", ")", ":", "\n", "    ", "if", "bbox", "is", "None", ":", "\n", "      ", "bbox", "=", "tf", ".", "constant", "(", "[", "0.0", ",", "0.0", ",", "1.0", ",", "1.0", "]", ",", "\n", "dtype", "=", "tf", ".", "float32", ",", "\n", "shape", "=", "[", "1", ",", "1", ",", "4", "]", ")", "\n", "", "if", "image", ".", "dtype", "!=", "tf", ".", "float32", ":", "\n", "      ", "image", "=", "tf", ".", "image", ".", "convert_image_dtype", "(", "image", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "# Each bounding box has shape [1, num_boxes, box coords] and", "\n", "# the coordinates are ordered [ymin, xmin, ymax, xmax].", "\n", "", "image_with_box", "=", "tf", ".", "image", ".", "draw_bounding_boxes", "(", "tf", ".", "expand_dims", "(", "image", ",", "0", ")", ",", "\n", "bbox", ")", "\n", "tf", ".", "summary", ".", "image", "(", "'image_with_bounding_boxes'", ",", "image_with_box", ")", "\n", "\n", "distorted_image", ",", "distorted_bbox", "=", "distorted_bounding_box_crop", "(", "image", ",", "bbox", ",", "\n", "aspect_ratio_range", "=", "aspect_ratio_range", ",", "area_range", "=", "area_range", ")", "\n", "# Restore the shape since the dynamic slice based upon the bbox_size loses", "\n", "# the third dimension.", "\n", "distorted_image", ".", "set_shape", "(", "[", "None", ",", "None", ",", "3", "]", ")", "\n", "image_with_distorted_box", "=", "tf", ".", "image", ".", "draw_bounding_boxes", "(", "\n", "tf", ".", "expand_dims", "(", "image", ",", "0", ")", ",", "distorted_bbox", ")", "\n", "tf", ".", "summary", ".", "image", "(", "'images_with_distorted_bounding_box'", ",", "\n", "image_with_distorted_box", ")", "\n", "\n", "# This resizing operation may distort the images because the aspect", "\n", "# ratio is not respected. ", "\n", "\n", "# Originally in inceptonv4, we select a resize method in a round robin", "\n", "# fashion based on the thread number. Note that ResizeMethod contains 4 enumerated resizing methods.", "\n", "# Here for speedup we select only 1 case (bilinear) independently of fast_mode.", "\n", "\n", "num_resize_cases", "=", "1", "if", "fast_mode", "else", "4", "\n", "distorted_image", "=", "apply_with_random_selector", "(", "\n", "distorted_image", ",", "\n", "lambda", "x", ",", "method", ":", "tf", ".", "image", ".", "resize_images", "(", "x", ",", "[", "height", ",", "width", "]", ",", "method", "=", "method", ")", ",", "\n", "num_cases", "=", "num_resize_cases", ")", "\n", "\n", "tf", ".", "summary", ".", "image", "(", "'cropped_resized_image'", ",", "\n", "tf", ".", "expand_dims", "(", "distorted_image", ",", "0", ")", ")", "\n", "\n", "# Randomly flip the image horizontally.", "\n", "distorted_image", "=", "tf", ".", "image", ".", "random_flip_left_right", "(", "distorted_image", ")", "\n", "\n", "# Randomly distort the colors. There are 4 ways to do it.", "\n", "distorted_image", "=", "apply_with_random_selector", "(", "\n", "distorted_image", ",", "\n", "lambda", "x", ",", "ordering", ":", "distort_color", "(", "x", ",", "ordering", ",", "fast_mode", ")", ",", "\n", "num_cases", "=", "4", ")", "\n", "\n", "tf", ".", "summary", ".", "image", "(", "'final_distorted_image'", ",", "tf", ".", "expand_dims", "(", "distorted_image", ",", "0", ")", ")", "\n", "\n", "# Theres is a $@%$ bug on tf.image.rot90", "\n", "# if add_rotations and heigh==width : ", "\n", "#   # Randomly rotates the image. There are 4 orientations, since only multiples of 90o are available", "\n", "#   distorted_image = apply_with_random_selector(", "\n", "#       distorted_image,", "\n", "#       lambda x, turns: tf.image.rot90(x, k=turns),", "\n", "#       num_cases=4)", "\n", "#   distorted_image = tf.image.resize_images(distorted_image, [height, width], method=0)", "\n", "\n", "distorted_image", "=", "apply_image_normalization", "(", "distorted_image", ",", "normalize_per_image", ")", "\n", "return", "distorted_image", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.dermatologic_preprocessing.preprocess_for_eval": [[271, 311], ["tensorflow.name_scope", "dermatologic_preprocessing.apply_image_normalization", "tensorflow.image.convert_image_dtype", "tensorflow.image.central_crop", "tensorflow.expand_dims", "tensorflow.image.resize_bilinear", "tensorflow.squeeze"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.dermatologic_preprocessing.apply_image_normalization"], ["", "", "def", "preprocess_for_eval", "(", "image", ",", "height", ",", "width", ",", "\n", "central_fraction", "=", "0.875", ",", "\n", "normalize_per_image", "=", "0", ",", "\n", "scope", "=", "None", ")", ":", "\n", "  ", "\"\"\"Prepare one image for evaluation.\n\n  If height and width are specified it would output an image with that size by\n  applying resize_bilinear.\n\n  If central_fraction is specified it would cropt the central fraction of the\n  input image.\n\n  Args:\n    image: 3-D Tensor of image. If dtype is tf.float32 then the range should be\n      [0, 1], otherwise it would converted to tf.float32 assuming that the range\n      is [0, MAX], where MAX is largest positive representable number for\n      int(8/16/32) data type (see `tf.image.convert_image_dtype` for details)\n    height: integer\n    width: integer\n    central_fraction: Optional Float, fraction of the image to crop.\n    scope: Optional scope for name_scope.\n  Returns:\n    3-D float Tensor of prepared image.\n  \"\"\"", "\n", "with", "tf", ".", "name_scope", "(", "scope", ",", "'eval_image'", ",", "[", "image", ",", "height", ",", "width", "]", ")", ":", "\n", "    ", "if", "image", ".", "dtype", "!=", "tf", ".", "float32", ":", "\n", "      ", "image", "=", "tf", ".", "image", ".", "convert_image_dtype", "(", "image", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "# Crop the central region of the image with an area containing 87.5% of", "\n", "# the original image.", "\n", "", "if", "central_fraction", ":", "\n", "      ", "image", "=", "tf", ".", "image", ".", "central_crop", "(", "image", ",", "central_fraction", "=", "central_fraction", ")", "\n", "\n", "", "if", "height", "and", "width", ":", "\n", "# Resize the image to the specified height and width.", "\n", "      ", "image", "=", "tf", ".", "expand_dims", "(", "image", ",", "0", ")", "\n", "image", "=", "tf", ".", "image", ".", "resize_bilinear", "(", "image", ",", "[", "height", ",", "width", "]", ",", "\n", "align_corners", "=", "False", ")", "\n", "image", "=", "tf", ".", "squeeze", "(", "image", ",", "[", "0", "]", ")", "\n", "", "image", "=", "apply_image_normalization", "(", "image", ",", "normalize_per_image", ")", "\n", "return", "image", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.dermatologic_preprocessing.preprocess_image": [[313, 350], ["dermatologic_preprocessing.preprocess_for_train", "dermatologic_preprocessing.preprocess_for_eval"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.preprocess_for_train", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.preprocess_for_eval"], ["", "", "def", "preprocess_image", "(", "image", ",", "height", ",", "width", ",", "\n", "is_training", "=", "False", ",", "\n", "bbox", "=", "None", ",", "\n", "fast_mode", "=", "True", ",", "\n", "aspect_ratio_range", "=", "(", "0.75", ",", "1.33", ")", ",", "\n", "area_range", "=", "(", "0.05", ",", "1.0", ")", ",", "\n", "add_rotations", "=", "False", ",", "\n", "normalize_per_image", "=", "0", ")", ":", "\n", "  ", "\"\"\"Pre-process one image for training or evaluation.\n\n  Args:\n    image: 3-D Tensor [height, width, channels] with the image.\n    height: integer, image expected height.\n    width: integer, image expected width.\n    is_training: Boolean. If true it would transform an image for train,\n      otherwise it would transform it for evaluation.\n    bbox: 3-D float Tensor of bounding boxes arranged [1, num_boxes, coords]\n      where each coordinate is [0, 1) and the coordinates are arranged as\n      [ymin, xmin, ymax, xmax].\n    fast_mode: Optional boolean, if True avoids slower transformations.\n\n  Returns:\n    3-D float Tensor containing an appropriately scaled image\n\n  Raises:\n    ValueError: if user does not provide bounding box\n  \"\"\"", "\n", "if", "is_training", ":", "\n", "    ", "return", "preprocess_for_train", "(", "image", ",", "height", ",", "width", ",", "bbox", ",", "\n", "fast_mode", "=", "fast_mode", ",", "\n", "aspect_ratio_range", "=", "aspect_ratio_range", ",", "\n", "area_range", "=", "area_range", ",", "\n", "add_rotations", "=", "add_rotations", ",", "\n", "normalize_per_image", "=", "normalize_per_image", ")", "\n", "", "else", ":", "\n", "    ", "return", "preprocess_for_eval", "(", "image", ",", "height", ",", "width", ",", "\n", "normalize_per_image", "=", "normalize_per_image", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing._crop": [[49, 92], ["tensorflow.shape", "tensorflow.Assert", "tensorflow.python.ops.control_flow_ops.with_dependencies", "tensorflow.Assert", "tensorflow.to_int32", "tensorflow.python.ops.control_flow_ops.with_dependencies", "tensorflow.reshape", "tensorflow.equal", "tensorflow.pack", "tensorflow.logical_and", "tensorflow.pack", "tensorflow.slice", "tensorflow.rank", "tensorflow.greater_equal", "tensorflow.greater_equal"], "function", ["None"], ["def", "_crop", "(", "image", ",", "offset_height", ",", "offset_width", ",", "crop_height", ",", "crop_width", ")", ":", "\n", "  ", "\"\"\"Crops the given image using the provided offsets and sizes.\n\n  Note that the method doesn't assume we know the input image size but it does\n  assume we know the input image rank.\n\n  Args:\n    image: an image of shape [height, width, channels].\n    offset_height: a scalar tensor indicating the height offset.\n    offset_width: a scalar tensor indicating the width offset.\n    crop_height: the height of the cropped image.\n    crop_width: the width of the cropped image.\n\n  Returns:\n    the cropped (and resized) image.\n\n  Raises:\n    InvalidArgumentError: if the rank is not 3 or if the image dimensions are\n      less than the crop size.\n  \"\"\"", "\n", "original_shape", "=", "tf", ".", "shape", "(", "image", ")", "\n", "\n", "rank_assertion", "=", "tf", ".", "Assert", "(", "\n", "tf", ".", "equal", "(", "tf", ".", "rank", "(", "image", ")", ",", "3", ")", ",", "\n", "[", "'Rank of image must be equal to 3.'", "]", ")", "\n", "cropped_shape", "=", "control_flow_ops", ".", "with_dependencies", "(", "\n", "[", "rank_assertion", "]", ",", "\n", "tf", ".", "pack", "(", "[", "crop_height", ",", "crop_width", ",", "original_shape", "[", "2", "]", "]", ")", ")", "\n", "\n", "size_assertion", "=", "tf", ".", "Assert", "(", "\n", "tf", ".", "logical_and", "(", "\n", "tf", ".", "greater_equal", "(", "original_shape", "[", "0", "]", ",", "crop_height", ")", ",", "\n", "tf", ".", "greater_equal", "(", "original_shape", "[", "1", "]", ",", "crop_width", ")", ")", ",", "\n", "[", "'Crop size greater than the image size.'", "]", ")", "\n", "\n", "offsets", "=", "tf", ".", "to_int32", "(", "tf", ".", "pack", "(", "[", "offset_height", ",", "offset_width", ",", "0", "]", ")", ")", "\n", "\n", "# Use tf.slice instead of crop_to_bounding box as it accepts tensors to", "\n", "# define the crop size.", "\n", "image", "=", "control_flow_ops", ".", "with_dependencies", "(", "\n", "[", "size_assertion", "]", ",", "\n", "tf", ".", "slice", "(", "image", ",", "offsets", ",", "cropped_shape", ")", ")", "\n", "return", "tf", ".", "reshape", "(", "image", ",", "cropped_shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing._random_crop": [[94, 176], ["range", "tensorflow.python.ops.control_flow_ops.with_dependencies", "tensorflow.Assert", "range", "tensorflow.python.ops.control_flow_ops.with_dependencies", "tensorflow.python.ops.control_flow_ops.with_dependencies", "tensorflow.random_uniform", "tensorflow.random_uniform", "ValueError", "len", "tensorflow.rank", "tensorflow.Assert", "rank_assertions.append", "tensorflow.shape", "tensorflow.logical_and", "len", "asserts.append", "tensorflow.python.ops.control_flow_ops.with_dependencies", "tensorflow.Assert", "tensorflow.Assert", "asserts.extend", "tensorflow.reshape", "tensorflow.reshape", "vgg_preprocessing._crop", "tensorflow.equal", "tensorflow.greater_equal", "tensorflow.greater_equal", "tensorflow.shape", "tensorflow.equal", "tensorflow.equal"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing._crop"], ["", "def", "_random_crop", "(", "image_list", ",", "crop_height", ",", "crop_width", ")", ":", "\n", "  ", "\"\"\"Crops the given list of images.\n\n  The function applies the same crop to each image in the list. This can be\n  effectively applied when there are multiple image inputs of the same\n  dimension such as:\n\n    image, depths, normals = _random_crop([image, depths, normals], 120, 150)\n\n  Args:\n    image_list: a list of image tensors of the same dimension but possibly\n      varying channel.\n    crop_height: the new height.\n    crop_width: the new width.\n\n  Returns:\n    the image_list with cropped images.\n\n  Raises:\n    ValueError: if there are multiple image inputs provided with different size\n      or the images are smaller than the crop dimensions.\n  \"\"\"", "\n", "if", "not", "image_list", ":", "\n", "    ", "raise", "ValueError", "(", "'Empty image_list.'", ")", "\n", "\n", "# Compute the rank assertions.", "\n", "", "rank_assertions", "=", "[", "]", "\n", "for", "i", "in", "range", "(", "len", "(", "image_list", ")", ")", ":", "\n", "    ", "image_rank", "=", "tf", ".", "rank", "(", "image_list", "[", "i", "]", ")", "\n", "rank_assert", "=", "tf", ".", "Assert", "(", "\n", "tf", ".", "equal", "(", "image_rank", ",", "3", ")", ",", "\n", "[", "'Wrong rank for tensor  %s [expected] [actual]'", ",", "\n", "image_list", "[", "i", "]", ".", "name", ",", "3", ",", "image_rank", "]", ")", "\n", "rank_assertions", ".", "append", "(", "rank_assert", ")", "\n", "\n", "", "image_shape", "=", "control_flow_ops", ".", "with_dependencies", "(", "\n", "[", "rank_assertions", "[", "0", "]", "]", ",", "\n", "tf", ".", "shape", "(", "image_list", "[", "0", "]", ")", ")", "\n", "image_height", "=", "image_shape", "[", "0", "]", "\n", "image_width", "=", "image_shape", "[", "1", "]", "\n", "crop_size_assert", "=", "tf", ".", "Assert", "(", "\n", "tf", ".", "logical_and", "(", "\n", "tf", ".", "greater_equal", "(", "image_height", ",", "crop_height", ")", ",", "\n", "tf", ".", "greater_equal", "(", "image_width", ",", "crop_width", ")", ")", ",", "\n", "[", "'Crop size greater than the image size.'", "]", ")", "\n", "\n", "asserts", "=", "[", "rank_assertions", "[", "0", "]", ",", "crop_size_assert", "]", "\n", "\n", "for", "i", "in", "range", "(", "1", ",", "len", "(", "image_list", ")", ")", ":", "\n", "    ", "image", "=", "image_list", "[", "i", "]", "\n", "asserts", ".", "append", "(", "rank_assertions", "[", "i", "]", ")", "\n", "shape", "=", "control_flow_ops", ".", "with_dependencies", "(", "[", "rank_assertions", "[", "i", "]", "]", ",", "\n", "tf", ".", "shape", "(", "image", ")", ")", "\n", "height", "=", "shape", "[", "0", "]", "\n", "width", "=", "shape", "[", "1", "]", "\n", "\n", "height_assert", "=", "tf", ".", "Assert", "(", "\n", "tf", ".", "equal", "(", "height", ",", "image_height", ")", ",", "\n", "[", "'Wrong height for tensor %s [expected][actual]'", ",", "\n", "image", ".", "name", ",", "height", ",", "image_height", "]", ")", "\n", "width_assert", "=", "tf", ".", "Assert", "(", "\n", "tf", ".", "equal", "(", "width", ",", "image_width", ")", ",", "\n", "[", "'Wrong width for tensor %s [expected][actual]'", ",", "\n", "image", ".", "name", ",", "width", ",", "image_width", "]", ")", "\n", "asserts", ".", "extend", "(", "[", "height_assert", ",", "width_assert", "]", ")", "\n", "\n", "# Create a random bounding box.", "\n", "#", "\n", "# Use tf.random_uniform and not numpy.random.rand as doing the former would", "\n", "# generate random numbers at graph eval time, unlike the latter which", "\n", "# generates random numbers at graph definition time.", "\n", "", "max_offset_height", "=", "control_flow_ops", ".", "with_dependencies", "(", "\n", "asserts", ",", "tf", ".", "reshape", "(", "image_height", "-", "crop_height", "+", "1", ",", "[", "]", ")", ")", "\n", "max_offset_width", "=", "control_flow_ops", ".", "with_dependencies", "(", "\n", "asserts", ",", "tf", ".", "reshape", "(", "image_width", "-", "crop_width", "+", "1", ",", "[", "]", ")", ")", "\n", "offset_height", "=", "tf", ".", "random_uniform", "(", "\n", "[", "]", ",", "maxval", "=", "max_offset_height", ",", "dtype", "=", "tf", ".", "int32", ")", "\n", "offset_width", "=", "tf", ".", "random_uniform", "(", "\n", "[", "]", ",", "maxval", "=", "max_offset_width", ",", "dtype", "=", "tf", ".", "int32", ")", "\n", "\n", "return", "[", "_crop", "(", "image", ",", "offset_height", ",", "offset_width", ",", "\n", "crop_height", ",", "crop_width", ")", "for", "image", "in", "image_list", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing._central_crop": [[178, 201], ["outputs.append", "tensorflow.shape", "tensorflow.shape", "vgg_preprocessing._crop"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing._crop"], ["", "def", "_central_crop", "(", "image_list", ",", "crop_height", ",", "crop_width", ")", ":", "\n", "  ", "\"\"\"Performs central crops of the given image list.\n\n  Args:\n    image_list: a list of image tensors of the same dimension but possibly\n      varying channel.\n    crop_height: the height of the image following the crop.\n    crop_width: the width of the image following the crop.\n\n  Returns:\n    the list of cropped images.\n  \"\"\"", "\n", "outputs", "=", "[", "]", "\n", "for", "image", "in", "image_list", ":", "\n", "    ", "image_height", "=", "tf", ".", "shape", "(", "image", ")", "[", "0", "]", "\n", "image_width", "=", "tf", ".", "shape", "(", "image", ")", "[", "1", "]", "\n", "\n", "offset_height", "=", "(", "image_height", "-", "crop_height", ")", "/", "2", "\n", "offset_width", "=", "(", "image_width", "-", "crop_width", ")", "/", "2", "\n", "\n", "outputs", ".", "append", "(", "_crop", "(", "image", ",", "offset_height", ",", "offset_width", ",", "\n", "crop_height", ",", "crop_width", ")", ")", "\n", "", "return", "outputs", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing._mean_image_subtraction": [[203, 234], ["tensorflow.split", "range", "tensorflow.concat", "ValueError", "image.get_shape().as_list", "len", "ValueError", "image.get_shape", "image.get_shape"], "function", ["None"], ["", "def", "_mean_image_subtraction", "(", "image", ",", "means", ")", ":", "\n", "  ", "\"\"\"Subtracts the given means from each image channel.\n\n  For example:\n    means = [123.68, 116.779, 103.939]\n    image = _mean_image_subtraction(image, means)\n\n  Note that the rank of `image` must be known.\n\n  Args:\n    image: a tensor of size [height, width, C].\n    means: a C-vector of values to subtract from each channel.\n\n  Returns:\n    the centered image.\n\n  Raises:\n    ValueError: If the rank of `image` is unknown, if `image` has a rank other\n      than three or if the number of channels in `image` doesn't match the\n      number of values in `means`.\n  \"\"\"", "\n", "if", "image", ".", "get_shape", "(", ")", ".", "ndims", "!=", "3", ":", "\n", "    ", "raise", "ValueError", "(", "'Input must be of size [height, width, C>0]'", ")", "\n", "", "num_channels", "=", "image", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "-", "1", "]", "\n", "if", "len", "(", "means", ")", "!=", "num_channels", ":", "\n", "    ", "raise", "ValueError", "(", "'len(means) must match the number of channels'", ")", "\n", "\n", "", "channels", "=", "tf", ".", "split", "(", "2", ",", "num_channels", ",", "image", ")", "\n", "for", "i", "in", "range", "(", "num_channels", ")", ":", "\n", "    ", "channels", "[", "i", "]", "-=", "means", "[", "i", "]", "\n", "", "return", "tf", ".", "concat", "(", "2", ",", "channels", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing._smallest_size_at_least": [[236, 264], ["tensorflow.convert_to_tensor", "tensorflow.to_float", "tensorflow.to_float", "tensorflow.to_float", "tensorflow.cond", "tensorflow.to_int32", "tensorflow.to_int32", "tensorflow.greater"], "function", ["None"], ["", "def", "_smallest_size_at_least", "(", "height", ",", "width", ",", "smallest_side", ")", ":", "\n", "  ", "\"\"\"Computes new shape with the smallest side equal to `smallest_side`.\n\n  Computes new shape with the smallest side equal to `smallest_side` while\n  preserving the original aspect ratio.\n\n  Args:\n    height: an int32 scalar tensor indicating the current height.\n    width: an int32 scalar tensor indicating the current width.\n    smallest_side: A python integer or scalar `Tensor` indicating the size of\n      the smallest side after resize.\n\n  Returns:\n    new_height: an int32 scalar tensor indicating the new height.\n    new_width: and int32 scalar tensor indicating the new width.\n  \"\"\"", "\n", "smallest_side", "=", "tf", ".", "convert_to_tensor", "(", "smallest_side", ",", "dtype", "=", "tf", ".", "int32", ")", "\n", "\n", "height", "=", "tf", ".", "to_float", "(", "height", ")", "\n", "width", "=", "tf", ".", "to_float", "(", "width", ")", "\n", "smallest_side", "=", "tf", ".", "to_float", "(", "smallest_side", ")", "\n", "\n", "scale", "=", "tf", ".", "cond", "(", "tf", ".", "greater", "(", "height", ",", "width", ")", ",", "\n", "lambda", ":", "smallest_side", "/", "width", ",", "\n", "lambda", ":", "smallest_side", "/", "height", ")", "\n", "new_height", "=", "tf", ".", "to_int32", "(", "height", "*", "scale", ")", "\n", "new_width", "=", "tf", ".", "to_int32", "(", "width", "*", "scale", ")", "\n", "return", "new_height", ",", "new_width", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing._aspect_preserving_resize": [[266, 289], ["tensorflow.convert_to_tensor", "tensorflow.shape", "vgg_preprocessing._smallest_size_at_least", "tensorflow.expand_dims", "tensorflow.image.resize_bilinear", "tensorflow.squeeze", "tf.squeeze.set_shape"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing._smallest_size_at_least"], ["", "def", "_aspect_preserving_resize", "(", "image", ",", "smallest_side", ")", ":", "\n", "  ", "\"\"\"Resize images preserving the original aspect ratio.\n\n  Args:\n    image: A 3-D image `Tensor`.\n    smallest_side: A python integer or scalar `Tensor` indicating the size of\n      the smallest side after resize.\n\n  Returns:\n    resized_image: A 3-D tensor containing the resized image.\n  \"\"\"", "\n", "smallest_side", "=", "tf", ".", "convert_to_tensor", "(", "smallest_side", ",", "dtype", "=", "tf", ".", "int32", ")", "\n", "\n", "shape", "=", "tf", ".", "shape", "(", "image", ")", "\n", "height", "=", "shape", "[", "0", "]", "\n", "width", "=", "shape", "[", "1", "]", "\n", "new_height", ",", "new_width", "=", "_smallest_size_at_least", "(", "height", ",", "width", ",", "smallest_side", ")", "\n", "image", "=", "tf", ".", "expand_dims", "(", "image", ",", "0", ")", "\n", "resized_image", "=", "tf", ".", "image", ".", "resize_bilinear", "(", "image", ",", "[", "new_height", ",", "new_width", "]", ",", "\n", "align_corners", "=", "False", ")", "\n", "resized_image", "=", "tf", ".", "squeeze", "(", "resized_image", ")", "\n", "resized_image", ".", "set_shape", "(", "[", "None", ",", "None", ",", "3", "]", ")", "\n", "return", "resized_image", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing.preprocess_for_train": [[291, 322], ["tensorflow.random_uniform", "vgg_preprocessing._aspect_preserving_resize", "tf.image.random_flip_left_right.set_shape", "tensorflow.to_float", "tensorflow.image.random_flip_left_right", "vgg_preprocessing._mean_image_subtraction", "vgg_preprocessing._random_crop"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing._aspect_preserving_resize", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing._mean_image_subtraction", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing._random_crop"], ["", "def", "preprocess_for_train", "(", "image", ",", "\n", "output_height", ",", "\n", "output_width", ",", "\n", "resize_side_min", "=", "_RESIZE_SIDE_MIN", ",", "\n", "resize_side_max", "=", "_RESIZE_SIDE_MAX", ")", ":", "\n", "  ", "\"\"\"Preprocesses the given image for training.\n\n  Note that the actual resizing scale is sampled from\n    [`resize_size_min`, `resize_size_max`].\n\n  Args:\n    image: A `Tensor` representing an image of arbitrary size.\n    output_height: The height of the image after preprocessing.\n    output_width: The width of the image after preprocessing.\n    resize_side_min: The lower bound for the smallest side of the image for\n      aspect-preserving resizing.\n    resize_side_max: The upper bound for the smallest side of the image for\n      aspect-preserving resizing.\n\n  Returns:\n    A preprocessed image.\n  \"\"\"", "\n", "resize_side", "=", "tf", ".", "random_uniform", "(", "\n", "[", "]", ",", "minval", "=", "resize_side_min", ",", "maxval", "=", "resize_side_max", "+", "1", ",", "dtype", "=", "tf", ".", "int32", ")", "\n", "\n", "image", "=", "_aspect_preserving_resize", "(", "image", ",", "resize_side", ")", "\n", "image", "=", "_random_crop", "(", "[", "image", "]", ",", "output_height", ",", "output_width", ")", "[", "0", "]", "\n", "image", ".", "set_shape", "(", "[", "output_height", ",", "output_width", ",", "3", "]", ")", "\n", "image", "=", "tf", ".", "to_float", "(", "image", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_flip_left_right", "(", "image", ")", "\n", "return", "_mean_image_subtraction", "(", "image", ",", "[", "_R_MEAN", ",", "_G_MEAN", ",", "_B_MEAN", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing.preprocess_for_eval": [[324, 341], ["vgg_preprocessing._aspect_preserving_resize", "tf.to_float.set_shape", "tensorflow.to_float", "vgg_preprocessing._mean_image_subtraction", "vgg_preprocessing._central_crop"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing._aspect_preserving_resize", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing._mean_image_subtraction", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing._central_crop"], ["", "def", "preprocess_for_eval", "(", "image", ",", "output_height", ",", "output_width", ",", "resize_side", ")", ":", "\n", "  ", "\"\"\"Preprocesses the given image for evaluation.\n\n  Args:\n    image: A `Tensor` representing an image of arbitrary size.\n    output_height: The height of the image after preprocessing.\n    output_width: The width of the image after preprocessing.\n    resize_side: The smallest side of the image for aspect-preserving resizing.\n\n  Returns:\n    A preprocessed image.\n  \"\"\"", "\n", "image", "=", "_aspect_preserving_resize", "(", "image", ",", "resize_side", ")", "\n", "image", "=", "_central_crop", "(", "[", "image", "]", ",", "output_height", ",", "output_width", ")", "[", "0", "]", "\n", "image", ".", "set_shape", "(", "[", "output_height", ",", "output_width", ",", "3", "]", ")", "\n", "image", "=", "tf", ".", "to_float", "(", "image", ")", "\n", "return", "_mean_image_subtraction", "(", "image", ",", "[", "_R_MEAN", ",", "_G_MEAN", ",", "_B_MEAN", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.vgg_preprocessing.preprocess_image": [[343, 371], ["vgg_preprocessing.preprocess_for_train", "vgg_preprocessing.preprocess_for_eval"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.preprocess_for_train", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.preprocess_for_eval"], ["", "def", "preprocess_image", "(", "image", ",", "output_height", ",", "output_width", ",", "is_training", "=", "False", ",", "\n", "resize_side_min", "=", "_RESIZE_SIDE_MIN", ",", "\n", "resize_side_max", "=", "_RESIZE_SIDE_MAX", ")", ":", "\n", "  ", "\"\"\"Preprocesses the given image.\n\n  Args:\n    image: A `Tensor` representing an image of arbitrary size.\n    output_height: The height of the image after preprocessing.\n    output_width: The width of the image after preprocessing.\n    is_training: `True` if we're preprocessing the image for training and\n      `False` otherwise.\n    resize_side_min: The lower bound for the smallest side of the image for\n      aspect-preserving resizing. If `is_training` is `False`, then this value\n      is used for rescaling.\n    resize_side_max: The upper bound for the smallest side of the image for\n      aspect-preserving resizing. If `is_training` is `False`, this value is\n      ignored. Otherwise, the resize side is sampled from\n        [resize_size_min, resize_size_max].\n\n  Returns:\n    A preprocessed image.\n  \"\"\"", "\n", "if", "is_training", ":", "\n", "    ", "return", "preprocess_for_train", "(", "image", ",", "output_height", ",", "output_width", ",", "\n", "resize_side_min", ",", "resize_side_max", ")", "\n", "", "else", ":", "\n", "    ", "return", "preprocess_for_eval", "(", "image", ",", "output_height", ",", "output_width", ",", "\n", "resize_side_min", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.preprocessing_factory.get_preprocessing": [[31, 72], ["ValueError", "preprocessing_fn_map[].preprocess_image"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.preprocess_image"], ["def", "get_preprocessing", "(", "name", ",", "is_training", "=", "False", ")", ":", "\n", "  ", "\"\"\"Returns preprocessing_fn(image, height, width, **kwargs).\n\n  Args:\n    name: The name of the preprocessing function.\n    is_training: `True` if the model is being used for training and `False`\n      otherwise.\n\n  Returns:\n    preprocessing_fn: A function that preprocessing a single image (pre-batch).\n      It has the following signature:\n        image = preprocessing_fn(image, output_height, output_width, ...).\n\n  Raises:\n    ValueError: If Preprocessing `name` is not recognized.\n  \"\"\"", "\n", "preprocessing_fn_map", "=", "{", "\n", "'inception'", ":", "inception_preprocessing", ",", "\n", "'inception_v1'", ":", "inception_preprocessing", ",", "\n", "'inception_v2'", ":", "inception_preprocessing", ",", "\n", "'inception_v3'", ":", "inception_preprocessing", ",", "\n", "'inception_v4'", ":", "inception_preprocessing", ",", "\n", "'dermatologic'", ":", "dermatologic_preprocessing", ",", "\n", "'inception_resnet_v2'", ":", "inception_preprocessing", ",", "\n", "'resnet_v1_50'", ":", "vgg_preprocessing", ",", "\n", "'resnet_v1_101'", ":", "vgg_preprocessing", ",", "\n", "'resnet_v1_152'", ":", "vgg_preprocessing", ",", "\n", "'vgg'", ":", "vgg_preprocessing", ",", "\n", "'vgg_a'", ":", "vgg_preprocessing", ",", "\n", "'vgg_16'", ":", "vgg_preprocessing", ",", "\n", "'vgg_19'", ":", "vgg_preprocessing", ",", "\n", "}", "\n", "\n", "if", "name", "not", "in", "preprocessing_fn_map", ":", "\n", "    ", "raise", "ValueError", "(", "'Preprocessing name [%s] was not recognized'", "%", "name", ")", "\n", "\n", "", "def", "preprocessing_fn", "(", "image", ",", "output_height", ",", "output_width", ",", "**", "kwargs", ")", ":", "\n", "    ", "return", "preprocessing_fn_map", "[", "name", "]", ".", "preprocess_image", "(", "\n", "image", ",", "output_height", ",", "output_width", ",", "is_training", "=", "is_training", ",", "**", "kwargs", ")", "\n", "\n", "", "return", "preprocessing_fn", "\n", "", ""]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.apply_with_random_selector": [[26, 43], ["tensorflow.random_uniform", "tensorflow.python.ops.control_flow_ops.merge", "func", "range", "tensorflow.python.ops.control_flow_ops.switch", "tensorflow.equal"], "function", ["None"], ["def", "apply_with_random_selector", "(", "x", ",", "func", ",", "num_cases", ")", ":", "\n", "  ", "\"\"\"Computes func(x, sel), with sel sampled from [0...num_cases-1].\n\n  Args:\n    x: input Tensor.\n    func: Python function to apply.\n    num_cases: Python int32, number of cases to sample sel from.\n\n  Returns:\n    The result of func(x, sel), where func receives the value of the\n    selector as a python integer, but sel is sampled dynamically.\n  \"\"\"", "\n", "sel", "=", "tf", ".", "random_uniform", "(", "[", "]", ",", "maxval", "=", "num_cases", ",", "dtype", "=", "tf", ".", "int32", ")", "\n", "# Pass the real x only to one of the func calls.", "\n", "return", "control_flow_ops", ".", "merge", "(", "[", "\n", "func", "(", "control_flow_ops", ".", "switch", "(", "x", ",", "tf", ".", "equal", "(", "sel", ",", "case", ")", ")", "[", "1", "]", ",", "case", ")", "\n", "for", "case", "in", "range", "(", "num_cases", ")", "]", ")", "[", "0", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.distort_color": [[45, 97], ["tensorflow.name_scope", "tensorflow.clip_by_value", "tensorflow.image.random_brightness", "tensorflow.image.random_saturation", "tensorflow.image.random_saturation", "tensorflow.image.random_brightness", "tensorflow.image.random_brightness", "tensorflow.image.random_saturation", "tensorflow.image.random_hue", "tensorflow.image.random_contrast", "tensorflow.image.random_saturation", "tensorflow.image.random_brightness", "tensorflow.image.random_contrast", "tensorflow.image.random_hue", "tensorflow.image.random_contrast", "tensorflow.image.random_hue", "tensorflow.image.random_brightness", "tensorflow.image.random_saturation", "tensorflow.image.random_hue", "tensorflow.image.random_saturation", "tensorflow.image.random_contrast", "tensorflow.image.random_brightness", "ValueError"], "function", ["None"], ["", "def", "distort_color", "(", "image", ",", "color_ordering", "=", "0", ",", "fast_mode", "=", "True", ",", "scope", "=", "None", ")", ":", "\n", "  ", "\"\"\"Distort the color of a Tensor image.\n\n  Each color distortion is non-commutative and thus ordering of the color ops\n  matters. Ideally we would randomly permute the ordering of the color ops.\n  Rather then adding that level of complication, we select a distinct ordering\n  of color ops for each preprocessing thread.\n\n  Args:\n    image: 3-D Tensor containing single image in [0, 1].\n    color_ordering: Python int, a type of distortion (valid values: 0-3).\n    fast_mode: Avoids slower ops (random_hue and random_contrast)\n    scope: Optional scope for name_scope.\n  Returns:\n    3-D Tensor color-distorted image on range [0, 1]\n  Raises:\n    ValueError: if color_ordering not in [0, 3]\n  \"\"\"", "\n", "with", "tf", ".", "name_scope", "(", "scope", ",", "'distort_color'", ",", "[", "image", "]", ")", ":", "\n", "    ", "if", "fast_mode", ":", "\n", "      ", "if", "color_ordering", "==", "0", ":", "\n", "        ", "image", "=", "tf", ".", "image", ".", "random_brightness", "(", "image", ",", "max_delta", "=", "32.", "/", "255.", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_saturation", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "", "else", ":", "\n", "        ", "image", "=", "tf", ".", "image", ".", "random_saturation", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_brightness", "(", "image", ",", "max_delta", "=", "32.", "/", "255.", ")", "\n", "", "", "else", ":", "\n", "      ", "if", "color_ordering", "==", "0", ":", "\n", "        ", "image", "=", "tf", ".", "image", ".", "random_brightness", "(", "image", ",", "max_delta", "=", "32.", "/", "255.", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_saturation", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_hue", "(", "image", ",", "max_delta", "=", "0.2", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_contrast", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "", "elif", "color_ordering", "==", "1", ":", "\n", "        ", "image", "=", "tf", ".", "image", ".", "random_saturation", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_brightness", "(", "image", ",", "max_delta", "=", "32.", "/", "255.", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_contrast", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_hue", "(", "image", ",", "max_delta", "=", "0.2", ")", "\n", "", "elif", "color_ordering", "==", "2", ":", "\n", "        ", "image", "=", "tf", ".", "image", ".", "random_contrast", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_hue", "(", "image", ",", "max_delta", "=", "0.2", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_brightness", "(", "image", ",", "max_delta", "=", "32.", "/", "255.", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_saturation", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "", "elif", "color_ordering", "==", "3", ":", "\n", "        ", "image", "=", "tf", ".", "image", ".", "random_hue", "(", "image", ",", "max_delta", "=", "0.2", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_saturation", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_contrast", "(", "image", ",", "lower", "=", "0.5", ",", "upper", "=", "1.5", ")", "\n", "image", "=", "tf", ".", "image", ".", "random_brightness", "(", "image", ",", "max_delta", "=", "32.", "/", "255.", ")", "\n", "", "else", ":", "\n", "        ", "raise", "ValueError", "(", "'color_ordering must be in [0, 3]'", ")", "\n", "\n", "# The random_* ops do not necessarily clamp.", "\n", "", "", "return", "tf", ".", "clip_by_value", "(", "image", ",", "0.0", ",", "1.0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.distorted_bounding_box_crop": [[99, 154], ["tensorflow.name_scope", "tensorflow.image.sample_distorted_bounding_box", "tensorflow.slice", "tensorflow.shape"], "function", ["None"], ["", "", "def", "distorted_bounding_box_crop", "(", "image", ",", "\n", "bbox", ",", "\n", "min_object_covered", "=", "0.1", ",", "\n", "aspect_ratio_range", "=", "(", "0.75", ",", "1.33", ")", ",", "\n", "area_range", "=", "(", "0.05", ",", "1.0", ")", ",", "\n", "max_attempts", "=", "100", ",", "\n", "scope", "=", "None", ")", ":", "\n", "  ", "\"\"\"Generates cropped_image using a one of the bboxes randomly distorted.\n\n  See `tf.image.sample_distorted_bounding_box` for more documentation.\n\n  Args:\n    image: 3-D Tensor of image (it will be converted to floats in [0, 1]).\n    bbox: 3-D float Tensor of bounding boxes arranged [1, num_boxes, coords]\n      where each coordinate is [0, 1) and the coordinates are arranged\n      as [ymin, xmin, ymax, xmax]. If num_boxes is 0 then it would use the whole\n      image.\n    min_object_covered: An optional `float`. Defaults to `0.1`. The cropped\n      area of the image must contain at least this fraction of any bounding box\n      supplied.\n    aspect_ratio_range: An optional list of `floats`. The cropped area of the\n      image must have an aspect ratio = width / height within this range.\n    area_range: An optional list of `floats`. The cropped area of the image\n      must contain a fraction of the supplied image within in this range.\n    max_attempts: An optional `int`. Number of attempts at generating a cropped\n      region of the image of the specified constraints. After `max_attempts`\n      failures, return the entire image.\n    scope: Optional scope for name_scope.\n  Returns:\n    A tuple, a 3-D Tensor cropped_image and the distorted bbox\n  \"\"\"", "\n", "with", "tf", ".", "name_scope", "(", "scope", ",", "'distorted_bounding_box_crop'", ",", "[", "image", ",", "bbox", "]", ")", ":", "\n", "# Each bounding box has shape [1, num_boxes, box coords] and", "\n", "# the coordinates are ordered [ymin, xmin, ymax, xmax].", "\n", "\n", "# A large fraction of image datasets contain a human-annotated bounding", "\n", "# box delineating the region of the image containing the object of interest.", "\n", "# We choose to create a new bounding box for the object which is a randomly", "\n", "# distorted version of the human-annotated bounding box that obeys an", "\n", "# allowed range of aspect ratios, sizes and overlap with the human-annotated", "\n", "# bounding box. If no box is supplied, then we assume the bounding box is", "\n", "# the entire image.", "\n", "    ", "sample_distorted_bounding_box", "=", "tf", ".", "image", ".", "sample_distorted_bounding_box", "(", "\n", "tf", ".", "shape", "(", "image", ")", ",", "\n", "bounding_boxes", "=", "bbox", ",", "\n", "min_object_covered", "=", "min_object_covered", ",", "\n", "aspect_ratio_range", "=", "aspect_ratio_range", ",", "\n", "area_range", "=", "area_range", ",", "\n", "max_attempts", "=", "max_attempts", ",", "\n", "use_image_if_no_bounding_boxes", "=", "True", ")", "\n", "bbox_begin", ",", "bbox_size", ",", "distort_bbox", "=", "sample_distorted_bounding_box", "\n", "\n", "# Crop the image to the specified bounding box.", "\n", "cropped_image", "=", "tf", ".", "slice", "(", "image", ",", "bbox_begin", ",", "bbox_size", ")", "\n", "return", "cropped_image", ",", "distort_bbox", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.preprocess_for_train": [[156, 235], ["tensorflow.name_scope", "tensorflow.image.draw_bounding_boxes", "tensorflow.image_summary", "inception_preprocessing.distorted_bounding_box_crop", "tf.mul.set_shape", "tensorflow.image.draw_bounding_boxes", "tensorflow.image_summary", "inception_preprocessing.apply_with_random_selector", "tensorflow.image_summary", "tensorflow.image.random_flip_left_right", "inception_preprocessing.apply_with_random_selector", "tensorflow.image_summary", "tensorflow.sub", "tensorflow.mul", "tensorflow.constant", "tensorflow.image.convert_image_dtype", "tensorflow.expand_dims", "tensorflow.expand_dims", "tensorflow.expand_dims", "tensorflow.expand_dims", "tensorflow.image.resize_images", "inception_preprocessing.distort_color"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.distorted_bounding_box_crop", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.apply_with_random_selector", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.apply_with_random_selector", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.distort_color"], ["", "", "def", "preprocess_for_train", "(", "image", ",", "height", ",", "width", ",", "bbox", ",", "\n", "fast_mode", "=", "True", ",", "\n", "scope", "=", "None", ")", ":", "\n", "  ", "\"\"\"Distort one image for training a network.\n\n  Distorting images provides a useful technique for augmenting the data\n  set during training in order to make the network invariant to aspects\n  of the image that do not effect the label.\n\n  Additionally it would create image_summaries to display the different\n  transformations applied to the image.\n\n  Args:\n    image: 3-D Tensor of image. If dtype is tf.float32 then the range should be\n      [0, 1], otherwise it would converted to tf.float32 assuming that the range\n      is [0, MAX], where MAX is largest positive representable number for\n      int(8/16/32) data type (see `tf.image.convert_image_dtype` for details).\n    height: integer\n    width: integer\n    bbox: 3-D float Tensor of bounding boxes arranged [1, num_boxes, coords]\n      where each coordinate is [0, 1) and the coordinates are arranged\n      as [ymin, xmin, ymax, xmax].\n    fast_mode: Optional boolean, if True avoids slower transformations (i.e.\n      bi-cubic resizing, random_hue or random_contrast).\n    scope: Optional scope for name_scope.\n  Returns:\n    3-D float Tensor of distorted image used for training with range [-1, 1].\n  \"\"\"", "\n", "with", "tf", ".", "name_scope", "(", "scope", ",", "'distort_image'", ",", "[", "image", ",", "height", ",", "width", ",", "bbox", "]", ")", ":", "\n", "    ", "if", "bbox", "is", "None", ":", "\n", "      ", "bbox", "=", "tf", ".", "constant", "(", "[", "0.0", ",", "0.0", ",", "1.0", ",", "1.0", "]", ",", "\n", "dtype", "=", "tf", ".", "float32", ",", "\n", "shape", "=", "[", "1", ",", "1", ",", "4", "]", ")", "\n", "", "if", "image", ".", "dtype", "!=", "tf", ".", "float32", ":", "\n", "      ", "image", "=", "tf", ".", "image", ".", "convert_image_dtype", "(", "image", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "# Each bounding box has shape [1, num_boxes, box coords] and", "\n", "# the coordinates are ordered [ymin, xmin, ymax, xmax].", "\n", "", "image_with_box", "=", "tf", ".", "image", ".", "draw_bounding_boxes", "(", "tf", ".", "expand_dims", "(", "image", ",", "0", ")", ",", "\n", "bbox", ")", "\n", "tf", ".", "image_summary", "(", "'image_with_bounding_boxes'", ",", "image_with_box", ")", "\n", "\n", "distorted_image", ",", "distorted_bbox", "=", "distorted_bounding_box_crop", "(", "image", ",", "bbox", ")", "\n", "# Restore the shape since the dynamic slice based upon the bbox_size loses", "\n", "# the third dimension.", "\n", "distorted_image", ".", "set_shape", "(", "[", "None", ",", "None", ",", "3", "]", ")", "\n", "image_with_distorted_box", "=", "tf", ".", "image", ".", "draw_bounding_boxes", "(", "\n", "tf", ".", "expand_dims", "(", "image", ",", "0", ")", ",", "distorted_bbox", ")", "\n", "tf", ".", "image_summary", "(", "'images_with_distorted_bounding_box'", ",", "\n", "image_with_distorted_box", ")", "\n", "\n", "# This resizing operation may distort the images because the aspect", "\n", "# ratio is not respected. We select a resize method in a round robin", "\n", "# fashion based on the thread number.", "\n", "# Note that ResizeMethod contains 4 enumerated resizing methods.", "\n", "\n", "# We select only 1 case for fast_mode bilinear.", "\n", "num_resize_cases", "=", "1", "if", "fast_mode", "else", "4", "\n", "distorted_image", "=", "apply_with_random_selector", "(", "\n", "distorted_image", ",", "\n", "lambda", "x", ",", "method", ":", "tf", ".", "image", ".", "resize_images", "(", "x", ",", "[", "height", ",", "width", "]", ",", "method", "=", "method", ")", ",", "\n", "num_cases", "=", "num_resize_cases", ")", "\n", "\n", "tf", ".", "image_summary", "(", "'cropped_resized_image'", ",", "\n", "tf", ".", "expand_dims", "(", "distorted_image", ",", "0", ")", ")", "\n", "\n", "# Randomly flip the image horizontally.", "\n", "distorted_image", "=", "tf", ".", "image", ".", "random_flip_left_right", "(", "distorted_image", ")", "\n", "\n", "# Randomly distort the colors. There are 4 ways to do it.", "\n", "distorted_image", "=", "apply_with_random_selector", "(", "\n", "distorted_image", ",", "\n", "lambda", "x", ",", "ordering", ":", "distort_color", "(", "x", ",", "ordering", ",", "fast_mode", ")", ",", "\n", "num_cases", "=", "4", ")", "\n", "\n", "tf", ".", "image_summary", "(", "'final_distorted_image'", ",", "\n", "tf", ".", "expand_dims", "(", "distorted_image", ",", "0", ")", ")", "\n", "distorted_image", "=", "tf", ".", "sub", "(", "distorted_image", ",", "0.5", ")", "\n", "distorted_image", "=", "tf", ".", "mul", "(", "distorted_image", ",", "2.0", ")", "\n", "return", "distorted_image", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.preprocess_for_eval": [[237, 276], ["tensorflow.name_scope", "tensorflow.sub", "tensorflow.mul", "tensorflow.image.convert_image_dtype", "tensorflow.image.central_crop", "tensorflow.expand_dims", "tensorflow.image.resize_bilinear", "tensorflow.squeeze"], "function", ["None"], ["", "", "def", "preprocess_for_eval", "(", "image", ",", "height", ",", "width", ",", "\n", "central_fraction", "=", "0.875", ",", "scope", "=", "None", ")", ":", "\n", "  ", "\"\"\"Prepare one image for evaluation.\n\n  If height and width are specified it would output an image with that size by\n  applying resize_bilinear.\n\n  If central_fraction is specified it would cropt the central fraction of the\n  input image.\n\n  Args:\n    image: 3-D Tensor of image. If dtype is tf.float32 then the range should be\n      [0, 1], otherwise it would converted to tf.float32 assuming that the range\n      is [0, MAX], where MAX is largest positive representable number for\n      int(8/16/32) data type (see `tf.image.convert_image_dtype` for details)\n    height: integer\n    width: integer\n    central_fraction: Optional Float, fraction of the image to crop.\n    scope: Optional scope for name_scope.\n  Returns:\n    3-D float Tensor of prepared image.\n  \"\"\"", "\n", "with", "tf", ".", "name_scope", "(", "scope", ",", "'eval_image'", ",", "[", "image", ",", "height", ",", "width", "]", ")", ":", "\n", "    ", "if", "image", ".", "dtype", "!=", "tf", ".", "float32", ":", "\n", "      ", "image", "=", "tf", ".", "image", ".", "convert_image_dtype", "(", "image", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "# Crop the central region of the image with an area containing 87.5% of", "\n", "# the original image.", "\n", "", "if", "central_fraction", ":", "\n", "      ", "image", "=", "tf", ".", "image", ".", "central_crop", "(", "image", ",", "central_fraction", "=", "central_fraction", ")", "\n", "\n", "", "if", "height", "and", "width", ":", "\n", "# Resize the image to the specified height and width.", "\n", "      ", "image", "=", "tf", ".", "expand_dims", "(", "image", ",", "0", ")", "\n", "image", "=", "tf", ".", "image", ".", "resize_bilinear", "(", "image", ",", "[", "height", ",", "width", "]", ",", "\n", "align_corners", "=", "False", ")", "\n", "image", "=", "tf", ".", "squeeze", "(", "image", ",", "[", "0", "]", ")", "\n", "", "image", "=", "tf", ".", "sub", "(", "image", ",", "0.5", ")", "\n", "image", "=", "tf", ".", "mul", "(", "image", ",", "2.0", ")", "\n", "return", "image", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.preprocess_image": [[278, 305], ["inception_preprocessing.preprocess_for_train", "inception_preprocessing.preprocess_for_eval"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.preprocess_for_train", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.preprocessing.inception_preprocessing.preprocess_for_eval"], ["", "", "def", "preprocess_image", "(", "image", ",", "height", ",", "width", ",", "\n", "is_training", "=", "False", ",", "\n", "bbox", "=", "None", ",", "\n", "fast_mode", "=", "True", ")", ":", "\n", "  ", "\"\"\"Pre-process one image for training or evaluation.\n\n  Args:\n    image: 3-D Tensor [height, width, channels] with the image.\n    height: integer, image expected height.\n    width: integer, image expected width.\n    is_training: Boolean. If true it would transform an image for train,\n      otherwise it would transform it for evaluation.\n    bbox: 3-D float Tensor of bounding boxes arranged [1, num_boxes, coords]\n      where each coordinate is [0, 1) and the coordinates are arranged as\n      [ymin, xmin, ymax, xmax].\n    fast_mode: Optional boolean, if True avoids slower transformations.\n\n  Returns:\n    3-D float Tensor containing an appropriately scaled image\n\n  Raises:\n    ValueError: if user does not provide bounding box\n  \"\"\"", "\n", "if", "is_training", ":", "\n", "    ", "return", "preprocess_for_train", "(", "image", ",", "height", ",", "width", ",", "bbox", ",", "fast_mode", ")", "\n", "", "else", ":", "\n", "    ", "return", "preprocess_for_eval", "(", "image", ",", "height", ",", "width", ")", "\n", "", "", ""]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.svm_layer.utils.exp2var.__init__": [[52, 56], ["scipy.stats.uniform", "scipy.stats.uniform"], "methods", ["None"], ["    ", "def", "__init__", "(", "self", ",", "loc", "=", "0.0", ",", "scale", "=", "1.0", ")", ":", "\n", "        ", "self", ".", "dist", "=", "sp", ".", "stats", ".", "uniform", "(", "loc", "=", "loc", ",", "scale", "=", "scale", ")", "\n", "self", ".", "loc", "=", "loc", "\n", "self", ".", "scale", "=", "scale", "\n", "", "def", "rvs", "(", "self", ",", "**", "kwargs", ")", ":", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.svm_layer.utils.exp2var.rvs": [[56, 59], ["utils.exp2var.dist.rvs"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.svm_layer.utils.exp2var.rvs"], ["", "def", "rvs", "(", "self", ",", "**", "kwargs", ")", ":", "\n", "        ", "u", "=", "self", ".", "dist", ".", "rvs", "(", "**", "kwargs", ")", "\n", "return", "2.0", "**", "u", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.svm_layer.utils.print_and_time": [[23, 34], ["datetime.datetime.utcnow", "kwargs.pop", "kwargs.pop", "print", "print", "kwargs.get"], "function", ["None"], ["def", "print_and_time", "(", "*", "args", ",", "**", "kwargs", ")", ":", "\n", "    ", "now", "=", "datetime", ".", "datetime", ".", "utcnow", "(", ")", "\n", "past", "=", "kwargs", ".", "pop", "(", "'past'", ",", "None", ")", "\n", "if", "not", "past", "is", "None", ":", "\n", "        ", "elapsed", "=", "(", "now", "-", "past", ")", ".", "seconds", "\n", "elapsed_min", "=", "elapsed", "//", "60", "\n", "elapsed_sec", "=", "elapsed", "%", "60", "\n", "print", "(", "\" elapsed: %d'%d''\"", "%", "(", "elapsed_min", ",", "elapsed_sec", ")", ",", "file", "=", "kwargs", ".", "get", "(", "'file'", ",", "sys", ".", "stdout", ")", ")", "\n", "", "end", "=", "kwargs", ".", "pop", "(", "'end'", ",", "''", ")", "\n", "print", "(", "*", "args", ",", "end", "=", "end", ",", "**", "kwargs", ")", "\n", "return", "now", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.svm_layer.utils.read_pickled_data": [[35, 50], ["open", "pickle.load", "numpy.empty", "numpy.empty", "xrange", "open.close", "pickle.load", "ids.append"], "function", ["None"], ["", "def", "read_pickled_data", "(", "filename", ")", ":", "\n", "    ", "source", "=", "open", "(", "filename", ",", "'rb'", ")", "\n", "sizes", "=", "pickle", ".", "load", "(", "source", ")", "\n", "num_samples", "=", "sizes", "[", "0", "]", "\n", "feature_size", "=", "sizes", "[", "1", "]", "\n", "ids", "=", "[", "]", "\n", "labels", "=", "np", ".", "empty", "(", "[", "num_samples", "]", ",", "dtype", "=", "np", ".", "float", ")", "\n", "features", "=", "np", ".", "empty", "(", "[", "num_samples", ",", "feature_size", "]", ",", "dtype", "=", "np", ".", "float", ")", "\n", "for", "s", "in", "xrange", "(", "num_samples", ")", ":", "\n", "        ", "sample", "=", "pickle", ".", "load", "(", "source", ")", "\n", "ids", ".", "append", "(", "sample", "[", "0", "]", ")", "\n", "labels", "[", "s", "]", "=", "sample", "[", "1", "]", "\n", "features", "[", "s", "]", "=", "sample", "[", "2", "]", "\n", "", "source", ".", "close", "(", ")", "\n", "return", "ids", ",", "labels", ",", "features", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.svm_layer.utils.new_classifier": [[60, 80], ["sklearn.svm.LinearSVC", "sklearn.svm.SVC", "utils.exp2var", "utils.exp2var", "utils.exp2var"], "function", ["None"], ["", "", "def", "new_classifier", "(", "linear", "=", "False", ",", "dual", "=", "True", ",", "max_iter", "=", "10000", ",", "min_gamma", "=", "-", "24", ",", "scale_gamma", "=", "8", ")", ":", "\n", "    ", "if", "linear", ":", "\n", "        ", "parameters", "=", "{", "\n", "'dual'", ":", "[", "dual", "]", ",", "\n", "'C'", ":", "exp2var", "(", "loc", "=", "-", "16.0", ",", "scale", "=", "32.0", ")", ",", "\n", "'multi_class'", ":", "[", "'ovr'", "]", ",", "\n", "'random_state'", ":", "[", "0", "]", ",", "\n", "'max_iter'", ":", "[", "max_iter", "]", ",", "\n", "}", "\n", "classifier", "=", "sk", ".", "svm", ".", "LinearSVC", "(", ")", "\n", "", "else", ":", "\n", "        ", "parameters", "=", "{", "\n", "'C'", ":", "exp2var", "(", "loc", "=", "-", "16.0", ",", "scale", "=", "32.0", ")", ",", "\n", "'gamma'", ":", "exp2var", "(", "loc", "=", "min_gamma", ",", "scale", "=", "scale_gamma", ")", ",", "\n", "'kernel'", ":", "[", "'rbf'", "]", ",", "\n", "'decision_function_shape'", ":", "[", "'ovr'", "]", ",", "\n", "'random_state'", ":", "[", "0", "]", ",", "\n", "}", "\n", "classifier", "=", "sk", ".", "svm", ".", "SVC", "(", ")", "\n", "", "return", "classifier", ",", "parameters", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.svm_layer.utils.hyperoptimizer": [[81, 86], ["sklearn.model_selection.RandomizedSearchCV", "sklearn.model_selection.GroupKFold"], "function", ["None"], ["", "def", "hyperoptimizer", "(", "classifier", ",", "parameters", ",", "scoring", "=", "'roc_auc'", ",", "max_iter", "=", "10", ",", "n_jobs", "=", "1", ",", "group", "=", "True", ")", ":", "\n", "    ", "return", "sk", ".", "model_selection", ".", "RandomizedSearchCV", "(", "classifier", ",", "parameters", ",", "\n", "n_iter", "=", "max_iter", ",", "scoring", "=", "scoring", ",", "fit_params", "=", "None", ",", "n_jobs", "=", "n_jobs", ",", "iid", "=", "True", ",", "refit", "=", "True", ",", "\n", "cv", "=", "sk", ".", "model_selection", ".", "GroupKFold", "(", "n_splits", "=", "3", ")", "if", "group", "else", "None", ",", "\n", "verbose", "=", "2", ",", "random_state", "=", "0", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.etc.count_inversions.count_inversions": [[21, 27], ["sum", "sum", "enumerate", "itertools.combinations", "itertools.combinations", "xrange", "xrange", "len", "len"], "function", ["None"], ["def", "count_inversions", "(", "list1_images", ",", "list2_images_truths", ")", ":", "\n", "    ", "order1", "=", "{", "image", ":", "order", "for", "order", ",", "image", "in", "enumerate", "(", "list1_images", ")", "}", "\n", "order2", "=", "[", "[", "order1", "[", "image", "[", "0", "]", "]", ",", "image", "[", "1", "]", "]", "for", "image", "in", "list2_images_truths", "]", "\n", "inversions", "=", "sum", "(", "(", "1", "for", "i", ",", "j", "in", "itertools", ".", "combinations", "(", "xrange", "(", "len", "(", "order2", ")", ")", ",", "2", ")", "if", "order2", "[", "i", "]", "[", "0", "]", ">", "order2", "[", "j", "]", "[", "0", "]", ")", ")", "\n", "significant", "=", "sum", "(", "(", "1", "for", "i", ",", "j", "in", "itertools", ".", "combinations", "(", "xrange", "(", "len", "(", "order2", ")", ")", ",", "2", ")", "if", "order2", "[", "i", "]", "[", "0", "]", ">", "order2", "[", "j", "]", "[", "0", "]", "and", "order2", "[", "i", "]", "[", "1", "]", "!=", "order2", "[", "j", "]", "[", "1", "]", ")", ")", "\n", "return", "inversions", ",", "significant", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.etc.assemble_meta_features.bits_from_probstr": [[73, 80], ["float", "max", "min", "numpy.log2"], "function", ["None"], ["def", "bits_from_probstr", "(", "probstr", ")", ":", "\n", "    ", "prob", "=", "float", "(", "probstr", ")", "\n", "prob", "=", "max", "(", "bits_from_probstr", ".", "SCEPTICISM_THRESHOLD", ",", "prob", ")", "\n", "prob", "=", "min", "(", "1.0", "-", "bits_from_probstr", ".", "SCEPTICISM_THRESHOLD", ",", "prob", ")", "\n", "odds", "=", "prob", "/", "(", "1.0", "-", "prob", ")", "\n", "bits", "=", "np", ".", "log2", "(", "odds", ")", "\n", "return", "bits", "\n", "# This corresponds to doubting the model can do better than one error in one million", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.prepare_skin_lesions_train.checkImage": [[29, 37], ["print", "os.path.isfile", "print", "os.path.join"], "function", ["None"], ["def", "checkImage", "(", "image", ",", "previous", ")", ":", "\n", "    ", "if", "image", "==", "previous", ":", "\n", "        ", "print", "(", "'duplicate '", "+", "image", "+", "' --- skipping'", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "return", "False", "\n", "", "if", "not", "os", ".", "path", ".", "isfile", "(", "os", ".", "path", ".", "join", "(", "images_path", ",", "image", ")", "+", "'.jpg'", ")", ":", "\n", "        ", "print", "(", "'missing '", "+", "image", "+", "'.jpg --- skipping'", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "return", "False", "\n", "", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.ImageReader.__init__": [[72, 76], ["tensorflow.placeholder", "tensorflow.image.decode_jpeg"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.ImageReader.decode_jpeg"], ["def", "__init__", "(", "self", ")", ":", "\n", "# Initializes function that decodes RGB JPEG data.", "\n", "    ", "self", ".", "_decode_jpeg_data", "=", "tf", ".", "placeholder", "(", "dtype", "=", "tf", ".", "string", ")", "\n", "self", ".", "_decode_jpeg", "=", "tf", ".", "image", ".", "decode_jpeg", "(", "self", ".", "_decode_jpeg_data", ",", "channels", "=", "3", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.ImageReader.read_image_dims": [[77, 80], ["convert_skin_lesions.ImageReader.decode_jpeg"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.ImageReader.decode_jpeg"], ["", "def", "read_image_dims", "(", "self", ",", "sess", ",", "image_data", ")", ":", "\n", "    ", "image", "=", "self", ".", "decode_jpeg", "(", "sess", ",", "image_data", ")", "\n", "return", "image", ".", "shape", "[", "0", "]", ",", "image", ".", "shape", "[", "1", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.ImageReader.decode_jpeg": [[81, 87], ["sess.run", "len"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "def", "decode_jpeg", "(", "self", ",", "sess", ",", "image_data", ")", ":", "\n", "    ", "image", "=", "sess", ".", "run", "(", "self", ".", "_decode_jpeg", ",", "\n", "feed_dict", "=", "{", "self", ".", "_decode_jpeg_data", ":", "image_data", "}", ")", "\n", "assert", "len", "(", "image", ".", "shape", ")", "==", "3", "\n", "assert", "image", ".", "shape", "[", "2", "]", "==", "3", "\n", "return", "image", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.int64_feature": [[41, 45], ["tensorflow.train.Feature", "isinstance", "tensorflow.train.Int64List"], "function", ["None"], ["def", "int64_feature", "(", "values", ")", ":", "\n", "  ", "if", "not", "isinstance", "(", "values", ",", "(", "tuple", ",", "list", ")", ")", ":", "\n", "    ", "values", "=", "[", "values", "]", "\n", "", "return", "tf", ".", "train", ".", "Feature", "(", "int64_list", "=", "tf", ".", "train", ".", "Int64List", "(", "value", "=", "values", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.float_feature": [[46, 50], ["tensorflow.train.Feature", "isinstance", "tensorflow.train.FloatList"], "function", ["None"], ["", "def", "float_feature", "(", "values", ")", ":", "\n", "  ", "if", "not", "isinstance", "(", "values", ",", "(", "tuple", ",", "list", ")", ")", ":", "\n", "    ", "values", "=", "[", "values", "]", "\n", "", "return", "tf", ".", "train", ".", "Feature", "(", "float_list", "=", "tf", ".", "train", ".", "FloatList", "(", "value", "=", "values", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.bytes_feature": [[51, 53], ["tensorflow.train.Feature", "tensorflow.train.BytesList"], "function", ["None"], ["", "def", "bytes_feature", "(", "values", ")", ":", "\n", "  ", "return", "tf", ".", "train", ".", "Feature", "(", "bytes_list", "=", "tf", ".", "train", ".", "BytesList", "(", "value", "=", "[", "values", "]", ")", ")", "\n", "# <===", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions._get_dataset_filename": [[89, 93], ["os.path.join"], "function", ["None"], ["", "", "def", "_get_dataset_filename", "(", "dataset_dir", ",", "split_name", ",", "shard_id", ",", "num_shards", ")", ":", "\n", "  ", "output_filename", "=", "'skin_lesions_%s_%05d-of-%05d.tfrecord'", "%", "(", "\n", "split_name", ",", "shard_id", "+", "1", ",", "num_shards", ")", "\n", "return", "os", ".", "path", ".", "join", "(", "dataset_dir", ",", "output_filename", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions._image_to_tfexample": [[95, 113], ["tensorflow.train.Example", "tensorflow.train.Features", "convert_skin_lesions.bytes_feature", "convert_skin_lesions.bytes_feature", "convert_skin_lesions.int64_feature", "convert_skin_lesions.int64_feature", "convert_skin_lesions.int64_feature", "convert_skin_lesions.int64_feature", "convert_skin_lesions.int64_feature", "convert_skin_lesions.bytes_feature", "convert_skin_lesions.bytes_feature", "convert_skin_lesions.float_feature", "convert_skin_lesions.float_feature", "convert_skin_lesions.float_feature", "convert_skin_lesions.float_feature", "convert_skin_lesions.float_feature", "convert_skin_lesions.float_feature", "convert_skin_lesions.float_feature", "int", "int", "float", "float", "float", "float", "float", "len"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.bytes_feature", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.bytes_feature", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.int64_feature", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.int64_feature", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.int64_feature", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.int64_feature", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.int64_feature", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.bytes_feature", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.bytes_feature", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.float_feature", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.float_feature", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.float_feature", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.float_feature", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.float_feature", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.float_feature", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.float_feature"], ["", "def", "_image_to_tfexample", "(", "image_data", ",", "image_format", ",", "height", ",", "width", ",", "metadata", ")", ":", "\n", "  ", "return", "tf", ".", "train", ".", "Example", "(", "features", "=", "tf", ".", "train", ".", "Features", "(", "feature", "=", "{", "\n", "'image/encoded'", ":", "bytes_feature", "(", "image_data", ")", ",", "\n", "'image/format'", ":", "bytes_feature", "(", "image_format", ")", ",", "\n", "'image/class/label'", ":", "int64_feature", "(", "1", "if", "metadata", "[", "7", "]", "==", "'1'", "else", "(", "2", "if", "metadata", "[", "8", "]", "==", "'1'", "else", "0", ")", ")", ",", "\n", "'image/class/melanoma'", ":", "int64_feature", "(", "int", "(", "metadata", "[", "7", "]", ")", ")", ",", "\n", "'image/class/keratosis'", ":", "int64_feature", "(", "int", "(", "metadata", "[", "8", "]", ")", ")", ",", "\n", "'image/height'", ":", "int64_feature", "(", "height", ")", ",", "\n", "'image/width'", ":", "int64_feature", "(", "width", ")", ",", "\n", "'image/meta/id'", ":", "bytes_feature", "(", "metadata", "[", "0", "]", ")", ",", "\n", "'image/meta/case'", ":", "bytes_feature", "(", "metadata", "[", "1", "]", ")", ",", "\n", "'image/meta/type'", ":", "float_feature", "(", "1.0", "if", "metadata", "[", "2", "]", "==", "'d'", "else", "0.0", ")", ",", "\n", "'image/meta/age'", ":", "float_feature", "(", "float", "(", "metadata", "[", "3", "]", ")", "if", "len", "(", "metadata", "[", "3", "]", ")", ">", "0", "else", "0.0", ")", ",", "\n", "'image/meta/has_age'", ":", "float_feature", "(", "float", "(", "metadata", "[", "4", "]", ")", ")", ",", "\n", "'image/meta/sex'", ":", "float_feature", "(", "1.0", "if", "metadata", "[", "5", "]", "==", "'female'", "else", "0.0", ")", ",", "\n", "'image/meta/has_sex'", ":", "float_feature", "(", "float", "(", "metadata", "[", "6", "]", ")", ")", ",", "\n", "'image/meta/schedule'", ":", "float_feature", "(", "float", "(", "metadata", "[", "9", "]", ")", ")", ",", "\n", "'image/meta/weight'", ":", "float_feature", "(", "float", "(", "metadata", "[", "10", "]", ")", ")", ",", "\n", "}", ")", ")", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions._convert_dataset": [[116, 159], ["len", "iter", "int", "sys.stdout.write", "sys.stdout.flush", "math.ceil", "int", "max", "tensorflow.Graph().as_default", "tensorflow.Session", "convert_skin_lesions.ImageReader", "range", "convert_skin_lesions._get_dataset_filename", "tensorflow.python_io.TFRecordWriter", "range", "tf.python_io.TFRecordWriter.close", "tensorflow.Graph", "sys.stdout.write", "sys.stdout.flush", "iter.next", "tensorflow.gfile.FastGFile().read", "convert_skin_lesions.ImageReader.read_image_dims", "convert_skin_lesions._image_to_tfexample", "tf.python_io.TFRecordWriter.write", "os.path.join", "_image_to_tfexample.SerializeToString", "tensorflow.gfile.FastGFile"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions._get_dataset_filename", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.ImageReader.read_image_dims", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions._image_to_tfexample"], ["", "def", "_convert_dataset", "(", "split_name", ",", "metadata", ",", "images_dir", ",", "dataset_dir", ")", ":", "\n", "  ", "\"\"\"Converts the given images and metadata to a TFRecord dataset.\n\n  Args:\n    split_name: The name of the dataset: 'train', 'validation', or 'test'\n    metadata: A list with the dataset metadata\n    images_dir: The directory with the input .jpg images\n    dataset_dir: The directory where the converted datasets are stored.\n  \"\"\"", "\n", "assert", "split_name", "in", "[", "'train'", ",", "'test'", ",", "'validation'", "]", "\n", "\n", "dataset_size", "=", "len", "(", "metadata", ")", "\n", "metadata", "=", "iter", "(", "metadata", ")", "\n", "num_shards", "=", "int", "(", "math", ".", "ceil", "(", "dataset_size", "/", "_NUM_PER_SHARD", ")", ")", "\n", "if", "(", "dataset_size", "%", "_NUM_PER_SHARD", "<", "int", "(", "_NUM_PER_SHARD", "/", "3.0", ")", ")", ":", "\n", "    ", "num_shards", "=", "max", "(", "num_shards", "-", "1", ",", "1", ")", "\n", "\n", "", "with", "tf", ".", "Graph", "(", ")", ".", "as_default", "(", ")", ",", "tf", ".", "Session", "(", "''", ")", "as", "session", ":", "\n", "    ", "image_reader", "=", "ImageReader", "(", ")", "\n", "\n", "for", "shard_id", "in", "range", "(", "num_shards", ")", ":", "\n", "      ", "output_filename", "=", "_get_dataset_filename", "(", "dataset_dir", ",", "split_name", ",", "shard_id", ",", "num_shards", ")", "\n", "tfrecord_writer", "=", "tf", ".", "python_io", ".", "TFRecordWriter", "(", "output_filename", ")", ";", "\n", "\n", "start_ndx", "=", "shard_id", "*", "_NUM_PER_SHARD", "\n", "end_ndx", "=", "(", "shard_id", "+", "1", ")", "*", "_NUM_PER_SHARD", "if", "shard_id", "<", "num_shards", "-", "1", "else", "dataset_size", "\n", "for", "i", "in", "range", "(", "start_ndx", ",", "end_ndx", ")", ":", "\n", "        ", "sys", ".", "stdout", ".", "write", "(", "'\\r>> Converting image %d/%d shard %d'", "%", "\n", "(", "i", "+", "1", ",", "dataset_size", ",", "shard_id", ")", ")", "\n", "sys", ".", "stdout", ".", "flush", "(", ")", "\n", "\n", "# Read the filename:", "\n", "meta", "=", "metadata", ".", "next", "(", ")", "\n", "image_file", "=", "os", ".", "path", ".", "join", "(", "images_dir", ",", "meta", "[", "0", "]", ")", "+", "'.jpg'", "\n", "image_data", "=", "tf", ".", "gfile", ".", "FastGFile", "(", "image_file", ",", "'r'", ")", ".", "read", "(", ")", "\n", "height", ",", "width", "=", "image_reader", ".", "read_image_dims", "(", "session", ",", "image_data", ")", "\n", "\n", "example", "=", "_image_to_tfexample", "(", "image_data", ",", "'jpg'", ",", "height", ",", "width", ",", "meta", ")", "\n", "tfrecord_writer", ".", "write", "(", "example", ".", "SerializeToString", "(", ")", ")", "\n", "\n", "", "tfrecord_writer", ".", "close", "(", ")", "\n", "", "", "sys", ".", "stdout", ".", "write", "(", "'\\n'", ")", "\n", "sys", ".", "stdout", ".", "flush", "(", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run": [[161, 352], ["len", "print", "pickle.dump", "print", "pickle.dump", "open().write", "open().write", "open().write", "tensorflow.gfile.Exists", "tensorflow.gfile.MakeDirs", "m.strip().split", "convert_skin_lesions.run.split_cases"], "function", ["None"], ["", "def", "run", "(", "mode", ",", "metadata_file", ",", "images_dir", ",", "dataset_dir", ",", "blacklist_file", "=", "None", ")", ":", "\n", "  ", "\"\"\"Runs the download and conversion operation.\n\n  Args:\n    mode: TRAIN or TEST\n    metadata_file: The name of the file with the dataset metadata\n    images_dir: The directory with the input .jpg images\n    dataset_dir: The dataset directory where the dataset is stored\n  \"\"\"", "\n", "if", "not", "tf", ".", "gfile", ".", "Exists", "(", "dataset_dir", ")", ":", "\n", "    ", "tf", ".", "gfile", ".", "MakeDirs", "(", "dataset_dir", ")", "\n", "\n", "\n", "# Get metadata", "\n", "", "metadata", "=", "[", "m", ".", "strip", "(", ")", ".", "split", "(", "','", ")", "for", "m", "in", "open", "(", "metadata_file", ",", "'r'", ")", ".", "readlines", "(", ")", "]", "\n", "metadata", "=", "[", "[", "f", ".", "strip", "(", ")", "for", "f", "in", "m", "]", "for", "m", "in", "metadata", "]", "\n", "metadata", "=", "metadata", "[", "1", ":", "]", "# Skips header", "\n", "\n", "# Get blacklist", "\n", "if", "not", "blacklist_file", "is", "None", ":", "\n", "    ", "blacklist", "=", "[", "r", ".", "strip", "(", ")", "for", "r", "in", "open", "(", "blacklist_file", ",", "'r'", ")", "]", "\n", "metadata", "=", "[", "m", "for", "m", "in", "metadata", "if", "not", "(", "m", "[", "0", "]", "in", "blacklist", ")", "]", "\n", "\n", "", "dataset_size", "=", "len", "(", "metadata", ")", "\n", "\n", "\n", "if", "mode", "==", "'TRAIN'", ":", "\n", "# Divide metadata into stratified sets", "\n", "    ", "meta_melanoma", "=", "[", "m", "for", "m", "in", "metadata", "if", "m", "[", "7", "]", "==", "'1'", "]", "\n", "meta_keratosis", "=", "[", "m", "for", "m", "in", "metadata", "if", "m", "[", "8", "]", "==", "'1'", "]", "\n", "meta_other", "=", "[", "m", "for", "m", "in", "metadata", "if", "m", "[", "7", "]", "!=", "'1'", "and", "m", "[", "8", "]", "!=", "'1'", "]", "\n", "\n", "CLASSES_TO_SIZES", "=", "{", "'melanoma'", ":", "len", "(", "meta_melanoma", ")", ",", "\n", "'keratosis'", ":", "len", "(", "meta_keratosis", ")", ",", "\n", "'other'", ":", "len", "(", "meta_other", ")", "}", "\n", "\n", "# Preprocess cases division: an annoying detail is that cases", "\n", "# cannot be broken (subtle contamination)", "\n", "\n", "# ...extract all non-empty cases", "\n", "cases_melanoma", "=", "[", "m", "for", "m", "in", "meta_melanoma", "if", "len", "(", "m", "[", "1", "]", ")", ">", "0", "]", "\n", "cases_keratosis", "=", "[", "m", "for", "m", "in", "meta_keratosis", "if", "len", "(", "m", "[", "1", "]", ")", ">", "0", "]", "\n", "cases_other", "=", "[", "m", "for", "m", "in", "meta_other", "if", "len", "(", "m", "[", "1", "]", ")", ">", "0", "]", "\n", "meta_melanoma", "=", "[", "m", "for", "m", "in", "meta_melanoma", "if", "len", "(", "m", "[", "1", "]", ")", "==", "0", "]", "\n", "meta_keratosis", "=", "[", "m", "for", "m", "in", "meta_keratosis", "if", "len", "(", "m", "[", "1", "]", ")", "==", "0", "]", "\n", "meta_other", "=", "[", "m", "for", "m", "in", "meta_other", "if", "len", "(", "m", "[", "1", "]", ")", "==", "0", "]", "\n", "\n", "# ...if there are duplicate cases, keep only one in each set", "\n", "def", "split_cases", "(", "cases", ")", ":", "\n", "        ", "cases", ".", "sort", "(", "key", "=", "itemgetter", "(", "1", ")", ")", "\n", "first_cases", "=", "[", "]", "\n", "next_cases", "=", "{", "}", "\n", "seen_cases", "=", "set", "(", ")", "\n", "for", "m", "in", "cases", ":", "\n", "          ", "assert", "(", "len", "(", "m", "[", "1", "]", ".", "strip", "(", ")", ")", ">", "0", ")", "\n", "if", "m", "[", "1", "]", "in", "seen_cases", ":", "\n", "            ", "next_cases", "[", "m", "[", "1", "]", "]", ".", "append", "(", "m", ")", "\n", "", "else", ":", "\n", "            ", "seen_cases", ".", "add", "(", "m", "[", "1", "]", ")", "\n", "first_cases", ".", "append", "(", "m", ")", "\n", "next_cases", "[", "m", "[", "1", "]", "]", "=", "[", "]", "\n", "", "", "return", "first_cases", ",", "next_cases", "\n", "\n", "", "cases_melanoma", ",", "extra_melanoma", "=", "split_cases", "(", "cases_melanoma", ")", "\n", "cases_keratosis", ",", "extra_keratosis", "=", "split_cases", "(", "cases_keratosis", ")", "\n", "cases_other", ",", "extra_other", "=", "split_cases", "(", "cases_other", ")", "\n", "\n", "meta_melanoma", ".", "extend", "(", "cases_melanoma", ")", "\n", "meta_keratosis", ".", "extend", "(", "cases_keratosis", ")", "\n", "meta_other", ".", "extend", "(", "cases_other", ")", "\n", "\n", "# Divide into train, validation, and test sets...", "\n", "random", ".", "seed", "(", "_RANDOM_SEED", ")", "\n", "random", ".", "shuffle", "(", "meta_melanoma", ")", "\n", "random", ".", "shuffle", "(", "meta_keratosis", ")", "\n", "random", ".", "shuffle", "(", "meta_other", ")", "\n", "\n", "# ...melanomas", "\n", "n_melanoma", "=", "len", "(", "meta_melanoma", ")", "\n", "n_training", "=", "int", "(", "n_melanoma", "/", "100.0", "*", "_TRAINING_PERC", ")", "\n", "n_validation", "=", "int", "(", "n_melanoma", "/", "100.0", "*", "_VALIDATION_PERC", ")", "\n", "training", "=", "meta_melanoma", "[", ":", "n_training", "]", "\n", "validation", "=", "meta_melanoma", "[", "n_training", ":", "n_training", "+", "n_validation", "]", "\n", "test", "=", "meta_melanoma", "[", "n_training", "+", "n_validation", ":", "]", "\n", "# ...keratosis", "\n", "n_keratosis", "=", "len", "(", "meta_keratosis", ")", "\n", "n_training", "=", "int", "(", "n_keratosis", "/", "100.0", "*", "_TRAINING_PERC", ")", "\n", "n_validation", "=", "int", "(", "n_keratosis", "/", "100.0", "*", "_VALIDATION_PERC", ")", "\n", "training", "+=", "meta_keratosis", "[", ":", "n_training", "]", "\n", "validation", "+=", "meta_keratosis", "[", "n_training", ":", "n_training", "+", "n_validation", "]", "\n", "test", "+=", "meta_keratosis", "[", "n_training", "+", "n_validation", ":", "]", "\n", "# ...other", "\n", "n_other", "=", "len", "(", "meta_other", ")", "\n", "n_training", "=", "int", "(", "n_other", "/", "100.0", "*", "_TRAINING_PERC", ")", "\n", "n_validation", "=", "int", "(", "n_other", "/", "100.0", "*", "_VALIDATION_PERC", ")", "\n", "training", "+=", "meta_other", "[", ":", "n_training", "]", "\n", "validation", "+=", "meta_other", "[", "n_training", ":", "n_training", "+", "n_validation", "]", "\n", "test", "+=", "meta_other", "[", "n_training", "+", "n_validation", ":", "]", "\n", "\n", "# Reinsert extra cases", "\n", "def", "merge_test", "(", "extra_dict", ")", ":", "\n", "      ", "newcases", "=", "[", "]", "\n", "for", "extra", "in", "extra_dict", ".", "values", "(", ")", ":", "\n", "        ", "newcases", ".", "extend", "(", "extra", ")", "\n", "", "return", "newcases", "\n", "\n", "# Reinsert extra cases", "\n", "", "def", "merge_cases", "(", "sample_set", ",", "extra_list", ")", ":", "\n", "      ", "newcases", "=", "[", "]", "\n", "for", "s", "in", "sample_set", ":", "\n", "        ", "if", "len", "(", "s", "[", "1", "]", ")", ">", "0", ":", "\n", "          ", "for", "extra", "in", "extra_list", ":", "\n", "            ", "match", "=", "extra", ".", "get", "(", "s", "[", "1", "]", ",", "[", "]", ")", "\n", "if", "len", "(", "match", ")", ">", "0", ":", "\n", "              ", "newcases", ".", "extend", "(", "match", ")", "\n", "# Once assigned, the case shouldn't be reused", "\n", "extra", "[", "s", "[", "1", "]", "]", "=", "[", "]", "\n", "", "", "", "", "sample_set", ".", "extend", "(", "newcases", ")", "\n", "\n", "", "merge_cases", "(", "test", ",", "[", "extra_melanoma", ",", "extra_keratosis", ",", "extra_other", "]", ")", "\n", "merge_cases", "(", "validation", ",", "[", "extra_melanoma", ",", "extra_keratosis", ",", "extra_other", "]", ")", "\n", "merge_cases", "(", "training", ",", "[", "extra_melanoma", ",", "extra_keratosis", ",", "extra_other", "]", ")", "\n", "\n", "# Reshuffle each set", "\n", "random", ".", "shuffle", "(", "training", ")", "\n", "random", ".", "shuffle", "(", "validation", ")", "\n", "random", ".", "shuffle", "(", "test", ")", "\n", "\n", "# Contamination check", "\n", "training_ids", "=", "set", "(", "(", "m", "[", "0", "]", "for", "m", "in", "training", ")", ")", "\n", "validation_ids", "=", "set", "(", "(", "m", "[", "0", "]", "for", "m", "in", "validation", ")", ")", "\n", "test_ids", "=", "set", "(", "(", "m", "[", "0", "]", "for", "m", "in", "test", ")", ")", "\n", "\n", "if", "len", "(", "training_ids", ".", "intersection", "(", "validation_ids", ")", ")", ">", "0", "or", "len", "(", "training_ids", ".", "intersection", "(", "test_ids", ")", ")", ">", "0", "or", "len", "(", "validation_ids", ".", "intersection", "(", "test_ids", ")", ")", ">", "0", ":", "\n", "      ", "print", "(", "'FATAL: cross contamination among sets. There are duplicate ids in source sets.'", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "print", "(", "'tre & val: '", ",", "training_ids", ".", "intersection", "(", "validation_ids", ")", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "print", "(", "'tre & tes: '", ",", "training_ids", ".", "intersection", "(", "test_ids", ")", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "print", "(", "'val & tes: '", ",", "validation_ids", ".", "intersection", "(", "test_ids", ")", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "sys", ".", "exit", "(", "1", ")", "\n", "\n", "# Case contamination check --- we will be less strict about those but still emmit a warning", "\n", "", "training_ids", "=", "set", "(", "(", "m", "[", "1", "]", "for", "m", "in", "training", ")", ")", "\n", "validation_ids", "=", "set", "(", "(", "m", "[", "1", "]", "for", "m", "in", "validation", ")", ")", "\n", "test_ids", "=", "set", "(", "(", "m", "[", "1", "]", "for", "m", "in", "test", ")", ")", "\n", "trivial", "=", "set", "(", "[", "''", "]", ")", "\n", "if", "len", "(", "training_ids", ".", "intersection", "(", "validation_ids", ")", "-", "trivial", ")", ">", "0", "or", "len", "(", "training_ids", ".", "intersection", "(", "test_ids", ")", "-", "trivial", ")", ">", "0", "or", "len", "(", "validation_ids", ".", "intersection", "(", "test_ids", ")", "-", "trivial", ")", ">", "0", ":", "\n", "      ", "print", "(", "'WARNING: case contamination among sets.'", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "print", "(", "'tre & val: '", ",", "training_ids", ".", "intersection", "(", "validation_ids", ")", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "print", "(", "'tre & tes: '", ",", "training_ids", ".", "intersection", "(", "test_ids", ")", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "print", "(", "'val & tes: '", ",", "validation_ids", ".", "intersection", "(", "test_ids", ")", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "\n", "# Convert the training and validation sets.", "\n", "", "_convert_dataset", "(", "'train'", ",", "training", ",", "images_dir", ",", "dataset_dir", ")", "\n", "_convert_dataset", "(", "'validation'", ",", "validation", ",", "images_dir", ",", "dataset_dir", ")", "\n", "_convert_dataset", "(", "'test'", ",", "test", ",", "images_dir", ",", "dataset_dir", ")", "\n", "\n", "\n", "", "elif", "mode", "==", "'TEST'", ":", "\n", "    ", "training", "=", "[", "]", "\n", "validation", "=", "[", "]", "\n", "test", "=", "metadata", "\n", "_convert_dataset", "(", "'test'", ",", "test", ",", "images_dir", ",", "dataset_dir", ")", "\n", "\n", "# This data is still needed by the prediction script", "\n", "CLASSES_TO_SIZES", "=", "{", "'melanoma'", ":", "0", ",", "\n", "'keratosis'", ":", "0", ",", "\n", "'other'", ":", "len", "(", "test", ")", "}", "\n", "\n", "", "else", ":", "\n", "    ", "print", "(", "'FATAL: invalid mode '", ",", "mode", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "sys", ".", "exit", "(", "1", ")", "\n", "\n", "\n", "# Saves classes and split sizes", "\n", "", "print", "(", "'INFO: '", ",", "CLASSES_TO_SIZES", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "pickle", ".", "dump", "(", "CLASSES_TO_SIZES", ",", "open", "(", "os", ".", "path", ".", "join", "(", "dataset_dir", ",", "'classes_to_sizes.pkl'", ")", ",", "'w'", ")", ")", "\n", "\n", "SPLITS_TO_SIZES", "=", "{", "'train'", ":", "len", "(", "training", ")", ",", "\n", "'validation'", ":", "len", "(", "validation", ")", ",", "\n", "'test'", ":", "len", "(", "test", ")", "}", "\n", "print", "(", "'INFO: '", ",", "SPLITS_TO_SIZES", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "pickle", ".", "dump", "(", "SPLITS_TO_SIZES", ",", "open", "(", "os", ".", "path", ".", "join", "(", "dataset_dir", ",", "'splits_to_sizes.pkl'", ")", ",", "'w'", ")", ")", "\n", "\n", "# Logs splits", "\n", "open", "(", "os", ".", "path", ".", "join", "(", "dataset_dir", ",", "'train_set.log'", ")", ",", "'w'", ")", ".", "write", "(", "'\\n'", ".", "join", "(", "[", "m", "[", "0", "]", "for", "m", "in", "training", "]", ")", "+", "'\\n'", ")", "\n", "open", "(", "os", ".", "path", ".", "join", "(", "dataset_dir", ",", "'valid_set.log'", ")", ",", "'w'", ")", ".", "write", "(", "'\\n'", ".", "join", "(", "[", "m", "[", "0", "]", "for", "m", "in", "validation", "]", ")", "+", "'\\n'", ")", "\n", "open", "(", "os", ".", "path", ".", "join", "(", "dataset_dir", ",", "'test_set.log'", ")", ",", "'w'", ")", ".", "write", "(", "'\\n'", ".", "join", "(", "[", "m", "[", "0", "]", "for", "m", "in", "test", "]", ")", "+", "'\\n'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.dataset_factory.get_dataset": [[29, 53], ["datasets_map[].get_split", "ValueError"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.skin_lesions.get_split"], ["def", "get_dataset", "(", "name", ",", "split_name", ",", "dataset_dir", ",", "file_pattern", "=", "None", ",", "reader", "=", "None", ")", ":", "\n", "  ", "\"\"\"Given a dataset name and a split_name returns a Dataset.\n\n  Args:\n    name: String, the name of the dataset.\n    split_name: A train/test split name.\n    dataset_dir: The directory where the dataset files are stored.\n    file_pattern: The file pattern to use for matching the dataset source files.\n    reader: The subclass of tf.ReaderBase. If left as `None`, then the default\n      reader defined by each dataset is used.\n\n  Returns:\n    A `Dataset` class.\n\n  Raises:\n    ValueError: If the dataset `name` is unknown.\n  \"\"\"", "\n", "if", "name", "not", "in", "datasets_map", ":", "\n", "    ", "raise", "ValueError", "(", "'Name of dataset unknown %s'", "%", "name", ")", "\n", "", "return", "datasets_map", "[", "name", "]", ".", "get_split", "(", "\n", "split_name", ",", "\n", "dataset_dir", ",", "\n", "file_pattern", ",", "\n", "reader", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.skin_lesions.get_split": [[54, 135], ["print", "print", "print", "pickle.load", "pickle.load", "os.path.join", "slim.tfexample_decoder.TFExampleDecoder", "slim.dataset.Dataset", "open", "open", "ValueError", "tensorflow.FixedLenFeature", "tensorflow.FixedLenFeature", "tensorflow.FixedLenFeature", "tensorflow.FixedLenFeature", "tensorflow.FixedLenFeature", "tensorflow.FixedLenFeature", "tensorflow.FixedLenFeature", "tensorflow.FixedLenFeature", "tensorflow.FixedLenFeature", "tensorflow.FixedLenFeature", "tensorflow.FixedLenFeature", "tensorflow.FixedLenFeature", "tensorflow.FixedLenFeature", "tensorflow.FixedLenFeature", "slim.tfexample_decoder.Image", "slim.tfexample_decoder.Tensor", "slim.tfexample_decoder.Tensor", "slim.tfexample_decoder.Tensor", "slim.tfexample_decoder.Tensor", "slim.tfexample_decoder.Tensor", "slim.tfexample_decoder.Tensor", "slim.tfexample_decoder.Tensor", "slim.tfexample_decoder.Tensor", "slim.tfexample_decoder.Tensor", "slim.tfexample_decoder.Tensor", "slim.tfexample_decoder.Tensor", "slim.tfexample_decoder.Tensor", "os.path.join", "os.path.join", "tensorflow.zeros", "tensorflow.zeros", "tensorflow.zeros", "tensorflow.zeros", "tensorflow.zeros", "tensorflow.zeros", "tensorflow.zeros", "tensorflow.zeros", "tensorflow.zeros", "tensorflow.zeros"], "function", ["None"], ["def", "get_split", "(", "split_name", ",", "dataset_dir", ",", "file_pattern", "=", "None", ",", "reader", "=", "None", ")", ":", "\n", "  ", "\"\"\"Gets a dataset tuple with instructions for reading flowers.\n\n  Args:\n    split_name: A train/validation split name.\n    dataset_dir: The base directory of the dataset sources.\n    file_pattern: The file pattern to use when matching the dataset sources.\n      It is assumed that the pattern contains a '%s' string so that the split\n      name can be inserted.\n    reader: The TensorFlow reader type.\n\n  Returns:\n    A `Dataset` namedtuple.\n\n  Raises:\n    ValueError: if `split_name` is not a valid train/validation split.\n  \"\"\"", "\n", "print", "(", "'==================================='", ")", "\n", "print", "(", "'SPLIT'", ",", "split_name", ")", "\n", "print", "(", "'==================================='", ")", "\n", "SPLITS_TO_SIZES", "=", "pickle", ".", "load", "(", "open", "(", "os", ".", "path", ".", "join", "(", "dataset_dir", ",", "'splits_to_sizes.pkl'", ")", ",", "'r'", ")", ")", "\n", "CLASSES_TO_SIZES", "=", "pickle", ".", "load", "(", "open", "(", "os", ".", "path", ".", "join", "(", "dataset_dir", ",", "'classes_to_sizes.pkl'", ")", ",", "'r'", ")", ")", "\n", "\n", "if", "split_name", "not", "in", "SPLITS_TO_SIZES", ":", "\n", "    ", "raise", "ValueError", "(", "'split name %s was not recognized.'", "%", "split_name", ")", "\n", "\n", "", "if", "not", "file_pattern", ":", "\n", "    ", "file_pattern", "=", "_FILE_PATTERN", "\n", "", "file_pattern", "=", "os", ".", "path", ".", "join", "(", "dataset_dir", ",", "file_pattern", "%", "split_name", ")", "\n", "\n", "# Allowing None in the signature so that dataset_factory can use the default.", "\n", "if", "reader", "is", "None", ":", "\n", "    ", "reader", "=", "tf", ".", "TFRecordReader", "\n", "\n", "", "keys_to_features", "=", "{", "\n", "'image/encoded'", ":", "tf", ".", "FixedLenFeature", "(", "(", ")", ",", "tf", ".", "string", ",", "default_value", "=", "''", ")", ",", "\n", "'image/format'", ":", "tf", ".", "FixedLenFeature", "(", "(", ")", ",", "tf", ".", "string", ",", "default_value", "=", "'jpg'", ")", ",", "\n", "'image/class/label'", ":", "tf", ".", "FixedLenFeature", "(", "[", "]", ",", "tf", ".", "int64", ",", "default_value", "=", "tf", ".", "zeros", "(", "[", "]", ",", "dtype", "=", "tf", ".", "int64", ")", ")", ",", "\n", "'image/class/melanoma'", ":", "tf", ".", "FixedLenFeature", "(", "[", "]", ",", "tf", ".", "int64", ",", "default_value", "=", "tf", ".", "zeros", "(", "[", "]", ",", "dtype", "=", "tf", ".", "int64", ")", ")", ",", "\n", "'image/class/keratosis'", ":", "tf", ".", "FixedLenFeature", "(", "[", "]", ",", "tf", ".", "int64", ",", "default_value", "=", "tf", ".", "zeros", "(", "[", "]", ",", "dtype", "=", "tf", ".", "int64", ")", ")", ",", "\n", "'image/meta/id'", ":", "tf", ".", "FixedLenFeature", "(", "[", "]", ",", "tf", ".", "string", ",", "default_value", "=", "''", ")", ",", "\n", "'image/meta/case'", ":", "tf", ".", "FixedLenFeature", "(", "(", ")", ",", "tf", ".", "string", ",", "default_value", "=", "''", ")", ",", "\n", "'image/meta/type'", ":", "tf", ".", "FixedLenFeature", "(", "(", ")", ",", "tf", ".", "float32", ",", "default_value", "=", "tf", ".", "zeros", "(", "[", "]", ",", "dtype", "=", "tf", ".", "float32", ")", ")", ",", "\n", "'image/meta/age'", ":", "tf", ".", "FixedLenFeature", "(", "[", "]", ",", "tf", ".", "float32", ",", "default_value", "=", "tf", ".", "zeros", "(", "[", "]", ",", "dtype", "=", "tf", ".", "float32", ")", ")", ",", "\n", "'image/meta/has_age'", ":", "tf", ".", "FixedLenFeature", "(", "[", "]", ",", "tf", ".", "float32", ",", "default_value", "=", "tf", ".", "zeros", "(", "[", "]", ",", "dtype", "=", "tf", ".", "float32", ")", ")", ",", "\n", "'image/meta/sex'", ":", "tf", ".", "FixedLenFeature", "(", "[", "]", ",", "tf", ".", "float32", ",", "default_value", "=", "tf", ".", "zeros", "(", "[", "]", ",", "dtype", "=", "tf", ".", "float32", ")", ")", ",", "\n", "'image/meta/has_sex'", ":", "tf", ".", "FixedLenFeature", "(", "[", "]", ",", "tf", ".", "float32", ",", "default_value", "=", "tf", ".", "zeros", "(", "[", "]", ",", "dtype", "=", "tf", ".", "float32", ")", ")", ",", "\n", "'image/meta/schedule'", ":", "tf", ".", "FixedLenFeature", "(", "[", "]", ",", "tf", ".", "float32", ",", "default_value", "=", "tf", ".", "zeros", "(", "[", "]", ",", "dtype", "=", "tf", ".", "float32", ")", ")", ",", "\n", "'image/meta/weight'", ":", "tf", ".", "FixedLenFeature", "(", "[", "]", ",", "tf", ".", "float32", ",", "default_value", "=", "tf", ".", "zeros", "(", "[", "]", ",", "dtype", "=", "tf", ".", "float32", ")", ")", ",", "\n", "}", "\n", "\n", "items_to_handlers", "=", "{", "\n", "'image'", ":", "slim", ".", "tfexample_decoder", ".", "Image", "(", ")", ",", "\n", "'label'", ":", "slim", ".", "tfexample_decoder", ".", "Tensor", "(", "'image/class/label'", ")", ",", "\n", "'melanoma'", ":", "slim", ".", "tfexample_decoder", ".", "Tensor", "(", "'image/class/melanoma'", ")", ",", "\n", "'keratosis'", ":", "slim", ".", "tfexample_decoder", ".", "Tensor", "(", "'image/class/keratosis'", ")", ",", "\n", "'id'", ":", "slim", ".", "tfexample_decoder", ".", "Tensor", "(", "'image/meta/id'", ")", ",", "\n", "'case'", ":", "slim", ".", "tfexample_decoder", ".", "Tensor", "(", "'image/meta/case'", ")", ",", "\n", "'type'", ":", "slim", ".", "tfexample_decoder", ".", "Tensor", "(", "'image/meta/type'", ")", ",", "\n", "'age'", ":", "slim", ".", "tfexample_decoder", ".", "Tensor", "(", "'image/meta/age'", ")", ",", "\n", "'has_age'", ":", "slim", ".", "tfexample_decoder", ".", "Tensor", "(", "'image/meta/has_age'", ")", ",", "\n", "'sex'", ":", "slim", ".", "tfexample_decoder", ".", "Tensor", "(", "'image/meta/sex'", ")", ",", "\n", "'has_sex'", ":", "slim", ".", "tfexample_decoder", ".", "Tensor", "(", "'image/meta/has_sex'", ")", ",", "\n", "'schedule'", ":", "slim", ".", "tfexample_decoder", ".", "Tensor", "(", "'image/meta/schedule'", ")", ",", "\n", "'weight'", ":", "slim", ".", "tfexample_decoder", ".", "Tensor", "(", "'image/meta/weight'", ")", ",", "\n", "}", "\n", "\n", "decoder", "=", "slim", ".", "tfexample_decoder", ".", "TFExampleDecoder", "(", "\n", "keys_to_features", ",", "items_to_handlers", ")", "\n", "\n", "labels_to_names", "=", "{", "0", ":", "'other'", ",", "1", ":", "'melanoma'", ",", "2", ":", "'keratosis'", "}", "\n", "num_classes", "=", "3", "\n", "\n", "return", "slim", ".", "dataset", ".", "Dataset", "(", "\n", "data_sources", "=", "file_pattern", ",", "\n", "reader", "=", "reader", ",", "\n", "decoder", "=", "decoder", ",", "\n", "num_samples", "=", "SPLITS_TO_SIZES", "[", "split_name", "]", ",", "\n", "items_to_descriptions", "=", "_ITEMS_TO_DESCRIPTIONS", ",", "\n", "num_classes", "=", "num_classes", ",", "\n", "labels_to_names", "=", "labels_to_names", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.prepare_data.prepare_skin_lesions_train.checkImage": [[29, 37], ["print", "os.path.isfile", "print", "os.path.join"], "function", ["None"], ["def", "checkImage", "(", "image", ",", "previous", ")", ":", "\n", "    ", "if", "image", "==", "previous", ":", "\n", "        ", "print", "(", "'duplicate '", "+", "image", "+", "' --- skipping'", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "return", "False", "\n", "", "if", "not", "os", ".", "path", ".", "isfile", "(", "os", ".", "path", ".", "join", "(", "images_path", ",", "image", ")", "+", "'.jpg'", ")", ":", "\n", "        ", "print", "(", "'missing '", "+", "image", "+", "'.jpg --- skipping'", ",", "file", "=", "sys", ".", "stderr", ")", "\n", "return", "False", "\n", "", "return", "True", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.DeploymentConfigTest.testDefaults": [[31, 41], ["deployment.model_deploy.DeploymentConfig", "model_deploy_test.DeploymentConfigTest.assertEqual", "model_deploy_test.DeploymentConfigTest.assertEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "slim.get_variables", "deployment.model_deploy.DeploymentConfig.caching_device", "deployment.model_deploy.DeploymentConfig.clone_device", "deployment.model_deploy.DeploymentConfig.clone_scope", "deployment.model_deploy.DeploymentConfig.optimizer_device", "deployment.model_deploy.DeploymentConfig.inputs_device", "deployment.model_deploy.DeploymentConfig.variables_device"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.caching_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_scope", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.optimizer_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.inputs_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.variables_device"], ["  ", "def", "testDefaults", "(", "self", ")", ":", "\n", "    ", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", ")", "\n", "\n", "self", ".", "assertEqual", "(", "slim", ".", "get_variables", "(", ")", ",", "[", "]", ")", "\n", "self", ".", "assertEqual", "(", "deploy_config", ".", "caching_device", "(", ")", ",", "None", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "clone_device", "(", "0", ")", ",", "''", ")", "\n", "self", ".", "assertEqual", "(", "deploy_config", ".", "clone_scope", "(", "0", ")", ",", "''", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "optimizer_device", "(", ")", ",", "'CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "inputs_device", "(", ")", ",", "'CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "variables_device", "(", ")", ",", "'CPU:0'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.DeploymentConfigTest.testCPUonly": [[42, 51], ["deployment.model_deploy.DeploymentConfig", "model_deploy_test.DeploymentConfigTest.assertEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "deployment.model_deploy.DeploymentConfig.caching_device", "deployment.model_deploy.DeploymentConfig.clone_device", "deployment.model_deploy.DeploymentConfig.clone_scope", "deployment.model_deploy.DeploymentConfig.optimizer_device", "deployment.model_deploy.DeploymentConfig.inputs_device", "deployment.model_deploy.DeploymentConfig.variables_device"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.caching_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_scope", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.optimizer_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.inputs_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.variables_device"], ["", "def", "testCPUonly", "(", "self", ")", ":", "\n", "    ", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "clone_on_cpu", "=", "True", ")", "\n", "\n", "self", ".", "assertEqual", "(", "deploy_config", ".", "caching_device", "(", ")", ",", "None", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "clone_device", "(", "0", ")", ",", "'CPU:0'", ")", "\n", "self", ".", "assertEqual", "(", "deploy_config", ".", "clone_scope", "(", "0", ")", ",", "''", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "optimizer_device", "(", ")", ",", "'CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "inputs_device", "(", ")", ",", "'CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "variables_device", "(", ")", ",", "'CPU:0'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.DeploymentConfigTest.testMultiGPU": [[52, 63], ["deployment.model_deploy.DeploymentConfig", "model_deploy_test.DeploymentConfigTest.assertEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertEqual", "model_deploy_test.DeploymentConfigTest.assertEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "deployment.model_deploy.DeploymentConfig.caching_device", "deployment.model_deploy.DeploymentConfig.clone_device", "deployment.model_deploy.DeploymentConfig.clone_device", "deployment.model_deploy.DeploymentConfig.clone_scope", "deployment.model_deploy.DeploymentConfig.clone_scope", "deployment.model_deploy.DeploymentConfig.optimizer_device", "deployment.model_deploy.DeploymentConfig.inputs_device", "deployment.model_deploy.DeploymentConfig.variables_device"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.caching_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_scope", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_scope", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.optimizer_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.inputs_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.variables_device"], ["", "def", "testMultiGPU", "(", "self", ")", ":", "\n", "    ", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_clones", "=", "2", ")", "\n", "\n", "self", ".", "assertEqual", "(", "deploy_config", ".", "caching_device", "(", ")", ",", "None", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "clone_device", "(", "0", ")", ",", "'GPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "clone_device", "(", "1", ")", ",", "'GPU:1'", ")", "\n", "self", ".", "assertEqual", "(", "deploy_config", ".", "clone_scope", "(", "0", ")", ",", "'clone_0'", ")", "\n", "self", ".", "assertEqual", "(", "deploy_config", ".", "clone_scope", "(", "1", ")", ",", "'clone_1'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "optimizer_device", "(", ")", ",", "'CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "inputs_device", "(", ")", ",", "'CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "variables_device", "(", ")", ",", "'CPU:0'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.DeploymentConfigTest.testPS": [[64, 87], ["deployment.model_deploy.DeploymentConfig", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "deployment.model_deploy.DeploymentConfig.clone_device", "deployment.model_deploy.DeploymentConfig.clone_scope", "deployment.model_deploy.DeploymentConfig.optimizer_device", "deployment.model_deploy.DeploymentConfig.inputs_device", "tensorflow.device", "tensorflow.Variable", "tensorflow.Variable", "tensorflow.no_op", "slim.variable", "deployment.model_deploy.DeploymentConfig.variables_device", "tensorflow.Variable.value", "tensorflow.Variable.value", "slim.variable.value", "deployment.model_deploy.DeploymentConfig.caching_device"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_scope", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.optimizer_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.inputs_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.variables_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.caching_device"], ["", "def", "testPS", "(", "self", ")", ":", "\n", "    ", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_clones", "=", "1", ",", "num_ps_tasks", "=", "1", ")", "\n", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "clone_device", "(", "0", ")", ",", "\n", "'/job:worker'", ")", "\n", "self", ".", "assertEqual", "(", "deploy_config", ".", "clone_scope", "(", "0", ")", ",", "''", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "optimizer_device", "(", ")", ",", "\n", "'/job:worker/device:CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "inputs_device", "(", ")", ",", "\n", "'/job:worker/device:CPU:0'", ")", "\n", "with", "tf", ".", "device", "(", "deploy_config", ".", "variables_device", "(", ")", ")", ":", "\n", "      ", "a", "=", "tf", ".", "Variable", "(", "0", ")", "\n", "b", "=", "tf", ".", "Variable", "(", "0", ")", "\n", "c", "=", "tf", ".", "no_op", "(", ")", "\n", "d", "=", "slim", ".", "variable", "(", "'a'", ",", "[", "]", ",", "\n", "caching_device", "=", "deploy_config", ".", "caching_device", "(", ")", ")", "\n", "", "self", ".", "assertDeviceEqual", "(", "a", ".", "device", ",", "'/job:ps/task:0/device:CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "a", ".", "device", ",", "a", ".", "value", "(", ")", ".", "device", ")", "\n", "self", ".", "assertDeviceEqual", "(", "b", ".", "device", ",", "'/job:ps/task:0/device:CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "b", ".", "device", ",", "b", ".", "value", "(", ")", ".", "device", ")", "\n", "self", ".", "assertDeviceEqual", "(", "c", ".", "device", ",", "''", ")", "\n", "self", ".", "assertDeviceEqual", "(", "d", ".", "device", ",", "'/job:ps/task:0/device:CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "d", ".", "value", "(", ")", ".", "device", ",", "''", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.DeploymentConfigTest.testMultiGPUPS": [[88, 102], ["deployment.model_deploy.DeploymentConfig", "model_deploy_test.DeploymentConfigTest.assertEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertEqual", "model_deploy_test.DeploymentConfigTest.assertEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "deployment.model_deploy.DeploymentConfig.clone_device", "deployment.model_deploy.DeploymentConfig.clone_device", "deployment.model_deploy.DeploymentConfig.clone_scope", "deployment.model_deploy.DeploymentConfig.clone_scope", "deployment.model_deploy.DeploymentConfig.optimizer_device", "deployment.model_deploy.DeploymentConfig.inputs_device", "deployment.model_deploy.DeploymentConfig.caching_device", "tensorflow.no_op"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_scope", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_scope", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.optimizer_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.inputs_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.caching_device"], ["", "def", "testMultiGPUPS", "(", "self", ")", ":", "\n", "    ", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_clones", "=", "2", ",", "num_ps_tasks", "=", "1", ")", "\n", "\n", "self", ".", "assertEqual", "(", "deploy_config", ".", "caching_device", "(", ")", "(", "tf", ".", "no_op", "(", ")", ")", ",", "''", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "clone_device", "(", "0", ")", ",", "\n", "'/job:worker/device:GPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "clone_device", "(", "1", ")", ",", "\n", "'/job:worker/device:GPU:1'", ")", "\n", "self", ".", "assertEqual", "(", "deploy_config", ".", "clone_scope", "(", "0", ")", ",", "'clone_0'", ")", "\n", "self", ".", "assertEqual", "(", "deploy_config", ".", "clone_scope", "(", "1", ")", ",", "'clone_1'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "optimizer_device", "(", ")", ",", "\n", "'/job:worker/device:CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "inputs_device", "(", ")", ",", "\n", "'/job:worker/device:CPU:0'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.DeploymentConfigTest.testReplicasPS": [[103, 114], ["deployment.model_deploy.DeploymentConfig", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "deployment.model_deploy.DeploymentConfig.clone_device", "deployment.model_deploy.DeploymentConfig.clone_scope", "deployment.model_deploy.DeploymentConfig.optimizer_device", "deployment.model_deploy.DeploymentConfig.inputs_device"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_scope", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.optimizer_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.inputs_device"], ["", "def", "testReplicasPS", "(", "self", ")", ":", "\n", "    ", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_replicas", "=", "2", ",", "\n", "num_ps_tasks", "=", "2", ")", "\n", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "clone_device", "(", "0", ")", ",", "\n", "'/job:worker'", ")", "\n", "self", ".", "assertEqual", "(", "deploy_config", ".", "clone_scope", "(", "0", ")", ",", "''", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "optimizer_device", "(", ")", ",", "\n", "'/job:worker/device:CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "inputs_device", "(", ")", ",", "\n", "'/job:worker/device:CPU:0'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.DeploymentConfigTest.testReplicasMultiGPUPS": [[115, 129], ["deployment.model_deploy.DeploymentConfig", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertEqual", "model_deploy_test.DeploymentConfigTest.assertEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "deployment.model_deploy.DeploymentConfig.clone_device", "deployment.model_deploy.DeploymentConfig.clone_device", "deployment.model_deploy.DeploymentConfig.clone_scope", "deployment.model_deploy.DeploymentConfig.clone_scope", "deployment.model_deploy.DeploymentConfig.optimizer_device", "deployment.model_deploy.DeploymentConfig.inputs_device"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_scope", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_scope", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.optimizer_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.inputs_device"], ["", "def", "testReplicasMultiGPUPS", "(", "self", ")", ":", "\n", "    ", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_replicas", "=", "2", ",", "\n", "num_clones", "=", "2", ",", "\n", "num_ps_tasks", "=", "2", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "clone_device", "(", "0", ")", ",", "\n", "'/job:worker/device:GPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "clone_device", "(", "1", ")", ",", "\n", "'/job:worker/device:GPU:1'", ")", "\n", "self", ".", "assertEqual", "(", "deploy_config", ".", "clone_scope", "(", "0", ")", ",", "'clone_0'", ")", "\n", "self", ".", "assertEqual", "(", "deploy_config", ".", "clone_scope", "(", "1", ")", ",", "'clone_1'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "optimizer_device", "(", ")", ",", "\n", "'/job:worker/device:CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "deploy_config", ".", "inputs_device", "(", ")", ",", "\n", "'/job:worker/device:CPU:0'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.DeploymentConfigTest.testVariablesPS": [[130, 147], ["deployment.model_deploy.DeploymentConfig", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "model_deploy_test.DeploymentConfigTest.assertDeviceEqual", "tensorflow.device", "tensorflow.Variable", "tensorflow.Variable", "tensorflow.no_op", "slim.variable", "deployment.model_deploy.DeploymentConfig.variables_device", "tensorflow.Variable.value", "tensorflow.Variable.value", "slim.variable.value", "deployment.model_deploy.DeploymentConfig.caching_device"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.variables_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.caching_device"], ["", "def", "testVariablesPS", "(", "self", ")", ":", "\n", "    ", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_ps_tasks", "=", "2", ")", "\n", "\n", "with", "tf", ".", "device", "(", "deploy_config", ".", "variables_device", "(", ")", ")", ":", "\n", "      ", "a", "=", "tf", ".", "Variable", "(", "0", ")", "\n", "b", "=", "tf", ".", "Variable", "(", "0", ")", "\n", "c", "=", "tf", ".", "no_op", "(", ")", "\n", "d", "=", "slim", ".", "variable", "(", "'a'", ",", "[", "]", ",", "\n", "caching_device", "=", "deploy_config", ".", "caching_device", "(", ")", ")", "\n", "\n", "", "self", ".", "assertDeviceEqual", "(", "a", ".", "device", ",", "'/job:ps/task:0/device:CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "a", ".", "device", ",", "a", ".", "value", "(", ")", ".", "device", ")", "\n", "self", ".", "assertDeviceEqual", "(", "b", ".", "device", ",", "'/job:ps/task:1/device:CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "b", ".", "device", ",", "b", ".", "value", "(", ")", ".", "device", ")", "\n", "self", ".", "assertDeviceEqual", "(", "c", ".", "device", ",", "''", ")", "\n", "self", ".", "assertDeviceEqual", "(", "d", ".", "device", ",", "'/job:ps/task:0/device:CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "d", ".", "value", "(", ")", ".", "device", ",", "''", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.CreatecloneTest.setUp": [[171, 182], ["numpy.random.seed", "numpy.zeros", "numpy.random.randint().astype", "model_deploy_test.CreatecloneTest.get_temp_dir", "range", "int", "numpy.random.randint", "numpy.random.randint"], "methods", ["None"], ["  ", "def", "setUp", "(", "self", ")", ":", "\n", "# Create an easy training set:", "\n", "    ", "np", ".", "random", ".", "seed", "(", "0", ")", "\n", "\n", "self", ".", "_inputs", "=", "np", ".", "zeros", "(", "(", "16", ",", "4", ")", ")", "\n", "self", ".", "_labels", "=", "np", ".", "random", ".", "randint", "(", "0", ",", "2", ",", "size", "=", "(", "16", ",", "1", ")", ")", ".", "astype", "(", "np", ".", "float32", ")", "\n", "self", ".", "_logdir", "=", "self", ".", "get_temp_dir", "(", ")", "\n", "\n", "for", "i", "in", "range", "(", "16", ")", ":", "\n", "      ", "j", "=", "int", "(", "2", "*", "self", ".", "_labels", "[", "i", "]", "+", "np", ".", "random", ".", "randint", "(", "0", ",", "2", ")", ")", "\n", "self", ".", "_inputs", "[", "i", ",", "j", "]", "=", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.CreatecloneTest.testCreateLogisticClassifier": [[183, 208], ["tensorflow.Graph", "tensorflow.Graph.as_default", "tensorflow.set_random_seed", "tensorflow.constant", "tensorflow.constant", "deployment.model_deploy.DeploymentConfig", "model_deploy_test.CreatecloneTest.assertEqual", "deployment.model_deploy.create_clones", "model_deploy_test.CreatecloneTest.assertEqual", "slim.get_variables", "model_deploy_test.CreatecloneTest.assertEqual", "model_deploy_test.CreatecloneTest.assertEqual", "model_deploy_test.CreatecloneTest.assertDeviceEqual", "model_deploy_test.CreatecloneTest.assertEqual", "tensorflow.get_collection", "model_deploy_test.CreatecloneTest.assertEqual", "slim.get_variables", "len", "model_deploy_test.CreatecloneTest.assertDeviceEqual", "model_deploy_test.CreatecloneTest.assertDeviceEqual", "len", "slim.get_variables", "slim.losses.get_losses", "v.value"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.create_clones"], ["", "", "def", "testCreateLogisticClassifier", "(", "self", ")", ":", "\n", "    ", "g", "=", "tf", ".", "Graph", "(", ")", "\n", "with", "g", ".", "as_default", "(", ")", ":", "\n", "      ", "tf", ".", "set_random_seed", "(", "0", ")", "\n", "tf_inputs", "=", "tf", ".", "constant", "(", "self", ".", "_inputs", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "tf_labels", "=", "tf", ".", "constant", "(", "self", ".", "_labels", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "\n", "model_fn", "=", "LogisticClassifier", "\n", "clone_args", "=", "(", "tf_inputs", ",", "tf_labels", ")", "\n", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_clones", "=", "1", ")", "\n", "\n", "self", ".", "assertEqual", "(", "slim", ".", "get_variables", "(", ")", ",", "[", "]", ")", "\n", "clones", "=", "model_deploy", ".", "create_clones", "(", "deploy_config", ",", "model_fn", ",", "clone_args", ")", "\n", "clone", "=", "clones", "[", "0", "]", "\n", "self", ".", "assertEqual", "(", "len", "(", "slim", ".", "get_variables", "(", ")", ")", ",", "2", ")", "\n", "for", "v", "in", "slim", ".", "get_variables", "(", ")", ":", "\n", "        ", "self", ".", "assertDeviceEqual", "(", "v", ".", "device", ",", "'CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "v", ".", "value", "(", ")", ".", "device", ",", "'CPU:0'", ")", "\n", "", "self", ".", "assertEqual", "(", "clone", ".", "outputs", ".", "op", ".", "name", ",", "\n", "'LogisticClassifier/fully_connected/Sigmoid'", ")", "\n", "self", ".", "assertEqual", "(", "clone", ".", "scope", ",", "''", ")", "\n", "self", ".", "assertDeviceEqual", "(", "clone", ".", "device", ",", "''", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "slim", ".", "losses", ".", "get_losses", "(", ")", ")", ",", "1", ")", "\n", "update_ops", "=", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "UPDATE_OPS", ")", "\n", "self", ".", "assertEqual", "(", "update_ops", ",", "[", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.CreatecloneTest.testCreateSingleclone": [[209, 234], ["tensorflow.Graph", "tensorflow.Graph.as_default", "tensorflow.set_random_seed", "tensorflow.constant", "tensorflow.constant", "deployment.model_deploy.DeploymentConfig", "model_deploy_test.CreatecloneTest.assertEqual", "deployment.model_deploy.create_clones", "model_deploy_test.CreatecloneTest.assertEqual", "slim.get_variables", "model_deploy_test.CreatecloneTest.assertEqual", "model_deploy_test.CreatecloneTest.assertEqual", "model_deploy_test.CreatecloneTest.assertDeviceEqual", "model_deploy_test.CreatecloneTest.assertEqual", "tensorflow.get_collection", "model_deploy_test.CreatecloneTest.assertEqual", "slim.get_variables", "len", "model_deploy_test.CreatecloneTest.assertDeviceEqual", "model_deploy_test.CreatecloneTest.assertDeviceEqual", "len", "len", "slim.get_variables", "slim.losses.get_losses", "v.value"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.create_clones"], ["", "", "def", "testCreateSingleclone", "(", "self", ")", ":", "\n", "    ", "g", "=", "tf", ".", "Graph", "(", ")", "\n", "with", "g", ".", "as_default", "(", ")", ":", "\n", "      ", "tf", ".", "set_random_seed", "(", "0", ")", "\n", "tf_inputs", "=", "tf", ".", "constant", "(", "self", ".", "_inputs", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "tf_labels", "=", "tf", ".", "constant", "(", "self", ".", "_labels", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "\n", "model_fn", "=", "BatchNormClassifier", "\n", "clone_args", "=", "(", "tf_inputs", ",", "tf_labels", ")", "\n", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_clones", "=", "1", ")", "\n", "\n", "self", ".", "assertEqual", "(", "slim", ".", "get_variables", "(", ")", ",", "[", "]", ")", "\n", "clones", "=", "model_deploy", ".", "create_clones", "(", "deploy_config", ",", "model_fn", ",", "clone_args", ")", "\n", "clone", "=", "clones", "[", "0", "]", "\n", "self", ".", "assertEqual", "(", "len", "(", "slim", ".", "get_variables", "(", ")", ")", ",", "5", ")", "\n", "for", "v", "in", "slim", ".", "get_variables", "(", ")", ":", "\n", "        ", "self", ".", "assertDeviceEqual", "(", "v", ".", "device", ",", "'CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "v", ".", "value", "(", ")", ".", "device", ",", "'CPU:0'", ")", "\n", "", "self", ".", "assertEqual", "(", "clone", ".", "outputs", ".", "op", ".", "name", ",", "\n", "'BatchNormClassifier/fully_connected/Sigmoid'", ")", "\n", "self", ".", "assertEqual", "(", "clone", ".", "scope", ",", "''", ")", "\n", "self", ".", "assertDeviceEqual", "(", "clone", ".", "device", ",", "''", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "slim", ".", "losses", ".", "get_losses", "(", ")", ")", ",", "1", ")", "\n", "update_ops", "=", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "UPDATE_OPS", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "update_ops", ")", ",", "2", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.CreatecloneTest.testCreateMulticlone": [[235, 262], ["tensorflow.Graph", "tensorflow.Graph.as_default", "tensorflow.set_random_seed", "tensorflow.constant", "tensorflow.constant", "deployment.model_deploy.DeploymentConfig", "model_deploy_test.CreatecloneTest.assertEqual", "deployment.model_deploy.create_clones", "model_deploy_test.CreatecloneTest.assertEqual", "slim.get_variables", "model_deploy_test.CreatecloneTest.assertEqual", "enumerate", "slim.get_variables", "len", "model_deploy_test.CreatecloneTest.assertDeviceEqual", "model_deploy_test.CreatecloneTest.assertDeviceEqual", "len", "model_deploy_test.CreatecloneTest.assertEqual", "tensorflow.get_collection", "model_deploy_test.CreatecloneTest.assertEqual", "model_deploy_test.CreatecloneTest.assertEqual", "model_deploy_test.CreatecloneTest.assertDeviceEqual", "slim.get_variables", "len", "v.value"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.create_clones"], ["", "", "def", "testCreateMulticlone", "(", "self", ")", ":", "\n", "    ", "g", "=", "tf", ".", "Graph", "(", ")", "\n", "with", "g", ".", "as_default", "(", ")", ":", "\n", "      ", "tf", ".", "set_random_seed", "(", "0", ")", "\n", "tf_inputs", "=", "tf", ".", "constant", "(", "self", ".", "_inputs", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "tf_labels", "=", "tf", ".", "constant", "(", "self", ".", "_labels", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "\n", "model_fn", "=", "BatchNormClassifier", "\n", "clone_args", "=", "(", "tf_inputs", ",", "tf_labels", ")", "\n", "num_clones", "=", "4", "\n", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_clones", "=", "num_clones", ")", "\n", "\n", "self", ".", "assertEqual", "(", "slim", ".", "get_variables", "(", ")", ",", "[", "]", ")", "\n", "clones", "=", "model_deploy", ".", "create_clones", "(", "deploy_config", ",", "model_fn", ",", "clone_args", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "slim", ".", "get_variables", "(", ")", ")", ",", "5", ")", "\n", "for", "v", "in", "slim", ".", "get_variables", "(", ")", ":", "\n", "        ", "self", ".", "assertDeviceEqual", "(", "v", ".", "device", ",", "'CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "v", ".", "value", "(", ")", ".", "device", ",", "'CPU:0'", ")", "\n", "", "self", ".", "assertEqual", "(", "len", "(", "clones", ")", ",", "num_clones", ")", "\n", "for", "i", ",", "clone", "in", "enumerate", "(", "clones", ")", ":", "\n", "        ", "self", ".", "assertEqual", "(", "\n", "clone", ".", "outputs", ".", "op", ".", "name", ",", "\n", "'clone_%d/BatchNormClassifier/fully_connected/Sigmoid'", "%", "i", ")", "\n", "update_ops", "=", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "UPDATE_OPS", ",", "clone", ".", "scope", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "update_ops", ")", ",", "2", ")", "\n", "self", ".", "assertEqual", "(", "clone", ".", "scope", ",", "'clone_%d/'", "%", "i", ")", "\n", "self", ".", "assertDeviceEqual", "(", "clone", ".", "device", ",", "'GPU:%d'", "%", "i", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.CreatecloneTest.testCreateOnecloneWithPS": [[263, 287], ["tensorflow.Graph", "tensorflow.Graph.as_default", "tensorflow.set_random_seed", "tensorflow.constant", "tensorflow.constant", "deployment.model_deploy.DeploymentConfig", "model_deploy_test.CreatecloneTest.assertEqual", "deployment.model_deploy.create_clones", "model_deploy_test.CreatecloneTest.assertEqual", "model_deploy_test.CreatecloneTest.assertEqual", "model_deploy_test.CreatecloneTest.assertDeviceEqual", "model_deploy_test.CreatecloneTest.assertEqual", "model_deploy_test.CreatecloneTest.assertEqual", "slim.get_variables", "slim.get_variables", "len", "len", "model_deploy_test.CreatecloneTest.assertDeviceEqual", "model_deploy_test.CreatecloneTest.assertDeviceEqual", "slim.get_variables", "v.value"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.create_clones"], ["", "", "", "def", "testCreateOnecloneWithPS", "(", "self", ")", ":", "\n", "    ", "g", "=", "tf", ".", "Graph", "(", ")", "\n", "with", "g", ".", "as_default", "(", ")", ":", "\n", "      ", "tf", ".", "set_random_seed", "(", "0", ")", "\n", "tf_inputs", "=", "tf", ".", "constant", "(", "self", ".", "_inputs", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "tf_labels", "=", "tf", ".", "constant", "(", "self", ".", "_labels", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "\n", "model_fn", "=", "BatchNormClassifier", "\n", "clone_args", "=", "(", "tf_inputs", ",", "tf_labels", ")", "\n", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_clones", "=", "1", ",", "\n", "num_ps_tasks", "=", "1", ")", "\n", "\n", "self", ".", "assertEqual", "(", "slim", ".", "get_variables", "(", ")", ",", "[", "]", ")", "\n", "clones", "=", "model_deploy", ".", "create_clones", "(", "deploy_config", ",", "model_fn", ",", "clone_args", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "clones", ")", ",", "1", ")", "\n", "clone", "=", "clones", "[", "0", "]", "\n", "self", ".", "assertEqual", "(", "clone", ".", "outputs", ".", "op", ".", "name", ",", "\n", "'BatchNormClassifier/fully_connected/Sigmoid'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "clone", ".", "device", ",", "'/job:worker'", ")", "\n", "self", ".", "assertEqual", "(", "clone", ".", "scope", ",", "''", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "slim", ".", "get_variables", "(", ")", ")", ",", "5", ")", "\n", "for", "v", "in", "slim", ".", "get_variables", "(", ")", ":", "\n", "        ", "self", ".", "assertDeviceEqual", "(", "v", ".", "device", ",", "'/job:ps/task:0/CPU:0'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "v", ".", "device", ",", "v", ".", "value", "(", ")", ".", "device", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.CreatecloneTest.testCreateMulticloneWithPS": [[288, 314], ["tensorflow.Graph", "tensorflow.Graph.as_default", "tensorflow.set_random_seed", "tensorflow.constant", "tensorflow.constant", "deployment.model_deploy.DeploymentConfig", "model_deploy_test.CreatecloneTest.assertEqual", "deployment.model_deploy.create_clones", "model_deploy_test.CreatecloneTest.assertEqual", "enumerate", "model_deploy_test.CreatecloneTest.assertEqual", "enumerate", "slim.get_variables", "len", "slim.get_variables", "model_deploy_test.CreatecloneTest.assertDeviceEqual", "model_deploy_test.CreatecloneTest.assertDeviceEqual", "len", "model_deploy_test.CreatecloneTest.assertEqual", "model_deploy_test.CreatecloneTest.assertEqual", "model_deploy_test.CreatecloneTest.assertDeviceEqual", "slim.get_variables", "v.value"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.create_clones"], ["", "", "", "def", "testCreateMulticloneWithPS", "(", "self", ")", ":", "\n", "    ", "g", "=", "tf", ".", "Graph", "(", ")", "\n", "with", "g", ".", "as_default", "(", ")", ":", "\n", "      ", "tf", ".", "set_random_seed", "(", "0", ")", "\n", "tf_inputs", "=", "tf", ".", "constant", "(", "self", ".", "_inputs", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "tf_labels", "=", "tf", ".", "constant", "(", "self", ".", "_labels", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "\n", "model_fn", "=", "BatchNormClassifier", "\n", "clone_args", "=", "(", "tf_inputs", ",", "tf_labels", ")", "\n", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_clones", "=", "2", ",", "\n", "num_ps_tasks", "=", "2", ")", "\n", "\n", "self", ".", "assertEqual", "(", "slim", ".", "get_variables", "(", ")", ",", "[", "]", ")", "\n", "clones", "=", "model_deploy", ".", "create_clones", "(", "deploy_config", ",", "model_fn", ",", "clone_args", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "slim", ".", "get_variables", "(", ")", ")", ",", "5", ")", "\n", "for", "i", ",", "v", "in", "enumerate", "(", "slim", ".", "get_variables", "(", ")", ")", ":", "\n", "        ", "t", "=", "i", "%", "2", "\n", "self", ".", "assertDeviceEqual", "(", "v", ".", "device", ",", "'/job:ps/task:%d/device:CPU:0'", "%", "t", ")", "\n", "self", ".", "assertDeviceEqual", "(", "v", ".", "device", ",", "v", ".", "value", "(", ")", ".", "device", ")", "\n", "", "self", ".", "assertEqual", "(", "len", "(", "clones", ")", ",", "2", ")", "\n", "for", "i", ",", "clone", "in", "enumerate", "(", "clones", ")", ":", "\n", "        ", "self", ".", "assertEqual", "(", "\n", "clone", ".", "outputs", ".", "op", ".", "name", ",", "\n", "'clone_%d/BatchNormClassifier/fully_connected/Sigmoid'", "%", "i", ")", "\n", "self", ".", "assertEqual", "(", "clone", ".", "scope", ",", "'clone_%d/'", "%", "i", ")", "\n", "self", ".", "assertDeviceEqual", "(", "clone", ".", "device", ",", "'/job:worker/device:GPU:%d'", "%", "i", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.OptimizeclonesTest.setUp": [[318, 329], ["numpy.random.seed", "numpy.zeros", "numpy.random.randint().astype", "model_deploy_test.OptimizeclonesTest.get_temp_dir", "range", "int", "numpy.random.randint", "numpy.random.randint"], "methods", ["None"], ["  ", "def", "setUp", "(", "self", ")", ":", "\n", "# Create an easy training set:", "\n", "    ", "np", ".", "random", ".", "seed", "(", "0", ")", "\n", "\n", "self", ".", "_inputs", "=", "np", ".", "zeros", "(", "(", "16", ",", "4", ")", ")", "\n", "self", ".", "_labels", "=", "np", ".", "random", ".", "randint", "(", "0", ",", "2", ",", "size", "=", "(", "16", ",", "1", ")", ")", ".", "astype", "(", "np", ".", "float32", ")", "\n", "self", ".", "_logdir", "=", "self", ".", "get_temp_dir", "(", ")", "\n", "\n", "for", "i", "in", "range", "(", "16", ")", ":", "\n", "      ", "j", "=", "int", "(", "2", "*", "self", ".", "_labels", "[", "i", "]", "+", "np", ".", "random", ".", "randint", "(", "0", ",", "2", ")", ")", "\n", "self", ".", "_inputs", "[", "i", ",", "j", "]", "=", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.OptimizeclonesTest.testCreateLogisticClassifier": [[330, 355], ["tensorflow.Graph", "tensorflow.Graph.as_default", "tensorflow.set_random_seed", "tensorflow.constant", "tensorflow.constant", "deployment.model_deploy.DeploymentConfig", "model_deploy_test.OptimizeclonesTest.assertEqual", "deployment.model_deploy.create_clones", "model_deploy_test.OptimizeclonesTest.assertEqual", "tensorflow.get_collection", "model_deploy_test.OptimizeclonesTest.assertEqual", "tensorflow.train.GradientDescentOptimizer", "deployment.model_deploy.optimize_clones", "model_deploy_test.OptimizeclonesTest.assertEqual", "model_deploy_test.OptimizeclonesTest.assertEqual", "slim.get_variables", "len", "len", "len", "model_deploy_test.OptimizeclonesTest.assertDeviceEqual", "model_deploy_test.OptimizeclonesTest.assertDeviceEqual", "slim.get_variables", "tensorflow.trainable_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.create_clones", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.optimize_clones"], ["", "", "def", "testCreateLogisticClassifier", "(", "self", ")", ":", "\n", "    ", "g", "=", "tf", ".", "Graph", "(", ")", "\n", "with", "g", ".", "as_default", "(", ")", ":", "\n", "      ", "tf", ".", "set_random_seed", "(", "0", ")", "\n", "tf_inputs", "=", "tf", ".", "constant", "(", "self", ".", "_inputs", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "tf_labels", "=", "tf", ".", "constant", "(", "self", ".", "_labels", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "\n", "model_fn", "=", "LogisticClassifier", "\n", "clone_args", "=", "(", "tf_inputs", ",", "tf_labels", ")", "\n", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_clones", "=", "1", ")", "\n", "\n", "self", ".", "assertEqual", "(", "slim", ".", "get_variables", "(", ")", ",", "[", "]", ")", "\n", "clones", "=", "model_deploy", ".", "create_clones", "(", "deploy_config", ",", "model_fn", ",", "clone_args", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "slim", ".", "get_variables", "(", ")", ")", ",", "2", ")", "\n", "update_ops", "=", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "UPDATE_OPS", ")", "\n", "self", ".", "assertEqual", "(", "update_ops", ",", "[", "]", ")", "\n", "\n", "optimizer", "=", "tf", ".", "train", ".", "GradientDescentOptimizer", "(", "learning_rate", "=", "1.0", ")", "\n", "total_loss", ",", "grads_and_vars", "=", "model_deploy", ".", "optimize_clones", "(", "clones", ",", "\n", "optimizer", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "grads_and_vars", ")", ",", "len", "(", "tf", ".", "trainable_variables", "(", ")", ")", ")", "\n", "self", ".", "assertEqual", "(", "total_loss", ".", "op", ".", "name", ",", "'total_loss'", ")", "\n", "for", "g", ",", "v", "in", "grads_and_vars", ":", "\n", "        ", "self", ".", "assertDeviceEqual", "(", "g", ".", "device", ",", "''", ")", "\n", "self", ".", "assertDeviceEqual", "(", "v", ".", "device", ",", "'CPU:0'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.OptimizeclonesTest.testCreateSingleclone": [[356, 381], ["tensorflow.Graph", "tensorflow.Graph.as_default", "tensorflow.set_random_seed", "tensorflow.constant", "tensorflow.constant", "deployment.model_deploy.DeploymentConfig", "model_deploy_test.OptimizeclonesTest.assertEqual", "deployment.model_deploy.create_clones", "model_deploy_test.OptimizeclonesTest.assertEqual", "tensorflow.get_collection", "model_deploy_test.OptimizeclonesTest.assertEqual", "tensorflow.train.GradientDescentOptimizer", "deployment.model_deploy.optimize_clones", "model_deploy_test.OptimizeclonesTest.assertEqual", "model_deploy_test.OptimizeclonesTest.assertEqual", "slim.get_variables", "len", "len", "len", "len", "model_deploy_test.OptimizeclonesTest.assertDeviceEqual", "model_deploy_test.OptimizeclonesTest.assertDeviceEqual", "slim.get_variables", "tensorflow.trainable_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.create_clones", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.optimize_clones"], ["", "", "", "def", "testCreateSingleclone", "(", "self", ")", ":", "\n", "    ", "g", "=", "tf", ".", "Graph", "(", ")", "\n", "with", "g", ".", "as_default", "(", ")", ":", "\n", "      ", "tf", ".", "set_random_seed", "(", "0", ")", "\n", "tf_inputs", "=", "tf", ".", "constant", "(", "self", ".", "_inputs", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "tf_labels", "=", "tf", ".", "constant", "(", "self", ".", "_labels", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "\n", "model_fn", "=", "BatchNormClassifier", "\n", "clone_args", "=", "(", "tf_inputs", ",", "tf_labels", ")", "\n", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_clones", "=", "1", ")", "\n", "\n", "self", ".", "assertEqual", "(", "slim", ".", "get_variables", "(", ")", ",", "[", "]", ")", "\n", "clones", "=", "model_deploy", ".", "create_clones", "(", "deploy_config", ",", "model_fn", ",", "clone_args", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "slim", ".", "get_variables", "(", ")", ")", ",", "5", ")", "\n", "update_ops", "=", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "UPDATE_OPS", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "update_ops", ")", ",", "2", ")", "\n", "\n", "optimizer", "=", "tf", ".", "train", ".", "GradientDescentOptimizer", "(", "learning_rate", "=", "1.0", ")", "\n", "total_loss", ",", "grads_and_vars", "=", "model_deploy", ".", "optimize_clones", "(", "clones", ",", "\n", "optimizer", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "grads_and_vars", ")", ",", "len", "(", "tf", ".", "trainable_variables", "(", ")", ")", ")", "\n", "self", ".", "assertEqual", "(", "total_loss", ".", "op", ".", "name", ",", "'total_loss'", ")", "\n", "for", "g", ",", "v", "in", "grads_and_vars", ":", "\n", "        ", "self", ".", "assertDeviceEqual", "(", "g", ".", "device", ",", "''", ")", "\n", "self", ".", "assertDeviceEqual", "(", "v", ".", "device", ",", "'CPU:0'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.OptimizeclonesTest.testCreateMulticlone": [[382, 408], ["tensorflow.Graph", "tensorflow.Graph.as_default", "tensorflow.set_random_seed", "tensorflow.constant", "tensorflow.constant", "deployment.model_deploy.DeploymentConfig", "model_deploy_test.OptimizeclonesTest.assertEqual", "deployment.model_deploy.create_clones", "model_deploy_test.OptimizeclonesTest.assertEqual", "tensorflow.get_collection", "model_deploy_test.OptimizeclonesTest.assertEqual", "tensorflow.train.GradientDescentOptimizer", "deployment.model_deploy.optimize_clones", "model_deploy_test.OptimizeclonesTest.assertEqual", "model_deploy_test.OptimizeclonesTest.assertEqual", "slim.get_variables", "len", "len", "len", "len", "model_deploy_test.OptimizeclonesTest.assertDeviceEqual", "model_deploy_test.OptimizeclonesTest.assertDeviceEqual", "slim.get_variables", "tensorflow.trainable_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.create_clones", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.optimize_clones"], ["", "", "", "def", "testCreateMulticlone", "(", "self", ")", ":", "\n", "    ", "g", "=", "tf", ".", "Graph", "(", ")", "\n", "with", "g", ".", "as_default", "(", ")", ":", "\n", "      ", "tf", ".", "set_random_seed", "(", "0", ")", "\n", "tf_inputs", "=", "tf", ".", "constant", "(", "self", ".", "_inputs", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "tf_labels", "=", "tf", ".", "constant", "(", "self", ".", "_labels", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "\n", "model_fn", "=", "BatchNormClassifier", "\n", "clone_args", "=", "(", "tf_inputs", ",", "tf_labels", ")", "\n", "num_clones", "=", "4", "\n", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_clones", "=", "num_clones", ")", "\n", "\n", "self", ".", "assertEqual", "(", "slim", ".", "get_variables", "(", ")", ",", "[", "]", ")", "\n", "clones", "=", "model_deploy", ".", "create_clones", "(", "deploy_config", ",", "model_fn", ",", "clone_args", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "slim", ".", "get_variables", "(", ")", ")", ",", "5", ")", "\n", "update_ops", "=", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "UPDATE_OPS", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "update_ops", ")", ",", "num_clones", "*", "2", ")", "\n", "\n", "optimizer", "=", "tf", ".", "train", ".", "GradientDescentOptimizer", "(", "learning_rate", "=", "1.0", ")", "\n", "total_loss", ",", "grads_and_vars", "=", "model_deploy", ".", "optimize_clones", "(", "clones", ",", "\n", "optimizer", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "grads_and_vars", ")", ",", "len", "(", "tf", ".", "trainable_variables", "(", ")", ")", ")", "\n", "self", ".", "assertEqual", "(", "total_loss", ".", "op", ".", "name", ",", "'total_loss'", ")", "\n", "for", "g", ",", "v", "in", "grads_and_vars", ":", "\n", "        ", "self", ".", "assertDeviceEqual", "(", "g", ".", "device", ",", "''", ")", "\n", "self", ".", "assertDeviceEqual", "(", "v", ".", "device", ",", "'CPU:0'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.OptimizeclonesTest.testCreateMulticloneCPU": [[409, 436], ["tensorflow.Graph", "tensorflow.Graph.as_default", "tensorflow.set_random_seed", "tensorflow.constant", "tensorflow.constant", "deployment.model_deploy.DeploymentConfig", "model_deploy_test.OptimizeclonesTest.assertEqual", "deployment.model_deploy.create_clones", "model_deploy_test.OptimizeclonesTest.assertEqual", "tensorflow.get_collection", "model_deploy_test.OptimizeclonesTest.assertEqual", "tensorflow.train.GradientDescentOptimizer", "deployment.model_deploy.optimize_clones", "model_deploy_test.OptimizeclonesTest.assertEqual", "model_deploy_test.OptimizeclonesTest.assertEqual", "slim.get_variables", "len", "len", "len", "len", "model_deploy_test.OptimizeclonesTest.assertDeviceEqual", "model_deploy_test.OptimizeclonesTest.assertDeviceEqual", "slim.get_variables", "tensorflow.trainable_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.create_clones", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.optimize_clones"], ["", "", "", "def", "testCreateMulticloneCPU", "(", "self", ")", ":", "\n", "    ", "g", "=", "tf", ".", "Graph", "(", ")", "\n", "with", "g", ".", "as_default", "(", ")", ":", "\n", "      ", "tf", ".", "set_random_seed", "(", "0", ")", "\n", "tf_inputs", "=", "tf", ".", "constant", "(", "self", ".", "_inputs", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "tf_labels", "=", "tf", ".", "constant", "(", "self", ".", "_labels", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "\n", "model_fn", "=", "BatchNormClassifier", "\n", "model_args", "=", "(", "tf_inputs", ",", "tf_labels", ")", "\n", "num_clones", "=", "4", "\n", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_clones", "=", "num_clones", ",", "\n", "clone_on_cpu", "=", "True", ")", "\n", "\n", "self", ".", "assertEqual", "(", "slim", ".", "get_variables", "(", ")", ",", "[", "]", ")", "\n", "clones", "=", "model_deploy", ".", "create_clones", "(", "deploy_config", ",", "model_fn", ",", "model_args", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "slim", ".", "get_variables", "(", ")", ")", ",", "5", ")", "\n", "update_ops", "=", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "UPDATE_OPS", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "update_ops", ")", ",", "num_clones", "*", "2", ")", "\n", "\n", "optimizer", "=", "tf", ".", "train", ".", "GradientDescentOptimizer", "(", "learning_rate", "=", "1.0", ")", "\n", "total_loss", ",", "grads_and_vars", "=", "model_deploy", ".", "optimize_clones", "(", "clones", ",", "\n", "optimizer", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "grads_and_vars", ")", ",", "len", "(", "tf", ".", "trainable_variables", "(", ")", ")", ")", "\n", "self", ".", "assertEqual", "(", "total_loss", ".", "op", ".", "name", ",", "'total_loss'", ")", "\n", "for", "g", ",", "v", "in", "grads_and_vars", ":", "\n", "        ", "self", ".", "assertDeviceEqual", "(", "g", ".", "device", ",", "''", ")", "\n", "self", ".", "assertDeviceEqual", "(", "v", ".", "device", ",", "'CPU:0'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.OptimizeclonesTest.testCreateOnecloneWithPS": [[437, 463], ["tensorflow.Graph", "tensorflow.Graph.as_default", "tensorflow.set_random_seed", "tensorflow.constant", "tensorflow.constant", "deployment.model_deploy.DeploymentConfig", "model_deploy_test.OptimizeclonesTest.assertEqual", "deployment.model_deploy.create_clones", "model_deploy_test.OptimizeclonesTest.assertEqual", "tensorflow.get_collection", "model_deploy_test.OptimizeclonesTest.assertEqual", "tensorflow.train.GradientDescentOptimizer", "deployment.model_deploy.optimize_clones", "model_deploy_test.OptimizeclonesTest.assertEqual", "model_deploy_test.OptimizeclonesTest.assertEqual", "slim.get_variables", "len", "len", "len", "len", "model_deploy_test.OptimizeclonesTest.assertDeviceEqual", "model_deploy_test.OptimizeclonesTest.assertDeviceEqual", "slim.get_variables", "tensorflow.trainable_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.create_clones", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.optimize_clones"], ["", "", "", "def", "testCreateOnecloneWithPS", "(", "self", ")", ":", "\n", "    ", "g", "=", "tf", ".", "Graph", "(", ")", "\n", "with", "g", ".", "as_default", "(", ")", ":", "\n", "      ", "tf", ".", "set_random_seed", "(", "0", ")", "\n", "tf_inputs", "=", "tf", ".", "constant", "(", "self", ".", "_inputs", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "tf_labels", "=", "tf", ".", "constant", "(", "self", ".", "_labels", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "\n", "model_fn", "=", "BatchNormClassifier", "\n", "model_args", "=", "(", "tf_inputs", ",", "tf_labels", ")", "\n", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_clones", "=", "1", ",", "\n", "num_ps_tasks", "=", "1", ")", "\n", "\n", "self", ".", "assertEqual", "(", "slim", ".", "get_variables", "(", ")", ",", "[", "]", ")", "\n", "clones", "=", "model_deploy", ".", "create_clones", "(", "deploy_config", ",", "model_fn", ",", "model_args", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "slim", ".", "get_variables", "(", ")", ")", ",", "5", ")", "\n", "update_ops", "=", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "UPDATE_OPS", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "update_ops", ")", ",", "2", ")", "\n", "\n", "optimizer", "=", "tf", ".", "train", ".", "GradientDescentOptimizer", "(", "learning_rate", "=", "1.0", ")", "\n", "total_loss", ",", "grads_and_vars", "=", "model_deploy", ".", "optimize_clones", "(", "clones", ",", "\n", "optimizer", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "grads_and_vars", ")", ",", "len", "(", "tf", ".", "trainable_variables", "(", ")", ")", ")", "\n", "self", ".", "assertEqual", "(", "total_loss", ".", "op", ".", "name", ",", "'total_loss'", ")", "\n", "for", "g", ",", "v", "in", "grads_and_vars", ":", "\n", "        ", "self", ".", "assertDeviceEqual", "(", "g", ".", "device", ",", "'/job:worker'", ")", "\n", "self", ".", "assertDeviceEqual", "(", "v", ".", "device", ",", "'/job:ps/task:0/CPU:0'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.DeployTest.setUp": [[467, 478], ["numpy.random.seed", "numpy.zeros", "numpy.random.randint().astype", "model_deploy_test.DeployTest.get_temp_dir", "range", "int", "numpy.random.randint", "numpy.random.randint"], "methods", ["None"], ["  ", "def", "setUp", "(", "self", ")", ":", "\n", "# Create an easy training set:", "\n", "    ", "np", ".", "random", ".", "seed", "(", "0", ")", "\n", "\n", "self", ".", "_inputs", "=", "np", ".", "zeros", "(", "(", "16", ",", "4", ")", ")", "\n", "self", ".", "_labels", "=", "np", ".", "random", ".", "randint", "(", "0", ",", "2", ",", "size", "=", "(", "16", ",", "1", ")", ")", ".", "astype", "(", "np", ".", "float32", ")", "\n", "self", ".", "_logdir", "=", "self", ".", "get_temp_dir", "(", ")", "\n", "\n", "for", "i", "in", "range", "(", "16", ")", ":", "\n", "      ", "j", "=", "int", "(", "2", "*", "self", ".", "_labels", "[", "i", "]", "+", "np", ".", "random", ".", "randint", "(", "0", ",", "2", ")", ")", "\n", "self", ".", "_inputs", "[", "i", ",", "j", "]", "=", "1", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.DeployTest.testLocalTrainOp": [[479, 525], ["tensorflow.Graph", "tensorflow.Graph.as_default", "tensorflow.set_random_seed", "tensorflow.constant", "tensorflow.constant", "deployment.model_deploy.DeploymentConfig", "tensorflow.train.GradientDescentOptimizer", "model_deploy_test.DeployTest.assertEqual", "deployment.model_deploy.deploy", "tensorflow.get_collection", "model_deploy_test.DeployTest.assertEqual", "model_deploy_test.DeployTest.assertEqual", "model_deploy_test.DeployTest.assertEqual", "model_deploy_test.DeployTest.assertEqual", "model_deploy_test.DeployTest.assertEqual", "slim.get_variables", "len", "len", "tensorflow.Session", "sess.run", "sess.run", "sess.run", "model_deploy_test.DeployTest.assertAllClose", "model_deploy_test.DeployTest.assertAllClose", "range", "sess.run", "model_deploy_test.DeployTest.assertLess", "sess.run", "model_deploy_test.DeployTest.assertAllClose", "model_deploy_test.DeployTest.assertAllClose", "tensorflow.initialize_all_variables", "tensorflow.contrib.framework.get_variables_by_name", "tensorflow.contrib.framework.get_variables_by_name", "sess.run"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.deploy", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testLocalTrainOp", "(", "self", ")", ":", "\n", "    ", "g", "=", "tf", ".", "Graph", "(", ")", "\n", "with", "g", ".", "as_default", "(", ")", ":", "\n", "      ", "tf", ".", "set_random_seed", "(", "0", ")", "\n", "tf_inputs", "=", "tf", ".", "constant", "(", "self", ".", "_inputs", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "tf_labels", "=", "tf", ".", "constant", "(", "self", ".", "_labels", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "\n", "model_fn", "=", "BatchNormClassifier", "\n", "model_args", "=", "(", "tf_inputs", ",", "tf_labels", ")", "\n", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_clones", "=", "2", ",", "\n", "clone_on_cpu", "=", "True", ")", "\n", "\n", "optimizer", "=", "tf", ".", "train", ".", "GradientDescentOptimizer", "(", "learning_rate", "=", "1.0", ")", "\n", "\n", "self", ".", "assertEqual", "(", "slim", ".", "get_variables", "(", ")", ",", "[", "]", ")", "\n", "model", "=", "model_deploy", ".", "deploy", "(", "deploy_config", ",", "model_fn", ",", "model_args", ",", "\n", "optimizer", "=", "optimizer", ")", "\n", "\n", "update_ops", "=", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "UPDATE_OPS", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "update_ops", ")", ",", "4", ")", "\n", "self", ".", "assertEqual", "(", "len", "(", "model", ".", "clones", ")", ",", "2", ")", "\n", "self", ".", "assertEqual", "(", "model", ".", "total_loss", ".", "op", ".", "name", ",", "'total_loss'", ")", "\n", "self", ".", "assertEqual", "(", "model", ".", "summary_op", ".", "op", ".", "name", ",", "'summary_op/summary_op'", ")", "\n", "self", ".", "assertEqual", "(", "model", ".", "train_op", ".", "op", ".", "name", ",", "'train_op'", ")", "\n", "\n", "with", "tf", ".", "Session", "(", ")", "as", "sess", ":", "\n", "        ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "moving_mean", "=", "tf", ".", "contrib", ".", "framework", ".", "get_variables_by_name", "(", "\n", "'moving_mean'", ")", "[", "0", "]", "\n", "moving_variance", "=", "tf", ".", "contrib", ".", "framework", ".", "get_variables_by_name", "(", "\n", "'moving_variance'", ")", "[", "0", "]", "\n", "initial_loss", "=", "sess", ".", "run", "(", "model", ".", "total_loss", ")", "\n", "initial_mean", ",", "initial_variance", "=", "sess", ".", "run", "(", "[", "moving_mean", ",", "\n", "moving_variance", "]", ")", "\n", "self", ".", "assertAllClose", "(", "initial_mean", ",", "[", "0.0", ",", "0.0", ",", "0.0", ",", "0.0", "]", ")", "\n", "self", ".", "assertAllClose", "(", "initial_variance", ",", "[", "1.0", ",", "1.0", ",", "1.0", ",", "1.0", "]", ")", "\n", "for", "_", "in", "range", "(", "10", ")", ":", "\n", "          ", "sess", ".", "run", "(", "model", ".", "train_op", ")", "\n", "", "final_loss", "=", "sess", ".", "run", "(", "model", ".", "total_loss", ")", "\n", "self", ".", "assertLess", "(", "final_loss", ",", "initial_loss", "/", "10.0", ")", "\n", "\n", "final_mean", ",", "final_variance", "=", "sess", ".", "run", "(", "[", "moving_mean", ",", "\n", "moving_variance", "]", ")", "\n", "self", ".", "assertAllClose", "(", "final_mean", ",", "[", "0.125", ",", "0.25", ",", "0.375", ",", "0.25", "]", ")", "\n", "self", ".", "assertAllClose", "(", "final_variance", ",", "[", "0.109375", ",", "0.1875", ",", "\n", "0.234375", ",", "0.1875", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.DeployTest.testNoSummariesOnGPU": [[526, 544], ["tensorflow.Graph().as_default", "deployment.model_deploy.DeploymentConfig", "deployment.model_deploy.deploy", "model_deploy_test.DeployTest.assertTrue", "tensorflow.constant", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.contrib.layers.fully_connected", "model_deploy_test.DeployTest.assertEqual", "tensorflow.Graph", "tensorflow.train.GradientDescentOptimizer"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.deploy"], ["", "", "", "def", "testNoSummariesOnGPU", "(", "self", ")", ":", "\n", "    ", "with", "tf", ".", "Graph", "(", ")", ".", "as_default", "(", ")", ":", "\n", "      ", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_clones", "=", "2", ")", "\n", "\n", "# clone function creates a fully_connected layer with a regularizer loss.", "\n", "def", "ModelFn", "(", ")", ":", "\n", "        ", "inputs", "=", "tf", ".", "constant", "(", "1.0", ",", "shape", "=", "(", "10", ",", "20", ")", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "reg", "=", "tf", ".", "contrib", ".", "layers", ".", "l2_regularizer", "(", "0.001", ")", "\n", "tf", ".", "contrib", ".", "layers", ".", "fully_connected", "(", "inputs", ",", "30", ",", "weights_regularizer", "=", "reg", ")", "\n", "\n", "", "model", "=", "model_deploy", ".", "deploy", "(", "\n", "deploy_config", ",", "ModelFn", ",", "\n", "optimizer", "=", "tf", ".", "train", ".", "GradientDescentOptimizer", "(", "1.0", ")", ")", "\n", "# The model summary op should have a few summary inputs and all of them", "\n", "# should be on the CPU.", "\n", "self", ".", "assertTrue", "(", "model", ".", "summary_op", ".", "op", ".", "inputs", ")", "\n", "for", "inp", "in", "model", ".", "summary_op", ".", "op", ".", "inputs", ":", "\n", "        ", "self", ".", "assertEqual", "(", "'/device:CPU:0'", ",", "inp", ".", "device", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.DeployTest.testNoSummariesOnGPUForEvals": [[545, 562], ["tensorflow.Graph().as_default", "deployment.model_deploy.DeploymentConfig", "deployment.model_deploy.deploy", "model_deploy_test.DeployTest.assertTrue", "tensorflow.constant", "tensorflow.contrib.layers.l2_regularizer", "tensorflow.contrib.layers.fully_connected", "model_deploy_test.DeployTest.assertEqual", "tensorflow.Graph"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.deploy"], ["", "", "", "def", "testNoSummariesOnGPUForEvals", "(", "self", ")", ":", "\n", "    ", "with", "tf", ".", "Graph", "(", ")", ".", "as_default", "(", ")", ":", "\n", "      ", "deploy_config", "=", "model_deploy", ".", "DeploymentConfig", "(", "num_clones", "=", "2", ")", "\n", "\n", "# clone function creates a fully_connected layer with a regularizer loss.", "\n", "def", "ModelFn", "(", ")", ":", "\n", "        ", "inputs", "=", "tf", ".", "constant", "(", "1.0", ",", "shape", "=", "(", "10", ",", "20", ")", ",", "dtype", "=", "tf", ".", "float32", ")", "\n", "reg", "=", "tf", ".", "contrib", ".", "layers", ".", "l2_regularizer", "(", "0.001", ")", "\n", "tf", ".", "contrib", ".", "layers", ".", "fully_connected", "(", "inputs", ",", "30", ",", "weights_regularizer", "=", "reg", ")", "\n", "\n", "# No optimizer here, it's an eval.", "\n", "", "model", "=", "model_deploy", ".", "deploy", "(", "deploy_config", ",", "ModelFn", ")", "\n", "# The model summary op should have a few summary inputs and all of them", "\n", "# should be on the CPU.", "\n", "self", ".", "assertTrue", "(", "model", ".", "summary_op", ".", "op", ".", "inputs", ")", "\n", "for", "inp", "in", "model", ".", "summary_op", ".", "op", ".", "inputs", ":", "\n", "        ", "self", ".", "assertEqual", "(", "'/device:CPU:0'", ",", "inp", ".", "device", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.LogisticClassifier": [[149, 156], ["tensorflow.variable_scope", "slim.fully_connected", "slim.losses.log_loss"], "function", ["None"], ["", "", "def", "LogisticClassifier", "(", "inputs", ",", "labels", ",", "scope", "=", "None", ",", "reuse", "=", "None", ")", ":", "\n", "  ", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'LogisticClassifier'", ",", "[", "inputs", ",", "labels", "]", ",", "\n", "reuse", "=", "reuse", ")", ":", "\n", "    ", "predictions", "=", "slim", ".", "fully_connected", "(", "inputs", ",", "1", ",", "activation_fn", "=", "tf", ".", "sigmoid", ",", "\n", "scope", "=", "'fully_connected'", ")", "\n", "slim", ".", "losses", ".", "log_loss", "(", "predictions", ",", "labels", ")", "\n", "return", "predictions", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy_test.BatchNormClassifier": [[158, 167], ["tensorflow.variable_scope", "slim.batch_norm", "slim.fully_connected", "slim.losses.log_loss"], "function", ["None"], ["", "", "def", "BatchNormClassifier", "(", "inputs", ",", "labels", ",", "scope", "=", "None", ",", "reuse", "=", "None", ")", ":", "\n", "  ", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'BatchNormClassifier'", ",", "[", "inputs", ",", "labels", "]", ",", "\n", "reuse", "=", "reuse", ")", ":", "\n", "    ", "inputs", "=", "slim", ".", "batch_norm", "(", "inputs", ",", "decay", "=", "0.1", ")", "\n", "predictions", "=", "slim", ".", "fully_connected", "(", "inputs", ",", "1", ",", "\n", "activation_fn", "=", "tf", ".", "sigmoid", ",", "\n", "scope", "=", "'fully_connected'", ")", "\n", "slim", ".", "losses", ".", "log_loss", "(", "predictions", ",", "labels", ")", "\n", "return", "predictions", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.__init__": [[485, 536], ["ValueError", "ValueError", "ValueError", "ValueError"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "\n", "num_clones", "=", "1", ",", "\n", "clone_on_cpu", "=", "False", ",", "\n", "replica_id", "=", "0", ",", "\n", "num_replicas", "=", "1", ",", "\n", "num_ps_tasks", "=", "0", ",", "\n", "worker_job_name", "=", "'worker'", ",", "\n", "ps_job_name", "=", "'ps'", ")", ":", "\n", "    ", "\"\"\"Create a DeploymentConfig.\n\n    The config describes how to deploy a model across multiple clones and\n    replicas.  The model will be replicated `num_clones` times in each replica.\n    If `clone_on_cpu` is True, each clone will placed on CPU.\n\n    If `num_replicas` is 1, the model is deployed via a single process.  In that\n    case `worker_device`, `num_ps_tasks`, and `ps_device` are ignored.\n\n    If `num_replicas` is greater than 1, then `worker_device` and `ps_device`\n    must specify TensorFlow devices for the `worker` and `ps` jobs and\n    `num_ps_tasks` must be positive.\n\n    Args:\n      num_clones: Number of model clones to deploy in each replica.\n      clone_on_cpu: If True clones would be placed on CPU.\n      replica_id: Integer.  Index of the replica for which the model is\n        deployed.  Usually 0 for the chief replica.\n      num_replicas: Number of replicas to use.\n      num_ps_tasks: Number of tasks for the `ps` job. 0 to not use replicas.\n      worker_job_name: A name for the worker job.\n      ps_job_name: A name for the parameter server job.\n\n    Raises:\n      ValueError: If the arguments are invalid.\n    \"\"\"", "\n", "if", "num_replicas", ">", "1", ":", "\n", "      ", "if", "num_ps_tasks", "<", "1", ":", "\n", "        ", "raise", "ValueError", "(", "'When using replicas num_ps_tasks must be positive'", ")", "\n", "", "", "if", "num_replicas", ">", "1", "or", "num_ps_tasks", ">", "0", ":", "\n", "      ", "if", "not", "worker_job_name", ":", "\n", "        ", "raise", "ValueError", "(", "'Must specify worker_job_name when using replicas'", ")", "\n", "", "if", "not", "ps_job_name", ":", "\n", "        ", "raise", "ValueError", "(", "'Must specify ps_job_name when using parameter server'", ")", "\n", "", "", "if", "replica_id", ">=", "num_replicas", ":", "\n", "      ", "raise", "ValueError", "(", "'replica_id must be less than num_replicas'", ")", "\n", "", "self", ".", "_num_clones", "=", "num_clones", "\n", "self", ".", "_clone_on_cpu", "=", "clone_on_cpu", "\n", "self", ".", "_replica_id", "=", "replica_id", "\n", "self", ".", "_num_replicas", "=", "num_replicas", "\n", "self", ".", "_num_ps_tasks", "=", "num_ps_tasks", "\n", "self", ".", "_ps_device", "=", "'/job:'", "+", "ps_job_name", "if", "num_ps_tasks", ">", "0", "else", "''", "\n", "self", ".", "_worker_device", "=", "'/job:'", "+", "worker_job_name", "if", "num_ps_tasks", ">", "0", "else", "''", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.num_clones": [[537, 540], ["None"], "methods", ["None"], ["", "@", "property", "\n", "def", "num_clones", "(", "self", ")", ":", "\n", "    ", "return", "self", ".", "_num_clones", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_on_cpu": [[541, 544], ["None"], "methods", ["None"], ["", "@", "property", "\n", "def", "clone_on_cpu", "(", "self", ")", ":", "\n", "    ", "return", "self", ".", "_clone_on_cpu", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.replica_id": [[545, 548], ["None"], "methods", ["None"], ["", "@", "property", "\n", "def", "replica_id", "(", "self", ")", ":", "\n", "    ", "return", "self", ".", "_replica_id", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.num_replicas": [[549, 552], ["None"], "methods", ["None"], ["", "@", "property", "\n", "def", "num_replicas", "(", "self", ")", ":", "\n", "    ", "return", "self", ".", "_num_replicas", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.num_ps_tasks": [[553, 556], ["None"], "methods", ["None"], ["", "@", "property", "\n", "def", "num_ps_tasks", "(", "self", ")", ":", "\n", "    ", "return", "self", ".", "_num_ps_tasks", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.ps_device": [[557, 560], ["None"], "methods", ["None"], ["", "@", "property", "\n", "def", "ps_device", "(", "self", ")", ":", "\n", "    ", "return", "self", ".", "_ps_device", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.worker_device": [[561, 564], ["None"], "methods", ["None"], ["", "@", "property", "\n", "def", "worker_device", "(", "self", ")", ":", "\n", "    ", "return", "self", ".", "_worker_device", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.caching_device": [[565, 577], ["None"], "methods", ["None"], ["", "def", "caching_device", "(", "self", ")", ":", "\n", "    ", "\"\"\"Returns the device to use for caching variables.\n\n    Variables are cached on the worker CPU when using replicas.\n\n    Returns:\n      A device string or None if the variables do not need to be cached.\n    \"\"\"", "\n", "if", "self", ".", "_num_ps_tasks", ">", "0", ":", "\n", "      ", "return", "lambda", "op", ":", "op", ".", "device", "\n", "", "else", ":", "\n", "      ", "return", "None", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_device": [[578, 601], ["ValueError"], "methods", ["None"], ["", "", "def", "clone_device", "(", "self", ",", "clone_index", ")", ":", "\n", "    ", "\"\"\"Device used to create the clone and all the ops inside the clone.\n\n    Args:\n      clone_index: Int, representing the clone_index.\n\n    Returns:\n      A value suitable for `tf.device()`.\n\n    Raises:\n      ValueError: if `clone_index` is greater or equal to the number of clones\".\n    \"\"\"", "\n", "if", "clone_index", ">=", "self", ".", "_num_clones", ":", "\n", "      ", "raise", "ValueError", "(", "'clone_index must be less than num_clones'", ")", "\n", "", "device", "=", "''", "\n", "if", "self", ".", "_num_ps_tasks", ">", "0", ":", "\n", "      ", "device", "+=", "self", ".", "_worker_device", "\n", "", "if", "self", ".", "_clone_on_cpu", ":", "\n", "      ", "device", "+=", "'/device:CPU:0'", "\n", "", "else", ":", "\n", "      ", "if", "self", ".", "_num_clones", ">", "1", ":", "\n", "        ", "device", "+=", "'/device:GPU:%d'", "%", "clone_index", "\n", "", "", "return", "device", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_scope": [[602, 620], ["ValueError"], "methods", ["None"], ["", "def", "clone_scope", "(", "self", ",", "clone_index", ")", ":", "\n", "    ", "\"\"\"Name scope to create the clone.\n\n    Args:\n      clone_index: Int, representing the clone_index.\n\n    Returns:\n      A name_scope suitable for `tf.name_scope()`.\n\n    Raises:\n      ValueError: if `clone_index` is greater or equal to the number of clones\".\n    \"\"\"", "\n", "if", "clone_index", ">=", "self", ".", "_num_clones", ":", "\n", "      ", "raise", "ValueError", "(", "'clone_index must be less than num_clones'", ")", "\n", "", "scope", "=", "''", "\n", "if", "self", ".", "_num_clones", ">", "1", ":", "\n", "      ", "scope", "=", "'clone_%d'", "%", "clone_index", "\n", "", "return", "scope", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.optimizer_device": [[621, 631], ["None"], "methods", ["None"], ["", "def", "optimizer_device", "(", "self", ")", ":", "\n", "    ", "\"\"\"Device to use with the optimizer.\n\n    Returns:\n      A value suitable for `tf.device()`.\n    \"\"\"", "\n", "if", "self", ".", "_num_ps_tasks", ">", "0", "or", "self", ".", "_num_clones", ">", "0", ":", "\n", "      ", "return", "self", ".", "_worker_device", "+", "'/device:CPU:0'", "\n", "", "else", ":", "\n", "      ", "return", "''", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.inputs_device": [[632, 643], ["None"], "methods", ["None"], ["", "", "def", "inputs_device", "(", "self", ")", ":", "\n", "    ", "\"\"\"Device to use to build the inputs.\n\n    Returns:\n      A value suitable for `tf.device()`.\n    \"\"\"", "\n", "device", "=", "''", "\n", "if", "self", ".", "_num_ps_tasks", ">", "0", ":", "\n", "      ", "device", "+=", "self", ".", "_worker_device", "\n", "", "device", "+=", "'/device:CPU:0'", "\n", "return", "device", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.variables_device": [[644, 680], ["_PSDeviceChooser", "isinstance"], "methods", ["None"], ["", "def", "variables_device", "(", "self", ")", ":", "\n", "    ", "\"\"\"Returns the device to use for variables created inside the clone.\n\n    Returns:\n      A value suitable for `tf.device()`.\n    \"\"\"", "\n", "device", "=", "''", "\n", "if", "self", ".", "_num_ps_tasks", ">", "0", ":", "\n", "      ", "device", "+=", "self", ".", "_ps_device", "\n", "", "device", "+=", "'/device:CPU:0'", "\n", "\n", "class", "_PSDeviceChooser", "(", "object", ")", ":", "\n", "      ", "\"\"\"Slim device chooser for variables when using PS.\"\"\"", "\n", "\n", "def", "__init__", "(", "self", ",", "device", ",", "tasks", ")", ":", "\n", "        ", "self", ".", "_device", "=", "device", "\n", "self", ".", "_tasks", "=", "tasks", "\n", "self", ".", "_task", "=", "0", "\n", "\n", "", "def", "choose", "(", "self", ",", "op", ")", ":", "\n", "        ", "if", "op", ".", "device", ":", "\n", "          ", "return", "op", ".", "device", "\n", "", "node_def", "=", "op", "if", "isinstance", "(", "op", ",", "tf", ".", "NodeDef", ")", "else", "op", ".", "node_def", "\n", "if", "node_def", ".", "op", "==", "'Variable'", ":", "\n", "          ", "t", "=", "self", ".", "_task", "\n", "self", ".", "_task", "=", "(", "self", ".", "_task", "+", "1", ")", "%", "self", ".", "_tasks", "\n", "d", "=", "'%s/task:%d'", "%", "(", "self", ".", "_device", ",", "t", ")", "\n", "return", "d", "\n", "", "else", ":", "\n", "          ", "return", "op", ".", "device", "\n", "\n", "", "", "", "if", "not", "self", ".", "_num_ps_tasks", ":", "\n", "      ", "return", "device", "\n", "", "else", ":", "\n", "      ", "chooser", "=", "_PSDeviceChooser", "(", "device", ",", "self", ".", "_num_ps_tasks", ")", "\n", "return", "chooser", ".", "choose", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.create_clones": [[145, 198], ["slim.arg_scope", "range", "config.variables_device", "tensorflow.name_scope", "config.clone_device", "config.clone_scope", "tensorflow.device", "clones.append", "tensorflow.variable_scope", "model_fn", "Clone", "tensorflow.get_variable_scope"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.variables_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.clone_scope"], ["def", "create_clones", "(", "config", ",", "model_fn", ",", "args", "=", "None", ",", "kwargs", "=", "None", ")", ":", "\n", "  ", "\"\"\"Creates multiple clones according to config using a `model_fn`.\n\n  The returned values of `model_fn(*args, **kwargs)` are collected along with\n  the scope and device used to created it in a namedtuple\n  `Clone(outputs, scope, device)`\n\n  Note: it is assumed that any loss created by `model_fn` is collected at\n  the tf.GraphKeys.LOSSES collection.\n\n  To recover the losses, summaries or update_ops created by the clone use:\n  ```python\n    losses = tf.get_collection(tf.GraphKeys.LOSSES, clone.scope)\n    summaries = tf.get_collection(tf.GraphKeys.SUMMARIES, clone.scope)\n    update_ops = tf.get_collection(tf.GraphKeys.UPDATE_OPS, clone.scope)\n  ```\n\n  The deployment options are specified by the config object and support\n  deploying one or several clones on different GPUs and one or several replicas\n  of such clones.\n\n  The argument `model_fn` is called `config.num_clones` times to create the\n  model clones as `model_fn(*args, **kwargs)`.\n\n  If `config` specifies deployment on multiple replicas then the default\n  tensorflow device is set appropriatly for each call to `model_fn` and for the\n  slim variable creation functions: model and global variables will be created\n  on the `ps` device, the clone operations will be on the `worker` device.\n\n  Args:\n    config: A DeploymentConfig object.\n    model_fn: A callable. Called as `model_fn(*args, **kwargs)`\n    args: Optional list of arguments to pass to `model_fn`.\n    kwargs: Optional list of keyword arguments to pass to `model_fn`.\n\n  Returns:\n    A list of namedtuples `Clone`.\n  \"\"\"", "\n", "clones", "=", "[", "]", "\n", "args", "=", "args", "or", "[", "]", "\n", "kwargs", "=", "kwargs", "or", "{", "}", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "model_variable", ",", "slim", ".", "variable", "]", ",", "\n", "device", "=", "config", ".", "variables_device", "(", ")", ")", ":", "\n", "# Create clones.", "\n", "    ", "for", "i", "in", "range", "(", "0", ",", "config", ".", "num_clones", ")", ":", "\n", "      ", "with", "tf", ".", "name_scope", "(", "config", ".", "clone_scope", "(", "i", ")", ")", "as", "clone_scope", ":", "\n", "        ", "clone_device", "=", "config", ".", "clone_device", "(", "i", ")", "\n", "with", "tf", ".", "device", "(", "clone_device", ")", ":", "\n", "          ", "with", "tf", ".", "variable_scope", "(", "tf", ".", "get_variable_scope", "(", ")", ",", "\n", "reuse", "=", "True", "if", "i", ">", "0", "else", "None", ")", ":", "\n", "            ", "outputs", "=", "model_fn", "(", "*", "args", ",", "**", "kwargs", ")", "\n", "", "clones", ".", "append", "(", "Clone", "(", "outputs", ",", "clone_scope", ",", "clone_device", ")", ")", "\n", "", "", "", "", "return", "clones", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy._gather_clone_loss": [[200, 240], ["tensorflow.device", "tensorflow.get_collection", "tensorflow.summary.scalar", "tensorflow.summary.scalar", "tensorflow.add_n", "all_losses.append", "tensorflow.add_n", "all_losses.append", "tensorflow.add_n", "tensorflow.div", "filter"], "function", ["None"], ["", "def", "_gather_clone_loss", "(", "clone", ",", "num_clones", ",", "regularization_losses", ")", ":", "\n", "  ", "\"\"\"Gather the loss for a single clone.\n\n  Args:\n    clone: A Clone namedtuple.\n    num_clones: The number of clones being deployed.\n    regularization_losses: Possibly empty list of regularization_losses\n      to add to the clone losses.\n\n  Returns:\n    A tensor for the total loss for the clone.  Can be None.\n  \"\"\"", "\n", "# The return value.", "\n", "sum_loss", "=", "None", "\n", "# Individual components of the loss that will need summaries.", "\n", "clone_loss", "=", "None", "\n", "regularization_loss", "=", "None", "\n", "# Compute and aggregate losses on the clone device.", "\n", "with", "tf", ".", "device", "(", "clone", ".", "device", ")", ":", "\n", "    ", "all_losses", "=", "[", "]", "\n", "clone_losses", "=", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "LOSSES", ",", "clone", ".", "scope", ")", "\n", "if", "clone_losses", ":", "\n", "      ", "clone_loss", "=", "tf", ".", "add_n", "(", "clone_losses", ",", "name", "=", "'clone_loss'", ")", "\n", "if", "num_clones", ">", "1", ":", "\n", "        ", "clone_loss", "=", "tf", ".", "div", "(", "clone_loss", ",", "1.0", "*", "num_clones", ",", "\n", "name", "=", "'scaled_clone_loss'", ")", "\n", "", "all_losses", ".", "append", "(", "clone_loss", ")", "\n", "", "if", "regularization_losses", ":", "\n", "      ", "regularization_loss", "=", "tf", ".", "add_n", "(", "regularization_losses", ",", "\n", "name", "=", "'regularization_loss'", ")", "\n", "all_losses", ".", "append", "(", "regularization_loss", ")", "\n", "", "if", "all_losses", ":", "\n", "      ", "sum_loss", "=", "tf", ".", "add_n", "(", "all_losses", ")", "\n", "# Add the summaries out of the clone device block.", "\n", "", "", "if", "clone_loss", "is", "not", "None", ":", "\n", "# Prepends clone.scope only if non-empty", "\n", "    ", "tf", ".", "summary", ".", "scalar", "(", "'/'", ".", "join", "(", "filter", "(", "None", ",", "[", "clone", ".", "scope", ",", "'clone_loss'", "]", ")", ")", ",", "clone_loss", ")", "\n", "", "if", "regularization_loss", "is", "not", "None", ":", "\n", "    ", "tf", ".", "summary", ".", "scalar", "(", "'regularization_loss'", ",", "regularization_loss", ")", "\n", "", "return", "sum_loss", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy._optimize_clone": [[242, 266], ["model_deploy._gather_clone_loss", "tensorflow.device", "optimizer.compute_gradients"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy._gather_clone_loss"], ["", "def", "_optimize_clone", "(", "optimizer", ",", "clone", ",", "num_clones", ",", "regularization_losses", ",", "\n", "**", "kwargs", ")", ":", "\n", "  ", "\"\"\"Compute losses and gradients for a single clone.\n\n  Args:\n    optimizer: A tf.Optimizer  object.\n    clone: A Clone namedtuple.\n    num_clones: The number of clones being deployed.\n    regularization_losses: Possibly empty list of regularization_losses\n      to add to the clone losses.\n    **kwargs: Dict of kwarg to pass to compute_gradients().\n\n  Returns:\n    A tuple (clone_loss, clone_grads_and_vars).\n      - clone_loss: A tensor for the total loss for the clone.  Can be None.\n      - clone_grads_and_vars: List of (gradient, variable) for the clone.\n        Can be empty.\n  \"\"\"", "\n", "sum_loss", "=", "_gather_clone_loss", "(", "clone", ",", "num_clones", ",", "regularization_losses", ")", "\n", "clone_grad", "=", "None", "\n", "if", "sum_loss", "is", "not", "None", ":", "\n", "    ", "with", "tf", ".", "device", "(", "clone", ".", "device", ")", ":", "\n", "      ", "clone_grad", "=", "optimizer", ".", "compute_gradients", "(", "sum_loss", ",", "**", "kwargs", ")", "\n", "", "", "return", "sum_loss", ",", "clone_grad", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.optimize_clones": [[268, 311], ["len", "tensorflow.add_n", "model_deploy._sum_clones_gradients", "tensorflow.get_collection", "tensorflow.name_scope", "model_deploy._optimize_clone", "clones_losses.append", "_sum_clones_gradients.append"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy._sum_clones_gradients", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy._optimize_clone"], ["", "def", "optimize_clones", "(", "clones", ",", "optimizer", ",", "\n", "regularization_losses", "=", "None", ",", "\n", "**", "kwargs", ")", ":", "\n", "  ", "\"\"\"Compute clone losses and gradients for the given list of `Clones`.\n\n  Note: The regularization_losses are added to the first clone losses.\n\n  Args:\n   clones: List of `Clones` created by `create_clones()`.\n   optimizer: An `Optimizer` object.\n   regularization_losses: Optional list of regularization losses. If None it\n     will gather them from tf.GraphKeys.REGULARIZATION_LOSSES. Pass `[]` to\n     exclude them.\n   **kwargs: Optional list of keyword arguments to pass to `compute_gradients`.\n\n  Returns:\n   A tuple (total_loss, grads_and_vars).\n     - total_loss: A Tensor containing the average of the clone losses including\n       the regularization loss.\n     - grads_and_vars: A List of tuples (gradient, variable) containing the sum\n       of the gradients for each variable.\n\n  \"\"\"", "\n", "grads_and_vars", "=", "[", "]", "\n", "clones_losses", "=", "[", "]", "\n", "num_clones", "=", "len", "(", "clones", ")", "\n", "if", "regularization_losses", "is", "None", ":", "\n", "    ", "regularization_losses", "=", "tf", ".", "get_collection", "(", "\n", "tf", ".", "GraphKeys", ".", "REGULARIZATION_LOSSES", ")", "\n", "", "for", "clone", "in", "clones", ":", "\n", "    ", "with", "tf", ".", "name_scope", "(", "clone", ".", "scope", ")", ":", "\n", "      ", "clone_loss", ",", "clone_grad", "=", "_optimize_clone", "(", "\n", "optimizer", ",", "clone", ",", "num_clones", ",", "regularization_losses", ",", "**", "kwargs", ")", "\n", "if", "clone_loss", "is", "not", "None", ":", "\n", "        ", "clones_losses", ".", "append", "(", "clone_loss", ")", "\n", "grads_and_vars", ".", "append", "(", "clone_grad", ")", "\n", "# Only use regularization_losses for the first clone", "\n", "", "regularization_losses", "=", "None", "\n", "# Compute the total_loss summing all the clones_losses.", "\n", "", "", "total_loss", "=", "tf", ".", "add_n", "(", "clones_losses", ",", "name", "=", "'total_loss'", ")", "\n", "# Sum the gradients accross clones.", "\n", "grads_and_vars", "=", "_sum_clones_gradients", "(", "grads_and_vars", ")", "\n", "return", "total_loss", ",", "grads_and_vars", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.deploy": [[313, 415], ["set", "model_deploy.create_clones", "tensorflow.get_collection", "DeployedModel", "tensorflow.get_collection", "tensorflow.device", "set", "config.optimizer_device", "model_deploy.optimize_clones", "tensorflow.get_collection", "tensorflow.get_collection", "set.add", "tensorflow.summary.merge", "tensorflow.device", "slim.get_or_create_global_step", "optimizer.apply_gradients", "tf.get_collection.append", "tensorflow.group", "tensorflow.python.ops.control_flow_ops.with_dependencies", "tensorflow.add_n", "tensorflow.summary.scalar", "list", "config.variables_device", "set", "tensorflow.name_scope", "model_deploy._gather_clone_loss", "model_deploy._add_gradients_summaries", "len", "clones_losses.append"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.create_clones", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.optimizer_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.optimize_clones", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy.DeploymentConfig.variables_device", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy._gather_clone_loss", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy._add_gradients_summaries"], ["", "def", "deploy", "(", "config", ",", "\n", "model_fn", ",", "\n", "args", "=", "None", ",", "\n", "kwargs", "=", "None", ",", "\n", "optimizer", "=", "None", ",", "\n", "summarize_gradients", "=", "False", ")", ":", "\n", "  ", "\"\"\"Deploys a Slim-constructed model across multiple clones.\n\n  The deployment options are specified by the config object and support\n  deploying one or several clones on different GPUs and one or several replicas\n  of such clones.\n\n  The argument `model_fn` is called `config.num_clones` times to create the\n  model clones as `model_fn(*args, **kwargs)`.\n\n  The optional argument `optimizer` is an `Optimizer` object.  If not `None`,\n  the deployed model is configured for training with that optimizer.\n\n  If `config` specifies deployment on multiple replicas then the default\n  tensorflow device is set appropriatly for each call to `model_fn` and for the\n  slim variable creation functions: model and global variables will be created\n  on the `ps` device, the clone operations will be on the `worker` device.\n\n  Args:\n    config: A `DeploymentConfig` object.\n    model_fn: A callable. Called as `model_fn(*args, **kwargs)`\n    args: Optional list of arguments to pass to `model_fn`.\n    kwargs: Optional list of keyword arguments to pass to `model_fn`.\n    optimizer: Optional `Optimizer` object.  If passed the model is deployed\n      for training with that optimizer.\n    summarize_gradients: Whether or not add summaries to the gradients.\n\n  Returns:\n    A `DeployedModel` namedtuple.\n\n  \"\"\"", "\n", "# Gather initial summaries.", "\n", "summaries", "=", "set", "(", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "SUMMARIES", ")", ")", "\n", "\n", "# Create Clones.", "\n", "clones", "=", "create_clones", "(", "config", ",", "model_fn", ",", "args", ",", "kwargs", ")", "\n", "first_clone", "=", "clones", "[", "0", "]", "\n", "\n", "# Gather update_ops from the first clone. These contain, for example,", "\n", "# the updates for the batch_norm variables created by model_fn.", "\n", "update_ops", "=", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "UPDATE_OPS", ",", "first_clone", ".", "scope", ")", "\n", "\n", "train_op", "=", "None", "\n", "total_loss", "=", "None", "\n", "with", "tf", ".", "device", "(", "config", ".", "optimizer_device", "(", ")", ")", ":", "\n", "    ", "if", "optimizer", ":", "\n", "# Place the global step on the device storing the variables.", "\n", "      ", "with", "tf", ".", "device", "(", "config", ".", "variables_device", "(", ")", ")", ":", "\n", "        ", "global_step", "=", "slim", ".", "get_or_create_global_step", "(", ")", "\n", "\n", "# Compute the gradients for the clones.", "\n", "", "total_loss", ",", "clones_gradients", "=", "optimize_clones", "(", "clones", ",", "optimizer", ")", "\n", "\n", "if", "clones_gradients", ":", "\n", "        ", "if", "summarize_gradients", ":", "\n", "# Add summaries to the gradients.", "\n", "          ", "summaries", "|=", "set", "(", "_add_gradients_summaries", "(", "clones_gradients", ")", ")", "\n", "\n", "# Create gradient updates.", "\n", "", "grad_updates", "=", "optimizer", ".", "apply_gradients", "(", "clones_gradients", ",", "\n", "global_step", "=", "global_step", ")", "\n", "update_ops", ".", "append", "(", "grad_updates", ")", "\n", "\n", "update_op", "=", "tf", ".", "group", "(", "*", "update_ops", ")", "\n", "train_op", "=", "control_flow_ops", ".", "with_dependencies", "(", "[", "update_op", "]", ",", "total_loss", ",", "\n", "name", "=", "'train_op'", ")", "\n", "", "", "else", ":", "\n", "      ", "clones_losses", "=", "[", "]", "\n", "regularization_losses", "=", "tf", ".", "get_collection", "(", "\n", "tf", ".", "GraphKeys", ".", "REGULARIZATION_LOSSES", ")", "\n", "for", "clone", "in", "clones", ":", "\n", "        ", "with", "tf", ".", "name_scope", "(", "clone", ".", "scope", ")", ":", "\n", "          ", "clone_loss", "=", "_gather_clone_loss", "(", "clone", ",", "len", "(", "clones", ")", ",", "\n", "regularization_losses", ")", "\n", "if", "clone_loss", "is", "not", "None", ":", "\n", "            ", "clones_losses", ".", "append", "(", "clone_loss", ")", "\n", "# Only use regularization_losses for the first clone", "\n", "", "regularization_losses", "=", "None", "\n", "", "", "if", "clones_losses", ":", "\n", "        ", "total_loss", "=", "tf", ".", "add_n", "(", "clones_losses", ",", "name", "=", "'total_loss'", ")", "\n", "\n", "# Add the summaries from the first clone. These contain the summaries", "\n", "# created by model_fn and either optimize_clones() or _gather_clone_loss().", "\n", "", "", "summaries", "|=", "set", "(", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "SUMMARIES", ",", "\n", "first_clone", ".", "scope", ")", ")", "\n", "\n", "if", "total_loss", "is", "not", "None", ":", "\n", "# Add total_loss to summary.", "\n", "      ", "summaries", ".", "add", "(", "tf", ".", "summary", ".", "scalar", "(", "'total_loss'", ",", "total_loss", ")", ")", "\n", "\n", "", "if", "summaries", ":", "\n", "# Merge all summaries together.", "\n", "      ", "summary_op", "=", "tf", ".", "summary", ".", "merge", "(", "list", "(", "summaries", ")", ",", "name", "=", "'summary_op'", ")", "\n", "", "else", ":", "\n", "      ", "summary_op", "=", "None", "\n", "\n", "", "", "return", "DeployedModel", "(", "train_op", ",", "summary_op", ",", "total_loss", ",", "clones", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy._sum_clones_gradients": [[417, 448], ["zip", "sum_grads.append", "grads.append", "len", "tensorflow.add_n"], "function", ["None"], ["", "def", "_sum_clones_gradients", "(", "clone_grads", ")", ":", "\n", "  ", "\"\"\"Calculate the sum gradient for each shared variable across all clones.\n\n  This function assumes that the clone_grads has been scaled appropriately by\n  1 / num_clones.\n\n  Args:\n    clone_grads: A List of List of tuples (gradient, variable), one list per\n    `Clone`.\n\n  Returns:\n     List of tuples of (gradient, variable) where the gradient has been summed\n     across all clones.\n  \"\"\"", "\n", "sum_grads", "=", "[", "]", "\n", "for", "grad_and_vars", "in", "zip", "(", "*", "clone_grads", ")", ":", "\n", "# Note that each grad_and_vars looks like the following:", "\n", "#   ((grad_var0_clone0, var0), ... (grad_varN_cloneN, varN))", "\n", "    ", "grads", "=", "[", "]", "\n", "var", "=", "grad_and_vars", "[", "0", "]", "[", "1", "]", "\n", "for", "g", ",", "v", "in", "grad_and_vars", ":", "\n", "      ", "assert", "v", "==", "var", "\n", "if", "g", "is", "not", "None", ":", "\n", "        ", "grads", ".", "append", "(", "g", ")", "\n", "", "", "if", "grads", ":", "\n", "      ", "if", "len", "(", "grads", ")", ">", "1", ":", "\n", "        ", "sum_grad", "=", "tf", ".", "add_n", "(", "grads", ",", "name", "=", "var", ".", "op", ".", "name", "+", "'/sum_grads'", ")", "\n", "", "else", ":", "\n", "        ", "sum_grad", "=", "grads", "[", "0", "]", "\n", "", "sum_grads", ".", "append", "(", "(", "sum_grad", ",", "var", ")", ")", "\n", "", "", "return", "sum_grads", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.deployment.model_deploy._add_gradients_summaries": [[450, 475], ["isinstance", "summaries.append", "summaries.append", "tensorflow.logging.info", "tensorflow.summary.histogram", "tensorflow.summary.histogram", "tensorflow.global_norm"], "function", ["None"], ["", "def", "_add_gradients_summaries", "(", "grads_and_vars", ")", ":", "\n", "  ", "\"\"\"Add histogram summaries to gradients.\n\n  Note: The summaries are also added to the SUMMARIES collection.\n\n  Args:\n    grads_and_vars: A list of gradient to variable pairs (tuples).\n\n  Returns:\n    The _list_ of the added summaries for grads_and_vars.\n  \"\"\"", "\n", "summaries", "=", "[", "]", "\n", "for", "grad", ",", "var", "in", "grads_and_vars", ":", "\n", "    ", "if", "grad", "is", "not", "None", ":", "\n", "      ", "if", "isinstance", "(", "grad", ",", "tf", ".", "IndexedSlices", ")", ":", "\n", "        ", "grad_values", "=", "grad", ".", "values", "\n", "", "else", ":", "\n", "        ", "grad_values", "=", "grad", "\n", "", "summaries", ".", "append", "(", "tf", ".", "summary", ".", "histogram", "(", "var", ".", "op", ".", "name", "+", "':gradient'", ",", "\n", "grad_values", ")", ")", "\n", "summaries", ".", "append", "(", "tf", ".", "summary", ".", "histogram", "(", "var", ".", "op", ".", "name", "+", "':gradient_norm'", ",", "\n", "tf", ".", "global_norm", "(", "[", "grad_values", "]", ")", ")", ")", "\n", "", "else", ":", "\n", "      ", "tf", ".", "logging", ".", "info", "(", "'Var %s has no gradient'", ",", "var", ".", "op", ".", "name", ")", "\n", "", "", "return", "summaries", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2_test.InceptionV2Test.testBuildClassificationNetwork": [[31, 44], ["tensorflow.random_uniform", "nets.inception.inception_v2", "inception_v2_test.InceptionV2Test.assertTrue", "inception_v2_test.InceptionV2Test.assertListEqual", "inception_v2_test.InceptionV2Test.assertTrue", "inception_v2_test.InceptionV2Test.assertListEqual", "logits.op.name.startswith", "logits.get_shape().as_list", "end_points[].get_shape().as_list", "logits.get_shape", "end_points[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2"], ["  ", "def", "testBuildClassificationNetwork", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "end_points", "=", "inception", ".", "inception_v2", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV2/Logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "self", ".", "assertTrue", "(", "'Predictions'", "in", "end_points", ")", "\n", "self", ".", "assertListEqual", "(", "end_points", "[", "'Predictions'", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2_test.InceptionV2Test.testBuildBaseNetwork": [[45, 60], ["tensorflow.random_uniform", "nets.inception.inception_v2_base", "inception_v2_test.InceptionV2Test.assertTrue", "inception_v2_test.InceptionV2Test.assertListEqual", "inception_v2_test.InceptionV2Test.assertItemsEqual", "mixed_5c.op.name.startswith", "mixed_5c.get_shape().as_list", "end_points.keys", "mixed_5c.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2_base"], ["", "def", "testBuildBaseNetwork", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "mixed_5c", ",", "end_points", "=", "inception", ".", "inception_v2_base", "(", "inputs", ")", "\n", "self", ".", "assertTrue", "(", "mixed_5c", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV2/Mixed_5c'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "mixed_5c", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "7", ",", "7", ",", "1024", "]", ")", "\n", "expected_endpoints", "=", "[", "'Mixed_3b'", ",", "'Mixed_3c'", ",", "'Mixed_4a'", ",", "'Mixed_4b'", ",", "\n", "'Mixed_4c'", ",", "'Mixed_4d'", ",", "'Mixed_4e'", ",", "'Mixed_5a'", ",", "\n", "'Mixed_5b'", ",", "'Mixed_5c'", ",", "'Conv2d_1a_7x7'", ",", "\n", "'MaxPool_2a_3x3'", ",", "'Conv2d_2b_1x1'", ",", "'Conv2d_2c_3x3'", ",", "\n", "'MaxPool_3a_3x3'", "]", "\n", "self", ".", "assertItemsEqual", "(", "end_points", ".", "keys", "(", ")", ",", "expected_endpoints", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2_test.InceptionV2Test.testBuildOnlyUptoFinalEndpoint": [[61, 76], ["enumerate", "tensorflow.Graph().as_default", "tensorflow.random_uniform", "nets.inception.inception_v2_base", "inception_v2_test.InceptionV2Test.assertTrue", "inception_v2_test.InceptionV2Test.assertItemsEqual", "out_tensor.op.name.startswith", "tensorflow.Graph"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2_base"], ["", "def", "testBuildOnlyUptoFinalEndpoint", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "endpoints", "=", "[", "'Conv2d_1a_7x7'", ",", "'MaxPool_2a_3x3'", ",", "'Conv2d_2b_1x1'", ",", "\n", "'Conv2d_2c_3x3'", ",", "'MaxPool_3a_3x3'", ",", "'Mixed_3b'", ",", "'Mixed_3c'", ",", "\n", "'Mixed_4a'", ",", "'Mixed_4b'", ",", "'Mixed_4c'", ",", "'Mixed_4d'", ",", "'Mixed_4e'", ",", "\n", "'Mixed_5a'", ",", "'Mixed_5b'", ",", "'Mixed_5c'", "]", "\n", "for", "index", ",", "endpoint", "in", "enumerate", "(", "endpoints", ")", ":", "\n", "      ", "with", "tf", ".", "Graph", "(", ")", ".", "as_default", "(", ")", ":", "\n", "        ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "out_tensor", ",", "end_points", "=", "inception", ".", "inception_v2_base", "(", "\n", "inputs", ",", "final_endpoint", "=", "endpoint", ")", "\n", "self", ".", "assertTrue", "(", "out_tensor", ".", "op", ".", "name", ".", "startswith", "(", "\n", "'InceptionV2/'", "+", "endpoint", ")", ")", "\n", "self", ".", "assertItemsEqual", "(", "endpoints", "[", ":", "index", "+", "1", "]", ",", "end_points", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2_test.InceptionV2Test.testBuildAndCheckAllEndPointsUptoMixed5c": [[77, 105], ["tensorflow.random_uniform", "nets.inception.inception_v2_base", "inception_v2_test.InceptionV2Test.assertItemsEqual", "endpoints_shapes.keys", "end_points.keys", "inception_v2_test.InceptionV2Test.assertTrue", "inception_v2_test.InceptionV2Test.assertListEqual", "end_points[].get_shape().as_list", "end_points[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2_base"], ["", "", "", "def", "testBuildAndCheckAllEndPointsUptoMixed5c", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "_", ",", "end_points", "=", "inception", ".", "inception_v2_base", "(", "inputs", ",", "\n", "final_endpoint", "=", "'Mixed_5c'", ")", "\n", "endpoints_shapes", "=", "{", "'Mixed_3b'", ":", "[", "batch_size", ",", "28", ",", "28", ",", "256", "]", ",", "\n", "'Mixed_3c'", ":", "[", "batch_size", ",", "28", ",", "28", ",", "320", "]", ",", "\n", "'Mixed_4a'", ":", "[", "batch_size", ",", "14", ",", "14", ",", "576", "]", ",", "\n", "'Mixed_4b'", ":", "[", "batch_size", ",", "14", ",", "14", ",", "576", "]", ",", "\n", "'Mixed_4c'", ":", "[", "batch_size", ",", "14", ",", "14", ",", "576", "]", ",", "\n", "'Mixed_4d'", ":", "[", "batch_size", ",", "14", ",", "14", ",", "576", "]", ",", "\n", "'Mixed_4e'", ":", "[", "batch_size", ",", "14", ",", "14", ",", "576", "]", ",", "\n", "'Mixed_5a'", ":", "[", "batch_size", ",", "7", ",", "7", ",", "1024", "]", ",", "\n", "'Mixed_5b'", ":", "[", "batch_size", ",", "7", ",", "7", ",", "1024", "]", ",", "\n", "'Mixed_5c'", ":", "[", "batch_size", ",", "7", ",", "7", ",", "1024", "]", ",", "\n", "'Conv2d_1a_7x7'", ":", "[", "batch_size", ",", "112", ",", "112", ",", "64", "]", ",", "\n", "'MaxPool_2a_3x3'", ":", "[", "batch_size", ",", "56", ",", "56", ",", "64", "]", ",", "\n", "'Conv2d_2b_1x1'", ":", "[", "batch_size", ",", "56", ",", "56", ",", "64", "]", ",", "\n", "'Conv2d_2c_3x3'", ":", "[", "batch_size", ",", "56", ",", "56", ",", "192", "]", ",", "\n", "'MaxPool_3a_3x3'", ":", "[", "batch_size", ",", "28", ",", "28", ",", "192", "]", "}", "\n", "self", ".", "assertItemsEqual", "(", "endpoints_shapes", ".", "keys", "(", ")", ",", "end_points", ".", "keys", "(", ")", ")", "\n", "for", "endpoint_name", "in", "endpoints_shapes", ":", "\n", "      ", "expected_shape", "=", "endpoints_shapes", "[", "endpoint_name", "]", "\n", "self", ".", "assertTrue", "(", "endpoint_name", "in", "end_points", ")", "\n", "self", ".", "assertListEqual", "(", "end_points", "[", "endpoint_name", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "expected_shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2_test.InceptionV2Test.testModelHasExpectedNumberOfParameters": [[106, 115], ["tensorflow.random_uniform", "slim.model_analyzer.analyze_vars", "inception_v2_test.InceptionV2Test.assertAlmostEqual", "slim.arg_scope", "nets.inception.inception_v2_base", "slim.get_model_variables", "nets.inception.inception_v2_arg_scope"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2_base"], ["", "", "def", "testModelHasExpectedNumberOfParameters", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "with", "slim", ".", "arg_scope", "(", "inception", ".", "inception_v2_arg_scope", "(", ")", ")", ":", "\n", "      ", "inception", ".", "inception_v2_base", "(", "inputs", ")", "\n", "", "total_params", ",", "_", "=", "slim", ".", "model_analyzer", ".", "analyze_vars", "(", "\n", "slim", ".", "get_model_variables", "(", ")", ")", "\n", "self", ".", "assertAlmostEqual", "(", "10173112", ",", "total_params", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2_test.InceptionV2Test.testBuildEndPointsWithDepthMultiplierLessThanOne": [[116, 135], ["tensorflow.random_uniform", "nets.inception.inception_v2", "nets.inception.inception_v2", "inception_v2_test.InceptionV2Test.assertEqual", "end_points.keys", "end_points[].get_shape().as_list", "end_points_with_multiplier[].get_shape().as_list", "key.startswith", "key.startswith", "end_points[].get_shape", "end_points_with_multiplier[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2"], ["", "def", "testBuildEndPointsWithDepthMultiplierLessThanOne", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "_", ",", "end_points", "=", "inception", ".", "inception_v2", "(", "inputs", ",", "num_classes", ")", "\n", "\n", "endpoint_keys", "=", "[", "key", "for", "key", "in", "end_points", ".", "keys", "(", ")", "\n", "if", "key", ".", "startswith", "(", "'Mixed'", ")", "or", "key", ".", "startswith", "(", "'Conv'", ")", "]", "\n", "\n", "_", ",", "end_points_with_multiplier", "=", "inception", ".", "inception_v2", "(", "\n", "inputs", ",", "num_classes", ",", "scope", "=", "'depth_multiplied_net'", ",", "\n", "depth_multiplier", "=", "0.5", ")", "\n", "\n", "for", "key", "in", "endpoint_keys", ":", "\n", "      ", "original_depth", "=", "end_points", "[", "key", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "3", "]", "\n", "new_depth", "=", "end_points_with_multiplier", "[", "key", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "3", "]", "\n", "self", ".", "assertEqual", "(", "0.5", "*", "original_depth", ",", "new_depth", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2_test.InceptionV2Test.testBuildEndPointsWithDepthMultiplierGreaterThanOne": [[136, 155], ["tensorflow.random_uniform", "nets.inception.inception_v2", "nets.inception.inception_v2", "inception_v2_test.InceptionV2Test.assertEqual", "end_points.keys", "end_points[].get_shape().as_list", "end_points_with_multiplier[].get_shape().as_list", "key.startswith", "key.startswith", "end_points[].get_shape", "end_points_with_multiplier[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2"], ["", "", "def", "testBuildEndPointsWithDepthMultiplierGreaterThanOne", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "_", ",", "end_points", "=", "inception", ".", "inception_v2", "(", "inputs", ",", "num_classes", ")", "\n", "\n", "endpoint_keys", "=", "[", "key", "for", "key", "in", "end_points", ".", "keys", "(", ")", "\n", "if", "key", ".", "startswith", "(", "'Mixed'", ")", "or", "key", ".", "startswith", "(", "'Conv'", ")", "]", "\n", "\n", "_", ",", "end_points_with_multiplier", "=", "inception", ".", "inception_v2", "(", "\n", "inputs", ",", "num_classes", ",", "scope", "=", "'depth_multiplied_net'", ",", "\n", "depth_multiplier", "=", "2.0", ")", "\n", "\n", "for", "key", "in", "endpoint_keys", ":", "\n", "      ", "original_depth", "=", "end_points", "[", "key", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "3", "]", "\n", "new_depth", "=", "end_points_with_multiplier", "[", "key", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "3", "]", "\n", "self", ".", "assertEqual", "(", "2.0", "*", "original_depth", ",", "new_depth", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2_test.InceptionV2Test.testRaiseValueErrorWithInvalidDepthMultiplier": [[156, 166], ["tensorflow.random_uniform", "inception_v2_test.InceptionV2Test.assertRaises", "nets.inception.inception_v2", "inception_v2_test.InceptionV2Test.assertRaises", "nets.inception.inception_v2"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2"], ["", "", "def", "testRaiseValueErrorWithInvalidDepthMultiplier", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "with", "self", ".", "assertRaises", "(", "ValueError", ")", ":", "\n", "      ", "_", "=", "inception", ".", "inception_v2", "(", "inputs", ",", "num_classes", ",", "depth_multiplier", "=", "-", "0.1", ")", "\n", "", "with", "self", ".", "assertRaises", "(", "ValueError", ")", ":", "\n", "      ", "_", "=", "inception", ".", "inception_v2", "(", "inputs", ",", "num_classes", ",", "depth_multiplier", "=", "0.0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2_test.InceptionV2Test.testHalfSizeImages": [[167, 180], ["tensorflow.random_uniform", "nets.inception.inception_v2", "inception_v2_test.InceptionV2Test.assertTrue", "inception_v2_test.InceptionV2Test.assertListEqual", "inception_v2_test.InceptionV2Test.assertListEqual", "logits.op.name.startswith", "logits.get_shape().as_list", "pre_pool.get_shape().as_list", "logits.get_shape", "pre_pool.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2"], ["", "", "def", "testHalfSizeImages", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "112", ",", "112", "\n", "num_classes", "=", "1000", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "end_points", "=", "inception", ".", "inception_v2", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV2/Logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "pre_pool", "=", "end_points", "[", "'Mixed_5c'", "]", "\n", "self", ".", "assertListEqual", "(", "pre_pool", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "4", ",", "4", ",", "1024", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2_test.InceptionV2Test.testUnknownImageShape": [[181, 198], ["tensorflow.reset_default_graph", "numpy.random.uniform", "inception_v2_test.InceptionV2Test.test_session", "tensorflow.placeholder", "nets.inception.inception_v2", "inception_v2_test.InceptionV2Test.assertTrue", "inception_v2_test.InceptionV2Test.assertListEqual", "tensorflow.initialize_all_variables().run", "sess.run", "inception_v2_test.InceptionV2Test.assertListEqual", "logits.op.name.startswith", "logits.get_shape().as_list", "list", "tensorflow.initialize_all_variables", "logits.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "def", "testUnknownImageShape", "(", "self", ")", ":", "\n", "    ", "tf", ".", "reset_default_graph", "(", ")", "\n", "batch_size", "=", "2", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "input_np", "=", "np", ".", "random", ".", "uniform", "(", "0", ",", "1", ",", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "inputs", "=", "tf", ".", "placeholder", "(", "tf", ".", "float32", ",", "shape", "=", "(", "batch_size", ",", "None", ",", "None", ",", "3", ")", ")", "\n", "logits", ",", "end_points", "=", "inception", ".", "inception_v2", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV2/Logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "pre_pool", "=", "end_points", "[", "'Mixed_5c'", "]", "\n", "feed_dict", "=", "{", "inputs", ":", "input_np", "}", "\n", "tf", ".", "initialize_all_variables", "(", ")", ".", "run", "(", ")", "\n", "pre_pool_out", "=", "sess", ".", "run", "(", "pre_pool", ",", "feed_dict", "=", "feed_dict", ")", "\n", "self", ".", "assertListEqual", "(", "list", "(", "pre_pool_out", ".", "shape", ")", ",", "[", "batch_size", ",", "7", ",", "7", ",", "1024", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2_test.InceptionV2Test.testUnknowBatchSize": [[199, 215], ["tensorflow.placeholder", "nets.inception.inception_v2", "inception_v2_test.InceptionV2Test.assertTrue", "inception_v2_test.InceptionV2Test.assertListEqual", "tensorflow.random_uniform", "logits.op.name.startswith", "logits.get_shape().as_list", "inception_v2_test.InceptionV2Test.test_session", "sess.run", "sess.run", "inception_v2_test.InceptionV2Test.assertEquals", "tensorflow.initialize_all_variables", "logits.get_shape", "tensorflow.random_uniform.eval"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testUnknowBatchSize", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "1", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "\n", "inputs", "=", "tf", ".", "placeholder", "(", "tf", ".", "float32", ",", "(", "None", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_v2", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV2/Logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "None", ",", "num_classes", "]", ")", "\n", "images", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "logits", ",", "{", "inputs", ":", "images", ".", "eval", "(", ")", "}", ")", "\n", "self", ".", "assertEquals", "(", "output", ".", "shape", ",", "(", "batch_size", ",", "num_classes", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2_test.InceptionV2Test.testEvaluation": [[216, 230], ["tensorflow.random_uniform", "nets.inception.inception_v2", "tensorflow.argmax", "inception_v2_test.InceptionV2Test.test_session", "sess.run", "sess.run", "inception_v2_test.InceptionV2Test.assertEquals", "tensorflow.initialize_all_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testEvaluation", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "2", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "\n", "eval_inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_v2", "(", "eval_inputs", ",", "num_classes", ",", "\n", "is_training", "=", "False", ")", "\n", "predictions", "=", "tf", ".", "argmax", "(", "logits", ",", "1", ")", "\n", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "predictions", ")", "\n", "self", ".", "assertEquals", "(", "output", ".", "shape", ",", "(", "batch_size", ",", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2_test.InceptionV2Test.testTrainEvalWithReuse": [[231, 247], ["tensorflow.random_uniform", "nets.inception.inception_v2", "tensorflow.random_uniform", "nets.inception.inception_v2", "tensorflow.argmax", "inception_v2_test.InceptionV2Test.test_session", "sess.run", "sess.run", "inception_v2_test.InceptionV2Test.assertEquals", "tensorflow.initialize_all_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testTrainEvalWithReuse", "(", "self", ")", ":", "\n", "    ", "train_batch_size", "=", "5", "\n", "eval_batch_size", "=", "2", "\n", "height", ",", "width", "=", "150", ",", "150", "\n", "num_classes", "=", "1000", "\n", "\n", "train_inputs", "=", "tf", ".", "random_uniform", "(", "(", "train_batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "inception", ".", "inception_v2", "(", "train_inputs", ",", "num_classes", ")", "\n", "eval_inputs", "=", "tf", ".", "random_uniform", "(", "(", "eval_batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_v2", "(", "eval_inputs", ",", "num_classes", ",", "reuse", "=", "True", ")", "\n", "predictions", "=", "tf", ".", "argmax", "(", "logits", ",", "1", ")", "\n", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "predictions", ")", "\n", "self", ".", "assertEquals", "(", "output", ".", "shape", ",", "(", "eval_batch_size", ",", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2_test.InceptionV2Test.testLogitsNotSqueezed": [[248, 259], ["tensorflow.random_uniform", "nets.inception.inception_v2", "inception_v2_test.InceptionV2Test.test_session", "tensorflow.initialize_all_variables().run", "sess.run", "inception_v2_test.InceptionV2Test.assertListEqual", "list", "tensorflow.initialize_all_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testLogitsNotSqueezed", "(", "self", ")", ":", "\n", "    ", "num_classes", "=", "25", "\n", "images", "=", "tf", ".", "random_uniform", "(", "[", "1", ",", "224", ",", "224", ",", "3", "]", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_v2", "(", "images", ",", "\n", "num_classes", "=", "num_classes", ",", "\n", "spatial_squeeze", "=", "False", ")", "\n", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "tf", ".", "initialize_all_variables", "(", ")", ".", "run", "(", ")", "\n", "logits_out", "=", "sess", ".", "run", "(", "logits", ")", "\n", "self", ".", "assertListEqual", "(", "list", "(", "logits_out", ".", "shape", ")", ",", "[", "1", ",", "1", ",", "1", ",", "num_classes", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.block_inception_a": [[34, 53], ["slim.arg_scope", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d"], "function", ["None"], ["def", "block_inception_a", "(", "inputs", ",", "scope", "=", "None", ",", "reuse", "=", "None", ")", ":", "\n", "  ", "\"\"\"Builds Inception-A block for Inception v4 network.\"\"\"", "\n", "# By default use stride=1 and SAME padding", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "avg_pool2d", ",", "slim", ".", "max_pool2d", "]", ",", "\n", "stride", "=", "1", ",", "padding", "=", "'SAME'", ")", ":", "\n", "    ", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'BlockInceptionA'", ",", "[", "inputs", "]", ",", "reuse", "=", "reuse", ")", ":", "\n", "      ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "        ", "branch_0", "=", "slim", ".", "conv2d", "(", "inputs", ",", "96", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "        ", "branch_1", "=", "slim", ".", "conv2d", "(", "inputs", ",", "64", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "96", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "        ", "branch_2", "=", "slim", ".", "conv2d", "(", "inputs", ",", "64", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "96", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "96", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0c_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "        ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "inputs", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "96", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "return", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.block_reduction_a": [[55, 73], ["slim.arg_scope", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d"], "function", ["None"], ["", "", "", "def", "block_reduction_a", "(", "inputs", ",", "scope", "=", "None", ",", "reuse", "=", "None", ")", ":", "\n", "  ", "\"\"\"Builds Reduction-A block for Inception v4 network.\"\"\"", "\n", "# By default use stride=1 and SAME padding", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "avg_pool2d", ",", "slim", ".", "max_pool2d", "]", ",", "\n", "stride", "=", "1", ",", "padding", "=", "'SAME'", ")", ":", "\n", "    ", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'BlockReductionA'", ",", "[", "inputs", "]", ",", "reuse", "=", "reuse", ")", ":", "\n", "      ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "        ", "branch_0", "=", "slim", ".", "conv2d", "(", "inputs", ",", "384", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "        ", "branch_1", "=", "slim", ".", "conv2d", "(", "inputs", ",", "192", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "224", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "256", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "\n", "padding", "=", "'VALID'", ",", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "        ", "branch_2", "=", "slim", ".", "max_pool2d", "(", "inputs", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'MaxPool_1a_3x3'", ")", "\n", "", "return", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.block_inception_b": [[75, 97], ["slim.arg_scope", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d"], "function", ["None"], ["", "", "", "def", "block_inception_b", "(", "inputs", ",", "scope", "=", "None", ",", "reuse", "=", "None", ")", ":", "\n", "  ", "\"\"\"Builds Inception-B block for Inception v4 network.\"\"\"", "\n", "# By default use stride=1 and SAME padding", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "avg_pool2d", ",", "slim", ".", "max_pool2d", "]", ",", "\n", "stride", "=", "1", ",", "padding", "=", "'SAME'", ")", ":", "\n", "    ", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'BlockInceptionB'", ",", "[", "inputs", "]", ",", "reuse", "=", "reuse", ")", ":", "\n", "      ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "        ", "branch_0", "=", "slim", ".", "conv2d", "(", "inputs", ",", "384", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "        ", "branch_1", "=", "slim", ".", "conv2d", "(", "inputs", ",", "192", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "224", ",", "[", "1", ",", "7", "]", ",", "scope", "=", "'Conv2d_0b_1x7'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "256", ",", "[", "7", ",", "1", "]", ",", "scope", "=", "'Conv2d_0c_7x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "        ", "branch_2", "=", "slim", ".", "conv2d", "(", "inputs", ",", "192", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "192", ",", "[", "7", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_7x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "224", ",", "[", "1", ",", "7", "]", ",", "scope", "=", "'Conv2d_0c_1x7'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "224", ",", "[", "7", ",", "1", "]", ",", "scope", "=", "'Conv2d_0d_7x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "256", ",", "[", "1", ",", "7", "]", ",", "scope", "=", "'Conv2d_0e_1x7'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "        ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "inputs", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "128", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "return", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.block_reduction_b": [[99, 119], ["slim.arg_scope", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d"], "function", ["None"], ["", "", "", "def", "block_reduction_b", "(", "inputs", ",", "scope", "=", "None", ",", "reuse", "=", "None", ")", ":", "\n", "  ", "\"\"\"Builds Reduction-B block for Inception v4 network.\"\"\"", "\n", "# By default use stride=1 and SAME padding", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "avg_pool2d", ",", "slim", ".", "max_pool2d", "]", ",", "\n", "stride", "=", "1", ",", "padding", "=", "'SAME'", ")", ":", "\n", "    ", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'BlockReductionB'", ",", "[", "inputs", "]", ",", "reuse", "=", "reuse", ")", ":", "\n", "      ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "        ", "branch_0", "=", "slim", ".", "conv2d", "(", "inputs", ",", "192", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_0", "=", "slim", ".", "conv2d", "(", "branch_0", ",", "192", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "\n", "padding", "=", "'VALID'", ",", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "        ", "branch_1", "=", "slim", ".", "conv2d", "(", "inputs", ",", "256", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "256", ",", "[", "1", ",", "7", "]", ",", "scope", "=", "'Conv2d_0b_1x7'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "320", ",", "[", "7", ",", "1", "]", ",", "scope", "=", "'Conv2d_0c_7x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "320", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "\n", "padding", "=", "'VALID'", ",", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "        ", "branch_2", "=", "slim", ".", "max_pool2d", "(", "inputs", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'MaxPool_1a_3x3'", ")", "\n", "", "return", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.block_inception_c": [[121, 145], ["slim.arg_scope", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.concat", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.concat", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d"], "function", ["None"], ["", "", "", "def", "block_inception_c", "(", "inputs", ",", "scope", "=", "None", ",", "reuse", "=", "None", ")", ":", "\n", "  ", "\"\"\"Builds Inception-C block for Inception v4 network.\"\"\"", "\n", "# By default use stride=1 and SAME padding", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "avg_pool2d", ",", "slim", ".", "max_pool2d", "]", ",", "\n", "stride", "=", "1", ",", "padding", "=", "'SAME'", ")", ":", "\n", "    ", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'BlockInceptionC'", ",", "[", "inputs", "]", ",", "reuse", "=", "reuse", ")", ":", "\n", "      ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "        ", "branch_0", "=", "slim", ".", "conv2d", "(", "inputs", ",", "256", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "        ", "branch_1", "=", "slim", ".", "conv2d", "(", "inputs", ",", "384", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "tf", ".", "concat", "(", "3", ",", "[", "\n", "slim", ".", "conv2d", "(", "branch_1", ",", "256", ",", "[", "1", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_1x3'", ")", ",", "\n", "slim", ".", "conv2d", "(", "branch_1", ",", "256", ",", "[", "3", ",", "1", "]", ",", "scope", "=", "'Conv2d_0c_3x1'", ")", "]", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "        ", "branch_2", "=", "slim", ".", "conv2d", "(", "inputs", ",", "384", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "448", ",", "[", "3", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_3x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "512", ",", "[", "1", ",", "3", "]", ",", "scope", "=", "'Conv2d_0c_1x3'", ")", "\n", "branch_2", "=", "tf", ".", "concat", "(", "3", ",", "[", "\n", "slim", ".", "conv2d", "(", "branch_2", ",", "256", ",", "[", "1", ",", "3", "]", ",", "scope", "=", "'Conv2d_0d_1x3'", ")", ",", "\n", "slim", ".", "conv2d", "(", "branch_2", ",", "256", ",", "[", "3", ",", "1", "]", ",", "scope", "=", "'Conv2d_0e_3x1'", ")", "]", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "        ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "inputs", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "256", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "return", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.inception_v4_base": [[147, 255], ["ValueError", "tensorflow.variable_scope", "slim.arg_scope", "slim.conv2d", "inception_v4.inception_v4_base.add_and_check_final"], "function", ["None"], ["", "", "", "def", "inception_v4_base", "(", "inputs", ",", "final_endpoint", "=", "'Mixed_7d'", ",", "scope", "=", "None", ")", ":", "\n", "  ", "\"\"\"Creates the Inception V4 network up to the given final endpoint.\n\n  Args:\n    inputs: a 4-D tensor of size [batch_size, height, width, 3].\n    final_endpoint: specifies the endpoint to construct the network up to.\n      It can be one of [ 'Conv2d_1a_3x3', 'Conv2d_2a_3x3', 'Conv2d_2b_3x3',\n      'Mixed_3a', 'Mixed_4a', 'Mixed_5a', 'Mixed_5b', 'Mixed_5c', 'Mixed_5d',\n      'Mixed_5e', 'Mixed_6a', 'Mixed_6b', 'Mixed_6c', 'Mixed_6d', 'Mixed_6e',\n      'Mixed_6f', 'Mixed_6g', 'Mixed_6h', 'Mixed_7a', 'Mixed_7b', 'Mixed_7c',\n      'Mixed_7d']\n    scope: Optional variable_scope.\n\n  Returns:\n    logits: the logits outputs of the model.\n    end_points: the set of end_points from the inception model.\n\n  Raises:\n    ValueError: if final_endpoint is not set to one of the predefined values,\n  \"\"\"", "\n", "end_points", "=", "{", "}", "\n", "\n", "def", "add_and_check_final", "(", "name", ",", "net", ")", ":", "\n", "    ", "end_points", "[", "name", "]", "=", "net", "\n", "return", "name", "==", "final_endpoint", "\n", "\n", "", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'InceptionV4'", ",", "[", "inputs", "]", ")", ":", "\n", "    ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "max_pool2d", ",", "slim", ".", "avg_pool2d", "]", ",", "\n", "stride", "=", "1", ",", "padding", "=", "'SAME'", ")", ":", "\n", "# 299 x 299 x 3", "\n", "      ", "net", "=", "slim", ".", "conv2d", "(", "inputs", ",", "32", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "\n", "padding", "=", "'VALID'", ",", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "if", "add_and_check_final", "(", "'Conv2d_1a_3x3'", ",", "net", ")", ":", "return", "net", ",", "end_points", "\n", "# 149 x 149 x 32", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "32", ",", "[", "3", ",", "3", "]", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'Conv2d_2a_3x3'", ")", "\n", "if", "add_and_check_final", "(", "'Conv2d_2a_3x3'", ",", "net", ")", ":", "return", "net", ",", "end_points", "\n", "# 147 x 147 x 32", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "64", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_2b_3x3'", ")", "\n", "if", "add_and_check_final", "(", "'Conv2d_2b_3x3'", ",", "net", ")", ":", "return", "net", ",", "end_points", "\n", "# 147 x 147 x 64", "\n", "with", "tf", ".", "variable_scope", "(", "'Mixed_3a'", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'MaxPool_0a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "96", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'Conv2d_0a_3x3'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", "]", ")", "\n", "if", "add_and_check_final", "(", "'Mixed_3a'", ",", "net", ")", ":", "return", "net", ",", "end_points", "\n", "\n", "# 73 x 73 x 160", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Mixed_4a'", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "64", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_0", "=", "slim", ".", "conv2d", "(", "branch_0", ",", "96", ",", "[", "3", ",", "3", "]", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "64", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "64", ",", "[", "1", ",", "7", "]", ",", "scope", "=", "'Conv2d_0b_1x7'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "64", ",", "[", "7", ",", "1", "]", ",", "scope", "=", "'Conv2d_0c_7x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "96", ",", "[", "3", ",", "3", "]", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", "]", ")", "\n", "if", "add_and_check_final", "(", "'Mixed_4a'", ",", "net", ")", ":", "return", "net", ",", "end_points", "\n", "\n", "# 71 x 71 x 192", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Mixed_5a'", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "192", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'MaxPool_1a_3x3'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", "]", ")", "\n", "if", "add_and_check_final", "(", "'Mixed_5a'", ",", "net", ")", ":", "return", "net", ",", "end_points", "\n", "\n", "# 35 x 35 x 384", "\n", "# 4 x Inception-A blocks", "\n", "", "for", "idx", "in", "xrange", "(", "4", ")", ":", "\n", "        ", "block_scope", "=", "'Mixed_5'", "+", "chr", "(", "ord", "(", "'b'", ")", "+", "idx", ")", "\n", "net", "=", "block_inception_a", "(", "net", ",", "block_scope", ")", "\n", "if", "add_and_check_final", "(", "block_scope", ",", "net", ")", ":", "return", "net", ",", "end_points", "\n", "\n", "# 35 x 35 x 384", "\n", "# Reduction-A block", "\n", "", "net", "=", "block_reduction_a", "(", "net", ",", "'Mixed_6a'", ")", "\n", "if", "add_and_check_final", "(", "'Mixed_6a'", ",", "net", ")", ":", "return", "net", ",", "end_points", "\n", "\n", "# 17 x 17 x 1024", "\n", "# 7 x Inception-B blocks", "\n", "for", "idx", "in", "xrange", "(", "7", ")", ":", "\n", "        ", "block_scope", "=", "'Mixed_6'", "+", "chr", "(", "ord", "(", "'b'", ")", "+", "idx", ")", "\n", "net", "=", "block_inception_b", "(", "net", ",", "block_scope", ")", "\n", "if", "add_and_check_final", "(", "block_scope", ",", "net", ")", ":", "return", "net", ",", "end_points", "\n", "\n", "# 17 x 17 x 1024", "\n", "# Reduction-B block", "\n", "", "net", "=", "block_reduction_b", "(", "net", ",", "'Mixed_7a'", ")", "\n", "if", "add_and_check_final", "(", "'Mixed_7a'", ",", "net", ")", ":", "return", "net", ",", "end_points", "\n", "\n", "# 8 x 8 x 1536", "\n", "# 3 x Inception-C blocks", "\n", "for", "idx", "in", "xrange", "(", "3", ")", ":", "\n", "        ", "block_scope", "=", "'Mixed_7'", "+", "chr", "(", "ord", "(", "'b'", ")", "+", "idx", ")", "\n", "net", "=", "block_inception_c", "(", "net", ",", "block_scope", ")", "\n", "if", "add_and_check_final", "(", "block_scope", ",", "net", ")", ":", "return", "net", ",", "end_points", "\n", "", "", "", "raise", "ValueError", "(", "'Unknown final endpoint %s'", "%", "final_endpoint", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.inception_v4": [[257, 320], ["tensorflow.variable_scope", "slim.arg_scope", "inception_v4.inception_v4_base", "slim.arg_scope", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.dropout", "slim.flatten", "slim.fully_connected", "tensorflow.nn.softmax", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "slim.conv2d", "slim.flatten", "slim.fully_connected", "slim.flatten.get_shape", "slim.fully_connected.get_shape"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.inception_v4_base"], ["", "def", "inception_v4", "(", "inputs", ",", "num_classes", "=", "1001", ",", "is_training", "=", "True", ",", "\n", "dropout_keep_prob", "=", "0.8", ",", "\n", "reuse", "=", "None", ",", "\n", "scope", "=", "'InceptionV4'", ",", "\n", "create_aux_logits", "=", "True", ")", ":", "\n", "  ", "\"\"\"Creates the Inception V4 model.\n\n  Args:\n    inputs: a 4-D tensor of size [batch_size, height, width, 3].\n    num_classes: number of predicted classes.\n    is_training: whether is training or not.\n    dropout_keep_prob: float, the fraction to keep before final layer.\n    reuse: whether or not the network and its variables should be reused. To be\n      able to reuse 'scope' must be given.\n    scope: Optional variable_scope.\n    create_aux_logits: Whether to include the auxilliary logits.\n\n  Returns:\n    logits: the logits outputs of the model.\n    end_points: the set of end_points from the inception model.\n  \"\"\"", "\n", "end_points", "=", "{", "}", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'InceptionV4'", ",", "[", "inputs", "]", ",", "reuse", "=", "reuse", ")", "as", "scope", ":", "\n", "    ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "batch_norm", ",", "slim", ".", "dropout", "]", ",", "\n", "is_training", "=", "is_training", ")", ":", "\n", "      ", "net", ",", "end_points", "=", "inception_v4_base", "(", "inputs", ",", "scope", "=", "scope", ")", "\n", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "max_pool2d", ",", "slim", ".", "avg_pool2d", "]", ",", "\n", "stride", "=", "1", ",", "padding", "=", "'SAME'", ")", ":", "\n", "# Auxiliary Head logits", "\n", "        ", "if", "create_aux_logits", ":", "\n", "          ", "with", "tf", ".", "variable_scope", "(", "'AuxLogits'", ")", ":", "\n", "# 17 x 17 x 1024", "\n", "            ", "aux_logits", "=", "end_points", "[", "'Mixed_6h'", "]", "\n", "aux_logits", "=", "slim", ".", "avg_pool2d", "(", "aux_logits", ",", "[", "5", ",", "5", "]", ",", "stride", "=", "3", ",", "\n", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'AvgPool_1a_5x5'", ")", "\n", "aux_logits", "=", "slim", ".", "conv2d", "(", "aux_logits", ",", "128", ",", "[", "1", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_1b_1x1'", ")", "\n", "aux_logits", "=", "slim", ".", "conv2d", "(", "aux_logits", ",", "768", ",", "\n", "aux_logits", ".", "get_shape", "(", ")", "[", "1", ":", "3", "]", ",", "\n", "padding", "=", "'VALID'", ",", "scope", "=", "'Conv2d_2a'", ")", "\n", "aux_logits", "=", "slim", ".", "flatten", "(", "aux_logits", ")", "\n", "aux_logits", "=", "slim", ".", "fully_connected", "(", "aux_logits", ",", "num_classes", ",", "\n", "activation_fn", "=", "None", ",", "\n", "scope", "=", "'Aux_logits'", ")", "\n", "end_points", "[", "'AuxLogits'", "]", "=", "aux_logits", "\n", "\n", "# Final pooling and prediction", "\n", "", "", "with", "tf", ".", "variable_scope", "(", "'Logits'", ")", ":", "\n", "# 8 x 8 x 1536", "\n", "          ", "net", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "net", ".", "get_shape", "(", ")", "[", "1", ":", "3", "]", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'AvgPool_1a'", ")", "\n", "# 1 x 1 x 1536", "\n", "net", "=", "slim", ".", "dropout", "(", "net", ",", "dropout_keep_prob", ",", "scope", "=", "'Dropout_1b'", ")", "\n", "net", "=", "slim", ".", "flatten", "(", "net", ",", "scope", "=", "'PreLogitsFlatten'", ")", "\n", "end_points", "[", "'PreLogitsFlatten'", "]", "=", "net", "\n", "# 1536", "\n", "logits", "=", "slim", ".", "fully_connected", "(", "net", ",", "num_classes", ",", "activation_fn", "=", "None", ",", "\n", "scope", "=", "'Logits'", ")", "\n", "end_points", "[", "'Logits'", "]", "=", "logits", "\n", "end_points", "[", "'Predictions'", "]", "=", "tf", ".", "nn", ".", "softmax", "(", "logits", ",", "name", "=", "'Predictions'", ")", "\n", "", "", "", "return", "logits", ",", "end_points", "\n", "", "", "inception_v4", ".", "default_image_size", "=", "299", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4_test.InceptionTest.testBuildLogits": [[27, 45], ["tensorflow.random_uniform", "nets.inception.inception_v4", "inception_v4_test.InceptionTest.assertTrue", "inception_v4_test.InceptionTest.assertListEqual", "inception_v4_test.InceptionTest.assertTrue", "inception_v4_test.InceptionTest.assertListEqual", "inception_v4_test.InceptionTest.assertTrue", "inception_v4_test.InceptionTest.assertListEqual", "auxlogits.op.name.startswith", "auxlogits.get_shape().as_list", "logits.op.name.startswith", "logits.get_shape().as_list", "predictions.op.name.startswith", "predictions.get_shape().as_list", "auxlogits.get_shape", "logits.get_shape", "predictions.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.inception_v4"], ["  ", "def", "testBuildLogits", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "end_points", "=", "inception", ".", "inception_v4", "(", "inputs", ",", "num_classes", ")", "\n", "auxlogits", "=", "end_points", "[", "'AuxLogits'", "]", "\n", "predictions", "=", "end_points", "[", "'Predictions'", "]", "\n", "self", ".", "assertTrue", "(", "auxlogits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV4/AuxLogits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "auxlogits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV4/Logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "self", ".", "assertTrue", "(", "predictions", ".", "op", ".", "name", ".", "startswith", "(", "\n", "'InceptionV4/Logits/Predictions'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "predictions", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4_test.InceptionTest.testBuildWithoutAuxLogits": [[46, 57], ["tensorflow.random_uniform", "nets.inception.inception_v4", "inception_v4_test.InceptionTest.assertFalse", "inception_v4_test.InceptionTest.assertTrue", "inception_v4_test.InceptionTest.assertListEqual", "logits.op.name.startswith", "logits.get_shape().as_list", "logits.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.inception_v4"], ["", "def", "testBuildWithoutAuxLogits", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "endpoints", "=", "inception", ".", "inception_v4", "(", "inputs", ",", "num_classes", ",", "\n", "create_aux_logits", "=", "False", ")", "\n", "self", ".", "assertFalse", "(", "'AuxLogits'", "in", "endpoints", ")", "\n", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV4/Logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4_test.InceptionTest.testAllEndPointsShapes": [[58, 102], ["tensorflow.random_uniform", "nets.inception.inception_v4", "inception_v4_test.InceptionTest.assertItemsEqual", "endpoints_shapes.keys", "end_points.keys", "inception_v4_test.InceptionTest.assertTrue", "inception_v4_test.InceptionTest.assertListEqual", "end_points[].get_shape().as_list", "end_points[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.inception_v4"], ["", "def", "testAllEndPointsShapes", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "_", ",", "end_points", "=", "inception", ".", "inception_v4", "(", "inputs", ",", "num_classes", ")", "\n", "endpoints_shapes", "=", "{", "'Conv2d_1a_3x3'", ":", "[", "batch_size", ",", "149", ",", "149", ",", "32", "]", ",", "\n", "'Conv2d_2a_3x3'", ":", "[", "batch_size", ",", "147", ",", "147", ",", "32", "]", ",", "\n", "'Conv2d_2b_3x3'", ":", "[", "batch_size", ",", "147", ",", "147", ",", "64", "]", ",", "\n", "'Mixed_3a'", ":", "[", "batch_size", ",", "73", ",", "73", ",", "160", "]", ",", "\n", "'Mixed_4a'", ":", "[", "batch_size", ",", "71", ",", "71", ",", "192", "]", ",", "\n", "'Mixed_5a'", ":", "[", "batch_size", ",", "35", ",", "35", ",", "384", "]", ",", "\n", "# 4 x Inception-A blocks", "\n", "'Mixed_5b'", ":", "[", "batch_size", ",", "35", ",", "35", ",", "384", "]", ",", "\n", "'Mixed_5c'", ":", "[", "batch_size", ",", "35", ",", "35", ",", "384", "]", ",", "\n", "'Mixed_5d'", ":", "[", "batch_size", ",", "35", ",", "35", ",", "384", "]", ",", "\n", "'Mixed_5e'", ":", "[", "batch_size", ",", "35", ",", "35", ",", "384", "]", ",", "\n", "# Reduction-A block", "\n", "'Mixed_6a'", ":", "[", "batch_size", ",", "17", ",", "17", ",", "1024", "]", ",", "\n", "# 7 x Inception-B blocks", "\n", "'Mixed_6b'", ":", "[", "batch_size", ",", "17", ",", "17", ",", "1024", "]", ",", "\n", "'Mixed_6c'", ":", "[", "batch_size", ",", "17", ",", "17", ",", "1024", "]", ",", "\n", "'Mixed_6d'", ":", "[", "batch_size", ",", "17", ",", "17", ",", "1024", "]", ",", "\n", "'Mixed_6e'", ":", "[", "batch_size", ",", "17", ",", "17", ",", "1024", "]", ",", "\n", "'Mixed_6f'", ":", "[", "batch_size", ",", "17", ",", "17", ",", "1024", "]", ",", "\n", "'Mixed_6g'", ":", "[", "batch_size", ",", "17", ",", "17", ",", "1024", "]", ",", "\n", "'Mixed_6h'", ":", "[", "batch_size", ",", "17", ",", "17", ",", "1024", "]", ",", "\n", "# Reduction-A block", "\n", "'Mixed_7a'", ":", "[", "batch_size", ",", "8", ",", "8", ",", "1536", "]", ",", "\n", "# 3 x Inception-C blocks", "\n", "'Mixed_7b'", ":", "[", "batch_size", ",", "8", ",", "8", ",", "1536", "]", ",", "\n", "'Mixed_7c'", ":", "[", "batch_size", ",", "8", ",", "8", ",", "1536", "]", ",", "\n", "'Mixed_7d'", ":", "[", "batch_size", ",", "8", ",", "8", ",", "1536", "]", ",", "\n", "# Logits and predictions", "\n", "'AuxLogits'", ":", "[", "batch_size", ",", "num_classes", "]", ",", "\n", "'PreLogitsFlatten'", ":", "[", "batch_size", ",", "1536", "]", ",", "\n", "'Logits'", ":", "[", "batch_size", ",", "num_classes", "]", ",", "\n", "'Predictions'", ":", "[", "batch_size", ",", "num_classes", "]", "}", "\n", "self", ".", "assertItemsEqual", "(", "endpoints_shapes", ".", "keys", "(", ")", ",", "end_points", ".", "keys", "(", ")", ")", "\n", "for", "endpoint_name", "in", "endpoints_shapes", ":", "\n", "      ", "expected_shape", "=", "endpoints_shapes", "[", "endpoint_name", "]", "\n", "self", ".", "assertTrue", "(", "endpoint_name", "in", "end_points", ")", "\n", "self", ".", "assertListEqual", "(", "end_points", "[", "endpoint_name", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "expected_shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4_test.InceptionTest.testBuildBaseNetwork": [[103, 120], ["tensorflow.random_uniform", "nets.inception.inception_v4_base", "inception_v4_test.InceptionTest.assertTrue", "inception_v4_test.InceptionTest.assertListEqual", "inception_v4_test.InceptionTest.assertItemsEqual", "end_points.iteritems", "net.op.name.startswith", "net.get_shape().as_list", "end_points.keys", "inception_v4_test.InceptionTest.assertTrue", "op.name.startswith", "net.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.inception_v4_base"], ["", "", "def", "testBuildBaseNetwork", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "net", ",", "end_points", "=", "inception", ".", "inception_v4_base", "(", "inputs", ")", "\n", "self", ".", "assertTrue", "(", "net", ".", "op", ".", "name", ".", "startswith", "(", "\n", "'InceptionV4/Mixed_7d'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "net", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "[", "batch_size", ",", "8", ",", "8", ",", "1536", "]", ")", "\n", "expected_endpoints", "=", "[", "\n", "'Conv2d_1a_3x3'", ",", "'Conv2d_2a_3x3'", ",", "'Conv2d_2b_3x3'", ",", "'Mixed_3a'", ",", "\n", "'Mixed_4a'", ",", "'Mixed_5a'", ",", "'Mixed_5b'", ",", "'Mixed_5c'", ",", "'Mixed_5d'", ",", "\n", "'Mixed_5e'", ",", "'Mixed_6a'", ",", "'Mixed_6b'", ",", "'Mixed_6c'", ",", "'Mixed_6d'", ",", "\n", "'Mixed_6e'", ",", "'Mixed_6f'", ",", "'Mixed_6g'", ",", "'Mixed_6h'", ",", "'Mixed_7a'", ",", "\n", "'Mixed_7b'", ",", "'Mixed_7c'", ",", "'Mixed_7d'", "]", "\n", "self", ".", "assertItemsEqual", "(", "end_points", ".", "keys", "(", ")", ",", "expected_endpoints", ")", "\n", "for", "name", ",", "op", "in", "end_points", ".", "iteritems", "(", ")", ":", "\n", "      ", "self", ".", "assertTrue", "(", "op", ".", "name", ".", "startswith", "(", "'InceptionV4/'", "+", "name", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4_test.InceptionTest.testBuildOnlyUpToFinalEndpoint": [[121, 138], ["enumerate", "tensorflow.Graph().as_default", "tensorflow.random_uniform", "nets.inception.inception_v4_base", "inception_v4_test.InceptionTest.assertTrue", "inception_v4_test.InceptionTest.assertItemsEqual", "out_tensor.op.name.startswith", "tensorflow.Graph"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.inception_v4_base"], ["", "", "def", "testBuildOnlyUpToFinalEndpoint", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "all_endpoints", "=", "[", "\n", "'Conv2d_1a_3x3'", ",", "'Conv2d_2a_3x3'", ",", "'Conv2d_2b_3x3'", ",", "'Mixed_3a'", ",", "\n", "'Mixed_4a'", ",", "'Mixed_5a'", ",", "'Mixed_5b'", ",", "'Mixed_5c'", ",", "'Mixed_5d'", ",", "\n", "'Mixed_5e'", ",", "'Mixed_6a'", ",", "'Mixed_6b'", ",", "'Mixed_6c'", ",", "'Mixed_6d'", ",", "\n", "'Mixed_6e'", ",", "'Mixed_6f'", ",", "'Mixed_6g'", ",", "'Mixed_6h'", ",", "'Mixed_7a'", ",", "\n", "'Mixed_7b'", ",", "'Mixed_7c'", ",", "'Mixed_7d'", "]", "\n", "for", "index", ",", "endpoint", "in", "enumerate", "(", "all_endpoints", ")", ":", "\n", "      ", "with", "tf", ".", "Graph", "(", ")", ".", "as_default", "(", ")", ":", "\n", "        ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "out_tensor", ",", "end_points", "=", "inception", ".", "inception_v4_base", "(", "\n", "inputs", ",", "final_endpoint", "=", "endpoint", ")", "\n", "self", ".", "assertTrue", "(", "out_tensor", ".", "op", ".", "name", ".", "startswith", "(", "\n", "'InceptionV4/'", "+", "endpoint", ")", ")", "\n", "self", ".", "assertItemsEqual", "(", "all_endpoints", "[", ":", "index", "+", "1", "]", ",", "end_points", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4_test.InceptionTest.testVariablesSetDevice": [[139, 153], ["tensorflow.random_uniform", "tensorflow.get_collection", "tensorflow.get_collection", "tensorflow.variable_scope", "tensorflow.device", "nets.inception.inception_v4", "tensorflow.variable_scope", "tensorflow.device", "nets.inception.inception_v4", "inception_v4_test.InceptionTest.assertDeviceEqual", "inception_v4_test.InceptionTest.assertDeviceEqual"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.inception_v4", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.inception_v4"], ["", "", "", "def", "testVariablesSetDevice", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "# Force all Variables to reside on the device.", "\n", "with", "tf", ".", "variable_scope", "(", "'on_cpu'", ")", ",", "tf", ".", "device", "(", "'/cpu:0'", ")", ":", "\n", "      ", "inception", ".", "inception_v4", "(", "inputs", ",", "num_classes", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'on_gpu'", ")", ",", "tf", ".", "device", "(", "'/gpu:0'", ")", ":", "\n", "      ", "inception", ".", "inception_v4", "(", "inputs", ",", "num_classes", ")", "\n", "", "for", "v", "in", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "VARIABLES", ",", "scope", "=", "'on_cpu'", ")", ":", "\n", "      ", "self", ".", "assertDeviceEqual", "(", "v", ".", "device", ",", "'/cpu:0'", ")", "\n", "", "for", "v", "in", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "VARIABLES", ",", "scope", "=", "'on_gpu'", ")", ":", "\n", "      ", "self", ".", "assertDeviceEqual", "(", "v", ".", "device", ",", "'/gpu:0'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4_test.InceptionTest.testHalfSizeImages": [[154, 166], ["tensorflow.random_uniform", "nets.inception.inception_v4", "inception_v4_test.InceptionTest.assertTrue", "inception_v4_test.InceptionTest.assertListEqual", "inception_v4_test.InceptionTest.assertListEqual", "logits.op.name.startswith", "logits.get_shape().as_list", "pre_pool.get_shape().as_list", "logits.get_shape", "pre_pool.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.inception_v4"], ["", "", "def", "testHalfSizeImages", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "150", ",", "150", "\n", "num_classes", "=", "1000", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "end_points", "=", "inception", ".", "inception_v4", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV4/Logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "pre_pool", "=", "end_points", "[", "'Mixed_7d'", "]", "\n", "self", ".", "assertListEqual", "(", "pre_pool", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "3", ",", "3", ",", "1536", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4_test.InceptionTest.testUnknownBatchSize": [[167, 181], ["inception_v4_test.InceptionTest.test_session", "tensorflow.placeholder", "nets.inception.inception_v4", "inception_v4_test.InceptionTest.assertTrue", "inception_v4_test.InceptionTest.assertListEqual", "tensorflow.random_uniform", "sess.run", "sess.run", "inception_v4_test.InceptionTest.assertEquals", "logits.op.name.startswith", "logits.get_shape().as_list", "tensorflow.initialize_all_variables", "tensorflow.random_uniform.eval", "logits.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.inception_v4", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "def", "testUnknownBatchSize", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "1", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "inputs", "=", "tf", ".", "placeholder", "(", "tf", ".", "float32", ",", "(", "None", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_v4", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV4/Logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "None", ",", "num_classes", "]", ")", "\n", "images", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "logits", ",", "{", "inputs", ":", "images", ".", "eval", "(", ")", "}", ")", "\n", "self", ".", "assertEquals", "(", "output", ".", "shape", ",", "(", "batch_size", ",", "num_classes", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4_test.InceptionTest.testEvaluation": [[182, 195], ["inception_v4_test.InceptionTest.test_session", "tensorflow.random_uniform", "nets.inception.inception_v4", "tensorflow.argmax", "sess.run", "sess.run", "inception_v4_test.InceptionTest.assertEquals", "tensorflow.initialize_all_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.inception_v4", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testEvaluation", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "2", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "eval_inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_v4", "(", "eval_inputs", ",", "\n", "num_classes", ",", "\n", "is_training", "=", "False", ")", "\n", "predictions", "=", "tf", ".", "argmax", "(", "logits", ",", "1", ")", "\n", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "predictions", ")", "\n", "self", ".", "assertEquals", "(", "output", ".", "shape", ",", "(", "batch_size", ",", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4_test.InceptionTest.testTrainEvalWithReuse": [[196, 213], ["inception_v4_test.InceptionTest.test_session", "tensorflow.random_uniform", "nets.inception.inception_v4", "tensorflow.random_uniform", "nets.inception.inception_v4", "tensorflow.argmax", "sess.run", "sess.run", "inception_v4_test.InceptionTest.assertEquals", "tensorflow.initialize_all_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.inception_v4", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v4.inception_v4", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testTrainEvalWithReuse", "(", "self", ")", ":", "\n", "    ", "train_batch_size", "=", "5", "\n", "eval_batch_size", "=", "2", "\n", "height", ",", "width", "=", "150", ",", "150", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "train_inputs", "=", "tf", ".", "random_uniform", "(", "(", "train_batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "inception", ".", "inception_v4", "(", "train_inputs", ",", "num_classes", ")", "\n", "eval_inputs", "=", "tf", ".", "random_uniform", "(", "(", "eval_batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_v4", "(", "eval_inputs", ",", "\n", "num_classes", ",", "\n", "is_training", "=", "False", ",", "\n", "reuse", "=", "True", ")", "\n", "predictions", "=", "tf", ".", "argmax", "(", "logits", ",", "1", ")", "\n", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "predictions", ")", "\n", "self", ".", "assertEquals", "(", "output", ".", "shape", ",", "(", "eval_batch_size", ",", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2_base": [[29, 414], ["ValueError", "max", "tensorflow.variable_scope", "ValueError", "int", "slim.arg_scope", "min", "slim.separable_conv2d", "slim.max_pool2d", "slim.conv2d", "slim.conv2d", "slim.max_pool2d", "int", "depth", "depth", "depth", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "trunc_normal", "trunc_normal", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d", "slim.conv2d", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal", "trunc_normal"], "function", ["None"], ["def", "inception_v2_base", "(", "inputs", ",", "\n", "final_endpoint", "=", "'Mixed_5c'", ",", "\n", "min_depth", "=", "16", ",", "\n", "depth_multiplier", "=", "1.0", ",", "\n", "scope", "=", "None", ")", ":", "\n", "  ", "\"\"\"Inception v2 (6a2).\n\n  Constructs an Inception v2 network from inputs to the given final endpoint.\n  This method can construct the network up to the layer inception(5b) as\n  described in http://arxiv.org/abs/1502.03167.\n\n  Args:\n    inputs: a tensor of shape [batch_size, height, width, channels].\n    final_endpoint: specifies the endpoint to construct the network up to. It\n      can be one of ['Conv2d_1a_7x7', 'MaxPool_2a_3x3', 'Conv2d_2b_1x1',\n      'Conv2d_2c_3x3', 'MaxPool_3a_3x3', 'Mixed_3b', 'Mixed_3c', 'Mixed_4a',\n      'Mixed_4b', 'Mixed_4c', 'Mixed_4d', 'Mixed_4e', 'Mixed_5a', 'Mixed_5b',\n      'Mixed_5c'].\n    min_depth: Minimum depth value (number of channels) for all convolution ops.\n      Enforced when depth_multiplier < 1, and not an active constraint when\n      depth_multiplier >= 1.\n    depth_multiplier: Float multiplier for the depth (number of channels)\n      for all convolution ops. The value must be greater than zero. Typical\n      usage will be to set this value in (0, 1) to reduce the number of\n      parameters or computation cost of the model.\n    scope: Optional variable_scope.\n\n  Returns:\n    tensor_out: output tensor corresponding to the final_endpoint.\n    end_points: a set of activations for external use, for example summaries or\n                losses.\n\n  Raises:\n    ValueError: if final_endpoint is not set to one of the predefined values,\n                or depth_multiplier <= 0\n  \"\"\"", "\n", "\n", "# end_points will collect relevant activations for external use, for example", "\n", "# summaries or losses.", "\n", "end_points", "=", "{", "}", "\n", "\n", "# Used to find thinned depths for each layer.", "\n", "if", "depth_multiplier", "<=", "0", ":", "\n", "    ", "raise", "ValueError", "(", "'depth_multiplier is not greater than zero.'", ")", "\n", "", "depth", "=", "lambda", "d", ":", "max", "(", "int", "(", "d", "*", "depth_multiplier", ")", ",", "min_depth", ")", "\n", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'InceptionV2'", ",", "[", "inputs", "]", ")", ":", "\n", "    ", "with", "slim", ".", "arg_scope", "(", "\n", "[", "slim", ".", "conv2d", ",", "slim", ".", "max_pool2d", ",", "slim", ".", "avg_pool2d", ",", "slim", ".", "separable_conv2d", "]", ",", "\n", "stride", "=", "1", ",", "padding", "=", "'SAME'", ")", ":", "\n", "\n", "# Note that sizes in the comments below assume an input spatial size of", "\n", "# 224x224, however, the inputs can be of any size greater 32x32.", "\n", "\n", "# 224 x 224 x 3", "\n", "      ", "end_point", "=", "'Conv2d_1a_7x7'", "\n", "# depthwise_multiplier here is different from depth_multiplier.", "\n", "# depthwise_multiplier determines the output channels of the initial", "\n", "# depthwise conv (see docs for tf.nn.separable_conv2d), while", "\n", "# depth_multiplier controls the # channels of the subsequent 1x1", "\n", "# convolution. Must have", "\n", "#   in_channels * depthwise_multipler <= out_channels", "\n", "# so that the separable convolution is not overparameterized.", "\n", "depthwise_multiplier", "=", "min", "(", "int", "(", "depth", "(", "64", ")", "/", "3", ")", ",", "8", ")", "\n", "net", "=", "slim", ".", "separable_conv2d", "(", "\n", "inputs", ",", "depth", "(", "64", ")", ",", "[", "7", ",", "7", "]", ",", "depth_multiplier", "=", "depthwise_multiplier", ",", "\n", "stride", "=", "2", ",", "weights_initializer", "=", "trunc_normal", "(", "1.0", ")", ",", "\n", "scope", "=", "end_point", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 112 x 112 x 64", "\n", "end_point", "=", "'MaxPool_2a_3x3'", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "end_point", ",", "stride", "=", "2", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 56 x 56 x 64", "\n", "end_point", "=", "'Conv2d_2b_1x1'", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "end_point", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.1", ")", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 56 x 56 x 64", "\n", "end_point", "=", "'Conv2d_2c_3x3'", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "192", ")", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "end_point", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 56 x 56 x 192", "\n", "end_point", "=", "'MaxPool_3a_3x3'", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "end_point", ",", "stride", "=", "2", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 28 x 28 x 192", "\n", "# Inception module.", "\n", "end_point", "=", "'Mixed_3b'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "64", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "96", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "96", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0c_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "          ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "\n", "branch_3", ",", "depth", "(", "32", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.1", ")", ",", "\n", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 28 x 28 x 256", "\n", "", "end_point", "=", "'Mixed_3c'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "96", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "96", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "96", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0c_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "          ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "\n", "branch_3", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.1", ")", ",", "\n", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 28 x 28 x 320", "\n", "", "end_point", "=", "'Mixed_4a'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "128", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_0", "=", "slim", ".", "conv2d", "(", "branch_0", ",", "depth", "(", "160", ")", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "\n", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "\n", "branch_1", ",", "depth", "(", "96", ")", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "\n", "branch_1", ",", "depth", "(", "96", ")", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "max_pool2d", "(", "\n", "net", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'MaxPool_1a_3x3'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", "]", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 14 x 14 x 576", "\n", "", "end_point", "=", "'Mixed_4b'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "224", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "\n", "branch_1", ",", "depth", "(", "96", ")", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "96", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "128", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "128", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0c_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "          ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "\n", "branch_3", ",", "depth", "(", "128", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.1", ")", ",", "\n", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 14 x 14 x 576", "\n", "", "end_point", "=", "'Mixed_4c'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "96", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "128", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "96", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "128", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "128", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0c_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "          ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "\n", "branch_3", ",", "depth", "(", "128", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.1", ")", ",", "\n", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 14 x 14 x 576", "\n", "", "end_point", "=", "'Mixed_4d'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "160", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "128", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "160", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "128", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "160", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "160", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0c_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "          ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "\n", "branch_3", ",", "depth", "(", "96", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.1", ")", ",", "\n", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "\n", "# 14 x 14 x 576", "\n", "", "end_point", "=", "'Mixed_4e'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "96", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "128", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "192", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "160", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "192", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "192", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0c_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "          ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "\n", "branch_3", ",", "depth", "(", "96", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.1", ")", ",", "\n", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 14 x 14 x 576", "\n", "", "end_point", "=", "'Mixed_5a'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "128", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_0", "=", "slim", ".", "conv2d", "(", "branch_0", ",", "depth", "(", "192", ")", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "\n", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "256", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "256", ")", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "\n", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "\n", "scope", "=", "'MaxPool_1a_3x3'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", "]", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 7 x 7 x 1024", "\n", "", "end_point", "=", "'Mixed_5b'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "352", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "320", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "160", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "224", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "224", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0c_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "          ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "\n", "branch_3", ",", "depth", "(", "128", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.1", ")", ",", "\n", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "\n", "# 7 x 7 x 1024", "\n", "", "end_point", "=", "'Mixed_5c'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "352", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "320", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "conv2d", "(", "\n", "net", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.09", ")", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "224", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "224", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0c_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "          ", "branch_3", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'MaxPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "\n", "branch_3", ",", "depth", "(", "128", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.1", ")", ",", "\n", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "", "", "raise", "ValueError", "(", "'Unknown final endpoint %s'", "%", "final_endpoint", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2": [[416, 486], ["ValueError", "tensorflow.variable_scope", "slim.arg_scope", "inception_v2.inception_v2_base", "prediction_fn", "tensorflow.variable_scope", "inception_v2._reduced_kernel_size_for_small_input", "slim.avg_pool2d", "slim.dropout", "slim.conv2d", "tensorflow.squeeze"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2.inception_v2_base", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3._reduced_kernel_size_for_small_input"], ["", "", "def", "inception_v2", "(", "inputs", ",", "\n", "num_classes", "=", "1000", ",", "\n", "is_training", "=", "True", ",", "\n", "dropout_keep_prob", "=", "0.8", ",", "\n", "min_depth", "=", "16", ",", "\n", "depth_multiplier", "=", "1.0", ",", "\n", "prediction_fn", "=", "slim", ".", "softmax", ",", "\n", "spatial_squeeze", "=", "True", ",", "\n", "reuse", "=", "None", ",", "\n", "scope", "=", "'InceptionV2'", ")", ":", "\n", "  ", "\"\"\"Inception v2 model for classification.\n\n  Constructs an Inception v2 network for classification as described in\n  http://arxiv.org/abs/1502.03167.\n\n  The default image size used to train this network is 224x224.\n\n  Args:\n    inputs: a tensor of shape [batch_size, height, width, channels].\n    num_classes: number of predicted classes.\n    is_training: whether is training or not.\n    dropout_keep_prob: the percentage of activation values that are retained.\n    min_depth: Minimum depth value (number of channels) for all convolution ops.\n      Enforced when depth_multiplier < 1, and not an active constraint when\n      depth_multiplier >= 1.\n    depth_multiplier: Float multiplier for the depth (number of channels)\n      for all convolution ops. The value must be greater than zero. Typical\n      usage will be to set this value in (0, 1) to reduce the number of\n      parameters or computation cost of the model.\n    prediction_fn: a function to get predictions out of logits.\n    spatial_squeeze: if True, logits is of shape is [B, C], if false logits is\n        of shape [B, 1, 1, C], where B is batch_size and C is number of classes.\n    reuse: whether or not the network and its variables should be reused. To be\n      able to reuse 'scope' must be given.\n    scope: Optional variable_scope.\n\n  Returns:\n    logits: the pre-softmax activations, a tensor of size\n      [batch_size, num_classes]\n    end_points: a dictionary from components of the network to the corresponding\n      activation.\n\n  Raises:\n    ValueError: if final_endpoint is not set to one of the predefined values,\n                or depth_multiplier <= 0\n  \"\"\"", "\n", "if", "depth_multiplier", "<=", "0", ":", "\n", "    ", "raise", "ValueError", "(", "'depth_multiplier is not greater than zero.'", ")", "\n", "\n", "# Final pooling and prediction", "\n", "", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'InceptionV2'", ",", "[", "inputs", ",", "num_classes", "]", ",", "\n", "reuse", "=", "reuse", ")", "as", "scope", ":", "\n", "    ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "batch_norm", ",", "slim", ".", "dropout", "]", ",", "\n", "is_training", "=", "is_training", ")", ":", "\n", "      ", "net", ",", "end_points", "=", "inception_v2_base", "(", "\n", "inputs", ",", "scope", "=", "scope", ",", "min_depth", "=", "min_depth", ",", "\n", "depth_multiplier", "=", "depth_multiplier", ")", "\n", "with", "tf", ".", "variable_scope", "(", "'Logits'", ")", ":", "\n", "        ", "kernel_size", "=", "_reduced_kernel_size_for_small_input", "(", "net", ",", "[", "7", ",", "7", "]", ")", "\n", "net", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "kernel_size", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'AvgPool_1a_{}x{}'", ".", "format", "(", "*", "kernel_size", ")", ")", "\n", "# 1 x 1 x 1024", "\n", "net", "=", "slim", ".", "dropout", "(", "net", ",", "keep_prob", "=", "dropout_keep_prob", ",", "scope", "=", "'Dropout_1b'", ")", "\n", "logits", "=", "slim", ".", "conv2d", "(", "net", ",", "num_classes", ",", "[", "1", ",", "1", "]", ",", "activation_fn", "=", "None", ",", "\n", "normalizer_fn", "=", "None", ",", "scope", "=", "'Conv2d_1c_1x1'", ")", "\n", "if", "spatial_squeeze", ":", "\n", "          ", "logits", "=", "tf", ".", "squeeze", "(", "logits", ",", "[", "1", ",", "2", "]", ",", "name", "=", "'SpatialSqueeze'", ")", "\n", "", "", "end_points", "[", "'Logits'", "]", "=", "logits", "\n", "end_points", "[", "'Predictions'", "]", "=", "prediction_fn", "(", "logits", ",", "scope", "=", "'Predictions'", ")", "\n", "", "", "return", "logits", ",", "end_points", "\n", "", "inception_v2", ".", "default_image_size", "=", "224", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v2._reduced_kernel_size_for_small_input": [[489, 518], ["input_tensor.get_shape().as_list", "input_tensor.get_shape", "min", "min"], "function", ["None"], ["def", "_reduced_kernel_size_for_small_input", "(", "input_tensor", ",", "kernel_size", ")", ":", "\n", "  ", "\"\"\"Define kernel size which is automatically reduced for small input.\n\n  If the shape of the input images is unknown at graph construction time this\n  function assumes that the input images are is large enough.\n\n  Args:\n    input_tensor: input tensor of size [batch_size, height, width, channels].\n    kernel_size: desired kernel size of length 2: [kernel_height, kernel_width]\n\n  Returns:\n    a tensor with the kernel size.\n\n  TODO(jrru): Make this function work with unknown shapes. Theoretically, this\n  can be done with the code below. Problems are two-fold: (1) If the shape was\n  known, it will be lost. (2) inception.slim.ops._two_element_tuple cannot\n  handle tensors that define the kernel size.\n      shape = tf.shape(input_tensor)\n      return = tf.pack([tf.minimum(shape[1], kernel_size[0]),\n                        tf.minimum(shape[2], kernel_size[1])])\n\n  \"\"\"", "\n", "shape", "=", "input_tensor", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "\n", "if", "shape", "[", "1", "]", "is", "None", "or", "shape", "[", "2", "]", "is", "None", ":", "\n", "    ", "kernel_size_out", "=", "kernel_size", "\n", "", "else", ":", "\n", "    ", "kernel_size_out", "=", "[", "min", "(", "shape", "[", "1", "]", ",", "kernel_size", "[", "0", "]", ")", ",", "\n", "min", "(", "shape", "[", "2", "]", ",", "kernel_size", "[", "1", "]", ")", "]", "\n", "", "return", "kernel_size_out", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3_base": [[29, 417], ["ValueError", "max", "tensorflow.variable_scope", "ValueError", "int", "slim.arg_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.max_pool2d", "slim.conv2d", "slim.conv2d", "slim.max_pool2d", "slim.arg_scope", "depth", "depth", "depth", "depth", "depth", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.concat", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.concat", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.concat", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.concat", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.conv2d", "depth", "depth", "depth", "depth", "depth", "depth", "depth", "depth"], "function", ["None"], ["def", "inception_v3_base", "(", "inputs", ",", "\n", "final_endpoint", "=", "'Mixed_7c'", ",", "\n", "min_depth", "=", "16", ",", "\n", "depth_multiplier", "=", "1.0", ",", "\n", "scope", "=", "None", ")", ":", "\n", "  ", "\"\"\"Inception model from http://arxiv.org/abs/1512.00567.\n\n  Constructs an Inception v3 network from inputs to the given final endpoint.\n  This method can construct the network up to the final inception block\n  Mixed_7c.\n\n  Note that the names of the layers in the paper do not correspond to the names\n  of the endpoints registered by this function although they build the same\n  network.\n\n  Here is a mapping from the old_names to the new names:\n  Old name          | New name\n  =======================================\n  conv0             | Conv2d_1a_3x3\n  conv1             | Conv2d_2a_3x3\n  conv2             | Conv2d_2b_3x3\n  pool1             | MaxPool_3a_3x3\n  conv3             | Conv2d_3b_1x1\n  conv4             | Conv2d_4a_3x3\n  pool2             | MaxPool_5a_3x3\n  mixed_35x35x256a  | Mixed_5b\n  mixed_35x35x288a  | Mixed_5c\n  mixed_35x35x288b  | Mixed_5d\n  mixed_17x17x768a  | Mixed_6a\n  mixed_17x17x768b  | Mixed_6b\n  mixed_17x17x768c  | Mixed_6c\n  mixed_17x17x768d  | Mixed_6d\n  mixed_17x17x768e  | Mixed_6e\n  mixed_8x8x1280a   | Mixed_7a\n  mixed_8x8x2048a   | Mixed_7b\n  mixed_8x8x2048b   | Mixed_7c\n\n  Args:\n    inputs: a tensor of size [batch_size, height, width, channels].\n    final_endpoint: specifies the endpoint to construct the network up to. It\n      can be one of ['Conv2d_1a_3x3', 'Conv2d_2a_3x3', 'Conv2d_2b_3x3',\n      'MaxPool_3a_3x3', 'Conv2d_3b_1x1', 'Conv2d_4a_3x3', 'MaxPool_5a_3x3',\n      'Mixed_5b', 'Mixed_5c', 'Mixed_5d', 'Mixed_6a', 'Mixed_6b', 'Mixed_6c',\n      'Mixed_6d', 'Mixed_6e', 'Mixed_7a', 'Mixed_7b', 'Mixed_7c'].\n    min_depth: Minimum depth value (number of channels) for all convolution ops.\n      Enforced when depth_multiplier < 1, and not an active constraint when\n      depth_multiplier >= 1.\n    depth_multiplier: Float multiplier for the depth (number of channels)\n      for all convolution ops. The value must be greater than zero. Typical\n      usage will be to set this value in (0, 1) to reduce the number of\n      parameters or computation cost of the model.\n    scope: Optional variable_scope.\n\n  Returns:\n    tensor_out: output tensor corresponding to the final_endpoint.\n    end_points: a set of activations for external use, for example summaries or\n                losses.\n\n  Raises:\n    ValueError: if final_endpoint is not set to one of the predefined values,\n                or depth_multiplier <= 0\n  \"\"\"", "\n", "# end_points will collect relevant activations for external use, for example", "\n", "# summaries or losses.", "\n", "end_points", "=", "{", "}", "\n", "\n", "if", "depth_multiplier", "<=", "0", ":", "\n", "    ", "raise", "ValueError", "(", "'depth_multiplier is not greater than zero.'", ")", "\n", "", "depth", "=", "lambda", "d", ":", "max", "(", "int", "(", "d", "*", "depth_multiplier", ")", ",", "min_depth", ")", "\n", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'InceptionV3'", ",", "[", "inputs", "]", ")", ":", "\n", "    ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "max_pool2d", ",", "slim", ".", "avg_pool2d", "]", ",", "\n", "stride", "=", "1", ",", "padding", "=", "'VALID'", ")", ":", "\n", "# 299 x 299 x 3", "\n", "      ", "end_point", "=", "'Conv2d_1a_3x3'", "\n", "net", "=", "slim", ".", "conv2d", "(", "inputs", ",", "depth", "(", "32", ")", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "end_point", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 149 x 149 x 32", "\n", "end_point", "=", "'Conv2d_2a_3x3'", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "32", ")", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "end_point", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 147 x 147 x 32", "\n", "end_point", "=", "'Conv2d_2b_3x3'", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "64", ")", ",", "[", "3", ",", "3", "]", ",", "padding", "=", "'SAME'", ",", "scope", "=", "end_point", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 147 x 147 x 64", "\n", "end_point", "=", "'MaxPool_3a_3x3'", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "end_point", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 73 x 73 x 64", "\n", "end_point", "=", "'Conv2d_3b_1x1'", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "80", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "end_point", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 73 x 73 x 80.", "\n", "end_point", "=", "'Conv2d_4a_3x3'", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "192", ")", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "end_point", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 71 x 71 x 192.", "\n", "end_point", "=", "'MaxPool_5a_3x3'", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "end_point", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# 35 x 35 x 192.", "\n", "\n", "# Inception blocks", "\n", "", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "max_pool2d", ",", "slim", ".", "avg_pool2d", "]", ",", "\n", "stride", "=", "1", ",", "padding", "=", "'SAME'", ")", ":", "\n", "# mixed: 35 x 35 x 256.", "\n", "      ", "end_point", "=", "'Mixed_5b'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "48", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "64", ")", ",", "[", "5", ",", "5", "]", ",", "\n", "scope", "=", "'Conv2d_0b_5x5'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "96", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "96", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0c_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "          ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "depth", "(", "32", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "\n", "# mixed_1: 35 x 35 x 288.", "\n", "end_point", "=", "'Mixed_5c'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "48", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "64", ")", ",", "[", "5", ",", "5", "]", ",", "\n", "scope", "=", "'Conv_1_0c_5x5'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "96", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "96", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0c_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "          ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "\n", "# mixed_2: 35 x 35 x 288.", "\n", "end_point", "=", "'Mixed_5d'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "48", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "64", ")", ",", "[", "5", ",", "5", "]", ",", "\n", "scope", "=", "'Conv2d_0b_5x5'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "96", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "96", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0c_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "          ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "\n", "# mixed_3: 17 x 17 x 768.", "\n", "end_point", "=", "'Mixed_6a'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "384", ")", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "\n", "padding", "=", "'VALID'", ",", "scope", "=", "'Conv2d_1a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "64", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "96", ")", ",", "[", "3", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "96", ")", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "\n", "padding", "=", "'VALID'", ",", "scope", "=", "'Conv2d_1a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'MaxPool_1a_3x3'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "\n", "# mixed4: 17 x 17 x 768.", "\n", "end_point", "=", "'Mixed_6b'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "128", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "128", ")", ",", "[", "1", ",", "7", "]", ",", "\n", "scope", "=", "'Conv2d_0b_1x7'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "192", ")", ",", "[", "7", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0c_7x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "128", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "128", ")", ",", "[", "7", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0b_7x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "128", ")", ",", "[", "1", ",", "7", "]", ",", "\n", "scope", "=", "'Conv2d_0c_1x7'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "128", ")", ",", "[", "7", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0d_7x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "7", "]", ",", "\n", "scope", "=", "'Conv2d_0e_1x7'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "          ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "\n", "# mixed_5: 17 x 17 x 768.", "\n", "end_point", "=", "'Mixed_6c'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "160", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "160", ")", ",", "[", "1", ",", "7", "]", ",", "\n", "scope", "=", "'Conv2d_0b_1x7'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "192", ")", ",", "[", "7", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0c_7x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "160", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "160", ")", ",", "[", "7", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0b_7x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "160", ")", ",", "[", "1", ",", "7", "]", ",", "\n", "scope", "=", "'Conv2d_0c_1x7'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "160", ")", ",", "[", "7", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0d_7x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "7", "]", ",", "\n", "scope", "=", "'Conv2d_0e_1x7'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "          ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# mixed_6: 17 x 17 x 768.", "\n", "end_point", "=", "'Mixed_6d'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "160", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "160", ")", ",", "[", "1", ",", "7", "]", ",", "\n", "scope", "=", "'Conv2d_0b_1x7'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "192", ")", ",", "[", "7", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0c_7x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "160", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "160", ")", ",", "[", "7", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0b_7x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "160", ")", ",", "[", "1", ",", "7", "]", ",", "\n", "scope", "=", "'Conv2d_0c_1x7'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "160", ")", ",", "[", "7", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0d_7x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "7", "]", ",", "\n", "scope", "=", "'Conv2d_0e_1x7'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "          ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "\n", "# mixed_7: 17 x 17 x 768.", "\n", "end_point", "=", "'Mixed_6e'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "7", "]", ",", "\n", "scope", "=", "'Conv2d_0b_1x7'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "192", ")", ",", "[", "7", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0c_7x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "192", ")", ",", "[", "7", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0b_7x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "7", "]", ",", "\n", "scope", "=", "'Conv2d_0c_1x7'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "192", ")", ",", "[", "7", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0d_7x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "7", "]", ",", "\n", "scope", "=", "'Conv2d_0e_1x7'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "          ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "\n", "# mixed_8: 8 x 8 x 1280.", "\n", "end_point", "=", "'Mixed_7a'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_0", "=", "slim", ".", "conv2d", "(", "branch_0", ",", "depth", "(", "320", ")", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "\n", "padding", "=", "'VALID'", ",", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "7", "]", ",", "\n", "scope", "=", "'Conv2d_0b_1x7'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "192", ")", ",", "[", "7", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0c_7x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "192", ")", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "\n", "padding", "=", "'VALID'", ",", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'MaxPool_1a_3x3'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "# mixed_9: 8 x 8 x 2048.", "\n", "end_point", "=", "'Mixed_7b'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "320", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "384", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "tf", ".", "concat", "(", "3", ",", "[", "\n", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "384", ")", ",", "[", "1", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_1x3'", ")", ",", "\n", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "384", ")", ",", "[", "3", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_3x1'", ")", "]", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "448", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "\n", "branch_2", ",", "depth", "(", "384", ")", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_2", "=", "tf", ".", "concat", "(", "3", ",", "[", "\n", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "384", ")", ",", "[", "1", ",", "3", "]", ",", "scope", "=", "'Conv2d_0c_1x3'", ")", ",", "\n", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "384", ")", ",", "[", "3", ",", "1", "]", ",", "scope", "=", "'Conv2d_0d_3x1'", ")", "]", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "          ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "\n", "branch_3", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "\n", "# mixed_10: 8 x 8 x 2048.", "\n", "end_point", "=", "'Mixed_7c'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "        ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "          ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "320", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "          ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "384", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "tf", ".", "concat", "(", "3", ",", "[", "\n", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "384", ")", ",", "[", "1", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_1x3'", ")", ",", "\n", "slim", ".", "conv2d", "(", "branch_1", ",", "depth", "(", "384", ")", ",", "[", "3", ",", "1", "]", ",", "scope", "=", "'Conv2d_0c_3x1'", ")", "]", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "          ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "depth", "(", "448", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "\n", "branch_2", ",", "depth", "(", "384", ")", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "branch_2", "=", "tf", ".", "concat", "(", "3", ",", "[", "\n", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "384", ")", ",", "[", "1", ",", "3", "]", ",", "scope", "=", "'Conv2d_0c_1x3'", ")", ",", "\n", "slim", ".", "conv2d", "(", "branch_2", ",", "depth", "(", "384", ")", ",", "[", "3", ",", "1", "]", ",", "scope", "=", "'Conv2d_0d_3x1'", ")", "]", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "          ", "branch_3", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "\n", "branch_3", ",", "depth", "(", "192", ")", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "end_point", "==", "final_endpoint", ":", "return", "net", ",", "end_points", "\n", "", "raise", "ValueError", "(", "'Unknown final endpoint %s'", "%", "final_endpoint", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3": [[419, 526], ["ValueError", "max", "tensorflow.variable_scope", "int", "slim.arg_scope", "inception_v3.inception_v3_base", "prediction_fn", "slim.arg_scope", "tensorflow.variable_scope", "inception_v3._reduced_kernel_size_for_small_input", "slim.avg_pool2d", "slim.dropout", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "inception_v3._reduced_kernel_size_for_small_input", "slim.conv2d", "slim.conv2d", "tensorflow.squeeze", "depth", "depth", "tensorflow.squeeze", "trunc_normal", "trunc_normal"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3_base", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3._reduced_kernel_size_for_small_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3._reduced_kernel_size_for_small_input"], ["", "", "def", "inception_v3", "(", "inputs", ",", "\n", "num_classes", "=", "1000", ",", "\n", "is_training", "=", "True", ",", "\n", "dropout_keep_prob", "=", "0.8", ",", "\n", "min_depth", "=", "16", ",", "\n", "depth_multiplier", "=", "1.0", ",", "\n", "prediction_fn", "=", "slim", ".", "softmax", ",", "\n", "spatial_squeeze", "=", "True", ",", "\n", "reuse", "=", "None", ",", "\n", "scope", "=", "'InceptionV3'", ")", ":", "\n", "  ", "\"\"\"Inception model from http://arxiv.org/abs/1512.00567.\n\n  \"Rethinking the Inception Architecture for Computer Vision\"\n\n  Christian Szegedy, Vincent Vanhoucke, Sergey Ioffe, Jonathon Shlens,\n  Zbigniew Wojna.\n\n  With the default arguments this method constructs the exact model defined in\n  the paper. However, one can experiment with variations of the inception_v3\n  network by changing arguments dropout_keep_prob, min_depth and\n  depth_multiplier.\n\n  The default image size used to train this network is 299x299.\n\n  Args:\n    inputs: a tensor of size [batch_size, height, width, channels].\n    num_classes: number of predicted classes.\n    is_training: whether is training or not.\n    dropout_keep_prob: the percentage of activation values that are retained.\n    min_depth: Minimum depth value (number of channels) for all convolution ops.\n      Enforced when depth_multiplier < 1, and not an active constraint when\n      depth_multiplier >= 1.\n    depth_multiplier: Float multiplier for the depth (number of channels)\n      for all convolution ops. The value must be greater than zero. Typical\n      usage will be to set this value in (0, 1) to reduce the number of\n      parameters or computation cost of the model.\n    prediction_fn: a function to get predictions out of logits.\n    spatial_squeeze: if True, logits is of shape is [B, C], if false logits is\n        of shape [B, 1, 1, C], where B is batch_size and C is number of classes.\n    reuse: whether or not the network and its variables should be reused. To be\n      able to reuse 'scope' must be given.\n    scope: Optional variable_scope.\n\n  Returns:\n    logits: the pre-softmax activations, a tensor of size\n      [batch_size, num_classes]\n    end_points: a dictionary from components of the network to the corresponding\n      activation.\n\n  Raises:\n    ValueError: if 'depth_multiplier' is less than or equal to zero.\n  \"\"\"", "\n", "if", "depth_multiplier", "<=", "0", ":", "\n", "    ", "raise", "ValueError", "(", "'depth_multiplier is not greater than zero.'", ")", "\n", "", "depth", "=", "lambda", "d", ":", "max", "(", "int", "(", "d", "*", "depth_multiplier", ")", ",", "min_depth", ")", "\n", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'InceptionV3'", ",", "[", "inputs", ",", "num_classes", "]", ",", "\n", "reuse", "=", "reuse", ")", "as", "scope", ":", "\n", "    ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "batch_norm", ",", "slim", ".", "dropout", "]", ",", "\n", "is_training", "=", "is_training", ")", ":", "\n", "      ", "net", ",", "end_points", "=", "inception_v3_base", "(", "\n", "inputs", ",", "scope", "=", "scope", ",", "min_depth", "=", "min_depth", ",", "\n", "depth_multiplier", "=", "depth_multiplier", ")", "\n", "\n", "# Auxiliary Head logits", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "max_pool2d", ",", "slim", ".", "avg_pool2d", "]", ",", "\n", "stride", "=", "1", ",", "padding", "=", "'SAME'", ")", ":", "\n", "        ", "aux_logits", "=", "end_points", "[", "'Mixed_6e'", "]", "\n", "with", "tf", ".", "variable_scope", "(", "'AuxLogits'", ")", ":", "\n", "          ", "aux_logits", "=", "slim", ".", "avg_pool2d", "(", "\n", "aux_logits", ",", "[", "5", ",", "5", "]", ",", "stride", "=", "3", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'AvgPool_1a_5x5'", ")", "\n", "aux_logits", "=", "slim", ".", "conv2d", "(", "aux_logits", ",", "depth", "(", "128", ")", ",", "[", "1", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_1b_1x1'", ")", "\n", "\n", "# Shape of feature map before the final layer.", "\n", "kernel_size", "=", "_reduced_kernel_size_for_small_input", "(", "\n", "aux_logits", ",", "[", "5", ",", "5", "]", ")", "\n", "aux_logits", "=", "slim", ".", "conv2d", "(", "\n", "aux_logits", ",", "depth", "(", "768", ")", ",", "kernel_size", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.01", ")", ",", "\n", "padding", "=", "'VALID'", ",", "scope", "=", "'Conv2d_2a_{}x{}'", ".", "format", "(", "*", "kernel_size", ")", ")", "\n", "aux_logits", "=", "slim", ".", "conv2d", "(", "\n", "aux_logits", ",", "num_classes", ",", "[", "1", ",", "1", "]", ",", "activation_fn", "=", "None", ",", "\n", "normalizer_fn", "=", "None", ",", "weights_initializer", "=", "trunc_normal", "(", "0.001", ")", ",", "\n", "scope", "=", "'Conv2d_2b_1x1'", ")", "\n", "if", "spatial_squeeze", ":", "\n", "            ", "aux_logits", "=", "tf", ".", "squeeze", "(", "aux_logits", ",", "[", "1", ",", "2", "]", ",", "name", "=", "'SpatialSqueeze'", ")", "\n", "", "end_points", "[", "'AuxLogits'", "]", "=", "aux_logits", "\n", "\n", "# Final pooling and prediction", "\n", "", "", "with", "tf", ".", "variable_scope", "(", "'Logits'", ")", ":", "\n", "        ", "kernel_size", "=", "_reduced_kernel_size_for_small_input", "(", "net", ",", "[", "8", ",", "8", "]", ")", "\n", "net", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "kernel_size", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'AvgPool_1a_{}x{}'", ".", "format", "(", "*", "kernel_size", ")", ")", "\n", "# 1 x 1 x 2048", "\n", "net", "=", "slim", ".", "dropout", "(", "net", ",", "keep_prob", "=", "dropout_keep_prob", ",", "scope", "=", "'Dropout_1b'", ")", "\n", "end_points", "[", "'PreLogits'", "]", "=", "net", "\n", "# 2048", "\n", "logits", "=", "slim", ".", "conv2d", "(", "net", ",", "num_classes", ",", "[", "1", ",", "1", "]", ",", "activation_fn", "=", "None", ",", "\n", "normalizer_fn", "=", "None", ",", "scope", "=", "'Conv2d_1c_1x1'", ")", "\n", "if", "spatial_squeeze", ":", "\n", "          ", "logits", "=", "tf", ".", "squeeze", "(", "logits", ",", "[", "1", ",", "2", "]", ",", "name", "=", "'SpatialSqueeze'", ")", "\n", "# 1000", "\n", "", "", "end_points", "[", "'Logits'", "]", "=", "logits", "\n", "end_points", "[", "'Predictions'", "]", "=", "prediction_fn", "(", "logits", ",", "scope", "=", "'Predictions'", ")", "\n", "", "", "return", "logits", ",", "end_points", "\n", "", "inception_v3", ".", "default_image_size", "=", "299", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3._reduced_kernel_size_for_small_input": [[529, 558], ["input_tensor.get_shape().as_list", "input_tensor.get_shape", "min", "min"], "function", ["None"], ["def", "_reduced_kernel_size_for_small_input", "(", "input_tensor", ",", "kernel_size", ")", ":", "\n", "  ", "\"\"\"Define kernel size which is automatically reduced for small input.\n\n  If the shape of the input images is unknown at graph construction time this\n  function assumes that the input images are is large enough.\n\n  Args:\n    input_tensor: input tensor of size [batch_size, height, width, channels].\n    kernel_size: desired kernel size of length 2: [kernel_height, kernel_width]\n\n  Returns:\n    a tensor with the kernel size.\n\n  TODO(jrru): Make this function work with unknown shapes. Theoretically, this\n  can be done with the code below. Problems are two-fold: (1) If the shape was\n  known, it will be lost. (2) inception.slim.ops._two_element_tuple cannot\n  handle tensors that define the kernel size.\n      shape = tf.shape(input_tensor)\n      return = tf.pack([tf.minimum(shape[1], kernel_size[0]),\n                        tf.minimum(shape[2], kernel_size[1])])\n\n  \"\"\"", "\n", "shape", "=", "input_tensor", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "\n", "if", "shape", "[", "1", "]", "is", "None", "or", "shape", "[", "2", "]", "is", "None", ":", "\n", "    ", "kernel_size_out", "=", "kernel_size", "\n", "", "else", ":", "\n", "    ", "kernel_size_out", "=", "[", "min", "(", "shape", "[", "1", "]", ",", "kernel_size", "[", "0", "]", ")", ",", "\n", "min", "(", "shape", "[", "2", "]", ",", "kernel_size", "[", "1", "]", ")", "]", "\n", "", "return", "kernel_size_out", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_arg_scope": [[49, 64], ["slim.arg_scope", "slim.arg_scope", "slim.l2_regularizer"], "function", ["None"], ["def", "vgg_arg_scope", "(", "weight_decay", "=", "0.0005", ")", ":", "\n", "  ", "\"\"\"Defines the VGG arg scope.\n\n  Args:\n    weight_decay: The l2 regularization coefficient.\n\n  Returns:\n    An arg_scope.\n  \"\"\"", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "fully_connected", "]", ",", "\n", "activation_fn", "=", "tf", ".", "nn", ".", "relu", ",", "\n", "weights_regularizer", "=", "slim", ".", "l2_regularizer", "(", "weight_decay", ")", ",", "\n", "biases_initializer", "=", "tf", ".", "zeros_initializer", ")", ":", "\n", "    ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", "]", ",", "padding", "=", "'SAME'", ")", "as", "arg_sc", ":", "\n", "      ", "return", "arg_sc", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_a": [[66, 122], ["tensorflow.variable_scope", "slim.arg_scope", "slim.repeat", "slim.max_pool2d", "slim.repeat", "slim.max_pool2d", "slim.repeat", "slim.max_pool2d", "slim.repeat", "slim.max_pool2d", "slim.repeat", "slim.max_pool2d", "slim.conv2d", "slim.dropout", "slim.conv2d", "slim.dropout", "slim.conv2d", "slim.utils.convert_collection_to_dict", "tensorflow.squeeze"], "function", ["None"], ["", "", "", "def", "vgg_a", "(", "inputs", ",", "\n", "num_classes", "=", "1000", ",", "\n", "is_training", "=", "True", ",", "\n", "dropout_keep_prob", "=", "0.5", ",", "\n", "spatial_squeeze", "=", "True", ",", "\n", "scope", "=", "'vgg_a'", ")", ":", "\n", "  ", "\"\"\"Oxford Net VGG 11-Layers version A Example.\n\n  Note: All the fully_connected layers have been transformed to conv2d layers.\n        To use in classification mode, resize input to 224x224.\n\n  Args:\n    inputs: a tensor of size [batch_size, height, width, channels].\n    num_classes: number of predicted classes.\n    is_training: whether or not the model is being trained.\n    dropout_keep_prob: the probability that activations are kept in the dropout\n      layers during training.\n    spatial_squeeze: whether or not should squeeze the spatial dimensions of the\n      outputs. Useful to remove unnecessary dimensions for classification.\n    scope: Optional scope for the variables.\n\n  Returns:\n    the last op containing the log predictions and end_points dict.\n  \"\"\"", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'vgg_a'", ",", "[", "inputs", "]", ")", "as", "sc", ":", "\n", "    ", "end_points_collection", "=", "sc", ".", "name", "+", "'_end_points'", "\n", "# Collect outputs for conv2d, fully_connected and max_pool2d.", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "max_pool2d", "]", ",", "\n", "outputs_collections", "=", "end_points_collection", ")", ":", "\n", "      ", "net", "=", "slim", ".", "repeat", "(", "inputs", ",", "1", ",", "slim", ".", "conv2d", ",", "64", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'conv1'", ")", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "2", ",", "2", "]", ",", "scope", "=", "'pool1'", ")", "\n", "net", "=", "slim", ".", "repeat", "(", "net", ",", "1", ",", "slim", ".", "conv2d", ",", "128", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'conv2'", ")", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "2", ",", "2", "]", ",", "scope", "=", "'pool2'", ")", "\n", "net", "=", "slim", ".", "repeat", "(", "net", ",", "2", ",", "slim", ".", "conv2d", ",", "256", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'conv3'", ")", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "2", ",", "2", "]", ",", "scope", "=", "'pool3'", ")", "\n", "net", "=", "slim", ".", "repeat", "(", "net", ",", "2", ",", "slim", ".", "conv2d", ",", "512", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'conv4'", ")", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "2", ",", "2", "]", ",", "scope", "=", "'pool4'", ")", "\n", "net", "=", "slim", ".", "repeat", "(", "net", ",", "2", ",", "slim", ".", "conv2d", ",", "512", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'conv5'", ")", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "2", ",", "2", "]", ",", "scope", "=", "'pool5'", ")", "\n", "# Use conv2d instead of fully_connected layers.", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "4096", ",", "[", "7", ",", "7", "]", ",", "padding", "=", "'VALID'", ",", "scope", "=", "'fc6'", ")", "\n", "net", "=", "slim", ".", "dropout", "(", "net", ",", "dropout_keep_prob", ",", "is_training", "=", "is_training", ",", "\n", "scope", "=", "'dropout6'", ")", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "4096", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'fc7'", ")", "\n", "net", "=", "slim", ".", "dropout", "(", "net", ",", "dropout_keep_prob", ",", "is_training", "=", "is_training", ",", "\n", "scope", "=", "'dropout7'", ")", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "num_classes", ",", "[", "1", ",", "1", "]", ",", "\n", "activation_fn", "=", "None", ",", "\n", "normalizer_fn", "=", "None", ",", "\n", "scope", "=", "'fc8'", ")", "\n", "# Convert end_points_collection into a end_point dict.", "\n", "end_points", "=", "slim", ".", "utils", ".", "convert_collection_to_dict", "(", "end_points_collection", ")", "\n", "if", "spatial_squeeze", ":", "\n", "        ", "net", "=", "tf", ".", "squeeze", "(", "net", ",", "[", "1", ",", "2", "]", ",", "name", "=", "'fc8/squeezed'", ")", "\n", "end_points", "[", "sc", ".", "name", "+", "'/fc8'", "]", "=", "net", "\n", "", "return", "net", ",", "end_points", "\n", "", "", "", "vgg_a", ".", "default_image_size", "=", "224", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_16": [[125, 181], ["tensorflow.variable_scope", "slim.arg_scope", "slim.repeat", "slim.max_pool2d", "slim.repeat", "slim.max_pool2d", "slim.repeat", "slim.max_pool2d", "slim.repeat", "slim.max_pool2d", "slim.repeat", "slim.max_pool2d", "slim.conv2d", "slim.dropout", "slim.conv2d", "slim.dropout", "slim.conv2d", "slim.utils.convert_collection_to_dict", "tensorflow.squeeze"], "function", ["None"], ["def", "vgg_16", "(", "inputs", ",", "\n", "num_classes", "=", "1000", ",", "\n", "is_training", "=", "True", ",", "\n", "dropout_keep_prob", "=", "0.5", ",", "\n", "spatial_squeeze", "=", "True", ",", "\n", "scope", "=", "'vgg_16'", ")", ":", "\n", "  ", "\"\"\"Oxford Net VGG 16-Layers version D Example.\n\n  Note: All the fully_connected layers have been transformed to conv2d layers.\n        To use in classification mode, resize input to 224x224.\n\n  Args:\n    inputs: a tensor of size [batch_size, height, width, channels].\n    num_classes: number of predicted classes.\n    is_training: whether or not the model is being trained.\n    dropout_keep_prob: the probability that activations are kept in the dropout\n      layers during training.\n    spatial_squeeze: whether or not should squeeze the spatial dimensions of the\n      outputs. Useful to remove unnecessary dimensions for classification.\n    scope: Optional scope for the variables.\n\n  Returns:\n    the last op containing the log predictions and end_points dict.\n  \"\"\"", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'vgg_16'", ",", "[", "inputs", "]", ")", "as", "sc", ":", "\n", "    ", "end_points_collection", "=", "sc", ".", "name", "+", "'_end_points'", "\n", "# Collect outputs for conv2d, fully_connected and max_pool2d.", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "fully_connected", ",", "slim", ".", "max_pool2d", "]", ",", "\n", "outputs_collections", "=", "end_points_collection", ")", ":", "\n", "      ", "net", "=", "slim", ".", "repeat", "(", "inputs", ",", "2", ",", "slim", ".", "conv2d", ",", "64", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'conv1'", ")", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "2", ",", "2", "]", ",", "scope", "=", "'pool1'", ")", "\n", "net", "=", "slim", ".", "repeat", "(", "net", ",", "2", ",", "slim", ".", "conv2d", ",", "128", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'conv2'", ")", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "2", ",", "2", "]", ",", "scope", "=", "'pool2'", ")", "\n", "net", "=", "slim", ".", "repeat", "(", "net", ",", "3", ",", "slim", ".", "conv2d", ",", "256", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'conv3'", ")", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "2", ",", "2", "]", ",", "scope", "=", "'pool3'", ")", "\n", "net", "=", "slim", ".", "repeat", "(", "net", ",", "3", ",", "slim", ".", "conv2d", ",", "512", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'conv4'", ")", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "2", ",", "2", "]", ",", "scope", "=", "'pool4'", ")", "\n", "net", "=", "slim", ".", "repeat", "(", "net", ",", "3", ",", "slim", ".", "conv2d", ",", "512", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'conv5'", ")", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "2", ",", "2", "]", ",", "scope", "=", "'pool5'", ")", "\n", "# Use conv2d instead of fully_connected layers.", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "4096", ",", "[", "7", ",", "7", "]", ",", "padding", "=", "'VALID'", ",", "scope", "=", "'fc6'", ")", "\n", "net", "=", "slim", ".", "dropout", "(", "net", ",", "dropout_keep_prob", ",", "is_training", "=", "is_training", ",", "\n", "scope", "=", "'dropout6'", ")", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "4096", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'fc7'", ")", "\n", "net", "=", "slim", ".", "dropout", "(", "net", ",", "dropout_keep_prob", ",", "is_training", "=", "is_training", ",", "\n", "scope", "=", "'dropout7'", ")", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "num_classes", ",", "[", "1", ",", "1", "]", ",", "\n", "activation_fn", "=", "None", ",", "\n", "normalizer_fn", "=", "None", ",", "\n", "scope", "=", "'fc8'", ")", "\n", "# Convert end_points_collection into a end_point dict.", "\n", "end_points", "=", "slim", ".", "utils", ".", "convert_collection_to_dict", "(", "end_points_collection", ")", "\n", "if", "spatial_squeeze", ":", "\n", "        ", "net", "=", "tf", ".", "squeeze", "(", "net", ",", "[", "1", ",", "2", "]", ",", "name", "=", "'fc8/squeezed'", ")", "\n", "end_points", "[", "sc", ".", "name", "+", "'/fc8'", "]", "=", "net", "\n", "", "return", "net", ",", "end_points", "\n", "", "", "", "vgg_16", ".", "default_image_size", "=", "224", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_19": [[184, 240], ["tensorflow.variable_scope", "slim.arg_scope", "slim.repeat", "slim.max_pool2d", "slim.repeat", "slim.max_pool2d", "slim.repeat", "slim.max_pool2d", "slim.repeat", "slim.max_pool2d", "slim.repeat", "slim.max_pool2d", "slim.conv2d", "slim.dropout", "slim.conv2d", "slim.dropout", "slim.conv2d", "slim.utils.convert_collection_to_dict", "tensorflow.squeeze"], "function", ["None"], ["def", "vgg_19", "(", "inputs", ",", "\n", "num_classes", "=", "1000", ",", "\n", "is_training", "=", "True", ",", "\n", "dropout_keep_prob", "=", "0.5", ",", "\n", "spatial_squeeze", "=", "True", ",", "\n", "scope", "=", "'vgg_19'", ")", ":", "\n", "  ", "\"\"\"Oxford Net VGG 19-Layers version E Example.\n\n  Note: All the fully_connected layers have been transformed to conv2d layers.\n        To use in classification mode, resize input to 224x224.\n\n  Args:\n    inputs: a tensor of size [batch_size, height, width, channels].\n    num_classes: number of predicted classes.\n    is_training: whether or not the model is being trained.\n    dropout_keep_prob: the probability that activations are kept in the dropout\n      layers during training.\n    spatial_squeeze: whether or not should squeeze the spatial dimensions of the\n      outputs. Useful to remove unnecessary dimensions for classification.\n    scope: Optional scope for the variables.\n\n  Returns:\n    the last op containing the log predictions and end_points dict.\n  \"\"\"", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'vgg_19'", ",", "[", "inputs", "]", ")", "as", "sc", ":", "\n", "    ", "end_points_collection", "=", "sc", ".", "name", "+", "'_end_points'", "\n", "# Collect outputs for conv2d, fully_connected and max_pool2d.", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "fully_connected", ",", "slim", ".", "max_pool2d", "]", ",", "\n", "outputs_collections", "=", "end_points_collection", ")", ":", "\n", "      ", "net", "=", "slim", ".", "repeat", "(", "inputs", ",", "2", ",", "slim", ".", "conv2d", ",", "64", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'conv1'", ")", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "2", ",", "2", "]", ",", "scope", "=", "'pool1'", ")", "\n", "net", "=", "slim", ".", "repeat", "(", "net", ",", "2", ",", "slim", ".", "conv2d", ",", "128", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'conv2'", ")", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "2", ",", "2", "]", ",", "scope", "=", "'pool2'", ")", "\n", "net", "=", "slim", ".", "repeat", "(", "net", ",", "4", ",", "slim", ".", "conv2d", ",", "256", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'conv3'", ")", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "2", ",", "2", "]", ",", "scope", "=", "'pool3'", ")", "\n", "net", "=", "slim", ".", "repeat", "(", "net", ",", "4", ",", "slim", ".", "conv2d", ",", "512", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'conv4'", ")", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "2", ",", "2", "]", ",", "scope", "=", "'pool4'", ")", "\n", "net", "=", "slim", ".", "repeat", "(", "net", ",", "4", ",", "slim", ".", "conv2d", ",", "512", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'conv5'", ")", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "2", ",", "2", "]", ",", "scope", "=", "'pool5'", ")", "\n", "# Use conv2d instead of fully_connected layers.", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "4096", ",", "[", "7", ",", "7", "]", ",", "padding", "=", "'VALID'", ",", "scope", "=", "'fc6'", ")", "\n", "net", "=", "slim", ".", "dropout", "(", "net", ",", "dropout_keep_prob", ",", "is_training", "=", "is_training", ",", "\n", "scope", "=", "'dropout6'", ")", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "4096", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'fc7'", ")", "\n", "net", "=", "slim", ".", "dropout", "(", "net", ",", "dropout_keep_prob", ",", "is_training", "=", "is_training", ",", "\n", "scope", "=", "'dropout7'", ")", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "num_classes", ",", "[", "1", ",", "1", "]", ",", "\n", "activation_fn", "=", "None", ",", "\n", "normalizer_fn", "=", "None", ",", "\n", "scope", "=", "'fc8'", ")", "\n", "# Convert end_points_collection into a end_point dict.", "\n", "end_points", "=", "slim", ".", "utils", ".", "convert_collection_to_dict", "(", "end_points_collection", ")", "\n", "if", "spatial_squeeze", ":", "\n", "        ", "net", "=", "tf", ".", "squeeze", "(", "net", ",", "[", "1", ",", "2", "]", ",", "name", "=", "'fc8/squeezed'", ")", "\n", "end_points", "[", "sc", ".", "name", "+", "'/fc8'", "]", "=", "net", "\n", "", "return", "net", ",", "end_points", "\n", "", "", "", "vgg_19", ".", "default_image_size", "=", "224", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.nets_factory.get_network_fn": [[68, 97], ["functools.wraps", "hasattr", "ValueError", "slim.arg_scope", "func"], "function", ["None"], ["def", "get_network_fn", "(", "name", ",", "num_classes", ",", "weight_decay", "=", "0.0", ",", "is_training", "=", "False", ")", ":", "\n", "  ", "\"\"\"Returns a network_fn such as `logits, end_points = network_fn(images)`.\n\n  Args:\n    name: The name of the network.\n    num_classes: The number of classes to use for classification.\n    weight_decay: The l2 coefficient for the model weights.\n    is_training: `True` if the model is being used for training and `False`\n      otherwise.\n\n  Returns:\n    network_fn: A function that applies the model to a batch of images. It has\n      the following signature:\n        logits, end_points = network_fn(images)\n  Raises:\n    ValueError: If network `name` is not recognized.\n  \"\"\"", "\n", "if", "name", "not", "in", "networks_map", ":", "\n", "    ", "raise", "ValueError", "(", "'Name of network unknown %s'", "%", "name", ")", "\n", "", "arg_scope", "=", "arg_scopes_map", "[", "name", "]", "(", "weight_decay", "=", "weight_decay", ")", "\n", "func", "=", "networks_map", "[", "name", "]", "\n", "@", "functools", ".", "wraps", "(", "func", ")", "\n", "def", "network_fn", "(", "images", ")", ":", "\n", "    ", "with", "slim", ".", "arg_scope", "(", "arg_scope", ")", ":", "\n", "      ", "return", "func", "(", "images", ",", "num_classes", ",", "is_training", "=", "is_training", ")", "\n", "", "", "if", "hasattr", "(", "func", ",", "'default_image_size'", ")", ":", "\n", "    ", "network_fn", ".", "default_image_size", "=", "func", ".", "default_image_size", "\n", "\n", "", "return", "network_fn", "\n", "", ""]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1_test.InceptionV1Test.testBuildClassificationNetwork": [[31, 44], ["tensorflow.random_uniform", "nets.inception.inception_v1", "inception_v1_test.InceptionV1Test.assertTrue", "inception_v1_test.InceptionV1Test.assertListEqual", "inception_v1_test.InceptionV1Test.assertTrue", "inception_v1_test.InceptionV1Test.assertListEqual", "logits.op.name.startswith", "logits.get_shape().as_list", "end_points[].get_shape().as_list", "logits.get_shape", "end_points[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1.inception_v1"], ["  ", "def", "testBuildClassificationNetwork", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "end_points", "=", "inception", ".", "inception_v1", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV1/Logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "self", ".", "assertTrue", "(", "'Predictions'", "in", "end_points", ")", "\n", "self", ".", "assertListEqual", "(", "end_points", "[", "'Predictions'", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1_test.InceptionV1Test.testBuildBaseNetwork": [[45, 60], ["tensorflow.random_uniform", "nets.inception.inception_v1_base", "inception_v1_test.InceptionV1Test.assertTrue", "inception_v1_test.InceptionV1Test.assertListEqual", "inception_v1_test.InceptionV1Test.assertItemsEqual", "mixed_6c.op.name.startswith", "mixed_6c.get_shape().as_list", "end_points.keys", "mixed_6c.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1.inception_v1_base"], ["", "def", "testBuildBaseNetwork", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "mixed_6c", ",", "end_points", "=", "inception", ".", "inception_v1_base", "(", "inputs", ")", "\n", "self", ".", "assertTrue", "(", "mixed_6c", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV1/Mixed_5c'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "mixed_6c", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "7", ",", "7", ",", "1024", "]", ")", "\n", "expected_endpoints", "=", "[", "'Conv2d_1a_7x7'", ",", "'MaxPool_2a_3x3'", ",", "'Conv2d_2b_1x1'", ",", "\n", "'Conv2d_2c_3x3'", ",", "'MaxPool_3a_3x3'", ",", "'Mixed_3b'", ",", "\n", "'Mixed_3c'", ",", "'MaxPool_4a_3x3'", ",", "'Mixed_4b'", ",", "'Mixed_4c'", ",", "\n", "'Mixed_4d'", ",", "'Mixed_4e'", ",", "'Mixed_4f'", ",", "'MaxPool_5a_2x2'", ",", "\n", "'Mixed_5b'", ",", "'Mixed_5c'", "]", "\n", "self", ".", "assertItemsEqual", "(", "end_points", ".", "keys", "(", ")", ",", "expected_endpoints", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1_test.InceptionV1Test.testBuildOnlyUptoFinalEndpoint": [[61, 77], ["enumerate", "tensorflow.Graph().as_default", "tensorflow.random_uniform", "nets.inception.inception_v1_base", "inception_v1_test.InceptionV1Test.assertTrue", "inception_v1_test.InceptionV1Test.assertItemsEqual", "out_tensor.op.name.startswith", "tensorflow.Graph"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1.inception_v1_base"], ["", "def", "testBuildOnlyUptoFinalEndpoint", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "endpoints", "=", "[", "'Conv2d_1a_7x7'", ",", "'MaxPool_2a_3x3'", ",", "'Conv2d_2b_1x1'", ",", "\n", "'Conv2d_2c_3x3'", ",", "'MaxPool_3a_3x3'", ",", "'Mixed_3b'", ",", "'Mixed_3c'", ",", "\n", "'MaxPool_4a_3x3'", ",", "'Mixed_4b'", ",", "'Mixed_4c'", ",", "'Mixed_4d'", ",", "\n", "'Mixed_4e'", ",", "'Mixed_4f'", ",", "'MaxPool_5a_2x2'", ",", "'Mixed_5b'", ",", "\n", "'Mixed_5c'", "]", "\n", "for", "index", ",", "endpoint", "in", "enumerate", "(", "endpoints", ")", ":", "\n", "      ", "with", "tf", ".", "Graph", "(", ")", ".", "as_default", "(", ")", ":", "\n", "        ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "out_tensor", ",", "end_points", "=", "inception", ".", "inception_v1_base", "(", "\n", "inputs", ",", "final_endpoint", "=", "endpoint", ")", "\n", "self", ".", "assertTrue", "(", "out_tensor", ".", "op", ".", "name", ".", "startswith", "(", "\n", "'InceptionV1/'", "+", "endpoint", ")", ")", "\n", "self", ".", "assertItemsEqual", "(", "endpoints", "[", ":", "index", "+", "1", "]", ",", "end_points", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1_test.InceptionV1Test.testBuildAndCheckAllEndPointsUptoMixed5c": [[78, 108], ["tensorflow.random_uniform", "nets.inception.inception_v1_base", "inception_v1_test.InceptionV1Test.assertItemsEqual", "endpoints_shapes.keys", "end_points.keys", "inception_v1_test.InceptionV1Test.assertTrue", "inception_v1_test.InceptionV1Test.assertListEqual", "end_points[].get_shape().as_list", "end_points[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1.inception_v1_base"], ["", "", "", "def", "testBuildAndCheckAllEndPointsUptoMixed5c", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "_", ",", "end_points", "=", "inception", ".", "inception_v1_base", "(", "inputs", ",", "\n", "final_endpoint", "=", "'Mixed_5c'", ")", "\n", "endpoints_shapes", "=", "{", "'Conv2d_1a_7x7'", ":", "[", "5", ",", "112", ",", "112", ",", "64", "]", ",", "\n", "'MaxPool_2a_3x3'", ":", "[", "5", ",", "56", ",", "56", ",", "64", "]", ",", "\n", "'Conv2d_2b_1x1'", ":", "[", "5", ",", "56", ",", "56", ",", "64", "]", ",", "\n", "'Conv2d_2c_3x3'", ":", "[", "5", ",", "56", ",", "56", ",", "192", "]", ",", "\n", "'MaxPool_3a_3x3'", ":", "[", "5", ",", "28", ",", "28", ",", "192", "]", ",", "\n", "'Mixed_3b'", ":", "[", "5", ",", "28", ",", "28", ",", "256", "]", ",", "\n", "'Mixed_3c'", ":", "[", "5", ",", "28", ",", "28", ",", "480", "]", ",", "\n", "'MaxPool_4a_3x3'", ":", "[", "5", ",", "14", ",", "14", ",", "480", "]", ",", "\n", "'Mixed_4b'", ":", "[", "5", ",", "14", ",", "14", ",", "512", "]", ",", "\n", "'Mixed_4c'", ":", "[", "5", ",", "14", ",", "14", ",", "512", "]", ",", "\n", "'Mixed_4d'", ":", "[", "5", ",", "14", ",", "14", ",", "512", "]", ",", "\n", "'Mixed_4e'", ":", "[", "5", ",", "14", ",", "14", ",", "528", "]", ",", "\n", "'Mixed_4f'", ":", "[", "5", ",", "14", ",", "14", ",", "832", "]", ",", "\n", "'MaxPool_5a_2x2'", ":", "[", "5", ",", "7", ",", "7", ",", "832", "]", ",", "\n", "'Mixed_5b'", ":", "[", "5", ",", "7", ",", "7", ",", "832", "]", ",", "\n", "'Mixed_5c'", ":", "[", "5", ",", "7", ",", "7", ",", "1024", "]", "}", "\n", "\n", "self", ".", "assertItemsEqual", "(", "endpoints_shapes", ".", "keys", "(", ")", ",", "end_points", ".", "keys", "(", ")", ")", "\n", "for", "endpoint_name", "in", "endpoints_shapes", ":", "\n", "      ", "expected_shape", "=", "endpoints_shapes", "[", "endpoint_name", "]", "\n", "self", ".", "assertTrue", "(", "endpoint_name", "in", "end_points", ")", "\n", "self", ".", "assertListEqual", "(", "end_points", "[", "endpoint_name", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "expected_shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1_test.InceptionV1Test.testModelHasExpectedNumberOfParameters": [[109, 118], ["tensorflow.random_uniform", "slim.model_analyzer.analyze_vars", "inception_v1_test.InceptionV1Test.assertAlmostEqual", "slim.arg_scope", "nets.inception.inception_v1_base", "slim.get_model_variables", "nets.inception.inception_v1_arg_scope"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1.inception_v1_base"], ["", "", "def", "testModelHasExpectedNumberOfParameters", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "with", "slim", ".", "arg_scope", "(", "inception", ".", "inception_v1_arg_scope", "(", ")", ")", ":", "\n", "      ", "inception", ".", "inception_v1_base", "(", "inputs", ")", "\n", "", "total_params", ",", "_", "=", "slim", ".", "model_analyzer", ".", "analyze_vars", "(", "\n", "slim", ".", "get_model_variables", "(", ")", ")", "\n", "self", ".", "assertAlmostEqual", "(", "5607184", ",", "total_params", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1_test.InceptionV1Test.testHalfSizeImages": [[119, 128], ["tensorflow.random_uniform", "nets.inception.inception_v1_base", "inception_v1_test.InceptionV1Test.assertTrue", "inception_v1_test.InceptionV1Test.assertListEqual", "mixed_5c.op.name.startswith", "mixed_5c.get_shape().as_list", "mixed_5c.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1.inception_v1_base"], ["", "def", "testHalfSizeImages", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "112", ",", "112", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "mixed_5c", ",", "_", "=", "inception", ".", "inception_v1_base", "(", "inputs", ")", "\n", "self", ".", "assertTrue", "(", "mixed_5c", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV1/Mixed_5c'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "mixed_5c", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "4", ",", "4", ",", "1024", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1_test.InceptionV1Test.testUnknownImageShape": [[129, 146], ["tensorflow.reset_default_graph", "numpy.random.uniform", "inception_v1_test.InceptionV1Test.test_session", "tensorflow.placeholder", "nets.inception.inception_v1", "inception_v1_test.InceptionV1Test.assertTrue", "inception_v1_test.InceptionV1Test.assertListEqual", "tensorflow.initialize_all_variables().run", "sess.run", "inception_v1_test.InceptionV1Test.assertListEqual", "logits.op.name.startswith", "logits.get_shape().as_list", "list", "tensorflow.initialize_all_variables", "logits.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1.inception_v1", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "def", "testUnknownImageShape", "(", "self", ")", ":", "\n", "    ", "tf", ".", "reset_default_graph", "(", ")", "\n", "batch_size", "=", "2", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "input_np", "=", "np", ".", "random", ".", "uniform", "(", "0", ",", "1", ",", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "inputs", "=", "tf", ".", "placeholder", "(", "tf", ".", "float32", ",", "shape", "=", "(", "batch_size", ",", "None", ",", "None", ",", "3", ")", ")", "\n", "logits", ",", "end_points", "=", "inception", ".", "inception_v1", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV1/Logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "pre_pool", "=", "end_points", "[", "'Mixed_5c'", "]", "\n", "feed_dict", "=", "{", "inputs", ":", "input_np", "}", "\n", "tf", ".", "initialize_all_variables", "(", ")", ".", "run", "(", ")", "\n", "pre_pool_out", "=", "sess", ".", "run", "(", "pre_pool", ",", "feed_dict", "=", "feed_dict", ")", "\n", "self", ".", "assertListEqual", "(", "list", "(", "pre_pool_out", ".", "shape", ")", ",", "[", "batch_size", ",", "7", ",", "7", ",", "1024", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1_test.InceptionV1Test.testUnknowBatchSize": [[147, 163], ["tensorflow.placeholder", "nets.inception.inception_v1", "inception_v1_test.InceptionV1Test.assertTrue", "inception_v1_test.InceptionV1Test.assertListEqual", "tensorflow.random_uniform", "logits.op.name.startswith", "logits.get_shape().as_list", "inception_v1_test.InceptionV1Test.test_session", "sess.run", "sess.run", "inception_v1_test.InceptionV1Test.assertEquals", "tensorflow.initialize_all_variables", "logits.get_shape", "tensorflow.random_uniform.eval"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1.inception_v1", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testUnknowBatchSize", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "1", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "\n", "inputs", "=", "tf", ".", "placeholder", "(", "tf", ".", "float32", ",", "(", "None", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_v1", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV1/Logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "None", ",", "num_classes", "]", ")", "\n", "images", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "logits", ",", "{", "inputs", ":", "images", ".", "eval", "(", ")", "}", ")", "\n", "self", ".", "assertEquals", "(", "output", ".", "shape", ",", "(", "batch_size", ",", "num_classes", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1_test.InceptionV1Test.testEvaluation": [[164, 178], ["tensorflow.random_uniform", "nets.inception.inception_v1", "tensorflow.argmax", "inception_v1_test.InceptionV1Test.test_session", "sess.run", "sess.run", "inception_v1_test.InceptionV1Test.assertEquals", "tensorflow.initialize_all_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1.inception_v1", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testEvaluation", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "2", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "\n", "eval_inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_v1", "(", "eval_inputs", ",", "num_classes", ",", "\n", "is_training", "=", "False", ")", "\n", "predictions", "=", "tf", ".", "argmax", "(", "logits", ",", "1", ")", "\n", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "predictions", ")", "\n", "self", ".", "assertEquals", "(", "output", ".", "shape", ",", "(", "batch_size", ",", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1_test.InceptionV1Test.testTrainEvalWithReuse": [[179, 195], ["tensorflow.random_uniform", "nets.inception.inception_v1", "tensorflow.random_uniform", "nets.inception.inception_v1", "tensorflow.argmax", "inception_v1_test.InceptionV1Test.test_session", "sess.run", "sess.run", "inception_v1_test.InceptionV1Test.assertEquals", "tensorflow.initialize_all_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1.inception_v1", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1.inception_v1", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testTrainEvalWithReuse", "(", "self", ")", ":", "\n", "    ", "train_batch_size", "=", "5", "\n", "eval_batch_size", "=", "2", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "\n", "train_inputs", "=", "tf", ".", "random_uniform", "(", "(", "train_batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "inception", ".", "inception_v1", "(", "train_inputs", ",", "num_classes", ")", "\n", "eval_inputs", "=", "tf", ".", "random_uniform", "(", "(", "eval_batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_v1", "(", "eval_inputs", ",", "num_classes", ",", "reuse", "=", "True", ")", "\n", "predictions", "=", "tf", ".", "argmax", "(", "logits", ",", "1", ")", "\n", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "predictions", ")", "\n", "self", ".", "assertEquals", "(", "output", ".", "shape", ",", "(", "eval_batch_size", ",", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1_test.InceptionV1Test.testLogitsNotSqueezed": [[196, 207], ["tensorflow.random_uniform", "nets.inception.inception_v1", "inception_v1_test.InceptionV1Test.test_session", "tensorflow.initialize_all_variables().run", "sess.run", "inception_v1_test.InceptionV1Test.assertListEqual", "list", "tensorflow.initialize_all_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1.inception_v1", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testLogitsNotSqueezed", "(", "self", ")", ":", "\n", "    ", "num_classes", "=", "25", "\n", "images", "=", "tf", ".", "random_uniform", "(", "[", "1", ",", "224", ",", "224", ",", "3", "]", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_v1", "(", "images", ",", "\n", "num_classes", "=", "num_classes", ",", "\n", "spatial_squeeze", "=", "False", ")", "\n", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "tf", ".", "initialize_all_variables", "(", ")", ".", "run", "(", ")", "\n", "logits_out", "=", "sess", ".", "run", "(", "logits", ")", "\n", "self", ".", "assertListEqual", "(", "list", "(", "logits_out", ".", "shape", ")", ",", "[", "1", ",", "1", ",", "1", ",", "num_classes", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2_test.InceptionTest.testBuildLogits": [[27, 37], ["inception_resnet_v2_test.InceptionTest.test_session", "tensorflow.random_uniform", "nets.inception.inception_resnet_v2", "inception_resnet_v2_test.InceptionTest.assertTrue", "inception_resnet_v2_test.InceptionTest.assertListEqual", "logits.op.name.startswith", "logits.get_shape().as_list", "logits.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2.inception_resnet_v2"], ["  ", "def", "testBuildLogits", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_resnet_v2", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionResnetV2/Logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2_test.InceptionTest.testBuildEndPoints": [[38, 56], ["inception_resnet_v2_test.InceptionTest.test_session", "tensorflow.random_uniform", "nets.inception.inception_resnet_v2", "inception_resnet_v2_test.InceptionTest.assertTrue", "inception_resnet_v2_test.InceptionTest.assertListEqual", "inception_resnet_v2_test.InceptionTest.assertTrue", "inception_resnet_v2_test.InceptionTest.assertListEqual", "inception_resnet_v2_test.InceptionTest.assertListEqual", "logits.get_shape().as_list", "aux_logits.get_shape().as_list", "pre_pool.get_shape().as_list", "logits.get_shape", "aux_logits.get_shape", "pre_pool.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2.inception_resnet_v2"], ["", "", "def", "testBuildEndPoints", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "_", ",", "end_points", "=", "inception", ".", "inception_resnet_v2", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertTrue", "(", "'Logits'", "in", "end_points", ")", "\n", "logits", "=", "end_points", "[", "'Logits'", "]", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "self", ".", "assertTrue", "(", "'AuxLogits'", "in", "end_points", ")", "\n", "aux_logits", "=", "end_points", "[", "'AuxLogits'", "]", "\n", "self", ".", "assertListEqual", "(", "aux_logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "pre_pool", "=", "end_points", "[", "'PrePool'", "]", "\n", "self", ".", "assertListEqual", "(", "pre_pool", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "8", ",", "8", ",", "1536", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2_test.InceptionTest.testVariablesSetDevice": [[57, 72], ["inception_resnet_v2_test.InceptionTest.test_session", "tensorflow.random_uniform", "tensorflow.get_collection", "tensorflow.get_collection", "tensorflow.variable_scope", "tensorflow.device", "nets.inception.inception_resnet_v2", "tensorflow.variable_scope", "tensorflow.device", "nets.inception.inception_resnet_v2", "inception_resnet_v2_test.InceptionTest.assertDeviceEqual", "inception_resnet_v2_test.InceptionTest.assertDeviceEqual"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2.inception_resnet_v2", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2.inception_resnet_v2"], ["", "", "def", "testVariablesSetDevice", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "# Force all Variables to reside on the device.", "\n", "with", "tf", ".", "variable_scope", "(", "'on_cpu'", ")", ",", "tf", ".", "device", "(", "'/cpu:0'", ")", ":", "\n", "        ", "inception", ".", "inception_resnet_v2", "(", "inputs", ",", "num_classes", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'on_gpu'", ")", ",", "tf", ".", "device", "(", "'/gpu:0'", ")", ":", "\n", "        ", "inception", ".", "inception_resnet_v2", "(", "inputs", ",", "num_classes", ")", "\n", "", "for", "v", "in", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "VARIABLES", ",", "scope", "=", "'on_cpu'", ")", ":", "\n", "        ", "self", ".", "assertDeviceEqual", "(", "v", ".", "device", ",", "'/cpu:0'", ")", "\n", "", "for", "v", "in", "tf", ".", "get_collection", "(", "tf", ".", "GraphKeys", ".", "VARIABLES", ",", "scope", "=", "'on_gpu'", ")", ":", "\n", "        ", "self", ".", "assertDeviceEqual", "(", "v", ".", "device", ",", "'/gpu:0'", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2_test.InceptionTest.testHalfSizeImages": [[73, 86], ["inception_resnet_v2_test.InceptionTest.test_session", "tensorflow.random_uniform", "nets.inception.inception_resnet_v2", "inception_resnet_v2_test.InceptionTest.assertTrue", "inception_resnet_v2_test.InceptionTest.assertListEqual", "inception_resnet_v2_test.InceptionTest.assertListEqual", "logits.op.name.startswith", "logits.get_shape().as_list", "pre_pool.get_shape().as_list", "logits.get_shape", "pre_pool.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2.inception_resnet_v2"], ["", "", "", "def", "testHalfSizeImages", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "150", ",", "150", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "end_points", "=", "inception", ".", "inception_resnet_v2", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionResnetV2/Logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "pre_pool", "=", "end_points", "[", "'PrePool'", "]", "\n", "self", ".", "assertListEqual", "(", "pre_pool", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "3", ",", "3", ",", "1536", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2_test.InceptionTest.testUnknownBatchSize": [[87, 101], ["inception_resnet_v2_test.InceptionTest.test_session", "tensorflow.placeholder", "nets.inception.inception_resnet_v2", "inception_resnet_v2_test.InceptionTest.assertTrue", "inception_resnet_v2_test.InceptionTest.assertListEqual", "tensorflow.random_uniform", "sess.run", "sess.run", "inception_resnet_v2_test.InceptionTest.assertEquals", "logits.op.name.startswith", "logits.get_shape().as_list", "tensorflow.initialize_all_variables", "tensorflow.random_uniform.eval", "logits.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2.inception_resnet_v2", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testUnknownBatchSize", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "1", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "inputs", "=", "tf", ".", "placeholder", "(", "tf", ".", "float32", ",", "(", "None", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_resnet_v2", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionResnetV2/Logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "None", ",", "num_classes", "]", ")", "\n", "images", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "logits", ",", "{", "inputs", ":", "images", ".", "eval", "(", ")", "}", ")", "\n", "self", ".", "assertEquals", "(", "output", ".", "shape", ",", "(", "batch_size", ",", "num_classes", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2_test.InceptionTest.testEvaluation": [[102, 115], ["inception_resnet_v2_test.InceptionTest.test_session", "tensorflow.random_uniform", "nets.inception.inception_resnet_v2", "tensorflow.argmax", "sess.run", "sess.run", "inception_resnet_v2_test.InceptionTest.assertEquals", "tensorflow.initialize_all_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2.inception_resnet_v2", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testEvaluation", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "2", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "eval_inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_resnet_v2", "(", "eval_inputs", ",", "\n", "num_classes", ",", "\n", "is_training", "=", "False", ")", "\n", "predictions", "=", "tf", ".", "argmax", "(", "logits", ",", "1", ")", "\n", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "predictions", ")", "\n", "self", ".", "assertEquals", "(", "output", ".", "shape", ",", "(", "batch_size", ",", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2_test.InceptionTest.testTrainEvalWithReuse": [[116, 133], ["inception_resnet_v2_test.InceptionTest.test_session", "tensorflow.random_uniform", "nets.inception.inception_resnet_v2", "tensorflow.random_uniform", "nets.inception.inception_resnet_v2", "tensorflow.argmax", "sess.run", "sess.run", "inception_resnet_v2_test.InceptionTest.assertEquals", "tensorflow.initialize_all_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2.inception_resnet_v2", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2.inception_resnet_v2", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testTrainEvalWithReuse", "(", "self", ")", ":", "\n", "    ", "train_batch_size", "=", "5", "\n", "eval_batch_size", "=", "2", "\n", "height", ",", "width", "=", "150", ",", "150", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "train_inputs", "=", "tf", ".", "random_uniform", "(", "(", "train_batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "inception", ".", "inception_resnet_v2", "(", "train_inputs", ",", "num_classes", ")", "\n", "eval_inputs", "=", "tf", ".", "random_uniform", "(", "(", "eval_batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_resnet_v2", "(", "eval_inputs", ",", "\n", "num_classes", ",", "\n", "is_training", "=", "False", ",", "\n", "reuse", "=", "True", ")", "\n", "predictions", "=", "tf", ".", "argmax", "(", "logits", ",", "1", ")", "\n", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "predictions", ")", "\n", "self", ".", "assertEquals", "(", "output", ".", "shape", ",", "(", "eval_batch_size", ",", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1.bottleneck": [[68, 113], ["tensorflow.variable_scope", "slim.utils.last_dimension", "slim.conv2d", "nets.resnet_utils.conv2d_same", "slim.conv2d", "tensorflow.nn.relu", "slim.utils.collect_named_outputs", "inputs.get_shape", "nets.resnet_utils.subsample", "slim.conv2d"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.conv2d_same", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.subsample"], ["@", "slim", ".", "add_arg_scope", "\n", "def", "bottleneck", "(", "inputs", ",", "depth", ",", "depth_bottleneck", ",", "stride", ",", "rate", "=", "1", ",", "\n", "outputs_collections", "=", "None", ",", "scope", "=", "None", ")", ":", "\n", "  ", "\"\"\"Bottleneck residual unit variant with BN after convolutions.\n\n  This is the original residual unit proposed in [1]. See Fig. 1(a) of [2] for\n  its definition. Note that we use here the bottleneck variant which has an\n  extra bottleneck layer.\n\n  When putting together two consecutive ResNet blocks that use this unit, one\n  should use stride = 2 in the last unit of the first block.\n\n  Args:\n    inputs: A tensor of size [batch, height, width, channels].\n    depth: The depth of the ResNet unit output.\n    depth_bottleneck: The depth of the bottleneck layers.\n    stride: The ResNet unit's stride. Determines the amount of downsampling of\n      the units output compared to its input.\n    rate: An integer, rate for atrous convolution.\n    outputs_collections: Collection to add the ResNet unit output.\n    scope: Optional variable_scope.\n\n  Returns:\n    The ResNet unit's output.\n  \"\"\"", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'bottleneck_v1'", ",", "[", "inputs", "]", ")", "as", "sc", ":", "\n", "    ", "depth_in", "=", "slim", ".", "utils", ".", "last_dimension", "(", "inputs", ".", "get_shape", "(", ")", ",", "min_rank", "=", "4", ")", "\n", "if", "depth", "==", "depth_in", ":", "\n", "      ", "shortcut", "=", "resnet_utils", ".", "subsample", "(", "inputs", ",", "stride", ",", "'shortcut'", ")", "\n", "", "else", ":", "\n", "      ", "shortcut", "=", "slim", ".", "conv2d", "(", "inputs", ",", "depth", ",", "[", "1", ",", "1", "]", ",", "stride", "=", "stride", ",", "\n", "activation_fn", "=", "None", ",", "scope", "=", "'shortcut'", ")", "\n", "\n", "", "residual", "=", "slim", ".", "conv2d", "(", "inputs", ",", "depth_bottleneck", ",", "[", "1", ",", "1", "]", ",", "stride", "=", "1", ",", "\n", "scope", "=", "'conv1'", ")", "\n", "residual", "=", "resnet_utils", ".", "conv2d_same", "(", "residual", ",", "depth_bottleneck", ",", "3", ",", "stride", ",", "\n", "rate", "=", "rate", ",", "scope", "=", "'conv2'", ")", "\n", "residual", "=", "slim", ".", "conv2d", "(", "residual", ",", "depth", ",", "[", "1", ",", "1", "]", ",", "stride", "=", "1", ",", "\n", "activation_fn", "=", "None", ",", "scope", "=", "'conv3'", ")", "\n", "\n", "output", "=", "tf", ".", "nn", ".", "relu", "(", "shortcut", "+", "residual", ")", "\n", "\n", "return", "slim", ".", "utils", ".", "collect_named_outputs", "(", "outputs_collections", ",", "\n", "sc", ".", "original_name_scope", ",", "\n", "output", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1.resnet_v1": [[115, 205], ["tensorflow.variable_scope", "slim.arg_scope", "slim.arg_scope", "nets.resnet_utils.stack_blocks_dense", "slim.utils.convert_collection_to_dict", "nets.resnet_utils.conv2d_same", "slim.max_pool2d", "tensorflow.reduce_mean", "slim.conv2d", "slim.softmax", "ValueError"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.stack_blocks_dense", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.conv2d_same"], ["", "", "def", "resnet_v1", "(", "inputs", ",", "\n", "blocks", ",", "\n", "num_classes", "=", "None", ",", "\n", "is_training", "=", "True", ",", "\n", "global_pool", "=", "True", ",", "\n", "output_stride", "=", "None", ",", "\n", "include_root_block", "=", "True", ",", "\n", "reuse", "=", "None", ",", "\n", "scope", "=", "None", ")", ":", "\n", "  ", "\"\"\"Generator for v1 ResNet models.\n\n  This function generates a family of ResNet v1 models. See the resnet_v1_*()\n  methods for specific model instantiations, obtained by selecting different\n  block instantiations that produce ResNets of various depths.\n\n  Training for image classification on Imagenet is usually done with [224, 224]\n  inputs, resulting in [7, 7] feature maps at the output of the last ResNet\n  block for the ResNets defined in [1] that have nominal stride equal to 32.\n  However, for dense prediction tasks we advise that one uses inputs with\n  spatial dimensions that are multiples of 32 plus 1, e.g., [321, 321]. In\n  this case the feature maps at the ResNet output will have spatial shape\n  [(height - 1) / output_stride + 1, (width - 1) / output_stride + 1]\n  and corners exactly aligned with the input image corners, which greatly\n  facilitates alignment of the features to the image. Using as input [225, 225]\n  images results in [8, 8] feature maps at the output of the last ResNet block.\n\n  For dense prediction tasks, the ResNet needs to run in fully-convolutional\n  (FCN) mode and global_pool needs to be set to False. The ResNets in [1, 2] all\n  have nominal stride equal to 32 and a good choice in FCN mode is to use\n  output_stride=16 in order to increase the density of the computed features at\n  small computational and memory overhead, cf. http://arxiv.org/abs/1606.00915.\n\n  Args:\n    inputs: A tensor of size [batch, height_in, width_in, channels].\n    blocks: A list of length equal to the number of ResNet blocks. Each element\n      is a resnet_utils.Block object describing the units in the block.\n    num_classes: Number of predicted classes for classification tasks. If None\n      we return the features before the logit layer.\n    is_training: whether is training or not.\n    global_pool: If True, we perform global average pooling before computing the\n      logits. Set to True for image classification, False for dense prediction.\n    output_stride: If None, then the output will be computed at the nominal\n      network stride. If output_stride is not None, it specifies the requested\n      ratio of input to output spatial resolution.\n    include_root_block: If True, include the initial convolution followed by\n      max-pooling, if False excludes it.\n    reuse: whether or not the network and its variables should be reused. To be\n      able to reuse 'scope' must be given.\n    scope: Optional variable_scope.\n\n  Returns:\n    net: A rank-4 tensor of size [batch, height_out, width_out, channels_out].\n      If global_pool is False, then height_out and width_out are reduced by a\n      factor of output_stride compared to the respective height_in and width_in,\n      else both height_out and width_out equal one. If num_classes is None, then\n      net is the output of the last ResNet block, potentially after global\n      average pooling. If num_classes is not None, net contains the pre-softmax\n      activations.\n    end_points: A dictionary from components of the network to the corresponding\n      activation.\n\n  Raises:\n    ValueError: If the target output_stride is not valid.\n  \"\"\"", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'resnet_v1'", ",", "[", "inputs", "]", ",", "reuse", "=", "reuse", ")", "as", "sc", ":", "\n", "    ", "end_points_collection", "=", "sc", ".", "name", "+", "'_end_points'", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "bottleneck", ",", "\n", "resnet_utils", ".", "stack_blocks_dense", "]", ",", "\n", "outputs_collections", "=", "end_points_collection", ")", ":", "\n", "      ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "batch_norm", "]", ",", "is_training", "=", "is_training", ")", ":", "\n", "        ", "net", "=", "inputs", "\n", "if", "include_root_block", ":", "\n", "          ", "if", "output_stride", "is", "not", "None", ":", "\n", "            ", "if", "output_stride", "%", "4", "!=", "0", ":", "\n", "              ", "raise", "ValueError", "(", "'The output_stride needs to be a multiple of 4.'", ")", "\n", "", "output_stride", "/=", "4", "\n", "", "net", "=", "resnet_utils", ".", "conv2d_same", "(", "net", ",", "64", ",", "7", ",", "stride", "=", "2", ",", "scope", "=", "'conv1'", ")", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'pool1'", ")", "\n", "", "net", "=", "resnet_utils", ".", "stack_blocks_dense", "(", "net", ",", "blocks", ",", "output_stride", ")", "\n", "if", "global_pool", ":", "\n", "# Global average pooling.", "\n", "          ", "net", "=", "tf", ".", "reduce_mean", "(", "net", ",", "[", "1", ",", "2", "]", ",", "name", "=", "'pool5'", ",", "keep_dims", "=", "True", ")", "\n", "", "if", "num_classes", "is", "not", "None", ":", "\n", "          ", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "num_classes", ",", "[", "1", ",", "1", "]", ",", "activation_fn", "=", "None", ",", "\n", "normalizer_fn", "=", "None", ",", "scope", "=", "'logits'", ")", "\n", "# Convert end_points_collection into a dictionary of end_points.", "\n", "", "end_points", "=", "slim", ".", "utils", ".", "convert_collection_to_dict", "(", "end_points_collection", ")", "\n", "if", "num_classes", "is", "not", "None", ":", "\n", "          ", "end_points", "[", "'predictions'", "]", "=", "slim", ".", "softmax", "(", "net", ",", "scope", "=", "'predictions'", ")", "\n", "", "return", "net", ",", "end_points", "\n", "", "", "", "", "resnet_v1", ".", "default_image_size", "=", "224", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1.resnet_v1_50": [[208, 229], ["resnet_v1.resnet_v1", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1.resnet_v1"], ["def", "resnet_v1_50", "(", "inputs", ",", "\n", "num_classes", "=", "None", ",", "\n", "is_training", "=", "True", ",", "\n", "global_pool", "=", "True", ",", "\n", "output_stride", "=", "None", ",", "\n", "reuse", "=", "None", ",", "\n", "scope", "=", "'resnet_v1_50'", ")", ":", "\n", "  ", "\"\"\"ResNet-50 model of [1]. See resnet_v1() for arg and return description.\"\"\"", "\n", "blocks", "=", "[", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block1'", ",", "bottleneck", ",", "[", "(", "256", ",", "64", ",", "1", ")", "]", "*", "2", "+", "[", "(", "256", ",", "64", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block2'", ",", "bottleneck", ",", "[", "(", "512", ",", "128", ",", "1", ")", "]", "*", "3", "+", "[", "(", "512", ",", "128", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block3'", ",", "bottleneck", ",", "[", "(", "1024", ",", "256", ",", "1", ")", "]", "*", "5", "+", "[", "(", "1024", ",", "256", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block4'", ",", "bottleneck", ",", "[", "(", "2048", ",", "512", ",", "1", ")", "]", "*", "3", ")", "\n", "]", "\n", "return", "resnet_v1", "(", "inputs", ",", "blocks", ",", "num_classes", ",", "is_training", ",", "\n", "global_pool", "=", "global_pool", ",", "output_stride", "=", "output_stride", ",", "\n", "include_root_block", "=", "True", ",", "reuse", "=", "reuse", ",", "scope", "=", "scope", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1.resnet_v1_101": [[231, 252], ["resnet_v1.resnet_v1", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1.resnet_v1"], ["", "def", "resnet_v1_101", "(", "inputs", ",", "\n", "num_classes", "=", "None", ",", "\n", "is_training", "=", "True", ",", "\n", "global_pool", "=", "True", ",", "\n", "output_stride", "=", "None", ",", "\n", "reuse", "=", "None", ",", "\n", "scope", "=", "'resnet_v1_101'", ")", ":", "\n", "  ", "\"\"\"ResNet-101 model of [1]. See resnet_v1() for arg and return description.\"\"\"", "\n", "blocks", "=", "[", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block1'", ",", "bottleneck", ",", "[", "(", "256", ",", "64", ",", "1", ")", "]", "*", "2", "+", "[", "(", "256", ",", "64", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block2'", ",", "bottleneck", ",", "[", "(", "512", ",", "128", ",", "1", ")", "]", "*", "3", "+", "[", "(", "512", ",", "128", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block3'", ",", "bottleneck", ",", "[", "(", "1024", ",", "256", ",", "1", ")", "]", "*", "22", "+", "[", "(", "1024", ",", "256", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block4'", ",", "bottleneck", ",", "[", "(", "2048", ",", "512", ",", "1", ")", "]", "*", "3", ")", "\n", "]", "\n", "return", "resnet_v1", "(", "inputs", ",", "blocks", ",", "num_classes", ",", "is_training", ",", "\n", "global_pool", "=", "global_pool", ",", "output_stride", "=", "output_stride", ",", "\n", "include_root_block", "=", "True", ",", "reuse", "=", "reuse", ",", "scope", "=", "scope", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1.resnet_v1_152": [[254, 274], ["resnet_v1.resnet_v1", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1.resnet_v1"], ["", "def", "resnet_v1_152", "(", "inputs", ",", "\n", "num_classes", "=", "None", ",", "\n", "is_training", "=", "True", ",", "\n", "global_pool", "=", "True", ",", "\n", "output_stride", "=", "None", ",", "\n", "reuse", "=", "None", ",", "\n", "scope", "=", "'resnet_v1_152'", ")", ":", "\n", "  ", "\"\"\"ResNet-152 model of [1]. See resnet_v1() for arg and return description.\"\"\"", "\n", "blocks", "=", "[", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block1'", ",", "bottleneck", ",", "[", "(", "256", ",", "64", ",", "1", ")", "]", "*", "2", "+", "[", "(", "256", ",", "64", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block2'", ",", "bottleneck", ",", "[", "(", "512", ",", "128", ",", "1", ")", "]", "*", "7", "+", "[", "(", "512", ",", "128", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block3'", ",", "bottleneck", ",", "[", "(", "1024", ",", "256", ",", "1", ")", "]", "*", "35", "+", "[", "(", "1024", ",", "256", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block4'", ",", "bottleneck", ",", "[", "(", "2048", ",", "512", ",", "1", ")", "]", "*", "3", ")", "]", "\n", "return", "resnet_v1", "(", "inputs", ",", "blocks", ",", "num_classes", ",", "is_training", ",", "\n", "global_pool", "=", "global_pool", ",", "output_stride", "=", "output_stride", ",", "\n", "include_root_block", "=", "True", ",", "reuse", "=", "reuse", ",", "scope", "=", "scope", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1.resnet_v1_200": [[276, 296], ["resnet_v1.resnet_v1", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1.resnet_v1"], ["", "def", "resnet_v1_200", "(", "inputs", ",", "\n", "num_classes", "=", "None", ",", "\n", "is_training", "=", "True", ",", "\n", "global_pool", "=", "True", ",", "\n", "output_stride", "=", "None", ",", "\n", "reuse", "=", "None", ",", "\n", "scope", "=", "'resnet_v1_200'", ")", ":", "\n", "  ", "\"\"\"ResNet-200 model of [2]. See resnet_v1() for arg and return description.\"\"\"", "\n", "blocks", "=", "[", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block1'", ",", "bottleneck", ",", "[", "(", "256", ",", "64", ",", "1", ")", "]", "*", "2", "+", "[", "(", "256", ",", "64", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block2'", ",", "bottleneck", ",", "[", "(", "512", ",", "128", ",", "1", ")", "]", "*", "23", "+", "[", "(", "512", ",", "128", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block3'", ",", "bottleneck", ",", "[", "(", "1024", ",", "256", ",", "1", ")", "]", "*", "35", "+", "[", "(", "1024", ",", "256", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block4'", ",", "bottleneck", ",", "[", "(", "2048", ",", "512", ",", "1", ")", "]", "*", "3", ")", "]", "\n", "return", "resnet_v1", "(", "inputs", ",", "blocks", ",", "num_classes", ",", "is_training", ",", "\n", "global_pool", "=", "global_pool", ",", "output_stride", "=", "output_stride", ",", "\n", "include_root_block", "=", "True", ",", "reuse", "=", "reuse", ",", "scope", "=", "scope", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetUtilsTest.testSubsampleThreeByThree": [[58, 64], ["tensorflow.reshape", "nets.resnet_utils.subsample", "tensorflow.reshape", "tensorflow.to_float", "tensorflow.constant", "resnet_v1_test.ResnetUtilsTest.test_session", "resnet_v1_test.ResnetUtilsTest.assertAllClose", "tensorflow.range", "nets.resnet_utils.subsample.eval", "tensorflow.reshape.eval"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.subsample"], ["  ", "def", "testSubsampleThreeByThree", "(", "self", ")", ":", "\n", "    ", "x", "=", "tf", ".", "reshape", "(", "tf", ".", "to_float", "(", "tf", ".", "range", "(", "9", ")", ")", ",", "[", "1", ",", "3", ",", "3", ",", "1", "]", ")", "\n", "x", "=", "resnet_utils", ".", "subsample", "(", "x", ",", "2", ")", "\n", "expected", "=", "tf", ".", "reshape", "(", "tf", ".", "constant", "(", "[", "0", ",", "2", ",", "6", ",", "8", "]", ")", ",", "[", "1", ",", "2", ",", "2", ",", "1", "]", ")", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "self", ".", "assertAllClose", "(", "x", ".", "eval", "(", ")", ",", "expected", ".", "eval", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetUtilsTest.testSubsampleFourByFour": [[65, 71], ["tensorflow.reshape", "nets.resnet_utils.subsample", "tensorflow.reshape", "tensorflow.to_float", "tensorflow.constant", "resnet_v1_test.ResnetUtilsTest.test_session", "resnet_v1_test.ResnetUtilsTest.assertAllClose", "tensorflow.range", "nets.resnet_utils.subsample.eval", "tensorflow.reshape.eval"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.subsample"], ["", "", "def", "testSubsampleFourByFour", "(", "self", ")", ":", "\n", "    ", "x", "=", "tf", ".", "reshape", "(", "tf", ".", "to_float", "(", "tf", ".", "range", "(", "16", ")", ")", ",", "[", "1", ",", "4", ",", "4", ",", "1", "]", ")", "\n", "x", "=", "resnet_utils", ".", "subsample", "(", "x", ",", "2", ")", "\n", "expected", "=", "tf", ".", "reshape", "(", "tf", ".", "constant", "(", "[", "0", ",", "2", ",", "8", ",", "10", "]", ")", ",", "[", "1", ",", "2", ",", "2", ",", "1", "]", ")", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "self", ".", "assertAllClose", "(", "x", ".", "eval", "(", ")", ",", "expected", ".", "eval", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetUtilsTest.testConv2DSameEven": [[72, 112], ["resnet_v1_test.create_test_input", "resnet_v1_test.create_test_input", "tensorflow.reshape", "tensorflow.get_variable", "tensorflow.get_variable", "tensorflow.get_variable_scope().reuse_variables", "slim.conv2d", "tensorflow.to_float", "tensorflow.reshape", "nets.resnet_utils.subsample", "tensorflow.to_float", "tensorflow.reshape", "nets.resnet_utils.conv2d_same", "slim.conv2d", "tensorflow.to_float", "tensorflow.reshape", "resnet_v1_test.ResnetUtilsTest.test_session", "sess.run", "resnet_v1_test.ResnetUtilsTest.assertAllClose", "resnet_v1_test.ResnetUtilsTest.assertAllClose", "resnet_v1_test.ResnetUtilsTest.assertAllClose", "resnet_v1_test.ResnetUtilsTest.assertAllClose", "tensorflow.zeros", "tensorflow.get_variable_scope", "tensorflow.initialize_all_variables", "slim.conv2d.eval", "tensorflow.reshape.eval", "nets.resnet_utils.subsample.eval", "tensorflow.reshape.eval", "nets.resnet_utils.conv2d_same.eval", "y3_expected.eval", "slim.conv2d.eval", "tensorflow.reshape.eval"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.subsample", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.conv2d_same", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testConv2DSameEven", "(", "self", ")", ":", "\n", "    ", "n", ",", "n2", "=", "4", ",", "2", "\n", "\n", "# Input image.", "\n", "x", "=", "create_test_input", "(", "1", ",", "n", ",", "n", ",", "1", ")", "\n", "\n", "# Convolution kernel.", "\n", "w", "=", "create_test_input", "(", "1", ",", "3", ",", "3", ",", "1", ")", "\n", "w", "=", "tf", ".", "reshape", "(", "w", ",", "[", "3", ",", "3", ",", "1", ",", "1", "]", ")", "\n", "\n", "tf", ".", "get_variable", "(", "'Conv/weights'", ",", "initializer", "=", "w", ")", "\n", "tf", ".", "get_variable", "(", "'Conv/biases'", ",", "initializer", "=", "tf", ".", "zeros", "(", "[", "1", "]", ")", ")", "\n", "tf", ".", "get_variable_scope", "(", ")", ".", "reuse_variables", "(", ")", "\n", "\n", "y1", "=", "slim", ".", "conv2d", "(", "x", ",", "1", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'Conv'", ")", "\n", "y1_expected", "=", "tf", ".", "to_float", "(", "[", "[", "14", ",", "28", ",", "43", ",", "26", "]", ",", "\n", "[", "28", ",", "48", ",", "66", ",", "37", "]", ",", "\n", "[", "43", ",", "66", ",", "84", ",", "46", "]", ",", "\n", "[", "26", ",", "37", ",", "46", ",", "22", "]", "]", ")", "\n", "y1_expected", "=", "tf", ".", "reshape", "(", "y1_expected", ",", "[", "1", ",", "n", ",", "n", ",", "1", "]", ")", "\n", "\n", "y2", "=", "resnet_utils", ".", "subsample", "(", "y1", ",", "2", ")", "\n", "y2_expected", "=", "tf", ".", "to_float", "(", "[", "[", "14", ",", "43", "]", ",", "\n", "[", "43", ",", "84", "]", "]", ")", "\n", "y2_expected", "=", "tf", ".", "reshape", "(", "y2_expected", ",", "[", "1", ",", "n2", ",", "n2", ",", "1", "]", ")", "\n", "\n", "y3", "=", "resnet_utils", ".", "conv2d_same", "(", "x", ",", "1", ",", "3", ",", "stride", "=", "2", ",", "scope", "=", "'Conv'", ")", "\n", "y3_expected", "=", "y2_expected", "\n", "\n", "y4", "=", "slim", ".", "conv2d", "(", "x", ",", "1", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'Conv'", ")", "\n", "y4_expected", "=", "tf", ".", "to_float", "(", "[", "[", "48", ",", "37", "]", ",", "\n", "[", "37", ",", "22", "]", "]", ")", "\n", "y4_expected", "=", "tf", ".", "reshape", "(", "y4_expected", ",", "[", "1", ",", "n2", ",", "n2", ",", "1", "]", ")", "\n", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "y1", ".", "eval", "(", ")", ",", "y1_expected", ".", "eval", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "y2", ".", "eval", "(", ")", ",", "y2_expected", ".", "eval", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "y3", ".", "eval", "(", ")", ",", "y3_expected", ".", "eval", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "y4", ".", "eval", "(", ")", ",", "y4_expected", ".", "eval", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetUtilsTest.testConv2DSameOdd": [[113, 153], ["resnet_v1_test.create_test_input", "resnet_v1_test.create_test_input", "tensorflow.reshape", "tensorflow.get_variable", "tensorflow.get_variable", "tensorflow.get_variable_scope().reuse_variables", "slim.conv2d", "tensorflow.to_float", "tensorflow.reshape", "nets.resnet_utils.subsample", "tensorflow.to_float", "tensorflow.reshape", "nets.resnet_utils.conv2d_same", "slim.conv2d", "resnet_v1_test.ResnetUtilsTest.test_session", "sess.run", "resnet_v1_test.ResnetUtilsTest.assertAllClose", "resnet_v1_test.ResnetUtilsTest.assertAllClose", "resnet_v1_test.ResnetUtilsTest.assertAllClose", "resnet_v1_test.ResnetUtilsTest.assertAllClose", "tensorflow.zeros", "tensorflow.get_variable_scope", "tensorflow.initialize_all_variables", "slim.conv2d.eval", "tensorflow.reshape.eval", "nets.resnet_utils.subsample.eval", "tensorflow.reshape.eval", "nets.resnet_utils.conv2d_same.eval", "y3_expected.eval", "slim.conv2d.eval", "y4_expected.eval"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.subsample", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.conv2d_same", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testConv2DSameOdd", "(", "self", ")", ":", "\n", "    ", "n", ",", "n2", "=", "5", ",", "3", "\n", "\n", "# Input image.", "\n", "x", "=", "create_test_input", "(", "1", ",", "n", ",", "n", ",", "1", ")", "\n", "\n", "# Convolution kernel.", "\n", "w", "=", "create_test_input", "(", "1", ",", "3", ",", "3", ",", "1", ")", "\n", "w", "=", "tf", ".", "reshape", "(", "w", ",", "[", "3", ",", "3", ",", "1", ",", "1", "]", ")", "\n", "\n", "tf", ".", "get_variable", "(", "'Conv/weights'", ",", "initializer", "=", "w", ")", "\n", "tf", ".", "get_variable", "(", "'Conv/biases'", ",", "initializer", "=", "tf", ".", "zeros", "(", "[", "1", "]", ")", ")", "\n", "tf", ".", "get_variable_scope", "(", ")", ".", "reuse_variables", "(", ")", "\n", "\n", "y1", "=", "slim", ".", "conv2d", "(", "x", ",", "1", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'Conv'", ")", "\n", "y1_expected", "=", "tf", ".", "to_float", "(", "[", "[", "14", ",", "28", ",", "43", ",", "58", ",", "34", "]", ",", "\n", "[", "28", ",", "48", ",", "66", ",", "84", ",", "46", "]", ",", "\n", "[", "43", ",", "66", ",", "84", ",", "102", ",", "55", "]", ",", "\n", "[", "58", ",", "84", ",", "102", ",", "120", ",", "64", "]", ",", "\n", "[", "34", ",", "46", ",", "55", ",", "64", ",", "30", "]", "]", ")", "\n", "y1_expected", "=", "tf", ".", "reshape", "(", "y1_expected", ",", "[", "1", ",", "n", ",", "n", ",", "1", "]", ")", "\n", "\n", "y2", "=", "resnet_utils", ".", "subsample", "(", "y1", ",", "2", ")", "\n", "y2_expected", "=", "tf", ".", "to_float", "(", "[", "[", "14", ",", "43", ",", "34", "]", ",", "\n", "[", "43", ",", "84", ",", "55", "]", ",", "\n", "[", "34", ",", "55", ",", "30", "]", "]", ")", "\n", "y2_expected", "=", "tf", ".", "reshape", "(", "y2_expected", ",", "[", "1", ",", "n2", ",", "n2", ",", "1", "]", ")", "\n", "\n", "y3", "=", "resnet_utils", ".", "conv2d_same", "(", "x", ",", "1", ",", "3", ",", "stride", "=", "2", ",", "scope", "=", "'Conv'", ")", "\n", "y3_expected", "=", "y2_expected", "\n", "\n", "y4", "=", "slim", ".", "conv2d", "(", "x", ",", "1", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'Conv'", ")", "\n", "y4_expected", "=", "y2_expected", "\n", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "y1", ".", "eval", "(", ")", ",", "y1_expected", ".", "eval", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "y2", ".", "eval", "(", ")", ",", "y2_expected", ".", "eval", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "y3", ".", "eval", "(", ")", ",", "y3_expected", ".", "eval", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "y4", ".", "eval", "(", ")", ",", "y4_expected", ".", "eval", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetUtilsTest._resnet_plain": [[154, 161], ["tensorflow.variable_scope", "slim.arg_scope", "nets.resnet_utils.stack_blocks_dense", "dict", "tensorflow.get_collection"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.stack_blocks_dense"], ["", "", "def", "_resnet_plain", "(", "self", ",", "inputs", ",", "blocks", ",", "output_stride", "=", "None", ",", "scope", "=", "None", ")", ":", "\n", "    ", "\"\"\"A plain ResNet without extra layers before or after the ResNet blocks.\"\"\"", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "values", "=", "[", "inputs", "]", ")", ":", "\n", "      ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", "]", ",", "outputs_collections", "=", "'end_points'", ")", ":", "\n", "        ", "net", "=", "resnet_utils", ".", "stack_blocks_dense", "(", "inputs", ",", "blocks", ",", "output_stride", ")", "\n", "end_points", "=", "dict", "(", "tf", ".", "get_collection", "(", "'end_points'", ")", ")", "\n", "return", "net", ",", "end_points", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetUtilsTest.testEndPointsV1": [[162, 186], ["resnet_v1_test.create_test_input", "resnet_v1_test.ResnetUtilsTest.assertItemsEqual", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "slim.arg_scope", "resnet_v1_test.ResnetUtilsTest._resnet_plain", "nets.resnet_utils.resnet_arg_scope"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetUtilsTest._resnet_plain", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "", "", "def", "testEndPointsV1", "(", "self", ")", ":", "\n", "    ", "\"\"\"Test the end points of a tiny v1 bottleneck network.\"\"\"", "\n", "bottleneck", "=", "resnet_v1", ".", "bottleneck", "\n", "blocks", "=", "[", "resnet_utils", ".", "Block", "(", "'block1'", ",", "bottleneck", ",", "[", "(", "4", ",", "1", ",", "1", ")", ",", "(", "4", ",", "1", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "'block2'", ",", "bottleneck", ",", "[", "(", "8", ",", "2", ",", "1", ")", ",", "(", "8", ",", "2", ",", "1", ")", "]", ")", "]", "\n", "inputs", "=", "create_test_input", "(", "2", ",", "32", ",", "16", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "_", ",", "end_points", "=", "self", ".", "_resnet_plain", "(", "inputs", ",", "blocks", ",", "scope", "=", "'tiny'", ")", "\n", "", "expected", "=", "[", "\n", "'tiny/block1/unit_1/bottleneck_v1/shortcut'", ",", "\n", "'tiny/block1/unit_1/bottleneck_v1/conv1'", ",", "\n", "'tiny/block1/unit_1/bottleneck_v1/conv2'", ",", "\n", "'tiny/block1/unit_1/bottleneck_v1/conv3'", ",", "\n", "'tiny/block1/unit_2/bottleneck_v1/conv1'", ",", "\n", "'tiny/block1/unit_2/bottleneck_v1/conv2'", ",", "\n", "'tiny/block1/unit_2/bottleneck_v1/conv3'", ",", "\n", "'tiny/block2/unit_1/bottleneck_v1/shortcut'", ",", "\n", "'tiny/block2/unit_1/bottleneck_v1/conv1'", ",", "\n", "'tiny/block2/unit_1/bottleneck_v1/conv2'", ",", "\n", "'tiny/block2/unit_1/bottleneck_v1/conv3'", ",", "\n", "'tiny/block2/unit_2/bottleneck_v1/conv1'", ",", "\n", "'tiny/block2/unit_2/bottleneck_v1/conv2'", ",", "\n", "'tiny/block2/unit_2/bottleneck_v1/conv3'", "]", "\n", "self", ".", "assertItemsEqual", "(", "expected", ",", "end_points", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetUtilsTest._stack_blocks_nondense": [[187, 200], ["tensorflow.variable_scope", "enumerate", "tensorflow.variable_scope", "block.unit_fn"], "methods", ["None"], ["", "def", "_stack_blocks_nondense", "(", "self", ",", "net", ",", "blocks", ")", ":", "\n", "    ", "\"\"\"A simplified ResNet Block stacker without output stride control.\"\"\"", "\n", "for", "block", "in", "blocks", ":", "\n", "      ", "with", "tf", ".", "variable_scope", "(", "block", ".", "scope", ",", "'block'", ",", "[", "net", "]", ")", ":", "\n", "        ", "for", "i", ",", "unit", "in", "enumerate", "(", "block", ".", "args", ")", ":", "\n", "          ", "depth", ",", "depth_bottleneck", ",", "stride", "=", "unit", "\n", "with", "tf", ".", "variable_scope", "(", "'unit_%d'", "%", "(", "i", "+", "1", ")", ",", "values", "=", "[", "net", "]", ")", ":", "\n", "            ", "net", "=", "block", ".", "unit_fn", "(", "net", ",", "\n", "depth", "=", "depth", ",", "\n", "depth_bottleneck", "=", "depth_bottleneck", ",", "\n", "stride", "=", "stride", ",", "\n", "rate", "=", "1", ")", "\n", "", "", "", "", "return", "net", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetUtilsTest._atrousValues": [[201, 246], ["nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "slim.arg_scope", "nets.resnet_utils.resnet_arg_scope", "slim.arg_scope", "tensorflow.Graph().as_default", "resnet_v1_test.ResnetUtilsTest.test_session", "tensorflow.set_random_seed", "resnet_v1_test.create_test_input", "nets.resnet_utils.stack_blocks_dense", "nets.resnet_utils.subsample", "tensorflow.get_variable_scope().reuse_variables", "resnet_v1_test.ResnetUtilsTest._stack_blocks_nondense", "sess.run", "sess.run", "resnet_v1_test.ResnetUtilsTest.assertAllClose", "tensorflow.Graph", "tensorflow.initialize_all_variables", "tensorflow.get_variable_scope"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.stack_blocks_dense", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.subsample", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetUtilsTest._stack_blocks_nondense", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "def", "_atrousValues", "(", "self", ",", "bottleneck", ")", ":", "\n", "    ", "\"\"\"Verify the values of dense feature extraction by atrous convolution.\n\n    Make sure that dense feature extraction by stack_blocks_dense() followed by\n    subsampling gives identical results to feature extraction at the nominal\n    network output stride using the simple self._stack_blocks_nondense() above.\n\n    Args:\n      bottleneck: The bottleneck function.\n    \"\"\"", "\n", "blocks", "=", "[", "\n", "resnet_utils", ".", "Block", "(", "'block1'", ",", "bottleneck", ",", "[", "(", "4", ",", "1", ",", "1", ")", ",", "(", "4", ",", "1", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "'block2'", ",", "bottleneck", ",", "[", "(", "8", ",", "2", ",", "1", ")", ",", "(", "8", ",", "2", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "'block3'", ",", "bottleneck", ",", "[", "(", "16", ",", "4", ",", "1", ")", ",", "(", "16", ",", "4", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "'block4'", ",", "bottleneck", ",", "[", "(", "32", ",", "8", ",", "1", ")", ",", "(", "32", ",", "8", ",", "1", ")", "]", ")", "\n", "]", "\n", "nominal_stride", "=", "8", "\n", "\n", "# Test both odd and even input dimensions.", "\n", "height", "=", "30", "\n", "width", "=", "31", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "batch_norm", "]", ",", "is_training", "=", "False", ")", ":", "\n", "        ", "for", "output_stride", "in", "[", "1", ",", "2", ",", "4", ",", "8", ",", "None", "]", ":", "\n", "          ", "with", "tf", ".", "Graph", "(", ")", ".", "as_default", "(", ")", ":", "\n", "            ", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "              ", "tf", ".", "set_random_seed", "(", "0", ")", "\n", "inputs", "=", "create_test_input", "(", "1", ",", "height", ",", "width", ",", "3", ")", "\n", "# Dense feature extraction followed by subsampling.", "\n", "output", "=", "resnet_utils", ".", "stack_blocks_dense", "(", "inputs", ",", "\n", "blocks", ",", "\n", "output_stride", ")", "\n", "if", "output_stride", "is", "None", ":", "\n", "                ", "factor", "=", "1", "\n", "", "else", ":", "\n", "                ", "factor", "=", "nominal_stride", "//", "output_stride", "\n", "\n", "", "output", "=", "resnet_utils", ".", "subsample", "(", "output", ",", "factor", ")", "\n", "# Make the two networks use the same weights.", "\n", "tf", ".", "get_variable_scope", "(", ")", ".", "reuse_variables", "(", ")", "\n", "# Feature extraction at the nominal network rate.", "\n", "expected", "=", "self", ".", "_stack_blocks_nondense", "(", "inputs", ",", "blocks", ")", "\n", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", ",", "expected", "=", "sess", ".", "run", "(", "[", "output", ",", "expected", "]", ")", "\n", "self", ".", "assertAllClose", "(", "output", ",", "expected", ",", "atol", "=", "1e-4", ",", "rtol", "=", "1e-4", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetUtilsTest.testAtrousValuesBottleneck": [[247, 249], ["resnet_v1_test.ResnetUtilsTest._atrousValues"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetUtilsTest._atrousValues"], ["", "", "", "", "", "", "def", "testAtrousValuesBottleneck", "(", "self", ")", ":", "\n", "    ", "self", ".", "_atrousValues", "(", "resnet_v1", ".", "bottleneck", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetCompleteNetworkTest._resnet_small": [[254, 281], ["nets.resnet_v1.resnet_v1", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1.resnet_v1"], ["def", "_resnet_small", "(", "self", ",", "\n", "inputs", ",", "\n", "num_classes", "=", "None", ",", "\n", "is_training", "=", "True", ",", "\n", "global_pool", "=", "True", ",", "\n", "output_stride", "=", "None", ",", "\n", "include_root_block", "=", "True", ",", "\n", "reuse", "=", "None", ",", "\n", "scope", "=", "'resnet_v1_small'", ")", ":", "\n", "    ", "\"\"\"A shallow and thin ResNet v1 for faster tests.\"\"\"", "\n", "bottleneck", "=", "resnet_v1", ".", "bottleneck", "\n", "blocks", "=", "[", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block1'", ",", "bottleneck", ",", "[", "(", "4", ",", "1", ",", "1", ")", "]", "*", "2", "+", "[", "(", "4", ",", "1", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block2'", ",", "bottleneck", ",", "[", "(", "8", ",", "2", ",", "1", ")", "]", "*", "2", "+", "[", "(", "8", ",", "2", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block3'", ",", "bottleneck", ",", "[", "(", "16", ",", "4", ",", "1", ")", "]", "*", "2", "+", "[", "(", "16", ",", "4", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block4'", ",", "bottleneck", ",", "[", "(", "32", ",", "8", ",", "1", ")", "]", "*", "2", ")", "]", "\n", "return", "resnet_v1", ".", "resnet_v1", "(", "inputs", ",", "blocks", ",", "num_classes", ",", "\n", "is_training", "=", "is_training", ",", "\n", "global_pool", "=", "global_pool", ",", "\n", "output_stride", "=", "output_stride", ",", "\n", "include_root_block", "=", "include_root_block", ",", "\n", "reuse", "=", "reuse", ",", "\n", "scope", "=", "scope", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetCompleteNetworkTest.testClassificationEndPoints": [[282, 295], ["resnet_v1_test.create_test_input", "resnet_v1_test.ResnetCompleteNetworkTest.assertTrue", "resnet_v1_test.ResnetCompleteNetworkTest.assertListEqual", "resnet_v1_test.ResnetCompleteNetworkTest.assertTrue", "resnet_v1_test.ResnetCompleteNetworkTest.assertListEqual", "slim.arg_scope", "resnet_v1_test.ResnetCompleteNetworkTest._resnet_small", "logits.op.name.startswith", "logits.get_shape().as_list", "end_points[].get_shape().as_list", "nets.resnet_utils.resnet_arg_scope", "logits.get_shape", "end_points[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "def", "testClassificationEndPoints", "(", "self", ")", ":", "\n", "    ", "global_pool", "=", "True", "\n", "num_classes", "=", "10", "\n", "inputs", "=", "create_test_input", "(", "2", ",", "224", ",", "224", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "logits", ",", "end_points", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "num_classes", ",", "\n", "global_pool", "=", "global_pool", ",", "\n", "scope", "=", "'resnet'", ")", "\n", "", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'resnet/logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "[", "2", ",", "1", ",", "1", ",", "num_classes", "]", ")", "\n", "self", ".", "assertTrue", "(", "'predictions'", "in", "end_points", ")", "\n", "self", ".", "assertListEqual", "(", "end_points", "[", "'predictions'", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "2", ",", "1", ",", "1", ",", "num_classes", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetCompleteNetworkTest.testClassificationShapes": [[296, 312], ["resnet_v1_test.create_test_input", "slim.arg_scope", "resnet_v1_test.ResnetCompleteNetworkTest._resnet_small", "nets.resnet_utils.resnet_arg_scope", "resnet_v1_test.ResnetCompleteNetworkTest.assertListEqual", "end_points[].get_shape().as_list", "end_points[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "def", "testClassificationShapes", "(", "self", ")", ":", "\n", "    ", "global_pool", "=", "True", "\n", "num_classes", "=", "10", "\n", "inputs", "=", "create_test_input", "(", "2", ",", "224", ",", "224", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "_", ",", "end_points", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "num_classes", ",", "\n", "global_pool", "=", "global_pool", ",", "\n", "scope", "=", "'resnet'", ")", "\n", "endpoint_to_shape", "=", "{", "\n", "'resnet/block1'", ":", "[", "2", ",", "28", ",", "28", ",", "4", "]", ",", "\n", "'resnet/block2'", ":", "[", "2", ",", "14", ",", "14", ",", "8", "]", ",", "\n", "'resnet/block3'", ":", "[", "2", ",", "7", ",", "7", ",", "16", "]", ",", "\n", "'resnet/block4'", ":", "[", "2", ",", "7", ",", "7", ",", "32", "]", "}", "\n", "for", "endpoint", "in", "endpoint_to_shape", ":", "\n", "        ", "shape", "=", "endpoint_to_shape", "[", "endpoint", "]", "\n", "self", ".", "assertListEqual", "(", "end_points", "[", "endpoint", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetCompleteNetworkTest.testFullyConvolutionalEndpointShapes": [[313, 329], ["resnet_v1_test.create_test_input", "slim.arg_scope", "resnet_v1_test.ResnetCompleteNetworkTest._resnet_small", "nets.resnet_utils.resnet_arg_scope", "resnet_v1_test.ResnetCompleteNetworkTest.assertListEqual", "end_points[].get_shape().as_list", "end_points[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "", "", "def", "testFullyConvolutionalEndpointShapes", "(", "self", ")", ":", "\n", "    ", "global_pool", "=", "False", "\n", "num_classes", "=", "10", "\n", "inputs", "=", "create_test_input", "(", "2", ",", "321", ",", "321", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "_", ",", "end_points", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "num_classes", ",", "\n", "global_pool", "=", "global_pool", ",", "\n", "scope", "=", "'resnet'", ")", "\n", "endpoint_to_shape", "=", "{", "\n", "'resnet/block1'", ":", "[", "2", ",", "41", ",", "41", ",", "4", "]", ",", "\n", "'resnet/block2'", ":", "[", "2", ",", "21", ",", "21", ",", "8", "]", ",", "\n", "'resnet/block3'", ":", "[", "2", ",", "11", ",", "11", ",", "16", "]", ",", "\n", "'resnet/block4'", ":", "[", "2", ",", "11", ",", "11", ",", "32", "]", "}", "\n", "for", "endpoint", "in", "endpoint_to_shape", ":", "\n", "        ", "shape", "=", "endpoint_to_shape", "[", "endpoint", "]", "\n", "self", ".", "assertListEqual", "(", "end_points", "[", "endpoint", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetCompleteNetworkTest.testRootlessFullyConvolutionalEndpointShapes": [[330, 347], ["resnet_v1_test.create_test_input", "slim.arg_scope", "resnet_v1_test.ResnetCompleteNetworkTest._resnet_small", "nets.resnet_utils.resnet_arg_scope", "resnet_v1_test.ResnetCompleteNetworkTest.assertListEqual", "end_points[].get_shape().as_list", "end_points[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "", "", "def", "testRootlessFullyConvolutionalEndpointShapes", "(", "self", ")", ":", "\n", "    ", "global_pool", "=", "False", "\n", "num_classes", "=", "10", "\n", "inputs", "=", "create_test_input", "(", "2", ",", "128", ",", "128", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "_", ",", "end_points", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "num_classes", ",", "\n", "global_pool", "=", "global_pool", ",", "\n", "include_root_block", "=", "False", ",", "\n", "scope", "=", "'resnet'", ")", "\n", "endpoint_to_shape", "=", "{", "\n", "'resnet/block1'", ":", "[", "2", ",", "64", ",", "64", ",", "4", "]", ",", "\n", "'resnet/block2'", ":", "[", "2", ",", "32", ",", "32", ",", "8", "]", ",", "\n", "'resnet/block3'", ":", "[", "2", ",", "16", ",", "16", ",", "16", "]", ",", "\n", "'resnet/block4'", ":", "[", "2", ",", "16", ",", "16", ",", "32", "]", "}", "\n", "for", "endpoint", "in", "endpoint_to_shape", ":", "\n", "        ", "shape", "=", "endpoint_to_shape", "[", "endpoint", "]", "\n", "self", ".", "assertListEqual", "(", "end_points", "[", "endpoint", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetCompleteNetworkTest.testAtrousFullyConvolutionalEndpointShapes": [[348, 367], ["resnet_v1_test.create_test_input", "slim.arg_scope", "resnet_v1_test.ResnetCompleteNetworkTest._resnet_small", "nets.resnet_utils.resnet_arg_scope", "resnet_v1_test.ResnetCompleteNetworkTest.assertListEqual", "end_points[].get_shape().as_list", "end_points[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "", "", "def", "testAtrousFullyConvolutionalEndpointShapes", "(", "self", ")", ":", "\n", "    ", "global_pool", "=", "False", "\n", "num_classes", "=", "10", "\n", "output_stride", "=", "8", "\n", "inputs", "=", "create_test_input", "(", "2", ",", "321", ",", "321", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "_", ",", "end_points", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "\n", "num_classes", ",", "\n", "global_pool", "=", "global_pool", ",", "\n", "output_stride", "=", "output_stride", ",", "\n", "scope", "=", "'resnet'", ")", "\n", "endpoint_to_shape", "=", "{", "\n", "'resnet/block1'", ":", "[", "2", ",", "41", ",", "41", ",", "4", "]", ",", "\n", "'resnet/block2'", ":", "[", "2", ",", "41", ",", "41", ",", "8", "]", ",", "\n", "'resnet/block3'", ":", "[", "2", ",", "41", ",", "41", ",", "16", "]", ",", "\n", "'resnet/block4'", ":", "[", "2", ",", "41", ",", "41", ",", "32", "]", "}", "\n", "for", "endpoint", "in", "endpoint_to_shape", ":", "\n", "        ", "shape", "=", "endpoint_to_shape", "[", "endpoint", "]", "\n", "self", ".", "assertListEqual", "(", "end_points", "[", "endpoint", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetCompleteNetworkTest.testAtrousFullyConvolutionalValues": [[368, 394], ["slim.arg_scope", "nets.resnet_utils.resnet_arg_scope", "tensorflow.Graph().as_default", "resnet_v1_test.ResnetCompleteNetworkTest.test_session", "tensorflow.set_random_seed", "resnet_v1_test.create_test_input", "resnet_v1_test.ResnetCompleteNetworkTest._resnet_small", "nets.resnet_utils.subsample", "tensorflow.get_variable_scope().reuse_variables", "resnet_v1_test.ResnetCompleteNetworkTest._resnet_small", "sess.run", "resnet_v1_test.ResnetCompleteNetworkTest.assertAllClose", "tensorflow.Graph", "tensorflow.initialize_all_variables", "nets.resnet_utils.subsample.eval", "expected.eval", "tensorflow.get_variable_scope"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.subsample", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "", "def", "testAtrousFullyConvolutionalValues", "(", "self", ")", ":", "\n", "    ", "\"\"\"Verify dense feature extraction with atrous convolution.\"\"\"", "\n", "nominal_stride", "=", "32", "\n", "for", "output_stride", "in", "[", "4", ",", "8", ",", "16", ",", "32", ",", "None", "]", ":", "\n", "      ", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "        ", "with", "tf", ".", "Graph", "(", ")", ".", "as_default", "(", ")", ":", "\n", "          ", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "            ", "tf", ".", "set_random_seed", "(", "0", ")", "\n", "inputs", "=", "create_test_input", "(", "2", ",", "81", ",", "81", ",", "3", ")", "\n", "# Dense feature extraction followed by subsampling.", "\n", "output", ",", "_", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "None", ",", "is_training", "=", "False", ",", "\n", "global_pool", "=", "False", ",", "\n", "output_stride", "=", "output_stride", ")", "\n", "if", "output_stride", "is", "None", ":", "\n", "              ", "factor", "=", "1", "\n", "", "else", ":", "\n", "              ", "factor", "=", "nominal_stride", "//", "output_stride", "\n", "", "output", "=", "resnet_utils", ".", "subsample", "(", "output", ",", "factor", ")", "\n", "# Make the two networks use the same weights.", "\n", "tf", ".", "get_variable_scope", "(", ")", ".", "reuse_variables", "(", ")", "\n", "# Feature extraction at the nominal network rate.", "\n", "expected", ",", "_", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "None", ",", "is_training", "=", "False", ",", "\n", "global_pool", "=", "False", ")", "\n", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "output", ".", "eval", "(", ")", ",", "expected", ".", "eval", "(", ")", ",", "\n", "atol", "=", "1e-4", ",", "rtol", "=", "1e-4", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetCompleteNetworkTest.testUnknownBatchSize": [[395, 413], ["resnet_v1_test.create_test_input", "resnet_v1_test.ResnetCompleteNetworkTest.assertTrue", "resnet_v1_test.ResnetCompleteNetworkTest.assertListEqual", "resnet_v1_test.create_test_input", "slim.arg_scope", "resnet_v1_test.ResnetCompleteNetworkTest._resnet_small", "logits.op.name.startswith", "logits.get_shape().as_list", "resnet_v1_test.ResnetCompleteNetworkTest.test_session", "sess.run", "sess.run", "resnet_v1_test.ResnetCompleteNetworkTest.assertEqual", "nets.resnet_utils.resnet_arg_scope", "tensorflow.initialize_all_variables", "logits.get_shape", "create_test_input.eval"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "", "", "", "", "def", "testUnknownBatchSize", "(", "self", ")", ":", "\n", "    ", "batch", "=", "2", "\n", "height", ",", "width", "=", "65", ",", "65", "\n", "global_pool", "=", "True", "\n", "num_classes", "=", "10", "\n", "inputs", "=", "create_test_input", "(", "None", ",", "height", ",", "width", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "logits", ",", "_", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "num_classes", ",", "\n", "global_pool", "=", "global_pool", ",", "\n", "scope", "=", "'resnet'", ")", "\n", "", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'resnet/logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "None", ",", "1", ",", "1", ",", "num_classes", "]", ")", "\n", "images", "=", "create_test_input", "(", "batch", ",", "height", ",", "width", ",", "3", ")", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "logits", ",", "{", "inputs", ":", "images", ".", "eval", "(", ")", "}", ")", "\n", "self", ".", "assertEqual", "(", "output", ".", "shape", ",", "(", "batch", ",", "1", ",", "1", ",", "num_classes", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetCompleteNetworkTest.testFullyConvolutionalUnknownHeightWidth": [[414, 428], ["resnet_v1_test.create_test_input", "resnet_v1_test.ResnetCompleteNetworkTest.assertListEqual", "resnet_v1_test.create_test_input", "slim.arg_scope", "resnet_v1_test.ResnetCompleteNetworkTest._resnet_small", "sess.run.get_shape().as_list", "resnet_v1_test.ResnetCompleteNetworkTest.test_session", "sess.run", "sess.run", "resnet_v1_test.ResnetCompleteNetworkTest.assertEqual", "nets.resnet_utils.resnet_arg_scope", "tensorflow.initialize_all_variables", "sess.run.get_shape", "create_test_input.eval"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "", "def", "testFullyConvolutionalUnknownHeightWidth", "(", "self", ")", ":", "\n", "    ", "batch", "=", "2", "\n", "height", ",", "width", "=", "65", ",", "65", "\n", "global_pool", "=", "False", "\n", "inputs", "=", "create_test_input", "(", "batch", ",", "None", ",", "None", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "output", ",", "_", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "None", ",", "global_pool", "=", "global_pool", ")", "\n", "", "self", ".", "assertListEqual", "(", "output", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch", ",", "None", ",", "None", ",", "32", "]", ")", "\n", "images", "=", "create_test_input", "(", "batch", ",", "height", ",", "width", ",", "3", ")", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "output", ",", "{", "inputs", ":", "images", ".", "eval", "(", ")", "}", ")", "\n", "self", ".", "assertEqual", "(", "output", ".", "shape", ",", "(", "batch", ",", "3", ",", "3", ",", "32", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.ResnetCompleteNetworkTest.testAtrousFullyConvolutionalUnknownHeightWidth": [[429, 447], ["resnet_v1_test.create_test_input", "resnet_v1_test.ResnetCompleteNetworkTest.assertListEqual", "resnet_v1_test.create_test_input", "slim.arg_scope", "resnet_v1_test.ResnetCompleteNetworkTest._resnet_small", "sess.run.get_shape().as_list", "resnet_v1_test.ResnetCompleteNetworkTest.test_session", "sess.run", "sess.run", "resnet_v1_test.ResnetCompleteNetworkTest.assertEqual", "nets.resnet_utils.resnet_arg_scope", "tensorflow.initialize_all_variables", "sess.run.get_shape", "create_test_input.eval"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "", "def", "testAtrousFullyConvolutionalUnknownHeightWidth", "(", "self", ")", ":", "\n", "    ", "batch", "=", "2", "\n", "height", ",", "width", "=", "65", ",", "65", "\n", "global_pool", "=", "False", "\n", "output_stride", "=", "8", "\n", "inputs", "=", "create_test_input", "(", "batch", ",", "None", ",", "None", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "output", ",", "_", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "\n", "None", ",", "\n", "global_pool", "=", "global_pool", ",", "\n", "output_stride", "=", "output_stride", ")", "\n", "", "self", ".", "assertListEqual", "(", "output", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch", ",", "None", ",", "None", ",", "32", "]", ")", "\n", "images", "=", "create_test_input", "(", "batch", ",", "height", ",", "width", ",", "3", ")", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "output", ",", "{", "inputs", ":", "images", ".", "eval", "(", ")", "}", ")", "\n", "self", ".", "assertEqual", "(", "output", ".", "shape", ",", "(", "batch", ",", "9", ",", "9", ",", "32", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v1_test.create_test_input": [[30, 54], ["tensorflow.placeholder", "tensorflow.to_float", "numpy.tile", "numpy.reshape", "numpy.reshape", "numpy.reshape", "numpy.arange", "numpy.arange"], "function", ["None"], ["def", "create_test_input", "(", "batch_size", ",", "height", ",", "width", ",", "channels", ")", ":", "\n", "  ", "\"\"\"Create test input tensor.\n\n  Args:\n    batch_size: The number of images per batch or `None` if unknown.\n    height: The height of each image or `None` if unknown.\n    width: The width of each image or `None` if unknown.\n    channels: The number of channels per image or `None` if unknown.\n\n  Returns:\n    Either a placeholder `Tensor` of dimension\n      [batch_size, height, width, channels] if any of the inputs are `None` or a\n    constant `Tensor` with the mesh grid values along the spatial dimensions.\n  \"\"\"", "\n", "if", "None", "in", "[", "batch_size", ",", "height", ",", "width", ",", "channels", "]", ":", "\n", "    ", "return", "tf", ".", "placeholder", "(", "tf", ".", "float32", ",", "(", "batch_size", ",", "height", ",", "width", ",", "channels", ")", ")", "\n", "", "else", ":", "\n", "    ", "return", "tf", ".", "to_float", "(", "\n", "np", ".", "tile", "(", "\n", "np", ".", "reshape", "(", "\n", "np", ".", "reshape", "(", "np", ".", "arange", "(", "height", ")", ",", "[", "height", ",", "1", "]", ")", "+", "\n", "np", ".", "reshape", "(", "np", ".", "arange", "(", "width", ")", ",", "[", "1", ",", "width", "]", ")", ",", "\n", "[", "1", ",", "height", ",", "width", ",", "1", "]", ")", ",", "\n", "[", "batch_size", ",", "1", ",", "1", ",", "channels", "]", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2.block35": [[33, 52], ["tensorflow.variable_scope", "tensorflow.concat", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "activation_fn", "activation_fn.get_shape"], "function", ["None"], ["def", "block35", "(", "net", ",", "scale", "=", "1.0", ",", "activation_fn", "=", "tf", ".", "nn", ".", "relu", ",", "scope", "=", "None", ",", "reuse", "=", "None", ")", ":", "\n", "  ", "\"\"\"Builds the 35x35 resnet block.\"\"\"", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'Block35'", ",", "[", "net", "]", ",", "reuse", "=", "reuse", ")", ":", "\n", "    ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "      ", "tower_conv", "=", "slim", ".", "conv2d", "(", "net", ",", "32", ",", "1", ",", "scope", "=", "'Conv2d_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "      ", "tower_conv1_0", "=", "slim", ".", "conv2d", "(", "net", ",", "32", ",", "1", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "tower_conv1_1", "=", "slim", ".", "conv2d", "(", "tower_conv1_0", ",", "32", ",", "3", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "      ", "tower_conv2_0", "=", "slim", ".", "conv2d", "(", "net", ",", "32", ",", "1", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "tower_conv2_1", "=", "slim", ".", "conv2d", "(", "tower_conv2_0", ",", "48", ",", "3", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "tower_conv2_2", "=", "slim", ".", "conv2d", "(", "tower_conv2_1", ",", "64", ",", "3", ",", "scope", "=", "'Conv2d_0c_3x3'", ")", "\n", "", "mixed", "=", "tf", ".", "concat", "(", "3", ",", "[", "tower_conv", ",", "tower_conv1_1", ",", "tower_conv2_2", "]", ")", "\n", "up", "=", "slim", ".", "conv2d", "(", "mixed", ",", "net", ".", "get_shape", "(", ")", "[", "3", "]", ",", "1", ",", "normalizer_fn", "=", "None", ",", "\n", "activation_fn", "=", "None", ",", "scope", "=", "'Conv2d_1x1'", ")", "\n", "net", "+=", "scale", "*", "up", "\n", "if", "activation_fn", ":", "\n", "      ", "net", "=", "activation_fn", "(", "net", ")", "\n", "", "", "return", "net", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2.block17": [[54, 72], ["tensorflow.variable_scope", "tensorflow.concat", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "activation_fn", "activation_fn.get_shape"], "function", ["None"], ["", "def", "block17", "(", "net", ",", "scale", "=", "1.0", ",", "activation_fn", "=", "tf", ".", "nn", ".", "relu", ",", "scope", "=", "None", ",", "reuse", "=", "None", ")", ":", "\n", "  ", "\"\"\"Builds the 17x17 resnet block.\"\"\"", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'Block17'", ",", "[", "net", "]", ",", "reuse", "=", "reuse", ")", ":", "\n", "    ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "      ", "tower_conv", "=", "slim", ".", "conv2d", "(", "net", ",", "192", ",", "1", ",", "scope", "=", "'Conv2d_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "      ", "tower_conv1_0", "=", "slim", ".", "conv2d", "(", "net", ",", "128", ",", "1", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "tower_conv1_1", "=", "slim", ".", "conv2d", "(", "tower_conv1_0", ",", "160", ",", "[", "1", ",", "7", "]", ",", "\n", "scope", "=", "'Conv2d_0b_1x7'", ")", "\n", "tower_conv1_2", "=", "slim", ".", "conv2d", "(", "tower_conv1_1", ",", "192", ",", "[", "7", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0c_7x1'", ")", "\n", "", "mixed", "=", "tf", ".", "concat", "(", "3", ",", "[", "tower_conv", ",", "tower_conv1_2", "]", ")", "\n", "up", "=", "slim", ".", "conv2d", "(", "mixed", ",", "net", ".", "get_shape", "(", ")", "[", "3", "]", ",", "1", ",", "normalizer_fn", "=", "None", ",", "\n", "activation_fn", "=", "None", ",", "scope", "=", "'Conv2d_1x1'", ")", "\n", "net", "+=", "scale", "*", "up", "\n", "if", "activation_fn", ":", "\n", "      ", "net", "=", "activation_fn", "(", "net", ")", "\n", "", "", "return", "net", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2.block8": [[74, 92], ["tensorflow.variable_scope", "tensorflow.concat", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "activation_fn", "activation_fn.get_shape"], "function", ["None"], ["", "def", "block8", "(", "net", ",", "scale", "=", "1.0", ",", "activation_fn", "=", "tf", ".", "nn", ".", "relu", ",", "scope", "=", "None", ",", "reuse", "=", "None", ")", ":", "\n", "  ", "\"\"\"Builds the 8x8 resnet block.\"\"\"", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'Block8'", ",", "[", "net", "]", ",", "reuse", "=", "reuse", ")", ":", "\n", "    ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "      ", "tower_conv", "=", "slim", ".", "conv2d", "(", "net", ",", "192", ",", "1", ",", "scope", "=", "'Conv2d_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "      ", "tower_conv1_0", "=", "slim", ".", "conv2d", "(", "net", ",", "192", ",", "1", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "tower_conv1_1", "=", "slim", ".", "conv2d", "(", "tower_conv1_0", ",", "224", ",", "[", "1", ",", "3", "]", ",", "\n", "scope", "=", "'Conv2d_0b_1x3'", ")", "\n", "tower_conv1_2", "=", "slim", ".", "conv2d", "(", "tower_conv1_1", ",", "256", ",", "[", "3", ",", "1", "]", ",", "\n", "scope", "=", "'Conv2d_0c_3x1'", ")", "\n", "", "mixed", "=", "tf", ".", "concat", "(", "3", ",", "[", "tower_conv", ",", "tower_conv1_2", "]", ")", "\n", "up", "=", "slim", ".", "conv2d", "(", "mixed", ",", "net", ".", "get_shape", "(", ")", "[", "3", "]", ",", "1", ",", "normalizer_fn", "=", "None", ",", "\n", "activation_fn", "=", "None", ",", "scope", "=", "'Conv2d_1x1'", ")", "\n", "net", "+=", "scale", "*", "up", "\n", "if", "activation_fn", ":", "\n", "      ", "net", "=", "activation_fn", "(", "net", ")", "\n", "", "", "return", "net", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2.inception_resnet_v2": [[94, 251], ["tensorflow.variable_scope", "slim.arg_scope", "slim.arg_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "slim.max_pool2d", "slim.conv2d", "slim.conv2d", "slim.max_pool2d", "slim.repeat", "slim.repeat", "slim.repeat", "inception_resnet_v2.block8", "slim.conv2d", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "slim.conv2d", "slim.flatten", "slim.fully_connected", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.flatten", "slim.dropout", "slim.fully_connected", "tensorflow.nn.softmax", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d", "slim.fully_connected.get_shape", "slim.dropout.get_shape"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2.block8"], ["", "def", "inception_resnet_v2", "(", "inputs", ",", "num_classes", "=", "1001", ",", "is_training", "=", "True", ",", "\n", "dropout_keep_prob", "=", "0.8", ",", "\n", "reuse", "=", "None", ",", "\n", "scope", "=", "'InceptionResnetV2'", ")", ":", "\n", "  ", "\"\"\"Creates the Inception Resnet V2 model.\n\n  Args:\n    inputs: a 4-D tensor of size [batch_size, height, width, 3].\n    num_classes: number of predicted classes.\n    is_training: whether is training or not.\n    dropout_keep_prob: float, the fraction to keep before final layer.\n    reuse: whether or not the network and its variables should be reused. To be\n      able to reuse 'scope' must be given.\n    scope: Optional variable_scope.\n\n  Returns:\n    logits: the logits outputs of the model.\n    end_points: the set of end_points from the inception model.\n  \"\"\"", "\n", "end_points", "=", "{", "}", "\n", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'InceptionResnetV2'", ",", "[", "inputs", "]", ",", "reuse", "=", "reuse", ")", ":", "\n", "    ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "batch_norm", ",", "slim", ".", "dropout", "]", ",", "\n", "is_training", "=", "is_training", ")", ":", "\n", "      ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "max_pool2d", ",", "slim", ".", "avg_pool2d", "]", ",", "\n", "stride", "=", "1", ",", "padding", "=", "'SAME'", ")", ":", "\n", "\n", "# 149 x 149 x 32", "\n", "        ", "net", "=", "slim", ".", "conv2d", "(", "inputs", ",", "32", ",", "3", ",", "stride", "=", "2", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "end_points", "[", "'Conv2d_1a_3x3'", "]", "=", "net", "\n", "# 147 x 147 x 32", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "32", ",", "3", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'Conv2d_2a_3x3'", ")", "\n", "end_points", "[", "'Conv2d_2a_3x3'", "]", "=", "net", "\n", "# 147 x 147 x 64", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "64", ",", "3", ",", "scope", "=", "'Conv2d_2b_3x3'", ")", "\n", "end_points", "[", "'Conv2d_2b_3x3'", "]", "=", "net", "\n", "# 73 x 73 x 64", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "3", ",", "stride", "=", "2", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'MaxPool_3a_3x3'", ")", "\n", "end_points", "[", "'MaxPool_3a_3x3'", "]", "=", "net", "\n", "# 73 x 73 x 80", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "80", ",", "1", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'Conv2d_3b_1x1'", ")", "\n", "end_points", "[", "'Conv2d_3b_1x1'", "]", "=", "net", "\n", "# 71 x 71 x 192", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "192", ",", "3", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'Conv2d_4a_3x3'", ")", "\n", "end_points", "[", "'Conv2d_4a_3x3'", "]", "=", "net", "\n", "# 35 x 35 x 192", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "3", ",", "stride", "=", "2", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'MaxPool_5a_3x3'", ")", "\n", "end_points", "[", "'MaxPool_5a_3x3'", "]", "=", "net", "\n", "\n", "# 35 x 35 x 320", "\n", "with", "tf", ".", "variable_scope", "(", "'Mixed_5b'", ")", ":", "\n", "          ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "            ", "tower_conv", "=", "slim", ".", "conv2d", "(", "net", ",", "96", ",", "1", ",", "scope", "=", "'Conv2d_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "            ", "tower_conv1_0", "=", "slim", ".", "conv2d", "(", "net", ",", "48", ",", "1", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "tower_conv1_1", "=", "slim", ".", "conv2d", "(", "tower_conv1_0", ",", "64", ",", "5", ",", "\n", "scope", "=", "'Conv2d_0b_5x5'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "            ", "tower_conv2_0", "=", "slim", ".", "conv2d", "(", "net", ",", "64", ",", "1", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "tower_conv2_1", "=", "slim", ".", "conv2d", "(", "tower_conv2_0", ",", "96", ",", "3", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "tower_conv2_2", "=", "slim", ".", "conv2d", "(", "tower_conv2_1", ",", "96", ",", "3", ",", "\n", "scope", "=", "'Conv2d_0c_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "            ", "tower_pool", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "3", ",", "stride", "=", "1", ",", "padding", "=", "'SAME'", ",", "\n", "scope", "=", "'AvgPool_0a_3x3'", ")", "\n", "tower_pool_1", "=", "slim", ".", "conv2d", "(", "tower_pool", ",", "64", ",", "1", ",", "\n", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "tower_conv", ",", "tower_conv1_1", ",", "\n", "tower_conv2_2", ",", "tower_pool_1", "]", ")", "\n", "\n", "", "end_points", "[", "'Mixed_5b'", "]", "=", "net", "\n", "net", "=", "slim", ".", "repeat", "(", "net", ",", "10", ",", "block35", ",", "scale", "=", "0.17", ")", "\n", "\n", "# 17 x 17 x 1024", "\n", "with", "tf", ".", "variable_scope", "(", "'Mixed_6a'", ")", ":", "\n", "          ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "            ", "tower_conv", "=", "slim", ".", "conv2d", "(", "net", ",", "384", ",", "3", ",", "stride", "=", "2", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "            ", "tower_conv1_0", "=", "slim", ".", "conv2d", "(", "net", ",", "256", ",", "1", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "tower_conv1_1", "=", "slim", ".", "conv2d", "(", "tower_conv1_0", ",", "256", ",", "3", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "tower_conv1_2", "=", "slim", ".", "conv2d", "(", "tower_conv1_1", ",", "384", ",", "3", ",", "\n", "stride", "=", "2", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "            ", "tower_pool", "=", "slim", ".", "max_pool2d", "(", "net", ",", "3", ",", "stride", "=", "2", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'MaxPool_1a_3x3'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "tower_conv", ",", "tower_conv1_2", ",", "tower_pool", "]", ")", "\n", "\n", "", "end_points", "[", "'Mixed_6a'", "]", "=", "net", "\n", "net", "=", "slim", ".", "repeat", "(", "net", ",", "20", ",", "block17", ",", "scale", "=", "0.10", ")", "\n", "\n", "# Auxillary tower", "\n", "with", "tf", ".", "variable_scope", "(", "'AuxLogits'", ")", ":", "\n", "          ", "aux", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "5", ",", "stride", "=", "3", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "aux", "=", "slim", ".", "conv2d", "(", "aux", ",", "128", ",", "1", ",", "scope", "=", "'Conv2d_1b_1x1'", ")", "\n", "aux", "=", "slim", ".", "conv2d", "(", "aux", ",", "768", ",", "aux", ".", "get_shape", "(", ")", "[", "1", ":", "3", "]", ",", "\n", "padding", "=", "'VALID'", ",", "scope", "=", "'Conv2d_2a_5x5'", ")", "\n", "aux", "=", "slim", ".", "flatten", "(", "aux", ")", "\n", "aux", "=", "slim", ".", "fully_connected", "(", "aux", ",", "num_classes", ",", "activation_fn", "=", "None", ",", "\n", "scope", "=", "'Logits'", ")", "\n", "end_points", "[", "'AuxLogits'", "]", "=", "aux", "\n", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Mixed_7a'", ")", ":", "\n", "          ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "            ", "tower_conv", "=", "slim", ".", "conv2d", "(", "net", ",", "256", ",", "1", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "tower_conv_1", "=", "slim", ".", "conv2d", "(", "tower_conv", ",", "384", ",", "3", ",", "stride", "=", "2", ",", "\n", "padding", "=", "'VALID'", ",", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "            ", "tower_conv1", "=", "slim", ".", "conv2d", "(", "net", ",", "256", ",", "1", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "tower_conv1_1", "=", "slim", ".", "conv2d", "(", "tower_conv1", ",", "288", ",", "3", ",", "stride", "=", "2", ",", "\n", "padding", "=", "'VALID'", ",", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "            ", "tower_conv2", "=", "slim", ".", "conv2d", "(", "net", ",", "256", ",", "1", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "tower_conv2_1", "=", "slim", ".", "conv2d", "(", "tower_conv2", ",", "288", ",", "3", ",", "\n", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "tower_conv2_2", "=", "slim", ".", "conv2d", "(", "tower_conv2_1", ",", "320", ",", "3", ",", "stride", "=", "2", ",", "\n", "padding", "=", "'VALID'", ",", "scope", "=", "'Conv2d_1a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "            ", "tower_pool", "=", "slim", ".", "max_pool2d", "(", "net", ",", "3", ",", "stride", "=", "2", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'MaxPool_1a_3x3'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "tower_conv_1", ",", "tower_conv1_1", ",", "\n", "tower_conv2_2", ",", "tower_pool", "]", ")", "\n", "\n", "", "end_points", "[", "'Mixed_7a'", "]", "=", "net", "\n", "\n", "net", "=", "slim", ".", "repeat", "(", "net", ",", "9", ",", "block8", ",", "scale", "=", "0.20", ")", "\n", "net", "=", "block8", "(", "net", ",", "activation_fn", "=", "None", ")", "\n", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "1536", ",", "1", ",", "scope", "=", "'Conv2d_7b_1x1'", ")", "\n", "end_points", "[", "'Conv2d_7b_1x1'", "]", "=", "net", "\n", "\n", "with", "tf", ".", "variable_scope", "(", "'Logits'", ")", ":", "\n", "          ", "end_points", "[", "'PrePool'", "]", "=", "net", "\n", "net", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "net", ".", "get_shape", "(", ")", "[", "1", ":", "3", "]", ",", "padding", "=", "'VALID'", ",", "\n", "scope", "=", "'AvgPool_1a_8x8'", ")", "\n", "net", "=", "slim", ".", "flatten", "(", "net", ")", "\n", "\n", "net", "=", "slim", ".", "dropout", "(", "net", ",", "dropout_keep_prob", ",", "is_training", "=", "is_training", ",", "\n", "scope", "=", "'Dropout'", ")", "\n", "\n", "end_points", "[", "'PreLogitsFlatten'", "]", "=", "net", "\n", "logits", "=", "slim", ".", "fully_connected", "(", "net", ",", "num_classes", ",", "activation_fn", "=", "None", ",", "\n", "scope", "=", "'Logits'", ")", "\n", "end_points", "[", "'Logits'", "]", "=", "logits", "\n", "end_points", "[", "'Predictions'", "]", "=", "tf", ".", "nn", ".", "softmax", "(", "logits", ",", "name", "=", "'Predictions'", ")", "\n", "\n", "", "", "", "return", "logits", ",", "end_points", "\n", "", "", "inception_resnet_v2", ".", "default_image_size", "=", "299", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_resnet_v2.inception_resnet_v2_arg_scope": [[254, 281], ["slim.arg_scope", "slim.arg_scope", "slim.l2_regularizer", "slim.l2_regularizer"], "function", ["None"], ["def", "inception_resnet_v2_arg_scope", "(", "weight_decay", "=", "0.00004", ",", "\n", "batch_norm_decay", "=", "0.9997", ",", "\n", "batch_norm_epsilon", "=", "0.001", ")", ":", "\n", "  ", "\"\"\"Yields the scope with the default parameters for inception_resnet_v2.\n\n  Args:\n    weight_decay: the weight decay for weights variables.\n    batch_norm_decay: decay for the moving average of batch_norm momentums.\n    batch_norm_epsilon: small float added to variance to avoid dividing by zero.\n\n  Returns:\n    a arg_scope with the parameters needed for inception_resnet_v2.\n  \"\"\"", "\n", "# Set weight_decay for weights in conv2d and fully_connected layers.", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "fully_connected", "]", ",", "\n", "weights_regularizer", "=", "slim", ".", "l2_regularizer", "(", "weight_decay", ")", ",", "\n", "biases_regularizer", "=", "slim", ".", "l2_regularizer", "(", "weight_decay", ")", ")", ":", "\n", "\n", "    ", "batch_norm_params", "=", "{", "\n", "'decay'", ":", "batch_norm_decay", ",", "\n", "'epsilon'", ":", "batch_norm_epsilon", ",", "\n", "}", "\n", "# Set activation_fn and parameters for batch_norm.", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", "]", ",", "activation_fn", "=", "tf", ".", "nn", ".", "relu", ",", "\n", "normalizer_fn", "=", "slim", ".", "batch_norm", ",", "\n", "normalizer_params", "=", "batch_norm_params", ")", "as", "scope", ":", "\n", "      ", "return", "scope", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3_test.InceptionV3Test.testBuildClassificationNetwork": [[31, 44], ["tensorflow.random_uniform", "nets.inception.inception_v3", "inception_v3_test.InceptionV3Test.assertTrue", "inception_v3_test.InceptionV3Test.assertListEqual", "inception_v3_test.InceptionV3Test.assertTrue", "inception_v3_test.InceptionV3Test.assertListEqual", "logits.op.name.startswith", "logits.get_shape().as_list", "end_points[].get_shape().as_list", "logits.get_shape", "end_points[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3"], ["  ", "def", "testBuildClassificationNetwork", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "end_points", "=", "inception", ".", "inception_v3", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV3/Logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "self", ".", "assertTrue", "(", "'Predictions'", "in", "end_points", ")", "\n", "self", ".", "assertListEqual", "(", "end_points", "[", "'Predictions'", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3_test.InceptionV3Test.testBuildBaseNetwork": [[45, 61], ["tensorflow.random_uniform", "nets.inception.inception_v3_base", "inception_v3_test.InceptionV3Test.assertTrue", "inception_v3_test.InceptionV3Test.assertListEqual", "inception_v3_test.InceptionV3Test.assertItemsEqual", "final_endpoint.op.name.startswith", "final_endpoint.get_shape().as_list", "end_points.keys", "final_endpoint.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3_base"], ["", "def", "testBuildBaseNetwork", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "final_endpoint", ",", "end_points", "=", "inception", ".", "inception_v3_base", "(", "inputs", ")", "\n", "self", ".", "assertTrue", "(", "final_endpoint", ".", "op", ".", "name", ".", "startswith", "(", "\n", "'InceptionV3/Mixed_7c'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "final_endpoint", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "8", ",", "8", ",", "2048", "]", ")", "\n", "expected_endpoints", "=", "[", "'Conv2d_1a_3x3'", ",", "'Conv2d_2a_3x3'", ",", "'Conv2d_2b_3x3'", ",", "\n", "'MaxPool_3a_3x3'", ",", "'Conv2d_3b_1x1'", ",", "'Conv2d_4a_3x3'", ",", "\n", "'MaxPool_5a_3x3'", ",", "'Mixed_5b'", ",", "'Mixed_5c'", ",", "'Mixed_5d'", ",", "\n", "'Mixed_6a'", ",", "'Mixed_6b'", ",", "'Mixed_6c'", ",", "'Mixed_6d'", ",", "\n", "'Mixed_6e'", ",", "'Mixed_7a'", ",", "'Mixed_7b'", ",", "'Mixed_7c'", "]", "\n", "self", ".", "assertItemsEqual", "(", "end_points", ".", "keys", "(", ")", ",", "expected_endpoints", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3_test.InceptionV3Test.testBuildOnlyUptoFinalEndpoint": [[62, 79], ["enumerate", "tensorflow.Graph().as_default", "tensorflow.random_uniform", "nets.inception.inception_v3_base", "inception_v3_test.InceptionV3Test.assertTrue", "inception_v3_test.InceptionV3Test.assertItemsEqual", "out_tensor.op.name.startswith", "tensorflow.Graph"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3_base"], ["", "def", "testBuildOnlyUptoFinalEndpoint", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "endpoints", "=", "[", "'Conv2d_1a_3x3'", ",", "'Conv2d_2a_3x3'", ",", "'Conv2d_2b_3x3'", ",", "\n", "'MaxPool_3a_3x3'", ",", "'Conv2d_3b_1x1'", ",", "'Conv2d_4a_3x3'", ",", "\n", "'MaxPool_5a_3x3'", ",", "'Mixed_5b'", ",", "'Mixed_5c'", ",", "'Mixed_5d'", ",", "\n", "'Mixed_6a'", ",", "'Mixed_6b'", ",", "'Mixed_6c'", ",", "'Mixed_6d'", ",", "\n", "'Mixed_6e'", ",", "'Mixed_7a'", ",", "'Mixed_7b'", ",", "'Mixed_7c'", "]", "\n", "\n", "for", "index", ",", "endpoint", "in", "enumerate", "(", "endpoints", ")", ":", "\n", "      ", "with", "tf", ".", "Graph", "(", ")", ".", "as_default", "(", ")", ":", "\n", "        ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "out_tensor", ",", "end_points", "=", "inception", ".", "inception_v3_base", "(", "\n", "inputs", ",", "final_endpoint", "=", "endpoint", ")", "\n", "self", ".", "assertTrue", "(", "out_tensor", ".", "op", ".", "name", ".", "startswith", "(", "\n", "'InceptionV3/'", "+", "endpoint", ")", ")", "\n", "self", ".", "assertItemsEqual", "(", "endpoints", "[", ":", "index", "+", "1", "]", ",", "end_points", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3_test.InceptionV3Test.testBuildAndCheckAllEndPointsUptoMixed7c": [[80, 111], ["tensorflow.random_uniform", "nets.inception.inception_v3_base", "inception_v3_test.InceptionV3Test.assertItemsEqual", "endpoints_shapes.keys", "end_points.keys", "inception_v3_test.InceptionV3Test.assertTrue", "inception_v3_test.InceptionV3Test.assertListEqual", "end_points[].get_shape().as_list", "end_points[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3_base"], ["", "", "", "def", "testBuildAndCheckAllEndPointsUptoMixed7c", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "_", ",", "end_points", "=", "inception", ".", "inception_v3_base", "(", "\n", "inputs", ",", "final_endpoint", "=", "'Mixed_7c'", ")", "\n", "endpoints_shapes", "=", "{", "'Conv2d_1a_3x3'", ":", "[", "batch_size", ",", "149", ",", "149", ",", "32", "]", ",", "\n", "'Conv2d_2a_3x3'", ":", "[", "batch_size", ",", "147", ",", "147", ",", "32", "]", ",", "\n", "'Conv2d_2b_3x3'", ":", "[", "batch_size", ",", "147", ",", "147", ",", "64", "]", ",", "\n", "'MaxPool_3a_3x3'", ":", "[", "batch_size", ",", "73", ",", "73", ",", "64", "]", ",", "\n", "'Conv2d_3b_1x1'", ":", "[", "batch_size", ",", "73", ",", "73", ",", "80", "]", ",", "\n", "'Conv2d_4a_3x3'", ":", "[", "batch_size", ",", "71", ",", "71", ",", "192", "]", ",", "\n", "'MaxPool_5a_3x3'", ":", "[", "batch_size", ",", "35", ",", "35", ",", "192", "]", ",", "\n", "'Mixed_5b'", ":", "[", "batch_size", ",", "35", ",", "35", ",", "256", "]", ",", "\n", "'Mixed_5c'", ":", "[", "batch_size", ",", "35", ",", "35", ",", "288", "]", ",", "\n", "'Mixed_5d'", ":", "[", "batch_size", ",", "35", ",", "35", ",", "288", "]", ",", "\n", "'Mixed_6a'", ":", "[", "batch_size", ",", "17", ",", "17", ",", "768", "]", ",", "\n", "'Mixed_6b'", ":", "[", "batch_size", ",", "17", ",", "17", ",", "768", "]", ",", "\n", "'Mixed_6c'", ":", "[", "batch_size", ",", "17", ",", "17", ",", "768", "]", ",", "\n", "'Mixed_6d'", ":", "[", "batch_size", ",", "17", ",", "17", ",", "768", "]", ",", "\n", "'Mixed_6e'", ":", "[", "batch_size", ",", "17", ",", "17", ",", "768", "]", ",", "\n", "'Mixed_7a'", ":", "[", "batch_size", ",", "8", ",", "8", ",", "1280", "]", ",", "\n", "'Mixed_7b'", ":", "[", "batch_size", ",", "8", ",", "8", ",", "2048", "]", ",", "\n", "'Mixed_7c'", ":", "[", "batch_size", ",", "8", ",", "8", ",", "2048", "]", "}", "\n", "self", ".", "assertItemsEqual", "(", "endpoints_shapes", ".", "keys", "(", ")", ",", "end_points", ".", "keys", "(", ")", ")", "\n", "for", "endpoint_name", "in", "endpoints_shapes", ":", "\n", "      ", "expected_shape", "=", "endpoints_shapes", "[", "endpoint_name", "]", "\n", "self", ".", "assertTrue", "(", "endpoint_name", "in", "end_points", ")", "\n", "self", ".", "assertListEqual", "(", "end_points", "[", "endpoint_name", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "expected_shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3_test.InceptionV3Test.testModelHasExpectedNumberOfParameters": [[112, 121], ["tensorflow.random_uniform", "slim.model_analyzer.analyze_vars", "inception_v3_test.InceptionV3Test.assertAlmostEqual", "slim.arg_scope", "nets.inception.inception_v3_base", "slim.get_model_variables", "nets.inception.inception_v3_arg_scope"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3_base"], ["", "", "def", "testModelHasExpectedNumberOfParameters", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "with", "slim", ".", "arg_scope", "(", "inception", ".", "inception_v3_arg_scope", "(", ")", ")", ":", "\n", "      ", "inception", ".", "inception_v3_base", "(", "inputs", ")", "\n", "", "total_params", ",", "_", "=", "slim", ".", "model_analyzer", ".", "analyze_vars", "(", "\n", "slim", ".", "get_model_variables", "(", ")", ")", "\n", "self", ".", "assertAlmostEqual", "(", "21802784", ",", "total_params", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3_test.InceptionV3Test.testBuildEndPoints": [[122, 145], ["tensorflow.random_uniform", "nets.inception.inception_v3", "inception_v3_test.InceptionV3Test.assertTrue", "inception_v3_test.InceptionV3Test.assertListEqual", "inception_v3_test.InceptionV3Test.assertTrue", "inception_v3_test.InceptionV3Test.assertListEqual", "inception_v3_test.InceptionV3Test.assertTrue", "inception_v3_test.InceptionV3Test.assertListEqual", "inception_v3_test.InceptionV3Test.assertTrue", "inception_v3_test.InceptionV3Test.assertListEqual", "logits.get_shape().as_list", "aux_logits.get_shape().as_list", "pre_pool.get_shape().as_list", "pre_logits.get_shape().as_list", "logits.get_shape", "aux_logits.get_shape", "pre_pool.get_shape", "pre_logits.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3"], ["", "def", "testBuildEndPoints", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "_", ",", "end_points", "=", "inception", ".", "inception_v3", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertTrue", "(", "'Logits'", "in", "end_points", ")", "\n", "logits", "=", "end_points", "[", "'Logits'", "]", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "self", ".", "assertTrue", "(", "'AuxLogits'", "in", "end_points", ")", "\n", "aux_logits", "=", "end_points", "[", "'AuxLogits'", "]", "\n", "self", ".", "assertListEqual", "(", "aux_logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "self", ".", "assertTrue", "(", "'Mixed_7c'", "in", "end_points", ")", "\n", "pre_pool", "=", "end_points", "[", "'Mixed_7c'", "]", "\n", "self", ".", "assertListEqual", "(", "pre_pool", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "8", ",", "8", ",", "2048", "]", ")", "\n", "self", ".", "assertTrue", "(", "'PreLogits'", "in", "end_points", ")", "\n", "pre_logits", "=", "end_points", "[", "'PreLogits'", "]", "\n", "self", ".", "assertListEqual", "(", "pre_logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "1", ",", "1", ",", "2048", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3_test.InceptionV3Test.testBuildEndPointsWithDepthMultiplierLessThanOne": [[146, 165], ["tensorflow.random_uniform", "nets.inception.inception_v3", "nets.inception.inception_v3", "inception_v3_test.InceptionV3Test.assertEqual", "end_points.keys", "end_points[].get_shape().as_list", "end_points_with_multiplier[].get_shape().as_list", "key.startswith", "key.startswith", "end_points[].get_shape", "end_points_with_multiplier[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3"], ["", "def", "testBuildEndPointsWithDepthMultiplierLessThanOne", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "_", ",", "end_points", "=", "inception", ".", "inception_v3", "(", "inputs", ",", "num_classes", ")", "\n", "\n", "endpoint_keys", "=", "[", "key", "for", "key", "in", "end_points", ".", "keys", "(", ")", "\n", "if", "key", ".", "startswith", "(", "'Mixed'", ")", "or", "key", ".", "startswith", "(", "'Conv'", ")", "]", "\n", "\n", "_", ",", "end_points_with_multiplier", "=", "inception", ".", "inception_v3", "(", "\n", "inputs", ",", "num_classes", ",", "scope", "=", "'depth_multiplied_net'", ",", "\n", "depth_multiplier", "=", "0.5", ")", "\n", "\n", "for", "key", "in", "endpoint_keys", ":", "\n", "      ", "original_depth", "=", "end_points", "[", "key", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "3", "]", "\n", "new_depth", "=", "end_points_with_multiplier", "[", "key", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "3", "]", "\n", "self", ".", "assertEqual", "(", "0.5", "*", "original_depth", ",", "new_depth", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3_test.InceptionV3Test.testBuildEndPointsWithDepthMultiplierGreaterThanOne": [[166, 185], ["tensorflow.random_uniform", "nets.inception.inception_v3", "nets.inception.inception_v3", "inception_v3_test.InceptionV3Test.assertEqual", "end_points.keys", "end_points[].get_shape().as_list", "end_points_with_multiplier[].get_shape().as_list", "key.startswith", "key.startswith", "end_points[].get_shape", "end_points_with_multiplier[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3"], ["", "", "def", "testBuildEndPointsWithDepthMultiplierGreaterThanOne", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "_", ",", "end_points", "=", "inception", ".", "inception_v3", "(", "inputs", ",", "num_classes", ")", "\n", "\n", "endpoint_keys", "=", "[", "key", "for", "key", "in", "end_points", ".", "keys", "(", ")", "\n", "if", "key", ".", "startswith", "(", "'Mixed'", ")", "or", "key", ".", "startswith", "(", "'Conv'", ")", "]", "\n", "\n", "_", ",", "end_points_with_multiplier", "=", "inception", ".", "inception_v3", "(", "\n", "inputs", ",", "num_classes", ",", "scope", "=", "'depth_multiplied_net'", ",", "\n", "depth_multiplier", "=", "2.0", ")", "\n", "\n", "for", "key", "in", "endpoint_keys", ":", "\n", "      ", "original_depth", "=", "end_points", "[", "key", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "3", "]", "\n", "new_depth", "=", "end_points_with_multiplier", "[", "key", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "3", "]", "\n", "self", ".", "assertEqual", "(", "2.0", "*", "original_depth", ",", "new_depth", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3_test.InceptionV3Test.testRaiseValueErrorWithInvalidDepthMultiplier": [[186, 196], ["tensorflow.random_uniform", "inception_v3_test.InceptionV3Test.assertRaises", "nets.inception.inception_v3", "inception_v3_test.InceptionV3Test.assertRaises", "nets.inception.inception_v3"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3"], ["", "", "def", "testRaiseValueErrorWithInvalidDepthMultiplier", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "with", "self", ".", "assertRaises", "(", "ValueError", ")", ":", "\n", "      ", "_", "=", "inception", ".", "inception_v3", "(", "inputs", ",", "num_classes", ",", "depth_multiplier", "=", "-", "0.1", ")", "\n", "", "with", "self", ".", "assertRaises", "(", "ValueError", ")", ":", "\n", "      ", "_", "=", "inception", ".", "inception_v3", "(", "inputs", ",", "num_classes", ",", "depth_multiplier", "=", "0.0", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3_test.InceptionV3Test.testHalfSizeImages": [[197, 210], ["tensorflow.random_uniform", "nets.inception.inception_v3", "inception_v3_test.InceptionV3Test.assertTrue", "inception_v3_test.InceptionV3Test.assertListEqual", "inception_v3_test.InceptionV3Test.assertListEqual", "logits.op.name.startswith", "logits.get_shape().as_list", "pre_pool.get_shape().as_list", "logits.get_shape", "pre_pool.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3"], ["", "", "def", "testHalfSizeImages", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "150", ",", "150", "\n", "num_classes", "=", "1000", "\n", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "end_points", "=", "inception", ".", "inception_v3", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV3/Logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "pre_pool", "=", "end_points", "[", "'Mixed_7c'", "]", "\n", "self", ".", "assertListEqual", "(", "pre_pool", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "3", ",", "3", ",", "2048", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3_test.InceptionV3Test.testUnknownImageShape": [[211, 227], ["tensorflow.reset_default_graph", "numpy.random.uniform", "inception_v3_test.InceptionV3Test.test_session", "tensorflow.placeholder", "nets.inception.inception_v3", "inception_v3_test.InceptionV3Test.assertListEqual", "tensorflow.initialize_all_variables().run", "sess.run", "inception_v3_test.InceptionV3Test.assertListEqual", "logits.get_shape().as_list", "list", "tensorflow.initialize_all_variables", "logits.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "def", "testUnknownImageShape", "(", "self", ")", ":", "\n", "    ", "tf", ".", "reset_default_graph", "(", ")", "\n", "batch_size", "=", "2", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "input_np", "=", "np", ".", "random", ".", "uniform", "(", "0", ",", "1", ",", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "inputs", "=", "tf", ".", "placeholder", "(", "tf", ".", "float32", ",", "shape", "=", "(", "batch_size", ",", "None", ",", "None", ",", "3", ")", ")", "\n", "logits", ",", "end_points", "=", "inception", ".", "inception_v3", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "pre_pool", "=", "end_points", "[", "'Mixed_7c'", "]", "\n", "feed_dict", "=", "{", "inputs", ":", "input_np", "}", "\n", "tf", ".", "initialize_all_variables", "(", ")", ".", "run", "(", ")", "\n", "pre_pool_out", "=", "sess", ".", "run", "(", "pre_pool", ",", "feed_dict", "=", "feed_dict", ")", "\n", "self", ".", "assertListEqual", "(", "list", "(", "pre_pool_out", ".", "shape", ")", ",", "[", "batch_size", ",", "8", ",", "8", ",", "2048", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3_test.InceptionV3Test.testUnknowBatchSize": [[228, 244], ["tensorflow.placeholder", "nets.inception.inception_v3", "inception_v3_test.InceptionV3Test.assertTrue", "inception_v3_test.InceptionV3Test.assertListEqual", "tensorflow.random_uniform", "logits.op.name.startswith", "logits.get_shape().as_list", "inception_v3_test.InceptionV3Test.test_session", "sess.run", "sess.run", "inception_v3_test.InceptionV3Test.assertEquals", "tensorflow.initialize_all_variables", "logits.get_shape", "tensorflow.random_uniform.eval"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testUnknowBatchSize", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "1", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "\n", "inputs", "=", "tf", ".", "placeholder", "(", "tf", ".", "float32", ",", "(", "None", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_v3", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'InceptionV3/Logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "None", ",", "num_classes", "]", ")", "\n", "images", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "logits", ",", "{", "inputs", ":", "images", ".", "eval", "(", ")", "}", ")", "\n", "self", ".", "assertEquals", "(", "output", ".", "shape", ",", "(", "batch_size", ",", "num_classes", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3_test.InceptionV3Test.testEvaluation": [[245, 259], ["tensorflow.random_uniform", "nets.inception.inception_v3", "tensorflow.argmax", "inception_v3_test.InceptionV3Test.test_session", "sess.run", "sess.run", "inception_v3_test.InceptionV3Test.assertEquals", "tensorflow.initialize_all_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testEvaluation", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "2", "\n", "height", ",", "width", "=", "299", ",", "299", "\n", "num_classes", "=", "1000", "\n", "\n", "eval_inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_v3", "(", "eval_inputs", ",", "num_classes", ",", "\n", "is_training", "=", "False", ")", "\n", "predictions", "=", "tf", ".", "argmax", "(", "logits", ",", "1", ")", "\n", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "predictions", ")", "\n", "self", ".", "assertEquals", "(", "output", ".", "shape", ",", "(", "batch_size", ",", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3_test.InceptionV3Test.testTrainEvalWithReuse": [[260, 277], ["tensorflow.random_uniform", "nets.inception.inception_v3", "tensorflow.random_uniform", "nets.inception.inception_v3", "tensorflow.argmax", "inception_v3_test.InceptionV3Test.test_session", "sess.run", "sess.run", "inception_v3_test.InceptionV3Test.assertEquals", "tensorflow.initialize_all_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testTrainEvalWithReuse", "(", "self", ")", ":", "\n", "    ", "train_batch_size", "=", "5", "\n", "eval_batch_size", "=", "2", "\n", "height", ",", "width", "=", "150", ",", "150", "\n", "num_classes", "=", "1000", "\n", "\n", "train_inputs", "=", "tf", ".", "random_uniform", "(", "(", "train_batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "inception", ".", "inception_v3", "(", "train_inputs", ",", "num_classes", ")", "\n", "eval_inputs", "=", "tf", ".", "random_uniform", "(", "(", "eval_batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_v3", "(", "eval_inputs", ",", "num_classes", ",", "\n", "is_training", "=", "False", ",", "reuse", "=", "True", ")", "\n", "predictions", "=", "tf", ".", "argmax", "(", "logits", ",", "1", ")", "\n", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "predictions", ")", "\n", "self", ".", "assertEquals", "(", "output", ".", "shape", ",", "(", "eval_batch_size", ",", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3_test.InceptionV3Test.testLogitsNotSqueezed": [[278, 289], ["tensorflow.random_uniform", "nets.inception.inception_v3", "inception_v3_test.InceptionV3Test.test_session", "tensorflow.initialize_all_variables().run", "sess.run", "inception_v3_test.InceptionV3Test.assertListEqual", "list", "tensorflow.initialize_all_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v3.inception_v3", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testLogitsNotSqueezed", "(", "self", ")", ":", "\n", "    ", "num_classes", "=", "25", "\n", "images", "=", "tf", ".", "random_uniform", "(", "[", "1", ",", "299", ",", "299", ",", "3", "]", ")", "\n", "logits", ",", "_", "=", "inception", ".", "inception_v3", "(", "images", ",", "\n", "num_classes", "=", "num_classes", ",", "\n", "spatial_squeeze", "=", "False", ")", "\n", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "tf", ".", "initialize_all_variables", "(", ")", ".", "run", "(", ")", "\n", "logits_out", "=", "sess", ".", "run", "(", "logits", ")", "\n", "self", ".", "assertListEqual", "(", "list", "(", "logits_out", ".", "shape", ")", ",", "[", "1", ",", "1", ",", "1", ",", "num_classes", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1.inception_v1_base": [[29, 246], ["tensorflow.variable_scope", "ValueError", "slim.arg_scope", "slim.arg_scope", "slim.conv2d", "slim.max_pool2d", "slim.conv2d", "slim.conv2d", "slim.max_pool2d", "slim.max_pool2d", "slim.max_pool2d", "trunc_normal", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "tensorflow.concat", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.conv2d", "slim.conv2d", "tensorflow.variable_scope", "slim.max_pool2d", "slim.conv2d"], "function", ["None"], ["def", "inception_v1_base", "(", "inputs", ",", "\n", "final_endpoint", "=", "'Mixed_5c'", ",", "\n", "scope", "=", "'InceptionV1'", ")", ":", "\n", "  ", "\"\"\"Defines the Inception V1 base architecture.\n\n  This architecture is defined in:\n    Going deeper with convolutions\n    Christian Szegedy, Wei Liu, Yangqing Jia, Pierre Sermanet, Scott Reed,\n    Dragomir Anguelov, Dumitru Erhan, Vincent Vanhoucke, Andrew Rabinovich.\n    http://arxiv.org/pdf/1409.4842v1.pdf.\n\n  Args:\n    inputs: a tensor of size [batch_size, height, width, channels].\n    final_endpoint: specifies the endpoint to construct the network up to. It\n      can be one of ['Conv2d_1a_7x7', 'MaxPool_2a_3x3', 'Conv2d_2b_1x1',\n      'Conv2d_2c_3x3', 'MaxPool_3a_3x3', 'Mixed_3b', 'Mixed_3c',\n      'MaxPool_4a_3x3', 'Mixed_4b', 'Mixed_4c', 'Mixed_4d', 'Mixed_4e',\n      'Mixed_4f', 'MaxPool_5a_2x2', 'Mixed_5b', 'Mixed_5c']\n    scope: Optional variable_scope.\n\n  Returns:\n    A dictionary from components of the network to the corresponding activation.\n\n  Raises:\n    ValueError: if final_endpoint is not set to one of the predefined values.\n  \"\"\"", "\n", "end_points", "=", "{", "}", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'InceptionV1'", ",", "[", "inputs", "]", ")", ":", "\n", "    ", "with", "slim", ".", "arg_scope", "(", "\n", "[", "slim", ".", "conv2d", ",", "slim", ".", "fully_connected", "]", ",", "\n", "weights_initializer", "=", "trunc_normal", "(", "0.01", ")", ")", ":", "\n", "      ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "max_pool2d", "]", ",", "\n", "stride", "=", "1", ",", "padding", "=", "'SAME'", ")", ":", "\n", "        ", "end_point", "=", "'Conv2d_1a_7x7'", "\n", "net", "=", "slim", ".", "conv2d", "(", "inputs", ",", "64", ",", "[", "7", ",", "7", "]", ",", "stride", "=", "2", ",", "scope", "=", "end_point", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "final_endpoint", "==", "end_point", ":", "return", "net", ",", "end_points", "\n", "end_point", "=", "'MaxPool_2a_3x3'", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "end_point", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "final_endpoint", "==", "end_point", ":", "return", "net", ",", "end_points", "\n", "end_point", "=", "'Conv2d_2b_1x1'", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "64", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "end_point", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "final_endpoint", "==", "end_point", ":", "return", "net", ",", "end_points", "\n", "end_point", "=", "'Conv2d_2c_3x3'", "\n", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "192", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "end_point", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "final_endpoint", "==", "end_point", ":", "return", "net", ",", "end_points", "\n", "end_point", "=", "'MaxPool_3a_3x3'", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "end_point", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "final_endpoint", "==", "end_point", ":", "return", "net", ",", "end_points", "\n", "\n", "end_point", "=", "'Mixed_3b'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "          ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "            ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "64", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "            ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "96", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "128", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "            ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "16", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "32", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "            ", "branch_3", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'MaxPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "32", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "final_endpoint", "==", "end_point", ":", "return", "net", ",", "end_points", "\n", "\n", "end_point", "=", "'Mixed_3c'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "          ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "            ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "128", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "            ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "128", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "192", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "            ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "32", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "96", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "            ", "branch_3", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'MaxPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "64", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "final_endpoint", "==", "end_point", ":", "return", "net", ",", "end_points", "\n", "\n", "end_point", "=", "'MaxPool_4a_3x3'", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "end_point", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "final_endpoint", "==", "end_point", ":", "return", "net", ",", "end_points", "\n", "\n", "end_point", "=", "'Mixed_4b'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "          ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "            ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "192", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "            ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "96", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "208", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "            ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "16", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "48", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "            ", "branch_3", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'MaxPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "64", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "final_endpoint", "==", "end_point", ":", "return", "net", ",", "end_points", "\n", "\n", "end_point", "=", "'Mixed_4c'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "          ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "            ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "160", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "            ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "112", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "224", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "            ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "24", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "64", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "            ", "branch_3", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'MaxPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "64", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "final_endpoint", "==", "end_point", ":", "return", "net", ",", "end_points", "\n", "\n", "end_point", "=", "'Mixed_4d'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "          ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "            ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "128", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "            ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "128", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "256", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "            ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "24", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "64", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "            ", "branch_3", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'MaxPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "64", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "final_endpoint", "==", "end_point", ":", "return", "net", ",", "end_points", "\n", "\n", "end_point", "=", "'Mixed_4e'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "          ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "            ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "112", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "            ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "144", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "288", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "            ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "32", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "64", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "            ", "branch_3", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'MaxPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "64", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "final_endpoint", "==", "end_point", ":", "return", "net", ",", "end_points", "\n", "\n", "end_point", "=", "'Mixed_4f'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "          ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "            ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "256", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "            ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "160", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "320", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "            ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "32", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "128", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "            ", "branch_3", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'MaxPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "128", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "final_endpoint", "==", "end_point", ":", "return", "net", ",", "end_points", "\n", "\n", "end_point", "=", "'MaxPool_5a_2x2'", "\n", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "2", ",", "2", "]", ",", "stride", "=", "2", ",", "scope", "=", "end_point", ")", "\n", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "final_endpoint", "==", "end_point", ":", "return", "net", ",", "end_points", "\n", "\n", "end_point", "=", "'Mixed_5b'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "          ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "            ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "256", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "            ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "160", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "320", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "            ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "32", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "128", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0a_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "            ", "branch_3", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'MaxPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "128", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "final_endpoint", "==", "end_point", ":", "return", "net", ",", "end_points", "\n", "\n", "end_point", "=", "'Mixed_5c'", "\n", "with", "tf", ".", "variable_scope", "(", "end_point", ")", ":", "\n", "          ", "with", "tf", ".", "variable_scope", "(", "'Branch_0'", ")", ":", "\n", "            ", "branch_0", "=", "slim", ".", "conv2d", "(", "net", ",", "384", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_1'", ")", ":", "\n", "            ", "branch_1", "=", "slim", ".", "conv2d", "(", "net", ",", "192", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_1", "=", "slim", ".", "conv2d", "(", "branch_1", ",", "384", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_2'", ")", ":", "\n", "            ", "branch_2", "=", "slim", ".", "conv2d", "(", "net", ",", "48", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0a_1x1'", ")", "\n", "branch_2", "=", "slim", ".", "conv2d", "(", "branch_2", ",", "128", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'Conv2d_0b_3x3'", ")", "\n", "", "with", "tf", ".", "variable_scope", "(", "'Branch_3'", ")", ":", "\n", "            ", "branch_3", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "scope", "=", "'MaxPool_0a_3x3'", ")", "\n", "branch_3", "=", "slim", ".", "conv2d", "(", "branch_3", ",", "128", ",", "[", "1", ",", "1", "]", ",", "scope", "=", "'Conv2d_0b_1x1'", ")", "\n", "", "net", "=", "tf", ".", "concat", "(", "3", ",", "[", "branch_0", ",", "branch_1", ",", "branch_2", ",", "branch_3", "]", ")", "\n", "", "end_points", "[", "end_point", "]", "=", "net", "\n", "if", "final_endpoint", "==", "end_point", ":", "return", "net", ",", "end_points", "\n", "", "", "raise", "ValueError", "(", "'Unknown final endpoint %s'", "%", "final_endpoint", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1.inception_v1": [[248, 303], ["tensorflow.variable_scope", "slim.arg_scope", "inception_v1.inception_v1_base", "tensorflow.variable_scope", "slim.avg_pool2d", "slim.dropout", "slim.conv2d", "prediction_fn", "tensorflow.squeeze"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_v1.inception_v1_base"], ["", "", "def", "inception_v1", "(", "inputs", ",", "\n", "num_classes", "=", "1000", ",", "\n", "is_training", "=", "True", ",", "\n", "dropout_keep_prob", "=", "0.8", ",", "\n", "prediction_fn", "=", "slim", ".", "softmax", ",", "\n", "spatial_squeeze", "=", "True", ",", "\n", "reuse", "=", "None", ",", "\n", "scope", "=", "'InceptionV1'", ")", ":", "\n", "  ", "\"\"\"Defines the Inception V1 architecture.\n\n  This architecture is defined in:\n\n    Going deeper with convolutions\n    Christian Szegedy, Wei Liu, Yangqing Jia, Pierre Sermanet, Scott Reed,\n    Dragomir Anguelov, Dumitru Erhan, Vincent Vanhoucke, Andrew Rabinovich.\n    http://arxiv.org/pdf/1409.4842v1.pdf.\n\n  The default image size used to train this network is 224x224.\n\n  Args:\n    inputs: a tensor of size [batch_size, height, width, channels].\n    num_classes: number of predicted classes.\n    is_training: whether is training or not.\n    dropout_keep_prob: the percentage of activation values that are retained.\n    prediction_fn: a function to get predictions out of logits.\n    spatial_squeeze: if True, logits is of shape is [B, C], if false logits is\n        of shape [B, 1, 1, C], where B is batch_size and C is number of classes.\n    reuse: whether or not the network and its variables should be reused. To be\n      able to reuse 'scope' must be given.\n    scope: Optional variable_scope.\n\n  Returns:\n    logits: the pre-softmax activations, a tensor of size\n      [batch_size, num_classes]\n    end_points: a dictionary from components of the network to the corresponding\n      activation.\n  \"\"\"", "\n", "# Final pooling and prediction", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'InceptionV1'", ",", "[", "inputs", ",", "num_classes", "]", ",", "\n", "reuse", "=", "reuse", ")", "as", "scope", ":", "\n", "    ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "batch_norm", ",", "slim", ".", "dropout", "]", ",", "\n", "is_training", "=", "is_training", ")", ":", "\n", "      ", "net", ",", "end_points", "=", "inception_v1_base", "(", "inputs", ",", "scope", "=", "scope", ")", "\n", "with", "tf", ".", "variable_scope", "(", "'Logits'", ")", ":", "\n", "        ", "net", "=", "slim", ".", "avg_pool2d", "(", "net", ",", "[", "7", ",", "7", "]", ",", "stride", "=", "1", ",", "scope", "=", "'MaxPool_0a_7x7'", ")", "\n", "net", "=", "slim", ".", "dropout", "(", "net", ",", "\n", "dropout_keep_prob", ",", "scope", "=", "'Dropout_0b'", ")", "\n", "logits", "=", "slim", ".", "conv2d", "(", "net", ",", "num_classes", ",", "[", "1", ",", "1", "]", ",", "activation_fn", "=", "None", ",", "\n", "normalizer_fn", "=", "None", ",", "scope", "=", "'Conv2d_0c_1x1'", ")", "\n", "if", "spatial_squeeze", ":", "\n", "          ", "logits", "=", "tf", ".", "squeeze", "(", "logits", ",", "[", "1", ",", "2", "]", ",", "name", "=", "'SpatialSqueeze'", ")", "\n", "\n", "", "end_points", "[", "'Logits'", "]", "=", "logits", "\n", "end_points", "[", "'Predictions'", "]", "=", "prediction_fn", "(", "logits", ",", "scope", "=", "'Predictions'", ")", "\n", "", "", "", "return", "logits", ",", "end_points", "\n", "", "inception_v1", ".", "default_image_size", "=", "224", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.nets_factory_test.NetworksTest.testGetNetworkFn": [[30, 44], ["nets_factory_test.NetworksTest.test_session", "nets.nets_factory.get_network_fn", "getattr", "tensorflow.random_uniform", "nets.nets_factory.get_network_fn.", "nets_factory_test.NetworksTest.assertTrue", "nets_factory_test.NetworksTest.assertTrue", "nets_factory_test.NetworksTest.assertEqual", "nets_factory_test.NetworksTest.assertEqual", "isinstance", "isinstance", "logits.get_shape().as_list", "logits.get_shape().as_list", "logits.get_shape", "logits.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.nets_factory.get_network_fn"], ["  ", "def", "testGetNetworkFn", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "num_classes", "=", "1000", "\n", "for", "net", "in", "nets_factory", ".", "networks_map", ":", "\n", "      ", "with", "self", ".", "test_session", "(", ")", ":", "\n", "        ", "net_fn", "=", "nets_factory", ".", "get_network_fn", "(", "net", ",", "num_classes", ")", "\n", "# Most networks use 224 as their default_image_size", "\n", "image_size", "=", "getattr", "(", "net_fn", ",", "'default_image_size'", ",", "224", ")", "\n", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "image_size", ",", "image_size", ",", "3", ")", ")", "\n", "logits", ",", "end_points", "=", "net_fn", "(", "inputs", ")", "\n", "self", ".", "assertTrue", "(", "isinstance", "(", "logits", ",", "tf", ".", "Tensor", ")", ")", "\n", "self", ".", "assertTrue", "(", "isinstance", "(", "end_points", ",", "dict", ")", ")", "\n", "self", ".", "assertEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "0", "]", ",", "batch_size", ")", "\n", "self", ".", "assertEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", "[", "-", "1", "]", ",", "num_classes", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2.bottleneck": [[63, 111], ["tensorflow.variable_scope", "slim.utils.last_dimension", "slim.batch_norm", "slim.conv2d", "nets.resnet_utils.conv2d_same", "slim.conv2d", "slim.utils.collect_named_outputs", "inputs.get_shape", "nets.resnet_utils.subsample", "slim.conv2d"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.conv2d_same", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.subsample"], ["@", "slim", ".", "add_arg_scope", "\n", "def", "bottleneck", "(", "inputs", ",", "depth", ",", "depth_bottleneck", ",", "stride", ",", "rate", "=", "1", ",", "\n", "outputs_collections", "=", "None", ",", "scope", "=", "None", ")", ":", "\n", "  ", "\"\"\"Bottleneck residual unit variant with BN before convolutions.\n\n  This is the full preactivation residual unit variant proposed in [2]. See\n  Fig. 1(b) of [2] for its definition. Note that we use here the bottleneck\n  variant which has an extra bottleneck layer.\n\n  When putting together two consecutive ResNet blocks that use this unit, one\n  should use stride = 2 in the last unit of the first block.\n\n  Args:\n    inputs: A tensor of size [batch, height, width, channels].\n    depth: The depth of the ResNet unit output.\n    depth_bottleneck: The depth of the bottleneck layers.\n    stride: The ResNet unit's stride. Determines the amount of downsampling of\n      the units output compared to its input.\n    rate: An integer, rate for atrous convolution.\n    outputs_collections: Collection to add the ResNet unit output.\n    scope: Optional variable_scope.\n\n  Returns:\n    The ResNet unit's output.\n  \"\"\"", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'bottleneck_v2'", ",", "[", "inputs", "]", ")", "as", "sc", ":", "\n", "    ", "depth_in", "=", "slim", ".", "utils", ".", "last_dimension", "(", "inputs", ".", "get_shape", "(", ")", ",", "min_rank", "=", "4", ")", "\n", "preact", "=", "slim", ".", "batch_norm", "(", "inputs", ",", "activation_fn", "=", "tf", ".", "nn", ".", "relu", ",", "scope", "=", "'preact'", ")", "\n", "if", "depth", "==", "depth_in", ":", "\n", "      ", "shortcut", "=", "resnet_utils", ".", "subsample", "(", "inputs", ",", "stride", ",", "'shortcut'", ")", "\n", "", "else", ":", "\n", "      ", "shortcut", "=", "slim", ".", "conv2d", "(", "preact", ",", "depth", ",", "[", "1", ",", "1", "]", ",", "stride", "=", "stride", ",", "\n", "normalizer_fn", "=", "None", ",", "activation_fn", "=", "None", ",", "\n", "scope", "=", "'shortcut'", ")", "\n", "\n", "", "residual", "=", "slim", ".", "conv2d", "(", "preact", ",", "depth_bottleneck", ",", "[", "1", ",", "1", "]", ",", "stride", "=", "1", ",", "\n", "scope", "=", "'conv1'", ")", "\n", "residual", "=", "resnet_utils", ".", "conv2d_same", "(", "residual", ",", "depth_bottleneck", ",", "3", ",", "stride", ",", "\n", "rate", "=", "rate", ",", "scope", "=", "'conv2'", ")", "\n", "residual", "=", "slim", ".", "conv2d", "(", "residual", ",", "depth", ",", "[", "1", ",", "1", "]", ",", "stride", "=", "1", ",", "\n", "normalizer_fn", "=", "None", ",", "activation_fn", "=", "None", ",", "\n", "scope", "=", "'conv3'", ")", "\n", "\n", "output", "=", "shortcut", "+", "residual", "\n", "\n", "return", "slim", ".", "utils", ".", "collect_named_outputs", "(", "outputs_collections", ",", "\n", "sc", ".", "original_name_scope", ",", "\n", "output", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2.resnet_v2": [[113, 214], ["tensorflow.variable_scope", "slim.arg_scope", "slim.arg_scope", "nets.resnet_utils.stack_blocks_dense", "slim.batch_norm", "slim.utils.convert_collection_to_dict", "slim.max_pool2d", "tensorflow.reduce_mean", "slim.conv2d", "slim.softmax", "slim.arg_scope", "nets.resnet_utils.conv2d_same", "ValueError"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.stack_blocks_dense", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.conv2d_same"], ["", "", "def", "resnet_v2", "(", "inputs", ",", "\n", "blocks", ",", "\n", "num_classes", "=", "None", ",", "\n", "is_training", "=", "True", ",", "\n", "global_pool", "=", "True", ",", "\n", "output_stride", "=", "None", ",", "\n", "include_root_block", "=", "True", ",", "\n", "reuse", "=", "None", ",", "\n", "scope", "=", "None", ")", ":", "\n", "  ", "\"\"\"Generator for v2 (preactivation) ResNet models.\n\n  This function generates a family of ResNet v2 models. See the resnet_v2_*()\n  methods for specific model instantiations, obtained by selecting different\n  block instantiations that produce ResNets of various depths.\n\n  Training for image classification on Imagenet is usually done with [224, 224]\n  inputs, resulting in [7, 7] feature maps at the output of the last ResNet\n  block for the ResNets defined in [1] that have nominal stride equal to 32.\n  However, for dense prediction tasks we advise that one uses inputs with\n  spatial dimensions that are multiples of 32 plus 1, e.g., [321, 321]. In\n  this case the feature maps at the ResNet output will have spatial shape\n  [(height - 1) / output_stride + 1, (width - 1) / output_stride + 1]\n  and corners exactly aligned with the input image corners, which greatly\n  facilitates alignment of the features to the image. Using as input [225, 225]\n  images results in [8, 8] feature maps at the output of the last ResNet block.\n\n  For dense prediction tasks, the ResNet needs to run in fully-convolutional\n  (FCN) mode and global_pool needs to be set to False. The ResNets in [1, 2] all\n  have nominal stride equal to 32 and a good choice in FCN mode is to use\n  output_stride=16 in order to increase the density of the computed features at\n  small computational and memory overhead, cf. http://arxiv.org/abs/1606.00915.\n\n  Args:\n    inputs: A tensor of size [batch, height_in, width_in, channels].\n    blocks: A list of length equal to the number of ResNet blocks. Each element\n      is a resnet_utils.Block object describing the units in the block.\n    num_classes: Number of predicted classes for classification tasks. If None\n      we return the features before the logit layer.\n    is_training: whether is training or not.\n    global_pool: If True, we perform global average pooling before computing the\n      logits. Set to True for image classification, False for dense prediction.\n    output_stride: If None, then the output will be computed at the nominal\n      network stride. If output_stride is not None, it specifies the requested\n      ratio of input to output spatial resolution.\n    include_root_block: If True, include the initial convolution followed by\n      max-pooling, if False excludes it. If excluded, `inputs` should be the\n      results of an activation-less convolution.\n    reuse: whether or not the network and its variables should be reused. To be\n      able to reuse 'scope' must be given.\n    scope: Optional variable_scope.\n\n\n  Returns:\n    net: A rank-4 tensor of size [batch, height_out, width_out, channels_out].\n      If global_pool is False, then height_out and width_out are reduced by a\n      factor of output_stride compared to the respective height_in and width_in,\n      else both height_out and width_out equal one. If num_classes is None, then\n      net is the output of the last ResNet block, potentially after global\n      average pooling. If num_classes is not None, net contains the pre-softmax\n      activations.\n    end_points: A dictionary from components of the network to the corresponding\n      activation.\n\n  Raises:\n    ValueError: If the target output_stride is not valid.\n  \"\"\"", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "'resnet_v2'", ",", "[", "inputs", "]", ",", "reuse", "=", "reuse", ")", "as", "sc", ":", "\n", "    ", "end_points_collection", "=", "sc", ".", "name", "+", "'_end_points'", "\n", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "bottleneck", ",", "\n", "resnet_utils", ".", "stack_blocks_dense", "]", ",", "\n", "outputs_collections", "=", "end_points_collection", ")", ":", "\n", "      ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "batch_norm", "]", ",", "is_training", "=", "is_training", ")", ":", "\n", "        ", "net", "=", "inputs", "\n", "if", "include_root_block", ":", "\n", "          ", "if", "output_stride", "is", "not", "None", ":", "\n", "            ", "if", "output_stride", "%", "4", "!=", "0", ":", "\n", "              ", "raise", "ValueError", "(", "'The output_stride needs to be a multiple of 4.'", ")", "\n", "", "output_stride", "/=", "4", "\n", "# We do not include batch normalization or activation functions in", "\n", "# conv1 because the first ResNet unit will perform these. Cf.", "\n", "# Appendix of [2].", "\n", "", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", "]", ",", "\n", "activation_fn", "=", "None", ",", "normalizer_fn", "=", "None", ")", ":", "\n", "            ", "net", "=", "resnet_utils", ".", "conv2d_same", "(", "net", ",", "64", ",", "7", ",", "stride", "=", "2", ",", "scope", "=", "'conv1'", ")", "\n", "", "net", "=", "slim", ".", "max_pool2d", "(", "net", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'pool1'", ")", "\n", "", "net", "=", "resnet_utils", ".", "stack_blocks_dense", "(", "net", ",", "blocks", ",", "output_stride", ")", "\n", "# This is needed because the pre-activation variant does not have batch", "\n", "# normalization or activation functions in the residual unit output. See", "\n", "# Appendix of [2].", "\n", "net", "=", "slim", ".", "batch_norm", "(", "net", ",", "activation_fn", "=", "tf", ".", "nn", ".", "relu", ",", "scope", "=", "'postnorm'", ")", "\n", "if", "global_pool", ":", "\n", "# Global average pooling.", "\n", "          ", "net", "=", "tf", ".", "reduce_mean", "(", "net", ",", "[", "1", ",", "2", "]", ",", "name", "=", "'pool5'", ",", "keep_dims", "=", "True", ")", "\n", "", "if", "num_classes", "is", "not", "None", ":", "\n", "          ", "net", "=", "slim", ".", "conv2d", "(", "net", ",", "num_classes", ",", "[", "1", ",", "1", "]", ",", "activation_fn", "=", "None", ",", "\n", "normalizer_fn", "=", "None", ",", "scope", "=", "'logits'", ")", "\n", "# Convert end_points_collection into a dictionary of end_points.", "\n", "", "end_points", "=", "slim", ".", "utils", ".", "convert_collection_to_dict", "(", "end_points_collection", ")", "\n", "if", "num_classes", "is", "not", "None", ":", "\n", "          ", "end_points", "[", "'predictions'", "]", "=", "slim", ".", "softmax", "(", "net", ",", "scope", "=", "'predictions'", ")", "\n", "", "return", "net", ",", "end_points", "\n", "", "", "", "", "resnet_v2", ".", "default_image_size", "=", "224", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2.resnet_v2_50": [[217, 237], ["resnet_v2.resnet_v2", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2.resnet_v2"], ["def", "resnet_v2_50", "(", "inputs", ",", "\n", "num_classes", "=", "None", ",", "\n", "is_training", "=", "True", ",", "\n", "global_pool", "=", "True", ",", "\n", "output_stride", "=", "None", ",", "\n", "reuse", "=", "None", ",", "\n", "scope", "=", "'resnet_v2_50'", ")", ":", "\n", "  ", "\"\"\"ResNet-50 model of [1]. See resnet_v2() for arg and return description.\"\"\"", "\n", "blocks", "=", "[", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block1'", ",", "bottleneck", ",", "[", "(", "256", ",", "64", ",", "1", ")", "]", "*", "2", "+", "[", "(", "256", ",", "64", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block2'", ",", "bottleneck", ",", "[", "(", "512", ",", "128", ",", "1", ")", "]", "*", "3", "+", "[", "(", "512", ",", "128", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block3'", ",", "bottleneck", ",", "[", "(", "1024", ",", "256", ",", "1", ")", "]", "*", "5", "+", "[", "(", "1024", ",", "256", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block4'", ",", "bottleneck", ",", "[", "(", "2048", ",", "512", ",", "1", ")", "]", "*", "3", ")", "]", "\n", "return", "resnet_v2", "(", "inputs", ",", "blocks", ",", "num_classes", ",", "is_training", "=", "is_training", ",", "\n", "global_pool", "=", "global_pool", ",", "output_stride", "=", "output_stride", ",", "\n", "include_root_block", "=", "True", ",", "reuse", "=", "reuse", ",", "scope", "=", "scope", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2.resnet_v2_101": [[239, 259], ["resnet_v2.resnet_v2", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2.resnet_v2"], ["", "def", "resnet_v2_101", "(", "inputs", ",", "\n", "num_classes", "=", "None", ",", "\n", "is_training", "=", "True", ",", "\n", "global_pool", "=", "True", ",", "\n", "output_stride", "=", "None", ",", "\n", "reuse", "=", "None", ",", "\n", "scope", "=", "'resnet_v2_101'", ")", ":", "\n", "  ", "\"\"\"ResNet-101 model of [1]. See resnet_v2() for arg and return description.\"\"\"", "\n", "blocks", "=", "[", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block1'", ",", "bottleneck", ",", "[", "(", "256", ",", "64", ",", "1", ")", "]", "*", "2", "+", "[", "(", "256", ",", "64", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block2'", ",", "bottleneck", ",", "[", "(", "512", ",", "128", ",", "1", ")", "]", "*", "3", "+", "[", "(", "512", ",", "128", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block3'", ",", "bottleneck", ",", "[", "(", "1024", ",", "256", ",", "1", ")", "]", "*", "22", "+", "[", "(", "1024", ",", "256", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block4'", ",", "bottleneck", ",", "[", "(", "2048", ",", "512", ",", "1", ")", "]", "*", "3", ")", "]", "\n", "return", "resnet_v2", "(", "inputs", ",", "blocks", ",", "num_classes", ",", "is_training", "=", "is_training", ",", "\n", "global_pool", "=", "global_pool", ",", "output_stride", "=", "output_stride", ",", "\n", "include_root_block", "=", "True", ",", "reuse", "=", "reuse", ",", "scope", "=", "scope", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2.resnet_v2_152": [[261, 281], ["resnet_v2.resnet_v2", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2.resnet_v2"], ["", "def", "resnet_v2_152", "(", "inputs", ",", "\n", "num_classes", "=", "None", ",", "\n", "is_training", "=", "True", ",", "\n", "global_pool", "=", "True", ",", "\n", "output_stride", "=", "None", ",", "\n", "reuse", "=", "None", ",", "\n", "scope", "=", "'resnet_v2_152'", ")", ":", "\n", "  ", "\"\"\"ResNet-152 model of [1]. See resnet_v2() for arg and return description.\"\"\"", "\n", "blocks", "=", "[", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block1'", ",", "bottleneck", ",", "[", "(", "256", ",", "64", ",", "1", ")", "]", "*", "2", "+", "[", "(", "256", ",", "64", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block2'", ",", "bottleneck", ",", "[", "(", "512", ",", "128", ",", "1", ")", "]", "*", "7", "+", "[", "(", "512", ",", "128", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block3'", ",", "bottleneck", ",", "[", "(", "1024", ",", "256", ",", "1", ")", "]", "*", "35", "+", "[", "(", "1024", ",", "256", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block4'", ",", "bottleneck", ",", "[", "(", "2048", ",", "512", ",", "1", ")", "]", "*", "3", ")", "]", "\n", "return", "resnet_v2", "(", "inputs", ",", "blocks", ",", "num_classes", ",", "is_training", "=", "is_training", ",", "\n", "global_pool", "=", "global_pool", ",", "output_stride", "=", "output_stride", ",", "\n", "include_root_block", "=", "True", ",", "reuse", "=", "reuse", ",", "scope", "=", "scope", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2.resnet_v2_200": [[283, 303], ["resnet_v2.resnet_v2", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block"], "function", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2.resnet_v2"], ["", "def", "resnet_v2_200", "(", "inputs", ",", "\n", "num_classes", "=", "None", ",", "\n", "is_training", "=", "True", ",", "\n", "global_pool", "=", "True", ",", "\n", "output_stride", "=", "None", ",", "\n", "reuse", "=", "None", ",", "\n", "scope", "=", "'resnet_v2_200'", ")", ":", "\n", "  ", "\"\"\"ResNet-200 model of [2]. See resnet_v2() for arg and return description.\"\"\"", "\n", "blocks", "=", "[", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block1'", ",", "bottleneck", ",", "[", "(", "256", ",", "64", ",", "1", ")", "]", "*", "2", "+", "[", "(", "256", ",", "64", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block2'", ",", "bottleneck", ",", "[", "(", "512", ",", "128", ",", "1", ")", "]", "*", "23", "+", "[", "(", "512", ",", "128", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block3'", ",", "bottleneck", ",", "[", "(", "1024", ",", "256", ",", "1", ")", "]", "*", "35", "+", "[", "(", "1024", ",", "256", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block4'", ",", "bottleneck", ",", "[", "(", "2048", ",", "512", ",", "1", ")", "]", "*", "3", ")", "]", "\n", "return", "resnet_v2", "(", "inputs", ",", "blocks", ",", "num_classes", ",", "is_training", "=", "is_training", ",", "\n", "global_pool", "=", "global_pool", ",", "output_stride", "=", "output_stride", ",", "\n", "include_root_block", "=", "True", ",", "reuse", "=", "reuse", ",", "scope", "=", "scope", ")", "\n", "", ""]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.inception_utils.inception_arg_scope": [[32, 72], ["slim.arg_scope", "slim.arg_scope", "slim.l2_regularizer", "slim.variance_scaling_initializer"], "function", ["None"], ["def", "inception_arg_scope", "(", "weight_decay", "=", "0.00004", ",", "\n", "use_batch_norm", "=", "True", ",", "\n", "batch_norm_decay", "=", "0.9997", ",", "\n", "batch_norm_epsilon", "=", "0.001", ")", ":", "\n", "  ", "\"\"\"Defines the default arg scope for inception models.\n\n  Args:\n    weight_decay: The weight decay to use for regularizing the model.\n    use_batch_norm: \"If `True`, batch_norm is applied after each convolution.\n    batch_norm_decay: Decay for batch norm moving average.\n    batch_norm_epsilon: Small float added to variance to avoid dividing by zero\n      in batch norm.\n\n  Returns:\n    An `arg_scope` to use for the inception models.\n  \"\"\"", "\n", "batch_norm_params", "=", "{", "\n", "# Decay for the moving averages.", "\n", "'decay'", ":", "batch_norm_decay", ",", "\n", "# epsilon to prevent 0s in variance.", "\n", "'epsilon'", ":", "batch_norm_epsilon", ",", "\n", "# collection containing update_ops.", "\n", "'updates_collections'", ":", "tf", ".", "GraphKeys", ".", "UPDATE_OPS", ",", "\n", "}", "\n", "if", "use_batch_norm", ":", "\n", "    ", "normalizer_fn", "=", "slim", ".", "batch_norm", "\n", "normalizer_params", "=", "batch_norm_params", "\n", "", "else", ":", "\n", "    ", "normalizer_fn", "=", "None", "\n", "normalizer_params", "=", "{", "}", "\n", "# Set weight_decay for weights in Conv and FC layers.", "\n", "", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", ",", "slim", ".", "fully_connected", "]", ",", "\n", "weights_regularizer", "=", "slim", ".", "l2_regularizer", "(", "weight_decay", ")", ")", ":", "\n", "    ", "with", "slim", ".", "arg_scope", "(", "\n", "[", "slim", ".", "conv2d", "]", ",", "\n", "weights_initializer", "=", "slim", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "activation_fn", "=", "tf", ".", "nn", ".", "relu", ",", "\n", "normalizer_fn", "=", "normalizer_fn", ",", "\n", "normalizer_params", "=", "normalizer_params", ")", "as", "sc", ":", "\n", "      ", "return", "sc", "\n", "", "", "", ""]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGGATest.testBuild": [[29, 39], ["vgg_test.VGGATest.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_a", "vgg_test.VGGATest.assertEquals", "vgg_test.VGGATest.assertListEqual", "logits.get_shape().as_list", "logits.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_a"], ["  ", "def", "testBuild", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_a", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertEquals", "(", "logits", ".", "op", ".", "name", ",", "'vgg_a/fc8/squeezed'", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGGATest.testFullyConvolutional": [[40, 50], ["vgg_test.VGGATest.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_a", "vgg_test.VGGATest.assertEquals", "vgg_test.VGGATest.assertListEqual", "logits.get_shape().as_list", "logits.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_a"], ["", "", "def", "testFullyConvolutional", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "1", "\n", "height", ",", "width", "=", "256", ",", "256", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_a", "(", "inputs", ",", "num_classes", ",", "spatial_squeeze", "=", "False", ")", "\n", "self", ".", "assertEquals", "(", "logits", ".", "op", ".", "name", ",", "'vgg_a/fc8/BiasAdd'", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "2", ",", "2", ",", "num_classes", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGGATest.testEndPoints": [[51, 76], ["vgg_test.VGGATest.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_a", "vgg_test.VGGATest.assertSetEqual", "set", "set", "end_points.keys"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_a"], ["", "", "def", "testEndPoints", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "_", ",", "end_points", "=", "vgg", ".", "vgg_a", "(", "inputs", ",", "num_classes", ")", "\n", "expected_names", "=", "[", "'vgg_a/conv1/conv1_1'", ",", "\n", "'vgg_a/pool1'", ",", "\n", "'vgg_a/conv2/conv2_1'", ",", "\n", "'vgg_a/pool2'", ",", "\n", "'vgg_a/conv3/conv3_1'", ",", "\n", "'vgg_a/conv3/conv3_2'", ",", "\n", "'vgg_a/pool3'", ",", "\n", "'vgg_a/conv4/conv4_1'", ",", "\n", "'vgg_a/conv4/conv4_2'", ",", "\n", "'vgg_a/pool4'", ",", "\n", "'vgg_a/conv5/conv5_1'", ",", "\n", "'vgg_a/conv5/conv5_2'", ",", "\n", "'vgg_a/pool5'", ",", "\n", "'vgg_a/fc6'", ",", "\n", "'vgg_a/fc7'", ",", "\n", "'vgg_a/fc8'", "\n", "]", "\n", "self", ".", "assertSetEqual", "(", "set", "(", "end_points", ".", "keys", "(", ")", ")", ",", "set", "(", "expected_names", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGGATest.testModelVariables": [[77, 109], ["vgg_test.VGGATest.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_a", "vgg_test.VGGATest.assertSetEqual", "set", "set", "slim.get_model_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_a"], ["", "", "def", "testModelVariables", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "vgg", ".", "vgg_a", "(", "inputs", ",", "num_classes", ")", "\n", "expected_names", "=", "[", "'vgg_a/conv1/conv1_1/weights'", ",", "\n", "'vgg_a/conv1/conv1_1/biases'", ",", "\n", "'vgg_a/conv2/conv2_1/weights'", ",", "\n", "'vgg_a/conv2/conv2_1/biases'", ",", "\n", "'vgg_a/conv3/conv3_1/weights'", ",", "\n", "'vgg_a/conv3/conv3_1/biases'", ",", "\n", "'vgg_a/conv3/conv3_2/weights'", ",", "\n", "'vgg_a/conv3/conv3_2/biases'", ",", "\n", "'vgg_a/conv4/conv4_1/weights'", ",", "\n", "'vgg_a/conv4/conv4_1/biases'", ",", "\n", "'vgg_a/conv4/conv4_2/weights'", ",", "\n", "'vgg_a/conv4/conv4_2/biases'", ",", "\n", "'vgg_a/conv5/conv5_1/weights'", ",", "\n", "'vgg_a/conv5/conv5_1/biases'", ",", "\n", "'vgg_a/conv5/conv5_2/weights'", ",", "\n", "'vgg_a/conv5/conv5_2/biases'", ",", "\n", "'vgg_a/fc6/weights'", ",", "\n", "'vgg_a/fc6/biases'", ",", "\n", "'vgg_a/fc7/weights'", ",", "\n", "'vgg_a/fc7/biases'", ",", "\n", "'vgg_a/fc8/weights'", ",", "\n", "'vgg_a/fc8/biases'", ",", "\n", "]", "\n", "model_variables", "=", "[", "v", ".", "op", ".", "name", "for", "v", "in", "slim", ".", "get_model_variables", "(", ")", "]", "\n", "self", ".", "assertSetEqual", "(", "set", "(", "model_variables", ")", ",", "set", "(", "expected_names", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGGATest.testEvaluation": [[110, 121], ["vgg_test.VGGATest.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_a", "vgg_test.VGGATest.assertListEqual", "tensorflow.argmax", "vgg_test.VGGATest.assertListEqual", "logits.get_shape().as_list", "tensorflow.argmax.get_shape().as_list", "logits.get_shape", "tensorflow.argmax.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_a"], ["", "", "def", "testEvaluation", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "2", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "eval_inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_a", "(", "eval_inputs", ",", "is_training", "=", "False", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "predictions", "=", "tf", ".", "argmax", "(", "logits", ",", "1", ")", "\n", "self", ".", "assertListEqual", "(", "predictions", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "[", "batch_size", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGGATest.testTrainEvalWithReuse": [[122, 144], ["vgg_test.VGGATest.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_a", "vgg_test.VGGATest.assertListEqual", "tensorflow.get_variable_scope().reuse_variables", "tensorflow.random_uniform", "nets.vgg.vgg_a", "vgg_test.VGGATest.assertListEqual", "tensorflow.reduce_mean", "tensorflow.argmax", "vgg_test.VGGATest.assertEquals", "tensorflow.reduce_mean.get_shape().as_list", "tensorflow.reduce_mean.get_shape().as_list", "tensorflow.argmax.get_shape().as_list", "tensorflow.get_variable_scope", "tensorflow.reduce_mean.get_shape", "tensorflow.reduce_mean.get_shape", "tensorflow.argmax.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_a", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_a"], ["", "", "def", "testTrainEvalWithReuse", "(", "self", ")", ":", "\n", "    ", "train_batch_size", "=", "2", "\n", "eval_batch_size", "=", "1", "\n", "train_height", ",", "train_width", "=", "224", ",", "224", "\n", "eval_height", ",", "eval_width", "=", "256", ",", "256", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "train_inputs", "=", "tf", ".", "random_uniform", "(", "\n", "(", "train_batch_size", ",", "train_height", ",", "train_width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_a", "(", "train_inputs", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "train_batch_size", ",", "num_classes", "]", ")", "\n", "tf", ".", "get_variable_scope", "(", ")", ".", "reuse_variables", "(", ")", "\n", "eval_inputs", "=", "tf", ".", "random_uniform", "(", "\n", "(", "eval_batch_size", ",", "eval_height", ",", "eval_width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_a", "(", "eval_inputs", ",", "is_training", "=", "False", ",", "\n", "spatial_squeeze", "=", "False", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "eval_batch_size", ",", "2", ",", "2", ",", "num_classes", "]", ")", "\n", "logits", "=", "tf", ".", "reduce_mean", "(", "logits", ",", "[", "1", ",", "2", "]", ")", "\n", "predictions", "=", "tf", ".", "argmax", "(", "logits", ",", "1", ")", "\n", "self", ".", "assertEquals", "(", "predictions", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "[", "eval_batch_size", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGGATest.testForward": [[145, 154], ["vgg_test.VGGATest.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_a", "sess.run", "sess.run", "vgg_test.VGGATest.assertTrue", "tensorflow.initialize_all_variables", "sess.run.any"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_a", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testForward", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "1", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_a", "(", "inputs", ")", "\n", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "logits", ")", "\n", "self", ".", "assertTrue", "(", "output", ".", "any", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGG16Test.testBuild": [[158, 168], ["vgg_test.VGG16Test.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_16", "vgg_test.VGG16Test.assertEquals", "vgg_test.VGG16Test.assertListEqual", "logits.get_shape().as_list", "logits.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_16"], ["  ", "def", "testBuild", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_16", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertEquals", "(", "logits", ".", "op", ".", "name", ",", "'vgg_16/fc8/squeezed'", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGG16Test.testFullyConvolutional": [[169, 179], ["vgg_test.VGG16Test.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_16", "vgg_test.VGG16Test.assertEquals", "vgg_test.VGG16Test.assertListEqual", "logits.get_shape().as_list", "logits.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_16"], ["", "", "def", "testFullyConvolutional", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "1", "\n", "height", ",", "width", "=", "256", ",", "256", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_16", "(", "inputs", ",", "num_classes", ",", "spatial_squeeze", "=", "False", ")", "\n", "self", ".", "assertEquals", "(", "logits", ".", "op", ".", "name", ",", "'vgg_16/fc8/BiasAdd'", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "2", ",", "2", ",", "num_classes", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGG16Test.testEndPoints": [[180, 210], ["vgg_test.VGG16Test.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_16", "vgg_test.VGG16Test.assertSetEqual", "set", "set", "end_points.keys"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_16"], ["", "", "def", "testEndPoints", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "_", ",", "end_points", "=", "vgg", ".", "vgg_16", "(", "inputs", ",", "num_classes", ")", "\n", "expected_names", "=", "[", "'vgg_16/conv1/conv1_1'", ",", "\n", "'vgg_16/conv1/conv1_2'", ",", "\n", "'vgg_16/pool1'", ",", "\n", "'vgg_16/conv2/conv2_1'", ",", "\n", "'vgg_16/conv2/conv2_2'", ",", "\n", "'vgg_16/pool2'", ",", "\n", "'vgg_16/conv3/conv3_1'", ",", "\n", "'vgg_16/conv3/conv3_2'", ",", "\n", "'vgg_16/conv3/conv3_3'", ",", "\n", "'vgg_16/pool3'", ",", "\n", "'vgg_16/conv4/conv4_1'", ",", "\n", "'vgg_16/conv4/conv4_2'", ",", "\n", "'vgg_16/conv4/conv4_3'", ",", "\n", "'vgg_16/pool4'", ",", "\n", "'vgg_16/conv5/conv5_1'", ",", "\n", "'vgg_16/conv5/conv5_2'", ",", "\n", "'vgg_16/conv5/conv5_3'", ",", "\n", "'vgg_16/pool5'", ",", "\n", "'vgg_16/fc6'", ",", "\n", "'vgg_16/fc7'", ",", "\n", "'vgg_16/fc8'", "\n", "]", "\n", "self", ".", "assertSetEqual", "(", "set", "(", "end_points", ".", "keys", "(", ")", ")", ",", "set", "(", "expected_names", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGG16Test.testModelVariables": [[211, 253], ["vgg_test.VGG16Test.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_16", "vgg_test.VGG16Test.assertSetEqual", "set", "set", "slim.get_model_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_16"], ["", "", "def", "testModelVariables", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "vgg", ".", "vgg_16", "(", "inputs", ",", "num_classes", ")", "\n", "expected_names", "=", "[", "'vgg_16/conv1/conv1_1/weights'", ",", "\n", "'vgg_16/conv1/conv1_1/biases'", ",", "\n", "'vgg_16/conv1/conv1_2/weights'", ",", "\n", "'vgg_16/conv1/conv1_2/biases'", ",", "\n", "'vgg_16/conv2/conv2_1/weights'", ",", "\n", "'vgg_16/conv2/conv2_1/biases'", ",", "\n", "'vgg_16/conv2/conv2_2/weights'", ",", "\n", "'vgg_16/conv2/conv2_2/biases'", ",", "\n", "'vgg_16/conv3/conv3_1/weights'", ",", "\n", "'vgg_16/conv3/conv3_1/biases'", ",", "\n", "'vgg_16/conv3/conv3_2/weights'", ",", "\n", "'vgg_16/conv3/conv3_2/biases'", ",", "\n", "'vgg_16/conv3/conv3_3/weights'", ",", "\n", "'vgg_16/conv3/conv3_3/biases'", ",", "\n", "'vgg_16/conv4/conv4_1/weights'", ",", "\n", "'vgg_16/conv4/conv4_1/biases'", ",", "\n", "'vgg_16/conv4/conv4_2/weights'", ",", "\n", "'vgg_16/conv4/conv4_2/biases'", ",", "\n", "'vgg_16/conv4/conv4_3/weights'", ",", "\n", "'vgg_16/conv4/conv4_3/biases'", ",", "\n", "'vgg_16/conv5/conv5_1/weights'", ",", "\n", "'vgg_16/conv5/conv5_1/biases'", ",", "\n", "'vgg_16/conv5/conv5_2/weights'", ",", "\n", "'vgg_16/conv5/conv5_2/biases'", ",", "\n", "'vgg_16/conv5/conv5_3/weights'", ",", "\n", "'vgg_16/conv5/conv5_3/biases'", ",", "\n", "'vgg_16/fc6/weights'", ",", "\n", "'vgg_16/fc6/biases'", ",", "\n", "'vgg_16/fc7/weights'", ",", "\n", "'vgg_16/fc7/biases'", ",", "\n", "'vgg_16/fc8/weights'", ",", "\n", "'vgg_16/fc8/biases'", ",", "\n", "]", "\n", "model_variables", "=", "[", "v", ".", "op", ".", "name", "for", "v", "in", "slim", ".", "get_model_variables", "(", ")", "]", "\n", "self", ".", "assertSetEqual", "(", "set", "(", "model_variables", ")", ",", "set", "(", "expected_names", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGG16Test.testEvaluation": [[254, 265], ["vgg_test.VGG16Test.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_16", "vgg_test.VGG16Test.assertListEqual", "tensorflow.argmax", "vgg_test.VGG16Test.assertListEqual", "logits.get_shape().as_list", "tensorflow.argmax.get_shape().as_list", "logits.get_shape", "tensorflow.argmax.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_16"], ["", "", "def", "testEvaluation", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "2", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "eval_inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_16", "(", "eval_inputs", ",", "is_training", "=", "False", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "predictions", "=", "tf", ".", "argmax", "(", "logits", ",", "1", ")", "\n", "self", ".", "assertListEqual", "(", "predictions", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "[", "batch_size", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGG16Test.testTrainEvalWithReuse": [[266, 288], ["vgg_test.VGG16Test.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_16", "vgg_test.VGG16Test.assertListEqual", "tensorflow.get_variable_scope().reuse_variables", "tensorflow.random_uniform", "nets.vgg.vgg_16", "vgg_test.VGG16Test.assertListEqual", "tensorflow.reduce_mean", "tensorflow.argmax", "vgg_test.VGG16Test.assertEquals", "tensorflow.reduce_mean.get_shape().as_list", "tensorflow.reduce_mean.get_shape().as_list", "tensorflow.argmax.get_shape().as_list", "tensorflow.get_variable_scope", "tensorflow.reduce_mean.get_shape", "tensorflow.reduce_mean.get_shape", "tensorflow.argmax.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_16", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_16"], ["", "", "def", "testTrainEvalWithReuse", "(", "self", ")", ":", "\n", "    ", "train_batch_size", "=", "2", "\n", "eval_batch_size", "=", "1", "\n", "train_height", ",", "train_width", "=", "224", ",", "224", "\n", "eval_height", ",", "eval_width", "=", "256", ",", "256", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "train_inputs", "=", "tf", ".", "random_uniform", "(", "\n", "(", "train_batch_size", ",", "train_height", ",", "train_width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_16", "(", "train_inputs", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "train_batch_size", ",", "num_classes", "]", ")", "\n", "tf", ".", "get_variable_scope", "(", ")", ".", "reuse_variables", "(", ")", "\n", "eval_inputs", "=", "tf", ".", "random_uniform", "(", "\n", "(", "eval_batch_size", ",", "eval_height", ",", "eval_width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_16", "(", "eval_inputs", ",", "is_training", "=", "False", ",", "\n", "spatial_squeeze", "=", "False", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "eval_batch_size", ",", "2", ",", "2", ",", "num_classes", "]", ")", "\n", "logits", "=", "tf", ".", "reduce_mean", "(", "logits", ",", "[", "1", ",", "2", "]", ")", "\n", "predictions", "=", "tf", ".", "argmax", "(", "logits", ",", "1", ")", "\n", "self", ".", "assertEquals", "(", "predictions", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "[", "eval_batch_size", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGG16Test.testForward": [[289, 298], ["vgg_test.VGG16Test.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_16", "sess.run", "sess.run", "vgg_test.VGG16Test.assertTrue", "tensorflow.initialize_all_variables", "sess.run.any"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_16", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testForward", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "1", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_16", "(", "inputs", ")", "\n", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "logits", ")", "\n", "self", ".", "assertTrue", "(", "output", ".", "any", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGG19Test.testBuild": [[302, 312], ["vgg_test.VGG19Test.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_19", "vgg_test.VGG19Test.assertEquals", "vgg_test.VGG19Test.assertListEqual", "logits.get_shape().as_list", "logits.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_19"], ["  ", "def", "testBuild", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_19", "(", "inputs", ",", "num_classes", ")", "\n", "self", ".", "assertEquals", "(", "logits", ".", "op", ".", "name", ",", "'vgg_19/fc8/squeezed'", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGG19Test.testFullyConvolutional": [[313, 323], ["vgg_test.VGG19Test.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_19", "vgg_test.VGG19Test.assertEquals", "vgg_test.VGG19Test.assertListEqual", "logits.get_shape().as_list", "logits.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_19"], ["", "", "def", "testFullyConvolutional", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "1", "\n", "height", ",", "width", "=", "256", ",", "256", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_19", "(", "inputs", ",", "num_classes", ",", "spatial_squeeze", "=", "False", ")", "\n", "self", ".", "assertEquals", "(", "logits", ".", "op", ".", "name", ",", "'vgg_19/fc8/BiasAdd'", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "2", ",", "2", ",", "num_classes", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGG19Test.testEndPoints": [[324, 358], ["vgg_test.VGG19Test.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_19", "vgg_test.VGG19Test.assertSetEqual", "set", "set", "end_points.keys"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_19"], ["", "", "def", "testEndPoints", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "_", ",", "end_points", "=", "vgg", ".", "vgg_19", "(", "inputs", ",", "num_classes", ")", "\n", "expected_names", "=", "[", "\n", "'vgg_19/conv1/conv1_1'", ",", "\n", "'vgg_19/conv1/conv1_2'", ",", "\n", "'vgg_19/pool1'", ",", "\n", "'vgg_19/conv2/conv2_1'", ",", "\n", "'vgg_19/conv2/conv2_2'", ",", "\n", "'vgg_19/pool2'", ",", "\n", "'vgg_19/conv3/conv3_1'", ",", "\n", "'vgg_19/conv3/conv3_2'", ",", "\n", "'vgg_19/conv3/conv3_3'", ",", "\n", "'vgg_19/conv3/conv3_4'", ",", "\n", "'vgg_19/pool3'", ",", "\n", "'vgg_19/conv4/conv4_1'", ",", "\n", "'vgg_19/conv4/conv4_2'", ",", "\n", "'vgg_19/conv4/conv4_3'", ",", "\n", "'vgg_19/conv4/conv4_4'", ",", "\n", "'vgg_19/pool4'", ",", "\n", "'vgg_19/conv5/conv5_1'", ",", "\n", "'vgg_19/conv5/conv5_2'", ",", "\n", "'vgg_19/conv5/conv5_3'", ",", "\n", "'vgg_19/conv5/conv5_4'", ",", "\n", "'vgg_19/pool5'", ",", "\n", "'vgg_19/fc6'", ",", "\n", "'vgg_19/fc7'", ",", "\n", "'vgg_19/fc8'", "\n", "]", "\n", "self", ".", "assertSetEqual", "(", "set", "(", "end_points", ".", "keys", "(", ")", ")", ",", "set", "(", "expected_names", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGG19Test.testModelVariables": [[359, 408], ["vgg_test.VGG19Test.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_19", "vgg_test.VGG19Test.assertSetEqual", "set", "set", "slim.get_model_variables"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_19"], ["", "", "def", "testModelVariables", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "5", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "vgg", ".", "vgg_19", "(", "inputs", ",", "num_classes", ")", "\n", "expected_names", "=", "[", "\n", "'vgg_19/conv1/conv1_1/weights'", ",", "\n", "'vgg_19/conv1/conv1_1/biases'", ",", "\n", "'vgg_19/conv1/conv1_2/weights'", ",", "\n", "'vgg_19/conv1/conv1_2/biases'", ",", "\n", "'vgg_19/conv2/conv2_1/weights'", ",", "\n", "'vgg_19/conv2/conv2_1/biases'", ",", "\n", "'vgg_19/conv2/conv2_2/weights'", ",", "\n", "'vgg_19/conv2/conv2_2/biases'", ",", "\n", "'vgg_19/conv3/conv3_1/weights'", ",", "\n", "'vgg_19/conv3/conv3_1/biases'", ",", "\n", "'vgg_19/conv3/conv3_2/weights'", ",", "\n", "'vgg_19/conv3/conv3_2/biases'", ",", "\n", "'vgg_19/conv3/conv3_3/weights'", ",", "\n", "'vgg_19/conv3/conv3_3/biases'", ",", "\n", "'vgg_19/conv3/conv3_4/weights'", ",", "\n", "'vgg_19/conv3/conv3_4/biases'", ",", "\n", "'vgg_19/conv4/conv4_1/weights'", ",", "\n", "'vgg_19/conv4/conv4_1/biases'", ",", "\n", "'vgg_19/conv4/conv4_2/weights'", ",", "\n", "'vgg_19/conv4/conv4_2/biases'", ",", "\n", "'vgg_19/conv4/conv4_3/weights'", ",", "\n", "'vgg_19/conv4/conv4_3/biases'", ",", "\n", "'vgg_19/conv4/conv4_4/weights'", ",", "\n", "'vgg_19/conv4/conv4_4/biases'", ",", "\n", "'vgg_19/conv5/conv5_1/weights'", ",", "\n", "'vgg_19/conv5/conv5_1/biases'", ",", "\n", "'vgg_19/conv5/conv5_2/weights'", ",", "\n", "'vgg_19/conv5/conv5_2/biases'", ",", "\n", "'vgg_19/conv5/conv5_3/weights'", ",", "\n", "'vgg_19/conv5/conv5_3/biases'", ",", "\n", "'vgg_19/conv5/conv5_4/weights'", ",", "\n", "'vgg_19/conv5/conv5_4/biases'", ",", "\n", "'vgg_19/fc6/weights'", ",", "\n", "'vgg_19/fc6/biases'", ",", "\n", "'vgg_19/fc7/weights'", ",", "\n", "'vgg_19/fc7/biases'", ",", "\n", "'vgg_19/fc8/weights'", ",", "\n", "'vgg_19/fc8/biases'", ",", "\n", "]", "\n", "model_variables", "=", "[", "v", ".", "op", ".", "name", "for", "v", "in", "slim", ".", "get_model_variables", "(", ")", "]", "\n", "self", ".", "assertSetEqual", "(", "set", "(", "model_variables", ")", ",", "set", "(", "expected_names", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGG19Test.testEvaluation": [[409, 420], ["vgg_test.VGG19Test.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_19", "vgg_test.VGG19Test.assertListEqual", "tensorflow.argmax", "vgg_test.VGG19Test.assertListEqual", "logits.get_shape().as_list", "tensorflow.argmax.get_shape().as_list", "logits.get_shape", "tensorflow.argmax.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_19"], ["", "", "def", "testEvaluation", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "2", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "eval_inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_19", "(", "eval_inputs", ",", "is_training", "=", "False", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch_size", ",", "num_classes", "]", ")", "\n", "predictions", "=", "tf", ".", "argmax", "(", "logits", ",", "1", ")", "\n", "self", ".", "assertListEqual", "(", "predictions", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "[", "batch_size", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGG19Test.testTrainEvalWithReuse": [[421, 443], ["vgg_test.VGG19Test.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_19", "vgg_test.VGG19Test.assertListEqual", "tensorflow.get_variable_scope().reuse_variables", "tensorflow.random_uniform", "nets.vgg.vgg_19", "vgg_test.VGG19Test.assertListEqual", "tensorflow.reduce_mean", "tensorflow.argmax", "vgg_test.VGG19Test.assertEquals", "tensorflow.reduce_mean.get_shape().as_list", "tensorflow.reduce_mean.get_shape().as_list", "tensorflow.argmax.get_shape().as_list", "tensorflow.get_variable_scope", "tensorflow.reduce_mean.get_shape", "tensorflow.reduce_mean.get_shape", "tensorflow.argmax.get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_19", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_19"], ["", "", "def", "testTrainEvalWithReuse", "(", "self", ")", ":", "\n", "    ", "train_batch_size", "=", "2", "\n", "eval_batch_size", "=", "1", "\n", "train_height", ",", "train_width", "=", "224", ",", "224", "\n", "eval_height", ",", "eval_width", "=", "256", ",", "256", "\n", "num_classes", "=", "1000", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "train_inputs", "=", "tf", ".", "random_uniform", "(", "\n", "(", "train_batch_size", ",", "train_height", ",", "train_width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_19", "(", "train_inputs", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "train_batch_size", ",", "num_classes", "]", ")", "\n", "tf", ".", "get_variable_scope", "(", ")", ".", "reuse_variables", "(", ")", "\n", "eval_inputs", "=", "tf", ".", "random_uniform", "(", "\n", "(", "eval_batch_size", ",", "eval_height", ",", "eval_width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_19", "(", "eval_inputs", ",", "is_training", "=", "False", ",", "\n", "spatial_squeeze", "=", "False", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "eval_batch_size", ",", "2", ",", "2", ",", "num_classes", "]", ")", "\n", "logits", "=", "tf", ".", "reduce_mean", "(", "logits", ",", "[", "1", ",", "2", "]", ")", "\n", "predictions", "=", "tf", ".", "argmax", "(", "logits", ",", "1", ")", "\n", "self", ".", "assertEquals", "(", "predictions", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "[", "eval_batch_size", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg_test.VGG19Test.testForward": [[444, 453], ["vgg_test.VGG19Test.test_session", "tensorflow.random_uniform", "nets.vgg.vgg_19", "sess.run", "sess.run", "vgg_test.VGG19Test.assertTrue", "tensorflow.initialize_all_variables", "sess.run.any"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.vgg.vgg_19", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testForward", "(", "self", ")", ":", "\n", "    ", "batch_size", "=", "1", "\n", "height", ",", "width", "=", "224", ",", "224", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "inputs", "=", "tf", ".", "random_uniform", "(", "(", "batch_size", ",", "height", ",", "width", ",", "3", ")", ")", "\n", "logits", ",", "_", "=", "vgg", ".", "vgg_19", "(", "inputs", ")", "\n", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "logits", ")", "\n", "self", ".", "assertTrue", "(", "output", ".", "any", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetUtilsTest.testSubsampleThreeByThree": [[58, 64], ["tensorflow.reshape", "nets.resnet_utils.subsample", "tensorflow.reshape", "tensorflow.to_float", "tensorflow.constant", "resnet_v2_test.ResnetUtilsTest.test_session", "resnet_v2_test.ResnetUtilsTest.assertAllClose", "tensorflow.range", "nets.resnet_utils.subsample.eval", "tensorflow.reshape.eval"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.subsample"], ["  ", "def", "testSubsampleThreeByThree", "(", "self", ")", ":", "\n", "    ", "x", "=", "tf", ".", "reshape", "(", "tf", ".", "to_float", "(", "tf", ".", "range", "(", "9", ")", ")", ",", "[", "1", ",", "3", ",", "3", ",", "1", "]", ")", "\n", "x", "=", "resnet_utils", ".", "subsample", "(", "x", ",", "2", ")", "\n", "expected", "=", "tf", ".", "reshape", "(", "tf", ".", "constant", "(", "[", "0", ",", "2", ",", "6", ",", "8", "]", ")", ",", "[", "1", ",", "2", ",", "2", ",", "1", "]", ")", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "self", ".", "assertAllClose", "(", "x", ".", "eval", "(", ")", ",", "expected", ".", "eval", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetUtilsTest.testSubsampleFourByFour": [[65, 71], ["tensorflow.reshape", "nets.resnet_utils.subsample", "tensorflow.reshape", "tensorflow.to_float", "tensorflow.constant", "resnet_v2_test.ResnetUtilsTest.test_session", "resnet_v2_test.ResnetUtilsTest.assertAllClose", "tensorflow.range", "nets.resnet_utils.subsample.eval", "tensorflow.reshape.eval"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.subsample"], ["", "", "def", "testSubsampleFourByFour", "(", "self", ")", ":", "\n", "    ", "x", "=", "tf", ".", "reshape", "(", "tf", ".", "to_float", "(", "tf", ".", "range", "(", "16", ")", ")", ",", "[", "1", ",", "4", ",", "4", ",", "1", "]", ")", "\n", "x", "=", "resnet_utils", ".", "subsample", "(", "x", ",", "2", ")", "\n", "expected", "=", "tf", ".", "reshape", "(", "tf", ".", "constant", "(", "[", "0", ",", "2", ",", "8", ",", "10", "]", ")", ",", "[", "1", ",", "2", ",", "2", ",", "1", "]", ")", "\n", "with", "self", ".", "test_session", "(", ")", ":", "\n", "      ", "self", ".", "assertAllClose", "(", "x", ".", "eval", "(", ")", ",", "expected", ".", "eval", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetUtilsTest.testConv2DSameEven": [[72, 112], ["resnet_v2_test.create_test_input", "resnet_v2_test.create_test_input", "tensorflow.reshape", "tensorflow.get_variable", "tensorflow.get_variable", "tensorflow.get_variable_scope().reuse_variables", "slim.conv2d", "tensorflow.to_float", "tensorflow.reshape", "nets.resnet_utils.subsample", "tensorflow.to_float", "tensorflow.reshape", "nets.resnet_utils.conv2d_same", "slim.conv2d", "tensorflow.to_float", "tensorflow.reshape", "resnet_v2_test.ResnetUtilsTest.test_session", "sess.run", "resnet_v2_test.ResnetUtilsTest.assertAllClose", "resnet_v2_test.ResnetUtilsTest.assertAllClose", "resnet_v2_test.ResnetUtilsTest.assertAllClose", "resnet_v2_test.ResnetUtilsTest.assertAllClose", "tensorflow.zeros", "tensorflow.get_variable_scope", "tensorflow.initialize_all_variables", "slim.conv2d.eval", "tensorflow.reshape.eval", "nets.resnet_utils.subsample.eval", "tensorflow.reshape.eval", "nets.resnet_utils.conv2d_same.eval", "y3_expected.eval", "slim.conv2d.eval", "tensorflow.reshape.eval"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.subsample", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.conv2d_same", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testConv2DSameEven", "(", "self", ")", ":", "\n", "    ", "n", ",", "n2", "=", "4", ",", "2", "\n", "\n", "# Input image.", "\n", "x", "=", "create_test_input", "(", "1", ",", "n", ",", "n", ",", "1", ")", "\n", "\n", "# Convolution kernel.", "\n", "w", "=", "create_test_input", "(", "1", ",", "3", ",", "3", ",", "1", ")", "\n", "w", "=", "tf", ".", "reshape", "(", "w", ",", "[", "3", ",", "3", ",", "1", ",", "1", "]", ")", "\n", "\n", "tf", ".", "get_variable", "(", "'Conv/weights'", ",", "initializer", "=", "w", ")", "\n", "tf", ".", "get_variable", "(", "'Conv/biases'", ",", "initializer", "=", "tf", ".", "zeros", "(", "[", "1", "]", ")", ")", "\n", "tf", ".", "get_variable_scope", "(", ")", ".", "reuse_variables", "(", ")", "\n", "\n", "y1", "=", "slim", ".", "conv2d", "(", "x", ",", "1", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'Conv'", ")", "\n", "y1_expected", "=", "tf", ".", "to_float", "(", "[", "[", "14", ",", "28", ",", "43", ",", "26", "]", ",", "\n", "[", "28", ",", "48", ",", "66", ",", "37", "]", ",", "\n", "[", "43", ",", "66", ",", "84", ",", "46", "]", ",", "\n", "[", "26", ",", "37", ",", "46", ",", "22", "]", "]", ")", "\n", "y1_expected", "=", "tf", ".", "reshape", "(", "y1_expected", ",", "[", "1", ",", "n", ",", "n", ",", "1", "]", ")", "\n", "\n", "y2", "=", "resnet_utils", ".", "subsample", "(", "y1", ",", "2", ")", "\n", "y2_expected", "=", "tf", ".", "to_float", "(", "[", "[", "14", ",", "43", "]", ",", "\n", "[", "43", ",", "84", "]", "]", ")", "\n", "y2_expected", "=", "tf", ".", "reshape", "(", "y2_expected", ",", "[", "1", ",", "n2", ",", "n2", ",", "1", "]", ")", "\n", "\n", "y3", "=", "resnet_utils", ".", "conv2d_same", "(", "x", ",", "1", ",", "3", ",", "stride", "=", "2", ",", "scope", "=", "'Conv'", ")", "\n", "y3_expected", "=", "y2_expected", "\n", "\n", "y4", "=", "slim", ".", "conv2d", "(", "x", ",", "1", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'Conv'", ")", "\n", "y4_expected", "=", "tf", ".", "to_float", "(", "[", "[", "48", ",", "37", "]", ",", "\n", "[", "37", ",", "22", "]", "]", ")", "\n", "y4_expected", "=", "tf", ".", "reshape", "(", "y4_expected", ",", "[", "1", ",", "n2", ",", "n2", ",", "1", "]", ")", "\n", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "y1", ".", "eval", "(", ")", ",", "y1_expected", ".", "eval", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "y2", ".", "eval", "(", ")", ",", "y2_expected", ".", "eval", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "y3", ".", "eval", "(", ")", ",", "y3_expected", ".", "eval", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "y4", ".", "eval", "(", ")", ",", "y4_expected", ".", "eval", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetUtilsTest.testConv2DSameOdd": [[113, 153], ["resnet_v2_test.create_test_input", "resnet_v2_test.create_test_input", "tensorflow.reshape", "tensorflow.get_variable", "tensorflow.get_variable", "tensorflow.get_variable_scope().reuse_variables", "slim.conv2d", "tensorflow.to_float", "tensorflow.reshape", "nets.resnet_utils.subsample", "tensorflow.to_float", "tensorflow.reshape", "nets.resnet_utils.conv2d_same", "slim.conv2d", "resnet_v2_test.ResnetUtilsTest.test_session", "sess.run", "resnet_v2_test.ResnetUtilsTest.assertAllClose", "resnet_v2_test.ResnetUtilsTest.assertAllClose", "resnet_v2_test.ResnetUtilsTest.assertAllClose", "resnet_v2_test.ResnetUtilsTest.assertAllClose", "tensorflow.zeros", "tensorflow.get_variable_scope", "tensorflow.initialize_all_variables", "slim.conv2d.eval", "tensorflow.reshape.eval", "nets.resnet_utils.subsample.eval", "tensorflow.reshape.eval", "nets.resnet_utils.conv2d_same.eval", "y3_expected.eval", "slim.conv2d.eval", "y4_expected.eval"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.subsample", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.conv2d_same", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "def", "testConv2DSameOdd", "(", "self", ")", ":", "\n", "    ", "n", ",", "n2", "=", "5", ",", "3", "\n", "\n", "# Input image.", "\n", "x", "=", "create_test_input", "(", "1", ",", "n", ",", "n", ",", "1", ")", "\n", "\n", "# Convolution kernel.", "\n", "w", "=", "create_test_input", "(", "1", ",", "3", ",", "3", ",", "1", ")", "\n", "w", "=", "tf", ".", "reshape", "(", "w", ",", "[", "3", ",", "3", ",", "1", ",", "1", "]", ")", "\n", "\n", "tf", ".", "get_variable", "(", "'Conv/weights'", ",", "initializer", "=", "w", ")", "\n", "tf", ".", "get_variable", "(", "'Conv/biases'", ",", "initializer", "=", "tf", ".", "zeros", "(", "[", "1", "]", ")", ")", "\n", "tf", ".", "get_variable_scope", "(", ")", ".", "reuse_variables", "(", ")", "\n", "\n", "y1", "=", "slim", ".", "conv2d", "(", "x", ",", "1", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "1", ",", "scope", "=", "'Conv'", ")", "\n", "y1_expected", "=", "tf", ".", "to_float", "(", "[", "[", "14", ",", "28", ",", "43", ",", "58", ",", "34", "]", ",", "\n", "[", "28", ",", "48", ",", "66", ",", "84", ",", "46", "]", ",", "\n", "[", "43", ",", "66", ",", "84", ",", "102", ",", "55", "]", ",", "\n", "[", "58", ",", "84", ",", "102", ",", "120", ",", "64", "]", ",", "\n", "[", "34", ",", "46", ",", "55", ",", "64", ",", "30", "]", "]", ")", "\n", "y1_expected", "=", "tf", ".", "reshape", "(", "y1_expected", ",", "[", "1", ",", "n", ",", "n", ",", "1", "]", ")", "\n", "\n", "y2", "=", "resnet_utils", ".", "subsample", "(", "y1", ",", "2", ")", "\n", "y2_expected", "=", "tf", ".", "to_float", "(", "[", "[", "14", ",", "43", ",", "34", "]", ",", "\n", "[", "43", ",", "84", ",", "55", "]", ",", "\n", "[", "34", ",", "55", ",", "30", "]", "]", ")", "\n", "y2_expected", "=", "tf", ".", "reshape", "(", "y2_expected", ",", "[", "1", ",", "n2", ",", "n2", ",", "1", "]", ")", "\n", "\n", "y3", "=", "resnet_utils", ".", "conv2d_same", "(", "x", ",", "1", ",", "3", ",", "stride", "=", "2", ",", "scope", "=", "'Conv'", ")", "\n", "y3_expected", "=", "y2_expected", "\n", "\n", "y4", "=", "slim", ".", "conv2d", "(", "x", ",", "1", ",", "[", "3", ",", "3", "]", ",", "stride", "=", "2", ",", "scope", "=", "'Conv'", ")", "\n", "y4_expected", "=", "y2_expected", "\n", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "y1", ".", "eval", "(", ")", ",", "y1_expected", ".", "eval", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "y2", ".", "eval", "(", ")", ",", "y2_expected", ".", "eval", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "y3", ".", "eval", "(", ")", ",", "y3_expected", ".", "eval", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "y4", ".", "eval", "(", ")", ",", "y4_expected", ".", "eval", "(", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetUtilsTest._resnet_plain": [[154, 161], ["tensorflow.variable_scope", "slim.arg_scope", "nets.resnet_utils.stack_blocks_dense", "dict", "tensorflow.get_collection"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.stack_blocks_dense"], ["", "", "def", "_resnet_plain", "(", "self", ",", "inputs", ",", "blocks", ",", "output_stride", "=", "None", ",", "scope", "=", "None", ")", ":", "\n", "    ", "\"\"\"A plain ResNet without extra layers before or after the ResNet blocks.\"\"\"", "\n", "with", "tf", ".", "variable_scope", "(", "scope", ",", "values", "=", "[", "inputs", "]", ")", ":", "\n", "      ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "conv2d", "]", ",", "outputs_collections", "=", "'end_points'", ")", ":", "\n", "        ", "net", "=", "resnet_utils", ".", "stack_blocks_dense", "(", "inputs", ",", "blocks", ",", "output_stride", ")", "\n", "end_points", "=", "dict", "(", "tf", ".", "get_collection", "(", "'end_points'", ")", ")", "\n", "return", "net", ",", "end_points", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetUtilsTest.testEndPointsV2": [[162, 186], ["resnet_v2_test.create_test_input", "resnet_v2_test.ResnetUtilsTest.assertItemsEqual", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "slim.arg_scope", "resnet_v2_test.ResnetUtilsTest._resnet_plain", "nets.resnet_utils.resnet_arg_scope"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetUtilsTest._resnet_plain", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "", "", "def", "testEndPointsV2", "(", "self", ")", ":", "\n", "    ", "\"\"\"Test the end points of a tiny v2 bottleneck network.\"\"\"", "\n", "bottleneck", "=", "resnet_v2", ".", "bottleneck", "\n", "blocks", "=", "[", "resnet_utils", ".", "Block", "(", "'block1'", ",", "bottleneck", ",", "[", "(", "4", ",", "1", ",", "1", ")", ",", "(", "4", ",", "1", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "'block2'", ",", "bottleneck", ",", "[", "(", "8", ",", "2", ",", "1", ")", ",", "(", "8", ",", "2", ",", "1", ")", "]", ")", "]", "\n", "inputs", "=", "create_test_input", "(", "2", ",", "32", ",", "16", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "_", ",", "end_points", "=", "self", ".", "_resnet_plain", "(", "inputs", ",", "blocks", ",", "scope", "=", "'tiny'", ")", "\n", "", "expected", "=", "[", "\n", "'tiny/block1/unit_1/bottleneck_v2/shortcut'", ",", "\n", "'tiny/block1/unit_1/bottleneck_v2/conv1'", ",", "\n", "'tiny/block1/unit_1/bottleneck_v2/conv2'", ",", "\n", "'tiny/block1/unit_1/bottleneck_v2/conv3'", ",", "\n", "'tiny/block1/unit_2/bottleneck_v2/conv1'", ",", "\n", "'tiny/block1/unit_2/bottleneck_v2/conv2'", ",", "\n", "'tiny/block1/unit_2/bottleneck_v2/conv3'", ",", "\n", "'tiny/block2/unit_1/bottleneck_v2/shortcut'", ",", "\n", "'tiny/block2/unit_1/bottleneck_v2/conv1'", ",", "\n", "'tiny/block2/unit_1/bottleneck_v2/conv2'", ",", "\n", "'tiny/block2/unit_1/bottleneck_v2/conv3'", ",", "\n", "'tiny/block2/unit_2/bottleneck_v2/conv1'", ",", "\n", "'tiny/block2/unit_2/bottleneck_v2/conv2'", ",", "\n", "'tiny/block2/unit_2/bottleneck_v2/conv3'", "]", "\n", "self", ".", "assertItemsEqual", "(", "expected", ",", "end_points", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetUtilsTest._stack_blocks_nondense": [[187, 200], ["tensorflow.variable_scope", "enumerate", "tensorflow.variable_scope", "block.unit_fn"], "methods", ["None"], ["", "def", "_stack_blocks_nondense", "(", "self", ",", "net", ",", "blocks", ")", ":", "\n", "    ", "\"\"\"A simplified ResNet Block stacker without output stride control.\"\"\"", "\n", "for", "block", "in", "blocks", ":", "\n", "      ", "with", "tf", ".", "variable_scope", "(", "block", ".", "scope", ",", "'block'", ",", "[", "net", "]", ")", ":", "\n", "        ", "for", "i", ",", "unit", "in", "enumerate", "(", "block", ".", "args", ")", ":", "\n", "          ", "depth", ",", "depth_bottleneck", ",", "stride", "=", "unit", "\n", "with", "tf", ".", "variable_scope", "(", "'unit_%d'", "%", "(", "i", "+", "1", ")", ",", "values", "=", "[", "net", "]", ")", ":", "\n", "            ", "net", "=", "block", ".", "unit_fn", "(", "net", ",", "\n", "depth", "=", "depth", ",", "\n", "depth_bottleneck", "=", "depth_bottleneck", ",", "\n", "stride", "=", "stride", ",", "\n", "rate", "=", "1", ")", "\n", "", "", "", "", "return", "net", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetUtilsTest._atrousValues": [[201, 246], ["nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "slim.arg_scope", "nets.resnet_utils.resnet_arg_scope", "slim.arg_scope", "tensorflow.Graph().as_default", "resnet_v2_test.ResnetUtilsTest.test_session", "tensorflow.set_random_seed", "resnet_v2_test.create_test_input", "nets.resnet_utils.stack_blocks_dense", "nets.resnet_utils.subsample", "tensorflow.get_variable_scope().reuse_variables", "resnet_v2_test.ResnetUtilsTest._stack_blocks_nondense", "sess.run", "sess.run", "resnet_v2_test.ResnetUtilsTest.assertAllClose", "tensorflow.Graph", "tensorflow.initialize_all_variables", "tensorflow.get_variable_scope"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.stack_blocks_dense", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.subsample", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetUtilsTest._stack_blocks_nondense", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "def", "_atrousValues", "(", "self", ",", "bottleneck", ")", ":", "\n", "    ", "\"\"\"Verify the values of dense feature extraction by atrous convolution.\n\n    Make sure that dense feature extraction by stack_blocks_dense() followed by\n    subsampling gives identical results to feature extraction at the nominal\n    network output stride using the simple self._stack_blocks_nondense() above.\n\n    Args:\n      bottleneck: The bottleneck function.\n    \"\"\"", "\n", "blocks", "=", "[", "\n", "resnet_utils", ".", "Block", "(", "'block1'", ",", "bottleneck", ",", "[", "(", "4", ",", "1", ",", "1", ")", ",", "(", "4", ",", "1", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "'block2'", ",", "bottleneck", ",", "[", "(", "8", ",", "2", ",", "1", ")", ",", "(", "8", ",", "2", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "'block3'", ",", "bottleneck", ",", "[", "(", "16", ",", "4", ",", "1", ")", ",", "(", "16", ",", "4", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "'block4'", ",", "bottleneck", ",", "[", "(", "32", ",", "8", ",", "1", ")", ",", "(", "32", ",", "8", ",", "1", ")", "]", ")", "\n", "]", "\n", "nominal_stride", "=", "8", "\n", "\n", "# Test both odd and even input dimensions.", "\n", "height", "=", "30", "\n", "width", "=", "31", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "batch_norm", "]", ",", "is_training", "=", "False", ")", ":", "\n", "        ", "for", "output_stride", "in", "[", "1", ",", "2", ",", "4", ",", "8", ",", "None", "]", ":", "\n", "          ", "with", "tf", ".", "Graph", "(", ")", ".", "as_default", "(", ")", ":", "\n", "            ", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "              ", "tf", ".", "set_random_seed", "(", "0", ")", "\n", "inputs", "=", "create_test_input", "(", "1", ",", "height", ",", "width", ",", "3", ")", "\n", "# Dense feature extraction followed by subsampling.", "\n", "output", "=", "resnet_utils", ".", "stack_blocks_dense", "(", "inputs", ",", "\n", "blocks", ",", "\n", "output_stride", ")", "\n", "if", "output_stride", "is", "None", ":", "\n", "                ", "factor", "=", "1", "\n", "", "else", ":", "\n", "                ", "factor", "=", "nominal_stride", "//", "output_stride", "\n", "\n", "", "output", "=", "resnet_utils", ".", "subsample", "(", "output", ",", "factor", ")", "\n", "# Make the two networks use the same weights.", "\n", "tf", ".", "get_variable_scope", "(", ")", ".", "reuse_variables", "(", ")", "\n", "# Feature extraction at the nominal network rate.", "\n", "expected", "=", "self", ".", "_stack_blocks_nondense", "(", "inputs", ",", "blocks", ")", "\n", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", ",", "expected", "=", "sess", ".", "run", "(", "[", "output", ",", "expected", "]", ")", "\n", "self", ".", "assertAllClose", "(", "output", ",", "expected", ",", "atol", "=", "1e-4", ",", "rtol", "=", "1e-4", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetUtilsTest.testAtrousValuesBottleneck": [[247, 249], ["resnet_v2_test.ResnetUtilsTest._atrousValues"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetUtilsTest._atrousValues"], ["", "", "", "", "", "", "def", "testAtrousValuesBottleneck", "(", "self", ")", ":", "\n", "    ", "self", ".", "_atrousValues", "(", "resnet_v2", ".", "bottleneck", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small": [[254, 281], ["nets.resnet_v2.resnet_v2", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block", "nets.resnet_utils.Block"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2.resnet_v2"], ["def", "_resnet_small", "(", "self", ",", "\n", "inputs", ",", "\n", "num_classes", "=", "None", ",", "\n", "is_training", "=", "True", ",", "\n", "global_pool", "=", "True", ",", "\n", "output_stride", "=", "None", ",", "\n", "include_root_block", "=", "True", ",", "\n", "reuse", "=", "None", ",", "\n", "scope", "=", "'resnet_v2_small'", ")", ":", "\n", "    ", "\"\"\"A shallow and thin ResNet v2 for faster tests.\"\"\"", "\n", "bottleneck", "=", "resnet_v2", ".", "bottleneck", "\n", "blocks", "=", "[", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block1'", ",", "bottleneck", ",", "[", "(", "4", ",", "1", ",", "1", ")", "]", "*", "2", "+", "[", "(", "4", ",", "1", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block2'", ",", "bottleneck", ",", "[", "(", "8", ",", "2", ",", "1", ")", "]", "*", "2", "+", "[", "(", "8", ",", "2", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block3'", ",", "bottleneck", ",", "[", "(", "16", ",", "4", ",", "1", ")", "]", "*", "2", "+", "[", "(", "16", ",", "4", ",", "2", ")", "]", ")", ",", "\n", "resnet_utils", ".", "Block", "(", "\n", "'block4'", ",", "bottleneck", ",", "[", "(", "32", ",", "8", ",", "1", ")", "]", "*", "2", ")", "]", "\n", "return", "resnet_v2", ".", "resnet_v2", "(", "inputs", ",", "blocks", ",", "num_classes", ",", "\n", "is_training", "=", "is_training", ",", "\n", "global_pool", "=", "global_pool", ",", "\n", "output_stride", "=", "output_stride", ",", "\n", "include_root_block", "=", "include_root_block", ",", "\n", "reuse", "=", "reuse", ",", "\n", "scope", "=", "scope", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest.testClassificationEndPoints": [[282, 295], ["resnet_v2_test.create_test_input", "resnet_v2_test.ResnetCompleteNetworkTest.assertTrue", "resnet_v2_test.ResnetCompleteNetworkTest.assertListEqual", "resnet_v2_test.ResnetCompleteNetworkTest.assertTrue", "resnet_v2_test.ResnetCompleteNetworkTest.assertListEqual", "slim.arg_scope", "resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "logits.op.name.startswith", "logits.get_shape().as_list", "end_points[].get_shape().as_list", "nets.resnet_utils.resnet_arg_scope", "logits.get_shape", "end_points[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "def", "testClassificationEndPoints", "(", "self", ")", ":", "\n", "    ", "global_pool", "=", "True", "\n", "num_classes", "=", "10", "\n", "inputs", "=", "create_test_input", "(", "2", ",", "224", ",", "224", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "logits", ",", "end_points", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "num_classes", ",", "\n", "global_pool", "=", "global_pool", ",", "\n", "scope", "=", "'resnet'", ")", "\n", "", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'resnet/logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "[", "2", ",", "1", ",", "1", ",", "num_classes", "]", ")", "\n", "self", ".", "assertTrue", "(", "'predictions'", "in", "end_points", ")", "\n", "self", ".", "assertListEqual", "(", "end_points", "[", "'predictions'", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "2", ",", "1", ",", "1", ",", "num_classes", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest.testClassificationShapes": [[296, 312], ["resnet_v2_test.create_test_input", "slim.arg_scope", "resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "nets.resnet_utils.resnet_arg_scope", "resnet_v2_test.ResnetCompleteNetworkTest.assertListEqual", "end_points[].get_shape().as_list", "end_points[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "def", "testClassificationShapes", "(", "self", ")", ":", "\n", "    ", "global_pool", "=", "True", "\n", "num_classes", "=", "10", "\n", "inputs", "=", "create_test_input", "(", "2", ",", "224", ",", "224", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "_", ",", "end_points", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "num_classes", ",", "\n", "global_pool", "=", "global_pool", ",", "\n", "scope", "=", "'resnet'", ")", "\n", "endpoint_to_shape", "=", "{", "\n", "'resnet/block1'", ":", "[", "2", ",", "28", ",", "28", ",", "4", "]", ",", "\n", "'resnet/block2'", ":", "[", "2", ",", "14", ",", "14", ",", "8", "]", ",", "\n", "'resnet/block3'", ":", "[", "2", ",", "7", ",", "7", ",", "16", "]", ",", "\n", "'resnet/block4'", ":", "[", "2", ",", "7", ",", "7", ",", "32", "]", "}", "\n", "for", "endpoint", "in", "endpoint_to_shape", ":", "\n", "        ", "shape", "=", "endpoint_to_shape", "[", "endpoint", "]", "\n", "self", ".", "assertListEqual", "(", "end_points", "[", "endpoint", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest.testFullyConvolutionalEndpointShapes": [[313, 329], ["resnet_v2_test.create_test_input", "slim.arg_scope", "resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "nets.resnet_utils.resnet_arg_scope", "resnet_v2_test.ResnetCompleteNetworkTest.assertListEqual", "end_points[].get_shape().as_list", "end_points[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "", "", "def", "testFullyConvolutionalEndpointShapes", "(", "self", ")", ":", "\n", "    ", "global_pool", "=", "False", "\n", "num_classes", "=", "10", "\n", "inputs", "=", "create_test_input", "(", "2", ",", "321", ",", "321", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "_", ",", "end_points", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "num_classes", ",", "\n", "global_pool", "=", "global_pool", ",", "\n", "scope", "=", "'resnet'", ")", "\n", "endpoint_to_shape", "=", "{", "\n", "'resnet/block1'", ":", "[", "2", ",", "41", ",", "41", ",", "4", "]", ",", "\n", "'resnet/block2'", ":", "[", "2", ",", "21", ",", "21", ",", "8", "]", ",", "\n", "'resnet/block3'", ":", "[", "2", ",", "11", ",", "11", ",", "16", "]", ",", "\n", "'resnet/block4'", ":", "[", "2", ",", "11", ",", "11", ",", "32", "]", "}", "\n", "for", "endpoint", "in", "endpoint_to_shape", ":", "\n", "        ", "shape", "=", "endpoint_to_shape", "[", "endpoint", "]", "\n", "self", ".", "assertListEqual", "(", "end_points", "[", "endpoint", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest.testRootlessFullyConvolutionalEndpointShapes": [[330, 347], ["resnet_v2_test.create_test_input", "slim.arg_scope", "resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "nets.resnet_utils.resnet_arg_scope", "resnet_v2_test.ResnetCompleteNetworkTest.assertListEqual", "end_points[].get_shape().as_list", "end_points[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "", "", "def", "testRootlessFullyConvolutionalEndpointShapes", "(", "self", ")", ":", "\n", "    ", "global_pool", "=", "False", "\n", "num_classes", "=", "10", "\n", "inputs", "=", "create_test_input", "(", "2", ",", "128", ",", "128", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "_", ",", "end_points", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "num_classes", ",", "\n", "global_pool", "=", "global_pool", ",", "\n", "include_root_block", "=", "False", ",", "\n", "scope", "=", "'resnet'", ")", "\n", "endpoint_to_shape", "=", "{", "\n", "'resnet/block1'", ":", "[", "2", ",", "64", ",", "64", ",", "4", "]", ",", "\n", "'resnet/block2'", ":", "[", "2", ",", "32", ",", "32", ",", "8", "]", ",", "\n", "'resnet/block3'", ":", "[", "2", ",", "16", ",", "16", ",", "16", "]", ",", "\n", "'resnet/block4'", ":", "[", "2", ",", "16", ",", "16", ",", "32", "]", "}", "\n", "for", "endpoint", "in", "endpoint_to_shape", ":", "\n", "        ", "shape", "=", "endpoint_to_shape", "[", "endpoint", "]", "\n", "self", ".", "assertListEqual", "(", "end_points", "[", "endpoint", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest.testAtrousFullyConvolutionalEndpointShapes": [[348, 367], ["resnet_v2_test.create_test_input", "slim.arg_scope", "resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "nets.resnet_utils.resnet_arg_scope", "resnet_v2_test.ResnetCompleteNetworkTest.assertListEqual", "end_points[].get_shape().as_list", "end_points[].get_shape"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "", "", "def", "testAtrousFullyConvolutionalEndpointShapes", "(", "self", ")", ":", "\n", "    ", "global_pool", "=", "False", "\n", "num_classes", "=", "10", "\n", "output_stride", "=", "8", "\n", "inputs", "=", "create_test_input", "(", "2", ",", "321", ",", "321", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "_", ",", "end_points", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "\n", "num_classes", ",", "\n", "global_pool", "=", "global_pool", ",", "\n", "output_stride", "=", "output_stride", ",", "\n", "scope", "=", "'resnet'", ")", "\n", "endpoint_to_shape", "=", "{", "\n", "'resnet/block1'", ":", "[", "2", ",", "41", ",", "41", ",", "4", "]", ",", "\n", "'resnet/block2'", ":", "[", "2", ",", "41", ",", "41", ",", "8", "]", ",", "\n", "'resnet/block3'", ":", "[", "2", ",", "41", ",", "41", ",", "16", "]", ",", "\n", "'resnet/block4'", ":", "[", "2", ",", "41", ",", "41", ",", "32", "]", "}", "\n", "for", "endpoint", "in", "endpoint_to_shape", ":", "\n", "        ", "shape", "=", "endpoint_to_shape", "[", "endpoint", "]", "\n", "self", ".", "assertListEqual", "(", "end_points", "[", "endpoint", "]", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "shape", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest.testAtrousFullyConvolutionalValues": [[368, 396], ["slim.arg_scope", "nets.resnet_utils.resnet_arg_scope", "tensorflow.Graph().as_default", "resnet_v2_test.ResnetCompleteNetworkTest.test_session", "tensorflow.set_random_seed", "resnet_v2_test.create_test_input", "resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "nets.resnet_utils.subsample", "tensorflow.get_variable_scope().reuse_variables", "resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "sess.run", "resnet_v2_test.ResnetCompleteNetworkTest.assertAllClose", "tensorflow.Graph", "tensorflow.initialize_all_variables", "nets.resnet_utils.subsample.eval", "expected.eval", "tensorflow.get_variable_scope"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.subsample", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run"], ["", "", "", "def", "testAtrousFullyConvolutionalValues", "(", "self", ")", ":", "\n", "    ", "\"\"\"Verify dense feature extraction with atrous convolution.\"\"\"", "\n", "nominal_stride", "=", "32", "\n", "for", "output_stride", "in", "[", "4", ",", "8", ",", "16", ",", "32", ",", "None", "]", ":", "\n", "      ", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "        ", "with", "tf", ".", "Graph", "(", ")", ".", "as_default", "(", ")", ":", "\n", "          ", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "            ", "tf", ".", "set_random_seed", "(", "0", ")", "\n", "inputs", "=", "create_test_input", "(", "2", ",", "81", ",", "81", ",", "3", ")", "\n", "# Dense feature extraction followed by subsampling.", "\n", "output", ",", "_", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "None", ",", "\n", "is_training", "=", "False", ",", "\n", "global_pool", "=", "False", ",", "\n", "output_stride", "=", "output_stride", ")", "\n", "if", "output_stride", "is", "None", ":", "\n", "              ", "factor", "=", "1", "\n", "", "else", ":", "\n", "              ", "factor", "=", "nominal_stride", "//", "output_stride", "\n", "", "output", "=", "resnet_utils", ".", "subsample", "(", "output", ",", "factor", ")", "\n", "# Make the two networks use the same weights.", "\n", "tf", ".", "get_variable_scope", "(", ")", ".", "reuse_variables", "(", ")", "\n", "# Feature extraction at the nominal network rate.", "\n", "expected", ",", "_", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "None", ",", "\n", "is_training", "=", "False", ",", "\n", "global_pool", "=", "False", ")", "\n", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "self", ".", "assertAllClose", "(", "output", ".", "eval", "(", ")", ",", "expected", ".", "eval", "(", ")", ",", "\n", "atol", "=", "1e-4", ",", "rtol", "=", "1e-4", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest.testUnknownBatchSize": [[397, 415], ["resnet_v2_test.create_test_input", "resnet_v2_test.ResnetCompleteNetworkTest.assertTrue", "resnet_v2_test.ResnetCompleteNetworkTest.assertListEqual", "resnet_v2_test.create_test_input", "slim.arg_scope", "resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "logits.op.name.startswith", "logits.get_shape().as_list", "resnet_v2_test.ResnetCompleteNetworkTest.test_session", "sess.run", "sess.run", "resnet_v2_test.ResnetCompleteNetworkTest.assertEqual", "nets.resnet_utils.resnet_arg_scope", "tensorflow.initialize_all_variables", "logits.get_shape", "create_test_input.eval"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "", "", "", "", "def", "testUnknownBatchSize", "(", "self", ")", ":", "\n", "    ", "batch", "=", "2", "\n", "height", ",", "width", "=", "65", ",", "65", "\n", "global_pool", "=", "True", "\n", "num_classes", "=", "10", "\n", "inputs", "=", "create_test_input", "(", "None", ",", "height", ",", "width", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "logits", ",", "_", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "num_classes", ",", "\n", "global_pool", "=", "global_pool", ",", "\n", "scope", "=", "'resnet'", ")", "\n", "", "self", ".", "assertTrue", "(", "logits", ".", "op", ".", "name", ".", "startswith", "(", "'resnet/logits'", ")", ")", "\n", "self", ".", "assertListEqual", "(", "logits", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "None", ",", "1", ",", "1", ",", "num_classes", "]", ")", "\n", "images", "=", "create_test_input", "(", "batch", ",", "height", ",", "width", ",", "3", ")", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "logits", ",", "{", "inputs", ":", "images", ".", "eval", "(", ")", "}", ")", "\n", "self", ".", "assertEqual", "(", "output", ".", "shape", ",", "(", "batch", ",", "1", ",", "1", ",", "num_classes", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest.testFullyConvolutionalUnknownHeightWidth": [[416, 431], ["resnet_v2_test.create_test_input", "resnet_v2_test.ResnetCompleteNetworkTest.assertListEqual", "resnet_v2_test.create_test_input", "slim.arg_scope", "resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "sess.run.get_shape().as_list", "resnet_v2_test.ResnetCompleteNetworkTest.test_session", "sess.run", "sess.run", "resnet_v2_test.ResnetCompleteNetworkTest.assertEqual", "nets.resnet_utils.resnet_arg_scope", "tensorflow.initialize_all_variables", "sess.run.get_shape", "create_test_input.eval"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "", "def", "testFullyConvolutionalUnknownHeightWidth", "(", "self", ")", ":", "\n", "    ", "batch", "=", "2", "\n", "height", ",", "width", "=", "65", ",", "65", "\n", "global_pool", "=", "False", "\n", "inputs", "=", "create_test_input", "(", "batch", ",", "None", ",", "None", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "output", ",", "_", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "None", ",", "\n", "global_pool", "=", "global_pool", ")", "\n", "", "self", ".", "assertListEqual", "(", "output", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch", ",", "None", ",", "None", ",", "32", "]", ")", "\n", "images", "=", "create_test_input", "(", "batch", ",", "height", ",", "width", ",", "3", ")", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "output", ",", "{", "inputs", ":", "images", ".", "eval", "(", ")", "}", ")", "\n", "self", ".", "assertEqual", "(", "output", ".", "shape", ",", "(", "batch", ",", "3", ",", "3", ",", "32", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest.testAtrousFullyConvolutionalUnknownHeightWidth": [[432, 450], ["resnet_v2_test.create_test_input", "resnet_v2_test.ResnetCompleteNetworkTest.assertListEqual", "resnet_v2_test.create_test_input", "slim.arg_scope", "resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "sess.run.get_shape().as_list", "resnet_v2_test.ResnetCompleteNetworkTest.test_session", "sess.run", "sess.run", "resnet_v2_test.ResnetCompleteNetworkTest.assertEqual", "nets.resnet_utils.resnet_arg_scope", "tensorflow.initialize_all_variables", "sess.run.get_shape", "create_test_input.eval"], "methods", ["home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.ResnetCompleteNetworkTest._resnet_small", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.datasets.convert_skin_lesions.run", "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope"], ["", "", "def", "testAtrousFullyConvolutionalUnknownHeightWidth", "(", "self", ")", ":", "\n", "    ", "batch", "=", "2", "\n", "height", ",", "width", "=", "65", ",", "65", "\n", "global_pool", "=", "False", "\n", "output_stride", "=", "8", "\n", "inputs", "=", "create_test_input", "(", "batch", ",", "None", ",", "None", ",", "3", ")", "\n", "with", "slim", ".", "arg_scope", "(", "resnet_utils", ".", "resnet_arg_scope", "(", ")", ")", ":", "\n", "      ", "output", ",", "_", "=", "self", ".", "_resnet_small", "(", "inputs", ",", "\n", "None", ",", "\n", "global_pool", "=", "global_pool", ",", "\n", "output_stride", "=", "output_stride", ")", "\n", "", "self", ".", "assertListEqual", "(", "output", ".", "get_shape", "(", ")", ".", "as_list", "(", ")", ",", "\n", "[", "batch", ",", "None", ",", "None", ",", "32", "]", ")", "\n", "images", "=", "create_test_input", "(", "batch", ",", "height", ",", "width", ",", "3", ")", "\n", "with", "self", ".", "test_session", "(", ")", "as", "sess", ":", "\n", "      ", "sess", ".", "run", "(", "tf", ".", "initialize_all_variables", "(", ")", ")", "\n", "output", "=", "sess", ".", "run", "(", "output", ",", "{", "inputs", ":", "images", ".", "eval", "(", ")", "}", ")", "\n", "self", ".", "assertEqual", "(", "output", ".", "shape", ",", "(", "batch", ",", "9", ",", "9", ",", "32", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_v2_test.create_test_input": [[30, 54], ["tensorflow.placeholder", "tensorflow.to_float", "numpy.tile", "numpy.reshape", "numpy.reshape", "numpy.reshape", "numpy.arange", "numpy.arange"], "function", ["None"], ["def", "create_test_input", "(", "batch_size", ",", "height", ",", "width", ",", "channels", ")", ":", "\n", "  ", "\"\"\"Create test input tensor.\n\n  Args:\n    batch_size: The number of images per batch or `None` if unknown.\n    height: The height of each image or `None` if unknown.\n    width: The width of each image or `None` if unknown.\n    channels: The number of channels per image or `None` if unknown.\n\n  Returns:\n    Either a placeholder `Tensor` of dimension\n      [batch_size, height, width, channels] if any of the inputs are `None` or a\n    constant `Tensor` with the mesh grid values along the spatial dimensions.\n  \"\"\"", "\n", "if", "None", "in", "[", "batch_size", ",", "height", ",", "width", ",", "channels", "]", ":", "\n", "    ", "return", "tf", ".", "placeholder", "(", "tf", ".", "float32", ",", "(", "batch_size", ",", "height", ",", "width", ",", "channels", ")", ")", "\n", "", "else", ":", "\n", "    ", "return", "tf", ".", "to_float", "(", "\n", "np", ".", "tile", "(", "\n", "np", ".", "reshape", "(", "\n", "np", ".", "reshape", "(", "np", ".", "arange", "(", "height", ")", ",", "[", "height", ",", "1", "]", ")", "+", "\n", "np", ".", "reshape", "(", "np", ".", "arange", "(", "width", ")", ",", "[", "1", ",", "width", "]", ")", ",", "\n", "[", "1", ",", "height", ",", "width", ",", "1", "]", ")", ",", "\n", "[", "batch_size", ",", "1", ",", "1", ",", "channels", "]", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.subsample": [[59, 75], ["slim.max_pool2d"], "function", ["None"], ["", "def", "subsample", "(", "inputs", ",", "factor", ",", "scope", "=", "None", ")", ":", "\n", "  ", "\"\"\"Subsamples the input along the spatial dimensions.\n\n  Args:\n    inputs: A `Tensor` of size [batch, height_in, width_in, channels].\n    factor: The subsampling factor.\n    scope: Optional variable_scope.\n\n  Returns:\n    output: A `Tensor` of size [batch, height_out, width_out, channels] with the\n      input, either intact (if factor == 1) or subsampled (if factor > 1).\n  \"\"\"", "\n", "if", "factor", "==", "1", ":", "\n", "    ", "return", "inputs", "\n", "", "else", ":", "\n", "    ", "return", "slim", ".", "max_pool2d", "(", "inputs", ",", "[", "1", ",", "1", "]", ",", "stride", "=", "factor", ",", "scope", "=", "scope", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.conv2d_same": [[77, 123], ["slim.conv2d", "tensorflow.pad", "slim.conv2d"], "function", ["None"], ["", "", "def", "conv2d_same", "(", "inputs", ",", "num_outputs", ",", "kernel_size", ",", "stride", ",", "rate", "=", "1", ",", "scope", "=", "None", ")", ":", "\n", "  ", "\"\"\"Strided 2-D convolution with 'SAME' padding.\n\n  When stride > 1, then we do explicit zero-padding, followed by conv2d with\n  'VALID' padding.\n\n  Note that\n\n     net = conv2d_same(inputs, num_outputs, 3, stride=stride)\n\n  is equivalent to\n\n     net = slim.conv2d(inputs, num_outputs, 3, stride=1, padding='SAME')\n     net = subsample(net, factor=stride)\n\n  whereas\n\n     net = slim.conv2d(inputs, num_outputs, 3, stride=stride, padding='SAME')\n\n  is different when the input's height or width is even, which is why we add the\n  current function. For more details, see ResnetUtilsTest.testConv2DSameEven().\n\n  Args:\n    inputs: A 4-D tensor of size [batch, height_in, width_in, channels].\n    num_outputs: An integer, the number of output filters.\n    kernel_size: An int with the kernel_size of the filters.\n    stride: An integer, the output stride.\n    rate: An integer, rate for atrous convolution.\n    scope: Scope.\n\n  Returns:\n    output: A 4-D tensor of size [batch, height_out, width_out, channels] with\n      the convolution output.\n  \"\"\"", "\n", "if", "stride", "==", "1", ":", "\n", "    ", "return", "slim", ".", "conv2d", "(", "inputs", ",", "num_outputs", ",", "kernel_size", ",", "stride", "=", "1", ",", "rate", "=", "rate", ",", "\n", "padding", "=", "'SAME'", ",", "scope", "=", "scope", ")", "\n", "", "else", ":", "\n", "    ", "kernel_size_effective", "=", "kernel_size", "+", "(", "kernel_size", "-", "1", ")", "*", "(", "rate", "-", "1", ")", "\n", "pad_total", "=", "kernel_size_effective", "-", "1", "\n", "pad_beg", "=", "pad_total", "//", "2", "\n", "pad_end", "=", "pad_total", "-", "pad_beg", "\n", "inputs", "=", "tf", ".", "pad", "(", "inputs", ",", "\n", "[", "[", "0", ",", "0", "]", ",", "[", "pad_beg", ",", "pad_end", "]", ",", "[", "pad_beg", ",", "pad_end", "]", ",", "[", "0", ",", "0", "]", "]", ")", "\n", "return", "slim", ".", "conv2d", "(", "inputs", ",", "num_outputs", ",", "kernel_size", ",", "stride", "=", "stride", ",", "\n", "rate", "=", "rate", ",", "padding", "=", "'VALID'", ",", "scope", "=", "scope", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.stack_blocks_dense": [[125, 207], ["ValueError", "tensorflow.variable_scope", "enumerate", "slim.utils.collect_named_outputs", "ValueError", "tensorflow.variable_scope", "block.unit_fn", "block.unit_fn"], "function", ["None"], ["", "", "@", "slim", ".", "add_arg_scope", "\n", "def", "stack_blocks_dense", "(", "net", ",", "blocks", ",", "output_stride", "=", "None", ",", "\n", "outputs_collections", "=", "None", ")", ":", "\n", "  ", "\"\"\"Stacks ResNet `Blocks` and controls output feature density.\n\n  First, this function creates scopes for the ResNet in the form of\n  'block_name/unit_1', 'block_name/unit_2', etc.\n\n  Second, this function allows the user to explicitly control the ResNet\n  output_stride, which is the ratio of the input to output spatial resolution.\n  This is useful for dense prediction tasks such as semantic segmentation or\n  object detection.\n\n  Most ResNets consist of 4 ResNet blocks and subsample the activations by a\n  factor of 2 when transitioning between consecutive ResNet blocks. This results\n  to a nominal ResNet output_stride equal to 8. If we set the output_stride to\n  half the nominal network stride (e.g., output_stride=4), then we compute\n  responses twice.\n\n  Control of the output feature density is implemented by atrous convolution.\n\n  Args:\n    net: A `Tensor` of size [batch, height, width, channels].\n    blocks: A list of length equal to the number of ResNet `Blocks`. Each\n      element is a ResNet `Block` object describing the units in the `Block`.\n    output_stride: If `None`, then the output will be computed at the nominal\n      network stride. If output_stride is not `None`, it specifies the requested\n      ratio of input to output spatial resolution, which needs to be equal to\n      the product of unit strides from the start up to some level of the ResNet.\n      For example, if the ResNet employs units with strides 1, 2, 1, 3, 4, 1,\n      then valid values for the output_stride are 1, 2, 6, 24 or None (which\n      is equivalent to output_stride=24).\n    outputs_collections: Collection to add the ResNet block outputs.\n\n  Returns:\n    net: Output tensor with stride equal to the specified output_stride.\n\n  Raises:\n    ValueError: If the target output_stride is not valid.\n  \"\"\"", "\n", "# The current_stride variable keeps track of the effective stride of the", "\n", "# activations. This allows us to invoke atrous convolution whenever applying", "\n", "# the next residual unit would result in the activations having stride larger", "\n", "# than the target output_stride.", "\n", "current_stride", "=", "1", "\n", "\n", "# The atrous convolution rate parameter.", "\n", "rate", "=", "1", "\n", "\n", "for", "block", "in", "blocks", ":", "\n", "    ", "with", "tf", ".", "variable_scope", "(", "block", ".", "scope", ",", "'block'", ",", "[", "net", "]", ")", "as", "sc", ":", "\n", "      ", "for", "i", ",", "unit", "in", "enumerate", "(", "block", ".", "args", ")", ":", "\n", "        ", "if", "output_stride", "is", "not", "None", "and", "current_stride", ">", "output_stride", ":", "\n", "          ", "raise", "ValueError", "(", "'The target output_stride cannot be reached.'", ")", "\n", "\n", "", "with", "tf", ".", "variable_scope", "(", "'unit_%d'", "%", "(", "i", "+", "1", ")", ",", "values", "=", "[", "net", "]", ")", ":", "\n", "          ", "unit_depth", ",", "unit_depth_bottleneck", ",", "unit_stride", "=", "unit", "\n", "\n", "# If we have reached the target output_stride, then we need to employ", "\n", "# atrous convolution with stride=1 and multiply the atrous rate by the", "\n", "# current unit's stride for use in subsequent layers.", "\n", "if", "output_stride", "is", "not", "None", "and", "current_stride", "==", "output_stride", ":", "\n", "            ", "net", "=", "block", ".", "unit_fn", "(", "net", ",", "\n", "depth", "=", "unit_depth", ",", "\n", "depth_bottleneck", "=", "unit_depth_bottleneck", ",", "\n", "stride", "=", "1", ",", "\n", "rate", "=", "rate", ")", "\n", "rate", "*=", "unit_stride", "\n", "\n", "", "else", ":", "\n", "            ", "net", "=", "block", ".", "unit_fn", "(", "net", ",", "\n", "depth", "=", "unit_depth", ",", "\n", "depth_bottleneck", "=", "unit_depth_bottleneck", ",", "\n", "stride", "=", "unit_stride", ",", "\n", "rate", "=", "1", ")", "\n", "current_stride", "*=", "unit_stride", "\n", "", "", "", "net", "=", "slim", ".", "utils", ".", "collect_named_outputs", "(", "outputs_collections", ",", "sc", ".", "name", ",", "net", ")", "\n", "\n", "", "", "if", "output_stride", "is", "not", "None", "and", "current_stride", "!=", "output_stride", ":", "\n", "    ", "raise", "ValueError", "(", "'The target output_stride cannot be reached.'", ")", "\n", "\n", "", "return", "net", "\n", "\n"]], "home.repos.pwc.inspect_result.learningtitans_isbi2017-part3.nets.resnet_utils.resnet_arg_scope": [[209, 255], ["slim.arg_scope", "slim.arg_scope", "slim.l2_regularizer", "slim.variance_scaling_initializer", "slim.arg_scope"], "function", ["None"], ["", "def", "resnet_arg_scope", "(", "weight_decay", "=", "0.0001", ",", "\n", "batch_norm_decay", "=", "0.997", ",", "\n", "batch_norm_epsilon", "=", "1e-5", ",", "\n", "batch_norm_scale", "=", "True", ")", ":", "\n", "  ", "\"\"\"Defines the default ResNet arg scope.\n\n  TODO(gpapan): The batch-normalization related default values above are\n    appropriate for use in conjunction with the reference ResNet models\n    released at https://github.com/KaimingHe/deep-residual-networks. When\n    training ResNets from scratch, they might need to be tuned.\n\n  Args:\n    weight_decay: The weight decay to use for regularizing the model.\n    batch_norm_decay: The moving average decay when estimating layer activation\n      statistics in batch normalization.\n    batch_norm_epsilon: Small constant to prevent division by zero when\n      normalizing activations by their variance in batch normalization.\n    batch_norm_scale: If True, uses an explicit `gamma` multiplier to scale the\n      activations in the batch normalization layer.\n\n  Returns:\n    An `arg_scope` to use for the resnet models.\n  \"\"\"", "\n", "batch_norm_params", "=", "{", "\n", "'decay'", ":", "batch_norm_decay", ",", "\n", "'epsilon'", ":", "batch_norm_epsilon", ",", "\n", "'scale'", ":", "batch_norm_scale", ",", "\n", "'updates_collections'", ":", "tf", ".", "GraphKeys", ".", "UPDATE_OPS", ",", "\n", "}", "\n", "\n", "with", "slim", ".", "arg_scope", "(", "\n", "[", "slim", ".", "conv2d", "]", ",", "\n", "weights_regularizer", "=", "slim", ".", "l2_regularizer", "(", "weight_decay", ")", ",", "\n", "weights_initializer", "=", "slim", ".", "variance_scaling_initializer", "(", ")", ",", "\n", "activation_fn", "=", "tf", ".", "nn", ".", "relu", ",", "\n", "normalizer_fn", "=", "slim", ".", "batch_norm", ",", "\n", "normalizer_params", "=", "batch_norm_params", ")", ":", "\n", "    ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "batch_norm", "]", ",", "**", "batch_norm_params", ")", ":", "\n", "# The following implies padding='SAME' for pool1, which makes feature", "\n", "# alignment easier for dense prediction tasks. This is also used in", "\n", "# https://github.com/facebook/fb.resnet.torch. However the accompanying", "\n", "# code of 'Deep Residual Learning for Image Recognition' uses", "\n", "# padding='VALID' for pool1. You can switch to that choice by setting", "\n", "# slim.arg_scope([slim.max_pool2d], padding='VALID').", "\n", "      ", "with", "slim", ".", "arg_scope", "(", "[", "slim", ".", "max_pool2d", "]", ",", "padding", "=", "'SAME'", ")", "as", "arg_sc", ":", "\n", "        ", "return", "arg_sc", "\n", "", "", "", "", ""]]}