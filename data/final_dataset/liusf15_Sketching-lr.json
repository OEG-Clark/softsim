{"home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.leverage_sampling.uniform_sampling": [[24, 33], ["numpy.random.choice", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm"], "function", ["None"], ["def", "uniform_sampling", "(", "r", ")", ":", "\n", "    ", "idx_uniform", "=", "np", ".", "random", ".", "choice", "(", "n", ",", "r", ",", "replace", "=", "False", ")", "\n", "x_tilde", "=", "X", "[", "idx_uniform", ",", ":", "]", "\n", "y_tilde", "=", "Y", "[", "idx_uniform", "]", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "ve", "=", "np", ".", "linalg", ".", "norm", "(", "beta", "-", "beta_hat", ")", "**", "2", "/", "v_full", "\n", "pe", "=", "np", ".", "linalg", ".", "norm", "(", "X", "@", "beta", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "p_full", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "return", "ve", ",", "pe", ",", "re", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.leverage_sampling.leverage_sampling": [[38, 50], ["numpy.random.binomial", "enumerate", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm"], "function", ["None"], ["", "def", "leverage_sampling", "(", "r", ")", ":", "\n", "    ", "leverage_probability", "=", "leverage_score", "/", "p", "*", "r", "\n", "leverage_probability", "[", "leverage_probability", ">", "1", "]", "=", "1", "\n", "idx", "=", "np", ".", "random", ".", "binomial", "(", "1", ",", "p", "=", "leverage_probability", ",", "size", "=", "n", ")", "\n", "idx_leverage", "=", "[", "i", "for", "i", ",", "j", "in", "enumerate", "(", "idx", ")", "if", "j", "==", "1", "]", "\n", "x_tilde", "=", "X", "[", "idx_leverage", ",", ":", "]", "\n", "y_tilde", "=", "Y", "[", "idx_leverage", "]", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "ve", "=", "np", ".", "linalg", ".", "norm", "(", "beta", "-", "beta_hat", ")", "**", "2", "/", "v_full", "\n", "pe", "=", "np", ".", "linalg", ".", "norm", "(", "X", "@", "beta", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "p_full", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "return", "ve", ",", "pe", ",", "re", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.leverage_sampling.leverage_count": [[53, 57], ["sum"], "function", ["None"], ["", "def", "leverage_count", "(", "r", ")", ":", "\n", "    ", "leverage_probability", "=", "leverage_score", "/", "p", "*", "r", "\n", "leverage_probability", "[", "leverage_probability", ">", "1", "]", "=", "1", "\n", "return", "r", "-", "sum", "(", "leverage_probability", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.leverage_sampling.deterministic_leverage": [[68, 77], ["numpy.argsort", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm"], "function", ["None"], ["", "def", "deterministic_leverage", "(", "r", ")", ":", "\n", "    ", "idx_deter_leverage", "=", "np", ".", "argsort", "(", "leverage_score", ")", "[", "(", "n", "-", "r", ")", ":", "n", "]", "\n", "x_tilde", "=", "X", "[", "idx_deter_leverage", ",", ":", "]", "\n", "y_tilde", "=", "Y", "[", "idx_deter_leverage", "]", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "ve", "=", "np", ".", "linalg", ".", "norm", "(", "beta", "-", "beta_hat", ")", "**", "2", "/", "v_full", "\n", "pe", "=", "np", ".", "linalg", ".", "norm", "(", "X", "@", "beta", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "p_full", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "return", "ve", ",", "pe", ",", "re", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.leverage_sampling.eta_w2_inv": [[80, 84], ["numpy.sqrt"], "function", ["None"], ["", "def", "eta_w2_inv", "(", "d1", ",", "d2", ",", "gamma", ")", ":", "\n", "    ", "return", "1", "/", "(", "2", "*", "d1", "**", "2", "*", "d2", "**", "2", ")", "*", "(", "-", "d1", "**", "2", "-", "d2", "**", "2", "+", "(", "d1", "**", "2", "+", "d2", "**", "2", ")", "/", "2", "/", "(", "1", "-", "gamma", ")", "+", "np", ".", "sqrt", "(", "\n", "(", "-", "d1", "**", "2", "-", "d2", "**", "2", "+", "(", "d1", "**", "2", "+", "d2", "**", "2", ")", "/", "2", "/", "(", "1", "-", "gamma", ")", ")", "**", "2", "+", "4", "*", "d1", "**", "2", "*", "d2", "**", "2", "*", "gamma", "/", "(", "\n", "1", "-", "gamma", ")", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.leverage_sampling.eta_sw2": [[87, 94], ["leverage_sampling.eta_w2_inv", "min", "min"], "function", ["home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.leverage_sampling.eta_w2_inv"], ["", "def", "eta_sw2", "(", "z", ",", "d1", ",", "d2", ",", "gamma", ",", "xi", ")", ":", "\n", "    ", "z1", "=", "eta_w2_inv", "(", "d1", ",", "d2", ",", "gamma", ")", "\n", "pi_1", "=", "min", "(", "xi", "/", "gamma", "*", "(", "1", "-", "1", "/", "(", "1", "+", "d1", "**", "2", "*", "z1", ")", ")", ",", "1", ")", "\n", "pi_2", "=", "min", "(", "xi", "/", "gamma", "*", "(", "1", "-", "1", "/", "(", "1", "+", "d2", "**", "2", "*", "z1", ")", ")", ",", "1", ")", "\n", "# pi_1 = xi / gamma * (1 - 1 / (1 + d1 ** 2 * z1))", "\n", "# pi_2 = xi / gamma * (1 - 1 / (1 + d2 ** 2 * z1))", "\n", "return", "(", "1", "-", "pi_1", "/", "2", "-", "pi_2", "/", "2", ")", "+", "pi_1", "/", "2", "/", "(", "1", "+", "d1", "**", "2", "*", "z", ")", "+", "pi_2", "/", "2", "/", "(", "1", "+", "d2", "**", "2", "*", "z", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.leverage_sampling.eta_sw2_inv": [[98, 113], ["range", "abs", "print", "leverage_sampling.eta_sw2", "leverage_sampling.eta_sw2"], "function", ["home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.leverage_sampling.eta_sw2", "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.leverage_sampling.eta_sw2"], ["", "def", "eta_sw2_inv", "(", "d1", ",", "d2", ",", "gamma", ",", "xi", ")", ":", "\n", "    ", "maxiter", "=", "100", "\n", "low", "=", "0", "\n", "high", "=", "1", "\n", "mid", "=", "0.5", "\n", "for", "t", "in", "range", "(", "maxiter", ")", ":", "\n", "        ", "mid", "=", "(", "low", "+", "high", ")", "/", "2", "\n", "if", "abs", "(", "eta_sw2", "(", "mid", ",", "d1", ",", "d2", ",", "gamma", ",", "xi", ")", "-", "(", "1", "-", "gamma", ")", ")", "<", "1e-8", ":", "\n", "            ", "print", "(", "'converge'", ")", "\n", "break", "\n", "", "if", "eta_sw2", "(", "mid", ",", "d1", ",", "d2", ",", "gamma", ",", "xi", ")", "-", "(", "1", "-", "gamma", ")", ">", "0", ":", "\n", "            ", "low", "=", "mid", "\n", "", "else", ":", "\n", "            ", "high", "=", "mid", "\n", "", "", "return", "mid", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.leverage_sampling.eta_truncated_w2_inv": [[116, 122], ["numpy.sqrt"], "function", ["None"], ["", "def", "eta_truncated_w2_inv", "(", "d1", ",", "d2", ",", "gamma", ",", "xi", ")", ":", "\n", "    ", "if", "xi", "<", "0.5", ":", "\n", "        ", "return", "gamma", "/", "d2", "**", "2", "/", "(", "xi", "-", "gamma", ")", "\n", "", "else", ":", "\n", "        ", "b", "=", "d1", "**", "2", "+", "d2", "**", "2", "-", "(", "(", "2", "*", "xi", "-", "1", ")", "*", "d2", "**", "2", "+", "d1", "**", "2", ")", "/", "2", "/", "(", "xi", "-", "gamma", ")", "\n", "return", "1", "/", "(", "2", "*", "d1", "**", "2", "*", "d2", "**", "2", ")", "*", "(", "-", "b", "+", "np", ".", "sqrt", "(", "b", "**", "2", "+", "4", "*", "d1", "**", "2", "*", "d2", "**", "2", "*", "gamma", "/", "(", "xi", "-", "gamma", ")", ")", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.leverage_sampling.E_sw2": [[125, 130], ["leverage_sampling.eta_w2_inv", "min", "min"], "function", ["home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.leverage_sampling.eta_w2_inv"], ["", "", "def", "E_sw2", "(", "d1", ",", "d2", ",", "gamma", ",", "xi", ")", ":", "\n", "    ", "z1", "=", "eta_w2_inv", "(", "d1", ",", "d2", ",", "gamma", ")", "\n", "pi_1", "=", "min", "(", "xi", "/", "gamma", "*", "(", "1", "-", "1", "/", "(", "1", "+", "d1", "**", "2", "*", "z1", ")", ")", ",", "1", ")", "\n", "pi_2", "=", "min", "(", "xi", "/", "gamma", "*", "(", "1", "-", "1", "/", "(", "1", "+", "d2", "**", "2", "*", "z1", ")", ")", ",", "1", ")", "\n", "return", "pi_1", "/", "2", "*", "d1", "**", "2", "+", "pi_2", "/", "2", "*", "d2", "**", "2", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.leverage_sampling.E_truncated_w2": [[133, 138], ["None"], "function", ["None"], ["", "def", "E_truncated_w2", "(", "d1", ",", "d2", ",", "gamma", ",", "xi", ")", ":", "\n", "    ", "if", "xi", "<", "0.5", ":", "\n", "        ", "return", "d2", "**", "2", "\n", "", "else", ":", "\n", "        ", "return", "d2", "**", "2", "/", "2", "/", "xi", "+", "d1", "**", "2", "*", "(", "1", "-", "1", "/", "2", "/", "xi", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Empirical_data.hadamard_projection": [[37, 55], ["numpy.concatenate", "numpy.random.shuffle", "numpy.random.choice", "beta_hat.reshape.reshape", "numpy.random.choice", "numpy.array", "numpy.sqrt", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "int", "scipy.fftpack.dct", "int", "range"], "function", ["None"], ["def", "hadamard_projection", "(", "r", ")", ":", "\n", "    ", "data_tilde", "=", "np", ".", "concatenate", "(", "[", "X", ",", "Y", "]", ",", "axis", "=", "1", ")", "\n", "data_tilde", "[", ":", "int", "(", "n", "/", "2", ")", ",", ":", "]", "=", "-", "data_tilde", "[", ":", "int", "(", "n", "/", "2", ")", ",", ":", "]", "\n", "np", ".", "random", ".", "shuffle", "(", "data_tilde", ")", "\n", "data_tilde", "=", "np", ".", "array", "(", "[", "dct", "(", "data_tilde", "[", ":", ",", "i", "]", ")", "for", "i", "in", "range", "(", "p", "+", "1", ")", "]", ")", ".", "T", "\n", "data_tilde", "[", "0", ",", ":", "]", "=", "data_tilde", "[", "0", ",", ":", "]", "/", "np", ".", "sqrt", "(", "2", ")", "\n", "idx_sample", "=", "np", ".", "random", ".", "choice", "(", "n", ",", "r", ",", "replace", "=", "False", ")", "\n", "x_tilde", "=", "data_tilde", "[", "idx_sample", ",", ":", "p", "]", "\n", "y_tilde", "=", "data_tilde", "[", "idx_sample", ",", "p", "]", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "beta_hat", "=", "beta_hat", ".", "reshape", "(", "(", "p", ",", "1", ")", ")", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "\n", "test_idx", "=", "np", ".", "random", ".", "choice", "(", "m", "-", "n", ",", "n", ")", "\n", "x_test", "=", "test", "[", "test_idx", ",", "1", ":", "]", "\n", "y_test", "=", "test", "[", "test_idx", ",", "0", "]", "\n", "oe", "=", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_hat", ")", "**", "2", "/", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_full", ")", "**", "2", "\n", "return", "re", ",", "oe", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Empirical_data.gaussian_projection": [[60, 72], ["numpy.random.randn", "numpy.random.choice", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm"], "function", ["None"], ["", "def", "gaussian_projection", "(", "r", ")", ":", "\n", "    ", "S", "=", "np", ".", "random", ".", "randn", "(", "r", ",", "n", ")", "\n", "x_tilde", "=", "S", "@", "X", "\n", "y_tilde", "=", "S", "@", "Y", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "\n", "test_idx", "=", "np", ".", "random", ".", "choice", "(", "m", "-", "n", ",", "n", ")", "\n", "x_test", "=", "test", "[", "test_idx", ",", "1", ":", "]", "\n", "y_test", "=", "test", "[", "test_idx", ",", "0", "]", "\n", "oe", "=", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_hat", ")", "**", "2", "/", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_full", ")", "**", "2", "\n", "return", "re", ",", "oe", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Empirical_data.uniform_sampling": [[77, 89], ["numpy.random.choice", "numpy.random.choice", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm"], "function", ["None"], ["", "def", "uniform_sampling", "(", "r", ")", ":", "\n", "    ", "idx_uniform", "=", "np", ".", "random", ".", "choice", "(", "n", ",", "r", ",", "replace", "=", "False", ")", "\n", "x_tilde", "=", "X", "[", "idx_uniform", ",", ":", "]", "\n", "y_tilde", "=", "Y", "[", "idx_uniform", "]", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "\n", "test_idx", "=", "np", ".", "random", ".", "choice", "(", "m", "-", "n", ",", "n", ")", "\n", "x_test", "=", "test", "[", "test_idx", ",", "1", ":", "]", "\n", "y_test", "=", "test", "[", "test_idx", ",", "0", "]", "\n", "oe", "=", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_hat", ")", "**", "2", "/", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_full", ")", "**", "2", "\n", "return", "re", ",", "oe", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Empirical_data.leverage_sampling": [[94, 109], ["numpy.random.binomial", "numpy.random.choice", "enumerate", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm"], "function", ["None"], ["", "def", "leverage_sampling", "(", "r", ")", ":", "\n", "    ", "leverage_probability", "=", "leverage_score", "/", "p", "*", "r", "\n", "leverage_probability", "[", "leverage_probability", ">", "1", "]", "=", "1", "\n", "idx", "=", "np", ".", "random", ".", "binomial", "(", "1", ",", "p", "=", "leverage_probability", ",", "size", "=", "n", ")", "\n", "idx_leverage", "=", "[", "i", "for", "i", ",", "j", "in", "enumerate", "(", "idx", ")", "if", "j", "==", "1", "]", "\n", "x_tilde", "=", "X", "[", "idx_leverage", ",", ":", "]", "\n", "y_tilde", "=", "Y", "[", "idx_leverage", "]", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "\n", "test_idx", "=", "np", ".", "random", ".", "choice", "(", "m", "-", "n", ",", "n", ")", "\n", "x_test", "=", "test", "[", "test_idx", ",", "1", ":", "]", "\n", "y_test", "=", "test", "[", "test_idx", ",", "0", "]", "\n", "oe", "=", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_hat", ")", "**", "2", "/", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_full", ")", "**", "2", "\n", "return", "re", ",", "oe", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Empirical_data.fast_leverage": [[112, 123], ["numpy.random.choice", "numpy.linalg.qr", "numpy.array", "numpy.array", "numpy.linalg.inv", "sum", "scipy.fftpack.dct", "numpy.linalg.norm", "range", "range"], "function", ["None"], ["", "def", "fast_leverage", "(", ")", ":", "\n", "    ", "r_1", "=", "150", "\n", "x_tilde", "=", "X", "\n", "x_tilde", "=", "np", ".", "array", "(", "[", "dct", "(", "x_tilde", "[", ":", ",", "i", "]", ")", "for", "i", "in", "range", "(", "p", ")", "]", ")", ".", "T", "\n", "idx_sample", "=", "np", ".", "random", ".", "choice", "(", "n", ",", "r_1", ",", "replace", "=", "False", ")", "\n", "x_tilde", "=", "x_tilde", "[", "idx_sample", ",", ":", "]", "\n", "rr", "=", "np", ".", "linalg", ".", "qr", "(", "x_tilde", ",", "mode", "=", "'r'", ")", "\n", "omega", "=", "X", "@", "np", ".", "linalg", ".", "inv", "(", "rr", ")", "\n", "leverage_score", "=", "np", ".", "array", "(", "[", "np", ".", "linalg", ".", "norm", "(", "omega", "[", "i", ",", ":", "]", ")", "**", "2", "for", "i", "in", "range", "(", "n", ")", "]", ")", "\n", "leverage_score", "=", "leverage_score", "/", "sum", "(", "leverage_score", ")", "*", "p", "\n", "return", "leverage_score", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.uniform_leverage_sampling.leverage_sampling": [[72, 89], ["numpy.random.binomial", "numpy.random.randn", "numpy.random.randn", "enumerate", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm"], "function", ["None"], ["def", "leverage_sampling", "(", "r", ")", ":", "\n", "    ", "leverage_probability", "=", "leverage_score", "/", "p", "*", "r", "\n", "leverage_probability", "[", "leverage_probability", ">", "1", "]", "=", "1", "\n", "idx", "=", "np", ".", "random", ".", "binomial", "(", "1", ",", "p", "=", "leverage_probability", ",", "size", "=", "n", ")", "\n", "idx_leverage", "=", "[", "i", "for", "i", ",", "j", "in", "enumerate", "(", "idx", ")", "if", "j", "==", "1", "]", "\n", "x_tilde", "=", "X", "[", "idx_leverage", ",", ":", "]", "\n", "y_tilde", "=", "Y", "[", "idx_leverage", "]", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "ve", "=", "np", ".", "linalg", ".", "norm", "(", "beta", "-", "beta_hat", ")", "**", "2", "/", "v_full", "\n", "pe", "=", "np", ".", "linalg", ".", "norm", "(", "X", "@", "beta", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "p_full", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "\n", "x_test", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "p", ")", "\n", "epsilon_test", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "1", ")", "\n", "y_test", "=", "x_test", "@", "beta", "+", "epsilon_test", "\n", "oe", "=", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_hat", ")", "**", "2", "/", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_full", ")", "**", "2", "\n", "return", "ve", ",", "pe", ",", "re", ",", "oe", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.computation time.generate_t": [[24, 28], ["numpy.random.multivariate_normal", "numpy.random.chisquare", "numpy.zeros", "numpy.sqrt"], "function", ["None"], ["def", "generate_t", "(", "n", ",", "p", ",", "df", ",", "Sigma", ")", ":", "\n", "    ", "X", "=", "np", ".", "random", ".", "multivariate_normal", "(", "np", ".", "zeros", "(", "p", ")", ",", "Sigma", ",", "n", ")", "\n", "u", "=", "np", ".", "random", ".", "chisquare", "(", "df", ",", "1", ")", "\n", "return", "X", "/", "u", "*", "np", ".", "sqrt", "(", "df", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.computation time.linearregression_time": [[32, 37], ["time.time", "time.time", "numpy.linalg.inv"], "function", ["None"], ["", "def", "linearregression_time", "(", "X", ",", "Y", ")", ":", "\n", "    ", "start", "=", "time", ".", "time", "(", ")", "\n", "beta", "=", "np", ".", "linalg", ".", "inv", "(", "X", ".", "T", "@", "X", ")", "@", "X", ".", "T", "@", "Y", "\n", "end", "=", "time", ".", "time", "(", ")", "\n", "return", "end", "-", "start", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.computation time.hadamard_projection": [[42, 76], ["time.time", "time.time", "numpy.random.shuffle", "time.time", "time.time", "time.time", "time.time", "numpy.random.choice", "time.time", "time.time", "time.time", "time.time", "beta_hat.reshape.reshape", "numpy.array", "numpy.sqrt", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "int", "scipy.fftpack.dct", "int", "range"], "function", ["None"], ["", "def", "hadamard_projection", "(", "r", ")", ":", "\n", "    ", "start_total", "=", "time", ".", "time", "(", ")", "\n", "data_tilde", "=", "data", "\n", "start", "=", "time", ".", "time", "(", ")", "\n", "data_tilde", "[", ":", "int", "(", "n", "/", "2", ")", ",", ":", "]", "=", "-", "data_tilde", "[", ":", "int", "(", "n", "/", "2", ")", ",", ":", "]", "\n", "np", ".", "random", ".", "shuffle", "(", "data_tilde", ")", "\n", "end", "=", "time", ".", "time", "(", ")", "\n", "sign_permutation_time", "=", "end", "-", "start", "\n", "\n", "start", "=", "time", ".", "time", "(", ")", "\n", "data_tilde", "=", "np", ".", "array", "(", "[", "dct", "(", "data_tilde", "[", ":", ",", "i", "]", ")", "for", "i", "in", "range", "(", "p", "+", "1", ")", "]", ")", ".", "T", "\n", "data_tilde", "[", "0", ",", ":", "]", "=", "data_tilde", "[", "0", ",", ":", "]", "/", "np", ".", "sqrt", "(", "2", ")", "\n", "end", "=", "time", ".", "time", "(", ")", "\n", "dct_time", "=", "end", "-", "start", "\n", "\n", "start", "=", "time", ".", "time", "(", ")", "\n", "idx_sample", "=", "np", ".", "random", ".", "choice", "(", "n", ",", "r", ",", "replace", "=", "False", ")", "\n", "x_tilde", "=", "data_tilde", "[", "idx_sample", ",", ":", "p", "]", "\n", "y_tilde", "=", "data_tilde", "[", "idx_sample", ",", "p", "]", "\n", "end", "=", "time", ".", "time", "(", ")", "\n", "sample_time", "=", "end", "-", "start", "\n", "\n", "start", "=", "time", ".", "time", "(", ")", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "end", "=", "time", ".", "time", "(", ")", "\n", "lr_time", "=", "end", "-", "start", "\n", "\n", "end_total", "=", "time", ".", "time", "(", ")", "\n", "\n", "beta_hat", "=", "beta_hat", ".", "reshape", "(", "(", "p", ",", "1", ")", ")", "\n", "ve", "=", "np", ".", "linalg", ".", "norm", "(", "beta", "-", "beta_hat", ")", "**", "2", "/", "v_full", "\n", "pe", "=", "np", ".", "linalg", ".", "norm", "(", "X", "@", "beta", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "p_full", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "return", "ve", ",", "pe", ",", "re", ",", "sign_permutation_time", ",", "dct_time", ",", "sample_time", ",", "lr_time", ",", "end_total", "-", "start_total", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.computation time.sparse_projection": [[81, 93], ["time.time", "scipy.sparse.csr_matrix", "time.time", "beta_hat.reshape.reshape", "numpy.random.choice().reshape", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.random.choice"], "function", ["None"], ["", "def", "sparse_projection", "(", "r", ",", "s", "=", "0.1", ")", ":", "\n", "    ", "start", "=", "time", ".", "time", "(", ")", "\n", "S", "=", "csr_matrix", "(", "np", ".", "random", ".", "choice", "(", "[", "-", "1", ",", "0", ",", "1", "]", ",", "p", "=", "[", "s", "/", "2", ",", "1", "-", "s", ",", "s", "/", "2", "]", ",", "size", "=", "r", "*", "n", ")", ".", "reshape", "(", "(", "r", ",", "n", ")", ")", ")", "\n", "x_tilde", "=", "S", "@", "X", "\n", "y_tilde", "=", "S", "@", "Y", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "end", "=", "time", ".", "time", "(", ")", "\n", "beta_hat", "=", "beta_hat", ".", "reshape", "(", "(", "p", ",", "1", ")", ")", "\n", "ve", "=", "np", ".", "linalg", ".", "norm", "(", "beta", "-", "beta_hat", ")", "**", "2", "/", "v_full", "\n", "pe", "=", "np", ".", "linalg", ".", "norm", "(", "X", "@", "beta", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "p_full", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "return", "ve", ",", "pe", ",", "re", ",", "end", "-", "start", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.computation time.gaussian_projection": [[98, 109], ["time.time", "numpy.random.randn", "time.time", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm"], "function", ["None"], ["", "def", "gaussian_projection", "(", "r", ")", ":", "\n", "    ", "start", "=", "time", ".", "time", "(", ")", "\n", "S", "=", "np", ".", "random", ".", "randn", "(", "r", ",", "n", ")", "\n", "x_tilde", "=", "S", "@", "X", "\n", "y_tilde", "=", "S", "@", "Y", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "end", "=", "time", ".", "time", "(", ")", "\n", "ve", "=", "np", ".", "linalg", ".", "norm", "(", "beta", "-", "beta_hat", ")", "**", "2", "/", "v_full", "\n", "pe", "=", "np", ".", "linalg", ".", "norm", "(", "X", "@", "beta", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "p_full", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "return", "ve", ",", "pe", ",", "re", ",", "end", "-", "start", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.computation time.uniform_sampling": [[114, 125], ["time.time", "numpy.random.choice", "time.time", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm"], "function", ["None"], ["", "def", "uniform_sampling", "(", "r", ")", ":", "\n", "    ", "start", "=", "time", ".", "time", "(", ")", "\n", "idx_uniform", "=", "np", ".", "random", ".", "choice", "(", "n", ",", "r", ",", "replace", "=", "False", ")", "\n", "x_tilde", "=", "X", "[", "idx_uniform", ",", ":", "]", "\n", "y_tilde", "=", "Y", "[", "idx_uniform", "]", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "end", "=", "time", ".", "time", "(", ")", "\n", "ve", "=", "np", ".", "linalg", ".", "norm", "(", "beta", "-", "beta_hat", ")", "**", "2", "/", "v_full", "\n", "pe", "=", "np", ".", "linalg", ".", "norm", "(", "X", "@", "beta", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "p_full", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "return", "ve", ",", "pe", ",", "re", ",", "end", "-", "start", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.computation time.fast_leverage": [[132, 142], ["min", "copy.copy", "numpy.random.shuffle", "numpy.random.choice", "numpy.linalg.qr", "numpy.array", "numpy.array", "numpy.linalg.inv", "scipy.fftpack.dct", "numpy.linalg.norm", "range", "range"], "function", ["None"], ["", "def", "fast_leverage", "(", "r_1", ")", ":", "\n", "    ", "r_1", "=", "min", "(", "r_1", ",", "p", "+", "10", ")", "\n", "x_tilde", "=", "copy", ".", "copy", "(", "X", ")", "\n", "np", ".", "random", ".", "shuffle", "(", "x_tilde", ")", "\n", "x_tilde", "=", "np", ".", "array", "(", "[", "dct", "(", "x_tilde", "[", ":", ",", "i", "]", ")", "for", "i", "in", "range", "(", "p", ")", "]", ")", ".", "T", "\n", "idx_sample", "=", "np", ".", "random", ".", "choice", "(", "n", ",", "r_1", ",", "replace", "=", "False", ")", "\n", "x_tilde", "=", "x_tilde", "[", "idx_sample", ",", ":", "]", "\n", "rr", "=", "np", ".", "linalg", ".", "qr", "(", "x_tilde", ",", "mode", "=", "'r'", ")", "\n", "omega", "=", "X", "@", "np", ".", "linalg", ".", "inv", "(", "rr", ")", "\n", "return", "np", ".", "array", "(", "[", "np", ".", "linalg", ".", "norm", "(", "omega", "[", "i", ",", ":", "]", ")", "**", "2", "for", "i", "in", "range", "(", "n", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.computation time.leverage_sampling": [[148, 160], ["time.time", "computation time.fast_leverage", "numpy.random.choice", "time.time", "int", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.log", "sum"], "function", ["home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.fast_leverage"], ["", "def", "leverage_sampling", "(", "r", ")", ":", "\n", "    ", "start", "=", "time", ".", "time", "(", ")", "\n", "leverage_estimate", "=", "fast_leverage", "(", "int", "(", "np", ".", "log", "(", "n", ")", "*", "p", ")", ")", "\n", "idx_leverage", "=", "np", ".", "random", ".", "choice", "(", "n", ",", "r", ",", "p", "=", "leverage_estimate", "/", "sum", "(", "leverage_estimate", ")", ",", "replace", "=", "False", ")", "\n", "x_tilde", "=", "X", "[", "idx_leverage", ",", ":", "]", "\n", "y_tilde", "=", "Y", "[", "idx_leverage", "]", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "end", "=", "time", ".", "time", "(", ")", "\n", "ve", "=", "np", ".", "linalg", ".", "norm", "(", "beta", "-", "beta_hat", ")", "**", "2", "/", "v_full", "\n", "pe", "=", "np", ".", "linalg", ".", "norm", "(", "X", "@", "beta", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "p_full", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "return", "ve", ",", "pe", ",", "re", ",", "end", "-", "start", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.computation time.deterministic_leverage": [[166, 178], ["time.time", "computation time.fast_leverage", "time.time", "int", "numpy.argsort", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.log"], "function", ["home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.fast_leverage"], ["", "def", "deterministic_leverage", "(", "r", ")", ":", "\n", "    ", "start", "=", "time", ".", "time", "(", ")", "\n", "leverage_estimate", "=", "fast_leverage", "(", "int", "(", "np", ".", "log", "(", "n", ")", "*", "p", ")", ")", "\n", "idx_deter_leverage", "=", "np", ".", "argsort", "(", "leverage_estimate", ")", "[", "(", "n", "-", "r", ")", ":", "n", "]", "\n", "x_tilde", "=", "X", "[", "idx_deter_leverage", ",", ":", "]", "\n", "y_tilde", "=", "Y", "[", "idx_deter_leverage", "]", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "end", "=", "time", ".", "time", "(", ")", "\n", "ve", "=", "np", ".", "linalg", ".", "norm", "(", "beta", "-", "beta_hat", ")", "**", "2", "/", "v_full", "\n", "pe", "=", "np", ".", "linalg", ".", "norm", "(", "X", "@", "beta", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "p_full", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "return", "ve", ",", "pe", ",", "re", ",", "end", "-", "start", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.computation time.main_function": [[182, 208], ["numpy.zeros", "computation time.hadamard_projection", "computation time.sparse_projection", "computation time.uniform_sampling", "computation time.leverage_sampling", "computation time.deterministic_leverage", "computation time.gaussian_projection", "len", "len", "len", "len", "len", "len"], "function", ["home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.hadamard_projection", "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.sparse_projection", "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.uniform_sampling", "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.leverage_sampling", "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.computation time.deterministic_leverage", "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.gaussian_projection"], ["", "def", "main_function", "(", "t", ",", "r", ")", ":", "\n", "    ", "ans", "=", "np", ".", "zeros", "(", "4", ")", "\n", "if", "t", "==", "0", ":", "\n", "        ", "a", "=", "hadamard_projection", "(", "r", ")", "\n", "ans", "[", ":", "len", "(", "a", ")", "]", "=", "a", "\n", "return", "ans", "\n", "", "if", "t", "==", "1", ":", "\n", "        ", "a", "=", "sparse_projection", "(", "r", ")", "\n", "ans", "[", ":", "len", "(", "a", ")", "]", "=", "a", "\n", "return", "ans", "\n", "", "if", "t", "==", "2", ":", "\n", "        ", "a", "=", "uniform_sampling", "(", "r", ")", "\n", "ans", "[", ":", "len", "(", "a", ")", "]", "=", "a", "\n", "return", "ans", "\n", "", "if", "t", "==", "3", ":", "\n", "        ", "a", "=", "leverage_sampling", "(", "r", ")", "\n", "ans", "[", ":", "len", "(", "a", ")", "]", "=", "a", "\n", "return", "ans", "\n", "", "if", "t", "==", "4", ":", "\n", "        ", "a", "=", "deterministic_leverage", "(", "r", ")", "\n", "ans", "[", ":", "len", "(", "a", ")", "]", "=", "a", "\n", "return", "ans", "\n", "", "if", "t", "==", "5", ":", "\n", "        ", "a", "=", "gaussian_projection", "(", "r", ")", "\n", "ans", "[", ":", "len", "(", "a", ")", "]", "=", "a", "\n", "return", "ans", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.computation time.time_efficiency": [[338, 340], ["numpy.log"], "function", ["None"], ["def", "time_efficiency", "(", "n", ",", "p", ",", "r", ")", ":", "\n", "    ", "return", "(", "500", "*", "n", "*", "np", ".", "log", "(", "n", ")", "+", "r", "*", "p", ")", "/", "(", "n", "*", "p", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.computation time.out_efficiency": [[342, 344], ["None"], "function", ["None"], ["", "def", "out_efficiency", "(", "n", ",", "p", ",", "r", ")", ":", "\n", "    ", "return", "r", "*", "(", "n", "-", "p", ")", "/", "n", "/", "(", "r", "-", "p", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.gaussian_projection": [[21, 37], ["numpy.random.randn", "numpy.random.randn", "numpy.random.randn", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm"], "function", ["None"], ["def", "gaussian_projection", "(", "data", ",", "r", ")", ":", "\n", "    ", "n", ",", "p", ",", "beta", ",", "X", ",", "Y", ",", "v_full", ",", "p_full", ",", "r_full", ",", "beta_full", "=", "[", "data", ".", "n", ",", "data", ".", "p", ",", "data", ".", "beta", ",", "data", ".", "X", ",", "data", ".", "Y", ",", "data", ".", "v_full", ",", "\n", "data", ".", "p_full", ",", "data", ".", "r_full", ",", "data", ".", "beta_full", "]", "\n", "S", "=", "np", ".", "random", ".", "randn", "(", "r", ",", "n", ")", "\n", "x_tilde", "=", "S", "@", "X", "\n", "y_tilde", "=", "S", "@", "Y", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "ve", "=", "np", ".", "linalg", ".", "norm", "(", "beta", "-", "beta_hat", ")", "**", "2", "/", "v_full", "\n", "pe", "=", "np", ".", "linalg", ".", "norm", "(", "X", "@", "beta", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "p_full", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "\n", "x_test", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "p", ")", "\n", "epsilon_test", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "1", ")", "\n", "y_test", "=", "x_test", "@", "beta", "+", "epsilon_test", "\n", "oe", "=", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_hat", ")", "**", "2", "/", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_full", ")", "**", "2", "\n", "return", "ve", ",", "pe", ",", "re", ",", "oe", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.sparse_projection": [[42, 59], ["scipy.sparse.csr_matrix", "beta_hat.reshape.reshape", "numpy.random.randn", "numpy.random.randn", "numpy.random.choice().reshape", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.random.choice"], "function", ["None"], ["", "def", "sparse_projection", "(", "data", ",", "r", ",", "s", "=", "0.1", ")", ":", "\n", "    ", "n", ",", "p", ",", "beta", ",", "X", ",", "Y", ",", "v_full", ",", "p_full", ",", "r_full", ",", "beta_full", "=", "[", "data", ".", "n", ",", "data", ".", "p", ",", "data", ".", "beta", ",", "data", ".", "X", ",", "data", ".", "Y", ",", "data", ".", "v_full", ",", "\n", "data", ".", "p_full", ",", "data", ".", "r_full", ",", "data", ".", "beta_full", "]", "\n", "S", "=", "csr_matrix", "(", "np", ".", "random", ".", "choice", "(", "[", "-", "1", ",", "0", ",", "1", "]", ",", "p", "=", "[", "s", "/", "2", ",", "1", "-", "s", ",", "s", "/", "2", "]", ",", "size", "=", "r", "*", "n", ")", ".", "reshape", "(", "(", "r", ",", "n", ")", ")", ")", "\n", "x_tilde", "=", "S", "@", "X", "\n", "y_tilde", "=", "S", "@", "Y", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "beta_hat", "=", "beta_hat", ".", "reshape", "(", "(", "p", ",", "1", ")", ")", "\n", "ve", "=", "np", ".", "linalg", ".", "norm", "(", "beta", "-", "beta_hat", ")", "**", "2", "/", "v_full", "\n", "pe", "=", "np", ".", "linalg", ".", "norm", "(", "X", "@", "beta", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "p_full", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "\n", "x_test", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "p", ")", "\n", "epsilon_test", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "1", ")", "\n", "y_test", "=", "x_test", "@", "beta", "+", "epsilon_test", "\n", "oe", "=", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_hat", ")", "**", "2", "/", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_full", ")", "**", "2", "\n", "return", "ve", ",", "pe", ",", "re", ",", "oe", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.generate_haar_matrix": [[63, 68], ["numpy.linalg.qr", "numpy.linalg.qr", "numpy.random.randn", "numpy.random.randn"], "function", ["None"], ["", "def", "generate_haar_matrix", "(", "n", ",", "p", ")", ":", "\n", "    ", "if", "n", "<=", "p", ":", "\n", "        ", "return", "np", ".", "linalg", ".", "qr", "(", "np", ".", "random", ".", "randn", "(", "p", ",", "n", ")", ")", "[", "0", "]", ".", "T", "\n", "", "else", ":", "\n", "        ", "return", "np", ".", "linalg", ".", "qr", "(", "np", ".", "random", ".", "randn", "(", "n", ",", "p", ")", ")", "[", "0", "]", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.haar_projection": [[73, 89], ["Sketching_methods.generate_haar_matrix", "numpy.random.randn", "numpy.random.randn", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm"], "function", ["home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.generate_haar_matrix"], ["", "", "def", "haar_projection", "(", "data", ",", "r", ")", ":", "\n", "    ", "n", ",", "p", ",", "beta", ",", "X", ",", "Y", ",", "v_full", ",", "p_full", ",", "r_full", ",", "beta_full", "=", "[", "data", ".", "n", ",", "data", ".", "p", ",", "data", ".", "beta", ",", "data", ".", "X", ",", "data", ".", "Y", ",", "data", ".", "v_full", ",", "\n", "data", ".", "p_full", ",", "data", ".", "r_full", ",", "data", ".", "beta_full", "]", "\n", "S", "=", "generate_haar_matrix", "(", "r", ",", "n", ")", "\n", "x_tilde", "=", "S", "@", "X", "\n", "y_tilde", "=", "S", "@", "Y", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "ve", "=", "np", ".", "linalg", ".", "norm", "(", "beta", "-", "beta_hat", ")", "**", "2", "/", "v_full", "\n", "pe", "=", "np", ".", "linalg", ".", "norm", "(", "X", "@", "beta", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "p_full", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "\n", "x_test", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "p", ")", "\n", "epsilon_test", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "1", ")", "\n", "y_test", "=", "x_test", "@", "beta", "+", "epsilon_test", "\n", "oe", "=", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_hat", ")", "**", "2", "/", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_full", ")", "**", "2", "\n", "return", "ve", ",", "pe", ",", "re", ",", "oe", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.hadamard_projection": [[94, 116], ["numpy.concatenate", "numpy.random.shuffle", "numpy.random.choice", "beta_hat.reshape.reshape", "numpy.random.randn", "numpy.random.randn", "numpy.array", "numpy.sqrt", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "int", "scipy.fftpack.dct", "int", "range"], "function", ["None"], ["", "def", "hadamard_projection", "(", "data", ",", "r", ")", ":", "\n", "    ", "n", ",", "p", ",", "beta", ",", "X", ",", "Y", ",", "v_full", ",", "p_full", ",", "r_full", ",", "beta_full", "=", "[", "data", ".", "n", ",", "data", ".", "p", ",", "data", ".", "beta", ",", "data", ".", "X", ",", "data", ".", "Y", ",", "data", ".", "v_full", ",", "\n", "data", ".", "p_full", ",", "data", ".", "r_full", ",", "data", ".", "beta_full", "]", "\n", "data_tilde", "=", "np", ".", "concatenate", "(", "[", "X", ",", "Y", "]", ",", "axis", "=", "1", ")", "\n", "data_tilde", "[", ":", "int", "(", "n", "/", "2", ")", ",", ":", "]", "=", "-", "data_tilde", "[", ":", "int", "(", "n", "/", "2", ")", ",", ":", "]", "\n", "np", ".", "random", ".", "shuffle", "(", "data_tilde", ")", "\n", "data_tilde", "=", "np", ".", "array", "(", "[", "dct", "(", "data_tilde", "[", ":", ",", "i", "]", ")", "for", "i", "in", "range", "(", "p", "+", "1", ")", "]", ")", ".", "T", "\n", "data_tilde", "[", "0", ",", ":", "]", "=", "data_tilde", "[", "0", ",", ":", "]", "/", "np", ".", "sqrt", "(", "2", ")", "\n", "idx_sample", "=", "np", ".", "random", ".", "choice", "(", "n", ",", "r", ",", "replace", "=", "False", ")", "\n", "x_tilde", "=", "data_tilde", "[", "idx_sample", ",", ":", "p", "]", "\n", "y_tilde", "=", "data_tilde", "[", "idx_sample", ",", "p", "]", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "beta_hat", "=", "beta_hat", ".", "reshape", "(", "(", "p", ",", "1", ")", ")", "\n", "ve", "=", "np", ".", "linalg", ".", "norm", "(", "beta", "-", "beta_hat", ")", "**", "2", "/", "v_full", "\n", "pe", "=", "np", ".", "linalg", ".", "norm", "(", "X", "@", "beta", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "p_full", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "\n", "x_test", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "p", ")", "\n", "epsilon_test", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "1", ")", "\n", "y_test", "=", "x_test", "@", "beta", "+", "epsilon_test", "\n", "oe", "=", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_hat", ")", "**", "2", "/", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_full", ")", "**", "2", "\n", "return", "ve", ",", "pe", ",", "re", ",", "oe", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.uniform_sampling": [[121, 137], ["numpy.random.choice", "numpy.random.randn", "numpy.random.randn", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm"], "function", ["None"], ["", "def", "uniform_sampling", "(", "data", ",", "r", ")", ":", "\n", "    ", "n", ",", "p", ",", "beta", ",", "X", ",", "Y", ",", "v_full", ",", "p_full", ",", "r_full", ",", "beta_full", "=", "[", "data", ".", "n", ",", "data", ".", "p", ",", "data", ".", "beta", ",", "data", ".", "X", ",", "data", ".", "Y", ",", "data", ".", "v_full", ",", "\n", "data", ".", "p_full", ",", "data", ".", "r_full", ",", "data", ".", "beta_full", "]", "\n", "idx_uniform", "=", "np", ".", "random", ".", "choice", "(", "n", ",", "r", ",", "replace", "=", "False", ")", "\n", "x_tilde", "=", "X", "[", "idx_uniform", ",", ":", "]", "\n", "y_tilde", "=", "Y", "[", "idx_uniform", "]", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "ve", "=", "np", ".", "linalg", ".", "norm", "(", "beta", "-", "beta_hat", ")", "**", "2", "/", "v_full", "\n", "pe", "=", "np", ".", "linalg", ".", "norm", "(", "X", "@", "beta", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "p_full", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "\n", "x_test", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "p", ")", "\n", "epsilon_test", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "1", ")", "\n", "y_test", "=", "x_test", "@", "beta", "+", "epsilon_test", "\n", "oe", "=", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_hat", ")", "**", "2", "/", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_full", ")", "**", "2", "\n", "return", "ve", ",", "pe", ",", "re", ",", "oe", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.fast_leverage": [[144, 155], ["min", "numpy.random.shuffle", "numpy.random.choice", "numpy.linalg.qr", "numpy.array", "numpy.array", "numpy.linalg.inv", "scipy.fftpack.dct", "numpy.linalg.norm", "range", "range"], "function", ["None"], ["", "def", "fast_leverage", "(", "data", ",", "r_1", ")", ":", "\n", "    ", "n", ",", "p", ",", "X", "=", "[", "data", ".", "n", ",", "data", ".", "p", ",", "data", ".", "X", "]", "\n", "r_1", "=", "min", "(", "r_1", ",", "p", "+", "10", ")", "\n", "x_tilde", "=", "X", "\n", "np", ".", "random", ".", "shuffle", "(", "x_tilde", ")", "\n", "x_tilde", "=", "np", ".", "array", "(", "[", "dct", "(", "x_tilde", "[", ":", ",", "i", "]", ")", "for", "i", "in", "range", "(", "p", ")", "]", ")", ".", "T", "\n", "idx_sample", "=", "np", ".", "random", ".", "choice", "(", "n", ",", "r_1", ",", "replace", "=", "False", ")", "\n", "x_tilde", "=", "x_tilde", "[", "idx_sample", ",", ":", "]", "\n", "rr", "=", "np", ".", "linalg", ".", "qr", "(", "x_tilde", ",", "mode", "=", "'r'", ")", "\n", "omega", "=", "X", "@", "np", ".", "linalg", ".", "inv", "(", "rr", ")", "\n", "return", "np", ".", "array", "(", "[", "np", ".", "linalg", ".", "norm", "(", "omega", "[", "i", ",", ":", "]", ")", "**", "2", "for", "i", "in", "range", "(", "n", ")", "]", ")", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.leverage_sampling": [[160, 177], ["Sketching_methods.fast_leverage", "numpy.random.choice", "numpy.random.randn", "numpy.random.randn", "int", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.log", "sum"], "function", ["home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.fast_leverage"], ["", "def", "leverage_sampling", "(", "data", ",", "r", ")", ":", "\n", "    ", "n", ",", "p", ",", "beta", ",", "X", ",", "Y", ",", "v_full", ",", "p_full", ",", "r_full", ",", "beta_full", "=", "[", "data", ".", "n", ",", "data", ".", "p", ",", "data", ".", "beta", ",", "data", ".", "X", ",", "data", ".", "Y", ",", "data", ".", "v_full", ",", "\n", "data", ".", "p_full", ",", "data", ".", "r_full", ",", "data", ".", "beta_full", "]", "\n", "leverage_estimate", "=", "fast_leverage", "(", "data", ",", "int", "(", "np", ".", "log", "(", "n", ")", "*", "p", ")", ")", "\n", "idx_leverage", "=", "np", ".", "random", ".", "choice", "(", "n", ",", "r", ",", "p", "=", "leverage_estimate", "/", "sum", "(", "leverage_estimate", ")", ",", "replace", "=", "False", ")", "\n", "x_tilde", "=", "X", "[", "idx_leverage", ",", ":", "]", "\n", "y_tilde", "=", "Y", "[", "idx_leverage", "]", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "ve", "=", "np", ".", "linalg", ".", "norm", "(", "beta", "-", "beta_hat", ")", "**", "2", "/", "v_full", "\n", "pe", "=", "np", ".", "linalg", ".", "norm", "(", "X", "@", "beta", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "p_full", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "\n", "x_test", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "p", ")", "\n", "epsilon_test", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "1", ")", "\n", "y_test", "=", "x_test", "@", "beta", "+", "epsilon_test", "\n", "oe", "=", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_hat", ")", "**", "2", "/", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_full", ")", "**", "2", "\n", "return", "ve", ",", "pe", ",", "re", ",", "oe", "\n", "\n"]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.largest_leverage": [[182, 199], ["Sketching_methods.fast_leverage", "numpy.random.randn", "numpy.random.randn", "int", "numpy.argsort", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.log"], "function", ["home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Sketching_methods.fast_leverage"], ["", "def", "largest_leverage", "(", "data", ",", "r", ")", ":", "\n", "    ", "n", ",", "p", ",", "beta", ",", "X", ",", "Y", ",", "v_full", ",", "p_full", ",", "r_full", ",", "beta_full", "=", "[", "data", ".", "n", ",", "data", ".", "p", ",", "data", ".", "beta", ",", "data", ".", "X", ",", "data", ".", "Y", ",", "data", ".", "v_full", ",", "\n", "data", ".", "p_full", ",", "data", ".", "r_full", ",", "data", ".", "beta_full", "]", "\n", "leverage_estimate", "=", "fast_leverage", "(", "data", ",", "int", "(", "np", ".", "log", "(", "n", ")", "*", "p", ")", ")", "\n", "idx_deter_leverage", "=", "np", ".", "argsort", "(", "leverage_estimate", ")", "[", "(", "n", "-", "r", ")", ":", "n", "]", "\n", "x_tilde", "=", "X", "[", "idx_deter_leverage", ",", ":", "]", "\n", "y_tilde", "=", "Y", "[", "idx_deter_leverage", "]", "\n", "beta_hat", "=", "np", ".", "linalg", ".", "inv", "(", "x_tilde", ".", "T", "@", "x_tilde", ")", "@", "x_tilde", ".", "T", "@", "y_tilde", "\n", "ve", "=", "np", ".", "linalg", ".", "norm", "(", "beta", "-", "beta_hat", ")", "**", "2", "/", "v_full", "\n", "pe", "=", "np", ".", "linalg", ".", "norm", "(", "X", "@", "beta", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "p_full", "\n", "re", "=", "np", ".", "linalg", ".", "norm", "(", "Y", "-", "X", "@", "beta_hat", ")", "**", "2", "/", "r_full", "\n", "\n", "x_test", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "p", ")", "\n", "epsilon_test", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "1", ")", "\n", "y_test", "=", "x_test", "@", "beta", "+", "epsilon_test", "\n", "oe", "=", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_hat", ")", "**", "2", "/", "np", ".", "linalg", ".", "norm", "(", "y_test", "-", "x_test", "@", "beta_full", ")", "**", "2", "\n", "return", "ve", ",", "pe", ",", "re", ",", "oe", "\n", "", ""]], "home.repos.pwc.inspect_result.liusf15_Sketching-lr.Experiments.Data.DATA.__init__": [[25, 86], ["numpy.random.randn", "numpy.random.rand", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.random.randn", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.random.randn", "numpy.random.choice", "numpy.array", "numpy.linalg.inv", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.random.chisquare().reshape", "numpy.divide", "numpy.linalg.inv", "scipy.linalg.toeplitz", "numpy.random.multivariate_normal", "numpy.linalg.norm", "numpy.linalg.norm", "numpy.linalg.norm", "pandas.read_table().as_matrix", "numpy.random.choice", "msd[].reshape", "range", "numpy.random.chisquare", "numpy.zeros", "numpy.sqrt", "numpy.linalg.inv", "numpy.linalg.norm", "pandas.read_csv().as_matrix", "numpy.random.choice", "flt[].reshape", "numpy.linspace", "pandas.read_table", "numpy.linalg.inv", "numpy.linalg.norm", "pandas.read_csv", "numpy.linalg.inv"], "methods", ["None"], ["def", "__init__", "(", "self", ",", "type", ",", "n", ",", "X", "=", "None", ",", "beta", "=", "None", ",", "p", "=", "50", ",", "df", "=", "1", ")", ":", "\n", "        ", "self", ".", "n", "=", "n", "\n", "self", ".", "p", "=", "p", "\n", "self", ".", "gamma", "=", "p", "/", "n", "\n", "if", "beta", "is", "not", "None", ":", "\n", "            ", "self", ".", "beta", "=", "np", ".", "random", ".", "rand", "(", "p", ",", "1", ")", "\n", "", "self", ".", "epsilon", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "1", ")", "\n", "if", "X", "is", "not", "None", ":", "\n", "            ", "self", ".", "X", "=", "X", "\n", "self", ".", "Y", "=", "self", ".", "X", "@", "self", ".", "beta", "+", "self", ".", "epsilon", "\n", "self", ".", "beta_full", "=", "np", ".", "linalg", ".", "inv", "(", "self", ".", "X", ".", "T", "@", "self", ".", "X", ")", "@", "self", ".", "X", ".", "T", "@", "self", ".", "Y", "\n", "self", ".", "v_full", "=", "np", ".", "linalg", ".", "norm", "(", "self", ".", "beta", "-", "self", ".", "beta_full", ")", "**", "2", "\n", "self", ".", "p_full", "=", "np", ".", "linalg", ".", "norm", "(", "self", ".", "X", "@", "self", ".", "beta", "-", "self", ".", "X", "@", "self", ".", "beta_full", ")", "**", "2", "\n", "self", ".", "r_full", "=", "np", ".", "linalg", ".", "norm", "(", "self", ".", "Y", "-", "self", ".", "X", "@", "self", ".", "beta_full", ")", "**", "2", "\n", "", "elif", "type", "==", "'Gaussian'", ":", "\n", "            ", "self", ".", "X", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "p", ")", "\n", "self", ".", "Y", "=", "self", ".", "X", "@", "self", ".", "beta", "+", "self", ".", "epsilon", "\n", "self", ".", "beta_full", "=", "np", ".", "linalg", ".", "inv", "(", "self", ".", "X", ".", "T", "@", "self", ".", "X", ")", "@", "self", ".", "X", ".", "T", "@", "self", ".", "Y", "\n", "self", ".", "v_full", "=", "np", ".", "linalg", ".", "norm", "(", "self", ".", "beta", "-", "self", ".", "beta_full", ")", "**", "2", "\n", "self", ".", "p_full", "=", "np", ".", "linalg", ".", "norm", "(", "self", ".", "X", "@", "self", ".", "beta", "-", "self", ".", "X", "@", "self", ".", "beta_full", ")", "**", "2", "\n", "self", ".", "r_full", "=", "np", ".", "linalg", ".", "norm", "(", "self", ".", "Y", "-", "self", ".", "X", "@", "self", ".", "beta_full", ")", "**", "2", "\n", "", "elif", "type", "==", "'elliptical'", ":", "\n", "            ", "self", ".", "X", "=", "np", ".", "random", ".", "randn", "(", "n", ",", "p", ")", "\n", "d1", "=", "1", "\n", "d2", "=", "3", "\n", "W", "=", "np", ".", "random", ".", "choice", "(", "[", "-", "d2", ",", "-", "d1", ",", "d1", ",", "d2", "]", ",", "size", "=", "n", ")", "\n", "self", ".", "X", "=", "np", ".", "array", "(", "[", "self", ".", "X", "[", "i", ",", ":", "]", "*", "W", "[", "i", "]", "for", "i", "in", "range", "(", "n", ")", "]", ")", "\n", "self", ".", "Y", "=", "self", ".", "X", "@", "self", ".", "beta", "+", "self", ".", "epsilon", "\n", "self", ".", "beta_full", "=", "np", ".", "linalg", ".", "inv", "(", "self", ".", "X", ".", "T", "@", "self", ".", "X", ")", "@", "self", ".", "X", ".", "T", "@", "self", ".", "Y", "\n", "self", ".", "v_full", "=", "np", ".", "linalg", ".", "norm", "(", "self", ".", "beta", "-", "self", ".", "beta_full", ")", "**", "2", "\n", "self", ".", "p_full", "=", "np", ".", "linalg", ".", "norm", "(", "self", ".", "X", "@", "self", ".", "beta", "-", "self", ".", "X", "@", "self", ".", "beta_full", ")", "**", "2", "\n", "self", ".", "r_full", "=", "np", ".", "linalg", ".", "norm", "(", "self", ".", "Y", "-", "self", ".", "X", "@", "self", ".", "beta_full", ")", "**", "2", "\n", "", "elif", "type", "==", "'t'", ":", "\n", "            ", "sigma", "=", "4", "*", "scipy", ".", "linalg", ".", "toeplitz", "(", "0.5", "**", "np", ".", "linspace", "(", "1", ",", "p", ",", "p", ")", ")", "\n", "u", "=", "np", ".", "random", ".", "chisquare", "(", "df", ",", "n", ")", ".", "reshape", "(", "n", ",", "1", ")", "\n", "self", ".", "X", "=", "np", ".", "divide", "(", "np", ".", "random", ".", "multivariate_normal", "(", "np", ".", "zeros", "(", "p", ")", ",", "sigma", ",", "n", ")", ",", "u", "/", "np", ".", "sqrt", "(", "df", ")", ")", "\n", "self", ".", "Y", "=", "self", ".", "X", "@", "self", ".", "beta", "+", "self", ".", "epsilon", "\n", "self", ".", "beta_full", "=", "np", ".", "linalg", ".", "inv", "(", "self", ".", "X", ".", "T", "@", "self", ".", "X", ")", "@", "self", ".", "X", ".", "T", "@", "self", ".", "Y", "\n", "self", ".", "v_full", "=", "np", ".", "linalg", ".", "norm", "(", "self", ".", "beta", "-", "self", ".", "beta_full", ")", "**", "2", "\n", "self", ".", "p_full", "=", "np", ".", "linalg", ".", "norm", "(", "self", ".", "X", "@", "self", ".", "beta", "-", "self", ".", "X", "@", "self", ".", "beta_full", ")", "**", "2", "\n", "self", ".", "r_full", "=", "np", ".", "linalg", ".", "norm", "(", "self", ".", "Y", "-", "self", ".", "X", "@", "self", ".", "beta_full", ")", "**", "2", "\n", "", "elif", "type", "==", "'MSD'", ":", "\n", "            ", "msd", "=", "pd", ".", "read_table", "(", "\"/Users/sifanliu/Dropbox/Random Projection/Experiments/real_data/YearPredictionMSD.txt\"", ",", "\n", "delimiter", "=", "','", ",", "nrows", "=", "10000", ")", ".", "as_matrix", "(", ")", "\n", "idx", "=", "np", ".", "random", ".", "choice", "(", "10000", ",", "n", ",", "replace", "=", "False", ")", "\n", "self", ".", "p", "=", "90", "\n", "self", ".", "gamma", "=", "self", ".", "p", "/", "self", ".", "n", "\n", "self", ".", "X", "=", "msd", "[", "idx", ",", "1", ":", "]", "\n", "self", ".", "Y", "=", "msd", "[", "idx", ",", "0", "]", ".", "reshape", "(", "(", "n", ",", "1", ")", ")", "\n", "self", ".", "beta_full", "=", "np", ".", "linalg", ".", "inv", "(", "self", ".", "X", ".", "T", "@", "self", ".", "X", ")", "@", "self", ".", "X", ".", "T", "@", "self", ".", "Y", "\n", "self", ".", "r_full", "=", "np", ".", "linalg", ".", "norm", "(", "self", ".", "Y", "-", "self", ".", "X", "@", "self", ".", "beta_full", ")", "**", "2", "\n", "", "elif", "type", "==", "'nycflight'", ":", "\n", "            ", "flt", "=", "pd", ".", "read_csv", "(", "\n", "'/Users/sifanliu/Dropbox/Random Projection/Experiments/real_data/nycflight/nycflight.csv'", ")", ".", "as_matrix", "(", ")", "\n", "idx", "=", "np", ".", "random", ".", "choice", "(", "10000", ",", "n", ",", "replace", "=", "False", ")", "\n", "self", ".", "p", "=", "21", "\n", "self", ".", "gamma", "=", "self", ".", "p", "/", "self", ".", "n", "\n", "self", ".", "Y", "=", "flt", "[", "idx", ",", "1", "]", ".", "reshape", "(", "(", "n", ",", "1", ")", ")", "# the first column is the response", "\n", "self", ".", "X", "=", "flt", "[", "idx", ",", "2", ":", "]", "\n", "self", ".", "beta_full", "=", "np", ".", "linalg", ".", "inv", "(", "self", ".", "X", ".", "T", "@", "self", ".", "X", ")", "@", "self", ".", "X", ".", "T", "@", "self", ".", "Y", "\n", "self", ".", "r_full", "=", "np", ".", "linalg", ".", "norm", "(", "self", ".", "Y", "-", "self", ".", "X", "@", "self", ".", "beta_full", ")", "**", "2", "\n", "", "", "", ""]]}